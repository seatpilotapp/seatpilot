(()=>{"use strict";var t={287:(t,e)=>{
/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var i=Symbol.for("react.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),u=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,f={};function y(t,e,i){this.props=t,this.context=e,this.refs=f,this.updater=i||g}function v(){}function b(t,e,i){this.props=t,this.context=e,this.refs=f,this.updater=i||g}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var C=b.prototype=new v;C.constructor=b,m(C,y.prototype),C.isPureReactComponent=!0;var I=Array.isArray,M=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function w(t,e,n){var s,r={},o=null,a=null;if(null!=e)for(s in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)M.call(e,s)&&!x.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){for(var h=Array(l),c=0;c<l;c++)h[c]=arguments[c+2];r.children=h}if(t&&t.defaultProps)for(s in l=t.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:i,type:t,key:o,ref:a,props:r,_owner:S.current}}function D(t){return"object"==typeof t&&null!==t&&t.$$typeof===i}var E=/\/+/g;function T(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(t){return e[t]})}(""+t.key):e.toString(36)}function A(t,e,s,r,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case i:case n:l=!0}}if(l)return o=o(l=t),t=""===r?"."+T(l,0):r,I(o)?(s="",null!=t&&(s=t.replace(E,"$&/")+"/"),A(o,e,s,"",function(t){return t})):null!=o&&(D(o)&&(o=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+t)),e.push(o)),1;if(l=0,r=""===r?".":r+":",I(t))for(var h=0;h<t.length;h++){var c=r+T(a=t[h],h);l+=A(a,e,s,c,o)}else if(c=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=u&&t[u]||t["@@iterator"])?t:null}(t),"function"==typeof c)for(t=c.call(t),h=0;!(a=t.next()).done;)l+=A(a=a.value,e,s,c=r+T(a,h++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function N(t,e,i){if(null==t)return t;var n=[],s=0;return A(t,n,"","",function(t){return e.call(i,t,s++)}),n}function L(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)},function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var O={current:null},k={transition:null},z={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:k,ReactCurrentOwner:S};function P(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:N,forEach:function(t,e,i){N(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return N(t,function(){e++}),e},toArray:function(t){return N(t,function(t){return t})||[]},only:function(t){if(!D(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=s,e.Profiler=o,e.PureComponent=b,e.StrictMode=r,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,e.act=P,e.cloneElement=function(t,e,n){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=m({},t.props),r=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=S.current),void 0!==e.key&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(h in e)M.call(e,h)&&!x.hasOwnProperty(h)&&(s[h]=void 0===e[h]&&void 0!==l?l[h]:e[h])}var h=arguments.length-2;if(1===h)s.children=n;else if(1<h){l=Array(h);for(var c=0;c<h;c++)l[c]=arguments[c+2];s.children=l}return{$$typeof:i,type:t.type,key:r,ref:o,props:s,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=w,e.createFactory=function(t){var e=w.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:h,render:t}},e.isValidElement=D,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:L}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=k.transition;k.transition={};try{t()}finally{k.transition=e}},e.unstable_act=P,e.useCallback=function(t,e){return O.current.useCallback(t,e)},e.useContext=function(t){return O.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return O.current.useDeferredValue(t)},e.useEffect=function(t,e){return O.current.useEffect(t,e)},e.useId=function(){return O.current.useId()},e.useImperativeHandle=function(t,e,i){return O.current.useImperativeHandle(t,e,i)},e.useInsertionEffect=function(t,e){return O.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return O.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return O.current.useMemo(t,e)},e.useReducer=function(t,e,i){return O.current.useReducer(t,e,i)},e.useRef=function(t){return O.current.useRef(t)},e.useState=function(t){return O.current.useState(t)},e.useSyncExternalStore=function(t,e,i){return O.current.useSyncExternalStore(t,e,i)},e.useTransition=function(){return O.current.useTransition()},e.version="18.3.1"},338:(t,e,i)=>{var n=i(961);e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot},463:(t,e)=>{
/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
function i(t,e){var i=t.length;t.push(e);t:for(;0<i;){var n=i-1>>>1,s=t[n];if(!(0<r(s,e)))break t;t[n]=e,t[i]=s,i=n}}function n(t){return 0===t.length?null:t[0]}function s(t){if(0===t.length)return null;var e=t[0],i=t.pop();if(i!==e){t[0]=i;t:for(var n=0,s=t.length,o=s>>>1;n<o;){var a=2*(n+1)-1,l=t[a],h=a+1,c=t[h];if(0>r(l,i))h<s&&0>r(c,l)?(t[n]=c,t[h]=i,n=h):(t[n]=l,t[a]=i,n=a);else{if(!(h<s&&0>r(c,i)))break t;t[n]=c,t[h]=i,n=h}}}return e}function r(t,e){var i=t.sortIndex-e.sortIndex;return 0!==i?i:t.id-e.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var h=[],c=[],d=1,p=null,u=3,g=!1,m=!1,f=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function C(t){for(var e=n(c);null!==e;){if(null===e.callback)s(c);else{if(!(e.startTime<=t))break;s(c),e.sortIndex=e.expirationTime,i(h,e)}e=n(c)}}function I(t){if(f=!1,C(t),!m)if(null!==n(h))m=!0,k(M);else{var e=n(c);null!==e&&z(I,e.startTime-t)}}function M(t,i){m=!1,f&&(f=!1,v(D),D=-1),g=!0;var r=u;try{for(C(i),p=n(h);null!==p&&(!(p.expirationTime>i)||t&&!A());){var o=p.callback;if("function"==typeof o){p.callback=null,u=p.priorityLevel;var a=o(p.expirationTime<=i);i=e.unstable_now(),"function"==typeof a?p.callback=a:p===n(h)&&s(h),C(i)}else s(h);p=n(h)}if(null!==p)var l=!0;else{var d=n(c);null!==d&&z(I,d.startTime-i),l=!1}return l}finally{p=null,u=r,g=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,w=null,D=-1,E=5,T=-1;function A(){return!(e.unstable_now()-T<E)}function N(){if(null!==w){var t=e.unstable_now();T=t;var i=!0;try{i=w(!0,t)}finally{i?S():(x=!1,w=null)}}else x=!1}if("function"==typeof b)S=function(){b(N)};else if("undefined"!=typeof MessageChannel){var L=new MessageChannel,O=L.port2;L.port1.onmessage=N,S=function(){O.postMessage(null)}}else S=function(){y(N,0)};function k(t){w=t,x||(x=!0,S())}function z(t,i){D=y(function(){t(e.unstable_now())},i)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||g||(m=!0,k(M))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return u},e.unstable_getFirstCallbackNode=function(){return n(h)},e.unstable_next=function(t){switch(u){case 1:case 2:case 3:var e=3;break;default:e=u}var i=u;u=e;try{return t()}finally{u=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var i=u;u=t;try{return e()}finally{u=i}},e.unstable_scheduleCallback=function(t,s,r){var o=e.unstable_now();switch("object"==typeof r&&null!==r?r="number"==typeof(r=r.delay)&&0<r?o+r:o:r=o,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:d++,callback:s,priorityLevel:t,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(t.sortIndex=r,i(c,t),null===n(h)&&t===n(c)&&(f?(v(D),D=-1):f=!0,z(I,r-o))):(t.sortIndex=a,i(h,t),m||g||(m=!0,k(M))),t},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(t){var e=u;return function(){var i=u;u=e;try{return t.apply(this,arguments)}finally{u=i}}}},540:(t,e,i)=>{t.exports=i(287)},551:(t,e,i)=>{
/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
var n=i(540),s=i(982);function r(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(t,e){h(t,e),h(t+"Capture",e)}function h(t,e){for(a[t]=e,t=0;t<e.length;t++)o.add(e[t])}var c=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},g={};function m(t,e,i,n,s,r,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){f[t]=new m(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];f[e]=new m(e,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){f[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){f[t]=new m(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){f[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){f[t]=new m(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){f[t]=new m(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){f[t]=new m(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){f[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(t){return t[1].toUpperCase()}function b(t,e,i,n){var s=f.hasOwnProperty(e)?f[e]:null;(null!==s?0!==s.type:n||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,i,n){if(null==e||function(t,e,i,n){if(null!==i&&0===i.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==i?!i.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,i,n))return!0;if(n)return!1;if(null!==i)switch(i.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,i,s,n)&&(i=null),n||null===s?function(t){return!!d.call(g,t)||!d.call(u,t)&&(p.test(t)?g[t]=!0:(u[t]=!0,!1))}(e)&&(null===i?t.removeAttribute(e):t.setAttribute(e,""+i)):s.mustUseProperty?t[s.propertyName]=null===i?3!==s.type&&"":i:(e=s.attributeName,n=s.attributeNamespace,null===i?t.removeAttribute(e):(i=3===(s=s.type)||4===s&&!0===i?"":""+i,n?t.setAttributeNS(n,e,i):t.setAttribute(e,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(y,v);f[e]=new m(e,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(y,v);f[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(y,v);f[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){f[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)}),f.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){f[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)});var C=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),M=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function P(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=z&&t[z]||t["@@iterator"])?t:null}var j,B=Object.assign;function H(t){if(void 0===j)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);j=e&&e[1]||""}return"\n"+j+t}var R=!1;function V(t,e){if(!t||R)return"";R=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(t){var n=t}Reflect.construct(t,[],e)}else{try{e.call()}catch(t){n=t}t.call(e.prototype)}else{try{throw Error()}catch(t){n=t}t()}}catch(e){if(e&&n&&"string"==typeof e.stack){for(var s=e.stack.split("\n"),r=n.stack.split("\n"),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==r[a]){var l="\n"+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=o&&0<=a);break}}}finally{R=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?H(t):""}function U(t){switch(t.tag){case 5:return H(t.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return t=V(t.type,!1);case 11:return t=V(t.type.render,!1);case 1:return t=V(t.type,!0);default:return""}}function F(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case S:return"Fragment";case M:return"Portal";case w:return"Profiler";case x:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case E:return(t.displayName||"Context")+".Consumer";case D:return(t._context.displayName||"Context")+".Provider";case T:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case L:return null!==(e=t.displayName||null)?e:F(t.type)||"Memo";case O:e=t._payload,t=t._init;try{return F(t(e))}catch(t){}}return null}function W(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(e);case 8:return e===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e}return null}function Y(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function _(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Q(t){t._valueTracker||(t._valueTracker=function(t){var e=_(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var s=i.get,r=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(t){n=""+t,r.call(this,t)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Z(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=_(t)?t.checked?"true":"false":t.value),(t=n)!==i&&(e.setValue(t),!0)}function q(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function X(t,e){var i=e.checked;return B({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:t._wrapperState.initialChecked})}function G(t,e){var i=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;i=Y(null!=e.value?e.value:i),t._wrapperState={initialChecked:n,initialValue:i,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function K(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function J(t,e){K(t,e);var i=Y(e.value),n=e.type;if(null!=i)"number"===n?(0===i&&""===t.value||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,i):e.hasOwnProperty("defaultValue")&&tt(t,e.type,Y(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function $(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}""!==(i=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==i&&(t.name=i)}function tt(t,e,i){"number"===e&&q(t.ownerDocument)===t||(null==i?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var et=Array.isArray;function it(t,e,i,n){if(t=t.options,e){e={};for(var s=0;s<i.length;s++)e["$"+i[s]]=!0;for(i=0;i<t.length;i++)s=e.hasOwnProperty("$"+t[i].value),t[i].selected!==s&&(t[i].selected=s),s&&n&&(t[i].defaultSelected=!0)}else{for(i=""+Y(i),e=null,s=0;s<t.length;s++){if(t[s].value===i)return t[s].selected=!0,void(n&&(t[s].defaultSelected=!0));null!==e||t[s].disabled||(e=t[s])}null!==e&&(e.selected=!0)}}function nt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(r(91));return B({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function st(t,e){var i=e.value;if(null==i){if(i=e.children,e=e.defaultValue,null!=i){if(null!=e)throw Error(r(92));if(et(i)){if(1<i.length)throw Error(r(93));i=i[0]}e=i}null==e&&(e=""),i=e}t._wrapperState={initialValue:Y(i)}}function rt(t,e){var i=Y(e.value),n=Y(e.defaultValue);null!=i&&((i=""+i)!==t.value&&(t.value=i),null==e.defaultValue&&t.defaultValue!==i&&(t.defaultValue=i)),null!=n&&(t.defaultValue=""+n)}function ot(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ht,ct,dt=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ht=ht||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ht.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,i,n){MSApp.execUnsafeLocalFunction(function(){return ct(t,e)})}:ct);function pt(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&3===i.nodeType)return void(i.nodeValue=e)}t.textContent=e}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gt=["Webkit","ms","Moz","O"];function mt(t,e,i){return null==e||"boolean"==typeof e||""===e?"":i||"number"!=typeof e||0===e||ut.hasOwnProperty(t)&&ut[t]?(""+e).trim():e+"px"}function ft(t,e){for(var i in t=t.style,e)if(e.hasOwnProperty(i)){var n=0===i.indexOf("--"),s=mt(i,e[i],n);"float"===i&&(i="cssFloat"),n?t.setProperty(i,s):t[i]=s}}Object.keys(ut).forEach(function(t){gt.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ut[e]=ut[t]})});var yt=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,e){if(e){if(yt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(r(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(r(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(r(62))}}function bt(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=null;function It(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Mt=null,St=null,xt=null;function wt(t){if(t=bs(t)){if("function"!=typeof Mt)throw Error(r(280));var e=t.stateNode;e&&(e=Is(e),Mt(t.stateNode,t.type,e))}}function Dt(t){St?xt?xt.push(t):xt=[t]:St=t}function Et(){if(St){var t=St,e=xt;if(xt=St=null,wt(t),e)for(t=0;t<e.length;t++)wt(e[t])}}function Tt(t,e){return t(e)}function At(){}var Nt=!1;function Lt(t,e,i){if(Nt)return t(e,i);Nt=!0;try{return Tt(t,e,i)}finally{Nt=!1,(null!==St||null!==xt)&&(At(),Et())}}function Ot(t,e){var i=t.stateNode;if(null===i)return null;var n=Is(i);if(null===n)return null;i=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}if(t)return null;if(i&&"function"!=typeof i)throw Error(r(231,e,typeof i));return i}var kt=!1;if(c)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){kt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(ct){kt=!1}function Pt(t,e,i,n,s,r,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{e.apply(i,h)}catch(t){this.onError(t)}}var jt=!1,Bt=null,Ht=!1,Rt=null,Vt={onError:function(t){jt=!0,Bt=t}};function Ut(t,e,i,n,s,r,o,a,l){jt=!1,Bt=null,Pt.apply(Vt,arguments)}function Ft(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{!!(4098&(e=t).flags)&&(i=e.return),t=e.return}while(t)}return 3===e.tag?i:null}function Wt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Yt(t){if(Ft(t)!==t)throw Error(r(188))}function _t(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Ft(t)))throw Error(r(188));return e!==t?null:t}for(var i=t,n=e;;){var s=i.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(n=s.return)){i=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===i)return Yt(s),t;if(o===n)return Yt(s),e;o=o.sibling}throw Error(r(188))}if(i.return!==n.return)i=s,n=o;else{for(var a=!1,l=s.child;l;){if(l===i){a=!0,i=s,n=o;break}if(l===n){a=!0,n=s,i=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===i){a=!0,i=o,n=s;break}if(l===n){a=!0,n=o,i=s;break}l=l.sibling}if(!a)throw Error(r(189))}}if(i.alternate!==n)throw Error(r(190))}if(3!==i.tag)throw Error(r(188));return i.stateNode.current===i?t:e}(t))?Qt(t):null}function Qt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Qt(t);if(null!==e)return e;t=t.sibling}return null}var Zt=s.unstable_scheduleCallback,qt=s.unstable_cancelCallback,Xt=s.unstable_shouldYield,Gt=s.unstable_requestPaint,Kt=s.unstable_now,Jt=s.unstable_getCurrentPriorityLevel,$t=s.unstable_ImmediatePriority,te=s.unstable_UserBlockingPriority,ee=s.unstable_NormalPriority,ie=s.unstable_LowPriority,ne=s.unstable_IdlePriority,se=null,re=null;var oe=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var he=64,ce=4194304;function de(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pe(t,e){var i=t.pendingLanes;if(0===i)return 0;var n=0,s=t.suspendedLanes,r=t.pingedLanes,o=268435455&i;if(0!==o){var a=o&~s;0!==a?n=de(a):0!==(r&=o)&&(n=de(r))}else 0!==(o=i&~s)?n=de(o):0!==r&&(n=de(r));if(0===n)return 0;if(0!==e&&e!==n&&0===(e&s)&&((s=n&-n)>=(r=e&-e)||16===s&&4194240&r))return e;if(4&n&&(n|=16&i),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=n;0<e;)s=1<<(i=31-oe(e)),n|=t[i],e&=~s;return n}function ue(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function ge(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=he;return!(4194240&(he<<=1))&&(he=64),t}function fe(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function ye(t,e,i){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-oe(e)]=i}function ve(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var n=31-oe(i),s=1<<n;s&e|t[n]&e&&(t[n]|=e),i&=~s}}var be=0;function Ce(t){return 1<(t&=-t)?4<t?268435455&t?16:536870912:4:1}var Ie,Me,Se,xe,we,De=!1,Ee=[],Te=null,Ae=null,Ne=null,Le=new Map,Oe=new Map,ke=[],ze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pe(t,e){switch(t){case"focusin":case"focusout":Te=null;break;case"dragenter":case"dragleave":Ae=null;break;case"mouseover":case"mouseout":Ne=null;break;case"pointerover":case"pointerout":Le.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oe.delete(e.pointerId)}}function je(t,e,i,n,s,r){return null===t||t.nativeEvent!==r?(t={blockedOn:e,domEventName:i,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},null!==e&&(null!==(e=bs(e))&&Me(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,null!==s&&-1===e.indexOf(s)&&e.push(s),t)}function Be(t){var e=vs(t.target);if(null!==e){var i=Ft(e);if(null!==i)if(13===(e=i.tag)){if(null!==(e=Wt(i)))return t.blockedOn=e,void we(t.priority,function(){Se(i)})}else if(3===e&&i.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}t.blockedOn=null}function He(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var i=Xe(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==i)return null!==(e=bs(i))&&Me(e),t.blockedOn=i,!1;var n=new(i=t.nativeEvent).constructor(i.type,i);Ct=n,i.target.dispatchEvent(n),Ct=null,e.shift()}return!0}function Re(t,e,i){He(t)&&i.delete(e)}function Ve(){De=!1,null!==Te&&He(Te)&&(Te=null),null!==Ae&&He(Ae)&&(Ae=null),null!==Ne&&He(Ne)&&(Ne=null),Le.forEach(Re),Oe.forEach(Re)}function Ue(t,e){t.blockedOn===e&&(t.blockedOn=null,De||(De=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Ve)))}function Fe(t){function e(e){return Ue(e,t)}if(0<Ee.length){Ue(Ee[0],t);for(var i=1;i<Ee.length;i++){var n=Ee[i];n.blockedOn===t&&(n.blockedOn=null)}}for(null!==Te&&Ue(Te,t),null!==Ae&&Ue(Ae,t),null!==Ne&&Ue(Ne,t),Le.forEach(e),Oe.forEach(e),i=0;i<ke.length;i++)(n=ke[i]).blockedOn===t&&(n.blockedOn=null);for(;0<ke.length&&null===(i=ke[0]).blockedOn;)Be(i),null===i.blockedOn&&ke.shift()}var We=C.ReactCurrentBatchConfig,Ye=!0;function _e(t,e,i,n){var s=be,r=We.transition;We.transition=null;try{be=1,Ze(t,e,i,n)}finally{be=s,We.transition=r}}function Qe(t,e,i,n){var s=be,r=We.transition;We.transition=null;try{be=4,Ze(t,e,i,n)}finally{be=s,We.transition=r}}function Ze(t,e,i,n){if(Ye){var s=Xe(t,e,i,n);if(null===s)Yn(t,e,n,qe,i),Pe(t,n);else if(function(t,e,i,n,s){switch(e){case"focusin":return Te=je(Te,t,e,i,n,s),!0;case"dragenter":return Ae=je(Ae,t,e,i,n,s),!0;case"mouseover":return Ne=je(Ne,t,e,i,n,s),!0;case"pointerover":var r=s.pointerId;return Le.set(r,je(Le.get(r)||null,t,e,i,n,s)),!0;case"gotpointercapture":return r=s.pointerId,Oe.set(r,je(Oe.get(r)||null,t,e,i,n,s)),!0}return!1}(s,t,e,i,n))n.stopPropagation();else if(Pe(t,n),4&e&&-1<ze.indexOf(t)){for(;null!==s;){var r=bs(s);if(null!==r&&Ie(r),null===(r=Xe(t,e,i,n))&&Yn(t,e,n,qe,i),r===s)break;s=r}null!==s&&n.stopPropagation()}else Yn(t,e,n,null,i)}}var qe=null;function Xe(t,e,i,n){if(qe=null,null!==(t=vs(t=It(n))))if(null===(e=Ft(t)))t=null;else if(13===(i=e.tag)){if(null!==(t=Wt(e)))return t;t=null}else if(3===i){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ge(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jt()){case $t:return 1;case te:return 4;case ee:case ie:return 16;case ne:return 536870912;default:return 16}default:return 16}}var Ke=null,Je=null,$e=null;function ti(){if($e)return $e;var t,e,i=Je,n=i.length,s="value"in Ke?Ke.value:Ke.textContent,r=s.length;for(t=0;t<n&&i[t]===s[t];t++);var o=n-t;for(e=1;e<=o&&i[n-e]===s[r-e];e++);return $e=s.slice(t,1<e?1-e:void 0)}function ei(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function ii(){return!0}function ni(){return!1}function si(t){function e(e,i,n,s,r){for(var o in this._reactName=e,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null,t)t.hasOwnProperty(o)&&(e=t[o],this[o]=e?e(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?ii:ni,this.isPropagationStopped=ni,this}return B(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),e}var ri,oi,ai,li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=si(li),ci=B({},li,{view:0,detail:0}),di=si(ci),pi=B({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xi,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ai&&(ai&&"mousemove"===t.type?(ri=t.screenX-ai.screenX,oi=t.screenY-ai.screenY):oi=ri=0,ai=t),ri)},movementY:function(t){return"movementY"in t?t.movementY:oi}}),ui=si(pi),gi=si(B({},pi,{dataTransfer:0})),mi=si(B({},ci,{relatedTarget:0})),fi=si(B({},li,{animationName:0,elapsedTime:0,pseudoElement:0})),yi=B({},li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vi=si(yi),bi=si(B({},li,{data:0})),Ci={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ii={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Si(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Mi[t])&&!!e[t]}function xi(){return Si}var wi=B({},ci,{key:function(t){if(t.key){var e=Ci[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=ei(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Ii[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xi,charCode:function(t){return"keypress"===t.type?ei(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?ei(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Di=si(wi),Ei=si(B({},pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ti=si(B({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xi})),Ai=si(B({},li,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ni=B({},pi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Li=si(Ni),Oi=[9,13,27,32],ki=c&&"CompositionEvent"in window,zi=null;c&&"documentMode"in document&&(zi=document.documentMode);var Pi=c&&"TextEvent"in window&&!zi,ji=c&&(!ki||zi&&8<zi&&11>=zi),Bi=String.fromCharCode(32),Hi=!1;function Ri(t,e){switch(t){case"keyup":return-1!==Oi.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vi(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var Ui=!1;var Fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Fi[t.type]:"textarea"===e}function Yi(t,e,i,n){Dt(n),0<(e=Qn(e,"onChange")).length&&(i=new hi("onChange","change",null,i,n),t.push({event:i,listeners:e}))}var _i=null,Qi=null;function Zi(t){Hn(t,0)}function qi(t){if(Z(Cs(t)))return t}function Xi(t,e){if("change"===t)return e}var Gi=!1;if(c){var Ki;if(c){var Ji="oninput"in document;if(!Ji){var $i=document.createElement("div");$i.setAttribute("oninput","return;"),Ji="function"==typeof $i.oninput}Ki=Ji}else Ki=!1;Gi=Ki&&(!document.documentMode||9<document.documentMode)}function tn(){_i&&(_i.detachEvent("onpropertychange",en),Qi=_i=null)}function en(t){if("value"===t.propertyName&&qi(Qi)){var e=[];Yi(e,Qi,t,It(t)),Lt(Zi,e)}}function nn(t,e,i){"focusin"===t?(tn(),Qi=i,(_i=e).attachEvent("onpropertychange",en)):"focusout"===t&&tn()}function sn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qi(Qi)}function rn(t,e){if("click"===t)return qi(e)}function on(t,e){if("input"===t||"change"===t)return qi(e)}var an="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e};function ln(t,e){if(an(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!d.call(e,s)||!an(t[s],e[s]))return!1}return!0}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cn(t,e){var i,n=hn(t);for(t=0;n;){if(3===n.nodeType){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=hn(n)}}function dn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?dn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pn(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var i="string"==typeof e.contentWindow.location.href}catch(t){i=!1}if(!i)break;e=q((t=e.contentWindow).document)}return e}function un(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function gn(t){var e=pn(),i=t.focusedElem,n=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&dn(i.ownerDocument.documentElement,i)){if(null!==n&&un(i))if(e=n.start,void 0===(t=n.end)&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if((t=(e=i.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var s=i.textContent.length,r=Math.min(n.start,s);n=void 0===n.end?r:Math.min(n.end,s),!t.extend&&r>n&&(s=n,n=r,r=s),s=cn(i,r);var o=cn(i,n);s&&o&&(1!==t.rangeCount||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&((e=e.createRange()).setStart(s.node,s.offset),t.removeAllRanges(),r>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}for(e=[],t=i;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"==typeof i.focus&&i.focus(),i=0;i<e.length;i++)(t=e[i]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mn=c&&"documentMode"in document&&11>=document.documentMode,fn=null,yn=null,vn=null,bn=!1;function Cn(t,e,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;bn||null==fn||fn!==q(n)||("selectionStart"in(n=fn)&&un(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&ln(vn,n)||(vn=n,0<(n=Qn(yn,"onSelect")).length&&(e=new hi("onSelect","select",null,e,i),t.push({event:e,listeners:n}),e.target=fn)))}function In(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Mn={animationend:In("Animation","AnimationEnd"),animationiteration:In("Animation","AnimationIteration"),animationstart:In("Animation","AnimationStart"),transitionend:In("Transition","TransitionEnd")},Sn={},xn={};function wn(t){if(Sn[t])return Sn[t];if(!Mn[t])return t;var e,i=Mn[t];for(e in i)if(i.hasOwnProperty(e)&&e in xn)return Sn[t]=i[e];return t}c&&(xn=document.createElement("div").style,"AnimationEvent"in window||(delete Mn.animationend.animation,delete Mn.animationiteration.animation,delete Mn.animationstart.animation),"TransitionEvent"in window||delete Mn.transitionend.transition);var Dn=wn("animationend"),En=wn("animationiteration"),Tn=wn("animationstart"),An=wn("transitionend"),Nn=new Map,Ln="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function On(t,e){Nn.set(t,e),l(e,[t])}for(var kn=0;kn<Ln.length;kn++){var zn=Ln[kn];On(zn.toLowerCase(),"on"+(zn[0].toUpperCase()+zn.slice(1)))}On(Dn,"onAnimationEnd"),On(En,"onAnimationIteration"),On(Tn,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(An,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pn));function Bn(t,e,i){var n=t.type||"unknown-event";t.currentTarget=i,function(t,e,i,n,s,o,a,l,h){if(Ut.apply(this,arguments),jt){if(!jt)throw Error(r(198));var c=Bt;jt=!1,Bt=null,Ht||(Ht=!0,Rt=c)}}(n,e,void 0,t),t.currentTarget=null}function Hn(t,e){e=!!(4&e);for(var i=0;i<t.length;i++){var n=t[i],s=n.event;n=n.listeners;t:{var r=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break t;Bn(s,a,h),r=l}else for(o=0;o<n.length;o++){if(l=(a=n[o]).instance,h=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break t;Bn(s,a,h),r=l}}}if(Ht)throw t=Rt,Ht=!1,Rt=null,t}function Rn(t,e){var i=e[ms];void 0===i&&(i=e[ms]=new Set);var n=t+"__bubble";i.has(n)||(Wn(e,t,2,!1),i.add(n))}function Vn(t,e,i){var n=0;e&&(n|=4),Wn(i,t,n,e)}var Un="_reactListening"+Math.random().toString(36).slice(2);function Fn(t){if(!t[Un]){t[Un]=!0,o.forEach(function(e){"selectionchange"!==e&&(jn.has(e)||Vn(e,!1,t),Vn(e,!0,t))});var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Un]||(e[Un]=!0,Vn("selectionchange",!1,e))}}function Wn(t,e,i,n){switch(Ge(e)){case 1:var s=_e;break;case 4:s=Qe;break;default:s=Ze}i=s.bind(null,e,i,t),s=void 0,!kt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(s=!0),n?void 0!==s?t.addEventListener(e,i,{capture:!0,passive:s}):t.addEventListener(e,i,!0):void 0!==s?t.addEventListener(e,i,{passive:s}):t.addEventListener(e,i,!1)}function Yn(t,e,i,n,s){var r=n;if(!(1&e||2&e||null===n))t:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=vs(a)))return;if(5===(l=o.tag)||6===l){n=r=o;continue t}a=a.parentNode}}n=n.return}Lt(function(){var n=r,s=It(i),o=[];t:{var a=Nn.get(t);if(void 0!==a){var l=hi,h=t;switch(t){case"keypress":if(0===ei(i))break t;case"keydown":case"keyup":l=Di;break;case"focusin":h="focus",l=mi;break;case"focusout":h="blur",l=mi;break;case"beforeblur":case"afterblur":l=mi;break;case"click":if(2===i.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ti;break;case Dn:case En:case Tn:l=fi;break;case An:l=Ai;break;case"scroll":l=di;break;case"wheel":l=Li;break;case"copy":case"cut":case"paste":l=vi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ei}var c=!!(4&e),d=!c&&"scroll"===t,p=c?null!==a?a+"Capture":null:a;c=[];for(var u,g=n;null!==g;){var m=(u=g).stateNode;if(5===u.tag&&null!==m&&(u=m,null!==p&&(null!=(m=Ot(g,p))&&c.push(_n(g,m,u)))),d)break;g=g.return}0<c.length&&(a=new l(a,h,null,i,s),o.push({event:a,listeners:c}))}}if(!(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||i===Ct||!(h=i.relatedTarget||i.fromElement)||!vs(h)&&!h[gs])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(h=(h=i.relatedTarget||i.toElement)?vs(h):null)&&(h!==(d=Ft(h))||5!==h.tag&&6!==h.tag)&&(h=null)):(l=null,h=n),l!==h)){if(c=ui,m="onMouseLeave",p="onMouseEnter",g="mouse","pointerout"!==t&&"pointerover"!==t||(c=Ei,m="onPointerLeave",p="onPointerEnter",g="pointer"),d=null==l?a:Cs(l),u=null==h?a:Cs(h),(a=new c(m,g+"leave",l,i,s)).target=d,a.relatedTarget=u,m=null,vs(s)===n&&((c=new c(p,g+"enter",h,i,s)).target=u,c.relatedTarget=d,m=c),d=m,l&&h)t:{for(p=h,g=0,u=c=l;u;u=Zn(u))g++;for(u=0,m=p;m;m=Zn(m))u++;for(;0<g-u;)c=Zn(c),g--;for(;0<u-g;)p=Zn(p),u--;for(;g--;){if(c===p||null!==p&&c===p.alternate)break t;c=Zn(c),p=Zn(p)}c=null}else c=null;null!==l&&qn(o,a,l,c,!1),null!==h&&null!==d&&qn(o,d,h,c,!0)}if("select"===(l=(a=n?Cs(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var f=Xi;else if(Wi(a))if(Gi)f=on;else{f=sn;var y=nn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(f=rn);switch(f&&(f=f(t,n))?Yi(o,f,i,s):(y&&y(t,a,n),"focusout"===t&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&tt(a,"number",a.value)),y=n?Cs(n):window,t){case"focusin":(Wi(y)||"true"===y.contentEditable)&&(fn=y,yn=n,vn=null);break;case"focusout":vn=yn=fn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,Cn(o,i,s);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":Cn(o,i,s)}var v;if(ki)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Ui?Ri(t,i)&&(b="onCompositionEnd"):"keydown"===t&&229===i.keyCode&&(b="onCompositionStart");b&&(ji&&"ko"!==i.locale&&(Ui||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ui&&(v=ti()):(Je="value"in(Ke=s)?Ke.value:Ke.textContent,Ui=!0)),0<(y=Qn(n,b)).length&&(b=new bi(b,t,null,i,s),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vi(i))&&(b.data=v))),(v=Pi?function(t,e){switch(t){case"compositionend":return Vi(e);case"keypress":return 32!==e.which?null:(Hi=!0,Bi);case"textInput":return(t=e.data)===Bi&&Hi?null:t;default:return null}}(t,i):function(t,e){if(Ui)return"compositionend"===t||!ki&&Ri(t,e)?(t=ti(),$e=Je=Ke=null,Ui=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ji&&"ko"!==e.locale?null:e.data}}(t,i))&&(0<(n=Qn(n,"onBeforeInput")).length&&(s=new bi("onBeforeInput","beforeinput",null,i,s),o.push({event:s,listeners:n}),s.data=v))}Hn(o,e)})}function _n(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Qn(t,e){for(var i=e+"Capture",n=[];null!==t;){var s=t,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=Ot(t,i))&&n.unshift(_n(t,r,s)),null!=(r=Ot(t,e))&&n.push(_n(t,r,s))),t=t.return}return n}function Zn(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qn(t,e,i,n,s){for(var r=e._reactName,o=[];null!==i&&i!==n;){var a=i,l=a.alternate,h=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==h&&(a=h,s?null!=(l=Ot(i,r))&&o.unshift(_n(i,l,a)):s||null!=(l=Ot(i,r))&&o.push(_n(i,l,a))),i=i.return}0!==o.length&&t.push({event:e,listeners:o})}var Xn=/\r\n?/g,Gn=/\u0000|\uFFFD/g;function Kn(t){return("string"==typeof t?t:""+t).replace(Xn,"\n").replace(Gn,"")}function Jn(t,e,i){if(e=Kn(e),Kn(t)!==e&&i)throw Error(r(425))}function $n(){}var ts=null,es=null;function is(t,e){return"textarea"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ns="function"==typeof setTimeout?setTimeout:void 0,ss="function"==typeof clearTimeout?clearTimeout:void 0,rs="function"==typeof Promise?Promise:void 0,os="function"==typeof queueMicrotask?queueMicrotask:void 0!==rs?function(t){return rs.resolve(null).then(t).catch(as)}:ns;function as(t){setTimeout(function(){throw t})}function ls(t,e){var i=e,n=0;do{var s=i.nextSibling;if(t.removeChild(i),s&&8===s.nodeType)if("/$"===(i=s.data)){if(0===n)return t.removeChild(s),void Fe(e);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=s}while(i);Fe(e)}function hs(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function cs(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var i=t.data;if("$"===i||"$!"===i||"$?"===i){if(0===e)return t;e--}else"/$"===i&&e++}t=t.previousSibling}return null}var ds=Math.random().toString(36).slice(2),ps="__reactFiber$"+ds,us="__reactProps$"+ds,gs="__reactContainer$"+ds,ms="__reactEvents$"+ds,fs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(t){var e=t[ps];if(e)return e;for(var i=t.parentNode;i;){if(e=i[gs]||i[ps]){if(i=e.alternate,null!==e.child||null!==i&&null!==i.child)for(t=cs(t);null!==t;){if(i=t[ps])return i;t=cs(t)}return e}i=(t=i).parentNode}return null}function bs(t){return!(t=t[ps]||t[gs])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Cs(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(r(33))}function Is(t){return t[us]||null}var Ms=[],Ss=-1;function xs(t){return{current:t}}function ws(t){0>Ss||(t.current=Ms[Ss],Ms[Ss]=null,Ss--)}function Ds(t,e){Ss++,Ms[Ss]=t.current,t.current=e}var Es={},Ts=xs(Es),As=xs(!1),Ns=Es;function Ls(t,e){var i=t.type.contextTypes;if(!i)return Es;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in i)r[s]=e[s];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Os(t){return null!=(t=t.childContextTypes)}function ks(){ws(As),ws(Ts)}function zs(t,e,i){if(Ts.current!==Es)throw Error(r(168));Ds(Ts,e),Ds(As,i)}function Ps(t,e,i){var n=t.stateNode;if(e=e.childContextTypes,"function"!=typeof n.getChildContext)return i;for(var s in n=n.getChildContext())if(!(s in e))throw Error(r(108,W(t)||"Unknown",s));return B({},i,n)}function js(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Es,Ns=Ts.current,Ds(Ts,t),Ds(As,As.current),!0}function Bs(t,e,i){var n=t.stateNode;if(!n)throw Error(r(169));i?(t=Ps(t,e,Ns),n.__reactInternalMemoizedMergedChildContext=t,ws(As),ws(Ts),Ds(Ts,t)):ws(As),Ds(As,i)}var Hs=null,Rs=!1,Vs=!1;function Us(t){null===Hs?Hs=[t]:Hs.push(t)}function Fs(){if(!Vs&&null!==Hs){Vs=!0;var t=0,e=be;try{var i=Hs;for(be=1;t<i.length;t++){var n=i[t];do{n=n(!0)}while(null!==n)}Hs=null,Rs=!1}catch(e){throw null!==Hs&&(Hs=Hs.slice(t+1)),Zt($t,Fs),e}finally{be=e,Vs=!1}}return null}var Ws=[],Ys=0,_s=null,Qs=0,Zs=[],qs=0,Xs=null,Gs=1,Ks="";function Js(t,e){Ws[Ys++]=Qs,Ws[Ys++]=_s,_s=t,Qs=e}function $s(t,e,i){Zs[qs++]=Gs,Zs[qs++]=Ks,Zs[qs++]=Xs,Xs=t;var n=Gs;t=Ks;var s=32-oe(n)-1;n&=~(1<<s),i+=1;var r=32-oe(e)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Gs=1<<32-oe(e)+s|i<<s|n,Ks=r+t}else Gs=1<<r|i<<s|n,Ks=t}function tr(t){null!==t.return&&(Js(t,1),$s(t,1,0))}function er(t){for(;t===_s;)_s=Ws[--Ys],Ws[Ys]=null,Qs=Ws[--Ys],Ws[Ys]=null;for(;t===Xs;)Xs=Zs[--qs],Zs[qs]=null,Ks=Zs[--qs],Zs[qs]=null,Gs=Zs[--qs],Zs[qs]=null}var ir=null,nr=null,sr=!1,rr=null;function or(t,e){var i=Lh(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,null===(e=t.deletions)?(t.deletions=[i],t.flags|=16):e.push(i)}function ar(t,e){switch(t.tag){case 5:var i=t.type;return null!==(e=1!==e.nodeType||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ir=t,nr=hs(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ir=t,nr=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(i=null!==Xs?{id:Gs,overflow:Ks}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},(i=Lh(18,null,null,0)).stateNode=e,i.return=t,t.child=i,ir=t,nr=null,!0);default:return!1}}function lr(t){return!(!(1&t.mode)||128&t.flags)}function hr(t){if(sr){var e=nr;if(e){var i=e;if(!ar(t,e)){if(lr(t))throw Error(r(418));e=hs(i.nextSibling);var n=ir;e&&ar(t,e)?or(n,i):(t.flags=-4097&t.flags|2,sr=!1,ir=t)}}else{if(lr(t))throw Error(r(418));t.flags=-4097&t.flags|2,sr=!1,ir=t}}}function cr(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ir=t}function dr(t){if(t!==ir)return!1;if(!sr)return cr(t),sr=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!is(t.type,t.memoizedProps)),e&&(e=nr)){if(lr(t))throw pr(),Error(r(418));for(;e;)or(t,e),e=hs(e.nextSibling)}if(cr(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(r(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var i=t.data;if("/$"===i){if(0===e){nr=hs(t.nextSibling);break t}e--}else"$"!==i&&"$!"!==i&&"$?"!==i||e++}t=t.nextSibling}nr=null}}else nr=ir?hs(t.stateNode.nextSibling):null;return!0}function pr(){for(var t=nr;t;)t=hs(t.nextSibling)}function ur(){nr=ir=null,sr=!1}function gr(t){null===rr?rr=[t]:rr.push(t)}var mr=C.ReactCurrentBatchConfig;function fr(t,e,i){if(null!==(t=i.ref)&&"function"!=typeof t&&"object"!=typeof t){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(r(309));var n=i.stateNode}if(!n)throw Error(r(147,t));var s=n,o=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===o?e.ref:(e=function(t){var e=s.refs;null===t?delete e[o]:e[o]=t},e._stringRef=o,e)}if("string"!=typeof t)throw Error(r(284));if(!i._owner)throw Error(r(290,t))}return t}function yr(t,e){throw t=Object.prototype.toString.call(e),Error(r(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vr(t){return(0,t._init)(t._payload)}function br(t){function e(e,i){if(t){var n=e.deletions;null===n?(e.deletions=[i],e.flags|=16):n.push(i)}}function i(i,n){if(!t)return null;for(;null!==n;)e(i,n),n=n.sibling;return null}function n(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(t,e){return(t=kh(t,e)).index=0,t.sibling=null,t}function o(e,i,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index)<i?(e.flags|=2,i):n:(e.flags|=2,i):(e.flags|=1048576,i)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,i,n){return null===e||6!==e.tag?((e=Bh(i,t.mode,n)).return=t,e):((e=s(e,i)).return=t,e)}function h(t,e,i,n){var r=i.type;return r===S?d(t,e,i.props.children,n,i.key):null!==e&&(e.elementType===r||"object"==typeof r&&null!==r&&r.$$typeof===O&&vr(r)===e.type)?((n=s(e,i.props)).ref=fr(t,e,i),n.return=t,n):((n=zh(i.type,i.key,i.props,null,t.mode,n)).ref=fr(t,e,i),n.return=t,n)}function c(t,e,i,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==i.containerInfo||e.stateNode.implementation!==i.implementation?((e=Hh(i,t.mode,n)).return=t,e):((e=s(e,i.children||[])).return=t,e)}function d(t,e,i,n,r){return null===e||7!==e.tag?((e=Ph(i,t.mode,n,r)).return=t,e):((e=s(e,i)).return=t,e)}function p(t,e,i){if("string"==typeof e&&""!==e||"number"==typeof e)return(e=Bh(""+e,t.mode,i)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case I:return(i=zh(e.type,e.key,e.props,null,t.mode,i)).ref=fr(t,null,e),i.return=t,i;case M:return(e=Hh(e,t.mode,i)).return=t,e;case O:return p(t,(0,e._init)(e._payload),i)}if(et(e)||P(e))return(e=Ph(e,t.mode,i,null)).return=t,e;yr(t,e)}return null}function u(t,e,i,n){var s=null!==e?e.key:null;if("string"==typeof i&&""!==i||"number"==typeof i)return null!==s?null:l(t,e,""+i,n);if("object"==typeof i&&null!==i){switch(i.$$typeof){case I:return i.key===s?h(t,e,i,n):null;case M:return i.key===s?c(t,e,i,n):null;case O:return u(t,e,(s=i._init)(i._payload),n)}if(et(i)||P(i))return null!==s?null:d(t,e,i,n,null);yr(t,i)}return null}function g(t,e,i,n,s){if("string"==typeof n&&""!==n||"number"==typeof n)return l(e,t=t.get(i)||null,""+n,s);if("object"==typeof n&&null!==n){switch(n.$$typeof){case I:return h(e,t=t.get(null===n.key?i:n.key)||null,n,s);case M:return c(e,t=t.get(null===n.key?i:n.key)||null,n,s);case O:return g(t,e,i,(0,n._init)(n._payload),s)}if(et(n)||P(n))return d(e,t=t.get(i)||null,n,s,null);yr(e,n)}return null}function m(s,r,a,l){for(var h=null,c=null,d=r,m=r=0,f=null;null!==d&&m<a.length;m++){d.index>m?(f=d,d=null):f=d.sibling;var y=u(s,d,a[m],l);if(null===y){null===d&&(d=f);break}t&&d&&null===y.alternate&&e(s,d),r=o(y,r,m),null===c?h=y:c.sibling=y,c=y,d=f}if(m===a.length)return i(s,d),sr&&Js(s,m),h;if(null===d){for(;m<a.length;m++)null!==(d=p(s,a[m],l))&&(r=o(d,r,m),null===c?h=d:c.sibling=d,c=d);return sr&&Js(s,m),h}for(d=n(s,d);m<a.length;m++)null!==(f=g(d,s,m,a[m],l))&&(t&&null!==f.alternate&&d.delete(null===f.key?m:f.key),r=o(f,r,m),null===c?h=f:c.sibling=f,c=f);return t&&d.forEach(function(t){return e(s,t)}),sr&&Js(s,m),h}function f(s,a,l,h){var c=P(l);if("function"!=typeof c)throw Error(r(150));if(null==(l=c.call(l)))throw Error(r(151));for(var d=c=null,m=a,f=a=0,y=null,v=l.next();null!==m&&!v.done;f++,v=l.next()){m.index>f?(y=m,m=null):y=m.sibling;var b=u(s,m,v.value,h);if(null===b){null===m&&(m=y);break}t&&m&&null===b.alternate&&e(s,m),a=o(b,a,f),null===d?c=b:d.sibling=b,d=b,m=y}if(v.done)return i(s,m),sr&&Js(s,f),c;if(null===m){for(;!v.done;f++,v=l.next())null!==(v=p(s,v.value,h))&&(a=o(v,a,f),null===d?c=v:d.sibling=v,d=v);return sr&&Js(s,f),c}for(m=n(s,m);!v.done;f++,v=l.next())null!==(v=g(m,s,f,v.value,h))&&(t&&null!==v.alternate&&m.delete(null===v.key?f:v.key),a=o(v,a,f),null===d?c=v:d.sibling=v,d=v);return t&&m.forEach(function(t){return e(s,t)}),sr&&Js(s,f),c}return function t(n,r,o,l){if("object"==typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case I:t:{for(var h=o.key,c=r;null!==c;){if(c.key===h){if((h=o.type)===S){if(7===c.tag){i(n,c.sibling),(r=s(c,o.props.children)).return=n,n=r;break t}}else if(c.elementType===h||"object"==typeof h&&null!==h&&h.$$typeof===O&&vr(h)===c.type){i(n,c.sibling),(r=s(c,o.props)).ref=fr(n,c,o),r.return=n,n=r;break t}i(n,c);break}e(n,c),c=c.sibling}o.type===S?((r=Ph(o.props.children,n.mode,l,o.key)).return=n,n=r):((l=zh(o.type,o.key,o.props,null,n.mode,l)).ref=fr(n,r,o),l.return=n,n=l)}return a(n);case M:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){i(n,r.sibling),(r=s(r,o.children||[])).return=n,n=r;break t}i(n,r);break}e(n,r),r=r.sibling}(r=Hh(o,n.mode,l)).return=n,n=r}return a(n);case O:return t(n,r,(c=o._init)(o._payload),l)}if(et(o))return m(n,r,o,l);if(P(o))return f(n,r,o,l);yr(n,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==r&&6===r.tag?(i(n,r.sibling),(r=s(r,o)).return=n,n=r):(i(n,r),(r=Bh(o,n.mode,l)).return=n,n=r),a(n)):i(n,r)}}var Cr=br(!0),Ir=br(!1),Mr=xs(null),Sr=null,xr=null,wr=null;function Dr(){wr=xr=Sr=null}function Er(t){var e=Mr.current;ws(Mr),t._currentValue=e}function Tr(t,e,i){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==n&&(n.childLanes|=e)):null!==n&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===i)break;t=t.return}}function Ar(t,e){Sr=t,wr=xr=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(ba=!0),t.firstContext=null)}function Nr(t){var e=t._currentValue;if(wr!==t)if(t={context:t,memoizedValue:e,next:null},null===xr){if(null===Sr)throw Error(r(308));xr=t,Sr.dependencies={lanes:0,firstContext:t}}else xr=xr.next=t;return e}var Lr=null;function Or(t){null===Lr?Lr=[t]:Lr.push(t)}function kr(t,e,i,n){var s=e.interleaved;return null===s?(i.next=i,Or(e)):(i.next=s.next,s.next=i),e.interleaved=i,zr(t,n)}function zr(t,e){t.lanes|=e;var i=t.alternate;for(null!==i&&(i.lanes|=e),i=t,t=t.return;null!==t;)t.childLanes|=e,null!==(i=t.alternate)&&(i.childLanes|=e),i=t,t=t.return;return 3===i.tag?i.stateNode:null}var Pr=!1;function jr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Br(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Rr(t,e,i){var n=t.updateQueue;if(null===n)return null;if(n=n.shared,2&Tl){var s=n.pending;return null===s?e.next=e:(e.next=s.next,s.next=e),n.pending=e,zr(t,i)}return null===(s=n.interleaved)?(e.next=e,Or(n)):(e.next=s.next,s.next=e),n.interleaved=e,zr(t,i)}function Vr(t,e,i){if(null!==(e=e.updateQueue)&&(e=e.shared,4194240&i)){var n=e.lanes;i|=n&=t.pendingLanes,e.lanes=i,ve(t,i)}}function Ur(t,e){var i=t.updateQueue,n=t.alternate;if(null!==n&&i===(n=n.updateQueue)){var s=null,r=null;if(null!==(i=i.firstBaseUpdate)){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===r?s=r=o:r=r.next=o,i=i.next}while(null!==i);null===r?s=r=e:r=r.next=e}else s=r=e;return i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,effects:n.effects},void(t.updateQueue=i)}null===(t=i.lastBaseUpdate)?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Fr(t,e,i,n){var s=t.updateQueue;Pr=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,h=l.next;l.next=null,null===o?r=h:o.next=h,o=l;var c=t.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=h:a.next=h,c.lastBaseUpdate=l))}if(null!==r){var d=s.baseState;for(o=0,c=h=l=null,a=r;;){var p=a.lane,u=a.eventTime;if((n&p)===p){null!==c&&(c=c.next={eventTime:u,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var g=t,m=a;switch(p=e,u=i,m.tag){case 1:if("function"==typeof(g=m.payload)){d=g.call(u,d,p);break t}d=g;break t;case 3:g.flags=-65537&g.flags|128;case 0:if(null==(p="function"==typeof(g=m.payload)?g.call(u,d,p):g))break t;d=B({},d,p);break t;case 2:Pr=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(p=s.effects)?s.effects=[a]:p.push(a))}else u={eventTime:u,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(h=c=u,l=d):c=c.next=u,o|=p;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(p=a).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}if(null===c&&(l=d),s.baseState=l,s.firstBaseUpdate=h,s.lastBaseUpdate=c,null!==(e=s.shared.interleaved)){s=e;do{o|=s.lane,s=s.next}while(s!==e)}else null===r&&(s.shared.lanes=0);jl|=o,t.lanes=o,t.memoizedState=d}}function Wr(t,e,i){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(null!==s){if(n.callback=null,n=i,"function"!=typeof s)throw Error(r(191,s));s.call(n)}}}var Yr={},_r=xs(Yr),Qr=xs(Yr),Zr=xs(Yr);function qr(t){if(t===Yr)throw Error(r(174));return t}function Xr(t,e){switch(Ds(Zr,e),Ds(Qr,t),Ds(_r,Yr),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ws(_r),Ds(_r,e)}function Gr(){ws(_r),ws(Qr),ws(Zr)}function Kr(t){qr(Zr.current);var e=qr(_r.current),i=lt(e,t.type);e!==i&&(Ds(Qr,t),Ds(_r,i))}function Jr(t){Qr.current===t&&(ws(_r),ws(Qr))}var $r=xs(0);function to(t){for(var e=t;null!==e;){if(13===e.tag){var i=e.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(128&e.flags)return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var eo=[];function io(){for(var t=0;t<eo.length;t++)eo[t]._workInProgressVersionPrimary=null;eo.length=0}var no=C.ReactCurrentDispatcher,so=C.ReactCurrentBatchConfig,ro=0,oo=null,ao=null,lo=null,ho=!1,co=!1,po=0,uo=0;function go(){throw Error(r(321))}function mo(t,e){if(null===e)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!an(t[i],e[i]))return!1;return!0}function fo(t,e,i,n,s,o){if(ro=o,oo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,no.current=null===t||null===t.memoizedState?$o:ta,t=i(n,s),co){o=0;do{if(co=!1,po=0,25<=o)throw Error(r(301));o+=1,lo=ao=null,e.updateQueue=null,no.current=ea,t=i(n,s)}while(co)}if(no.current=Jo,e=null!==ao&&null!==ao.next,ro=0,lo=ao=oo=null,ho=!1,e)throw Error(r(300));return t}function yo(){var t=0!==po;return po=0,t}function vo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=t:lo=lo.next=t,lo}function bo(){if(null===ao){var t=oo.alternate;t=null!==t?t.memoizedState:null}else t=ao.next;var e=null===lo?oo.memoizedState:lo.next;if(null!==e)lo=e,ao=t;else{if(null===t)throw Error(r(310));t={memoizedState:(ao=t).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=t:lo=lo.next=t}return lo}function Co(t,e){return"function"==typeof e?e(t):e}function Io(t){var e=bo(),i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=t;var n=ao,s=n.baseQueue,o=i.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}n.baseQueue=s=o,i.pending=null}if(null!==s){o=s.next,n=n.baseState;var l=a=null,h=null,c=o;do{var d=c.lane;if((ro&d)===d)null!==h&&(h=h.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===h?(l=h=p,a=n):h=h.next=p,oo.lanes|=d,jl|=d}c=c.next}while(null!==c&&c!==o);null===h?a=n:h.next=l,an(n,e.memoizedState)||(ba=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=h,i.lastRenderedState=n}if(null!==(t=i.interleaved)){s=t;do{o=s.lane,oo.lanes|=o,jl|=o,s=s.next}while(s!==t)}else null===s&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function Mo(t){var e=bo(),i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=t;var n=i.dispatch,s=i.pending,o=e.memoizedState;if(null!==s){i.pending=null;var a=s=s.next;do{o=t(o,a.action),a=a.next}while(a!==s);an(o,e.memoizedState)||(ba=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),i.lastRenderedState=o}return[o,n]}function So(){}function xo(t,e){var i=oo,n=bo(),s=e(),o=!an(n.memoizedState,s);if(o&&(n.memoizedState=s,ba=!0),n=n.queue,jo(Eo.bind(null,i,n,t),[t]),n.getSnapshot!==e||o||null!==lo&&1&lo.memoizedState.tag){if(i.flags|=2048,Lo(9,Do.bind(null,i,n,s,e),void 0,null),null===Al)throw Error(r(349));30&ro||wo(i,e,s)}return s}function wo(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},null===(e=oo.updateQueue)?(e={lastEffect:null,stores:null},oo.updateQueue=e,e.stores=[t]):null===(i=e.stores)?e.stores=[t]:i.push(t)}function Do(t,e,i,n){e.value=i,e.getSnapshot=n,To(e)&&Ao(t)}function Eo(t,e,i){return i(function(){To(e)&&Ao(t)})}function To(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!an(t,i)}catch(t){return!0}}function Ao(t){var e=zr(t,1);null!==e&&ih(e,t,1,-1)}function No(t){var e=vo();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:t},e.queue=t,t=t.dispatch=qo.bind(null,oo,t),[e.memoizedState,t]}function Lo(t,e,i,n){return t={tag:t,create:e,destroy:i,deps:n,next:null},null===(e=oo.updateQueue)?(e={lastEffect:null,stores:null},oo.updateQueue=e,e.lastEffect=t.next=t):null===(i=e.lastEffect)?e.lastEffect=t.next=t:(n=i.next,i.next=t,t.next=n,e.lastEffect=t),t}function Oo(){return bo().memoizedState}function ko(t,e,i,n){var s=vo();oo.flags|=t,s.memoizedState=Lo(1|e,i,void 0,void 0===n?null:n)}function zo(t,e,i,n){var s=bo();n=void 0===n?null:n;var r=void 0;if(null!==ao){var o=ao.memoizedState;if(r=o.destroy,null!==n&&mo(n,o.deps))return void(s.memoizedState=Lo(e,i,r,n))}oo.flags|=t,s.memoizedState=Lo(1|e,i,r,n)}function Po(t,e){return ko(8390656,8,t,e)}function jo(t,e){return zo(2048,8,t,e)}function Bo(t,e){return zo(4,2,t,e)}function Ho(t,e){return zo(4,4,t,e)}function Ro(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Vo(t,e,i){return i=null!=i?i.concat([t]):null,zo(4,4,Ro.bind(null,e,t),i)}function Uo(){}function Fo(t,e){var i=bo();e=void 0===e?null:e;var n=i.memoizedState;return null!==n&&null!==e&&mo(e,n[1])?n[0]:(i.memoizedState=[t,e],t)}function Wo(t,e){var i=bo();e=void 0===e?null:e;var n=i.memoizedState;return null!==n&&null!==e&&mo(e,n[1])?n[0]:(t=t(),i.memoizedState=[t,e],t)}function Yo(t,e,i){return 21&ro?(an(i,e)||(i=me(),oo.lanes|=i,jl|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ba=!0),t.memoizedState=i)}function _o(t,e){var i=be;be=0!==i&&4>i?i:4,t(!0);var n=so.transition;so.transition={};try{t(!1),e()}finally{be=i,so.transition=n}}function Qo(){return bo().memoizedState}function Zo(t,e,i){var n=eh(t);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Xo(t))Go(e,i);else if(null!==(i=kr(t,e,i,n))){ih(i,t,n,th()),Ko(i,e,n)}}function qo(t,e,i){var n=eh(t),s={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Xo(t))Go(e,s);else{var r=t.alternate;if(0===t.lanes&&(null===r||0===r.lanes)&&null!==(r=e.lastRenderedReducer))try{var o=e.lastRenderedState,a=r(o,i);if(s.hasEagerState=!0,s.eagerState=a,an(a,o)){var l=e.interleaved;return null===l?(s.next=s,Or(e)):(s.next=l.next,l.next=s),void(e.interleaved=s)}}catch(t){}null!==(i=kr(t,e,s,n))&&(ih(i,t,n,s=th()),Ko(i,e,n))}}function Xo(t){var e=t.alternate;return t===oo||null!==e&&e===oo}function Go(t,e){co=ho=!0;var i=t.pending;null===i?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function Ko(t,e,i){if(4194240&i){var n=e.lanes;i|=n&=t.pendingLanes,e.lanes=i,ve(t,i)}}var Jo={readContext:Nr,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},$o={readContext:Nr,useCallback:function(t,e){return vo().memoizedState=[t,void 0===e?null:e],t},useContext:Nr,useEffect:Po,useImperativeHandle:function(t,e,i){return i=null!=i?i.concat([t]):null,ko(4194308,4,Ro.bind(null,e,t),i)},useLayoutEffect:function(t,e){return ko(4194308,4,t,e)},useInsertionEffect:function(t,e){return ko(4,2,t,e)},useMemo:function(t,e){var i=vo();return e=void 0===e?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var n=vo();return e=void 0!==i?i(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Zo.bind(null,oo,t),[n.memoizedState,t]},useRef:function(t){return t={current:t},vo().memoizedState=t},useState:No,useDebugValue:Uo,useDeferredValue:function(t){return vo().memoizedState=t},useTransition:function(){var t=No(!1),e=t[0];return t=_o.bind(null,t[1]),vo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var n=oo,s=vo();if(sr){if(void 0===i)throw Error(r(407));i=i()}else{if(i=e(),null===Al)throw Error(r(349));30&ro||wo(n,e,i)}s.memoizedState=i;var o={value:i,getSnapshot:e};return s.queue=o,Po(Eo.bind(null,n,o,t),[t]),n.flags|=2048,Lo(9,Do.bind(null,n,o,i,e),void 0,null),i},useId:function(){var t=vo(),e=Al.identifierPrefix;if(sr){var i=Ks;e=":"+e+"R"+(i=(Gs&~(1<<32-oe(Gs)-1)).toString(32)+i),0<(i=po++)&&(e+="H"+i.toString(32)),e+=":"}else e=":"+e+"r"+(i=uo++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ta={readContext:Nr,useCallback:Fo,useContext:Nr,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Bo,useLayoutEffect:Ho,useMemo:Wo,useReducer:Io,useRef:Oo,useState:function(){return Io(Co)},useDebugValue:Uo,useDeferredValue:function(t){return Yo(bo(),ao.memoizedState,t)},useTransition:function(){return[Io(Co)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:xo,useId:Qo,unstable_isNewReconciler:!1},ea={readContext:Nr,useCallback:Fo,useContext:Nr,useEffect:jo,useImperativeHandle:Vo,useInsertionEffect:Bo,useLayoutEffect:Ho,useMemo:Wo,useReducer:Mo,useRef:Oo,useState:function(){return Mo(Co)},useDebugValue:Uo,useDeferredValue:function(t){var e=bo();return null===ao?e.memoizedState=t:Yo(e,ao.memoizedState,t)},useTransition:function(){return[Mo(Co)[0],bo().memoizedState]},useMutableSource:So,useSyncExternalStore:xo,useId:Qo,unstable_isNewReconciler:!1};function ia(t,e){if(t&&t.defaultProps){for(var i in e=B({},e),t=t.defaultProps)void 0===e[i]&&(e[i]=t[i]);return e}return e}function na(t,e,i,n){i=null==(i=i(n,e=t.memoizedState))?e:B({},e,i),t.memoizedState=i,0===t.lanes&&(t.updateQueue.baseState=i)}var sa={isMounted:function(t){return!!(t=t._reactInternals)&&Ft(t)===t},enqueueSetState:function(t,e,i){t=t._reactInternals;var n=th(),s=eh(t),r=Hr(n,s);r.payload=e,null!=i&&(r.callback=i),null!==(e=Rr(t,r,s))&&(ih(e,t,s,n),Vr(e,t,s))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var n=th(),s=eh(t),r=Hr(n,s);r.tag=1,r.payload=e,null!=i&&(r.callback=i),null!==(e=Rr(t,r,s))&&(ih(e,t,s,n),Vr(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=th(),n=eh(t),s=Hr(i,n);s.tag=2,null!=e&&(s.callback=e),null!==(e=Rr(t,s,n))&&(ih(e,t,n,i),Vr(e,t,n))}};function ra(t,e,i,n,s,r,o){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,r,o):!e.prototype||!e.prototype.isPureReactComponent||(!ln(i,n)||!ln(s,r))}function oa(t,e,i){var n=!1,s=Es,r=e.contextType;return"object"==typeof r&&null!==r?r=Nr(r):(s=Os(e)?Ns:Ts.current,r=(n=null!=(n=e.contextTypes))?Ls(t,s):Es),e=new e(i,r),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=sa,t.stateNode=e,e._reactInternals=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=r),e}function aa(t,e,i,n){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(i,n),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&sa.enqueueReplaceState(e,e.state,null)}function la(t,e,i,n){var s=t.stateNode;s.props=i,s.state=t.memoizedState,s.refs={},jr(t);var r=e.contextType;"object"==typeof r&&null!==r?s.context=Nr(r):(r=Os(e)?Ns:Ts.current,s.context=Ls(t,r)),s.state=t.memoizedState,"function"==typeof(r=e.getDerivedStateFromProps)&&(na(t,e,r,i),s.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof s.getSnapshotBeforeUpdate||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||(e=s.state,"function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),e!==s.state&&sa.enqueueReplaceState(s,s.state,null),Fr(t,i,s,n),s.state=t.memoizedState),"function"==typeof s.componentDidMount&&(t.flags|=4194308)}function ha(t,e){try{var i="",n=e;do{i+=U(n),n=n.return}while(n);var s=i}catch(t){s="\nError generating stack: "+t.message+"\n"+t.stack}return{value:t,source:e,stack:s,digest:null}}function ca(t,e,i){return{value:t,source:null,stack:null!=i?i:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var pa="function"==typeof WeakMap?WeakMap:Map;function ua(t,e,i){(i=Hr(-1,i)).tag=3,i.payload={element:null};var n=e.value;return i.callback=function(){Yl||(Yl=!0,_l=n),da(0,e)},i}function ga(t,e,i){(i=Hr(-1,i)).tag=3;var n=t.type.getDerivedStateFromError;if("function"==typeof n){var s=e.value;i.payload=function(){return n(s)},i.callback=function(){da(0,e)}}var r=t.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(i.callback=function(){da(0,e),"function"!=typeof n&&(null===Ql?Ql=new Set([this]):Ql.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),i}function ma(t,e,i){var n=t.pingCache;if(null===n){n=t.pingCache=new pa;var s=new Set;n.set(e,s)}else void 0===(s=n.get(e))&&(s=new Set,n.set(e,s));s.has(i)||(s.add(i),t=wh.bind(null,t,e,i),e.then(t,t))}function fa(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function ya(t,e,i,n,s){return 1&t.mode?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,1===i.tag&&(null===i.alternate?i.tag=17:((e=Hr(-1,1)).tag=2,Rr(i,e,1))),i.lanes|=1),t)}var va=C.ReactCurrentOwner,ba=!1;function Ca(t,e,i,n){e.child=null===t?Ir(e,null,i,n):Cr(e,t.child,i,n)}function Ia(t,e,i,n,s){i=i.render;var r=e.ref;return Ar(e,s),n=fo(t,e,i,n,r,s),i=yo(),null===t||ba?(sr&&i&&tr(e),e.flags|=1,Ca(t,e,n,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ya(t,e,s))}function Ma(t,e,i,n,s){if(null===t){var r=i.type;return"function"!=typeof r||Oh(r)||void 0!==r.defaultProps||null!==i.compare||void 0!==i.defaultProps?((t=zh(i.type,null,n,e,e.mode,s)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=r,Sa(t,e,r,n,s))}if(r=t.child,0===(t.lanes&s)){var o=r.memoizedProps;if((i=null!==(i=i.compare)?i:ln)(o,n)&&t.ref===e.ref)return Ya(t,e,s)}return e.flags|=1,(t=kh(r,n)).ref=e.ref,t.return=e,e.child=t}function Sa(t,e,i,n,s){if(null!==t){var r=t.memoizedProps;if(ln(r,n)&&t.ref===e.ref){if(ba=!1,e.pendingProps=n=r,0===(t.lanes&s))return e.lanes=t.lanes,Ya(t,e,s);131072&t.flags&&(ba=!0)}}return Da(t,e,i,n,s)}function xa(t,e,i){var n=e.pendingProps,s=n.children,r=null!==t?t.memoizedState:null;if("hidden"===n.mode)if(1&e.mode){if(!(1073741824&i))return t=null!==r?r.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ds(kl,Ol),Ol|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==r?r.baseLanes:i,Ds(kl,Ol),Ol|=n}else e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ds(kl,Ol),Ol|=i;else null!==r?(n=r.baseLanes|i,e.memoizedState=null):n=i,Ds(kl,Ol),Ol|=n;return Ca(t,e,s,i),e.child}function wa(t,e){var i=e.ref;(null===t&&null!==i||null!==t&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function Da(t,e,i,n,s){var r=Os(i)?Ns:Ts.current;return r=Ls(e,r),Ar(e,s),i=fo(t,e,i,n,r,s),n=yo(),null===t||ba?(sr&&n&&tr(e),e.flags|=1,Ca(t,e,i,s),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ya(t,e,s))}function Ea(t,e,i,n,s){if(Os(i)){var r=!0;js(e)}else r=!1;if(Ar(e,s),null===e.stateNode)Wa(t,e),oa(e,i,n),la(e,i,n,s),n=!0;else if(null===t){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,h=i.contextType;"object"==typeof h&&null!==h?h=Nr(h):h=Ls(e,h=Os(i)?Ns:Ts.current);var c=i.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==n||l!==h)&&aa(e,o,n,h),Pr=!1;var p=e.memoizedState;o.state=p,Fr(e,n,o,s),l=e.memoizedState,a!==n||p!==l||As.current||Pr?("function"==typeof c&&(na(e,i,c,n),l=e.memoizedState),(a=Pr||ra(e,i,a,n,p,l,h))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(e.flags|=4194308)):("function"==typeof o.componentDidMount&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=h,n=a):("function"==typeof o.componentDidMount&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Br(t,e),a=e.memoizedProps,h=e.type===e.elementType?a:ia(e.type,a),o.props=h,d=e.pendingProps,p=o.context,"object"==typeof(l=i.contextType)&&null!==l?l=Nr(l):l=Ls(e,l=Os(i)?Ns:Ts.current);var u=i.getDerivedStateFromProps;(c="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||p!==l)&&aa(e,o,n,l),Pr=!1,p=e.memoizedState,o.state=p,Fr(e,n,o,s);var g=e.memoizedState;a!==d||p!==g||As.current||Pr?("function"==typeof u&&(na(e,i,u,n),g=e.memoizedState),(h=Pr||ra(e,i,h,n,p,g,l)||!1)?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,g,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,g,l)),"function"==typeof o.componentDidUpdate&&(e.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=l,n=h):("function"!=typeof o.componentDidUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return Ta(t,e,i,n,r,s)}function Ta(t,e,i,n,s,r){wa(t,e);var o=!!(128&e.flags);if(!n&&!o)return s&&Bs(e,i,!1),Ya(t,e,r);n=e.stateNode,va.current=e;var a=o&&"function"!=typeof i.getDerivedStateFromError?null:n.render();return e.flags|=1,null!==t&&o?(e.child=Cr(e,t.child,null,r),e.child=Cr(e,null,a,r)):Ca(t,e,a,r),e.memoizedState=n.state,s&&Bs(e,i,!0),e.child}function Aa(t){var e=t.stateNode;e.pendingContext?zs(0,e.pendingContext,e.pendingContext!==e.context):e.context&&zs(0,e.context,!1),Xr(t,e.containerInfo)}function Na(t,e,i,n,s){return ur(),gr(s),e.flags|=256,Ca(t,e,i,n),e.child}var La,Oa,ka,za,Pa={dehydrated:null,treeContext:null,retryLane:0};function ja(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ba(t,e,i){var n,s=e.pendingProps,o=$r.current,a=!1,l=!!(128&e.flags);if((n=l)||(n=(null===t||null!==t.memoizedState)&&!!(2&o)),n?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(o|=1),Ds($r,1&o),null===t)return hr(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(1&e.mode?"$!"===t.data?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=s.children,t=s.fallback,a?(s=e.mode,a=e.child,l={mode:"hidden",children:l},1&s||null===a?a=jh(l,s,0,null):(a.childLanes=0,a.pendingProps=l),t=Ph(t,s,i,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ja(i),e.memoizedState=Pa,t):Ha(e,l));if(null!==(o=t.memoizedState)&&null!==(n=o.dehydrated))return function(t,e,i,n,s,o,a){if(i)return 256&e.flags?(e.flags&=-257,Ra(t,e,a,n=ca(Error(r(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(o=n.fallback,s=e.mode,n=jh({mode:"visible",children:n.children},s,0,null),(o=Ph(o,s,a,null)).flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,1&e.mode&&Cr(e,t.child,null,a),e.child.memoizedState=ja(a),e.memoizedState=Pa,o);if(!(1&e.mode))return Ra(t,e,a,null);if("$!"===s.data){if(n=s.nextSibling&&s.nextSibling.dataset)var l=n.dgst;return n=l,Ra(t,e,a,n=ca(o=Error(r(419)),n,void 0))}if(l=0!==(a&t.childLanes),ba||l){if(null!==(n=Al)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(n.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,zr(t,s),ih(n,t,s,-1))}return mh(),Ra(t,e,a,n=ca(Error(r(421))))}return"$?"===s.data?(e.flags|=128,e.child=t.child,e=Eh.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,nr=hs(s.nextSibling),ir=e,sr=!0,rr=null,null!==t&&(Zs[qs++]=Gs,Zs[qs++]=Ks,Zs[qs++]=Xs,Gs=t.id,Ks=t.overflow,Xs=e),e=Ha(e,n.children),e.flags|=4096,e)}(t,e,l,s,n,o,i);if(a){a=s.fallback,l=e.mode,n=(o=t.child).sibling;var h={mode:"hidden",children:s.children};return 1&l||e.child===o?(s=kh(o,h)).subtreeFlags=14680064&o.subtreeFlags:((s=e.child).childLanes=0,s.pendingProps=h,e.deletions=null),null!==n?a=kh(n,a):(a=Ph(a,l,i,null)).flags|=2,a.return=e,s.return=e,s.sibling=a,e.child=s,s=a,a=e.child,l=null===(l=t.child.memoizedState)?ja(i):{baseLanes:l.baseLanes|i,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~i,e.memoizedState=Pa,s}return t=(a=t.child).sibling,s=kh(a,{mode:"visible",children:s.children}),!(1&e.mode)&&(s.lanes=i),s.return=e,s.sibling=null,null!==t&&(null===(i=e.deletions)?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=s,e.memoizedState=null,s}function Ha(t,e){return(e=jh({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ra(t,e,i,n){return null!==n&&gr(n),Cr(e,t.child,null,i),(t=Ha(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Va(t,e,i){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),Tr(t.return,e,i)}function Ua(t,e,i,n,s){var r=t.memoizedState;null===r?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=i,r.tailMode=s)}function Fa(t,e,i){var n=e.pendingProps,s=n.revealOrder,r=n.tail;if(Ca(t,e,n.children,i),2&(n=$r.current))n=1&n|2,e.flags|=128;else{if(null!==t&&128&t.flags)t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Va(t,i,e);else if(19===t.tag)Va(t,i,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ds($r,n),1&e.mode)switch(s){case"forwards":for(i=e.child,s=null;null!==i;)null!==(t=i.alternate)&&null===to(t)&&(s=i),i=i.sibling;null===(i=s)?(s=e.child,e.child=null):(s=i.sibling,i.sibling=null),Ua(e,!1,s,i,r);break;case"backwards":for(i=null,s=e.child,e.child=null;null!==s;){if(null!==(t=s.alternate)&&null===to(t)){e.child=s;break}t=s.sibling,s.sibling=i,i=s,s=t}Ua(e,!0,i,null,r);break;case"together":Ua(e,!1,null,null,void 0);break;default:e.memoizedState=null}else e.memoizedState=null;return e.child}function Wa(t,e){!(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ya(t,e,i){if(null!==t&&(e.dependencies=t.dependencies),jl|=e.lanes,0===(i&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(r(153));if(null!==e.child){for(i=kh(t=e.child,t.pendingProps),e.child=i,i.return=e;null!==t.sibling;)t=t.sibling,(i=i.sibling=kh(t,t.pendingProps)).return=e;i.sibling=null}return e.child}function _a(t,e){if(!sr)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;null!==e;)null!==e.alternate&&(i=e),e=e.sibling;null===i?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?e||null===t.tail?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Qa(t){var e=null!==t.alternate&&t.alternate.child===t.child,i=0,n=0;if(e)for(var s=t.child;null!==s;)i|=s.lanes|s.childLanes,n|=14680064&s.subtreeFlags,n|=14680064&s.flags,s.return=t,s=s.sibling;else for(s=t.child;null!==s;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=i,e}function Za(t,e,i){var n=e.pendingProps;switch(er(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qa(e),null;case 1:case 17:return Os(e.type)&&ks(),Qa(e),null;case 3:return n=e.stateNode,Gr(),ws(As),ws(Ts),io(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(dr(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&!(256&e.flags)||(e.flags|=1024,null!==rr&&(oh(rr),rr=null))),Oa(t,e),Qa(e),null;case 5:Jr(e);var s=qr(Zr.current);if(i=e.type,null!==t&&null!=e.stateNode)ka(t,e,i,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(null===e.stateNode)throw Error(r(166));return Qa(e),null}if(t=qr(_r.current),dr(e)){n=e.stateNode,i=e.type;var o=e.memoizedProps;switch(n[ps]=e,n[us]=o,t=!!(1&e.mode),i){case"dialog":Rn("cancel",n),Rn("close",n);break;case"iframe":case"object":case"embed":Rn("load",n);break;case"video":case"audio":for(s=0;s<Pn.length;s++)Rn(Pn[s],n);break;case"source":Rn("error",n);break;case"img":case"image":case"link":Rn("error",n),Rn("load",n);break;case"details":Rn("toggle",n);break;case"input":G(n,o),Rn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Rn("invalid",n);break;case"textarea":st(n,o),Rn("invalid",n)}for(var l in vt(i,o),s=null,o)if(o.hasOwnProperty(l)){var h=o[l];"children"===l?"string"==typeof h?n.textContent!==h&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,h,t),s=["children",h]):"number"==typeof h&&n.textContent!==""+h&&(!0!==o.suppressHydrationWarning&&Jn(n.textContent,h,t),s=["children",""+h]):a.hasOwnProperty(l)&&null!=h&&"onScroll"===l&&Rn("scroll",n)}switch(i){case"input":Q(n),$(n,o,!0);break;case"textarea":Q(n),ot(n);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(n.onclick=$n)}n=s,e.updateQueue=n,null!==n&&(e.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(i)),"http://www.w3.org/1999/xhtml"===t?"script"===i?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof n.is?t=l.createElement(i,{is:n.is}):(t=l.createElement(i),"select"===i&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,i),t[ps]=e,t[us]=n,La(t,e,!1,!1),e.stateNode=t;t:{switch(l=bt(i,n),i){case"dialog":Rn("cancel",t),Rn("close",t),s=n;break;case"iframe":case"object":case"embed":Rn("load",t),s=n;break;case"video":case"audio":for(s=0;s<Pn.length;s++)Rn(Pn[s],t);s=n;break;case"source":Rn("error",t),s=n;break;case"img":case"image":case"link":Rn("error",t),Rn("load",t),s=n;break;case"details":Rn("toggle",t),s=n;break;case"input":G(t,n),s=X(t,n),Rn("invalid",t);break;case"option":default:s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=B({},n,{value:void 0}),Rn("invalid",t);break;case"textarea":st(t,n),s=nt(t,n),Rn("invalid",t)}for(o in vt(i,s),h=s)if(h.hasOwnProperty(o)){var c=h[o];"style"===o?ft(t,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&dt(t,c):"children"===o?"string"==typeof c?("textarea"!==i||""!==c)&&pt(t,c):"number"==typeof c&&pt(t,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Rn("scroll",t):null!=c&&b(t,o,c,l))}switch(i){case"input":Q(t),$(t,n,!1);break;case"textarea":Q(t),ot(t);break;case"option":null!=n.value&&t.setAttribute("value",""+Y(n.value));break;case"select":t.multiple=!!n.multiple,null!=(o=n.value)?it(t,!!n.multiple,o,!1):null!=n.defaultValue&&it(t,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof s.onClick&&(t.onclick=$n)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Qa(e),null;case 6:if(t&&null!=e.stateNode)za(t,e,t.memoizedProps,n);else{if("string"!=typeof n&&null===e.stateNode)throw Error(r(166));if(i=qr(Zr.current),qr(_r.current),dr(e)){if(n=e.stateNode,i=e.memoizedProps,n[ps]=e,(o=n.nodeValue!==i)&&null!==(t=ir))switch(t.tag){case 3:Jn(n.nodeValue,i,!!(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Jn(n.nodeValue,i,!!(1&t.mode))}o&&(e.flags|=4)}else(n=(9===i.nodeType?i:i.ownerDocument).createTextNode(n))[ps]=e,e.stateNode=n}return Qa(e),null;case 13:if(ws($r),n=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(sr&&null!==nr&&1&e.mode&&!(128&e.flags))pr(),ur(),e.flags|=98560,o=!1;else if(o=dr(e),null!==n&&null!==n.dehydrated){if(null===t){if(!o)throw Error(r(318));if(!(o=null!==(o=e.memoizedState)?o.dehydrated:null))throw Error(r(317));o[ps]=e}else ur(),!(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Qa(e),o=!1}else null!==rr&&(oh(rr),rr=null),o=!0;if(!o)return 65536&e.flags?e:null}return 128&e.flags?(e.lanes=i,e):((n=null!==n)!==(null!==t&&null!==t.memoizedState)&&n&&(e.child.flags|=8192,1&e.mode&&(null===t||1&$r.current?0===zl&&(zl=3):mh())),null!==e.updateQueue&&(e.flags|=4),Qa(e),null);case 4:return Gr(),Oa(t,e),null===t&&Fn(e.stateNode.containerInfo),Qa(e),null;case 10:return Er(e.type._context),Qa(e),null;case 19:if(ws($r),null===(o=e.memoizedState))return Qa(e),null;if(n=!!(128&e.flags),null===(l=o.rendering))if(n)_a(o,!1);else{if(0!==zl||null!==t&&128&t.flags)for(t=e.child;null!==t;){if(null!==(l=to(t))){for(e.flags|=128,_a(o,!1),null!==(n=l.updateQueue)&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=i,i=e.child;null!==i;)t=n,(o=i).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return Ds($r,1&$r.current|2),e.child}t=t.sibling}null!==o.tail&&Kt()>Fl&&(e.flags|=128,n=!0,_a(o,!1),e.lanes=4194304)}else{if(!n)if(null!==(t=to(l))){if(e.flags|=128,n=!0,null!==(i=t.updateQueue)&&(e.updateQueue=i,e.flags|=4),_a(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!sr)return Qa(e),null}else 2*Kt()-o.renderingStartTime>Fl&&1073741824!==i&&(e.flags|=128,n=!0,_a(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(null!==(i=o.last)?i.sibling=l:e.child=l,o.last=l)}return null!==o.tail?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Kt(),e.sibling=null,i=$r.current,Ds($r,n?1&i|2:1&i),e):(Qa(e),null);case 22:case 23:return dh(),n=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==n&&(e.flags|=8192),n&&1&e.mode?!!(1073741824&Ol)&&(Qa(e),6&e.subtreeFlags&&(e.flags|=8192)):Qa(e),null;case 24:case 25:return null}throw Error(r(156,e.tag))}function qa(t,e){switch(er(e),e.tag){case 1:return Os(e.type)&&ks(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Gr(),ws(As),ws(Ts),io(),65536&(t=e.flags)&&!(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Jr(e),null;case 13:if(ws($r),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(r(340));ur()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return ws($r),null;case 4:return Gr(),null;case 10:return Er(e.type._context),null;case 22:case 23:return dh(),null;default:return null}}La=function(t,e){for(var i=e.child;null!==i;){if(5===i.tag||6===i.tag)t.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Oa=function(){},ka=function(t,e,i,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,qr(_r.current);var r,o=null;switch(i){case"input":s=X(t,s),n=X(t,n),o=[];break;case"select":s=B({},s,{value:void 0}),n=B({},n,{value:void 0}),o=[];break;case"textarea":s=nt(t,s),n=nt(t,n),o=[];break;default:"function"!=typeof s.onClick&&"function"==typeof n.onClick&&(t.onclick=$n)}for(c in vt(i,n),i=null,s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&null!=s[c])if("style"===c){var l=s[c];for(r in l)l.hasOwnProperty(r)&&(i||(i={}),i[r]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in n){var h=n[c];if(l=null!=s?s[c]:void 0,n.hasOwnProperty(c)&&h!==l&&(null!=h||null!=l))if("style"===c)if(l){for(r in l)!l.hasOwnProperty(r)||h&&h.hasOwnProperty(r)||(i||(i={}),i[r]="");for(r in h)h.hasOwnProperty(r)&&l[r]!==h[r]&&(i||(i={}),i[r]=h[r])}else i||(o||(o=[]),o.push(c,i)),i=h;else"dangerouslySetInnerHTML"===c?(h=h?h.__html:void 0,l=l?l.__html:void 0,null!=h&&l!==h&&(o=o||[]).push(c,h)):"children"===c?"string"!=typeof h&&"number"!=typeof h||(o=o||[]).push(c,""+h):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=h&&"onScroll"===c&&Rn("scroll",t),o||l===h||(o=[])):(o=o||[]).push(c,h))}i&&(o=o||[]).push("style",i);var c=o;(e.updateQueue=c)&&(e.flags|=4)}},za=function(t,e,i,n){i!==n&&(e.flags|=4)};var Xa=!1,Ga=!1,Ka="function"==typeof WeakSet?WeakSet:Set,Ja=null;function $a(t,e){var i=t.ref;if(null!==i)if("function"==typeof i)try{i(null)}catch(i){xh(t,e,i)}else i.current=null}function tl(t,e,i){try{i()}catch(i){xh(t,e,i)}}var el=!1;function il(t,e,i){var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var s=n=n.next;do{if((s.tag&t)===t){var r=s.destroy;s.destroy=void 0,void 0!==r&&tl(e,i,r)}s=s.next}while(s!==n)}}function nl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var i=e=e.next;do{if((i.tag&t)===t){var n=i.create;i.destroy=n()}i=i.next}while(i!==e)}}function sl(t){var e=t.ref;if(null!==e){var i=t.stateNode;t.tag,t=i,"function"==typeof e?e(t):e.current=t}}function rl(t){var e=t.alternate;null!==e&&(t.alternate=null,rl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[ps],delete e[us],delete e[ms],delete e[fs],delete e[ys])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ol(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||ol(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,i){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?8===i.nodeType?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(8===i.nodeType?(e=i.parentNode).insertBefore(t,i):(e=i).appendChild(t),null!=(i=i._reactRootContainer)||null!==e.onclick||(e.onclick=$n));else if(4!==n&&null!==(t=t.child))for(ll(t,e,i),t=t.sibling;null!==t;)ll(t,e,i),t=t.sibling}function hl(t,e,i){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(4!==n&&null!==(t=t.child))for(hl(t,e,i),t=t.sibling;null!==t;)hl(t,e,i),t=t.sibling}var cl=null,dl=!1;function pl(t,e,i){for(i=i.child;null!==i;)ul(t,e,i),i=i.sibling}function ul(t,e,i){if(re&&"function"==typeof re.onCommitFiberUnmount)try{re.onCommitFiberUnmount(se,i)}catch(t){}switch(i.tag){case 5:Ga||$a(i,e);case 6:var n=cl,s=dl;cl=null,pl(t,e,i),dl=s,null!==(cl=n)&&(dl?(t=cl,i=i.stateNode,8===t.nodeType?t.parentNode.removeChild(i):t.removeChild(i)):cl.removeChild(i.stateNode));break;case 18:null!==cl&&(dl?(t=cl,i=i.stateNode,8===t.nodeType?ls(t.parentNode,i):1===t.nodeType&&ls(t,i),Fe(t)):ls(cl,i.stateNode));break;case 4:n=cl,s=dl,cl=i.stateNode.containerInfo,dl=!0,pl(t,e,i),cl=n,dl=s;break;case 0:case 11:case 14:case 15:if(!Ga&&(null!==(n=i.updateQueue)&&null!==(n=n.lastEffect))){s=n=n.next;do{var r=s,o=r.destroy;r=r.tag,void 0!==o&&(2&r||4&r)&&tl(i,e,o),s=s.next}while(s!==n)}pl(t,e,i);break;case 1:if(!Ga&&($a(i,e),"function"==typeof(n=i.stateNode).componentWillUnmount))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(t){xh(i,e,t)}pl(t,e,i);break;case 21:pl(t,e,i);break;case 22:1&i.mode?(Ga=(n=Ga)||null!==i.memoizedState,pl(t,e,i),Ga=n):pl(t,e,i);break;default:pl(t,e,i)}}function gl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var i=t.stateNode;null===i&&(i=t.stateNode=new Ka),e.forEach(function(e){var n=Th.bind(null,t,e);i.has(e)||(i.add(e),e.then(n,n))})}}function ml(t,e){var i=e.deletions;if(null!==i)for(var n=0;n<i.length;n++){var s=i[n];try{var o=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break t;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===cl)throw Error(r(160));ul(o,a,s),cl=null,dl=!1;var h=s.alternate;null!==h&&(h.return=null),s.return=null}catch(t){xh(s,e,t)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)fl(e,t),e=e.sibling}function fl(t,e){var i=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),yl(t),4&n){try{il(3,t,t.return),nl(3,t)}catch(e){xh(t,t.return,e)}try{il(5,t,t.return)}catch(e){xh(t,t.return,e)}}break;case 1:ml(e,t),yl(t),512&n&&null!==i&&$a(i,i.return);break;case 5:if(ml(e,t),yl(t),512&n&&null!==i&&$a(i,i.return),32&t.flags){var s=t.stateNode;try{pt(s,"")}catch(e){xh(t,t.return,e)}}if(4&n&&null!=(s=t.stateNode)){var o=t.memoizedProps,a=null!==i?i.memoizedProps:o,l=t.type,h=t.updateQueue;if(t.updateQueue=null,null!==h)try{"input"===l&&"radio"===o.type&&null!=o.name&&K(s,o),bt(l,a);var c=bt(l,o);for(a=0;a<h.length;a+=2){var d=h[a],p=h[a+1];"style"===d?ft(s,p):"dangerouslySetInnerHTML"===d?dt(s,p):"children"===d?pt(s,p):b(s,d,p,c)}switch(l){case"input":J(s,o);break;case"textarea":rt(s,o);break;case"select":var u=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;null!=g?it(s,!!o.multiple,g,!1):u!==!!o.multiple&&(null!=o.defaultValue?it(s,!!o.multiple,o.defaultValue,!0):it(s,!!o.multiple,o.multiple?[]:"",!1))}s[us]=o}catch(e){xh(t,t.return,e)}}break;case 6:if(ml(e,t),yl(t),4&n){if(null===t.stateNode)throw Error(r(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(e){xh(t,t.return,e)}}break;case 3:if(ml(e,t),yl(t),4&n&&null!==i&&i.memoizedState.isDehydrated)try{Fe(e.containerInfo)}catch(e){xh(t,t.return,e)}break;case 4:default:ml(e,t),yl(t);break;case 13:ml(e,t),yl(t),8192&(s=t.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Ul=Kt())),4&n&&gl(t);break;case 22:if(d=null!==i&&null!==i.memoizedState,1&t.mode?(Ga=(c=Ga)||d,ml(e,t),Ga=c):ml(e,t),yl(t),8192&n){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!d&&1&t.mode)for(Ja=t,d=t.child;null!==d;){for(p=Ja=d;null!==Ja;){switch(g=(u=Ja).child,u.tag){case 0:case 11:case 14:case 15:il(4,u,u.return);break;case 1:$a(u,u.return);var m=u.stateNode;if("function"==typeof m.componentWillUnmount){n=u,i=u.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(t){xh(n,i,t)}}break;case 5:$a(u,u.return);break;case 22:if(null!==u.memoizedState){Il(p);continue}}null!==g?(g.return=u,Ja=g):Il(p)}d=d.sibling}t:for(d=null,p=t;;){if(5===p.tag){if(null===d){d=p;try{s=p.stateNode,c?"function"==typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=p.stateNode,a=null!=(h=p.memoizedProps.style)&&h.hasOwnProperty("display")?h.display:null,l.style.display=mt("display",a))}catch(e){xh(t,t.return,e)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(e){xh(t,t.return,e)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===t)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;null===p.sibling;){if(null===p.return||p.return===t)break t;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ml(e,t),yl(t),4&n&&gl(t);case 21:}}function yl(t){var e=t.flags;if(2&e){try{t:{for(var i=t.return;null!==i;){if(ol(i)){var n=i;break t}i=i.return}throw Error(r(160))}switch(n.tag){case 5:var s=n.stateNode;32&n.flags&&(pt(s,""),n.flags&=-33),hl(t,al(t),s);break;case 3:case 4:var o=n.stateNode.containerInfo;ll(t,al(t),o);break;default:throw Error(r(161))}}catch(e){xh(t,t.return,e)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,i){Ja=t,bl(t,e,i)}function bl(t,e,i){for(var n=!!(1&t.mode);null!==Ja;){var s=Ja,r=s.child;if(22===s.tag&&n){var o=null!==s.memoizedState||Xa;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Ga;a=Xa;var h=Ga;if(Xa=o,(Ga=l)&&!h)for(Ja=s;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?Ml(s):null!==l?(l.return=o,Ja=l):Ml(s);for(;null!==r;)Ja=r,bl(r,e,i),r=r.sibling;Ja=s,Xa=a,Ga=h}Cl(t)}else 8772&s.subtreeFlags&&null!==r?(r.return=s,Ja=r):Cl(t)}}function Cl(t){for(;null!==Ja;){var e=Ja;if(8772&e.flags){var i=e.alternate;try{if(8772&e.flags)switch(e.tag){case 0:case 11:case 15:Ga||nl(5,e);break;case 1:var n=e.stateNode;if(4&e.flags&&!Ga)if(null===i)n.componentDidMount();else{var s=e.elementType===e.type?i.memoizedProps:ia(e.type,i.memoizedProps);n.componentDidUpdate(s,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;null!==o&&Wr(e,o,n);break;case 3:var a=e.updateQueue;if(null!==a){if(i=null,null!==e.child)switch(e.child.tag){case 5:case 1:i=e.child.stateNode}Wr(e,a,i)}break;case 5:var l=e.stateNode;if(null===i&&4&e.flags){i=l;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&i.focus();break;case"img":h.src&&(i.src=h.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&Fe(p)}}}break;default:throw Error(r(163))}Ga||512&e.flags&&sl(e)}catch(t){xh(e,e.return,t)}}if(e===t){Ja=null;break}if(null!==(i=e.sibling)){i.return=e.return,Ja=i;break}Ja=e.return}}function Il(t){for(;null!==Ja;){var e=Ja;if(e===t){Ja=null;break}var i=e.sibling;if(null!==i){i.return=e.return,Ja=i;break}Ja=e.return}}function Ml(t){for(;null!==Ja;){var e=Ja;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{nl(4,e)}catch(t){xh(e,i,t)}break;case 1:var n=e.stateNode;if("function"==typeof n.componentDidMount){var s=e.return;try{n.componentDidMount()}catch(t){xh(e,s,t)}}var r=e.return;try{sl(e)}catch(t){xh(e,r,t)}break;case 5:var o=e.return;try{sl(e)}catch(t){xh(e,o,t)}}}catch(t){xh(e,e.return,t)}if(e===t){Ja=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ja=a;break}Ja=e.return}}var Sl,xl=Math.ceil,wl=C.ReactCurrentDispatcher,Dl=C.ReactCurrentOwner,El=C.ReactCurrentBatchConfig,Tl=0,Al=null,Nl=null,Ll=0,Ol=0,kl=xs(0),zl=0,Pl=null,jl=0,Bl=0,Hl=0,Rl=null,Vl=null,Ul=0,Fl=1/0,Wl=null,Yl=!1,_l=null,Ql=null,Zl=!1,ql=null,Xl=0,Gl=0,Kl=null,Jl=-1,$l=0;function th(){return 6&Tl?Kt():-1!==Jl?Jl:Jl=Kt()}function eh(t){return 1&t.mode?2&Tl&&0!==Ll?Ll&-Ll:null!==mr.transition?(0===$l&&($l=me()),$l):0!==(t=be)?t:t=void 0===(t=window.event)?16:Ge(t.type):1}function ih(t,e,i,n){if(50<Gl)throw Gl=0,Kl=null,Error(r(185));ye(t,i,n),2&Tl&&t===Al||(t===Al&&(!(2&Tl)&&(Bl|=i),4===zl&&ah(t,Ll)),nh(t,n),1===i&&0===Tl&&!(1&e.mode)&&(Fl=Kt()+500,Rs&&Fs()))}function nh(t,e){var i=t.callbackNode;!function(t,e){for(var i=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-oe(r),a=1<<o,l=s[o];-1===l?0!==(a&i)&&0===(a&n)||(s[o]=ue(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}(t,e);var n=pe(t,t===Al?Ll:0);if(0===n)null!==i&&qt(i),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(null!=i&&qt(i),1===e)0===t.tag?function(t){Rs=!0,Us(t)}(lh.bind(null,t)):Us(lh.bind(null,t)),os(function(){!(6&Tl)&&Fs()}),i=null;else{switch(Ce(n)){case 1:i=$t;break;case 4:i=te;break;case 16:default:i=ee;break;case 536870912:i=ne}i=Ah(i,sh.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function sh(t,e){if(Jl=-1,$l=0,6&Tl)throw Error(r(327));var i=t.callbackNode;if(Mh()&&t.callbackNode!==i)return null;var n=pe(t,t===Al?Ll:0);if(0===n)return null;if(30&n||0!==(n&t.expiredLanes)||e)e=fh(t,n);else{e=n;var s=Tl;Tl|=2;var o=gh();for(Al===t&&Ll===e||(Wl=null,Fl=Kt()+500,ph(t,e));;)try{vh();break}catch(e){uh(t,e)}Dr(),wl.current=o,Tl=s,null!==Nl?e=0:(Al=null,Ll=0,e=zl)}if(0!==e){if(2===e&&(0!==(s=ge(t))&&(n=s,e=rh(t,s))),1===e)throw i=Pl,ph(t,0),ah(t,n),nh(t,Kt()),i;if(6===e)ah(t,n);else{if(s=t.current.alternate,!(30&n||function(t){for(var e=t;;){if(16384&e.flags){var i=e.updateQueue;if(null!==i&&null!==(i=i.stores))for(var n=0;n<i.length;n++){var s=i[n],r=s.getSnapshot;s=s.value;try{if(!an(r(),s))return!1}catch(t){return!1}}}if(i=e.child,16384&e.subtreeFlags&&null!==i)i.return=e,e=i;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(s)||(e=fh(t,n),2===e&&(o=ge(t),0!==o&&(n=o,e=rh(t,o))),1!==e)))throw i=Pl,ph(t,0),ah(t,n),nh(t,Kt()),i;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(r(345));case 2:case 5:Ih(t,Vl,Wl);break;case 3:if(ah(t,n),(130023424&n)===n&&10<(e=Ul+500-Kt())){if(0!==pe(t,0))break;if(((s=t.suspendedLanes)&n)!==n){th(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ns(Ih.bind(null,t,Vl,Wl),e);break}Ih(t,Vl,Wl);break;case 4:if(ah(t,n),(4194240&n)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-oe(n);o=1<<a,(a=e[a])>s&&(s=a),n&=~o}if(n=s,10<(n=(120>(n=Kt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*xl(n/1960))-n)){t.timeoutHandle=ns(Ih.bind(null,t,Vl,Wl),n);break}Ih(t,Vl,Wl);break;default:throw Error(r(329))}}}return nh(t,Kt()),t.callbackNode===i?sh.bind(null,t):null}function rh(t,e){var i=Rl;return t.current.memoizedState.isDehydrated&&(ph(t,e).flags|=256),2!==(t=fh(t,e))&&(e=Vl,Vl=i,null!==e&&oh(e)),t}function oh(t){null===Vl?Vl=t:Vl.push.apply(Vl,t)}function ah(t,e){for(e&=~Hl,e&=~Bl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-oe(e),n=1<<i;t[i]=-1,e&=~n}}function lh(t){if(6&Tl)throw Error(r(327));Mh();var e=pe(t,0);if(!(1&e))return nh(t,Kt()),null;var i=fh(t,e);if(0!==t.tag&&2===i){var n=ge(t);0!==n&&(e=n,i=rh(t,n))}if(1===i)throw i=Pl,ph(t,0),ah(t,e),nh(t,Kt()),i;if(6===i)throw Error(r(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ih(t,Vl,Wl),nh(t,Kt()),null}function hh(t,e){var i=Tl;Tl|=1;try{return t(e)}finally{0===(Tl=i)&&(Fl=Kt()+500,Rs&&Fs())}}function ch(t){null!==ql&&0===ql.tag&&!(6&Tl)&&Mh();var e=Tl;Tl|=1;var i=El.transition,n=be;try{if(El.transition=null,be=1,t)return t()}finally{be=n,El.transition=i,!(6&(Tl=e))&&Fs()}}function dh(){Ol=kl.current,ws(kl)}function ph(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(-1!==i&&(t.timeoutHandle=-1,ss(i)),null!==Nl)for(i=Nl.return;null!==i;){var n=i;switch(er(n),n.tag){case 1:null!=(n=n.type.childContextTypes)&&ks();break;case 3:Gr(),ws(As),ws(Ts),io();break;case 5:Jr(n);break;case 4:Gr();break;case 13:case 19:ws($r);break;case 10:Er(n.type._context);break;case 22:case 23:dh()}i=i.return}if(Al=t,Nl=t=kh(t.current,null),Ll=Ol=e,zl=0,Pl=null,Hl=Bl=jl=0,Vl=Rl=null,null!==Lr){for(e=0;e<Lr.length;e++)if(null!==(n=(i=Lr[e]).interleaved)){i.interleaved=null;var s=n.next,r=i.pending;if(null!==r){var o=r.next;r.next=s,n.next=o}i.pending=n}Lr=null}return t}function uh(t,e){for(;;){var i=Nl;try{if(Dr(),no.current=Jo,ho){for(var n=oo.memoizedState;null!==n;){var s=n.queue;null!==s&&(s.pending=null),n=n.next}ho=!1}if(ro=0,lo=ao=oo=null,co=!1,po=0,Dl.current=null,null===i||null===i.return){zl=1,Pl=e,Nl=null;break}t:{var o=t,a=i.return,l=i,h=e;if(e=Ll,l.flags|=32768,null!==h&&"object"==typeof h&&"function"==typeof h.then){var c=h,d=l,p=d.tag;if(!(1&d.mode||0!==p&&11!==p&&15!==p)){var u=d.alternate;u?(d.updateQueue=u.updateQueue,d.memoizedState=u.memoizedState,d.lanes=u.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=fa(a);if(null!==g){g.flags&=-257,ya(g,a,l,0,e),1&g.mode&&ma(o,c,e),h=c;var m=(e=g).updateQueue;if(null===m){var f=new Set;f.add(h),e.updateQueue=f}else m.add(h);break t}if(!(1&e)){ma(o,c,e),mh();break t}h=Error(r(426))}else if(sr&&1&l.mode){var y=fa(a);if(null!==y){!(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,e),gr(ha(h,l));break t}}o=h=ha(h,l),4!==zl&&(zl=2),null===Rl?Rl=[o]:Rl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e,Ur(o,ua(0,h,e));break t;case 1:l=h;var v=o.type,b=o.stateNode;if(!(128&o.flags||"function"!=typeof v.getDerivedStateFromError&&(null===b||"function"!=typeof b.componentDidCatch||null!==Ql&&Ql.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e,Ur(o,ga(o,l,e));break t}}o=o.return}while(null!==o)}Ch(i)}catch(t){e=t,Nl===i&&null!==i&&(Nl=i=i.return);continue}break}}function gh(){var t=wl.current;return wl.current=Jo,null===t?Jo:t}function mh(){0!==zl&&3!==zl&&2!==zl||(zl=4),null===Al||!(268435455&jl)&&!(268435455&Bl)||ah(Al,Ll)}function fh(t,e){var i=Tl;Tl|=2;var n=gh();for(Al===t&&Ll===e||(Wl=null,ph(t,e));;)try{yh();break}catch(e){uh(t,e)}if(Dr(),Tl=i,wl.current=n,null!==Nl)throw Error(r(261));return Al=null,Ll=0,zl}function yh(){for(;null!==Nl;)bh(Nl)}function vh(){for(;null!==Nl&&!Xt();)bh(Nl)}function bh(t){var e=Sl(t.alternate,t,Ol);t.memoizedProps=t.pendingProps,null===e?Ch(t):Nl=e,Dl.current=null}function Ch(t){var e=t;do{var i=e.alternate;if(t=e.return,32768&e.flags){if(null!==(i=qa(i,e)))return i.flags&=32767,void(Nl=i);if(null===t)return zl=6,void(Nl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}else if(null!==(i=Za(i,e,Ol)))return void(Nl=i);if(null!==(e=e.sibling))return void(Nl=e);Nl=e=t}while(null!==e);0===zl&&(zl=5)}function Ih(t,e,i){var n=be,s=El.transition;try{El.transition=null,be=1,function(t,e,i,n){do{Mh()}while(null!==ql);if(6&Tl)throw Error(r(327));i=t.finishedWork;var s=t.finishedLanes;if(null===i)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(r(177));t.callbackNode=null,t.callbackPriority=0;var o=i.lanes|i.childLanes;if(function(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<i;){var s=31-oe(i),r=1<<s;e[s]=0,n[s]=-1,t[s]=-1,i&=~r}}(t,o),t===Al&&(Nl=Al=null,Ll=0),!(2064&i.subtreeFlags)&&!(2064&i.flags)||Zl||(Zl=!0,Ah(ee,function(){return Mh(),null})),o=!!(15990&i.flags),!!(15990&i.subtreeFlags)||o){o=El.transition,El.transition=null;var a=be;be=1;var l=Tl;Tl|=4,Dl.current=null,function(t,e){if(ts=Ye,un(t=pn())){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(i=(i=t.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{i.nodeType,o.nodeType}catch(t){i=null;break t}var a=0,l=-1,h=-1,c=0,d=0,p=t,u=null;e:for(;;){for(var g;p!==i||0!==s&&3!==p.nodeType||(l=a+s),p!==o||0!==n&&3!==p.nodeType||(h=a+n),3===p.nodeType&&(a+=p.nodeValue.length),null!==(g=p.firstChild);)u=p,p=g;for(;;){if(p===t)break e;if(u===i&&++c===s&&(l=a),u===o&&++d===n&&(h=a),null!==(g=p.nextSibling))break;u=(p=u).parentNode}p=g}i=-1===l||-1===h?null:{start:l,end:h}}else i=null}i=i||{start:0,end:0}}else i=null;for(es={focusedElem:t,selectionRange:i},Ye=!1,Ja=e;null!==Ja;)if(t=(e=Ja).child,1028&e.subtreeFlags&&null!==t)t.return=e,Ja=t;else for(;null!==Ja;){e=Ja;try{var m=e.alternate;if(1024&e.flags)switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var f=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?f:ia(e.type,f),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=e.stateNode.containerInfo;1===C.nodeType?C.textContent="":9===C.nodeType&&C.documentElement&&C.removeChild(C.documentElement);break;default:throw Error(r(163))}}catch(t){xh(e,e.return,t)}if(null!==(t=e.sibling)){t.return=e.return,Ja=t;break}Ja=e.return}m=el,el=!1}(t,i),fl(i,t),gn(es),Ye=!!ts,es=ts=null,t.current=i,vl(i,t,s),Gt(),Tl=l,be=a,El.transition=o}else t.current=i;if(Zl&&(Zl=!1,ql=t,Xl=s),o=t.pendingLanes,0===o&&(Ql=null),function(t){if(re&&"function"==typeof re.onCommitFiberRoot)try{re.onCommitFiberRoot(se,t,void 0,!(128&~t.current.flags))}catch(t){}}(i.stateNode),nh(t,Kt()),null!==e)for(n=t.onRecoverableError,i=0;i<e.length;i++)s=e[i],n(s.value,{componentStack:s.stack,digest:s.digest});if(Yl)throw Yl=!1,t=_l,_l=null,t;!!(1&Xl)&&0!==t.tag&&Mh(),o=t.pendingLanes,1&o?t===Kl?Gl++:(Gl=0,Kl=t):Gl=0,Fs()}(t,e,i,n)}finally{El.transition=s,be=n}return null}function Mh(){if(null!==ql){var t=Ce(Xl),e=El.transition,i=be;try{if(El.transition=null,be=16>t?16:t,null===ql)var n=!1;else{if(t=ql,ql=null,Xl=0,6&Tl)throw Error(r(331));var s=Tl;for(Tl|=4,Ja=t.current;null!==Ja;){var o=Ja,a=o.child;if(16&Ja.flags){var l=o.deletions;if(null!==l){for(var h=0;h<l.length;h++){var c=l[h];for(Ja=c;null!==Ja;){var d=Ja;switch(d.tag){case 0:case 11:case 15:il(8,d,o)}var p=d.child;if(null!==p)p.return=d,Ja=p;else for(;null!==Ja;){var u=(d=Ja).sibling,g=d.return;if(rl(d),d===c){Ja=null;break}if(null!==u){u.return=g,Ja=u;break}Ja=g}}}var m=o.alternate;if(null!==m){var f=m.child;if(null!==f){m.child=null;do{var y=f.sibling;f.sibling=null,f=y}while(null!==f)}}Ja=o}}if(2064&o.subtreeFlags&&null!==a)a.return=o,Ja=a;else t:for(;null!==Ja;){if(2048&(o=Ja).flags)switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ja=v;break t}Ja=o.return}}var b=t.current;for(Ja=b;null!==Ja;){var C=(a=Ja).child;if(2064&a.subtreeFlags&&null!==C)C.return=a,Ja=C;else t:for(a=b;null!==Ja;){if(2048&(l=Ja).flags)try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(t){xh(l,l.return,t)}if(l===a){Ja=null;break t}var I=l.sibling;if(null!==I){I.return=l.return,Ja=I;break t}Ja=l.return}}if(Tl=s,Fs(),re&&"function"==typeof re.onPostCommitFiberRoot)try{re.onPostCommitFiberRoot(se,t)}catch(t){}n=!0}return n}finally{be=i,El.transition=e}}return!1}function Sh(t,e,i){t=Rr(t,e=ua(0,e=ha(i,e),1),1),e=th(),null!==t&&(ye(t,1,e),nh(t,e))}function xh(t,e,i){if(3===t.tag)Sh(t,t,i);else for(;null!==e;){if(3===e.tag){Sh(e,t,i);break}if(1===e.tag){var n=e.stateNode;if("function"==typeof e.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===Ql||!Ql.has(n))){e=Rr(e,t=ga(e,t=ha(i,t),1),1),t=th(),null!==e&&(ye(e,1,t),nh(e,t));break}}e=e.return}}function wh(t,e,i){var n=t.pingCache;null!==n&&n.delete(e),e=th(),t.pingedLanes|=t.suspendedLanes&i,Al===t&&(Ll&i)===i&&(4===zl||3===zl&&(130023424&Ll)===Ll&&500>Kt()-Ul?ph(t,0):Hl|=i),nh(t,e)}function Dh(t,e){0===e&&(1&t.mode?(e=ce,!(130023424&(ce<<=1))&&(ce=4194304)):e=1);var i=th();null!==(t=zr(t,e))&&(ye(t,e,i),nh(t,i))}function Eh(t){var e=t.memoizedState,i=0;null!==e&&(i=e.retryLane),Dh(t,i)}function Th(t,e){var i=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;null!==s&&(i=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(r(314))}null!==n&&n.delete(e),Dh(t,i)}function Ah(t,e){return Zt(t,e)}function Nh(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lh(t,e,i,n){return new Nh(t,e,i,n)}function Oh(t){return!(!(t=t.prototype)||!t.isReactComponent)}function kh(t,e){var i=t.alternate;return null===i?((i=Lh(t.tag,e,t.key,t.mode)).elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=14680064&t.flags,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function zh(t,e,i,n,s,o){var a=2;if(n=t,"function"==typeof t)Oh(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case S:return Ph(i.children,s,o,e);case x:a=8,s|=8;break;case w:return(t=Lh(12,i,e,2|s)).elementType=w,t.lanes=o,t;case A:return(t=Lh(13,i,e,s)).elementType=A,t.lanes=o,t;case N:return(t=Lh(19,i,e,s)).elementType=N,t.lanes=o,t;case k:return jh(i,s,o,e);default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case D:a=10;break t;case E:a=9;break t;case T:a=11;break t;case L:a=14;break t;case O:a=16,n=null;break t}throw Error(r(130,null==t?t:typeof t,""))}return(e=Lh(a,i,e,s)).elementType=t,e.type=n,e.lanes=o,e}function Ph(t,e,i,n){return(t=Lh(7,t,n,e)).lanes=i,t}function jh(t,e,i,n){return(t=Lh(22,t,n,e)).elementType=k,t.lanes=i,t.stateNode={isHidden:!1},t}function Bh(t,e,i){return(t=Lh(6,t,null,e)).lanes=i,t}function Hh(t,e,i){return(e=Lh(4,null!==t.children?t.children:[],t.key,e)).lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Rh(t,e,i,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fe(0),this.expirationTimes=fe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fe(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vh(t,e,i,n,s,r,o,a,l){return t=new Rh(t,e,i,a,l),1===e?(e=1,!0===r&&(e|=8)):e=0,r=Lh(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},jr(r),t}function Uh(t){if(!t)return Es;t:{if(Ft(t=t._reactInternals)!==t||1!==t.tag)throw Error(r(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Os(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(r(171))}if(1===t.tag){var i=t.type;if(Os(i))return Ps(t,i,e)}return e}function Fh(t,e,i,n,s,r,o,a,l){return(t=Vh(i,n,!0,t,0,r,0,a,l)).context=Uh(null),i=t.current,(r=Hr(n=th(),s=eh(i))).callback=null!=e?e:null,Rr(i,r,s),t.current.lanes=s,ye(t,s,n),nh(t,n),t}function Wh(t,e,i,n){var s=e.current,r=th(),o=eh(s);return i=Uh(i),null===e.context?e.context=i:e.pendingContext=i,(e=Hr(r,o)).payload={element:t},null!==(n=void 0===n?null:n)&&(e.callback=n),null!==(t=Rr(s,e,o))&&(ih(t,s,o,r),Vr(t,s,o)),o}function Yh(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function _h(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var i=t.retryLane;t.retryLane=0!==i&&i<e?i:e}}function Qh(t,e){_h(t,e),(t=t.alternate)&&_h(t,e)}Sl=function(t,e,i){if(null!==t)if(t.memoizedProps!==e.pendingProps||As.current)ba=!0;else{if(0===(t.lanes&i)&&!(128&e.flags))return ba=!1,function(t,e,i){switch(e.tag){case 3:Aa(e),ur();break;case 5:Kr(e);break;case 1:Os(e.type)&&js(e);break;case 4:Xr(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;Ds(Mr,n._currentValue),n._currentValue=s;break;case 13:if(null!==(n=e.memoizedState))return null!==n.dehydrated?(Ds($r,1&$r.current),e.flags|=128,null):0!==(i&e.child.childLanes)?Ba(t,e,i):(Ds($r,1&$r.current),null!==(t=Ya(t,e,i))?t.sibling:null);Ds($r,1&$r.current);break;case 19:if(n=0!==(i&e.childLanes),128&t.flags){if(n)return Fa(t,e,i);e.flags|=128}if(null!==(s=e.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ds($r,$r.current),n)break;return null;case 22:case 23:return e.lanes=0,xa(t,e,i)}return Ya(t,e,i)}(t,e,i);ba=!!(131072&t.flags)}else ba=!1,sr&&1048576&e.flags&&$s(e,Qs,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Wa(t,e),t=e.pendingProps;var s=Ls(e,Ts.current);Ar(e,i),s=fo(null,e,n,t,s,i);var o=yo();return e.flags|=1,"object"==typeof s&&null!==s&&"function"==typeof s.render&&void 0===s.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Os(n)?(o=!0,js(e)):o=!1,e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,jr(e),s.updater=sa,e.stateNode=s,s._reactInternals=e,la(e,n,t,i),e=Ta(null,e,n,!0,o,i)):(e.tag=0,sr&&o&&tr(e),Ca(null,e,s,i),e=e.child),e;case 16:n=e.elementType;t:{switch(Wa(t,e),t=e.pendingProps,n=(s=n._init)(n._payload),e.type=n,s=e.tag=function(t){if("function"==typeof t)return Oh(t)?1:0;if(null!=t){if((t=t.$$typeof)===T)return 11;if(t===L)return 14}return 2}(n),t=ia(n,t),s){case 0:e=Da(null,e,n,t,i);break t;case 1:e=Ea(null,e,n,t,i);break t;case 11:e=Ia(null,e,n,t,i);break t;case 14:e=Ma(null,e,n,ia(n.type,t),i);break t}throw Error(r(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,Da(t,e,n,s=e.elementType===n?s:ia(n,s),i);case 1:return n=e.type,s=e.pendingProps,Ea(t,e,n,s=e.elementType===n?s:ia(n,s),i);case 3:t:{if(Aa(e),null===t)throw Error(r(387));n=e.pendingProps,s=(o=e.memoizedState).element,Br(t,e),Fr(e,n,null,i);var a=e.memoizedState;if(n=a.element,o.isDehydrated){if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,256&e.flags){e=Na(t,e,n,i,s=ha(Error(r(423)),e));break t}if(n!==s){e=Na(t,e,n,i,s=ha(Error(r(424)),e));break t}for(nr=hs(e.stateNode.containerInfo.firstChild),ir=e,sr=!0,rr=null,i=Ir(e,null,n,i),e.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(ur(),n===s){e=Ya(t,e,i);break t}Ca(t,e,n,i)}e=e.child}return e;case 5:return Kr(e),null===t&&hr(e),n=e.type,s=e.pendingProps,o=null!==t?t.memoizedProps:null,a=s.children,is(n,s)?a=null:null!==o&&is(n,o)&&(e.flags|=32),wa(t,e),Ca(t,e,a,i),e.child;case 6:return null===t&&hr(e),null;case 13:return Ba(t,e,i);case 4:return Xr(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=Cr(e,null,n,i):Ca(t,e,n,i),e.child;case 11:return n=e.type,s=e.pendingProps,Ia(t,e,n,s=e.elementType===n?s:ia(n,s),i);case 7:return Ca(t,e,e.pendingProps,i),e.child;case 8:case 12:return Ca(t,e,e.pendingProps.children,i),e.child;case 10:t:{if(n=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Ds(Mr,n._currentValue),n._currentValue=a,null!==o)if(an(o.value,a)){if(o.children===s.children&&!As.current){e=Ya(t,e,i);break t}}else for(null!==(o=e.child)&&(o.return=e);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var h=l.firstContext;null!==h;){if(h.context===n){if(1===o.tag){(h=Hr(-1,i&-i)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?h.next=h:(h.next=d.next,d.next=h),c.pending=h}}o.lanes|=i,null!==(h=o.alternate)&&(h.lanes|=i),Tr(o.return,i,e),l.lanes|=i;break}h=h.next}}else if(10===o.tag)a=o.type===e.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(r(341));a.lanes|=i,null!==(l=a.alternate)&&(l.lanes|=i),Tr(a,i,e),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===e){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Ca(t,e,s.children,i),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Ar(e,i),n=n(s=Nr(s)),e.flags|=1,Ca(t,e,n,i),e.child;case 14:return s=ia(n=e.type,e.pendingProps),Ma(t,e,n,s=ia(n.type,s),i);case 15:return Sa(t,e,e.type,e.pendingProps,i);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:ia(n,s),Wa(t,e),e.tag=1,Os(n)?(t=!0,js(e)):t=!1,Ar(e,i),oa(e,n,s),la(e,n,s,i),Ta(null,e,n,!0,t,i);case 19:return Fa(t,e,i);case 22:return xa(t,e,i)}throw Error(r(156,e.tag))};var Zh="function"==typeof reportError?reportError:function(t){console.error(t)};function qh(t){this._internalRoot=t}function Xh(t){this._internalRoot=t}function Gh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Kh(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Jh(){}function $h(t,e,i,n,s){var r=i._reactRootContainer;if(r){var o=r;if("function"==typeof s){var a=s;s=function(){var t=Yh(o);a.call(t)}}Wh(e,o,t,s)}else o=function(t,e,i,n,s){if(s){if("function"==typeof n){var r=n;n=function(){var t=Yh(o);r.call(t)}}var o=Fh(e,n,t,0,null,!1,0,"",Jh);return t._reactRootContainer=o,t[gs]=o.current,Fn(8===t.nodeType?t.parentNode:t),ch(),o}for(;s=t.lastChild;)t.removeChild(s);if("function"==typeof n){var a=n;n=function(){var t=Yh(l);a.call(t)}}var l=Vh(t,0,!1,null,0,!1,0,"",Jh);return t._reactRootContainer=l,t[gs]=l.current,Fn(8===t.nodeType?t.parentNode:t),ch(function(){Wh(e,l,i,n)}),l}(i,e,t,s,n);return Yh(o)}Xh.prototype.render=qh.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(r(409));Wh(t,e,null,null)},Xh.prototype.unmount=qh.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;ch(function(){Wh(null,t,null,null)}),e[gs]=null}},Xh.prototype.unstable_scheduleHydration=function(t){if(t){var e=xe();t={blockedOn:null,target:t,priority:e};for(var i=0;i<ke.length&&0!==e&&e<ke[i].priority;i++);ke.splice(i,0,t),0===i&&Be(t)}},Ie=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=de(e.pendingLanes);0!==i&&(ve(e,1|i),nh(e,Kt()),!(6&Tl)&&(Fl=Kt()+500,Fs()))}break;case 13:ch(function(){var e=zr(t,1);if(null!==e){var i=th();ih(e,t,1,i)}}),Qh(t,1)}},Me=function(t){if(13===t.tag){var e=zr(t,134217728);if(null!==e)ih(e,t,134217728,th());Qh(t,134217728)}},Se=function(t){if(13===t.tag){var e=eh(t),i=zr(t,e);if(null!==i)ih(i,t,e,th());Qh(t,e)}},xe=function(){return be},we=function(t,e){var i=be;try{return be=t,e()}finally{be=i}},Mt=function(t,e,i){switch(e){case"input":if(J(t,i),e=i.name,"radio"===i.type&&null!=e){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var n=i[e];if(n!==t&&n.form===t.form){var s=Is(n);if(!s)throw Error(r(90));Z(n),J(n,s)}}}break;case"textarea":rt(t,i);break;case"select":null!=(e=i.value)&&it(t,!!i.multiple,e,!1)}},Tt=hh,At=ch;var tc={usingClientEntryPoint:!1,Events:[bs,Cs,Is,Dt,Et,hh]},ec={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ic={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=_t(t))?null:t.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{se=nc.inject(ic),re=nc}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,e.createPortal=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gh(e))throw Error(r(200));return function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:M,key:null==n?null:""+n,children:t,containerInfo:e,implementation:i}}(t,e,null,i)},e.createRoot=function(t,e){if(!Gh(t))throw Error(r(299));var i=!1,n="",s=Zh;return null!=e&&(!0===e.unstable_strictMode&&(i=!0),void 0!==e.identifierPrefix&&(n=e.identifierPrefix),void 0!==e.onRecoverableError&&(s=e.onRecoverableError)),e=Vh(t,1,!1,null,0,i,0,n,s),t[gs]=e.current,Fn(8===t.nodeType?t.parentNode:t),new qh(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"==typeof t.render)throw Error(r(188));throw t=Object.keys(t).join(","),Error(r(268,t))}return t=null===(t=_t(e))?null:t.stateNode},e.flushSync=function(t){return ch(t)},e.hydrate=function(t,e,i){if(!Kh(e))throw Error(r(200));return $h(null,t,e,!0,i)},e.hydrateRoot=function(t,e,i){if(!Gh(t))throw Error(r(405));var n=null!=i&&i.hydratedSources||null,s=!1,o="",a=Zh;if(null!=i&&(!0===i.unstable_strictMode&&(s=!0),void 0!==i.identifierPrefix&&(o=i.identifierPrefix),void 0!==i.onRecoverableError&&(a=i.onRecoverableError)),e=Fh(e,null,t,1,null!=i?i:null,s,0,o,a),t[gs]=e.current,Fn(t),n)for(t=0;t<n.length;t++)s=(s=(i=n[t])._getVersion)(i._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[i,s]:e.mutableSourceEagerHydrationData.push(i,s);return new Xh(e)},e.render=function(t,e,i){if(!Kh(e))throw Error(r(200));return $h(null,t,e,!1,i)},e.unmountComponentAtNode=function(t){if(!Kh(t))throw Error(r(40));return!!t._reactRootContainer&&(ch(function(){$h(null,null,t,!1,function(){t._reactRootContainer=null,t[gs]=null})}),!0)},e.unstable_batchedUpdates=hh,e.unstable_renderSubtreeIntoContainer=function(t,e,i,n){if(!Kh(i))throw Error(r(200));if(null==t||void 0===t._reactInternals)throw Error(r(38));return $h(t,e,i,!1,n)},e.version="18.3.1-next-f1338f8080-20240426"},961:(t,e,i)=>{!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=i(551)},982:(t,e,i)=>{t.exports=i(463)}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}var n=i(540),s=i(338),r="ej2_instances",o=0,a=!1;function l(t,e){var i=e;return i.unshift(void 0),new(Function.prototype.bind.apply(t,i))}function h(t){var e,i=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(i);var n="ej2"+function(t){for(var e="",i=0;i<5;i++)e+=(i?",":"")+t[parseInt(i.toString(),10)];return e}(i),s=function(i){i.source===window&&"string"==typeof i.data&&i.data.length<=32&&i.data===n&&(t(),e())};return window.addEventListener("message",s,!1),window.postMessage(n,"*"),e=function(){window.removeEventListener("message",s),t=s=n=void 0}}function c(t,e){for(var i=e,n=t.replace(/\[/g,".").replace(/\]/g,"").split("."),s=0;s<n.length&&!v(i);s++)i=i[n[parseInt(s.toString(),10)]];return i}function d(t,e,i){var n,s,r=t.replace(/\[/g,".").replace(/\]/g,"").split("."),o=i||{},a=o,l=r.length;for(n=0;n<l;n++)"__proto__"!==(s=r[parseInt(n.toString(),10)])&&"constructor"!==s&&"prototype"!==s&&(n+1===l?a[""+s]=void 0===e?{}:e:y(a[""+s])&&(a[""+s]={}),a=a[""+s]);return o}function p(t,e){delete t[""+e]}var u="undefined"!=typeof window?window:{};function g(t){return!y(t)&&t.constructor==={}.constructor}function m(t,e){if(!y(e))for(var i=t,n=e,s="deepMerge",r=0,o=Object.keys(e);r<o.length;r++){var a=o[r];y(i[""+s])||-1===i[""+s].indexOf(a)||!g(n[""+a])&&!Array.isArray(n[""+a])?i[""+a]=n[""+a]:f(i[""+a],i[""+a],n[""+a],!0)}}function f(t,e,i,n){var s=t&&"object"==typeof t?t:{},r=arguments.length,o=[t,e,i,n];n&&(r-=1);for(var a=function(t){if(!o[parseInt(t.toString(),10)])return"continue";var e=o[parseInt(t.toString(),10)];Object.keys(e).forEach(function(t){var i,r=s[""+t],o=e[""+t],a=Array.isArray(o)&&Array.isArray(r)&&o.length!==r.length,l=!x()||!(r instanceof Event||a);n&&l&&(g(o)||Array.isArray(o))?g(o)?(i=r||{},Array.isArray(i)&&Object.prototype.hasOwnProperty.call(i,"isComplexArray")?f(i,{},o,n):s[""+t]=f(i,{},o,n)):(i=x()?r&&Object.keys(o).length:r||[],s[""+t]=f([],i,o,i&&i.length||o&&o.length)):s[""+t]=o})},l=1;l<r;l++)a(l);return s}function y(t){return null==t}function v(t){return void 0===t}function b(t){return t+"_"+o++}function C(t,e){var i;return function(){for(var n=this,s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];clearTimeout(i),i=setTimeout(function(){return i=null,t.apply(n,s)},e)}}function I(t,e){return t===e||!(t===document||!t)&&I(t.parentNode,e)}function M(t){try{throw new Error(t)}catch(t){throw new Error(t.message+"\n"+t.stack)}}function S(t){var e=t+"";return e.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?e:e+"px"}function x(){return a}function w(t){var e="xPath";return t instanceof Node||!x()||y(t[""+e])?t:document.evaluate(t[""+e],document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function D(t,e){var i="string"==typeof t?document.querySelector(t):t;if(i[""+r])for(var n=0,s=i[""+r];n<s.length;n++){var o=s[n];if(o instanceof e)return o}return null}var E={latn:{_digits:"0123456789",_type:"numeric"}},T={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},A=[0,1,2,3,4,5,6,7,8,9],N=function(){function t(){}return t.getMainObject=function(t,e){return c(x()?e:"main."+e,t)},t.getNumberingSystem=function(t){return c("supplemental.numberingSystems",t)||this.numberingSystems},t.reverseObject=function(t,e){for(var i={},n=0,s=e||Object.keys(t);n<s.length;n++){var r=s[n];Object.prototype.hasOwnProperty.call(i,t[""+r])||(i[t[""+r]]=r)}return i},t.getSymbolRegex=function(t){var e=t.map(function(t){return t.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|");return new RegExp(e,"g")},t.getSymbolMatch=function(t){for(var e={},i=0,n=Object.keys(T);i<n.length;i++){var s=n[i];e[t[""+s]]=T[""+s]}return e},t.constructRegex=function(t){for(var e=t.length,i="",n=0;n<e;n++)i+=n!==e-1?t[parseInt(n.toString(),10)]+"|":t[parseInt(n.toString(),10)];return i},t.convertValueParts=function(t,e,i){return t.replace(e,function(t){return i[""+t]})},t.getDefaultNumberingSystem=function(t){var e={};return e.obj=c("numbers",t),e.nSystem=c("defaultNumberingSystem",e.obj),e},t.getCurrentNumericOptions=function(t,e,i,n){var s={},r=this.getDefaultNumberingSystem(t);if(!v(r.nSystem)||n){var o=n?c("obj.mapperDigits",r):c(r.nSystem+"._digits",e);if(!v(o)){s.numericPair=this.reverseObject(o,A);var a=RegExp;s.numberParseRegex=new a(this.constructRegex(o),"g"),s.numericRegex="["+o[0]+"-"+o[9]+"]",i&&(s.numericRegex=o[0]+"-"+o[9],s.symbolNumberSystem=c(n?"numberSymbols":"symbols-numberSystem-"+r.nSystem,r.obj),s.symbolMatch=this.getSymbolMatch(s.symbolNumberSystem),s.numberSystem=r.nSystem)}}return s},t.getNumberMapper=function(t,e,i){var n={mapper:{}},s=this.getDefaultNumberingSystem(t);if(!v(s.nSystem)){n.numberSystem=s.nSystem,n.numberSymbols=c("symbols-numberSystem-"+s.nSystem,s.obj),n.timeSeparator=c("timeSeparator",n.numberSymbols);var r=c(s.nSystem+"._digits",e);if(!v(r))for(var o=0,a=A;o<a.length;o++){var l=a[o];n.mapper[parseInt(l.toString(),10)]=r[parseInt(l.toString(),10)]}}return n},t.nPair="numericPair",t.nRegex="numericRegex",t.numberingSystems=E,t}(),L={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.",BHD:"\u062f.\u0628.",DZD:"\u062f.\u062c.",EGP:"\u062c.\u0645.",ILS:"\u20aa",IQD:"\u062f.\u0639.",JOD:"\u062f.\u0627.",KMF:"CF",KWD:"\u062f.\u0643.",LBP:"\u0644.\u0644.",LYD:"\u062f.\u0644.",MAD:"\u062f.\u0645.",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.",QAR:"\u0631.\u0642.",SAR:"\u0631.\u0633.",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.",TND:"\u062f.\u062a.",YER:"\u0631.\u064a.",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};var O="USD",k=null,z=null;var P,j=RegExp,B={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(t){t.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0# ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,t.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var e=/[0-9]/g;t.defaultCurrency="$";var i=["infinity","nan","group","decimal"],n=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,s={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};t.dateConverterMapper=/dddd|ddd/gi;t.islamicRegex=/^islamic/;var r={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};t.formatRegex=new j("(^[ncpae]{1})([0-1]?[0-9]|20)?$","i"),t.currencyFormatRegex=new j("(^[ca]{1})([0-1]?[0-9]|20)?$","i"),t.curWithoutNumberRegex=/(c|a)$/gi;var o={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function a(e,i,n,s,r){var o,a=n||"date";if(r)o=p({skeleton:e},r).format||p({skeleton:"d"},"en-US").format;else{if(-1!==t.basicPatterns.indexOf(e)){if(o=c(a+"Formats."+e,i),"dateTime"===a){var l=c("dateFormats."+e,i),h=c("timeFormats."+e,i);o=o.replace("{1}",l).replace("{0}",h)}}else o=c("dateTimeFormats.availableFormats."+e,i);v(o)&&"yMd"===e&&(o="M/d/y")}return o}function l(e,i,n,s){var r={},o=n||"gregorian";if(r.parserObject=N.getMainObject(e,i)||(x()?t.blazorDefaultObject:t.defaultObject),s)r.numericObject=c("numbers",r.parserObject);else{var a=x()?"dates":"dates.calendars."+o;r.dateObject=c(a,r.parserObject)}return r}function h(t,e,i,n){return c(t+"Formats-numberSystem-"+e+(n?".accounting":".standard"),i)||(n?c(t+"Formats-numberSystem-"+e+".standard",i):"")}function d(e){var i=e.match(t.dateConverterMapper);if(i&&x()){var n=3===i[0].length?"EEE":"EEEE";return e.replace(t.dateConverterMapper,n)}return e}function p(t,e){var i=t.format||t.skeleton,n=c((e||"en-US")+"."+i,B);return n||(n=c("en-US."+i,B)),n&&(n=d(n),t.format=n.replace(/tt/,"a")),t}function u(e){var i=e.match(t.formatRegex),n={},s=i[1].toUpperCase();return n.isAccount="A"===s,n.type=t.patternMatcher[""+s],e.length>1&&(n.fractionDigits=parseInt(i[2],10)),n}function g(i,n,s,r){var o=r?{}:{nlead:"",nend:""},a=i.match(t.customRegex);if(a){r||(o.nlead=m(a[1],s),o.nend=m(a[10],s),o.groupPattern=a[4]);var l=a[7];if(l&&n){var h=l.match(e);y(h)?o.minimumFraction=0:o.minimumFraction=h.length,o.maximumFraction=l.length-1}}return o}function m(e,i){return e?(e=e.replace(t.defaultCurrency,i),""===i?e.trim():e):""}function b(t,e,i,n){return n?"$":c("currencies."+e+(i?"."+i:".symbol"),t)||c("currencies."+e+".symbol-alt-narrow",t)||"$"}function C(e,n,s){var r={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},o=e.match(t.customRegex);if(y(o)||""===o[5]&&"N/A"!==e)return r.type=void 0,r;r.nlead=o[1],r.nend=o[10];var a=o[6],l=!!a.match(/ $/g),c=-1!==a.replace(/ $/g,"").indexOf(" ");r.useGrouping=-1!==a.indexOf(",")||c,a=a.replace(/,/g,""),a=/\s$/.test(a)?a.replace(/ /g,""):a;var d=o[7];if(-1!==a.indexOf("0")&&(r.minimumIntegerDigits=a.length-a.indexOf("0")),y(d)||(r.minimumFractionDigits=d.lastIndexOf("0"),r.maximumFractionDigits=d.lastIndexOf("#"),-1===r.minimumFractionDigits&&(r.minimumFractionDigits=0),(-1===r.maximumFractionDigits||r.maximumFractionDigits<r.minimumFractionDigits)&&(r.maximumFractionDigits=r.minimumFractionDigits)),y(n)?f(r,I([r.nlead,r.nend],"%","%")):(n.isCustomFormat=!0,f(r,I([r.nlead,r.nend],"$",n.currencySymbol)),r.isCurrency||f(r,I([r.nlead,r.nend],"%",n.percentSymbol))),!y(s)){var p=h(r.type,n.numberMapper.numberSystem,s,!1);r.useGrouping&&(r.groupSeparator=c?" ":n.numberMapper.numberSymbols[i[2]],r.groupData=k.getGroupingDetails(p.split(";")[0])),r.nlead=r.nlead.replace(/'/g,""),r.nend=l?" "+r.nend.replace(/'/g,""):r.nend.replace(/'/g,"")}return r}function I(t,e,i){for(var n={nlead:t[0],nend:t[1]},s=0;s<2;s++){var r=t[parseInt(s.toString(),10)],a=r.indexOf(e);if(-1!==a&&(a<r.indexOf("'")||a>r.lastIndexOf("'"))){n[""+o[parseInt(s.toString(),10)]]=r.substr(0,a)+i+r.substr(a+1),n[""+o[""+e]]=!0,n.type=n.isCurrency?"currency":"percent";break}}return n}function M(t,e){if(-1!==t.indexOf(",")){var i=t.split(",");t=i[0]+c("numberMapper.numberSymbols.group",e)+i[1].replace(".",c("numberMapper.numberSymbols.decimal",e))}else t=t.replace(".",c("numberMapper.numberSymbols.decimal",e));return t}function S(t,e,i){t+=".";for(var n=0;n<e;n++)t+="0";if(e<i)for(var s=i-e,r=0;r<s;r++)t+="#";return t}function w(t,e){for(var i=t.split("."),n="",s=0;s<e;s++)n+="0";return i[1]?n+"."+i[1]:n}function D(t){var e=t.split("."),i=e[0],n=3-i.length%3;t="";for(var s=(i=(n&&1===n?"#":2===n?"##":"")+i).length-1;s>0;s-=3)t=","+i[s-2]+i[s-1]+i[parseInt(s.toString(),10)]+t;return t=t.slice(1),e[1]?t+"."+e[1]:t}t.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,t.basicPatterns=["short","medium","long","full"],t.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},t.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},t.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},t.month="months",t.days="days",t.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},t.getResultantPattern=a,t.getDependables=l,t.getSymbolPattern=h,t.ConvertDateToWeekFormat=d,t.compareBlazorDateFormats=p,t.getProperNumericSkeleton=u,t.getFormatData=g,t.changeCurrencySymbol=m,t.getCurrencySymbol=b,t.customFormat=function(t,e,i){for(var n={},s=t.split(";"),r=["pData","nData","zeroData"],o=0;o<s.length;o++)n[""+r[parseInt(o.toString(),10)]]=C(s[parseInt(o.toString(),10)],e,i);return y(n.nData)&&(n.nData=f({},n.pData),n.nData.nlead=y(e)?"-"+n.nData.nlead:e.minusSymbol+n.nData.nlead),n},t.customNumberFormat=C,t.isCurrencyPercent=I,t.getDateSeparator=function(t){var e=(c("dateFormats.short",t)||"").match(/[dM]([^dM])[dM]/i);return e?e[1]:"/"},t.getActualDateTimeFormat=function(t,e,i,r){var o=l(i,t,e.calendar);x()&&(e=p(e,t));var h=e.format||a(e.skeleton,o.dateObject,e.type);if(r){if(h=h.replace(n,function(t){return s[""+t]}),-1!==h.indexOf("z")){var d=h.match(/z/g).length,u=void 0,g={timeZone:{}};g.numMapper=N.getNumberMapper(o.parserObject,N.getNumberingSystem(i)),g.timeZone=c("dates.timeZoneNames",o.parserObject);var m=(new Date).getTimezoneOffset(),f=d<4?"+H;-H":g.timeZone.hourFormat;f=f.replace(/:/g,g.numMapper.timeSeparator),0===m?u=g.timeZone.gmtZeroFormat:(u=z.getTimeZoneValue(m,f),u=g.timeZone.gmtFormat.replace(/\{0\}/,u)),h=h.replace(/[z]+/,'"'+u+'"')}h=h.replace(/ $/,"")}return h},t.processSymbol=M,t.getActualNumberFormat=function(e,i,n,s){var r,o,a=l(n,e,"",!0),d={custom:!0},p=a.numericObject,m={},y=(i.format||"").match(t.currencyFormatRegex),v=t.formatRegex.test(i.format)?u(i.format||"N"):{},C={};if(y){C.numberMapper=x()?f({},a.numericObject):N.getNumberMapper(a.parserObject,N.getNumberingSystem(n),!0);var I=x()?c("currencySymbol",a.numericObject):b(a.numericObject,i.currency||O,i.altSymbol),E=h("currency",C.numberMapper.numberSystem,a.numericObject,/a/i.test(i.format)),T=(E=E.replace(/\u00A4/g,I)).split(";");m.hasNegativePattern=!!x()||T.length>1,m.nData=x()?c(v.type+"nData",p):g(T[1]||"-"+T[0],!0,I),m.pData=x()?c(v.type+"pData",p):g(T[0],!1,I),y[2]||i.minimumFractionDigits||i.maximumFractionDigits||(r=g(E.split(";")[0],!0,"",!0).minimumFraction)}if(t.formatRegex.test(i.format)||!i.format){if(f(d,u(i.format||"N")),d.custom=!1,o="###0",d.fractionDigits||i.minimumFractionDigits||i.maximumFractionDigits||r){d.fractionDigits&&(i.minimumFractionDigits=i.maximumFractionDigits=d.fractionDigits),o=S(o,r||d.fractionDigits||i.minimumFractionDigits||0,i.maximumFractionDigits||0)}if(i.minimumIntegerDigits&&(o=w(o,i.minimumIntegerDigits)),i.useGrouping&&(o=D(o)),"currency"===d.type||d.type&&x()){x()&&"currency"!==d.type&&(m.pData=c(d.type+"pData",p),m.nData=c(d.type+"nData",p));var A=o;o=m.pData.nlead+A+m.pData.nend,(m.hasNegativePattern||x())&&(o+=";"+m.nData.nlead+A+m.nData.nend)}"percent"!==d.type||x()||(o+=" %")}else o=i.format.replace(/'/g,'"');return Object.keys(C).length>0&&(o=s?o:M(o,C)),o},t.fractionDigitsPattern=S,t.minimumIntegerPattern=w,t.groupingPattern=D,t.getWeekData=function(t,e){var i="sun",n=c("supplemental.weekData.firstDay",e),s=t;return/en-/.test(s)&&(s=s.slice(3)),s=s.slice(0,2).toUpperCase()+s.substr(2),n&&(i=n[""+s]||n[s.slice(0,2)]||"sun"),r[""+i]},t.replaceBlazorCurrency=function(t,e,i){var n=c(i||"",L);if(e!==n)for(var s=0,r=t;s<r.length;s++){var o=r[s];o.nend=o.nend.replace(e,n),o.nlead=o.nlead.replace(e,n)}},t.getWeekOfYear=function(t,e){var i,n=new Date(t.getFullYear(),0,1),s=n.getDay();s=s>=0?s:s+7;var r=Math.floor((t.getTime()-n.getTime()-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)+1;if(s<4){if((i=Math.floor((r+s-e-1)/7)+1)>52){var o=new Date(t.getFullYear()+1,0,1).getDay();i=(o=o>=0?o:o+7)<4?1:53}}else i=Math.floor((r+s-e-1)/7);return i}}(P||(P={}));var H=/^(.*?):[ \t]*([^\r\n]*)$/gm,R=function(){function t(t,e,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof t?(this.url=t,this.type=e?e.toUpperCase():"GET",this.mode=!!y(i)||i):"object"==typeof t&&(this.options=t,m(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}return t.prototype.send=function(t){var e=this;this.data=y(t)?this.data:t;var i={cancel:!1,httpRequest:null};return new Promise(function(t,n){e.httpRequest=new XMLHttpRequest,e.httpRequest.onreadystatechange=function(){e.stateChange(t,n)},y(e.onLoad)||(e.httpRequest.onload=e.onLoad),y(e.onProgress)||(e.httpRequest.onprogress=e.onProgress),y(e.onAbort)||(e.httpRequest.onabort=e.onAbort),y(e.onError)||(e.httpRequest.onerror=e.onError),y(e.onUploadProgress)||(e.httpRequest.upload.onprogress=e.onUploadProgress),e.httpRequest.open(e.type,e.url,e.mode),y(e.data)||null===e.contentType||e.httpRequest.setRequestHeader("Content-Type",e.contentType||"application/json; charset=utf-8"),e.beforeSend&&(i.httpRequest=e.httpRequest,e.beforeSend(i)),i.cancel||e.httpRequest.send(y(e.data)?null:e.data)})},t.prototype.successHandler=function(t){return this.onSuccess&&this.onSuccess(t,this),t},t.prototype.failureHandler=function(t){return this.onFailure&&this.onFailure(this.httpRequest),t},t.prototype.stateChange=function(t,e){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch(t){}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?t(this.successHandler(i)):this.emitError?e(new Error(this.failureHandler(this.httpRequest.statusText))):t())},t.prototype.getResponseHeader=function(t){for(var e={},i=H.exec(this.httpRequest.getAllResponseHeaders());i;)e[i[1].toLowerCase()]=i[2],i=H.exec(this.httpRequest.getAllResponseHeaders());var n=e[t.toLowerCase()];return y(n)?null:n},t}(),V=function(){function t(t,e,i){this.type="GET",this.emitError=!0,"string"==typeof t?(this.url=t,this.type=y(e)?this.type:e.toUpperCase(),this.contentType=i):g(t)&&Object.keys(t).length>0&&m(this,t),this.contentType=y(this.contentType)?"application/json; charset=utf-8":this.contentType}return t.prototype.send=function(t){var e=this,i={"application/json":"json","multipart/form-data":"formData","application/octet-stream":"blob","application/x-www-form-urlencoded":"formData"};try{y(this.fetchRequest)&&"GET"===this.type?this.fetchRequest=new Request(this.url,{method:this.type}):y(this.fetchRequest)&&(this.data=y(t)?this.data:t,this.fetchRequest=new Request(this.url,{method:this.type,headers:{"Content-Type":this.contentType},body:this.data}));var n={cancel:!1,fetchRequest:this.fetchRequest};return this.triggerEvent(this.beforeSend,n),n.cancel?null:(this.fetchResponse=fetch(this.fetchRequest),this.fetchResponse.then(function(t){if(e.triggerEvent(e.onLoad,t),!t.ok)throw t;for(var n="text",s=0,r=Object.keys(i);s<r.length;s++){var o=r[s];t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf(o)&&(n=i[o])}return t[n]()}).then(function(t){return e.triggerEvent(e.onSuccess,t,e),t}).catch(function(t){var i={};return e.emitError&&(e.triggerEvent(e.onFailure,t),i=Promise.reject(t)),i}))}catch(t){return t}},t.prototype.triggerEvent=function(t,e,i){y(t)||"function"!=typeof t||t(e,i)},t}(),U=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,F=/msie|trident/i,W=/Trident\/7\./,Y=/(ipad|iphone|ipod touch)/i,_=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,Q=/android/i,Z=/trident|windows phone|edge/i,q=/(version)[ /]([\w.]+)/i,X={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};"undefined"!=typeof window&&(window.browserDetails=window.browserDetails||{});var G=function(){function t(){}return t.extractBrowserDetail=function(){for(var e={culture:{}},i=[],n=0,s=Object.keys(X);n<s.length;n++){var r=s[n];if(i=t.userAgent.match(X[""+r])){if(e.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),e.name="crios"===i[1].toLowerCase()?"chrome":e.name,e.version=i[2],e.culture.name=e.culture.language=navigator.language,t.userAgent.match(W)){e.name="msie";break}var o=t.userAgent.match(q);"safari"===e.name&&o&&(e.version=o[2]);break}}return e},t.getEvent=function(e){var i={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return t.isPointer?i[""+e].isPointer:t.isTouch?i[""+e].isTouch+(t.isDevice?"":" "+i[""+e].isDevice):i[""+e].isDevice},t.getTouchStartEvent=function(){return t.getEvent("start")},t.getTouchEndEvent=function(){return t.getEvent("end")},t.getTouchMoveEvent=function(){return t.getEvent("move")},t.getTouchCancelEvent=function(){return t.getEvent("cancel")},t.isSafari=function(){return t.isDevice&&t.isIos&&t.isTouch&&"undefined"!=typeof window&&-1===window.navigator.userAgent.toLowerCase().indexOf("iphone")&&window.navigator.userAgent.toLowerCase().indexOf("safari")>-1},t.getValue=function(e,i){var n="undefined"!=typeof window?window.browserDetails:{};return"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===t.isTouch&&!X.CHROME.test(navigator.userAgent)&&(n.isIos=!0,n.isDevice=!0,n.isTouch=!0,n.isPointer=!0,n.isPointer="pointerEnabled"in window.navigator),"undefined"!=typeof window&&window.Capacitor&&"ios"===window.Capacitor.getPlatform()&&(n.isPointer=!1),void 0===n[""+e]?n[""+e]=i.test(t.userAgent):n[""+e]},Object.defineProperty(t,"userAgent",{get:function(){return t.uA},set:function(e){t.uA=e,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"info",{get:function(){return v(window.browserDetails.info)?window.browserDetails.info=t.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIE",{get:function(){return t.getValue("isIE",F)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isTouch",{get:function(){return v(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isPointer",{get:function(){return v(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMSPointer",{get:function(){return v(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isDevice",{get:function(){return t.getValue("isDevice",U)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIos",{get:function(){return t.getValue("isIos",Y)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIos7",{get:function(){return t.getValue("isIos7",_)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return t.getValue("isAndroid",Q)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWebView",{get:function(){return v(window.browserDetails.isWebView)?(window.browserDetails.isWebView=!(v(window.cordova)&&v(window.PhoneGap)&&v(window.phonegap)&&"object"!==window.forge),window.browserDetails.isWebView):window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWindows",{get:function(){return t.getValue("isWindows",Z)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchStartEvent",{get:function(){return v(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=t.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchMoveEvent",{get:function(){return v(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=t.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchEndEvent",{get:function(){return v(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=t.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"touchCancelEvent",{get:function(){return v(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=t.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),t.uA="undefined"!=typeof navigator?navigator.userAgent:"",t}(),K=function(){function t(){}return t.addOrGetEventData=function(t){return"__eventList"in t?t.__eventList.events:(t.__eventList={},t.__eventList.events=[])},t.add=function(e,i,n,s,r){var o,a=t.addOrGetEventData(e);o=r?C(n,r):n,s&&(o=o.bind(s));for(var l=i.split(" "),h=0;h<l.length;h++)a.push({name:l[parseInt(h.toString(),10)],listener:n,debounce:o}),G.isIE?e.addEventListener(l[parseInt(h.toString(),10)],o):e.addEventListener(l[parseInt(h.toString(),10)],o,{passive:!1});return o},t.remove=function(e,i,n){for(var s=t.addOrGetEventData(e),r=i.split(" "),o=function(t){var i,o=-1;s&&0!==s.length&&s.some(function(e,s){return e.name===r[parseInt(t.toString(),10)]&&e.listener===n&&(o=s,i=e.debounce,!0)}),-1!==o&&s.splice(o,1),i&&e.removeEventListener(r[parseInt(t.toString(),10)],i)},a=0;a<r.length;a++)o(a)},t.clearEvents=function(e){for(var i=t.addOrGetEventData(e),n=f([],void 0,i),s=0;s<n.length;s++){var r=n[parseInt(s.toString(),10)];e.removeEventListener(r.name,r.debounce),i.shift()}},t.trigger=function(e,i,n){for(var s=0,r=t.addOrGetEventData(e);s<r.length;s++){var o=r[s];o.name===i&&o.debounce.call(this,n)}},t}(),J=/^svg|^path|^g/;function $(t,e){var i=J.test(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return void 0===e||(i.innerHTML=e.innerHTML?e.innerHTML:"",void 0!==e.className&&(i.className=e.className),void 0!==e.id&&(i.id=e.id),void 0!==e.styles&&(i.style.cssText=e.styles),void 0!==e.attrs&&ht(i,e.attrs)),i}function tt(t,e){for(var i=it(e),n=RegExp,s=0,r=t;s<r.length;s++)for(var o=r[s],a=0,l=i;a<l.length;a++){var h=l[a];if(g(o)){var p=c("attributes.className",o);y(p)?d("attributes.className",h,o):new n("\\b"+h+"\\b","i").test(p)||d("attributes.className",p+" "+h,o)}else o.classList.contains(h)||o.classList.add(h)}return t}function et(t,e){for(var i=it(e),n=0,s=t;n<s.length;n++){var r=s[n],o=g(r);if(o?c("attributes.className",r):""!==r.className)for(var a=0,l=i;a<l.length;a++){var h=l[a];if(o){var p=c("attributes.className",r).split(" "),u=p.indexOf(h);-1!==u&&p.splice(u,1),d("attributes.className",p.join(" "),r)}else r.classList.remove(h)}}return t}function it(t){var e=[];return"string"==typeof t?e.push(t):e=t,e}function nt(t){var e=t;return""===e.style.visibility&&e.offsetWidth>0}function st(t,e,i){for(var n=document.createDocumentFragment(),s=0,r=t;s<r.length;s++){var o=r[s];n.appendChild(o)}return e.insertBefore(n,e.firstElementChild),i&&ot(e),t}function rt(t,e,i){var n=document.createDocumentFragment();if(t instanceof NodeList)for(;t.length>0;)n.appendChild(t[0]);else for(var s=0,r=t;s<r.length;s++){var o=r[s];n.appendChild(o)}return e.appendChild(n),i&&ot(e),t}function ot(t){t.querySelectorAll("script").forEach(function(t){var e=document.createElement("script");e.text=t.innerHTML,document.head.appendChild(e),at(e)})}function at(t){var e=t.parentNode;if(e)return e.removeChild(t)}function lt(t){var e=t.parentNode;K.clearEvents(t),e.removeChild(t)}function ht(t,e){for(var i=t,n=0,s=Object.keys(e);n<s.length;n++){var r=s[n];if(g(i)){var o=r;"tabindex"===r&&(o="tabIndex"),i.attributes[""+o]=e[""+r]}else i.setAttribute(r,e[""+r])}return i}function ct(t,e,i){return void 0===e&&(e=document),t=pt(t),e.querySelector(t)}function dt(t,e,i){return void 0===e&&(e=document),t=pt(t),e.querySelectorAll(t)}function pt(t){var e=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(t.match(/#[0-9]/g)||t.match(e)){for(var i=t.split(","),n=0;n<i.length;n++){for(var s=i[parseInt(n.toString(),10)].split(" "),r=0;r<s.length;r++)if(s[parseInt(r.toString(),10)].indexOf("#")>-1&&!s[parseInt(r.toString(),10)].match(/\[.*\]/)){var o=s[parseInt(r.toString(),10)].split("#");if(o[1].match(/^\d/)||o[1].match(e)){var a=s[parseInt(r.toString(),10)].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",s[parseInt(r.toString(),10)]=a.join(".")}}i[parseInt(n.toString(),10)]=s.join(" ")}return i.join(",")}return t}function ut(t,e){var i=t;if("function"==typeof i.closest)return i.closest(e);for(;i&&1===i.nodeType;){if(ft(i,e))return i;i=i.parentNode}return null}function gt(t,e){void 0!==e&&Object.keys(e).forEach(function(i){t.style[""+i]=e[""+i]})}function mt(t,e,i){tt([t],e),et([t],i)}function ft(t,e){var i=t.matches||t.msMatchesSelector||t.webkitMatchesSelector;return i?i.call(t,e):-1!==[].indexOf.call(document.querySelectorAll(e),t)}var yt,vt=function(){function t(t){this.ranArray=[],this.boundedEvents={},y(t)||(this.context=t)}return t.prototype.on=function(t,e,i,n){if(!y(e)){var s=i||this.context;this.notExist(t)?this.boundedEvents[""+t]=[{handler:e,context:s,id:n}]:y(n)?this.isHandlerPresent(this.boundedEvents[""+t],e)||this.boundedEvents[""+t].push({handler:e,context:s}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[""+t].push({handler:e,context:s,id:n}))}},t.prototype.off=function(t,e,i){if(!this.notExist(t)){var n=c(t,this.boundedEvents);if(e){for(var s=0;s<n.length;s++)if(i){if(n[parseInt(s.toString(),10)].id===i){n.splice(s,1);var r=this.ranArray.indexOf(i);-1!==r&&this.ranArray.splice(r,1);break}}else if(e===n[parseInt(s.toString(),10)].handler){n.splice(s,1);break}}else delete this.boundedEvents[""+t]}},t.prototype.notify=function(t,e,i,n){if(this.notExist(t))i&&i.call(this,e);else{e&&(e.name=t);var s=c(t,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(s,e,i,n,0);for(var r=0,o=s;r<o.length;r++){var a=o[r];a.handler.call(a.context,e)}i&&i.call(this,e)}},t.prototype.blazorCallback=function(t,e,i,n,s){var r=this,o=s===t.length-1;if(s<t.length){var a=t[parseInt(s.toString(),10)],l=a.handler.call(a.context,e);if(l&&"function"==typeof l.then){if(!i)return l;l.then(function(l){if(l="string"==typeof l&&r.isJson(l)?JSON.parse(l,r.dateReviver):l,f(e,e,l,!0),!i||!o)return r.blazorCallback(t,e,i,n,s+1);i.call(a.context,e)}).catch(function(t){n&&n.call(a.context,"string"==typeof t&&r.isJson(t)?JSON.parse(t,r.dateReviver):t)})}else{if(!i||!o)return this.blazorCallback(t,e,i,n,s+1);i.call(a.context,e)}}},t.prototype.dateReviver=function(t,e){return x&&"string"==typeof e&&null!==e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e):e},t.prototype.isJson=function(t){try{JSON.parse(t)}catch(t){return!1}return!0},t.prototype.destroy=function(){this.boundedEvents=this.context=void 0},t.prototype.offIntlEvents=function(){var t=this.boundedEvents.notifyExternalChange;if(t){for(var e=0;e<t.length;e++){var i=t[parseInt(e.toString(),10)].context;i&&i.detectFunction&&i.randomId&&i.isReactMock&&(this.off("notifyExternalChange",i.detectFunction,i.randomId),e--)}this.boundedEvents.notifyExternalChange.length||delete this.boundedEvents.notifyExternalChange}},t.prototype.notExist=function(t){return!1===Object.prototype.hasOwnProperty.call(this.boundedEvents,t)||this.boundedEvents[""+t].length<=0},t.prototype.isHandlerPresent=function(t,e){for(var i=0,n=t;i<n.length;i++){if(n[i].handler===e)return!0}return!1},t}(),bt=new RegExp("]"),Ct=function(){function t(t,e){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new vt(this),v(e)||(this.element="string"==typeof e?document.querySelector(e):e,y(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),v(t)||this.setProperties(t,!0),this.isDestroyed=!1}return t.prototype.setProperties=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!e,m(this,t),!0!==e?(m(this.changedProperties,t),this.dataBind()):x()&&this.isRendered&&this.serverDataBind(t),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},t.callChildDataBind=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var s=n[i];if(e[""+s]instanceof Array)for(var r=0,o=e[""+s];r<o.length;r++){var a=o[r];void 0!==a.dataBind&&a.dataBind()}else e[""+s].dataBind()}},t.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},t.prototype.dataBind=function(){if(t.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var e=this.isProtectedOnChange,i=this.changedProperties,n=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(i,n),this.isProtectedOnChange=e}},t.prototype.serverDataBind=function(t){if(x()){t=t||{},f(this.bulkChanges,{},t,!0);var e="sfBlazor";this.allowServerDataBinding&&window[""+e].updateModel&&(window[""+e].updateModel(this),this.bulkChanges={})}},t.prototype.saveChanges=function(t,e,i){if(x()){var n={};n[""+t]=e,this.serverDataBind(n)}this.isProtectedOnChange||(this.oldProperties[""+t]=i,this.changedProperties[""+t]=e,this.finalUpdate(),this.finalUpdate=h(this.dataBind.bind(this)))},t.prototype.addEventListener=function(t,e){this.modelObserver.on(t,e)},t.prototype.removeEventListener=function(t,e){this.modelObserver.off(t,e)},t.prototype.trigger=function(t,e,i,n){var s=this;if(!0!==this.isDestroyed){var r=this.isProtectedOnChange;this.isProtectedOnChange=!1;var o=this.modelObserver.notify(t,e,i,n);if(bt.test(t)){var a=c(t,this);if(a){if(window.Blazor){var l=a.call(this,e);l&&"function"==typeof l.then?i?l.then(function(t){i&&(t="string"==typeof t&&s.modelObserver.isJson(t)?JSON.parse(t):t,i.call(s,t))}).catch(function(t){n&&(t="string"==typeof t&&s.modelObserver.isJson(t)?JSON.parse(t):t,n.call(s,t))}):o=l:i&&i.call(this,e)}else a.call(this,e),i&&i.call(this,e)}else i&&i.call(this,e)}return this.isProtectedOnChange=r,o}},t.prototype.addInstance=function(){var t="e-"+this.getModuleName().toLowerCase();tt([this.element],["e-lib",t]),y(this.element.ej2_instances)?d("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},t.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances?this.element.ej2_instances.filter(function(e){return yt?yt(e)!==yt(t):e!==t}):[],et([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&et([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},t}();function It(t,e){var i,n,s="string"==typeof t?document.getElementById(t):t;if(s&&s.ej2_instances)for(n=0;n<s.ej2_instances.length;n++){if(i=s.ej2_instances[parseInt(n.toString(),10)],"string"==typeof e){if(e===i.getModuleName())return i}else if(i instanceof e)return i}}function Mt(t,e,i,n){return Object.prototype.hasOwnProperty.call(t.properties,e)&&t.properties[""+e]instanceof n||(t.properties[""+e]=l(n,[t,e,i])),t.properties[""+e]}function St(t,e,i,n,s,r){for(var o=[],a=i?i.length:0,h=0;h<a;h++){var c=n;if(r&&(c=n(i[parseInt(h.toString(),10)],t)),s){var d=l(c,[t,e,{},!0]);d.setProperties(i[parseInt(h.toString(),10)],!0),o.push(d)}else o.push(l(c,[t,e,i[parseInt(h.toString(),10)],!1]))}return o}function xt(t,e){return function(){return Object.prototype.hasOwnProperty.call(this.properties,e)||(this.properties[""+e]=t),this.properties[""+e]}}function wt(t,e){return function(i){if(this.properties[""+e]!==i){var n=Object.prototype.hasOwnProperty.call(this.properties,e)?this.properties[""+e]:t;this.saveChanges(e,i,n),this.properties[""+e]=i}}}function Dt(t,e,i){return function(){return Mt(this,e,t,i)}}function Et(t,e,i){return function(n){Mt(this,e,t,i).setProperties(n)}}function Tt(t,e,i){return function(){var n=i({});return Object.prototype.hasOwnProperty.call(this.properties,e)?this.properties[""+e]:Mt(this,e,t,n)}}function At(t,e,i){return function(n){var s=i(n,this);Mt(this,e,t,s).setProperties(n)}}function Nt(t,e,i){return function(){var n=this;if(!Object.prototype.hasOwnProperty.call(this.properties,e)){var s=St(this,e,t,i,!1);this.properties[""+e]=s}var r=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return Object.prototype.hasOwnProperty.call(this.properties[""+e],"push")||r||["push","pop"].forEach(function(t){var s={value:zt(t,e,i,n.properties[""+e]).bind(n),configurable:!0};Object.defineProperty(n.properties[""+e],t,s)}),Object.prototype.hasOwnProperty.call(this.properties[""+e],"isComplexArray")||Object.defineProperty(this.properties[""+e],"isComplexArray",{value:!0}),this.properties[""+e]}}function Lt(t,e,i){return function(n){this.isComplexArraySetter=!0;var s=St(this,e,t,i,!1),r=St(this,e,n,i,!0);this.isComplexArraySetter=!1,this.saveChanges(e,r,s),this.properties[""+e]=r}}function Ot(t,e,i){return function(n){var s=Object.prototype.hasOwnProperty.call(this.properties,e)?this.properties[""+e]:t,r=St(this,e,n,i,!0,!0);this.saveChanges(e,r,s),this.properties[""+e]=r}}function kt(t,e,i){return function(){var n=i({});if(!Object.prototype.hasOwnProperty.call(this.properties,e)){var s=St(this,e,t,n,!1);this.properties[""+e]=s}return this.properties[""+e]}}function zt(t,e,i,n){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var r=this.propName?this.getParentKey()+"."+e+"-":e+"-";switch(t){case"push":for(var o=0;o<i.length;o++){var a=i[parseInt(o.toString(),10)];Array.prototype[""+t].apply(n,[a]);var l=Pt(r+(n.length-1),a,!this.controlParent,t);this.serverDataBind(l,i[parseInt(o.toString(),10)],!1,t)}break;case"pop":Array.prototype[""+t].apply(n);l=Pt(r+n.length,null,!this.controlParent,t);this.serverDataBind(l,{ejsAction:"pop"},!1,t)}return n}}function Pt(t,e,i,n){var s=t;if(i&&((s={})[""+t]=e,e&&"object"==typeof e)){s[""+t].ejsAction=n}return s}function jt(t){return function(e,i){var n={set:wt(t,i),get:xt(t,i),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),Wt(e,i,"prop",t)}}function Bt(t,e){return function(i,n){var s={set:Et(t,n,e),get:Dt(t,n,e),enumerable:!0,configurable:!0};Object.defineProperty(i,n,s),Wt(i,n,"complexProp",t,e)}}function Ht(t){return function(e,i){var n={set:At({},i,t),get:Tt({},i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),Wt(e,i,"complexProp",{},t)}}function Rt(t,e){return function(i,n){var s={set:Lt(t,n,e),get:Nt(t,n,e),enumerable:!0,configurable:!0};Object.defineProperty(i,n,s),Wt(i,n,"colProp",t,e)}}function Vt(t){return function(e,i){var n={set:Ot([],i,t),get:kt([],i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),Wt(e,i,"colProp",{},t)}}function Ut(){return function(t,e){var i={set:function(t){var i=this.properties[""+e];if(i!==t){var n=Yt(this,e);!1===v(i)&&n.context.removeEventListener(n.prefix,i),n.context.addEventListener(n.prefix,t),this.properties[""+e]=t}},get:xt(void 0,e),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i),Wt(t,e,"event")}}function Ft(t){}function Wt(t,e,i,n,s){v(t.propList)&&(t.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),t.propList[i+"s"].push({propertyName:e,defaultValue:n,type:s}),t.propList[i+"Names"].push(e)}function Yt(t,e){if(!1===Object.prototype.hasOwnProperty.call(t,"parentObj"))return{context:t,prefix:e};var i=c("propName",t);return i&&(e=i+"-"+e),Yt(c("parentObj",t),e)}var _t,Qt=(_t=function(t,e){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},_t(t,e)},function(t,e){function i(){this.constructor=t}_t(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),Zt=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},qt=function(t){function e(e){var i=t.call(this,e,void 0)||this;return i.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},i}var i;return Qt(e,t),i=e,e.prototype.animate=function(t,e){e=e||{};var n=this.getModel(e);if("string"==typeof t)for(var s=0,r=Array.prototype.slice.call(dt(t,document));s<r.length;s++){var o=r[s];n.element=o,i.delayAnimation(n)}else n.element=t,i.delayAnimation(n)},e.stop=function(t,e){t.style.animation="",t.removeAttribute("e-animate");var i=t.getAttribute("e-animation-id");if(i){var n=parseInt(i,10);cancelAnimationFrame(n),t.removeAttribute("e-animation-id")}e&&e.end&&e.end.call(this,e)},e.delayAnimation=function(t){"Disable"===te||te===ee.Disable?(t.begin&&t.begin.call(this,t),t.end&&t.end.call(this,t)):t.delay?setTimeout(function(){i.applyAnimation(t)},t.delay):i.applyAnimation(t)},e.applyAnimation=function(t){var e=this;t.timeStamp=0;var i=0,n=0,s=0,r=t.duration;t.element.setAttribute("e-animate","true");var o=function(a){try{if(a){s=0===s?a:s,t.timeStamp=a+t.timeStamp-s,s=a,!i&&t.begin&&t.begin.call(e,t),i+=1;var l=t.timeStamp/i;t.timeStamp<r&&t.timeStamp+l<r&&t.element.getAttribute("e-animate")?(t.element.style.animation=t.name+" "+t.duration+"ms "+t.timingFunction,t.progress&&t.progress.call(e,t),requestAnimationFrame(o)):(cancelAnimationFrame(n),t.element.removeAttribute("e-animation-id"),t.element.removeAttribute("e-animate"),t.element.style.animation="",t.end&&t.end.call(e,t))}else n=requestAnimationFrame(o),t.element.setAttribute("e-animation-id",n.toString())}catch(i){cancelAnimationFrame(n),t.element.removeAttribute("e-animation-id"),t.fail&&t.fail.call(e,i)}};o()},e.prototype.getModel=function(t){return{name:t.name||this.name,delay:t.delay||this.delay,duration:void 0!==t.duration?t.duration:this.duration,begin:t.begin||this.begin,end:t.end||this.end,fail:t.fail||this.fail,progress:t.progress||this.progress,timingFunction:this.easing[t.timingFunction]?this.easing[t.timingFunction]:t.timingFunction||this.easing[this.timingFunction]}},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"animation"},e.prototype.destroy=function(){},Zt([jt("FadeIn")],e.prototype,"name",void 0),Zt([jt(400)],e.prototype,"duration",void 0),Zt([jt("ease")],e.prototype,"timingFunction",void 0),Zt([jt(0)],e.prototype,"delay",void 0),Zt([Ut()],e.prototype,"progress",void 0),Zt([Ut()],e.prototype,"begin",void 0),Zt([Ut()],e.prototype,"end",void 0),Zt([Ut()],e.prototype,"fail",void 0),e=i=Zt([Ft],e)}(Ct);function Xt(t,e,i){var n=function(t){var e={selector:t&&t.selector?t.selector:null,ignore:t&&t.ignore?t.ignore:null,rippleFlag:t&&t.rippleFlag,isCenterRipple:t&&t.isCenterRipple,duration:t&&t.duration?t.duration:350};return e}(e);return!1===n.rippleFlag||void 0===n.rippleFlag&&!ie?function(){}:(t.setAttribute("data-ripple","true"),K.add(t,"mousedown",Gt,{parent:t,rippleOptions:n}),K.add(t,"mouseup",Kt,{parent:t,rippleOptions:n,done:i}),K.add(t,"mouseleave",Jt,{parent:t,rippleOptions:n}),G.isPointer&&K.add(t,"transitionend",Jt,{parent:t,rippleOptions:n}),function(){t.removeAttribute("data-ripple"),K.remove(t,"mousedown",Gt),K.remove(t,"mouseup",Kt),K.remove(t,"mouseleave",Jt),K.remove(t,"transitionend",Jt)})}function Gt(t){var e=t.target,i=this.rippleOptions.selector,n=i?ut(e,i):e;if(!(!n||this.rippleOptions&&ut(e,this.rippleOptions.ignore))){var s=n.getBoundingClientRect(),r=t.pageX-document.body.scrollLeft,o=t.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(r-s.left),Math.abs(r-s.right)),l=Math.max(Math.abs(o-s.top),Math.abs(o-s.bottom)),h=Math.sqrt(a*a+l*l),c=2*h+"px",d=r-s.left-h,p=o-s.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,p=0,c="100%"),n.classList.add("e-ripple");var u=$("div",{className:"e-ripple-element",styles:"width: "+c+";height: "+c+";left: "+d+"px;top: "+p+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});n.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)",n!==this.parent&&K.add(n,"mouseleave",Jt,{parent:this.parent,rippleOptions:this.rippleOptions})}}function Kt(t){$t(t,this)}function Jt(t){$t(t,this)}function $t(t,e){var i=e.rippleOptions.duration,n=t.target,s=e.rippleOptions.selector,r=s?ut(n,s):n;if(r&&(!r||-1!==r.className.indexOf("e-ripple"))){var o=dt(".e-ripple-element",r),a=o[o.length-1];a&&(a.style.opacity="0.5"),e.parent!==r&&K.remove(r,"mouseleave",Jt),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),r.getElementsByClassName("e-ripple-element").length||r.classList.remove("e-ripple"),e.done&&e.done(t)},i)}}var te,ee,ie=!1;!function(t){t.Default="Default",t.Enable="Enable",t.Disable="Disable"}(ee||(ee={}));var ne,se=function(){function t(t){this.loadedModules=[],this.parent=t}return t.prototype.inject=function(t,e){var i=t.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(t);for(var n=0;n<i;n++)for(var s=t[parseInt(n.toString(),10)],r=0,o=e;r<o.length;r++){var a=o[r],h=s.member;if(a&&a.prototype.getModuleName()===s.member&&!this.isModuleLoaded(h)){var c=l(a,s.args),p=this.getMemberName(h);s.isProperty?d(p,a,this.parent):d(p,c,this.parent);var u=s;u.member=p,this.loadedModules.push(u)}}}else this.clean()},t.prototype.clean=function(){for(var t=0,e=this.loadedModules;t<e.length;t++){var i=e[t];i.isProperty||c(i.member,this.parent).destroy()}this.loadedModules=[]},t.prototype.getNonInjectedModules=function(t){var e=this;return t.filter(function(t){return!e.isModuleLoaded(t.member)})},t.prototype.clearUnusedModule=function(t){for(var e=this,i=t.map(function(t){return e.getMemberName(t.member)}),n=0,s=this.loadedModules.filter(function(t){return-1===i.indexOf(t.member)});n<s.length;n++){var r=s[n];r.isProperty||c(r.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(r),1),p(this.parent,r.member)}},t.prototype.getMemberName=function(t){return t[0].toLowerCase()+t.substring(1)+"Module"},t.prototype.isModuleLoaded=function(t){for(var e=0,i=this.loadedModules;e<i.length;e++){if(i[e].member===this.getMemberName(t))return!0}return!1},t}(),re=function(){function t(t,e,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=c("callChildDataBind",Ct),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=e,this.isParentArray=n,this.setProperties(i,!0)}return t.prototype.updateChange=function(t,e){!0===t?this.parentObj.childChangedProperties[""+e]=t:delete this.parentObj.childChangedProperties[""+e],this.parentObj.updateChange&&this.parentObj.updateChange(t,this.parentObj.propName)},t.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var t=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(t)}}},t.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},t.prototype.setProperties=function(t,e){!0===e?(m(this,t),this.updateChange(!1,this.propName),this.clearChanges()):m(this,t)},t.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var t=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(d(this.propName+"."+t,this.changedProperties,this.parentObj.changedProperties),d(this.propName+"."+t,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},t.prototype.saveChanges=function(t,e,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(t,e,!0),this.oldProperties[""+t]=i,this.changedProperties[""+t]=e,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},t.prototype.serverDataBind=function(t,e,i,n){if(x()&&!this.parentObj.isComplexArraySetter){var s,r={},o=i?this.getParentKey(!0)+"."+t:t;if(-1!==o.indexOf(".")){var a=o.split(".");s=r;for(var l=0;l<a.length;l++){var h=l===a.length-1;s[a[parseInt(l.toString(),10)]]=h?e:{},s=h?s:s[a[parseInt(l.toString(),10)]]}}else r[""+o]={},s=r[""+o],r[""+o][""+t]=e;if(this.isParentArray){s.ejsAction=n||"none"}this.controlParent.serverDataBind(r)}},t.prototype.getParentKey=function(t){var e="",i=this.propName;if(this.isParentArray){e=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=t?n:n>0?n-1:0,i+=e=-1!==e?"-"+e:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+e),i},t}();!function(t){var e=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];t.getHijriDate=function(t){var i=t.getDate(),n=t.getMonth(),s=t.getFullYear(),r=n+1,o=s;r<3&&(o-=1,r+=12);var a=Math.floor(o/100),l=a-Math.floor(a/4)-2,h=Math.floor(365.25*(o+4716))+Math.floor(30.6001*(r+1))+i-l-1524,c=h+(l=(a=Math.floor((h-1867216.25)/36524.25))-Math.floor(a/4)+1)+1524,d=Math.floor((c-122.1)/365.25),p=Math.floor(365.25*d),u=Math.floor((c-p)/30.6001);i=c-p-Math.floor(30.6001*u),(n=Math.floor((c-p)/20.6001))>13&&(d+=1,n-=12),n-=1,s=d-4716;var g=h-24e5,m=10631/30,f=h-1948084,y=Math.floor(f/10631);f-=10631*y;var v=Math.floor((f-.1335)/m),b=30*y+v;f-=Math.floor(v*m+.1335);var C=Math.floor((f+28.5001)/29.5);13===C&&(C=12);for(var I=f-Math.floor(29.5001*C-29),M=0;M<e.length&&!(e[parseInt(M.toString(),10)]>g);M++);var S=M+16260,x=Math.floor((S-1)/12),w=x+1,D=S-12*x,E=g-e[M-1]+1;return(E+"").length>2&&(E=I,D=C,w=b),{year:w,month:D,date:E}},t.toGregorian=function(t,i,n){var s=n+e[12*(t-1)+1+(i-1)-16260-1]-1+24e5,r=Math.floor(s+.5),o=Math.floor((r-1867216.25)/36524.25),a=(o=r+1+o-Math.floor(o/4))+1524,l=Math.floor((a-122.1)/365.25),h=Math.floor(365.25*l),c=Math.floor((a-h)/30.6001),d=a-h-Math.floor(30.6001*c),p=c-(c>13.5?13:1),u=l-(p>2.5?4716:4715);return u<=0&&p--,new Date(u+"/"+p+"/"+d)}}(ne||(ne={}));var oe=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,ae="stand-alone",le=["sun","mon","tue","wed","thu","fri","sat"],he={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},ce={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},de=function(){function t(){}return t.dateFormat=function(t,e,i){var n=this,s=P.getDependables(i,t,e.calendar),r=c("parserObject.numbers",s),o=s.dateObject,a={isIslamic:P.islamicRegex.test(e.calendar)};a.firstDayOfWeek=P.getWeekData(t,i),x()&&e.isServerRendered&&(e=P.compareBlazorDateFormats(e,t));var l=e.format||P.getResultantPattern(e.skeleton,s.dateObject,e.type,!1,x()?t:"");if(a.dateSeperator=x()?c("dateSeperator",o):P.getDateSeparator(s.dateObject),v(l))M("Format options or type given must be invalid");else{l=P.ConvertDateToWeekFormat(l),x()&&(l=l.replace(/tt/,"a")),a.pattern=l,a.numMapper=x()?f({},r):N.getNumberMapper(s.parserObject,N.getNumberingSystem(i));for(var h=0,d=l.match(oe)||[];h<d.length;h++){var p=d[h],u=p.length,g=p[0];switch("K"===g&&(g="h"),g){case"E":case"c":x()?a.weekday=c("days."+P.monthIndex[""+u],o):a.weekday=s.dateObject[""+P.days][""+ae][P.monthIndex[""+u]];break;case"M":case"L":x()?a.month=c("months."+P.monthIndex[""+u],o):a.month=s.dateObject[""+P.month][""+ae][P.monthIndex[""+u]];break;case"a":a.designator=x()?c("dayPeriods",o):c("dayPeriods.format.wide",o);break;case"G":var m=u<=3?"eraAbbr":4===u?"eraNames":"eraNarrow";a.era=x()?c("eras",o):c("eras."+m,s.dateObject);break;case"z":a.timeZone=c("dates.timeZoneNames",s.parserObject)}}}return function(t){return isNaN(t.getDate())?null:n.intDateFormatter(t,a)}},t.intDateFormatter=function(t,e){for(var i="",n=e.pattern.match(P.dateParseRegex),s=this.getCurrentDateValue(t,e.isIslamic),r=0,o=n;r<o.length;r++){var a=o[r],l=a.length,h=a[0];"K"===h&&(h="h");var c=void 0,d="",p=void 0,u=void 0,g="";switch(h){case"M":case"L":c=s.month,l>2?i+=e.month[""+c]:p=!0;break;case"E":case"c":i+=e.weekday[""+le[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(p=!0,"d"===h)c=s.date;else if("f"===h){p=!1,u=!0;var m=(d=(d=t[""+he[""+h]]().toString()).substring(0,l)).length;if(l!==m){if(l>3)continue;for(var f=0;f<l-m;f++)d="0"+d.toString()}g+=d}else c=t[""+he[""+h]]();"h"===h&&(c=c%12||12);break;case"y":u=!0,g+=s.year,2===l&&(g=g.substr(g.length-2));break;case"a":var v=t.getHours()<12?"am":"pm";i+=e.designator[""+v];break;case"G":var b=t.getFullYear()<0?0:1,C=e.era[""+b];y(C)&&(C=e.era[b?0:1]),i+=C||"";break;case"'":i+="''"===a?"'":a.replace(/'/g,"");break;case"z":var I=t.getTimezoneOffset(),M=l<4?"+H;-H":e.timeZone.hourFormat;M=M.replace(/:/g,e.numMapper.timeSeparator),0===I?i+=e.timeZone.gmtZeroFormat:(u=!0,g=this.getTimeZoneValue(I,M)),g=e.timeZone.gmtFormat.replace(/\{0\}/,g);break;case":":i+=e.numMapper.numberSymbols.timeSeparator;break;case"/":i+=e.dateSeperator;break;case"W":p=!0,c=P.getWeekOfYear(t,e.firstDayOfWeek);break;default:i+=a}p&&(u=!0,g=this.checkTwodigitNumber(c,l)),u&&(i+=N.convertValueParts(g,P.latnParseRegex,e.numMapper.mapper))}return i},t.getCurrentDateValue=function(t,e){return e?ne.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},t.checkTwodigitNumber=function(t,e){var i=t+"";return 2===e&&2!==i.length?"0"+i:i},t.getTimeZoneValue=function(t,e){var i=this,n=e.split(";")[t>0?1:0],s=Math.abs(t);return n.replace(/HH?|mm/g,function(t){var e=t.length,n=-1!==t.indexOf("H");return i.checkTwodigitNumber(Math.floor(n?s/60:s%60),e)})},t}();z=de;var pe={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},ue=["infinity","nan","group","decimal","exponential"],ge=function(){function t(){}return t.numberFormatter=function(t,e,i){var n,s=this,r=f({},e),o={},a={},l=P.getDependables(i,t,"",!0),h=l.numericObject;a.numberMapper=x()?f({},h):N.getNumberMapper(l.parserObject,N.getNumberingSystem(i),!0),a.currencySymbol=x()?c("currencySymbol",h):P.getCurrencySymbol(l.numericObject,r.currency||O,e.altSymbol,e.ignoreCurrency),a.percentSymbol=x()?c("numberSymbols.percentSign",h):a.numberMapper.numberSymbols.percentSign,a.minusSymbol=x()?c("numberSymbols.minusSign",h):a.numberMapper.numberSymbols.minusSign;var d=a.numberMapper.numberSymbols;if(e.format&&!P.formatRegex.test(e.format))o=P.customFormat(e.format,a,l.numericObject),!v(r.useGrouping)&&r.useGrouping&&(r.useGrouping=o.pData.useGrouping);else{if(f(r,P.getProperNumericSkeleton(e.format||"N")),r.isCurrency="currency"===r.type,r.isPercent="percent"===r.type,x()||(n=P.getSymbolPattern(r.type,a.numberMapper.numberSystem,l.numericObject,r.isAccount)),r.groupOne=this.checkValueRange(r.maximumSignificantDigits,r.minimumSignificantDigits,!0),this.checkValueRange(r.maximumFractionDigits,r.minimumFractionDigits,!1,!0),v(r.fractionDigits)||(r.minimumFractionDigits=r.maximumFractionDigits=r.fractionDigits),v(r.useGrouping)&&(r.useGrouping=!0),r.isCurrency&&!x()&&(n=n.replace(/\u00A4/g,P.defaultCurrency)),x())o.nData=f({},{},c(r.type+"nData",h)),o.pData=f({},{},c(r.type+"pData",h)),"currency"===r.type&&e.currency&&P.replaceBlazorCurrency([o.pData,o.nData],a.currencySymbol,e.currency);else{var p=n.split(";");o.nData=P.getFormatData(p[1]||"-"+p[0],!0,a.currencySymbol),o.pData=P.getFormatData(p[0],!1,a.currencySymbol),r.useGrouping&&(r.groupSeparator=d[ue[2]],r.groupData=this.getGroupingDetails(p[0]))}if(v(r.minimumFractionDigits)&&(r.minimumFractionDigits=o.nData.minimumFraction),v(r.maximumFractionDigits)){var u=o.nData.maximumFraction;r.maximumFractionDigits=v(u)&&r.isPercent?0:u}var g=r.minimumFractionDigits,m=r.maximumFractionDigits;v(g)||v(m)||g>m&&(r.maximumFractionDigits=g)}return f(o.nData,r),f(o.pData,r),function(t){return isNaN(t)?d[ue[1]]:isFinite(t)?s.intNumberFormatter(t,o,a,e):d[ue[0]]}},t.getGroupingDetails=function(t){var e={},i=t.match(P.negativeDataRegex);if(i&&i[4]){var n=i[4],s=n.lastIndexOf(",");if(-1!==s){var r=n.split(".")[0];e.primary=r.length-s-1;var o=n.lastIndexOf(",",s-1);-1!==o&&(e.secondary=s-1-o)}}return e},t.checkValueRange=function(t,e,i,n){var s=n?"f":"s",r=0,o=pe["l"+s],a=pe["m"+s];if(v(t)||(this.checkRange(t,o,n),r++),v(e)||(this.checkRange(e,a,n),r++),2===r){if(!(t<e))return!0;M(a+"specified must be less than the"+o)}else i&&1===r&&M("Both"+a+"and"+a+"must be present");return!1},t.checkRange=function(t,e,i){var n=i?[0,20]:[1,21];(t<n[0]||t>n[1])&&M(e+"value must be within the range"+n[0]+"to"+n[1])},t.intNumberFormatter=function(t,e,i,n){var s;if(!v(e.nData.type)){t<0?(t*=-1,s=e.nData):s=0===t&&e.zeroData||e.pData;var r="";if(s.isPercent&&(t*=100),s.groupOne)r=this.processSignificantDigits(t,s.minimumSignificantDigits,s.maximumSignificantDigits);else if(r=this.processFraction(t,s.minimumFractionDigits,s.maximumFractionDigits,n),s.minimumIntegerDigits&&(r=this.processMinimumIntegers(r,s.minimumIntegerDigits)),i.isCustomFormat&&s.minimumFractionDigits<s.maximumFractionDigits&&/\d+\.\d+/.test(r)){for(var o=r.split("."),a=o[1],l=a.length-1;l>=0&&("0"===a[parseInt(l.toString(),10)]&&l>=s.minimumFractionDigits);l--)a=a.slice(0,l);r=o[0]+"."+a}return"scientific"===s.type&&(r=(r=t.toExponential(s.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[ue[4]])),r=r.replace(".",i.numberMapper.numberSymbols[ue[3]]),r="#,###,,;(#,###,,)"===s.format?this.customPivotFormat(parseInt(r,10)):r,s.useGrouping&&(r=this.groupNumbers(r,s.groupData.primary,s.groupSeparator||",",i.numberMapper.numberSymbols[ue[3]]||".",s.groupData.secondary)),r=N.convertValueParts(r,P.latnParseRegex,i.numberMapper.mapper),"N/A"===s.nlead?s.nlead:"0"===r&&n&&"0"===n.format?r+s.nend:s.nlead+r+s.nend}},t.processSignificantDigits=function(t,e,i){var n=t+"";return n.length<e?t.toPrecision(e):+(n=t.toPrecision(i))+""},t.groupNumbers=function(t,e,i,n,s){for(var r=!y(s)&&0!==s,o=t.split(n),a=o[0],l=a.length,h="";l>e;)h=a.slice(l-e,l)+(h.length?i+h:""),l-=e,r&&(e=s,r=!1);return o[0]=a.slice(0,l)+(h.length?i:"")+h,o.join(n)},t.processFraction=function(t,e,i,n){var s=(t+"").split(".")[1],r=s?s.length:0;if(e&&r<e){var o="";if(0!==r){o+=t;for(var a=0;a<e-r;a++)o+="0";return o}return o=t.toFixed(e),t.toFixed(e)}if(!y(i)&&(r>i||0===i))return t.toFixed(i);var l=t+"";return"0"===l[0]&&n&&"###.00"===n.format&&(l=l.slice(1)),l},t.processMinimumIntegers=function(t,e){var i=t.split("."),n=i[0],s=n.length;if(s<e){for(var r=0;r<e-s;r++)n="0"+n;i[0]=n}return i.join(".")},t.customPivotFormat=function(t){if(t>=5e5){var e=(t/=1e6).toString().split("."),i=(e[0],e[1]);return i&&+i.substring(0,1)>=5?Math.ceil(t).toString():Math.floor(t).toString()}return""},t}();!function(t){k=t}(ge);var me="stand-alone",fe=/^[0-9]*$/,ye={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},ve=function(){function t(){}return t.dateParser=function(t,e,i){var n=this,s=P.getDependables(i,t,e.calendar),r=N.getCurrentNumericOptions(s.parserObject,N.getNumberingSystem(i),!1,x()),o={};x()&&e.isServerRendered&&(e=P.compareBlazorDateFormats(e,t));var a,l=e.format||P.getResultantPattern(e.skeleton,s.dateObject,e.type,!1,x()?t:""),h="";if(v(l))M("Format options or type given must be invalid");else{l=P.ConvertDateToWeekFormat(l),o={isIslamic:P.islamicRegex.test(e.calendar),pattern:l,evalposition:{},culture:t};for(var d=l.match(P.dateParseRegex)||[],p=d.length,u=0,g=0,m=!1,f=r.numericRegex,b=x()?s.parserObject.numbers:N.getNumberMapper(s.parserObject,N.getNumberingSystem(i)),C=0;C<p;C++){var I=d[parseInt(C.toString(),10)],S=I.length,w="K"===I[0]?"h":I[0],D=void 0,E=void 0,T=ce[""+w],A=2===S?"":"?";switch(m&&(u=g,m=!1),w){case"E":case"c":var L=void 0;L=x()?c("days."+P.monthIndex[""+S],s.dateObject):s.dateObject[""+P.days][""+me][P.monthIndex[""+S]];var O=N.reverseObject(L);h+="("+Object.keys(O).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(E=!0,("M"===w||"L"===w)&&S>2){var k=void 0;k=x()?c("months."+P.monthIndex[""+S],s.dateObject):s.dateObject.months[""+me][P.monthIndex[""+S]],o[""+T]=N.reverseObject(k),h+="("+Object.keys(o[""+T]).join("|")+")"}else if("f"===w){if(S>3)continue;D=!0,h+="("+f+f+"?"+f+"?)"}else D=!0,h+="("+f+f+A+")";"h"===w&&(o.hour12=!0);break;case"W":h+="("+f+(1===S?"?":"")+f+")";break;case"y":E=D=!0,h+=2===S?"("+f+f+")":"("+f+"{"+S+",})";break;case"a":E=!0;var z=x()?c("dayPeriods",s.dateObject):c("dayPeriods.format.wide",s.dateObject);o[""+T]=N.reverseObject(z),h+="("+Object.keys(o[""+T]).join("|")+")";break;case"G":E=!0;var j=S<=3?"eraAbbr":4===S?"eraNames":"eraNarrow";o[""+T]=N.reverseObject(x()?c("eras",s.dateObject):c("eras."+j,s.dateObject)),h+="("+Object.keys(o[""+T]).join("|")+"?)";break;case"z":E=0!==(new Date).getTimezoneOffset(),o[""+T]=c("dates.timeZoneNames",s.parserObject);var B=o[""+T],H=(a=S<4)?"+H;-H":B.hourFormat;H=H.replace(/:/g,b.timeSeparator),h+="("+this.parseTimeZoneRegx(H,B,f)+")?",m=!0,g=a?6:12;break;case"'":h+="("+I.replace(/'/g,"")+")?";break;default:h+="([\\D])"}if(E&&(o.evalposition[""+T]={isNumber:D,pos:C+1+u,hourOnly:a}),C===p-1&&!y(h)){var R=RegExp;o.parserRegex=new R("^"+h+"$","i")}}}return function(t){var e=n.internalDateParse(t,o,r);if(y(e)||!Object.keys(e).length)return null;if(o.isIslamic){var i={},s=e.year,a=e.day,l=e.month,h=s?s+"":"",c=2===h.length;s&&l&&a&&!c||(i=ne.getHijriDate(new Date)),c&&(s=parseInt((i.year+"").slice(0,2)+h,10));var d=ne.toGregorian(s||i.year,l||i.month,a||i.date);e.year=d.getFullYear(),e.month=d.getMonth()+1,e.day=d.getDate()}return n.getDateObject(e)}},t.getDateObject=function(t,e){var i=e||new Date;i.setMilliseconds(0);var n=t.year,s=t.designator,r=t.timeZone;if(!v(n)){if((n+"").length<=2)n+=100*Math.floor(i.getFullYear()/100);i.setFullYear(n)}for(var o=0,a=["hour","minute","second","milliseconds","month","day"];o<a.length;o++){var l=a[o],h=t[""+l];if(v(h)&&"day"===l&&i.setDate(1),!v(h))if("month"===l){if((h-=1)<0||h>11)return new Date("invalid");var c=i.getDate();i.setDate(1),i[ye[""+l]](h);var d=new Date(i.getFullYear(),h+1,0).getDate();i.setDate(c<d?c:d)}else{if("day"===l){var p=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(h<1||h>p)return null}i[""+ye[""+l]](h)}}if(!v(s)){var u=i.getHours();"pm"===s?i.setHours(u+(12===u?0:12)):12===u&&i.setHours(0)}if(!v(r)){var g=r-i.getTimezoneOffset();0!==g&&i.setMinutes(i.getMinutes()+g)}return i},t.internalDateParse=function(t,e,i){var n=t.match(e.parserRegex),s={hour:0,minute:0,second:0};if(y(n))return null;for(var r=0,o=Object.keys(e.evalposition);r<o.length;r++){var a=o[r],l=e.evalposition[""+a],h=n[l.pos];if(l.isNumber)s[""+a]=this.internalNumberParser(h,i);else if("timeZone"!==a||v(h)){h="month"!==a||e.isIslamic||"en"!==e.culture&&"en-GB"!==e.culture&&"en-US"!==e.culture?h:h[0].toUpperCase()+h.substring(1).toLowerCase(),h="month"!==a&&"designator"===a&&e.culture&&-1!==e.culture.indexOf("en-")&&-1===["en-US","en-MH","en-MP"].indexOf(e.culture)?h.toLowerCase():h,s[""+a]=e[""+a][""+h]}else{var c=l.pos,d=void 0,p=n[c+1],u=!v(p);l.hourOnly?d=60*this.getZoneValue(u,p,n[c+4],i):(d=60*this.getZoneValue(u,p,n[c+7],i),d+=this.getZoneValue(u,n[c+4],n[c+10],i)),y(d)||(s[""+a]=d)}}return e.hour12&&(s.hour12=!0),s},t.internalNumberParser=function(t,e){return t=N.convertValueParts(t,e.numberParseRegex,e.numericPair),fe.test(t)?+t:null},t.parseTimeZoneRegx=function(t,e,i){var n,s=e.gmtFormat,r="("+i+")("+i+")";n=t.replace("+","\\+");var o=(n=-1!==t.indexOf("HH")?n.replace(/HH|mm/g,"("+r+")"):n.replace(/H|m/g,"("+r+"?)")).split(";").map(function(t){return s.replace("{0}",t)});return n=o.join("|")+"|"+e.gmtZeroFormat},t.getZoneValue=function(t,e,i,n){var s=t?e:i;if(!s)return 0;var r=this.internalNumberParser(s,n);return t?-r:r},t}(),be=new RegExp("^([^0-9]*)(([0-9,]*[0-9]+)(.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$"),Ce=/,/g,Ie=["minusSign","infinity"],Me=function(){function t(){}return t.numberParser=function(t,e,i){var n=this,s=P.getDependables(i,t,"",!0),r={custom:!0};P.formatRegex.test(e.format)||!e.format?(f(r,P.getProperNumericSkeleton(e.format||"N")),r.custom=!1,r.fractionDigits||e.maximumFractionDigits&&(r.maximumFractionDigits=e.maximumFractionDigits)):f(r,P.customFormat(e.format,null,null));var o,a=c("numbers",s.parserObject),l=N.getCurrentNumericOptions(s.parserObject,N.getNumberingSystem(i),!0,x());if(r.symbolRegex=N.getSymbolRegex(Object.keys(l.symbolMatch)),r.infinity=l.symbolNumberSystem[Ie[1]],x())r.nData=f({},{},c(r.type+"nData",a)),r.pData=f({},{},c(r.type+"pData",a)),"currency"===r.type&&e.currency&&P.replaceBlazorCurrency([r.pData,r.nData],c("currencySymbol",a),e.currency);else if(o=P.getSymbolPattern(r.type,l.numberSystem,s.numericObject,r.isAccount)){var h=(o=o.replace(/\u00A4/g,P.defaultCurrency)).split(";");r.nData=P.getFormatData(h[1]||"-"+h[0],!0,""),r.pData=P.getFormatData(h[0],!0,"")}return function(t){return n.getParsedNumber(t,r,l)}},t.getParsedNumber=function(t,e,i){var n,s,r,o,a,l;if(-1!==t.indexOf(e.infinity))return 1/0;t=N.convertValueParts(t,e.symbolRegex,i.symbolMatch),0===(t=-1!==(t=N.convertValueParts(t,i.numberParseRegex,i.numericPair)).indexOf("-")?t.replace("-.","-0."):t).indexOf(".")&&(t="0"+t);var h=t.match(be);if(y(h))return NaN;o=h[1],r=h[2];var c=h[5];return a=h[6],s=(n=e.custom?o===e.nData.nlead&&a===e.nData.nend:-1!==o.indexOf(e.nData.nlead)&&-1!==a.indexOf(e.nData.nend))?e.nData.isPercent:e.pData.isPercent,r=r.replace(Ce,""),c&&(r+=c),l=+r,("percent"===e.type||s)&&(l/=100),(e.custom||e.fractionDigits)&&(l=parseFloat(l.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.fractionDigits))),e.maximumFractionDigits&&(l=this.convertMaxFracDigits(r,e,l,n)),n&&(l*=-1),l},t.convertMaxFracDigits=function(t,e,i,n){var s=t.split(".");return s[1]&&s[1].length>e.maximumFractionDigits&&(i=+i.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.maximumFractionDigits)),i},t}(),Se=new vt,xe=!1,we={},De="en-US",Ee=["numericObject","dateObject"],Te=function(){function t(t){t&&(this.culture=t)}return t.prototype.getDateFormat=function(t){return de.dateFormat(this.getCulture(),t||{type:"date",skeleton:"short"},we)},t.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=O),x()&&t&&!t.format&&(t.minimumFractionDigits=0),ge.numberFormatter(this.getCulture(),t||{},we)},t.prototype.getDateParser=function(t){return ve.dateParser(this.getCulture(),t||{skeleton:"short",type:"date"},we)},t.prototype.getNumberParser=function(t){return x()&&t&&!t.format&&(t.minimumFractionDigits=0),Me.numberParser(this.getCulture(),t||{format:"N"},we)},t.prototype.formatNumber=function(t,e){return this.getNumberFormat(e)(t)},t.prototype.formatDate=function(t,e){return this.getDateFormat(e)(t)},t.prototype.parseDate=function(t,e){return this.getDateParser(e)(t)},t.prototype.parseNumber=function(t,e){return this.getNumberParser(e)(t)},t.prototype.getDatePattern=function(t,e){return P.getActualDateTimeFormat(this.getCulture(),t,we,e)},t.prototype.getNumberPattern=function(t,e){return P.getActualNumberFormat(this.getCulture(),t,we,e)},t.prototype.getFirstDayOfWeek=function(){return P.getWeekData(this.getCulture(),we)},t.prototype.getCulture=function(){return this.culture||De},t}();function Ae(t,e){var i=P.getDependables(we,t,"",!0)[Ee[0]],n=P.getDependables(we,t,"")[Ee[1]],s=c("defaultNumberingSystem",i),r=x()?c("numberSymbols",i):c("symbols-numberSystem-"+s,i),o=P.getSymbolPattern(e||"decimal",s,i,!1);return f(r,P.getFormatData(o,!0,"",!0),{dateSeparator:P.getDateSeparator(n)})}var Ne,Le=["grid","pivotview","treegrid","spreadsheet","rangeNavigator","DocumentEditor","listbox","inplaceeditor","PdfViewer","richtexteditor","DashboardLayout","chart","stockChart","circulargauge","diagram","heatmap","lineargauge","maps","slider","smithchart","barcode","sparkline","treemap","bulletChart","kanban","daterangepicker","schedule","gantt","signature","query-builder","drop-down-tree","carousel","filemanager","uploader","accordion","tab","treeview"],Oe=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],ke=function(){function t(t){var e;this.isValidated=!1,this.isLicensed=!0,this.version="30",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats|essentialstudio/i,this.errors={noLicense:"<span>This application was built using a trial version of Syncfusion<sup>\xae</sup> Essential Studio<sup>\xae</sup>. To remove the license validation message permanently, a valid license key must be included.</span>",trailExpired:"<span>This application was built using a trial version of Syncfusion<sup>\xae</sup> Essential Studio<sup>\xae</sup>. To remove the license validation message permanently, a valid license key must be included.</span>",versionMismatched:"<span>The included Syncfusion<sup>\xae</sup> license key is invalid.</span>",platformMismatched:"<span>The included Syncfusion<sup>\xae</sup> license key is invalid.</span>",invalidKey:"<span>The included Syncfusion<sup>\xae</sup> license key is invalid.</span>"},this.minVersion=null,this.manager=(e=null,{setKey:function(t){e=t},getKey:function(){return e}}),this.npxManager={getKey:function(){return"npxKeyReplace"}},this.manager.setKey(t)}return t.prototype.validate=function(){if(!this.isValidated&&u&&!c(ze(Oe),u)&&!c("Blazor",u)){var t=void 0,e=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var i=this.getInfoFromKey();if(i&&i.length)for(var n=0,s=i;n<s.length;n++){var r=s[n];if(!this.platform.test(r.platform)||r.invalidPlatform)t=this.errors.platformMismatched;else if((r.minVersion>=r.lastValue&&r.minVersion!==r.lastValue||r.lastValue<parseInt(this.version,10)||null==r.lastValue||isNaN(r.lastValue))&&(t=(t=(t=this.errors.versionMismatched).replace("##LicenseVersion",r.version)).replace("##Requireversion",this.version+".x")),r.expiryDate){var o=new Date(r.expiryDate),a=new Date;if(!(o!==a&&o<a))break;t=this.errors.trailExpired}}else t=this.errors.invalidKey}else{var l=c(ze([115,121,110,99,102,117,115,105,111,110,46,108,105,99,101,110,115,101,67,111,110,116,101,110,116]),u);e=c(ze([115,121,110,99,102,117,115,105,111,110,46,99,108,97,105,109,65,99,99,111,117,110,116,85,82,76]),u),t=l&&""!==l?l:this.errors.noLicense}if(t&&"undefined"!=typeof document&&!y(document)){var h=$("div",{innerHTML:"<img src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzE5OV80KSI+CjxwYXRoIGQ9Ik0xMiAyMUMxNi45NzA2IDIxIDIxIDE2Ljk3MDYgMjEgMTJDMjEgNy4wMjk0NCAxNi45NzA2IDMgMTIgM0M3LjAyOTQ0IDMgMyA3LjAyOTQ0IDMgMTJDMyAxNi45NzA2IDcuMDI5NDQgMjEgMTIgMjFaIiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBmaWxsPSIjNjE2MDYzIi8+CjxwYXRoIGQ9Ik0xMS4yNSAxMS4yNUgxMlYxNi41SDEyLjc1IiBzdHJva2U9IiM3MzczNzMiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMS44MTI1IDlDMTIuNDMzOCA5IDEyLjkzNzUgOC40OTYzMiAxMi45Mzc1IDcuODc1QzEyLjkzNzUgNy4yNTM2OCAxMi40MzM4IDYuNzUgMTEuODEyNSA2Ljc1QzExLjE5MTIgNi43NSAxMC42ODc1IDcuMjUzNjggMTAuNjg3NSA3Ljg3NUMxMC42ODc1IDguNDk2MzIgMTEuMTkxMiA5IDExLjgxMjUgOVoiIGZpbGw9IiM3MzczNzMiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xOTlfNCI+CjxyZWN0IHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K' style=\"top: 6px;\n                    position: absolute;\n                    left: 16px;\n                    width: 24px;\n                    height: 24px;\"/>"+t+' <a style="text-decoration: none;color: #0D6EFD;font-weight: 500;" href='+(Ne=e&&""!==e?e:"https://www.syncfusion.com/account/claim-license-key?pl=SmF2YVNjcmlwdA==&vs=MzA=&utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information")+">Claim your free account</a>"});h.setAttribute("style","position: fixed;\n                top: 10px;\n                left: 10px;\n                right: 10px;\n                font-size: 14px;\n                background: #EEF2FF;\n                color: #222222;\n                z-index: 999999999;\n                text-align: left;\n                border: 1px solid #EEEEEE;\n                padding: 10px 11px 10px 50px;\n                border-radius: 8px;\n                font-family: Helvetica Neue, Helvetica, Arial;"),document.body.appendChild(h),this.isLicensed=!1}this.isValidated=!0,d(ze(Oe),this.isValidated,u)}return this.isLicensed},t.prototype.getDecryptedData=function(t){try{return atob(t)}catch(t){return""}},t.prototype.getInfoFromKey=function(){try{var t="",e=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],s=!1,r=!1;this.manager.getKey()?t=this.manager.getKey():(r=!0,t=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var o=t.split(";"),a=0,l=o;a<l.length;a++){var h=l[a],c=this.getDecryptedData(h);if(c){var d=0,p="";if(r){var u=c[c.length-1],g=[];for(m=0;m<c.length;m++)g[parseInt(m.toString(),10)]=c[parseInt(m.toString(),10)].charCodeAt(0)-u.charCodeAt(0);for(m=0;m<g.length;m++)p+=String.fromCharCode(g[parseInt(m.toString(),10)])}else for(var m=0;m<c.length;m++,d++){d===e.length&&(d=0);var f=c.charCodeAt(m);p+=String.fromCharCode(f^e[parseInt(d.toString(),10)]>>16)}if(this.platform.test(p)){if(i=p.split(";"),s=!1,i.length>3){var y=parseInt(i[1].split(".")[0],10),v=parseInt(i[4],10);n.push({platform:i[0],version:i[1],expiryDate:i[2],lastValue:v,minVersion:y})}}else p&&p.split(";").length>3&&(s=!0)}}return s&&!n.length?[{invalidPlatform:s}]:n.length?n:null}catch(t){return null}},t}();new ke;function ze(t){for(var e="",i=0,n=t;i<n.length;i++){var s=n[i];e+=String.fromCharCode(s)}return e}var Pe,je=function(t){return t&&function(t){new ke(t)}(t),!0},Be=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),He=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Re=0,Ve=0,Ue=0,Fe=!0,We=!1,Ye=!1;var _e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.randomId=function(){if("undefined"!=typeof window){var t=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(t)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,n.isAngular=!1,n.isReact=!1,n.isVue=!1,y(n.enableRtl)&&n.setProperties({enableRtl:xe},!0),y(n.locale)&&n.setProperties({locale:De},!0),n.moduleLoader=new se(n),n.localObserver=new vt(n),Se.on("notifyExternalChange",n.detectFunction,n,n.randomId),"undefined"==typeof window||"undefined"==typeof document||je()||-1!==Le.indexOf(n.getModuleName())&&(Ue+=1)>5&&(Fe=!1),v(i)||n.appendTo(),n}return Be(e,t),e.prototype.requiredModules=function(){return[]},e.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&(this.setPersistData(),this.detachUnloadEvent()),this.localObserver.destroy(),this.refreshing||(et([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),t.prototype.destroy.call(this),this.moduleLoader.clean(),Se.off("notifyExternalChange",this.detectFunction,this.randomId)))},e.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.enablePersistence&&this.attachUnloadEvent(),this.localObserver=new vt(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},e.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},e.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},e.prototype.getLocalData=function(){var t=this.getModuleName()+this.element.id;return Ye?window.localStorage.getItem(t+this.ej2StatePersistenceVersion):window.localStorage.getItem(t)},e.prototype.attachUnloadEvent=function(){this.handleUnload=this.handleUnload.bind(this),window.addEventListener("pagehide",this.handleUnload)},e.prototype.handleUnload=function(){this.setPersistData()},e.prototype.detachUnloadEvent=function(){window.removeEventListener("pagehide",this.handleUnload)},e.prototype.appendTo=function(e){if(y(e)||"string"!=typeof e?y(e)||(this.element=e):this.element=ct(e,document),!y(this.element)){var i="e-"+this.getModuleName().toLowerCase();tt([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),this.attachUnloadEvent());var n=c("ej2_instances",this.element);n&&-1!==n.indexOf(this)||t.prototype.addInstance.call(this),this.preRender(),this.injectModules();var s={schedule:"all",diagram:"all",PdfViewer:"all",grid:["logger"],richtexteditor:["link","table","image","audio","video","formatPainter","emojiPicker","pasteCleanup","htmlEditor","toolbar","importExport","codeBlock"],treegrid:["filter"],gantt:["tooltip"],chart:["Export","Zoom"],accumulationchart:["Export"],"query-builder":"all"},r=this.getModuleName();if(this.requiredModules&&(!s[""+r]||"all"!==s[""+r]))for(var o=this.requiredModules(),a=0,l=this.moduleLoader.getNonInjectedModules(o);a<l.length;a++){var h=l[a],d=h.name?h.name:h.member;if(!s[""+r]||-1===s[""+r].indexOf(h.member)){var p=r.charAt(0).toUpperCase()+r.slice(1);console.warn('[WARNING] :: Module "'+d+'" is not available in '+p+" component! You either misspelled the module name or forgot to load it.")}}Fe||We||(!function(){var t='\n    <div style="\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 99999;\n    ">\n        <div style="\n    background: #FFFFFF;\n    height: 455px;\n    width: 840px;\n    font-family: Helvetica Neue, Helvetica, Arial;\n    color: #000000;\n    box-shadow: 0px 4.8px 14.4px rgb(0 0 0 / 18%), 0px 25.6px 57.6px rgb(0 0 0 / 22%);\n    display: block;\n    margin: 8% auto;\n    border-radius: 20px;\n    ">\n            <div style="\n    position: absolute;\nwidth: 838px;\nheight: 62px;\nbackground-color: #F9F9F9;\nborder: 1px solid #EEEEEE;\nborder-top-left-radius: 20px;\nborder-top-right-radius: 20px;\n">\n                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ2IiBoZWlnaHQ9IjMyIiB2aWV3Qm94PSIwIDAgMTQ2IDMyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNNDAuNTk2NSAxNS4wMDc4SDMyLjQyNUMzMS41NTU3IDE1LjAwNzggMzAuOTAzNyAxNS4xODEyIDMwLjUxMjUgMTUuNDg0NkMzMC4xMjEzIDE1LjgzMTQgMjkuOTA0IDE2LjMwODIgMjkuOTA0IDE3LjA0NTFDMjkuOTA0IDE3LjYwODYgMzAuMDc3OCAxOC4wNDIxIDMwLjQyNTYgMTguMzAyMkMzMC43NzMzIDE4LjYwNTYgMzEuMjk0OSAxOC43MzU2IDMxLjk5MDMgMTguNzM1NkgzNi4zMzY5QzM4LjExODkgMTguNzM1NiAzOS40MjI5IDE5LjA4MjQgNDAuMTYxOCAxOS43MzI2QzQwLjk0NDIgMjAuNDI2MiA0MS4yOTE5IDIxLjU1MzIgNDEuMjkxOSAyMy4xMTM3QzQxLjI5MTkgMjQuNzE3NiA0MC44NTcyIDI1Ljg4OCAzOS45ODc5IDI2LjY2ODJDMzkuMTE4NiAyNy40MDUxIDM3LjcyNzcgMjcuNzk1MyAzNS44NTg3IDI3Ljc5NTNIMjcuMDc4N1YyNS4wMjFIMzUuMzM3MkMzNi4yOTM0IDI1LjAyMSAzNi45NDU0IDI0Ljg5MSAzNy4zMzY2IDI0LjYzMDlDMzcuNzI3NyAyNC4zNzA4IDM3LjkwMTYgMjMuODk0IDM3LjkwMTYgMjMuMjg3MUMzNy45MDE2IDIyLjYzNjkgMzcuNzI3NyAyMi4xNjAxIDM3LjM4IDIxLjlDMzcuMDMyMyAyMS42Mzk5IDM2LjQyMzggMjEuNDY2NSAzNS41NTQ1IDIxLjQ2NjVIMzEuNjQyNkMyOS44NjA1IDIxLjQ2NjUgMjguNTEzMSAyMS4xMTk4IDI3LjY4NzMgMjAuMzgyOEMyNi44NjE0IDE5LjY0NTkgMjYuNDI2OCAxOC41MTg5IDI2LjQyNjggMTcuMDAxN0MyNi40MjY4IDE1LjM1NDUgMjYuODYxNCAxNC4xNDA4IDI3LjczMDcgMTMuMzYwNkMyOC42IDEyLjU4MDMgMjkuOTkwOSAxMi4yMzM1IDMxLjkwMzQgMTIuMjMzNUg0MC41OTY1VjE1LjAwNzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik00OC4wNzI3IDI1LjI4MTFINTAuNTA2OFYxNi4zOTQ5SDUzLjU0OTNWMjcuNTM1MkM1My41NDkzIDI5LjA1MjQgNTMuMjAxNiAzMC4xNzk0IDUyLjUwNjIgMzAuOTE2M0M1MS44MTA3IDMxLjY1MzIgNTAuNzI0MSAzMiA0OS4yNDYzIDMySDQzLjMzNVYyOS42NTkySDQ4LjcyNDdDNDkuMjg5NyAyOS42NTkyIDQ5Ljc2NzkgMjkuNTI5MiA1MC4wNzIxIDI5LjIyNThDNTAuMzc2NCAyOC45NjU3IDUwLjU1MDIgMjguNTMyMiA1MC41NTAyIDI4LjAxMlYyNy44Mzg2SDQ3Ljg5ODlDNDYuMjAzNyAyNy44Mzg2IDQ0Ljk0MzIgMjcuNDkxOSA0NC4yNDc4IDI2Ljg0MTZDNDMuNTA4OSAyNi4xNDgxIDQzLjE2MTEgMjUuMDY0NCA0My4xNjExIDIzLjQ2MDVWMTYuMzk0OUg0Ni4xNjAyVjIzLjIwMDVDNDYuMTYwMiAyNC4wNjc0IDQ2LjI5MDYgMjQuNjMwOSA0Ni41NTE0IDI0Ljg5MUM0Ni43MjUzIDI1LjE1MTEgNDcuMjQ2OSAyNS4yODExIDQ4LjA3MjcgMjUuMjgxMVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTU1Ljg5NjUgMTYuMzk0OUg2MS41OTA0QzYzLjMyOTEgMTYuMzk0OSA2NC41NDYxIDE2LjY5ODMgNjUuMjg1IDE3LjM0ODVDNjYuMDIzOSAxNy45OTg4IDY2LjM3MTYgMTkuMDgyNCA2Ni4zNzE2IDIwLjU1NjNWMjcuNzk1M0g2My4zMjkxVjIwLjk0NjRDNjMuMzI5MSAyMC4wNzk0IDYzLjE5ODcgMTkuNTE1OSA2Mi45Mzc5IDE5LjI5OTJDNjIuNjc3MSAxOS4wMzkxIDYyLjE1NTUgMTguOTA5MSA2MS4zMjk3IDE4LjkwOTFINTguODk1NlYyNy44Mzg2SDU1Ljg1M1YxNi4zOTQ5SDU1Ljg5NjVaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03NC45MzQyIDI1LjM2NzhINzguMTUwNlYyNy43OTUySDc0LjAyMTRDNzIuOTc4MiAyNy43OTUyIDcyLjEwODkgMjcuNjY1MiA3MS40NTcgMjcuNDkxOEM3MC44MDUgMjcuMjc1IDcwLjE5NjUgMjYuOTI4MyA2OS43MTgzIDI2LjQ1MTRDNjkuMTk2OCAyNS45MzEzIDY4Ljc2MjEgMjUuMjgxMSA2OC40NTc4IDI0LjU0NDJDNjguMTUzNiAyMy44MDcyIDY4LjAyMzIgMjIuOTgzNiA2OC4wMjMyIDIyLjE2QzY4LjAyMzIgMjEuMjkzMSA2OC4xNTM2IDIwLjQ2OTUgNjguNDU3OCAxOS42ODkyQzY4Ljc2MjEgMTguOTA5IDY5LjE1MzMgMTguMzAyMSA2OS43MTgzIDE3Ljc4MTlDNzAuMjM5OSAxNy4zMDUxIDcwLjgwNSAxNi45NTgzIDcxLjUwMDQgMTYuNzQxNkM3Mi4xOTU5IDE2LjUyNDkgNzMuMDIxNyAxNi40MzgyIDc0LjA2NDkgMTYuNDM4Mkg3OC4xOTQxVjE4LjkwOUg3NC45MzQyQzczLjQ5OTggMTguOTA5IDcyLjU0MzYgMTkuMTY5MSA3MS45Nzg1IDE5LjY0NTlDNzEuNDU2OSAyMC4xMjI3IDcxLjE1MjcgMjAuOTg5NyA3MS4xNTI3IDIyLjIwMzRDNzEuMTUyNyAyMi44OTY5IDcxLjI4MzEgMjMuNDYwNSA3MS41MDA0IDIzLjkzNzNDNzEuNzE3NyAyNC40MTQxIDcyLjA2NTUgMjQuNzYwOSA3Mi41MDAxIDI1LjA2NDNDNzIuNzE3NCAyNS4xOTQ0IDcyLjk3ODIgMjUuMjgxMSA3My4yODI1IDI1LjM2NzhDNzMuNjMwMiAyNS4zMjQ0IDc0LjE1MTggMjUuMzY3OCA3NC45MzQyIDI1LjM2NzhaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik04MC44NDU2IDE4LjY0ODlINzguNjcyNFYxNi4zNTE1SDgwLjg0NTZWMTUuMTgxMUM4MC44NDU2IDE0LjAxMDggODEuMDYzIDEzLjIzMDUgODEuNDk3NiAxMi44NDA0QzgxLjkzMjMgMTIuNDUwMyA4Mi43NTgxIDEyLjIzMzUgODMuOTc1MSAxMi4yMzM1SDg2Ljg0MzhWMTQuNDAwOUg4NS40MDk1Qzg0Ljg4NzkgMTQuNDAwOSA4NC41NDAyIDE0LjQ4NzYgODQuMzIyOSAxNC42NjFDODQuMTA1NSAxNC44MzQ0IDgzLjk3NTEgMTUuMDk0NSA4My45NzUxIDE1LjQ0MTJWMTYuMzUxNUg4Ni44NDM4VjE4LjY0ODlIODMuOTc1MVYyNy43OTUzSDgwLjg0NTZWMTguNjQ4OVoiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTk4LjQwNTYgMjcuNzk1M0g5Mi43MTE2QzkxLjAxNjUgMjcuNzk1MyA4OS44NDI5IDI3LjQ0ODUgODkuMDYwNSAyNi43OTgzQzg4LjMyMTYgMjYuMTQ4MSA4Ny45MzA0IDI1LjA2NDQgODcuOTMwNCAyMy41OTA2VjE2LjM5NDlIOTAuOTI5NVYyMy40MTcyQzkwLjkyOTUgMjQuMTk3NCA5MS4wNTk5IDI0LjY3NDMgOTEuMzIwNyAyNC45MzQ0QzkxLjU4MTUgMjUuMTk0NCA5Mi4xMDMxIDI1LjMyNDUgOTIuOTI4OSAyNS4zMjQ1SDk1LjM2M1YxNi4zOTQ5SDk4LjQwNTZWMjcuNzk1M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTEwMC42MjIgMjUuNDExMkgxMDcuMDExQzEwNy41NzcgMjUuNDExMiAxMDguMDExIDI1LjMyNDUgMTA4LjI3MiAyNS4xNTExQzEwOC41MzMgMjQuOTc3NyAxMDguNjYzIDI0LjY3NDMgMTA4LjY2MyAyNC4zMjc1QzEwOC42NjMgMjMuOTM3NCAxMDguNTMzIDIzLjY3NzMgMTA4LjI3MiAyMy40NjA1QzEwOC4wMTEgMjMuMjg3MSAxMDcuNTc3IDIzLjIwMDUgMTA3LjA1NSAyMy4yMDA1SDEwNC40NDdDMTAyLjg4MiAyMy4yMDA1IDEwMS44MzkgMjIuOTgzNyAxMDEuMzE4IDIyLjUwNjlDMTAwLjc1MiAyMi4wMzAxIDEwMC40OTIgMjEuMjA2NSAxMDAuNDkyIDE5Ljk5MjdDMTAwLjQ5MiAxOC43NzkgMTAwLjgzOSAxNy44Njg3IDEwMS40OTEgMTcuMjYxOEMxMDIuMTQzIDE2LjY5ODMgMTAzLjE4NyAxNi4zOTQ5IDEwNC41MzQgMTYuMzk0OUgxMTEuMDU0VjE4Ljc3OUgxMDUuNzA4QzEwNC44MzggMTguNzc5IDEwNC4yNzMgMTguODY1NyAxMDQuMDEyIDE4Ljk5NTdDMTAzLjc1MiAxOS4xNjkxIDEwMy42MjEgMTkuNDI5MiAxMDMuNjIxIDE5LjgxOTRDMTAzLjYyMSAyMC4xNjYxIDEwMy43NTIgMjAuNDI2MiAxMDMuOTY5IDIwLjU5OTZDMTA0LjE4NiAyMC43NzMgMTA0LjU3NyAyMC44NTk3IDEwNS4wNTYgMjAuODU5N0gxMDcuNzk0QzEwOS4wNTQgMjAuODU5NyAxMTAuMDExIDIxLjE2MzEgMTEwLjY2MyAyMS43MjY2QzExMS4zMTUgMjIuMjkwMiAxMTEuNjYyIDIzLjE1NzEgMTExLjY2MiAyNC4yNDA4QzExMS42NjIgMjUuMjgxMSAxMTEuMzU4IDI2LjE0ODEgMTEwLjc5MyAyNi43OTgzQzExMC4yMjggMjcuNDQ4NSAxMDkuNDQ2IDI3Ljc5NTMgMTA4LjUzMyAyNy43OTUzSDEwMC43MDlWMjUuNDExMkgxMDAuNjIyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTE2LjU3NCAxNS4wOTQ0SDExMy40MDFWMTIuMjc2OUgxMTYuNTc0VjE1LjA5NDRaTTExNi41NzQgMjcuNzk1M0gxMTMuNDAxVjE2LjM5NDlIMTE2LjU3NFYyNy43OTUzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMwLjMwOSAyMi4xMTY3QzEzMC4zMDkgMjMuODkzOSAxMjkuNzQ0IDI1LjMyNDQgMTI4LjY1NyAyNi40MDgxQzEyNy41NzEgMjcuNDkxOCAxMjYuMDkzIDI4LjAxMiAxMjQuMjI0IDI4LjAxMkMxMjIuMzU1IDI4LjAxMiAxMjAuODc3IDI3LjQ5MTggMTE5Ljc5IDI2LjQwODFDMTE4LjcwNCAyNS4zMjQ0IDExOC4xMzkgMjMuODkzOSAxMTguMTM5IDIyLjExNjdDMTE4LjEzOSAyMC4zMzk0IDExOC43MDQgMTguOTA5IDExOS43OSAxNy44MjUzQzEyMC44NzcgMTYuNzQxNiAxMjIuMzk4IDE2LjIyMTQgMTI0LjIyNCAxNi4yMjE0QzEyNi4wNDkgMTYuMjIxNCAxMjcuNTI3IDE2Ljc0MTYgMTI4LjY1NyAxNy44MjUzQzEyOS43NDQgMTguODY1NiAxMzAuMzA5IDIwLjI5NjEgMTMwLjMwOSAyMi4xMTY3Wk0xMjEuMjY4IDIyLjExNjdDMTIxLjI2OCAyMy4yMDA0IDEyMS41MjkgMjQuMDY3MyAxMjIuMDUxIDI0LjY3NDJDMTIyLjU3MiAyNS4yODExIDEyMy4yNjggMjUuNTg0NSAxMjQuMTggMjUuNTg0NUMxMjUuMDkzIDI1LjU4NDUgMTI1Ljc4OSAyNS4yODExIDEyNi4zMSAyNC42NzQyQzEyNi44MzIgMjQuMDY3MyAxMjcuMDkzIDIzLjIwMDQgMTI3LjA5MyAyMi4xMTY3QzEyNy4wOTMgMjEuMDMzIDEyNi44MzIgMjAuMTY2MSAxMjYuMzEgMTkuNjAyNUMxMjUuNzg5IDE4Ljk5NTcgMTI1LjA5MyAxOC42OTIyIDEyNC4xMzcgMTguNjkyMkMxMjMuMjI0IDE4LjY5MjIgMTIyLjUyOSAxOC45OTU3IDEyMi4wMDcgMTkuNjAyNUMxMjEuNTI5IDIwLjE2NjEgMTIxLjI2OCAyMS4wMzMgMTIxLjI2OCAyMi4xMTY3WiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMTMxLjc4NyAxNi4zOTQ5SDEzNy40ODFDMTM5LjIxOSAxNi4zOTQ5IDE0MC40MzYgMTYuNjk4MyAxNDEuMTc1IDE3LjM0ODVDMTQxLjkxNCAxNy45OTg4IDE0Mi4yNjIgMTkuMDgyNCAxNDIuMjYyIDIwLjU1NjNWMjcuNzk1M0gxMzkuMjE5VjIwLjk0NjRDMTM5LjIxOSAyMC4wNzk0IDEzOS4wODkgMTkuNTE1OSAxMzguODI4IDE5LjI5OTJDMTM4LjU2NyAxOS4wMzkxIDEzOC4wNDYgMTguOTA5MSAxMzcuMjIgMTguOTA5MUgxMzQuNzg2VjI3LjgzODZIMTMxLjc0M1YxNi4zOTQ5SDEzMS43ODdaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDMuNzM3NDNIMFYxMC44NDY0SDcuMTI4MzFWMy43Mzc0M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTIzLjI1MTMgLTIuMTU3MjVlLTA1TDE4LjU1MTMgNS41MTY4NUwyNC4wODMxIDEwLjIwNDFMMjguNzgzMSA0LjY4NzI1TDIzLjI1MTMgLTIuMTU3MjVlLTA1WiIgZmlsbD0iI0ZGODYwMCIvPgo8cGF0aCBkPSJNMTUuNjA0MSAzLjczNzQzSDguNDc1ODNWMTAuODQ2NEgxNS42MDQxVjMuNzM3NDNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik03LjEyODMxIDEyLjE5MDJIMFYxOS4yOTkySDcuMTI4MzFWMTIuMTkwMloiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMTIuMTkwMkg4LjQ3NTgzVjE5LjI5OTJIMTUuNjA0MVYxMi4xOTAyWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMDc5NyAxMi4xOTAySDE2Ljk1MTRWMTkuMjk5MkgyNC4wNzk3VjEyLjE5MDJaIiBmaWxsPSIjRkY4NjAwIi8+CjxwYXRoIGQ9Ik03LjEyODMxIDIwLjY4NjNIMFYyNy43OTUzSDcuMTI4MzFWMjAuNjg2M1oiIGZpbGw9IiMzNTQzQTgiLz4KPHBhdGggZD0iTTE1LjYwNDEgMjAuNjg2M0g4LjQ3NTgzVjI3Ljc5NTNIMTUuNjA0MVYyMC42ODYzWiIgZmlsbD0iIzM1NDNBOCIvPgo8cGF0aCBkPSJNMjQuMTIzMiAyMC42ODYzSDE2Ljk5NDlWMjcuNzk1M0gyNC4xMjMyVjIwLjY4NjNaIiBmaWxsPSIjMzU0M0E4Ii8+CjxwYXRoIGQ9Ik0xNDYgMTUuODMxM0MxNDYgMTYuODcxNyAxNDUuMTc0IDE3LjY5NTMgMTQ0LjEzMSAxNy42OTUzQzE0My4wODggMTcuNjk1MyAxNDIuMjYyIDE2Ljg3MTcgMTQyLjI2MiAxNS44MzEzQzE0Mi4yNjIgMTQuNzkxIDE0My4wODggMTQuMDEwNyAxNDQuMTMxIDE0LjAxMDdDMTQ1LjEzMSAxMy45Njc0IDE0NiAxNC43OTEgMTQ2IDE1LjgzMTNaTTE0Mi45NTcgMTQuNzkxQzE0Mi42OTcgMTUuMDUxMSAxNDIuNTY2IDE1LjQ0MTIgMTQyLjU2NiAxNS44MzEzQzE0Mi41NjYgMTYuNjk4MyAxNDMuMjYyIDE3LjM5MTggMTQ0LjEzMSAxNy4zOTE4QzE0NSAxNy4zOTE4IDE0NS42OTYgMTYuNjk4MyAxNDUuNjk2IDE1LjgzMTNDMTQ1LjY5NiAxNS4wMDc3IDE0NSAxNC4yNzA4IDE0NC4xNzQgMTQuMjcwOEMxNDMuNjUzIDE0LjI3MDggMTQzLjI2MiAxNC40NDQyIDE0Mi45NTcgMTQuNzkxWk0xNDQuODcgMTYuOTE1SDE0NC40NzlMMTQzLjkxNCAxNi4wOTE0VjE2LjkxNUgxNDMuNjA5VjE0Ljc0NzZIMTQzLjk1N0MxNDQuNDM1IDE0Ljc0NzYgMTQ0LjY1MyAxNC45NjQ0IDE0NC42NTMgMTUuMzU0NUMxNDQuNjUzIDE1LjY1NzkgMTQ0LjQ3OSAxNS44NzQ3IDE0NC4xNzQgMTUuOTYxNEwxNDQuODcgMTYuOTE1Wk0xNDQuMDQ0IDE1LjY1NzlDMTQ0LjI2MSAxNS42NTc5IDE0NC4zOTIgMTUuNTI3OSAxNDQuMzkyIDE1LjM1NDVDMTQ0LjM5MiAxNS4xMzc4IDE0NC4yNjEgMTUuMDUxMSAxNDQuMDAxIDE1LjA1MTFIMTQzLjkxNFYxNS42NTc5SDE0NC4wNDRaIiBmaWxsPSIjMzU0M0E4Ii8+Cjwvc3ZnPgo=" style="\n    text-align: left;\n    width: 146px;\n    position: absolute;\n    top: 14px;\n    left: 31px;\n">\n            </div>\n            <div style="\n    position: relative;\n    top: 80px;\n    left: 32px;\n    font-size: 20px;\n    text-align: left;\n    font-weight: 700;\n    letter-spacing: 0.02em;\n    font-style: normal;\n    line-height: 125%;\n    ">Claim your FREE account and get a key in less than a minute</div>\n            <ul style="\n        font-size: 15px;\n        font-weight: 400;\n        color: #333333;\n        letter-spacing: 0.01em;\n        position: relative;\n        left: 32px;\n        top: 88px;\n        line-height: 180%;\n        ">\n                <li><span>Access to a 30-day free trial of any of our products.</span></li>\n                <li><span>Access to 24x5 support by developers via the <a href="https://support.syncfusion.com/create?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">support tickets</a>, <a href="https://www.syncfusion.com/forums?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">forum</a>, <a href="https://www.syncfusion.com/feedback?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">feature &amp; feedback page</a> and chat.</span></li>\n                <li><span>200+ <a href="https://www.syncfusion.com/succinctly-free-ebooks?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">ebooks </a>on the latest technologies, industry trends, and research topics.</span>\n                </li>\n                <li><span>Largest collection of over 7500 flat and wireframe icons for free with Syncfusion<sup>\xae</sup> <a href="https://www.syncfusion.com/downloads/metrostudio?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">Metro Studio.</a></span></li>\n                <li><span>Free and unlimited access to Syncfusion<sup>\xae</sup> technical <a href="https://www.syncfusion.com/blogs/?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information\n                " style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">blogs</a> and <a href="https://www.syncfusion.com/resources/techportal/whitepapers?utm_source=es_license_validation_banner&utm_medium=listing&utm_campaign=license-information" style="text-decoration: none;\n                color: #0D6EFD;\n                font-weight: 500;">whitepapers.</a></span></li>\n            </ul>\n            <div style="\n            font-size: 18px;\n            font-weight: 700;\n            position: relative;\n            line-height: 125%;\n            letter-spacing: 0.02em;\n            top: 90px;\n            left: 32px;\n    ">Syncfusion is trusted by 29,000+ businesses worldwide</div>\n            <img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjIyMzAiIGhlaWdodD0iMTU2Ij4KPHBhdGggZD0iTTAgMCBDMTAuMjAxNTE3OTEgOC44MjE1MTgwNSAxNi4yMjU4NjAxNyAxOS4zODQ1MTIyMiAxNy4yODEyNSAzMi45NzI2NTYyNSBDMTcuNDE3OTUwMTYgNDUuOTc2MjU4NTUgMTMuMTkyNTE4MDQgNTcuNjM2ODk1NzMgNC4yNDYwOTM3NSA2Ny4xMzI4MTI1IEMtNS44MzQzNzk4NyA3Ni42NDQzNzA1IC0xNi43MjM2MTUyMyA4MC40NzU4MTc3IC0zMC40MTAxNTYyNSA4MC4yMjI2NTYyNSBDLTQzLjEyNjA0NDAyIDc5LjI2MTgzMzU2IC01NC4yMDMwOTQ1MyA3My40MDM0NzMyNCAtNjIuNzE4NzUgNjMuOTcyNjU2MjUgQy03MS4xNDgwNjkyNSA1MS44OTg2NTk5MiAtNzMuMTk0NzM3MSA0MC4zOTM3NzYxNCAtNzEuNzE4NzUgMjUuOTcyNjU2MjUgQy02OS4wOTkxNjQzNyAxNC41NTg3NDc0NCAtNjIuMzc0NTczNzggNC42NDI1NDI1NiAtNTIuNzE4NzUgLTIuMDI3MzQzNzUgQy0zNS45MDE4NDE2MSAtMTEuOTUyMDc2NTcgLTE1Ljg5MjUyMDU5IC0xMi4xNTE1ODYzNiAwIDAgWiAiIGZpbGw9IiMwODY4NDIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzODguNzE4NzUsNDIuMDI3MzQzNzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzcuMzY3MjM5MTYgNC4wNDIzMjQxMSAxMS4xMDI1Mzc1MyAxMS4zOTA0MDEzMyAxNCAxOSBDMTQuMzg5NjU4MjYgMjAuOTg5NzkzMzQgMTQuNzQwMDUyODkgMjIuOTg5MTQ0ODEgMTUgMjUgQzE1LjY2IDI1IDE2LjMyIDI1IDE3IDI1IEMxNy4xMDA1NDY4NyAyNC4xNDQwNjI1IDE3LjIwMTA5Mzc1IDIzLjI4ODEyNSAxNy4zMDQ2ODc1IDIyLjQwNjI1IEMxOC45MTc0Mjc1NSAxNC41MDU2MzU4IDIzLjYwODM5NDI3IDUuNzcxNDMyNzMgMzAuMTc5Njg3NSAwLjg5NDUzMTI1IEMzMy43MzEzMzY1NCAtMC44NTA4MDcwMSAzNi4wNzI1NTM3NiAtMC42MjM0MDQxNyA0MCAwIEM0Ny43ODg2NDkxMyAzLjU4Mjc3ODYgNTEuMzQ3MDc2MTEgMTAuOTI1MDE3NDYgNTQuMzUyNzgzMiAxOC41ODg4NjcxOSBDNjAuNjYxMjYyNjMgMzUuNzMzMjUxOTkgNjMuMjM3ODY0ODggNTQuNDE0MDMxNTkgNjMuMDYyNSA3Mi42MjUgQzYzLjA1Nzk4ODI4IDczLjUzMzc4OTA2IDYzLjA1MzQ3NjU2IDc0LjQ0MjU3ODEyIDYzLjA0ODgyODEyIDc1LjM3ODkwNjI1IEM2My4wMzcyMTIwMiA3Ny41ODU5NjY5NSA2My4wMTkyODQ1MyA3OS43OTI5OTI5OSA2MyA4MiBDNTkuMDQgODIgNTUuMDggODIgNTEgODIgQzUwLjkzMDA2ODM2IDgwLjkwMzQ5MTIxIDUwLjg2MDEzNjcyIDc5LjgwNjk4MjQyIDUwLjc4ODA4NTk0IDc4LjY3NzI0NjA5IEM1MC4zMzA4MzIxNSA0MS45ODYzMDU3MyA1MC4zMzA4MzIxNSA0MS45ODYzMDU3MyAzOSA4IEMzOC4wMSA3LjY3IDM3LjAyIDcuMzQgMzYgNyBDMjUuMTQyMTkxNjggMTYuMjQ0MTIxMzEgMjQuODI2NDcwMzkgMzguNDA3NTg2NzUgMjMuNjgzNTkzNzUgNTEuNjcyMzYzMjggQzIzLjA0MTM0NzcxIDU5Ljc3NjY1NDY5IDIyLjUwMDE0OTM2IDY3Ljg4NTgxMjE3IDIyIDc2IEMxOC4wNCA3NiAxNC4wOCA3NiAxMCA3NiBDOS44OTUxMDI1NCA3NC40NzU4NDQ3MyA5Ljg5NTEwMjU0IDc0LjQ3NTg0NDczIDkuNzg4MDg1OTQgNzIuOTIwODk4NDQgQzkuMjg4Njk2MTIgMzkuNjQwNjkzMTMgOS4yODg2OTYxMiAzOS42NDA2OTMxMyAtMSA5IEMtMy4wMzU2NDA0IDcuNzQxNDM2NTkgLTMuMDM1NjQwNCA3Ljc0MTQzNjU5IC01IDcgQy0xNS44NDgzODY5NyAxNi40OTIzMzg2IC0xNi4wNTg3MjYyNSA0MC4yNTk3NTY0MSAtMTcgNTQgQy0xNy40NzQyMTEwMiA2My4zMjgyOTc4NCAtMTcuNzQ3NjYxNTkgNzIuNjYzNDc4NzQgLTE4IDgyIEMtMjIuMjkgODIgLTI2LjU4IDgyIC0zMSA4MiBDLTMxLjg5MjU5MjA1IDU1LjgxNzI5OTc3IC0yOS45NTA2NDQ2MiAyMi44Mzc1NTI0MSAtMTIgMiBDLTguNDczMzg5NDMgLTAuNjQ0OTU3OTMgLTQuMjE5NTgzOTggLTAuOTU4OTk2MzYgMCAwIFogIiBmaWxsPSIjRkZDQzAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg4MjgsMzcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzUuODg3MjkwNzMgMS40NDk4NTUxOCA5LjE2NjM4NTEzIDEuMjgxNTYyNTYgMTQuNzUgLTAuODM5ODQzNzUgQzIwLjM1Nzc0OTYyIC0yLjU0NjE0OTE0IDI1LjU0MDY3MjkyIC0xLjM4Mjk1NTEgMzAuNjI1IDEuMjUgQzMyLjkzNzM1MDYzIDMuMjczMzA2OCAzNC4xMDM0MzU0MiA0LjU3NzExOTE4IDM1LjEyNSA3LjQzNzUgQzM0LjM0MTI1IDguMTggMzMuNTU3NSA4LjkyMjUgMzIuNzUgOS42ODc1IEMyOS4xMTkwMTcwMyAxMy40OTEzODY5MiAyOC4yMzgzODk0NyAxNS4wMzE0NzA1OCAyNy44MTI1IDIwLjMxMjUgQzI3Ljk2MDg4MjA0IDI1LjAxNzA4MzQ0IDI5LjE5MzUzOTM2IDI4LjU3NDg0NDU4IDMyLjY2MDE1NjI1IDMxLjkxNzk2ODc1IEMzNC4xMDgzOTEwMSAzMy4xNDAyMzc4IDM1LjYxMjk3ODE1IDM0LjI5NTA4MzQ5IDM3LjEyNSAzNS40Mzc1IEMzNi4wNzAxOTM1MiA0Mi40Njk1NDMyIDMyLjAzNjA5MDQ5IDQ3Ljk3MzE5OTEgMjcuNzUgNTMuNSBDMjQuMjczODU5MzcgNTYuMDY1NzIyODUgMjEuNDA5Njc2NTkgNTYuNjI0MTU5MTggMTcuMTI1IDU2LjQzNzUgQzE1LjExMjc3OTUzIDU1LjgwODY4MTEgMTMuMTEyMjMyNjggNTUuMTQxMzExNTcgMTEuMTI1IDU0LjQzNzUgQzcuMTMyMjAwNjEgNTQuMDEwODUwMDcgMy44Njk5NzIwNCA1NC4xNzkwNDAzMSAwLjA2MjUgNTUuNSBDLTMuNzQ1OTgyNzYgNTYuNzE1NDczMjIgLTYuMDIwMDcxMDYgNTYuNDcwMDcwMjUgLTkuODc1IDU1LjQzNzUgQy0xNy44OTY4MjA0OCA1MC4zNjI0NzA3MiAtMjMuMjI0ODkxNjcgNDAuMjQ1NjM5MjYgLTI1LjQzMzU5Mzc1IDMxLjEzMjgxMjUgQy0yNi42OTE4Nzk2IDIzLjQ0OTQ3NDE1IC0yNy4zMTA4Njc4MiAxNC4yMDI1NjkzMiAtMjIuODc1IDcuNDM3NSBDLTE5LjE4NzExNTEzIDMuMTY0NjQwMjkgLTE0Ljk1ODc1MDk1IC0wLjQ2NDczMTYxIC05LjI2NTYyNSAtMS41NzQyMTg3NSBDLTYuMDIyMDAxNTYgLTEuNTU4MzE4NjQgLTMuMTQ1MDkxMDYgLTAuNzc5NDY1MjEgMCAwIFogIiBmaWxsPSIjMDAwMDAwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzMjIuODc1LDU1LjU2MjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuOTk4NjY1NzYgNi41NjU2MTQ1OCAxMy4yMzU0MjQ3IDEzLjIxNDc1OTU1IDE0LjE3OTY4NzUgMjMuMTg3NSBDMTMuOTYxMTk2MzQgMjguMjczOTc0MSAxMi4yNTY2NDk1NCAzMi4wNjY5ODMyNiA5LjAzNTE1NjI1IDM1Ljk3NjU2MjUgQzAuNTMzMzg4MDQgNDMuNTgzNDA3NzQgLTguOTc3NTY4MjUgNDUuMDAzODkwNjcgLTE5Ljg1NTQ2ODc1IDQ0Ljg5ODQzNzUgQy0yMS4xODA5NDcyNyA0NC44OTE2Njk5MiAtMjEuMTgwOTQ3MjcgNDQuODkxNjY5OTIgLTIyLjUzMzIwMzEyIDQ0Ljg4NDc2NTYyIEMtMjQuNzAzMTU0MzQgNDQuODczMDM2MTYgLTI2Ljg3MzA3MDQ3IDQ0Ljg1NTEwMjQ1IC0yOS4wNDI5Njg3NSA0NC44MzU5Mzc1IEMtMjkuMzcyOTY4NzUgNDUuNDk1OTM3NSAtMjkuNzAyOTY4NzUgNDYuMTU1OTM3NSAtMzAuMDQyOTY4NzUgNDYuODM1OTM3NSBDLTMyLjQxNzk2ODc1IDQ2Ljk2MDkzNzUgLTMyLjQxNzk2ODc1IDQ2Ljk2MDkzNzUgLTM1LjA0Mjk2ODc1IDQ2LjgzNTkzNzUgQy0zNy4wNDI5Njg3NSA0NC44MzU5Mzc1IC0zNy4wNDI5Njg3NSA0NC44MzU5Mzc1IC0zNy40MTQwNjI1IDQyLjM1NTQ2ODc1IEMtMzcuNzgyMzI5OTcgMzkuNzMzNjQ1MzEgLTM3Ljc4MjMyOTk3IDM5LjczMzY0NTMxIC0zOS44MjgxMjUgMzguNTM1MTU2MjUgQy00MC41Nzk2NDg0NCAzOC4yMDEyODkwNiAtNDEuMzMxMTcxODcgMzcuODY3NDIxODcgLTQyLjEwNTQ2ODc1IDM3LjUyMzQzNzUgQy00Ny4zNTI0NjU4MyAzNC44NTM3NjUzOCAtNTEuNDU1NzUyNzEgMzEuNTMwNDMxOTUgLTU1LjA0Mjk2ODc1IDI2LjgzNTkzNzUgQy01Ni4wNDI5Njg3NSAyMy4zMzU5Mzc1IC01Ni4wNDI5Njg3NSAyMy4zMzU5Mzc1IC01Ni4wNDI5Njg3NSAyMC44MzU5Mzc1IEMtNTEuMzM2NTk3OTUgMTYuMTI5NTY2NyAtNDUuMzAzOTE4MTcgMTQuNTc0NTc2MzMgLTM5LjA0Mjk2ODc1IDEyLjgzNTkzNzUgQy0zOC4zODI5Njg3NSAxMi44MzU5Mzc1IC0zNy43MjI5Njg3NSAxMi44MzU5Mzc1IC0zNy4wNDI5Njg3NSAxMi44MzU5Mzc1IEMtMzYuOTIxNzk2ODggMTEuOTA5MTAxNTYgLTM2LjgwMDYyNSAxMC45ODIyNjU2MiAtMzYuNjc1NzgxMjUgMTAuMDI3MzQzNzUgQy0zNi41MDgyMDMxMyA4LjgyOTgwNDY5IC0zNi4zNDA2MjUgNy42MzIyNjU2MyAtMzYuMTY3OTY4NzUgNi4zOTg0Mzc1IEMtMzYuMDA1NTQ2ODggNS4yMDM0NzY1NiAtMzUuODQzMTI1IDQuMDA4NTE1NjMgLTM1LjY3NTc4MTI1IDIuNzc3MzQzNzUgQy0zNS40NjY5NTMxMyAxLjgwNjY3OTY5IC0zNS4yNTgxMjUgMC44MzYwMTU2MyAtMzUuMDQyOTY4NzUgLTAuMTY0MDYyNSBDLTM0LjM4Mjk2ODc1IC0wLjQ5NDA2MjUgLTMzLjcyMjk2ODc1IC0wLjgyNDA2MjUgLTMzLjA0Mjk2ODc1IC0xLjE2NDA2MjUgQy0zMC4wNzc2OTExNyAxLjI4MTI3NiAtMjkuNDg3MTQ2NjEgMy4yODE5NjA5NyAtMjguODU1NDY4NzUgNy4wMjM0Mzc1IEMtMjguNjk2OTE0MDYgNy45MjQ0OTIxOSAtMjguNTM4MzU5MzggOC44MjU1NDY4OCAtMjguMzc1IDkuNzUzOTA2MjUgQy0yOC4yNjU0Mjk2OSAxMC40NDA5NzY1NiAtMjguMTU1ODU5MzcgMTEuMTI4MDQ2ODcgLTI4LjA0Mjk2ODc1IDExLjgzNTkzNzUgQy0yNy4xMjUxNTYyNSAxMS45MzM5MDYyNSAtMjYuMjA3MzQzNzUgMTIuMDMxODc1IC0yNS4yNjE3MTg3NSAxMi4xMzI4MTI1IEMtMTguMDQ1MDgyNTkgMTMuMDEyMTUwNTIgLTEyLjIzNzYzMDI1IDEzLjk0OTA5MTA3IC02LjA0Mjk2ODc1IDE3LjgzNTkzNzUgQy00LjY2MTcxODU3IDIwLjU5ODQzNzg2IC00Ljg1MjE3NTY5IDIyLjc4MzI0ODQ5IC01LjA0Mjk2ODc1IDI1LjgzNTkzNzUgQy03LjA0Mjk2ODc1IDI3LjgzNTkzNzUgLTcuMDQyOTY4NzUgMjcuODM1OTM3NSAtMTAuNjY3OTY4NzUgMjcuOTYwOTM3NSBDLTExLjc4MTcxODc1IDI3LjkxOTY4NzUgLTEyLjg5NTQ2ODc1IDI3Ljg3ODQzNzUgLTE0LjA0Mjk2ODc1IDI3LjgzNTkzNzUgQy0xMy4zODI5Njg3NSAyNi41MTU5Mzc1IC0xMi43MjI5Njg3NSAyNS4xOTU5Mzc1IC0xMi4wNDI5Njg3NSAyMy44MzU5Mzc1IEMtMTUuNzk1MjI3MTUgMjIuMTc5MDk2MTMgLTE5LjMwNjQ5OTM2IDIxLjMzMzg1NTg3IC0yMy4zNTU0Njg3NSAyMC43MTA5Mzc1IEMtMjUuMjMyMzQzNzUgMjAuNDIyMTg3NSAtMjcuMTA5MjE4NzUgMjAuMTMzNDM3NSAtMjkuMDQyOTY4NzUgMTkuODM1OTM3NSBDLTI4LjU0Nzk2ODc1IDI4LjI1MDkzNzUgLTI4LjU0Nzk2ODc1IDI4LjI1MDkzNzUgLTI4LjA0Mjk2ODc1IDM2LjgzNTkzNzUgQy0xMi4wNjE3Nzk5MSAzNy4zODI2NDE3MiAtMTIuMDYxNzc5OTEgMzcuMzgyNjQxNzIgMi4wODIwMzEyNSAzMC42NDg0Mzc1IEM0Ljc2MDcwNTQxIDI2LjYzMDQyNjI2IDQuNzc1MjY3NDcgMjMuNTI1MDYwNDMgMy45NTcwMzEyNSAxOC44MzU5Mzc1IEMxLjAxMTM1NTYzIDguNTI2MDcyODEgLTguODY3NTEyMiAyLjM4NDg3MDU4IC0xNy43MzQzNzUgLTIuNTYyNSBDLTMxLjY3NjMzMzk0IC05LjMxMTI2NDA3IC00NS42NDMxNzQyMiAtMTEuNTY4NzI4NjMgLTYxLjA0Mjk2ODc1IC0xMS4xNjQwNjI1IEMtNjEuMDQyOTY4NzUgLTEwLjE3NDA2MjUgLTYxLjA0Mjk2ODc1IC05LjE4NDA2MjUgLTYxLjA0Mjk2ODc1IC04LjE2NDA2MjUgQy02My4wMjI5Njg3NSAtOC4xNjQwNjI1IC02NS4wMDI5Njg3NSAtOC4xNjQwNjI1IC02Ny4wNDI5Njg3NSAtOC4xNjQwNjI1IEMtNjcuNzkyOTY4NzUgLTkuOTE0MDYyNSAtNjcuNzkyOTY4NzUgLTkuOTE0MDYyNSAtNjguMDQyOTY4NzUgLTEyLjE2NDA2MjUgQy02NS45Njg1NDMxOCAtMTUuNTIyNjU2MjggLTYzLjQ3ODY1NTM5IC0xNi41NTA0NzkzNSAtNTkuNzkyOTY4NzUgLTE3LjQ3NjU2MjUgQy0zOS4xODA0NTMyNSAtMjAuODM2MzExNzIgLTE1Ljg1MjQ2NDU2IC0xMy4zOTczMDI3NCAwIDAgWiBNLTQ3LjM1NTQ2ODc1IDIwLjgzNTkzNzUgQy00OC4yMzg0NzY1NiAyMS4wMjE1NjI1IC00OS4xMjE0ODQzOCAyMS4yMDcxODc1IC01MC4wMzEyNSAyMS4zOTg0Mzc1IEMtNTAuNjk1MTE3MTkgMjEuNTQyODEyNSAtNTEuMzU4OTg0MzcgMjEuNjg3MTg3NSAtNTIuMDQyOTY4NzUgMjEuODM1OTM3NSBDLTUyLjUwMDI0MDQ0IDI1LjcyNDc4Mzk5IC01Mi41MDAyNDA0NCAyNS43MjQ3ODM5OSAtNTAuNTAzOTA2MjUgMjcuNDY4NzUgQy00Ni40NjI2MDg1IDMwLjM1OTcxNTgxIC00Mi45NDE1MjEwNyAzMi42MTEyOTk0MiAtMzguMDQyOTY4NzUgMzMuODM1OTM3NSBDLTM2LjcwMzk1MDgzIDMyLjcyNDY3MDkxIC0zNi43MDM5NTA4MyAzMi43MjQ2NzA5MSAtMzYuOTQ1MzEyNSAyOS44OTQ1MzEyNSBDLTM2Ljk1NjkxNDA2IDI4LjY5OTU3MDMxIC0zNi45Njg1MTU2MyAyNy41MDQ2MDkzOCAtMzYuOTgwNDY4NzUgMjYuMjczNDM3NSBDLTM2Ljk4OTQ5MjE5IDI1LjA3NTg5ODQ0IC0zNi45OTg1MTU2MiAyMy44NzgzNTkzOCAtMzcuMDA3ODEyNSAyMi42NDQ1MzEyNSBDLTM3LjAxOTQxNDA2IDIxLjcxNzY5NTMxIC0zNy4wMzEwMTU2MyAyMC43OTA4NTkzNyAtMzcuMDQyOTY4NzUgMTkuODM1OTM3NSBDLTQwLjYzODE2MTY3IDE5LjczMjI5MjMgLTQzLjg0MDg2MTA3IDIwLjA4NjE1NDUzIC00Ny4zNTU0Njg3NSAyMC44MzU5Mzc1IFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NTEuMDQyOTY4NzUsNTguMTY0MDYyNSkiLz4KPHBhdGggZD0iTTAgMCBDMy4zIDAgNi42IDAgMTAgMCBDMTMuOTk1NTQ4MTcgOC40NTIxMjExMyAxNi45NDE0Njg4MSAxNy4xNzE5NjY3OSAyMCAyNiBDMjAuMzMgMTcuNDIgMjAuNjYgOC44NCAyMSAwIEMyNC42MyAwIDI4LjI2IDAgMzIgMCBDMzIgMTguNDggMzIgMzYuOTYgMzIgNTYgQzI4IDU3IDI4IDU3IDIwIDU3IEMxNy4zNiA0OS40MSAxNC43MiA0MS44MiAxMiAzNCBDMTEuNjcgNDIuMjUgMTEuMzQgNTAuNSAxMSA1OSBDNS41NTUgNTkuNDk1IDUuNTU1IDU5LjQ5NSAwIDYwIEMwIDQwLjIgMCAyMC40IDAgMCBaICIgZmlsbD0iI0Q4MUYyNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOTk1LDUyKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjE3MDQ2ODc1IDAuMDI3MDcwMzEgMi4zNDA5Mzc1IDAuMDU0MTQwNjMgMy41NDY4NzUgMC4wODIwMzEyNSBDNC40Mzg5MDYyNSAwLjExNjgzNTk0IDUuMzMwOTM3NSAwLjE1MTY0MDYyIDYuMjUgMC4xODc1IEM3LjUzODE4NzMxIDYuMjE4NDU0OTcgOC44MTk3NDQ4OSAxMi4yNTA3NjY0NyAxMC4wOTUyMTQ4NCAxOC4yODQ0MjM4MyBDMTAuNTI5OTIzMzUgMjAuMzM2MjQxNDggMTAuOTY2NDMxOTEgMjIuMzg3Njc4NjMgMTEuNDA0Nzg1MTYgMjQuNDM4NzIwNyBDMTIuMDM1MDI5NTggMjcuMzg5MTUwNjYgMTIuNjU4NzU5NzQgMzAuMzQwODk0MzcgMTMuMjgxMjUgMzMuMjkyOTY4NzUgQzEzLjQ3ODExNDAxIDM0LjIwNzczNDgzIDEzLjY3NDk3ODAzIDM1LjEyMjUwMDkyIDEzLjg3NzgwNzYyIDM2LjA2NDk4NzE4IEMxNC4wNTc5OTQzOCAzNi45MjU1MDE4NiAxNC4yMzgxODExNSAzNy43ODYwMTY1NCAxNC40MjM4MjgxMiAzOC42NzI2MDc0MiBDMTQuNTgzNzEyMTYgMzkuNDI1Mzk0NzQgMTQuNzQzNTk2MTkgNDAuMTc4MTgyMDcgMTQuOTA4MzI1MiA0MC45NTM3ODExMyBDMTUuMjUgNDMuMTg3NSAxNS4yNSA0My4xODc1IDE1LjI1IDQ4LjE4NzUgQzExLjI5IDQ4LjE4NzUgNy4zMyA0OC4xODc1IDMuMjUgNDguMTg3NSBDMi45MiA0NS44Nzc1IDIuNTkgNDMuNTY3NSAyLjI1IDQxLjE4NzUgQy0yLjcgNDEuNTE3NSAtNy42NSA0MS44NDc1IC0xMi43NSA0Mi4xODc1IEMtMTMuNDEgNDQuMTY3NSAtMTQuMDcgNDYuMTQ3NSAtMTQuNzUgNDguMTg3NSBDLTE5LjM3IDQ4LjE4NzUgLTIzLjk5IDQ4LjE4NzUgLTI4Ljc1IDQ4LjE4NzUgQy0yNi44MDgzMTEyNiA0Mi4yMDY0MzQ4NSAtMjQuNzAyMzE0NTggMzYuMzU1OTk3NzMgLTIyLjMxNjQwNjI1IDMwLjUzOTA2MjUgQy0yMS45OTcxOTcxMSAyOS43NTk4NTQ0MyAtMjEuNjc3OTg3OTggMjguOTgwNjQ2MzYgLTIxLjM0OTEwNTgzIDI4LjE3NzgyNTkzIEMtMjAuNjc5NDY4MTMgMjYuNTQ4NjI2IC0yMC4wMDc5ODYzNCAyNC45MjAxODI4OSAtMTkuMzM0NzE2OCAyMy4yOTI0ODA0NyBDLTE4LjY0OTcxMDY3IDIxLjYzMDYwMDMgLTE3Ljk3MDA3MDg4IDE5Ljk2NjQ5ODY1IC0xNy4yOTU2NTQzIDE4LjMwMDI5Mjk3IEMtMTYuMzEzOTk1MTggMTUuODc1MDE3NSAtMTUuMzE3MDg2OTUgMTMuNDU2NTQxMzggLTE0LjMxNjQwNjI1IDExLjAzOTA2MjUgQy0xNC4wMTgzNTU4NyAxMC4yOTUzMjM3OSAtMTMuNzIwMzA1NDggOS41NTE1ODUwOCAtMTMuNDEzMjIzMjcgOC43ODUzMDg4NCBDLTEwLjMyNjYxNzczIDEuNDMzOTIzMTMgLTcuOTE5NDc2MjUgLTAuMjM3NTg0MjkgMCAwIFogTS0zLjc1IDE1LjE4NzUgQy01LjQgMjAuMTM3NSAtNy4wNSAyNS4wODc1IC04Ljc1IDMwLjE4NzUgQy02LjExIDMwLjE4NzUgLTMuNDcgMzAuMTg3NSAtMC43NSAzMC4xODc1IEMtMS40MDM0OTYzMyAyMi42MzcxMTU3OCAtMS40MDM0OTYzMyAyMi42MzcxMTU3OCAtMi43NSAxNS4xODc1IEMtMy4wOCAxNS4xODc1IC0zLjQxIDE1LjE4NzUgLTMuNzUgMTUuMTg3NSBaICIgZmlsbD0iIzIzNDM5QSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcwLjc1LDUzLjgxMjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuNzg5Mjg3NzggMi4zMDgzNzYwOSAzLjc1MTc2ODg4IDQuMjY1OTI4MzQgNC4yNzM0Mzc1IDcuOTEwMTU2MjUgQzQuNjM2ODE4NzQgMTUuNjExMDQzMzQgMS45NDAyMDM5IDIxLjI4NjM5NDY0IC0yLjc5Njg3NSAyNy4yNjk1MzEyNSBDLTkuMDAxNDUwMzQgMzMuOTU4MDYzNDcgLTE1LjA5NjEwOTIxIDM3LjE0MTAyMzg5IC0yNC4yNSAzNy41IEMtMjguMDQyMTE1NTYgMzcuMzY0OTExOTEgLTI5Ljc2NDgxODA0IDM3LjEzMTcwMTkgLTMzLjEyNSAzNS4yNSBDLTM2LjYxNDUyNjY5IDMxLjA2MjU2Nzk3IC0zNy40NTgyNTE2IDI3Ljc5OTc2MzM3IC0zNy4zMDg1OTM3NSAyMi40Mjk2ODc1IEMtMzYuMzE4MDI0MjMgMTQuNjMwNTE5ODYgLTMxLjc1MTQwMDU4IDguMTU2MDQwNzUgLTI2IDMgQy0xNy42OTY1MDc2NiAtMi42NTI1NDYzMSAtOS4yMjAwNTQ5MyAtNS42NTc3NjA5OCAwIDAgWiAiIGZpbGw9IiMwNjg4MkYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNDUsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNzQ5ODUzMjUgLTAuMDg3MTc0NyA3LjQ5OTQ0NTU1IC0wLjE0MDQ1MDAzIDExLjI1IC0wLjE4NzUgQzEyLjMxMzQ3NjU2IC0wLjIxMjYzNjcyIDEzLjM3Njk1MzEyIC0wLjIzNzc3MzQ0IDE0LjQ3MjY1NjI1IC0wLjI2MzY3MTg4IEMxNS40OTc0NjA5NCAtMC4yNzMzMzk4NCAxNi41MjIyNjU2MyAtMC4yODMwMDc4MSAxNy41NzgxMjUgLTAuMjkyOTY4NzUgQzE4LjUyMDc1MTk1IC0wLjMwODY3OTIgMTkuNDYzMzc4OTEgLTAuMzI0Mzg5NjUgMjAuNDM0NTcwMzEgLTAuMzQwNTc2MTcgQzIzLjU2MjEwMzM5IDAuMDc0NjIyNTkgMjQuODI1NjM1MDMgMC43MTY2NzQ2NSAyNyAzIEMyNy45MTMwODU5NCA1LjYzNTQ5ODA1IDI3LjkxMzA4NTk0IDUuNjM1NDk4MDUgMjguNDg0Mzc1IDguNzYxNzE4NzUgQzI4LjgwMzQxNzk3IDEwLjQzOTExMTMzIDI4LjgwMzQxNzk3IDEwLjQzOTExMTMzIDI5LjEyODkwNjI1IDEyLjE1MDM5MDYyIEMyOS4zMzM4NjcxOSAxMy4zMTc2MzY3MiAyOS41Mzg4MjgxMiAxNC40ODQ4ODI4MSAyOS43NSAxNS42ODc1IEMyOS45NzA0Mjk2OSAxNi44NjYzNDc2NiAzMC4xOTA4NTkzOCAxOC4wNDUxOTUzMSAzMC40MTc5Njg3NSAxOS4yNTk3NjU2MiBDMzAuOTYwMTAyNjQgMjIuMTcwNzg4OTEgMzEuNDg2NzY4MjIgMjUuMDgzNzY2MzEgMzIgMjggQzM1LjA3NTc1MDg3IDIxLjMyMzQ4NDU3IDM4LjA0NTYyMTcyIDE0LjYyMjgwNzQ2IDQwLjgxMjUgNy44MTI1IEM0MS4xMjM4MDg1OSA3LjA1MTMwODU5IDQxLjQzNTExNzE5IDYuMjkwMTE3MTkgNDEuNzU1ODU5MzggNS41MDU4NTkzOCBDNDIuNTA1ODE1MTcgMy42NzEzNTIxMyA0My4yNTMxOTk4MiAxLjgzNTc5NDExIDQ0IDAgQzQ4LjI5IDAgNTIuNTggMCA1NyAwIEM1NS44NzQ5NzQ1OCA2Ljc1MDE1MjU0IDU1Ljg3NDk3NDU4IDYuNzUwMTUyNTQgNTQuMzQxNzk2ODggMTAuMzIxMjg5MDYgQzU0LjAwNDc0NzMxIDExLjExNTIxMDU3IDUzLjY2NzY5Nzc1IDExLjkwOTEzMjA4IDUzLjMyMDQzNDU3IDEyLjcyNzExMTgyIEM1Mi45NTY4Nzg2NiAxMy41NjQ4MjExNyA1Mi41OTMzMjI3NSAxNC40MDI1MzA1MiA1Mi4yMTg3NSAxNS4yNjU2MjUgQzUxLjg0NTIwMzg2IDE2LjE0MDIzMzc2IDUxLjQ3MTY1NzcxIDE3LjAxNDg0MjUzIDUxLjA4Njc5MTk5IDE3LjkxNTk1NDU5IEM0OS44OTczNDQ2IDIwLjY5NjY1Mjc4IDQ4LjY5ODc0NTQ1IDIzLjQ3MzI5OTM5IDQ3LjUgMjYuMjUgQzQ2LjY5MzQyMDAxIDI4LjEzMjU1OTY1IDQ1Ljg4NzQyNDAyIDMwLjAxNTM2OTYzIDQ1LjA4MjAzMTI1IDMxLjg5ODQzNzUgQzQzLjYxMDkxMDIyIDM1LjMzMjU2NDA1IDQyLjEzODAzMjE4IDM4Ljc2NTkwNDg3IDQwLjY1ODIwMzEyIDQyLjE5NjI4OTA2IEM0MC4zNjE0MzY3NyA0Mi44ODQzNDYzMSA0MC4wNjQ2NzA0MSA0My41NzI0MDM1NiAzOS43NTg5MTExMyA0NC4yODEzMTEwNCBDMzkuMjA1MDIxMiA0NS41MzU2OTMxMSAzOC42MTMyMzIxNyA0Ni43NzM1MzU2NyAzOCA0OCBDMzMuMzggNDggMjguNzYgNDggMjQgNDggQzIzLjcxODAxNzU4IDQ2Ljg2OTgxNDQ1IDIzLjQzNjAzNTE2IDQ1LjczOTYyODkxIDIzLjE0NTUwNzgxIDQ0LjU3NTE5NTMxIEMyMi4wOTM1MjM1MyA0MC4zNzQ2MTE1MyAyMS4wMjMxNzA3NiAzNi4xNzg4ODk2NSAxOS45NDcyNjU2MiAzMS45ODQzNzUgQzE5LjQ4NDU3MjAzIDMwLjE2OTg5MDMxIDE5LjAyNjgzOTQ1IDI4LjM1NDEzMjkyIDE4LjU3NDIxODc1IDI2LjUzNzEwOTM4IEMxNy45MjE5MzU4OSAyMy45MjIyNTYxNiAxNy4yNTE4MjE4MSAyMS4zMTI1MzE3MyAxNi41NzgxMjUgMTguNzAzMTI1IEMxNi4yODA5ODYwMiAxNy40ODcyODcyOSAxNi4yODA5ODYwMiAxNy40ODcyODcyOSAxNS45Nzc4NDQyNCAxNi4yNDY4ODcyMSBDMTQuODEwMjA5MzQgMTEuODA0OTMzNDYgMTMuNzk5Njc2MzYgOC44OTA1NzQxMSAxMCA2IEM3LjQ0MzcyNDc1IDQuODk3OTA2NjcgNy40NDM3MjQ3NSA0Ljg5NzkwNjY3IDQuNzUgNC4yNSBDMy44NTc5Njg3NSA0LjAwNzY1NjI1IDIuOTY1OTM3NSAzLjc2NTMxMjUgMi4wNDY4NzUgMy41MTU2MjUgQzEuMzcxNDA2MjUgMy4zNDU0Njg3NSAwLjY5NTkzNzUgMy4xNzUzMTI1IDAgMyBDMCAyLjAxIDAgMS4wMiAwIDAgWiAiIGZpbGw9IiMyMTI5NjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM2LDU0KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjYzIDAgNy4yNiAwIDExIDAgQzE1IDkuNjI1IDE1IDkuNjI1IDE1IDEzIEMxNS42NiAxMyAxNi4zMiAxMyAxNyAxMyBDMTcuMTkzMzU5MzggMTIuMzk2NzE4NzUgMTcuMzg2NzE4NzUgMTEuNzkzNDM3NSAxNy41ODU5Mzc1IDExLjE3MTg3NSBDMTcuODQ2MzI4MTIgMTAuMzcyNjU2MjUgMTguMTA2NzE4NzUgOS41NzM0Mzc1IDE4LjM3NSA4Ljc1IEMxOC43NTc4NTE1NiA3LjU2NjY0MDYyIDE4Ljc1Nzg1MTU2IDcuNTY2NjQwNjIgMTkuMTQ4NDM3NSA2LjM1OTM3NSBDMjAgNCAyMCA0IDIyIDAgQzI1LjYzIDAgMjkuMjYgMCAzMyAwIEMzMS42MTIzNzc3OCA0LjQ4OTM2NjAxIDMwLjA5OTAyNzU4IDguODM1MTMyMDUgMjguMjA3MDMxMjUgMTMuMTM2NzE4NzUgQzI3LjcyNjY1NDA1IDE0LjI0Mjg1NTIyIDI3LjcyNjY1NDA1IDE0LjI0Mjg1NTIyIDI3LjIzNjU3MjI3IDE1LjM3MTMzNzg5IEMyNi41ODgzNzkzNiAxNi44NTIwMjc5OSAyNS45MjY0NjI4MyAxOC4zMjY4MDAwNiAyNS4yNDk3NTU4NiAxOS43OTQ2Nzc3MyBDMjEuMjM0Nzg2MTQgMjkuMDI3NTEyNzMgMjUuMDc1MDY3NzkgMzYuMzYzMTg5NTkgMjguNTYyNSA0NS4yNSBDMjkuNDAxNTk1MTQgNDcuMzk5MzA1OTEgMzAuMjM2NDQwNzggNDkuNTUwMjc3MTYgMzEuMDY2NDA2MjUgNTEuNzAzMTI1IEMzMS40MzcwOTIyOSA1Mi42NDgzMzAwOCAzMS44MDc3NzgzMiA1My41OTM1MzUxNiAzMi4xODk2OTcyNyA1NC41NjczODI4MSBDMzMgNTcgMzMgNTcgMzMgNjAgQzMxLjU2MTYzMjQ5IDU5Ljg4NTQxMzA3IDMwLjEyNDI5MDM0IDU5Ljc1NzkwODg0IDI4LjY4NzUgNTkuNjI1IEMyNy44ODY5OTIxOSA1OS41NTUzOTA2MyAyNy4wODY0ODQzOCA1OS40ODU3ODEyNSAyNi4yNjE3MTg3NSA1OS40MTQwNjI1IEMyNCA1OSAyNCA1OSAyMSA1NyBDMTkuNjEzMjgxMjUgNTMuOTYwOTM3NSAxOS42MTMyODEyNSA1My45NjA5Mzc1IDE4LjMxMjUgNTAuMzc1IEMxNy44NzU1MDc4MSA0OS4xODY0ODQzNyAxNy40Mzg1MTU2MyA0Ny45OTc5Njg3NSAxNi45ODgyODEyNSA0Ni43NzM0Mzc1IEMxNi42NjIxNDg0NCA0NS44NTgyMDMxMyAxNi4zMzYwMTU2MyA0NC45NDI5Njg3NSAxNiA0NCBDMTQuMjExNzgyMjYgNDYuNjgyMzI2NjEgMTIuNzk4NTczOTYgNDkuMzAyODg5NjEgMTEuMzc1IDUyLjE4NzUgQzEwLjkyODk4NDM4IDUzLjA4ODU1NDY5IDEwLjQ4Mjk2ODc1IDUzLjk4OTYwOTM4IDEwLjAyMzQzNzUgNTQuOTE3OTY4NzUgQzkuNjg1NzAzMTIgNTUuNjA1MDM5MDYgOS4zNDc5Njg3NSA1Ni4yOTIxMDkzNyA5IDU3IEM1LjcgNTYuNjcgMi40IDU2LjM0IC0xIDU2IEMtMC4zOTQ5ODQ5MyA0OS4xNzY3NzQ1NCAyLjkyNjY1MjAyIDQzLjQ2Njc3Nzg3IDUuOTM3NSAzNy40MzE2NDA2MiBDOC40NDU2MTQ0IDMyLjE0NzgyNjM3IDkuNzA2Nzk0NDIgMjguODM0MjUxNjYgOCAyMyBDNi43NTQ5MDE0NiAxOS41MzQxMTc5NSA1LjM3Mjc0NjExIDE2LjE0MTA0NzgxIDMuOTM3NSAxMi43NSBDMy4xOTE5Mjc4NyAxMC45NzU5MjA2OSAyLjQ1MDgyOTQ5IDkuMTk5OTUyNjcgMS43MTQ4NDM3NSA3LjQyMTg3NSBDMS4zODYwNTIyNSA2LjY0NDI0ODA1IDEuMDU3MjYwNzQgNS44NjY2MjEwOSAwLjcxODUwNTg2IDUuMDY1NDI5NjkgQzAgMyAwIDMgMCAwIFogIiBmaWxsPSIjRDgxRTI1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTgzLDUyKSIvPgo8cGF0aCBkPSJNMCAwIEMtMC42NiAzLjYzIC0xLjMyIDcuMjYgLTIgMTEgQy0yLjgyNSAxMC44MzUgLTMuNjUgMTAuNjcgLTQuNSAxMC41IEMtMTEuNDA5NDk0MjQgOS40MzI1NTU0MyAtMTEuNDA5NDk0MjQgOS40MzI1NTU0MyAtMTggMTEgQy0xNy45MDQ4MDU0NiAxMi44OTU3NjM2NiAtMTcuOTA0ODA1NDYgMTIuODk1NzYzNjYgLTE3IDE1IEMtMTQuNTcyODYxMyAxNi44NzM4MTgyMSAtMTQuNTcyODYxMyAxNi44NzM4MTgyMSAtMTEuNjI1IDE4LjUgQy03LjkzODczNzE5IDIwLjYzOTc4MzE2IC01LjIyOTM2OTIyIDIyLjMxNTc1MDIyIC0zIDI2IEMtMS41MDg4MTc1MSAzMS42NDUxOTA4NSAtMi4xNzg0MTgzNiAzNC45MjExNTMwNiAtNSA0MCBDLTkuMzQ2NDcyNTcgNDUuMTQ3MTM4NTcgLTEzLjQ5MjA4MjkgNDcuMDc2ODA4NDEgLTIwLjEyNSA0Ny43NSBDLTI1Ljk4NTQzMDQyIDQ4LjIyMDQyOTExIC0zMS4zMDM1NDk3NiA0Ny4zMzMyMTE3NiAtMzcgNDYgQy0zOC4wOTg5ODcwMiA0Mi43MDMwMzg5NSAtMzcuODcxMjQ0NDQgNDEuNTk1MDUwOTcgLTM3LjA2MjUgMzguMzEyNSBDLTM2Ljg2Nzg1MTU2IDM3LjUwNDI1NzgxIC0zNi42NzMyMDMxMyAzNi42OTYwMTU2MyAtMzYuNDcyNjU2MjUgMzUuODYzMjgxMjUgQy0zNi4zMTY2Nzk2OSAzNS4yNDgzOTg0NCAtMzYuMTYwNzAzMTIgMzQuNjMzNTE1NjMgLTM2IDM0IEMtMzQuODQ1IDM0LjMzIC0zMy42OSAzNC42NiAtMzIuNSAzNSBDLTI4LjE4MjA3NzU3IDM2LjA3MzcyODQ5IC0yNC40NDM3NDM0NCAzNi4zMDEyNzA3NCAtMjAgMzYgQy0xOS4wMSAzNS4zNCAtMTguMDIgMzQuNjggLTE3IDM0IEMtMTcuMTc4MjU1OTkgMzIuMDY3MDg1MjEgLTE3LjE3ODI1NTk5IDMyLjA2NzA4NTIxIC0xOCAzMCBDLTE5LjkwMzM3ODEzIDI4LjYwODcxNTU2IC0xOS45MDMzNzgxMyAyOC42MDg3MTU1NiAtMjIuMjUgMjcuNTYyNSBDLTMxLjA3MTA4MzE3IDIyLjkxMzE3MTEzIC0zMS4wNzEwODMxNyAyMi45MTMxNzExMyAtMzIuNjYwMTU2MjUgMTcuOTI5Njg3NSBDLTMzLjUwOTcyNjg3IDEzLjA2MzIxNTAxIC0zMy4wODExMzgwMSA5LjYxMDg4NDM3IC0zMC4yOTI5Njg3NSA1LjUgQy0yMi4zNjg4Mzc3IC0zLjY5Mjk0OTYyIC0xMC42NjIyMzUzMyAtMi42NjU1NTg4MyAwIDAgWiAiIGZpbGw9IiMyMjM5ODUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Niw1NSkiLz4KPHBhdGggZD0iTTAgMCBDNC4yNTM4MDEzOCAxLjUxOTIxNDc4IDUuODUwNjA1NjkgNC4xMzEwOTAyNCA4IDggQzEwLjIxNjIxNjM0IDE0LjEzODE3MjIyIDExLjE3ODUwNDM3IDIwLjIzMzA3NjcgOC41NjI1IDI2LjM3NSBDNyAyOSA3IDI5IDYgMzAgQzMuNjM2NzE4NzUgMzAuMjk2ODc1IDMuNjM2NzE4NzUgMzAuMjk2ODc1IDEgMzAgQy0wLjczMDQ2ODc1IDI4LjM5MDYyNSAtMC43MzA0Njg3NSAyOC4zOTA2MjUgLTIuMTg3NSAyNi4yNSBDLTIuOTIwMzMyMDMgMjUuMjA1ODU5MzggLTIuOTIwMzMyMDMgMjUuMjA1ODU5MzggLTMuNjY3OTY4NzUgMjQuMTQwNjI1IEMtNC45MTMwODMwNCAyMi4xMzk2Nzg4OCAtNS45ODkwNDQ2MiAyMC4xMjczMTg0MyAtNyAxOCBDLTcuMTk5MTYwMTYgMTkuMjY0NTcwMzEgLTcuMTk5MTYwMTYgMTkuMjY0NTcwMzEgLTcuNDAyMzQzNzUgMjAuNTU0Njg3NSBDLTcuNTc4OTQ1MzEgMjEuNjUwMzkwNjIgLTcuNzU1NTQ2ODggMjIuNzQ2MDkzNzUgLTcuOTM3NSAyMy44NzUgQy04LjExMTUyMzQ0IDI0Ljk2NTU0Njg4IC04LjI4NTU0Njg4IDI2LjA1NjA5Mzc1IC04LjQ2NDg0Mzc1IDI3LjE3OTY4NzUgQy05IDMwIC05IDMwIC0xMCAzMiBDLTExLjg3NSAzMS43NSAtMTEuODc1IDMxLjc1IC0xNCAzMSBDLTE1LjI1IDI4LjkzNzUgLTE1LjI1IDI4LjkzNzUgLTE2IDI3IEMtMTYuNDMzMTI1IDI3LjQ3NDM3NSAtMTYuODY2MjUgMjcuOTQ4NzUgLTE3LjMxMjUgMjguNDM3NSBDLTIxLjI2ODUzMTg1IDMyLjEwMDQ5MjQ1IC0yNi43NTQ4NDI1IDMxLjMyNjM3NjY4IC0zMS44MjAzMTI1IDMxLjI4MTI1IEMtMzYuMjA3MDY0MDkgMzAuODkzMjMyNjYgLTM3LjkwMzMwOTI4IDMwLjA5NjY5MDcyIC00MSAyNyBDLTQyLjU2MjUgMjQuNSAtNDIuNTYyNSAyNC41IC00MyAyMiBDLTQxLjYyNSAxOS42ODc1IC00MS42MjUgMTkuNjg3NSAtNDAgMTggQy00MS4zMiAxNy4wMSAtNDIuNjQgMTYuMDIgLTQ0IDE1IEMtNDQgMTEuNzUgLTQ0IDExLjc1IC00MyA4IEMtMzcuODIzNzMwOTQgMy44MDUyMDc0OSAtMzIuMDE2MTEwNTQgMy40NTA1OTcyMiAtMjUuNjI1IDMuNjg3NSBDLTI0LjgxOTMzNTk0IDMuNjk3MTY3OTcgLTI0LjAxMzY3MTg4IDMuNzA2ODM1OTQgLTIzLjE4MzU5Mzc1IDMuNzE2Nzk2ODggQy0xNy4zNDEzMjczMSAzLjgyOTMzNjM1IC0xNy4zNDEzMjczMSAzLjgyOTMzNjM1IC0xNSA1IEMtMTUuMzEyNSA2LjkzNzUgLTE1LjMxMjUgNi45Mzc1IC0xNiA5IEMtMjAuMjg5NzAxMzQgMTAuNDI5OTAwNDUgLTI0LjU3MTM0MzI0IDEwLjQzODEyMTc2IC0yOS4wNjY0MDYyNSAxMC43MTg3NSBDLTMxLjkzMTY1NzQ2IDEwLjgxNTkwNjYxIC0zMS45MzE2NTc0NiAxMC44MTU5MDY2MSAtMzQgMTIgQy0zMy4wMzU3ODEyNSAxMi4xMDk1NzAzMSAtMzIuMDcxNTYyNSAxMi4yMTkxNDA2MiAtMzEuMDc4MTI1IDEyLjMzMjAzMTI1IEMtMjkuODE0ODQzNzUgMTIuNDkwNTg1OTQgLTI4LjU1MTU2MjUgMTIuNjQ5MTQwNjMgLTI3LjI1IDEyLjgxMjUgQy0yNS4zNzA1NDY4NyAxMy4wMzg3MzA0NyAtMjUuMzcwNTQ2ODcgMTMuMDM4NzMwNDcgLTIzLjQ1MzEyNSAxMy4yNjk1MzEyNSBDLTIwLjA1NDQ1OTUzIDEzLjk4ODQ3OTcxIC0xOC40MjUxMDM5MSAxNC41NjkwMDk5MSAtMTYgMTcgQy0xNS42NyAxNy45OSAtMTUuMzQgMTguOTggLTE1IDIwIEMtMTQuODc4ODI4MTMgMTkuMzI0NTMxMjUgLTE0Ljc1NzY1NjI1IDE4LjY0OTA2MjUgLTE0LjYzMjgxMjUgMTcuOTUzMTI1IEMtMTQuNDY1MjM0MzggMTcuMDYxMDkzNzUgLTE0LjI5NzY1NjI1IDE2LjE2OTA2MjUgLTE0LjEyNSAxNS4yNSBDLTEzLjk2MjU3ODEzIDE0LjM2ODI4MTI1IC0xMy44MDAxNTYyNSAxMy40ODY1NjI1IC0xMy42MzI4MTI1IDEyLjU3ODEyNSBDLTEzLjAzMjAzNzM2IDEwLjEzMDUyMjU2IC0xMi4yMjAwMjg4MyA4LjE5NDAwMTQzIC0xMSA2IEMtOC43Njk1MzEyNSA2LjEyMTA5Mzc1IC04Ljc2OTUzMTI1IDYuMTIxMDkzNzUgLTYgNyBDLTMuNzYxNzE4NzUgOS43MjI2NTYyNSAtMy43NjE3MTg3NSA5LjcyMjY1NjI1IC0xLjY4NzUgMTMuMDYyNSBDLTAuOTkwMTE3MTkgMTQuMTY3MjI2NTYgLTAuMjkyNzM0MzggMTUuMjcxOTUzMTIgMC40MjU3ODEyNSAxNi40MTAxNTYyNSBDMS4yMDUwMTk1MyAxNy42OTIxMjg5MSAxLjIwNTAxOTUzIDE3LjY5MjEyODkxIDIgMTkgQzEuODAwODM5ODQgMTcuODA1MDM5MDYgMS44MDA4Mzk4NCAxNy44MDUwMzkwNiAxLjU5NzY1NjI1IDE2LjU4NTkzNzUgQzEuMDY1MTA0MTcgMTMuMzkwNjI1IDAuNTMyNTUyMDggMTAuMTk1MzEyNSAwIDcgQy0wLjIwNzUzOTA2IDUuODk5MTQwNjMgLTAuNDE1MDc4MTMgNC43OTgyODEyNSAtMC42Mjg5MDYyNSAzLjY2NDA2MjUgQy0wLjc1MTM2NzE5IDIuNzg0OTIxODcgLTAuODczODI4MTMgMS45MDU3ODEyNSAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogTS0yOCAxOCBDLTI2LjE4Nzc3NDY2IDIwLjA2MjQ5OTQgLTI2LjE4Nzc3NDY2IDIwLjA2MjQ5OTQgLTI0IDIyIEMtMjMuMDEgMjIgLTIyLjAyIDIyIC0yMSAyMiBDLTIxLjMzIDIxLjAxIC0yMS42NiAyMC4wMiAtMjIgMTkgQy0yNC45NyAxOC41MDUgLTI0Ljk3IDE4LjUwNSAtMjggMTggWiBNLTM5IDIyIEMtMzkgMjIuNjYgLTM5IDIzLjMyIC0zOSAyNCBDLTM2LjAzIDI0LjMzIC0zMy4wNiAyNC42NiAtMzAgMjUgQy0zMi4zNTk2ODc0NCAyMi45MDI1MDAwNSAtMzMuNTQ2MTY5OTQgMjIuMDMwOTQyOTYgLTM2Ljc1IDIxLjgxMjUgQy0zNy40OTI1IDIxLjg3NDM3NSAtMzguMjM1IDIxLjkzNjI1IC0zOSAyMiBaICIgZmlsbD0iIzIyMUUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNjIwLDY3KSIvPgo8cGF0aCBkPSJNMCAwIEMyLjA1NDY4NzUgLTAuMTk5MjE4NzUgMi4wNTQ2ODc1IC0wLjE5OTIxODc1IDUuODY3MTg3NSAwLjM2MzI4MTI1IEM4LjI4Mjg5NDcyIDIuNDI4NzM2NjggMTAuMDk2NDE2NDkgNC43MzM5NTQ2IDExLjg2NzE4NzUgNy4zNjMyODEyNSBDMTIuMTQ5NDkyMTkgNi44NDYzNjcxOSAxMi40MzE3OTY4NyA2LjMyOTQ1MzEzIDEyLjcyMjY1NjI1IDUuNzk2ODc1IEMxNC4yNzE2ODgxMyAzLjQ3NTU5ODQ4IDE1LjU3MTg3NDIgMS45NzEyNTAyOCAxNy44NjcxODc1IDAuMzYzMjgxMjUgQzI2LjQ3NDM3MzUgLTAuNzg0MzQzNTUgMzQuOTQxNzAyNzcgMi4yOTMwNDg0MyA0Mi44NjcxODc1IDUuMzYzMjgxMjUgQzQxLjE2MTc1MzAxIDkuMTA0MjM0MzIgMzkuMjkzODYwOCAxMS4wMjMxMTQxMiAzNS44NjcxODc1IDEzLjM2MzI4MTI1IEMzNC44NzcxODc1IDEzLjM2MzI4MTI1IDMzLjg4NzE4NzUgMTMuMzYzMjgxMjUgMzIuODY3MTg3NSAxMy4zNjMyODEyNSBDMzIuMjA3MTg3NSAxMi4zNzMyODEyNSAzMS41NDcxODc1IDExLjM4MzI4MTI1IDMwLjg2NzE4NzUgMTAuMzYzMjgxMjUgQzI4LjY3MjY0MDY5IDkuNzgzMzQ0MjYgMjguNjcyNjQwNjkgOS43ODMzNDQyNiAyNi4yNDIxODc1IDkuNjc1NzgxMjUgQzI1LjQyNDkyMTg4IDkuNjEwMDM5MDYgMjQuNjA3NjU2MjUgOS41NDQyOTY4OCAyMy43NjU2MjUgOS40NzY1NjI1IEMyMi44MjU4OTg0NCA5LjQyMDQ4ODI4IDIyLjgyNTg5ODQ0IDkuNDIwNDg4MjggMjEuODY3MTg3NSA5LjM2MzI4MTI1IEMyMS43NTg4NzYwNCA5Ljk5OTk5MjUyIDIxLjY1MDU2NDU4IDEwLjYzNjcwMzggMjEuNTM4OTcwOTUgMTEuMjkyNzA5MzUgQzIwLjQxMzg1NTQzIDE3Ljg5NjI5MTI1IDE5LjI3NjQ4MDM1IDI0LjQ5NzY3NjE0IDE4LjEzMTgzNTk0IDMxLjA5NzkwMDM5IEMxNy43MDU4MDczNiAzMy41NjQxNTA1NiAxNy4yODI5NDkwNyAzNi4wMzA5NTA1MSAxNi44NjMyODEyNSAzOC40OTgyOTEwMiBDMTYuMjYwODYwODcgNDIuMDM2ODAwMzYgMTUuNjQ3MjEwNTMgNDUuNTczMjAwOSAxNS4wMzEyNSA0OS4xMDkzNzUgQzE0Ljg0NDcwODU2IDUwLjIxOTc3NjQ2IDE0LjY1ODE2NzExIDUxLjMzMDE3NzkyIDE0LjQ2NTk3MjkgNTIuNDc0MjI3OTEgQzE0LjI4NTkzNzE5IDUzLjQ5NTIxMDcyIDE0LjEwNTkwMTQ5IDU0LjUxNjE5MzU0IDEzLjkyMDQxMDE2IDU1LjU2ODExNTIzIEMxMy42ODcyNDU5NCA1Ni45MjM3OTg2IDEzLjY4NzI0NTk0IDU2LjkyMzc5ODYgMTMuNDQ5MzcxMzQgNTguMzA2ODY5NTEgQzEzLjI1NzI1MDY3IDU4Ljk4NTQ4NTM4IDEzLjA2NTEzIDU5LjY2NDEwMTI2IDEyLjg2NzE4NzUgNjAuMzYzMjgxMjUgQzExLjg3NzE4NzUgNjAuODU4MjgxMjUgMTEuODc3MTg3NSA2MC44NTgyODEyNSAxMC44NjcxODc1IDYxLjM2MzI4MTI1IEM5LjU4MDQ1Mjg0IDU0LjQ1OTA5MjQzIDguMjk5Mjc3MDIgNDcuNTUzODg4ODYgNy4wMjE5NzI2NiA0MC42NDc5NDkyMiBDNi41ODY3MzE3NyAzOC4yOTg0Mjc0MSA2LjE1MDIxNTc5IDM1Ljk0OTE0MTQ1IDUuNzEyNDAyMzQgMzMuNjAwMDk3NjYgQzUuMDgzNTYyMzcgMzAuMjI0ODk1MzcgNC40NTkzMDI5NCAyNi44NDg4NzMzNSAzLjgzNTkzNzUgMjMuNDcyNjU2MjUgQzMuNTQwNjQxNDggMjEuODk1OTAxMTggMy41NDA2NDE0OCAyMS44OTU5MDExOCAzLjIzOTM3OTg4IDIwLjI4NzI5MjQ4IEMzLjA1OTE5MzEyIDE5LjMwNjU3Nzc2IDIuODc5MDA2MzUgMTguMzI1ODYzMDQgMi42OTMzNTkzOCAxNy4zMTU0Mjk2OSBDMi41MzM0NzUzNCAxNi40NTM4MzI0IDIuMzczNTkxMzEgMTUuNTkyMjM1MTEgMi4yMDg4NjIzIDE0LjcwNDUyODgxIEMxLjg2NzE4NzUgMTIuMzYzMjgxMjUgMS44NjcxODc1IDEyLjM2MzI4MTI1IDEuODY3MTg3NSA4LjM2MzI4MTI1IEMtMS43NjI4MTI1IDkuMDIzMjgxMjUgLTUuMzkyODEyNSA5LjY4MzI4MTI1IC05LjEzMjgxMjUgMTAuMzYzMjgxMjUgQy05LjQ2MjgxMjUgMTEuMzUzMjgxMjUgLTkuNzkyODEyNSAxMi4zNDMyODEyNSAtMTAuMTMyODEyNSAxMy4zNjMyODEyNSBDLTE1LjA4OTc3ODMxIDEyLjEyNDAzOTggLTE3LjI0OTM5NzE2IDEwLjU3NzUwMzY3IC0yMC4xMzI4MTI1IDYuMzYzMjgxMjUgQy0xMy40NzU0Nzc3IDMuMTIxMTc0OTQgLTcuMjY2ODA3MzkgMS4yMzc3NTI5MSAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3NzUuMTMyODEyNSwzNS42MzY3MTg3NSkiLz4KPHBhdGggZD0iTTAgMCBDOC41OCAwIDE3LjE2IDAgMjYgMCBDMjYgMy4zIDI2IDYuNiAyNiAxMCBDMjAuNzIgMTAgMTUuNDQgMTAgMTAgMTAgQzEwIDEzLjYzIDEwIDE3LjI2IDEwIDIxIEMxMy45NiAyMSAxNy45MiAyMSAyMiAyMSBDMjIgMjQuMyAyMiAyNy42IDIyIDMxIEMxOC4wNCAzMSAxNC4wOCAzMSAxMCAzMSBDMTAgMzUuMjkgMTAgMzkuNTggMTAgNDQgQzE3LjkyIDQzLjUwNSAxNy45MiA0My41MDUgMjYgNDMgQzI2IDQ2LjMgMjYgNDkuNiAyNiA1MyBDMjIuODY0NjI0MDIgNTQuMDQ1MTI1MzMgMjAuMjI4NTQ5MDIgNTQuMzE1Mzc3MTMgMTYuOTM3NSA1NC41NjI1IEMxNS44NzQwMjM0NCA1NC42NDYyODkwNiAxNC44MTA1NDY4OCA1NC43MzAwNzgxMyAxMy43MTQ4NDM3NSA1NC44MTY0MDYyNSBDOS4xNDgzOTI5NSA1NS4wNDIwODc4NCA0LjU3MjAyNDE4IDU1IDAgNTUgQzAgMzYuODUgMCAxOC43IDAgMCBaICIgZmlsbD0iI0Q4MUUyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAzNSw1MikiLz4KPHBhdGggZD0iTTAgMCBDMS45MTAxNTYyNSAwLjgyMDMxMjUgMS45MTAxNTYyNSAwLjgyMDMxMjUgNC41MzUxNTYyNSAyLjMyMDMxMjUgQzQuNTM1MTU2MjUgNC45NjAzMTI1IDQuNTM1MTU2MjUgNy42MDAzMTI1IDQuNTM1MTU2MjUgMTAuMzIwMzEyNSBDMS43NzIzOTQ0OCA5Ljc5NzYyNzg0IC0wLjc5MDkzMTM1IDkuMjExNjE2NjMgLTMuNDY0ODQzNzUgOC4zMjAzMTI1IEMtNS4wMjYwMjgwMyA4LjI1MjkwMzg1IC02LjU4OTg2ODk1IDguMjM1MTY3OTQgLTguMTUyMzQzNzUgOC4yNTc4MTI1IEMtOC45NjA1ODU5NCA4LjI2NjgzNTk0IC05Ljc2ODgyODEzIDguMjc1ODU5MzcgLTEwLjYwMTU2MjUgOC4yODUxNTYyNSBDLTExLjIxNjQ0NTMxIDguMjk2NzU3ODEgLTExLjgzMTMyODEzIDguMzA4MzU5MzggLTEyLjQ2NDg0Mzc1IDguMzIwMzEyNSBDLTEyLjc5NDg0Mzc1IDkuMzEwMzEyNSAtMTMuMTI0ODQzNzUgMTAuMzAwMzEyNSAtMTMuNDY0ODQzNzUgMTEuMzIwMzEyNSBDLTEyLjU4NDQxNDA2IDExLjcwNzAzMTI1IC0xMS43MDM5ODQzNyAxMi4wOTM3NSAtMTAuNzk2ODc1IDEyLjQ5MjE4NzUgQy05LjYzNTQyOTY5IDEzLjAxMjk2ODc1IC04LjQ3Mzk4NDM4IDEzLjUzMzc1IC03LjI3NzM0Mzc1IDE0LjA3MDMxMjUgQy01LjU1NDUxMTcyIDE0LjgzNjAxNTYzIC01LjU1NDUxMTcyIDE0LjgzNjAxNTYzIC0zLjc5Njg3NSAxNS42MTcxODc1IEMwLjI0MTM3MzEyIDE3LjY4MTI4NjE5IDMuNTY0NTg1NyAxOS42ODc5ODkzIDUuOTEwMTU2MjUgMjMuNjMyODEyNSBDNi45OTYzOTk0NiAyOC4zMDM2NTgzIDYuMzE4NTczOSAzMS44ODQwNDY4MSA0LjAzNTE1NjI1IDM2LjA3MDMxMjUgQy0wLjE5NDIwMDc5IDM5Ljg3NjczMzg0IC00LjYxMjE4MDA4IDQxLjI1NzA5NTU4IC0xMC4yODUxNTYyNSA0MS4zODI4MTI1IEMtMTUuNjc4ODQ0MzEgNDEuMDMwMDkxNzUgLTE5Ljg2NjQ0MTQ4IDQwLjE3ODc3ODc4IC0yNC40NjQ4NDM3NSAzNy4zMjAzMTI1IEMtMjQuNDY0ODQzNzUgMzQuMDIwMzEyNSAtMjQuNDY0ODQzNzUgMzAuNzIwMzEyNSAtMjQuNDY0ODQzNzUgMjcuMzIwMzEyNSBDLTIzLjE2NTQ2ODc1IDI3Ljk4MDMxMjUgLTIxLjg2NjA5Mzc1IDI4LjY0MDMxMjUgLTIwLjUyNzM0Mzc1IDI5LjMyMDMxMjUgQy0xNS41OTQwNTE2OSAzMS41NDQyMDkyNCAtMTEuODI1MTI2MDMgMzEuNjYwNjQ3ODggLTYuNDY0ODQzNzUgMzEuMzIwMzEyNSBDLTYuNDY0ODQzNzUgMzAuMDAwMzEyNSAtNi40NjQ4NDM3NSAyOC42ODAzMTI1IC02LjQ2NDg0Mzc1IDI3LjMyMDMxMjUgQy03LjQxNzQ2MDk0IDI2Ljk1Njc5Njg3IC04LjM3MDA3ODEyIDI2LjU5MzI4MTI1IC05LjM1MTU2MjUgMjYuMjE4NzUgQy0yMi40OTU3MTQwNSAyMS4wMzAxNzczIC0yMi40OTU3MTQwNSAyMS4wMzAxNzczIC0yNS40NjQ4NDM3NSAxNS4zMjAzMTI1IEMtMjYuMjE3MDIwNTkgMTEuNDI4OTQ4NjQgLTI1LjgyMjM5NTM5IDguMjE0MTkxNTkgLTI0LjMzOTg0Mzc1IDQuNTA3ODEyNSBDLTE4LjQ5MTUxODczIC0yLjMxNTIzMzM1IC04LjEzNzk4MzIgLTIuMjQ0MDcxNDQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTY5LjQ2NDg0Mzc1LDQwLjY3OTY4NzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzguOTEgMCAxNy44MiAwIDI3IDAgQzI3IDMuMyAyNyA2LjYgMjcgMTAgQzIxLjM5IDEwIDE1Ljc4IDEwIDEwIDEwIEMxMCAxMy42MyAxMCAxNy4yNiAxMCAyMSBDMTQuMjkgMjEgMTguNTggMjEgMjMgMjEgQzIzIDI0LjMgMjMgMjcuNiAyMyAzMSBDMTguNzEgMzEgMTQuNDIgMzEgMTAgMzEgQzEwIDM3LjkzIDEwIDQ0Ljg2IDEwIDUyIEM2LjcgNTIgMy40IDUyIDAgNTIgQzAgMzQuODQgMCAxNy42OCAwIDAgWiAiIGZpbGw9IiNEODFFMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMDEsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuOTcgMCA1Ljk0IDAgOSAwIEM5IDEzLjUzIDkgMjcuMDYgOSA0MSBDNS4zNyA0MSAxLjc0IDQxIC0yIDQxIEMtMy4yMTY4NzUgNDEuMjQ3NSAtNC40MzM3NSA0MS40OTUgLTUuNjg3NSA0MS43NSBDLTEwLjMxMDAyNjQxIDQyLjA5ODg2OTkyIC0xMy4zMDg5OTE4NSA0MC43MzUwMDM3OSAtMTcgMzggQy0yMC42ODY4MTg5NSAzMy4xNjEwNTAxMyAtMjAuNjk0NzYzNjEgMjcuODUzMTQ1NTEgLTIwIDIyIEMtMTguNzI2MDcyMzggMTguMzEyMzE0NzcgLTE3Ljc0NDY5MDYyIDE2LjU4MzY3NjQzIC0xNC42ODc1IDE0LjE4NzUgQy05LjYzMTE5NDU5IDExLjk1MzMxODU0IC02LjQ1NjIyNjA3IDExLjkwODc1NDc5IC0xIDEzIEMtMC42NyA4LjcxIC0wLjM0IDQuNDIgMCAwIFogTS05LjQzNzUgMjEuMDYyNSBDLTExLjI1OTI1OTU5IDI0LjQ4NzQwODAyIC0xMS42MzY3NDE4MyAyNi4xNzk1NDkgLTExIDMwIEMtOS40NTY2NDk3MSAzMi45NTA0NzU1MyAtOS40NTY2NDk3MSAzMi45NTA0NzU1MyAtNyAzNSBDLTQuNDE0MTc4NzIgMzUuNTg0MDIxMzMgLTQuNDE0MTc4NzIgMzUuNTg0MDIxMzMgLTIgMzUgQzAuMzI4NjYyMjkgMzMuMTExNTM4MTcgMC4zMjg2NjIyOSAzMy4xMTE1MzgxNyAwLjE5NTMxMjUgMjkuOTYwOTM3NSBDMC4xNzIxMDkzOCAyOC43Nzc1NzgxMiAwLjE0ODkwNjI1IDI3LjU5NDIxODc1IDAuMTI1IDI2LjM3NSBDMC4xMDY5NTMxMyAyNS4xODY0ODQzNyAwLjA4ODkwNjI1IDIzLjk5Nzk2ODc1IDAuMDcwMzEyNSAyMi43NzM0Mzc1IEMwLjA0NzEwOTM4IDIxLjg1ODIwMzEzIDAuMDIzOTA2MjUgMjAuOTQyOTY4NzUgMCAyMCBDLTUuMTAxNDUzNyAxOC41Nzg2MzU2MiAtNS4xMDE0NTM3IDE4LjU3ODYzNTYyIC05LjQzNzUgMjEuMDYyNSBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEzMSw0MCkiLz4KPHBhdGggZD0iTTAgMCBDOS45IDAgMTkuOCAwIDMwIDAgQzMwIDMuMyAzMCA2LjYgMzAgMTAgQzI2LjcgMTAgMjMuNCAxMCAyMCAxMCBDMjAgMjMuODYgMjAgMzcuNzIgMjAgNTIgQzE1LjA1IDUyLjQ5NSAxNS4wNSA1Mi40OTUgMTAgNTMgQzEwIDM4LjgxIDEwIDI0LjYyIDEwIDEwIEM2LjcgMTAgMy40IDEwIDAgMTAgQzAgNi43IDAgMy40IDAgMCBaICIgZmlsbD0iI0Q4MUUyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTA2Niw1MikiLz4KPHBhdGggZD0iTTAgMCBDLTAuNDgxMTQ5MSA1Ljc3Mzc4OTI1IC0yLjE4NDY3MTgxIDkuOTU4NTk4MzYgLTUgMTUgQy00LjMxOTM3NSAxNC4yOTg3NSAtMy42Mzg3NSAxMy41OTc1IC0yLjkzNzUgMTIuODc1IEMtMS45NjMyMDUxNCAxMS45MTE3MTQxMyAtMC45ODM1MTk0NiAxMC45NTM4NjU2MSAwIDEwIEMwLjU1NDI5Njg3IDkuNDYxMTcxODggMS4xMDg1OTM3NSA4LjkyMjM0Mzc1IDEuNjc5Njg3NSA4LjM2NzE4NzUgQzUuMjUwOTM2OCA1LjA4MTYzODE0IDcuODk2NjgzMzIgMi44ODQwMTU1MyAxMyAzIEMxNS4wMDY0OTYwNyA0LjUzNjM3NTAxIDE1Ljg3Mzg5MDQ5IDUuNTg4MTQ4NyAxNi42MTcxODc1IDguMDE1NjI1IEMxNy4yNTE1NjExIDEzLjUxMzUyOTUzIDE2Ljg0OTMwMTA3IDE3LjA2MTIxMTQ3IDE0IDIyIEMxMS4wNTUwNzk0MyAyNS40MDk5MDgwMyA4LjEyMTcwMjE1IDI4LjEzNTQyMDQ2IDQgMzAgQzEuNjY3MTQ1MiAzMC4wNDcyNTM5OSAtMC42NjcyNDM5MyAzMC4wNTE4OTk3MyAtMyAzMCBDLTMuMjY1NTQ2ODggMzEuMDczNzg5MDYgLTMuNTMxMDkzNzUgMzIuMTQ3NTc4MTIgLTMuODA0Njg3NSAzMy4yNTM5MDYyNSBDLTQuMTYxMzk0MjEgMzQuNjkwMTIwMSAtNC41MTgxNjg2NiAzNi4xMjYzMTcxMiAtNC44NzUgMzcuNTYyNSBDLTUuMDQ5MDIzNDQgMzguMjY2OTcyNjYgLTUuMjIzMDQ2ODggMzguOTcxNDQ1MzEgLTUuNDAyMzQzNzUgMzkuNjk3MjY1NjIgQy02LjUxMjk0ODE1IDQ0LjE2MDI0OTk4IC03LjcxMjAxMjE2IDQ4LjU4NDg3MDUyIC05IDUzIEMtMTMuODc1IDUxLjI1IC0xMy44NzUgNTEuMjUgLTE1IDQ5IEMtMTUuODA3NzM2NjkgNDEuNjExMTk1NTcgLTE0LjQ0MzM4Mzc0IDM1LjkyMzE3NjkzIC0xMS44NzEwOTM3NSAyOS4wNDI5Njg3NSBDLTEwLjkzNjk5MDk5IDI1Ljc3OTg5MjMxIC0xMC44OTM4OTA4MiAyMy4yNTE1MDY5MSAtMTEuMDYyNSAxOS44NzUgQy0xMS4zNDcwMDEzMyAxMi4zOTk0ODI0MiAtOC41MjkxMDMxNSA3LjAzNDkyMzc4IC0zLjgxMjUgMS4zNzUgQy0yIDAgLTIgMCAwIDAgWiBNMTAgMTAgQzcuOTU1NDM5NDEgMTIuMTcyNjQ2NTUgNy45NTU0Mzk0MSAxMi4xNzI2NDY1NSA1Ljg3NSAxNC44NzUgQzUuMTUwNTQ2ODggMTUuNzc5OTIxODcgNC40MjYwOTM3NSAxNi42ODQ4NDM3NSAzLjY3OTY4NzUgMTcuNjE3MTg3NSBDMS44MDc5NDc2NiAxOS43ODY1NTgxMSAxLjgwNzk0NzY2IDE5Ljc4NjU1ODExIDIgMjIgQzYuMDE1MzA1MDUgMjEuMDg3NDMwNjcgNy43MTEyODI3NSAyMC4zNDk0OTk4MyAxMC4zNzUgMTcuMTI1IEMxMi4zMDc1Njg0OSAxMy45OTU1NjM5MiAxMi4zMDc1Njg0OSAxMy45OTU1NjM5MiAxMiAxMCBDMTEuMzQgMTAgMTAuNjggMTAgMTAgMTAgWiAiIGZpbGw9IiMyMjFFMjAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDY2NSw3MCkiLz4KPHBhdGggZD0iTTAgMCBDMy4zIDAgNi42IDAgMTAgMCBDMTAgMTQuMTkgMTAgMjguMzggMTAgNDMgQzEzLjk2IDQzIDE3LjkyIDQzIDIyIDQzIEMyMy4zMiA0My4zMyAyNC42NCA0My42NiAyNiA0NCBDMjYgNDcuMyAyNiA1MC42IDI2IDU0IEMxMy4xMyA1My41MDUgMTMuMTMgNTMuNTA1IDAgNTMgQzAgMzUuNTEgMCAxOC4wMiAwIDAgWiAiIGZpbGw9IiNEODFFMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExMzMsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMyAwIDYuNiAwIDEwIDAgQzEwLjMzIDQuNjIgMTAuNjYgOS4yNCAxMSAxNCBDMTIuNTQ2ODc1IDEzLjQ0MzEyNSAxMi41NDY4NzUgMTMuNDQzMTI1IDE0LjEyNSAxMi44NzUgQzE4LjM5OTA1MzgzIDExLjkwOTg5MTA3IDIwLjEwMjI4MDU4IDEyLjEzOTcyNDgyIDI0IDE0IEMyNS45NTA0Njk0MiAxNS42MTQxODE1OSAyNi44NzAxODY5MyAxNi43NDAzNzM4NiAyOCAxOSBDMjguMDcxODE4MjEgMjEuNzE3NjAxMDggMjguMDkyOTk1MDYgMjQuNDA4NTkzODggMjguMDYyNSAyNy4xMjUgQzI4LjA1Nzk4ODI4IDI3Ljg3OTEwMTU2IDI4LjA1MzQ3NjU2IDI4LjYzMzIwMzEyIDI4LjA0ODgyODEyIDI5LjQxMDE1NjI1IEMyOC4wMzcwMzQ5OSAzMS4yNzM0NzEyNyAyOC4wMTkwOTk0MiAzMy4xMzY3NDU1NSAyOCAzNSBDMjMuNTQ1IDM1LjQ5NSAyMy41NDUgMzUuNDk1IDE5IDM2IEMxOC45Mzk0MTQwNiAzNS4wODQ3NjU2MyAxOC44Nzg4MjgxMiAzNC4xNjk1MzEyNSAxOC44MTY0MDYyNSAzMy4yMjY1NjI1IEMxOC43MzI2MTcxOSAzMi4wMzgwNDY4NyAxOC42NDg4MjgxMiAzMC44NDk1MzEyNSAxOC41NjI1IDI5LjYyNSBDMTguNDgxMjg5MDYgMjguNDQxNjQwNjMgMTguNDAwMDc4MTIgMjcuMjU4MjgxMjUgMTguMzE2NDA2MjUgMjYuMDM5MDYyNSBDMTguMTg5MTUwNjQgMjMuMDg0ODEwOTkgMTguMTg5MTUwNjQgMjMuMDg0ODEwOTkgMTcgMjEgQzE1LjMzMzg4MDk1IDIwLjk1NzI3OSAxMy42NjYxNzExNSAyMC45NTkzNjE2OCAxMiAyMSBDMTAuNDUwNDk3MzIgMjIuNTQ5NTAyNjggMTAuNzgzNDQ4MDcgMjQuMDk5OTA1OTQgMTAuNjgzNTkzNzUgMjYuMjUzOTA2MjUgQzEwLjY0MTY5OTIyIDI3LjEwNzkxMDE2IDEwLjU5OTgwNDY5IDI3Ljk2MTkxNDA2IDEwLjU1NjY0MDYyIDI4Ljg0MTc5Njg4IEMxMC41MTczMjQyMiAyOS43Mzk2Mjg5MSAxMC40NzgwMDc4MSAzMC42Mzc0NjA5NCAxMC40Mzc1IDMxLjU2MjUgQzEwLjM5NDMxNjQxIDMyLjQ2NDE5OTIyIDEwLjM1MTEzMjgxIDMzLjM2NTg5ODQ0IDEwLjMwNjY0MDYyIDM0LjI5NDkyMTg4IEMxMC4yMDAyMjAxNiAzNi41Mjk3NTE1NiAxMC4wOTk1NzUxOSAzOC43NjQ4NTQ4NiAxMCA0MSBDNi43IDQxIDMuNCA0MSAwIDQxIEMwIDI3LjQ3IDAgMTMuOTQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDA1LDQwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzkuOTk1NDE0NiAxNi4wODQxMjA5OCA2Ljc1MDQyOTQ2IDMyLjA3MjY0NDI3IDMgNDggQy0xLjI5IDQ4IC01LjU4IDQ4IC0xMCA0OCBDLTkuMzUyMDc5OTYgNDIuMjQzMTY0OTggLTguMzkyNDE1OTEgMzYuNjQxMDIxMyAtNy4xODc1IDMwLjk3NjU2MjUgQy03LjAxMzcxODI2IDMwLjE0OTE3NTcyIC02LjgzOTkzNjUyIDI5LjMyMTc4ODk0IC02LjY2MDg4ODY3IDI4LjQ2OTMyOTgzIEMtNi4yOTYwMjY4NiAyNi43MzYyMTU3NCAtNS45Mjk1NTA3IDI1LjAwMzQ0MDc3IC01LjU2MTUyMzQ0IDIzLjI3MDk5NjA5IEMtNC45OTczNjgxOSAyMC42MTI1OTg0NyAtNC40Mzk3NTU1NCAxNy45NTI4ODU2NSAtMy44ODI4MTI1IDE1LjI5Mjk2ODc1IEMtMy41MjY0Mjg0MSAxMy42MDQwODUwMSAtMy4xNjk2NzA5OSAxMS45MTUyOCAtMi44MTI1IDEwLjIyNjU2MjUgQy0yLjY0NTgwODExIDkuNDMwNzc3ODkgLTIuNDc5MTE2MjEgOC42MzQ5OTMyOSAtMi4zMDczNzMwNSA3LjgxNTA5Mzk5IEMtMS4xMTUxOTMxMyAyLjIzMDM4NjI2IC0xLjExNTE5MzEzIDIuMjMwMzg2MjYgMCAwIFogIiBmaWxsPSIjMjIzMTc1IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg5OCw1NCkiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjc1NDE0MjM1IDIyLjQ5MDU2OTM3IC0wLjI2NzY1MDE5IDI1LjU4MjA3Mjg1IC00IDMxIEMtMy45Mjc0OTIxNCAzNC41NTI4ODQ5NCAtMy4zMTc3NDE2NCAzNi40OTE2MTMzNyAtMS40Mzc1IDM5LjUgQzAuNDMyMjMyNTQgNDIuNzUxNzA4NzYgMC40OTI4MjA0OCA0NC4yNjg2NDQ5NCAwIDQ4IEMtMS4xNzkwNDA1IDUxLjQwNDQxNTYzIC0yLjU0MTk2MzU0IDU0LjcwNjM5OTc4IC00IDU4IEMtMTMuMDQyMzMyOTIgNTUuOTEzMzA3NzkgLTE5LjIzMTExMzk5IDQ5LjIyNDI2NTc5IC0yNC42ODc1IDQyLjExMzI4MTI1IEMtMjUuOTc2NzY1MDIgNDAuMDM3NDExMDkgLTI2LjU2ODUwMjU3IDM4LjM4OTQxNzA0IC0yNyAzNiBDLTIyLjM3NSAzMyAtMjIuMzc1IDMzIC0xOSAzMyBDLTE5IDMzLjk5IC0xOSAzNC45OCAtMTkgMzYgQy0xNi4wMjk4MjMwNiAzNS4zNzE4OTgyNyAtMTYuMDI5ODIzMDYgMzUuMzcxODk4MjcgLTEzIDM0IEMtMTEuODAxNjE3OTEgMzEuNjcxNDU1MzcgLTExLjgwMTYxNzkxIDMxLjY3MTQ1NTM3IC0xMSAyOSBDLTEwLjMyMzI0MjE5IDI4LjI5NDg4MjgxIC05LjY0NjQ4NDM4IDI3LjU4OTc2NTYyIC04Ljk0OTIxODc1IDI2Ljg2MzI4MTI1IEMtNi4yODY2NTkzNyAyMi45NTIxNDY5MyAtNi42NDc5NDA5OCAyMC4wOTMyNzg3OCAtNi45Mzc1IDE1LjUgQy03LjQ2Nzc4NzQgNi4zMzQ3MzQyNSAtNy40Njc3ODc0IDYuMzM0NzM0MjUgLTQgMiBDLTEuODEyNSAwLjY4NzUgLTEuODEyNSAwLjY4NzUgMCAwIFogIiBmaWxsPSIjMTg3MjRFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjIyNzM1OTE0IDUuMDI2MTMzNCA0LjM0Mzc1IDYuNjc1NjQ0OTEgNC4zNDM3NSAxMy41OTc2NTYyNSBDLTEuOTI2MjUgMTMuNTk3NjU2MjUgLTguMTk2MjUgMTMuNTk3NjU2MjUgLTE0LjY1NjI1IDEzLjU5NzY1NjI1IEMtMTIuMzAwNDg3NzkgMTguNzcwMzg3NjYgLTEyLjMwMDQ4Nzc5IDE4Ljc3MDM4NzY2IC04LjUzMTI1IDE5LjU5NzY1NjI1IEMtMy43NTI5OTc1NyAxOS41OTc2NTYyNSAtMC4wNTEzNDIxNSAxOC4zNjE2NzI4MyA0LjM0Mzc1IDE2LjU5NzY1NjI1IEM0LjY1NjI1IDE5LjQxMDE1NjI1IDQuNjU2MjUgMTkuNDEwMTU2MjUgNC4zNDM3NSAyMi41OTc2NTYyNSBDMC45MDEyMjIwNSAyNS45MjU0MzMyNyAtMy40MTQ1NjU0OCAyNi4zMjk5Njg0IC04LjAyMzQzNzUgMjYuNjYwMTU2MjUgQy0xMy42ODcyNjY0IDI2LjUyNTcwMzM0IC0xOC4xMzQxNTE4MiAyNS4xMTk3NTQ0MyAtMjIuMTU2MjUgMjEuMDk3NjU2MjUgQy0yNC43NzM1ODM1MyAxNi43MzU0MzM3IC0yNS4zMTY1NTAzOCAxMi41OTU3NjMyOCAtMjQuNjU2MjUgNy41OTc2NTYyNSBDLTIzLjI5NDg1NjcgMy44NjEyMjM1NSAtMjEuNDAxMzMxNDIgMS4xNzA3OTU4IC0xOC4yMTg3NSAtMS4yNzczNDM3NSBDLTEyLjMxODQ0Njg5IC0zLjg2NzcyMDcyIC01LjI1NTA1Mjk0IC00LjQ0OTQ0MzQxIDAgMCBaIE0tMTMuNjU2MjUgNC41OTc2NTYyNSBDLTEzLjk4NjI1IDUuOTE3NjU2MjUgLTE0LjMxNjI1IDcuMjM3NjU2MjUgLTE0LjY1NjI1IDguNTk3NjU2MjUgQy0xMS4wMjYyNSA4LjU5NzY1NjI1IC03LjM5NjI1IDguNTk3NjU2MjUgLTMuNjU2MjUgOC41OTc2NTYyNSBDLTQuOTgzMjM1NTkgMy42NzQ2NDYzMyAtNC45ODMyMzU1OSAzLjY3NDY0NjMzIC03LjUzMTI1IDIuNjYwMTU2MjUgQy0xMC4yMTA5NzMzNSAyLjU4MTM0MDg2IC0xMS40ODU2NTkxNSAzLjAyNTg0OTA4IC0xMy42NTYyNSA0LjU5NzY1NjI1IFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDkxLjY1NjI1LDU1LjQwMjM0Mzc1KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjUyMDkwNTk1IDQuNTExMTYwNzUgMyA2LjQxMTcwNDg5IDMgMTIuNTYyNSBDLTMuMjcgMTIuNTYyNSAtOS41NCAxMi41NjI1IC0xNiAxMi41NjI1IEMtMTMuNjQ0MjM3NzkgMTcuNzM1MjMxNDEgLTEzLjY0NDIzNzc5IDE3LjczNTIzMTQxIC05Ljg3NSAxOC41NjI1IEMtNS4wOTY3NDc1NyAxOC41NjI1IC0xLjM5NTA5MjE1IDE3LjMyNjUxNjU4IDMgMTUuNTYyNSBDMy4zMTI1IDE4LjM3NSAzLjMxMjUgMTguMzc1IDMgMjEuNTYyNSBDLTAuNDQyNTI3OTUgMjQuODkwMjc3MDIgLTQuNzU4MzE1NDggMjUuMjk0ODEyMTUgLTkuMzY3MTg3NSAyNS42MjUgQy0xNS4wMzEwMTY0IDI1LjQ5MDU0NzA5IC0xOS40Nzc5MDE4MiAyNC4wODQ1OTgxOCAtMjMuNSAyMC4wNjI1IEMtMjYuMTE3MzMzNTMgMTUuNzAwMjc3NDUgLTI2LjY2MDMwMDM4IDExLjU2MDYwNzAzIC0yNiA2LjU2MjUgQy0yNC42Mzg2MDY3IDIuODI2MDY3MyAtMjIuNzQ1MDgxNDIgMC4xMzU2Mzk1NSAtMTkuNTYyNSAtMi4zMTI1IEMtMTIuNjA1NTU1NjYgLTUuMzY2NzY4MjUgLTUuOTgyNDU3MiAtNC44NjA3NDY0OCAwIDAgWiBNLTE1IDMuNTYyNSBDLTE1LjMzIDQuODgyNSAtMTUuNjYgNi4yMDI1IC0xNiA3LjU2MjUgQy0xMi4zNyA3LjU2MjUgLTguNzQgNy41NjI1IC01IDcuNTYyNSBDLTYuMzI2OTg1NTkgMi42Mzk0OTAwOCAtNi4zMjY5ODU1OSAyLjYzOTQ5MDA4IC04Ljg3NSAxLjYyNSBDLTExLjU1NDcyMzM1IDEuNTQ2MTg0NjEgLTEyLjgyOTQwOTE1IDEuOTkwNjkyODMgLTE1IDMuNTYyNSBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE2OSw1Ni40Mzc1KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjMgMCA2LjYgMCAxMCAwIEMxMCAxOC4xNSAxMCAzNi4zIDEwIDU1IEM3LjAzIDU1IDQuMDYgNTUgMSA1NSBDMCA1NCAwIDU0IC0wLjEyMDI1NDUyIDUxLjgyOTY5NjY2IEMtMC4xMTgwMzM5MSA1MC44NzI2MTMwNyAtMC4xMTU4MTMyOSA0OS45MTU1Mjk0OCAtMC4xMTM1MjUzOSA0OC45Mjk0NDMzNiBDLTAuMTEzNDQ5ODYgNDcuODQ4Mzk4MjggLTAuMTEzMzc0MzMgNDYuNzY3MzUzMjEgLTAuMTEzMjk2NTEgNDUuNjUzNTQ5MTkgQy0wLjEwODEzNTIyIDQ0LjQ3NzUyNjQgLTAuMTAyOTczOTQgNDMuMzAxNTAzNiAtMC4wOTc2NTYyNSA0Mi4wODk4NDM3NSBDLTAuMDk2MjQxMyA0MC44OTI2NzIyNyAtMC4wOTQ4MjYzNSAzOS42OTU1MDA3OSAtMC4wOTMzNjg1MyAzOC40NjIwNTEzOSBDLTAuMDg3NzQ5NzkgMzQuNjIwNTA5MzQgLTAuMDc1MTk0MTEgMzAuNzc5MDI0NTcgLTAuMDYyNSAyNi45Mzc1IEMtMC4wNTc0ODc0MSAyNC4zNDA0OTU2MyAtMC4wNTI5MjQwOSAyMS43NDM0OTAzNSAtMC4wNDg4MjgxMiAxOS4xNDY0ODQzOCBDLTAuMDM3Nzc0MjcgMTIuNzY0MzAwNjggLTAuMDIwNDk3MDggNi4zODIxNjAwNyAwIDAgWiAiIGZpbGw9IiNEODFGMjUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDExNjYsNTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMyAwIDYuNiAwIDEwIDAgQzEwIDAuNjYgMTAgMS4zMiAxMCAyIEMxMC45OSAxLjM0IDExLjk4IDAuNjggMTMgMCBDMTYuMzkyMTAyODcgLTAuNTQ2MTg2MDYgMTkuNjA2NTQzNSAtMC41MzU4MDg5MiAyMyAwIEMyNi42MTk5NTgyMSAyLjY1OTU2MTEzIDI4LjIwNjgzODE3IDQuNjQ4NDIzNTEgMjkgOSBDMjkuMDc4MTg2MzYgMTAuNTEzOTU2OTYgMjkuMTA3ODk5MDkgMTIuMDMwOTM1MDcgMjkuMDk3NjU2MjUgMTMuNTQ2ODc1IEMyOS4wOTQ0MzM1OSAxNC4zOTEyMTA5NCAyOS4wOTEyMTA5NCAxNS4yMzU1NDY4NyAyOS4wODc4OTA2MiAxNi4xMDU0Njg3NSBDMjkuMDc5NTExNzIgMTYuOTc4MTY0MDYgMjkuMDcxMTMyODEgMTcuODUwODU5MzcgMjkuMDYyNSAxOC43NSBDMjkuMDU3OTg4MjggMTkuNjM4MTY0MDYgMjkuMDUzNDc2NTYgMjAuNTI2MzI4MTIgMjkuMDQ4ODI4MTIgMjEuNDQxNDA2MjUgQzI5LjAzNzA3NDIyIDIzLjYyNzYzMzE2IDI5LjAxOTEzOTY2IDI1LjgxMzgyNTI4IDI5IDI4IEMyNS43IDI4IDIyLjQgMjggMTkgMjggQzE4LjUwNSAxOC4xIDE4LjUwNSAxOC4xIDE4IDggQzE2LjY4IDcuNjcgMTUuMzYgNy4zNCAxNCA3IEMxMy4wMSA3LjY2IDEyLjAyIDguMzIgMTEgOSBDMTAuNDE0MDczNjYgMTIuMTE2MTA1NTQgMTAuNDE0MDczNjYgMTIuMTE2MTA1NTQgMTAuMzEyNSAxNS42MjUgQzEwLjI0Njc1NzgxIDE2LjgxMzUxNTYzIDEwLjE4MTAxNTYzIDE4LjAwMjAzMTI1IDEwLjExMzI4MTI1IDE5LjIyNjU2MjUgQzEwLjA3NTg5ODQ0IDIwLjE0MTc5Njg3IDEwLjAzODUxNTYyIDIxLjA1NzAzMTI1IDEwIDIyIEM2LjcgMjEuNjcgMy40IDIxLjM0IDAgMjEgQzAgMTQuMDcgMCA3LjE0IDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAzNiw1MykiLz4KPHBhdGggZD0iTTAgMCBDNy44MjQzNDA1OCAtMC4xMTcwMzA3NCA3LjgyNDM0MDU4IC0wLjExNzAzMDc0IDEwLjQ4ODI4MTI1IDIuNDE0MDYyNSBDMTIuNzg3NDM3MTMgNi4yMDk3NTk4NSAxMy43NDA2OTg2IDkuNTU1ODA4MzkgMTMgMTQgQzExLjk1MTAwNjYgMTUuNzE2NTM0NjYgMTAuOTAxMjc3MjcgMTcuNDMyNzI1OTggOS44MzIwMzEyNSAxOS4xMzY3MTg3NSBDOC4yODEzNDc3OCAyMi42MDkzNzYxMSA5LjE2NDUxNTkyIDI1LjM1OTY3NjUzIDEwIDI5IEMxMC4zNTA2MjUgMjkuNzAxMjUgMTAuNzAxMjUgMzAuNDAyNSAxMS4wNjI1IDMxLjEyNSBDMTIuMzk2NjM0OTIgMzMuNzkzMjY5ODUgMTIuMTk1NTczOTMgMzYuMDY2MzkwOTggMTIgMzkgQzExIDQwIDExIDQwIDguMTI4OTA2MjUgNDAuMTMyODEyNSBDNi45NTE5OTIxOSA0MC4xMzAyMzQzOCA1Ljc3NTA3ODEyIDQwLjEyNzY1NjI1IDQuNTYyNSA0MC4xMjUgQzMuMzg4MTY0MDYgNDAuMTI3NTc4MTIgMi4yMTM4MjgxMiA0MC4xMzAxNTYyNSAxLjAwMzkwNjI1IDQwLjEzMjgxMjUgQy0yIDQwIC0yIDQwIC00IDM5IEMtMy4yNDgxNzUxOCAzMS40ODE3NTE4MiAtMy4yNDgxNzUxOCAzMS40ODE3NTE4MiAtMS45Mzc1IDI4LjkzNzUgQy0wLjQzNzQ4NjY0IDI1LjgzNzQ3MjM5IC0wLjY0OTM5MDYgMjMuMzg5MjI0MiAtMSAyMCBDLTIuMzE0MzE2OTUgMTcuOTg3NDUyMTggLTMuNjQ3MjE4ODUgMTUuOTg2ODk3MzEgLTUgMTQgQy01Ljg1NTE0NzQgOS42MjkyNDY2MSAtNC43NjA4MzQzNiA3LjI4MzU1ODE3IC0yLjUgMy42MjUgQy0xLjY3OTQ5NTggMi40MDc5MTg3NiAtMC44NTAyODE2NCAxLjE5NjQ2NzczIDAgMCBaICIgZmlsbD0iI0ZBRkJGQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1Nyw4MikiLz4KPHBhdGggZD0iTTAgMCBDMy45MDkzODcwMyAzLjczOTQxMzY4IDMuOTA5Mzg3MDMgMy43Mzk0MTM2OCA0LjEzMjgxMjUgNi44NDc2NTYyNSBDNC4xMzAyMzQzOCA3LjU3ODU1NDY5IDQuMTI3NjU2MjUgOC4zMDk0NTMxMyA0LjEyNSA5LjA2MjUgQzQuMTIzNzEwOTQgOS44NjU1ODU5NCA0LjEyMjQyMTg4IDEwLjY2ODY3MTg4IDQuMTIxMDkzNzUgMTEuNDk2MDkzNzUgQzQuMDAyNzk5MjggMTMuOTQyMTE4MSAzLjYyMDk4NDQgMTYuMjE4MTI5NDkgMy4xODc1IDE4LjYyNSBDMi43MDMyNTg3MiAyMi4yNzU5MjQ0MiAzLjIxMzk4MTIzIDIzLjg4MzIwMTQgNS40Mzc1IDI2LjgxMjUgQzUuOTEwNTg1OTQgMjcuMzM0NTcwMzEgNi4zODM2NzE4NyAyNy44NTY2NDA2MiA2Ljg3MTA5Mzc1IDI4LjM5NDUzMTI1IEM4IDMwIDggMzAgOCAzNCBDOC42NiAzNCA5LjMyIDM0IDEwIDM0IEM3Ljk4MzAzMjM0IDI5LjA1NjczNDA2IDcuOTgzMDMyMzQgMjkuMDU2NzM0MDYgNS4yNSAyNC41IEMzLjUwMjExMTMyIDIxLjAwNDIyMjYzIDQuMzAxODA1ODYgMTguODA4MzMxNjUgNSAxNSBDNS4yMjA5MzE1MSAxMC40OTc1NjgxMyA1LjIzOTU1NzQ5IDYuMzU4MTI2NzUgNCAyIEM3LjQ0NTAwNjYgNC45MzU2NjQyMyA3LjU3NDgyNDY0IDcuMjU3NDQyOTQgNy45Njg3NSAxMS41OTc2NTYyNSBDNy45OTg4MzUyIDEzLjkxMDQ1NTggNy43MDc4ODYzOCAxNS44NjYzODczNSA3LjI1IDE4LjEyNSBDNi45ODQxMjA2MSAyMi4yNDYxMzA1MyA3LjEwOTg0MDQyIDIyLjY4NTU3NDIyIDkuNDM3NSAyNS43NSBDOS45MTA1ODU5NCAyNi4yODEwOTM3NSAxMC4zODM2NzE4NyAyNi44MTIxODc1IDEwLjg3MTA5Mzc1IDI3LjM1OTM3NSBDMTIgMjkgMTIgMjkgMTIgMzMgQzE0LjMxIDMzLjY2IDE2LjYyIDM0LjMyIDE5IDM1IEMxOSAzNS45OSAxOSAzNi45OCAxOSAzOCBDMTkuNjM5Mzc1IDM4LjI4ODc1IDIwLjI3ODc1IDM4LjU3NzUgMjAuOTM3NSAzOC44NzUgQzIzIDQwIDIzIDQwIDI0IDQyIEMxOS4yNDAwNTc5OSA0OC4wNjgxMzc5OSAxMy45MjU3ODgzNiA1My40MjgxMzM2MyA3IDU3IEM0IDU2IDQgNTYgMi43OTY4NzUgNTMuOTI1NzgxMjUgQy0wLjc2MDI4NTczIDQ1LjA0NjE1MjQyIC0wLjc2MDI4NTczIDQ1LjA0NjE1MjQyIDEgNDAgQzEuNTE1NjI1IDM5LjE3NSAyLjAzMTI1IDM4LjM1IDIuNTYyNSAzNy41IEM0LjM4NzAyNzU2IDM0LjMyNjkwODU4IDQuNTE2NDQxMTggMzIuNjE1MDg4MjUgNCAyOSBDMy4zNCAyOC4wMzA2MjUgMi42OCAyNy4wNjEyNSAyIDI2LjA2MjUgQy0wLjQxMDU3NzgyIDIyLjM3MTMwMjcyIC0wLjQwODMyNzU1IDIwLjMyODI3MTk5IDAgMTYgQzAuMzMgMTUuMDEgMC42NiAxNC4wMiAxIDEzIEMxLjA5MjQ3MzgxIDExLjUyMzEzODg5IDEuMTI5OTkwNzEgMTAuMDQyMjQ0OTkgMS4xMjUgOC41NjI1IEMxLjEyODg2NzE5IDcuNDE5NzQ2MDkgMS4xMjg4NjcxOSA3LjQxOTc0NjA5IDEuMTMyODEyNSA2LjI1MzkwNjI1IEMxLjAwMjc2MDE1IDQuMDQ2ODQxNDEgMC42MDg1NjE5OSAyLjEyMDMwNzI0IDAgMCBaICIgZmlsbD0iIzI5N0Q1QiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3NCw2MSkiLz4KPHBhdGggZD0iTTAgMCBDMCAyLjY0IDAgNS4yOCAwIDggQy0wLjk5IDcuNjcgLTEuOTggNy4zNCAtMyA3IEMtNi41NTg4MDA1MSA2LjYyNjg5OTk1IC05LjgyNzU4NTIyIDYuMzQwNTE2NjkgLTEzIDguMTI1IEMtMTQuNDYyMjEyMTcgMTAuODY2NjQ3ODEgLTE0LjMxODMzNzMzIDEyLjk0Mzk2MTYyIC0xNCAxNiBDLTEyLjMyMDg1NTg1IDE5LjIyNTQwMTU2IC0xMi4zMjA4NTU4NSAxOS4yMjU0MDE1NiAtOS4zMTI1IDE5Ljc1IEMtNS43MDcwOTgyNCAyMC4wMjIxMDU3OSAtMi41NTAxMDA2NiAxOS42MzkwMTgxMiAxIDE5IEMxIDIxLjMxIDEgMjMuNjIgMSAyNiBDLTYuMzQ1MjM2NzIgMjguMjcwMzQ1ODkgLTEyLjM4MTY4ODY4IDI4Ljg3NjE2MTQyIC0xOS4zNzUgMjUuMjUgQy0yMi44MjkzNDgyMSAyMi4yODkxMzAxIC0yNC42OTA4NzcyNCAyMC4yNzgzNDkyMiAtMjUuMzE2NDA2MjUgMTUuNjY3OTY4NzUgQy0yNS41ODIxMzY1MiA5Ljk1MDQ4MTkxIC0yNC45Njg0NzE1MiA2LjM5NzQ5NTQ3IC0yMSAyIEMtMTQuMTcwMDE0MTEgLTMuMjEyMzU3NjUgLTcuODE4OTkzNjcgLTEuODY5NzU5MzYgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDAyLDU0KSIvPgo8cGF0aCBkPSJNMCAwIEMzIDMuMTkwMzcxOTkgMyAzLjE5MDM3MTk5IDMgNiBDLTAuMDkyNjI3NjcgNy41NDYzMTM4NCAtMy4zNjcwODkxIDcuMzkwNjA3MTYgLTYuNzg1MTU2MjUgNy42MjEwOTM3NSBDLTcuODgxNTAzOTEgNy44MDg2NTIzNCAtNy44ODE1MDM5MSA3LjgwODY1MjM0IC05IDggQy05LjMzIDguNjYgLTkuNjYgOS4zMiAtMTAgMTAgQy03LjY5IDEwLjMzIC01LjM4IDEwLjY2IC0zIDExIEMtMi40Mzc1IDEyLjkzNzUgLTIuNDM3NSAxMi45Mzc1IC0yIDE1IEMtMyAxNiAtMyAxNiAtNS4yODUxNTYyNSAxNi4wOTc2NTYyNSBDLTYuNjU5OTQxNDEgMTYuMDgwMjUzOTEgLTYuNjU5OTQxNDEgMTYuMDgwMjUzOTEgLTguMDYyNSAxNi4wNjI1IEMtOC45ODE2MDE1NiAxNi4wNTM0NzY1NiAtOS45MDA3MDMxMiAxNi4wNDQ0NTMxMyAtMTAuODQ3NjU2MjUgMTYuMDM1MTU2MjUgQy0xMS41NTc5Mjk2OSAxNi4wMjM1NTQ2OSAtMTIuMjY4MjAzMTMgMTYuMDExOTUzMTMgLTEzIDE2IEMtMTMuMzMgMTcuNjUgLTEzLjY2IDE5LjMgLTE0IDIxIEMtMTIuNzYyNSAyMC42NDkzNzUgLTExLjUyNSAyMC4yOTg3NSAtMTAuMjUgMTkuOTM3NSBDLTcuMDk2NzA4IDE5LjA0NDA2NzI3IC01LjEzMjI1ODM2IDE4Ljk5MTE4NzA2IC0yIDIwIEMtMS42NyAyMS4zMiAtMS4zNCAyMi42NCAtMSAyNCBDLTcuMDgzMDUwMzggMjguMTkwNTQ1ODIgLTExLjYyMjE1Nzc3IDI5Ljk3NTQ2ODkgLTE5IDI5IEMtMjEuMDYyNSAyNy4zNzUgLTIxLjA2MjUgMjcuMzc1IC0yMiAyNSBDLTIyLjU2NDA4OTkgMjAuMDM2MDA4OTIgLTIxLjQ2ODAwNjg0IDE1LjcxMzA3NDU4IC0yMCAxMSBDLTE4LjM3NSA5IC0xOC4zNzUgOSAtMTcgOCBDLTE3LjQ5NSA3LjU2Njg3NSAtMTcuOTkgNy4xMzM3NSAtMTguNSA2LjY4NzUgQy0yMCA1IC0yMCA1IC0yMCAyIEMtNi4wODE1NDUwNiAtMS4zMTY3MzgyIC02LjA4MTU0NTA2IC0xLjMxNjczODIgMCAwIFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2NTIsNzEpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMiAyIDIgMi4zMTI1IDUuMTg3NSBDMS45Njk4MjgxOCA5LjM2ODA5NjIyIDAuNjY2NjA4NjQgMTIuMTgwNjg4NTMgLTEgMTYgQy0xLjU4NzYzMjQ0IDIwLjExMzQyNzEgLTEuMzMwNDM1NTggMjEuNTA0MzQ2NjQgMSAyNSBDMy4zMzQ1ODYzNSAyOC41MDE4Nzk1MyAzLjY3MjYwNzI3IDI5Ljg4MDI4MDQ3IDMgMzQgQzEuOTUxMDA2NiAzNS43MTY1MzQ2NiAwLjkwMTI3NzI3IDM3LjQzMjcyNTk4IC0wLjE2Nzk2ODc1IDM5LjEzNjcxODc1IEMtMS43MTg2NTIyMiA0Mi42MDkzNzYxMSAtMC44MzU0ODQwOCA0NS4zNTk2NzY1MyAwIDQ5IEMwLjM1MDYyNSA0OS43MDEyNSAwLjcwMTI1IDUwLjQwMjUgMS4wNjI1IDUxLjEyNSBDMi4zODM4NTAwOCA1My43Njc3MDAxNyAyLjEzMjA5ODM3IDU2LjA5MzgzNTkxIDIgNTkgQzEuMDEgNTkgMC4wMiA1OSAtMSA1OSBDLTEuMjg4NzUgNTcuNzgzMTI1IC0xLjU3NzUgNTYuNTY2MjUgLTEuODc1IDU1LjMxMjUgQy0yLjQ4MDE5MTExIDUyLjgzMDc4MTA3IC0zLjEwNzk3MDM0IDUwLjc2NzAxMTM3IC00LjE4NzUgNDguNDM3NSBDLTUuMzQyMzE4NDQgNDQuOTczMDQ0NjggLTQuODE4NjU2ODYgNDIuNTI2NTIxODcgLTQgMzkgQy0zLjIyNjU2MjUgMzcuNzMxNTYyNSAtMy4yMjY1NjI1IDM3LjczMTU2MjUgLTIuNDM3NSAzNi40Mzc1IEMtMC42MTEwNTMyMSAzMy4zNDA0ODE1MiAtMC41NTY2MDA4MSAzMS41NDcxOTM1MyAtMSAyOCBDLTIuNDI2MjE2ODQgMjUuMjg4NzM2MTYgLTIuNDI2MjE2ODQgMjUuMjg4NzM2MTYgLTQgMjMgQy00IDIyLjM0IC00IDIxLjY4IC00IDIxIEMtNi45NyAyMSAtOS45NCAyMSAtMTMgMjEgQy0xNi44OTY3Nzg1MSAyNy4wMDIyMTQ0NSAtMTYuODk2Nzc4NTEgMjcuMDAyMjE0NDUgLTE3IDM0IEMtMTYuMzQgMzQuOTY5Mzc1IC0xNS42OCAzNS45Mzg3NSAtMTUgMzYuOTM3NSBDLTEyLjUzNTY0NjkzIDQwLjcxMTA0MDY0IC0xMi40NTUwODUxNiA0Mi41NjI4MzYyOCAtMTMgNDcgQy0xMy45MzU3ODk5NSA0OS4zNTk4MTgxMyAtMTQuOTMzNDc4MDggNTEuNjk2MzEyNjQgLTE2IDU0IEMtMTYuNjkxNDA1MjIgNTYuNzc4ODg2MTMgLTE2LjY5MTQwNTIyIDU2Ljc3ODg4NjEzIC0xNyA1OSBDLTE3Ljk5IDU5IC0xOC45OCA1OSAtMjAgNTkgQy0yMC4yNTgxMzMwMiA1NS4zODYxMzc3NCAtMjAuMTY4MTU2NjcgNTMuMzI5MzA2OCAtMTguNSA1MC4wNjI1IEMtMTYuNjczNDE0OTMgNDYuMzMzMjIyMTUgLTE2LjQ4NjE3MTMzIDQ0LjExMDYyOTM5IC0xNyA0MCBDLTE4LjMxNDMxNjk1IDM3Ljk4NzQ1MjE4IC0xOS42NDcyMTg4NSAzNS45ODY4OTczMSAtMjEgMzQgQy0yMS41IDMxIC0yMS41IDMxIC0yMSAyOCBDLTIwLjMxOTM3NSAyNy4wNzE4NzUgLTE5LjYzODc1IDI2LjE0Mzc1IC0xOC45Mzc1IDI1LjE4NzUgQy0xNi4yOTQzMTIzNCAyMC44MzkwMjk5NyAtMTYuODYxMjA4MTUgMTcuODI0MTczMzMgLTE4IDEzIEMtMTguNjU5OTY3OSAxMS4zMzA2Njk0MiAtMTkuMzI1NTg4NjkgOS42NjM1NDc5IC0yMCA4IEMtMjAuMTI1IDQuNjg3NSAtMjAuMTI1IDQuNjg3NSAtMjAgMiBDLTE5LjM0IDIgLTE4LjY4IDIgLTE4IDIgQy0xOCAyLjY2IC0xOCAzLjMyIC0xOCA0IEMtMTYuNjggNCAtMTUuMzYgNCAtMTQgNCBDLTE0IDQuNjYgLTE0IDUuMzIgLTE0IDYgQy0xNC45OSA2IC0xNS45OCA2IC0xNyA2IEMtMTUuOTcwMjgxNCAxMS4yMzU1MDE3NyAtMTUuOTcwMjgxNCAxMS4yMzU1MDE3NyAtMTMuNzUgMTYgQy0xMC45NzQxNDAxOSAxNy41ODYyMDU2MSAtOS4xMjcxMzUyNSAxNy41MTA1NTI2OSAtNiAxNyBDLTIuMzk2ODM5NzggMTMuNjg4OTg3OTEgLTEuNDQ3Mjk0NzYgMTAuODA4NDE4NyAtMSA2IEMtMy4zMSA2LjMzIC01LjYyIDYuNjYgLTggNyBDLTguMDQyNzIxIDUuMzMzODgwOTUgLTguMDQwNjM4MzIgMy42NjYxNzExNSAtOCAyIEMtNS45NTQ0Nzk1OCAtMC4wNDU1MjA0MiAtMi43Mjk0MTkxNCAwLjIzOTQyMjczIDAgMCBaICIgZmlsbD0iIzIyNzg1NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw2MikiLz4KPHBhdGggZD0iTTAgMCBDMC45NDg3NSAwLjY2IDEuODk3NSAxLjMyIDIuODc1IDIgQzMuMzAxNTM3MjcgNi4zNTA2ODAxOCAzLjQ1MjcyODcyIDguMjkzODg3MTIgMC42MjUgMTEuNzUgQy0wLjI4MjUgMTIuNDkyNSAtMS4xOSAxMy4yMzUgLTIuMTI1IDE0IEMtMi43MDYzNjcxOSAxNC41MTY5MTQwNiAtMy4yODc3MzQzOCAxNS4wMzM4MjgxMiAtMy44ODY3MTg3NSAxNS41NjY0MDYyNSBDLTYuNzk2MjA2MzYgMTcuNDI5OTAwMDYgLTkuMjc0ODQ0NzUgMTcuNzMzMjU1NzkgLTEyLjY4NzUgMTguMTg3NSBDLTEzLjgyMzE2NDA2IDE4LjM0NjA1NDY5IC0xNC45NTg4MjgxMiAxOC41MDQ2MDkzOCAtMTYuMTI4OTA2MjUgMTguNjY3OTY4NzUgQy0xOS4xMjUgMTkgLTE5LjEyNSAxOSAtMjIuMTI1IDE5IEMtMjMuOTMxNDYxMTggMTUuMzg3MDc3NjQgLTI1LjEyNSAxMi45OTMwMDYgLTI1LjEyNSA4LjkzNzUgQy0yMy41NjkwNzIyNyA0LjM2Njk2MjI5IC0yMS4wMzM3Mjg5IDEuMTk5NzcyNDUgLTE2LjkzNzUgLTEuMzc1IEMtMTEuMDE1MDAyNTMgLTIuNjkxMTEwNTUgLTUuMzkzODE5MTMgLTMuMDkxNTc5MjYgMCAwIFogTS0xOC4xMjUgNSBDLTE4Ljc4NSA2LjMyIC0xOS40NDUgNy42NCAtMjAuMTI1IDkgQy0xOC44MDUgNy42OCAtMTcuNDg1IDYuMzYgLTE2LjEyNSA1IEMtMTYuNzg1IDUgLTE3LjQ0NSA1IC0xOC4xMjUgNSBaIE0tMTIuMTI1IDkgQy0xMy45NTgwMDkwOSAxMS4xMDU3NTY0MyAtMTMuOTU4MDA5MDkgMTEuMTA1NzU2NDMgLTE1LjEyNSAxMyBDLTkuMzI4NzM4OTMgMTIuNjAwMjU3ODYgLTUuNzEwMjc1MzcgMTEuODk3NDg0MDcgLTEuMTI1IDggQy0xLjEyNSA3LjAxIC0xLjEyNSA2LjAyIC0xLjEyNSA1IEMtNS45NTc3NzI2OCA0LjQzMTQzODUxIC04LjM2ODA4Njg2IDYuMDU5ODA3MTEgLTEyLjEyNSA5IFogIiBmaWxsPSIjMjIxRTIwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1ODUuMTI1LDQ5KSIvPgo8cGF0aCBkPSJNMCAwIEMyLjk3IDAgNS45NCAwIDkgMCBDOS4zMyAxLjMyIDkuNjYgMi42NCAxMCA0IEMxMC41MTU2MjUgMy4zNCAxMS4wMzEyNSAyLjY4IDExLjU2MjUgMiBDMTQuODI2NDEzMTkgLTAuNjc4MDgyNjIgMTYuODgzOTk1MjUgLTAuMzgxMTExNTUgMjEgMCBDMjEuNjYgMC4zMyAyMi4zMiAwLjY2IDIzIDEgQzIyLjY3IDMuNjQgMjIuMzQgNi4yOCAyMiA5IEMxOSAxMCAxOSAxMCAxNy4wNjI1IDkuMzEyNSBDMTYuMzgxODc1IDkuMjA5Mzc1IDE1LjcwMTI1IDkuMTA2MjUgMTUgOSBDMTEuNjQ5OTE3OTUgMTEuNzc1NzgyMjcgMTAuMTM2Mzk1ODYgMTMuNjg5OTI2MiA5LjY4MzU5Mzc1IDE4LjAzOTA2MjUgQzkuNjAyMzgyODEgMTkuMjIyNDIxODcgOS41MjExNzE4OCAyMC40MDU3ODEyNSA5LjQzNzUgMjEuNjI1IEM5LjM1MzcxMDk0IDIyLjgxMzUxNTYzIDkuMjY5OTIxODcgMjQuMDAyMDMxMjUgOS4xODM1OTM3NSAyNS4yMjY1NjI1IEM5LjEyMzAwNzgxIDI2LjE0MTc5Njg3IDkuMDYyNDIxODcgMjcuMDU3MDMxMjUgOSAyOCBDNi4wMyAyOCAzLjA2IDI4IDAgMjggQzAgMTguNzYgMCA5LjUyIDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE3Niw1MykiLz4KPHBhdGggZD0iTTAgMCBDMC40OTUgMS40ODUgMC40OTUgMS40ODUgMSAzIEMwLjAxIDMuOTkgLTAuOTggNC45OCAtMiA2IEMtMi43MjcwMzEyNSA1LjczNDQ1MzEzIC0zLjQ1NDA2MjUgNS40Njg5MDYyNSAtNC4yMDMxMjUgNS4xOTUzMTI1IEMtMjUuMTQ4Njk1MTMgLTIuMTYyNDkwMzQgLTQ1LjE2MzM2MjQ5IC0xLjA2MjQxOCAtNjYgNiBDLTY2LjMzIDQuMzUgLTY2LjY2IDIuNyAtNjcgMSBDLTQ4Ljc3Mzk1ODUzIC05LjkzNTYyNDg4IC0xOC43MTE0Nzg5MyAtOC4zODU4NDYyMiAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4MjAsMzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyLjMzIDEuNjUgMi42NiAzLjMgMyA1IEM0LjY1IDUgNi4zIDUgOCA1IEM3LjAxIDYuNDg1IDcuMDEgNi40ODUgNiA4IEM1LjgzMjg2NDMxIDEwLjYyNTMxNTI0IDUuODMyODY0MzEgMTAuNjI1MzE1MjQgNiAxMyBDNi45MDc1IDEyLjQ4NDM3NSA3LjgxNSAxMS45Njg3NSA4Ljc1IDExLjQzNzUgQzEyIDEwIDEyIDEwIDE0LjM3NSAxMC4zMTI1IEMxNC45MTEyNSAxMC41MzkzNzUgMTUuNDQ3NSAxMC43NjYyNSAxNiAxMSBDMTUuNjcgMTIuMzIgMTUuMzQgMTMuNjQgMTUgMTUgQzE2Ljk4IDE0LjY3IDE4Ljk2IDE0LjM0IDIxIDE0IEMxOS42OCAxNi42NCAxOC4zNiAxOS4yOCAxNyAyMiBDMTYuMjM4MTY0MDYgMjEuNzgzNDM3NSAxNS40NzYzMjgxMyAyMS41NjY4NzUgMTQuNjkxNDA2MjUgMjEuMzQzNzUgQzMuNTQ5MjExNDUgMTguMzM5MTEzMiAtMy45OTQ5NjA1MyAxOC41NDQyMTE5MSAtMTUgMjIgQy0xNi4zMiAxOS4zNiAtMTcuNjQgMTYuNzIgLTE5IDE0IEMtMTYuNjkgMTQuMzMgLTE0LjM4IDE0LjY2IC0xMiAxNSBDLTEyLjY2IDEzLjM1IC0xMy4zMiAxMS43IC0xNCAxMCBDLTEwLjI4MTExNzYxIDEwLjUwNzEyMDMzIC03LjI2NTQ1NzYxIDExLjExNjA4MjE1IC00IDEzIEMtMy43OTkxMzU1NyA5LjI4NDAwODA5IC0zLjg0ODA1NjMgOC4yMjc5MTU1NSAtNiA1IEMtNC4zNSA1IC0yLjcgNSAtMSA1IEMtMC42NyAzLjM1IC0wLjM0IDEuNyAwIDAgWiAiIGZpbGw9IiNGM0Y4RjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjAsMzcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuNzQyMTY3OTcgMC4wNTQxNDA2MyAxLjc0MjE2Nzk3IDAuMDU0MTQwNjMgMy41MTk1MzEyNSAwLjEwOTM3NSBDNC4zOTk5NjA5NCAwLjE1NTc4MTI1IDUuMjgwMzkwNjMgMC4yMDIxODc1IDYuMTg3NSAwLjI1IEM1Ljg1NzUgMS45IDUuNTI3NSAzLjU1IDUuMTg3NSA1LjI1IEMzLjIwNzUgNS41OCAxLjIyNzUgNS45MSAtMC44MTI1IDYuMjUgQy0xLjA1MDMzMjAzIDcuMzU0MDgyMDMgLTEuMDUwMzMyMDMgNy4zNTQwODIwMyAtMS4yOTI5Njg3NSA4LjQ4MDQ2ODc1IEMtMi43NDE2MTc3NyAxNC41MzkxODMxOCAtMy44MTM2MDk0MSAxOC40MDQ2OTk1NSAtOC44MTI1IDIyLjI1IEMtMTEuNTc3MDIwMzMgMjMuNjMyMjYwMTYgLTEzLjg1ODYzNjMgMjMuMzQ1MjUzODcgLTE2LjkzNzUgMjMuMzEyNSBDLTE4LjAzMzIwMzEyIDIzLjMwMzQ3NjU2IC0xOS4xMjg5MDYyNSAyMy4yOTQ0NTMxMyAtMjAuMjU3ODEyNSAyMy4yODUxNTYyNSBDLTIxLjUyMjM4MjgxIDIzLjI2Nzc1MzkxIC0yMS41MjIzODI4MSAyMy4yNjc3NTM5MSAtMjIuODEyNSAyMy4yNSBDLTIyLjQ4MjUgMjEuNiAtMjIuMTUyNSAxOS45NSAtMjEuODEyNSAxOC4yNSBDLTE5LjgzMjUgMTcuOTIgLTE3Ljg1MjUgMTcuNTkgLTE1LjgxMjUgMTcuMjUgQy0xNS41ODE3NTc4MSAxNi4zNTc5Njg3NSAtMTUuMzUxMDE1NjIgMTUuNDY1OTM3NSAtMTUuMTEzMjgxMjUgMTQuNTQ2ODc1IEMtMTQuNzg3MTQ4NDQgMTMuMzc2NDA2MjUgLTE0LjQ2MTAxNTYzIDEyLjIwNTkzNzUgLTE0LjEyNSAxMSBDLTEzLjgxMTc1NzgxIDkuODM5ODQzNzUgLTEzLjQ5ODUxNTYyIDguNjc5Njg3NSAtMTMuMTc1NzgxMjUgNy40ODQzNzUgQy0xMC40NDExMzY5OSAwLjk5NjQ1MTA5IC02Ljc2ODAwODc1IC0wLjI3MzQ1NDkgMCAwIFogIiBmaWxsPSIjRjVGOUY2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDM2LjgxMjUsODQuNzUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuOTcgMCA1Ljk0IDAgOSAwIEM5IDkuMjQgOSAxOC40OCA5IDI4IEM2LjAzIDI4IDMuMDYgMjggMCAyOCBDMCAxOC43NiAwIDkuNTIgMCAwIFogIiBmaWxsPSIjMDA4NDJBIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDk5LDUzKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjgwODE5NTIyIDAuMDEzNzU3MzUgNC44MDgxOTUyMiAwLjAxMzc1NzM1IDcuODEyNSAyLjg3NSBDOC40OTMxMjUgNC4xMTI1IDguNDkzMTI1IDQuMTEyNSA5LjE4NzUgNS4zNzUgQzYuODc3NSA1LjcwNSA0LjU2NzUgNi4wMzUgMi4xODc1IDYuMzc1IEMxLjg1NzUgOC4wMjUgMS41Mjc1IDkuNjc1IDEuMTg3NSAxMS4zNzUgQzQuNjUyNSAxMC44OCA0LjY1MjUgMTAuODggOC4xODc1IDEwLjM3NSBDOC42ODA5ODE3NSAxNC41MjAyNDY3MSA4LjMyNjA0MzA3IDE2LjE1NDk2MSA2LjA2MjUgMTkuNzUgQzMuMTg3NSAyMi4zNzUgMy4xODc1IDIyLjM3NSAwLjE4NzUgMjMuMTI1IEMtNC4xMzU1MDE1OSAyMi4wNDQyNDk2IC01LjQ3Mjc4ODMxIDIwLjA5MTAxMjY4IC03LjgxMjUgMTYuMzc1IEMtOC4xMjUgMTMgLTguMTI1IDEzIC03LjgxMjUgMTAuMzc1IEMtNS41MDI1IDEwLjM3NSAtMy4xOTI1IDEwLjM3NSAtMC44MTI1IDEwLjM3NSBDLTEuMTQyNSA5LjA1NSAtMS40NzI1IDcuNzM1IC0xLjgxMjUgNi4zNzUgQy00Ljc4MjUgNS44OCAtNC43ODI1IDUuODggLTcuODEyNSA1LjM3NSBDLTUuNjI4MjEwMTUgMC44NjA4MDA5NyAtNS4wOTkzMDg2NyAwLjE5NDExNzE3IDAgMCBaICIgZmlsbD0iI0U1RUZFQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2MC44MTI1LDU3LjYyNSkiLz4KPHBhdGggZD0iTTAgMCBDMTUuNTEgMCAzMS4wMiAwIDQ3IDAgQzQ3IDEuNjUgNDcgMy4zIDQ3IDUgQzMxLjQ5IDUgMTUuOTggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsNzIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuNjIgMCA5LjI0IDAgMTQgMCBDMTQgMS4zMiAxNCAyLjY0IDE0IDQgQzEwLjcgNCA3LjQgNCA0IDQgQzQgNS45OCA0IDcuOTYgNCAxMCBDNy4zIDEwIDEwLjYgMTAgMTQgMTAgQzE0IDExLjMyIDE0IDEyLjY0IDE0IDE0IEMxMC43IDE0IDcuNCAxNCA0IDE0IEM0IDE1Ljk4IDQgMTcuOTYgNCAyMCBDNy4zIDIwIDEwLjYgMjAgMTQgMjAgQzE0LjMzIDIxLjMyIDE0LjY2IDIyLjY0IDE1IDI0IEMxMC4wNSAyNCA1LjEgMjQgMCAyNCBDMCAxNi4wOCAwIDguMTYgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDU2LDg1KSIvPgo8cGF0aCBkPSJNMCAwIEMxNC41MiAwIDI5LjA0IDAgNDQgMCBDNDMuMzQgMS42NSA0Mi42OCAzLjMgNDIgNSBDMjguMTQgNSAxNC4yOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0MSw5NCkiLz4KPHBhdGggZD0iTTAgMCBDMTMuODYgMCAyNy43MiAwIDQyIDAgQzQyLjY2IDEuNjUgNDMuMzIgMy4zIDQ0IDUgQzI5LjQ4IDUgMTQuOTYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDEsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTUxOTMyMjEgNS44NTU3OTY2MyAzLjYyOTIyNzk1IDE1LjU1OTg2NzYxIDAuOTE0MDYyNSAyMS4yOTI5Njg3NSBDMC40NDc0MjE4NyAyMS44MzU2NjQwNiAtMC4wMTkyMTg3NSAyMi4zNzgzNTkzOCAtMC41IDIyLjkzNzUgQy0zLjIyMjkwNTM0IDI1LjY1Mjg1NDI2IC0zLjIyMjkwNTM0IDI1LjY1Mjg1NDI2IC0zLjExMzI4MTI1IDI4LjQwNjI1IEMtMi44NDc1MjI1NiAzMC42NDI3NjQ2OSAtMi41MDI2MTIyNCAzMi44MDU0MjU3OCAtMiAzNSBDLTYuNjI1IDM4IC02LjYyNSAzOCAtMTAgMzggQy0xMC4zMyAzOS4zMiAtMTAuNjYgNDAuNjQgLTExIDQyIEMtMTIuMzIgNDIgLTEzLjY0IDQyIC0xNSA0MiBDLTE2LjcwMzEyNSA0MC4xMDE1NjI1IC0xNi43MDMxMjUgNDAuMTAxNTYyNSAtMTguMjUgMzcuNjI1IEMtMTguNzcwNzgxMjUgMzYuODEyODkwNjIgLTE5LjI5MTU2MjUgMzYuMDAwNzgxMjUgLTE5LjgyODEyNSAzNS4xNjQwNjI1IEMtMjEgMzMgLTIxIDMzIC0yMSAzMSBDLTE4LjA5NDUxMTE4IDI4Ljk1ODMwNTE1IC0xNi41OTg1Nzk1NCAyOCAtMTMgMjggQy0xMyAyOC45OSAtMTMgMjkuOTggLTEzIDMxIEMtMTAuMDI5ODIzMDYgMzAuMzcxODk4MjcgLTEwLjAyOTgyMzA2IDMwLjM3MTg5ODI3IC03IDI5IEMtNS44MDE2MTc5MSAyNi42NzE0NTUzNyAtNS44MDE2MTc5MSAyNi42NzE0NTUzNyAtNSAyNCBDLTQuMzI1ODIwMzEgMjMuMjk4NzUgLTMuNjUxNjQwNjMgMjIuNTk3NSAtMi45NTcwMzEyNSAyMS44NzUgQy0wLjI3MTkxNzk2IDE3LjkzMDQwMjQ0IC0wLjU4MDIxNDc2IDE0Ljk1NDI2NzczIC0wLjgxMjUgMTAuMzEyNSBDLTEuMDkwOTg5MDUgMi4xODE5NzgxMSAtMS4wOTA5ODkwNSAyLjE4MTk3ODExIDAgMCBaICIgZmlsbD0iI0VCRjNFRiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDLTAuNDAyODE3NzEgNS44NDA4NTY3NCAtMS4xMTI3NzkgOS4zNzczNTg4MSAtNSAxNCBDLTguMjkwNzY2NiAxNi43MTg0NTkzNyAtMTAuMDk2NDA4NjQgMTcuOTMzMDY3MzEgLTE0LjM3NSAxOC4yNSBDLTE1LjI0MTI1IDE4LjE2NzUgLTE2LjEwNzUgMTguMDg1IC0xNyAxOCBDLTE2LjY2ODA5NTE4IDExLjY5MzgwODQyIC0xNS41MDUxNjQ5NyA3LjU2NTU1NTkzIC0xMSAzIEMtNy4yMTg5MzIxOCAwLjU1ODA2MDM3IC00LjQ5MzYzOTc2IC0wLjM5NjQ5NzYzIDAgMCBaICIgZmlsbD0iIzAwMDAwMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzQ1LDM3KSIvPgo8cGF0aCBkPSJNMCAwIEM0Ljc1MDUzNTExIC0wLjA3NDM1MjIyIDkuNTAwNzI4ODcgLTAuMTI4Njk2OTEgMTQuMjUxNzA4OTggLTAuMTY0Nzk0OTIgQzE1Ljg2NjY3Nzg5IC0wLjE3OTg0ODc2IDE3LjQ4MTYwNjEzIC0wLjIwMDI5NjQ4IDE5LjA5NjQzNTU1IC0wLjIyNjMxODM2IEMyMS40MjI0NjU1NSAtMC4yNjI4NTI4NiAyMy43NDc5NTM0MSAtMC4yNzk3NjAxNSAyNi4wNzQyMTg3NSAtMC4yOTI5Njg3NSBDMjcuMTUxMDcxODUgLTAuMzE2MTk0NTMgMjcuMTUxMDcxODUgLTAuMzE2MTk0NTMgMjguMjQ5Njc5NTcgLTAuMzM5ODg5NTMgQzMyLjY1ODMwNTk5IC0wLjM0MTM1Nzg4IDM1LjUyNjI3Nzc5IDAuMjE1ODYwOTQgMzkgMyBDMzkgMy42NiAzOSA0LjMyIDM5IDUgQzI2LjEzIDUgMTMuMjYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDEsNTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEM1LjE4NDE5OTU5IDMuNzk2NTQ1NjcgNS4zODczNDU0OCA3LjExNjc2MjIgNS4yMzgyODEyNSAxMS44NjMyODEyNSBDNC45NDYwNDkxMyAxNC40ODM3ODg5NyA0LjA0MjM4MTk1IDE2LjU4OTQ5MTczIDMgMTkgQzIuNDgyMDk2ODIgMjMuMDU2OTA4MjUgMi42OTk5NDI5NCAyNC41NDk5MTQ0MSA1IDI4IEM3LjMzNDU4NjM1IDMxLjUwMTg3OTUzIDcuNjcyNjA3MjcgMzIuODgwMjgwNDcgNyAzNyBDNi4zNDg5OTE3IDM4LjE2Njk1MjY0IDUuNjU4MzE0NjEgMzkuMzEyMzI1OTggNC45Mzc1IDQwLjQzNzUgQzMuMTY4MTQxMTcgNDMuMjg2MDQyMjIgMi45OTk2OTkxNiA0My45ODI4NTIyOSAzLjA2MjUgNDcuNTYyNSBDNC4wMDI5NTg2MSA1MS4wMTA4NDgyMyA1LjM3ODg4Njc3IDUzLjgyODI1NjcyIDcgNTcgQzcgNTguMzIgNyA1OS42NCA3IDYxIEM1LjAyIDYxLjQ5NSA1LjAyIDYxLjQ5NSAzIDYyIEMyLjcxMTI1IDYwLjc4MzEyNSAyLjQyMjUgNTkuNTY2MjUgMi4xMjUgNTguMzEyNSBDMS41MTk4MDg4OSA1NS44MzA3ODEwNyAwLjg5MjAyOTY2IDUzLjc2NzAxMTM3IC0wLjE4NzUgNTEuNDM3NSBDLTEuMzQyMzE4NDQgNDcuOTczMDQ0NjggLTAuODE4NjU2ODYgNDUuNTI2NTIxODcgMCA0MiBDMC43NzM0Mzc1IDQwLjczMTU2MjUgMC43NzM0Mzc1IDQwLjczMTU2MjUgMS41NjI1IDM5LjQzNzUgQzMuNDExMzY2MjEgMzYuMzAyNDY1OTkgMy41MTMyNzU5MiAzNC41OTI5MzE0MSAzIDMxIEMyLjM0IDMwLjAxIDEuNjggMjkuMDIgMSAyOCBDLTEuMzMwNDM1NTggMjQuNTA0MzQ2NjQgLTEuNTg3NjMyNDQgMjMuMTEzNDI3MSAtMSAxOSBDLTAuNTA1IDE3Ljg2NTYyNSAtMC4wMSAxNi43MzEyNSAwLjUgMTUuNTYyNSBDMi41NDM3NjAwOCAxMC43MDg1Njk4MSAyLjY5NzAxMDU0IDcuMDQ3NDY4NDUgMSAyLjA2MjUgQzAuNjcgMS4zODE4NzUgMC4zNCAwLjcwMTI1IDAgMCBaICIgZmlsbD0iI0U5RjFFRSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2OSw1OSkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwLjMzIDIuNjQgMC42NiA0IDEgQzUuMTU2NjQ3MzcgNi40ODI2OTA2OSA1LjExNDE2MjU1IDExLjgwMzM5Mjc0IDUuMDYyNSAxNy4zNzUgQzUuMDU3OTg4MjggMTguMzAxODM1OTQgNS4wNTM0NzY1NiAxOS4yMjg2NzE4OCA1LjA0ODgyODEyIDIwLjE4MzU5Mzc1IEM1LjAzNzExNTc0IDIyLjQ1NTc5NzA5IDUuMDIwNzEzNzIgMjQuNzI3ODYzODggNSAyNyBDMy4zNSAyNy4zMyAxLjcgMjcuNjYgMCAyOCBDLTIuNjA1MTM5NTkgMjQuMDkyMjkwNjIgLTIuMjkzNjc1NjUgMjAuNzc3NzA5MjEgLTIuMjUgMTYuMjUgQy0yLjI1NzczNDM4IDE1LjQ2MzY3MTg4IC0yLjI2NTQ2ODc1IDE0LjY3NzM0Mzc1IC0yLjI3MzQzNzUgMTMuODY3MTg3NSBDLTIuMjU2ODM4MzYgOC44NzA4NDc1NSAtMS41OTU2NjE5NSA0LjczNjMyOTkxIDAgMCBaICIgZmlsbD0iIzIyMUUyMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTY5LDcxKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjY3NTQyOTc2IDAuMjg2MDQ4OTggMy4zNDM4NTM0MyAwLjYxNzgxMjMzIDUgMSBDNi4wNjgwODM3NCA3LjI3NDk5MTk3IDcuMDQzNjc4MzkgMTMuODY4OTY0ODMgNSAyMCBDNC40NDQ5NTIwOSAyNS44ODM1MDc4OCA1Ljc0ODA2MTcyIDI4LjIyMzcxNTY1IDkgMzMgQzkuNjgyNDU2MDcgMzcuMDA5NDI5NCA5LjA2MjU0MzA2IDM5LjEyMDM1OTYxIDYuOTM3NSA0Mi40Mzc1IEM1LjE4NzQ3ODQxIDQ1LjI2MTExNjM5IDQuOTk5MzU1NTggNDUuOTYzOTEyNyA1LjA2MjUgNDkuNSBDNi4wNjQxNTYzNSA1My4yMzk1MTcwMiA3LjQxMDgyMDg0IDU2LjQ3NjE2Nzk1IDkgNjAgQzkgNjAuNjYgOSA2MS4zMiA5IDYyIEM4LjAxIDYyIDcuMDIgNjIgNiA2MiBDNS4xMjcyMDEzOCA2MC4xMzM2MDAxOSA0LjI3NzQ4OTczIDU4LjI1NjM5Mzg5IDMuNDM3NSA1Ni4zNzUgQzIuOTYxODM1OTQgNTUuMzMwODU5MzggMi40ODYxNzE4OCA1NC4yODY3MTg3NSAxLjk5NjA5Mzc1IDUzLjIxMDkzNzUgQzAuODc4NDcyMzMgNDkuNjA4MjUxOTcgMS4wMTg2Mjk2NiA0Ny42MDg1ODA1MSAyIDQ0IEMyLjUxNTYyNSA0My4xNzUgMy4wMzEyNSA0Mi4zNSAzLjU2MjUgNDEuNSBDNS4zODcwMjc1NiAzOC4zMjY5MDg1OCA1LjUxNjQ0MTE4IDM2LjYxNTA4ODI1IDUgMzMgQzQuMzE5Mzc1IDMyLjA3MTg3NSAzLjYzODc1IDMxLjE0Mzc1IDIuOTM3NSAzMC4xODc1IEMwLjMyMzM1MDI2IDI1Ljg4NjgwMjA0IDAuODgyMTgxNzcgMjIuNzc3MDAxIDIgMTggQzIuMzMgMTcuMzQgMi42NiAxNi42OCAzIDE2IEMzLjQxNzQwMjY4IDExLjA1OTExNzE1IDMuNDg3NDY4NzMgNi40MjIxNjY2NCAxIDIgQzAuMzQgMS42NyAtMC4zMiAxLjM0IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiMxRDc1NTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMC42NiAwLjY2IDEuMzIgMSAyIEMwLjY3IDIuNjYgMC4zNCAzLjMyIDAgNCBDMC4wMjM3OTA0IDYuMzExMDc4NzggMC4wMjM3OTA0IDYuMzExMDc4NzggMC4zMTI1IDguODc1IEMwLjM5MTEzMjgxIDkuNzM4NjcxODcgMC40Njk3NjU2MyAxMC42MDIzNDM3NSAwLjU1MDc4MTI1IDExLjQ5MjE4NzUgQzEuMDAzMjA3MjQgMTQuMDE3OTA0NzUgMS44MTI2MDgzMyAxNS43NDgyMTM0IDMgMTggQzMuNzA0NDkyODkgMjMuNDAxMTEyMTcgMS45Mjk0NDIzOSAyNS42MDU4MzY0MiAtMSAzMCBDLTEuNjc4NzgwNTkgMzQuMDcyNjgzNTYgLTEuMzQxNzI0MDYgMzUuNDk4MDkyNzkgMSAzOC45Mzc1IEMzLjQ1MjU5MTI5IDQyLjY5MzAzMDQxIDMuNTUxNTQyOTEgNDQuNTg3NjU2NyAzIDQ5IEMyLjA2NTUzNDY1IDUxLjAzMTQ0NjQxIDEuMDY3NzUyMjQgNTMuMDM1MzM1ODcgMCA1NSBDLTAuNjk5MDc0MTQgNTcuNzM1NzI1ODUgLTAuNjk5MDc0MTQgNTcuNzM1NzI1ODUgLTEgNjAgQy0yLjMyIDU5LjY3IC0zLjY0IDU5LjM0IC01IDU5IEMtNC41MjI2OTE2MiA1Ny41NDEwNTc0IC00LjA0MzA4OTU4IDU2LjA4Mjg2NTA0IC0zLjU2MjUgNTQuNjI1IEMtMy4xNjIyNDYwOSA1My40MDY4MzU5NCAtMy4xNjIyNDYwOSA1My40MDY4MzU5NCAtMi43NTM5MDYyNSA1Mi4xNjQwNjI1IEMtMiA1MCAtMiA1MCAtMSA0OCBDLTAuNTQzMTA3NzYgNDQuMDcwNzI2NzUgLTAuOTU5NzA3MDkgNDEuNzM5NDU4MTMgLTMgMzguNDM3NSBDLTUuNzU4MjkzODQgMzMuNjk2NjgyNDYgLTUuNzU4MjkzODQgMzMuNjk2NjgyNDYgLTUgMzAgQy00LjM0IDI5LjA1MTI1IC0zLjY4IDI4LjEwMjUgLTMgMjcuMTI1IEMtMC41ODgzOTUzIDIzLjM1Njg2NzY2IC0wLjUyMDEwNzIzIDIxLjM5OTAxNzAyIC0xIDE3IEMtMS4zMyAxNi4xOTU2MjUgLTEuNjYgMTUuMzkxMjUgLTIgMTQuNTYyNSBDLTMuNDY1MDU4MjkgMTAuODA4Mjg4MTIgLTMuMzIwMjAxNTkgOC4wMzQ1NDAwMiAtMyA0IEMtMS41IDEuNSAtMS41IDEuNSAwIDAgWiAiIGZpbGw9IiNGMUY2RjQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTEsNjApIi8+CjxwYXRoIGQ9Ik0wIDAgQzMgMSAzIDEgNSA0IEM1IDQuOTkgNSA1Ljk4IDUgNyBDNS42NiA2LjY3IDYuMzIgNi4zNCA3IDYgQzguNTQwMjM5OTYgNS45MzA0OTQ1OSAxMC4wODMzNDk4OCA1LjkxNTQ3NjQzIDExLjYyNSA1LjkzNzUgQzEyLjg1MDg5ODQ0IDUuOTUxMDM1MTYgMTIuODUwODk4NDQgNS45NTEwMzUxNiAxNC4xMDE1NjI1IDUuOTY0ODQzNzUgQzE1LjA0MTI4OTA2IDUuOTgyMjQ2MDkgMTUuMDQxMjg5MDYgNS45ODIyNDYwOSAxNiA2IEMxNS4yMzY4NzUgNi43NDI1IDE0LjQ3Mzc1IDcuNDg1IDEzLjY4NzUgOC4yNSBDMTEuMDU1OTU5NzIgMTAuNzU4MDE3NDUgMTEuMDU1OTU5NzIgMTAuNzU4MDE3NDUgOS42NTIzNDM3NSAxMy4wOTc2NTYyNSBDNy41MTM0ODk4OSAxNS41NjAxMTkyIDYuMDYwMDUxNDUgMTUuNzE4NTYzODUgMi44NzUgMTYuMTg3NSBDLTAuMzYzMTQzNTQgMTYuNDU4MzM3OTMgLTAuMzYzMTQzNTQgMTYuNDU4MzM3OTMgLTMgMTggQy00LjY2NjE3MTE1IDE4LjA0MDYzODMyIC02LjMzMzg4MDk1IDE4LjA0MjcyMSAtOCAxOCBDLTcuMjU5NDMzNTkgMTYuOTMwNzIyNjYgLTcuMjU5NDMzNTkgMTYuOTMwNzIyNjYgLTYuNTAzOTA2MjUgMTUuODM5ODQzNzUgQy0xLjU0NzYwNyA4LjUwMTAxOTAzIC0xLjU0NzYwNyA4LjUwMTAxOTAzIDAgMCBaICIgZmlsbD0iI0VGRjVGMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNiw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMS44NzUgMS4xMjUgMS44NzUgMS4xMjUgMyAzIEMzLjY4NzUgNi4xODc1IDMuNjg3NSA2LjE4NzUgNCA5IEMwLjM3IDkgLTMuMjYgOSAtNyA5IEMtNi4wMSA5Ljk5IC01LjAyIDEwLjk4IC00IDEyIEMtMC4zNTQ1ODE1NSAxMS43NjUyMjgwMSAtMC4zNTQ1ODE1NSAxMS43NjUyMjgwMSAzIDExIEMyLjY3IDEyLjY1IDIuMzQgMTQuMyAyIDE2IEMtNC4yNDE1OTc5NyAxNy4zNDYyMjcwMSAtNC4yNDE1OTc5NyAxNy4zNDYyMjcwMSAtNy44NzUgMTUuNjg3NSBDLTEwIDE0IC0xMCAxNCAtMTEgMTIgQy0xMS41NzE0Mjg1NyA0LjkxNDI4NTcxIC0xMS41NzE0Mjg1NyA0LjkxNDI4NTcxIC05LjQzNzUgMS41IEMtNi4wODk2NTY1MSAtMC41NjAyMTEzOCAtMy44NTk4NTc1MyAtMC40OTEyNTQ1OSAwIDAgWiBNLTUgMyBDLTUuOTkgNC40ODUgLTUuOTkgNC40ODUgLTcgNiBDLTQuNjkgNiAtMi4zOCA2IDAgNiBDLTAuNjYgNS4wMSAtMS4zMiA0LjAyIC0yIDMgQy0yLjk5IDMgLTMuOTggMyAtNSAzIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTAwLDkzKSIvPgo8cGF0aCBkPSJNMCAwIEMxMC44OSAwIDIxLjc4IDAgMzMgMCBDMzIuNjcgMS4zMiAzMi4zNCAyLjY0IDMyIDQgQzI5LjA3ODAyMzEgNS40NjA5ODg0NSAyNi41MDEwNjUyNSA1LjExMTM0OTAxIDIzLjI0MjE4NzUgNS4wOTc2NTYyNSBDMjIuMjQ3NjEwMzIgNS4wOTU1MzM4MyAyMi4yNDc2MTAzMiA1LjA5NTUzMzgzIDIxLjIzMjk0MDY3IDUuMDkzMzY4NTMgQzE5LjExMzU4MTM3IDUuMDg3NzY3NTQgMTYuOTk0MzI3NDEgNS4wNzUyMTUgMTQuODc1IDUuMDYyNSBDMTMuNDM4ODAzNjEgNS4wNTc0ODUxMiAxMi4wMDI2MDU1NiA1LjA1MjkyMjE5IDEwLjU2NjQwNjI1IDUuMDQ4ODI4MTIgQzcuMDQ0MjM2NTUgNS4wMzc3OTc4MiAzLjUyMjEyODU1IDUuMDIwNTMyNTkgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTQ5LDcyKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjIxNzQ5MjE5IC0wLjA3NDE5MTM0IDguNDM0NjM4MTEgLTAuMTI4NjIwNCAxMi42NTI1ODc4OSAtMC4xNjQ3OTQ5MiBDMTQuMDg3MjI1NTIgLTAuMTc5ODc1ODkgMTUuNTIxODE3MDggLTAuMjAwMzQzOCAxNi45NTYyOTg4MyAtMC4yMjYzMTgzNiBDMTkuMDE5MTU4NTkgLTAuMjYyNzM0MzcgMjEuMDgxNDA4NTggLTAuMjc5NzMyNDMgMjMuMTQ0NTMxMjUgLTAuMjkyOTY4NzUgQzI1LjAwNjIxOTQ4IC0wLjMxNjUzNDQyIDI1LjAwNjIxOTQ4IC0wLjMxNjUzNDQyIDI2LjkwNTUxNzU4IC0wLjM0MDU3NjE3IEMzMCAwIDMwIDAgMzEuOTI4NDY2OCAxLjM5MzMxMDU1IEMzMyAzIDMzIDMgMzMgNSBDMjIuMTEgNSAxMS4yMiA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0OSw3OSkiLz4KPHBhdGggZD0iTTAgMCBDMC42NiAwIDEuMzIgMCAyIDAgQzIuMDg2MzY3MTkgMC41Njg0NzY1NiAyLjE3MjczNDM3IDEuMTM2OTUzMTIgMi4yNjE3MTg3NSAxLjcyMjY1NjI1IEMzLjM1MjcwNTM2IDcuNzE4MDc4MSA1LjI4MTQzMTU2IDExLjIwNTAwMzg1IDkgMTYgQzkgMTYuNjYgOSAxNy4zMiA5IDE4IEM4LjI3NTU0Njg3IDE3Ljg0NjYwMTU2IDcuNTUxMDkzNzUgMTcuNjkzMjAzMTIgNi44MDQ2ODc1IDE3LjUzNTE1NjI1IEM0LjA3MzM2NjA3IDE2Ljk3MzE0OTc3IDQuMDczMzY2MDcgMTYuOTczMTQ5NzcgMS41NzAzMTI1IDE2Ljc0NjA5Mzc1IEMtNC45MDkwNjM1OCAxNS45Mjg0MDg5MSAtNy44MDY5NTYzOCAxMy44OTExMzYyMyAtMTEuODIwMzEyNSA4Ljc3NzM0Mzc1IEMtMTMgNyAtMTMgNyAtMTMgNiBDLTYuMzc1IDUuODc1IC02LjM3NSA1Ljg3NSAtMyA3IEMtMi44NzYyNSA2LjQwMTg3NSAtMi43NTI1IDUuODAzNzUgLTIuNjI1IDUuMTg3NSBDLTIgMyAtMiAzIDAgMCBaICIgZmlsbD0iI0YyRjdGNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5NCw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMSAyIDEgMiAwLjkzNzUgNS44MTI1IEMwLjg3OTY0ODA4IDkuMzg2NDYzMTggMS42NDA2MzE3NyAxMS42ODY1Mzk5NCAzIDE1IEMzLjQ3NzIyODgxIDE5LjM3NDU5NzM5IDMuNDk4NjQwNDQgMjEuMjg5ODE1MTMgMC45Mzc1IDI0LjkzNzUgQy0xLjA1MTY1MDY5IDI4LjA4MTY0MTQxIC0xLjI4MzkwMDM2IDI4LjY1NDU4MTU5IC0wLjkzNzUgMzIuMTI1IEMtMC4wNDE1OTEyMiAzNS44MjgwODk2MSAwLjc4Mzk2MDg3IDM3LjEwOTUxNDE4IDMgNDAgQzMuNjQwNzA0NzggNDQuOTEyMDY5OTQgMi4yODAwNjUxNiA0Ny43MTM0Nzc1IDAgNTIgQy0wLjY5OTA3NDE0IDU0LjczNTcyNTg1IC0wLjY5OTA3NDE0IDU0LjczNTcyNTg1IC0xIDU3IEMtMS45OSA1NyAtMi45OCA1NyAtNCA1NyBDLTMuMjQ3ODEzNDEgNTAuNDgxMDQ5NTYgLTMuMjQ3ODEzNDEgNTAuNDgxMDQ5NTYgLTEuOTM3NSA0Ny45Mzc1IEMtMC41NTU0NjYzNyA0NS4wODEyOTcxNyAtMC42Mjk3ODY4MiA0My4xNDY4MTIgLTEgNDAgQy0xLjkyMzQ0MjExIDM4LjIzNzkyNDggLTEuOTIzNDQyMTEgMzguMjM3OTI0OCAtMy4wNjI1IDM2LjUgQy00LjcyOTM3MDExIDMzLjgyMjM2ODIyIC01LjAwMjU5OTI2IDMzLjEzMjU2MjEgLTQuOTM3NSAyOS44MTI1IEMtNCAyNyAtNCAyNyAtMi40Mzc1IDI1LjE4NzUgQy0wLjE2NjczOTU4IDIxLjczMTk5NTAyIC0wLjYxNDU0MzE5IDE4LjAyNTA1ODY1IC0xIDE0IEMtMS4zMyAxMy4wMSAtMS42NiAxMi4wMiAtMiAxMSBDLTIuMTY3OTY4NzUgOS4wNjI1IC0yLjE2Nzk2ODc1IDkuMDYyNSAtMi4xODc1IDcgQy0yLjIwMTY3OTY5IDYuMzE5Mzc1IC0yLjIxNTg1OTM4IDUuNjM4NzUgLTIuMjMwNDY4NzUgNC45Mzc1IEMtMiAzIC0yIDMgMCAwIFogIiBmaWxsPSIjMTQ3MDRCIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMxMi44NyAwIDI1Ljc0IDAgMzkgMCBDMzUuMDM1MDk2OTkgMy45NjQ5MDMwMSAzNS4wMzUwOTY5OSAzLjk2NDkwMzAxIDMwLjY1MTg1NTQ3IDQuMTEzNTI1MzkgQzI5LjIyMzYyMzAzIDQuMTEzMzY2ODggMjcuNzk1Mzg0NTggNC4xMDc3MDczNSAyNi4zNjcxODc1IDQuMDk3NjU2MjUgQzI1LjIzOTQzNDA1IDQuMDk1NTMzODMgMjUuMjM5NDM0MDUgNC4wOTU1MzM4MyAyNC4wODg4OTc3MSA0LjA5MzM2ODUzIEMyMS42ODQyMjQ5IDQuMDg3NzY0NjUgMTkuMjc5NjQ0NzMgNC4wNzUyMTE1NyAxNi44NzUgNC4wNjI1IEMxNS4yNDYwOTUwOSA0LjA1NzQ4NTUgMTMuNjE3MTg4NzMgNC4wNTI5MjI1IDExLjk4ODI4MTI1IDQuMDQ4ODI4MTIgQzcuOTkyMTUxNzMgNC4wMzc3OTM5NyAzLjk5NjA5MTU4IDQuMDIwNTI2NzkgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0MSwxMDIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNDQ1MDA2NiAyLjkzNTY2NDIzIDMuNTc0ODI0NjQgNS4yNTc0NDI5NCAzLjk2ODc1IDkuNTk3NjU2MjUgQzMuOTk4ODM1MiAxMS45MTA0NTU4IDMuNzA3ODg2MzggMTMuODY2Mzg3MzUgMy4yNSAxNi4xMjUgQzIuOTg0MTIwNjEgMjAuMjQ2MTMwNTMgMy4xMDk4NDA0MiAyMC42ODU1NzQyMiA1LjQzNzUgMjMuNzUgQzUuOTEwNTg1OTQgMjQuMjgxMDkzNzUgNi4zODM2NzE4NyAyNC44MTIxODc1IDYuODcxMDkzNzUgMjUuMzU5Mzc1IEM4IDI3IDggMjcgOCAzMSBDMTAuMzEgMzEuNjYgMTIuNjIgMzIuMzIgMTUgMzMgQzE1IDMzLjk5IDE1IDM0Ljk4IDE1IDM2IEMxNi4zMiAzNi42NiAxNy42NCAzNy4zMiAxOSAzOCBDMTkgMzguOTkgMTkgMzkuOTggMTkgNDEgQzE3LjkxNzE4NzUgNDAuNDc0MDYyNSAxNy45MTcxODc1IDQwLjQ3NDA2MjUgMTYuODEyNSAzOS45Mzc1IEMxNC4wNzY4ODc3IDM4Ljc1NjQ4MjEyIDE0LjA3Njg4NzcgMzguNzU2NDgyMTIgMTEuNSAzOS41NjI1IEM5IDQwIDkgNDAgNi4xODc1IDM4LjU2MjUgQzUuNDY1NjI1IDM4LjA0Njg3NSA0Ljc0Mzc1IDM3LjUzMTI1IDQgMzcgQzQuMTk1MjkyOTcgMzYuMTY0Njg3NSA0LjE5NTI5Mjk3IDM2LjE2NDY4NzUgNC4zOTQ1MzEyNSAzNS4zMTI1IEM1LjMwMzg2MTMxIDMwLjQ2NzI5MzAxIDUuMzAzODYxMzEgMzAuNDY3MjkzMDEgMy45MTc5Njg3NSAyNS44NjcxODc1IEMyLjk3NDUwMDc2IDI0LjU0MTY1Mzk2IDIuMDI5MTkzNjQgMjMuMjE3NDI3NDggMS4wODIwMzEyNSAyMS44OTQ1MzEyNSBDLTAuNjgwNTA5NzQgMTguODA4NDkzNzggMC4yMzQyODE5NyAxNi4zNTczNzkwNyAxIDEzIEMxLjA4MjI5MTcgMTEuNDM5MTEyMjkgMS4xMjI0NDU5OSA5Ljg3NTU1MzM3IDEuMTI1IDguMzEyNSBDMS4xMjg4NjcxOSA3LjIyMzg4NjcyIDEuMTI4ODY3MTkgNy4yMjM4ODY3MiAxLjEzMjgxMjUgNi4xMTMyODEyNSBDMC45OTc4MDczMiAzLjk2NTExMDU5IDAuNTg3NzI5NCAyLjA2NjM4MTk1IDAgMCBaICIgZmlsbD0iI0VGRjVGMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3OCw2MykiLz4KPHBhdGggZD0iTTAgMCBDOS4yNCAwIDE4LjQ4IDAgMjggMCBDMjggMS42NSAyOCAzLjMgMjggNSBDMTguNzYgNSA5LjUyIDUgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTEwLDk0KSIvPgo8cGF0aCBkPSJNMCAwIEM5LjI0IDAgMTguNDggMCAyOCAwIEMyOCAxLjY1IDI4IDMuMyAyOCA1IEMxOC43NiA1IDkuNTIgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzkuMjQgMCAxOC40OCAwIDI4IDAgQzI4IDEuNjUgMjggMy4zIDI4IDUgQzE4Ljc2IDUgOS41MiA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUxMCw1MCkiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjc1NDE0MjM1IDIyLjQ5MDU2OTM3IC0wLjI2NzY1MDE5IDI1LjU4MjA3Mjg1IC00IDMxIEMtMy45Mjc0OTIxNCAzNC41NTI4ODQ5NCAtMy4zMTc3NDE2NCAzNi40OTE2MTMzNyAtMS40Mzc1IDM5LjUgQzAuNDMyMjMyNTQgNDIuNzUxNzA4NzYgMC40OTI4MjA0OCA0NC4yNjg2NDQ5NCAwIDQ4IEMtMS4xNzkwNDA1IDUxLjQwNDQxNTYzIC0yLjU0MTk2MzU0IDU0LjcwNjM5OTc4IC00IDU4IEMtNC45OSA1Ny42NyAtNS45OCA1Ny4zNCAtNyA1NyBDLTYuNTc1MjcyMSA1NC40NTE2MzI2IC02LjE4NjYwNjY3IDUyLjM0MDI4Mjc1IC00LjkzNzUgNTAuMDYyNSBDLTMuNjI5MDkzODEgNDcuMTg0MDA2MzkgLTMuNjg2MTgxNDMgNDUuMTM4MTg1NzMgLTQgNDIgQy00LjQ5NSA0MS4wMSAtNC45OSA0MC4wMiAtNS41IDM5IEMtNy4yMTc0NTA3IDM1LjU2NTA5ODYgLTcuNTUyMzU3MzMgMzMuNzg3NTkzMTMgLTcgMzAgQy01Ljk4MjkyOTY5IDI4LjY2Nzc1MzkxIC01Ljk4MjkyOTY5IDI4LjY2Nzc1MzkxIC00Ljk0NTMxMjUgMjcuMzA4NTkzNzUgQy0yLjU3NzgwMDU3IDIzLjI4MTkyMTg1IC0yLjgyMDAzNjc0IDIwLjUwMjM1NDg2IC0zLjQzNzUgMTYuMDYyNSBDLTQuMjQwNTQ3MzkgMTAuMDc2NjY0NDYgLTMuNzgyNzc2OTMgNi4zMjc0MTg5MSAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogIiBmaWxsPSIjRTRFRUVBIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ4LDYwKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjkwOTM4NzAzIDMuNzM5NDEzNjggMy45MDkzODcwMyAzLjczOTQxMzY4IDQuMTMyODEyNSA2Ljg0NzY1NjI1IEM0LjEzMDIzNDM4IDcuNTc4NTU0NjkgNC4xMjc2NTYyNSA4LjMwOTQ1MzEzIDQuMTI1IDkuMDYyNSBDNC4xMjI0MjE4OCA5Ljg2MzAwNzgxIDQuMTE5ODQzNzUgMTAuNjYzNTE1NjMgNC4xMTcxODc1IDExLjQ4ODI4MTI1IEM0LjAwMTcwMTk1IDEzLjk2MzUyMTY0IDMuNjUxMDI0NzkgMTYuMzA3MDIyNDggMy4yNSAxOC43NSBDMi43NjIwMjY5NSAyMi40MjA4OTQxOCAyLjc2MjAyNjk1IDIyLjQyMDg5NDE4IDQuOTM3NSAyNS41NjI1IEM1Ljk1ODQzNzUgMjYuNzY5MDYyNSA1Ljk1ODQzNzUgMjYuNzY5MDYyNSA3IDI4IEM4LjA0NzU1MTk0IDMzLjMxNDE0MzcgNi44NDIyMzI0NCAzNi40OTk3OTg2MyA0IDQxIEMzLjM3MDk3MDM5IDQ1LjkyNzM5ODU3IDQuNzQ3ODkzNDUgNDguNjgzNDYyNDQgNyA1MyBDNyA1NC4zMiA3IDU1LjY0IDcgNTcgQzQgNTYgNCA1NiAyLjc5Njg3NSA1My45MjU3ODEyNSBDLTAuNzYwMjg1NzMgNDUuMDQ2MTUyNDIgLTAuNzYwMjg1NzMgNDUuMDQ2MTUyNDIgMSA0MCBDMS41MTU2MjUgMzkuMTc1IDIuMDMxMjUgMzguMzUgMi41NjI1IDM3LjUgQzQuMzg3MDI3NTYgMzQuMzI2OTA4NTggNC41MTY0NDExOCAzMi42MTUwODgyNSA0IDI5IEMzLjM0IDI4LjAzMDYyNSAyLjY4IDI3LjA2MTI1IDIgMjYuMDYyNSBDLTAuNDEwNTc3ODIgMjIuMzcxMzAyNzIgLTAuNDA4MzI3NTUgMjAuMzI4MjcxOTkgMCAxNiBDMC4zMyAxNS4wMSAwLjY2IDE0LjAyIDEgMTMgQzEuMDkyNDczODEgMTEuNTIzMTM4ODkgMS4xMjk5OTA3MSAxMC4wNDIyNDQ5OSAxLjEyNSA4LjU2MjUgQzEuMTI4ODY3MTkgNy40MTk3NDYwOSAxLjEyODg2NzE5IDcuNDE5NzQ2MDkgMS4xMzI4MTI1IDYuMjUzOTA2MjUgQzEuMDAyNzYwMTUgNC4wNDY4NDE0MSAwLjYwODU2MTk5IDIuMTIwMzA3MjQgMCAwIFogIiBmaWxsPSIjRTZGMEVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc0LDYxKSIvPgo8cGF0aCBkPSJNMCAwIEM4LjI1IDAgMTYuNSAwIDI1IDAgQzI1LjY2IDEuNjUgMjYuMzIgMy4zIDI3IDUgQzE4LjA5IDUgOS4xOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU4Nyw1NykiLz4KPHBhdGggZD0iTTAgMCBDOC4yNSAwIDE2LjUgMCAyNSAwIEMyNSAxLjY1IDI1IDMuMyAyNSA1IEMxNi40MiA1IDcuODQgNSAtMSA1IEMtMC42NyAzLjM1IC0wLjM0IDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjQsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyLjMzIDEuNjUgMi42NiAzLjMgMyA1IEM0LjY1IDUgNi4zIDUgOCA1IEM3LjAxIDYuNDg1IDcuMDEgNi40ODUgNiA4IEM1LjgzMjg2NDMxIDEwLjYyNTMxNTI0IDUuODMyODY0MzEgMTAuNjI1MzE1MjQgNiAxMyBDNi42NiAxMy4zMyA3LjMyIDEzLjY2IDggMTQgQzcuMzQgMTQgNi42OCAxNCA2IDE0IEM2IDE0LjY2IDYgMTUuMzIgNiAxNiBDMi43IDE2IC0wLjYgMTYgLTQgMTYgQy00IDE1LjM0IC00IDE0LjY4IC00IDE0IEMtNC42NiAxMy42NyAtNS4zMiAxMy4zNCAtNiAxMyBDLTUuMzQgMTMgLTQuNjggMTMgLTQgMTMgQy0zLjc5OTEzNTU3IDkuMjg0MDA4MDkgLTMuODQ4MDU2MyA4LjIyNzkxNTU1IC02IDUgQy00LjM1IDUgLTIuNyA1IC0xIDUgQy0wLjY3IDMuMzUgLTAuMzQgMS43IDAgMCBaICIgZmlsbD0iI0Q4RTdFMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2MCwzNykiLz4KPHBhdGggZD0iTTAgMCBDMCAxLjY1IDAgMy4zIDAgNSBDLTAuNzYzMTI1IDQuNzczMTI1IC0xLjUyNjI1IDQuNTQ2MjUgLTIuMzEyNSA0LjMxMjUgQy0zLjE5OTM3NSA0LjIwOTM3NSAtNC4wODYyNSA0LjEwNjI1IC01IDQgQy02LjgzNTQ3OTkgNS4zMzM3ODU3NSAtNi44MzU0Nzk5IDUuMzMzNzg1NzUgLTggNyBDLTcuMzQgOC42NSAtNi42OCAxMC4zIC02IDEyIEMtMy42OSAxMiAtMS4zOCAxMiAxIDEyIEMxIDEzLjMyIDEgMTQuNjQgMSAxNiBDLTUuMjAwODE5NjcgMTcuMzM3NDMxNjkgLTUuMjAwODE5NjcgMTcuMzM3NDMxNjkgLTguODEyNSAxNS44MTI1IEMtMTEuMTQwMzY2MTcgMTMuODgzNjk2NiAtMTIuMTcyMjU2MTEgMTIuODk3MTAzNjEgLTEzIDEwIEMtMTIuODU1NzAyNCA2LjUzNjg1NzUgLTEyLjM0NTYyNDk3IDQuNTI1MzQ5OTYgLTEwLjQzNzUgMS42MjUgQy02Ljg1NzUyODY3IC0wLjc2MTY0NzU1IC00LjI0ODUyOTc0IC0wLjI4MzIzNTMyIDAgMCBaICIgZmlsbD0iIzAwODQyOSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE5Miw5MykiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQzEuNjUgMyAzLjMgMyA1IDMgQzUgNC4zMiA1IDUuNjQgNSA3IEMzLjM1IDcgMS43IDcgMCA3IEMwIDkuOTcgMCAxMi45NCAwIDE2IEMxLjY1IDE1LjY3IDMuMyAxNS4zNCA1IDE1IEM1IDE2LjMyIDUgMTcuNjQgNSAxOSBDMS43MTMwMzc2NyAxOS43OTk1MzEzOCAwLjI4OTc2ODA4IDIwLjA5NjU4OTM2IC0zIDE5IEMtNC4yNjIzNzczMSAxNi40NzUyNDUzOCAtNC4wOTg1NjQwNCAxNC42ODc5OTUzNCAtNC4wNjI1IDExLjg3NSBDLTQuMDUzNDc2NTYgMTAuOTY0OTIxODggLTQuMDQ0NDUzMTMgMTAuMDU0ODQzNzUgLTQuMDM1MTU2MjUgOS4xMTcxODc1IEMtNC4wMjM1NTQ2OSA4LjQxODUxNTYyIC00LjAxMTk1MzEzIDcuNzE5ODQzNzUgLTQgNyBDLTQuOTkgNyAtNS45OCA3IC03IDcgQy0zLjg2MjA2ODk3IDAgLTMuODYyMDY4OTcgMCAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxMzcsOTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMS42NSAwLjY2IDMuMyAxIDUgQzAuMDUxMjUgNC43OTM3NSAtMC44OTc1IDQuNTg3NSAtMS44NzUgNC4zNzUgQy0zLjQyMTg3NSA0LjE4OTM3NSAtMy40MjE4NzUgNC4xODkzNzUgLTUgNCBDLTcuMzQ5NzM4MTggNS44OTc1NTE0NCAtNy4zNDk3MzgxOCA1Ljg5NzU1MTQ0IC03LjEyNSA5LjEyNSBDLTcuMDYzMTI1IDEwLjU0ODEyNSAtNy4wNjMxMjUgMTAuNTQ4MTI1IC03IDEyIEMtNC4zNiAxMiAtMS43MiAxMiAxIDEyIEMxIDEzLjMyIDEgMTQuNjQgMSAxNiBDLTUuMzI5OTc5ODggMTcuMjE3MzAzODIgLTUuMzI5OTc5ODggMTcuMjE3MzAzODIgLTguMzEyNSAxNi4yNSBDLTEwIDE1IC0xMCAxNSAtMTIgMTIgQy0xMi40NDUwNTU3NiA3Ljk5NDQ5ODEzIC0xMi4zNDMxOTE2NyA1LjY3MjA4MzY5IC0xMC41IDIuMDYyNSBDLTYuODg4MjI0MDkgLTAuOTE3MjE1MTMgLTQuNTg5MTk0MjEgLTAuMzgyNDMyODUgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTIyLDkzKSIvPgo8cGF0aCBkPSJNMCAwIEM3LjU5IDAgMTUuMTggMCAyMyAwIEMyMy4zMyAxLjY1IDIzLjY2IDMuMyAyNCA1IEMxNi4wOCA1IDguMTYgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1ODcsNTApIi8+CjxwYXRoIGQ9Ik0wIDAgQzcuMjYgMCAxNC41MiAwIDIyIDAgQzIyIDEuNjUgMjIgMy4zIDIyIDUgQzE0LjQxIDUgNi44MiA1IC0xIDUgQy0wLjY3IDMuMzUgLTAuMzQgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYyNyw1MCkiLz4KPHBhdGggZD0iTTAgMCBDMy45NiAwIDcuOTIgMCAxMiAwIEMxMiAzLjY2NjY2NjY3IDEyIDcuMzMzMzMzMzMgMTIgMTEgQzguMDQgMTEgNC4wOCAxMSAwIDExIEMwIDcuMzMzMzMzMzMgMCAzLjY2NjY2NjY3IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc4MiwxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzkuMjQgMCAxOC40OCAwIDI4IDAgQzI4IDEuMzIgMjggMi42NCAyOCA0IEMxOC43NiA0IDkuNTIgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTEwLDEwMikiLz4KPHBhdGggZD0iTTAgMCBDMCAxLjY1IDAgMy4zIDAgNSBDLTAuNTU1NTg1OTQgNC41MTQwMjM0NCAtMS4xMTExNzE4OCA0LjAyODA0Njg4IC0xLjY4MzU5Mzc1IDMuNTI3MzQzNzUgQy00LjM3OTY1MzUgMS43NDk2NzE5NyAtNS44NjQwNjM4NiAxLjU2NzMyNDE5IC05LjA2MjUgMS41NjI1IEMtOS45MTk3MjY1NiAxLjU0MzE2NDA2IC0xMC43NzY5NTMxMyAxLjUyMzgyODEzIC0xMS42NjAxNTYyNSAxLjUwMzkwNjI1IEMtMTQuMTc3NTgwNDEgMS43OTY0NDEzNyAtMTQuMTc3NTgwNDEgMS43OTY0NDEzNyAtMTUuODA4NTkzNzUgNC4wMjczNDM3NSBDLTE2LjM5ODMzOTg0IDUuMDAzODA4NTkgLTE2LjM5ODMzOTg0IDUuMDAzODA4NTkgLTE3IDYgQy0xNS4wMiA2IC0xMy4wNCA2IC0xMSA2IEMtMTAuNjcgNy42NSAtMTAuMzQgOS4zIC0xMCAxMSBDLTExLjMyIDExIC0xMi42NCAxMSAtMTQgMTEgQy0xNCAxMC4zNCAtMTQgOS42OCAtMTQgOSBDLTE1LjMyIDkgLTE2LjY0IDkgLTE4IDkgQy0xOC4zMyA3LjM1IC0xOC42NiA1LjcgLTE5IDQgQy0xOS42NiA0LjY2IC0yMC4zMiA1LjMyIC0yMSA2IEMtMjEgNC4wMiAtMjEgMi4wNCAtMjEgMCBDLTEzLjk3OTM2NDY0IC0yLjM5MDAwMzUzIC02Ljg1MjIxNDU0IC0zLjUzNjYyNjg2IDAgMCBaICIgZmlsbD0iIzE5NzM0RiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw1NykiLz4KPHBhdGggZD0iTTAgMCBDNi45MyAwIDEzLjg2IDAgMjEgMCBDMjEgMS42NSAyMSAzLjMgMjEgNSBDMTQuMDcgNSA3LjE0IDUgMCA1IEMwIDMuMzUgMCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjI5LDk0KSIvPgo8cGF0aCBkPSJNMCAwIEMwIDAuOTkgMCAxLjk4IDAgMyBDLTAuOTkgMyAtMS45OCAzIC0zIDMgQy0zIDMuNjYgLTMgNC4zMiAtMyA1IEMtMi4wMSA1LjMzIC0xLjAyIDUuNjYgMCA2IEMwIDcuMzIgMCA4LjY0IDAgMTAgQy02LjYyNSAxMi44NzUgLTYuNjI1IDEyLjg3NSAtMTAgMTQgQy0xMS4xOTI4NzQxMSAxMC4xMjMxNTkxMyAtMTIgNy4wODM3ODA3NyAtMTIgMyBDLTEwLjc1MzM2NjY5IDIuNDkxNjY0MDkgLTkuNTAyNTA2MTMgMS45OTM2ODg1NSAtOC4yNSAxLjUgQy03LjU1MzkwNjI1IDEuMjIxNTYyNSAtNi44NTc4MTI1IDAuOTQzMTI1IC02LjE0MDYyNSAwLjY1NjI1IEMtNCAwIC00IDAgMCAwIFogIiBmaWxsPSIjMUM3NTUxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzI5LDgwKSIvPgo8cGF0aCBkPSJNMCAwIEM2LjYgMCAxMy4yIDAgMjAgMCBDMjAgMS42NSAyMCAzLjMgMjAgNSBDMTMuNCA1IDYuOCA1IDAgNSBDMCAzLjM1IDAgMS43IDAgMCBaICIgZmlsbD0iIzFFNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU4Nyw5NCkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzQgNy45MiA0IDE1Ljg0IDQgMjQgQzIuNjggMjQgMS4zNiAyNCAwIDI0IEMwIDE2LjA4IDAgOC4xNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNzcsODUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuNjA4NzUgLTAuMDIwNjI1IDMuMjE3NSAtMC4wNDEyNSA0Ljg3NSAtMC4wNjI1IEM1Ljc3OTkyMTg4IC0wLjA3NDEwMTU2IDYuNjg0ODQzNzUgLTAuMDg1NzAzMTIgNy42MTcxODc1IC0wLjA5NzY1NjI1IEMxMCAwIDEwIDAgMTIgMSBDMTEuMzQgMi4zMiAxMC42OCAzLjY0IDEwIDUgQzguMzUgNSA2LjcgNSA1IDUgQzQuNjcgOC42MyA0LjM0IDEyLjI2IDQgMTYgQzIuNjggMTYgMS4zNiAxNiAwIDE2IEMwIDEwLjcyIDAgNS40NCAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxNDksOTMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuMjcgMCAxMi41NCAwIDE5IDAgQzE4LjY3IDEuNjUgMTguMzQgMy4zIDE4IDUgQzEyLjM5IDUgNi43OCA1IDEgNSBDMC42NyAzLjM1IDAuMzQgMS43IDAgMCBaICIgZmlsbD0iIzFGNzBDMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTYwOSw3OSkiLz4KPHBhdGggZD0iTTAgMCBDNi45MyAwIDEzLjg2IDAgMjEgMCBDMjEgMS4zMiAyMSAyLjY0IDIxIDQgQzEzLjc0IDQgNi40OCA0IC0xIDQgQy0wLjY3IDIuNjggLTAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjEsNjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuODEyNSAyLjE4NzUgMC44MTI1IDIuMTg3NSAxIDUgQy0xLjEyNSA3Ljg3NSAtMS4xMjUgNy44NzUgLTQgMTAgQy02LjgxMjUgOS44MTI1IC02LjgxMjUgOS44MTI1IC05IDkgQy05Ljc1IDYuNzUgLTkuNzUgNi43NSAtMTAgNCBDLTcuMTk2NDEzNTIgLTAuMTQ5MzA3OTkgLTQuODI5NDYzOCAtMC40MzkwNDIxNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxMDgsNDApIi8+CjxwYXRoIGQ9Ik0wIDAgQzYuOTMgMCAxMy44NiAwIDIxIDAgQzIxIDEuMzIgMjEgMi42NCAyMSA0IEMxNC4wNyA0IDcuMTQgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjI5LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDNi42IDAgMTMuMiAwIDIwIDAgQzIwLjMzIDEuMzIgMjAuNjYgMi42NCAyMSA0IEMxNC4wNyA0IDcuMTQgNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTk1LDY1KSIvPgo8cGF0aCBkPSJNMCAwIEM2LjYgMCAxMy4yIDAgMjAgMCBDMjAgMS4zMiAyMCAyLjY0IDIwIDQgQzEzLjQgNCA2LjggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTg3LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDMC4zMyAwLjY2IDAuNjYgMS4zMiAxIDIgQzAuNjcgMi42NiAwLjM0IDMuMzIgMCA0IEMwLjAyMzc5MDQgNi4zMTEwNzg3OCAwLjAyMzc5MDQgNi4zMTEwNzg3OCAwLjMxMjUgOC44NzUgQzAuMzkxMTMyODEgOS43Mzg2NzE4NyAwLjQ2OTc2NTYzIDEwLjYwMjM0Mzc1IDAuNTUwNzgxMjUgMTEuNDkyMTg3NSBDMS4wMDMyMDcyNCAxNC4wMTc5MDQ3NSAxLjgxMjYwODMzIDE1Ljc0ODIxMzQgMyAxOCBDMy42ODc1MDI5NCAyMy4yNzA4NTU4NiAyLjE2OTQxODg1IDI1Ljg0MDEzNzc1IC0xIDMwIEMtMS42NiAyOS42NyAtMi4zMiAyOS4zNCAtMyAyOSBDLTIuNTA1IDI3Ljk3OTA2MjUgLTIuNTA1IDI3Ljk3OTA2MjUgLTIgMjYuOTM3NSBDLTAuNTQwNjAwMTQgMjIuNjUwNTEyOSAtMC4yNjA1MDE3MyAxOC44MDI1MjcwNCAtMiAxNC41NjI1IEMtMy40NjUwNTgyOSAxMC44MDgyODgxMiAtMy4zMjAyMDE1OSA4LjAzNDU0MDAyIC0zIDQgQy0xLjUgMS41IC0xLjUgMS41IDAgMCBaICIgZmlsbD0iI0U1RUZFQiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1MSw2MCkiLz4KPHBhdGggZD0iTTAgMCBDMC4zMyAwIDAuNjYgMCAxIDAgQzAuOTg4Mzk4NDQgMC43NTAyMzQzNyAwLjk3Njc5Njg3IDEuNTAwNDY4NzUgMC45NjQ4NDM3NSAyLjI3MzQzNzUgQzAuOTE5NjU0NTMgNy4zOTkxODY2NiAwLjk4NDI4NjYxIDEyLjMwMTE4MTk1IDEuNzUgMTcuMzc1IEMyLjE5NjY0NjM5IDIxLjE0NzM1MTI3IDIuMTA3NDI3NTkgMjEuODEwMjExMjYgMC4xMjUgMjUuMzEyNSBDLTAuOTI2ODc1IDI2LjY0MjgxMjUgLTAuOTI2ODc1IDI2LjY0MjgxMjUgLTIgMjggQy0yLjc4MjE1NTg4IDMwLjcyODI1MDQgLTIuNzgyMTU1ODggMzAuNzI4MjUwNCAtMyAzMyBDLTMuOTkgMzMgLTQuOTggMzMgLTYgMzMgQy01LjY2Mzk0OTIgMjkuMzg3NDUzODUgLTUuNDU0NzA0MzIgMjcuNDg1NTg5OSAtMi45Mjk2ODc1IDI0Ljc4OTA2MjUgQy0wLjM4MTE3MzczIDIxLjEwNTU4MzA5IC0wLjgyNDUyNDMzIDE4LjI5NzIzMDcyIC0xLjM3NSAxNC4wNjI1IEMtMS45OTMyNTI0NiA4Ljg4OTQ2NTc5IC0yLjA0NDM3NzU4IDQuOTExMTE3NTYgMCAwIFogIiBmaWxsPSIjMkE3RDVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQ0LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjE2MTE1Nzc2IDEuMzY5ODM1MDMgMy45OTI3MDkyIDEuOTg5MDYzOCA2IDUgQzYuNTMwNzQ3NDEgMTAuNTE5NzczMDggNS4zMDE0OTUxMSAxNC4wMjg3NzA1NSAzIDE5IEMyLjMwODU5NDc4IDIxLjc3ODg4NjEzIDIuMzA4NTk0NzggMjEuNzc4ODg2MTMgMiAyNCBDMS4wMSAyNCAwLjAyIDI0IC0xIDI0IEMtMS4yNTgxMzMwMiAyMC4zODYxMzc3NCAtMS4xNjgxNTY2NyAxOC4zMjkzMDY4IDAuNSAxNS4wNjI1IEMyLjczMzE5NzQyIDEwLjUwMzA1NTI2IDIuNjIzNDM0NjEgNi44MzEzMzkxNiAxIDIuMDYyNSBDMC42NyAxLjM4MTg3NSAwLjM0IDAuNzAxMjUgMCAwIFogIiBmaWxsPSIjMTc3MjREIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzUxLDk3KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjMzIDAuOTkgMC42NiAxLjk4IDEgMyBDMC41MDUgMy45MDc1IDAuMDEgNC44MTUgLTAuNSA1Ljc1IEMtMi4zNzE1ODI0MSA5LjgwNTA5NTIzIC0yLjA1NTkwNDQyIDExLjcwMDk2MDU3IC0xIDE2IEMtMC4wODA4Mzc4IDE4LjM3NzMwOTU2IDAuOTUxMzM0NzMgMjAuNjc0Njk4NzUgMiAyMyBDMiAyMy42NiAyIDI0LjMyIDIgMjUgQzEuMDEgMjUgMC4wMiAyNSAtMSAyNSBDLTEuODcyNzk4NjIgMjMuMTMzNjAwMTkgLTIuNzIyNTEwMjcgMjEuMjU2MzkzODkgLTMuNTYyNSAxOS4zNzUgQy00LjI3NTk5NjA5IDE3LjgwODc4OTA2IC00LjI3NTk5NjA5IDE3LjgwODc4OTA2IC01LjAwMzkwNjI1IDE2LjIxMDkzNzUgQy02LjEzMjU2NzY4IDEyLjU3MjY2NDE5IC02LjAzOTIzNjQyIDEwLjYzNzMyNzQ1IC01IDcgQy0zLjU1NDMxMTQ1IDQuNDMwOTQwMzUgLTEuODIzMDY5ODYgMi4zMzcyNjkwNSAwIDAgWiAiIGZpbGw9IiMxMzZGNEEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzcsOTQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEM1LjE4NDE5OTU5IDMuNzk2NTQ1NjcgNS4zODczNDU0OCA3LjExNjc2MjIgNS4yMzgyODEyNSAxMS44NjMyODEyNSBDNC45NDYwNDkxMyAxNC40ODM3ODg5NyA0LjA0MjM4MTk1IDE2LjU4OTQ5MTczIDMgMTkgQzIuNzkzNDQ5MzQgMjIuNDQyNTEwOTcgMi45MDYxNjA2OSAyNC43MTg0ODIwOCA0IDI4IEMyLjA2MjUgMjcuNjI1IDIuMDYyNSAyNy42MjUgMCAyNyBDLTEuNDIxNTEzNDUgMjQuMTU2OTczMDkgLTEuMjM5MjI2MDYgMjIuMTY5NzQ1MjggLTEgMTkgQy0wLjUwNSAxNy44NjU2MjUgLTAuMDEgMTYuNzMxMjUgMC41IDE1LjU2MjUgQzIuNTQzNzYwMDggMTAuNzA4NTY5ODEgMi42OTcwMTA1NCA3LjA0NzQ2ODQ1IDEgMi4wNjI1IEMwLjY3IDEuMzgxODc1IDAuMzQgMC43MDEyNSAwIDAgWiAiIGZpbGw9IiNEREVBRTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjksNTkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMiAyIDIgMi4yNSA1LjMxMjUgQzIuMDE4NjM0NTIgOC43MjUxNDA4NCAxLjQ3NjUyODggMTAuOTU0NjU5MzUgMCAxNCBDLTAuNjYgMTMuMzQgLTEuMzIgMTIuNjggLTIgMTIgQy0xLjYyNSA4Ljg3NSAtMS42MjUgOC44NzUgLTEgNiBDLTMuMzEgNi4zMyAtNS42MiA2LjY2IC04IDcgQy04LjA0MjcyMSA1LjMzMzg4MDk1IC04LjA0MDYzODMyIDMuNjY2MTcxMTUgLTggMiBDLTUuOTU0NDc5NTggLTAuMDQ1NTIwNDIgLTIuNzI5NDE5MTQgMC4yMzk0MjI3MyAwIDAgWiAiIGZpbGw9IiMwQzZCNDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNjIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMjkgMCA4LjU4IDAgMTMgMCBDMTMgMS42NSAxMyAzLjMgMTMgNSBDOC43MSA1IDQuNDIgNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjksNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuMzIgMCAyLjY0IDAgNCAwIEM0IDUuMjggNCAxMC41NiA0IDE2IEMyLjY4IDE2IDEuMzYgMTYgMCAxNiBDMCAxMC43MiAwIDUuNDQgMCAwIFogIiBmaWxsPSIjMDA4NDI5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTY5LDkzKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzEyLjY3IDAuOTkgMTIuMzQgMS45OCAxMiAzIEMxMC42OCAzIDkuMzYgMyA4IDMgQzggNS42NCA4IDguMjggOCAxMSBDNy4wMSAxMSA2LjAyIDExIDUgMTEgQzUgOC4zNiA1IDUuNzIgNSAzIEMzLjM1IDIuNjcgMS43IDIuMzQgMCAyIEMwIDEuMzQgMCAwLjY4IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc0OSwxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTgsNzkpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS42NSAxMiAzLjMgMTIgNSBDOC4wNCA1IDQuMDggNSAwIDUgQzAgMy4zNSAwIDEuNyAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MTgsNzIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMzIDIuNjQgMyA1LjI4IDMgOCBDNS42NCA4IDguMjggOCAxMSA4IEMxMC42NyA4Ljk5IDEwLjM0IDkuOTggMTAgMTEgQzYuNyAxMSAzLjQgMTEgMCAxMSBDMCA3LjM3IDAgMy43NCAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3OTgsMTE2KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjEyMTE3MTg4IDAuNjAzMjgxMjUgMC4yNDIzNDM3NSAxLjIwNjU2MjUgMC4zNjcxODc1IDEuODI4MTI1IEMwLjUzNDc2NTYzIDIuNjI3MzQzNzUgMC43MDIzNDM3NSAzLjQyNjU2MjUgMC44NzUgNC4yNSBDMS4wMzc0MjE4OCA1LjAzODkwNjI1IDEuMTk5ODQzNzUgNS44Mjc4MTI1IDEuMzY3MTg3NSA2LjY0MDYyNSBDMS45MTcxMzYxNyA5LjAxNDkwNDM4IDEuOTE3MTM2MTcgOS4wMTQ5MDQzOCAzLjA2MjUgMTEuMDkzNzUgQzQuMzcxMjUzNjQgMTMuNzU0ODgyNCA0LjEzMjY4NDUxIDE2LjA4MDk0MDc2IDQgMTkgQzMuMDEgMTkgMi4wMiAxOSAxIDE5IEMwLjcxMTI1IDE3Ljc4MzEyNSAwLjQyMjUgMTYuNTY2MjUgMC4xMjUgMTUuMzEyNSBDLTAuNDgzNjM3NyAxMi44NDMxNjk5MSAtMS4xMzkxMzY4MSAxMC42Njc2MTc2MyAtMi4xMjUgOC4zMTI1IEMtMy4xMDE2MzIyIDUuNzMxNDAwNjMgLTMuMTU2Mzg1NjggMy43MzY3NDk0NSAtMyAxIEMtMSAwIC0xIDAgMCAwIFogIiBmaWxsPSIjMEU2QzQ3IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzY4LDEwMikiLz4KPHBhdGggZD0iTTAgMCBDNC45NSAwIDkuOSAwIDE1IDAgQzE0LjM0IDEuMzIgMTMuNjggMi42NCAxMyA0IEM5LjA0IDQgNS4wOCA0IDEgNCBDMC42NyAyLjY4IDAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MTEsODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjI1NDM5MjIgMC41MTc5MTk4OSA3LjI1MDczNjc2IDEuMDM2Mzk3MjcgMTAuODc1IDEuNTYyNSBDMTIuOTMwODIyNzEgMS44NzcxMDUwMiAxMi45MzA4MjI3MSAxLjg3NzEwNTAyIDE1IDIgQzE1IDMuNjUgMTUgNS4zIDE1IDcgQzkuNTQ1MjA4MTUgNi40MzE3OTI1MiA1LjA4OTQwNzQ0IDUuMDUzNjIwNTUgMCAzIEMwIDIuMDEgMCAxLjAyIDAgMCBaICIgZmlsbD0iI0VFRjRGMiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5MSw3MykiLz4KPHBhdGggZD0iTTAgMCBDMy42MyAwIDcuMjYgMCAxMSAwIEMxMSAyLjMxIDExIDQuNjIgMTEgNyBDMTAuMzQgNyA5LjY4IDcgOSA3IEM5IDUuNjggOSA0LjM2IDkgMyBDNy4wMiAzIDUuMDQgMyAzIDMgQzIuNjcgNC4zMiAyLjM0IDUuNjQgMiA3IEMxLjM0IDcgMC42OCA3IDAgNyBDMCA0LjY5IDAgMi4zOCAwIDAgWiAiIGZpbGw9IiNFODIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE4MTMsMTIwKSIvPgo8cGF0aCBkPSJNMCAwIEM0LjI5IDAgOC41OCAwIDEzIDAgQzEzIDEuMzIgMTMgMi42NCAxMyA0IEM4LjcxIDQgNC40MiA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRjcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MjksODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIuMzMgMS4zMiAxMi42NiAyLjY0IDEzIDQgQzguNzEgNCA0LjQyIDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU3Miw4NykiLz4KPHBhdGggZD0iTTAgMCBDMy40NDQ0NzI5OSAyLjkzNTIwOTUxIDMuNTc3ODc2MSA1LjI1NjU4Mjc0IDMuOTY0ODQzNzUgOS41OTc2NTYyNSBDMy45OTg0NTQwNiAxMS44OTQzNjEgMy43Mzc5MTUwOSAxMy44NzUxMjQzMyAzLjMxMjUgMTYuMTI1IEMyLjkwNDY5NjM3IDIxLjE4MTc2NSA0LjE4MDYwNDkgMjIuODk5MDYxNjcgNyAyNyBDNi4zNCAyNy4zMyA1LjY4IDI3LjY2IDUgMjggQy0wLjA2ODA5Mzg0IDIxLjI0ODM4NzEgLTAuMDY4MDkzODQgMjEuMjQ4Mzg3MSAwLjE4NzUgMTYuNTYyNSBDMC40NTU2MjUgMTUuMzg2ODc1IDAuNzIzNzUgMTQuMjExMjUgMSAxMyBDMS4wODIyOTE3IDExLjQzOTExMjI5IDEuMTIyNDQ1OTkgOS44NzU1NTMzNyAxLjEyNSA4LjMxMjUgQzEuMTI4ODY3MTkgNy4yMjM4ODY3MiAxLjEyODg2NzE5IDcuMjIzODg2NzIgMS4xMzI4MTI1IDYuMTEzMjgxMjUgQzAuOTk3ODA3MzIgMy45NjUxMTA1OSAwLjU4NzcyOTQgMi4wNjYzODE5NSAwIDAgWiAiIGZpbGw9IiNEMEUyREIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzgsNjMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMjkgMCA4LjU4IDAgMTMgMCBDMTIuNjcgMS4zMiAxMi4zNCAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU3Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0xLjU3OTY3ODA3IDMuNjc1MjgyMjMgLTMuMTYzOTE5MDMgNC4zMzk4OTY5NCAtNC43NSA1IEMtNi4wNzI1NzgxMyA1LjU1Njg3NSAtNi4wNzI1NzgxMyA1LjU1Njg3NSAtNy40MjE4NzUgNi4xMjUgQy0xMCA3IC0xMCA3IC0xNCA3IEMtMTQgNS42OCAtMTQgNC4zNiAtMTQgMyBDLTQuNTg5OTc3MjIgLTAuNDQ0MTkxMzQgLTQuNTg5OTc3MjIgLTAuNDQ0MTkxMzQgMCAwIFogIiBmaWxsPSIjRUZGNUYzIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzMxLDczKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzEyIDEuMzIgMTIgMi42NCAxMiA0IEM4LjA0IDQgNC4wOCA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1OTUsODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS4zMiAxMiAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTU0OSw4NykiLz4KPHBhdGggZD0iTTAgMCBDMy45NiAwIDcuOTIgMCAxMiAwIEMxMiAxLjMyIDEyIDIuNjQgMTIgNCBDOC4wNCA0IDQuMDggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjMUU3MEMwIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTE4LDg3KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzEyIDEuMzIgMTIgMi42NCAxMiA0IEM4LjA0IDQgNC4wOCA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1NDksNjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTIgMS4zMiAxMiAyLjY0IDEyIDQgQzguMDQgNCA0LjA4IDQgMCA0IEMwIDIuNjggMCAxLjM2IDAgMCBaICIgZmlsbD0iIzFFNzBDMCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTUxOCw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMy4zNzQ2MjcxNSAwLjU0NzIzNjgzIDUuMDgyMzUgMS4wNTQ5IDggMyBDNy4zNCA0Ljk4IDYuNjggNi45NiA2IDkgQzQgOCAyIDcgMCA2IEMwIDQuMDIgMCAyLjA0IDAgMCBaICIgZmlsbD0iIzFENzY1MiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5Myw5MykiLz4KPHBhdGggZD0iTTAgMCBDMCAzIDAgMyAtMSA1IEMtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAtMS4yMTM3NzcyMSAxMC42MDcwMzIxMyAwIDE2IEMwLjEyNzgxNzg2IDE4LjY3Mzk0OTY0IDAuMDQzOTE4NzEgMjEuMzIwOTU4NTcgMCAyNCBDLTAuNjYgMjQgLTEuMzIgMjQgLTIgMjQgQy0zLjcyNzI5MzA0IDE3LjI5MDY3OTkxIC00Ljc4MjM1NDYyIDEwLjgxODQwMzYgLTMgNCBDLTEuNDQ5MjE4NzUgMS43MTA5Mzc1IC0xLjQ0OTIxODc1IDEuNzEwOTM3NSAwIDAgWiAiIGZpbGw9IiNEOUU4RTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNDgsNjApIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuMzMgMCAwLjY2IDAgMSAwIEMxIDEuNjUgMSAzLjMgMSA1IEMxLjg4Njg3NSA0LjY5MDYyNSAyLjc3Mzc1IDQuMzgxMjUgMy42ODc1IDQuMDYyNSBDOS4xNjA2NzE0NiAyLjMwNjk1NDQ0IDkuMTYwNjcxNDYgMi4zMDY5NTQ0NCAxMiAyIEMxMi45OSAyLjY2IDEzLjk4IDMuMzIgMTUgNCBDMTQuNjcgNC42NiAxNC4zNCA1LjMyIDE0IDYgQzExLjY4MDI1NzY2IDYuNDE3NTUzNjIgOS4zNDIxNDIwNyA2LjczNTU2NDYgNyA3IEM1LjA1MDkzNzUgNy4yNzg0Mzc1IDUuMDUwOTM3NSA3LjI3ODQzNzUgMy4wNjI1IDcuNTYyNSBDMi4wNTE4NzUgNy43MDY4NzUgMS4wNDEyNSA3Ljg1MTI1IDAgOCBDMCA1LjM2IDAgMi43MiAwIDAgWiAiIGZpbGw9IiMxODcyNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMTcsNjgpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMzMzMzMzMzMgMCA2LjY2NjY2NjY3IDAgMTAgMCBDMTAgMS45OCAxMCAzLjk2IDEwIDYgQzcuMzYgNiA0LjcyIDYgMiA2IEMyIDQuNjggMiAzLjM2IDIgMiBDMS4zNCAyIDAuNjggMiAwIDIgQzAgMS4zNCAwIDAuNjggMCAwIFogIiBmaWxsPSIjMDA2NDNDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzg1LDExNykiLz4KPHBhdGggZD0iTTAgMCBDMi45NyAwIDUuOTQgMCA5IDAgQzguNjcgMS42NSA4LjM0IDMuMyA4IDUgQzUuNjkgNSAzLjM4IDUgMSA1IEMwLjY3IDMuMzUgMC4zNCAxLjcgMCAwIFogIiBmaWxsPSIjMUU3MEMxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNjE0LDk0KSIvPgo8cGF0aCBkPSJNMCAwIEMwIDAuOTkgMCAxLjk4IDAgMyBDLTMuNjMgNC4zMiAtNy4yNiA1LjY0IC0xMSA3IEMtMTEuMzMgNS42OCAtMTEuNjYgNC4zNiAtMTIgMyBDLTEwLjc1MzM2NjY5IDIuNDkxNjY0MDkgLTkuNTAyNTA2MTMgMS45OTM2ODg1NSAtOC4yNSAxLjUgQy03LjU1MzkwNjI1IDEuMjIxNTYyNSAtNi44NTc4MTI1IDAuOTQzMTI1IC02LjE0MDYyNSAwLjY1NjI1IEMtNCAwIC00IDAgMCAwIFogIiBmaWxsPSIjRUZGNUYyIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzI5LDgwKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjA3MDc3Mzc1IDMuMjEyMzIxMjUgMSA1LjYzOTM3ODA3IDEgOSBDMS4zMyA5Ljk5IDEuNjYgMTAuOTggMiAxMiBDMS4wMSAxMiAwLjAyIDEyIC0xIDEyIEMtMS4zMyAxMC4zNSAtMS42NiA4LjcgLTIgNyBDLTMuOTggNyAtNS45NiA3IC04IDcgQy03LjIzNjg3NSA2LjQwMTg3NSAtNi40NzM3NSA1LjgwMzc1IC01LjY4NzUgNS4xODc1IEMtMy42NTE2NDI1IDMuNTMwNDA2NjggLTEuODAyMTcyMSAxLjg5NzAyMzI2IDAgMCBaICIgZmlsbD0iIzBENkI0NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM2OCw3NSkiLz4KPHBhdGggZD0iTTAgMCBDMS4yMDE1NzEzMSAzLjYwNDcxMzkzIDEuNTQ5ODEzNDggNy4xMTUwMzA4OCAxLjg3NSAxMC44NzUgQzEuOTYwMDc4MTMgMTEuNTgyNjk1MzEgMi4wNDUxNTYyNSAxMi4yOTAzOTA2MyAyLjEzMjgxMjUgMTMuMDE5NTMxMjUgQzIuNDc2OTI2MjggMTcuMjE5MjgzNTEgMi4yMzk3Mzc5MiAxOC43MTA2NjExMyAtMC40OTIxODc1IDIyLjAwNzgxMjUgQy0xLjMxOTc2NTYyIDIyLjY2NTIzNDM3IC0yLjE0NzM0Mzc1IDIzLjMyMjY1NjI1IC0zIDI0IEMtMi4xMjUgMjAuMTI1IC0yLjEyNSAyMC4xMjUgLTEgMTkgQy0wLjkzOTY4OTYzIDE1LjM4NTE0NzQyIC0wLjk4MDA1NDkzIDExLjc4NDEzNTc2IC0xLjAzOTA2MjUgOC4xNjk5MjE4OCBDLTEuMTAwMTMzMTUgMi4yMDAyNjYyOSAtMS4xMDAxMzMxNSAyLjIwMDI2NjI5IDAgMCBaICIgZmlsbD0iI0RERUFFNSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0Miw2NSkiLz4KPHBhdGggZD0iTTAgMCBDMSAyIDEgMiAwLjkzNzUgNS42ODc1IEMwLjg2OTQ3NzA3IDkuODIxNzgyMyAxLjY5NjU0Mzg5IDEzLjA4OTYzMTY4IDMgMTcgQzIuMzQgMTcgMS42OCAxNyAxIDE3IEMwLjY3IDE4LjMyIDAuMzQgMTkuNjQgMCAyMSBDLTEuMzk3NzM2NjEgMTQuOTA5ODYxOSAtMi40MzkxOTg3NCA5LjI1ODU4MjExIC0yIDMgQy0xLjM0IDIuMDEgLTAuNjggMS4wMiAwIDAgWiAiIGZpbGw9IiMyMTc4NTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNDgsNjIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzQuMTk0Njk1NzEgMC41OTkyNDIyNCA4LjAwOTk5ODM0IDEuNTc0OTk5NDEgMTIgMyBDMTIgMy45OSAxMiA0Ljk4IDEyIDYgQzcuNjgyMjU0MiA1LjQ5MjAyOTkxIDMuOTY2OTc4ODYgNC44MDMxNzIyMSAwIDMgQzAgMi4wMSAwIDEuMDIgMCAwIFogIiBmaWxsPSIjRTdGMEVDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzkzLDgwKSIvPgo8cGF0aCBkPSJNMCAwIEMxLjY3NTQyOTc2IDAuMjg2MDQ4OTggMy4zNDM4NTM0MyAwLjYxNzgxMjMzIDUgMSBDNS44NDY4MTEzMyA2LjA4MDg2Nzk2IDYuMDkwMzgwOTkgMTAuODQ4MjgzNzcgNiAxNiBDNS4zNCAxNiA0LjY4IDE2IDQgMTYgQzMuOTUxMDE1NjMgMTUuNDA4MzIwMzEgMy45MDIwMzEyNSAxNC44MTY2NDA2MyAzLjg1MTU2MjUgMTQuMjA3MDMxMjUgQzMuMjYxOTU4IDcuODg5NzQ5MDkgMy4yNjE5NTggNy44ODk3NDkwOSAxIDIgQzAuMzQgMS42NyAtMC4zMiAxLjM0IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiMxNzcyNEUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzAsNTcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjA4ODEzMSAwLjgzNTA2MTE3IDMuNjA4ODEzMSAwLjgzNTA2MTE3IDUuODEyNSAtMC41IEM1LjgxMjUgMS4xNSA1LjgxMjUgMi44IDUuODEyNSA0LjUgQzMuNDc5MTY2NjcgNC4xNjY2NjY2NyAxLjE0NTgzMzMzIDMuODMzMzMzMzMgLTEuMTg3NSAzLjUgQy0yLjQ2NjI1IDMuMzU1NjI1IC0zLjc0NSAzLjIxMTI1IC01LjA2MjUgMy4wNjI1IEMtNi4wOTM3NSAyLjg3Njg3NSAtNy4xMjUgMi42OTEyNSAtOC4xODc1IDIuNSBDLTguNTE3NSAxLjg0IC04Ljg0NzUgMS4xOCAtOS4xODc1IDAuNSBDLTUuOTIyMjU5MDcgLTAuNDE4MzQ5MDEgLTMuMzE1NTMyMDkgLTAuNDc3MDk4NDIgMCAwIFogIiBmaWxsPSIjMUI3NDUxIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzk5LjE4NzUsNzEuNSkiLz4KPHBhdGggZD0iTTAgMCBDMi45NyAwIDUuOTQgMCA5IDAgQzguNjcgMS4zMiA4LjM0IDIuNjQgOCA0IEM1LjAzIDQgMi4wNiA0IC0xIDQgQy0wLjY3IDIuNjggLTAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiNEQ0VERTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIwNDAsOTIpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuOTYgMCA3LjkyIDAgMTIgMCBDMTEuNjcgMC45OSAxMS4zNCAxLjk4IDExIDMgQzcuNyAzIDQuNCAzIDEgMyBDMC42NyAyLjAxIDAuMzQgMS4wMiAwIDAgWiAiIGZpbGw9IiNFNzIwMjYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE3NjYsMTIwKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzExLjY3IDAuOTkgMTEuMzQgMS45OCAxMSAzIEM3LjcgMyA0LjQgMyAxIDMgQzAuNjcgMi4wMSAwLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRTkyMDI2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNzY2LDExNikiLz4KPHBhdGggZD0iTTAgMCBDOS40MTAwMjI3OCAtMC4zNjkwMjA1IDkuNDEwMDIyNzggLTAuMzY5MDIwNSAxNCAyIEMxNCAzLjY1IDE0IDUuMyAxNCA3IEMxMy41MDUgNi41MjU2MjUgMTMuMDEgNi4wNTEyNSAxMi41IDUuNTYyNSBDOS45MzI3MzUyOSAzLjk1Nzk1OTU1IDguODAwMzY5MDkgMy43NDk5ODYwOSA1Ljg3NSAzLjUgQzQuNTk2MjUgMy4zMzUgMy4zMTc1IDMuMTcgMiAzIEMxLjM0IDIuMDEgMC42OCAxLjAyIDAgMCBaICIgZmlsbD0iIzNEODk2QiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1Niw1NSkiLz4KPHBhdGggZD0iTTAgMCBDMC4yODQ4ODI4MSAwLjU3NDkyMTg4IDAuNTY5NzY1NjIgMS4xNDk4NDM3NSAwLjg2MzI4MTI1IDEuNzQyMTg3NSBDMS41OTM5MzI5NyAzLjE5MzQ0NzYyIDIuMzQwMTUwNTEgNC42MzcwMzEgMy4xMDU0Njg3NSA2LjA3MDMxMjUgQzMuNDYyNTM5MDYgNi43NDgzNTkzOCAzLjgxOTYwOTM4IDcuNDI2NDA2MjUgNC4xODc1IDguMTI1IEM0LjU1MjMwNDY5IDguODA4MjAzMTMgNC45MTcxMDkzOCA5LjQ5MTQwNjI1IDUuMjkyOTY4NzUgMTAuMTk1MzEyNSBDNS41MjYyODkwNiAxMC43OTA4NTkzNyA1Ljc1OTYwOTM4IDExLjM4NjQwNjI1IDYgMTIgQzUuNjcgMTIuNjYgNS4zNCAxMy4zMiA1IDE0IEM0LjM0IDE0IDMuNjggMTQgMyAxNCBDLTEuMDc4Nzc0NjIgNS45NjQ5ODkwNiAtMS4wNzg3NzQ2MiA1Ljk2NDk4OTA2IC0wLjc1IDEuOTM3NSBDLTAuNTAyNSAxLjI5ODEyNSAtMC4yNTUgMC42NTg3NSAwIDAgWiAiIGZpbGw9IiMwQzZCNDUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzgsMTAzKSIvPgo8cGF0aCBkPSJNMCAwIEMzLjk2IDAgNy45MiAwIDEyIDAgQzExLjAxIDEuNDg1IDExLjAxIDEuNDg1IDEwIDMgQzguMTI1IDMuMzI4MTI1IDguMTI1IDMuMzI4MTI1IDYgMy4yNSBDNS4yOTg3NSAzLjIzNDUzMTI1IDQuNTk3NSAzLjIxOTA2MjUgMy44NzUgMy4yMDMxMjUgQzIgMyAyIDMgMCAyIEMwIDEuMzQgMCAwLjY4IDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTc2NiwxMjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuNjMgMCA3LjI2IDAgMTEgMCBDMTAuNjcgMC45OSAxMC4zNCAxLjk4IDEwIDMgQzcuMDMgMyA0LjA2IDMgMSAzIEMwLjY3IDIuMDEgMC4zNCAxLjAyIDAgMCBaICIgZmlsbD0iI0U4MjAyNiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTgxMywxMTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNDk1IDAuMzkxODc1IDAuOTkgMC43ODM3NSAxLjUgMS4xODc1IEMwLjE2NjY2NjY3IDEuODU0MTY2NjcgLTEuMTY2NjY2NjcgMi41MjA4MzMzMyAtMi41IDMuMTg3NSBDLTMuNDkgMy43NDQzNzUgLTMuNDkgMy43NDQzNzUgLTQuNSA0LjMxMjUgQy02LjUgNS4xODc1IC02LjUgNS4xODc1IC0xMC41IDUuMTg3NSBDLTEwLjUgNC4xOTc1IC0xMC41IDMuMjA3NSAtMTAuNSAyLjE4NzUgQy0zLjI4Nzc0NjE3IC0xLjA2ODUxNzUxIC0zLjI4Nzc0NjE3IC0xLjA2ODUxNzUxIDAgMCBaICIgZmlsbD0iIzEyNkY0QSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNy41LDc3LjgxMjUpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuNjQgMCA1LjI4IDAgOCAwIEM3LjY3IDEuMzIgNy4zNCAyLjY0IDcgNCBDNC42OSA0IDIuMzggNCAwIDQgQzAgMi42OCAwIDEuMzYgMCAwIFogIiBmaWxsPSIjRDdFQkRFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDA5LDk2KSIvPgo8cGF0aCBkPSJNMCAwIEMzLjU1NzgwMTk2IDAuNjA5OTA4OTEgNi42ODI4NTg5IDEuNTc4MzY4MSAxMCAzIEM5LjY3IDMuOTkgOS4zNCA0Ljk4IDkgNiBDNS44NTI2MjgxOCA1LjMwMDU4NDA0IDIuOTc0MTExMjQgNC4yMzkyMTMwMiAwIDMgQzAgMi4wMSAwIDEuMDIgMCAwIFogIiBmaWxsPSIjREZFQkU2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzk0LDg3KSIvPgo8cGF0aCBkPSJNMCAwIEMtMSAzIC0xIDMgLTIuODQ3NjU2MjUgNC4xNjc5Njg3NSBDLTMuNTc4NTU0NjkgNC41MDQ0MTQwNiAtNC4zMDk0NTMxMiA0Ljg0MDg1OTM3IC01LjA2MjUgNS4xODc1IEMtNS43OTU5NzY1NiA1LjUzMTY3OTY5IC02LjUyOTQ1MzEyIDUuODc1ODU5MzggLTcuMjg1MTU2MjUgNi4yMzA0Njg3NSBDLTguMTM0MDAzOTEgNi42MTEzODY3MiAtOC4xMzQwMDM5MSA2LjYxMTM4NjcyIC05IDcgQy05LjMzIDUuNjggLTkuNjYgNC4zNiAtMTAgMyBDLTYuMjcwMzQ4NjEgMC45NjU2NDQ2OSAtNC4zMzA5NDk1OCAwIDAgMCBaICIgZmlsbD0iI0U4RjFFRCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyOCw4NykiLz4KPHBhdGggZD0iTTAgMCBDMi4zOTI3MzIzNSAzLjU4OTA5ODUzIDMuMTUzMTA5ODYgNS4yNjMxMzQ3OCAzLjE4NzUgOS41IEMzLjIwMTY3OTY5IDEwLjI5NDA2MjUgMy4yMTU4NTkzOCAxMS4wODgxMjUgMy4yMzA0Njg3NSAxMS45MDYyNSBDMyAxNCAzIDE0IDEgMTYgQy0wLjE1NzAzOTggMTIuNTI4ODgwNTkgLTAuMDMzOTY0ODkgOS43NzM2ODM0NiAwLjA2MjUgNi4xNTYyNSBDMC4wOTg0MjE3OSAzLjgxNDI1MTIzIDAuMDk4NDIxNzkgMy44MTQyNTEyMyAtMSAxIEMtMC42NyAwLjY3IC0wLjM0IDAuMzQgMCAwIFogIiBmaWxsPSIjMjI3OTU2IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc3LDYyKSIvPgo8cGF0aCBkPSJNMCAwIEMwLjY2IDAuMzMgMS4zMiAwLjY2IDIgMSBDMS4zNCAzLjk3IDAuNjggNi45NCAwIDEwIEMtMC45OSA5LjY3IC0xLjk4IDkuMzQgLTMgOSBDLTIuNDQyNzEwODcgNS42NTYyNjUyNSAtMS42NDgyNjExMSAyLjk2Njg3MDAxIDAgMCBaICIgZmlsbD0iI0RDRUFFNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM0NCwxMDgpIi8+CjxwYXRoIGQ9Ik0wIDAgQzMuMjcyODY2ODIgMi43ODE5MzY4IDQuOTY0Mjc2OTcgNi4yNzk1NDA2NyA3IDEwIEM2LjAxIDEwLjMzIDUuMDIgMTAuNjYgNCAxMSBDMy4zMjU5MTY5MiA5LjczMzA4NDkzIDIuNjYwOTk1MDMgOC40NjEyOTI1MSAyIDcuMTg3NSBDMS42Mjg3NSA2LjQ3OTgwNDY5IDEuMjU3NSA1Ljc3MjEwOTM3IDAuODc1IDUuMDQyOTY4NzUgQzAgMyAwIDMgMCAwIFogIiBmaWxsPSIjRDVFNURGIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzc5LDEwNCkiLz4KPHBhdGggZD0iTTAgMCBDMi42NCAwIDUuMjggMCA4IDAgQzcuMzQgMS4zMiA2LjY4IDIuNjQgNiA0IEMzLjAzIDMuNTA1IDMuMDMgMy41MDUgMCAzIEMwIDIuMDEgMCAxLjAyIDAgMCBaICIgZmlsbD0iI0ZDRkRGQyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjAzOCw5OSkiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0zLjQ2NSA0LjQ4NSAtMy40NjUgNC40ODUgLTcgNiBDLTcuMzMgNS4wMSAtNy42NiA0LjAyIC04IDMgQy0zLjM3NSAwIC0zLjM3NSAwIDAgMCBaICIgZmlsbD0iI0Q2RTZERiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyOSw5MykiLz4KPHBhdGggZD0iTTAgMCBDLTAuNzUgNy43NSAtMC43NSA3Ljc1IC0zIDEwIEMtNC40NzgzMjI2IDcuMDQzMzU0ODEgLTQuMDYwMzI3ODMgNC4yNTc3MDI2MyAtNCAxIEMtMiAwIC0yIDAgMCAwIFogIiBmaWxsPSIjMkM3RTVEIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzcyLDY2KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjkzMDQ1OTMzIDIuNTUxNDQ4MjQgMS4wODU2NDA5MSAzLjc0MDA2NDc4IDAuMjIyNjU2MjUgNi4zNTkzNzUgQy0wLjE2MDE5NTMxIDcuMTQ4MjgxMjUgLTAuNTQzMDQ2ODggNy45MzcxODc1IC0wLjkzNzUgOC43NSBDLTEuNTA3OTEwMTYgOS45NDg4MjgxMyAtMS41MDc5MTAxNiA5Ljk0ODgyODEzIC0yLjA4OTg0Mzc1IDExLjE3MTg3NSBDLTIuMzkwMTk1MzEgMTEuNzc1MTU2MjUgLTIuNjkwNTQ2ODggMTIuMzc4NDM3NSAtMyAxMyBDLTMuNjYgMTIuNjcgLTQuMzIgMTIuMzQgLTUgMTIgQy00LjQ2MjMxMTI4IDguMTI4NjQxMiAtMy40MjI1MjcgNi4wMjgxNTg3NSAtMSAzIEMtMC42NyAyLjAxIC0wLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRENFOUU0IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzQyLDEwMykiLz4KPHBhdGggZD0iTTAgMCBDMC45OSAwLjMzIDEuOTggMC42NiAzIDEgQzIuNTQ2MjUgMS43NDI1IDIuMDkyNSAyLjQ4NSAxLjYyNSAzLjI1IEMwLjMxMzU5MjA0IDUuNDY5MzA1NzggLTAuODgyODA4MDMgNy42Nzk2NzgyMiAtMiAxMCBDLTMuMDYzNTE2NzUgNi42MTYwODMwNyAtMy4yMTQ0Mjk4MiA1LjQxOTUzNjYgLTEuNTYyNSAyLjE4NzUgQy0xLjA0Njg3NSAxLjQ2NTYyNSAtMC41MzEyNSAwLjc0Mzc1IDAgMCBaICIgZmlsbD0iI0RCRTlFMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3OCw5NikiLz4KPHBhdGggZD0iTTAgMCBDMCAwLjk5IDAgMS45OCAwIDMgQy0yLjUgNC42ODc1IC0yLjUgNC42ODc1IC01IDYgQy01LjY2IDUuMDEgLTYuMzIgNC4wMiAtNyAzIEMtMy4zNzUgMCAtMy4zNzUgMCAwIDAgWiAiIGZpbGw9IiMwRDZDNDYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjksOTYpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuNjYgMCAxLjMyIDAgMiAwIEMyIDAuNjYgMiAxLjMyIDIgMiBDMy4zMiAyIDQuNjQgMiA2IDIgQzYgMi42NiA2IDMuMzIgNiA0IEM0LjY4IDQgMy4zNiA0IDIgNCBDMS42NyA1LjMyIDEuMzQgNi42NCAxIDggQy0wLjM1NDM5NjY4IDUuMjkxMjA2NjUgLTAuMDY1MDE0NTEgMi45OTA2NjczMiAwIDAgWiAiIGZpbGw9IiMxOTczNEYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTAsNjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuMzIgMC42NiAyLjY0IDEuMzIgNCAyIEM0IDIuOTkgNCAzLjk4IDQgNSBDMSA1IDEgNSAtMC42ODc1IDMuNSBDLTEuMTIwNjI1IDMuMDA1IC0xLjU1Mzc1IDIuNTEgLTIgMiBDLTEuMzQgMS4zNCAtMC42OCAwLjY4IDAgMCBaICIgZmlsbD0iIzE1NzI0QyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM5MiwxMDEpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMC4zMyAxLjk4IDAuNjYgMyAxIEMyLjM0IDMuOTcgMS42OCA2Ljk0IDEgMTAgQzAuMDEgOS4wMSAtMC45OCA4LjAyIC0yIDcgQy0xLjM0IDQuNjkgLTAuNjggMi4zOCAwIDAgWiAiIGZpbGw9IiMyOTdENUIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNzMsNzMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzIgMC42NjY2NjY2NyA0IDEuMzMzMzMzMzMgNiAyIEM1LjY3IDIuNjYgNS4zNCAzLjMyIDUgNCBDMi4zNTEzOTU3MyA0LjU5MzU1NjE0IC0wLjI5MTk3MzIyIDQuNzQyMDkyNjkgLTMgNSBDLTIuNjI1IDMuMDYyNSAtMi42MjUgMy4wNjI1IC0yIDEgQy0xLjM0IDAuNjcgLTAuNjggMC4zNCAwIDAgWiAiIGZpbGw9IiMzMzgzNjMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjYsNzApIi8+CjxwYXRoIGQ9Ik0wIDAgQzIuMzEgMCA0LjYyIDAgNyAwIEM3IDEuMzIgNyAyLjY0IDcgNCBDNS42OCA0IDQuMzYgNCAzIDQgQzMgMy4zNCAzIDIuNjggMyAyIEMyLjAxIDIgMS4wMiAyIDAgMiBDMCAxLjM0IDAgMC42OCAwIDAgWiAiIGZpbGw9IiM2N0EyOEEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNTMsNjQpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMyLjY4NzUgMS44NzUgMi42ODc1IDEuODc1IDIgNCBDMS4wMSA0LjY2IDAuMDIgNS4zMiAtMSA2IEMtMS42MjUgNC4xMjUgLTEuNjI1IDQuMTI1IC0yIDIgQy0xLjM0IDEuMzQgLTAuNjggMC42OCAwIDAgWiAiIGZpbGw9IiMxNDcwNEIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzMjgsMTAxKSIvPgo8cGF0aCBkPSJNMCAwIEM0Ljc1IDEuODc1IDQuNzUgMS44NzUgNyAzIEM2LjY3IDMuOTkgNi4zNCA0Ljk4IDYgNiBDMy45NjE2NjU3NiA0LjcyNjA0MTEgMS45NjE0Nzg3NCAzLjM4OTM4MDc3IDAgMiBDMCAxLjM0IDAgMC42OCAwIDAgWiAiIGZpbGw9IiNFOEYxRUUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzOTQsOTMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTggMCAzLjk2IDAgNiAwIEM2IDAuOTkgNiAxLjk4IDYgMyBDMy42OSAzIDEuMzggMyAtMSAzIEMtMC42NyAyLjAxIC0wLjM0IDEuMDIgMCAwIFogIiBmaWxsPSIjRjhGQkY5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMDEyLDkwKSIvPgo8cGF0aCBkPSJNMCAwIEMwLjMzIDEuMzIgMC42NiAyLjY0IDEgNCBDMS42NiA0IDIuMzIgNCAzIDQgQzMuNjYgNS42NSA0LjMyIDcuMyA1IDkgQzMuMDYyNSA4LjYyNSAzLjA2MjUgOC42MjUgMSA4IEMtMC4zNTQzOTY2OCA1LjI5MTIwNjY1IC0wLjA2NTAxNDUxIDIuOTkwNjY3MzIgMCAwIFogIiBmaWxsPSIjRDRFNERFIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMzY4LDc4KSIvPgo8cGF0aCBkPSJNMCAwIEMwLjk5IDAuMzMgMS45OCAwLjY2IDMgMSBDMi4zNCAzLjMxIDEuNjggNS42MiAxIDggQzAuMzQgOCAtMC4zMiA4IC0xIDggQy0xLjEyNSAyLjI1IC0xLjEyNSAyLjI1IDAgMCBaICIgZmlsbD0iI0VGRjVGMyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM3MCw3NCkiLz4KPHBhdGggZD0iTTAgMCBDMi4wMDcyMDkyMyAwLjI4Njc0NDE4IDQuMDA4NTk0NCAwLjYxODY2NzAxIDYgMSBDNiAxLjY2IDYgMi4zMiA2IDMgQzQuMzUgMyAyLjcgMyAxIDMgQzEgMy45OSAxIDQuOTggMSA2IEMwLjM0IDYgLTAuMzIgNiAtMSA2IEMtMS4wNDI3MjEgNC4zMzM4ODA5NSAtMS4wNDA2MzgzMiAyLjY2NjE3MTE1IC0xIDEgQy0wLjY3IDAuNjcgLTAuMzQgMC4zNCAwIDAgWiAiIGZpbGw9IiM3MkE5OTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEzNjMsNjMpIi8+CjxwYXRoIGQ9Ik0wIDAgQzEuOTM3NSAwLjY4NzUgMS45Mzc1IDAuNjg3NSA0IDIgQzQuNzUgNC42MjUgNC43NSA0LjYyNSA1IDcgQzQuMzQgNyAzLjY4IDcgMyA3IEMwIDIuNjE1Mzg0NjIgMCAyLjYxNTM4NDYyIDAgMCBaICIgZmlsbD0iIzBDNkI0NSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTM1MSw5NykiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzQgMC45OSA0IDEuOTggNCAzIEMyLjAyIDMuNjYgMC4wNCA0LjMyIC0yIDUgQy0xLjM0IDMuMzUgLTAuNjggMS43IDAgMCBaICIgZmlsbD0iI0U2RjBFQyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTMyNSw4MCkiLz4KPHBhdGggZD0iTTAgMCBDMS4zMiAwIDIuNjQgMCA0IDAgQzMuNjcgMS4zMiAzLjM0IDIuNjQgMyA0IEMyLjAxIDQgMS4wMiA0IDAgNCBDMCAyLjY4IDAgMS4zNiAwIDAgWiAiIGZpbGw9IiMwMDg0MjgiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIxNjksODcpIi8+CjxwYXRoIGQ9Ik0wIDAgQzAuOTkgMCAxLjk4IDAgMyAwIEMyLjM0IDEuMzIgMS42OCAyLjY0IDEgNCBDMC42NyAyLjY4IDAuMzQgMS4zNiAwIDAgWiAiIGZpbGw9IiMxRTcwQzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE2MTcsMTAyKSIvPgo8L3N2Zz4K" style="\n            width: 742.5px;\n            position: relative;\n            top: 107px;\n            left: 32px;\n            ">\n            <a href='+Ne+' style="\n        float: left;\n        border-radius: 56px;\n        background: #0D6EFD;\n        padding-top: 8px;\n        width: 280px;\n        height: 38px;\n        text-align: center;\n        position: relative;\n        top: 127px;\n        left: 274px;\n        font-size: 16px;\n        color: white;\n        text-decoration: none;\n        letter-spacing: 0.02em;\n    ">Claim your FREE account</a>\n            <div style="\n    font-size: 14px;\n    position: relative;\n    top: 180px;\n    left: 19px;\n    letter-spacing: 0.02em;\n    font-weight: 500;\n    line-height: 125%;\n">have a Syncfusion<sup>\xae</sup> account? <a href="https://www.syncfusion.com/account/login?ReturnUrl=/account/login" style="text-decoration: none;\ncolor: #0D6EFD;\nfont-weight: 500;">Sign In</a></div>\n        </div>\n    </div>';if("undefined"!=typeof document&&!y(document)){var e=$("div",{innerHTML:t});document.body.appendChild(e)}}(),We=!0),this.render(),this.mount?this.accessMount():this.trigger("created")}},e.prototype.renderComplete=function(t){if(x()){window.sfBlazor.renderComplete(this.element,t)}this.isRendered=!0},e.prototype.dataBind=function(){this.injectModules(),t.prototype.dataBind.call(this)},e.prototype.on=function(t,e,i){if("string"==typeof t)this.localObserver.on(t,e,i);else for(var n=0,s=t;n<s.length;n++){var r=s[n];this.localObserver.on(r.event,r.handler,r.context)}},e.prototype.off=function(t,e){if("string"==typeof t)this.localObserver.off(t,e);else for(var i=0,n=t;i<n.length;i++){var s=n[i];this.localObserver.off(s.event,s.handler)}},e.prototype.notify=function(t,e){!0!==this.isDestroyed&&this.localObserver.notify(t,e)},e.prototype.getInjectedModules=function(){return this.injectedModules},e.Inject=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var i=0;i<t.length;i++)-1===this.prototype.injectedModules.indexOf(t[parseInt(i.toString(),10)])&&this.prototype.injectedModules.push(t[parseInt(i.toString(),10)])},e.prototype.createElement=function(t,e,i){return $(t,e)},e.prototype.triggerStateChange=function(t,e){this.isReactHybrid&&(this.setState(),this.currentContext={calls:t,args:e})},e.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},e.prototype.detectFunction=function(t){var e=Object.keys(t);e.length&&(this[e[0]]=t[e[0]])},e.prototype.mergePersistData=function(){var t;y(t=Ye?window.localStorage.getItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion):window.localStorage.getItem(this.getModuleName()+this.element.id))||""===t||this.setProperties(JSON.parse(t),!0)},e.prototype.setPersistData=function(){this.isDestroyed||(Ye?window.localStorage.setItem(this.getModuleName()+this.element.id+this.ej2StatePersistenceVersion,this.getPersistData()):window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData()))},e.prototype.renderReactTemplates=function(t){y(t)||t()},e.prototype.clearTemplate=function(t,e,i){y(i)||i()},e.prototype.getUniqueID=function(t){return this.isHistoryChanged()&&(Re=0),Pe=this.pageID(location.href),Ve=history.length,t+"_"+Pe+"_"+Re++},e.prototype.pageID=function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return Math.abs(e)},e.prototype.isHistoryChanged=function(){return Pe!==this.pageID(location.href)||Ve!==history.length},e.prototype.addOnPersist=function(t){for(var e=this,i={},n=0,s=t;n<s.length;n++){var r=s[n],o=c(r,this);v(o)||d(r,this.getActualProperties(o),i)}return JSON.stringify(i,function(t,i){return e.getActualProperties(i)})},e.prototype.getActualProperties=function(t){return t instanceof re?c("properties",t):t},e.prototype.ignoreOnPersist=function(t){return JSON.stringify(this.iterateJsonProperties(this.properties,t))},e.prototype.iterateJsonProperties=function(t,e){for(var i={},n=function(n){if(-1===e.indexOf(n)){var r=t[""+n];if("object"!=typeof r||r instanceof Array)i[""+n]=r;else{var o=e.filter(function(t){return new RegExp(n+".").test(t)}).map(function(t){return t.replace(n+".","")});i[""+n]=s.iterateJsonProperties(s.getActualProperties(r),o)}}},s=this,r=0,o=Object.keys(t);r<o.length;r++){n(o[r])}return i},He([jt(!1)],e.prototype,"enablePersistence",void 0),He([jt()],e.prototype,"enableRtl",void 0),He([jt()],e.prototype,"locale",void 0),e=He([Ft],e)}(Ct);"undefined"!=typeof window&&window.addEventListener("popstate",function(){Re=0});var Qe=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ze=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},qe={left:0,top:0,bottom:0,right:0},Xe={isDragged:!1},Ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),Ze([jt(0)],e.prototype,"left",void 0),Ze([jt(0)],e.prototype,"top",void 0),e}(re),Ke=function(t){function e(e,n){var s=t.call(this,n,e)||this;return s.dragLimit=i.getDefaultPosition(),s.borderWidth=i.getDefaultPosition(),s.padding=i.getDefaultPosition(),s.diffX=0,s.prevLeft=0,s.prevTop=0,s.dragProcessStarted=!1,s.eleTop=0,s.tapHoldTimer=0,s.externalInitialize=!1,s.diffY=0,s.parentScrollX=0,s.parentScrollY=0,s.droppables={},s.bind(),s}var i;return Qe(e,t),i=e,e.prototype.bind=function(){this.toggleEvents(),G.isIE&&tt([this.element],"e-block-touch"),this.droppables[this.scope]={}},e.getDefaultPosition=function(){return f({},qe)},e.prototype.toggleEvents=function(t){var e;v(this.handle)||(e=ct(this.handle,this.element));var i=this.enableTapHold&&G.isDevice&&G.isTouch?this.mobileInitialize:this.initialize;t?K.remove(e||this.element,G.isSafari()?"touchstart":G.touchStartEvent,i):K.add(e||this.element,G.isSafari()?"touchstart":G.touchStartEvent,i,this)},e.prototype.mobileInitialize=function(t){var e=this,i=t.currentTarget;this.tapHoldTimer=setTimeout(function(){e.externalInitialize=!0,e.removeTapholdTimer(),e.initialize(t,i)},this.tapHoldThreshold),K.add(document,G.isSafari()?"touchmove":G.touchMoveEvent,this.removeTapholdTimer,this),K.add(document,G.isSafari()?"touchend":G.touchEndEvent,this.removeTapholdTimer,this)},e.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),K.remove(document,G.isSafari()?"touchmove":G.touchMoveEvent,this.removeTapholdTimer),K.remove(document,G.isSafari()?"touchend":G.touchEndEvent,this.removeTapholdTimer)},e.prototype.getScrollableParent=function(t,e){return y(t)?null:t[{vertical:"scrollHeight",horizontal:"scrollWidth"}[""+e]]>t[{vertical:"clientHeight",horizontal:"clientWidth"}[""+e]]&&("vertical"===e?t.scrollTop>0:t.scrollLeft>0)?("vertical"===e?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?t.scrollTop:t.scrollTop-this.parentScrollY),this.tempScrollHeight=t.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?t.scrollLeft:t.scrollLeft-this.parentScrollX),this.tempScrollWidth=t.scrollWidth),y(t)?t:this.getScrollableParent(t.parentNode,e)):this.getScrollableParent(t.parentNode,e)},e.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0;this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},e.prototype.initialize=function(t,e){if(this.currentStateTarget=t.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=t.currentTarget||e,this.dragProcessStarted=!1,this.abort){var i=this.abort;"string"==typeof i&&(i=[i]);for(var n=0;n<i.length;n++)if(!y(ut(t.target,i[parseInt(n.toString(),10)])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!v(t.changedTouches)&&"touchstart"!==t.type&&t.preventDefault(),this.element.setAttribute("aria-grabbed","true");var s=this.getCoordinates(t);if(this.initialPosition={x:s.pageX,y:s.pageY},!this.clone){var r=this.element.getBoundingClientRect();this.getScrollableValues(),t.clientX===t.pageX&&(this.parentScrollX=0),t.clientY===t.pageY&&(this.parentScrollY=0),this.relativeXPosition=s.pageX-(r.left+this.parentScrollX),this.relativeYPosition=s.pageY-(r.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(t):(K.add(document,G.isSafari()?"touchmove":G.touchMoveEvent,this.intDragStart,this),K.add(document,G.isSafari()?"touchend":G.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==t.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,K.trigger(document.documentElement,G.isSafari()?"touchstart":G.touchStartEvent,t)}},e.prototype.intDragStart=function(t){this.removeTapholdTimer();var e=!v(t.changedTouches);if(!e||1===t.changedTouches.length){var i,n=this.getCoordinates(t),s=getComputedStyle(this.element);this.margin={left:parseInt(s.marginLeft,10),top:parseInt(s.marginTop,10),right:parseInt(s.marginRight,10),bottom:parseInt(s.marginBottom,10)};var r=this.element;if(this.clone&&this.dragTarget){var o=ut(t.target,this.dragTarget);y(o)||(r=o)}this.isReplaceDragEle&&(r=this.currentStateCheck(t.target,r)),this.offset=this.calculateParentPosition(r),this.position=this.getMousePosition(t,this.isDragScroll);var a=this.initialPosition.x-n.pageX,l=this.initialPosition.y-n.pageY;if(Math.sqrt(a*a+l*l)>=this.distance||this.externalInitialize){var h=this.getHelperElement(t);if(!h||y(h))return;e&&t.preventDefault();var c=this.helperElement=h;if(this.parentClientRect=this.calculateParentPosition(c.offsetParent),this.dragStart){var d={event:t,element:r,target:this.getProperTargetElement(t),bindEvents:x()?this.bindDragEvents.bind(this):null,dragElement:c};this.trigger("dragStart",d)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),i={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var p=getComputedStyle(r),u=parseFloat(p.marginTop);this.clone&&0!==u&&(i.top+=u),this.eleTop=isNaN(parseFloat(p.top))?0:parseFloat(p.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(i.top-=this.parentScrollY,i.left-=this.parentScrollX);var g=this.getProcessedPositionValue({top:i.top-this.diffY+"px",left:i.left-this.diffX+"px"});this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(i.top+=this.dragArea.scrollTop),this.dragElePosition={top:i.top,left:i.left},gt(c,this.getDragPosition({position:"absolute",left:g.left,top:g.top})),K.remove(document,G.isSafari()?"touchmove":G.touchMoveEvent,this.intDragStart),K.remove(document,G.isSafari()?"touchend":G.touchEndEvent,this.intDestroy),x()||this.bindDragEvents(c)}}},e.prototype.bindDragEvents=function(t){nt(t)?(K.add(document,G.isSafari()?"touchmove":G.touchMoveEvent,this.intDrag,this),K.add(document,G.isSafari()?"touchend":G.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,t)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},e.prototype.elementInViewport=function(t){for(this.top=t.offsetTop,this.left=t.offsetLeft,this.width=t.offsetWidth,this.height=t.offsetHeight;t.offsetParent;)t=t.offsetParent,this.top+=t.offsetTop,this.left+=t.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},e.prototype.getProcessedPositionValue=function(t){return this.queryPositionInfo?this.queryPositionInfo(t):t},e.prototype.calculateParentPosition=function(t){if(y(t))return{left:0,top:0};var e=t.getBoundingClientRect(),i=getComputedStyle(t);return{left:e.left+window.pageXOffset-parseInt(i.marginLeft,10),top:e.top+window.pageYOffset-parseInt(i.marginTop,10)}},e.prototype.intDrag=function(t){if(v(t.changedTouches)||1===t.changedTouches.length){var e,i;this.clone&&t.changedTouches&&G.isDevice&&G.isTouch&&t.preventDefault(),this.position=this.getMousePosition(t,this.isDragScroll);var n=this.getDocumentWidthHeight("Height");n<this.position.top&&(this.position.top=n);var s=this.getDocumentWidthHeight("Width");if(s<this.position.left&&(this.position.left=s),this.drag){var r=this.getProperTargetElement(t);this.trigger("drag",{event:t,element:this.element,target:r})}var o=this.checkTargetElement(t);if(o.target&&o.instance){var a=!0;this.hoverObject&&(this.hoverObject.instance!==o.instance?this.triggerOutFunction(t,o):a=!1),a&&(o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intOver(t,o.target),this.hoverObject=o)}else this.hoverObject&&this.triggerOutFunction(t,o);var l=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var h=this.parentClientRect.left,c=this.parentClientRect.top,d=this.getCoordinates(t),p=d.pageX,u=d.pageY,g=this.position.left-this.diffX,m=this.position.top-this.diffY,f=getComputedStyle(l);if(this.dragArea){if(this.enableAutoScroll&&this.setDragArea(),this.pageX!==p||this.skipDistanceCheck){var b=l.offsetWidth+(parseFloat(f.marginLeft)+parseFloat(f.marginRight));e=this.dragLimit.left>g&&g>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<g+b&&g>0?g-(g-this.dragLimit.right)+window.pageXOffset-b:g<0?this.dragLimit.left:g}if(this.pageY!==u||this.skipDistanceCheck){var C=l.offsetHeight+(parseFloat(f.marginTop)+parseFloat(f.marginBottom));i=this.dragLimit.top>m&&m>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<m+C&&m>0?m-(m-this.dragLimit.bottom)+window.pageYOffset-C:m<0?this.dragLimit.top:m}}else e=g,i=m;var I,M,S=c+this.borderWidth.top,x=h+this.borderWidth.left;if(this.dragProcessStarted&&(y(i)&&(i=this.prevTop),y(e)&&(e=this.prevLeft)),this.helperElement.classList.contains("e-treeview"))this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,I=i-S<0?this.dragLimit.top:i-this.borderWidth.top,M=e-x<0?this.dragLimit.left:e-this.borderWidth.left):(I=i-this.borderWidth.top,M=e-this.borderWidth.left);else if(this.dragArea){var w=this.helperElement.classList.contains("e-dialog");this.dragLimit.top=this.clone?this.dragLimit.top:0,I=i-S<0?this.dragLimit.top:i-S,M=e-x<0?w?e-(x-this.borderWidth.left):this.dragElePosition.left:e-x}else I=i-S,M=e-x;var D=parseFloat(getComputedStyle(this.element).marginTop);if(D>0&&(this.clone&&(I+=D,m<0&&(D+m>=0?I=D+m:I-=D),this.dragArea&&(I=this.dragLimit.bottom<I?this.dragLimit.bottom:I)),i-S<0))if(m+D+(l.offsetHeight-S)>=0){var E=this.dragLimit.top+m-S;E+D+S<0?I-=D+S:I=E}else I-=D+S;if(this.dragArea&&this.helperElement.classList.contains("e-treeview"))I=I+(C=l.offsetHeight+(parseFloat(f.marginTop)+parseFloat(f.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-C:I;this.enableScrollHandler&&!this.clone&&(I-=this.parentScrollY,M-=this.parentScrollX),this.dragArea&&"string"!=typeof this.dragArea&&this.dragArea.classList.contains("e-kanban-content")&&"relative"===this.dragArea.style.position&&(I+=this.dragArea.scrollTop);var T=this.getProcessedPositionValue({top:I+"px",left:M+"px"});this.isPreventScroll&&(T=this.getProcessedPositionValue({top:this.position.top-this.parentClientRect.top-2+"px",left:this.position.left-this.parentClientRect.left-2+"px"})),gt(l,this.getDragPosition(T)),this.elementInViewport(l)||!this.enableAutoScroll||this.helperElement.classList.contains("e-treeview")||this.helperElement.scrollIntoView();var A=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===A.length&&(A=this.getPathElements(t));var N=this.getScrollParent(A,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(N,I):this.elementInViewport(this.helperElement)||(0===(A=[].slice.call(document.querySelectorAll(":hover"))).length&&(A=this.getPathElements(t)),N=this.getScrollParent(A,!0),this.getScrollPosition(N,I))}this.dragProcessStarted=!0,this.prevLeft=e,this.prevTop=i,this.position.left=e,this.position.top=i,this.pageX=p,this.pageY=u}},e.prototype.getScrollParent=function(t,e){for(var i,n=e?t.reverse():t,s=n.length-1;s>=0;s--)if(("auto"===(i=window.getComputedStyle(n[parseInt(s.toString(),10)])["overflow-y"])||"scroll"===i)&&n[parseInt(s.toString(),10)].scrollHeight>n[parseInt(s.toString(),10)].clientHeight)return n[parseInt(s.toString(),10)];if("visible"===(i=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},e.prototype.getScrollPosition=function(t,e){if(t&&t===document.scrollingElement)t.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<e&&t.getBoundingClientRect().height+this.parentClientRect.top>e?t.scrollTop+=this.helperElement.clientHeight:t.scrollTop>e-this.helperElement.clientHeight&&(t.scrollTop-=this.helperElement.clientHeight);else if(t&&t!==document.scrollingElement){var i=document.scrollingElement.scrollTop,n=this.helperElement.clientHeight;t.clientHeight+t.getBoundingClientRect().top-n+i<e?t.scrollTop+=this.helperElement.clientHeight:t.getBoundingClientRect().top>e-n-i&&(t.scrollTop-=this.helperElement.clientHeight)}},e.prototype.getPathElements=function(t){var e=t.clientX>0?t.clientX:0,i=t.clientY>0?t.clientY:0;return document.elementsFromPoint(e,i)},e.prototype.triggerOutFunction=function(t,e){this.hoverObject.instance.intOut(t,e.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},e.prototype.getDragPosition=function(t){var e=f({},t);return this.axis&&("x"===this.axis?delete e.top:"y"===this.axis&&delete e.left),e},e.prototype.getDocumentWidthHeight=function(t){var e=document.body,i=document.documentElement;return Math.max(e["scroll"+t],i["scroll"+t],e["offset"+t],i["offset"+t],i["client"+t])},e.prototype.intDragStop=function(t){if(this.dragProcessStarted=!1,v(t.changedTouches)||1===t.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(t.type)){if(this.dragStop){var e=this.getProperTargetElement(t);this.trigger("dragStop",{event:t,element:this.element,target:e,helper:this.helperElement})}this.intDestroy(t)}else this.element.setAttribute("aria-grabbed","false");var i=this.checkTargetElement(t);i.target&&i.instance&&(i.instance.dragStopCalled=!0,i.instance.dragData[this.scope]=this.droppables[this.scope],i.instance.intDrop(t,i.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},e.prototype.intDestroy=function(t){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),K.remove(document,G.isSafari()?"touchmove":G.touchMoveEvent,this.intDragStart),K.remove(document,G.isSafari()?"touchend":G.touchEndEvent,this.intDragStop),K.remove(document,G.isSafari()?"touchend":G.touchEndEvent,this.intDestroy),K.remove(document,G.isSafari()?"touchmove":G.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"draggable"},e.prototype.isDragStarted=function(t){return t&&(Xe.isDragged=!Xe.isDragged),Xe.isDragged},e.prototype.setDragArea=function(){var t,e,i,n=0,s=0;if(i="string"===typeof this.dragArea?ct(this.dragArea):this.dragArea){var r=i.getBoundingClientRect();t=i.scrollWidth?i.scrollWidth:r.right-r.left,e=i.scrollHeight?this.dragArea&&!y(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?i.clientHeight:i.scrollHeight:r.bottom-r.top;for(var o=["Top","Left","Bottom","Right"],a=getComputedStyle(i),l=0;l<o.length;l++){var h=o[parseInt(l.toString(),10)],c=a["border"+h+"Width"],d=a["padding"+h],p=h.toLowerCase();this.borderWidth[""+p]=isNaN(parseFloat(c))?0:parseFloat(c),this.padding[""+p]=isNaN(parseFloat(d))?0:parseFloat(d)}n=this.dragArea&&!y(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?r.top+document.scrollingElement.scrollTop:r.top,s=r.left,this.dragLimit.left=s+this.borderWidth.left+this.padding.left,this.dragLimit.top=i.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=s+t-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=n+e-(this.borderWidth.bottom+this.padding.bottom)}},e.prototype.getProperTargetElement=function(t){var e,i=this.getCoordinates(t),n=this.helperElement.style.pointerEvents||"",s=-1!==t.type.indexOf("pointer")&&"safari"===G.info.name&&parseInt(G.info.version,10)>12;return I(t.target,this.helperElement)||-1!==t.type.indexOf("touch")||s?(this.helperElement.style.pointerEvents="none",e=document.elementFromPoint(i.clientX,i.clientY),this.helperElement.style.pointerEvents=n):e=t.target,e},e.prototype.currentStateCheck=function(t,e){return y(this.currentStateTarget)||this.currentStateTarget===t?y(e)?t:e:this.currentStateTarget},e.prototype.getMousePosition=function(t,e){var i,n,s=void 0!==t.srcElement?t.srcElement:t.target,r=this.getCoordinates(t),o=y(s.offsetParent);if(e?(i=this.clone?r.pageX:r.pageX+(o?0:s.offsetParent.scrollLeft)-this.relativeXPosition,n=this.clone?r.pageY:r.pageY+(o?0:s.offsetParent.scrollTop)-this.relativeYPosition):(i=this.clone?r.pageX:r.pageX+window.pageXOffset-this.relativeXPosition,n=this.clone?r.pageY:r.pageY+window.pageYOffset-this.relativeYPosition),document.scrollingElement&&!e&&!this.clone){var a=document.scrollingElement,l=a.scrollHeight>0&&a.scrollHeight>a.clientHeight&&a.scrollTop>0;i=a.scrollWidth>0&&a.scrollWidth>a.clientWidth&&a.scrollLeft>0?i-a.scrollLeft:i,n=l?n-a.scrollTop:n}return{left:i-(this.margin.left+this.cursorAt.left),top:n-(this.margin.top+this.cursorAt.top)}},e.prototype.getCoordinates=function(t){return t.type.indexOf("touch")>-1?t.changedTouches[0]:t},e.prototype.getHelperElement=function(t){var e;return this.clone?this.helper?e=this.helper({sender:t,element:this.target,currentTargetElement:this.currentStateTarget}):(e=$("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(e)):e=this.element,e},e.prototype.setGlobalDroppables=function(t,e,i){this.droppables[this.scope]=t?null:{draggable:e,helper:i,draggedElement:this.element}},e.prototype.checkTargetElement=function(t){var e=this.getProperTargetElement(t),i=this.getDropInstance(e);if(!i&&e&&!y(e.parentNode)){var n=ut(e.parentNode,".e-droppable")||e.parentElement;n&&(i=this.getDropInstance(n))}return{target:e,instance:i}},e.prototype.getDropInstance=function(t){var e,i=t&&t.ej2_instances;if(i)for(var n=0,s=i;n<s.length;n++){var r=s[n];if("droppable"===r.getModuleName()){e=r;break}}return e},e.prototype.destroy=function(){this.toggleEvents(!0),t.prototype.destroy.call(this)},Ze([Bt({},Ge)],e.prototype,"cursorAt",void 0),Ze([jt(!0)],e.prototype,"clone",void 0),Ze([jt()],e.prototype,"dragArea",void 0),Ze([jt()],e.prototype,"isDragScroll",void 0),Ze([jt()],e.prototype,"isReplaceDragEle",void 0),Ze([jt(!0)],e.prototype,"isPreventSelect",void 0),Ze([jt(!1)],e.prototype,"isPreventScroll",void 0),Ze([Ut()],e.prototype,"drag",void 0),Ze([Ut()],e.prototype,"dragStart",void 0),Ze([Ut()],e.prototype,"dragStop",void 0),Ze([jt(1)],e.prototype,"distance",void 0),Ze([jt()],e.prototype,"handle",void 0),Ze([jt()],e.prototype,"abort",void 0),Ze([jt()],e.prototype,"helper",void 0),Ze([jt("default")],e.prototype,"scope",void 0),Ze([jt("")],e.prototype,"dragTarget",void 0),Ze([jt()],e.prototype,"axis",void 0),Ze([jt()],e.prototype,"queryPositionInfo",void 0),Ze([jt(!1)],e.prototype,"enableTailMode",void 0),Ze([jt(!1)],e.prototype,"skipDistanceCheck",void 0),Ze([jt(!0)],e.prototype,"preventDefault",void 0),Ze([jt(!1)],e.prototype,"enableAutoScroll",void 0),Ze([jt(!1)],e.prototype,"enableTapHold",void 0),Ze([jt(750)],e.prototype,"tapHoldThreshold",void 0),Ze([jt(!1)],e.prototype,"enableScrollHandler",void 0),e=i=Ze([Ft],e)}(Ct),Je=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$e=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ti=function(t){function e(e,i){var n=t.call(this,i,e)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return Je(e,t),e.prototype.bind=function(){this.wireEvents()},e.prototype.wireEvents=function(){K.add(this.element,G.isSafari()?"touchend":G.touchEndEvent,this.intDrop,this)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.getModuleName=function(){return"droppable"},e.prototype.intOver=function(t,e){if(!this.mouseOver){var i=this.dragData[this.scope];this.trigger("over",{event:t,target:e,dragData:i}),this.mouseOver=!0}},e.prototype.intOut=function(t,e){this.mouseOver&&(this.trigger("out",{evt:t,target:e}),this.mouseOver=!1)},e.prototype.intDrop=function(t,e){if(this.dragStopCalled){this.dragStopCalled=!1;var i,n=!0,s=this.dragData[this.scope],r=!!s&&(s.helper&&nt(s.helper));r&&(i=this.isDropArea(t,s.helper,e),this.accept&&(n=ft(s.helper,this.accept))),r&&this.drop&&i.canDrop&&n&&this.trigger("drop",{event:t,target:i.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}},e.prototype.isDropArea=function(t,e,i){var n={canDrop:!0,target:i||t.target},s="touchend"===t.type;if(s||n.target===e){e.style.display="none";var r=s?t.changedTouches[0]:t,o=document.elementFromPoint(r.clientX,r.clientY);n.canDrop=!1,n.canDrop=I(o,this.element),n.canDrop&&(n.target=o),e.style.display=""}return n},e.prototype.destroy=function(){K.remove(this.element,G.isSafari()?"touchend":G.touchEndEvent,this.intDrop),t.prototype.destroy.call(this)},$e([jt()],e.prototype,"accept",void 0),$e([jt("default")],e.prototype,"scope",void 0),$e([Ut()],e.prototype,"drop",void 0),$e([Ut()],e.prototype,"over",void 0),$e([Ut()],e.prototype,"out",void 0),e=$e([Ft],e)}(Ct),ei=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ii=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ni={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},si=function(t){function e(e,n){var s=t.call(this,n,e)||this;return s.keyPressHandler=function(t){for(var e=t.altKey,n=t.ctrlKey,r=t.shiftKey,o=t.which,a=0,l=Object.keys(s.keyConfigs);a<l.length;a++)for(var h=l[a],c=0,d=s.keyConfigs[""+h].split(",");c<d.length;c++){var p=d[c],u=i.getKeyConfigData(p.trim());e===u.altKey&&n===u.ctrlKey&&r===u.shiftKey&&o===u.keyCode&&(t.action=h,s.keyAction&&s.keyAction(t))}},s.bind(),s}var i;return ei(e,t),i=e,e.prototype.destroy=function(){this.unwireEvents(),t.prototype.destroy.call(this)},e.prototype.onPropertyChanged=function(t,e){},e.prototype.bind=function(){this.wireEvents()},e.prototype.getModuleName=function(){return"keyboard"},e.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},e.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},e.getKeyConfigData=function(t){if(t in this.configCache)return this.configCache[""+t];var e=t.toLowerCase().split("+"),n={altKey:-1!==e.indexOf("alt"),ctrlKey:-1!==e.indexOf("ctrl"),shiftKey:-1!==e.indexOf("shift"),keyCode:null};return e[e.length-1].length>1&&Number(e[e.length-1])?n.keyCode=Number(e[e.length-1]):n.keyCode=i.getKeyCode(e[e.length-1]),i.configCache[""+t]=n,n},e.getKeyCode=function(t){return ni[""+t]||t.toUpperCase().charCodeAt(0)},e.configCache={},ii([jt({})],e.prototype,"keyConfigs",void 0),ii([jt("keyup")],e.prototype,"eventName",void 0),ii([Ut()],e.prototype,"keyAction",void 0),e=i=ii([Ft],e)}(Ct),ri=function(){function t(t,e,i){this.controlName=t,this.localeStrings=e,this.setLocale(i||De)}return t.prototype.setLocale=function(e){var i=this.intGetControlConstant(t.locale,e);this.currentLocale=i||this.localeStrings},t.load=function(t){this.locale=f(this.locale,t,{},!0)},t.prototype.getConstant=function(t){return y(this.currentLocale[""+t])?this.localeStrings[""+t]||"":this.currentLocale[""+t]},t.prototype.intGetControlConstant=function(t,e){return t[""+e]?t[""+e][this.controlName]:null},t.locale={},t}(),oi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ai=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},li=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oi(e,t),ai([jt(50)],e.prototype,"swipeThresholdDistance",void 0),e}(re),hi=/(Up|Down)/,ci=function(t){function e(e,i){var n=t.call(this,i,e)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(t){if(!0===n.touchAction){var e=n.updateChangeTouches(t);void 0!==t.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:e.clientX,clientY:e.clientY},n.startEventData=e,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(t)},n.tapHoldThreshold),K.add(n.element,G.touchMoveEvent,n.moveEvent,n),K.add(n.element,G.touchEndEvent,n.endEvent,n),K.add(n.element,G.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(t){var e=n.updateChangeTouches(t);n.movedPoint=e,n.isTouchMoved=!(e.clientX===n.startPoint.clientX&&e.clientY===n.startPoint.clientY);var i={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(t),i=f(i,{},{startEvents:n.startEventData,originalEvent:t,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(e)}),n.trigger("scroll",i),n.lastMovedPoint={clientX:e.clientX,clientY:e.clientY})},n.cancelEvent=function(t){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(t),K.remove(n.element,G.touchCancelEvent,n.cancelEvent)},n.endEvent=function(t){n.swipeFn(t),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:t,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(t){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var e=n.updateChangeTouches(t),i=e.clientX-n.startPoint.clientX,s=e.clientY-n.startPoint.clientY;i=Math.floor(i<0?-1*i:i),s=Math.floor(s<0?-1*s:i),n.isTouchMoved=i>1||s>1,/Firefox/.test(G.userAgent)&&0===e.clientX&&0===e.clientY&&"mouseup"===t.type&&(n.isTouchMoved=!1),n.endPoint=e,n.calcPoints(t);var r={originalEvent:t,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(e)};if(n.isTouchMoved){var o=n.swipeSettings.swipeThresholdDistance,a=f(void 0,n.defaultArgs,r),l=!1,h=n.element,c=n.isScrollable(h),d=hi.test(n.movedDirection);(o<n.distanceX&&!d||o<n.distanceY&&d)&&(l=!c||n.checkSwipe(h,d)),l&&n.trigger("swipe",a)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),K.remove(n.element,G.touchMoveEvent,n.moveEvent),K.remove(n.element,G.touchEndEvent,n.endEvent),K.remove(n.element,G.touchCancelEvent,n.cancelEvent)},n.bind(),n}return oi(e,t),e.prototype.onPropertyChanged=function(t,e){},e.prototype.bind=function(){this.wireEvents(),G.isIE&&this.element.classList.add("e-block-touch")},e.prototype.destroy=function(){this.unwireEvents(),t.prototype.destroy.call(this)},e.prototype.wireEvents=function(){K.add(this.element,G.touchStartEvent,this.startEvent,this)},e.prototype.unwireEvents=function(){K.remove(this.element,G.touchStartEvent,this.startEvent)},e.prototype.getModuleName=function(){return"touch"},e.prototype.isScrollable=function(t){var e=getComputedStyle(t),i=e.overflow+e.overflowX+e.overflowY;return!!/(auto|scroll)/.test(i)},e.prototype.tapHoldEvent=function(t){this.tapCount=0,this.touchAction=!0,K.remove(this.element,G.touchMoveEvent,this.moveEvent),K.remove(this.element,G.touchEndEvent,this.endEvent);var e={originalEvent:t};this.trigger("tapHold",e),K.remove(this.element,G.touchCancelEvent,this.cancelEvent)},e.prototype.calcPoints=function(t){var e=this.updateChangeTouches(t);this.defaultArgs={originalEvent:t},this.distanceX=Math.abs(Math.abs(e.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(e.clientY)-Math.abs(this.startPoint.clientY)),this.distanceX>this.distanceY?this.movedDirection=e.clientX>this.startPoint.clientX?"Right":"Left":this.movedDirection=e.clientY<this.startPoint.clientY?"Up":"Down"},e.prototype.calcScrollPoints=function(t){var e=this.updateChangeTouches(t);this.defaultArgs={originalEvent:t},this.distanceX=Math.abs(Math.abs(e.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(e.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=e.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=e.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},e.prototype.getVelocity=function(t){var e=t.clientX,i=t.clientY,n=Date.now(),s=e-this.startPoint.clientX,r=i-this.startPoint.clientX,o=n-this.tStampStart;return Math.sqrt(s*s+r*r)/o},e.prototype.checkSwipe=function(t,e){var i=["scroll","offset"],n=e?["Height","Top"]:["Width","Left"];return t[i[0]+n[0]]<=t[i[1]+n[0]]||(0===t[i[0]+n[1]]||t[i[1]+n[0]]+t[i[0]+n[1]]>=t[i[0]+n[0]])},e.prototype.updateChangeTouches=function(t){return t.changedTouches&&0!==t.changedTouches.length?t.changedTouches[0]:t},ai([Ut()],e.prototype,"tap",void 0),ai([Ut()],e.prototype,"tapHold",void 0),ai([Ut()],e.prototype,"swipe",void 0),ai([Ut()],e.prototype,"scroll",void 0),ai([jt(350)],e.prototype,"tapThreshold",void 0),ai([jt(750)],e.prototype,"tapHoldThreshold",void 0),ai([Bt({},li)],e.prototype,"swipeSettings",void 0),e=ai([Ft],e)}(Ct),di=new RegExp("\\n|\\r|\\s\\s+","g"),pi=new RegExp(/'|"/g),ui=new RegExp("if ?\\("),gi=new RegExp("else if ?\\("),mi=new RegExp("else"),fi=new RegExp("for ?\\("),yi=new RegExp("(/if|/for)"),vi=new RegExp("\\((.*)\\)",""),bi=new RegExp("^[0-9]+$","g"),Ci=new RegExp("[\\w\"'.\\s+]+","g"),Ii=new RegExp('"(.*?)"',"g"),Mi=new RegExp("[\\w\"'@#$.\\s-+]+","g"),Si=new RegExp("\\${([^}]*)}","g"),xi=/^\..*/gm,wi=/\\/gi,Di=/\\\\/gi,Ei=new RegExp("[\\w\"'@#$.\\s+]+","g"),Ti=/\window\./gm;function Ai(t,e,i){if("function"==typeof t)return t;var n="data",s=function(t,e,i,n){var s=0,r=[],o=t.match(/class="([^"]+|)\s{2}/g),a="";o&&o.forEach(function(e){a=e.replace(/\s\s+/g," "),t=t.replace(e,a)});if(Si.test(t)){for(var l=!1,h="",c=0;c<t.length;c++)"$"===t[c+""]&&"{"===t[c+1]?l=!0:"}"===t[c+""]&&(l=!1),h+='"'!==t[c+""]||l?t[c+""]:'\\"';t=h}else t=t.replace(/\\?"/g,'\\"');return t.replace(di,"").replace(Ii,"'$1'").replace(Si,function(t,o,a,l){var h=/@|#|\$/gm,c=o.match(vi);if(c){var d=c[1];if(gi.test(o))o='";} '+o.replace(c[1],d.replace(Ci,function(t){return Ni(t=t.trim(),!pi.test(t)&&-1===r.indexOf(t),e,r,n)}))+'{ \n str = str + "';else if(ui.test(o))o='"; '+o.replace(c[1],d.replace(Mi,function(t){return ki(t,e,r,n)}))+'{ \n str = str + "';else if(fi.test(o)){var p=c[1].split(" of ");o='"; '+o.replace(c[1],function(t){return r.push(p[0]),r.push(p[0]+"Index"),"var i"+(s+=1)+"=0; i"+s+" < "+Ni(p[1],!0,e,r,n)+".length; i"+s+"++"})+"{ \n "+p[0]+"= "+Ni(p[1],!0,e,r,n)+"[i"+s+"]; \n var "+p[0]+"Index=i"+s+'; \n str = str + "'}else{var u=o.split("("),g=i&&Object.prototype.hasOwnProperty.call(i,u[0])?"this.":"global";g=/\./.test(u[0])?"":g;var m=c[1].split(",");0===c[1].length||/data/.test(m[0])||/window./.test(m[0])||(c[1]="global"===g?e+"."+c[1]:c[1]);var f=/@|\$|#/gm,y=/\]\./gm;if(Ti.test(o)&&y.test(o)||f.test(o))/@|\$|#|\]\./gm.test(o)&&(o='"+ '+("global"===g?"":g)+o.replace(c[1],d.replace(Ei,function(t){return ki(t,e,r,n)}))+'+ "');else o='" + '+("global"===g?"":g)+o.replace(d,Ni(c[1].replace(/,( |)data.|,/gi,","+e+".").replace(/,( |)data.window/gi,",window"),"global"!==g,e,r,n))+'+"'}}else mi.test(o)?o='"; '+o.replace(mi,'} else { \n str = str + "'):o.match(yi)?o=o.replace(yi,'"; \n } \n str = str + "'):h.test(o)?(o.match(wi)&&(o=Oi(o)),o='"+'+Li(o,-1===r.indexOf(o),e,r)+'"]+"'):o=o.match(wi)?'"+'+Li(o=Oi(o),-1===r.indexOf(o),e,r)+'"]+"':""!==o?'"+'+Ni(o.replace(/,/gi,"+"+e+"."),-1===r.indexOf(o),e,r,n)+'+"':"${}";return o})}(t,n,e,i);return new Function(n,'var str="'+s+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n        var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n        if(str.match(valueRegEx)){\n            var check = str.match(valueRegEx);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(valueRegEx)[i].split('value=')[1];\n                var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                str1 = str1.replace(check1, change);\n            }\n            str = str.replace(str, str1);\n        }\n        else if (str.match(/(?:href='')/) === null) {\n            if(str.match(hrefRegex)) {\n                var check = str.match(hrefRegex);\n                var str1 = str;\n                for (var i=0; i < check.length; i++) {\n                    var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                    if (check1) {\n                        var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                        change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                        str1 = str1.replace(check1, change);\n                    }\n                }\n                str = str.replace(str, str1);\n            }\n        }\n         return str;").bind(e)}function Ni(t,e,i,n,s){return!e||bi.test(t)||-1!==n.indexOf(t.split(".")[0])||s||"true"===t||"false"===t?t:i+"."+t}function Li(t,e,i,n){return e&&!bi.test(t)&&-1===n.indexOf(t.split(".")[0])?i+'["'+t:t}function Oi(t){return t.match(Di)?t:t.replace(wi,"\\\\")}function ki(t,e,i,n){t=t.trim();if(/\window\./gm.test(t))return t;var s=/'|"/gm;return/@|\$|#/gm.test(t)&&(t=Li(t,-1===i.indexOf(t),e,i)+'"]'),xi.test(t)?function(t,e,i,n){return!e||bi.test(t)||-1!==n.indexOf(t.split(".")[0])||/^\..*/gm.test(t)?t:i+"."+t}(t,!s.test(t)&&-1===i.indexOf(t),e,i):Ni(t,!s.test(t)&&-1===i.indexOf(t),e,i,n)}var zi=/^[\n\r.]+<tr|^<tr/,Pi=/^[\n\r.]+<svg|^<path|^<g/,ji={};function Bi(){return"-"+Math.random().toString(36).substr(2,5)}function Hi(t,e,i){var n=Vi.compile(t,e,i);return function(t,e,i,s,r,o,a,l){var h=n(t,e,i,a,l),c="BlazorTemplateId";if(x()&&!r){var d=s+Bi();if(ji[""+s]||(ji[""+s]=[]),y(o))t[""+c]=d,ji[""+s].push(t);else for(var p=0,u=Object.keys(ji[""+s][parseInt(o.toString(),10)]);p<u.length;p++){var g=u[p];g!==c&&t[""+g]&&(ji[""+s][parseInt(o.toString(),10)][""+g]=t[""+g]),g===c&&(d=ji[""+s][parseInt(o.toString(),10)][""+g])}return"rowTemplate"===i?[$("tr",{id:d,className:"e-blazor-template"})]:[$("div",{id:d,className:"e-blazor-template"})]}return"string"==typeof h?Pi.test(h)?$("svg",{innerHTML:h}).childNodes:$(zi.test(h)?"table":"div",{innerHTML:h}).childNodes:h}}function Ri(t,e){var i;return t.prototype.CSPTemplate=!0,y(e)?i=t:(i=t.bind(e)).prototype=Object.create(t.prototype),i}var Vi={compile:(new(function(){function t(){}return t.prototype.compile=function(t,e,i){return void 0===e&&(e={}),Ai(t,e)},t}())).compile},Ui=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Fi=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"href",selector:"a[href]"},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],Wi=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","oncanplay","oncanplaythrough","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeypress","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onstart","onpropertychange","oncopy","ontoggle","onpointerout","onpointermove","onpointerleave","onpointerenter","onpointerrawupdate","onpointerover","onbeforecopy","onbeforecut","onbeforeinput"],Yi=function(){function t(){}return t.beforeSanitize=function(){return{selectors:{tags:Ui,attributes:Fi}}},t.sanitize=function(t){if(y(t))return t;var e=this.beforeSanitize();return this.serializeValue(e,t)},t.serializeValue=function(t,e){this.removeAttrs=t.selectors.attributes,this.removeTags=t.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=e,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),this.wrapElement=null,i.replace(/&amp;/g,"&")},t.removeElement=function(){for(var t=this.wrapElement.children,e=0;e<t.length;e++)for(var i=t[parseInt(e.toString(),10)].attributes,n=0;n<i.length;n++)this.wrapElement.children[parseInt(e.toString(),10)].removeAttribute(i[parseInt(n.toString(),10)].localName)},t.removeXssTags=function(){var t=this.wrapElement.querySelectorAll(this.removeTags.join(","));t.length>0&&t.forEach(function(t){at(t)})},t.removeJsEvents=function(){var t=this.wrapElement.querySelectorAll("["+Wi.join("],[")+"]");t.length>0&&t.forEach(function(t){Wi.forEach(function(e){t.hasAttribute(e)&&t.removeAttribute(e)})})},t.removeXssAttrs=function(){var t=this;this.removeAttrs.forEach(function(e,i){var n=t.wrapElement.querySelectorAll(e.selector);n.length>0&&("a[href]"===e.selector?n.forEach(function(t){-1!==t.getAttribute(e.attribute).replace(/\t|\s|&/,"").indexOf("javascript:alert")&&t.removeAttribute(e.attribute)}):n.forEach(function(t){t.removeAttribute(e.attribute)}))})},t}(),_i=i(961),Qi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zi=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],qi=["accordion","tab","splitter"],Xi=/\]/,Gi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mountingState=!1,e.attrKeys=[],e.cachedTimeOut=0,e.isAppendCalled=!1,e.initRenderCalled=!1,e.isReactForeceUpdate=!1,e.isReact=!0,e.isshouldComponentUpdateCalled=!1,e.isCreated=!1,e}return Qi(e,t),e.prototype.componentDidMount=function(){this.refreshChild(!0),this.canDelayUpdate=-1!==qi.indexOf(this.getModuleName()),this.renderReactComponent(),this.portals&&this.portals.length&&(this.mountingState=!0,this.renderReactTemplates(),this.mountingState=!1)},e.prototype.componentDidUpdate=function(t){this.isshouldComponentUpdateCalled||!this.initRenderCalled||this.isReactForeceUpdate||t!==this.props&&(this.isshouldComponentUpdateCalled=!0,this.updateProperties(this.props,!1,t))},e.prototype.renderReactComponent=function(){var t=this.reactElement;t&&!this.isAppendCalled&&(this.isAppendCalled=!0,this.appendTo(t))},e.prototype.shouldComponentUpdate=function(t){return this.isshouldComponentUpdateCalled=!0,this.initRenderCalled?(this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(this.reactElement)),this.updateProperties(t),!0):(this.updateProperties(t,!0),!0)},e.prototype.updateProperties=function(t,e,i){for(var n=this,s=f({},t),r=Object.keys(t),o=f({},i||this.props),a=y(o.statelessTemplates)?y(this.statelessTemplateProps)?[]:this.statelessTemplateProps:o.statelessTemplates,l=0,h=r;l<h.length;l++){var c=h[l],d="className"===c;if("children"!==c)if(d||y(this.htmlattributes[""+c])||this.htmlattributes[""+c]===s[""+c]||(this.htmlattributes[""+c]=s[""+c]),this.compareValues(o[""+c],t[""+c]))delete s[""+c];else if(-1!==this.attrKeys.indexOf(c))if(d){this.clsName=!0;for(var p=o[""+c].split(" "),u=0;u<p.length;u++)this.element.classList.remove(p[parseInt(u.toString(),10)]);for(var g=s[""+c].split(" "),m=0;m<g.length;m++)this.element.classList.add(g[parseInt(m.toString(),10)])}else"disabled"===c||Object.prototype.hasOwnProperty.call(this.properties,c)||delete s[""+c];else("value"===c&&t[""+c]===this[""+c]||a.indexOf(c)>-1&&("content"===c&&"function"==typeof s[""+c]||t[""+c].toString()===this[""+c].toString()))&&delete s[""+c]}s.children&&delete s.children,this.initRenderCalled&&(this.canDelayUpdate||o.delayUpdate)?setTimeout(function(){n.refreshProperties(s,t,e)}):this.refreshProperties(s,t,e)},e.prototype.refreshProperties=function(t,e,i){var n=y(this.props.statelessTemplates)?[]:this.props.statelessTemplates;Object.keys(t).length&&(i||this.processComplexTemplate(t,this),this.setProperties(t,i)),-1===n.indexOf("directiveTemplates")&&this.refreshChild(i,e)},e.prototype.processComplexTemplate=function(t,e){var i=e.complexTemplate;if(i)for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var s=i[""+n];t[""+n]&&d(s,c(n,t),t)}},e.prototype.getDefaultAttributes=function(){var t=this;this.isReact=!0;var i=Object.keys(this.props),n=["children","statelessTemplates","immediateRender","isLegacyTemplate","delayUpdate"];this.htmlattributes||(this.htmlattributes={}),this.attrKeys=Zi.concat(this.controlAttributes||[]);for(var s=0,r=i;s<r.length;s++){var o=r[s];(-1!==o.indexOf("data-")||-1!==o.indexOf("aria-")||-1!==this.attrKeys.indexOf(o)||-1===Object.keys(this.properties).indexOf(""+o)&&-1===n.indexOf(""+o))&&this.htmlattributes[""+o]!==this.props[""+o]&&(this.htmlattributes[""+o]=this.props[""+o])}if(!this.htmlattributes.ref){this.htmlattributes.ref=function(e){t.reactElement=e};-1!==["autocomplete","combobox","dropdownlist","dropdowntree","multiselect","listbox","colorpicker","numerictextbox","textbox","smarttextarea","uploader","maskedtextbox","slider","datepicker","datetimepicker","daterangepicker","timepicker","checkbox","switch","radio","rating","textarea","multicolumncombobox"].indexOf(this.getModuleName())&&(this.htmlattributes.key=""+e.reactUid,e.reactUid++,this.type&&!this.htmlattributes.type&&(this.htmlattributes.type=this.multiline?"hidden":this.type),this.name&&!this.htmlattributes.name&&(this.htmlattributes.name=this.name))}if(this.clsName)for(var a=this.element.classList,l=this.htmlattributes.className,h=0;h<a.length;h++)-1===l.indexOf(a[parseInt(h.toString(),10)])&&(this.htmlattributes.className=this.htmlattributes.className+" "+a[parseInt(h.toString(),10)]);return this.htmlattributes},e.prototype.trigger=function(t,e,i){var n=this;if(!0!==this.isDestroyed&&this.modelObserver){if(Xi.test(t)){var s=c(t,this);s?(s.call(this,e),i&&i.call(this,e)):i&&i.call(this,e)}"change"!==t&&"input"!==t||this.props.onChange&&e.event&&this.props.onChange.call(void 0,{syntheticEvent:e.event,nativeEvent:{text:e.value},value:e.value,target:this});var r=this.isProtectedOnChange;this.isProtectedOnChange=!1,"created"===t?setTimeout(function(){n.isCreated=!0,n.isDestroyed||n.modelObserver.notify(t,e,i)},10):this.modelObserver.notify(t,e,i),this.isProtectedOnChange=r}},e.prototype.compareValues=function(t,e){if(typeof t===typeof e){if(t===e)return!0;if((!y(t)&&t.constructor)!==(!y(e)&&e.constructor))return!1;if(t instanceof Date||t instanceof RegExp||t instanceof String||t instanceof Number)return t.toString()===e.toString();if(g(t)||Array.isArray(t)){var i=t,n=e;return g(i)&&(i=[t],n=[e]),this.compareObjects(i,n).status}if(t.moduleName&&t.moduleName===e.moduleName&&("query"===t.moduleName||"datamanager"===t.moduleName)&&JSON.stringify(t)===JSON.stringify(e))return!0}return!1},e.prototype.compareObjects=function(t,e,i){var n=!0,s=t.length===e.length,r=[],o=y(this.templateProps)?[]:this.templateProps;if(s)for(var a=0,l=e.length;a<l;a++){var h={},c=t[parseInt(a.toString(),10)],d=e[parseInt(a.toString(),10)],p=Object.keys(d);if(0!==p.length)for(var u=0,g=p;u<g.length;u++){var m=g[u],f=c[""+m],v=d[""+m];if("items"===m)for(var b=0;b<v.length;b++)if("richtexteditor"===this.getModuleName()&&"object"==typeof v[parseInt(b.toString(),10)])return{status:!0};if("grid"===this.getModuleName()&&"field"===m&&(h[""+m]=v),!Object.prototype.hasOwnProperty.call(c,m)||!(o.length>0&&-1===o.indexOf(""+m)&&"function"==typeof v?this.compareValues(f.toString(),v.toString()):this.compareValues(f,v))){if(!i)return{status:!1};n=!1,h[""+m]=v}}else if(e[parseInt(a.toString(),10)]===t[parseInt(a.toString(),10)])n=!0;else{if(!i)return{status:!1};n=!1}"grid"===this.getModuleName()&&"columns"===i&&y(h.field)&&(h.field=void 0),Object.keys(h).length&&r.push({index:a,value:h,key:i})}else n=!1;return{status:n,changedProperties:r}},e.prototype.refreshChild=function(t,e){if(this.checkInjectedModules){for(var i=this.getInjectedModules()||[],n=0,s=this.getInjectedServices()||[];n<s.length;n++){var r=s[n];-1===i.indexOf(r)&&i.push(r)}this.injectedModules=i}if(this.directivekeys){var o=[],a="",l=this.validateChildren({},this.directivekeys,e||this.props);if(l&&Object.keys(l).length){if(!t&&this.skipRefresh)for(var h=0,d=this.skipRefresh;h<d.length;h++){delete l[""+d[h]]}if(this.prevProperties){for(var p=Object.keys(this.prevProperties),u=0;u<p.length;u++)if(a=p[parseInt(u.toString(),10)],Object.prototype.hasOwnProperty.call(l,a)){var g=this.compareObjects(this.prevProperties[""+a],l[""+a],a);if(g.status)delete l[""+a];else{g.changedProperties.length&&(o=o.concat(g.changedProperties));var m={};m[""+a]=l[""+a],this.prevProperties=f(this.prevProperties,m)}}}else this.prevProperties=f({},l,{},!0);if(o.length)if("grid"===this.getModuleName()&&"columns"===a)for(var y=0,v=this.columns;y<v.length;y++){if(c("field",v[parseInt(y.toString(),10)])===c(y+".value.field",o))(I=c(o[parseInt(y.toString(),10)].key+"."+o[parseInt(y.toString(),10)].index,this))&&I.setProperties?I.setProperties(o[parseInt(y.toString(),10)].value):f(I,o[parseInt(y.toString(),10)].value);else this.setProperties(l,t)}else for(var b=0,C=o;b<C.length;b++){var I,M=C[b];(I=c(M.key+"."+M.index,this))&&I.setProperties?I.setProperties(M.value):f(I,M.value)}else this.setProperties(l,t)}}},e.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut);var t=!!["dropdowntree","checkbox"].indexOf(this.getModuleName())||document.body.contains(this.element);this.initRenderCalled&&this.isAppendCalled&&this.element&&t&&!this.isDestroyed&&this.isCreated&&this.destroy(),Se.offIntlEvents()},e.prototype.appendReactElement=function(t,e){var i=_i.createPortal(t,e);this.portals?this.portals.push(i):this.portals=[i]},e.prototype.renderReactTemplates=function(t){this.isReactForeceUpdate=!0,t?this.forceUpdate(t):this.forceUpdate(),this.isReactForeceUpdate=!1},e.prototype.clearTemplate=function(t,e,i){var n=this,s=[];t&&t.length?Array.prototype.forEach.call(t,function(t){var i=0;if(n.portals.forEach(function(e){e.propName===t&&(s.push(i),i++)}),!y(e)&&n.portals[e]&&n.portals[e].propName===t)n.portals.splice(e,1);else for(var r=0;r<n.portals.length;r++)n.portals[parseInt(r.toString(),10)].propName===t&&(n.portals.splice(r,1),r--)}):this.portals=[],this.renderReactTemplates(i)},e.prototype.validateChildren=function(t,e,i){for(var s=!1,r=0,o=n.Children.toArray(i.children);r<o.length;r++){var a=o[r],l=this.getChildType(a),h=e[""+l];if(l&&e){var c=this.getChildProps(n.Children.toArray(a.props.children),h);c.length&&(s=!0,t[a.type.propertyName||l]=c)}}return s?t:null},e.prototype.getChildType=function(t){return t.type&&t.type.isDirective&&t.type.moduleName||""},e.prototype.getChildProps=function(t,e){for(var i=[],n=0,s=t;n<s.length;n++){var r=s[n],o=!1,a=void 0;"string"==typeof e?(o=!0,a=e):a=Object.keys(e)[0];var l=r.props;if(this.getChildType(r)===a)if(o||!l.children){var h=f({},l,{},!0);this.processComplexTemplate(h,r.type),i.push(h)}else{var c=this.validateChildren(f({},l),e[""+a],l)||l;c.children&&delete c.children,this.processComplexTemplate(c,r.type),i.push(c)}}return i},e.prototype.getInjectedServices=function(){for(var t=0,e=n.Children.toArray(this.props.children);t<e.length;t++){var i=e[t];if(i.type&&i.type.isService)return i.props.services}return[]},e.reactUid=1,e}(n.Component);function Ki(t,e){e.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){"isMounted"!==i&&"replaceState"!==i&&"render"!==i&&(t.prototype[""+i]=e.prototype[""+i])})})}var Ji,$i=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $i(e,t),e.prototype.render=function(){return null},e.isDirective=!0,e}(n.PureComponent),en=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),nn=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}en(e,t),e.prototype.render=function(){return null},e.isService=!0}(n.PureComponent),Vi.compile);Ji={compile:function(t,e){return"string"==typeof t||t.prototype&&t.prototype.CSPTemplate&&"function"==typeof t?nn(t,e):function(e,i,s,r){var o,a=t,l=e;"object"==typeof a&&(a=t.template,l=f({},e,t.data||{})),o=r||document.createElement("div");var h=n.createElement(a,l),c=_i.createPortal(h,o);if(c.propName=s,i.portals?i.portals.push(c):i.portals=[c],!r)return[o]}}},Vi.compile=Ji.compile;var sn=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rn=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}sn(e,t),e.moduleName="layer"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}sn(e,t),e.propertyName="layers",e.moduleName="layers"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),on=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}rn(e,t),e.moduleName="customCursor"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}rn(e,t),e.propertyName="customCursor",e.moduleName="customCursors"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),an=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}on(e,t),e.moduleName="connector"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}on(e,t),e.propertyName="connectors",e.moduleName="connectors"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),ln=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}an(e,t),e.moduleName="connectorFixedUserHandle"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}an(e,t),e.propertyName="fixedUserHandles",e.moduleName="connectorFixedUserHandles"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),hn=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ln(e,t),e.moduleName="connectorAnnotation"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ln(e,t),e.propertyName="annotations",e.moduleName="connectorAnnotations"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),cn=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}hn(e,t),e.moduleName="node"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}hn(e,t),e.propertyName="nodes",e.moduleName="nodes"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),dn=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}cn(e,t),e.moduleName="nodeFixedUserHandle"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}cn(e,t),e.propertyName="fixedUserHandles",e.moduleName="nodeFixedUserHandles"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),pn=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}dn(e,t),e.moduleName="nodeAnnotation"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}dn(e,t),e.propertyName="annotations",e.moduleName="nodeAnnotations"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),un=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}pn(e,t),e.moduleName="port"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}pn(e,t),e.propertyName="ports",e.moduleName="ports"}(tn),function(){function t(t,e){this.width=t,this.height=e}return t.prototype.isEmpty=function(){return 0===this.height&&0===this.width},t.prototype.clone=function(){return new t(this.width,this.height)},t}()),gn=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mn=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},fn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gn(e,t),e.equals=function(t,e){return t===e||!(!t||!e)&&(!t||!e||t.x===e.x&&t.y===e.y)},e.isEmptyPoint=function(t){return!t.x||!t.y},e.transform=function(t,e,i){var n={x:0,y:0};return n.x=Math.round(100*(t.x+i*Math.cos(e*Math.PI/180)))/100,n.y=Math.round(100*(t.y+i*Math.sin(e*Math.PI/180)))/100,n},e.findLength=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.findAngle=function(t,e){var i=Math.atan2(e.y-t.y,e.x-t.x);return i=180*i/Math.PI,(i%=360)<0&&(i+=360),i},e.distancePoints=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getLengthFromListOfPoints=function(t){for(var e=0,i=0;i<t.length-1;i++)e+=this.distancePoints(t[parseInt(i.toString(),10)],t[i+1]);return e},e.adjustPoint=function(t,e,i,n){var s,r=i?{x:t.x,y:t.y}:{x:e.x,y:e.y};return t.x===e.x?t.y<e.y&&i||t.y>e.y&&!i?r.y+=n:r.y-=n:t.y===e.y?t.x<e.x&&i||t.x>e.x&&!i?r.x+=n:r.x-=n:i?(s=this.findAngle(t,e),r=this.transform(t,s,n)):(s=this.findAngle(e,t),r=this.transform(e,s,n)),r},e.direction=function(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"Right":"Left":t.y<e.y?"Bottom":"Top"},e.prototype.getClassName=function(){return"Point"},mn([jt(0)],e.prototype,"x",void 0),mn([jt(0)],e.prototype,"y",void 0),e}(re);function yn(t){var e,i=[],n=function(t){var e=/([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi,i=[],n=[],s={};e.lastIndex=0;var r=!1;s=e.exec(t);for(;s;)"e"===s[1]?r=!0:s[1]?("zm"===s[1].toLowerCase()?(i.length&&n.push(i),n.push(["Z"]),i=[s[1].substring(1,2)]):(i.length&&n.push(i),i=[s[1]]),r=!1):(i.length||(i=[]),r||i.push(Number(s[2])),r=!1),s=e.exec(t);i.length&&n.push(i);return n}(t);if(n.length>0)for(var s=0;s<n.length;s++){var r=n[parseInt(s.toString(),10)],o="";switch((o=r[0]).toLowerCase()){case"m":for(e=1;e<r.length;e++)i.push({command:o,x:r[parseInt(e.toString(),10)],y:r[e+1]}),e+=1,"m"===o?o="l":"M"===o&&(o="L");break;case"l":case"t":for(e=1;e<r.length;e++)i.push({command:o,x:r[parseInt(e.toString(),10)],y:r[e+1]}),e+=1;break;case"h":for(e=1;e<r.length;e++)i.push({command:o,x:r[parseInt(e.toString(),10)]});break;case"v":for(e=1;e<r.length;e++)i.push({command:o,y:r[parseInt(e.toString(),10)]});break;case"z":i.push({command:o});break;case"c":for(e=1;e<r.length;e++)i.push({command:o,x1:r[parseInt(e.toString(),10)],y1:r[e+1],x2:r[e+2],y2:r[e+3],x:r[e+4],y:r[e+5]}),e+=5;break;case"s":for(e=1;e<r.length;e++)i.push({command:o,x2:r[parseInt(e.toString(),10)],y2:r[e+1],x:r[e+2],y:r[e+3]}),e+=3;break;case"q":for(e=1;e<r.length;e++)i.push({command:o,x1:r[parseInt(e.toString(),10)],y1:r[e+1],x:r[e+2],y:r[e+3]}),e+=3;break;case"a":for(e=1;e<r.length;e++)i.push({command:o,r1:r[parseInt(e.toString(),10)],r2:r[e+1],angle:r[e+2],largeArc:r[e+3],sweep:r[e+4],x:r[e+5],y:r[e+6]}),e+=6}}return i}function vn(t){var e,i,n="";for(n="M"+t[0].x+" "+t[0].y,i=1;i<t.length;i++)n+="L"+(e=t[parseInt(i.toString(),10)]).x+" "+e.y;return n+="Z"}function bn(t){var e;for(e=0;e<t.length;e++)t[parseInt(e.toString(),10)].x=Math.round(t[parseInt(e.toString(),10)].x),t[parseInt(e.toString(),10)].y=Math.round(t[parseInt(e.toString(),10)].y);var i,n,s="";for(s="M"+t[0].x+" "+t[0].y,n=1;n<t.length;n++)s+="L"+(i=t[parseInt(n.toString(),10)]).x+" "+i.y;return s}function Cn(t){var e,i,n,s,r,o,a,l,h,c,d=[];for(a=0,l=0,c=0,h=t.length;c<h;++c){var p,u=t[c];p=u.command,"y1"in u&&(s=u.y1),"y2"in u&&(o=u.y2),"x1"in u&&(n=u.x1),"x2"in u&&(r=u.x2),"x"in u&&(a=u.x),"y"in u&&(l=u.y);var g=d[d.length-1];switch(p){case"M":d.push({command:"M",x:a,y:l});break;case"L":d.push({command:"L",x0:e,y0:i,x:a,y:l});break;case"H":d.push({command:"L",x0:e,y0:i,x:a,y:i});break;case"V":d.push({command:"L",x0:e,y0:i,x:e,y:l});break;case"C":d.push({command:"C",x0:e,y0:i,x1:n,y1:s,x2:r,y2:o,x:a,y:l});break;case"S":if(g){var m=void 0,f={x:2*e-(m="C"===g.command||"S"===g.command?{x:g.x2,y:g.y2}:{x:e,y:i}).x,y:2*i-m.y};d.push({command:"C",x0:e,y0:i,x1:f.x,y1:f.y,x2:r,y2:o,x:a,y:l})}break;case"Q":d.push({command:"Q",x0:e,y0:i,x1:n,y1:s,x:a,y:l});break;case"T":if(g){m=void 0,f={x:2*e-(m="Q"===g.command?{x:g.x1,y:g.y1}:{x:e,y:i}).x,y:2*i-m.y};d.push({command:"Q",x0:e,y0:i,x1:f.x,y1:f.y,x:a,y:l})}break;case"A":var y=u;y.command="A",d.push(y);break;case"Z":case"z":d.push({command:"Z"}),a=e,l=i}"M"!==p&&"m"!==p||l,e=a,i=l}return d}function In(t,e,i,n,s,r,o,a){var l,h,c,d,p,u,g,m,f;for(p=0,u=0,m=0,g=t.length;m<g;++m){var y=t[m],v=y.command;"x"in y&&(p=y.x),"y"in y&&(u=y.y),"y1"in y&&(h=y.y1),"y2"in y&&(d=y.y2),"x1"in y&&(l=y.x1),"x2"in y&&(c=y.x2),n?(void 0!==p&&(p=Sn(p,e,s,o)),void 0!==u&&(u=Sn(u,i,r,a)),void 0!==l&&(l=Sn(l,e,s,o)),void 0!==h&&(h=Sn(h,i,r,a)),void 0!==c&&(c=Sn(c,e,s,o)),void 0!==d&&(d=Sn(d,i,r,a))):(void 0!==p&&(p=Number((p+e).toFixed(2))),void 0!==u&&(u=Number((u+i).toFixed(2))),void 0!==l&&(l=Number((l+e).toFixed(2))),void 0!==h&&(h=Number((h+i).toFixed(2))),void 0!==c&&(c=Number((c+e).toFixed(2))),void 0!==d&&(d=Number((d+i).toFixed(2)))),(f=Mn(y,v,{x:p,y:u,x1:l,y1:h,x2:c,y2:d,r1:y.r1,r2:y.r2},n,e,i))&&(t[m]=f),"M"!==v&&"m"!==v||u}return wn(t)}function Mn(t,e,i,n,s,r){switch(e){case"M":case"L":case"T":t.x=i.x,t.y=i.y;break;case"H":t.x=i.x;break;case"V":t.y=i.y;break;case"C":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1,t.x2=i.x2,t.y2=i.y2;break;case"S":t.x=i.x,t.y=i.y,t.x2=i.x2,t.y2=i.y2;break;case"Q":t.x=i.x,t.y=i.y,t.x1=i.x1,t.y1=i.y1;break;case"A":var o=i.r1,a=i.r2;n&&(i.r1=o*=s,i.r2=a*=r),t.x=i.x,t.y=i.y,t.r1=i.r1,t.r2=i.r2;break;case"z":case"Z":t={command:"Z"}}return t}function Sn(t,e,i,n){return t!==i?t=n!==i?t*e-(Number(i)*e-Number(i))+(n-Number(i)):Number(t)*e-(Number(i)*e-Number(i)):n!==i&&(t=n),Number(t.toFixed(2))}function xn(t){var e,i,n,s,r,o,a,l,h,c;for(a=0,l=0,c=0,h=t.length;c<h;++c){var d=t[parseInt(c.toString(),10)],p=d.command;if(/[MLHVCSQTA]/.test(p))"x"in d&&(d.x=a=d.x),"y"in d&&(d.y=l=d.y);else{"x1"in d&&(d.x1=n=a+d.x1),"x2"in d&&(d.x2=r=a+d.x2),"y1"in d&&(d.y1=s=l+d.y1),"y2"in d&&(d.y2=o=l+d.y2),"x"in d&&(d.x=a+=d.x),"y"in d&&(d.y=l+=d.y);var u=void 0;switch(p){case"m":case"M":u={command:"M",x:a,y:l};break;case"l":case"L":u={command:"L",x:a,y:l};break;case"h":case"H":u={command:"H",x:a};break;case"v":case"V":u={command:"V",y:l};break;case"c":case"C":u={command:"C",x:a,y:l,x1:n,y1:s,x2:r,y2:o};break;case"s":case"S":u={command:"S",x:a,y:l,x2:r,y2:o};break;case"q":case"Q":u={command:"Q",x:a,y:l,x1:n,y1:s};break;case"t":case"T":u={command:"T",x:a,y:l};break;case"a":case"A":(u={command:"A",x:a,y:l}).r1=d.r1,u.r2=d.r2,u.angle=d.angle,u.largeArc=d.largeArc,u.sweep=d.sweep;break;case"z":case"Z":u={command:"Z"},a=e,l=i,u=t[parseInt(c.toString(),10)]}u&&(t[parseInt(c.toString(),10)]=u)}"M"!==p&&"m"!==p||(e=a,i=l)}return t}function wn(t){var e,i="";for(e=0;e<t.length;e++)i+=0===e?Dn(t[parseInt(e.toString(),10)]):" "+Dn(t[parseInt(e.toString(),10)]);return i}function Dn(t){var e="";switch(t.command){case"Z":case"z":e=t.command;break;case"M":case"m":case"L":case"l":case"T":case"t":e=t.command+" "+t.x+" "+t.y;break;case"C":case"c":e=t.command+" "+t.x1+" "+t.y1+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y;break;case"Q":case"q":e=t.command+" "+t.x1+" "+t.y1+" "+t.x+" "+t.y;break;case"A":case"a":var i=t.command,n=t.angle,s=t.largeArc?"1":"0",r=t.sweep?"1":"0";e=i+" "+t.r1+" "+t.r2+" "+n+" "+s+" "+r+" "+t.x+" "+t.y;break;case"H":case"h":e=t.command+" "+t.x;break;case"V":case"v":e=t.command+" "+t.y;break;case"S":case"s":e=t.command+" "+t.x2+" "+t.y2+" "+t.x+" "+t.y}return e}var En,Tn=function(){function t(t,e,i,n){this.x=Number.MAX_VALUE,this.y=Number.MAX_VALUE,this.width=0,this.height=0,void 0===t||void 0===e?(t=e=Number.MAX_VALUE,i=n=0):(void 0===i&&(i=0),void 0===n&&(n=0)),this.x=t,this.y=e,this.width=i,this.height=n}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeft",{get:function(){return{x:this.left,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRight",{get:function(){return{x:this.right,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeft",{get:function(){return{x:this.left,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRight",{get:function(){return{x:this.right,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleLeft",{get:function(){return{x:this.left,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"middleRight",{get:function(){return{x:this.right,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topCenter",{get:function(){return{x:this.x+this.width/2,y:this.top}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomCenter",{get:function(){return{x:this.x+this.width/2,y:this.bottom}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},enumerable:!0,configurable:!0}),t.prototype.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height},t.prototype.uniteRect=function(t){var e=Math.max(isNaN(this.right)||this.x===Number.MAX_VALUE?t.right:this.right,t.right),i=Math.max(isNaN(this.bottom)||this.y===Number.MAX_VALUE?t.bottom:this.bottom,t.bottom);return this.x=Math.min(this.left,t.left),this.y=Math.min(this.top,t.top),this.width=e-this.x,this.height=i-this.y,this},t.prototype.unitePoint=function(t){if(this.x===Number.MAX_VALUE)return this.x=t.x,void(this.y=t.y);var e=Math.min(this.left,t.x),i=Math.min(this.top,t.y),n=Math.max(this.right,t.x),s=Math.max(this.bottom,t.y);this.x=e,this.y=i,this.width=n-this.x,this.height=s-this.y},t.prototype.Inflate=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},t.prototype.intersects=function(t){return!(this.right<t.left||this.left>t.right||this.top>t.bottom||this.bottom<t.top)},t.prototype.containsRect=function(t){return this.left<=t.left&&this.right>=t.right&&this.top<=t.top&&this.bottom>=t.bottom},t.prototype.containsPoint=function(t,e){return void 0===e&&(e=0),this.left-e<=t.x&&this.right+e>=t.x&&this.top-e<=t.y&&this.bottom+e>=t.y},t.toBounds=function(e){for(var i=new t,n=0,s=e;n<s.length;n++){var r=s[n];i.unitePoint(r)}return i},t.empty=new t(Number.MAX_VALUE,Number.MIN_VALUE,0,0),t}();!function(t){t[t.Identity=0]="Identity",t[t.Translation=1]="Translation",t[t.Scaling=2]="Scaling",t[t.Unknown=4]="Unknown"}(En||(En={}));var An=function(t,e,i,n,s,r,o){this.m11=t,this.m12=e,this.m21=i,this.m22=n,this.offsetX=s,this.offsetY=r,this.type=o};function Nn(){return new An(1,0,0,1,0,0,En.Identity)}function Ln(t,e){var i=function(t,e,i){if(t.type===(En.Translation|En.Scaling))e*=t.m11,e+=t.offsetX,i*=t.m22,i+=t.offsetY;else{var n=i*t.m21+t.offsetX,s=e*t.m12+t.offsetY;e*=t.m11,e+=n,i*=t.m22,i+=s}return{x:e,y:i}}(t,e.x,e.y);return{x:Math.round(100*i.x)/100,y:Math.round(100*i.y)/100}}function On(t,e,i,n){Pn(t,function(t,e,i){var n=Nn(),s=Math.sin(t),r=Math.cos(t),o=e*(1-r)+i*s,a=i*(1-r)-e*s;return n.type=En.Unknown,jn(n,r,s,-s,r,o,a),n}(.017453292519943295*(e%=360),i||0,n||0))}function kn(t,e,i,n,s){void 0===n&&(n=0),void 0===s&&(s=0),Pn(t,function(t,e,i,n){var s=Nn();return s.type=i||n?En.Scaling|En.Translation:En.Scaling,jn(s,t,0,0,e,i-t*i,n-e*n),s}(e,i,n,s))}function zn(t,e,i){t.offsetX+=e,t.offsetY+=i,t.type|=En.Translation}function Pn(t,e){var i=t.type,n=e.type;if(i===En.Identity)return Bn(t,e),void(t.type=e.type);if(i!==En.Translation){var s=i<<4|n;switch(s){case 50:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX*=e.m11,void(t.offsetY*=e.m22);case 51:return t.m11*=e.m11,t.m22*=e.m22,t.offsetX=e.m11*t.offsetX+e.offsetX,void(t.offsetY=e.m22*t.offsetY+e.offsetY);case 52:break;default:switch(s){case 66:case 67:case 68:break;default:return}}var r=Nn();return jn(r,t.m11*e.m11+t.m12*e.m21,t.m11*e.m12+t.m12*e.m22,t.m21*e.m11+t.m22*e.m21,t.m21*e.m12+t.m22*e.m22,t.offsetX*e.m11+t.offsetY*e.m21+e.offsetX,t.offsetX*e.m12+t.offsetY*e.m22+e.offsetY),r.m21||r.m12?r.type=En.Unknown:((r.m11&&1!==r.m11||r.m22&&1!==r.m22)&&(r.type=En.Scaling),(r.offsetX||r.offsetY)&&(r.type|=En.Translation),(r.type&(En.Translation|En.Scaling))===En.Identity&&(r.type=En.Identity),r.type=En.Scaling|En.Translation),Bn(t,r),void(t.type=r.type)}var o=t.offsetX,a=t.offsetY;t.offsetX=o*e.m11+a*e.m21+e.offsetX,t.offsetY=o*e.m12+a*e.m22+e.offsetY,n!==En.Unknown?t.type=En.Translation|En.Scaling:t.type=En.Unknown}function jn(t,e,i,n,s,r,o){t.m11=e,t.m12=i,t.m21=n,t.m22=s,t.offsetX=r,t.offsetY=o}function Bn(t,e){t.m11=e.m11,t.m12=e.m12,t.m21=e.m21,t.m22=e.m22,t.offsetX=e.offsetX,t.offsetY=e.offsetY,t.type=e.type}function Hn(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i="",n=0;n<5;n++){if("undefined"!=typeof window&&"crypto"in window&&"getRandomValues"in crypto){var s=new Uint16Array(1);t=(window.msCrypto||window.crypto).getRandomValues(s)[0]%60}else t=Math.floor(61*Math.random());0===n&&t<10?n--:i+=e.substring(t,t+1)}return i}function Rn(t){if(t){try{return"function"!=typeof t&&document.querySelectorAll(t).length?Hi(document.querySelector(t).innerHTML.trim()):Hi(t)}catch(e){return Hi(t)}}}function Vn(t){new Tn;var e=t.offsetY-t.actualSize.height*t.pivot.y,i=t.offsetY+t.actualSize.height*(1-t.pivot.y),n=t.offsetX-t.actualSize.width*t.pivot.x,s=t.offsetX+t.actualSize.width*(1-t.pivot.x),r={x:n,y:e},o={x:s,y:e},a={x:n,y:i},l={x:s,y:i};return Tn.toBounds([r,o,a,l])}function Un(t){var e=new Tn,i=Vn(t),n=i.middleLeft,s=i.topCenter,r=i.bottomCenter,o=i.middleRight,a=i.topLeft,l=i.topRight,h=i.bottomLeft,c=i.bottomRight;if(t.corners={topLeft:a,topCenter:s,topRight:l,middleLeft:n,middleRight:o,bottomLeft:h,bottomCenter:r,bottomRight:c},0!==t.rotateAngle||0!==t.parentTransform){var d=Nn();On(d,t.rotateAngle+t.parentTransform,t.offsetX,t.offsetY),t.corners.topLeft=a=Ln(d,a),t.corners.topCenter=s=Ln(d,s),t.corners.topRight=l=Ln(d,l),t.corners.middleLeft=n=Ln(d,n),t.corners.middleRight=o=Ln(d,o),t.corners.bottomLeft=h=Ln(d,h),t.corners.bottomCenter=r=Ln(d,r),t.corners.bottomRight=c=Ln(d,c)}return e=Tn.toBounds([a,l,h,c]),t.corners.left=e.left,t.corners.right=e.right,t.corners.top=e.top,t.corners.bottom=e.bottom,t.corners.center=e.center,t.corners.width=e.width,t.corners.height=e.height,e}function Fn(t,e,i,n){var s={},r="properties";if(t){i=t.propName;var o=t[""+r]||t,a=[],l=[];if((a=a.concat(Object.keys(o))).push("version"),i){var h=is(e);l=h?h(i):[],a=a.concat(l)}for(var c=function(t){switch(t){case"nodes":case"children":return["inEdges","outEdges","parentId","processId","nodeId","umlIndex","isPhase","isLane"];case"connectors":return["parentId"];case"annotation":case"annotations":return["nodeId"];case"shape":return["hasHeader"];case"layers":return["objectZIndex"]}return[]}(i),d=0,p=a=a.concat(c);d<p.length;d++){var u=p[d];if("historyManager"!==u)if("wrapper"!==u)!(!t[""+u]||!t.hasOwnProperty("observers"))||(t[""+u]instanceof Array?s[""+u]=Wn(-1===c.indexOf(u)&&t[""+r]?t[""+r][""+u]:t[""+u],e,u,n):t[""+u]instanceof Array==!1&&t[""+u]instanceof HTMLElement?s[""+u]=t[""+u].cloneNode(!0).innerHTML:t[""+u]instanceof Array==!1&&t[""+u]instanceof Object?s[""+u]=Fn(-1===c.indexOf(u)&&t[""+r]?t[""+r][""+u]:t[""+u],void 0,void 0,n):s[""+u]=t[""+u]);else t[""+u]&&(s[""+u]={actualSize:{width:t[""+u].actualSize.width,height:t[""+u].actualSize.height},offsetX:t[""+u].offsetX,offsetY:t[""+u].offsetY})}}return s}function Wn(t,e,i,n){var s;if(t){s=[];for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)]instanceof Array?s.push(t[parseInt(r.toString(),10)]):t[parseInt(r.toString(),10)]instanceof Object?s.push(Fn(t[parseInt(r.toString(),10)],e,i,n)):s.push(t[parseInt(r.toString(),10)])}return s}function Yn(t,e){var i="properties";if(t){e||(e={properties:{}});for(var n=0,s=Object.keys(t);n<s.length;n++){var r=s[n];if(t[""+r]instanceof Array){var o=_n(t[""+r],e[""+i][""+r]);e[""+i][""+r]&&e[""+i][""+r].length||(e[""+r]=o)}else if(t[""+r]instanceof Array==!1&&t[""+r]instanceof HTMLElement)e[""+r]=t[""+r].cloneNode(!0).innerHtml;else if(t[""+r]instanceof Array==!1&&t[""+r]instanceof Object){var a=Yn(t[""+r],e[""+i][""+r]);a[""+i]&&!Object.keys(a[""+i]).length&&delete a[""+i],e[""+r]=a}else e[""+r]=void 0!==e[""+i][""+r]?e[""+r]:t[""+r]}}return e}function _n(t,e){var i=[],n=!1;e||(e=[]),e.length||(n=!0);for(var s=0;s<t.length;s++)if(t[parseInt(s.toString(),10)]instanceof Array){_n(t[parseInt(s.toString(),10)],e[parseInt(s.toString(),10)]);n&&i.push(_n)}else if(t[parseInt(s.toString(),10)]instanceof Object){var r=Yn(t[parseInt(s.toString(),10)],e[parseInt(s.toString(),10)]);n&&i.push(r)}else i.push(t[parseInt(s.toString(),10)]);return i}function Qn(t){var e="";switch(t){case"Center":e="center";break;case"Left":e="left";break;case"Right":e="right";break;case"Justify":e="justify"}return e}function Zn(t){var e="";switch(t){case"Wrap":e="breakall";break;case"NoWrap":e="keepall";break;case"WrapWithOverflow":e="normal";break;case"LineThrough":e="line-through"}return e}var qn=document.createElement("canvas").getContext("2d");function Xn(t,e){return qn.font=(e.bold?"bold":"normal")+" "+e.fontSize+"px "+e.fontFamily,qn.measureText(t).width}function Gn(t,e){return(t+e)/2}function Kn(t,e){var i,n=0,s=0,r=0,o="";i=t.length;var a=0;do{r>0&&(n=s),s=Math.floor(Gn(n,i)),r=Xn(o+=t.substr(n,s),e)}while(r<=e.width);for(o=o.substr(0,n),a=n;a<i;a++)if((r=Xn(o+=t[parseInt(a.toString(),10)],e))>=e.width){t=t.substr(0,o.length-1);break}return"Ellipsis"===e.textOverflow?(t=t.substr(0,t.length-3),t+="..."):t=t.substr(0,t.length),t}function Jn(t,e){if("NoWrap"===e&&"PreserveAll"===t)return"pre";var i="";switch(t){case"CollapseAll":i="nowrap";break;case"CollapseSpace":i="pre-line";break;case"PreserveAll":i="pre-wrap"}return i}function $n(t,e){var i=Nn();On(i,e,0,0);var n=Ln(i,{x:0,y:0}),s=Ln(i,{x:t.width,y:0}),r=Ln(i,{x:0,y:t.height}),o=Ln(i,{x:t.width,y:t.height}),a=Math.min(n.x,s.x,r.x,o.x),l=Math.min(n.y,s.y,r.y,o.y),h=Math.max(n.x,s.x,r.x,o.x),c=Math.max(n.y,s.y,r.y,o.y);return new un(h-a,c-l)}function ts(t,e,i,n){if(0!==t){var s=Nn();return On(s,t,e,i),Ln(s,n)}return n}function es(t,e){return{x:t.x+e.desiredSize.width*e.pivot.x,y:t.y+e.desiredSize.height*e.pivot.y}}function is(t){return void 0!==t&&"string"==typeof t&&(t=c(t,window)),t}var ns,ss,rs,os,as,ls,hs,cs,ds,ps,us,gs,ms,fs,ys,vs,bs,Cs,Is,Ms,Ss,xs,ws,Ds,Es,Ts=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),As=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ns=function(t){if(t)switch(t.type){case"Linear":default:return js;case"Radial":return Bs}return js},Ls=function(t,e,i,n){this.left=t,this.right=e,this.top=i,this.bottom=n},Os=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),As([jt(0)],e.prototype,"left",void 0),As([jt(0)],e.prototype,"right",void 0),As([jt(0)],e.prototype,"top",void 0),As([jt(0)],e.prototype,"bottom",void 0),e}(re),ks=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),As([jt(45)],e.prototype,"angle",void 0),As([jt(5)],e.prototype,"distance",void 0),As([jt(.7)],e.prototype,"opacity",void 0),As([jt("lightgrey")],e.prototype,"color",void 0),e}(re),zs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),e.prototype.getClassName=function(){return"Stop"},As([jt("")],e.prototype,"color",void 0),As([jt(0)],e.prototype,"offset",void 0),As([jt(1)],e.prototype,"opacity",void 0),e}(re),Ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),As([Rt([],zs)],e.prototype,"stops",void 0),As([jt("None")],e.prototype,"type",void 0),As([jt("")],e.prototype,"id",void 0),e}(re),js=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Ts(e,t),As([jt(0)],e.prototype,"x1",void 0),As([jt(0)],e.prototype,"x2",void 0),As([jt(0)],e.prototype,"y1",void 0),As([jt(0)],e.prototype,"y2",void 0),As([jt(0)],e.prototype,"cx",void 0),As([jt(0)],e.prototype,"cy",void 0),As([jt(0)],e.prototype,"fx",void 0),As([jt(0)],e.prototype,"fy",void 0),As([jt(50)],e.prototype,"r",void 0)}(Ps),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),As([jt(0)],e.prototype,"x1",void 0),As([jt(0)],e.prototype,"x2",void 0),As([jt(0)],e.prototype,"y1",void 0),As([jt(0)],e.prototype,"y2",void 0),e}(Ps)),Bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),As([jt(0)],e.prototype,"cx",void 0),As([jt(0)],e.prototype,"cy",void 0),As([jt(0)],e.prototype,"fx",void 0),As([jt(0)],e.prototype,"fy",void 0),As([jt(50)],e.prototype,"r",void 0),e}(Ps),Hs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),As([jt("white")],e.prototype,"fill",void 0),As([jt("black")],e.prototype,"strokeColor",void 0),As([jt("")],e.prototype,"strokeDashArray",void 0),As([jt(1)],e.prototype,"strokeWidth",void 0),As([jt(1)],e.prototype,"opacity",void 0),As([Ht(Ns)],e.prototype,"gradient",void 0),e}(re),Rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),As([jt("transparent")],e.prototype,"fill",void 0),e}(Hs),Vs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ts(e,t),As([jt("black")],e.prototype,"color",void 0),As([jt("Arial")],e.prototype,"fontFamily",void 0),As([jt(12)],e.prototype,"fontSize",void 0),As([jt(!1)],e.prototype,"italic",void 0),As([jt(!1)],e.prototype,"bold",void 0),As([jt("CollapseSpace")],e.prototype,"whiteSpace",void 0),As([jt("WrapWithOverflow")],e.prototype,"textWrapping",void 0),As([jt("Center")],e.prototype,"textAlign",void 0),As([jt("None")],e.prototype,"textDecoration",void 0),As([jt("Wrap")],e.prototype,"textOverflow",void 0),As([jt("transparent")],e.prototype,"fill",void 0),e}(Hs);!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Ts(e,t),As([jt("white")],e.prototype,"fill",void 0),As([jt("Wrap")],e.prototype,"textOverflow",void 0),As([jt(1)],e.prototype,"strokeWidth",void 0),As([Ht(Ns)],e.prototype,"gradient",void 0),As([jt(1)],e.prototype,"opacity",void 0),As([jt(!1)],e.prototype,"italic",void 0),As([jt("")],e.prototype,"strokeDashArray",void 0),As([jt("black")],e.prototype,"color",void 0),As([jt(12)],e.prototype,"fontSize",void 0),As([jt("Arial")],e.prototype,"fontFamily",void 0),As([jt("CollapseSpace")],e.prototype,"whiteSpace",void 0),As([jt("Center")],e.prototype,"textAlign",void 0),As([jt("None")],e.prototype,"textDecoration",void 0),As([jt(!1)],e.prototype,"bold",void 0),As([jt("black")],e.prototype,"strokeColor",void 0),As([jt("WrapWithOverflow")],e.prototype,"textWrapping",void 0)}(re);!function(t){t[t.Default=0]="Default",t[t.expandNode=2]="expandNode",t[t.interaction=4]="interaction",t[t.GroupingInProgress=8]="GroupingInProgress",t[t.GroupClipboardInProcess=16]="GroupClipboardInProcess",t[t.ClearObject=32]="ClearObject"}(ns||(ns={})),function(t){t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical",t[t.Both=3]="Both",t[t.None=0]="None"}(ss||(ss={})),function(t){t[t.Visible=1]="Visible",t[t.Hidden=2]="Hidden",t[t.Hover=4]="Hover",t[t.Connect=8]="Connect"}(rs||(rs={})),function(t){t[t.None=0]="None",t[t.ShowHorizontalLines=1]="ShowHorizontalLines",t[t.ShowVerticalLines=2]="ShowVerticalLines",t[t.ShowLines=3]="ShowLines",t[t.SnapToHorizontalLines=4]="SnapToHorizontalLines",t[t.SnapToVerticalLines=8]="SnapToVerticalLines",t[t.SnapToLines=12]="SnapToLines",t[t.SnapToObject=16]="SnapToObject",t[t.All=31]="All"}(os||(os={})),function(t){t[t.None=1]="None",t[t.ConnectorSourceThumb=2]="ConnectorSourceThumb",t[t.ConnectorTargetThumb=4]="ConnectorTargetThumb",t[t.ResizeSouthEast=8]="ResizeSouthEast",t[t.ResizeSouthWest=16]="ResizeSouthWest",t[t.ResizeNorthEast=32]="ResizeNorthEast",t[t.ResizeNorthWest=64]="ResizeNorthWest",t[t.ResizeEast=128]="ResizeEast",t[t.ResizeWest=256]="ResizeWest",t[t.ResizeSouth=512]="ResizeSouth",t[t.ResizeNorth=1024]="ResizeNorth",t[t.Rotate=2048]="Rotate",t[t.UserHandle=4096]="UserHandle",t[t.ToolTip=8192]="ToolTip",t[t.ResizeAll=2046]="ResizeAll",t[t.All=16382]="All"}(as||(as={})),function(t){t.SamePoint="SamePoint",t.DifferentPoint="DifferentPoint"}(ls||(ls={})),function(t){t.Linear="Linear",t.Nonlinear="Nonlinear"}(hs||(hs={})),function(t){t[t.None=1]="None",t[t.Select=2]="Select",t[t.Delete=4]="Delete",t[t.Drag=8]="Drag",t[t.DragSourceEnd=16]="DragSourceEnd",t[t.DragTargetEnd=32]="DragTargetEnd",t[t.DragSegmentThumb=64]="DragSegmentThumb",t[t.AllowDrop=128]="AllowDrop",t[t.Bridging=256]="Bridging",t[t.BridgeObstacle=512]="BridgeObstacle",t[t.InheritBridging=1024]="InheritBridging",t[t.PointerEvents=2048]="PointerEvents",t[t.Tooltip=4096]="Tooltip",t[t.InheritTooltip=8192]="InheritTooltip",t[t.Interaction=4218]="Interaction",t[t.ReadOnly=16384]="ReadOnly",t[t.LineRouting=32768]="LineRouting",t[t.InheritLineRouting=65536]="InheritLineRouting",t[t.ConnectToNearByNode=131072]="ConnectToNearByNode",t[t.ConnectToNearByPort=262144]="ConnectToNearByPort",t[t.ConnectToNearByElement=393216]="ConnectToNearByElement",t[t.InheritSegmentThumbShape=524288]="InheritSegmentThumbShape",t[t.InheritSegmentThumbSize=1048576]="InheritSegmentThumbSize",t[t.Default=2043454]="Default"}(cs||(cs={})),function(t){t[t.ReadOnly=2]="ReadOnly",t[t.InheritReadOnly=4]="InheritReadOnly",t[t.Select=8]="Select",t[t.Drag=16]="Drag",t[t.Resize=32]="Resize",t[t.Rotate=64]="Rotate",t[t.Tooltip=128]="Tooltip",t[t.Interaction=120]="Interaction",t[t.None=0]="None"}(ds||(ds={})),function(t){t[t.None=0]="None",t[t.Select=2]="Select",t[t.Drag=4]="Drag",t[t.Rotate=8]="Rotate",t[t.Shadow=16]="Shadow",t[t.PointerEvents=32]="PointerEvents",t[t.Delete=64]="Delete",t[t.InConnect=128]="InConnect",t[t.OutConnect=256]="OutConnect",t[t.Individual=512]="Individual",t[t.Expandable=1024]="Expandable",t[t.AllowDrop=2048]="AllowDrop",t[t.Inherit=78]="Inherit",t[t.ResizeNorthEast=4096]="ResizeNorthEast",t[t.ResizeEast=8192]="ResizeEast",t[t.ResizeSouthEast=16384]="ResizeSouthEast",t[t.ResizeSouth=32768]="ResizeSouth",t[t.ResizeSouthWest=65536]="ResizeSouthWest",t[t.ResizeWest=131072]="ResizeWest",t[t.ResizeNorthWest=262144]="ResizeNorthWest",t[t.ResizeNorth=524288]="ResizeNorth",t[t.Resize=1044480]="Resize",t[t.AspectRatio=1048576]="AspectRatio",t[t.Tooltip=2097152]="Tooltip",t[t.InheritTooltip=4194304]="InheritTooltip",t[t.ReadOnly=8388608]="ReadOnly",t[t.HideThumbs=16777216]="HideThumbs",t[t.AllowMovingOutsideLane=33554432]="AllowMovingOutsideLane",t[t.Default=5240814]="Default"}(ps||(ps={})),function(t){t[t.None=0]="None",t[t.ElementIsPort=2]="ElementIsPort",t[t.ElementIsGroup=4]="ElementIsGroup",t[t.HorizontalLaneHeader=8]="HorizontalLaneHeader"}(us||(us={})),function(t){t[t.Rotate=2]="Rotate",t[t.ConnectorSource=4]="ConnectorSource",t[t.ConnectorTarget=8]="ConnectorTarget",t[t.ResizeNorthEast=16]="ResizeNorthEast",t[t.ResizeEast=32]="ResizeEast",t[t.ResizeSouthEast=64]="ResizeSouthEast",t[t.ResizeSouth=128]="ResizeSouth",t[t.ResizeSouthWest=256]="ResizeSouthWest",t[t.ResizeWest=512]="ResizeWest",t[t.ResizeNorthWest=1024]="ResizeNorthWest",t[t.ResizeNorth=2048]="ResizeNorth",t[t.Default=4094]="Default"}(gs||(gs={})),function(t){t[t.None=1]="None",t[t.Bridging=2]="Bridging",t[t.UndoRedo=4]="UndoRedo",t[t.Tooltip=8]="Tooltip",t[t.UserInteraction=16]="UserInteraction",t[t.ApiUpdate=32]="ApiUpdate",t[t.PageEditable=48]="PageEditable",t[t.Zoom=64]="Zoom",t[t.PanX=128]="PanX",t[t.PanY=256]="PanY",t[t.Pan=384]="Pan",t[t.ZoomTextEdit=512]="ZoomTextEdit",t[t.Virtualization=1024]="Virtualization",t[t.LineRouting=2048]="LineRouting",t[t.AvoidLineOverlapping=4096]="AvoidLineOverlapping",t[t.RestrictNegativeAxisDragDrop=8192]="RestrictNegativeAxisDragDrop",t[t.AutomaticPortCreation=16384]="AutomaticPortCreation",t[t.Default=500]="Default"}(ms||(ms={})),function(t){t[t.None=0]="None",t[t.SingleSelect=1]="SingleSelect",t[t.MultipleSelect=2]="MultipleSelect",t[t.ZoomPan=4]="ZoomPan",t[t.DrawOnce=8]="DrawOnce",t[t.ContinuousDraw=16]="ContinuousDraw",t[t.Default=3]="Default"}(fs||(fs={})),function(t){t[t.Self=1]="Self",t[t.Parent=2]="Parent"}(ys||(ys={})),function(t){t[t.Canvas=0]="Canvas",t[t.Svg=1]="Svg"}(vs||(vs={})),function(t){t[t.None=0]="None",t[t.Control=1]="Control",t[t.Meta=1]="Meta",t[t.Alt=2]="Alt",t[t.Shift=4]="Shift"}(bs||(bs={})),function(t){t[t.None=null]="None",t[t.Number0=0]="Number0",t[t.Number1=1]="Number1",t[t.Number2=2]="Number2",t[t.Number3=3]="Number3",t[t.Number4=4]="Number4",t[t.Number5=5]="Number5",t[t.Number6=6]="Number6",t[t.Number7=7]="Number7",t[t.Number8=8]="Number8",t[t.Number9=9]="Number9",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.Delete=46]="Delete",t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.BackSpace=8]="BackSpace",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.Star=56]="Star",t[t.Plus=187]="Plus",t[t.Minus=189]="Minus",t[t.BracketLeft=219]="BracketLeft",t[t.BracketRight=221]="BracketRight"}(Cs||(Cs={})),function(t){t[t.Render=2]="Render",t[t.PublicMethod=4]="PublicMethod",t[t.ToolAction=8]="ToolAction",t[t.UndoRedo=16]="UndoRedo",t[t.TextEdit=32]="TextEdit",t[t.Group=64]="Group",t[t.Clear=128]="Clear",t[t.PreventClearSelection=256]="PreventClearSelection",t[t.Interactions=512]="Interactions",t[t.PreventHistory=1024]="PreventHistory",t[t.PreventIconsUpdate=2048]="PreventIconsUpdate",t[t.PreventCollectionChangeOnDragOver=4096]="PreventCollectionChangeOnDragOver",t[t.PreventZIndexOnDragging=8192]="PreventZIndexOnDragging",t[t.isGroupDragging=16384]="isGroupDragging",t[t.DragUsingMouse=32768]="DragUsingMouse",t[t.DecoratorPropertyChange=65536]="DecoratorPropertyChange",t[t.PreventLaneContainerUpdate=131072]="PreventLaneContainerUpdate"}(Is||(Is={})),function(t){t[t.None=2]="None",t[t.DrawSelectorBorder=4]="DrawSelectorBorder",t[t.PreventRenderSelector=8]="PreventRenderSelector"}(Ms||(Ms={})),function(t){t[t.None=0]="None",t[t.PreventDrag=2]="PreventDrag",t[t.PreventScale=4]="PreventScale",t[t.PreventDataInit=8]="PreventDataInit",t[t.hScrollbarMoved=16]="hScrollbarMoved",t[t.vScrollbarMoved=32]="vScrollbarMoved",t[t.AnimationClick=64]="AnimationClick",t[t.EnableGroupAction=128]="EnableGroupAction",t[t.PanInProgress=256]="PanInProgress",t[t.OverViewAction=512]="OverViewAction"}(Ss||(Ss={})),function(t){t[t.None=0]="None",t[t.PropertyChange=1024]="PropertyChange",t[t.Interaction=2048]="Interaction"}(xs||(xs={})),function(t){t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(ws||(ws={})),function(t){t[t.collectionChange=0]="collectionChange",t[t.rotateChange=1]="rotateChange",t[t.positionChange=2]="positionChange",t[t.propertyChange=3]="propertyChange",t[t.selectionChange=4]="selectionChange",t[t.sizeChange=5]="sizeChange",t[t.drop=6]="drop",t[t.sourcePointChange=7]="sourcePointChange",t[t.targetPointChange=8]="targetPointChange",t[t.connectionChange=9]="connectionChange",t[t.animationComplete=10]="animationComplete",t[t.click=11]="click",t[t.doubleClick=12]="doubleClick",t[t.scrollChange=13]="scrollChange",t[t.dragEnter=14]="dragEnter",t[t.dragLeave=15]="dragLeave",t[t.dragOver=16]="dragOver",t[t.textEdit=17]="textEdit",t[t.paletteSelectionChange=18]="paletteSelectionChange",t[t.historyChange=19]="historyChange",t[t.mouseEnter=20]="mouseEnter",t[t.mouseLeave=21]="mouseLeave",t[t.mouseOver=22]="mouseOver",t[t.expandStateChange=23]="expandStateChange",t[t.segmentCollectionChange=24]="segmentCollectionChange",t[t.commandExecute=25]="commandExecute",t[t.historyStateChange=26]="historyStateChange",t[t.onUserHandleMouseDown=27]="onUserHandleMouseDown",t[t.onUserHandleMouseUp=28]="onUserHandleMouseUp",t[t.onUserHandleMouseEnter=29]="onUserHandleMouseEnter",t[t.onUserHandleMouseLeave=30]="onUserHandleMouseLeave",t[t.onImageLoad=31]="onImageLoad",t[t.onDoBindingInit=32]="onDoBindingInit",t[t.keyUp=33]="keyUp",t[t.keyDown=34]="keyDown",t[t.fixedUserHandleClick=35]="fixedUserHandleClick",t[t.elementDraw=36]="elementDraw",t[t.mouseWheel=37]="mouseWheel",t[t.segmentChange=38]="segmentChange",t[t.onFixedUserHandleMouseDown=39]="onFixedUserHandleMouseDown",t[t.onFixedUserHandleMouseUp=40]="onFixedUserHandleMouseUp",t[t.onFixedUserHandleMouseEnter=41]="onFixedUserHandleMouseEnter",t[t.onFixedUserHandleMouseLeave=42]="onFixedUserHandleMouseLeave",t[t.loaded=43]="loaded",t[t.layoutUpdated=44]="layoutUpdated"}(Ds||(Ds={})),function(t){t[t.None=1]="None",t[t.Drag=2]="Drag",t[t.Draw=4]="Draw",t[t.InConnect=8]="InConnect",t[t.OutConnect=16]="OutConnect",t[t.ToolTip=32]="ToolTip",t[t.InheritTooltip=64]="InheritTooltip",t[t.Default=24]="Default"}(Es||(Es={}));var Us,Fs;!function(t){t[t.None=1]="None",t[t.Source=2]="Source",t[t.Target=4]="Target",t[t.Intermediate=8]="Intermediate",t[t.All=14]="All"}(Us||(Us={})),function(t){t[t.None=0]="None",t[t.SymmetricAngle=2]="SymmetricAngle",t[t.SymmetricDistance=4]="SymmetricDistance",t[t.Default=6]="Default"}(Fs||(Fs={}));var Ws=function(){function t(){this.pivot={x:.5,y:.5},this.isDirt=!0,this.isExport=!1,this.exportScaleValue={x:0,y:0},this.exportScaleOffset={x:0,y:0},this.canApplyStyle=!0,this.visible=!0,this.offsetX=0,this.offsetY=0,this.cornerRadius=0,this.minHeight=void 0,this.minWidth=void 0,this.maxWidth=void 0,this.maxHeight=void 0,this.width=void 0,this.height=void 0,this.rotateAngle=0,this.margin={left:0,right:0,top:0,bottom:0},this.connectionDirection="Auto",this.horizontalAlignment="Auto",this.verticalAlignment="Auto",this.flip=ss.None,this.flipMode="All",this.relativeMode="Point",this.transform=ys.Self|ys.Parent,this.style={fill:"white",strokeColor:"black",opacity:1,strokeWidth:1},this.desiredSize=new un,this.actualSize=new un,this.parentTransform=0,this.preventContainer=!1,this.isSvgRender=!1,this.bounds=new Tn(0,0,0,0),this.shadow=null,this.description="",this.staticSize=!1,this.shapeType="",this.isRectElement=!1,this.isCalculateDesiredSize=!0,this.flipOffset={x:0,y:0},this.elementActions=us.None,this.inversedAlignment=!0,this.position=void 0,this.unitMode=void 0,this.float=!1,this.floatingBounds=void 0}return t.prototype.setOffsetWithRespectToBounds=function(t,e,i){this.unitMode=i,this.position={x:t,y:e}},t.prototype.getAbsolutePosition=function(t){if(void 0!==this.position)return"Absolute"===this.unitMode?this.position:{x:this.position.x*t.width,y:this.position.y*t.height}},Object.defineProperty(t.prototype,"outerBounds",{get:function(){return this.floatingBounds||this.bounds},set:function(t){this.floatingBounds=t},enumerable:!0,configurable:!0}),t.prototype.measure=function(t,e,i){var n=void 0!==this.width?this.width:(t.width||0)-this.margin.left-this.margin.right,s=void 0!==this.height?this.height:(t.height||0)-this.margin.top-this.margin.bottom;return this.id&&0===s&&this.elementActions&us.HorizontalLaneHeader&&(s=this.actualSize.height),this.desiredSize=new un(n,s),this.isCalculateDesiredSize&&(this.desiredSize=this.validateDesiredSize(this.desiredSize,t)),this.desiredSize},t.prototype.arrange=function(t){return this.actualSize=t,this.updateBounds(),this.actualSize},t.prototype.updateBounds=function(){this.bounds=Un(this)},t.prototype.validateDesiredSize=function(t,e){return!this.isRectElement||this.width||this.minWidth||this.maxWidth||(t.width=50),!this.isRectElement||this.height||this.minHeight||this.maxHeight||(t.height=50),(void 0===t||void 0!==this.width&&void 0!==this.height)&&((t=t||new un).width=void 0===this.width?(e.width||0)-this.margin.left-this.margin.right:this.width,t.height=void 0===this.height?(e.height||0)-this.margin.top-this.margin.bottom:this.height),void 0!==this.minWidth&&(t.width=Math.max(t.width,this.minWidth)),void 0!==this.minHeight&&(t.height=Math.max(t.height,this.minHeight)),void 0!==this.maxWidth&&0!==this.maxWidth&&(t.width=Math.min(t.width,this.maxWidth)),void 0!==this.maxHeight&&0!==this.maxHeight&&(t.height=Math.min(t.height,this.maxHeight)),t},t}(),Ys=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=new Ls(0,0,0,0),e.desiredBounds=void 0,e.measureChildren=!0,e.prevRotateAngle=0,e}return Ys(e,t),e.prototype.hasChildren=function(){return void 0!==this.children&&this.children.length>0},e.prototype.measure=function(t,i,n){this.desiredBounds=void 0;var s,r,o=void 0;if(this.hasChildren()){for(var a=0;a<this.children.length;a++){"Stretch"!==(s=this.children[parseInt(a.toString(),10)]).horizontalAlignment||t.width||(t.width=s.bounds.width),"Stretch"!==s.verticalAlignment||t.height||(t.height=s.bounds.height);var l="Stretch"===s.horizontalAlignment||"Stretch"===s.verticalAlignment;(this.measureChildren||l||s instanceof e&&void 0!==s.measureChildren)&&s.measure(t,i,n),r=this.GetChildrenBounds(s),"Stretch"!==s.horizontalAlignment&&"Stretch"!==s.verticalAlignment?void 0===this.desiredBounds?this.desiredBounds=r:this.desiredBounds.uniteRect(r):!this.actualSize||this.actualSize.width||this.actualSize.height||s.preventContainer||"Stretch"!==s.horizontalAlignment||"Stretch"!==s.verticalAlignment||(void 0===this.desiredBounds?this.desiredBounds=s.bounds:this.desiredBounds.uniteRect(s.bounds))}if(void 0!==this.desiredBounds&&0!==this.rotateAngle){var h={x:this.desiredBounds.x+this.desiredBounds.width*this.pivot.x,y:this.desiredBounds.y+this.desiredBounds.height*this.pivot.y},c=ts(this.rotateAngle,void 0,void 0,h);this.desiredBounds.x=c.x-this.desiredBounds.width*this.pivot.x,this.desiredBounds.y=c.y-this.desiredBounds.height*this.pivot.y}void 0!==this.desiredBounds&&(this.desiredBounds.width+=this.padding.left+this.padding.right,this.desiredBounds.height+=this.padding.top+this.padding.bottom,this.desiredBounds.x-=this.padding.left,this.desiredBounds.y-=this.padding.top),this.desiredBounds&&(o=new un(this.desiredBounds.width,this.desiredBounds.height))}return o=this.validateDesiredSize(o,t),this.stretchChildren(o),this.desiredSize=o,o},e.prototype.arrange=function(t){var i,n=this.desiredBounds;if(n){this.offsetX,this.offsetY;if(this.offsetX=n.x+n.width*this.pivot.x,this.offsetY=n.y+n.height*this.pivot.y,this.hasChildren())for(var s=0;s<this.children.length;s++){var r=!1;if("Stretch"===(i=this.children[parseInt(s.toString(),10)]).horizontalAlignment&&(i.offsetX=this.offsetX,i.parentTransform=this.parentTransform+this.rotateAngle,this.flip&&this.elementActions&us.ElementIsGroup&&(i.parentTransform=this.flip===ss.Horizontal||this.flip===ss.Vertical?-i.parentTransform:i.parentTransform),r=!0),"Stretch"===i.verticalAlignment&&(i.offsetY=this.offsetY,i.parentTransform=this.parentTransform+this.rotateAngle,r=!0),(r||this.measureChildren||i instanceof e&&void 0!==i.measureChildren)&&i.arrange(i.desiredSize),0===s){var o=i.outerBounds;this.outerBounds=new Tn(o.x,o.y,o.width,o.height)}else this.outerBounds.uniteRect(i.outerBounds)}}return this.actualSize=t,this.updateBounds(),this.prevRotateAngle=this.rotateAngle,t},e.prototype.stretchChildren=function(t){if(this.hasChildren())for(var i=0,n=this.children;i<n.length;i++){var s=n[i];"Stretch"!==s.horizontalAlignment&&void 0!==s.desiredSize.width||(s.desiredSize.width=t.width-s.margin.left-s.margin.right),"Stretch"!==s.verticalAlignment&&void 0!==s.desiredSize.height||(s.desiredSize.height=t.height-s.margin.top-s.margin.bottom),s instanceof e&&s.stretchChildren(s.desiredSize)}},e.prototype.applyPadding=function(t){t.width+=this.padding.left+this.padding.right,t.height+=this.padding.top+this.padding.bottom},e.prototype.findChildOffsetFromCenter=function(t,e){var i=es({x:e.x-t.desiredSize.width/2,y:e.y-t.desiredSize.height/2},t);i=ts(t.rotateAngle,e.x,e.y,i),i=ts(this.rotateAngle+this.parentTransform,this.offsetX,this.offsetY,i),t.offsetX=i.x,t.offsetY=i.y},e.prototype.GetChildrenBounds=function(t){var e=t.desiredSize.clone(),i=(t.rotateAngle,this.rotateAngle,t.offsetX),n=t.offsetY,s=i-e.width*t.pivot.x,r=n-e.height*t.pivot.y,o=s+e.width,a=r+e.height,l={x:s,y:r},h={x:o,y:r},c={x:s,y:a},d={x:o,y:a};return l=ts(t.rotateAngle,t.offsetX,t.offsetY,l),h=ts(t.rotateAngle,t.offsetX,t.offsetY,h),c=ts(t.rotateAngle,t.offsetX,t.offsetY,c),d=ts(t.rotateAngle,t.offsetX,t.offsetY,d),0!==this.rotateAngle&&(l=ts(-this.rotateAngle,void 0,void 0,l),h=ts(-this.rotateAngle,void 0,void 0,h),c=ts(-this.rotateAngle,void 0,void 0,c),d=ts(-this.rotateAngle,void 0,void 0,d)),Tn.toBounds([l,h,c,d])},e}(Ws),Qs=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zs=function(t){function e(){var e=t.call(this)||this;return e.textContent="",e.canMeasure=!0,e.rotationReference="Parent",e.isLaneOrientation=!1,e.canConsiderBounds=!0,e.annotationVisibility="Visible",e.hyperlink={color:"blue"},e.doWrap=!0,e.textNodes=[],e.style={color:"black",fill:"transparent",strokeColor:"black",strokeWidth:1,fontFamily:"Arial",fontSize:12,whiteSpace:"CollapseSpace",textWrapping:"WrapWithOverflow",textAlign:"Center",italic:!1,bold:!1,textDecoration:"None",strokeDashArray:"",opacity:5,gradient:null,textOverflow:"Wrap"},e.style.fill="transparent",e.style.strokeColor="transparent",e}return Qs(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.textContent},set:function(t){this.textContent!==t&&(this.textContent=t,this.isDirt=!0,this.doWrap=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.textNodes},set:function(t){this.textNodes=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wrapBounds",{get:function(){return this.textWrapBounds},set:function(t){this.textWrapBounds=t},enumerable:!0,configurable:!0}),e.prototype.refreshTextElement=function(){this.isDirt=!0},e.prototype.measure=function(t){var e;return e=this.isDirt&&this.canMeasure?function(t,e,i,n,s){var r,o,a=new un(0,0),l=function(t,e){var i={fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray,opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,width:e||t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x+.5,y:t.offsetY-t.actualSize.height*t.pivot.y+.5};return i.fontSize=t.style.fontSize,i.fontFamily=t.style.fontFamily,i.textOverflow=t.style.textOverflow,i.textDecoration=t.style.textDecoration,i.doWrap=t.doWrap,i.whiteSpace=Jn(t.style.whiteSpace,t.style.textWrapping),i.content=t.content,i.textWrapping=t.style.textWrapping,i.breakWord=Zn(t.style.textWrapping),i.textAlign=Qn(t.style.textAlign),i.color=t.style.color,i.italic=t.style.italic,i.bold=t.style.bold,i.dashArray="",i.strokeWidth=0,i.fill="",i}(t,n);t.childNodes=r=function(t,e,i){var n,s,r=[],o=0,a=e||t.content;if("nowrap"!==t.whiteSpace&&"pre"!==t.whiteSpace)if("breakall"===t.breakWord)for(n="",n+=a[0],o=0;o<a.length;o++)if((s=Xn(n,t))>=t.width&&n.length>0)r[r.length]={text:n,x:0,dy:0,width:s},n="";else{(n+=a[o+1]||"").indexOf("\n")>-1&&(r[r.length]={text:n,x:0,dy:0,width:Xn(n,t)},n="");var l=Xn(n,t);Math.ceil(l)+2>=t.width&&n.length>0&&(r[r.length]={text:n,x:0,dy:0,width:l},n=""),o===a.length-1&&n.length>0&&(r[r.length]={text:n,x:0,dy:0,width:l},n="")}else r=function(t,e,i){var n,s,r,o,a=[],l="",h=0,c=0,d="nowrap"!==t.whiteSpace,p=e||t.content,u=p.split("\n");for(h=0;h<u.length;h++)for(n="NoWrap"!==t.textWrapping?u[parseInt(h.toString(),10)].split(" "):[u[parseInt(h.toString(),10)]],c=0;c<n.length;c++){l+=((0!==c||1===n.length)&&d&&l.length>0?" ":"")+n[parseInt(c.toString(),10)];var g=Xn(s=n[c+1]?l+" "+n[c+1]:l,t);Math.floor(g)>(i||t.width)-2&&l.length>0?(a[a.length]={text:l,x:0,dy:0,width:s===l?g:l===o?r:Xn(l,t)},l=""):c===n.length-1&&(a[a.length]={text:l,x:0,dy:0,width:g},l=""),o=s,r=g}return a}(t,e,i);else r[r.length]={text:a,x:0,dy:0,width:Xn(a,t)};return r}(l,s,t.isLaneOrientation?n:void 0),t.wrapBounds=o=function(t,e){var i,n,s={x:0,width:0},r=0;for(r=0;r<e.length;r++)n=i=e[parseInt(r.toString(),10)].width,i="left"===t.textAlign||"justify"===t.textAlign?0:"center"===t.textAlign?i>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)?0:-i/2:"right"===t.textAlign?-i:e.length>1?0:-i/2,e[parseInt(r.toString(),10)].dy=1.2*t.fontSize,e[parseInt(r.toString(),10)].x=i,s.x=Math.min(s.x,i),s.width=Math.max(s.width,n);return s}(l,r),a.width=o.width,t.wrapBounds.width>=n&&"Wrap"!==l.textOverflow&&(a.width=n);return a.height=r.length*t.style.fontSize*1.2,a}(this,this.style,this.content,this.isLaneOrientation?t.height:this.width||t.width):this.desiredSize,void 0===this.width||void 0===this.height?this.desiredSize=new un(e.width,e.height):this.desiredSize=new un(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return(t.width!==this.actualSize.width||t.height!==this.actualSize.height||this.isDirt)&&(this.doWrap=!0),this.actualSize=t,this.updateBounds(),this.isDirt=!1,this.actualSize},e}(Ws),qs=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xs=function(t){function e(){var e=t.call(this)||this;return e.pathData="",e.transformPath=!0,e.absolutePath="",e.canMeasurePath=!1,e.absoluteBounds=new Tn,e}return qs(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.pathData},set:function(t){this.pathData!==t&&(this.pathData=t,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.getPoints=function(){var t=this;return this.pointTimer||(this.pointTimer=setTimeout(function(){t.points=null,t.pointTimer=null},200)),this.points=this.points||function(t){var e,i,n=[],s="measureElement";window[""+s].style.visibility="visible";var r=Hy(window[""+s].children[2])[0];r.setAttributeNS(null,"d",t.data);var o=t.absoluteBounds,a=Fy(t,o,t);r.setAttributeNS(null,"d",a);var l=r.getTotalLength(),h=qb.prototype.getPathData(a);if(0===h.length){for(i=0;i<=l;i+=10)e=r.getPointAtLength(i),n.push({x:e.x,y:e.y});qb.prototype.setPathData(a,n)}else n=h;return window[""+s].style.visibility="hidden",n}(this),function(t,e){for(var i=[],n=t.offsetX-t.actualSize.width*t.pivot.x,s=t.offsetY-t.actualSize.height*t.pivot.y,r=0,o=e;r<o.length;r++){var a=o[r],l=void 0,h=n+a.x,c=s+a.y,d=n+t.actualSize.width-a.x,p=s+t.actualSize.height-a.y;switch(t.flip){case ss.Both:l={x:d,y:p};break;case ss.Horizontal:l={x:d,y:c};break;case ss.Vertical:l={x:h,y:p};break;default:l={x:h,y:c}}var u=void 0,g=t.rotateAngle+t.parentTransform;g&&On(u=Nn(),g,t.offsetX,t.offsetY),u&&(l=Ln(u,l)),i.push(l)}return i}(this,this.points)},e.prototype.measure=function(t){return this.staticSize&&void 0!==this.width&&void 0!==this.height?this.absoluteBounds=new Tn(this.offsetX-this.width*this.pivot.x,this.offsetY-this.height*this.pivot.y,this.width,this.height):(!this.isDirt||!this.transformPath&&void 0!==this.width&&void 0!==this.height||this.absoluteBounds&&0!==this.absoluteBounds.height)&&!this.canMeasurePath||(this.absoluteBounds=Vy(this.data?this.data:"")),void 0===this.width?this.desiredSize=new un(this.absoluteBounds.width,this.height||this.absoluteBounds.height):void 0===this.height?this.desiredSize=new un(this.width||this.absoluteBounds.width,this.absoluteBounds.height):this.desiredSize=new un(this.width,this.height),this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.canMeasurePath=!1,this.desiredSize},e.prototype.arrange=function(t){return(this.isDirt||this.actualSize.width!==t.width||this.actualSize.height!==t.height)&&(this.isDirt=!0,this.absolutePath=this.updatePath(this.data,this.absoluteBounds,t),this.staticSize||(this.points=null)),this.actualSize=this.desiredSize,this.updateBounds(),this.isDirt=!1,this.actualSize},e.prototype.updatePath=function(t,e,i){var n=!1,s="",r=-e.x,o=-e.y,a=[];return i.width===e.width&&i.height===e.height||(r=i.width/Number(e.width?e.width:1),o=i.height/Number(e.height?e.height:1),n=!0),a=xn(a=yn(t)),s=(n||this.isDirt)&&this.transformPath?In(a,r,o,n,e.x,e.y,0,0):wn(a),n=!1,s},e}(Ws),Gs=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ks=function(t){function e(){var e=t.call(this)||this;return e.imageSource="",e.imageScale="None",e.imageAlign="None",e.stretch="Stretch",e}return Gs(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.imageSource},set:function(t){this.imageSource=t,this.isDirt=!0},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this.isDirt&&("Stretch"!==this.stretch||void 0===this.width&&void 0===this.height)&&(this.contentSize=function(t,e,i,n){var s="measureElement";window[""+s].style.visibility="visible";var r=window[""+s].children[1];r.setAttribute("src",t);var o=r.getBoundingClientRect(),a=o.width,l=o.height;e=new un(a,l),window[""+s].style.visibility="hidden";var h=document.createElement("img");return h.setAttribute("src",t),dv(h,{id:i+"sf-imageNode"}),h.style.display="none",document.body.appendChild(h),h.onload=function(t){var e=t.currentTarget;n&&n(i,{width:e.width,height:e.height})},e}(this.source,this.contentSize,e,i),this.isDirt=!1),void 0!==this.width&&void 0!==this.height?(this.desiredSize=new un(this.width,this.height),this.contentSize=this.desiredSize):this.desiredSize=this.contentSize,this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new un(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(Ws),Js=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.measureChildren=void 0,e}return Js(e,t),e.prototype.measure=function(e,i,n){var s=void 0,r=void 0;if(this.hasChildren()){for(var o=0,a=this.children;o<a.length;o++){var l=a[o];l instanceof Zs?l.canMeasure&&(e.width=e.width||this.maxWidth||this.minWidth,l.measure(e)):l instanceof Zs||l.measure(e,i,n);var h=l.desiredSize.clone();0!==l.rotateAngle&&(h=$n(h,l.rotateAngle));var c=h.width+l.margin.right,d=h.height+l.margin.bottom,p=new Tn(l.margin.left,l.margin.top,c,d);if(l.float)if(void 0!==l.getAbsolutePosition(h))continue;l instanceof Zs&&!(l instanceof Zs&&l.canConsiderBounds)||(void 0===r?r=p:r.uniteRect(p))}if(r){var u,g;u=Math.max(r.left,0),g=Math.max(r.top,0),s=new un(r.width+u,r.height+g)}}return s=t.prototype.validateDesiredSize.call(this,s,e),t.prototype.stretchChildren.call(this,s),s.width+=this.padding.left+this.padding.right,s.height+=this.padding.top+this.padding.bottom,this.desiredSize=s,s},e.prototype.arrange=function(e,i){if(this.outerBounds=new Tn,this.hasChildren())for(var n=this.offsetY-e.height*this.pivot.y+this.padding.top,s=this.offsetX-e.width*this.pivot.x+this.padding.left,r=0,o=this.children;r<o.length;r++){var a=o[r];if(0!==(a.transform&ys.Parent)){a.parentTransform=this.parentTransform+this.rotateAngle,(this.flip!==ss.None||this.elementActions&us.ElementIsGroup)&&(this.flip!==ss.Horizontal&&this.flip!==ss.Vertical||a.elementActions&us.ElementIsPort||this.setParentTransform(a));var l,h=a.desiredSize.clone(),c=void 0,d=s,p=n;if("Point"===a.relativeMode){var u=a.getAbsolutePosition(e);void 0!==u&&(d+=u.x,p+=u.y)}"Object"===a.relativeMode?(c=this.alignChildBasedOnParent(a,h,e,d,p),a.flip=this.flip):c=this.alignChildBasedOnaPoint(a,d,p),l={x:c.x+h.width/2,y:c.y+h.height/2},t.prototype.findChildOffsetFromCenter.call(this,a,l)}!i||"Stretch"!==a.horizontalAlignment&&"Stretch"!==a.verticalAlignment?a instanceof Zs&&a.canMeasure?(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a instanceof Zs||(a.arrange(a.desiredSize),this.outerBounds.uniteRect(a.outerBounds)):a.arrange(e)}return this.actualSize=e,this.updateBounds(),this.outerBounds.uniteRect(this.bounds),e},e.prototype.setParentTransform=function(t){"All"===this.flipMode||t instanceof Ks||!(t instanceof Ks||t instanceof Zs||t instanceof Xs)&&t instanceof Ws?t.parentTransform>0&&(t.parentTransform=-t.parentTransform):t instanceof Zs&&void 0===t.position?t.parentTransform=-t.parentTransform:"None"===this.flipMode?!(t.elementActions&us.ElementIsPort)&&t instanceof Xs&&t.parentTransform>0&&(t.parentTransform=-t.parentTransform):t instanceof Xs?t.parentTransform>0&&(t.parentTransform=-t.parentTransform):"LabelText"!==this.flipMode&&"LabelAndLabelText"!==this.flipMode&&"PortAndLabelText"!==this.flipMode||t instanceof Zs&&t.parentTransform>0&&(t.parentTransform=-t.parentTransform)},e.prototype.alignChildBasedOnParent=function(t,e,i,n,s){switch(t.horizontalAlignment){case"Auto":case"Left":n+=t.margin.left;break;case"Right":n+=i.width-e.width-t.margin.right;break;case"Stretch":case"Center":n+=i.width/2-e.width/2}switch(t.verticalAlignment){case"Auto":case"Top":s+=t.margin.top;break;case"Bottom":s+=i.height-e.height-t.margin.bottom;break;case"Stretch":case"Center":s+=i.height/2-e.height/2}return{x:n,y:s}},e.prototype.alignChildBasedOnaPoint=function(t,e,i){switch(e+=t.margin.left-t.margin.right,i+=t.margin.top-t.margin.bottom,t.horizontalAlignment){case"Auto":case"Left":e=t.inversedAlignment?e:e-t.desiredSize.width;break;case"Stretch":case"Center":e-=t.desiredSize.width*t.pivot.x;break;case"Right":e=t.inversedAlignment?e-t.desiredSize.width:e}switch(t.verticalAlignment){case"Auto":case"Top":i=t.inversedAlignment?i:i-t.desiredSize.height;break;case"Stretch":case"Center":i-=t.desiredSize.height*t.pivot.y;break;case"Bottom":i=t.inversedAlignment?i-t.desiredSize.height:i}return{x:e,y:i}},e}(_s);function tr(t){return ar[t.toString()]}var er,ir,nr,sr,rr,or,ar={Rectangle:"M0,0 L50,0 L50,50 L0,50 z",Ellipse:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Hexagon:"M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z",Parallelogram:"M30,0 L60,0 L45,30 L15,30 z",Triangle:"M45,0 L90,45 L0,45 L45,0 z",Plus:"M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z",Star:"M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z",Pentagon:"M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z",Heptagon:"M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z",Octagon:"M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z",Trapezoid:"M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z",Decagon:"M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z",RightTriangle:"M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z",Cylinder:"M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016",Diamond:"M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z"},lr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hr=function(t){function e(e,i){var n=t.call(this)||this;return n.data="",n.nodeId="",n.diagramId="",n.scale="Stretch",n.diagramId=i,n.nodeId=e,n}return lr(e,t),Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.canReset||(this.canReset=!0,this.template=lv(this,!1),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){if(this.isDirt){var e=function(t){var e="measureElement";window[e].style.visibility="visible";var i=window[e].children[2];i.appendChild(t);var n=t.getBoundingClientRect(),s=i.getBoundingClientRect(),r=n;return r.x=n.left-s.left,r.y=n.top-s.top,i.removeChild(t),window[e].style.visibility="hidden",r}(this.template);this.contentSize=new un,this.contentSize.width=e.width,this.contentSize.height=e.height;var i=e.x,n=e.y;this.templatePosition={x:i,y:n},this.isDirt=!1}if(void 0===this.width||void 0===this.height){var s=function(t){var e="measureElement";window[e].style.visibility="visible";var i=window[e].children[2];i.appendChild(t);var n=i.getBoundingClientRect();return i.removeChild(t),window[e].style.visibility="hidden",n}(this.template);this.desiredSize=new un(s.width,s.height)}else this.desiredSize=new un(this.width,this.height);return this.desiredSize=this.validateDesiredSize(this.desiredSize,t),this.desiredSize},e.prototype.arrange=function(t){return this.actualSize=new un(this.desiredSize.width,this.desiredSize.height),this.updateBounds(),this.actualSize},e}(Ws),cr=!1;function dr(t,e,i,n,s){if(ir=void 0,ir=s,cr=!!n,!t)return{left:0,top:0};e||(e="left"),i||(i="top"),sr=t.ownerDocument,nr=t;return function(t,e,i){switch(er=nr.getBoundingClientRect(),e+t){case"topcenter":pr(Ir(),i),ur(vr(),i);break;case"topright":pr(Cr(),i),ur(vr(),i);break;case"centercenter":pr(Ir(),i),ur(yr(),i);break;case"centerright":pr(Cr(),i),ur(yr(),i);break;case"centerleft":pr(br(),i),ur(yr(),i);break;case"bottomcenter":pr(Ir(),i),ur(fr(),i);break;case"bottomright":pr(Cr(),i),ur(fr(),i);break;case"bottomleft":pr(br(),i),ur(fr(),i);break;default:pr(br(),i),ur(vr(),i)}return nr=null,i}(e.toLowerCase(),i.toLowerCase(),{left:0,top:0})}function pr(t,e){e.left=t}function ur(t,e){e.top=t}function gr(){return sr.documentElement.scrollTop||sr.body.scrollTop}function mr(){return sr.documentElement.scrollLeft||sr.body.scrollLeft}function fr(){return cr?er.bottom:er.bottom+gr()}function yr(){return vr()+er.height/2}function vr(){return cr?er.top:er.top+gr()}function br(){return er.left+mr()}function Cr(){var t=nr&&((nr.classList.contains("e-date-wrapper")||nr.classList.contains("e-datetime-wrapper"))&&nr.classList.contains("e-rtl")||nr.classList.contains("e-ddl")&&nr.classList.contains("e-rtl")||nr.classList.contains("e-date-range-wrapper"))?ir?ir.width:0:ir&&er.width>=ir.width?ir.width:0;return nr&&nr.classList.contains("e-rtl")&&nr.classList.contains("e-multiselect")&&(t=ir.width),er.right+mr()-t}function Ir(){return br()+er.width/2}function Mr(t,e,i,n){if(void 0===e&&(e=null),void 0===i&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var s=t.getBoundingClientRect();if(or=e,rr=t.ownerDocument,n||(n=dr(t,"left","top")),i.X){var r=or?Or():Wr(),o=Br(),a=Hr(),l=o-n.left,h=n.left+s.width-a;s.width>r?n.left=l>0&&h<=0?a-s.width:h>0&&l<=0?o:l>h?a-s.width:o:l>0?n.left+=l:h>0&&(n.left-=h)}if(i.Y){var c=or?kr():Fr(),d=jr(),p=Rr(),u=d-n.top,g=n.top+s.height-p;s.height>c?n.top=u>0&&g<=0?p-s.height:g>0&&u<=0?d:u>g?p-s.height:d:u>0?n.top+=u:g>0&&(n.top-=g)}return n}function Sr(t,e,i,n){void 0===e&&(e=null);var s=dr(t,"left","top");i&&(s.left=i),n&&(s.top=n);var r=[];or=e,rr=t.ownerDocument;var o=t.getBoundingClientRect(),a=s.top,l=s.left,h=s.left+o.width,c=Lr(a,s.top+o.height),d=Tr(l,h);return c.topSide&&r.push("top"),d.rightSide&&r.push("right"),d.leftSide&&r.push("left"),c.bottomSide&&r.push("bottom"),r}function xr(t,e,i,n,s,r,o,a,l){if(void 0===o&&(o=null),void 0===a&&(a={X:!0,Y:!0}),e&&t&&s&&r&&(a.X||a.Y)){var h,c={TL:null,TR:null,BL:null,BR:null},d={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(t).display){var p=t.style.visibility;t.style.visibility="hidden",t.style.display="block",h=t.getBoundingClientRect(),t.style.removeProperty("display"),t.style.visibility=p}else h=t.getBoundingClientRect();var u={posX:s,posY:r,offsetX:i,offsetY:n,position:{left:0,top:0}};or=o,rr=e.ownerDocument,function(t,e,i,n,s){i.position=dr(t,i.posX,i.posY,n,s),e.TL=dr(t,"left","top",n,s),e.TR=dr(t,"right","top",n,s),e.BR=dr(t,"left","bottom",n,s),e.BL=dr(t,"right","bottom",n,s)}(e,c,u,l,h),Er(d,u,h),a.X&&Ar(e,d,c,u,h,!0),a.Y&&c.TL.top>-1&&Nr(e,d,c,u,h,!0),function(t,e,i){var n=0,s=0;if(null!=t.offsetParent&&("absolute"===getComputedStyle(t.offsetParent).position||"relative"===getComputedStyle(t.offsetParent).position)){var r=dr(t.offsetParent,"left","top",!1,i);n=r.left,s=r.top}var o=1,a=1,l=Dr(t);if(l){var h=getComputedStyle(l).transform;if("none"!==h){var c=new DOMMatrix(h);o=c.a,a=c.d}if("none"!==getComputedStyle(l).zoom){var d=wr(document.body);o*=d,a*=d}}t.style.top=e.position.top/a+e.offsetY-s/a+"px",t.style.left=e.position.left/o+e.offsetX-n/o+"px"}(t,u,h)}}function wr(t){var e=getComputedStyle(t).zoom;return parseFloat(e)||1}function Dr(t){for(;t;){var e=window.getComputedStyle(t).transform,i=wr(document.body);if(e&&"none"!==e||i&&1!==i)return t;if(t===document.body)return null;t=t.offsetParent||t.parentElement}return null}function Er(t,e,i){t.TL={top:e.position.top+e.offsetY,left:e.position.left+e.offsetX},t.TR={top:t.TL.top,left:t.TL.left+i.width},t.BL={top:t.TL.top+i.height,left:t.TL.left},t.BR={top:t.TL.top+i.height,left:t.TL.left+i.width}}function Tr(t,e){var i=!1,n=!1;return t-Ur()<Br()&&(i=!0),e>Hr()&&(n=!0),{leftSide:i,rightSide:n}}function Ar(t,e,i,n,s,r){var o=Tr(e.TL.left,e.TR.left);i.TL.left-Ur()<=Br()&&(o.leftSide=!1),i.TR.left>Hr()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&("right"===n.posX?n.posX="left":n.posX="right",n.offsetX=n.offsetX+s.width,n.offsetX=-1*n.offsetX,n.position=dr(t,n.posX,n.posY,!1),Er(e,n,s),r&&Ar(t,e,i,n,s,!1))}function Nr(t,e,i,n,s,r){var o=Lr(e.TL.top,e.BL.top);i.TL.top-Vr()<=jr()&&(o.topSide=!1),i.BL.top>=Rr()&&t.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&("top"===n.posY?n.posY="bottom":n.posY="top",n.offsetY=n.offsetY+s.height,n.offsetY=-1*n.offsetY,n.position=dr(t,n.posX,n.posY,!1,s),Er(e,n,s),r&&Nr(t,e,i,n,s,!1))}function Lr(t,e){var i=!1,n=!1;return t-Vr()<jr()&&(i=!0),e>Rr()&&(n=!0),{topSide:i,bottomSide:n}}function Or(){return or.getBoundingClientRect().width}function kr(){return or.getBoundingClientRect().height}function zr(){return or.getBoundingClientRect().left}function Pr(){return or.getBoundingClientRect().top}function jr(){return or?Pr():0}function Br(){return or?zr():0}function Hr(){return or?Ur()+zr()+Or():Ur()+Wr()}function Rr(){return or?Vr()+Pr()+kr():Vr()+Fr()}function Vr(){return rr.documentElement.scrollTop||rr.body.scrollTop}function Ur(){return rr.documentElement.scrollLeft||rr.body.scrollLeft}function Fr(){return window.innerHeight}function Wr(){var t=window.innerWidth,e=document.documentElement.getBoundingClientRect();return t-(t-(y(document.documentElement)?0:e.width))}function Yr(){or=null,rr=null}var _r=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qr=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Zr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _r(e,t),Qr([jt("left")],e.prototype,"X",void 0),Qr([jt("top")],e.prototype,"Y",void 0),e}(re),qr="e-popup",Xr="e-rtl",Gr="e-popup-open",Kr="e-popup-close",Jr=function(t){function e(e,i){return t.call(this,i,e)||this}return _r(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"width":gt(this.element,{width:S(t.width)});break;case"height":gt(this.element,{height:S(t.height)});break;case"zIndex":gt(this.element,{zIndex:t.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var s=t.offsetX-e.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+s).toString()+"px";break;case"offsetY":var r=t.offsetY-e.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+r).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==t.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}}},e.prototype.getModuleName=function(){return"popup"},e.prototype.resolveCollision=function(){this.checkCollision()},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(qr,Xr,Gr,Kr),this.content=null,this.relateTo=null,Yr(),t.prototype.destroy.call(this)},e.prototype.render=function(){this.element.classList.add(qr);var t={};1e3!==this.zIndex&&(t.zIndex=this.zIndex),"auto"!==this.width&&(t.width=S(this.width)),"auto"!==this.height&&(t.height=S(this.height)),gt(this.element,t),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},e.prototype.wireEvents=function(){G.isDevice&&K.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},e.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,e=this.getScrollableParent(this.getRelateToElement());t<e.length;t++){var i=e[t];K.add(i,"scroll",this.scrollRefresh,this)}},e.prototype.unwireEvents=function(){G.isDevice&&K.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},e.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var t=0,e=this.getScrollableParent(this.getRelateToElement());t<e.length;t++){var i=e[t];K.remove(i,"scroll",this.scrollRefresh)}},e.prototype.getRelateToElement=function(){var t=""===this.relateTo||y(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:t},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},e.prototype.scrollRefresh=function(t){if("reposition"===this.actionOnScroll?y(this.element)||this.element.offsetParent===t.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==t.target.parentElement||this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var e=this.isElementOnViewport(this.getRelateToElement(),t.target);e||this.targetInvisibleStatus?e&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},e.prototype.isElementOnViewport=function(t,e){for(var i=this.getScrollableParent(t),n=0;n<i.length;n++)if(!this.isElementVisible(t,i[n]))return!1;return!0},e.prototype.isElementVisible=function(t,e){var i=this.checkGetBoundingClientRect(t);if(!i.height||!i.width)return!1;if(y(this.checkGetBoundingClientRect(e))){var n=window,s={top:n.scrollY,left:n.scrollX,right:n.scrollX+n.outerWidth,bottom:n.scrollY+n.outerHeight},r=dr(t),o={top:r.top,left:r.left,right:r.left+i.width,bottom:r.top+i.height},a={top:s.bottom-o.top,left:s.right-o.left,bottom:o.bottom-s.top,right:o.right-s.left};return a.top>0&&a.left>0&&a.right>0&&a.bottom>0}var l=e.getBoundingClientRect();return!(i.bottom<l.top||i.bottom>l.bottom||i.right>l.right||i.left<l.left)},e.prototype.preRender=function(){},e.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(Xr):this.element.classList.remove(Xr)},e.prototype.setContent=function(){if(!y(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var t=this.getRelateToElement(),e=this.content.props;t.classList.contains("e-dropdown-btn")&&!y(e)||this.element.appendChild(this.content)}},e.prototype.orientationOnChange=function(){var t=this;setTimeout(function(){t.refreshPosition()},200)},e.prototype.refreshPosition=function(t,e){y(t)||this.checkFixedParent(t),this.reposition(),e||this.checkCollision()},e.prototype.reposition=function(){var t,e,i=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)t={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var n=void 0,s=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),e=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY),t="string"==typeof this.position.X?{left:e.left,top:this.position.Y}:{left:this.position.X,top:e.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(i){var r=this.element.clientHeight;s=this.element.style.display;this.element.style.display="block",t=this.getAnchorPosition(i,this.element,this.position,this.offsetX,this.offsetY,r),this.element.style.display=s}else t={left:0,top:0};y(t)||(this.element.style.left=t.left+"px",this.element.style.top=t.top+"px")},e.prototype.checkGetBoundingClientRect=function(t){try{return t.getBoundingClientRect()}catch(t){return null}},e.prototype.getAnchorPosition=function(t,e,i,n,s,r){void 0===r&&(r=0);var o=this.checkGetBoundingClientRect(e),a=this.checkGetBoundingClientRect(t);if(y(o)||y(a))return null;var l=t,h={left:0,top:0};switch(e.offsetParent&&"BODY"===e.offsetParent.tagName&&"BODY"===t.tagName?h=dr(t):(e.classList.contains("e-dlg-modal")&&"BODY"!==l.tagName&&(e=e.parentElement),h=function(t,e){var i=!1,n={left:0,top:0},s=t;if(!t||!e)return n;for(y(e.offsetParent)&&"fixed"===e.style.position&&(i=!0);(e.offsetParent||i)&&t&&e.offsetParent!==t;)n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;for(t=s;(e.offsetParent||i)&&t&&e.offsetParent!==t;)n.left-=t.scrollLeft,n.top-=t.scrollTop,t=t.parentElement;return n}(l,e)),i.X){default:case"left":break;case"center":e.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?h.left+=window.innerWidth/2-o.width/2:"container"===this.targetType?h.left+=a.width/2-o.width/2:h.left+=a.width/2;break;case"right":if(e.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType)h.left+=window.innerWidth-o.width;else if("container"===this.targetType){var c=1,d=Dr(e);if(d){var p=getComputedStyle(d).transform;if("none"!==p)c=new DOMMatrix(p).a;if("none"!==getComputedStyle(d).zoom)c*=wr(document.body)}h.left+=(a.width-o.width)/c}else h.left+=a.width}switch(i.Y){default:case"top":break;case"center":e.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?h.top+=window.innerHeight/2-o.height/2:"container"===this.targetType?h.top+=a.height/2-o.height/2:h.top+=a.height/2;break;case"bottom":e.classList.contains("e-dlg-modal")&&"BODY"===l.tagName&&"container"===this.targetType?h.top+=window.innerHeight-o.height:"container"!==this.targetType||e.classList.contains("e-dialog")?"container"===this.targetType&&e.classList.contains("e-dialog")?h.top+=a.height-r:h.top+=a.height:h.top+=a.height-o.height}return h.left+=n,h.top+=s,h},e.prototype.callFlip=function(t){var e=this.getRelateToElement();xr(this.element,e,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,t,this.fixedParent)},e.prototype.callFit=function(t){if(0!==Sr(this.element,this.viewPortElement).length)if(y(this.viewPortElement)){var e=Mr(this.element,this.viewPortElement,t);t.X&&(this.element.style.left=e.left+"px"),t.Y&&(this.element.style.top=e.top+"px")}else{var i=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(y(i)||y(n))return null;t&&!0===t.Y&&(n.top>i.top?this.element.style.top="0px":n.bottom<i.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(i.bottom-n.bottom)+"px")),t&&!0===t.X&&(n.right<i.right?this.element.style.left=parseInt(this.element.style.left,10)-(i.right-n.right)+"px":n.left>i.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-i.left)+"px"))}},e.prototype.checkCollision=function(){var t=this.collision.X,e=this.collision.Y;"none"===t&&"none"===e||("flip"===t&&"flip"===e?this.callFlip({X:!0,Y:!0}):"fit"===t&&"fit"===e?this.callFit({X:!0,Y:!0}):("flip"===t?this.callFlip({X:!0,Y:!1}):"flip"===e&&this.callFlip({Y:!0,X:!1}),"fit"===t?this.callFit({X:!0,Y:!1}):"fit"===e&&this.callFit({X:!1,Y:!0})))},e.prototype.show=function(t,e){var i=this;if(this.wireEvents(),this.getRelateToElement(),1e3===this.zIndex||!y(e)){var n=y(e)?this.element:e;this.zIndex=to(n),gt(this.element,{zIndex:this.zIndex})}t=y(t)||"object"!=typeof t?this.showAnimation:t,"none"===this.collision.X&&"none"===this.collision.Y||(et([this.element],Kr),tt([this.element],Gr),this.checkCollision(),et([this.element],Gr),tt([this.element],Kr)),y(t)?(et([this.element],Kr),tt([this.element],Gr),this.trigger("open")):(t.begin=function(){i.isDestroyed||(et([i.element],Kr),tt([i.element],Gr))},t.end=function(){i.isDestroyed||i.trigger("open")},new qt(t).animate(this.element))},e.prototype.hide=function(t){var e=this;t=y(t)||"object"!=typeof t?this.hideAnimation:t,y(t)?(et([this.element],Gr),tt([this.element],Kr),this.trigger("close")):(t.end=function(){e.isDestroyed||(et([e.element],Gr),tt([e.element],Kr),e.trigger("close"))},new qt(t).animate(this.element)),this.unwireEvents()},e.prototype.getScrollableParent=function(t){return this.checkFixedParent(t),$r(t,this.fixedParent)},e.prototype.checkFixedParent=function(t){for(var e=t.parentElement;e&&"HTML"!==e.tagName;){var i=getComputedStyle(e);"fixed"!==i.position&&"sticky"!==i.position||y(this.element)||!this.element.offsetParent||"BODY"!==this.element.offsetParent.tagName||"hidden"===getComputedStyle(this.element.offsetParent).overflow||(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?S(window.scrollY-parseInt(this.element.style.top,10)):S(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),e=e.parentElement,!y(this.element)&&y(this.element.offsetParent)&&"fixed"===i.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},Qr([jt("auto")],e.prototype,"height",void 0),Qr([jt("auto")],e.prototype,"width",void 0),Qr([jt(null)],e.prototype,"content",void 0),Qr([jt("container")],e.prototype,"targetType",void 0),Qr([jt(null)],e.prototype,"viewPortElement",void 0),Qr([jt({X:"none",Y:"none"})],e.prototype,"collision",void 0),Qr([jt("")],e.prototype,"relateTo",void 0),Qr([Bt({},Zr)],e.prototype,"position",void 0),Qr([jt(0)],e.prototype,"offsetX",void 0),Qr([jt(0)],e.prototype,"offsetY",void 0),Qr([jt(1e3)],e.prototype,"zIndex",void 0),Qr([jt(!1)],e.prototype,"enableRtl",void 0),Qr([jt("reposition")],e.prototype,"actionOnScroll",void 0),Qr([jt(null)],e.prototype,"showAnimation",void 0),Qr([jt(null)],e.prototype,"hideAnimation",void 0),Qr([Ut()],e.prototype,"open",void 0),Qr([Ut()],e.prototype,"close",void 0),Qr([Ut()],e.prototype,"targetExitViewport",void 0),e=Qr([Ft],e)}(_e);function $r(t,e){for(var i=getComputedStyle(t),n=[],s=/(auto|scroll)/,r=t.parentElement;r&&"HTML"!==r.tagName;){var o=getComputedStyle(r);"absolute"===i.position&&"static"===o.position||!s.test(o.overflow+o.overflowY+o.overflowX)||n.push(r),r=r.parentElement}return e||n.push(document),n}function to(t){for(var e=t.parentElement,i=[];e&&"BODY"!==e.tagName;){var n=document.defaultView.getComputedStyle(e,null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(e,null).getPropertyValue("position");"auto"!==n&&"static"!==s&&i.push(n),e=e.parentElement}for(var r=[],o=0;o<document.body.children.length;o++)if(!t.isEqualNode(document.body.children[o])){n=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position");"auto"!==n&&"static"!==s&&r.push(n)}r.push("999");var a=[];if(!y(t.parentElement)&&"BODY"!==t.parentElement.tagName){var l=[].slice.call(t.parentElement.children);for(o=0;o<l.length;o++)if(!t.isEqualNode(l[o])){n=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("z-index"),s=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("position");"auto"!==n&&"static"!==s&&a.push(n)}}var h=i.concat(r,a),c=Math.max.apply(Math,h)+1;return c>2147483647?2147483647:c}function eo(t,e,i,n,s,r){var o=n;if(n.tagName===e){var a=c("ej2_instances",n);o=t("input",{attrs:{type:i}});for(var l=["change","cssClass","label","labelPosition","id"],h=0,u=n.attributes.length;h<u;h++)-1===l.indexOf(n.attributes[h].nodeName)&&o.setAttribute(n.attributes[h].nodeName,n.attributes[h].nodeValue);ht(n,{class:s}),n.appendChild(o),n.classList.add(r),n.classList.remove(r),d("ej2_instances",a,o),p(n,"ej2_instances")}return o}function io(t){for(var e,i=t.childNodes,n=0;n<i.length;n++)if(3===(e=i[n]).nodeType)return e;return null}function no(t,e,i){void 0===e&&(e=!1),void 0===i&&(i={});var n=t("div",{className:"e-checkbox-wrapper e-css"});if(i.cssClass&&tt([n],i.cssClass.split(" ")),i.enableRtl&&n.classList.add("e-rtl"),e){var s=t("span",{className:"e-ripple-container"});Xt(s,{isCenterRipple:!0,duration:400}),n.appendChild(s)}var r=t("span",{className:"e-frame e-icons"});if(i.checked&&r.classList.add("e-check"),n.appendChild(r),i.label){var o=t("span",{className:"e-label"});i.disableHtmlEncode?o.textContent=i.label:o.innerHTML=i.label,n.appendChild(o)}return n}function so(t,e){if(e){var i=document.createEvent("MouseEvents");i.initEvent(t.type,!1,!0),e.dispatchEvent(i)}}function ro(t,e){t.element.getAttribute("ejs-for")&&e.appendChild(t.createElement("input",{attrs:{name:t.name||t.element.name,value:"false",type:"hidden"}}))}var oo,ao=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lo=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};!function(t){t.Left="Left",t.Right="Right",t.Top="Top",t.Bottom="Bottom"}(oo||(oo={}));new vt;var ho,co="e-rtl",po="e-btn",uo="e-primary",go="e-icon-btn",mo=function(t){function e(e,i){return t.call(this,e,i)||this}return ao(e,t),e.prototype.preRender=function(){},e.prototype.render=function(){this.initialize(),this.removeRippleEffect=Xt(this.element,{selector:"."+po}),this.renderComplete()},e.prototype.initialize=function(){if(this.cssClass&&tt([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add(uo),!x()||x()&&"progress-btn"!==this.getModuleName()){if(this.content){var t=this.enableHtmlSanitizer?Yi.sanitize(this.content):this.content;this.element.innerHTML=t}this.setIconCss()}this.enableRtl&&this.element.classList.add(co),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},e.prototype.controlStatus=function(t){this.element.disabled=t},e.prototype.setIconCss=function(){if(this.iconCss){var t=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(t.classList.add("e-icon-"+this.iconPosition.toLowerCase()),"Top"!==this.iconPosition&&"Bottom"!==this.iconPosition||this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(go);var e=this.element.childNodes[0];!e||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(t):this.element.insertBefore(t,e)}},e.prototype.wireEvents=function(){this.isToggle&&K.add(this.element,"click",this.btnClickHandler,this)},e.prototype.unWireEvents=function(){this.isToggle&&K.remove(this.element,"click",this.btnClickHandler)},e.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},e.prototype.destroy=function(){var e=[uo,co,go,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(/\s+/).filter(function(t){return t.length>0}))),t.prototype.destroy.call(this),et([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&at(i),this.unWireEvents(),ie&&this.removeRippleEffect()},e.prototype.getModuleName=function(){return"btn"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.Inject=function(){},e.prototype.onPropertyChanged=function(t,e){for(var i=this.element.querySelector("span.e-btn-icon"),n=0,s=Object.keys(t);n<s.length;n++){switch(s[n]){case"isPrimary":t.isPrimary?this.element.classList.add(uo):this.element.classList.remove(uo);break;case"disabled":this.controlStatus(t.disabled);break;case"iconCss":(i=this.element.querySelector("span.e-btn-icon"))?t.iconCss?(i.className="e-btn-icon "+t.iconCss,this.element.textContent.trim()&&("Left"===this.iconPosition?i.classList.add("e-icon-left"):i.classList.add("e-icon-right"))):at(i):this.setIconCss();break;case"iconPosition":et([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(i=this.element.querySelector("span.e-btn-icon"))&&at(i),this.setIconCss();break;case"cssClass":e.cssClass&&et([this.element],e.cssClass.split(/\s+/).filter(function(t){return t.length>0})),t.cssClass&&tt([this.element],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?this.element.classList.add(co):this.element.classList.remove(co);break;case"content":io(this.element)||this.element.classList.remove(go),(!x()||x()&&!this.isServerRendered&&"progress-btn"!==this.getModuleName())&&(this.enableHtmlSanitizer&&(t.content=Yi.sanitize(t.content)),this.element.innerHTML=t.content,this.setIconCss());break;case"isToggle":t.isToggle?K.add(this.element,"click",this.btnClickHandler,this):(K.remove(this.element,"click",this.btnClickHandler),et([this.element],["e-active"]))}}},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},lo([jt("Left")],e.prototype,"iconPosition",void 0),lo([jt("")],e.prototype,"iconCss",void 0),lo([jt(!1)],e.prototype,"disabled",void 0),lo([jt(!1)],e.prototype,"isPrimary",void 0),lo([jt("")],e.prototype,"cssClass",void 0),lo([jt("")],e.prototype,"content",void 0),lo([jt(!1)],e.prototype,"isToggle",void 0),lo([jt()],e.prototype,"locale",void 0),lo([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),lo([Ut()],e.prototype,"created",void 0),e=lo([Ft],e)}(_e),fo=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yo=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},vo="e-check",bo="e-checkbox-disabled",Co="e-frame",Io="e-stop",Mo="e-label",So="e-ripple-container",xo="e-ripple-check",wo="e-ripple-stop",Do="e-rtl",Eo="e-checkbox-wrapper",To=["title","class","style","disabled","readonly","name","value","id","tabindex","aria-label","required"],Ao=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n.clickTriggered=!1,n.validCheck=!0,n.type="checkbox",n}return fo(e,t),e.prototype.changeState=function(t,e,i){var n=this.getWrapper(),s=null,r=null;n&&(r=n.getElementsByClassName(Co)[0],ie&&(s=n.getElementsByClassName(So)[0])),"check"===t?(r&&(r.classList.remove(Io),r.classList.add(vo)),s&&(s.classList.remove(wo),s.classList.add(xo)),this.element.checked=!0,(this.element.required||ut(this.element,"form")&&ut(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!e&&i?(this.element.checked=!1,this.validCheck=!1):(this.element.required||ut(this.element,"form")&&ut(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):"uncheck"===t?(r&&et([r],[vo,Io]),s&&et([s],[xo,wo]),this.element.checked=!1,(this.element.required||ut(this.element,"form")&&ut(this.element,"form").classList.contains("e-formvalidator"))&&this.validCheck&&!e&&i?(this.element.checked=!0,this.validCheck=!1):(this.element.required||ut(this.element,"form")&&ut(this.element,"form").classList.contains("e-formvalidator"))&&(this.validCheck=!0)):(r&&(r.classList.remove(vo),r.classList.add(Io)),s&&(s.classList.remove(xo),s.classList.add(wo)),this.element.indeterminate=!0,this.indeterminate=!0)},e.prototype.clickHandler=function(t){if("INPUT"===t.target.tagName&&this.clickTriggered)return this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);("SPAN"===t.target.tagName||"LABEL"===t.target.tagName||ut(t.target,".e-label"))&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck",!1,!0),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck",!1,!0),this.checked=!1):(this.changeState("check",!1,!0),this.checked=!0);var e={checked:this.updateVueArrayModel(!1),event:t};this.trigger("change",e),t.stopPropagation()},e.prototype.destroy=function(){var e=this,i=this.getWrapper();t.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),at(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(t){e.element.removeAttribute(t)})):(["class"].forEach(function(t){i.removeAttribute(t)}),i.innerHTML="",this.element=i,this.refreshing&&(["e-control","e-checkbox","e-lib"].forEach(function(t){e.element.classList.add(t)}),d("ej2_instances",[this],this.element))))},e.prototype.focusHandler=function(){this.isFocused=!0},e.prototype.focusOutHandler=function(){var t=this.getWrapper();t&&t.classList.remove("e-focus"),this.isFocused=!1},e.prototype.getModuleName=function(){return"checkbox"},e.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},e.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},e.prototype.getLabel=function(){return this.element?this.element.parentElement:null},e.prototype.initialize=function(){y(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.element.setAttribute("tabindex","0"),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check",!0),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},e.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains(Eo)||(t=this.createElement("div",{className:Eo}),this.element.parentNode&&this.element.parentNode.insertBefore(t,this.element));var e=this.createElement("label",{attrs:{for:this.htmlAttributes.id?this.htmlAttributes.id:this.element.id}}),i=this.createElement("span",{className:"e-icons "+Co});if(t.classList.add("e-wrapper"),this.enableRtl&&t.classList.add(Do),this.cssClass&&tt([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),t.appendChild(e),e.appendChild(this.element),ro(this,e),e.appendChild(i),ie){var n=this.createElement("span",{className:So});"Before"===this.labelPosition?e.appendChild(n):e.insertBefore(n,i),Xt(n,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},e.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},e.prototype.labelMouseDownHandler=function(t){this.isMouseClick=!0,so(t,this.getWrapper().getElementsByClassName(So)[0])},e.prototype.labelMouseLeaveHandler=function(t){var e=this.getLabel().getElementsByClassName(So)[0];if(e){for(var i=e.querySelectorAll(".e-ripple-element").length-1;i>0;i--)e.removeChild(e.childNodes[i]);so(t,e)}},e.prototype.labelMouseUpHandler=function(t){this.isMouseClick=!0;var e=this.getWrapper().getElementsByClassName(So)[0];if(e){for(var i=e.querySelectorAll(".e-ripple-element"),n=0;n<i.length-1;n++)e.removeChild(e.childNodes[n]);so(t,e)}},e.prototype.onPropertyChanged=function(t,e){for(var i=this.getWrapper(),n=0,s=Object.keys(t);n<s.length;n++){switch(s[n]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(t.checked?"check":"uncheck");break;case"indeterminate":t.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":t.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,i.classList.remove(bo),i.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":e.cssClass&&et([i],e.cssClass.split(/\s+/).filter(function(t){return t.length>0})),t.cssClass&&tt([i],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?i.classList.add(Do):i.classList.remove(Do);break;case"label":this.setText(t.label);break;case"labelPosition":var r=i.getElementsByClassName(Mo)[0],o=i.getElementsByTagName("label")[0];at(r),"After"===t.labelPosition?o.appendChild(r):o.insertBefore(r,i.getElementsByClassName(Co)[0]);break;case"name":this.element.setAttribute("name",t.name);break;case"value":if(this.isVue&&"object"==typeof t.value)break;this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}}},e.prototype.preRender=function(){var t=this.element;this.tagName=this.element.tagName,t=eo(this.createElement,"EJS-CHECKBOX","checkbox",t,Eo,"checkbox"),this.element=t,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=b("e-"+this.getModuleName()))},e.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},e.prototype.setDisabled=function(){var t=this.getWrapper();this.element.disabled=!0,t.classList.add(bo),t.setAttribute("aria-disabled","true")},e.prototype.setText=function(t){var e=this.getWrapper();if(e){var i=e.getElementsByClassName(Mo)[0];if(i)i.innerHTML=this.enableHtmlSanitizer?Yi.sanitize(t):t;else{t=this.enableHtmlSanitizer?Yi.sanitize(t):t,i=this.createElement("span",{className:Mo,innerHTML:t});var n=e.getElementsByTagName("label")[0];"Before"===this.labelPosition?n.insertBefore(i,e.getElementsByClassName(Co)[0]):n.appendChild(i)}}},e.prototype.changeHandler=function(t){t.stopPropagation()},e.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},e.prototype.unWireEvents=function(){var t=this.wrapper;if(K.remove(this.element,"keyup",this.keyUpHandler),K.remove(this.element,"focus",this.focusHandler),K.remove(this.element,"focusout",this.focusOutHandler),t){K.remove(t,"click",this.clickHandler);var e=t.getElementsByTagName("label")[0];e&&(K.remove(e,"mousedown",this.labelMouseDownHandler),K.remove(e,"mouseup",this.labelMouseUpHandler),K.remove(e,"mouseleave",this.labelMouseLeaveHandler))}var i=ut(this.element,"form");i&&K.remove(i,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&K.remove(this.element,"change",this.changeHandler)},e.prototype.wireEvents=function(){var t=this.getWrapper();K.add(t,"click",this.clickHandler,this),K.add(this.element,"keyup",this.keyUpHandler,this),K.add(this.element,"focus",this.focusHandler,this),K.add(this.element,"focusout",this.focusOutHandler,this);var e=t.getElementsByTagName("label")[0];K.add(e,"mousedown",this.labelMouseDownHandler,this),K.add(e,"mouseup",this.labelMouseUpHandler,this),K.add(e,"mouseleave",this.labelMouseLeaveHandler,this);var i=ut(this.element,"form");i&&K.add(i,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&K.add(this.element,"change",this.changeHandler,this)},e.prototype.updateVueArrayModel=function(t){if(this.isVue&&"object"==typeof this.value){var e=this.element.value;if(e&&this.value){if(!t){var i=this.value.indexOf(e);return this.checked?i<0&&this.value.push(e):i>-1&&this.value.splice(i,1),this.value}for(var n=0;n<this.value.length;n++)e===this.value[n]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},e.prototype.updateHtmlAttributeToWrapper=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t],n=this.getWrapper();if(To.indexOf(i)>-1)if("class"===i)tt([n],this.htmlAttributes[""+i].split(" "));else if("title"===i)n.setAttribute(i,this.htmlAttributes[""+i]);else if("style"===i){this.getWrapper().getElementsByClassName(Co)[0].setAttribute(i,this.htmlAttributes[""+i])}else"disabled"===i?("true"===this.htmlAttributes[""+i]&&this.setDisabled(),this.element.setAttribute(i,this.htmlAttributes[""+i])):this.element.setAttribute(i,this.htmlAttributes[""+i]);else n.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},yo([Ut()],e.prototype,"change",void 0),yo([Ut()],e.prototype,"created",void 0),yo([jt(!1)],e.prototype,"checked",void 0),yo([jt("")],e.prototype,"cssClass",void 0),yo([jt(!1)],e.prototype,"disabled",void 0),yo([jt(!1)],e.prototype,"indeterminate",void 0),yo([jt("")],e.prototype,"label",void 0),yo([jt("After")],e.prototype,"labelPosition",void 0),yo([jt("")],e.prototype,"name",void 0),yo([jt("")],e.prototype,"value",void 0),yo([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),yo([jt({})],e.prototype,"htmlAttributes",void 0),e=yo([Ft],e)}(_e),No=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lo=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Oo="e-label",ko="e-ripple-container",zo="e-rtl",Po="e-radio-wrapper",jo=["title","class","style","disabled","readonly","name","value","id"],Bo=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isFocused=!1,n.type="radio",n}var i;return No(e,t),i=e,e.prototype.changeHandler=function(t){this.checked=!0,this.dataBind();var e=this.element.getAttribute("value");e=this.isVue&&e?this.element.value:this.value;var i=typeof this.value;this.isVue&&"boolean"===i&&(e="true"===e),this.trigger("change",{value:e,event:t}),this.isAngular&&t.stopPropagation()},e.prototype.updateChange=function(){for(var t,e,n=this.getRadioGroup(),s=0;s<n.length;s++)(t=n[s])!==this.element&&((e=D(t,i)).checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(e.angularValue=this.value))},e.prototype.destroy=function(){var e=this,i=this.wrapper;t.prototype.destroy.call(this),i&&(this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(i.parentNode&&i.parentNode.insertBefore(this.element,i),at(i),this.element.checked=!1,["name","value","disabled"].forEach(function(t){e.element.removeAttribute(t)})):(["role","aria-checked","class"].forEach(function(t){i.removeAttribute(t)}),i.innerHTML="",this.element=this.wrapper,this.refreshing&&(["e-control","e-radio","e-lib"].forEach(function(t){e.element.classList.add(t)}),d("ej2_instances",[this],this.element))))},e.prototype.focusHandler=function(){this.isFocused=!0},e.prototype.focusOutHandler=function(){var t=this.getLabel();t&&t.classList.remove("e-focus")},e.prototype.getModuleName=function(){return"radio"},e.prototype.getSelectedValue=function(){for(var t,e=this.getRadioGroup(),i=0,n=e.length;i<n;i++)if((t=e[i]).checked)return t.value;return""},e.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},e.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},e.prototype.getWrapper=function(){return this.element.parentElement?this.element.parentElement:null},e.prototype.getLabel=function(){return this.element.nextElementSibling?this.element.nextElementSibling:null},e.prototype.initialize=function(){y(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var t=this.element.getAttribute("value"),e=typeof this.value;this.isVue&&"boolean"===e&&(t="true"===t),(this.isVue?this.value&&"boolean"!==e&&!t:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},e.prototype.initWrapper=function(){var t,e=this.element.parentElement;e.classList.contains(Po)||(e=this.createElement("div",{className:Po}),this.element.parentNode&&this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}});e.appendChild(this.element),e.appendChild(i),ie&&(t=this.createElement("span",{className:ko}),i.appendChild(t),Xt(t,{duration:400,isCenterRipple:!0})),e.classList.add("e-wrapper"),this.enableRtl&&i.classList.add(zo),this.cssClass&&tt([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.label&&this.setText(this.label)},e.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},e.prototype.labelMouseDownHandler=function(t){so(t,this.getLabel().getElementsByClassName(ko)[0])},e.prototype.labelMouseLeaveHandler=function(t){var e=this.getLabel().getElementsByClassName(ko)[0];if(e){for(var i=e.querySelectorAll(".e-ripple-element").length-1;i>0;i--)e.removeChild(e.childNodes[i]);so(t,e)}},e.prototype.labelMouseUpHandler=function(t){var e=this.getLabel().getElementsByClassName(ko)[0];if(e){for(var i=e.querySelectorAll(".e-ripple-element").length-1;i>0;i--)e.removeChild(e.childNodes[i]);so(t,e)}},e.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&ht(this.element,{checked:"true"})},e.prototype.onPropertyChanged=function(t,e){for(var i=this.getWrapper(),n=this.getLabel(),s=0,r=Object.keys(t);s<r.length;s++){switch(r[s]){case"checked":t.checked&&this.updateChange(),this.element.checked=t.checked;break;case"disabled":t.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":e.cssClass&&et([i],e.cssClass.split(/\s+/).filter(function(t){return t.length>0})),t.cssClass&&tt([i],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?n.classList.add(zo):n.classList.remove(zo);break;case"label":this.setText(t.label);break;case"labelPosition":"Before"===t.labelPosition?n.classList.add("e-right"):n.classList.remove("e-right");break;case"name":this.element.setAttribute("name",t.name);break;case"value":var o=typeof this.htmlAttributes.value;if(!y(this.htmlAttributes)&&(this.htmlAttributes.value||"boolean"===o&&!this.htmlAttributes.value))break;this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttribute()}}},e.prototype.preRender=function(){var t=this.element;if(this.formElement=ut(this.element,"form"),this.tagName=this.element.tagName,t=eo(this.createElement,"EJS-RADIOBUTTON","radio",t,Po,"radio"),this.element=t,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=b("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){var e=this.element.getAttribute("formcontrolname");e&&(this.setProperties({name:e},!0),this.element.setAttribute("name",e))}},e.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()},e.prototype.setDisabled=function(){this.element.disabled=!0},e.prototype.setText=function(t){var e=this.getLabel(),i=e.getElementsByClassName(Oo)[0];i?i.textContent=t:(t=this.enableHtmlSanitizer?Yi.sanitize(t):t,i=this.createElement("span",{className:Oo,innerHTML:t}),e.appendChild(i)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},e.prototype.updateHtmlAttribute=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t],n=this.element.parentElement;jo.indexOf(i)>-1?"class"===i?tt([n],this.htmlAttributes[""+i].replace(/\s+/g," ").trim().split(" ")):"title"===i||"style"===i?n.setAttribute(i,this.htmlAttributes[""+i]):this.element.setAttribute(i,this.htmlAttributes[""+i]):n.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.unWireEvents=function(){var t=this.wrapper;if(K.remove(this.element,"change",this.changeHandler),K.remove(this.element,"focus",this.focusHandler),K.remove(this.element,"focusout",this.focusOutHandler),K.remove(this.element,"keyup",this.keyUpHandler),t){var e=t.getElementsByTagName("label")[0];e&&(K.remove(e,"mousedown",this.labelMouseDownHandler),K.remove(e,"mouseup",this.labelMouseUpHandler),K.remove(e,"mouseleave",this.labelMouseLeaveHandler))}this.formElement&&K.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.wireEvents=function(){var t=this.getLabel();K.add(this.element,"change",this.changeHandler,this),K.add(this.element,"keyup",this.keyUpHandler,this),K.add(this.element,"focus",this.focusHandler,this),K.add(this.element,"focusout",this.focusOutHandler,this);var e=t.getElementsByClassName(Oo)[0];e&&(K.add(e,"mousedown",this.labelMouseDownHandler,this),K.add(e,"mouseup",this.labelMouseUpHandler,this),K.add(e,"mouseleave",this.labelMouseLeaveHandler,this)),this.formElement&&K.add(this.formElement,"reset",this.formResetHandler,this)},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},Lo([Ut()],e.prototype,"change",void 0),Lo([Ut()],e.prototype,"created",void 0),Lo([jt(!1)],e.prototype,"checked",void 0),Lo([jt("")],e.prototype,"cssClass",void 0),Lo([jt(!1)],e.prototype,"disabled",void 0),Lo([jt("")],e.prototype,"label",void 0),Lo([jt("After")],e.prototype,"labelPosition",void 0),Lo([jt("")],e.prototype,"name",void 0),Lo([jt("")],e.prototype,"value",void 0),Lo([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),Lo([jt({})],e.prototype,"htmlAttributes",void 0),e=i=Lo([Ft],e)}(_e),Ho=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ro=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Vo="e-switch-disabled",Uo="e-ripple-container",Fo="e-ripple-check",Wo="e-rtl",Yo="e-switch-wrapper",_o="e-switch-active",Qo=["title","class","style","disabled","readonly","name","value","aria-label","id","role","tabindex"],Zo=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isFocused=!1,n.isDrag=!1,n.isWireEvents=!1,n}return Ho(e,t),e.prototype.changeState=function(t){var e=null,i=this.getWrapper(),n=i.querySelector(".e-switch-inner"),s=i.querySelector(".e-switch-handle");ie&&(e=i.getElementsByClassName(Uo)[0]),t?(tt([n,s],_o),this.element.checked=!0,this.checked=!0,e&&tt([e],[Fo])):(et([n,s],_o),this.element.checked=!1,this.checked=!1,e&&et([e],[Fo]))},e.prototype.clickHandler=function(t){if(!t||!this.element.closest("label")||t.target===this.element){this.isDrag=!1,this.focusOutHandler();var e={event:t,cancel:!1,checked:this.checked};if(this.trigger("beforeChange",e),!e.cancel){this.changeState(!e.checked),this.element.focus();var i={checked:this.element.checked,event:t};this.trigger("change",i)}}},e.prototype.destroy=function(){var e,i,n=this;t.prototype.destroy.call(this),this.disabled||this.unWireEvents(),this.formElement&&K.remove(this.formElement,"reset",this.formResetHandler),this.getWrapper()&&(e=this,i=this.getWrapper(),"INPUT"===this.tagName?(i.parentNode.insertBefore(e.element,i),at(i),e.element.checked=!1,["name","value","disabled"].forEach(function(t){e.element.removeAttribute(t)})):(["role","aria-checked","class"].forEach(function(t){i.removeAttribute(t)}),i.innerHTML="",e.element=i)),this.refreshing&&(["e-control","e-switch","e-lib"].forEach(function(t){n.element.classList.add(t)}),d("ej2_instances",[this],this.element))},e.prototype.focusHandler=function(){this.isFocused=!0},e.prototype.focusOutHandler=function(){this.getWrapper().classList.remove("e-focus")},e.prototype.getModuleName=function(){return"switch"},e.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},e.prototype.getWrapper=function(){return this.element.parentElement?this.element.parentElement:null},e.prototype.initialize=function(){this.element.setAttribute("role","switch"),y(this.initialSwitchCheckedValue)&&(this.initialSwitchCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState(!0),this.disabled&&this.setDisabled(),(this.onLabel||this.offLabel)&&this.setLabel(this.onLabel,this.offLabel)},e.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains(Yo)||(t=this.createElement("div",{className:Yo}),this.element.parentNode.insertBefore(t,this.element));var e=this.createElement("span",{className:"e-switch-inner"}),i=this.createElement("span",{className:"e-switch-on"}),n=this.createElement("span",{className:"e-switch-off"}),s=this.createElement("span",{className:"e-switch-handle"});if(t.appendChild(this.element),ro(this,t),e.appendChild(i),e.appendChild(n),t.appendChild(e),t.appendChild(s),ie){var r=this.createElement("span",{className:Uo});s.appendChild(r),Xt(r,{duration:400,isCenterRipple:!0})}t.classList.add("e-wrapper"),this.enableRtl&&t.classList.add(Wo),this.cssClass&&tt([t],this.cssClass.replace(/\s+/g," ").trim().split(" "))},e.prototype.onPropertyChanged=function(t,e){for(var i=this.getWrapper(),n=0,s=Object.keys(t);n<s.length;n++){switch(s[n]){case"checked":this.changeState(t.checked);break;case"disabled":t.disabled?(this.setDisabled(),this.unWireEvents(),this.isWireEvents=!1):(this.element.disabled=!1,i.classList.remove(Vo),i.setAttribute("aria-disabled","false"),this.isWireEvents||(this.wireEvents(),this.isWireEvents=!0));break;case"value":this.element.setAttribute("value",t.value);break;case"name":this.element.setAttribute("name",t.name);break;case"onLabel":case"offLabel":this.setLabel(t.onLabel,t.offLabel);break;case"enableRtl":t.enableRtl?i.classList.add(Wo):i.classList.remove(Wo);break;case"cssClass":e.cssClass&&et([i],e.cssClass.split(/\s+/).filter(function(t){return t.length>0})),t.cssClass&&tt([i],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"htmlAttributes":this.updateHtmlAttribute()}}},e.prototype.preRender=function(){var t=this.element;this.formElement=ut(this.element,"form"),this.tagName=this.element.tagName,function(t,e,i,n,s){n=eo(t.createElement,e,"checkbox",n,i,s),t.element=n,"checkbox"!==t.element.getAttribute("type")&&t.element.setAttribute("type","checkbox"),t.element.id||(t.element.id=b("e-"+s))}(this,"EJS-SWITCH",Yo,t,this.getModuleName())},e.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.formElement&&K.add(this.formElement,"reset",this.formResetHandler,this),this.renderComplete(),this.updateHtmlAttribute()},e.prototype.rippleHandler=function(t){so(t,this.getWrapper().getElementsByClassName(Uo)[0]),"mousedown"===t.type&&t.currentTarget.classList.contains("e-switch-wrapper")&&1===t.which&&(this.isDrag=!0,this.isFocused=!1)},e.prototype.mouseLeaveHandler=function(t){var e=this.element.parentElement.getElementsByClassName(Uo)[0];if(e){for(var i=e.querySelectorAll(".e-ripple-element").length-1;i>0;i--)e.removeChild(e.childNodes[i]);so(t,e)}},e.prototype.rippleTouchHandler=function(t){var e=this.getWrapper().getElementsByClassName(Uo)[0];if(e){var i=document.createEvent("MouseEvents");i.initEvent(t,!1,!0),e.dispatchEvent(i)}},e.prototype.setDisabled=function(){var t=this.getWrapper();this.element.disabled=!0,t.classList.add(Vo),t.setAttribute("aria-disabled","true")},e.prototype.setLabel=function(t,e){var i=this.getWrapper();t&&(i.querySelector(".e-switch-on").textContent=t),e&&(i.querySelector(".e-switch-off").textContent=e)},e.prototype.updateHtmlAttribute=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t],n=this.getWrapper();Qo.indexOf(i)>-1?"class"===i?tt([n],this.htmlAttributes[""+i].split(" ")):"title"===i||"style"===i?n.setAttribute(i,this.htmlAttributes[""+i]):"disabled"===i?("true"===this.htmlAttributes[""+i]&&this.setDisabled(),this.element.setAttribute(i,this.htmlAttributes[""+i])):this.element.setAttribute(i,this.htmlAttributes[""+i]):n.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.switchFocusHandler=function(t){this.isFocused&&this.getWrapper().classList.add("e-focus"),t&&"keyup"===t.type&&"Space"===t.code&&this.isAngular&&(this.clickHandler(t),t.stopPropagation(),t.preventDefault())},e.prototype.switchMouseUp=function(t){var e=0,i=0,n=0,s=0,r=t.target;"touchmove"===t.type&&(t.preventDefault(),n=t.changedTouches[0].clientX,e=t.changedTouches[0].clientY,s=this.bTouchX-n,i=this.bTouchY-e,Math.abs(s)<Math.abs(i)?(this.isDrag=!1,this.rippleTouchHandler("mouseup")):this.isDrag=!0),"touchstart"===t.type&&(this.bTouchX=t.changedTouches[0].clientX,this.bTouchY=t.changedTouches[0].clientY,this.isDrag=!0,this.rippleTouchHandler("mousedown")),this.isDrag&&("mouseup"===t.type&&r.className.indexOf("e-switch")<0||"touchend"===t.type)&&(s=this.bTouchX-t.changedTouches[0].clientX,i=this.bTouchY-t.changedTouches[0].clientY,Math.abs(s)>=Math.abs(i)&&(this.clickHandler(t),this.rippleTouchHandler("mouseup"),t.preventDefault()))},e.prototype.formResetHandler=function(){this.checked=this.initialSwitchCheckedValue,this.element.checked=this.initialSwitchCheckedValue},e.prototype.toggle=function(){this.clickHandler()},e.prototype.wireEvents=function(){var t=this.getWrapper();this.delegateMouseUpHandler=this.switchMouseUp.bind(this),this.delegateKeyUpHandler=this.switchFocusHandler.bind(this),K.add(t,"click",this.clickHandler,this),K.add(this.element,"focus",this.focusHandler,this),K.add(this.element,"focusout",this.focusOutHandler,this),K.add(this.element,"mouseup",this.delegateMouseUpHandler,this),K.add(this.element,"keyup",this.delegateKeyUpHandler,this),K.add(t,"mousedown mouseup",this.rippleHandler,this),K.add(t,"mouseleave",this.mouseLeaveHandler,this),K.add(t,"touchstart touchmove touchend",this.switchMouseUp,this)},e.prototype.unWireEvents=function(){var t=this.getWrapper();t&&(K.remove(t,"click",this.clickHandler),K.remove(t,"mousedown mouseup",this.rippleHandler),K.remove(t,"mouseleave",this.mouseLeaveHandler),K.remove(t,"touchstart touchmove touchend",this.switchMouseUp)),this.element&&(K.remove(this.element,"focus",this.focusHandler),K.remove(this.element,"focusout",this.focusOutHandler),K.remove(this.element,"mouseup",this.delegateMouseUpHandler),K.remove(this.element,"keyup",this.delegateKeyUpHandler))},e.prototype.click=function(){this.element.click()},e.prototype.focusIn=function(){this.element.focus()},Ro([Ut()],e.prototype,"beforeChange",void 0),Ro([Ut()],e.prototype,"change",void 0),Ro([Ut()],e.prototype,"created",void 0),Ro([jt(!1)],e.prototype,"checked",void 0),Ro([jt("")],e.prototype,"cssClass",void 0),Ro([jt(!1)],e.prototype,"disabled",void 0),Ro([jt("")],e.prototype,"name",void 0),Ro([jt("")],e.prototype,"onLabel",void 0),Ro([jt("")],e.prototype,"offLabel",void 0),Ro([jt("")],e.prototype,"value",void 0),Ro([jt({})],e.prototype,"htmlAttributes",void 0),e=Ro([Ft],e)}(_e),qo=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xo=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Go={chipSet:"e-chip-set",chip:"e-chip",avatar:"e-chip-avatar",text:"e-chip-text",icon:"e-chip-icon",delete:"e-chip-delete",deleteIcon:"e-dlt-btn",multiSelection:"e-multi-selection",singleSelection:"e-selection",active:"e-active",chipWrapper:"e-chip-avatar-wrap",iconWrapper:"e-chip-icon-wrap",focused:"e-focused",disabled:"e-disabled",rtl:"e-rtl",template:"e-chip-template",chipList:"e-chip-list",customIcon:"e-icons",chipDrag:"e-chip-drag",dragAndDrop:"e-drag-and-drop",dropRestricted:"e-error-treeview",cloneChip:"e-clone-chip",dragIndicator:"e-drag-indicator"},Ko=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.multiSelectedChip=[],n}var i;return qo(e,t),i=e,e.prototype.preRender=function(){},e.prototype.chipType=function(){return this.chips&&this.chips.length&&this.chips.length>0},e.prototype.render=function(){this.type=!y(this.chips)&&this.chips.length?"chipset":this.text||this.element.innerText?"chip":"chipset",this.setAttributes(),this.createChip(),this.setRtl(),this.select(this.selectedChips),this.wireEvent(!1),this.rippleFunction=Xt(this.element,{selector:"."+Go.chip}),this.renderComplete(),this.dragCollection=[],this.allowDragAndDrop&&this.enableDraggingChips()},e.prototype.enableDraggingChips=function(){var t,e=this;this.element.querySelectorAll("."+Go.chip).forEach(function(i,n){e.dragObj=new Ke(i,{preventDefault:!1,clone:!0,dragArea:e.dragArea,helper:function(){return(t=i.cloneNode(!0)).classList.add(Go.cloneChip),e.element.appendChild(t),t},dragStart:function(i){e.dragIndicator=e.createElement("div",{className:Go.dragIndicator}),document.body.appendChild(e.dragIndicator);var s=e.find(i.element),r={cancel:!1,event:i.event,draggedItem:i.element,draggedItemData:s,dropTarget:null};e.trigger("dragStart",r,function(){y(r.cancel)&&(r.cancel=!1)}),r.cancel?e.dragObj.intDestroy(i.event):t.setAttribute("drag-indicator-index",n.toString())},drag:function(i){var n=e.find(i.element),s={event:i.event,draggedItem:i.element,draggedItemData:n,dropTarget:null};e.trigger("dragging",s);var r=t.querySelector("."+Go.chipDrag);y(r)&&(r=e.createElement("span",{className:Go.customIcon+" "+Go.dragAndDrop+" "+Go.chipDrag}),t.prepend(r)),e.allowExternalDragging(i,t,r)},dragStop:function(i){var n=e.find(i.element),s={cancel:!1,event:i.event,draggedItem:i.element,draggedItemData:n,dropTarget:i.target};e.trigger("dragStop",s,function(){y(s.cancel)&&(s.cancel=!1)}),s.cancel||e.allowExternalDrop(i,t),y(e.dragIndicator)||lt(e.dragIndicator),y(t)||t.remove()}}),-1===e.dragCollection.indexOf(e.dragObj)&&e.dragCollection.push(e.dragObj)})},e.prototype.checkInstance=function(t,e){var i=!y(t.target.closest("."+Go.chipList))&&t.target.closest("."+Go.chipList).id!==e.element.id;return i&&(this.updatedInstance=t.target.closest("."+Go.chipList)),i},e.prototype.setIcons=function(t,e,i,n,s){var r=t.element.contains(i),o=i.closest(".e-droppable");!r&&!o||s?(e.classList.remove(Go.dragAndDrop),e.classList.add(Go.dropRestricted),n.style.display="none"):(e.classList.add(Go.dragAndDrop),e.classList.remove(Go.dropRestricted),o&&(n.style.display="none"))},e.prototype.allowExternalDragging=function(t,e,i){var n,s=null,r=1/0,o=-1,a=!1;if(this.checkInstance(t,this)){if(this.dragIndicator.style.display="none",(n=this.getCurrentInstance(t)).dragIndicator=this.dragIndicator,!n.allowDragAndDrop)return}else n=this;var l=n.dragIndicator;l.style.display="inline",a=this.dragAreaCheck(this.dragArea,t.target,a,i,l),this.setIcons(n,i,t.target,l,a),n.element.appendChild(e);var h=e.getBoundingClientRect(),c=Array.from(n.element.querySelectorAll("."+Go.chip));c.forEach(function(t,i){if(t!==e){var n=t.getBoundingClientRect(),a=Math.sqrt(Math.pow(h.left-n.left,2)+Math.pow(h.top-n.top,2));a<r&&(r=a,s=t,o=i)}}),-1===o&&(o=c.length);var d,p=this.getChipsDistance(n),u=e.getBoundingClientRect();(s||c.length>0)&&(d=(s||c[c.length-1]).getBoundingClientRect(),l.style.top=d.top+window.scrollY+"px",l.style.left=n.enableRtl?d.right+p+"px":d.left-p+window.scrollX+"px");n.enableRtl?u.left<d.left-d.width/2&&u.top>d.top&&(l.style.left=d.left-p+window.scrollX+"px"):u.left>d.left+d.width/2&&u.top>d.top&&(l.style.left=d.left+d.width+p+window.scrollX+"px")},e.prototype.dragAreaCheck=function(t,e,i,n,s){if(y(t))return!1;var r="string"==typeof t,o=t instanceof HTMLElement,a=r?document.querySelector(t):t;return y(a)||!r&&!o||a.contains(e)||(i=!0,s.style.display="none",n.classList.add(Go.dropRestricted),n.classList.remove(Go.dragAndDrop)),i},e.prototype.getChipsDistance=function(t){if(t.chips.length<=1)return 4;var e=t.find(0).element.getBoundingClientRect(),i=t.find(1).element.getBoundingClientRect(),n=e.left;if(t.enableRtl){var s=i.right;return n<s?4:(n-s)/2}var r=e.width,o=i.left;return o<n+r?4:(o-(n+r))/2},e.prototype.getCurrentInstance=function(t){var e=t.target.closest("."+Go.chipList);if(!y(e)&&!y(e.ej2_instances))for(var n=0;n<e.ej2_instances.length;n++)if(e.ej2_instances[parseInt(n.toString(),10)]instanceof i)return e.ej2_instances[n];return null},e.prototype.allowExternalDrop=function(t,e){var i,n=parseInt(e.getAttribute("drag-indicator-index"),10),s=!1,r=!1;if(this.checkInstance(t,this)){if(r=!0,!(i=this.getCurrentInstance(t)).allowDragAndDrop)return}else i=this;var o=i.dragIndicator;if(o.style.display="inline",i.element.contains(t.target)&&!(s=this.dragAreaCheck(this.dragArea,t.target,s,e.querySelector("."+Go.chipDrag),o))){for(var a=o.getBoundingClientRect(),l=Array.from(i.element.querySelectorAll("."+Go.chip)),h=-1,c=!1,d=!1,p=!1,u=0;u<l.length;u++)if(l[u]!==e){var g=l[u].getBoundingClientRect();if(c=a.top<g.top+g.height/2,d=a.left<g.left+g.width/2,p=a.left>g.left+g.width/2,!i.enableRtl&&c&&d||i.enableRtl&&c&&p){h=u,u>n&&!r&&(h=u-1);break}}if(-1===h){var m=void 0;for(u=0;u<l.length;u++){if((g=l[u].getBoundingClientRect()).top>a.top||g.top===a.top&&g.left>a.left){m=u;break}}h=m!==l.length?m:l.length}var f=Array.from(this.chips);r?this.dropChip(f,n,i,h,!0):h!==n&&this.dropChip(f,n,i,h,!1)}},e.prototype.dropChip=function(t,e,i,n,s){var r=t.splice(e,1)[0];if(s){var o=Array.from(i.chips);o.splice(n,0,r),i.chips=o}else t.splice(n,0,r),i.chips=t;this.chips=t,i.dataBind(),this.dataBind(),i.enableDraggingChips()},e.prototype.createChip=function(){this.innerText=this.element.innerText&&0!==this.element.innerText.length?this.element.innerText.trim():this.element.innerText,this.element.innerHTML="",this.chipCreation("chip"===this.type?[this.innerText?this.innerText:this.text]:this.chips)},e.prototype.setAttributes=function(){"chip"===this.type?(this.enabled&&(this.element.tabIndex=0),this.element.setAttribute("role","button")):(this.element.classList.add(Go.chipSet),this.element.setAttribute("role","listbox"),"Multiple"===this.selection?(this.element.classList.add(Go.multiSelection),this.element.setAttribute("aria-multiselectable","true")):"Single"===this.selection?(this.element.classList.add(Go.singleSelection),this.element.setAttribute("aria-multiselectable","false")):this.element.setAttribute("aria-multiselectable","false"))},e.prototype.setRtl=function(){this.element.classList[this.enableRtl?"add":"remove"](Go.rtl)},e.prototype.renderTemplates=function(){this.isReact&&this.renderReactTemplates()},e.prototype.templateParser=function(t){if(t)try{return"function"!=typeof t&&document.querySelectorAll(t).length?Hi(document.querySelector(t).innerHTML.trim()):Hi(t)}catch(e){return Hi(t)}},e.prototype.chipCreation=function(t){if(!y(t)){for(var e=[],i=[],n=0;n<t.length;n++){var s=this.getFieldValues(t[n]),r=s.htmlAttributes;i.push(r);var o=this.elementCreation(s),a=(Go.chip+" "+(s.enabled?" ":Go.disabled)+" "+(s.avatarIconCss||s.avatarText?Go.chipWrapper:s.leadingIconCss?Go.iconWrapper:" ")+" "+s.cssClass).split(" ").filter(function(t){return t});if(this.chipType()&&"chip"!==this.type){var l=this.createElement("DIV",{className:a.join(" "),attrs:{tabIndex:"0",role:"option","aria-label":s.text,"aria-selected":"false"}});if(this.enableDelete&&l.setAttribute("aria-keyshortcuts","Press delete or backspace key to delete"),s.value&&l.setAttribute("data-value",s.value.toString()),s.enabled?l.setAttribute("aria-disabled","false"):(l.removeAttribute("tabindex"),l.setAttribute("aria-disabled","true")),!y(i[n])&&i.length>n&&Object.keys(i[n]).length){var h;h=Object.keys(i[n]);for(var c=0;c<h.length;c++)l.setAttribute(h[c],i[n][h[c]])}rt(o,l),e.push(l)}else e=o,tt([this.element],a),this.element.setAttribute("aria-label",s.text),s.value&&this.element.setAttribute("data-value",s.value.toString())}rt(e,this.element)}},e.prototype.getFieldValues=function(t){var e=!("false"===this.enabled.toString());return{text:"object"==typeof t?t.text?t.text.toString():this.text.toString():this.chipType()?t.toString():this.innerText?this.innerText:this.text.toString(),cssClass:"object"==typeof t&&t.cssClass?t.cssClass.toString():this.cssClass.toString(),leadingIconCss:"object"==typeof t&&t.leadingIconCss?t.leadingIconCss.toString():this.leadingIconCss.toString(),avatarIconCss:"object"==typeof t&&t.avatarIconCss?t.avatarIconCss.toString():this.avatarIconCss.toString(),avatarText:"object"==typeof t&&t.avatarText?t.avatarText.toString():this.avatarText.toString(),trailingIconCss:"object"==typeof t&&t.trailingIconCss?t.trailingIconCss.toString():this.trailingIconCss.toString(),enabled:"object"==typeof t&&void 0!==t.enabled?"false"!==t.enabled.toString():e,value:"object"==typeof t&&t.value?t.value.toString():null,leadingIconUrl:"object"==typeof t&&t.leadingIconUrl?t.leadingIconUrl.toString():this.leadingIconUrl,trailingIconUrl:"object"==typeof t&&t.trailingIconUrl?t.trailingIconUrl.toString():this.trailingIconUrl,htmlAttributes:"object"==typeof t&&t.htmlAttributes?t.htmlAttributes:this.htmlAttributes,template:"object"==typeof t&&t.template?t.template:null}},e.prototype.elementCreation=function(t){var e=[];if(t.avatarText||t.avatarIconCss){var i=(Go.avatar+" "+t.avatarIconCss).trim(),n=this.createElement("span",{className:i});n.innerText=t.avatarText,e.push(n)}else if(t.leadingIconCss){i=(Go.icon+" "+t.leadingIconCss).trim();var s=this.createElement("span",{className:i});e.push(s)}else if(t.leadingIconUrl){i=(Go.avatar+" image-url").trim();(s=this.createElement("span",{className:i})).style.backgroundImage="url("+t.leadingIconUrl+")",e.push(s)}var r=this.createElement("span",{className:Go.text});if(r.innerText=t.text,e.push(r),t.template){var o=this.createElement("div",{className:Go.template});rt(this.templateParser(t.template)(t,this,"template",this.element.id+"_template",!1),o),e.push(o),this.renderTemplates()}if(t.trailingIconCss||this.chipType()&&this.enableDelete){i=(Go.delete+" "+(t.trailingIconCss?t.trailingIconCss:Go.deleteIcon)).trim();var a=this.createElement("span",{className:i});e.push(a)}else if(t.trailingIconUrl){i="trailing-icon-url".trim();var l=this.createElement("span",{className:i});l.style.backgroundImage="url("+t.trailingIconUrl+")",e.push(l)}return e},e.prototype.find=function(t){var e={text:"",index:-1,element:this.element,data:""},i=t instanceof HTMLElement?t:this.element.querySelectorAll("."+Go.chip)[t];if(i&&this.chipType()){e.index=Array.prototype.slice.call(this.element.querySelectorAll("."+Go.chip)).indexOf(i);var n=this.chips[e.index];if("object"==typeof n&&null!==n){var s=n;void 0!==s.text&&(e.text=s.text.toString())}else void 0!==n&&(e.text=n.toString());e.data=n,e.element=i}return e},e.prototype.add=function(t){var e;if("chip"!==this.type){var i=t instanceof Array?t:[t];this.chips=(e=[].slice.call(this.chips)).concat.apply(e,i),this.chipCreation(i)}},e.prototype.select=function(t,e){this.onSelect(t,!1,e)},e.prototype.multiSelection=function(t){for(var e=this.element.querySelectorAll("."+Go.chip),i=0;i<t.length;i++)if("string"==typeof t[i]){for(var n=0;n<e.length;n++)if(t[i]!==n&&t[i]===e[n].attributes[5].value){this.multiSelectedChip.push(n);break}}else this.multiSelectedChip.push(t[i])},e.prototype.onSelect=function(t,e,i){var n,s,r=null;if(this.chipType()&&"None"!==this.selection){if(e)for(var o=this.element.querySelectorAll("."+Go.chip),a=0;a<o.length;a++)o[a].setAttribute("aria-selected","false"),o[a].classList.remove(Go.active);var l=t instanceof Array?t:[t];for(a=0;a<l.length;a++){var h=l[a]instanceof HTMLElement?l[a]:this.element.querySelectorAll("."+Go.chip)[l[a]];if("index"!==i)for(var c=0;c<this.chips.length;c++){s=this.element.querySelectorAll("."+Go.chip)[c];var d=this.getFieldValues(this.chips[c]);"value"===i?null!==d.value&&(r=s.dataset.value):"text"===i&&(r=s.innerText),r===l[a].toString()&&(n=c,h=this.element.querySelectorAll("."+Go.chip)[n])}h instanceof HTMLElement&&this.selectionHandler(h)}}},e.prototype.remove=function(t){var e=this;if(this.chipType()){var i=t instanceof Array?t:[t],n=[],s=this.element.querySelectorAll("."+Go.chip);i.forEach(function(t){var e=t instanceof HTMLElement?t:s[t];e instanceof HTMLElement&&n.push(e)}),n.forEach(function(t){var i=e.element.querySelectorAll("."+Go.chip),n=Array.prototype.slice.call(i).indexOf(t);e.deleteHandler(t,n)})}},e.prototype.getSelectedChips=function(){var t;if(this.chipType()&&"None"!==this.selection){for(var e={texts:[],Indexes:[],data:[],elements:[]},i=this.element.querySelectorAll("."+Go.active),n=0;n<i.length;n++){var s=i[n];e.elements.push(s);var r=Array.prototype.slice.call(this.element.querySelectorAll("."+Go.chip)).indexOf(s);e.Indexes.push(r),e.data.push(this.chips[r]);var o="object"==typeof this.chips[r]?this.chips[r].text?this.chips[r].text:null:this.chips[r].toString();e.texts.push(o)}var a={text:e.texts[0],index:e.Indexes[0],data:e.data[0],element:e.elements[0]};t=y(a.index)?void 0:"Multiple"===this.selection?e:a}return t},e.prototype.wireEvent=function(t){t?(K.remove(this.element,"click",this.clickHandler),K.remove(this.element,"focusout",this.focusOutHandler),K.remove(this.element,"keydown",this.keyHandler),K.remove(this.element,"keyup",this.keyHandler)):(K.add(this.element,"click",this.clickHandler,this),K.add(this.element,"focusout",this.focusOutHandler,this),K.add(this.element,"keydown",this.keyHandler,this),K.add(this.element,"keyup",this.keyHandler,this))},e.prototype.keyHandler=function(t){t.target.classList.contains(Go.chip)&&("keydown"===t.type?13===t.keyCode||32===t.keyCode?this.clickHandler(t):46!==t.keyCode&&8!==t.keyCode||!this.enableDelete||this.clickHandler(t,!0):9===t.keyCode&&this.focusInHandler(t.target))},e.prototype.focusInHandler=function(t){t.classList.contains(Go.focused)||t.classList.add(Go.focused)},e.prototype.focusOutHandler=function(t){var e=ut(t.target,"."+Go.chip),i=this.chipType()?this.element.querySelector("."+Go.focused):this.element.classList.contains(Go.focused)?this.element:null;e&&i&&i.classList.remove(Go.focused)},e.prototype.clickHandler=function(t,e){var i=this;void 0===e&&(e=!1);var n=ut(t.target,"."+Go.chip);if(n){var s=void 0;if(this.chipType())s=this.find(n);else{var r=Array.prototype.slice.call(this.element.querySelectorAll("."+Go.chip)).indexOf(n);s={text:this.innerText?this.innerText:this.text,element:n,data:this.text,index:r}}s.event=t,s.cancel=!1,this.trigger("beforeClick",s,function(n){n.cancel||i.clickEventHandler(n.element,t,e)})}},e.prototype.clickEventHandler=function(t,e,i){var n=this;if(this.chipType()){var s=this.find(t);if(s.event=e,(e.target.classList.contains(Go.deleteIcon)?e.target:i?t.querySelector("."+Go.deleteIcon):void 0)&&this.enableDelete){s.cancel=!1;var r=s;this.trigger("delete",r,function(e){if(!e.cancel){n.deleteHandler(e.element,e.index),n.selectionHandler(t),s.selected=e.element.classList.contains(Go.active);var i=s;n.trigger("click",i);var r=n.element.querySelectorAll("."+Go.chip)[e.index];r&&(r.focus(),n.focusInHandler(r))}})}else if("None"!==this.selection){this.selectionHandler(t),s.selected=t.classList.contains(Go.active);var o=s;this.trigger("click",o)}else{this.focusInHandler(t);var a=s;this.trigger("click",a)}}else{this.focusInHandler(t);a={text:this.innerText?this.innerText:this.text,element:t,data:this.text,event:e};this.trigger("click",a)}},e.prototype.selectionHandler=function(t){if("Single"===this.selection){var e=this.element.querySelector("."+Go.active);e&&e!==t&&(e.classList.remove(Go.active),e.setAttribute("aria-selected","false")),this.setProperties({selectedChips:null},!0)}else this.setProperties({selectedChips:[]},!0);t.classList.contains(Go.active)?(t.classList.remove(Go.active),t.setAttribute("aria-selected","false")):(t.classList.add(Go.active),t.setAttribute("aria-selected","true")),this.updateSelectedChips()},e.prototype.updateSelectedChips=function(){for(var t=this.element.querySelectorAll("."+Go.chip),e=[],i=[],n=null,s=null,r=0;r<t.length;r++){var o=this.element.querySelectorAll("."+Go.chip)[r];if("true"===o.getAttribute("aria-selected")){if(s=o.getAttribute("data-value"),"Single"===this.selection&&o.classList.contains("e-active")){n=s||r;break}n=s?i.push(s):e.push(r)}}this.setProperties({selectedChips:"Single"===this.selection?n:s?i:e},!0)},e.prototype.deleteHandler=function(t,e){var i=this.find(t);this.chips.splice(e,1),this.setProperties({chips:this.chips},!0),at(t),this.trigger("deleted",i)},e.prototype.destroy=function(){for(var e=0;e<this.dragCollection.length;e++)this.dragCollection[e].destroy();this.dragCollection=[],this.clearTemplate(),et([this.element],[Go.chipSet,Go.chip,Go.rtl,Go.multiSelection,Go.singleSelection,Go.disabled,Go.chipWrapper,Go.iconWrapper,Go.active,Go.focused].concat(this.cssClass?this.cssClass.toString().split(" ").filter(function(t){return t}):[])),this.removeMultipleAttributes(["tabindex","role","aria-label","aria-multiselectable"],this.element),this.wireEvent(!0),this.rippleFunction(),t.prototype.destroy.call(this),this.element.innerHTML="",this.element.innerText=this.innerText},e.prototype.removeMultipleAttributes=function(t,e){t.forEach(function(t){e.removeAttribute(t)})},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.getModuleName=function(){return"chip-list"},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"chips":case"text":case"avatarText":case"avatarIconCss":case"leadingIconCss":case"trailingIconCss":case"selection":case"enableDelete":case"enabled":this.refresh();break;case"cssClass":this.chipType()?this.refresh():(et([this.element],e.cssClass.toString().split(" ").filter(function(t){return t})),tt([this.element],t.cssClass.toString().split(" ").filter(function(t){return t})));break;case"selectedChips":et(this.element.querySelectorAll(".e-active"),"e-active"),"Multiple"===this.selection?(this.multiSelectedChip=[],this.multiSelection(t.selectedChips),this.onSelect(this.multiSelectedChip,!0),this.updateSelectedChips()):this.onSelect(t.selectedChips,!0);break;case"enableRtl":this.setRtl();break;case"allowDragAndDrop":for(var s=0;s<this.dragCollection.length;s++)this.dragCollection[s].destroy();this.dragCollection=[],this.allowDragAndDrop&&this.enableDraggingChips();break;case"dragArea":if(this.allowDragAndDrop)for(s=0;s<this.dragCollection.length;s++)this.dragCollection[s].dragArea=this.dragArea}}},Xo([jt([])],e.prototype,"chips",void 0),Xo([jt("")],e.prototype,"text",void 0),Xo([jt("")],e.prototype,"avatarText",void 0),Xo([jt("")],e.prototype,"avatarIconCss",void 0),Xo([jt("")],e.prototype,"htmlAttributes",void 0),Xo([jt("")],e.prototype,"leadingIconCss",void 0),Xo([jt("")],e.prototype,"trailingIconCss",void 0),Xo([jt("")],e.prototype,"leadingIconUrl",void 0),Xo([jt("")],e.prototype,"trailingIconUrl",void 0),Xo([jt("")],e.prototype,"cssClass",void 0),Xo([jt(!0)],e.prototype,"enabled",void 0),Xo([jt([])],e.prototype,"selectedChips",void 0),Xo([jt("None")],e.prototype,"selection",void 0),Xo([jt(!1)],e.prototype,"enableDelete",void 0),Xo([jt(!1)],e.prototype,"allowDragAndDrop",void 0),Xo([jt(null)],e.prototype,"dragArea",void 0),Xo([Ut()],e.prototype,"created",void 0),Xo([Ut()],e.prototype,"click",void 0),Xo([Ut()],e.prototype,"beforeClick",void 0),Xo([Ut()],e.prototype,"delete",void 0),Xo([Ut()],e.prototype,"deleted",void 0),Xo([Ut()],e.prototype,"dragStart",void 0),Xo([Ut()],e.prototype,"dragging",void 0),Xo([Ut()],e.prototype,"dragStop",void 0),e=i=Xo([Ft],e)}(_e),Jo=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$o=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ta="e-fab-fixed",ea="e-fab-top",ia="e-fab-bottom",na="e-fab-right",sa="e-fab-left",ra="e-fab-middle",oa="e-fab-center";!function(t){t.TopLeft="TopLeft",t.TopCenter="TopCenter",t.TopRight="TopRight",t.MiddleLeft="MiddleLeft",t.MiddleCenter="MiddleCenter",t.MiddleRight="MiddleRight",t.BottomLeft="BottomLeft",t.BottomCenter="BottomCenter",t.BottomRight="BottomRight"}(ho||(ho={}));var aa,la,ha,ca,da=function(t){function e(e,i){return t.call(this,e,i)||this}return Jo(e,t),e.prototype.render=function(){t.prototype.render.call(this),this.initializeFab()},e.prototype.preRender=function(){t.prototype.preRender.call(this),this.element.id||(this.element.id=b("e-"+this.getModuleName()))},e.prototype.getPersistData=function(){return t.prototype.getPersistData.call(this),this.addOnPersist([])},e.prototype.getModuleName=function(){return"fab"},e.prototype.initializeFab=function(){this.element.classList.add("e-"+t.prototype.getModuleName.call(this)),this.checkTarget(),this.setPosition(),this.setVisibility()},e.prototype.checkTarget=function(){this.isFixed=!0,this.target&&(this.targetEle="string"==typeof this.target?ct(this.target):this.target,this.targetEle&&(this.isFixed=!1,this.targetEle.appendChild(this.element))),this.element.classList[this.isFixed?"add":"remove"](ta)},e.prototype.setVisibility=function(){this.element.classList[this.visible?"remove":"add"]("e-fab-hidden")},e.prototype.setPosition=function(){this.element.classList.add(-1!==["BottomLeft","BottomCenter","BottomRight"].indexOf(this.position)?ia:ea);var t=-1!==["TopRight","MiddleRight","BottomRight"].indexOf(this.position);this.element.classList.add(!this.enableRtl&&!t||this.enableRtl&&t?sa:na),-1!==["MiddleLeft","MiddleRight","MiddleCenter"].indexOf(this.position)&&this.element.classList.add(ra),-1!==["TopCenter","BottomCenter","MiddleCenter"].indexOf(this.position)&&this.element.classList.add(oa)},e.prototype.clearPosition=function(){this.element.classList.remove(ea,ia,ra),this.element.classList.remove(na,sa,oa)},e.prototype.refreshPosition=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.element.classList.remove("e-"+t.prototype.getModuleName.call(this),ta),this.clearPosition()},e.prototype.onPropertyChanged=function(e,i){t.prototype.onPropertyChanged.call(this,e,i);for(var n=0,s=Object.keys(e);n<s.length;n++){switch(s[n]){case"enableRtl":case"position":this.clearPosition(),this.setPosition();break;case"visible":this.setVisibility();break;case"target":this.checkTarget(),this.setPosition();break;case"currencyCode":this.refresh()}}},$o([jt("BottomRight")],e.prototype,"position",void 0),$o([jt("")],e.prototype,"target",void 0),$o([jt(!0)],e.prototype,"visible",void 0),$o([jt(!0)],e.prototype,"isPrimary",void 0),e=$o([Ft],e)}(mo),pa=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ua=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ga=["TopLeft","TopCenter","TopRight"],ma=["BottomLeft","BottomCenter","BottomRight"],fa=["TopLeft","MiddleLeft","BottomLeft"],ya=["TopRight","MiddleRight","BottomRight"],va="e-speeddial-hidden",ba="e-speeddial-fixed",Ca="e-speeddial",Ia="e-rtl",Ma="e-speeddial-hover-open",Sa="e-speeddial-radial",xa="e-speeddial-linear",wa="e-speeddial-template",Da="e-speeddial-popup",Ea="e-speeddial-ul",Ta="e-speeddial-li",Aa="e-speeddial-li-active",Na="e-speeddial-li-icon",La="e-disabled",Oa="e-speeddial-vert-bottom",ka="e-speeddial-vert-right",za="e-speeddial-horz-top",Pa="e-speeddial-horz-left",ja="e-speeddial-horz-right",Ba="e-speeddial-overflow",Ha="e-speeddial-vert-overflow",Ra="e-speeddial-horz-overflow",Va="e-speeddial-top",Ua="e-speeddial-bottom",Fa="e-speeddial-right",Wa="e-speeddial-left",Ya="e-speeddial-middle",_a="e-speeddial-center",Qa="e-speeddial-top-left",Za="e-speeddial-bottom-right",qa="e-speeddial-top-right",Xa="e-speeddial-bottom-left",Ga="--speeddialVertDist",Ka="--speeddialHorzDist",Ja="--speeddialRadialOffset",$a="--speeddialRadialMinHeight",tl="--speeddialRadialMinWidth",el="--speeddialOverflowLimit",il="--speeddialRadialHorzDist";!function(t){t.Linear="Linear",t.Radial="Radial"}(aa||(aa={})),function(t){t.Up="Up",t.Down="Down",t.Right="Right",t.Left="Left",t.Auto="Auto"}(la||(la={})),function(t){t.Clockwise="Clockwise",t.AntiClockwise="AntiClockwise",t.Auto="Auto"}(ha||(ha={})),function(t){t.Fade="Fade",t.FadeZoom="FadeZoom",t.FlipLeftDown="FlipLeftDown",t.FlipLeftUp="FlipLeftUp",t.FlipRightDown="FlipRightDown",t.FlipRightUp="FlipRightUp",t.FlipXDown="FlipXDown",t.FlipXUp="FlipXUp",t.FlipYLeft="FlipYLeft",t.FlipYRight="FlipYRight",t.SlideBottom="SlideBottom",t.SlideLeft="SlideLeft",t.SlideRight="SlideRight",t.SlideTop="SlideTop",t.Zoom="Zoom",t.None="None"}(ca||(ca={}));var nl,sl,rl,ol,al,ll,hl,cl,dl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pa(e,t),ua([jt("Fade")],e.prototype,"effect",void 0),ua([jt(400)],e.prototype,"duration",void 0),ua([jt(0)],e.prototype,"delay",void 0),e}(re),pl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pa(e,t),ua([jt("Auto")],e.prototype,"direction",void 0),ua([jt(-1)],e.prototype,"endAngle",void 0),ua([jt("100px")],e.prototype,"offset",void 0),ua([jt(-1)],e.prototype,"startAngle",void 0),e}(re),ul=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pa(e,t),ua([jt("")],e.prototype,"iconCss",void 0),ua([jt("")],e.prototype,"id",void 0),ua([jt("")],e.prototype,"text",void 0),ua([jt("")],e.prototype,"title",void 0),ua([jt(!1)],e.prototype,"disabled",void 0),e}(re),gl=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isMenuOpen=!1,n.isClock=!0,n.isVertical=!0,n.isControl=!1,n.focusedIndex=-1,n}return pa(e,t),e.prototype.render=function(){this.initialize()},e.prototype.preRender=function(){this.keyConfigs={space:"space",enter:"enter",end:"end",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",esc:"escape"},this.validateDirection()},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.getModuleName=function(){return"speed-dial"},e.prototype.initialize=function(){this.element.id||(this.element.id=b("e-"+this.getModuleName())),this.fab=new da({content:this.content,cssClass:this.cssClass?Ca+" "+this.cssClass:Ca,disabled:this.disabled,enablePersistence:this.enablePersistence,enableRtl:this.enableRtl,iconCss:this.openIconCss,iconPosition:this.iconPosition,position:this.position,target:this.target,visible:this.visible,isPrimary:this.isPrimary}),this.fab.appendTo(this.element),(this.items.length>0||this.popupTemplate)&&this.createPopup(),this.wireEvents()},e.prototype.wireEvents=function(){K.add(window,"resize",this.resizeHandler,this),K.add(document.body,"click",this.bodyClickHandler,this),this.opensOnHover?this.wireFabHover():this.wireFabClick()},e.prototype.wirePopupEvents=function(){this.removeRippleEffect=Xt(this.popupEle,{selector:"."+Na}),this.keyboardModule=new si(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.popupKeyboardModule=new si(this.popupEle,{keyAction:this.popupKeyActionHandler.bind(this),keyConfigs:{esc:"escape"},eventName:"keydown"}),this.documentKeyboardModule=new si(document.body,{keyAction:this.popupKeyActionHandler.bind(this),keyConfigs:{enter:"enter",space:"space"},eventName:"keydown"}),K.add(this.popupEle,"click",this.popupClick,this),K.add(this.popupEle,"mouseleave",this.popupMouseLeaveHandle,this)},e.prototype.wireFabClick=function(){K.add(this.fab.element,"click",this.fabClick,this)},e.prototype.wireFabHover=function(){this.popupEle.classList.add(Ma),K.add(this.fab.element,"mouseover",this.mouseOverHandle,this),K.add(this.element,"mouseleave",this.mouseLeaveHandle,this)},e.prototype.createPopup=function(){var t=Da+" "+va;t=this.enableRtl?t+" "+Ia:t,t=this.cssClass?t+" "+this.cssClass:t,this.popupEle=this.createElement("div",{className:t,id:this.element.id+"_popup"}),this.element.insertAdjacentElement("afterend",this.popupEle),ht(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-controls":this.popupEle.id}),this.setPopupContent(),this.modal&&this.createOverlay(),this.checkTarget(),this.setPositionProps(),this.wirePopupEvents()},e.prototype.createOverlay=function(){this.overlayEle=this.createElement("div",{id:this.element.id+"_overlay",className:("e-speeddial-overlay"+(this.isMenuOpen?"":" "+va)+" "+this.cssClass).trim()}),this.element.insertAdjacentElement("beforebegin",this.overlayEle)},e.prototype.popupClick=function(){this.isControl=!0},e.prototype.bodyClickHandler=function(t){this.isControl?this.isControl=!1:this.isMenuOpen&&this.hidePopupEle(t)},e.prototype.fabClick=function(t){this.isControl=!0,this.isMenuOpen?this.hidePopupEle(t):this.showPopupEle(t)},e.prototype.setPopupContent=function(){this.popupEle.classList.remove(Sa,xa,wa),this.popupTemplate?(this.popupEle.classList.add(wa),this.appendTemplate()):(this.popupEle.classList.add("Radial"===this.mode?Sa:xa),this.createUl(),this.createItems()),this.renderReactTemplates()},e.prototype.appendTemplate=function(){var t=this.createElement("div",{className:"e-speeddial-template-container"});rt([t],this.popupEle),rt(this.getTemplateString(this.popupTemplate)({},this,"fabPopupTemplate",this.element.id+"popupTemplate",this.isStringTemplate),t)},e.prototype.getTemplateString=function(t){var e="";try{var i=ct(t);e="function"!=typeof t&&i?"SCRIPT"===i.tagName?i.innerHTML:i.outerHTML:t}catch(i){e=t}return Hi(e)},e.prototype.updatePopupTemplate=function(){if(this.popupEle){for(this.popupEle.querySelector("."+Ta)&&(this.clearItems(),this.popupEle.classList.remove(Sa,xa),this.popupEle.classList.add(wa));this.popupEle.firstElementChild;)lt(this.popupEle.firstElementChild);this.setPopupContent(),this.updatePositionProperties()}else this.createPopup()},e.prototype.createUl=function(){var t=this.createElement("ul",{className:Ea,id:this.element.id+"_ul",attrs:{role:"menu"}});this.popupEle.appendChild(t)},e.prototype.createItems=function(){var t=this;this.focusedIndex=-1;for(var e=this.popupEle.querySelector("."+Ea),i=function(i){var s=n.items[parseInt(i.toString(),10)],r=n.createElement("li",{className:Ta+" "+va,id:s.id?s.id:n.element.id+"_li_"+i,attrs:{role:"menuitem"}});if(s.text&&r.setAttribute("aria-label",s.text),n.itemTemplate){rt(n.getTemplateString(n.itemTemplate)(s,n,"fabItemTemplate",n.element.id+"itemTemplate",n.isStringTemplate),r)}else{if(s.iconCss){var o=n.createElement("span",{className:Na+" "+s.iconCss});r.appendChild(o)}if(s.text){var a=n.createElement("span",{className:"e-speeddial-li-text"});a.innerText=s.text,r.appendChild(a),s.iconCss||r.classList.add("e-speeddial-text-li")}}s.disabled?(r.classList.add(La),r.setAttribute("aria-disabled","true")):K.add(r,"click",function(e){return t.triggerItemClick(e,s)},n),s.title&&r.setAttribute("title",s.title);var l={element:r,item:s};n.trigger("beforeItemRender",l,function(t){e.appendChild(t.element)})},n=this,s=0;s<this.items.length;s++)i(s)},e.prototype.setRTL=function(){this.popupEle.classList[this.enableRtl?"add":"remove"](Ia),this.clearHorizontalPosition(),this.popupTemplate||"Radial"===this.mode?(this.popupTemplate||"Radial"!==this.mode||this.setRadialPosition(),this.setHorizontalPosition()):this.setLinearHorizontalPosition()},e.prototype.checkTarget=function(){this.isFixed=!0,this.target&&(this.targetEle="string"==typeof this.target?ct(this.target):this.target,this.targetEle&&(this.targetEle.appendChild(this.element),this.isFixed=!1)),this.isFixed?(this.popupEle&&this.popupEle.classList.add(ba),this.overlayEle&&this.overlayEle.classList.add(ba)):(this.popupEle&&this.popupEle.classList.remove(ba),this.overlayEle&&this.overlayEle.classList.remove(ba))},e.prototype.setVisibility=function(t){this.setProperties({visible:t},!0),this.fab.setProperties({visible:t})},e.prototype.popupMouseLeaveHandle=function(t){var e=t.relatedTarget;!this.opensOnHover||e.classList.contains(Ca)||ut(e,"."+Ca)||this.hidePopupEle(t)},e.prototype.mouseOverHandle=function(t){this.showPopupEle(t)},e.prototype.mouseLeaveHandle=function(t){var e=t.relatedTarget;e.classList.contains(Da)||ut(e,"."+Da)||this.hidePopupEle(t)},e.prototype.popupKeyActionHandler=function(t){switch(t.action){case"esc":this.hidePopupEle(t);break;case"enter":case"space":this.isMenuOpen&&t.target!==this.element&&this.hidePopupEle(t)}},e.prototype.keyActionHandler=function(t){switch(t.preventDefault(),t.action){case"enter":case"space":this.isMenuOpen?-1!==this.focusedIndex?this.triggerItemClick(t,this.items[this.focusedIndex]):this.hidePopupEle(t):this.showPopupEle(t);break;case"esc":this.hidePopupEle(t);break;default:if(this.popupTemplate||!this.isMenuOpen)break;switch(t.action){case"end":this.focusLastElement();break;case"home":this.focusFirstElement();break;case"moveRight":"Radial"===this.mode?this.focusLeftRightElement(!1):this.focusLinearElement(!1);break;case"moveDown":"Radial"===this.mode?this.focusUpDownElement(!1):this.focusLinearElement(!1);break;case"moveLeft":"Radial"===this.mode?this.focusLeftRightElement(!0):this.focusLinearElement(!0);break;case"moveUp":"Radial"===this.mode?this.focusUpDownElement(!0):this.focusLinearElement(!0)}}},e.prototype.focusFirstElement=function(){for(var t=dt("."+Ta,this.popupEle),e=0;t[parseInt(e.toString(),10)].classList.contains(La);)if(++e>t.length-1)return;this.setFocus(e,t[parseInt(e.toString(),10)])},e.prototype.focusLastElement=function(){for(var t=dt("."+Ta,this.popupEle),e=t.length-1;t[parseInt(e.toString(),10)].classList.contains(La);)if(--e<0)return;this.setFocus(e,t[parseInt(e.toString(),10)])},e.prototype.focusLinearElement=function(t){(this.popupEle.classList.contains(Oa)||this.popupEle.classList.contains(ja))!==t?this.focusPrevElement():this.focusNextElement()},e.prototype.focusLeftRightElement=function(t){var e=-1!==["TopLeft","TopCenter","TopRight","MiddleLeft"].indexOf(this.position);e&&t!==this.isClock||!e&&t===this.isClock?this.focusPrevElement():this.focusNextElement()},e.prototype.focusUpDownElement=function(t){var e=-1!==["TopRight","MiddleRight","BottomRight","BottomCenter"].indexOf(this.position);e&&t!==this.isClock||!e&&t===this.isClock?this.focusPrevElement():this.focusNextElement()},e.prototype.focusPrevElement=function(){var t=dt("."+Ta,this.popupEle),e=this.focusedIndex;do{if(--e<0)return void this.setFocus(-1)}while(t[parseInt(e.toString(),10)].classList.contains(La));this.setFocus(e,t[parseInt(e.toString(),10)])},e.prototype.focusNextElement=function(){var t=dt("."+Ta,this.popupEle),e=this.focusedIndex;do{if(++e>t.length-1)return}while(t[parseInt(e.toString(),10)].classList.contains(La));this.setFocus(e,t[parseInt(e.toString(),10)])},e.prototype.setFocus=function(t,e){this.removeFocus(),e&&e.classList.add(Aa),this.focusedIndex=t},e.prototype.removeFocus=function(){var t=ct("."+Aa,this.popupEle);t&&t.classList.remove(Aa)},e.prototype.updatePositionProperties=function(){this.hidePopupEle(),this.clearPosition(),this.validateDirection(),this.setPositionProps()},e.prototype.setPositionProps=function(){this.popupTemplate?this.setPosition():"Radial"===this.mode?(this.setRadialPosition(),this.setPosition()):(this.setLinearPosition(),this.setMaxSize())},e.prototype.validateDirection=function(){switch(this.direction){case"Up":this.actualLinDirection=-1!==ga.indexOf(this.position)?"Auto":"Up";break;case"Down":this.actualLinDirection=-1!==ma.indexOf(this.position)?"Auto":"Down";break;case"Right":this.actualLinDirection=-1!==ya.indexOf(this.position)?"Auto":"Right";break;case"Left":this.actualLinDirection=-1!==fa.indexOf(this.position)?"Auto":"Left";break;default:this.actualLinDirection="Auto"}this.isVertical=!("Left"===this.actualLinDirection||"Right"===this.actualLinDirection)},e.prototype.setMaxSize=function(){var t=this.element.offsetTop,e=this.element.offsetLeft,i=(this.isFixed?window.innerHeight:this.targetEle.clientHeight)-this.element.offsetTop-this.element.offsetHeight,n=(this.isFixed?window.innerWidth:this.targetEle.clientWidth)-this.element.offsetLeft-this.element.offsetWidth,s=0,r=this.popupEle.querySelector("."+Ea);this.isVertical?(s="Up"===this.actualLinDirection||"Auto"===this.actualLinDirection&&-1===ga.indexOf(this.position)?t:i)<r.offsetHeight&&(this.popupEle.classList.add(Ba,Ha),r.style.setProperty(el,s+"px")):(s=this.enableRtl?"Right"===this.direction?e:n:"Right"===this.direction?n:e)<r.offsetWidth&&(this.popupEle.classList.add(Ba,Ra),r.style.setProperty(el,s+"px"))},e.prototype.setLinearPosition=function(){var t=0,e="Down"===this.actualLinDirection||"Auto"===this.actualLinDirection&&-1!==ga.indexOf(this.position)||!this.isVertical&&-1===ma.indexOf(this.position),i=this.element.offsetHeight/2,n=-1!==["MiddleRight","MiddleCenter","MiddleLeft"].indexOf(this.position);e?(t=this.element.offsetTop+(this.isVertical?this.element.offsetHeight:0),n&&("Right"!==this.actualLinDirection&&"Left"!==this.actualLinDirection||(t=this.element.offsetTop-i),"Down"===this.actualLinDirection&&(t-=i)),this.isVertical||this.popupEle.classList.add(za)):(t=(t=this.isFixed?window.document.documentElement.clientHeight:this.targetEle.clientHeight)-this.element.offsetTop-(this.isVertical?0:this.element.offsetHeight),n&&("Auto"!==this.actualLinDirection&&"Up"!==this.actualLinDirection||(t+=i)),this.isVertical&&this.popupEle.classList.add(Oa)),this.popupEle.classList.add(e?Va:Ua),this.popupEle.style.setProperty(Ga,t+"px"),this.setLinearHorizontalPosition()},e.prototype.setLinearHorizontalPosition=function(){"Right"===this.actualLinDirection||this.isVertical&&-1===ya.indexOf(this.position)?(this.enableRtl?this.setRight():this.setLeft(),this.isVertical||this.popupEle.classList.add(Pa)):(this.enableRtl?this.setLeft():this.setRight(),this.popupEle.classList.add(this.isVertical?ka:ja))},e.prototype.setLeft=function(){var t=this.element.offsetWidth/2,e=-1!==["TopCenter","MiddleCenter","BottomCenter"].indexOf(this.position),i=this.element.offsetLeft+(this.isVertical?0:this.element.offsetWidth);e&&(i="Auto"===this.actualLinDirection||"Down"===this.actualLinDirection||"Up"===this.actualLinDirection?this.element.offsetLeft-t:"Right"===this.actualLinDirection?this.element.offsetLeft+t:i+t),this.popupEle.style.setProperty(Ka,i+"px"),this.popupEle.classList.add(Wa)},e.prototype.setRight=function(){var t=this.element.offsetWidth/2,e=-1!==["TopCenter","MiddleCenter","BottomCenter"].indexOf(this.position),i=this.isFixed?window.document.documentElement.clientWidth:this.targetEle.clientWidth;i=i-this.element.offsetLeft-(this.isVertical?this.element.offsetWidth:0),e&&"Left"===this.actualLinDirection&&(i+=t),this.popupEle.classList.contains("e-rtl")&&e&&(i-=t),this.popupEle.style.setProperty(Ka,i+"px"),this.popupEle.classList.add(Fa)},e.prototype.setPosition=function(){if(-1!==["MiddleLeft","MiddleRight","MiddleCenter"].indexOf(this.position)){this.popupEle.classList.add(Ya);var t=((this.isFixed?window.innerHeight:this.targetEle.clientHeight)-this.popupEle.offsetHeight)/2;this.popupEle.style.setProperty(Ga,t+"px")}this.popupEle.classList.add(-1===ma.indexOf(this.position)?Va:Ua),this.setHorizontalPosition()},e.prototype.setHorizontalPosition=function(){if(-1!==["TopCenter","BottomCenter","MiddleCenter"].indexOf(this.position)){this.popupEle.classList.add(_a);var t=((this.isFixed?window.innerWidth:this.targetEle.clientWidth)-this.popupEle.offsetWidth)/2;this.popupEle.style.setProperty(Ka,t+"px")}var e=-1!==ya.indexOf(this.position);this.popupEle.classList.add(!this.enableRtl&&!e||this.enableRtl&&e?Wa:Fa)},e.prototype.setCustomRadialPosition=function(){var t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;if(-1!==["TopLeft","BottomLeft","MiddleLeft"].indexOf(this.position)){var i=void 0;i=this.enableRtl?this.isFixed?t-(this.element.offsetLeft+this.element.offsetWidth):this.targetEle.clientWidth-(this.element.offsetLeft+this.element.offsetWidth):this.element.offsetLeft,this.popupEle.style.setProperty(il,i+"px")}if(-1!==["TopLeft","TopCenter","TopRight"].indexOf(this.position)&&(this.popupEle.style.top=this.element.offsetTop+"px"),-1!==["TopRight","BottomRight","MiddleRight"].indexOf(this.position)){i=void 0;i=this.enableRtl?this.element.offsetLeft:this.isFixed?t-(this.element.offsetLeft+this.element.offsetWidth):this.targetEle.clientWidth-(this.element.offsetLeft+this.element.offsetWidth),this.popupEle.style.setProperty(il,i+"px")}if(-1!==["BottomLeft","BottomCenter","BottomRight"].indexOf(this.position)&&(this.isFixed?this.popupEle.style.bottom=e-(this.element.offsetTop+this.element.offsetHeight)+"px":this.popupEle.style.bottom=this.targetEle.clientHeight-(this.element.offsetTop+this.element.offsetHeight)+"px"),-1!==["TopCenter","MiddleCenter","BottomCenter"].indexOf(this.position)){i=void 0;if(this.enableRtl)if(this.isFixed)i=t-(this.element.offsetLeft+this.element.offsetWidth)-this.popupEle.offsetWidth/2;else{var n=this.targetEle.clientWidth,s=this.popupEle.offsetWidth;i=n-(this.element.offsetLeft+this.element.offsetWidth)-s/2}else i=this.element.offsetLeft-this.popupEle.offsetWidth/2;this.popupEle.style.setProperty(il,i+"px")}-1!==["MiddleLeft","MiddleCenter","MiddleRight"].indexOf(this.position)&&(this.popupEle.style.top=this.element.offsetTop-this.popupEle.offsetHeight/2+"px")},e.prototype.setRadialPosition=function(){this.setRadialCorner();var t=this.getActualRange();this.isClock="Clockwise"===t.direction;var e=S(t.offset),i=dt("."+Ta,this.popupEle);this.popupEle.style.setProperty(Ja,e),this.popupEle.style.setProperty($a,i[0].offsetHeight+"px"),this.popupEle.style.setProperty(tl,i[0].offsetWidth+"px");for(var n=Math.abs(t.endAngle-t.startAngle),s=n/(360===n||0===n?i.length:i.length-1),r=0;r<i.length;r++){var o=i[parseInt(r.toString(),10)],a=t.startAngle,l=this.isClock?a+s*r:a-s*r;l%=360,o.style.setProperty("--speeddialRadialAngle",l+"deg")}},e.prototype.setRadialCorner=function(){-1!==["TopLeft","TopCenter","MiddleLeft","MiddleCenter"].indexOf(this.position)&&this.popupEle.classList.add(this.enableRtl?qa:Qa),-1!==["TopRight","TopCenter","MiddleRight","MiddleCenter"].indexOf(this.position)&&this.popupEle.classList.add(this.enableRtl?Qa:qa),-1!==["BottomLeft","BottomCenter","MiddleLeft","MiddleCenter"].indexOf(this.position)&&this.popupEle.classList.add(this.enableRtl?Za:Xa),-1!==["BottomRight","BottomCenter","MiddleRight","MiddleCenter"].indexOf(this.position)&&this.popupEle.classList.add(this.enableRtl?Xa:Za)},e.prototype.getActualRange=function(){var t={offset:this.radialSettings.offset},e=this.radialSettings.startAngle,i=this.radialSettings.endAngle,n=!1;switch(this.position){case"TopLeft":case"TopRight":"TopLeft"===this.position!==this.enableRtl?(n="Clockwise"===this.radialSettings.direction,this.checkAngleRange(e,i,t,n,0,90,!1)):(n="AntiClockwise"!==this.radialSettings.direction,this.checkAngleRange(e,i,t,n,90,180,!1));break;case"TopCenter":n="Clockwise"===this.radialSettings.direction,this.checkAngleRange(e,i,t,n,0,180,!1);break;case"MiddleLeft":case"MiddleRight":if("MiddleLeft"===this.position!==this.enableRtl){n="Clockwise"===this.radialSettings.direction,e=(e=y(e)||e<0||e>360||e>90&&e<270?n?270:90:e)<91?e+360:e,i=(i=y(i)||i<0||i>360||i>90&&i<270?n?90:270:i)<91?i+360:i;var s=n&&i<e||!n&&i>e;t.startAngle=s?i:e,t.endAngle=s?e:i}else n="AntiClockwise"!==this.radialSettings.direction,this.checkAngleRange(e,i,t,n,90,270,!1);break;case"MiddleCenter":n="AntiClockwise"!==this.radialSettings.direction,e=y(e)||e<0||e>360?n?0:360:e,i=y(i)||i<0||i>360?n?360:0:i,t.startAngle=!n&&e<=i?e+360:e,t.endAngle=n&&i<=e?i+360:i;break;case"BottomLeft":case"BottomRight":"BottomLeft"===this.position!==this.enableRtl?(n="Clockwise"===this.radialSettings.direction,this.checkAngleRange(e,i,t,n,270,360,!0)):(n="AntiClockwise"!==this.radialSettings.direction,this.checkAngleRange(e,i,t,n,180,270,!0));break;case"BottomCenter":n="AntiClockwise"!==this.radialSettings.direction,this.checkAngleRange(e,i,t,n,180,360,!0)}return t.direction=n?"Clockwise":"AntiClockwise",t},e.prototype.checkAngleRange=function(t,e,i,n,s,r,o){t=this.checkAngle(t,n,s,r,o),e=this.checkAngle(e,!n,s,r,o);var a=n&&e<t||!n&&e>t;i.startAngle=a?e:t,i.endAngle=a?t:e},e.prototype.checkAngle=function(t,e,i,n,s){return y(t)||t<0||t>360?e?i:n:(t=s?0===t?360:t:360===t?0:t)>=i&&t<=n?t:e?i:n},e.prototype.clearPosition=function(){this.popupEle.style.removeProperty(Ja),this.popupEle.style.removeProperty($a),this.popupEle.style.removeProperty(tl),this.popupEle.classList.remove(Qa,qa,Xa,Za),this.popupEle.classList.remove(Va,Ua,Ya),this.popupEle.classList.remove(za,Oa),this.popupEle.style.removeProperty(Ga),this.clearHorizontalPosition(),this.clearOverflow()},e.prototype.clearHorizontalPosition=function(){this.popupEle.style.removeProperty(Ka),this.popupEle.style.removeProperty(il),this.popupEle.style.removeProperty("top"),this.popupEle.style.removeProperty("bottom"),this.popupEle.classList.remove(Fa,Wa,_a),this.popupEle.classList.remove(ka,Pa,ja)},e.prototype.clearOverflow=function(){this.popupEle.classList.remove(Ba,Ha,Ra),this.popupEle.style.removeProperty(el)},e.prototype.hidePopupEle=function(t){var e=this;if(this.popupEle&&this.isMenuOpen){var i={element:this.popupEle,event:t,cancel:!1};this.trigger("beforeClose",i,function(t){if(!t.cancel)if("None"!==e.animation.effect){var i={name:e.animation.effect+"Out",timingFunction:"easeOut"},n=e.popupTemplate?[e.popupEle.firstElementChild]:dt("."+Ta,e.popupEle),s=e.animation.duration/(n.length+1);i.duration=2*s;var r=function(t){var o=n[parseInt(t.toString(),10)];if(i.delay=t===n.length-1?e.animation.delay:0,i.begin=function(){t===n.length-1&&e.startHide()},i.end=function(){o.classList.add(va),0===t&&e.endHide()},new qt(i).animate(o),0!==t){var a=t-1;setTimeout(function(){r(a)},s)}};r(n.length-1)}else{if(e.startHide(),!e.popupTemplate)dt("."+Ta,e.popupEle).forEach(function(t){t.classList.add(va)});e.endHide()}})}},e.prototype.startHide=function(){this.element.setAttribute("aria-expanded","false"),this.removeFocus(),this.isMenuOpen=!1},e.prototype.endHide=function(){this.fab.setProperties({iconCss:this.openIconCss}),this.popupEle.classList.add(va),this.popupTemplate&&this.setVisibility(!0),this.toggleOverlay(),this.popupTemplate&&this.popupEle.removeAttribute("tabindex"),this.trigger("onClose",{element:this.popupEle})},e.prototype.showPopupEle=function(t){var e=this;if(this.popupEle&&!this.isMenuOpen){this.popupTemplate||"Radial"===this.mode?this.setCustomRadialPosition():this.setLinearPosition();var i={element:this.popupEle,event:t,cancel:!1};this.trigger("beforeOpen",i,function(t){if(!t.cancel)if("None"!==e.animation.effect||"Enable"===te&&"None"===e.animation.effect){"Enable"===te&&"None"===e.animation.effect&&(e.animation.effect="Fade"),"Enable"===te&&0===e.animation.duration&&(e.animation.duration=400);var i={name:e.animation.effect+"In",timingFunction:"easeIn"},n=e.popupTemplate?[e.popupEle.firstElementChild]:dt("."+Ta,e.popupEle),s=e.animation.duration/(n.length+1);i.duration=2*s;var r=function(t){var o=n[parseInt(t.toString(),10)];if(i.delay=0===t?e.animation.delay:0,i.begin=function(){0===t&&e.startShow(),o.classList.remove(va)},i.end=function(){t===n.length-1&&e.endShow()},new qt(i).animate(o),t!==n.length-1){var a=t+1;setTimeout(function(){r(a)},s)}};r(0)}else{if(e.startShow(),!e.popupTemplate)dt("."+Ta,e.popupEle).forEach(function(t){t.classList.remove(va)});e.endShow()}})}},e.prototype.startShow=function(){this.element.setAttribute("aria-expanded","true"),this.isMenuOpen=!0,this.toggleOverlay(),this.popupEle.classList.remove(va),this.popupTemplate&&this.setVisibility(!1)},e.prototype.endShow=function(){this.closeIconCss&&this.fab.setProperties({iconCss:this.closeIconCss}),this.popupTemplate&&(this.popupEle.setAttribute("tabindex","1"),this.popupEle.focus()),this.trigger("onOpen",{element:this.popupEle})},e.prototype.toggleOverlay=function(){this.overlayEle&&this.overlayEle.classList[this.isMenuOpen?"remove":"add"](va)},e.prototype.removeOverlayEle=function(){this.overlayEle&&(lt(this.overlayEle),this.overlayEle=void 0)},e.prototype.updatePopupItems=function(){this.popupEle?(this.hidePopupEle(),this.clearItems(),this.createItems(),this.updatePositionProperties()):this.createPopup()},e.prototype.handleResize=function(t){this.popupEle&&(this.hidePopupEle(t),this.clearOverflow(),this.setPositionProps())},e.prototype.triggerItemClick=function(t,e){var i=t.target,n={element:i=i.classList.contains(Ta)?i:ut(i,"."+Ta),item:e,event:t};this.trigger("clicked",n),this.hidePopupEle(t)},e.prototype.show=function(){this.showPopupEle()},e.prototype.hide=function(){this.hidePopupEle()},e.prototype.refreshPosition=function(){this.resizeHandler()},e.prototype.resizeHandler=function(t){this.handleResize(t)},e.prototype.clearItems=function(){dt("."+Ta,this.popupEle).forEach(function(t){lt(t)})},e.prototype.unwireEvents=function(){K.remove(window,"resize",this.resizeHandler),K.remove(document.body,"click",this.bodyClickHandler),this.opensOnHover?this.unwireFabHover():this.unwireFabClick()},e.prototype.unwireFabClick=function(){K.remove(this.fab.element,"click",this.fabClick)},e.prototype.unwireFabHover=function(){this.popupEle.classList.remove(Ma),K.remove(this.fab.element,"mouseover",this.mouseOverHandle),K.remove(this.element,"mouseleave",this.mouseLeaveHandle)},e.prototype.unwirePopupEvents=function(){ie&&this.removeRippleEffect(),this.removeRippleEffect=null,this.keyboardModule.destroy(),this.popupKeyboardModule.destroy(),this.documentKeyboardModule.destroy(),this.keyboardModule=null,this.popupKeyboardModule=null,this.documentKeyboardModule=null,K.remove(this.popupEle,"click",this.popupClick),K.remove(this.popupEle,"mouseleave",this.popupMouseLeaveHandle)},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this.unwireEvents(),["aria-expanded","aria-haspopup","aria-controls"].forEach(function(t){e.element.removeAttribute(t)}),this.popupEle&&(this.unwirePopupEvents(),lt(this.popupEle),this.popupEle=void 0),this.removeOverlayEle(),this.fab.destroy(),this.fab=void 0},e.prototype.onPropertyChanged=function(t,e){for(var i=["content","cssClass","disabled","enablePersistence","enableRtl","iconPosition","position","target","template","title","visible","isPrimary"],n=f({},t),s=0,r=Object.keys(n);s<r.length;s++){var o=r[s];i.indexOf(o)<0&&p(n,o)}this.fab.setProperties(n);for(var a=0,l=Object.keys(t);a<l.length;a++){switch(o=l[a]){case"cssClass":if(!this.popupEle)break;e.cssClass&&et(this.overlayEle?[this.popupEle,this.overlayEle]:[this.popupEle],e.cssClass.split(/\s+/).filter(function(t){return t.length>0})),t.cssClass&&tt(this.overlayEle?[this.popupEle,this.overlayEle]:[this.popupEle],t.cssClass.split(/\s+/).filter(function(t){return t.length>0}));break;case"visible":case"disabled":this.hide();break;case"enableRtl":if(!this.popupEle)break;this.setRTL();break;case"openIconCss":this.isMenuOpen||this.fab.setProperties({iconCss:this.openIconCss});break;case"closeIconCss":this.isMenuOpen&&this.fab.setProperties({iconCss:this.closeIconCss});break;case"position":if(!this.popupEle)break;this.updatePositionProperties();break;case"direction":if(!this.popupEle||this.popupTemplate)break;this.updatePositionProperties();break;case"popupTemplate":this.updatePopupTemplate();break;case"target":if(this.hidePopupEle(),this.checkTarget(),this.overlayEle&&this.element.insertAdjacentElement("beforebegin",this.overlayEle),!this.popupEle)break;this.element.insertAdjacentElement("afterend",this.popupEle),this.updatePositionProperties();break;case"items":case"itemTemplate":if(this.popupTemplate)break;this.updatePopupItems();break;case"modal":t.modal?this.createOverlay():this.removeOverlayEle();break;case"mode":if(!this.popupEle||this.popupTemplate)break;this.popupEle.classList.remove(Sa,xa),this.popupEle.classList.add("Radial"===this.mode?Sa:xa),this.updatePositionProperties();break;case"radialSettings":this.popupEle&&"Radial"===this.mode&&!this.popupTemplate&&this.setRadialPosition();break;case"opensOnHover":this.opensOnHover?(this.unwireFabClick(),this.wireFabHover()):(this.unwireFabHover(),this.wireFabClick())}}},ua([Bt({},dl)],e.prototype,"animation",void 0),ua([jt("")],e.prototype,"content",void 0),ua([jt("")],e.prototype,"closeIconCss",void 0),ua([jt("")],e.prototype,"cssClass",void 0),ua([jt("Auto")],e.prototype,"direction",void 0),ua([jt(!1)],e.prototype,"disabled",void 0),ua([jt("Left")],e.prototype,"iconPosition",void 0),ua([Rt([],ul)],e.prototype,"items",void 0),ua([jt("")],e.prototype,"itemTemplate",void 0),ua([jt("Linear")],e.prototype,"mode",void 0),ua([jt("")],e.prototype,"openIconCss",void 0),ua([jt(!1)],e.prototype,"opensOnHover",void 0),ua([jt("BottomRight")],e.prototype,"position",void 0),ua([jt(!1)],e.prototype,"modal",void 0),ua([jt("")],e.prototype,"popupTemplate",void 0),ua([Bt({},pl)],e.prototype,"radialSettings",void 0),ua([jt("")],e.prototype,"target",void 0),ua([jt(!0)],e.prototype,"visible",void 0),ua([jt(!0)],e.prototype,"isPrimary",void 0),ua([Ut()],e.prototype,"beforeClose",void 0),ua([Ut()],e.prototype,"beforeItemRender",void 0),ua([Ut()],e.prototype,"beforeOpen",void 0),ua([Ut()],e.prototype,"created",void 0),ua([Ut()],e.prototype,"clicked",void 0),ua([Ut()],e.prototype,"onClose",void 0),ua([Ut()],e.prototype,"onOpen",void 0),e=ua([Ft],e)}(_e),ml=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fl=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},yl=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}l((n=n.apply(t,e||[])).next())})},vl=function(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},bl=function(t){function e(e,i){return t.call(this,e,i)||this}return ml(e,t),e.prototype.wireEvents=function(){K.add(this.element,"click",this.smartPasteBtnClickHandler,this)},e.prototype.unWireEvents=function(){K.remove(this.element,"click",this.smartPasteBtnClickHandler)},e.prototype.smartPasteBtnClickHandler=function(t){return yl(this,void 0,void 0,function(){var e,i,n,s,r,o,a,l;return vl(this,function(h){switch(h.label){case 0:return e=t.target,(i=e.closest("form"))?0===(n=this.getFormFields(i)).length?[2]:[4,this.getClipboardContent().then(function(t){return t})]:[2];case 1:if("Clipboard API not supported"===(s=h.sent())||"Clipboard access failed"===s)return[3,6];h.label=2;case 2:return h.trys.push([2,,5,6]),this.disabled=!0,r=n.map(function(t){return{fieldName:t.fieldName,description:t.description,allowedValues:t.allowedValues,type:t.type}}),o="\nCurrent date: "+(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})+"\n\nEach response line matches the following format:\nFIELD identifier^^^value\n\nGive a response with the following lines only, with values inferred from USER_DATA:\n"+this.formatFields(r)+"\nEND_RESPONSE\n\nDo not explain how the values were determined.\nFor fields without any corresponding information in USER_DATA, use value NO_DATA.",a={messages:[{role:"system",content:o},{role:"user",content:"\nUSER_DATA: "+s+"\n                    "}],temperature:0,topP:1,maxTokens:2e3,frequencyPenalty:.1,presencePenalty:0,stop:["END_RESPONSE"]},"function"!=typeof this.aiAssistHandler?[3,4]:[4,this.aiAssistHandler(a)];case 3:"string"==typeof(l=h.sent())&&""!==l&&this.setFormFields(i,n,l),h.label=4;case 4:return[3,6];case 5:return this.disabled=!1,[7];case 6:return[2]}})})},e.prototype.formatFields=function(t){var e=[];return t.forEach(function(t){var i=[];i.push("\nFIELD "+t.fieldName+"^^^"),t.description&&i.push("The "+t.description),t.allowedValues&&t.allowedValues.length>0?(i.push(" (multiple choice, with allowed values: "),i.push(t.allowedValues.map(function(t){return""+t}).join(",")),i.push(")")):i.push(" of type "+t.type),e.push(i.join(""))}),e.join("")},e.prototype.setFormFields=function(t,e,i){var n=this,s={},r="FIELD ",o=null;i.split("\n").forEach(function(t){if(t.startsWith(r)){var e=t.substring(6).split("^^^");2===e.length&&(s[""+e[0]]=e[1],o=e[0])}else o&&(s[""+o]+="\n"+t)}),e.forEach(function(e){var i=s[e.fieldName];if(void 0!==i){if("NO_DATA"===(i=i.trim()))return;if(e.element instanceof HTMLInputElement&&"radio"===e.element.type){var r=n.findRadioButton(t,e.element.name,i);r&&n.updateElementValue(r,"true")}else n.updateElementValue(e.element,i)}})},e.prototype.findRadioButton=function(t,e,i){var n=this,s=Array.from(t.querySelectorAll("input[type=radio]")).filter(function(t){return t instanceof HTMLInputElement&&t.name===e}).map(function(e){return{elem:e,text:n.getElementDescription(t,e)}}),r=s.find(function(t){return t.text===i});if(r)return r.elem;var o=s.filter(function(t){return t.text&&t.text.includes(i)});return 1===o.length?o[0].elem:null},e.prototype.triggerBeforeChange=function(t){t.dispatchEvent(new CustomEvent("beforeinput",{bubbles:!0,detail:{fromSmartComponents:!0}}))},e.prototype.triggerAfterChange=function(t){t.dispatchEvent(new CustomEvent("input",{bubbles:!0,detail:{fromSmartComponents:!0}})),t.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:{fromSmartComponents:!0}}))},e.prototype.updateElementValue=function(t,e){var i=t.classList.contains("e-control");if(t instanceof HTMLInputElement&&("radio"===t.type||"checkbox"===t.type)){var n=null==e?void 0:e.toString().toLowerCase(),s="true"===n||"yes"===n||"on"===n;t.checked!==s&&(this.triggerBeforeChange(t),i?t.ej2_instances[0].checked=s:t.checked=s,this.triggerAfterChange(t))}else if(t instanceof HTMLSelectElement){var r=e.toString(),o=null,a=Array.from(t.querySelectorAll("option")),l=a.filter(function(t){return t.textContent===r});if(l.length>0)o=a.indexOf(l[0]);else{var h=a.filter(function(t){return t.textContent&&t.textContent.indexOf(r)>=0});1===h.length&&(o=a.indexOf(h[0]))}null!==o&&t.selectedIndex!==o&&(this.triggerBeforeChange(t),i?t.ej2_instances[0].index=o:t.selectedIndex=o,this.triggerAfterChange(t))}else this.triggerBeforeChange(t),t.classList.contains("e-rating")||t.classList.contains("e-colorpicker")?t.ej2_instances[0].value=e:t.value=e,this.triggerAfterChange(t);t.focus()},e.prototype.getFormFields=function(t){var e=this,i=[],n=0;return t.querySelectorAll("input, select, textarea").forEach(function(s){if((s instanceof HTMLInputElement||s instanceof HTMLSelectElement||s instanceof HTMLTextAreaElement)&&"hidden"!==s.type&&!e.isFieldIgnore(s)){var r="radio"===s.type,o=r?s.name:s.id||s.name||"unidentified_"+ ++n;if(!r||!i.find(function(t){return t.fieldName===o})){var a=null;if(r||(a=e.getElementDescription(t,s))){var l={fieldName:s.name,description:a,element:s,type:"checkbox"===s.type?"boolean":"number"===s.type?"number":"string"};if(s instanceof HTMLSelectElement){var h=Array.from(s.querySelectorAll("option")).filter(function(t){return t.value});l.allowedValues=h.map(function(t){return t.textContent}),l.type="fixed-choices"}else r&&(l.allowedValues=[],l.type="fixed-choices",Array.from(t.querySelectorAll("input[type=radio]")).forEach(function(i){if(i.name===o){var n=e.getElementDescription(t,i);n&&l.allowedValues.push(n)}}));i.push(l)}}}}),i},e.prototype.isFieldIgnore=function(t){return t.hasAttribute("data-smartpaste-ignore")||t.hasAttribute("aria-disabled")&&"true"===t.getAttribute("aria-disabled")||t.hasAttribute("disabled")||t.hasAttribute("readonly")||t.hasAttribute("aria-readonly")&&"true"===t.getAttribute("aria-readonly")||t.hasAttribute("aria-hidden")&&"true"===t.getAttribute("aria-hidden")},e.prototype.getElementDescription=function(t,e){if(e.hasAttribute("data-smartpaste-description"))return e.getAttribute("data-smartpaste-description");if((e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)&&e.placeholder)return e.placeholder;var i=t.querySelector('label[for="'+e.id+'"]');return i?i.textContent.trim():e.name||e.id},e.prototype.getClipboardContent=function(){return yl(this,void 0,void 0,function(){var t,e;return vl(this,function(i){switch(i.label){case 0:return t=navigator,(e=document.getElementById("custom-clipboard"))&&e.value?[2,e.value]:[3,1];case 1:if("undefined"==typeof window||!t.clipboard||!t.clipboard.readText)return[3,6];i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.clipboard.readText()];case 3:return[2,i.sent()];case 4:return i.sent(),[2,"Clipboard access failed"];case 5:return[3,7];case 6:return[2,"Clipboard API not supported"];case 7:return[2]}})})},fl([jt()],e.prototype,"aiAssistHandler",void 0),e}(mo),Cl=["north-west","north","north-east","west","east","south-west","south","south-east"],Il="e-resize-handle",Ml="e-focused-handle",Sl=["e-restrict-left"],xl="e-resize-viewport",wl=["north","west","east","south"],Dl=0,El=0,Tl=0,Al=0,Nl=0,Ll=0,Ol=null,kl=null,zl=null,Pl=!0,jl=0,Bl=!0;function Hl(t){Yl();var e=$("span",{attrs:{unselectable:"on",contenteditable:"false"}});e.setAttribute("class","e-dialog-border-resize e-"+t),"south"===t&&(e.style.height="2px",e.style.width="100%",e.style.bottom="0px",e.style.left="0px"),"north"===t&&(e.style.height="2px",e.style.width="100%",e.style.top="0px",e.style.left="0px"),"east"===t&&(e.style.height="100%",e.style.width="2px",e.style.right="0px",e.style.top="0px"),"west"===t&&(e.style.height="100%",e.style.width="2px",e.style.left="0px",e.style.top="0px"),nl.appendChild(e)}function Rl(t){var e;return y(t)||(e="string"==typeof t?document.querySelector(t):t),e}function Vl(t){for(var e=t||this,i=nl.querySelectorAll("."+Il),n=0;n<i.length;n++){sl=i[n],K.add(sl,"mousedown",Fl,e);var s="msie"===G.info.name?"pointerdown":"touchstart";K.add(sl,s,_l,e)}var r=nl.querySelectorAll(".e-dialog-border-resize");if(!y(r))for(n=0;n<r.length;n++){sl=r[n],K.add(sl,"mousedown",Fl,e);s="msie"===G.info.name?"pointerdown":"touchstart";K.add(sl,s,_l,e)}}function Ul(t){return t.indexOf("mouse")>-1?"mouse":"touch"}function Fl(t){if(t.preventDefault(),nl=t.target.parentElement,Yl(),Nl=t.pageX,Ll=t.pageY,t.target.classList.add(Ml),!y(Ol)){if(!0===Ol(t,this))return}this.targetEle&&nl&&nl.querySelector(".e-dlg-resizable")&&(hl="body"===this.target?null:this.targetEle,ll=this.targetEle.clientWidth,ol=this.targetEle.clientHeight);var e=y(hl)?document:hl;K.add(e,"mousemove",Ql,this),K.add(document,"mouseup",Wl,this);for(var i=0;i<Sl.length;i++)Pl=!nl.classList.contains(Sl[i])}function Wl(t){var e="msie"===G.info.name?"pointermove":"touchmove",i="msie"===G.info.name?"pointerup":"touchend",n=y(hl)?document:hl,s="msie"===G.info.name?"pointerdown":"touchstart";if(K.remove(n,"mousemove",Ql),K.remove(n,e,Ql),K.remove(n,s,Ql),y(document.body.querySelector("."+Ml))||document.body.querySelector("."+Ml).classList.remove(Ml),!y(zl)){zl(t,this)}K.remove(document,"mouseup",Wl),K.remove(document,i,Wl)}function Yl(){Dl=parseFloat(getComputedStyle(nl,null).getPropertyValue("width").replace("px","")),El=parseFloat(getComputedStyle(nl,null).getPropertyValue("height").replace("px","")),Tl=nl.getBoundingClientRect().left,Al=nl.getBoundingClientRect().top}function _l(t){nl=t.target.parentElement,Yl();var e=nl.classList.contains("e-dialog");(t.target.classList.contains(Il)||t.target.classList.contains("e-dialog-border-resize"))&&e&&t.target.classList.add(Ml);var i=t.touches?t.changedTouches[0]:t;if(Nl=i.pageX,Ll=i.pageY,!y(Ol)){if(!0===Ol(t,this))return}var n="msie"===G.info.name?"pointermove":"touchmove",s="msie"===G.info.name?"pointerup":"touchend",r=y(hl)?document:hl;K.add(r,n,Ql,this),K.add(document,s,Wl,this)}function Ql(t){if(t.target.classList.contains(Il)&&t.target.classList.contains(Ml)?sl=t.target:y(document.body.querySelector("."+Ml))||(sl=document.body.querySelector("."+Ml)),!y(sl)){for(var e="",i=0;i<Cl.length;i++)sl.classList.contains("e-"+Cl[i])&&(e=Cl[i]);if(!y(kl)){kl(t,this)}switch(e){case"south":ql(t);break;case"north":Xl(t);break;case"west":Gl(t);break;case"east":Kl(t);break;case"south-east":ql(t),Kl(t);break;case"south-west":ql(t),Gl(t);break;case"north-east":Xl(t),Kl(t);break;case"north-west":Xl(t),Gl(t)}}}function Zl(t){return t.getBoundingClientRect()}function ql(t){var e,i=document.documentElement.clientHeight,n=!1,s=(t.touches?t.changedTouches[0]:t).pageY,r=Zl(nl);y(hl)||(e=Zl(hl)),y(hl)?y(hl)&&(i-s>=0||r.top<0)&&(n=!0):n=!0;var o=El+(s-Ll);o=o>rl?o:rl;var a=0;y(hl)||(a=e.top);var l=y(hl)?0:hl.offsetHeight-hl.clientHeight,h=r.top-a-l/2;if(h=h<0?0:h,r.top>0&&h+o>ol){if(n=!1,nl.classList.contains(xl))return;nl.style.height=ol-parseInt(h.toString(),10)+"px"}else{var c=0;if(n){r.top<0&&i+(r.height+r.top)>0&&o+(c=r.top)<=30&&(o=r.height-(r.height+r.top)+30),o+r.top>=ol&&(nl.style.height=r.height+(i-(r.height+r.top))+"px");var d=y(hl)?c:h;o>=rl&&o+d<=ol&&(nl.style.height=o+"px")}}}function Xl(t){var e,i=!1,n="mouse"===Ul(t.type)?t.pageY:t.touches[0].pageY,s=Zl(nl),r=y(hl)?0:hl.offsetHeight-hl.clientHeight;y(hl)||(e=Zl(hl)),(!y(hl)&&s.top-e.top>0||y(hl)&&n>0||!y(hl)&&Math.floor(s.top-e.top+s.height+(e.bottom-s.bottom))-r<=ol)&&(i=!0);var o=El-(n-Ll);if(i&&o>=rl&&o<=ol){var a=0;y(hl)||(a=e.top);var l=Al-a+(n-Ll);l=l>0?l:1,nl.style.height=o+"px",nl.style.top=l+"px"}}function Gl(t){var e,i=document.documentElement.clientWidth,n=!1;y(hl)||(e=Zl(hl));var s="mouse"===Ul(t.type)?t.pageX:t.touches[0].pageX,r=Zl(nl),o=y(hl)?0:hl.offsetWidth-hl.clientWidth,a=y(hl)?0:e.left,l=y(hl)?0:e.width;y(cl)&&(y(hl)?cl=i:(cl=r.left-a-o/2+r.width,cl+=l-o-cl)),(!y(hl)&&Math.floor(r.left-e.left+r.width+(e.right-r.right))-o<=ll||y(hl)&&s>=0)&&(n=!0);var h=Dl-(s-Nl);if(Pl&&(h=h>cl?cl:h),n&&h>=al&&h<=ll){var c=0;y(hl)||(c=e.left);var d=Tl-c+(s-Nl);d=d>0?d:1,h!==jl&&Bl&&(nl.style.width=h+"px"),Pl&&(nl.style.left=d+"px",Bl=1!==d)}jl=h}function Kl(t){var e,i=document.documentElement.clientWidth,n=!1;y(hl)||(e=Zl(hl));var s=(t.touches?t.changedTouches[0]:t).pageX,r=Zl(nl);(!y(hl)&&(r.left-e.left+r.width<=ll||r.right-e.left>=r.width)||y(hl)&&i-s>0)&&(n=!0);var o=Dl+(s-Nl),a=0;if(y(hl)||(a=e.left),r.left-a+o>ll){if(n=!1,nl.classList.contains(xl))return;nl.style.width=ll-(r.left-a)+"px"}n&&o>=al&&o<=ll&&(nl.style.width=o+"px")}function Jl(){for(var t=nl.querySelectorAll("."+Il),e=0;e<t.length;e++)at(t[e]);var i=nl.querySelectorAll(".e-dialog-border-resize");if(!y(i))for(e=0;e<i.length;e++)at(i[e])}var $l,th=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eh=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ih=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return th(e,t),eh([jt(!0)],e.prototype,"isFlat",void 0),eh([jt()],e.prototype,"buttonModel",void 0),eh([jt("Button")],e.prototype,"type",void 0),eh([Ut()],e.prototype,"click",void 0),e}(re),nh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return th(e,t),eh([jt("Fade")],e.prototype,"effect",void 0),eh([jt(400)],e.prototype,"duration",void 0),eh([jt(0)],e.prototype,"delay",void 0),e}(re),sh="e-dialog",rh="e-rtl",oh="e-dlg-header-content",ah="e-dlg-header",lh="e-footer-content",hh="e-dlg-modal",ch="e-icon-dlg-close",dh="e-dlg-target",ph="e-scroll-disabled",uh="e-device",gh="e-dlg-fullscreen",mh="e-dlg-closeicon-btn",fh="e-popup-open",yh="Information",vh="e-scroll-disabled",bh="e-alert-dialog",Ch="e-confirm-dialog",Ih="e-dlg-resizable",Mh="e-restrict-left",Sh="e-resize-viewport",xh="user action",wh=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.needsID=!0,n}return th(e,t),e.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=S(this.minHeight)),this.enableResize&&(this.setResize(),this.isModal&&(this.isModelResize=!0),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},e.prototype.initializeValue=function(){this.dlgClosedBy=xh},e.prototype.preRender=function(){var t=this;this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(e){t.dlgClosedBy="close icon",t.hide(e)},this.dlgOverlayClickEventHandler=function(e){t.dlgClosedBy="overlayClick",e.preventFocus=!1,t.trigger("overlayClick",e,function(e){e.preventFocus||t.focusContent(),t.dlgClosedBy=xh})};if(this.l10n=new ri("dialog",{close:"Close"},this.locale),this.checkPositionData(),y(this.target)){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=e}},e.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},e.prototype.isNumberValue=function(t){return/^[-+]?\d*\.?\d+$/.test(t)},e.prototype.checkPositionData=function(){if(!y(this.position)){if(!y(this.position.X)&&"number"!=typeof this.position.X)if(this.isNumberValue(this.position.X)){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=t}if(!y(this.position.Y)&&"number"!=typeof this.position.Y)if(this.isNumberValue(this.position.Y)){t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=t}}},e.prototype.getEle=function(t,e){for(var i=void 0,n=0;n<t.length;n++)if(t[n].classList.contains(e)){i=t[n];break}return i},e.prototype.getMinHeight=function(){var t="0px",e="0px";y(this.element.querySelector("."+oh))||(t=getComputedStyle(this.headerContent).height);var i=this.getEle(this.element.children,lh);y(i)||(e=getComputedStyle(i).height);var n,s=parseInt(t.slice(0,t.indexOf("p")),10),r=parseInt(e.slice(0,e.indexOf("p")),10);return n=s+30+(isNaN(r)?0:r),rl=n,s+30+r},e.prototype.onResizeStart=function(t,e){if(e.trigger("resizeStart",t),!t.cancel&&this.isModelResize&&!y(this.dlgContainer)&&this.dlgContainer.classList.contains("e-dlg-"+this.position.X+"-"+this.position.Y)){this.setPopupPosition(),this.dlgContainer.classList.remove("e-dlg-"+this.position.X+"-"+this.position.Y);var i=this.getTargetContainer(this.target);if(i instanceof Element)"rtl"===window.getComputedStyle(i).getPropertyValue("direction")?this.element.style.position="absolute":this.element.style.position="relative";else this.element.style.position="relative";this.element.classList.contains(Mh)&&this.element.classList.remove(Mh),this.isModelResize=!1}return t.cancel},e.prototype.onResizing=function(t,e){e.trigger("resizing",t)},e.prototype.onResizeComplete=function(t,e){e.trigger("resizeStop",t),this.updatePersistData()},e.prototype.setResize=function(){if(this.enableResize){this.element.classList.add(Ih);for(var t=getComputedStyle(this.element).minHeight,e=getComputedStyle(this.element).minWidth,i="",n=0;n<this.resizeHandles.length;n++){if("All"===this.resizeHandles[n]){i="south north east west north-east north-west south-east south-west";break}var s="";switch(this.resizeHandles[n].toString()){case"SouthEast":s="south-east";break;case"SouthWest":s="south-west";break;case"NorthEast":s="north-east";break;case"NorthWest":s="north-west";break;default:s=this.resizeHandles[n].toString()}i+=s.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===i.trim()?i="south-west":this.enableRtl&&"south-west"===i.trim()&&(i="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Mh):this.isModal&&this.target===document.body&&this.element.classList.add(Sh),function(t){Ol=t.resizeBegin,kl=t.resizing,zl=t.resizeComplete,nl=Rl(t.element),hl=Rl(t.boundary);for(var e=t.direction.split(" "),i=0;i<e.length;i++)if(wl.indexOf(e[i])>=0&&e[i])Hl(e[i]);else if(""!==e[i].trim()){var n=$("div",{className:"e-icons "+Il+" e-"+e[i]});nl.appendChild(n)}rl=t.minHeight,al=t.minWidth,ll=t.maxWidth,ol=t.maxHeight,t.proxy&&t.proxy.element&&t.proxy.element.classList.contains("e-dialog")?Vl(t.proxy):Vl()}({element:this.element,direction:i,minHeight:parseInt(t.slice(0,e.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(e.slice(0,e.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else Jl(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove(Mh):this.element.classList.remove(Sh),this.element.classList.remove(Ih)},e.prototype.getFocusElement=function(t){var e=t.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:e[e.length-1]}},e.prototype.keyDown=function(t){var e=this;if(9===t.keyCode&&this.isModal){var i=void 0;y(this.btnObj)||(i=this.btnObj[this.btnObj.length-1]),y(this.btnObj)&&!y(this.ftrTemplateContent)&&(i=this.getFocusElement(this.ftrTemplateContent)),y(this.btnObj)&&y(this.ftrTemplateContent)&&!y(this.contentEle)&&(i=this.getFocusElement(this.contentEle)),y(i)||document.activeElement!==i.element||t.shiftKey||(t.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&t.shiftKey&&(t.preventDefault(),y(i)||i.element.focus())}var n,s=document.activeElement,r=["input","textarea"].indexOf(s.tagName.toLowerCase())>-1,o=!1;if(r||(o=s.hasAttribute("contenteditable")&&"true"===s.getAttribute("contenteditable")),27===t.keyCode&&this.closeOnEscape){this.dlgClosedBy="escape";var a=document.querySelector(".e-popup-open:not(.e-dialog)");(y(a)||a.classList.contains("e-toolbar-pop")||a.classList.contains("e-slider-tooltip"))&&this.hide(t)}(13===t.keyCode&&!t.ctrlKey&&"textarea"!==s.tagName.toLowerCase()&&r&&!y(this.primaryButtonEle)||13===t.keyCode&&t.ctrlKey&&("textarea"===s.tagName.toLowerCase()||o)&&!y(this.primaryButtonEle))&&(this.buttons.some(function(t,e){n=e;var i=t.buttonModel;return!y(i)&&!0===i.isPrimary})&&"function"==typeof this.buttons[n].click&&!this.primaryButtonEle.disabled&&setTimeout(function(){e.buttons[n].click.call(e,t)}))},e.prototype.initialize=function(){y(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||tt([this.element],sh),G.isDevice&&tt([this.element],uh),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},e.prototype.initRender=function(){var t=this;if(this.initialRender=!0,this.isBlazorServerRender()||ht(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.setTargetContent(),""===this.header||y(this.header)||this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||y(this.footerTemplate)?y(this.buttons[0])||y(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate(),this.allowDragging&&!y(this.headerContent)&&this.setAllowDragging(),ht(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal(),!0!==this.element.classList.contains(bh)&&!0!==this.element.classList.contains(Ch)&&!y(this.element.parentElement)){var e=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),e.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}if(y(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new Jr(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(e){var i={container:t.isModal?t.dlgContainer:t.element,element:t.element,target:t.target,preventFocus:!1};t.enableResize&&t.resetResizeIcon(),t.trigger("open",i,function(e){e.preventFocus||t.focusContent()})},close:function(e){t.isModal&&tt([t.dlgOverlay],"e-fade"),t.unBindEvent(t.element),t.isModal&&(t.dlgContainer.style.display="none"),t.trigger("close",t.closeArgs);var i=document.activeElement;y(i)||y(i.blur)||i.blur(),y(t.storeActiveElement)||y(t.storeActiveElement.focus)||t.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(tt([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible){if(this.show(),this.isModal){var i=this.getTargetContainer(this.target);if(i instanceof Element)"rtl"===window.getComputedStyle(i).getPropertyValue("direction")&&this.setPopupPosition()}}else this.isModal&&(this.dlgOverlay.style.display="none");this.initialRender=!1},e.prototype.getTargetContainer=function(t){var e=null;if("string"==typeof t)if(t.startsWith("#"))e=document.getElementById(t.substring(1));else if(t.startsWith(".")){var i=document.getElementsByClassName(t.substring(1));e=i.length>0?i[0]:null}else t instanceof HTMLElement||t===document.body||(e=document.querySelector(t));else t instanceof HTMLElement&&(e=t);return e},e.prototype.resetResizeIcon=function(){var t=this.getMinHeight();if(this.targetEle.offsetHeight<t){var e=this.enableRtl?"e-south-west":"e-south-east",i=this.element.querySelector("."+e);y(i)||(i.style.bottom="-"+t.toString()+"px")}},e.prototype.setOverlayZindex=function(t){var e;e=y(t)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:t,this.dlgOverlay.style.zIndex=(e-1).toString(),this.dlgContainer.style.zIndex=e.toString()},e.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},e.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},e.prototype.setAllowDragging=function(){var t=this,e="."+oh;this.element.classList.contains("e-draggable")||(this.dragObj=new Ke(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:e,dragStart:function(e){t.trigger("dragStart",e,function(t){x()&&t.bindEvents(e.dragElement)})},dragStop:function(e){if(t.isModal){t.IsDragStop=!0,y(t.position)||t.dlgContainer.classList.remove("e-dlg-"+t.position.X+"-"+t.position.Y);var i=t.getTargetContainer(t.target);if(i instanceof Element)"rtl"===window.getComputedStyle(i).getPropertyValue("direction")?t.element.style.position="absolute":t.element.style.position="relative";else t.element.style.position="relative"}t.trigger("dragStop",e),t.isModelResize=!1,t.element.classList.remove(Mh),t.updatePersistData()},drag:function(e){t.trigger("drag",e)}}),y(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},e.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var t=0;t<this.buttons.length;t++)if(!y(this.buttons[t].buttonModel)){var e=y(this.buttons[t].type)?"button":this.buttons[t].type.toLowerCase(),i=this.createElement("button",{className:this.cssClass,attrs:{type:e,tabindex:"0"}});this.buttonContent.push(i.outerHTML)}this.setFooterTemplate()}t=0;for(var n,s=this.element.children;t<s.length;t++)s[t].classList.contains(lh)&&(n=s[t].querySelectorAll("button"));for(t=0;t<this.buttons.length;t++)y(this.buttons[t].buttonModel)||(this.isBlazorServerRender()||(this.btnObj[t]=new mo(this.buttons[t].buttonModel)),!y(this.ftrTemplateContent)&&n.length>0&&("function"==typeof this.buttons[t].click&&K.add(n[t],"click",this.buttons[t].click,this),"object"==typeof this.buttons[t].click&&K.add(n[t],"click",this.buttonClickHandler.bind(this,t),this)),this.isBlazorServerRender()||y(this.ftrTemplateContent)||(this.btnObj[t].appendTo(this.ftrTemplateContent.children[t]),this.buttons[t].isFlat&&this.btnObj[t].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]))},e.prototype.buttonClickHandler=function(t){this.trigger("buttons["+t+"].click",{})},e.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.headerEle?ht(this.element,{"aria-describedby":this.element.id+"_title "+this.element.id+"_dialog-content"}):ht(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(y(this.content)||""===this.content)&&this.initialRender||(("string"!=typeof this.content||x())&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),y(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(this.isBlazorServerRender()||!G.isIE||""!==this.element.style.width||y(this.width)||(this.element.style.width=S(this.width)),this.setMaxHeight())},e.prototype.setTemplate=function(t,e,i){var n,s,r;s=e.classList.contains(ah)?this.element.id+"header":e.classList.contains(lh)?this.element.id+"footerTemplate":this.element.id+"content",y(t.outerHTML)?("string"==typeof t||"string"!=typeof t||x()&&!this.isStringTemplate)&&("string"==typeof t&&(t=this.sanitizeHelper(t)),this.isVue||"string"!=typeof t?(n=Hi(t),r=t):e.innerHTML=t):e.appendChild(t);var o=[];if(!y(n)){for(var a=0,l=n({},this,i,s,!(x()&&!this.isStringTemplate&&0===r.indexOf("<div>Blazor"))||this.isStringTemplate);a<l.length;a++){var h=l[a];o.push(h)}rt([].slice.call(o),e)}},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var e=Yi.beforeSanitize();f(e,e,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",e),e.cancel&&!y(e.helper)?t=e.helper(t):e.cancel||(t=Yi.serializeValue(e,t))}return t},e.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var t=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!y(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=t,G.isIE&&"auto"===this.height&&!y(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},e.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?tt([this.element],rh):et([this.element],rh)),y(this.element.querySelector(".e-resize-handle"))||(Jl(),this.setResize())},e.prototype.setTargetContent=function(){var t=this;if(y(this.content)||""===this.content){var e=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(e){8!==e.nodeType&&t.innerContentElement.appendChild(e)}))}},e.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:ah}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),ht(this.element,{"aria-describedby":this.element.id+"_title"}),ht(this.element,{"aria-labelledby":this.element.id+"_dialog-header"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!y(this.headerContent)&&this.setAllowDragging()},e.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:lh}),""===this.footerTemplate||y(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},e.prototype.createHeaderContent=function(){y(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:oh}))},e.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:mh,attrs:{type:"button"}}),this.closeIconBtnObj=new mo({cssClass:"e-flat",iconCss:ch+" e-icons"}),this.closeIconTitle(),y(this.headerContent)?(this.createHeaderContent(),st([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):st([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},e.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",t),this.closeIcon.setAttribute("aria-label",t)},e.prototype.setCSSClass=function(t){t&&(et([this.element],t.split(" ")),this.isModal&&!y(this.dlgContainer)&&et([this.dlgContainer],t.split(" "))),this.cssClass&&(tt([this.element],this.cssClass.split(" ")),this.isModal&&!y(this.dlgContainer)&&tt([this.dlgContainer],this.cssClass.split(" ")))},e.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove(fh),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),tt([this.element],hh),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},e.prototype.getValidFocusNode=function(t){for(var e,i=0;i<t.length;i++){if(((e=t[i]).clientHeight>0||"a"===e.tagName.toLowerCase()&&e.hasAttribute("href"))&&e.tabIndex>-1&&!e.disabled&&!this.disableElement(e,'[disabled],[aria-disabled="true"],[type="hidden"]'))return e;e=null}return e},e.prototype.focusableElements=function(t){if(!y(t)){var e=t.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(e)}return null},e.prototype.getAutoFocusNode=function(t){var e=t.querySelector("."+mh),i=t.querySelectorAll("[autofocus]"),n=this.getValidFocusNode(i);if(x()&&(this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0]),y(n)){if(!y(n=this.focusableElements(this.contentEle)))return n;if(!y(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else e=n;return e},e.prototype.disableElement=function(t,e){var i=t?t.matches||t.webkitMatchesSelector||t.msGetRegionContent:null;if(i)for(;t;t=t.parentNode)if(t instanceof Element&&i.call(t,e))return t;return null},e.prototype.focusContent=function(){var t=this.getAutoFocusNode(this.element),e=y(t)?this.element:t,i=G.userAgent;(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0)&&this.element.focus(),e.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},e.prototype.bindEvent=function(t){K.add(t,"keydown",this.keyDown,this)},e.prototype.unBindEvent=function(t){K.remove(t,"keydown",this.keyDown)},e.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},e.prototype.isBlazorServerRender=function(){return x()&&this.isServerRendered},e.prototype.getModuleName=function(){return"dialog"},e.prototype.onPropertyChanged=function(t,e){if(this.element.classList.contains(sh))for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"content":y(this.content)||""===this.content?y(this.contentEle)||(at(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),y(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),at(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||y(this.header)?this.headerEle&&(at(this.headerEle),this.headerEle=null):this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||y(this.footerTemplate)){if(!this.ftrTemplateContent)return;at(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(ch).length>0?this.showCloseIcon||""!==this.header&&!y(this.header)?this.showCloseIcon||at(this.closeIcon):(at(this.headerContent),this.headerContent=null):(this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":gt(this.element,{height:S(t.height)}),this.updatePersistData();break;case"width":gt(this.element,{width:S(t.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(e.cssClass);break;case"buttons":this.unWireButtonEvents(),this.destroyButtons(),y(this.ftrTemplateContent)||(at(this.ftrTemplateContent),this.ftrTemplateContent=null),this.footerTemplate="",this.setButton();break;case"allowDragging":this.allowDragging&&!y(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(t.target);break;case"position":if(this.checkPositionData(),this.isModal){var s=this.position.X,r=this.position.Y;y(e.position)||(y(e.position.X)||(s=e.position.X),y(e.position.Y)||(r=e.position.Y)),this.dlgContainer.classList.contains("e-dlg-"+s+"-"+r)&&this.dlgContainer.classList.remove("e-dlg-"+s+"-"+r)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize(),this.isModelResize=this.enableResize&&this.isModal,this.enableResize&&this.dialogOpen&&this.resetResizeIcon();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=S(this.minHeight))}}},e.prototype.setTarget=function(t){this.popupObj.relateTo=t,this.target=t,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize(),y(this.targetEle)||(this.isModal&&!y(this.dlgContainer)?this.targetEle.appendChild(this.dlgContainer):y(this.element)||this.targetEle.appendChild(this.element))},e.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)y(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",y(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(et([this.element],hh),et([document.body],[dh,ph]),at(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&K.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.setzIndex=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0;var n=to(t);this.zIndex=n>this.zIndex?n:this.zIndex,this.isProtectedOnChange=i,e&&(this.popupObj.zIndex=this.zIndex)},e.prototype.windowResizeHandler=function(){!function(t){ll=t}(this.targetEle.clientWidth),function(t){ol=t}(this.targetEle.clientHeight),this.setMaxHeight()},e.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},e.prototype.removeAllChildren=function(t){for(;t.children[0];)this.removeAllChildren(t.children[0]),t.removeChild(t.children[0])},e.prototype.destroy=function(){if(!this.isDestroyed){var e=[rh,hh,Ih,Mh,gh,uh],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];et([this.targetEle],[dh,ph]),!y(this.element)&&this.element.classList.contains(gh)&&et([document.body],[dh,ph]),this.isModal&&et([y(this.targetEle)?document.body:this.targetEle],ph),this.unWireEvents(),this.unWireButtonEvents(),this.destroyButtons(),y(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),y(this.dragObj)||this.dragObj.destroy(),!y(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),et([this.element],e),y(this.cssClass)||""===this.cssClass||et([this.element],this.cssClass.split(" ")),y(this.refElement)||y(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),at(this.refElement),this.refElement=void 0),this.isModal&&(at(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),at(this.dlgContainer)),this.element.innerHTML=this.clonedEle.innerHTML;for(var n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.ftrTemplateContent=null,this.headerContent=null,this.isReact||this.isVue||y(this.contentEle)||this.removeAllChildren(this.contentEle),this.contentEle=null,nl=null,sl=null,hl=null,cl=null,Ol=null,kl=null,zl=null,t.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},e.prototype.wireWindowResizeEvent=function(){this.boundWindowResizeHandler=this.windowResizeHandler.bind(this),window.addEventListener("resize",this.boundWindowResizeHandler)},e.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.boundWindowResizeHandler),this.boundWindowResizeHandler=null},e.prototype.wireEvents=function(){this.showCloseIcon&&K.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&K.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},e.prototype.unWireEvents=function(){this.showCloseIcon&&K.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&K.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler)},e.prototype.refreshPosition=function(){this.popupObj.refreshPosition(),this.element.classList.contains(hh)&&this.positionChange()},e.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},e.prototype.show=function(t){var e=this;if(this.element.classList.contains(sh)){if(!this.element.classList.contains(fh)||!y(t)){y(t)||this.fullScreen(t);var i=x()?{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,maxHeight:this.element.style.maxHeight}:{cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",i,function(t){if(!t.cancel){if(e.element.style.maxHeight!==i.maxHeight&&(e.allowMaxHeight=!1,e.element.style.maxHeight=i.maxHeight),e.enableResize&&null==e.boundWindowResizeHandler&&!e.initialRender&&e.wireWindowResizeEvent(),e.storeActiveElement=document.activeElement,e.element.tabIndex=-1,e.isModal&&!y(e.dlgOverlay))if(e.dlgOverlay.style.display="block",e.dlgContainer.style.display="flex",et([e.dlgOverlay],"e-fade"),y(e.targetEle))tt([document.body],[dh,ph]);else{if(e.targetEle===document.body?e.dlgContainer.style.position="fixed":e.dlgContainer.style.position="absolute",e.dlgOverlay.style.position="absolute",(n=e.getTargetContainer(e.target))instanceof Element)"rtl"===window.getComputedStyle(n).getPropertyValue("direction")?e.element.style.position="absolute":e.element.style.position="relative";else e.element.style.position="relative";tt([e.targetEle],[dh,ph])}var n,s={name:"None"===e.animationSettings.effect&&"Enable"===te?"ZoomIn":e.animationSettings.effect+"In",duration:e.animationSettings.duration,delay:e.animationSettings.delay},r=e.isModal?e.element.parentElement:e.element;if(e.calculatezIndex&&(e.setzIndex(r,!0),gt(e.element,{zIndex:e.zIndex}),e.isModal&&e.setOverlayZindex(e.zIndex)),"None"===e.animationSettings.effect&&"Enable"===te?e.popupObj.show(s):"None"===e.animationSettings.effect?e.popupObj.show():e.popupObj.show(s),e.isModal)if((n=e.getTargetContainer(e.target))instanceof Element)"rtl"!==window.getComputedStyle(n).getPropertyValue("direction")||e.IsDragStop||e.setPopupPosition();e.dialogOpen=!0;var o=e.isProtectedOnChange;e.isProtectedOnChange=!0,e.visible=!0,e.preventVisibility=!0,e.isProtectedOnChange=o}})}this.isReact&&this.renderReactTemplates()}},e.prototype.hide=function(t){var e=this;if(this.element.classList.contains(sh)&&this.preventVisibility){var i=x()?{cancel:!1,isInteracted:!!t,element:this.element,container:this.isModal?this.dlgContainer:this.element,event:t}:{cancel:!1,isInteracted:!!t,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:t,closedBy:this.dlgClosedBy};this.closeArgs=i,this.trigger("beforeClose",i,function(t){if(!t.cancel){e.enableResize&&e.unWireWindowResizeEvent();var i={name:"None"===e.animationSettings.effect&&"Enable"===te?"ZoomOut":e.animationSettings.effect+"Out",duration:e.animationSettings.duration,delay:e.animationSettings.delay};"None"===e.animationSettings.effect&&"Enable"===te?e.popupObj.hide(i):"None"===e.animationSettings.effect?e.popupObj.hide():e.popupObj.hide(i),setTimeout(function(){e.isModal&&!y(e.targetEle)&&e.targetEle.classList.contains(dh)&&e.targetEle.classList.contains(ph)&&et([e.targetEle],[dh,ph]),document.body.classList.contains(dh)&&document.body.classList.contains(ph)&&et([document.body],[dh,ph])},e.animationSettings.duration+e.animationSettings.delay),e.dialogOpen=!1;var n=e.isProtectedOnChange;e.isProtectedOnChange=!0,e.visible=!1,e.preventVisibility=!1,e.isProtectedOnChange=n}e.dlgClosedBy=xh})}},e.prototype.fullScreen=function(t){this.element.offsetTop,this.element.offsetLeft;if(t){this.isModal||(this.element.style.top=document.scrollingElement.scrollTop+"px"),tt([this.element],gh);var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=y(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,tt([document.body],[dh,ph]),this.allowDragging&&!y(this.dragObj)&&this.dragObj.destroy()}else et([this.element],gh),et([document.body],[dh,ph]),this.allowDragging&&!y(this.headerContent)&&this.setAllowDragging();return t},e.prototype.getButtons=function(t){return y(t)?this.btnObj:this.btnObj[t]},e.prototype.unWireButtonEvents=function(){if(this.buttons.length>0&&""===this.footerTemplate&&this.ftrTemplateContent)for(var t=0;t<this.buttons.length;t++)this.buttons[t].click&&"function"==typeof this.buttons[t].click&&this.ftrTemplateContent.children[t]&&K.remove(this.ftrTemplateContent.children[t],"click",this.buttons[t].click)},e.prototype.destroyButtons=function(){if(!y(this.btnObj))for(var t=0;t<this.btnObj.length;t++)this.btnObj[t]&&!this.btnObj[t].isDestroyed&&this.btnObj[t].destroy()},eh([jt("")],e.prototype,"content",void 0),eh([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),eh([jt(!1)],e.prototype,"enablePersistence",void 0),eh([jt(!1)],e.prototype,"showCloseIcon",void 0),eh([jt(!1)],e.prototype,"isModal",void 0),eh([jt("")],e.prototype,"header",void 0),eh([jt(!0)],e.prototype,"visible",void 0),eh([jt(!1)],e.prototype,"enableResize",void 0),eh([jt(["South-East"])],e.prototype,"resizeHandles",void 0),eh([jt("auto")],e.prototype,"height",void 0),eh([jt("")],e.prototype,"minHeight",void 0),eh([jt("100%")],e.prototype,"width",void 0),eh([jt("")],e.prototype,"cssClass",void 0),eh([jt(1e3)],e.prototype,"zIndex",void 0),eh([jt(null)],e.prototype,"target",void 0),eh([jt("")],e.prototype,"footerTemplate",void 0),eh([jt(!1)],e.prototype,"allowDragging",void 0),eh([Rt([{}],ih)],e.prototype,"buttons",void 0),eh([jt(!0)],e.prototype,"closeOnEscape",void 0),eh([Bt({},nh)],e.prototype,"animationSettings",void 0),eh([Bt({X:"center",Y:"center"},Zr)],e.prototype,"position",void 0),eh([Ut()],e.prototype,"created",void 0),eh([Ut()],e.prototype,"open",void 0),eh([Ut()],e.prototype,"beforeSanitizeHtml",void 0),eh([Ut()],e.prototype,"beforeOpen",void 0),eh([Ut()],e.prototype,"close",void 0),eh([Ut()],e.prototype,"beforeClose",void 0),eh([Ut()],e.prototype,"dragStart",void 0),eh([Ut()],e.prototype,"dragStop",void 0),eh([Ut()],e.prototype,"drag",void 0),eh([Ut()],e.prototype,"overlayClick",void 0),eh([Ut()],e.prototype,"resizeStart",void 0),eh([Ut()],e.prototype,"resizing",void 0),eh([Ut()],e.prototype,"resizeStop",void 0),eh([Ut()],e.prototype,"destroyed",void 0),e=eh([Ft],e)}(_e);!function(t){function e(t,e){var i=new wh(t);return i.appendTo(e),i}function i(t,e){return t.header=y(e.title)?null:e.title,t.content=y(e.content)?"":e.content,t.isModal=!!y(e.isModal)||e.isModal,t.showCloseIcon=!y(e.showCloseIcon)&&e.showCloseIcon,t.allowDragging=!y(e.isDraggable)&&e.isDraggable,t.closeOnEscape=!y(e.closeOnEscape)&&e.closeOnEscape,t.position=y(e.position)?{X:"center",Y:"top"}:e.position,t.animationSettings=y(e.animationSettings)?{effect:"Fade",duration:400,delay:0}:e.animationSettings,t.cssClass=y(e.cssClass)?"":e.cssClass,t.zIndex=y(e.zIndex)?1e3:e.zIndex,t.open=y(e.open)?null:e.open,t.width=y(e.width)?"auto":e.width,t.height=y(e.height)?"auto":e.height,t}function n(t,e,i){var n=i;return y(e.text)||(n.buttonModel.content=e.text),y(e.icon)||(n.buttonModel.iconCss=e.icon),y(e.cssClass)||(n.buttonModel.cssClass=e.cssClass),y(e.click)||(n.click=e.click),y(e.isFlat)||(n.isFlat=e.isFlat),n}t.alert=function(t){var s,r,o=$("div",{className:bh});return document.body.appendChild(o),(s=e("string"==typeof t?{content:t,position:{X:"center",Y:"top"},isModal:!0,header:yh,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function(t,e){var i=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return y(e.okButton)?t.buttons=i:t.buttons[0]=n(t.buttons[0],e.okButton,i[0]),t}(i({buttons:[]},r=t),r),o)).close=function(){t&&t.close&&t.close.apply(s),s.destroy(),s.element.classList.contains("e-dlg-modal")?(s.element.parentElement.remove(),s.target.classList.remove(vh)):s.element.remove()},s},t.confirm=function(t){var s,r,o=$("div",{className:Ch});return document.body.appendChild(o),(s=e("string"==typeof t?{position:{X:"center",Y:"top"},content:t,isModal:!0,header:yh,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function(t,e){var i={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},s={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return y(e.okButton)?t.buttons[0]=i:t.buttons[0]=n(t.buttons[0],e.okButton,i),y(e.cancelButton)?t.buttons[1]=s:t.buttons[1]=n(t.buttons[1],e.cancelButton,s),t}(i({buttons:[]},r=t),r),o)).close=function(){t&&t.close&&t.close.apply(s),s.destroy(),s.element.classList.contains("e-dlg-modal")?(s.element.parentElement.remove(),s.target.classList.remove(vh)):s.element.remove()},s}}($l||($l={}));var Dh=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Eh=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Th="e-tooltip",Ah="e-rtl",Nh="e-icons",Lh="e-tooltip-close",Oh="e-tooltip-wrap",kh="e-tip-content",zh="e-arrow-tip",Ph="e-arrow-tip-outer",jh="e-arrow-tip-inner",Bh="e-tip-bottom",Hh="e-tip-top",Rh="e-tip-left",Vh="e-tip-right",Uh="e-popup",Fh="e-popup-open",Wh="e-popup-close",Yh="e-lib",_h="e-tooltip-popup-container",Qh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dh(e,t),Eh([jt({effect:"FadeIn",duration:150,delay:0})],e.prototype,"open",void 0),Eh([jt({effect:"FadeOut",duration:150,delay:0})],e.prototype,"close",void 0),e}(re),Zh=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.mouseMoveEvent=null,n.mouseMoveTarget=null,n.containerElement=null,n.isBodyContainer=!0,n}return Dh(e,t),e.prototype.initialize=function(){this.formatPosition(),tt([this.element],Th)},e.prototype.formatPosition=function(){var t,e;this.position&&(0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(t=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=t[0],this.tooltipPositionX=t[1]):(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=e[0],this.tooltipPositionY=e[1]))},e.prototype.renderArrow=function(){this.setTipClass(this.position);var t=this.createElement("div",{className:zh+" "+this.tipClass});t.appendChild(this.createElement("div",{className:Ph+" "+this.tipClass})),t.appendChild(this.createElement("div",{className:jh+" "+this.tipClass})),this.tooltipEle.appendChild(t)},e.prototype.setTipClass=function(t){0===t.indexOf("Right")?this.tipClass=Rh:0===t.indexOf("Bottom")?this.tipClass=Hh:0===t.indexOf("Left")?this.tipClass=Vh:this.tipClass=Bh},e.prototype.renderPopup=function(t){var e=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(t);this.tooltipEle.classList.remove(Yh),this.popupObj=new Jr(this.tooltipEle,{height:this.height,width:this.width,position:{X:e.left,Y:e.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},e.prototype.getScalingFactor=function(t){if(!t)return{x:1,y:1};var e={x:1,y:1},i=t.closest('[style*="transform: scale"]');if(i&&i!==this.tooltipEle&&i.contains(this.tooltipEle)){var n=window.getComputedStyle(i).getPropertyValue("transform").match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);e.x=n[0],e.y=n[3]}return e},e.prototype.getTooltipPosition=function(t){this.tooltipEle.style.display="block";var e=this.element.closest('[style*="zoom"]');e&&(e.contains(this.tooltipEle)||(this.tooltipEle.style.zoom=getComputedStyle(e).zoom));var i=dr(t,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.getScalingFactor(t),s=this.calculateTooltipOffset(this.position,n.x,n.y),r=this.calculateElementPosition(i,s),o=r[0],a=r[1],l=this.collisionFlipFit(t,o,a);return l.left=l.left/n.x,l.top=l.top/n.y,this.tooltipEle.style.display="",l},e.prototype.windowResize=function(){this.reposition(this.findTarget())},e.prototype.reposition=function(t){if(this.popupObj&&t){var e=this.getTooltipPosition(t);this.popupObj.position={X:e.left,Y:e.top},this.popupObj.dataBind()}},e.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},e.prototype.closePopupHandler=function(){this.isReact&&"Click"!==this.opensOn&&"function"!=typeof this.content&&this.clearTemplate(["content"]),this.clear();var t={type:this.tooltipEventArgs.event?this.tooltipEventArgs.event.type:null,cancel:!1,target:this.tooltipEventArgs.target,event:this.tooltipEventArgs.event?this.tooltipEventArgs.event:null,element:this.tooltipEle,isInteracted:!y(this.tooltipEventArgs.event)};this.trigger("afterClose",t),t=null},e.prototype.calculateTooltipOffset=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1);var n,s,r,o,a,l,h,c,d={top:0,left:0};if(1!==e||1!==i){var p=this.tooltipEle.getBoundingClientRect(),u=void 0;r=Math.round(p.width),o=Math.round(p.height),(a=ct("."+zh,this.tooltipEle))&&(u=a.getBoundingClientRect()),n=a?Math.round(u.width):0,s=a?Math.round(u.height):0,l=this.showTipPointer?0:8,h=s/2+2+(o-this.tooltipEle.clientHeight*i),c=n/2+2+(r-this.tooltipEle.clientWidth*e)}else r=this.tooltipEle.offsetWidth,o=this.tooltipEle.offsetHeight,n=(a=ct("."+zh,this.tooltipEle))?a.offsetWidth:0,s=a?a.offsetHeight:0,l=this.showTipPointer?0:8,h=s/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),c=n/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(l+=2),t){case"RightTop":d.left+=n+l,d.top-=o-h;break;case"RightCenter":d.left+=n+l,d.top-=o/2;break;case"RightBottom":d.left+=n+l,d.top-=h;break;case"BottomRight":d.top+=s+l,d.left-=c;break;case"BottomCenter":d.top+=s+l,d.left-=r/2;break;case"BottomLeft":d.top+=s+l,d.left-=r-c;break;case"LeftBottom":d.left-=n+r+l,d.top-=h;break;case"LeftCenter":d.left-=n+r+l,d.top-=o/2;break;case"LeftTop":d.left-=n+r+l,d.top-=o-h;break;case"TopLeft":d.top-=o+s+l,d.left-=r-c;break;case"TopRight":d.top-=o+s+l,d.left-=c;break;default:d.top-=o+s+l,d.left-=r/2}return d.left+=this.offsetX,d.top+=this.offsetY,d},e.prototype.updateTipPosition=function(t){var e=dt("."+zh+",."+Ph+",."+jh,this.tooltipEle);et(e,[Bh,Hh,Rh,Vh]),this.setTipClass(t),tt(e,this.tipClass)},e.prototype.adjustArrow=function(t,e,i,n){var s=ct("."+zh,this.tooltipEle);if(!1!==this.showTipPointer&&null!==s){var r,o;this.updateTipPosition(e),this.tooltipEle.style.display="block";var a,l=this.tooltipEle.clientWidth,h=this.tooltipEle.clientHeight,c=ct("."+jh,this.tooltipEle),d=s.offsetWidth,p=s.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===Bh||this.tipClass===Hh){if(this.tipClass===Bh?(o="99.9%",c.style.top="-"+(p-2)+"px"):(o=-(p-1)+"px",c.style.top="-"+(p-6)+"px"),t)r=(a="Center"!==i||l>t.offsetWidth||this.mouseTrail)&&"Left"===i||!a&&"End"===this.tipPointerPosition?l-d-2+"px":a&&"Right"===i||!a&&"Start"===this.tipPointerPosition?"2px":!a||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?l/2-d/2+"px":"End"===this.tipPointerPosition?t.offsetWidth+(this.tooltipEle.offsetWidth-t.offsetWidth)/2-d/2-2+"px":(this.tooltipEle.offsetWidth-t.offsetWidth)/2-d/2+2+"px"}else this.tipClass===Vh?(r="99.9%",c.style.left="-"+(d-2)+"px"):(r=-(d-1)+"px",c.style.left=d-2-d+"px"),o=(a="Center"!==n||h>t.offsetHeight||this.mouseTrail)&&"Top"===n||!a&&"End"===this.tipPointerPosition?h-p-2+"px":a&&"Bottom"===n||!a&&"Start"===this.tipPointerPosition?"2px":h/2-p/2+"px";s.style.top=o,s.style.left=r}},e.prototype.renderContent=function(t){var e=this,i=ct("."+kh,this.tooltipEle);if(this.cssClass&&tt([this.tooltipEle],this.cssClass.split(" ")),t&&!y(t.getAttribute("title"))&&(t.setAttribute("data-content",t.getAttribute("title")),t.removeAttribute("title")),y(this.content))t&&!y(t.getAttribute("data-content"))&&(i.innerHTML=t.getAttribute("data-content"));else if(i.innerHTML="",this.content instanceof HTMLElement)i.appendChild(this.content);else if("string"==typeof this.content){if(this.isAngular?this.setProperties({content:Yi.sanitize(this.content)},!0):this.content=this.enableHtmlSanitizer?Yi.sanitize(this.content):this.content,this.enableHtmlParse)(n=Hi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i,this.root))&&rt(n,i);else i.textContent=this.content}else{var n;(n=Hi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))&&(this.isAngular&&setTimeout(function(){e.reposition(t)},1),rt(n,i)),this.renderReactTemplates()}},e.prototype.renderCloseIcon=function(){if(this.isSticky){var t=this.createElement("div",{className:Nh+" "+Lh,attrs:{role:"button","aria-label":"Press escape to close the Tooltip"}});this.tooltipEle.appendChild(t),K.add(t,G.touchStartEvent,this.onStickyClose,this)}else{var e=this.tooltipEle.querySelector("."+Nh+"."+Lh);e&&lt(e)}},e.prototype.addDescribedBy=function(t,e){var i=(t.getAttribute("aria-describedby")||"").split(/\s+/);i.indexOf(e)<0&&i.push(e),ht(t,{"aria-describedby":i.join(" ").trim(),"data-tooltip-id":e})},e.prototype.removeDescribedBy=function(t){var e=t.getAttribute("data-tooltip-id"),i=(t.getAttribute("aria-describedby")||"").split(/\s+/),n=i.indexOf(e);-1!==n&&i.splice(n,1),t.removeAttribute("data-tooltip-id");var s=i.join(" ").trim();s?t.setAttribute("aria-describedby",s):t.removeAttribute("aria-describedby")},e.prototype.tapHoldHandler=function(t){clearTimeout(this.autoCloseTimer),this.targetHover(t.originalEvent)},e.prototype.touchEndHandler=function(){var t=this;if(!this.isSticky){this.autoCloseTimer=setTimeout(function(){t.close()},1500)}},e.prototype.targetClick=function(t){var e;if(!y(e=this.target?ut(t.target,this.target):this.element)){var i=t;null===e.getAttribute("data-tooltip-id")?"mousedown"===i.type&&2===i.button||this.targetHover(t):this.isSticky||this.hideTooltip(this.animation.close,t,e)}},e.prototype.targetHover=function(t){var e;if(!(y(e=this.target?ut(t.target,this.target):this.element)||null!==e.getAttribute("data-tooltip-id")&&0===this.closeDelay)){!y(this.tooltipEle)&&this.tooltipEle.getAttribute("e-animation-id")&&(qt.stop(this.tooltipEle),this.clear());for(var i=0,n=[].slice.call(dt('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));i<n.length;i++){var s=n[i];this.restoreElement(s)}this.showTooltip(e,this.animation.open,t)}},e.prototype.mouseMoveBeforeOpen=function(t){this.mouseMoveEvent=t},e.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&K.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},e.prototype.showTooltip=function(t,e,i){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=t,K.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:t,event:i||null,element:this.tooltipEle,isInteracted:!y(i)};this.trigger("beforeRender",this.tooltipEventArgs,function(s){n.beforeRenderCallback(s,t,i,e)}.bind(this))},e.prototype.beforeRenderCallback=function(t,e,i,n){t.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,y(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?b(this.element.getAttribute("id")):b("tooltip"),this.tooltipEle=this.createElement("div",{className:Oh+" "+Uh+" "+Yh,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"}}),this.tooltipEle.style.width=S(this.width),this.tooltipEle.style.height=S(this.height),this.tooltipEle.style.position="absolute",this.tooltipBeforeRender(e,this),this.tooltipAfterRender(e,i,n,this)):e&&(this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),qt.stop(this.tooltipEle),this.reposition(e),this.tooltipAfterRender(e,i,n,this)))},e.prototype.appendContainer=function(t){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=ct(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||tt([this.containerElement],_h),this.containerElement.appendChild(t.tooltipEle)},e.prototype.tooltipBeforeRender=function(t,e){t&&(G.isDevice&&tt([e.tooltipEle],"e-bigger"),"auto"!==e.width&&(e.tooltipEle.style.maxWidth=S(e.width)),e.tooltipEle.appendChild(e.createElement("div",{className:kh})),this.appendContainer(e),et([e.tooltipEle],"e-hidden"),e.addDescribedBy(t,e.ctrlId+"_content"),e.renderContent(t),tt([e.tooltipEle],Fh),e.showTipPointer&&e.renderArrow(),e.renderCloseIcon(),e.renderPopup(t),e.adjustArrow(t,e.position,e.tooltipPositionX,e.tooltipPositionY),qt.stop(e.tooltipEle),e.reposition(t))},e.prototype.tooltipAfterRender=function(t,e,i,n){if(t){et([n.tooltipEle],Fh),tt([n.tooltipEle],Wh),n.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:t,event:e||null,element:n.tooltipEle,isInteracted:!y(e)},n.needTemplateReposition()&&!n.mouseTrail&&("None"===i.effect||"FadeIn"===i.effect||this.isReact&&"string"!=typeof n.content)&&(n.tooltipEle.style.display="none");n.trigger("beforeOpen",n.tooltipEventArgs,function(s){n.beforeOpenCallback(s,t,i,e)}.bind(n))}},e.prototype.beforeOpenCallback=function(t,e,i,n){var s=this;if(t.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(e);else{var r={name:"None"===i.effect&&"Enable"===te?"FadeIn":this.animation.open.effect,duration:i.duration,delay:i.delay,timingFunction:"easeOut"};if("None"===i.effect&&(r=void 0),this.openDelay>0){this.showTimer=setTimeout(function(){s.mouseTrail&&K.add(e,"mousemove touchstart mouseenter",s.onMouseMove,s),s.popupObj&&(s.popupObj.show(r,e),s.mouseMoveEvent&&s.mouseTrail&&s.onMouseMove(s.mouseMoveEvent))},this.openDelay)}else this.popupObj&&this.popupObj.show(r,e)}n&&this.wireMouseEvents(n,e)},e.prototype.needTemplateReposition=function(){return!y(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef||this.isReact},e.prototype.checkCollision=function(t,e,i){var n={left:e,top:i,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},s=Sr(this.tooltipEle,this.checkCollideTarget(),e,i);return s.length>0&&(n.horizontal=s.indexOf("left")>=0?"Right":s.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=s.indexOf("top")>=0?"Bottom":s.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},e.prototype.calculateElementPosition=function(t,e){return[this.isBodyContainer?t.left+e.left:t.left-this.containerElement.getBoundingClientRect().left+e.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?t.top+e.top:t.top-this.containerElement.getBoundingClientRect().top+e.top+window.pageYOffset+this.containerElement.scrollTop]},e.prototype.collisionFlipFit=function(t,e,i){var n=this.checkCollision(t,e,i),s=n.position;if(this.tooltipPositionY!==n.vertical&&(s=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(0===s.indexOf("Left")&&(n.vertical="LeftTop"===s||"LeftCenter"===s?"Top":"Bottom",s=n.vertical+"Left"),0===s.indexOf("Right")&&(n.vertical="RightTop"===s||"RightCenter"===s?"Top":"Bottom",s=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:t,event:null,element:this.tooltipEle,collidedPosition:s},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)s=this.position;else{var r=n.vertical,o=n.horizontal;if(n.position!==s){var a=dr(t,o,r,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(t,s,o,r);var l=this.getScalingFactor(t),h=this.calculateTooltipOffset(s,l.x,l.y);h.top-=this.getOffSetPosition("TopBottom",s,this.offsetY),h.left-=this.getOffSetPosition("RightLeft",s,this.offsetX),n.position=s;var c=this.calculateElementPosition(a,h);n.left=c[0],n.top=c[1]}else this.adjustArrow(t,s,o,r)}var d={left:n.left,top:n.top},p=this.isBodyContainer?Mr(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.windowCollision},d):d;this.tooltipEle.style.display="block";var u=ct("."+zh,this.tooltipEle);if(this.showTipPointer&&null!=u&&(0===s.indexOf("Bottom")||0===s.indexOf("Top"))){var g=parseInt(u.style.left,10)-(p.left-n.left);g<0?g=0:g+u.offsetWidth>this.tooltipEle.clientWidth&&(g=this.tooltipEle.clientWidth-u.offsetWidth),u.style.left=g.toString()+"px"}return this.tooltipEle.style.display="",d.left=p.left,d.top=p.top,d},e.prototype.getOffSetPosition=function(t,e,i){return-1!==t.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==t.indexOf(e.split(/(?=[A-Z])/)[0])?2*i:0},e.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},e.prototype.hideTooltip=function(t,e,i){var n=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);this.hideTimer=setTimeout(function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(t,e,i)},this.closeDelay)}else this.tooltipHide(t,e,i)},e.prototype.tooltipHide=function(t,e,i){var n,s=this;n=e?this.target?i||e.target:this.element:ct('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:n,event:e||null,element:this.tooltipEle,isInteracted:!y(e)},this.trigger("beforeClose",this.tooltipEventArgs,function(i){i.cancel?s.isHidden=!1:(s.mouseMoveBeforeRemove(),s.popupHide(t,n,e))})},e.prototype.popupHide=function(t,e,i){e&&i&&this.restoreElement(e),this.isHidden=!0;var n={name:"None"===t.effect&&"Enable"===te?"FadeOut":this.animation.close.effect,duration:t.duration,delay:t.delay,timingFunction:"easeIn"};"None"===t.effect&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},e.prototype.restoreElement=function(t){this.unwireMouseEvents(t),y(t.getAttribute("data-content"))||(t.setAttribute("title",t.getAttribute("data-content")),t.removeAttribute("data-content")),this.removeDescribedBy(t)},e.prototype.clear=function(){var t=this.findTarget();t&&this.restoreElement(t),this.tooltipEle&&(et([this.tooltipEle],Wh),tt([this.tooltipEle],Fh)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&lt(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},e.prototype.tooltipHover=function(){this.tooltipEle&&(this.isTooltipOpen=!0)},e.prototype.tooltipMouseOut=function(t){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,t,this.findTarget())},e.prototype.onMouseOut=function(t){var e=t.relatedTarget;if(e&&!this.mouseTrail){var i=ut(e,"."+Oh+"."+Yh+"."+Uh);i?K.add(i,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,t,this.findTarget()),0===this.closeDelay&&("None"===this.animation.close.effect||this.isReact&&"string"!=typeof this.content)&&this.clear())}else this.hideTooltip(this.animation.close,t,this.findTarget()),this.clear();this.popupObj&&!this.popupObj.element.classList.contains(Fh)&&this.clear()},e.prototype.tooltipElementMouseOut=function(t){this.hideTooltip(this.animation.close,t,this.findTarget()),K.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},e.prototype.onStickyClose=function(){this.close()},e.prototype.onMouseMove=function(t){var e=0,i=0;if(t.type.indexOf("touch")>-1?(t.preventDefault(),e=t.touches[0].pageX,i=t.touches[0].pageY):(e=t.pageX,i=t.pageY),!y(this.tooltipEle)){qt.stop(this.tooltipEle),et([this.tooltipEle],Wh),tt([this.tooltipEle],Fh),this.adjustArrow(t.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.getScalingFactor(t.target),s=this.calculateTooltipOffset(this.position,n.x,n.y),r=e+s.left+this.offsetX,o=i+s.top+this.offsetY,a=this.checkCollision(t.target,r,o);if(this.tooltipPositionX!==a.horizontal||this.tooltipPositionY!==a.vertical){var l=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?a.vertical+a.horizontal:a.horizontal+a.vertical;a.position=l,this.adjustArrow(t.target,a.position,a.horizontal,a.vertical);var h=this.calculateTooltipOffset(a.position,n.x,n.y);a.left=e+h.left-this.offsetX,a.top=i+h.top-this.offsetY}this.tooltipEle.style.left=a.left+"px",this.tooltipEle.style.top=a.top+"px"}},e.prototype.keyDown=function(t){this.tooltipEle&&27===t.keyCode&&this.close()},e.prototype.touchEnd=function(t){this.tooltipEle&&null===ut(t.target,"."+Th)&&!this.isSticky&&this.close()},e.prototype.scrollHandler=function(t){this.tooltipEle&&!this.isSticky&&(ut(t.target,"."+Oh+"."+Yh+"."+Uh)||this.isSticky||this.close())},e.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},e.prototype.preRender=function(){this.tipClass=Bh,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},e.prototype.wireEvents=function(t){for(var e=0,i=this.getTriggerList(t);e<i.length;e++){var n=i[e];if("Custom"===n)return;"Focus"===n&&this.wireFocusEvents(),"Click"===n&&K.add(this.element,G.touchStartEvent,this.targetClick,this),"Hover"===n&&(G.isDevice?(this.touchModule=new ci(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),K.add(this.element,G.touchEndEvent,this.touchEndHandler,this)):K.add(this.element,"mouseover",this.targetHover,this))}this.windowResizeBound=this.windowResize.bind(this),this.keyDownBound=this.keyDown.bind(this),this.touchEndBound=this.touchEnd.bind(this),this.scrollWheelBound=this.scrollHandler.bind(this),document.addEventListener("wheel",this.scrollWheelBound),document.addEventListener("scroll",this.scrollWheelBound),document.addEventListener("touchend",this.touchEndBound),document.addEventListener("keydown",this.keyDownBound),window.addEventListener("resize",this.windowResizeBound)},e.prototype.getTriggerList=function(t){return t?("Auto"===t&&(t=G.isDevice?"Hover":"Hover Focus"),t.split(" ")):[]},e.prototype.wireFocusEvents=function(){if(y(this.target))K.add(this.element,"focusin",this.targetHover,this);else{var t=[].slice.call(dt(this.target,this.element));if(this.targetsList=t,!y(this.targetsList)&&this.targetsList.length>0)for(var e=0,i=t;e<i.length;e++){var n=i[e];K.add(n,"focus",this.targetHover,this)}else K.add(this.element,"focusin",this.targetHover,this)}},e.prototype.wireMouseEvents=function(t,e){this.tooltipEle&&(this.isSticky||("focus"===t.type&&K.add(e,"blur",this.onMouseOut,this),"focusin"===t.type&&K.add(e,"focusout",this.onMouseOut,this),"mouseover"===t.type&&K.add(e,"mouseleave",this.onMouseOut,this),this.closeDelay&&(K.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),K.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&K.add(e,"mousemove touchstart mouseenter",this.onMouseMove,this))},e.prototype.unwireEvents=function(t){for(var e=0,i=this.getTriggerList(t);e<i.length;e++){var n=i[e];if("Custom"===n)return;"Focus"===n&&this.unwireFocusEvents(),"Click"===n&&K.remove(this.element,G.touchStartEvent,this.targetClick),"Hover"===n&&(G.isDevice?(this.touchModule&&this.touchModule.destroy(),K.remove(this.element,G.touchEndEvent,this.touchEndHandler)):K.remove(this.element,"mouseover",this.targetHover))}document.removeEventListener("touchend",this.touchEndBound),this.touchEndBound=null,document.removeEventListener("wheel",this.scrollWheelBound),document.removeEventListener("scroll",this.scrollWheelBound),this.scrollWheelBound=null,window.removeEventListener("resize",this.windowResizeBound),this.windowResizeBound=null,document.removeEventListener("keydown",this.keyDownBound),this.keyDownBound=null},e.prototype.unwireFocusEvents=function(){if(y(this.target))K.remove(this.element,"focusin",this.targetHover);else{var t=[].slice.call(dt(this.target,this.element));if(!y(this.targetsList)&&this.targetsList.length>0)for(var e=0,i=t;e<i.length;e++){var n=i[e];K.remove(n,"focus",this.targetHover)}else K.remove(this.element,"focusin",this.targetHover)}},e.prototype.unwireMouseEvents=function(t){if(!this.isSticky){for(var e=0,i=this.getTriggerList(this.opensOn);e<i.length;e++){var n=i[e];"Focus"===n&&(K.remove(t,"blur",this.onMouseOut),K.remove(t,"focusout",this.onMouseOut)),"Hover"!==n||G.isDevice||K.remove(t,"mouseleave",this.onMouseOut)}this.closeDelay&&(K.remove(t,"mouseenter",this.tooltipHover),K.remove(t,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&K.remove(t,"mousemove touchstart mouseenter",this.onMouseMove)},e.prototype.findTarget=function(){return ct('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},e.prototype.getModuleName=function(){return"tooltip"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.onPropertyChanged=function(t,e){for(var i=this.findTarget(),n=0,s=Object.keys(t);n<s.length;n++){switch(s[n]){case"width":this.tooltipEle&&i&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=S(t.width),this.reposition(i));break;case"height":this.tooltipEle&&i&&(this.tooltipEle.style.height=S(t.height),this.reposition(i));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(e.opensOn),this.wireEvents(t.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&i){var r=ct("."+jh,this.tooltipEle);r&&(r.style.top=r.style.left=null),this.reposition(i)}break;case"tipPointerPosition":this.tooltipEle&&i&&this.reposition(i);break;case"offsetX":if(this.tooltipEle){var o=t.offsetX-e.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+o).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var a=t.offsetY-e.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+a).toString()+"px"}break;case"cssClass":this.tooltipEle&&(e.cssClass&&et([this.tooltipEle],e.cssClass.split(" ")),t.cssClass&&tt([this.tooltipEle],t.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?tt([this.tooltipEle],Ah):et([this.tooltipEle],Ah));break;case"isSticky":this.tooltipEle&&i&&(this.renderCloseIcon(),this.reposition(i));break;case"container":y(this.containerElement)||et([this.containerElement],_h),this.container=t.container,this.tooltipEle&&i&&(this.appendContainer(this),this.reposition(i))}}},e.prototype.open=function(t,e){y(e)&&(e=this.animation.open),y(t)&&(t=this.element),"none"!==t.style.display&&this.showTooltip(t,e)},e.prototype.close=function(t){t||(t=this.animation.close),this.hideTooltip(t)},e.prototype.refresh=function(t){(this.tooltipEle&&this.renderContent(t),this.popupObj&&t&&this.reposition(t),y(this.targetsList)||y(this.target))||dt(this.target,this.element).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.tooltipEle&&lt(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),Yr(),et([this.element],Th),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var e=0,i=dt('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element);e<i.length;e++){var n=i[e];this.restoreElement(n)}this.containerElement=null,this.tipClass=null,this.tooltipPositionX=null,this.tooltipPositionY=null,this.ctrlId=null,this.tooltipEventArgs=null,this.touchModule=null,this.mouseMoveEvent=null,this.mouseMoveTarget=null,this.containerElement=null,this.targetsList=null},Eh([jt("auto")],e.prototype,"width",void 0),Eh([jt("auto")],e.prototype,"height",void 0),Eh([jt()],e.prototype,"content",void 0),Eh([jt("body")],e.prototype,"container",void 0),Eh([jt()],e.prototype,"target",void 0),Eh([jt("TopCenter")],e.prototype,"position",void 0),Eh([jt(0)],e.prototype,"offsetX",void 0),Eh([jt(0)],e.prototype,"offsetY",void 0),Eh([jt(!0)],e.prototype,"showTipPointer",void 0),Eh([jt(!0)],e.prototype,"enableHtmlParse",void 0),Eh([jt(!1)],e.prototype,"windowCollision",void 0),Eh([jt("Auto")],e.prototype,"tipPointerPosition",void 0),Eh([jt("Auto")],e.prototype,"opensOn",void 0),Eh([jt(!1)],e.prototype,"mouseTrail",void 0),Eh([jt(!1)],e.prototype,"isSticky",void 0),Eh([Bt({},Qh)],e.prototype,"animation",void 0),Eh([jt(0)],e.prototype,"openDelay",void 0),Eh([jt(0)],e.prototype,"closeDelay",void 0),Eh([jt()],e.prototype,"cssClass",void 0),Eh([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),Eh([jt("")],e.prototype,"htmlAttributes",void 0),Eh([Ut()],e.prototype,"beforeRender",void 0),Eh([Ut()],e.prototype,"beforeOpen",void 0),Eh([Ut()],e.prototype,"afterOpen",void 0),Eh([Ut()],e.prototype,"beforeClose",void 0),Eh([Ut()],e.prototype,"afterClose",void 0),Eh([Ut()],e.prototype,"beforeCollision",void 0),Eh([Ut()],e.prototype,"created",void 0),Eh([Ut()],e.prototype,"destroyed",void 0),e=Eh([Ft],e)}(_e),qh={},Xh="e-spin-show",Gh="e-spin-hide",Kh="e-spin-material",Jh="e-spin-material3",$h="e-spin-tailwind3",tc="e-spin-fabric",ec="e-spin-fluent",ic="e-spin-fluent2",nc="e-spin-tailwind",sc="e-spin-bootstrap",rc="e-spin-bootstrap4",oc="e-spin-bootstrap5",ac="e-spin-high-contrast",lc="e-spinner-pane",hc="e-spinner-inner",cc="e-path-circle",dc="e-spin-label",pc="e-spin-template",uc=null,gc=null;function mc(t,e){var i;if(t.target){var n,s=y(e)?$:e,r=function(t,e){var i=e("div",{}),n=e("div",{});return i.classList.add(lc),n.classList.add(hc),n.setAttribute("aria-disabled","true"),t.appendChild(i),i.appendChild(n),{wrap:i,inner_wrap:n}}(t.target,s);if(!y(t.cssClass)){var o=t.cssClass.split(" ").filter(function(t){return""!==t.trim()});(i=r.wrap.classList).add.apply(i,o)}if(y(t.template)&&y(uc)){var a=y(t.type)?function(t){var e=window.getComputedStyle(t,":after").getPropertyValue("content");return e.replace(/['"]+/g,"")}(r.wrap):t.type;n=function(t,e){var i;switch(e){case"Material":case"Material3":case"Fabric":case"Tailwind":case"Tailwind-dark":case"Tailwind3":case"Fluent":case"Fluent2":default:i=30;break;case"Bootstrap4":case"Bootstrap5":i=36}return t=t?parseFloat(t+""):i,"Bootstrap"===e?t:t/2}(y(t.width)?void 0:t.width,a),fc(a,r.wrap,n,s),y(t.label)||function(t,e,i){var n=i("div",{});n.classList.add(dc),n.innerHTML=e,t.appendChild(n)}(r.inner_wrap,t.label,s)}else{var l=y(t.template)?uc:t.template;r.wrap.classList.add(pc),vc(r.wrap,l,gc)}r.wrap.classList.add(Gh),r=null}}function fc(t,e,i,n){var s=e.querySelector("."+hc),r=s.querySelector("svg");switch(y(r)||s.removeChild(r),t){case"Material":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Material",radius:e},Ic(t,n,i,Kh),Sc(e,t,"Material",Kh)}(s,i,n);break;case"Material3":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Material3",radius:e},Ic(t,n,i,Jh),Sc(e,t,"Material3",Jh)}(s,i,n);break;case"Fabric":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Fabric",radius:e},Cc(t,n,tc,i),Ec(e,t,tc)}(s,i,n);break;case"Fluent":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Fluent",radius:e},Cc(t,n,ec,i),Ec(e,t,ec)}(s,i,n);break;case"Fluent2":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Fluent2",radius:e},Cc(t,n,ic,i),Ec(e,t,ic)}(s,i,n);break;case"Bootstrap":!function(t,e){var i=bc();qh[""+i]={timeOut:0,type:"Bootstrap",radius:e},function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=64,s=32,r=2;i.setAttribute("id",e),i.setAttribute("class",sc),i.setAttribute("viewBox","0 0 "+n+" "+n),t.insertBefore(i,t.firstChild);for(var o=0;o<=7;o++){var a=document.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("class",cc+"_"+o),a.setAttribute("r",r+""),a.setAttribute("transform","translate("+s+","+s+")"),i.appendChild(a)}}(t,i),function(t,e){var i=t.querySelector("svg.e-spin-bootstrap"),n=0,s=0,r=24;i.style.width=i.style.height=e+"px";for(var o=90,a=0;a<=7;a++){var l=Tc(n,s,r,o),h=i.querySelector("."+cc+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),o=o>=360?0:o,o+=45}}(t,e)}(s,i);break;case"HighContrast":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"HighContrast",radius:e},Cc(t,n,ac,i),Ec(e,t,ac)}(s,i,n);break;case"Bootstrap4":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Bootstrap4",radius:e},Ic(t,n,i,rc),Sc(e,t,"Bootstrap4",rc)}(s,i,n);break;case"Bootstrap5":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Bootstrap5",radius:e},Ic(t,n,i,oc),Sc(e,t,"Bootstrap5",oc)}(s,i,n);break;case"Tailwind":case"Tailwind-dark":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Tailwind",radius:e},Cc(t,n,nc,i),Ec(e,t,nc)}(s,i,n);break;case"Tailwind3":!function(t,e,i){var n=bc();qh[""+n]={timeOut:0,type:"Tailwind3",radius:e},Ic(t,n,i,$h),Sc(e,t,"Tailwind3",$h)}(s,i,n)}}function yc(t,e){var i=[],n=t,s=e,r=!1,o=1;return function t(e){i.push(e),(e!==s||1===o)&&(e<=n&&e>1&&!r?e=parseFloat((e-.2).toFixed(2)):1===e?(e=7,e=parseFloat((e+.2).toFixed(2)),r=!0):e<8&&r?8===(e=parseFloat((e+.2).toFixed(2)))&&(r=!1):e<=8&&!r&&(e=parseFloat((e-.2).toFixed(2))),++o,t(e))}(n),i}function vc(t,e,i){y(i)||t.classList.add(i),t.querySelector(".e-spinner-inner").innerHTML=e}function bc(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)t+=e.charAt(Math.floor(62*Math.random()));return t}function Cc(t,e,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("id",e),s.setAttribute("class",i);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",cc);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),t.insertBefore(s,t.firstChild),s.appendChild(r),s.appendChild(o)}function Ic(t,e,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",n),s.setAttribute("id",e),r.setAttribute("class",cc),t.insertBefore(s,t.firstChild),s.appendChild(r)}function Mc(t){!function(t,e,i,n,s,r,o){var a=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),h=e-t,c=function(t){var e=parseFloat(t);return e}(2*o.globalInfo[o.uniqueID].radius+""),d=xc(c),p=-90*(o.globalInfo[o.uniqueID].count||0);function u(e){var s=Math.max(0,Math.min((new Date).getTime()-l,n));g(i(s,t,h,n),e.container),a===e.globalInfo[e.uniqueID].previousId&&s<n?qh[e.uniqueID].timeOut=setTimeout(u.bind(null,e),1):Mc(e)}function g(t,e){if(!y(e.querySelector("svg.e-spin-material"))||!y(e.querySelector("svg.e-spin-material3"))||!y(e.querySelector("svg.e-spin-tailwind3"))){var i=void 0;if(y(e.querySelector("svg.e-spin-material"))||y(e.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?y(e.querySelector("svg.e-spin-material3"))||y(e.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))?y(e.querySelector("svg.e-spin-tailwind3"))||y(e.querySelector("svg.e-spin-tailwind3").querySelector("path.e-path-circle"))||(i=e.querySelector("svg.e-spin-tailwind3")):i=e.querySelector("svg.e-spin-material3"):i=e.querySelector("svg.e-spin-material"),!y(i)){var n=i.querySelector("path.e-path-circle");n.setAttribute("stroke-dashoffset",wc(c,d,t,r)+""),n.setAttribute("transform","rotate("+p+" "+c/2+" "+c/2+")")}}}u(o)}(1,149,Dc,1333,t.globalInfo[t.uniqueID].count,75,t),t.globalInfo[t.uniqueID].count=++t.globalInfo[t.uniqueID].count%4}function Sc(t,e,i,n){var s=2*t,r=e.querySelector("svg."+n),o=r.querySelector("path.e-path-circle"),a=xc(s),l=s/2+"px";r.setAttribute("viewBox","0 0 "+s+" "+s),r.style.width=r.style.height=s+"px",r.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function(t,e){var i=t/2,n=e/2;return"M"+i+","+n+"A"+(i-n)+","+(i-n)+" 0 1 1 "+n+","+i}(s,a)),"Material"!==i&&"Material3"!==i&&"Fluent2"!==i&&"Tailwind3"!==i||(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(s-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",wc(s,a,1,75)+""))}function xc(t){return.1*t}function wc(t,e,i,n){return(t-e)*Math.PI*(3*n/100-i/100)}function Dc(t,e,i,n){var s=(t/=n)*t,r=s*t;return e+i*(6*r*s+-15*s*s+10*r)}function Ec(t,e,i){var n=t,s=t,r=2*t,o=e.querySelector("."+i),a=o.querySelector(".e-path-circle"),l=o.querySelector(".e-path-arc"),h=r/2+"px";a.setAttribute("d",function(t,e,i){var n=["M",t,e,"m",-i,0,"a",i,i,0,1,0,2*i,0,"a",i,i,0,1,0,2*-i,0].join(" ");return n}(n,s,t)),l.setAttribute("d",function(t,e,i,n,s){var r=Tc(t,e,i,s),o=Tc(t,e,i,n),a=["M",r.x,r.y,"A",i,i,0,0,0,o.x,o.y].join(" ");return a}(n,s,t,315,45)),o.setAttribute("viewBox","0 0 "+r+" "+r),o.style.transformOrigin=h+" "+h+" "+h,o.style.width=o.style.height=r+"px"}function Tc(t,e,i,n){var s=(n-90)*Math.PI/180;return{x:t+i*Math.cos(s),y:e+i*Math.sin(s)}}function Ac(t){Nc(t,!1),t=null}function Nc(t,e){var i;if(t)if(t.classList.contains(lc))i=t;else{var n=t.querySelectorAll("."+lc);if(G.isIE){for(var s=0;s<n.length;s++)if(n[s].parentElement&&n[s].parentElement===t){i=n[s];break}}else i=Array.from(n).find(function(e){return e.parentElement===t})||null}if(t&&i){var r=i.querySelector("."+hc);if(e?!i.classList.contains(pc)&&!i.classList.contains(Gh):!i.classList.contains(pc)&&!i.classList.contains(Xh)){var o=i.querySelector("svg");if(y(o))return;var a=o.getAttribute("id");switch(qh[""+a].isAnimate=!e,qh[""+a].type){case"Material":case"Material3":case"Tailwind3":e?clearTimeout(qh[a].timeOut):function(t,e,i){var n={};qh[""+e].timeOut=0,n[""+e]=function(t,e){return{radius:e,count:0,previousId:0}}(0,i),Mc({uniqueID:e,container:t,globalInfo:n,timeOutVar:0})}(r,a,qh[a].radius);break;case"Bootstrap":e?clearTimeout(qh[a].timeOut):function(t){for(var e=t.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)n(t.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,i,yc(i,i),e);function n(t,e,i,n,s){var r=0;!function e(i){qh[""+s].isAnimate&&(++r,t.setAttribute("r",i+""),r>=n.length&&(r=0),qh[s].timeOut=setTimeout(e.bind(null,n[r]),18))}(e)}}(r)}}e?mt(i,[Gh],[Xh]):mt(i,[Xh],[Gh]),t=null}}function Lc(t){Nc(t,!0),t=null}var Oc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kc=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},zc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Oc(e,t),kc([jt("")],e.prototype,"content",void 0),kc([jt("TopLeft")],e.prototype,"position",void 0),kc([jt("Mouse")],e.prototype,"relativeMode",void 0),kc([jt(!0)],e.prototype,"showTipPointer",void 0),kc([jt("auto")],e.prototype,"width",void 0),kc([jt("auto")],e.prototype,"height",void 0),kc([jt("Auto")],e.prototype,"openOn",void 0),kc([jt()],e.prototype,"animation",void 0),kc([jt(!1)],e.prototype,"isSticky",void 0),e}(re);function Pc(t){var e=new Zh;e=Rc(t.tooltip,e);var i=new Zh(e);return i.beforeCollision=Bc,i.beforeOpen=jc,i.cssClass="e-diagram-tooltip",i.opensOn="custom",i.appendTo("#"+t.element.id),i.close(),i}function jc(t){""!==this.content&&void 0!==this.content||(t.element.style.display="none")}function Bc(t){t.collidedPosition&&t.collidedPosition!==this.position&&(t.element.style.display="none")}function Hc(t,e){var i=t.tooltipObject;return Rc(e?e.tooltip:t.tooltip,i),i}function Rc(t,e){if(t.content){if(e.content=t.content,"string"==typeof t.content){e.content=Ri(function(){return t.content})}e.position=t.position,e.showTipPointer=t.showTipPointer,e.width=t.width,e.height=t.height,t.animation?e.animation=t.animation:e.animation={close:{effect:"None"}}}else e.close();return e}var Vc=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Uc=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Fc=function(t){function e(e,i,n,s){var r=t.call(this,e,i,n,s)||this;return r.inEdges=[],r.outEdges=[],r}return Vc(e,t),Uc([jt("")],e.prototype,"id",void 0),Uc([jt("Center")],e.prototype,"horizontalAlignment",void 0),Uc([jt("Center")],e.prototype,"verticalAlignment",void 0),Uc([Bt({},Os)],e.prototype,"margin",void 0),Uc([jt(12)],e.prototype,"width",void 0),Uc([jt(12)],e.prototype,"height",void 0),Uc([Bt({},Hs)],e.prototype,"style",void 0),Uc([jt("Square")],e.prototype,"shape",void 0),Uc([jt("Auto")],e.prototype,"connectionDirection",void 0),Uc([jt(rs.Connect)],e.prototype,"visibility",void 0),Uc([jt("")],e.prototype,"pathData",void 0),Uc([jt(Es.Default)],e.prototype,"constraints",void 0),Uc([jt()],e.prototype,"addInfo",void 0),Uc([jt()],e.prototype,"outEdges",void 0),Uc([jt()],e.prototype,"inEdges",void 0),Uc([Bt({},zc)],e.prototype,"tooltip",void 0),e}(re),Wc=function(t){function e(e,i,n,s){return t.call(this,e,i,n,s)||this}return Vc(e,t),e.prototype.getClassName=function(){return"PointPort"},Uc([Bt({x:.5,y:.5},fn)],e.prototype,"offset",void 0),e}(Fc),Yc=function(t){function e(e,i,n,s){return t.call(this,e,i,n,s)||this}return Vc(e,t),e.prototype.getClassName=function(){return"PathPort"},Uc([jt(.5)],e.prototype,"offset",void 0),Uc([Bt({x:0,y:0},fn)],e.prototype,"displacement",void 0),Uc([jt("Center")],e.prototype,"alignment",void 0),e}(Fc),_c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Qc=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Zc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _c(e,t),Qc([jt("blue")],e.prototype,"color",void 0),Qc([jt("")],e.prototype,"content",void 0),Qc([jt("")],e.prototype,"link",void 0),Qc([jt("None")],e.prototype,"textDecoration",void 0),Qc([jt("NewTab")],e.prototype,"hyperlinkOpenState",void 0),e}(re),qc=function(t){function e(e,i,n,s){var r=t.call(this,e,i,n,s)||this;return n.id||(e.parentObj&&e.parentObj.propName&&"phases"===e.parentObj.propName?r.id=e.parentObj.id:r.id=Hn()),r}return _c(e,t),Qc([jt("")],e.prototype,"content",void 0),Qc([jt(void 0)],e.prototype,"template",void 0),Qc([jt("String")],e.prototype,"annotationType",void 0),Qc([jt(!0)],e.prototype,"visibility",void 0),Qc([jt(ds.InheritReadOnly)],e.prototype,"constraints",void 0),Qc([Bt(void 0,Zc)],e.prototype,"hyperlink",void 0),Qc([jt("")],e.prototype,"id",void 0),Qc([jt()],e.prototype,"width",void 0),Qc([jt()],e.prototype,"height",void 0),Qc([jt(0)],e.prototype,"rotateAngle",void 0),Qc([jt("Parent")],e.prototype,"rotationReference",void 0),Qc([Bt({strokeWidth:0,strokeColor:"transparent",fill:"transparent"},Vs)],e.prototype,"style",void 0),Qc([jt("Center")],e.prototype,"horizontalAlignment",void 0),Qc([jt("Center")],e.prototype,"verticalAlignment",void 0),Qc([Bt({},Os)],e.prototype,"margin",void 0),Qc([Bt({top:void 0,bottom:void 0,left:void 0,right:void 0},Os)],e.prototype,"dragLimit",void 0),Qc([jt("Shape")],e.prototype,"type",void 0),Qc([Bt({},zc)],e.prototype,"tooltip",void 0),Qc([jt()],e.prototype,"addInfo",void 0),e}(re),Xc=function(t){function e(e,i,n,s){return t.call(this,e,i,n,s)||this}return _c(e,t),e.prototype.getClassName=function(){return"ShapeAnnotation"},Qc([Bt({x:.5,y:.5},fn)],e.prototype,"offset",void 0),e}(qc),Gc=function(t){function e(e,i,n,s){return t.call(this,e,i,n,s)||this}return _c(e,t),e.prototype.getClassName=function(){return"PathAnnotation"},Qc([jt(.5)],e.prototype,"offset",void 0),Qc([Bt({x:0,y:0},fn)],e.prototype,"displacement",void 0),Qc([jt("Center")],e.prototype,"alignment",void 0),Qc([jt(!1)],e.prototype,"segmentAngle",void 0),e}(qc);function Kc(t){return $c[t.toString()]}function Jc(t){return id[""+t]}var $c={X:"M14,14 L106,106 M106,14 L14,106",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z",Square:"M0,0 L10,0 L10,10 L0,10 z"},td={OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Square:"M0,0 L10,0 L10,10 L0,10 z",Fletch:"M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z",OpenFetch:"M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z",IndentedArrow:"M17,10c0,0-4.5,5.5,0,12L5,16L17,10z",OutdentedArrow:"M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M12,23l-7-7l7-7l6.9,7L12,23z",Circle:"M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z"},ed={Square:"M0,0 L10,0 L10,10 L0,10 z",Rhombus:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Rectangle:"M0,0 L15,0 L15,10 L0,10 z ",OpenArrow:"M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z",Fletch:"M9.82,0 C9.82,0,6.61,5,10,10 C10,10,7.71,5,0,5 C0,5,6.61,5,9.82,0 Z ",OpenFetch:"M0.71,5.71 C0.29,5.71,0,5.43,0,5 C0,4.57,0.29,4.29,0.71,4.29 C8.5,4.29,8.57,0.71,8.57,0.71 C8.57,0.29,8.86,0,9.29,0 C9.719999999999999,0,10,0.29,10,0.71 C10,0.93,9.93,5.71,0.71,5.71 C0.71,5.71,0.71,5.71,0.71,5.71 Z M9.29,10 C8.93,10,8.57,9.71,8.57,9.29 C8.57,9.14,8.36,5.71,0.71,5.71 C0.29,5.71,0,5.36,0,5 C0,4.64,0.29,4.29,0.71,4.29 C0.71,4.29,0.71,4.29,0.71,4.29 C9.93,4.29,10,9.07,10,9.29 C10,9.71,9.71,10,9.29,10 Z ",IndentedArrow:"M10,0 C10,0,6.25,4.58,10,10 L0,5 L10,0 Z ",OutdentedArrow:"M8,0 C8,0,12.5,5,8,10 L0,5 L8,0 Z ",DoubleArrow:"M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z",Arrow:"M15,10 L15,22 L5,16Z",Diamond:"M10,5 L5,10 L0,5 L5,0 L10,5 Z  ",Circle:"M10,5 C10,7.76,7.76,10,5,10 C2.24,10,0,7.76,0,5 C0,2.24,2.24,0,5,0 C7.76,0,10,2.24,10,5 Z ",Ellipse:"M15,5 C15,7.76,11.64,10,7.5,10 C3.36,10,0,7.76,0,5 C0,2.24,3.36,0,7.5,0 C11.64,0,15,2.24,15,5 Z  "},id={Square:"M0,0 L10,0 L10,10 L0,10 z",Rhombus:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Rectangle:"M0,0 L15,0 L15,10 L0,10 z",OpenArrow:"M23,15.9 L16,5 L9,15.9 L10.7,17 L16,8.7 L21,17.3Z",Fletch:"M9.82,0 C9.82,0,6.61,5,10,10 C10,10,7.71,5,0,5 C0,5,6.61,5,9.82,0 Z ",OpenFetch:"M0.71,5.71 C0.29,5.71,0,5.43,0,5 C0,4.57,0.29,4.29,0.71,4.29 C8.5,4.29,8.57,0.71,8.57,0.71 C8.57,0.29,8.86,0,9.29,0 C9.719999999999999,0,10,0.29,10,0.71 C10,0.93,9.93,5.71,0.71,5.71 C0.71,5.71,0.71,5.71,0.71,5.71 Z M9.29,10 C8.93,10,8.57,9.71,8.57,9.29 C8.57,9.14,8.36,5.71,0.71,5.71 C0.29,5.71,0,5.36,0,5 C0,4.64,0.29,4.29,0.71,4.29 C0.71,4.29,0.71,4.29,0.71,4.29 C9.93,4.29,10,9.07,10,9.29 C10,9.71,9.71,10,9.29,10 Z ",IndentedArrow:"M10,0 C10,0,6.25,4.58,10,10 L0,5 L10,0 Z ",OutdentedArrow:"M8,0 C8,0,12.5,5,8,10 L0,5 L8,0 Z ",DoubleArrow:"M10,19 L22,19 L16,13Z M10,12 L22,12 L16,6Z",Arrow:"M10,15 L22,15 L16,5Z",Diamond:"M10,5 L5,10 L0,5 L5,0 L10,5 Z ",Circle:"M10,5 C10,7.76,7.76,10,5,10 C2.24,10,0,7.76,0,5 C0,2.24,2.24,0,5,0 C7.76,0,10,2.24,10,5 Z ",Ellipse:"M15,5 C15,7.76,11.64,10,7.5,10 C3.36,10,0,7.76,0,5 C0,2.24,3.36,0,7.5,0 C11.64,0,15,2.24,15,5 Z   "};function nd(t){return sd[t.toString()]}var sd={Process:"M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z",Decision:"M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z",Document:"M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z",PreDefinedProcess:"M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50",Terminator:"M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z",PaperTap:"M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987",DirectData:"M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ",SequentialData:"M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999",Sort:"M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971",MultiDocument:"M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z",Collate:"M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z",SummingJunction:"M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z",Or:"M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z",InternalStorage:"M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778",Extract:"M0,35 L30,0 L60,35 Z",ManualOperation:"M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z",Merge:"M60,0 L30,35 L0,0 Z",OffPageReference:"M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z",SequentialAccessStorage:"M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z",Annotation:"M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865",Annotation2:"M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029",Data:"M 10 0 L 40 0 L 30 40 L 0 40 Z",Card:"M275,60 L400,60 L400,110 L260,110 L260,75 Z",Delay:"M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z",Preparation:"M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z",Display:"M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z",ManualInput:"M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z",LoopLimit:"M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z",StoredData:"M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z"};function rd(t,e,i){var n;n="Straight"!==t.type&&t.sourceWrapper?t.sourceWrapper.corners.center:function(t){var e;if(t.sourcePortWrapper){var i=t.sourcePortWrapper;e={x:i.offsetX,y:i.offsetY}}else if(t.sourceID&&t.sourceWrapper)if(t.targetWrapper){var n=t.sourceWrapper.corners.center,s=t.targetWrapper.corners.center;e=Od(t,t.sourceWrapper,n,s,!1)}else e=t.sourcePoint;else e=t.sourcePoint;return e}(t);var s=function(t,e,i,n,s){var r,o,a,l,h,c,d=t.sourceWrapper,p=t.targetWrapper,u=t.sourcePortWrapper,g=t.targetPortWrapper,m=[],f=Td(t),y={corners:r,point:e,direction:a,margin:{left:5,right:5,bottom:5,top:5}},v={corners:o,point:i,direction:l,margin:{left:5,right:5,bottom:5,top:5}};void 0!==d&&void 0!==p&&(h=Vn(d),c=Vn(p),y.corners=d.corners,v.corners=p.corners);u&&u.isPathPort&&g&&(i={x:g.offsetX,y:g.offsetY});if(void 0!==u){var b={x:u.offsetX,y:u.offsetY};"Left"===u.connectionDirection||"Top"===u.connectionDirection||"Bottom"===u.connectionDirection||"Right"===u.connectionDirection?y.direction=u.connectionDirection:u.isPathPort?y.direction=od(t.parentObj,t.sourceID,u,i):y.direction=Zd(b,h,d.bounds,!1)}if(void 0!==g){var C={x:g.offsetX,y:g.offsetY};"Left"===g.connectionDirection||"Right"===g.connectionDirection||"Bottom"===g.connectionDirection||"Top"===g.connectionDirection?v.direction=g.connectionDirection:g.isPathPort?v.direction=od(t.parentObj,t.targetID,g,e):v.direction=Zd(C,c,p.bounds,!1)}if("Bezier"===t.type&&!t.isBezierEditing&&t.segments.length>0)for(var I=t.segments.length-1;I>=0;){t.segments[parseInt(I.toString(),10)].isInternalSegment&&t.segments.pop(),I--}if(void 0!==d&&void 0!==p)return void 0!==y.direction&&void 0!==v.direction||(n?function(t,e,i){"LeftToRight"===i?(t.direction=t.direction?t.direction:"Right",e.direction=e.direction?e.direction:"Left"):"RightToLeft"===i?(t.direction=t.direction?t.direction:"Left",e.direction=e.direction?e.direction:"Right"):"TopToBottom"===i?(t.direction=t.direction?t.direction:"Bottom",e.direction=e.direction?e.direction:"Top"):"BottomToTop"===i&&(t.direction=t.direction?t.direction:"Top",e.direction=e.direction?e.direction:"Bottom")}(y,v,n):y.corners.top>v.corners.bottom&&Math.abs(y.corners.top-v.corners.bottom)>f?(y.direction=y.direction?y.direction:"Top",v.direction=v.direction?v.direction:"Bottom"):y.corners.bottom<v.corners.top&&Math.abs(y.corners.bottom-v.corners.top)>f?(y.direction=y.direction?y.direction:"Bottom",v.direction=v.direction?v.direction:"Top"):y.corners.right<v.corners.left&&Math.abs(y.corners.right-v.corners.left)>f||y.corners.right+f<v.corners.left||v.corners.right>=y.corners.left-f&&y.corners.left>v.corners.left?(y.direction=y.direction?y.direction:"Right",v.direction=v.direction?v.direction:"Left"):y.corners.left>v.corners.right&&Math.abs(y.corners.left-v.corners.right)>y.margin.left+y.margin.right||v.corners.right+f<y.corners.left||y.corners.right>=v.corners.left-f&&y.corners.left<v.corners.left?(y.direction=y.direction?y.direction:"Left",v.direction=v.direction?v.direction:"Right"):d.id!==p.id&&!h.equals(h,c)&&c.containsPoint(h.topCenter,y.margin.top)?(y.direction=y.direction?y.direction:"Bottom",v.direction=v.direction?v.direction:"Top"):(y.direction=y.direction?y.direction:"Top",v.direction=v.direction?v.direction:"Bottom")),function(t,e,i,n,s,r,o){var a,l=t.sourceWrapper,h=t.targetWrapper,c=t.sourcePortWrapper,d=t.targetPortWrapper,p=[],u=l.corners,g=h.corners,m=(g.center,{left:5,right:5,bottom:5,top:5}),f={left:5,right:5,bottom:5,top:5},y={corners:u,point:n,direction:e,margin:m},v={corners:g,point:s,direction:i,margin:f},b=vd(l,u,t.sourceWrapper.bounds),C=vd(h,g,t.targetWrapper.bounds),I=!1;t.sourceWrapper&&t.targetWrapper&&(I=function(t,e,i){for(var n=fd(t,i.sourcePadding),s=fd(e,i.targetPadding),r=0;r<n.length-1;r++)for(var o=n[parseInt(r.toString(),10)],a=0;a<s.length-1;a++){if(Im(o,s[parseInt(a.toString(),10)]).enabled)return!0}return!1}(t.sourceWrapper,t.targetWrapper,t));if(void 0!==c){switch(y.point={x:c.offsetX,y:c.offsetY},y.direction){case"Bottom":case"Top":y.point.y=y.point.y;break;case"Left":case"Right":y.point.x=y.point.x}t.sourcePadding&&!I&&(d&&(v.point={x:d.offsetX,y:d.offsetY}),y.point=md(t,y,v,!1))}else"Orthogonal"===t.type||"Bezier"===t.type?(t.segments&&t.segments.length>0&&t.segments[0].direction&&(y.direction=t.segments[0].direction),y.point=Nd(b,y.direction),a=Nd(b,Xd(y.direction)),y.point=Od(t,l,y.point,a,!1)):y.point=l.corners.center;if(void 0!==d){switch(v.point={x:d.offsetX,y:d.offsetY},v.direction){case"Bottom":case"Top":v.point.y=v.point.y;break;case"Left":case"Right":v.point.x=v.point.x}t.targetPadding&&!I&&(v.point=md(t,y,v,!0))}else"Orthogonal"===t.type||"Bezier"===t.type?(v.point=Nd(C,v.direction),a=Nd(C,Xd(v.direction)),v.point=Od(t,h,v.point,a,!0)):v.point=h.corners.center;if("Orthogonal"!==t.type){var M=void 0,S=void 0;if("Bezier"===t.type){if(t.bezierSettings.allowSegmentsReset||0===t.segments.length||!fn.isEmptyPoint(t.segments[t.segments.length-1].point))return p=Ed(t,y,v,void 0,r),p=bd(t,y,v);Id(t)}else Id(t);if(void 0===t.sourcePortWrapper){y.point=y.corners.center,t.segments&&t.segments.length>0&&(S=t.segments[0],M=fn.isEmptyPoint(S.point)?void 0:S);var x=void 0!==M?M.point:v.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[0].vector1.angle&&t.segments[0].vector1.distance){var w=Math.max(y.corners.width,y.corners.height);x=fn.transform(y.point,t.segments[0].vector1.angle,w/2)}y.point=I?t.sourceWrapper.bounds.center:Od(t,l,y.point,x,!1)}if(void 0===t.targetPortWrapper){v.point=v.corners.center,t.segments&&t.segments.length>1&&(S=t.segments[t.segments.length-2],M=fn.isEmptyPoint(S.point)?void 0:S);var D=M?M.point:y.point;if("Bezier"===t.type&&t.segments.length>0&&t.segments[t.segments.length-1].vector2.angle&&t.segments[t.segments.length-1].vector2.distance){w=Math.max(y.corners.width,y.corners.height);D=fn.transform(v.point,t.segments[0].vector2.angle,w/2)}v.point=I?t.targetWrapper.bounds.center:Od(t,h,D,v.point,!0)}p=bd(t,y,v)}else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].direction)p=function(t,e,i,n,s,r,o,a){var l,h,c,d,p=[];Id(t);for(var u=0;u<t.segments.length;u++){if(h=t.segments[parseInt(u.toString(),10)],n&&e.direction===Xd(h.direction)&&(h.direction=e.direction),u>0&&t.segments[u-1].direction===h.direction)u=Md(t,u,e);else if(h.direction)e.point=ld(e,t.segments[parseInt(u.toString(),10)]);else(m=t.segments[u-1])&&m.points&&m.points.length>0&&(e.point=m.points[m.points.length-1]);if(u===t.segments.length-1)if(xd(t,e),gd(l=void 0===s?Sd(t,e,i):pd(t,e,i),t,e),h.points=[],l.length>=2)for(c=0;c<l.length;c++)if(t.selectedSegmentIndex)if(c===l.length-1&&l.length>2&&t.segments.length>2){var g={x:l[parseInt(c.toString(),10)].x,y:e.point.y};h.points=[],h.points.push(g),h.points.push(l[parseInt(c.toString(),10)]);var m=t.segments[u-1];t.segments.length<4&&m.points.pop(),m.points=m.points.concat(h.points)}else h.points.push(l[parseInt(c.toString(),10)]);else h.points.push(l[parseInt(c.toString(),10)]);else d=u;if(void 0===d||t.selectedSegmentIndex||(d===t.segments.length-1&&(t.segments[d-1].direction=null,t.segments[d-1].length=null),t.segments.splice(d,1)),n&&0===u){var f=ud(t,n,r,a);f&&(e.point=f)}}return wd(t,p)}(t,y,v,c,d,l,0,o);else{if(!t.segments[0]){M=new Ng(t,"segments",{type:"Orthogonal"},!0);t.segments.push(M)}t.segments[0].points=p=Ed(t,y,v,void 0,r)}return p}(t,y.direction,v.direction,y.point,v.point,s,i);Id(t),(t.sourceWrapper||t.targetWrapper)&&function(t,e,i){var n=t.sourcePortWrapper,s=t.targetPortWrapper,r=t.sourceWrapper,o=e.point,a={left:0,right:0,top:0,bottom:0},l={x:0,y:0},h="Top";r?(o=i.point,a=e.margin):(r=t.targetWrapper,a=i.margin);if("Orthogonal"===t.type)if(t.segments&&t.segments.length>0&&t.sourceWrapper&&t.segments[0].direction)e.direction=t.segments[0].direction,l=Od(t,r,l=Nd(r.corners,e.direction),Nd(r.corners,Xd(e.direction)),!1);else{var c={corners:null,direction:null,point:null,margin:null};Dd(r,{corners:null,direction:null,point:o,margin:a},c,t),l=c.point,h=c.direction}else{var d=void 0;t.segments&&t.segments.length>1&&(d=r===t.sourceWrapper?t.segments[0].point:t.segments[t.segments.length-2].point),l=Od(t,r,r.bounds.center,t.segments&&t.segments.length>1?d:o,r===t.targetWrapper)}r===t.sourceWrapper?(e.direction=e.direction||h,e.point=l,t.sourcePortWrapper&&(e.point={x:n.offsetX,y:n.offsetY},t.sourcePadding&&(e.point=md(t,e,i,!1)))):(i.direction=i.direction||h,i.point=l,t.targetPortWrapper&&(i.point={x:s.offsetX,y:s.offsetY},t.targetPadding&&(i.point=md(t,e,i,!0))))}(t,y,v);if("Straight"===t.type||"Bezier"===t.type)m=bd(t,y,v);else if("Orthogonal"===t.type&&t.segments&&t.segments.length>0&&null!==t.segments[0].length&&null!==t.segments[0].direction)m=function(t,e,i,n,s,r,o,a){var l,h,c,d,p=[];if(Id(t),t.segments.length>0){for(var u=0;u<t.segments.length;u++){var g=t.segments[parseInt(u.toString(),10)];if(0===u&&void 0!==t.sourcePortWrapper&&(c=Zd({x:r.offsetX,y:r.offsetY},Vn(n),n.bounds,!1),g.direction===Xd(c)&&(g.direction=c)),u>0&&t.segments[u-1].direction===g.direction)u=Md(t,u,e);else{var m=t.segments[u-1];e.point=g.direction?ld(e,g):m.points[m.points.length-1]}if(u===t.segments.length-1&&(o||s?t.targetWrapper&&void 0===t.targetPortWrapper?(xd(t,e),h=cd(t,e,i)):h=pd(t,e,i):h=hd(t,e,i),h))if(gd(h,t,e),g.points=[],h.length>=2)for(l=0;l<h.length;l++)g.points.push(h[parseInt(l.toString(),10)]);else d=u;if(r&&0===u){var f=ud(t,r,n,a);f&&(e.point=f)}}void 0!==d&&(d===t.segments.length-1&&(t.segments[d-1].direction=null,t.segments[d-1].length=null),t.segments.splice(d,1)),p=wd(t,p)}return p}(t,y,v,d,p,u,g,i);else{var M=void 0;y.direction?M=Bd(d.bounds,y,20):y.direction=v.direction?void 0!==t.targetPortWrapper?v.direction:Xd(v.direction):fn.direction(y.point,v.point),t.segments[0].points=m=Rd(t,y,v,M)}return m}(t,n,t.targetPoint,e,i);return kd(t,s[0],!1),kd(t,s[s.length-1],!0),s}function od(t,e,i,n){var s=null,r=t.nameTable[""+e];if(i&&r){var o={x:i.offsetX,y:i.offsetY},a=function(t,e){for(var i=e.intermediatePoints,n=0;n<i.length-1;n++){var s=i[parseInt(n.toString(),10)],r=i[n+1];if(ad(t,s,r))return s.x===r.x?"Vertical":"Horizontal"}if(i.length>=2){var o=i[i.length-2],a=i[i.length-1];return o.x===a.x?"Vertical":"Horizontal"}return null}(o,r);a&&(s="Horizontal"===a?n.y>o.y?"Bottom":"Top":n.x>o.x?"Right":"Left")}return s}function ad(t,e,i){return e.x===i.x&&t.x===e.x?t.y>=Math.min(e.y,i.y)&&t.y<=Math.max(e.y,i.y):e.y===i.y&&t.y===e.y&&(t.x>=Math.min(e.x,i.x)&&t.x<=Math.max(e.x,i.x))}function ld(t,e){t.direction=e.direction,e.points=[],e.points.push(t.point);var i="Left"===e.direction||"Top"===e.direction?-e.length:e.length,n="Left"===e.direction||"Right"===e.direction?0:90,s=Ld(t.point,i,n);return e.points.push(s),s}function hd(t,e,i){var n,s,r,o;(e.corners=t.sourceWrapper?t.sourceWrapper.corners:void 0,t.sourcePortWrapper)&&(r=Zd({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},Vn(t.sourceWrapper),t.sourceWrapper.bounds,!1),!e.corners||"Bottom"!==e.direction&&"Top"!==e.direction?!e.corners||"Left"!==e.direction&&"Right"!==e.direction||i.point.y>e.corners.top&&i.point.y<e.corners.bottom&&(s=e.point.x>i.point.x?"Left":"Right"):i.point.x>e.corners.left&&i.point.x<e.corners.right&&(s=e.point.y>i.point.y?"Top":"Bottom"));t.sourcePortWrapper&&r===Xd(s)?(("Left"===r||"Right"===r)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.center.y&&i.point.y>=e.corners.top&&i.point.y<=e.corners.center.y?(e.direction="Top",o=e.point.y-e.corners.top+20):("Left"===r||"Right"===r)&&e.point.y>e.corners.center.y&&e.point.y<=e.corners.bottom&&i.point.y>e.corners.center.y&&i.point.y<=e.corners.bottom?(e.direction="Bottom",o=e.corners.bottom-e.point.y+20):("Top"===r||"Bottom"===r)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.center.x&&i.point.x>=e.corners.left&&i.point.x<=e.corners.center.x?(e.direction="Left",o=e.point.x-e.corners.left+20):("Top"===r||"Bottom"===r)&&e.point.x<=e.corners.right&&e.point.x>e.corners.center.x&&i.point.x<=e.corners.right&&i.point.x<e.corners.center.x&&(e.direction="Right",o=e.corners.right-e.point.x+20),e.direction&&o&&(n=Rd(t,e,i,o,!0))):(e.direction=s||Cd(e.direction,e.point,i.point),n=Hd(e,i));return n}function cd(t,e,i){var n;i.corners=t.targetWrapper.corners,Dd(t.targetWrapper,e,i,t);var s=Cd(i.direction,e.point,i.point);e.direction!==i.direction||"Left"!==e.direction&&"Right"!==e.direction?(e.direction=s,n=Hd(e,i)):(e.direction=s,n=Rd(t,e,i,t.targetWrapper.width/2+20),e.point=n[1],Dd(t.targetWrapper,e,i,t),n=Rd(t,e,i));return n}function dd(t,e,i){var n,s;i.corners=t.targetWrapper.corners,"Left"!==e.direction&&"Right"!==e.direction?i.corners.center.y!==e.point.y||i.corners.left<=e.point.x&&e.point.x<=i.corners.right?i.corners.center.y===e.point.y&&"Bottom"===t.segments[t.segments.length-2].direction||i.corners.center.y>e.point.y&&e.point.y>=i.corners.top?(n="Top",s=e.point.y-i.corners.top+20):i.corners.center.y===e.point.y&&"Top"===t.segments[t.segments.length-2].direction||i.corners.center.y<e.point.y&&e.point.y<=i.corners.bottom?(n="Bottom",s=i.corners.bottom-e.point.y+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.top<=e.point.y&&e.point.y<=e.corners.bottom&&(n=e.direction,s=e.point.y>i.point.y?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20):(n="Top",s=i.corners.height/2+20):i.corners.center.x!==e.point.x||i.corners.top<e.point.y&&e.point.y<=i.corners.bottom?i.corners.center.x===e.point.x&&"Right"===t.segments[t.segments.length-2].direction||i.corners.center.x>e.point.x&&e.point.x>=i.corners.left?(n="Left",s=e.point.x-i.corners.left+20):i.corners.center.x===e.point.x&&"Left"===t.segments[t.segments.length-2].direction||i.corners.center.x<=e.point.x&&e.point.x<=i.corners.right?(n="Right",s=i.corners.right-e.point.x+20):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&e.corners.left<=e.point.x&&e.point.x<=e.corners.right&&(n=e.direction,s=e.point.x>i.point.x?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20):(n="Left",s=i.corners.width/2+20);var r="Left"===n||"Top"===n?-s:s,o="Left"===n||"Right"===n?0:90,a=e.point;e.point=Ld(e.point,r,o),e.direction=fn.direction(e.point,i.point),void 0===t.sourcePortWrapper||void 0===t.targetPortWrapper||e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y||(e.direction=i.direction);var l=Rd(t,e,i);return l.splice(0,0,a),l}function pd(t,e,i){var n,s;(i.corners=t.targetWrapper.corners,void 0!==t.sourcePortWrapper)&&(s=Zd({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},Vn(t.sourceWrapper),t.sourceWrapper.bounds,!1));var r=function(t,e,i,n){var s=!1;switch(i.direction){case"Left":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Right"===n&&e.point.x>i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||("Bottom"===n&&e.point.y>i.point.y||"Top"===n&&e.point.y<i.point.y)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction="Right"===n?e.point.y>i.point.y?"Top":"Bottom":e.point.x<i.point.x?"Right":"Left",s=!0):e.point.x>i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)&&!(i.corners.top>e.point.y&&i.corners.bottom<e.point.y)?e.direction="Left":e.point.x<i.point.x&&e.point.y>i.point.y||e.point.x>i.point.x&&e.point.y<=i.point.y&&i.corners.top<e.point.y&&i.corners.center.y>=e.point.y?e.direction="Top":e.point.x<i.point.x&&e.point.y<i.point.y||e.point.x>i.point.x&&e.point.y>i.point.y&&i.corners.bottom<e.point.y&&i.corners.center.y>e.point.y?e.direction="Bottom":e.point.y===i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Right":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&("Bottom"===n&&e.point.y>i.point.y||"Top"===n&&e.point.y<i.point.y)&&e.point.x>i.point.x&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right?(e.direction=e.point.x>i.point.x?"Left":"Right",s=!0):void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Left"===n&&e.point.x<i.point.x&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=e.point.y>i.point.y?"Top":"Bottom",s=!0):e.point.x<i.point.x&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y&&e.point.y===i.point.y||e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Bottom":e.point.x<i.point.x&&(e.point.y>i.point.y||e.point.y<i.point.y)?e.direction="Right":e.point.y===i.point.y&&e.point.x>i.point.x&&(e.direction="Left");break;case"Top":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&"Bottom"===n&&e.point.y>i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right||("Right"===n&&e.point.x>i.point.x||"Left"===n&&i.point.y>e.point.y&&i.point.x>e.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction="Bottom"===n?e.point.x>i.point.x?"Left":"Right":e.point.y<i.point.y?"Bottom":"Top",s=!0):e.point.x===i.point.x&&e.point.y<i.point.y?e.direction="Bottom":e.point.y>i.point.y&&e.point.x>i.corners.left&&e.point.x<i.corners.right?e.direction="Left":e.point.y>=i.point.y?e.direction="Top":e.point.y<i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.point.x&&(e.direction="Right");break;case"Bottom":void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&(("Right"===n||"Left"===n&&i.point.x>e.point.x)&&e.point.y>i.point.y&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Top"===n&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?(e.direction="Right"===n||"Left"===n?e.point.y>i.point.y?"Top":"Bottom":e.point.x>i.point.x?"Left":"Right",s=!0):e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.right>e.point.x?e.point.y<i.point.y&&e.point.x>i.corners.left&&i.corners.center.x>=e.point.x?e.direction="Left":e.point.y<i.point.y&&e.point.x<i.corners.right&&i.corners.center.x<e.point.x&&(e.direction="Right"):e.point.y>i.point.y&&e.point.x>i.point.x?e.direction="Left":e.point.y>i.point.y&&e.point.x<i.point.x?e.direction="Right":e.point.y<=i.point.y&&(e.point.x>i.point.x||i.point.x>e.point.x)&&(e.direction="Bottom")}return s}(t,e,i,s);return!t.selectedSegmentIndex&&void 0!==t.sourcePortWrapper&&void 0!==t.targetPortWrapper&&i.direction===Xd(s)&&(("Left"===i.direction&&e.point.x>i.point.x||"Right"===i.direction&&e.point.x<i.point.x)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom||"Bottom"===i.direction&&e.point.y<i.point.y&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right)?n=dd(t,e,i):t.selectedSegmentIndex||e.direction!==i.direction?!t.selectedSegmentIndex&&("Left"===i.direction&&e.point.x>i.point.x||"Right"===i.direction&&e.point.x<i.point.x)&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.y<=i.point.y&&i.corners.top<=e.point.y&&i.corners.bottom>=e.point.y||"Top"===i.direction&&e.point.y>i.point.y||"Bottom"===i.direction&&e.point.y<i.point.y&&i.corners.left<=e.point.x&&i.corners.right>=e.point.x?n=t.selectedSegmentIndex?Hd(e,i):dd(t,e,i):!t.selectedSegmentIndex&&void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Left"===e.direction||"Right"===e.direction)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom&&("Top"===i.direction||"Bottom"===i.direction)&&i.corners.center.x===e.corners.center.x?(e.direction="Top"===i.direction?"Bottom":"Top",n=Rd(t,e,i,"Top"===i.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20)):!t.selectedSegmentIndex&&void 0!==t.sourceWrapper&&void 0!==t.targetWrapper&&void 0!==t.targetPortWrapper&&("Top"===e.direction||"Bottom"===e.direction)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&("Left"===i.direction||"Right"===i.direction)&&i.corners.center.y===e.corners.center.y?(e.direction="Left"===i.direction?"Right":"Left",n=Rd(t,e,i,"Left"===i.direction?e.corners.right-e.point.x+20:e.point.x-e.corners.left+20)):n=r?Rd(t,e,i,"Left"===e.direction||"Right"===e.direction?"Left"===e.direction?e.point.x-e.corners.left+20:e.corners.right-e.point.x+20:"Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20):Hd(e,i):n=Rd(t,e,i),n}function ud(t,e,i,n){var s,r,o={x:e.offsetX,y:e.offsetY},a=Vn(i);r=e.isPathPort&&n?od(t.parentObj,t.sourceID,e,n):Zd(o,a,i.bounds,!1);var l=t.segments[0];return l.direction!==r&&(!function(t,e,i,n,s,r){var o,a,l=13,h=[];h.push(n);var c=n.y===s.y&&("Left"===e&&s.x<n.x||"Right"===e&&s.x>n.x)||n.x===s.x&&("Top"===e&&s.y<n.y||"Bottom"===e&&s.y>n.y);c||("Top"===e||"Bottom"===e?"Top"===e&&s.y<n.y&&s.y>n.y-l||"Bottom"===e&&s.y>n.y&&s.y<n.y+l?(a="Top"===e?i.top-l:i.bottom+l,h.push({x:n.x,y:a}),h.push({x:n.x+(s.x-n.x)/2,y:a}),h.push({x:n.x+(s.x-n.x)/2,y:s.y})):Math.abs(n.x-s.x)>l&&("Top"===e&&s.y<n.y||"Bottom"===e&&s.y>n.y)?h.push({x:n.x,y:s.y}):(a="Top"===e?i.top-l:i.bottom+l,o=s.x<n.x?i.left-l:i.right+l,h.push({x:n.x,y:a}),h.push({x:s.x,y:a})):"Left"===e&&s.x<n.x&&s.x>n.x-l||"right"===e&&s.x>n.x&&s.x<n.x+l?(o="Left"===e?i.left-l:i.right+l,h.push({x:o,y:n.y}),h.push({x:o,y:n.y+(s.y-n.y)/2}),h.push({x:s.x,y:n.y+(s.y-n.y)/2})):Math.abs(n.y-s.y)>l&&("Left"===e&&s.x<n.x||"Right"===e&&s.x>n.x)?h.push({x:s.x,y:n.y}):(o="Left"===e?i.left-l:i.right+l,h.push({x:o,y:n.y}),h.push({x:o,y:s.y})),r&&(h.push(t.points[0]),h.reverse()),t.points=h)}(l,r,a,l.points[0],l.points[l.points.length-1],!1),s=l.points[l.points.length-1],l.direction=fn.direction(l.points[l.points.length-2],l.points[l.points.length-1])),s}function gd(t,e,i){var n,s=e.segments[e.segments.length-2],r=s.points[s.points.length-1];("Top"!==s.direction&&"Bottom"!==s.direction||r.x!==t[1].x)&&("Left"!==s.direction&&"Right"!==s.direction||r.y!==t[1].y)||(s.points[s.points.length-1]=t[1],n=fn.direction(s.points[0],s.points[s.points.length-1]),void 0!==e.sourceWrapper&&void 0===e.sourcePortWrapper&&n===Xd(s.direction)&&("Left"===s.direction||"Right"===s.direction?s.points[0].x="Right"===s.direction?s.points[0].x-e.sourceWrapper.corners.width:s.points[0].x+e.sourceWrapper.corners.width:s.points[0].y="Bottom"===s.direction?s.points[0].y-e.sourceWrapper.corners.height:s.points[0].y+e.sourceWrapper.corners.height),s.direction=n,s.length=fn.distancePoints(s.points[0],s.points[s.points.length-1]),t.splice(0,1))}function md(t,e,i,n){var s=t.sourcePortWrapper,r=t.targetPortWrapper,o=n?t.targetPadding:t.sourcePadding,a=n?r:s,l=new Tn(a.bounds.x-o,a.bounds.y-o,a.actualSize.width+2*o,a.actualSize.height+2*o),h=[l.topLeft,l.topRight,l.bottomRight,l.bottomLeft];h[h.length]=h[0];var c={x1:e.point.x,y1:e.point.y,x2:i.point.x,y2:i.point.y},d=n?i.point:e.point;return zd(c,h,!0,d)||d}function fd(t,e){var i=[],n=xm(t,t.corners,e);n.push(n[0]);for(var s=0;s<n.length-1;s++)i.push(yd(n[parseInt(s.toString(),10)],n[s+1]));return i}function yd(t,e){return{x1:t.x,y1:t.y,x2:e.x,y2:e.y}}function vd(t,e,i){var n,s=t.rotateAngle+t.parentTransform;if(s){if(s<45)return e;if(s<=135)n={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.middleLeft,topRight:e.topLeft,middleLeft:e.bottomCenter,center:i.center,middleRight:e.topCenter,bottomLeft:e.bottomRight,bottomCenter:e.middleRight,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else if(s<=225)n={width:e.width,height:e.height,topLeft:e.bottomLeft,topCenter:e.bottomCenter,topRight:e.bottomRight,middleLeft:e.middleRight,center:i.center,middleRight:e.middleLeft,bottomLeft:e.topLeft,bottomCenter:e.topCenter,bottomRight:e.topRight,left:i.left,right:i.right,top:i.top,bottom:i.bottom};else{if(!(s<=315))return e;n={width:e.width,height:e.height,topLeft:e.topRight,topCenter:e.middleRight,topRight:e.bottomRight,middleLeft:e.topCenter,center:i.center,middleRight:e.bottomCenter,bottomLeft:e.topLeft,bottomCenter:e.middleLeft,bottomRight:e.bottomLeft,left:i.left,right:i.right,top:i.top,bottom:i.bottom}}return n}return e}function bd(t,e,i){var n=[];if(t.segments&&t.segments.length>0){var s=void 0,r=[],o=e.point;for(s=0;s<t.segments.length;s++){var a=t.segments[parseInt(s.toString(),10)];if((r=[]).push(o),s!==t.segments.length-1?(r.push(a.point),o=a.point):r.push(i.point),t.segments[parseInt(s.toString(),10)].points=r,t.segments.length>1&&fn.equals(a.points[0],a.points[1])&&t.segments.splice(s,1),a)for(var l=0;l<a.points.length;l++)(l>0||0===s)&&n.push(a.points[parseInt(l.toString(),10)])}}return n}function Cd(t,e,i){return"Top"===t||"Bottom"===t?i.x>e.x?"Right":"Left":i.y>e.y?"Bottom":"Top"}function Id(t){if("Straight"===t.type||"Bezier"===t.type){if(0===t.segments.length||t.segments.length>0&&!fn.isEmptyPoint(t.segments[t.segments.length-1].point))if("Bezier"===t.type){var e=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0},!0);t.segments.push(e)}else{e=new Tg(t,"segments",{type:"Straight"},!0);t.segments.push(e)}}else{if(t.segments.length>0)for(var i=!1,n=0;n<t.segments.length;){var s=t.segments[parseInt(n.toString(),10)];i||s&&!(s instanceof Ng||s instanceof Tg||s instanceof Ag)?(t.segments.splice(n,1),i=!0):n++}if(0===t.segments.length||t.segments[t.segments.length-1].direction){e=new Ng(t,"segments",{type:"Orthogonal"},!0);t.segments.push(e)}}}function Md(t,e,i){var n=t.segments[parseInt(e.toString(),10)],s="Left"===n.direction||"Top"===n.direction?-n.length:n.length,r="Left"===n.direction||"Right"===n.direction?0:90,o=Ld(i.point,s,r);return t.segments[e-1].length+=n.length,t.segments[e-1].points[1]=i.point=o,t.segments.splice(e,1),--e}function Sd(t,e,i){var n,s;t.sourcePortWrapper&&(s=Zd({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},Vn(t.sourceWrapper),t.sourceWrapper.bounds,!1));Dd(t.targetWrapper,e,i,t);var r=Cd(i.direction,e.point,i.point);if(void 0===t.sourcePortWrapper||e.direction!==i.direction||("Top"!==e.direction&&"Bottom"!==e.direction||e.corners.center.x!==i.corners.center.x)&&("Left"!==e.direction&&"Right"!==e.direction||e.corners.center.y!==i.corners.center.y))if(i.point.x>=e.corners.left&&i.point.x<=e.corners.right&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom){e.direction=i.point.y>e.point.y?"Bottom":"Top",n=Rd(t,e,i,"Top"===e.direction?e.point.y-e.corners.top+20:e.corners.bottom-e.point.y+20)}else if(t.sourcePortWrapper&&s===Xd(r)){var o;("Left"===s||"Right"===s)&&e.point.y>=e.corners.top&&e.point.y<=e.corners.bottom?(e.direction=i.point.y>e.point.y?"Bottom":"Top",o=e.corners.height/2+20):("Top"===s||"Bottom"===s)&&e.point.x>=e.corners.left&&e.point.x<=e.corners.right&&(e.direction=i.point.x>e.point.x?"Right":"Left",o=e.corners.width/2+20),e.direction&&o?n=Rd(t,e,i,o,!0):(e.direction=r,n=Hd(e,i))}else if(!t.sourcePortWrapper||s!==i.direction||"Top"!==s&&"Bottom"!==s||e.corners.center.x!==i.corners.center.x)if(e.direction===i.direction)if(("Left"===e.direction||"Right"===e.direction)&&i.point.y>e.corners.top-20&&i.point.y<e.corners.bottom+20||("Top"===e.direction||"Bottom"===e.direction)&&i.point.x>e.corners.left-20&&i.point.x<e.corners.right+20){var a=e.direction;e.direction=r,n=Vd(e,i,a,n,20,!1)}else e.direction=r,n=Hd(e,i);else e.direction=r,n=Hd(e,i);else{e.direction=i.point.y>e.point.y?"Bottom":"Top",n=Rd(t,e,i,"Bottom"===e.direction?e.corners.bottom-e.point.y+20:e.point.y-e.corners.top+20)}else e.direction=r,n=Rd(t,e,i,"Top"===r||"Bottom"===r?t.sourceWrapper.height/2+20:t.sourceWrapper.width/2+20),e.point=n[1],"Left"===r||"Right"===r?(i.direction=r,i.point="Left"===r?i.corners.middleLeft:i.corners.middleRight):Dd(t.targetWrapper,e,i,t),n=Rd(t,e,i);return n}function xd(t,e){if(void 0!==t.targetWrapper&&void 0===t.targetPortWrapper){if(Vn(t.targetWrapper).containsPoint(e.point,1)){var i=t.targetWrapper,n=t.segments[t.segments.length-2],s=n.points[n.points.length-1],r=Xd(n.direction);"Bottom"===r?s.y<i.corners.bottom+1&&(n.points[n.points.length-1].y=i.corners.bottom+20,n.length=fn.distancePoints(n.points[0],n.points[n.points.length-1])):"Top"===r?s.y>i.corners.top-1&&(n.points[n.points.length-1].y=i.corners.top-20,n.length=fn.distancePoints(n.points[0],n.points[n.points.length-1])):"Left"===r?s.x>i.corners.left-1&&(n.points[n.points.length-1].x=i.corners.left-20,n.length=fn.distancePoints(n.points[0],n.points[n.points.length-1])):"Right"===r&&s.x<i.corners.right+1&&(n.points[n.points.length-1].x=i.corners.right+20,n.length=fn.distancePoints(n.points[0],n.points[n.points.length-1])),e.point=n.points[n.points.length-1]}}}function wd(t,e){for(var i=0;i<t.segments.length;i++)for(var n=t.segments[parseInt(i.toString(),10)],s=0;s<n.points.length;s++)(s>0||0===i)&&e.push(n.points[parseInt(s.toString(),10)]);return e}function Dd(t,e,i,n){var s,r={x:0,y:0},o=vd(t,t.corners,t.bounds),a=e.margin,l=e.point;if(o.bottomCenter.y+a.bottom<l.y)s="Bottom",r=o.bottomCenter;else if(o.topCenter.y-a.top>l.y)s="Top",r=o.topCenter;else if(o.middleLeft.x-a.left>l.x)s="Left",r=o.middleLeft;else if(o.middleRight.x+a.right<l.x)s="Right",r=o.middleRight;else{var h=Math.abs(l.y-o.topCenter.y),c=Math.abs(l.x-o.middleRight.x),d=Math.abs(l.y-o.bottomCenter.y),p=Math.abs(l.x-o.middleLeft.x),u=Number.MAX_VALUE;u=h,s="Top",r=o.topCenter,u>c&&(u=c,s="Right",r=o.middleRight),u>d&&(u=d,s="Bottom",r=o.bottomCenter),u>p&&(s="Left",r=o.middleLeft)}i.point=r,i.direction=s;var g=Nd(o,Xd(i.direction));i.point=Od(n,t,i.point,g,t===n.targetWrapper)}function Ed(t,e,i,n,s){var r,o,a;if((r=function(t,e){var i=!1;switch(t){case"Left":switch(e){case"Right":case"Bottom":i=!0}break;case"Top":switch(e){case"Left":case"Right":case"Bottom":i=!0}break;case"Bottom":if("Right"===e)i=!0}return i}(e.direction,i.direction))&&Qd(e,i),"Right"===e.direction&&"Left"===i.direction)a=function(t,e,i,n){var s,r=t.sourcePortWrapper,o=Math.round(Math.abs(e.point.y-i.point.y)),a={x:Math.max(e.point.x,e.corners.right),y:e.point.y},l={x:Math.min(i.point.x,i.corners.left),y:i.point.y},h=Td(t);if(n){var c=l;l=a,a=c}e.corners.bottom+h<i.corners.top-h||e.corners.top-h>i.corners.bottom+h||("Bezier"!==t.type||i.corners.left-e.corners.right<=2*h&&i.corners.left-e.corners.right>=5)&&(h=0);e.margin={left:h,right:h,top:h,bottom:h},i.margin={left:h,right:h,top:h,bottom:h},s=0===o&&(e.corners.right<i.corners.left||n&&e.corners.right<i.corners.left)?ws.One:e.point.x+e.margin.right<i.point.x-i.margin.left||t.sourceWrapper!==t.targetWrapper&&(Vn(t.sourceWrapper).containsPoint(l)||Vn(t.targetWrapper).containsPoint(a))?ws.Three:(e.corners.bottom<=i.corners.top||e.corners.top>=i.corners.top||void 0!==r&&r.offsetY<=i.corners.top||void 0===r&&e.corners.right<=i.corners.top||void 0!==r&&r.offsetY>=i.corners.bottom||void 0===r&&(e.corners.right,i.corners.bottom),ws.Five);return s}(t,e,i,r);else if("Right"===e.direction&&"Right"===i.direction)a=function(t,e,i){var n,s=t.sourcePortWrapper,r=t.targetPortWrapper,o=e.point.x-i.point.x,a=e.point.y-i.point.y,l=Td(t);i.margin={left:l,right:l,top:l,bottom:l},e.margin={left:l,right:l,top:l,bottom:l},n=e.corners.right>=i.corners.right?void 0!==s&&(s.offsetY<i.corners.top-i.margin.top||s.offsetY>i.corners.bottom+i.margin.bottom)||void 0===s&&e.corners.middleRight.y<i.corners.top||void 0!==s&&s.offsetY>i.corners.bottom+i.margin.bottom&&e.corners.top>i.corners.bottom||void 0===s&&e.corners.middleRight.y>i.corners.bottom||void 0!==s&&s.offsetY<i.corners.top-i.margin.top&&e.corners.bottom>i.corners.top||void 0===s&&e.corners.middleRight.y>i.corners.bottom?ws.Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?ws.Five:0===o||0===a?ws.One:ws.Three:void 0!==r&&e.corners.bottom<r.offsetY-i.margin.top||void 0===r&&e.corners.bottom<i.corners.middleRight.y||void 0!==r&&e.corners.top>r.offsetY+i.margin.right||void 0===r&&e.corners.top>i.corners.middleRight.y||void 0!==r&&(void 0!==s&&s.offsetX<i.corners.left&&s.offsetX!==r.offsetX&&Math.abs(e.corners.right-i.corners.left)<=20||void 0===s&&e.corners.right<i.corners.left&&e.corners.center.x!==i.corners.center.x&&e.corners.center.y!==i.corners.center.y)?ws.Three:e.corners.right<i.corners.left?ws.Five:0===o||0===a?ws.One:ws.Three;return n}(t,e,i);else if("Right"===e.direction&&"Top"===i.direction)a=function(t,e,i,n){var s,r=t.targetPortWrapper,o=t.sourcePortWrapper,a={x:Math.max(e.point.x,e.corners.right),y:e.point.y},l={x:i.point.x,y:Math.min(i.point.y,i.corners.top)},h=Td(t);if(i.margin={left:h,right:h,top:h,bottom:h},e.margin={top:h,bottom:h,left:h,right:h},n){var c=o;o=r,r=c;var d=a;a=l,l=d}s=void 0!==o&&o.offsetY<i.corners.top-i.margin.top||void 0===o&&e.corners.bottom<i.corners.top-i.margin.top?e.corners.bottom<i.corners.top?void 0!==r&&e.corners.right+e.margin.right<r.offsetX||void 0===r&&e.corners.right+e.margin.right<i.corners.topCenter.x?ws.Two:ws.Four:void 0!==r&&e.corners.left>r.offsetX||void 0===r&&e.corners.left>i.corners.topCenter.x?ws.Four:ws.Two:void 0!==o&&Math.abs(e.corners.right-i.corners.left)<=5&&Math.abs(o.offsetY-i.corners.top)<=5||void 0!==r&&e.corners.right<i.corners.left&&Math.abs(r.offsetX-e.corners.topCenter.x)>=25&&e.corners.middleRight.y+e.margin.right<r.offsetY?ws.Two:e.corners.right<i.corners.left?ws.Four:t.sourceWrapper!==t.targetWrapper&&(Vn(t.sourceWrapper).containsPoint(l)||Vn(t.targetWrapper).containsPoint(a))?ws.Two:ws.Four;return s}(t,e,i,r);else if("Right"===e.direction&&"Bottom"===i.direction)a=function(t,e,i,n){var s,r=Td(t);e.margin={left:r,right:r,top:r,bottom:r},i.margin={left:r,right:r,top:r,bottom:r};var o=t.sourcePortWrapper,a=t.targetPortWrapper;if(n){var l=o;o=a,a=l}s=void 0!==o&&o.offsetY>i.corners.bottom+i.margin.bottom||void 0===o&&e.corners.middleRight.y>i.corners.bottom+i.margin.bottom?e.corners.top>i.corners.bottom?void 0!==a&&e.corners.right+e.margin.right<a.offsetX||void 0===a&&e.corners.right+e.margin.right<i.corners.bottomCenter.x?ws.Two:ws.Four:void 0!==a&&e.corners.left>a.offsetX||void 0===a&&e.corners.left>i.corners.bottomCenter.x?ws.Four:ws.Two:void 0!==o&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-i.corners.bottom)<=25?ws.Two:(e.corners.right,i.corners.left,ws.Four);return s}(t,e,i,r);else if("Bottom"===e.direction&&"Top"===i.direction)a=function(t,e,i){var n,s=e.point.x-i.point.x,r=Td(t);e.corners.right+r<i.corners.left-r||e.corners.left-r>i.corners.right+r||("Bezier"!==t.type||i.corners.top-e.corners.bottom<=2*r&&i.corners.top-e.corners.bottom>=5)&&(r=0);e.margin={left:r,right:r,top:r,bottom:r},i.margin={left:r,right:r,top:r,bottom:r},n=0===s&&e.corners.bottom<i.corners.top?ws.One:e.corners.bottom+e.margin.bottom<i.corners.top-i.margin.top?ws.Three:(e.corners.right+e.margin.right<i.corners.left-i.margin.left||(e.corners.left,e.margin.left,i.corners.right,i.margin.right),ws.Five);return n}(t,e,i);else if("Bottom"===e.direction&&"Bottom"===i.direction){var l=Td(t);e.margin={left:l,right:l,top:l,bottom:l},i.margin={left:l,right:l,top:l,bottom:l},a=function(t,e,i){var n,s=t.sourcePortWrapper,r=t.targetPortWrapper,o=Math.round(Math.abs(e.point.x-i.point.x)),a=Math.round(Math.abs(i.point.y-i.point.y));n=e.corners.bottom<i.corners.bottom?void 0!==s&&s.offsetX<i.corners.left-i.margin.left||void 0===s&&e.corners.bottomCenter.x<i.corners.left-i.margin.left||void 0!==s&&s.offsetX>i.corners.right+i.margin.right||void 0===s&&e.corners.bottomCenter.x>i.corners.right+i.margin.right?ws.Three:e.corners.bottom<i.corners.top?ws.Five:0===o||0===a?ws.One:ws.Three:void 0!==r&&e.corners.left-e.margin.left>r.offsetX||void 0===r&&e.corners.left>i.corners.left||void 0!==r&&e.corners.right+e.margin.right<r.offsetX||void 0===r&&e.corners.right<i.corners.right?ws.Three:e.corners.top>i.corners.bottom?ws.Five:0===o||0===a?ws.One:ws.Three;return n}(t,e,i)}else"Bottom"===e.direction&&"Left"===i.direction?a=function(t,e,i,n){var s,r=t.sourcePortWrapper,o=t.targetPortWrapper,a=Td(t);if(i.margin={left:a,right:a,top:a,bottom:a},e.margin={top:a,bottom:a,left:a,right:a},n){var l=r;r=o,o=l}s=void 0!==r&&r.offsetX<i.corners.left-i.margin.left||void 0===r&&e.corners.bottomCenter.x<i.corners.bottomLeft.x-i.margin.left?e.corners.right<i.corners.left?void 0!==o&&e.corners.bottom+e.margin.bottom<o.offsetY||void 0===o&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y?ws.Two:ws.Four:void 0!==o&&e.corners.top>o.offsetY||void 0===o&&e.corners.top>i.corners.middleLeft.y?ws.Four:ws.Two:void 0!==o&&Math.abs(e.corners.right-i.corners.left)<=25&&Math.abs(o.offsetY-e.corners.bottom)<=25?ws.Two:ws.Four;return s}(t,e,i,r):"Left"===e.direction&&"Left"===i.direction?a=function(t,e,i){var n=t.sourcePortWrapper,s=t.targetPortWrapper,r=Td(t);e.margin={left:r,right:r,top:r,bottom:r},i.margin={left:r,right:r,top:r,bottom:r};var o,a=Math.round(Math.abs(e.point.x-i.point.x)),l=Math.round(Math.abs(e.point.y-i.point.y));o=e.corners.left<i.corners.left?void 0!==s&&e.corners.bottom+e.margin.bottom<s.offsetY||void 0===s&&e.corners.bottom+e.margin.bottom<i.corners.middleLeft.y||void 0!==s&&e.corners.top-e.margin.top>s.offsetY||void 0===s&&e.corners.top-e.margin.top>i.corners.middleLeft.y?ws.Three:e.corners.right<i.corners.left||i.corners.right<e.corners.left?ws.Five:0===a||0===l?ws.One:ws.Three:void 0!==n&&n.offsetY<i.corners.top-i.margin.top||void 0===n&&e.corners.middleLeft.y<i.corners.top||void 0!==n&&n.offsetY>i.corners.bottom+i.margin.bottom||void 0===n&&e.corners.middleLeft.y>i.corners.bottom+i.margin.bottom?ws.Three:e.corners.left>i.corners.right?ws.Five:0===a||0===l?ws.One:ws.Three;return o}(t,e,i):"Left"===e.direction&&"Top"===i.direction?a=function(t,e,i,n){var s,r=t.sourcePortWrapper,o=Td(t);i.margin={left:o,right:o,top:o,bottom:o},e.margin={top:o,bottom:o,left:o,right:o};var a=t.targetPortWrapper,l={x:Math.min(e.point.x,e.corners.left),y:e.point.y},h={x:i.point.x,y:Math.min(i.point.y,i.corners.top)};if(n){var c=r;r=a,a=c;var d=l;l=h,h=d}s=void 0!==r&&r.offsetY<i.corners.top-i.margin.top||void 0===r&&(e.corners.bottom<i.corners.top-i.margin.top||e.corners.middleLeft.y<i.corners.top-i.margin.top)?e.corners.bottom<i.corners.top?void 0!==a&&e.corners.left-e.margin.left>a.offsetX||void 0===a&&e.corners.left-e.margin.left>i.corners.topCenter.x?ws.Two:ws.Four:void 0!==a&&e.corners.right<a.offsetX||void 0===a&&e.corners.right<i.corners.topCenter.x?ws.Four:ws.Two:void 0!==r&&Math.abs(e.corners.left-i.corners.right)<=25&&Math.abs(r.offsetY-i.corners.top)<=25||t.sourceWrapper!==t.targetWrapper&&(Vn(t.sourceWrapper).containsPoint(h)||Vn(t.targetWrapper).containsPoint(l))?ws.Two:(e.corners.left,i.corners.right,ws.Four);return s}(t,e,i,r):"Top"===e.direction&&"Top"===i.direction&&(a=function(t,e,i){var n,s=t.sourcePortWrapper,r=t.targetPortWrapper,o=Math.round(Math.abs(e.point.x-i.point.x)),a=Math.round(Math.abs(e.point.y-i.point.y)),l=Td(t);i.margin={left:l,right:l,top:l,bottom:l},e.margin={top:l,bottom:l,left:l,right:l},n=e.corners.top<i.corners.top?void 0!==r&&e.corners.left-e.margin.left>r.offsetX||void 0===r&&e.corners.left>i.corners.left||void 0!==r&&e.corners.right+e.margin.right<r.offsetX||void 0===r&&e.corners.right<i.corners.right?ws.Three:e.corners.bottom<i.corners.top?ws.Five:0===o||0===a?ws.One:ws.Three:void 0!==s&&s.offsetX>i.corners.right+i.margin.right||void 0===s&&e.corners.left>i.corners.right||void 0!==s&&s.offsetX<i.corners.left-i.margin.left||void 0===s&&e.corners.bottomRight.x<i.corners.left?ws.Three:e.corners.top>i.corners.bottom?ws.Five:0===o||0===a?ws.One:ws.Three;return n}(t,e,i));return r&&Qd(e,i),o=function(t,e,i,n,s,r){var o,a,l=t.sourceWrapper,h=t.targetWrapper,c=l.corners,d=h.corners,p=20,u={corners:i.corners,point:i.point,direction:i.direction,margin:i.margin},g={corners:n.corners,point:n.point,direction:n.direction,margin:n.margin};if(!(u.direction===g.direction&&e!==ws.Five||u.direction!==Xd(g.direction)&&e!==ws.Three))switch(u.direction){case"Left":c.middleLeft.x>d.middleRight.x&&(a=(c.middleLeft.x-d.middleRight.x)/2,p=r?a:Math.min(p,a));break;case"Right":c.middleRight.x<d.middleLeft.x&&(a=(d.middleLeft.x-c.middleRight.x)/2,p=r?a:Math.min(p,a));break;case"Top":c.topCenter.y>d.bottomCenter.y&&(a=(c.topCenter.y-d.bottomCenter.y)/2,p=r?a:Math.min(p,a));break;case"Bottom":c.bottomCenter.y<d.topCenter.y&&(a=(d.topCenter.y-c.bottomCenter.y)/2,p=r?a:Math.min(p,a))}p=Bd(c,u,p);var m="Bezier"===t.type;s&&(p=Math.max(p,s));e===ws.One&&(o=[u.point,g.point]);e===ws.Two&&(o=Hd(u,g));e===ws.Three&&(o=Rd(t,u,g,p,void 0,m));if(e===ws.Four){o=Vd(u,g,void 0,o,p,m)}e===ws.Five&&(o=function(t,e,i,n){void 0===i&&(i=20);void 0===n&&(n=!1);n&&(i=20);var s,r,o=i,a=t.corners.left-t.margin.left,l=t.corners.right+t.margin.right,h=t.corners.bottom+t.margin.bottom,c=t.corners.top-t.margin.top,d=e.corners.left-e.margin.left,p=e.corners.right+e.margin.right,u=e.corners.bottom+e.margin.bottom,g=e.corners.top-e.margin.top;switch(t.direction){case"Left":(c>g&&c<u||h<u&&h>g)&&a>d&&a<=p&&i>=20&&(o=t.point.x-e.corners.left+o),n&&t.direction===e.direction&&t.corners.left>e.corners.left&&t.corners.left-e.corners.right>=20&&(o=(t.corners.left-e.corners.right)/2),r=Ld(t.point,o,180);break;case"Top":(a>d&&a<p||l<p&&l>d)&&c>g&&c<=u&&i>=20&&(o=t.point.y-e.corners.top+o),n&&t.direction===e.direction&&t.corners.top>e.corners.top&&t.corners.top-e.corners.bottom>=20&&(o=(t.corners.top-e.corners.bottom)/2),r=Ld(t.point,o,270);break;case"Right":(c>g&&c<u||h<u&&h>g)&&l<p&&l>=d&&i>=20&&(o=e.corners.right-t.point.x+o),n&&t.direction===e.direction&&t.corners.right<e.corners.right&&e.corners.left-t.corners.right>=20&&(o=(e.corners.left-t.corners.right)/2),r=Ld(t.point,o,0);break;case"Bottom":(a>d&&a<p||l<p&&l>d)&&h<u&&h>=g&&i>=20&&(o=e.corners.bottom-t.point.y+o),n&&t.direction===e.direction&&t.corners.bottom<e.corners.bottom&&e.corners.top-t.corners.bottom>=20&&(o=(e.corners.top-t.corners.bottom)/2),r=Ld(t.point,o,90)}s=[t.point,r];var m=void 0;if("Top"===t.direction||"Bottom"===t.direction){var f=t.direction;t.direction=r.x>e.point.x?"Left":"Right",t.point=r,s=Vd(t,e,f,s,m=n?.5*Math.abs(r.x-e.point.x):m,n)}else{f=t.direction;t.direction=r.y>e.point.y?"Top":"Bottom",t.point=r,s=Vd(t,e,f,s,m=n?.5*Math.abs(r.y-e.point.y):m,n)}return s}(u,g,p,m));return o}(t,a,e,i,n,s),"Bezier"===t.type&&function(t,e,i){if("Bezier"===t.type)if(0===t.segments.length){var n=i[0],s=i[i.length-1];if(e===ws.One){var r=Math.min(20,.5*fn.findLength(n,s)),o={angle:Ad(n,s),distance:r},a={angle:Ad(s,n),distance:r},l=fn.direction(n,s),h=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:o,vector2:a,orientation:"Left"===l||"Right"===l?"Horizontal":"Vertical"},!0);t.segments.push(h)}else if(e===ws.Two){o={angle:Ad(n,p=i[1]),distance:.5*fn.findLength(n,p)},a={angle:Ad(s,p),distance:.5*fn.findLength(s,p)},l=fn.direction(n,p),h=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:o,vector2:a,orientation:"Left"===l||"Right"===l?"Horizontal":"Vertical"},!0);t.segments.push(h)}else if(e===ws.Three){var c=i[1],d=i[i.length-2],p={x:.5*(c.x+d.x),y:.5*(c.y+d.y)},u=(o={angle:Ad(n,c),distance:.5*fn.findLength(n,c)},a={angle:Ad(p,c),distance:.5*fn.findLength(p,c)},fn.direction(n,c)),g=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:o,vector2:a,point:p,orientation:"Left"===u||"Right"===u?"Horizontal":"Vertical"},!0);t.segments.push(g);var m={angle:Ad(p,d),distance:.5*fn.findLength(p,d)},f={angle:Ad(s,d),distance:.5*fn.findLength(s,d)},y=fn.direction(p,d),v=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:m,vector2:f,orientation:"Left"===y||"Right"===y?"Horizontal":"Vertical"},!0);t.segments.push(v)}else if(e===ws.Four){c=i[1],d=i[2];var b=i[3],C={x:.5*(c.x+d.x),y:.5*(c.y+d.y)},I={x:.5*(d.x+b.x),y:.5*(d.y+b.y)};o={angle:Ad(n,c),distance:.5*fn.findLength(n,c)},a={angle:Ad(C,c),distance:.5*fn.findLength(C,c)},u=fn.direction(n,c),g=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:o,vector2:a,point:C,orientation:"Left"===u||"Right"===u?"Horizontal":"Vertical"},!0);t.segments.push(g);m={angle:Ad(C,d),distance:.5*fn.findLength(C,d)},f={angle:Ad(I,d),distance:.5*fn.findLength(I,d)},y=fn.direction(C,d),v=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:m,vector2:f,point:I,orientation:"Left"===y||"Right"===y?"Horizontal":"Vertical"},!0);t.segments.push(v);var M={angle:Ad(I,b),distance:.5*fn.findLength(I,b)},S={angle:Ad(s,b),distance:.5*fn.findLength(s,b)},x=fn.direction(I,b),w=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:M,vector2:S,orientation:"Left"===x||"Right"===x?"Horizontal":"Vertical"},!0);t.segments.push(w)}else if(e===ws.Five){c=i[1],d=i[2],b=i[3];var D=i[4],E=(C={x:.5*(c.x+d.x),y:.5*(c.y+d.y)},I={x:.5*(d.x+b.x),y:.5*(d.y+b.y)},{x:.5*(b.x+D.x),y:.5*(b.y+D.y)});o={angle:Ad(n,c),distance:.5*fn.findLength(n,c)},a={angle:Ad(C,c),distance:.5*fn.findLength(C,c)},u=fn.direction(n,c),g=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:o,vector2:a,point:C,orientation:"Left"===u||"Right"===u?"Horizontal":"Vertical"},!0);t.segments.push(g);m={angle:Ad(C,d),distance:.5*fn.findLength(C,d)},f={angle:Ad(I,d),distance:.5*fn.findLength(I,d)},y=fn.direction(C,d),v=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:m,vector2:f,point:I,orientation:"Left"===y||"Right"===y?"Horizontal":"Vertical"},!0);t.segments.push(v);M={angle:Ad(I,b),distance:.5*fn.findLength(I,b)},S={angle:Ad(E,b),distance:.5*fn.findLength(E,b)},x=fn.direction(I,b),w=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:M,vector2:S,point:E,orientation:"Left"===x||"Right"===x?"Horizontal":"Vertical"},!0);t.segments.push(w);var T={angle:Ad(E,D),distance:.5*fn.findLength(E,D)},A={angle:Ad(s,D),distance:.5*fn.findLength(s,D)},N=fn.direction(E,D),L=new Ag(t,"segments",{type:"Bezier",isInternalSegment:!0,vector1:T,vector2:A,orientation:"Left"===N||"Right"===N?"Horizontal":"Vertical"},!0);t.segments.push(L)}else{h=new Ag(t,"segments",{type:"Bezier"},!0);t.segments.push(h)}}else for(var O=0;O<t.segments.length;O++)t.bezierSettings.allowSegmentsReset&&(t.segments[parseInt(O.toString(),10)].isInternalSegment=!0)}(t,a,o),o}function Td(t){return t.connectorSpacing>=13?13:t.connectorSpacing<=1?1:t.connectorSpacing}function Ad(t,e){var i={x:e.x,y:t.y},n=fn.findLength(i,e),s=fn.findLength(e,t),r=Math.asin(n/s);return r=180*r/Math.PI,t.x<e.x?t.y>e.y&&(r=360-r):r=t.y<e.y?180-r:180+r,r}function Nd(t,e){var i;switch(e){case"Left":i=t.middleLeft;break;case"Top":i=t.topCenter;break;case"Right":i=t.middleRight;break;case"Bottom":i=t.bottomCenter}return i}function Ld(t,e,i){return fn.transform(t,i,e)}function Od(t,e,i,n,s){i={x:i.x,y:i.y},n={x:n.x,y:n.y};var r,o,a=s?t.targetWrapper:t.sourceWrapper,l=s?t.targetPadding:t.sourcePadding,h=s||"Orthogonal"===t.type||"Bezier"===t.type?i:n,c=a,d=ts(-a.parentTransform,a.offsetX,a.offsetY,i),p=ts(-a.parentTransform,a.offsetX,a.offsetY,n);if("Orthogonal"===t.type||"Bezier"===t.type){d.x===p.x&&(d.y<p.y?d.y-=5:d.y+=5),d.y===p.y&&(d.x<p.x?d.x-=5:d.x+=5),i=ts(a.parentTransform,a.offsetX,a.offsetY,d)}else if(s){var u=fn.findAngle(i,n);n=fn.transform({x:n.x,y:n.y},u,Math.max(a.actualSize.width,a.actualSize.height))}else{u=fn.findAngle(n,i);i=fn.transform({x:i.x,y:i.y},u,Math.max(a.actualSize.width,a.actualSize.height))}return(t.sourcePadding||t.targetPadding)&&(r=new Tn(a.bounds.x-l,a.bounds.y-l,a.actualSize.width+2*l,a.actualSize.height+2*l)),a instanceof Xs&&a.data?(o=r?[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft]:c.getPoints(),c.data.split("m").length-1+(c.data.split("M").length-1)==1&&(o[o.length]=o[0])):(o=r?[r.topLeft,r.topRight,r.bottomRight,r.bottomLeft]:xm(a,a.corners))[o.length]=o[0],zd({x1:i.x,y1:i.y,x2:n.x,y2:n.y},o,!0,h)||i}function kd(t,e,i){return e.x=Math.round(100*e.x)/100,e.y=Math.round(100*e.y)/100,i?t.targetPoint=e:t.sourcePoint=e,e}function zd(t,e,i,n){var s,r=e.length,o={x1:e[0].x,y1:e[0].y,x2:e[1].x,y2:e[1].y},a=Pd(t,o);if(a&&(s=fn.distancePoints(a,n)),isNaN(s)||s>0)for(var l=1;l<r-1;l++){var h=Pd(t,o={x1:e[parseInt(l.toString(),10)].x,y1:e[parseInt(l.toString(),10)].y,x2:e[l+1].x,y2:e[l+1].y});if(h){var c=fn.distancePoints(h,n);if((isNaN(s)||s>c)&&(s=c,a=h),s>=0&&s<=1)break}}return a}function Pd(t,e){var i,n,s,r,o,a,l,h,c,d,p,u,g=t.x1,m=t.y1,f=t.x2,y=t.y2,v=e.x1,b=e.y1,C=e.x2,I=e.y2;if(d=(i=y-m)*C+(s=g-f)*I+(o=f*m-g*y),0!==(c=i*v+s*b+o)&&0!==d&&jd(c,d))return null;if(h=(n=I-b)*f+(r=v-C)*y+(a=C*b-v*I),0!==(l=n*g+r*m+a)&&0!==h&&jd(l,h))return null;var M=i*r-n*s;return 0===M?null:(p=M<0?-M/2:M/2,p=0,{x:(u=s*a-r*o)<0?(u-p)/M:(u+p)/M,y:(u=n*o-i*a)<0?(u-p)/M:(u+p)/M})}function jd(t,e){return t*e>=0}function Bd(t,e,i){switch(e.direction){case"Left":e.point.x>t.left&&(i=e.point.x-t.left>i?e.point.x-t.left+i:i);break;case"Right":e.point.x<t.right&&(i=t.right-e.point.x>i?t.right-e.point.x+i:i);break;case"Top":e.point.y>t.top&&(i=e.point.y-t.top>i?e.point.y-t.top+i:i);break;case"Bottom":e.point.y<t.bottom&&(i=t.bottom-e.point.y>i?t.bottom-e.point.y+i:i)}return i}function Hd(t,e){var i;switch(t.direction){case"Left":case"Right":var n={x:e.point.x,y:t.point.y};i=fn.equals(t.point,n)||fn.equals(e.point,n)?[t.point,e.point]:[t.point,n,e.point];break;case"Top":case"Bottom":var s={x:t.point.x,y:e.point.y};i=fn.equals(t.point,s)||fn.equals(e.point,s)?[t.point,e.point]:[t.point,s,e.point]}return i}function Rd(t,e,i,n,s,r){void 0===r&&(r=!1),n||(n=20),r&&e.direction!==i.direction&&(n="Left"===e.direction||"Right"===e.direction?Math.floor(.5*Math.abs(e.point.x-i.point.x)):Math.floor(.5*Math.abs(e.point.y-i.point.y)));var o,a,l,h=t.sourcePortWrapper,c=i.point.x-e.point.x,d=i.point.y-e.point.y;if(!s&&(Math.abs(c)<.001||Math.abs(d)<.001)&&void 0===i.direction)return[e.point,i.point];if(void 0===t.targetWrapper&&Math.abs(c)<=31&&Math.abs(d)<=31){if("Left"===e.direction||"Right"===e.direction?Math.abs(d)<12&&(e.direction=e.point.y>i.point.y?"Top":"Bottom"):Math.abs(c)<12&&(e.direction=e.point.x>i.point.x?"Left":"Right"),Math.abs(c)>12||Math.abs(d)>12)return Hd(e,i);n+=5}return"Left"===e.direction||"Right"===e.direction?("Right"===e.direction?(void 0!==i.direction&&"Right"===i.direction&&(n=Math.max(e.point.x,i.point.x)-e.point.x+n),e.point.x>i.point.x&&void 0===h&&(n=-n)):(void 0!==i.direction&&"Left"===i.direction&&(n=e.point.x-Math.min(e.point.x,i.point.x)+n),(e.point.x>i.point.x||void 0!==h||"Left"===e.direction)&&(n=-n)),l=i.point.y-e.point.y,o=Ld(e.point,n,0),0!==(l=i.point.y-o.y)&&(a=Ld(o,i.point.y-o.y,90))):"Top"!==e.direction&&"Bottom"!==e.direction||("Bottom"===e.direction?void 0!==i.direction&&"Bottom"===i.direction&&(n=Math.max(e.point.y,i.point.y)-e.point.y+n):(void 0!==i.direction&&"Top"===i.direction&&(n=e.point.y-Math.min(e.point.y,i.point.y)+n),(e.point.y>i.point.y||void 0!==h||"Top"===e.direction)&&(n=-n)),l=i.point.x-e.point.x,o=(e.direction,Ld(e.point,n,90)),0!==(l=i.point.x-o.x)&&(a=Ld(o,i.point.x-o.x,0))),0===l?[e.point,i.point]:[e.point,o,a,i.point]}function Vd(t,e,i,n,s,r){var o;switch(void 0===s&&(s=20),void 0===r&&(r=!1),void 0===i?(t.margin={left:2,right:2,top:2,bottom:2},e.margin={left:0,right:5,top:0,bottom:5},r&&(t.margin={left:10,right:10,top:10,bottom:10},e.margin={left:10,right:10,top:10,bottom:10},"Left"===t.direction?(s=Wd(t,e,i,s),t.corners.left-e.corners.right>=5&&(s=Math.abs(t.point.x-t.corners.left)+.5*Math.floor(t.corners.left-e.corners.right))):"Right"===t.direction?(s=Yd(t,e,s,i),e.corners.left-t.corners.right>=5&&(s=Math.abs(t.point.x-t.corners.right)+.5*Math.floor(e.corners.left-t.corners.right))):"Top"===t.direction?(s=Fd(t,e,i,s),t.corners.top-e.corners.bottom>=5&&(s=Math.abs(t.point.y-t.corners.top)+.5*Math.floor(t.corners.top-e.corners.bottom))):"Bottom"===t.direction&&(s=_d(t,e,s,i),e.corners.top-t.corners.bottom>=5&&(s=Math.abs(t.point.y-t.corners.bottom)+.5*Math.floor(e.corners.top-t.corners.bottom))))):("Bottom"===t.direction?r?e.corners.top-t.corners.bottom<20&&(s=e.corners.bottom-t.point.y+25):e.corners.top>t.corners.bottom&&e.corners.top-t.corners.bottom<20&&(s=(e.corners.top-t.corners.bottom)/2):"Top"===t.direction?r?t.corners.top-e.corners.bottom<20&&(s=t.point.y-e.corners.top+25):e.corners.bottom<t.corners.top&&t.corners.top-e.corners.bottom<20&&(s=(t.corners.top-e.corners.bottom)/2):"Right"===t.direction?r?e.corners.left-t.corners.right<20&&(s=e.corners.right-t.point.x+25):e.corners.left>t.corners.right&&e.corners.left-t.corners.right<20&&(s=(e.corners.left-t.corners.right)/2):"Left"===t.direction&&(r?t.corners.left-e.corners.right<20&&(s=t.point.x-e.corners.left+25):e.corners.right<t.corners.left&&t.corners.left-e.corners.right<20&&(s=(t.corners.left-e.corners.right)/2)),i===e.direction&&r&&("Bottom"===e.direction&&t.point.y>e.point.y||"Top"===e.direction&&t.point.y<e.point.y?"Left"===t.direction?s=Wd(t,e,i,20):"Right"===t.direction&&(s=Yd(t,e,20,i)):("Right"===e.direction&&t.point.x>e.point.x||"Left"===e.direction&&t.point.x<e.point.x)&&("Top"===t.direction?s=Fd(t,e,i,20):"Bottom"===t.direction&&(s=_d(t,e,20,i))))),t.direction){case"Left":s=r?s:Wd(t,e,i,s),o=Ld(t.point,s,180);break;case"Right":s=r?s:Yd(t,e,s,i),o=Ld(t.point,s,0);break;case"Top":s=r?s:Fd(t,e,i,s),o=Ld(t.point,s,270);break;case"Bottom":s=r?s:_d(t,e,s,i),o=Ld(t.point,s,90)}return void 0!==n?n.push(o):n=[t.point,o],"Top"===t.direction||"Bottom"===t.direction?Ud(o,"horizontal",t,e,n,r):"Right"!==t.direction&&"Left"!==t.direction||Ud(o,"vertical",t,e,n,r),n}function Ud(t,e,i,n,s,r){var o,a,l;"horizontal"===e?(i.margin={left:0,right:10,top:0,bottom:10},n.margin={left:0,right:10,top:0,bottom:10}):"vertical"===e&&(i.margin={left:10,right:0,top:10,bottom:0},n.margin={left:10,right:0,top:10,bottom:0});var h=20;if("horizontal"===e){switch(n.direction){case"Left":if(i.corners.right+i.margin.right<n.corners.left-n.margin.left&&(n.corners.left-i.margin.right-i.corners.right>h||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y))if(!r||"Top"!==i.direction&&"Bottom"!==i.direction){c=Math.min(Math.abs(n.corners.left-i.corners.right)/2,20);h=i.corners.right-t.x+c}else{var c=Math.abs(n.corners.left-i.corners.right)/2;h=i.corners.right-t.x+c}else h="Top"===i.direction&&t.y>n.point.y||"Bottom"===i.direction&&t.y<n.point.y?Math.min(n.corners.left,t.x)-t.x-20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.min(n.corners.left,i.corners.left)-t.x-20:n.corners.left-t.x-20;break;case"Right":if(i.corners.left-i.margin.left>n.corners.right+n.margin.right&&(i.corners.left-i.margin.right-n.corners.right>h||i.corners.top-i.margin.top<=n.point.y&&i.corners.bottom+i.margin.bottom>=n.point.y))if(!r||"Top"!==i.direction&&"Bottom"!==i.direction){c=Math.min(Math.abs(i.corners.left-n.corners.right)/2,20);h=i.corners.left-t.x-c}else{var c=Math.abs(i.corners.left-n.corners.right)/2;h=i.corners.left-t.x-c}else h="Top"===i.direction&&t.y>n.point.y||"Bottom"===i.direction&&t.y<n.point.y?Math.max(n.corners.right,t.x)-t.x+20:t.x>=i.corners.left-i.margin.left&&t.x<=i.corners.right+i.margin.right?Math.max(n.corners.right,i.corners.right)-t.x+20:n.corners.right-t.x+20}o=Ld(t,h,0),a=Ld(o,n.point.y-t.y,90),l=n.point}else if("vertical"===e){switch(n.direction){case"Top":if(i.corners.bottom+i.margin.bottom<n.corners.top-n.margin.top&&(n.corners.top-i.margin.top-i.corners.bottom>h||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x))if(!r||"Right"!==i.direction&&"Left"!==i.direction){c=Math.min(Math.abs(n.corners.top-i.corners.bottom)/2,20);h=i.corners.bottom-t.y+c}else{c=Math.abs(n.corners.top-i.corners.bottom)/2;h=i.corners.bottom-t.y+c}else h="Left"===i.direction&&t.x>n.point.x||"Right"===i.direction&&t.x<n.point.x?Math.min(n.corners.top,t.y)-t.y-20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.min(n.corners.top,i.corners.top)-t.y-20:n.corners.top-t.y-20;break;case"Bottom":if(i.corners.top-i.margin.top>n.corners.bottom+n.margin.bottom&&(i.corners.top-i.margin.top-n.corners.bottom>h||i.corners.left-i.margin.left<=n.point.x&&i.corners.right+i.margin.right>=n.point.x))if(!r||"Right"!==i.direction&&"Left"!==i.direction){c=Math.min(Math.abs(i.corners.top-n.corners.bottom)/2,20);h=i.corners.top-t.y-c}else{c=Math.abs(i.corners.top-n.corners.bottom)/2;h=i.corners.top-t.y-c}else h="Left"===i.direction&&t.x>n.point.x||"Right"===i.direction&&t.x<n.point.x?Math.max(n.corners.bottom,t.y)-t.y+20:t.y>=i.corners.top-i.margin.top&&t.y<=i.corners.bottom+i.margin.bottom?Math.max(n.corners.bottom,i.corners.bottom)-t.y+20:n.corners.bottom-t.y+20}o=Ld(t,h,90),a=Ld(o,n.point.x-t.x,0),l=n.point}s.push(o),s.push(a),s.push(l)}function Fd(t,e,i,n){return t.corners.top-t.margin.top>e.corners.top+e.margin.top&&t.corners.top-t.margin.top<=e.corners.bottom+e.margin.bottom?(("Right"===e.direction&&t.point.x<e.point.x||"Left"===e.direction&&t.point.x>e.point.x)&&(n+=t.corners.top-e.corners.top),n+=t.point.y-t.corners.top):void 0!==i&&"Left"!==i&&"Right"===e.direction&&t.point.x<e.point.x||void 0!==i&&"Right"!==i&&"Left"===e.direction&&e.point.x<t.point.x?n+=Math.abs(t.point.y-e.corners.bottom):n+=t.point.y-t.corners.top,n}function Wd(t,e,i,n){return t.corners.left-t.margin.left>e.corners.left-e.margin.left&&t.corners.left-t.margin.left<=e.corners.right+e.margin.right?(("Bottom"===e.direction&&t.point.y<e.point.y||"Top"===e.direction&&t.point.y>e.point.y)&&(n+=t.corners.left-e.corners.left),n+=t.point.x-t.corners.left):void 0!==i&&"Top"!==i&&"Bottom"===e.direction&&t.point.y<e.point.y||void 0!==i&&"Bottom"!==i&&"Top"===e.direction&&e.point.y<t.point.y?n+=Math.abs(t.point.x-e.corners.right):n+=t.point.x-t.corners.left,n}function Yd(t,e,i,n){return t.corners.right+t.margin.right<e.corners.right+e.margin.right&&t.corners.right+t.margin.right>=e.corners.left-e.margin.left?(("Bottom"===e.direction&&t.point.y<e.point.y||"Top"===e.direction&&t.point.y>e.point.y)&&(i+=e.corners.right-t.corners.right),i+=t.corners.right-t.point.x):void 0!==n&&"Top"!==n&&"Bottom"===e.direction&&t.point.y<e.point.y||void 0!==n&&"Bottom"!==n&&"Top"===e.direction&&e.point.y<t.point.y?i+=Math.abs(t.point.x-e.corners.right):i+=t.corners.right-t.point.x,i}function _d(t,e,i,n){return t.corners.bottom+t.margin.bottom<e.corners.bottom+e.margin.bottom&&t.corners.bottom+t.margin.bottom>=e.corners.top-e.margin.top?(("Right"===e.direction&&t.point.x<e.point.x||"Left"===e.direction&&t.point.x>e.point.x)&&(i+=e.corners.bottom-t.corners.bottom),i+=t.corners.bottom-t.point.y):void 0!==n&&"Left"!==n&&"Right"===e.direction&&t.point.x<e.point.x||void 0!==n&&"Right"!==n&&"Left"===e.direction&&e.point.x<t.point.x?i+=Math.abs(t.point.y-e.corners.bottom):i+=t.corners.bottom-t.point.y,i}function Qd(t,e){var i=t.direction;t.direction=e.direction,e.direction=i;var n=t.point;t.point=e.point,e.point=n;var s=t.corners;t.corners=e.corners,e.corners=s}function Zd(t,e,i,n){var s=void 0===e?i:e,r=s.topLeft,o=s.topRight,a=s.bottomRight,l=s.bottomLeft,h=s.center,c=Ad(h,t),d=Ad(h,a),p=Ad(h,l),u=Ad(h,r),g=Ad(h,o);return c>u&&c<g?"Top":c>=d&&c<p?"Bottom":c>=p&&c<=u?"Left":"Right"}function qd(t){var e=t.wrapper.children[0].bounds;return"None"!==t.sourceDecorator.shape&&e.uniteRect(t.wrapper.children[1].bounds),"None"!==t.targetDecorator.shape&&e.uniteRect(t.wrapper.children[2].bounds),e}function Xd(t){switch(t){case"Top":return"Bottom";case"Bottom":return"Top";case"Left":return"Right";case"Right":return"Left"}return"auto"}var Gd=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kd=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Jd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Gd(e,t),Kd([jt()],e.prototype,"width",void 0),Kd([jt()],e.prototype,"height",void 0),e}(re),$d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Gd(e,t),Kd([jt()],e.prototype,"width",void 0),Kd([jt()],e.prototype,"height",void 0),Kd([jt()],e.prototype,"fit",void 0),Kd([jt()],e.prototype,"description",void 0),Kd([jt()],e.prototype,"template",void 0),Kd([jt()],e.prototype,"tooltip",void 0),e}(re),tp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ep=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ip=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tp(e,t),ep([jt("")],e.prototype,"id",void 0),ep([jt(Number.MIN_VALUE)],e.prototype,"zIndex",void 0),ep([Bt({},Os)],e.prototype,"margin",void 0),ep([jt(!0)],e.prototype,"visible",void 0),ep([Bt({},zc)],e.prototype,"tooltip",void 0),ep([jt(!1)],e.prototype,"excludeFromLayout",void 0),ep([jt()],e.prototype,"addInfo",void 0),ep([jt(ss.None)],e.prototype,"flip",void 0),ep([jt("All")],e.prototype,"flipMode",void 0),ep([Bt({},$d)],e.prototype,"symbolInfo",void 0),e}(re),np=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sp=function(t){function e(e,i,n,s){var r=t.call(this)||this;return r.data="",r.nodeId="",r.annotationId="",r.diagramId="",r.diagramId=i,r.nodeId=e,r.annotationId=n,r.templateFn=Rn(s),r}return np(e,t),e.prototype.getNodeTemplate=function(){return this.templateFn},Object.defineProperty(e.prototype,"content",{get:function(){return this.data},set:function(t){this.data=t,this.canReset||(this.canReset=!0,this.isTemplate||(this.template=lv(this,!0)),this.canReset=!1,this.isDirt=!0)},enumerable:!0,configurable:!0}),e}(Ws),rp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),op=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ap=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rp(e,t),op([jt("")],e.prototype,"id",void 0),op([jt("transparent")],e.prototype,"fill",void 0),op([jt("black")],e.prototype,"iconStrokeColor",void 0),op([jt(0)],e.prototype,"iconStrokeWidth",void 0),op([jt(!0)],e.prototype,"visibility",void 0),op([jt(10)],e.prototype,"width",void 0),op([jt(10)],e.prototype,"height",void 0),op([jt("transparent")],e.prototype,"handleStrokeColor",void 0),op([jt(1)],e.prototype,"handleStrokeWidth",void 0),op([jt("")],e.prototype,"pathData",void 0),op([jt(0)],e.prototype,"cornerRadius",void 0),op([Bt({left:0,right:0,top:0,bottom:0},Os)],e.prototype,"padding",void 0),op([Bt({},zc)],e.prototype,"tooltip",void 0),e}(re),lp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rp(e,t),op([Bt({x:0,y:0},fn)],e.prototype,"offset",void 0),op([Bt({},Os)],e.prototype,"margin",void 0),e}(ap),hp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rp(e,t),op([jt(.5)],e.prototype,"offset",void 0),op([jt("Center")],e.prototype,"alignment",void 0),op([Bt({x:0,y:0},fn)],e.prototype,"displacement",void 0),e}(ap);function cp(t){if(t){return t instanceof Xc||t instanceof Gc?t.constraints&ds.Select:t instanceof Rg?t.constraints&cs.Select:t.constraints&ps.Select}return 1}function dp(t){if(t){return t instanceof Xc||t instanceof Gc?t.constraints&ds.Drag:t instanceof Rg?t.constraints&cs.Drag:t instanceof By?1:t.constraints&ps.Drag}return 1}function pp(t,e){return t instanceof Rg?t.constraints&cs.PointerEvents:t.constraints&ps.PointerEvents}function up(t){return t instanceof Rg?t.constraints&cs.Delete:t.constraints&ps.Delete}function gp(t){return t.constraints&cs.DragSourceEnd}function mp(t){return t.constraints&cs.DragTargetEnd}function fp(t){return t.constraints&cs.DragSegmentThumb}function yp(t){return t instanceof Xc||t instanceof Gc?t.constraints&ds.Rotate:t.constraints&ps.Rotate}function vp(t){return t.constraints&ps.Shadow}function bp(t){return t instanceof Ny&&t.constraints&ps.InConnect?t.constraints&ps.InConnect:0}function Cp(t){return t&&t.constraints&&!(t.constraints&Es.None)&&t.constraints&Es.InConnect?t.constraints&Es.InConnect:0}function Ip(t){return t instanceof Ny&&t.constraints&ps.OutConnect?t.constraints&ps.OutConnect:0}function Mp(t){return t&&t.constraints&&!(t.constraints&Es.None)&&t.constraints&Es.OutConnect?t.constraints&Es.OutConnect:0}function Sp(t,e){var i=0;return t instanceof Xc||t instanceof Gc?i=t.constraints&ds.Resize:t&&("SouthEast"===e?i=t.constraints&ps.ResizeSouthEast:"East"===e?i=t.constraints&ps.ResizeEast:"NorthEast"===e?i=t.constraints&ps.ResizeNorthEast:"South"===e?i=t.constraints&ps.ResizeSouth:"North"===e?i=t.constraints&ps.ResizeNorth:"SouthWest"===e?i=t.constraints&ps.ResizeSouthWest:"West"===e?i=t.constraints&ps.ResizeWest:"NorthWest"===e&&(i=t.constraints&ps.ResizeNorthWest)),i}function xp(t){return t instanceof Rg?t.constraints&cs.AllowDrop:t.constraints&ps.AllowDrop}function wp(t){return t.constraints&ms.Virtualization}function Dp(t){return t.tool&fs.SingleSelect}function Ep(t){return t.tool&fs.MultipleSelect}function Tp(t){return t.tool&fs.ZoomPan}function Ap(t){return t.tool&fs.ContinuousDraw}function Np(t){return t.tool&fs.DrawOnce}function Lp(t){return t.tool&fs.SingleSelect||t.tool&fs.MultipleSelect}function Op(t){return t.constraints&ms.UserInteraction}function kp(t){return t.constraints&ms.ZoomTextEdit}function zp(t){return function(t){return t.constraints&ms.ApiUpdate}(t)||t.diagramActions&Is.ToolAction}function Pp(t,e){return t.constraints&Es.Draw}function jp(t,e){return t.constraints&Es.Drag}function Bp(t){return!(t&Ms.DrawSelectorBorder)}function Hp(t){return!!(t&Ms.PreventRenderSelector)}var Rp=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Vp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.childTable=[],e.cellStyle={},e.desiredRowHeight=[],e.desiredCellWidth=[],e}return Rp(e,t),e.prototype.rowDefinitions=function(){return this.rowDefns},e.prototype.columnDefinitions=function(){return this.colDefns},e.prototype.addObject=function(t,e,i,n,s){if(this.rows.length>=e){var r=this.rows[parseInt(e.toString(),10)];if(r.cells.length>i){s=s||1,n=n||1;var o=r.cells[parseInt(i.toString(),10)];o.columnSpan=Math.max(s,o.columnSpan),o.rowSpan=Math.max(n,o.rowSpan);var a=new _p;(a=t).rowId=e,a.columnId=i,a.columnSpan=s,this.childTable[a.id]=a,this.addObjectToCell(a,o)}}},e.prototype.addObjectToCell=function(t,e){e.children||(e.children=[]),t.style.strokeColor="black",t.style.strokeWidth=1,e.children.push(t)},e.prototype.updateProperties=function(t,e,i,n){this.offsetX=t,this.offsetY=e,this.width=i,this.height=n},e.prototype.setDefinitions=function(t,e){this.rowDefns=t,this.colDefns=e,this.children=[],this.rows=this.rows||[];for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)],s=new Wp;s.cells=[];var r=new Fp;r.width=this.width;var o=this.colDefns;(void 0===o||o.length<1)&&(o=[r]),this.addCellInRow(o,n,s),this.rows.push(s)}},e.prototype.addCellInRow=function(t,e,i){for(var n=0;n<t.length;n++){var s=t[parseInt(n.toString(),10)],r=new Yp;r.children=[],this.cellStyle.fill="none",this.cellStyle.strokeColor="none",r.id=Hn(),r.style=this.cellStyle,r.desiredCellWidth=r.minWidth=s.width,r.desiredCellHeight=r.minHeight=e.height,i.cells.push(r),this.children.push(r)}},e.prototype.calculateSize=function(){for(var t=this.rows||[],e=0,i=0,n=0;n<t.length;n++){var s=this.rows[parseInt(n.toString(),10)];i=0;for(var r=0;r<s.cells.length;r++)if(i+=s.cells[parseInt(r.toString(),10)].desiredCellWidth,r===s.cells.length-1&&(this.width&&this.width!==i&&(s.cells[parseInt(r.toString(),10)].desiredCellWidth+=this.width-i,s.cells[parseInt(r.toString(),10)].minWidth=s.cells[parseInt(r.toString(),10)].desiredCellWidth,s.cells[parseInt(r.toString(),10)].children&&s.cells[parseInt(r.toString(),10)].children.length&&(s.cells[parseInt(r.toString(),10)].children[0].width=s.cells[parseInt(r.toString(),10)].desiredCellWidth),this.colDefns[parseInt(r.toString(),10)].width=s.cells[parseInt(r.toString(),10)].desiredCellWidth),e+=s.cells[parseInt(r.toString(),10)].desiredCellHeight,n===t.length-1&&this.height&&this.height!==e)){var o=this.height-e;if(o>0){for(var a=0;a<s.cells.length;a++)s.cells[parseInt(a.toString(),10)].desiredCellHeight+=o,s.cells[parseInt(a.toString(),10)].minHeight=s.cells[parseInt(a.toString(),10)].desiredCellHeight=s.cells[parseInt(a.toString(),10)].desiredCellHeight,s.cells[parseInt(a.toString(),10)].children&&s.cells[parseInt(a.toString(),10)].children.length&&(s.cells[parseInt(a.toString(),10)].children[0].height=s.cells[parseInt(a.toString(),10)].desiredCellHeight);this.rowDefns[parseInt(n.toString(),10)].height+=o}}}},e.prototype.updateRowHeight=function(t,e,i,n,s){var r=this.rows[parseInt(t.toString(),10)];this.rowDefns[parseInt(t.toString(),10)].height=e,void 0!==this.height&&(this.height+=e-r.cells[0].desiredCellHeight);for(var o=0;o<r.cells.length;o++)r.cells[parseInt(o.toString(),10)].desiredCellHeight=r.cells[parseInt(o.toString(),10)].minHeight=e,r.cells[parseInt(o.toString(),10)].children&&r.cells[parseInt(o.toString(),10)].children.length&&(r.cells[parseInt(o.toString(),10)].children[0].height=e,this.setTextRefresh(r.cells[parseInt(o.toString(),10)].children[0]));if(this.desiredRowHeight[parseInt(t.toString(),10)]=e,this.measure(new un(this.width,this.height)),this.arrange(this.desiredSize),i){var a=void 0!==n?this.calculateCellHeightBasedOnChildren(t,n):this.calculateCellHeight(t);a>e&&!s&&this.updateRowHeight(t,a,!1)}},e.prototype.setTextRefresh=function(t){if(t.children&&t.children.length)for(var e=t.children,i=0;i<e.length;i++)e[parseInt(i.toString(),10)]instanceof Zs&&e[parseInt(i.toString(),10)].refreshTextElement(),e[parseInt(i.toString(),10)]instanceof $s&&this.setTextRefresh(e[parseInt(i.toString(),10)])},e.prototype.updateColumnWidth=function(t,e,i,n,s){this.colDefns[parseInt(t.toString(),10)].width=e,void 0!==this.width&&(this.width+=e-this.rows[this.rows.length-1].cells[parseInt(t.toString(),10)].desiredCellWidth);for(var r=0;r<this.rows.length;r++)this.setTextRefresh(this.rows[parseInt(r.toString(),10)].cells[0]),this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].desiredCellWidth=this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].minWidth=e,this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].children&&this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].children.length&&(this.rows[parseInt(r.toString(),10)].cells[parseInt(t.toString(),10)].children[0].width=e);if(this.desiredCellWidth[parseInt(t.toString(),10)]=e,this.measure(new un(this.width,this.height)),this.arrange(this.desiredSize),i){var o=void 0!==n?this.calculateCellWidthBasedOnChildren(t,n):this.calculateCellWidth(t);o>e&&!s&&this.updateColumnWidth(t,o,!1)}},e.prototype.calculateCellWidth=function(t){for(var e,i,n,s=0;s<this.rows.length;s++)1===(n=this.rows[parseInt(s.toString(),10)].cells[parseInt(t.toString(),10)]).columnSpan&&(i=n.outerBounds.width>n.bounds.width&&(0===n.children.length||void 0===n.children[0].maxWidth)?n.outerBounds.width:n.bounds.width,e=e?e<i?i:e:i);return e},e.prototype.calculateCellHeight=function(t){for(var e,i,n,s=this.rows[parseInt(t.toString(),10)],r=0;r<s.cells.length;r++)i=(n=s.cells[parseInt(r.toString(),10)]).outerBounds.height>n.bounds.height?n.outerBounds.height:n.bounds.height,e=e?e<i?i:e:i;return e},e.prototype.calculateCellSizeBasedOnChildren=function(t,e,i,n){var s,r=t&&t.children.length>0?t.children[0]:void 0;if(r&&1===t.columnSpan){s="Width"===e?r.bounds.right:r.bounds.bottom,n||(n="Width"===e?r.bounds.width:r.bounds.height);for(var o=0;o<r.children.length;o++){var a=r.children[parseInt(o.toString(),10)];if(a instanceof $s&&-1===a.id.indexOf("header")){var l=("Width"===e?a.bounds.right:a.bounds.bottom)+i;if(l>s){var h=l-s+("Width"===e?r.bounds.width:r.bounds.height);n&&(n=n<h?h:n)}}}}return n},e.prototype.calculateCellWidthBasedOnChildren=function(t,e){for(var i,n,s=0;s<this.rows.length;s++)n=this.rows[parseInt(s.toString(),10)].cells[parseInt(t.toString(),10)],i=this.calculateCellSizeBasedOnChildren(n,"Width",e,i);return i},e.prototype.calculateCellHeightBasedOnChildren=function(t,e){for(var i,n,s=this.rows[parseInt(t.toString(),10)],r=0;r<s.cells.length;r++)n=s.cells[parseInt(r.toString(),10)],i=this.calculateCellSizeBasedOnChildren(n,"Height",e,i);return i},e.prototype.addRow=function(t,e,i){this.rowDefns.length>0?this.rowDefns.splice(t,0,e):this.rowDefns.push(e);var n=new Wp;n.cells=[],(new Fp).width=this.width;var s=this.colDefns;this.addCellInRow(s,e,n),t>this.rows.length-1?this.rows.push(n):this.rows.splice(t,0,n),i&&(this.measure(new un(this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.addColumn=function(t,e,i){var n,s,r,o,a=this.rows;this.colDefns.length>0?this.colDefns.splice(t,0,e):this.colDefns.push(e),void 0!==this.width&&(this.width+=e.width);for(var l=0;l<a.length;l++)n=a[parseInt(l.toString(),10)],s=this.rowDefns[parseInt(l.toString(),10)],r=e,(o=new Yp).style=this.cellStyle,o.desiredCellWidth=o.minWidth=r.width,o.desiredCellHeight=o.minHeight=s.height,o.children=[],t>n.cells.length-1?n.cells.push(o):n.cells.splice(t,0,o),this.children.push(o);i&&(this.measure(new un(this.width,this.height)),this.arrange(this.desiredSize))},e.prototype.removeRow=function(t){var e,i,n=this.rows[parseInt(t.toString(),10)];this.height-=this.rowDefns[parseInt(t.toString(),10)].height;for(var s=0;s<n.cells.length;s++)e=n.cells[parseInt(s.toString(),10)],this.children.splice(this.children.indexOf(e),1),(i=document.getElementById(e.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i);this.rows.splice(t,1),this.rowDefns.splice(t,1),this.measure(new un(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.removeColumn=function(t){var e,i,n=this.rows;this.width-=this.colDefns[parseInt(t.toString(),10)].width;for(var s=0;s<n.length;s++)e=n[parseInt(s.toString(),10)].cells[parseInt(t.toString(),10)],this.children.splice(this.children.indexOf(e),1),(i=document.getElementById(e.id+"_groupElement"))&&i.parentElement&&i.parentElement.removeChild(i),n[parseInt(s.toString(),10)].cells.splice(t,1);this.colDefns.splice(t,1),this.measure(new un(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateRowIndex=function(t,e){var i=this.rows[parseInt(t.toString(),10)];this.rows.splice(t,1),this.rows.splice(e,0,i);var n=this.rowDefns[parseInt(t.toString(),10)];this.rowDefns.splice(t,1),this.rowDefns.splice(e,0,n),this.measure(new un(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.updateColumnIndex=function(t,e,i){for(var n,s,r=t;r<this.rows.length;r++)n=this.rows[parseInt(r.toString(),10)],s=this.rows[parseInt(r.toString(),10)].cells[parseInt(e.toString(),10)],n.cells.splice(e,1),n.cells.splice(i,0,s);var o=this.colDefns[parseInt(e.toString(),10)];this.colDefns.splice(e,1),this.colDefns.splice(i,0,o);var a=this.desiredCellWidth[parseInt(e.toString(),10)];this.desiredCellWidth.splice(e,1),this.desiredCellWidth.splice(i,0,a),this.measure(new un(this.width,this.height)),this.arrange(this.desiredSize)},e.prototype.measure=function(e){var i=void 0;if(void 0!==this.rows&&this.rows.length>0){var n=0,s=0;i=new un(0,0),this.calculateSize();for(var r=0,o=this.rows;r<o.length;r++){s=0;for(var a=0,l=(u=o[r]).cells;a<l.length;a++){var h=(y=l[a]).measure(new un(y.desiredCellWidth,y.desiredCellHeight));1===y.rowSpan&&(0===s||void 0===this.desiredRowHeight[parseInt(n.toString(),10)]?this.desiredRowHeight[parseInt(n.toString(),10)]=h.height:this.desiredRowHeight[parseInt(n.toString(),10)]=Math.max(h.height,this.desiredRowHeight[parseInt(n.toString(),10)])),1===y.columnSpan&&(0===n||void 0===this.desiredCellWidth[parseInt(s.toString(),10)]?this.desiredCellWidth[parseInt(s.toString(),10)]=h.width:this.desiredCellWidth[parseInt(s.toString(),10)]=Math.max(h.width,this.desiredCellWidth[parseInt(s.toString(),10)]),n===this.rows.length-1&&(i.width+=this.desiredCellWidth[parseInt(s.toString(),10)])),s++}i.height+=this.desiredRowHeight[parseInt(n.toString(),10)],n++}n=s=0;for(var c=0,d=0,p=this.rows;d<p.length;d++){var u;s=0;for(var g=0,m=0,f=(u=p[d]).cells;m<f.length;m++){var y;if(1!==(y=f[m]).columnSpan){y.desiredSize.width=0;for(var v=0;v<y.columnSpan;v++)v+s<u.cells.length&&(y.desiredSize.width+=this.desiredCellWidth[v+s],y.minWidth=y.desiredSize.width,y.measure(y.desiredSize));s++}else y.desiredSize.width=this.desiredCellWidth[parseInt(g.toString(),10)],y.measure(y.desiredSize);if(1!==y.rowSpan){y.desiredSize.height=0;for(v=0;v<y.rowSpan;v++)v+c<this.rows.length&&(y.desiredSize.height+=this.desiredRowHeight[v+c],y.minHeight=y.desiredSize.height,y.measure(y.desiredSize))}else y.desiredSize.height=this.desiredRowHeight[parseInt(c.toString(),10)],y.measure(y.desiredSize);n++,g++}c++}}return void 0===i&&(i=t.prototype.validateDesiredSize.call(this,i,e)),t.prototype.stretchChildren.call(this,i),this.desiredSize=i,i},e.prototype.arrange=function(t,e){var i=0,n=0;if(void 0!==this.rows&&this.rows.length>0){for(var s=this.offsetX-t.width*this.pivot.x,r=this.offsetY-t.height*this.pivot.y,o=s,a=0,l=this.rows;a<l.length;a++){o=s,i=0;for(var h=0,c=(g=l[a]).cells;h<c.length;h++){var d=c[h],p=Math.max(this.desiredCellWidth[parseInt(i.toString(),10)],d.desiredSize.width),u=Math.max(this.desiredRowHeight[parseInt(n.toString(),10)],d.desiredSize.height);d.offsetX=o+p*d.pivot.x,d.offsetY=r+u*d.pivot.y,o+=this.desiredCellWidth[parseInt(i.toString(),10)],d.arrange(new un(p,u)),i++}r+=this.desiredRowHeight[parseInt(n.toString(),10)],n++}if(e){d=void 0;var g=void 0,m=void 0,f=void 0,y=void 0;for(n=0;n<this.rows.length;n++)for(g=this.rows[parseInt(n.toString(),10)],i=0;i<g.cells.length;i++)if((d=g.cells[parseInt(i.toString(),10)]).columnSpan>1&&this.children.splice(this.children.indexOf(d)+1,d.columnSpan-1),d.rowSpan>1)for(m=n,f=0;m+d.rowSpan-1<this.rows.length&&f<d.rowSpan-1;m++,f++)y=this.rows[m+1].cells[parseInt(i.toString(),10)],this.children.splice(this.children.indexOf(y),1)}}return this.actualSize=t,this.updateBounds(),t},e}(_s),Up=function(){this.height=void 0},Fp=function(){this.width=void 0},Wp=function(){this.cells=null},Yp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnSpan=1,e.rowSpan=1,e}return Rp(e,t),e}($s),_p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rowId=0,e.columnId=0,e.rowSpan=1,e.columnSpan=1,e}return Rp(e,t),e}(Ws);function Qp(t,e,i){i.width||0!==i.shape.phases.length||(i.width=100);var n=[],s=[],r=0,o=i.shape,a="Horizontal"===o.orientation;if(o.header&&o.hasHeader&&Gp(n,o.header.height),function(t,e,i){var n,s=0,r=i.shape;if(t.length>0)for(var o=0;o<t.length;o++)s+=t[parseInt(o.toString(),10)].height;if(e){if(r.phases.length>0&&r.phaseSize&&(s+=r.phaseSize,Gp(t,r.phaseSize)),r.lanes.length>0)for(o=0;o<r.lanes.length;o++)s+=n=r.lanes[parseInt(o.toString(),10)].height,o===r.lanes.length-1&&s<i.height&&(n+=i.height-s),Gp(t,n)}else if(r.phases.length>0){var a=0;for(o=0;o<r.phases.length;o++){var l=r.phases[parseInt(o.toString(),10)].offset;a+=0===o?l:l-=a,s+=n=l,o===r.phases.length-1&&s<i.height&&(n+=i.height-s),Gp(t,n)}}else Gp(t,i.height)}(n,a,i),function(t,e,i){var n,s,r,o,a=0,l=i.shape;if(l.phases.length>0&&"Horizontal"===l.orientation)for(o=0;o<l.phases.length;o++)n=l.phases[parseInt(o.toString(),10)].offset,a+=0===o?n:n-=a,s=Kp(n),o===l.phases.length-1&&a<i.width&&(s.width+=i.width-a),t.push(s);else if(e)s=Kp(i.width),t.push(s);else{for(l.phaseSize&&l.phases.length>0?l.lanes.length+1:l.lanes.length,l.phaseSize&&l.phases.length>0&&(a+=l.phaseSize,s=Kp(l.phaseSize),t.push(s)),r=0;r<l.lanes.length;r++)a+=l.lanes[parseInt(r.toString(),10)].width,s=Kp(l.lanes[parseInt(r.toString(),10)].width),r===l.lanes.length-1&&a<i.width&&(s.width+=i.width-a),t.push(s);0===l.phases.length&&0===l.lanes.length&&(s=Kp(i.width),t.push(s))}}(s,a,i),t.setDefinitions(n,s),o.header&&o.hasHeader&&(!function(t,e,i){for(var n=0,s=t.columnDefinitions(),r=i.shape,o=0;o<s.length;o++)n+=s[parseInt(o.toString(),10)].width;r.header.id=r.header.id||Hn();var a={id:i.id+r.header.id,annotations:[Fn(r.header.annotation)],style:r.header.style?r.header.style:void 0,offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:0,columnIndex:0,maxWidth:n,container:{type:"Canvas",orientation:"Horizontal"}};cp(i)||(a.constraints&=~ps.Select);var l=Zp(e,t,i,a,!0);t.addObject(l,0,0,1,t.columnDefinitions().length)}(t,e,i),r++),o.phases.length>0&&o.phaseSize){for(var l=0;l<o.phases.length;l++)""===o.phases[parseInt(l.toString(),10)].id&&(o.phases[parseInt(l.toString(),10)].id=Hn()),qp(t,e,i,r,a,l);r++}if(o.lanes.length>0)for(l=0;l<o.lanes.length;l++)""===o.lanes[parseInt(l.toString(),10)].id&&(o.lanes[parseInt(l.toString(),10)].id=Hn()),Xp(t,e,i,r,l,a),r++}function Zp(t,e,i,n,s,r,o,a){var l=new Ny(t,"nodes",n,!0);if(l.parentId=i.id,l.isHeader=!!s,l.isPhase=!!r,l.isLane=!!o,a&&(l[""+(r?"PhaseHeaderParent":"LaneHeaderParent")]=a),l.constraints&=~(ps.InConnect|ps.OutConnect),l.constraints|=ps.HideThumbs,t.initObject(l),t.nodes.push(l),l.wrapper.children.length>0){for(var h=0;h<l.wrapper.children.length;h++){var c=l.wrapper.children[parseInt(h.toString(),10)];c instanceof Ws&&(c.isCalculateDesiredSize=!1),c instanceof Zs&&(c.canConsiderBounds=!1,(!s&&"Vertical"===i.shape.orientation&&r||"Vertical"!==i.shape.orientation&&o)&&(c.isLaneOrientation=!0,c.refreshTextElement()))}l.wrapper.measure(new un(void 0,void 0)),l.wrapper.arrange(l.wrapper.desiredSize)}return l.wrapper}function qp(t,e,i,n,s,r){var o,a=0,l=0,h=i.shape;s?(l=r,a=n,o=t.columnDefinitions()[parseInt(r.toString(),10)].width):a=h.header&&h.hasHeader?r+1:r;var c={annotations:[Fn(h.phases[parseInt(r.toString(),10)].header.annotation)],maxWidth:o,id:i.id+h.phases[parseInt(r.toString(),10)].id+"_header",addInfo:h.phases[parseInt(r.toString(),10)].addInfo,offsetX:i.offsetX,offsetY:i.offsetY,style:h.phases[parseInt(r.toString(),10)].style,rowIndex:a,columnIndex:l,container:{type:"Canvas",orientation:s?"Horizontal":"Vertical"}};c["Horizontal"===h.orientation?"height":"width"]=h.phaseSize,c.annotations[0].rotateAngle=s?0:270,cp(i)||(c.constraints&=~ps.Select),h.phases[parseInt(r.toString(),10)].header.id=c.id;var d=Zp(e,0,i,c,!1,!0,!1,h.phases[parseInt(r.toString(),10)].id);t.addObject(d,a,l)}function Xp(t,e,i,n,s,r){for(var o,a,l,h,c,d=i.shape,p=d.phases.length||1,u=d.header&&d.hasHeader?1:0,g=r?n:u,m=d.phaseSize&&d.phases.length>0?1:0,f=0;f<p;f++){var y=r?f:s+m;if(l=t.rows[parseInt(g.toString(),10)].cells[parseInt(y.toString(),10)],h={id:i.id+d.lanes[parseInt(s.toString(),10)].id+f,rowIndex:g,columnIndex:y,width:l.minWidth,height:l.minHeight,offsetX:i.offsetX,offsetY:i.offsetY,style:d.lanes[parseInt(s.toString(),10)].style,addInfo:d.lanes[parseInt(s.toString(),10)].addInfo,constraints:ps.Default|ps.ReadOnly|ps.AllowDrop,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}},cp(i)||(h.constraints&=~ps.Select),a=Zp(e,0,i,h,!1,!1,!0),d.phases&&d.phases.length>0&&d.phases[parseInt(f.toString(),10)]){var v=e.nameTable[d.phases[parseInt(f.toString(),10)].header.id];v&&v.laneGrids.splice(s,0,h.id)}a.children[0].isCalculateDesiredSize=!1,0===f&&((o={id:i.id+d.lanes[parseInt(s.toString(),10)].id+"_"+f+"_header",style:d.lanes[parseInt(s.toString(),10)].header.style,annotations:[Fn(d.lanes[parseInt(s.toString(),10)].header.annotation)],offsetX:i.offsetX,offsetY:i.offsetY,rowIndex:g,columnIndex:y,container:{type:"Canvas",orientation:r?"Horizontal":"Vertical"}}).annotations[0].rotateAngle=r?270:0,d.lanes[parseInt(s.toString(),10)].header.id=o.id,r?o.width=d.lanes[s].header.width:o.height=d.lanes[parseInt(s.toString(),10)].header.height,cp(i)||(o.constraints&=~ps.Select),c=Zp(e,0,i,o,!1,!1,!0,d.lanes[parseInt(s.toString(),10)].id),r&&(c.children[0].elementActions=c.children[0].elementActions|us.HorizontalLaneHeader),a.children.push(c)),t.addObject(a,g,y),r||g++,y=r?f:s+1}}function Gp(t,e){var i=new Up;i.height=e,t.push(i)}function Kp(t){var e=new Fp;return e.width=t,e}function Jp(t,e,i,n){for(var s,r,o,a,l,h,c,d=[],p=0,u=e.rowDefinitions().length,g=0;g<u;g++)for(h=e.rows[parseInt(g.toString(),10)],a=0;a<h.cells.length;a++)if((l=h.cells[parseInt(a.toString(),10)].children[0])&&l.children&&l.children.length)for(o=1;o<l.children.length;o++)if(s=l.children[parseInt(o.toString(),10)],(r=t.getObject(s.id))&&(r.inEdges.length>0||r.outEdges.length>0))for(c=r.inEdges.concat(r.outEdges),p=0;p<c.length;p++)-1===d.indexOf(c[parseInt(p.toString(),10)])&&d.push(c[parseInt(p.toString(),10)]);return d}function $p(t){var e=t.wrapper;if(e.measure(new un(t.width,t.height)),e.children[0]instanceof Vp){var i=e.children[0],n=!1;i.width&&i.width<i.desiredSize.width&&(n=!0,i.width=i.desiredSize.width),i.height&&i.height<i.desiredSize.height&&(n=!0,i.height=i.desiredSize.height),n&&i.measure(new un(i.width,i.height))}e.arrange(e.desiredSize)}function tu(t,e,i){var n,s,r,o,a,l,h,c,d,p=e.wrapper.children[0];for(n=i;n<p.rows.length;n++)for(h=p.rows[parseInt(n.toString(),10)],s=0;s<h.cells.length;s++)if((c=h.cells[parseInt(s.toString(),10)]).children&&c.children.length>0)for(r=0;r<c.children.length;r++){if(d=c.children[parseInt(r.toString(),10)],(a=t.nameTable[d.id]).isLane&&d.children.length>1)for(o=1;o<d.children.length;o++)(l=t.nameTable[d.children[parseInt(o.toString(),10)].id])&&l.isLane&&(l.rowIndex=n,l.columnIndex=s);a.rowIndex=n,a.columnIndex=s}}function eu(t,e){var i,n,s,r,o,a,l,h,c=e.wrapper.children[0],d=e.shape,p=d.padding,u=d.lanes,g=c.bounds.y,m=d.phaseSize>0?d.phases.length:0,f="Horizontal"===d.orientation,y=f?d.phases.length||1:u.length+1,v=f?(d.header&&d.hasHeader?1:0)+(d.phases.length>0?1:0)+d.lanes.length:(d.header&&d.hasHeader?1:0)+d.phases.length;if(0===m&&!f&&d.lanes.length&&(v+=1),f?(i=(d.header&&d.hasHeader?1:0)+(m>0?1:0),n=0):(i=d.header&&d.hasHeader?1:0,n=m>0?1:0),u.length>0)for(g+=d.header&&d.hasHeader?d.header.height:0,a=0;a<u.length;a++){for(l=0;l<u[parseInt(a.toString(),10)].children.length;l++)if((s=u[parseInt(a.toString(),10)].children[parseInt(l.toString(),10)]).offsetX=u[parseInt(a.toString(),10)].width,s.offsetY=u[parseInt(a.toString(),10)].height,t.initObject(s),t.nodes.push(s),r=s.wrapper,f){for(h=n;h<y;h++)if(o=c.rows[parseInt(i.toString(),10)].cells[parseInt(h.toString(),10)],r.margin.left<o.bounds.right-c.bounds.x){s.parentId=o.children[0].id,h>n?r.margin.left=r.margin.left-(o.bounds.left-c.bounds.left):o.children[0].children[1].actualSize.width+p>=r.margin.left&&(r.margin.left=o.children[0].children[1].actualSize.width+p),r.margin.left<p&&(r.margin.left=p),r.margin.top<p&&(r.margin.top=p),iu(r,s,t);break}}else for(var b=i;b<v;b++)if(o=c.rows[parseInt(b.toString(),10)].cells[parseInt(n.toString(),10)],r.margin.top<o.bounds.bottom-g){s.parentId=o.children[0].id,b>i?r.margin.top=r.margin.top-(o.bounds.top-g):o.children[0].children[1].actualSize.height+p>=r.margin.top&&(r.margin.top=o.children[0].children[1].actualSize.height+p),r.margin.left<p&&(r.margin.left=p),r.margin.top<p&&(r.margin.top=p),iu(r,s,t);break}f?i++:n++}c.measure(new un(e.width,e.height)),c.arrange(c.desiredSize),function(t,e){var i,n,s,r,o,a,l=t.columnDefinitions(),h=t.rowDefinitions(),c=cu(e);"Vertical"===e.shape.orientation&&0===c&&(c=e.shape.header&&e.shape.hasHeader?1:0);var d=e.shape.padding;for(i=0;i<l.length;i++)t.updateColumnWidth(i,l[parseInt(i.toString(),10)].width,!0,d);for(i=c;i<h.length;i++)t.updateRowHeight(i,h[parseInt(i.toString(),10)].height,!0,d);for(n=0;n<h.length;n++)for(a=t.rows[parseInt(n.toString(),10)],i=0;i<l.length;i++)if((r=a.cells[parseInt(i.toString(),10)]).children&&r.children.length>0)for(s=0;s<r.children.length;s++)(o=r.children[parseInt(s.toString(),10)]).maxWidth&&(o.maxWidth=r.actualSize.width),o.maxHeight&&(o.maxHeight=r.actualSize.height)}(c,e),e.width=e.wrapper.width=c.width,e.height=e.wrapper.height=c.height,pu(t,e),e.wrapper.measure(new un(e.width,e.height)),e.wrapper.arrange(c.desiredSize),function(t){if("SwimLane"===t.shape.type)for(var e=t.shape.lanes,i=void 0,n=void 0,s=0;s<e.length;s++){i=e[parseInt(s.toString(),10)];for(var r=0;r<i.children.length;r++)(n=i.children[parseInt(r.toString(),10)]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(e),su(e,t),nu(e)}function iu(t,e,i){t.measure(new un(e.width,e.height)),t.arrange(t.desiredSize);var n=i.getObject(e.parentId);i.addChild(n,e.id)}function nu(t){if("SwimLane"===t.shape.type&&!t.shape.isLane&&!t.shape.isPhase){var e=void 0,i=void 0,n=void 0,s=void 0,r=void 0,o=t.shape.lanes,a=cu(t),l=t.wrapper.children[0].rowDefinitions(),h=t.wrapper.children[0].columnDefinitions(),c=void 0,d=void 0;for(i=0;i<o.length;i++,a++)if(e=o[parseInt(i.toString(),10)],"Horizontal"===t.shape.orientation)for(r=l[parseInt(a.toString(),10)].height,e.height!==r&&(e.height=r),n=0;n<h.length;n++)c=h[parseInt(n.toString(),10)].width,e.width!==c&&(e.width=c);else for(r=h[parseInt(a.toString(),10)].width,e.width!==r&&(e.width=r),s=0;s<l.length;s++)d=l[parseInt(s.toString(),10)].height,e.height!==d&&(e.height=d)}}function su(t,e){var i,n,s,r,o=t.shape,a=o.phases,l=o.header&&o.hasHeader?1:0,h=t.wrapper.children[0],c=h.bounds.y+(o.header&&o.hasHeader?o.header.height:0);if("SwimLane"===t.shape.type&&(t=e.getObject(t.id)||t,a.length>0))if(h=t.wrapper.children[0],"Horizontal"===o.orientation)for(s=o.header&&o.hasHeader?h.rows[1]:h.rows[0],i=0;i<a.length;i++)n=(r=s.cells[parseInt(i.toString(),10)].children[0]).bounds.right-h.bounds.x,a[parseInt(i.toString(),10)].offset!==n&&(a[parseInt(i.toString(),10)].offset=n),e.nameTable[r.id].maxWidth=r.maxWidth;else for(i=0;i<a.length;i++)n=(r=h.rows[l+i].cells[0].children[0]).bounds.bottom-c,a[parseInt(i.toString(),10)].offset!==n&&(a[parseInt(i.toString(),10)].offset=n),e.nameTable[r.id].maxWidth=r.maxWidth}function ru(t,e){if(t&&t.length>0){var i=void 0;e.lineRoutingModule&&e.constraints&ms.LineRouting&&(e.avoidLineOverlappingModule&&e.avoidLineOverlappingModule.removeConnectors(t),e.lineRoutingModule.renderVirtualRegion(e,!0));for(var n=0;n<t.length;n++)i=e.getObject(t[parseInt(n.toString(),10)]),e.lineRoutingModule&&e.constraints&ms.LineRouting&&"Orthogonal"===i.type?e.lineRoutingModule.refreshConnectorSegments(e,i,!0):e.connectorPropertyChange(i,{},{sourceID:i.sourceID,targetID:i.targetID})}}function ou(t,e,i,n){var s,r,o,a,l,h,c,d,p=t.getObject(e.parentId),u=p.shape,g=p.wrapper.children[0],m=u.lanes,f=Jp(t,g,e.rowIndex);if("Horizontal"===u.orientation&&e.rowIndex!==i.rowIndex||"Vertical"===u.orientation&&e.columnIndex!==i.columnIndex){if("Horizontal"===u.orientation)a=e.rowIndex,l=i.rowIndex,s=(u.header&&u.hasHeader?1:0)+(u.phases.length&&u.phaseSize?1:0),c=e.rowIndex-s,d=i.rowIndex-s,m[parseInt(c.toString(),10)].canMove&&(c<d?n&&i.wrapper.offsetY>n.y&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetY<n.y&&(l+=1,d+=1),a!==l&&(g.updateRowIndex(a,l),au(c,d,p,t)));else if(a=e.columnIndex,l=i.columnIndex,s=u.phases.length&&u.phaseSize?1:0,c=e.columnIndex-s,d=i.columnIndex-s,u.header&&u.hasHeader?1:0,m[parseInt(c.toString(),10)].canMove&&(c<d?n&&i.wrapper.offsetX>n.x&&(l+=d>0?-1:1,d+=d>0?-1:1):n&&i.wrapper.offsetX<n.x&&(l+=1,d+=1),a!==l)){if(!(0!==u.phaseSize&&0!==u.phases.length||0!==l&&0!==a)&&u.header&&u.hasHeader){var y=0===l?a:l;g.rows[0].cells[parseInt(y.toString(),10)].children=g.rows[0].cells[0].children,g.rows[0].cells[parseInt(y.toString(),10)].columnSpan=g.rows[0].cells[0].columnSpan,g.rows[0].cells[0].children=[]}g.updateColumnIndex(0,a,l),au(c,d,p,t)}a!==l&&(h=m[parseInt(c.toString(),10)]).canMove&&(r={target:Fn(i),source:Fn(e)},h=m[parseInt(c.toString(),10)],m.splice(c,1),m.splice(d,0,h),o={type:"LanePositionChanged",redoObject:{target:Fn(r.source),source:Fn(r.target)},undoObject:r,category:"Internal"},t.diagramActions&Is.UndoRedo||t.commandHandler.addHistoryEntry(o),tu(t,p,0),ru(f,t),function(t,e){for(var i,n,s=0;s<t.length;s++){i=t[parseInt(s.toString(),10)];for(var r=0;r<i.children.length;r++)(n=e.nameTable[i.children[parseInt(r.toString(),10)].id]).offsetX=n.wrapper.offsetX,n.offsetY=n.wrapper.offsetY}}(m,t),p.wrapper.measure(new un(p.width,p.height)),p.wrapper.arrange(p.wrapper.desiredSize),t.updateDiagramObject(p))}t.updateDiagramElementQuad()}function au(t,e,i,n){var s=i.shape.phases;if(s&&s.length>0)for(var r=0;r<s.length;r++){var o=i.id+s[parseInt(r.toString(),10)].id+"_header",a=n.nameTable[""+o];if(a&&a.laneGrids&&t>=0&&e>=0&&t<a.laneGrids.length&&e<a.laneGrids.length){var l=a.laneGrids.splice(t,1)[0];a.laneGrids.splice(e,0,l)}}}function lu(t,e,i,n,s,r){var o,a,l=t.getObject(i.id),h=l.shape,c=h.header&&h.hasHeader?1:0,d=h.lanes,p=h.phases,u=n.wrapper.actualSize.width,g=n.wrapper.actualSize.height,m=(e.wrapper.actualSize.width,e.wrapper.actualSize.height,!1);t.diagramActions&Is.UndoRedo&&(m=!0);var f=l.wrapper.children[0];if("SwimLane"===l.shape.type)if("Horizontal"===h.orientation)if(e.isPhase){for(var y=e.columnIndex;y<p.length;y++){if(p[parseInt(y.toString(),10)].offset+=s,b=t.nameTable[p[parseInt(y.toString(),10)].header.id]){var v=f.rows[b.rowIndex].cells[b.columnIndex].minWidth;p[parseInt(y.toString(),10)].offset<v&&!m&&(p[parseInt(y.toString(),10)].offset=v)}}for(o=0;o<d.length;o++)d[parseInt(o.toString(),10)].width=m?u:e.wrapper.width}else c=h.phaseSize&&h.phases.length>0?c+1:c,d[e.rowIndex-c].height=m?g:e.wrapper.height;else if(e.isPhase){for(y=e.rowIndex-c;y<p.length;y++){var b;if(p[parseInt(y.toString(),10)].offset+=r,b=t.nameTable[p[parseInt(y.toString(),10)].header.id]){var C=f.rows[b.rowIndex].cells[b.columnIndex].minHeight;p[parseInt(y.toString(),10)].offset<C&&!m&&(p[parseInt(y.toString(),10)].offset=C)}}for(a=0;a<d.length;a++)d[parseInt(a.toString(),10)].height=e.wrapper.height}else c=h.phaseSize&&h.phases.length>0?1:0,d[e.columnIndex-c].width=e.wrapper.width}function hu(t,e){var i,n=t.shape,s=n.header&&n.hasHeader?1:0;return"Horizontal"===n.orientation?(s+=n.phases.length>0?1:0,i=e.rowIndex-s):i=e.columnIndex-(n.phaseSize&&n.phases.length>0?1:0),i}function cu(t){var e=0,i=t.shape;return"Horizontal"===i.orientation&&(e=i.header&&i.hasHeader?1:0),i.phases.length>0&&i.phaseSize&&(e+=1),e}function du(t,e,i,n){var s=t.shape;if(s.phases.length>0){var r=e.nameTable[s.phases[parseInt(n.toString(),10)].header.id];r&&r.maxWidth<i.outerBounds.width&&(r.maxWidth=i.outerBounds.width,r.wrapper.maxWidth=i.outerBounds.width)}}function pu(t,e){if(e.shape.header&&e.shape.hasHeader){var i=e.wrapper.children[0].rows[0].cells[0].children[0].id,n=t.nameTable[""+i];n&&n.isHeader&&(n.maxWidth<e.width||n.wrapper.maxWidth<e.width)&&(n.maxWidth=e.width,n.wrapper.maxWidth=e.width)}}function uu(t,e,i,n){var s,r=t.nameTable[e.id];if("SwimLane"===r.shape.type){t.protectPropertyChange(!0);var o=r.wrapper.children[0],a=o.bounds,l=r.shape,h=void 0,c=!1,d=void 0,p=void 0,u=void 0,g=void 0,m=void 0,f=void 0,y=void 0,v=void 0,b=new Oy(l,"lanes",i,!0);i.height=i.height||b.height,i.width=i.width||b.width,p="Vertical"===l.orientation||l.header&&l.hasHeader?1:0,"Horizontal"===l.orientation&&(c=!0,p=l.phases.length>0?p+1:p);var C=Jp(t,o),I=void 0!==n?n:l.lanes.length;if(p+=I,s={element:b,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changing",type:"Addition",cancel:!1,laneIndex:I},t.triggerEvent(Ds.collectionChange,s),!s.cancel){if(c){var M=new Up;M.height=i.height,o.addRow(p,M,!1),r.height=void 0!==r.height?r.height+i.height:r.height,r.wrapper.height=o.height=r.height}else{var S=new Fp;S.width=i.width,o.addColumn(I+1,S,!1),r.width&&(r.width+=i.width,r.wrapper.width=o.width=r.width),l.hasHeader&&(o.rows[0].cells[0].columnSpan+=1)}t.diagramActions&Is.UndoRedo||(b.id=""===b.id?Hn():b.id),void 0!==n?l.lanes.splice(n,0,b):l.lanes.push(b),s={element:b,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changed",type:"Addition",cancel:!1,laneIndex:I},t.triggerEvent(Ds.collectionChange,s),Xp(o,t,r,p,I,c),h="Horizontal"===l.orientation?t.nameTable[o.rows[parseInt(p.toString(),10)].cells[0].children[0].id]:l.header&&l.hasHeader?t.nameTable[o.rows[1].cells[parseInt(p.toString(),10)].children[0].id]:t.nameTable[o.rows[0].cells[parseInt(p.toString(),10)].children[0].id],t.diagramActions&Is.UndoRedo||(d={type:"LaneCollectionChanged",changeType:"Insert",undoObject:Fn(b),redoObject:Fn(h),category:"Internal"},t.addHistoryEntry(d)),tu(t,r,"Horizontal"===l.orientation?p:l.header&&l.hasHeader?1:0),$p(r),pu(t,r);if((u=i.children)&&u.length>0)for(g=0;g<u.length;g++){v={x:(y=u[parseInt(g.toString(),10)]).wrapper.offsetX,y:y.wrapper.offsetY};var x={left:0,right:0,top:0,bottom:0};if("Horizontal"===l.orientation)for(x.bottom=a.y-o.bounds.y,o.rows[parseInt(p.toString(),10)].cells[parseInt(g.toString(),10)],m=0;m<o.rows[parseInt(p.toString(),10)].cells.length;m++)gu(t,o.rows[parseInt(p.toString(),10)].cells[parseInt(m.toString(),10)],v,y,x);else t:for(var w=0;w<=o.rows.length;w++)for(f=0;f<o.rows[parseInt(w.toString(),10)].cells.length;f++)if(x.right=a.x-o.bounds.x,gu(t,o.rows[parseInt(w.toString(),10)].cells[parseInt(f.toString(),10)],v,y,x))break t}ru(C,t),t.drag(r,a.x-o.bounds.x,a.y-o.bounds.y)}t.protectPropertyChange(!1)}}function gu(t,e,i,n,s){var r=!1;if(e.children&&e.children.length>0){var o=e.children[0],a=t.nameTable[o.id];(function(t,e,i){var n=i.left||0,s=i.right||0,r=i.top||0,o=i.bottom||0;return t.left-n<=e.x&&t.right+s>=e.x&&t.top-r<=e.y&&t.bottom+o>=e.y})(o.bounds,i,s)&&(t.addChild(a,n),r=!0)}return r}function mu(t,e,i){if("SwimLane"===e.shape.type){var n=void 0,s=void 0,r=void 0,o=void 0,a=void 0,l=void 0,h=void 0,c=e.wrapper.bounds.x,d=e.wrapper.bounds.y,p=e.shape,u=p.padding,g=p.phases,m=void 0,f=e.wrapper.children[0],y="Horizontal"===p.orientation;n=p.header&&p.hasHeader?0:-1,p.phases.length>0&&(n+=1,0);var v=y?p.lanes[0].header.width:p.lanes[0].header.height;if(i.offset>v){for(h=0;h<g.length;h++)if(r=g[parseInt(h.toString(),10)],o=h>0?g[h-1]:r,r.offset>i.offset){if(m=h>0?i.offset-o.offset:i.offset,y){var b=f.columnDefinitions()[parseInt(h.toString(),10)];b.width-=m,(a=t.nameTable[p.phases[parseInt(h.toString(),10)].header.id]).maxWidth=a.wrapper.maxWidth=b.width,f.updateColumnWidth(h,b.width,!1);var C=new Fp;C.width=m,l=h,f.addColumn(h,C,!1);break}var I=f.rowDefinitions()[h+n];I.height-=m,a=t.nameTable[p.phases[parseInt(h.toString(),10)].header.id],f.updateRowHeight(h+n,I.height,!1);var M=new Up;M.height=m,l=h,f.addRow(h+n,M,!1);break}if(t.diagramActions&Is.UndoRedo&&void 0===l)(N=t.historyManager.currentEntry.next).isLastPhase&&function(t,e,i,n,s){var r=e.shape,o=r.phases[t-2],a=i.previousPhase.offset;if(s){var l=n.columnDefinitions()[t-1],h=new Fp;t>1?(h.width=l.width-(a-o.offset),l.width=a-o.offset):(h.width=l.width-a,l.width=a),n.updateColumnWidth(t-1,l.width,!1),n.addColumn(t,h,!1)}else{l=n.rowDefinitions()[parseInt(t.toString(),10)];var c=new Up;t>1?(c.height=i.undoObject.offset-a,l.height=a-o.offset):(c.height=l.height-a,l.height=a),n.updateRowHeight(t,l.height,!1),n.addRow(1+t,c,!1)}}(l=g.length,e,N,f,y);if(l>=0){var S=new ky(e.shape,"phases",i,!0);if(t.diagramActions&Is.UndoRedo||(S.id+=Hn()),p.phases.splice(l,0,S),qp(f,t,e,n,y,l),y){if(s=t.nameTable[f.rows[parseInt(n.toString(),10)].cells[parseInt(l.toString(),10)].children[0].id],0===l&&p.header&&p.hasHeader){f.rows[0].cells[0].children=f.rows[0].cells[1].children,f.rows[0].cells[1].children=[];for(var x=f.rows[0],w=0;w<x.cells.length;w++)x.cells[parseInt(w.toString(),10)].minWidth=void 0,x.cells[parseInt(w.toString(),10)].columnSpan=0===w?f.rows[0].cells.length:1}!function(t,e,i,n,s,r){var o,a,l=e.shape,h=cu(e);l.header&&l.hasHeader&&(i.rows[0].cells[0].columnSpan=i.rows[0].cells.length);for(o=h;o<i.rows.length;o++)fu(t,e,(a=i.rows[parseInt(o.toString(),10)]).cells[n-1],a.cells[parseInt(n.toString(),10)],a.cells[n+1],o,n,r);tu(t,e,1)}(t,e,f,l,0,i);var D=f.columnDefinitions();if(f.updateColumnWidth(l,D[parseInt(l.toString(),10)].width,!0,u),s.maxWidth=s.wrapper.maxWidth=D[parseInt(l.toString(),10)].width,D.length>l+1){var E=t.nameTable[f.rows[parseInt(n.toString(),10)].cells[l+1].children[0].id];f.updateColumnWidth(l+1,D[l+1].width,!0,u),E.maxWidth=E.wrapper.maxWidth=D[l+1].width}e.width=e.wrapper.width=e.wrapper.children[0].width=f.width}else{s=t.nameTable[f.rows[n+l].cells[0].children[0].id];var T=f.rowDefinitions(),A=T[n+l].height;!function(t,e,i,n,s,r){for(var o,a,l=i.rows[parseInt(n.toString(),10)],h=i.rows[n+1],c=i.rows[n-1],d=1;d<l.cells.length;d++)o=l.cells[parseInt(d.toString(),10)],a=h?h.cells[parseInt(d.toString(),10)]:void 0,fu(t,e,c?c.cells[parseInt(d.toString(),10)]:void 0,o,a,n,d,r);tu(t,e,1)}(t,e,f,n+l,0,i),f.updateRowHeight(n+l,A,!0,u),T.length>n+l+1&&(A=T[n+l+1].height,f.updateRowHeight(n+l+1,A,!0,u)),e.height=e.wrapper.height=e.wrapper.children[0].height=f.actualSize.height}if($p(e),e.width=e.wrapper.actualSize.width,pu(t,e),t.drag(e,c-e.wrapper.bounds.x,d-e.wrapper.bounds.y),su(e,t),t.commandHandler.select(s),!(t.diagramActions&Is.UndoRedo)){var N={type:"PhaseCollectionChanged",changeType:"Insert",undoObject:Fn(S),redoObject:Fn(s),category:"Internal"};t.addHistoryEntry(N)}t.updateDiagramObject(e)}}}}function fu(t,e,i,n,s,r,o,a){var l,h,c,d=e.shape,p="Horizontal"===d.orientation,u=e.wrapper.children[0],g=n.desiredCellWidth,m=n.desiredCellHeight,f=p?e.shape.hasHeader?r:r+1:o;i?(l=p?i.bounds.x+i.bounds.width:i.bounds.x,h=p?i.bounds.y:i.bounds.y+i.bounds.height):(l=u.bounds.x,h=s.bounds.y),!p&&s&&s.bounds&&(l=s.bounds.x,h=s.bounds.y);for(var y=new Tn(l,h,g,m),v=e.shape.hasHeader?r-1:r,b=e.id+(p?d.lanes[f-2]:d.lanes[f-1]).id,C=(p?o-1:v-1).toString()+(p?o:v).toString(),I=b+C;Object.prototype.hasOwnProperty.call(t.nameTable,I);)I=b+(C=(p?o-1:v-1).toString()+C);var M={id:I,rowIndex:r,columnIndex:o,width:n.minWidth,height:n.minHeight,style:(p?d.lanes[f-2]:d.lanes[f-1]).style,constraints:ps.Default|ps.AllowDrop,container:{type:"Canvas",orientation:p?"Horizontal":"Vertical"}},S=d.hasHeader?0:-1;if(a.laneGrids&&a.laneGrids.length>0){var x=p?r-(2+S):o-1;t.nameTable[a.laneGrids[parseInt(x.toString(),10)]]||(M.id=a.laneGrids[parseInt(x.toString(),10)])}var w=p?o:r-1;if(d.phases[parseInt(w.toString(),10)]){var D=t.nameTable[d.phases[parseInt(w.toString(),10)].header.id];D&&D.laneGrids.push(M.id)}var E=Zp(t,0,e,M,!1,!1,!0);if(E.children[0].isCalculateDesiredSize=!1,u.addObject(E,r,o),s&&s.children&&s.children.length)for(c=0;c<s.children.length;c++)p?t.nameTable[s.children[parseInt(c.toString(),10)].id].columnIndex+=1:t.nameTable[s.children[parseInt(c.toString(),10)].id].rowIndex+=1;!function(t,e,i,n,s,r,o){var a,l,h,c=t.nameTable[s.id],d=e||o,p=t.nameTable[c.parentId],u=p.shape.padding;if(d.children&&d.children[0].children.length>1)for(var g=1;g<d.children[0].children.length;g++)a=d.children[0].children[parseInt(g.toString(),10)],h=t.nameTable[a.id],l=r?{x:a.bounds.x,y:a.bounds.center.y}:{x:a.bounds.center.x,y:a.bounds.top},n.containsPoint(l)?(i.children[0].children.push(a),d.children[0].children.splice(g,1),g--,t.deleteChild(h,void 0,!0),h.isLane||(h.parentId=s.id),c.children||(c.children=[]),e||(r?h.margin.left=h.wrapper.bounds.x-d.children[0].bounds.right:h.margin.top=h.wrapper.bounds.y-d.children[0].bounds.bottom),c.children.push(a.id),h.zIndex=c.zIndex+1,t.removeElements(h)):e&&(r?(h.margin.left-=i.desiredCellWidth,u>h.margin.left&&(h.margin.left=u)):(h.margin.top-=i.desiredCellHeight,u>h.margin.top&&(h.margin.top=u)))}(t,s,n,y,E,p,i)}function yu(t,e,i){if("SwimLane"===e.shape.type&&("ResizeSouth"===i||"ResizeEast"===i)){var n=e.shape,s=e.wrapper.children[0],r=void 0,o=void 0;"ResizeSouth"===i?"Vertical"===n.orientation?r=s.rows[s.rows.length-1].cells[0]:(o=s.rows.length-1,r=s.rows[parseInt(o.toString(),10)].cells[s.rows[parseInt(o.toString(),10)].cells.length-1]):(o=n.header&&n.hasHeader?1:0,r=s.rows[parseInt(o.toString(),10)].cells[s.rows[parseInt(o.toString(),10)].cells.length-1]),t.commandHandler.select(t.nameTable[r.children[0].id])}}function vu(t,e,i,n,s,r){var o,a,l,h,c,d,p,u=Hn(),g=t.shape,m=g.phases,f=t.offsetX-t.wrapper.actualSize.width/2,y=t.offsetY-t.wrapper.actualSize.height/2,v=[];if("Vertical"===g.orientation&&(y+=g.header&&g.hasHeader?g.header.height:0),!r)for(s||(t.id+=u,g&&g.header&&g.hasHeader?g.header.id+=u:g.header=void 0),o=0;m&&o<m.length;o++)m[parseInt(o.toString(),10)].id+=u;var b=s?[i.childTable[n.id]]:g.lanes;for(o=0;b&&o<b.length;o++)for(l=b[parseInt(o.toString(),10)],r||(l.id+=u),a=0;l.children&&a<l.children.length;a++)h=l.children[parseInt(a.toString(),10)],v.push(h.id),d=h.wrapper.offsetX-h.width/2,p=h.wrapper.offsetY-h.height/2,h.zIndex=Number.MIN_VALUE,h.inEdges=h.outEdges=[],(r||i&&(1===i.pasteIndex||0===i.pasteIndex))&&("Vertical"===g.orientation?h.margin.top=p-y:h.margin.left=d-f),r||(h.id+=u);if(!r){if(s){if(c={shape:{lanes:b,phases:m,phaseSize:g.phaseSize,type:"SwimLane",orientation:g.orientation,header:{annotation:{content:"Title"},height:50}}},"Horizontal"===g.orientation){var C=0;g.hasHeader&&(C=g.header.height),c.width=t.wrapper.actualSize.width,c.height=n.wrapper.actualSize.height+C+g.phaseSize,c.offsetX=t.wrapper.offsetX+10*i.pasteIndex,c.offsetY=n.wrapper.offsetY+10*i.pasteIndex}else c.width=n.wrapper.actualSize.width,c.height=t.wrapper.actualSize.height,c.offsetX=n.wrapper.offsetX+10*i.pasteIndex,c.offsetY=t.wrapper.offsetY+10*i.pasteIndex;t=c}if(0!==i.pasteIndex&&(t.offsetX+=10,t.offsetY+=10),t.zIndex=Number.MIN_VALUE,t=e.add(t),!s)for(var I=0,M=Object.keys(i.childTable);I<M.length;I++){var S=M[I],x=i.childTable[""+S];x.parentSwimlaneId&&x.parentSwimlaneId+u===t.id?(x.id+=u,-1!==v.indexOf(x.sourceID)&&(x.sourceID+=u),-1!==v.indexOf(x.targetID)&&(x.targetID+=u),x.zIndex=Number.MIN_VALUE,e.add(x),x.parentSwimlaneId+=u):-1!==v.indexOf(x.sourceID)?x.sourceID+=u:-1!==v.indexOf(x.targetID)&&(x.targetID+=u)}"SVG"!==e.mode&&e.refreshDiagramLayer(),e.select([t])}return t}function bu(t,e,i,n){var s,r=e.nodes[0];if(n||zu(t,r,!0)){var o=void 0,a=void 0,l=void 0,h=new Ws;i&&(l=t.nameTable[""+i].parentId,o=r=t.nameTable[""+i]);var c=i?o.wrapper:r.wrapper,d=t.nameTable[l||r.parentId];d&&"Grid"===d.container.type&&((s=new $s).children=[],!n&&r.isHeader||("Horizontal"===d.container.orientation&&r.isPhase||"Vertical"===d.container.orientation&&(r.rowIndex>0&&r.columnIndex>0||r.isLane)?(a=function(t,e,i){for(var n=new Tn,s="SwimLane"===t.shape.type?t.wrapper.children[0].rows:t.wrapper.rows,r=i?1:0;r<s.length;r++)n.uniteRect(s[parseInt(r.toString(),10)].cells[parseInt(e.toString(),10)].bounds);return n}(d,o?o.columnIndex:r.columnIndex,!(!d.shape.header||!d.shape.hasHeader)),s.offsetX=a.center.x,s.offsetY=a.center.y,h.width=a.width,h.height=a.height):(s.offsetX=d.offsetX,s.offsetY=c.offsetY,h.width=d.wrapper.actualSize.width,h.height=c.actualSize.height)),s.children.push(h),s.measure(new un),s.arrange(s.desiredSize))}return s}function Cu(t,e,i,n,s){s=void 0!==s?s:hu(e,i);for(var r=!1,o=e.shape.lanes[parseInt(s.toString(),10)],a=o.children.length-1;a>=0;a--)n?n.id===o.children[parseInt(a.toString(),10)].id&&o.children.splice(a,1):(t.removeDependentConnector(o.children[parseInt(a.toString(),10)]),t.diagramActions&Is.UndoRedo||(t.diagramActions=t.diagramActions|Is.UndoRedo,r=!0),t.remove(o.children[parseInt(a.toString(),10)]),o.children.splice(a,1),r&&(t.diagramActions=t.diagramActions&~Is.UndoRedo))}function Iu(t){return t.children[0]}function Mu(t,e){e&&(t.nodes.splice(t.nodes.indexOf(e),1),t.removeFromAQuad(e),t.removeObjectsFromLayer(e),delete t.nameTable[e.id],t.removeElements(e))}function Su(t,e,i,n){var s;if("SwimLane"===i.shape.type){var r=i.shape,o=void 0;if(1===r.lanes.length)t.remove(i);else{var a=i.wrapper.bounds.x,l=i.wrapper.bounds.y,h=void 0,c=void 0,d=void 0,p=void 0,u=void 0,g=i.wrapper.children[0];if(o=n?r.lanes.indexOf(n):hu(i,e),s={element:e,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changing",type:"Removal",cancel:!1,laneIndex:o},t.triggerEvent(Ds.collectionChange,s),!s.cancel){var m=r.lanes[parseInt(o.toString(),10)],f=m.children;m.children=[];for(var y=0;y<f.length;y++){var v=t.getObject(f[parseInt(y.toString(),10)].id);v&&m.children.push(v)}var b=Fn(r.lanes[parseInt(o.toString(),10)]);if(Cu(t,i,e,void 0,o),!(t.diagramActions&Is.UndoRedo)){var C={type:"LaneCollectionChanged",changeType:"Remove",undoObject:b,redoObject:Fn(e),category:"Internal"};t.addHistoryEntry(C)}r.lanes.splice(o,1);var I=e?"Horizontal"===r.orientation?e.rowIndex:e.columnIndex:cu(i)+o;if("Horizontal"===r.orientation){for(h=g.rows[parseInt(I.toString(),10)],c=0;c<h.cells.length;c++)if((d=h.cells[parseInt(c.toString(),10)])&&d.children.length>0)for(p=0;p<d.children.length;p++)wu(t,u=d.children[parseInt(p.toString(),10)]),xu(u,i,t);g.removeRow(I)}else{for(i.width=void 0!==i.width?i.width-g.rows[0].cells[parseInt(I.toString(),10)].actualSize.width:i.width,c=0;c<g.rows.length;c++)if((d=g.rows[parseInt(c.toString(),10)].cells[parseInt(I.toString(),10)])&&d.children.length>0)for(p=0;p<d.children.length;p++)wu(t,u=d.children[parseInt(p.toString(),10)]),xu(u,i,t);g.removeColumn(I)}s={element:e,cause:t.diagramActions,diagramAction:t.getDiagramAction(t.diagramActions),state:"Changed",type:"Removal",cancel:!1,laneIndex:o},t.triggerEvent(Ds.collectionChange,s),i.width=i.wrapper.width=g.width,i.height=i.wrapper.height=g.height,$p(i),"Vertical"===i.shape.orientation&&(I=0),tu(t,i,I),t.drag(i,a-i.wrapper.bounds.x,l-i.wrapper.bounds.y),t.updateDiagramObject(i)}}}}function xu(t,e,i){var n=t.id,s=e.shape.phases;if(s&&s.length>0)for(var r=0;r<s.length;r++){var o=e.id+s[parseInt(r.toString(),10)].id+"_header",a=i.nameTable[""+o],l=a.laneGrids.indexOf(n);-1!==l&&a.laneGrids.splice(l,1)}}function wu(t,e){var i,n;if(e instanceof $s){if(e.children.length>0)for(i=0;i<e.children.length;i++)e.children[parseInt(i.toString(),10)]instanceof $s&&wu(t,e.children[parseInt(i.toString(),10)]);n=t.getObject(e.id),Mu(t,n)}}function Du(t,e,i,n){t.protectPropertyChange(!0);i.wrapper.bounds.x,i.wrapper.bounds.y;var s,r=!1,o=i.shape,a=i.wrapper.children[0],l=n?o.phases.indexOf(n):function(t,e){var i=e.shape,n=i.header&&i.hasHeader?1:0;return"Horizontal"===i.orientation?t.columnIndex:t.rowIndex-n}(e,i),h=o.phases.length;if(o.phases.length>1){l===h-1&&(r=!0,s=Fn(o.phases[l-1]));var c=Fn(o.phases[parseInt(l.toString(),10)]);if(o.phases.splice(l,1),!(t.diagramActions&Is.UndoRedo)){var d={type:"PhaseCollectionChanged",changeType:"Remove",undoObject:c,previousPhase:s,redoObject:Fn(e),category:"Internal",isLastPhase:r};d.undoObject.laneGrids=e.laneGrids,d.redoObject.laneGrids=e.laneGrids,t.addHistoryEntry(d)}"Horizontal"===o.orientation?function(t,e,i,n){var s,r,o,a,l,h,c,d,p,u,g,m;for(n=void 0!==n?n:i.columnIndex,c=0;c<e.rows.length;c++)if((s=e.rows[parseInt(c.toString(),10)]).cells.length>1&&(r=s.cells[parseInt(n.toString(),10)],l=(o=s.cells.length-1===n?s.cells[n-1]:s.cells[n+1]).children[0],r.children.length>0))if(a=r.children[0],g=t.nameTable[a.id],0===o.children.length&&r.children.length>0)o.children=r.children,o.columnSpan=r.columnSpan-1;else{for(d=0;d<a.children.length;d++){if((u=a.children[parseInt(d.toString(),10)])instanceof $s){if((m=t.nameTable[u.id]).isLane||(m.parentId=l.id),s.cells.length-1===n&&(m.margin.left=m.wrapper.bounds.x-l.bounds.x,u.margin.left=m.wrapper.bounds.x-l.bounds.x),l.children.push(u),t.nameTable[l.id]){var f=t.nameTable[l.id];f.children||(f.children=[]),f.children.push(u.id)}a.children.splice(d,1),d--,g&&g.children&&-1!==g.children.indexOf(m.id)&&g.children.splice(g.children.indexOf(m.id),1)}if(s.cells.length-1!==n)for(p=0;p<l.children.length;p++){var y=l.children[parseInt(p.toString(),10)];if(y instanceof $s){var v=t.nameTable[y.id];v.margin.left=v.wrapper.bounds.x-a.bounds.x,y.margin.left=v.wrapper.bounds.x-a.bounds.x}}}if(g&&g.isPhase){var b=t.nameTable[l.id];b&&(l.maxWidth=b.wrapper.maxWidth=b.wrapper.maxWidth+=g.wrapper.maxWidth)}Mu(t,g)}var C=e.columnDefinitions()[parseInt(n.toString(),10)].width;e.removeColumn(n),n<e.columnDefinitions().length?(h=e.columnDefinitions()[parseInt(n.toString(),10)].width,h+=C,e.updateColumnWidth(n,h,!0)):(h=e.columnDefinitions()[n-1].width,h+=C,e.updateColumnWidth(n-1,h,!0))}(t,a,e,l):function(t,e,i,n,s){var r,o,a,l,h,c,d,p,u=s.shape,g=void 0!==n?u.hasHeader&&u.header?n+1:n:i.rowIndex,m=e.rows[parseInt(g.toString(),10)],f=s.wrapper.bounds.y,y=u.phases.length;void 0!==u.header&&u.hasHeader&&(f+=e.rowDefinitions()[0].height);var v=n===y?e.rows[g-1]:e.rows[g+1];for(a=0;a<m.cells.length;a++)if(r=m.cells[parseInt(a.toString(),10)],c=v.cells[parseInt(a.toString(),10)].children[0],r.children.length>0){var b=r.children[0],C=t.nameTable[b.id];if(n<y)for(h=0;h<c.children.length;h++)(d=c.children[parseInt(h.toString(),10)])instanceof $s&&((p=t.nameTable[d.id]).margin.top=p.wrapper.bounds.y-(0===n?f:b.bounds.y),d.margin.top=p.wrapper.bounds.y-(0===n?f:b.bounds.y));for(l=0;l<b.children.length;l++)(d=b.children[parseInt(l.toString(),10)])instanceof $s&&((p=t.nameTable[d.id]).parentId=c.id,n===y&&(p.margin.top=p.wrapper.bounds.y-(0===n?f:c.bounds.y),d.margin.top=p.wrapper.bounds.y-(0===n?f:c.bounds.y)),c.children.push(d),b.children.splice(l,1),l--,C.children&&-1!==C.children.indexOf(p.id)&&C.children.splice(C.children.indexOf(p.id),1));Mu(t,C)}var I=e.rowDefinitions()[parseInt(g.toString(),10)].height;e.removeRow(g),g<e.rowDefinitions().length?(o=e.rowDefinitions()[parseInt(g.toString(),10)].height,o+=I,e.updateRowHeight(g,o,!0)):(o=e.rowDefinitions()[g-1].height,o+=I,e.updateRowHeight(g-1,o,!0))}(t,a,e,l,i),pu(t,i),tu(t,i,i.isHeader?1:0),su(i,t),t.protectPropertyChange(!1),t.updateDiagramObject(i)}}function Eu(t,e,i){var n=t.nameTable[e.parentId];if(n&&n.isLane){var s=t.nameTable[n.parentId],r=s.wrapper.children[0];t.multiselect||(r.updateColumnWidth(n.columnIndex,r.columnDefinitions()[n.columnIndex].width,!0,i),r.updateRowHeight(n.rowIndex,r.rowDefinitions()[n.rowIndex].height,!0,i));var o=n.wrapper,a=void 0;e.diffX=e.diffX||0,e.diffY=e.diffY||0,e.diffX>0&&(e.margin.left+=e.diffX+i),e.diffY>0&&(e.margin.top+=e.diffY+i),e.margin.left<i&&(e.margin.left=i),e.margin.top<i&&(e.margin.top=i);for(var l=0;l<o.children.length;l++){var h=o.children[parseInt(l.toString(),10)];if(h instanceof $s){var c=t.nameTable[h.id];if(c.isLane){a=c.wrapper;break}}}a&&("Horizontal"===s.shape.orientation?e.margin.left<i+a.actualSize.width&&(e.margin.left=i+a.actualSize.width):e.margin.top<i+a.actualSize.height&&(e.margin.top=i+a.actualSize.height)),s.wrapper.measure(new un(s.width,s.height)),s.wrapper.arrange(s.wrapper.desiredSize),e.offsetX=e.wrapper.offsetX,e.offsetY=e.wrapper.offsetY,t.nodePropertyChange(e,{},{margin:{left:e.margin.left,top:e.margin.top}}),e.isResized=!1,r.measure(new un(r.width,r.height)),r.arrange(r.desiredSize),s.width=s.wrapper.width=s.wrapper.children[0].actualSize.width,s.height=s.wrapper.height=s.wrapper.children[0].actualSize.height}}function Tu(t,e){var i;if(t.isLane){var n=e.getObject(t.parentId);if(n&&"SwimLane"===n.shape.type&&t.isLane){var s=hu(n,t);i=n.shape.lanes[parseInt(s.toString(),10)]}}return i}function Au(t,e,i){return!(!t.isLane||!e.isLane||t.id===e.id||t.parentId!==e.parentId||Tu(t,i)!==Tu(e,i))}function Nu(t,e){if(t.isLane){var i=Tu(t,e);if(e.eventHandler.action.includes("Resize")||i.canMove)return!0}return!1}function Lu(t,e,i,n){var s,r=!1;if(zu(t,e,!0)){t.protectPropertyChange(!0);var o=(s=t.nameTable[e.parentId]).wrapper;if(t.selectedItems.nodes.length>1?t.multiselect=!0:t.multiselect=!1,s&&"Canvas"===s.container.type){if(n||o.bounds.x<=i.x&&o.bounds.right>=i.x&&o.bounds.y<=i.y&&o.bounds.bottom>=i.y&&!t.multiselect){var a=void 0,l=o.bounds.y,h=o.bounds.x,c=t.nameTable[s.parentId]||s;if("SwimLane"===c.shape.type)r=Vu(s,c,e,t,!0);else{var d=t.nameTable[s.parentId]||s,p=d.shape;a=d.wrapper,o.actualSize.width<o.outerBounds.width&&!(o.bounds.x>o.outerBounds.x)&&(void 0!==s.rowIndex?(a.updateColumnWidth(s.columnIndex,o.outerBounds.width,!0),"Horizontal"===p.orientation&&p.phaseSize&&du(d,t,o,s.columnIndex),pu(t,d),t.drag(d,h-o.bounds.x,l-o.bounds.y)):t.scale(s,1+(o.outerBounds.width-o.actualSize.width)/o.actualSize.width,1,o.outerBounds.x<o.bounds.x?{x:1,y:.5}:{x:0,y:.5})),o.actualSize.height<o.outerBounds.height&&!(o.bounds.y>o.outerBounds.y)&&(void 0!==s.rowIndex?(a.updateRowHeight(s.rowIndex,o.outerBounds.height,!0),t.drag(d,h-o.bounds.x,l-o.bounds.y)):t.scale(s,1,1+(o.outerBounds.height-o.actualSize.height)/o.actualSize.height,o.outerBounds.y<o.bounds.y?{x:.5,y:1}:{x:.5,y:0}))}}t.select([e]),ru([],t)}t.protectPropertyChange(!1)}return r}function Ou(t,e,i,n){var s;if(zu(t,e,!0)&&!t.cancelPositionChange){var r=t.isProtectedOnChange;t.protectPropertyChange(!0);var o=(s=t.nameTable[e.parentId]).wrapper;if(s&&"Canvas"===s.container.type&&!(n||o.bounds.x<=i.x&&o.bounds.right>=i.x&&o.bounds.y<=i.y&&o.bounds.bottom>=i.y||e.constraints&ps.AllowMovingOutsideLane)){var a=Fn(e);t.clearSelection(),ju(t,e),e.parentId="",e.parentObj=t,e.propName="nodes";var l={type:"ChildCollectionChanged",category:"Internal",undoObject:a,redoObject:Fn(e)};t.addHistoryEntry(l),t.commandHandler.isContainer&&(t.commandHandler.isContainer=!1,t.endGroupAction()),Ru(e,t)}t.protectPropertyChange(r)}}function ku(t,e){var i,n,s;if(t.enableServerDataBinding(!1),!x())if(t.selectedObject.helperObject)s=t.selectedObject.helperObject;else if(t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0){e instanceof By&&e.nodes.length+e.connectors.length===1?(i=e.nodes.length>0?e.nodes[0]:e.connectors[0],n=t.selectedItems.wrapper.children[0]):(i=e,n=t.selectedItems.wrapper),t.selectedObject.actualObject=i;var r=i instanceof By&&i.nodes.length>0?i.nodes[0]:i;if(t.selectedObject.actualObject=i,!t.currentSymbol&&(r.isLane&&Nu(r,t)&&zu(t,r)||!r.isLane&&zu(t,r)||t.constraints&ms.LineRouting&&t.selectedItems.nodes.length>0))s=function(t,e){for(var i,n={},s=0,r=Object.keys(e);s<r.length;s++){var o=r[s];n[""+o]=e[""+o]}return df(e)===Ny&&((i=new Ny(t,"nodes",n,!0)).id=e.id,t.initObject(i)),t.updateDiagramObject(i),i}(t,{id:"helper",rotateAngle:n.rotateAngle,offsetX:n.offsetX,offsetY:n.offsetY,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.actualSize.width,height:n.actualSize.height,style:{strokeDashArray:"2 2",fill:"transparent",strokeColor:"#7D7D7D",strokeWidth:2}}),t.selectedObject.helperObject=s}return t.enableServerDataBinding(!0),s}function zu(t,e,i){var n=i?t.nameTable[e.parentId]:t.nameTable[e.parentId]||e;return!(!n||!n.container)}function Pu(t,e){var i=t.nameTable[e.parentId];if(e.laneMargin={left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},e.hasTextAnnotation)for(var n=0;n<e.outEdges.length;n++){var s=t.nameTable[e.outEdges[parseInt(n.toString(),10)]];if(s.isBpmnAnnotationConnector){var r=t.nameTable[s.targetID],o={width:e.wrapper.actualSize.width,height:e.wrapper.actualSize.height,offsetX:e.wrapper.offsetX,offsetY:e.wrapper.offsetY},a=e.wrapper.offsetX,l=e.wrapper.offsetY,h=t.getTextAnnotationOffset(e,r,o,a,l),c=h.x-a,d=h.y-l;(c||d||e.width!==e.wrapper.actualSize.width||e.height!==e.wrapper.actualSize.height)&&(e.isResized=!0,e.resizeDif||(e.resizeDif=[]),e.resizeDif[r.id]={x:c,y:d})}}i&&"Canvas"===i.container.type&&(e.margin.left=e.offsetX-i.wrapper.bounds.x-e.width/2,e.margin.top=e.offsetY-i.wrapper.bounds.y-e.height/2),t.nodePropertyChange(e,{},{width:e.width,height:e.height,offsetX:e.offsetX,offsetY:e.offsetY,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},rotateAngle:e.rotateAngle}),t.undoRedoModule&&i&&i.isLane&&t.undoRedoModule.checkRedo&&(e.margin.left<0||e.margin.top<0)&&ju(t,e),i&&!i.isLane&&(i.wrapper.measure(new un),i.wrapper.arrange(i.wrapper.desiredSize))}function ju(t,e){if(e.parentId&&""!==e.parentId){var i=t.nameTable[e.parentId];if(i.isLane&&i.parentId)for(var n=t.nameTable[i.parentId],s=i.id.slice(n.id.length),r=s.substring(0,s.length-1),o=n.shape.lanes,a=void 0,l=0;l<o.length;l++)if(r===(a=o[parseInt(l.toString(),10)]).id)for(var h=0;h<a.children.length;h++)a.children[parseInt(h.toString(),10)].id===e.id&&(a.children.splice(h,1),h--);t.deleteChild(e)}}function Bu(t,e,i){for(var n=i.commandHandler.getObjectLayer(t.id),s=n.zIndexTable,r=e.zIndex+1;void 0!==s[parseInt(r.toString(),10)];)r++;delete n.zIndexTable[t.zIndex],t.zIndex=r,n.zIndexTable[parseInt(r.toString(),10)]=t.id}function Hu(t,e,i,n,s,r){if(!t.currentSymbol){t.protectPropertyChange(!0);var o=t.nameTable[e.parentId];i=t.getObject(i.id)||i,o&&o.zIndex>i.zIndex&&r&&Bu(i,o,t);var a=-1!==t.nodes.indexOf(i)?i.id:i;if("Canvas"!==e.container.type||s){if(o){var l=o.wrapper.bounds,h=e.wrapper.bounds;if("Horizontal"===o.shape.orientation)i.margin.left-=h.x-l.x;else{var c=e.parentId+o.shape.lanes[0].id+"_0_header";i.margin.top-=h.y-l.y-t.nameTable[""+c].wrapper.bounds.height}}}else{var d=i.wrapper.offsetX-i.wrapper.actualSize.width/2-(e.wrapper.offsetX-e.wrapper.actualSize.width/2),p=i.wrapper.offsetY-i.wrapper.actualSize.height/2-(e.wrapper.offsetY-e.wrapper.actualSize.height/2);i.margin.left=d,i.margin.top=p}var u=t.nameTable[e.id];if(u.children||(u.children=[]),-1===u.children.indexOf(i.id)){ju(t,i),t.getObject(i.id)&&t.removeElements(i);var g=Fn(i);if(t.addChild(u,a),i=t.getObject(i.id),u.isLane&&u.parentId)for(var m=(o=t.nameTable[u.parentId]).shape.lanes,f=u.id.slice(o.id.length),y=f.substring(0,f.length-1),v=0;v<m.length;v++)u.isLane&&y===m[parseInt(v.toString(),10)].id&&(i.parentObj instanceof qb||(i.parentObj=m[parseInt(v.toString(),10)]),t.nameTable.hasOwnProperty(i.id)||m[parseInt(v.toString(),10)].children.push(i));if(t.updateDiagramObject(i),Ru(i,t),u.parentId?n||(t.multiselect?(Eu(t,i,20),t.updateDiagramElementQuad()):Vu(u,o,i,t)):t.updateDiagramObject(u),!(t.diagramActions&Is.UndoRedo)){var b={type:"ChildCollectionChanged",category:"Internal",undoObject:g,redoObject:Fn(i),historyAction:s?"AddNodeToLane":void 0};t.addHistoryEntry(b)}}else!n&&t.multiselect&&(Eu(t,i,20),t.updateDiagramElementQuad());t.protectPropertyChange(!1)}}function Ru(t,e){var i=Yy(t.id+"_groupElement",e.element.id),n=Yy(t.parentId?t.parentId+"_groupElement":e.element.id+"_diagramLayer",e.element.id);i&&n&&n.appendChild(i)}function Vu(t,e,i,n,s,r){var o,a,l=Fn(t),h=!1,c=e.shape.padding,d=t.wrapper.bounds,p=t.wrapper.outerBounds,u=i.wrapper.bounds;if(e&&"SwimLane"===e.shape.type&&(d.right<u.right+c||d.bottom<u.bottom+c||r&&d.top>u.top+c)){var g=e.wrapper.children[0],m=g.bounds.x,f=g.bounds.y,y=void 0,v=void 0,b=t.wrapper.children.find(function(t){return t.id.includes("header")}),C="Horizontal"===e.shape.orientation;if(d.right<u.right+c&&p.x<=d.x&&(C&&b?(v=b?b.width:0,y=u.right-d.right+(d.left-u.left)+v+2*c):y=u.right-d.right+(d.left-u.left)+2*c,a=!0,g.updateColumnWidth(t.columnIndex,d.width+y,!0,c)),d.bottom<u.bottom+c&&p.y<=d.y&&(!C&&b?(v=b?b.height:0,y=u.bottom-d.bottom+(d.top-u.top)+v+2*c):y=u.bottom-d.bottom+(d.top-u.top)+2*c,o=!0,g.updateRowHeight(t.rowIndex,d.height+y,!0,c)),r&&d.top>u.top-c&&p.y<=d.y&&(!C&&b?(v=b?b.height:0,y=d.top-u.top+(u.bottom-d.bottom)+v+2*c):y=d.top-u.top+(u.bottom-d.bottom)+2*c,y>0&&(o=!0,g.updateRowHeight(t.rowIndex,d.height+y,!0,c))),n.isRowHeightUpdate=o,!(n.diagramActions&Is.UndoRedo)){if(s&&(n.startGroupAction(),h=!0),o){var I={category:"Internal",type:"RowHeightChanged",undoObject:l,redoObject:Fn(t)};n.addHistoryEntry(I)}if(a){I={category:"Internal",type:"ColumnWidthChanged",undoObject:l,redoObject:Fn(t)};n.addHistoryEntry(I)}}e.width=e.wrapper.width=g.width,e.height=e.wrapper.height=g.height,$p(e),"Horizontal"===e.shape.orientation&&du(e,n,t.wrapper,t.columnIndex),pu(n,e),n.drag(e,m-g.bounds.x,f-g.bounds.y),su(e,n),nu(e)}return r||Eu(n,i,c),n.updateDiagramElementQuad(),h}function Uu(t,e,i,n,s,r){var o=Qy(n.element.id);n.diagramRenderer.renderStackHighlighter(t,o,n.scroller.transform,e,i,s,r)}function Fu(t,e,i,n,s,r,o){if(r&&r.length>1&&s&&s.length>1)return"PinchZoom";if(n.currentSymbol)return"Drag";if("PortDraw"===n.eventHandler.action&&(n.tool&=~fs.DrawOnce),(Np(n)||Ap(n))&&n.drawingObject)return"Draw";if(_u(n)&&((p=n.selectedItems).wrapper&&qm(p.constraints,"UserHandle")))for(var a=0,l=p.userHandles;a<l.length;a++){var h=l[a];if(h.visible)if(Yu(i,m=Qm(p,h,n.scroller.transform),h.size/(2*n.scroller.transform.scale)))return h.name}if(_u(n)){var c=n.selectedItems.annotation?n.selectedItems.wrapper.children[0]:n.selectedItems.wrapper,d=c.bounds,p=n.selectedItems,u=0,g=0,m=void 0;if(c.flippedPoint?(u=c.flippedPoint.x,g=c.flippedPoint.y,m=new Tn(u,g,d.width,d.height)):m=new Tn(d.x,d.y,d.width,d.height),Qu(n)&&!n.selectedItems.annotation){var f=n.selectedItems.connectors[0],y=n.selectedItems.handleSize/2/n.scrollSettings.currentZoom,v=n.selectedItems.handleSize/2/n.scrollSettings.currentZoom;if(qm(p.constraints,"ResizeAll")){if(qm(p.constraints,"ConnectorSourceThumb")&&gp(f)&&Yu(i,f.sourcePoint,y))return"ConnectorSourceEnd";if(qm(p.constraints,"ConnectorTargetThumb")&&mp(f)&&Yu(i,f.targetPoint,v))return"ConnectorTargetEnd";var b=function(t,e,i,n){var s=e.handleSize/2/n.scrollSettings.currentZoom,r=e.handleSize/2/n.scrollSettings.currentZoom;if("Bezier"===t.type&&n.connectorEditingToolModule)for(var o=0;o<t.segments.length;o++){var a=t.segments[parseInt(o.toString(),10)];if(Yu(i,fn.isEmptyPoint(a.point1)?a.bezierPoint1:a.point1,r)&&(0===o&&Xm(t.bezierSettings.controlPointsVisibility,"Source")||0!==o&&Xm(t.bezierSettings.controlPointsVisibility,"Intermediate")))return"BezierSourceThumb";if(Yu(i,fn.isEmptyPoint(a.point2)?a.bezierPoint2:a.point2,s)&&(o===t.segments.length-1&&Xm(t.bezierSettings.controlPointsVisibility,"Target")||o!==t.segments.length-1&&Xm(t.bezierSettings.controlPointsVisibility,"Intermediate")))return"BezierTargetThumb"}if(n.connectorEditingToolModule&&fp(t)){var l=t.constraints&cs.InheritSegmentThumbSize?n.segmentThumbSize:t.segmentThumbSize,h=l>20&&"Straight"!==t.type?l/2:10;if(h/=n.scrollSettings.currentZoom,"Straight"===t.type||"Bezier"===t.type)for(o=0;o<t.segments.length;o++){if(Yu(i,(a=t.segments[parseInt(o.toString(),10)]).point,h))return"SegmentEnd"}else for(o=0;o<t.segments.length;o++){var c={x:0,y:0};if((a=t.segments[parseInt(o.toString(),10)]).allowDrag)for(var d=0;d<a.points.length-1;d++){if(fn.distancePoints(a.points[parseInt(d.toString(),10)],a.points[d+1])>=50&&(c.x=(a.points[parseInt(d.toString(),10)].x+a.points[d+1].x)/2,c.y=(a.points[parseInt(d.toString(),10)].y+a.points[d+1].y)/2,Yu(i,c,h)))return"OrthoThumb"}}}else fp(t)&&console.warn('[WARNING] :: Module "ConnectorEditing" is not available in Diagram component! You either misspelled the module name or forgot to load it.');return null}(f,p,i,n);if("OrthoThumb"===b)return b;if(qm(p.constraints,"ConnectorSourceThumb")&&gp(f)&&b)return b;if(qm(p.constraints,"ConnectorTargetThumb")&&mp(f)&&b)return b}}else{var C=n.selectedItems.handleSize/2/n.scroller.currentZoom,I=10/n.scroller.currentZoom,M=Nn(),S=c.offsetX,x=c.offsetY;c.flippedPoint&&(S=S+c.flippedPoint.x-c.corners.topLeft.x,x=x+c.flippedPoint.y-c.corners.topLeft.y),On(M,c.rotateAngle+c.parentTransform,S,x);var w=S-c.pivot.x*c.actualSize.width,D=x-c.pivot.y*c.actualSize.height,E={x:w+(.5===c.pivot.x?2*c.pivot.x:c.pivot.x)*c.actualSize.width/2,y:D-30/n.scroller.currentZoom};E=Ln(M,E);var T=!!n.selectedItems.annotation,A=!(!T||!yp(n.selectedItems.annotation));if(qm(p.constraints,"Rotate")&&Yu(i,E,I)&&n.selectedItems.thumbsConstraints&gs.Rotate){if(T&&A)return"LabelRotate";if(!T)return"Rotate"}if(m.Inflate(C),m.containsPoint(i)){var b=function(t,e,i,n,s,r){var o,a=t.selectedItems;1===t.selectedItems.nodes.length&&0===t.selectedItems.connectors.length&&t.selectedItems.nodes[0].container&&!a.annotation&&(o=function(t,e,i,n,s){var r=10/t.scroller.currentZoom,o=t.selectedItems,a=e.actualSize.width,l=e.actualSize.height,h=new Tn(n,s,e.style.strokeWidth,l),c=new Tn(n+a,s,e.style.strokeWidth,l),d=new Tn(n,s,a,e.style.strokeWidth),p=new Tn(n,s+l,a,e.style.strokeWidth),u=zu(t,t.selectedItems.nodes[0],!0)?t.nameTable[t.selectedItems.nodes[0].parentId]:t.selectedItems.nodes[0];if(Zm(o.constraints,"ResizeEast",o.thumbsConstraints,o)&&c.containsPoint(i,r))return"ResizeEast";if(Zm(o.constraints,"ResizeSouth",o.thumbsConstraints,o)&&p.containsPoint(i,r))return"ResizeSouth";if("Grid"!==u.container.type){if(Zm(o.constraints,"ResizeWest",o.thumbsConstraints,o)&&h.containsPoint(i,r))return"ResizeWest";if(Zm(o.constraints,"ResizeNorth",o.thumbsConstraints,o)&&d.containsPoint(i,r))return"ResizeNorth"}return null}(t,e,i,s,r));o||!a.annotation&&t.selectedItems.nodes[0]&&(t.selectedItems.nodes[0].isPhase||t.selectedItems.nodes[0].isLane||"SwimLane"===t.selectedItems.nodes[0].shape.type)||(o=function(t,e,i,n,s,r){var o=40/t.scroller.currentZoom,a=t.selectedItems.handleSize/2/t.scroller.currentZoom,l=t.selectedItems,h=!!l.annotation;if(e.actualSize.width>=o&&e.actualSize.height>=o){if(Zm(l.constraints,"ResizeSouthEast",l.thumbsConstraints,l)&&Yu(i,Ln(n,{x:s+e.actualSize.width,y:r+e.actualSize.height}),a))return h?"LabelResizeSouthEast":"ResizeSouthEast";if(Zm(l.constraints,"ResizeSouthWest",l.thumbsConstraints,l)&&Yu(i,Ln(n,{x:s,y:r+e.actualSize.height}),a))return h?"LabelResizeSouthWest":"ResizeSouthWest";if(Zm(l.constraints,"ResizeNorthEast",l.thumbsConstraints,l)&&Yu(i,Ln(n,{x:s+e.actualSize.width,y:r}),a))return h?"LabelResizeNorthEast":"ResizeNorthEast";if(Zm(l.constraints,"ResizeNorthWest",l.thumbsConstraints,l)&&Yu(i,Ln(n,{x:s,y:r}),a))return h?"LabelResizeNorthWest":"ResizeNorthWest"}if(Zm(l.constraints,"ResizeEast",l.thumbsConstraints,l)&&Yu(i,Ln(n,{x:s+e.actualSize.width,y:r+e.actualSize.height/2}),a))return h?"LabelResizeEast":"ResizeEast";if(Zm(l.constraints,"ResizeWest",l.thumbsConstraints,l)&&Yu(i,Ln(n,{x:s,y:r+e.actualSize.height/2}),a))return h?"LabelResizeWest":"ResizeWest";if(Zm(l.constraints,"ResizeSouth",l.thumbsConstraints,l)&&Yu(i,Ln(n,{x:s+e.actualSize.width/2,y:r+e.actualSize.height}),a))return h?"LabelResizeSouth":"ResizeSouth";if(Zm(l.constraints,"ResizeNorth",l.thumbsConstraints,l)&&Yu(i,Ln(n,{x:s+e.actualSize.width/2,y:r}),a))return h?"LabelResizeNorth":"ResizeNorth";return null}(t,e,i,n,s,r));if(o)return o;return null}(n,c,i,M,w,D);if(b)return b}}}if(Tp(n)&&!t)return"Pan";if((o instanceof Wc||o instanceof Yc)&&(!Tp(n)||Dp(n)||Ep(n))&&"None"!==(b=Wu(n,o)))return b;if((o instanceof Xc||o instanceof Gc)&&!Tp(n)&&cp(o))return Zu(n,o,void 0,e)&&dp(o)?"LabelDrag":"LabelSelect";if(null!==t){if(!(t instanceof Ny||t instanceof Rg))return"Select";if(e&&e.id){var N=e.id.split(t.id)[1];if(N&&N.match("^_icon"))return"LayoutAnimation"}if(e&&e.id)for(var L=void 0,O=0;O<t.fixedUserHandles.length;O++)if(L=t.fixedUserHandles[parseInt(O.toString(),10)].id,e.id&&e.id.indexOf(L)>-1)return"FixedUserHandle";if(e instanceof Zs&&e.hyperlink.link)return"Hyperlink";if(!dp(t)||!Zu(n,t,!1)||void 0!==n.selectedItems.annotation)return t&&Tp(n)&&!Lp(n)?"Pan":n.selectedItems.nodes.length&&n.selectedItems.nodes[0].isLane&&n.selectedItems.wrapper&&n.selectedItems.wrapper.bounds.containsPoint(i)?"Drag":"Select";if(t instanceof Rg&&!Yu(i,t.sourcePoint,t.hitPadding)&&!Yu(i,t.targetPoint,t.hitPadding)||!(t instanceof Rg))return"Drag"}return"Select"}function Wu(t,e,i,n){if(jp(e)&&(Gm(e,rs.Hover)||Gm(e,rs.Visible))){if(e.constraints&Es.Drag)return"PortDrag"}else if(Pp(e)&&(Gm(e,rs.Hover)||Gm(e,rs.Visible))&&e.constraints&Es.Draw){t.drawingObject={};var s={type:"Orthogonal",sourcePortID:e.id};return t.drawingObject=s,t.tool|=fs.DrawOnce,t.currentDrawingObject=s,"PortDraw"}return"None"}function Yu(t,e,i){return t.x>=e.x-i&&t.x<=e.x+i&&t.y>=e.y-i&&t.y<=e.y+i}function _u(t){return t.selectedItems.nodes.length>0||t.selectedItems.connectors.length>0}function Qu(t){return 1===t.selectedItems.connectors.length&&!t.selectedItems.nodes.length}function Zu(t,e,i,n){if(void 0===i&&(i=!0),e instanceof By)return!0;if(e instanceof Ny)for(;e;){if(-1!==t.selectedItems.nodes.indexOf(e)&&void 0===t.selectedItems.annotation)return!0;if(-1!==t.selectedItems.selectedObjects.indexOf(e)&&void 0===t.selectedItems.annotation)return!0;if(i)break;var s=e;e=t.nameTable[e.parentId],s&&t.nameTable[s.parentId]&&"Container"===t.nameTable[s.parentId].shape.type&&(e=void 0)}else if(e instanceof Rg){if(-1!==t.selectedItems.connectors.indexOf(e)&&void 0===t.selectedItems.annotation)return!0}else if((e instanceof Xc||e instanceof Gc)&&t.selectedItems.annotation&&t.selectedItems.wrapper.children[0].id===n.id)return!0;return!1}var qu={None:"default",Rotate:"crosshair",Select:"default",Drag:"move",ResizeWest:"w-resize",ResizeEast:"e-resize",ResizeSouth:"s-resize",ResizeNorth:"n-resize",Draw:"crosshair",PortDraw:"crosshair",ResizeNorthEast:"ne-resize",ResizeNorthWest:"nw-resize",ResizeSouthEast:"se-resize",ResizeSouthWest:"sw-resize",ConnectorSourceEnd:"move",ConnectorTargetEnd:"move",BezierSourceThumb:"move",BezierTargetThumb:"move",OrthoThumb:"move",SegmentEnd:"move",Pan:"grab",Hyperlink:"pointer",PortDrag:"pointer",LabelSelect:"pointer",LabelDrag:"move",LabelRotate:"crosshair",LabelResizeWest:"w-resize",LabelResizeEast:"e-resize",LabelResizeSouth:"s-resize",LabelResizeNorth:"n-resize",LabelResizeNorthEast:"ne-resize",LabelResizeNorthWest:"nw-resize",LabelResizeSouthEast:"se-resize",LabelResizeSouthWest:"sw-resize"},Xu=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gu=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}l((n=n.apply(t,e||[])).next())})},Ku=function(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},Ju=function(){function t(t,e){void 0===e&&(e=!1),this.commandHandler=null,this.inAction=!1,this.isProtectChange=!1,this.currentElement=null,this.blocked=!1,this.isTooltipVisible=!1,this.childTable={},this.undoElement={nodes:[],connectors:[]},this.checkProperty=!0,this.undoParentElement={nodes:[],connectors:[]},this.undoContainerElement={nodes:[],connectors:[]},this.commandHandler=t,this.isProtectChange=e}return t.prototype.startAction=function(t){this.currentElement=t,this.inAction=!0},t.prototype.mouseDown=function(t){this.currentElement=t.source,this.startPosition=this.currentPosition=this.prevPosition=t.position,this.isTooltipVisible=!0,this.startAction(t.source),this.checkProperty=!0,this.mouseDownElement=t.source},t.prototype.checkPropertyValue=function(){this.checkProperty&&this.commandHandler.startTransaction(this.isProtectChange)},t.prototype.mouseMove=function(t){return this.currentPosition=t.position,this.inAction&&(this.commandHandler.startTransaction(this.isProtectChange),this.checkProperty=!1),!this.blocked},t.prototype.mouseUp=function(t){this.checkPropertyValue(),this.currentPosition=t.position,this.isTooltipVisible=!1,this.commandHandler.endTransaction(this.isProtectChange),this.endAction(),this.mouseDownElement=null},t.prototype.endAction=function(){this.isTooltipVisible||this.commandHandler.closeTooltip(),this.commandHandler=null,this.currentElement=null,this.currentPosition=null,this.inAction=!1,this.blocked=!1},t.prototype.mouseWheel=function(t){this.currentPosition=t.position},t.prototype.mouseLeave=function(t){this.mouseUp(t)},t.prototype.updateSize=function(t,e,i,n,s,r){t=this.commandHandler.renderContainerHelper(t)||t;var o,a={snapped:!1,offset:0,left:!1,right:!1},l={snapped:!1,offset:0,top:!1,bottom:!1},h=this.currentPosition.x-this.startPosition.x,c=this.currentPosition.y-this.startPosition.y,d=!(t instanceof Zs)&&this.commandHandler.snappingModule&&this.commandHandler.snappingModule.canSnap(),p=d?this.commandHandler.snappingModule.getLayer():null,u=t instanceof Zs?r:t.rotateAngle;On(o=Nn(),-u,0,0);t.offsetX,t.offsetY;var g=t.width,m=t.height;t.pivot.x,t.pivot.y;var f,y=0,v=0,b=t instanceof Zs?t.actualSize.width:t.width,C=t instanceof Zs?t.actualSize.height:t.height;switch(n){case"ResizeWest":h=(f=Ln(o,{x:h,y:c})).x,c=f.y,v=1,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,s):h,c=0,y=(s.width-h)/b;break;case"ResizeEast":h=(f=Ln(o,{x:h,y:c})).x,c=f.y,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,s):h,c=0,y=(s.width+h)/b,v=1;break;case"ResizeNorth":y=1,h=(f=Ln(o,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,s):c,v=(s.height-c)/C;break;case"ResizeSouth":y=1,h=(f=Ln(o,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,s):c,v=(s.height+c)/C;break;case"ResizeNorthEast":h=(f=Ln(o,{x:h,y:c})).x,c=f.y,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,s):h,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,s):c,y=(s.width+h)/b,v=(s.height-c)/C;break;case"ResizeNorthWest":h=(f=Ln(o,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapTop(a,l,p,h,c,t,i===e,s):c,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,s):h,y=(s.width-h)/b,v=(s.height-c)/C;break;case"ResizeSouthEast":h=(f=Ln(o,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,s):c,h=d?this.commandHandler.snappingModule.snapRight(a,l,p,h,c,t,i===e,s):h,v=(s.height+c)/C,y=(s.width+h)/b;break;case"ResizeSouthWest":h=(f=Ln(o,{x:h,y:c})).x,c=f.y,c=d?this.commandHandler.snappingModule.snapBottom(a,l,p,h,c,t,i===e,s):c,h=d?this.commandHandler.snappingModule.snapLeft(a,l,p,h,c,t,i===e,s):h,y=(s.width-h)/b,v=(s.height+c)/C}return{width:y,height:v}},t.prototype.getPivot=function(t){switch(t){case"ResizeWest":return{x:1,y:.5};case"ResizeEast":return{x:0,y:.5};case"ResizeNorth":return{x:.5,y:1};case"ResizeSouth":return{x:.5,y:0};case"ResizeNorthEast":return{x:0,y:1};case"ResizeNorthWest":return{x:1,y:1};case"ResizeSouthEast":return{x:0,y:0};case"ResizeSouthWest":return{x:1,y:0}}return{x:.5,y:.5}},t.prototype.getShapeType=function(){return"Image"===this.commandHandler.diagram.drawingObject.shape.type||"HTML"===this.commandHandler.diagram.drawingObject.shape.type||"Native"===this.commandHandler.diagram.drawingObject.shape.type||"Path"===this.commandHandler.diagram.drawingObject.shape.type?this.commandHandler.diagram.drawingObject.shape.type:this.commandHandler.diagram.drawingObject.shape.shape},t.prototype.triggerElementDrawEvent=function(t,e,i,n,s){var r={source:t,state:e,objectType:i,cancel:!1,elementType:n};this.commandHandler.triggerEvent(Ds.elementDraw,r),s&&r.cancel&&(this.commandHandler.diagram.resetTool(),this.inAction=!1)},t}(),$u=function(t){function e(e,i,n){var s=t.call(this,e,!0)||this;return s.action=n,s}return Xu(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction&&!1===fn.equals(this.currentPosition,this.prevPosition)){var i=Tn.toBounds([this.prevPosition,this.currentPosition]);this.mouseDownElement&&!dp(this.mouseDownElement)?this.commandHandler.clearObjectSelection(this.mouseDownElement):(this.commandHandler.clearSelectedItems(),this.commandHandler.drawSelectionRectangle(i.x,i.y,i.width,i.height))}return!this.blocked},e.prototype.mouseUp=function(e,i){if(this.checkPropertyValue(),!this.commandHandler.isUserHandle(this.currentPosition))if(!1===fn.equals(this.currentPosition,this.prevPosition)&&this.inAction){var n=Tn.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.doRubberBandSelection(n)}else{var s=this.commandHandler.getSelectedObject();this.commandHandler.hasSelection()&&e.info&&e.info.ctrlKey?e&&e.source&&(this.commandHandler.isSelected(e.source)?1===e.clickCount&&this.commandHandler.unSelect(e.source):this.commandHandler.selectObjects([e.source],!0)):2===i&&s.some(function(t){return t===e.source})||(this.commandHandler.clearSelection(null===e.source),"LabelSelect"===this.action?this.commandHandler.labelSelect(e.source,e.sourceWrapper,s):e.source&&this.commandHandler.selectObjects([e.source],!1,s))}this.inAction=!1,t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(Ju),tg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xu(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.inAction=!1;for(var i,n=e.source,s=e.sourceWrapper.id,r=0;r<n.fixedUserHandles.length;r++)s.indexOf(n.fixedUserHandles[parseInt(r.toString(),10)].id)>-1&&(i=n.fixedUserHandles[parseInt(r.toString(),10)]);var o={fixedUserHandle:i,element:e.source},a=Ds.fixedUserHandleClick;this.commandHandler.triggerEvent(a,o),t.prototype.mouseUp.call(this,e)},e}(Ju),eg=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.isConnected=!1,n.endPoint=i,n}return Xu(e,t),e.prototype.mouseDown=function(e){return Gu(this,void 0,void 0,function(){var i,n,s,r,o;return Ku(this,function(a){if(this.inAction=!0,this.undoElement=void 0,this instanceof og||(this.undoElement=Fn(e.source)),t.prototype.mouseDown.call(this,e),e.source&&e.source.connectors&&({x:this.prevPosition.x,y:this.prevPosition.y},i=e.source.connectors[0],this.oldConnector=Fn(i)),"BezierSourceThumb"===this.endPoint||"BezierTargetThumb"===this.endPoint)for(n=0;n<i.segments.length;n++)s=i.segments[parseInt(n.toString(),10)],r=fn.isEmptyPoint(s.point1)?s.bezierPoint1:s.point1,o=fn.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,this.currentElement.handleSize!==i.hitPadding&&(i.hitPadding=this.currentElement.handleSize),(Yu(this.currentPosition,r,i.hitPadding)||Yu(this.currentPosition,o,i.hitPadding))&&(this.selectedSegment=s);return this.currentPosition=e.position,[2]})})},e.prototype.mouseUp=function(e){return Gu(this,void 0,void 0,function(){var i,n,s,r,o,a,l,h,c,d,p,u;return Ku(this,function(g){return!x()&&this.isConnected&&e.source.connectors&&(u=e.source.connectors[0],i="ConnectorSourceEnd"===this.endPoint?"sourceID":"targetID",n="ConnectorSourceEnd"===this.endPoint?"sourcePortID":"targetPortID",h={connector:u,oldValue:{nodeId:this.oldConnector[""+i],portId:this.oldConnector[""+n]},newValue:{nodeId:u[""+i],portId:u[""+n]},cancel:!1,state:"Changed",connectorEnd:this.endPoint},u[""+i]===this.oldConnector[""+i]&&u[""+n]===this.oldConnector[""+n]||(this.commandHandler.triggerEvent(Ds.connectionChange,h),this.isConnected=!1)),this.checkPropertyValue(),this.commandHandler.updateSelector(),this.commandHandler.removeSnap(),this instanceof og||("ConnectorSourceEnd"!==this.endPoint||!e.source.connectors.length||fn.equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)&&e.source.connectors[0].sourceID===this.undoElement.connectors[0].sourceID)&&("ConnectorTargetEnd"!==this.endPoint||fn.equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint)&&e.source.connectors[0].targetID===this.undoElement.connectors[0].targetID)?this instanceof og||"BezierTargetThumb"!==this.endPoint&&"BezierSourceThumb"!==this.endPoint||this.undoElement&&e.source&&(d=Fn(e.source),p={type:"SegmentChanged",redoObject:d,undoObject:this.undoElement,category:"Internal"},this.commandHandler.addHistoryEntry(p)):(s=void 0,r=void 0,u=void 0,e.source&&e.source.connectors&&"ConnectorSourceEnd"===this.endPoint?(s={x:this.oldConnector.sourcePoint.x,y:this.oldConnector.sourcePoint.y},u=e.source.connectors[0],r={x:u.sourcePoint.x,y:u.sourcePoint.y}):e.source&&e.source.connectors&&"ConnectorTargetEnd"===this.endPoint&&(s={x:this.oldConnector.targetPoint.x,y:this.oldConnector.targetPoint.y},u=e.source.connectors[0],r={x:u.targetPoint.x,y:u.targetPoint.y}),o=void 0,a=void 0,e.target&&(l=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0),a=l.id,l instanceof Wc&&(o=l.id,a=e.target.id)),this.commandHandler.diagram.diagramActions&Is.ToolAction&&(this.commandHandler.diagram.diagramActions&=~Is.ToolAction),h={connector:u,state:"Completed",targetNode:a,oldValue:s,newValue:r,cancel:!1,targetPort:o},this.undoElement&&e.source&&(d=void 0,d=Fn(e.source),p={type:"ConnectionChanged",redoObject:Fn(d),undoObject:Fn(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(p)),c="ConnectorSourceEnd"===this.endPoint?Ds.sourcePointChange:Ds.targetPointChange,this.commandHandler.triggerEvent(c,h),this.commandHandler.removeTerminalSegment(u,!0)),this.canCancel=void 0,this.tempArgs=void 0,e.source&&e.source.connectors&&(u=e.source.connectors[0]).isBezierEditing&&(u.isBezierEditing=!1),t.prototype.mouseUp.call(this,e),[2]})})},e.prototype.mouseMove=function(e){var i;if(t.prototype.mouseMove.call(this,e),!(this instanceof og)&&("ConnectorSourceEnd"===this.endPoint&&fn.equals(e.source.connectors[0].sourcePoint,this.undoElement.connectors[0].sourcePoint)||"ConnectorTargetEnd"===this.endPoint&&fn.equals(e.source.connectors[0].targetPoint,this.undoElement.connectors[0].targetPoint))){var n=void 0,s=void 0;e.source&&e.source.connectors&&(n={x:this.prevPosition.x,y:this.prevPosition.y},s=e.source.connectors[0]);var r=void 0,o=void 0;if(e.target)o=e.target.id,(y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Wc||y instanceof gy?r=y.id:o=y.id;var a={connector:s,state:"Start",targetNode:o,oldValue:n,newValue:n,cancel:!1,targetPort:r},l="ConnectorSourceEnd"===this.endPoint?Ds.sourcePointChange:Ds.targetPointChange;this.commandHandler.triggerEvent(l,a)}if(this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var h=this.currentPosition.x-this.prevPosition.x,c=this.currentPosition.y-this.prevPosition.y,d=void 0,p=(n=void 0,void 0),u=void 0;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var g=void 0;e.source&&e.source.connectors&&(d={x:this.currentPosition.x,y:this.currentPosition.y},n={x:this.prevPosition.x,y:this.prevPosition.y},g=e.source.connectors[0]);var m=void 0,f=void 0;if(e.target)(y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Wc?m=y.id:f=y.id;var y;a={connector:g,state:"Progress",targetNode:f,oldValue:n,newValue:d,cancel:!1,targetPort:m};if(!(this instanceof og)){l="ConnectorSourceEnd"===this.endPoint?Ds.sourcePointChange:Ds.targetPointChange;this.commandHandler.triggerEvent(l,a)}if(e.target&&(p=$m(e.target,!0),u=$m(e.target,!1)),!a.cancel&&this.inAction&&void 0!==this.endPoint&&0!==h||0!==c)if(a.cancel||(this.blocked=!this.commandHandler.dragConnectorEnds(this.endPoint,e.source,this.currentPosition,this.selectedSegment,e.target,m),this.commandHandler.updateSelector()),e.target&&("ConnectorSourceEnd"===this.endPoint&&(Ip(e.target)||Mp(u))||"ConnectorTargetEnd"===this.endPoint&&(bp(e.target)||Cp(p))))if(this.commandHandler.canDisconnect(this.endPoint,e,m,f)&&(i=this.commandHandler.disConnect(e.source,this.endPoint,this.canCancel),this.isConnected=!0),(y=this.commandHandler.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===this.endPoint,!0))instanceof Ny)(bp(y)&&"ConnectorTargetEnd"===this.endPoint||Ip(y)&&"ConnectorSourceEnd"===this.endPoint)&&(i=this.commandHandler.connect(this.endPoint,e,this.canCancel),this.isConnected=!0);else this.checkConnect(y)&&(this.isConnected=!0,i=this.commandHandler.connect(this.endPoint,e,this.canCancel));else-1===this.endPoint.indexOf("Bezier")&&(this.isConnected=!0,i=this.commandHandler.disConnect(e.source,this.endPoint,this.canCancel),this.commandHandler.updateSelector());if(this.commandHandler.canEnableDefaultTooltip()){var v=this.getTooltipContent(e.position);this.commandHandler.showTooltip(e.source,e.position,Ri(function(){return v}),"ConnectTool",this.isTooltipVisible),this.isTooltipVisible=!1}i&&(this.tempArgs=i)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.x)+" Y:"+Math.round(t.y)},e.prototype.checkConnect=function(t){return!(!Cp(t)||"ConnectorTargetEnd"!==this.endPoint)||(!(!Mp(t)||"ConnectorSourceEnd"!==this.endPoint)||!(t.constraints&Es.None||Cp(t)||Mp(t))&&(void 0===t.constraints||(t.constraints&Es.Default&~(Es.InConnect|Es.OutConnect))>0))},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.prevPosition=null,this.endPoint=null},e}(Ju),ig=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.currentTarget=null,n.isStartAction=!1,n.canCancel=!1,n.canTrigger=!1,n.objectType=i,n}return Xu(e,t),e.prototype.mouseDown=function(e){if(e.source instanceof Ny||e.source instanceof Rg){var i=this.commandHandler.getSelectedObject();this.commandHandler.selectObjects([e.source],e.info&&e.info.ctrlKey,i);var n={nodes:[],connectors:[]};e.source instanceof Ny?n.nodes.push(Fn(e.source)):n.connectors.push(Fn(e.source)),this.undoElement=Fn(n);var s=e.source.wrapper;this.undoElement.offsetX=s.offsetX,this.undoElement.offsetY=s.offsetY}else this.undoElement=Fn(e.source);if(this.undoElement.nodes&&this.undoElement.nodes.length>0)for(var r=0,o=this.undoElement.nodes;r<o.length;r++)for(var a=o[r],l=0,h=a.outEdges.concat(a.inEdges);l<h.length;l++){var c=h[l],d=this.commandHandler.diagram.getObject(c);d&&d.segments&&d.segments.length>1&&-1===this.undoElement.connectors.indexOf(d)&&this.undoElement.connectors.push(Fn(d))}this.undoParentElement=this.commandHandler.getSubProcess(e.source),this.undoContainerElement=this.commandHandler.getContainer(e.source),"Port"===this.objectType&&(this.portId=e.sourceWrapper.id),this.commandHandler.insertBlazorConnector(e.source),t.prototype.mouseDown.call(this,e),this.initialOffset={x:0,y:0}},e.prototype.getPort=function(t){for(var e,i=t.source.id,n=t.source.ports,s=0;s<n.length;s++)if(t.sourceWrapper.id===i+"_"+n[parseInt(s.toString(),10)].id){e=n[parseInt(s.toString(),10)];break}return e},e.prototype.mouseUp=function(e,i){return Gu(this,void 0,void 0,function(){var n,s,r,o,a,l,h,c,d,p,u,g,m,f,y,v,b,C,I,M,S,x,w,D,E,T,A,N,L,O,k,z,P,j,B,H,R;return Ku(this,function(V){if(this.checkPropertyValue(),o=!1,l={nodes:[],connectors:[]},"Port"!==this.objectType){if(e.source instanceof Ny||e.source instanceof Rg?(e.source instanceof Ny?l.nodes.push(Fn(e.source)):l.connectors.push(Fn(e.source)),r=Fn(l),h=e.source.wrapper,r.offsetX=h.offsetX,r.offsetY=h.offsetY):r=Fn(e.source),r.nodes&&r.nodes.length>0)for(c=0,d=r.nodes;c<d.length;c++)for(p=d[c],u=0,g=p.outEdges.concat(p.inEdges);u<g.length;u++)m=g[u],f=this.commandHandler.diagram.getObject(m),-1!==this.undoElement.connectors.indexOf(f)&&-1===r.connectors.indexOf(f)&&(y=Fn(f),l.connectors.push(y),r.connectors.push(y));if("helper"===(a=this.commandHandler.renderContainerHelper(e.source)||e.source||this.commandHandler.renderContainerHelper(e.source)).id||"helper"!==a.id){if(v=!1,a instanceof By&&(b=Fn(a)).selectedObjects.length===this.undoElement.selectedObjects.length)for(H=0;H<b.selectedObjects.length;H++)if(b.selectedObjects[parseInt(H.toString(),10)].id!==this.undoElement.selectedObjects[parseInt(H.toString(),10)].id){v=!0;break}if(C=a instanceof By,I=a instanceof By&&a.selectedObjects&&1===a.selectedObjects.length,M=a instanceof By&&Math.round(a.width)===Math.round(this.undoElement.width)&&Math.round(a.height)===Math.round(this.undoElement.height),S=a.offsetX!==this.undoElement.offsetX||a.offsetY!==this.undoElement.offsetY,x=a.sourcePoint!==this.undoElement.sourcePoint,w=a.targetPoint!==this.undoElement.targetPoint,!v&&(C&&(M||I)||!C)&&(S||x||w)||this.isSelectionHasConnector(a)){if(e.source&&(s={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY},n={offsetX:e.source.wrapper.offsetX,offsetY:e.source.wrapper.offsetY}),R={source:e.source,state:"Completed",oldValue:this.intialValue,newValue:s,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},R={source:e.source,state:"Completed",oldValue:this.intialValue,newValue:s,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:R.allowDrop,cancel:R.cancel},D=!0,"helper"===a.id)if(this.canTrigger){if((r.nodes.length>1||r.connectors.length>1)&&this.commandHandler.diagram.lineRoutingModule&&this.commandHandler.diagram.constraints&ms.LineRouting){for(E=this.commandHandler.diagram.nameTable,H=0;H<r.nodes.length;H++)if(!E[r.nodes[parseInt(H.toString(),10)].parentId]||!E[r.nodes[parseInt(H.toString(),10)].parentId].isLane){D=!1;break}}else D=!0;this.commandHandler.triggerEvent(Ds.positionChange,R),this.connectorEndPointChangeEvent(R)}else D=!1;else this.commandHandler.triggerEvent(Ds.positionChange,R),this.connectorEndPointChangeEvent(R);!i&&D&&(this.commandHandler.startGroupAction(),o=!0,z={type:"PositionChanged",redoObject:Fn(r),undoObject:Fn(this.undoElement),category:"Internal"},r.nodes[0]&&r.nodes[0].processId&&(T={type:"SizeChanged",category:"Internal",undoObject:this.undoParentElement,redoObject:this.commandHandler.getSubProcess(e.source)},this.commandHandler.addHistoryEntry(T)),r.nodes[0]&&r.nodes[0].parentId&&"Container"===this.commandHandler.diagram.nameTable[r.nodes[0].parentId].shape.type&&(A={type:"SizeChanged",category:"Internal",undoObject:this.undoContainerElement,redoObject:this.commandHandler.getContainer(e.source)},this.commandHandler.addHistoryEntry(A)),this.commandHandler.addHistoryEntry(z))}}if(this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,0,0),this.commandHandler.removeSnap(),this.commandHandler.removeHighlighter(),e.source&&this.currentTarget&&xp(this.currentTarget)&&this.commandHandler.isDroppable(e.source,this.currentTarget)){if(N=!0,this.commandHandler.drop(this.currentElement,this.currentTarget,this.currentPosition),this.currentTarget&&this.currentTarget instanceof Rg&&!0===this.commandHandler.diagram.enableConnectorSplit)if(this.currentElement&&this.currentElement instanceof Ny){if(void 0!==this.currentElement.children)for(H=0;H<this.currentElement.children.length;H++)this.currentElement.children[parseInt(H.toString(),10)]!==this.currentTarget.sourceID&&this.currentElement.children[parseInt(H.toString(),10)]!==this.currentTarget.targetID||(N=!1);else this.currentElement.id!==this.currentTarget.sourceID&&this.currentElement.id!==this.currentTarget.targetID||(N=!1);N&&this.commandHandler.connectorSplit(this.currentElement,this.currentTarget)}else if(this.currentElement instanceof By&&!this.commandHandler.PreventConnectorSplit){if(this.currentElement.nodes[0].children)for(H=0;H<this.currentElement.nodes[0].children.length;H++)this.currentElement.nodes[0].children[parseInt(H.toString(),10)]!==this.currentTarget.sourceID&&this.currentElement.nodes[0].children[parseInt(H.toString(),10)]!==this.currentTarget.targetID||(N=!1);else this.currentElement.nodes[0].id!==this.currentTarget.sourceID&&this.currentElement.nodes[0].id!==this.currentTarget.targetID||(N=!1);N&&(this.commandHandler.connectorSplit(this.currentElement.nodes[0],this.currentTarget),this.commandHandler.PreventConnectorSplit=!1)}if(R={element:e.source,target:this.currentTarget,position:this.currentPosition,cancel:!1},this.commandHandler.triggerEvent(Ds.drop,R),!R.cancel&&e.source&&this.commandHandler.isParentAsContainer(this.currentTarget)&&!this.commandHandler.isTargetSubProcess(this.currentTarget)){for(L=e.source instanceof By?e.source.nodes:[e.source],O=!1,H=0;H<L.length;H++){if(L[0].parentId!==L[parseInt(H.toString(),10)].parentId){0;break}0}for(this.commandHandler.diagram.selectedItems.nodes.length!==L.length&&(L=this.commandHandler.diagram.selectedItems.nodes),this.commandHandler.diagram.selectedItems.nodes.length>1?(L=this.calculateDiff(this.commandHandler.diagram.selectedItems,this.currentTarget,this.commandHandler.diagram),this.commandHandler.diagram.multiselect=!0):this.commandHandler.diagram.multiselect=!1,H=0;H<L.length;H++)L[parseInt(H.toString(),10)].container||this.commandHandler.diagram.cancelPositionChange||(O=!0,this.commandHandler.updateLaneChildrenZindex(L[parseInt(H.toString(),10)],this.currentTarget),this.commandHandler.dropChildToContainer(this.currentTarget,L[parseInt(H.toString(),10)]),this.commandHandler.renderContainerHelper(L[parseInt(H.toString(),10)]));L.length>1&&(k=this.commandHandler.diagram.nameTable.helper)&&function(t,e,i,n){Vu(t,i.nameTable[t.parentId],e,i,n,!0)}(this.currentTarget,k,this.commandHandler.diagram),o&&this.commandHandler.isContainer&&O&&this.commandHandler.endGroupAction()}}e.source&&this.currentTarget&&this.commandHandler.dropAnnotation(e.source,this.currentTarget),this.commandHandler.updateSelector(),o&&!this.commandHandler.isContainer&&this.commandHandler.endGroupAction()}else{if(l.nodes.push(Fn(e.source)),e.portId=this.portId,r=Fn(l),z={type:"PortPositionChanged",objectId:this.portId,redoObject:Fn(r),undoObject:Fn(this.undoElement),category:"Internal"},this.commandHandler.addHistoryEntry(z),P=this.getPort(e)){for(j=this.undoElement.nodes.length>0?this.undoElement.nodes[0].ports:[],B=this.undoElement.connectors.length>0?this.undoElement.connectors[0].ports:[],H=0;H<j.length;H++)if(P.id===j[parseInt(H.toString(),10)].id){n={offsetX:j[parseInt(H.toString(),10)].offset.x,offsetY:j[parseInt(H.toString(),10)].offset.y},s={offsetX:P.offset.x,offsetY:P.offset.y};break}for(H=0;H<B.length;H++)if(P.id===B[parseInt(H.toString(),10)].id){n={offset:B[parseInt(H.toString(),10)].offset},s={offset:P.offset};break}}R={source:P,state:"Completed",oldValue:n,newValue:s,target:this.currentTarget,targetPosition:this.currentPosition,allowDrop:!0,cancel:!1},this.commandHandler.triggerEvent(Ds.positionChange,R)}return t.prototype.mouseUp.call(this,e),[2]})})},e.prototype.clearDiff=function(t){t.forEach(function(t,e){delete t.diffX,delete t.diffY})},e.prototype.calculateDiff=function(t,e,i){this.clearDiff(t.nodes);var n,s,r=t.wrapper.bounds.left,o=t.wrapper.bounds.top,a=e.wrapper.bounds.left,l=e.wrapper.bounds.top,h=i.nameTable[e.parentId];0===e.columnIndex&&h&&"Horizontal"===h.shape.orientation&&(a+=50),1===e.rowIndex&&h&&"Vertical"===h.shape.orientation&&(l+=50),n=r<a?a-r:0,s=o<l?l-o:0;var c=t.nodes;return c.forEach(function(t,e){t.diffX=n,t.diffY=s}),c},e.prototype.connectorEndPointChangeEvent=function(t,e){var i=t.source;if(i instanceof By&&i.nodes.length>0)for(var n=0;n<i.nodes.length;n++){var s=i.nodes[parseInt(n.toString(),10)];if(s&&s.inEdges.length>0)for(var r=0;r<s.inEdges.length;r++){var o=this.commandHandler.diagram.getObject(s.inEdges[parseInt(r.toString(),10)]);this.triggerEndPointEvent(o,t,e,"targetPointChange")}if(s&&s.outEdges.length>0)for(r=0;r<s.outEdges.length;r++){o=this.commandHandler.diagram.getObject(s.outEdges[parseInt(r.toString(),10)]);this.triggerEndPointEvent(o,t,e,"sourcePointChange")}}},e.prototype.triggerEndPointEvent=function(t,e,i,n){var s={connector:t,state:e.state,targetNode:t.targetID,targetPort:t.targetPortID,sourceNode:t.sourceID,sourcePort:t.sourcePortID,oldValue:{x:t.targetPoint.x,y:t.targetPoint.y},newValue:{x:t.targetPoint.x+(i?i.x:0),y:t.targetPoint.y+(i?i.y:0)},cancel:e.cancel};this.commandHandler.triggerEvent("targetPointChange"===n?Ds.targetPointChange:Ds.sourcePointChange,s)},e.prototype.isSelectionHasConnector=function(t){return!(!(t.nodes&&t.connectors&&t.nodes.length>0&&t.connectors.length>0)||t.width===this.undoElement.width&&t.height===this.undoElement.height)},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i,n,s=!1;(i=this.commandHandler.renderContainerHelper(e.source)||e.source)instanceof Ny||i instanceof Rg?i instanceof Ny?i.offsetX===this.undoElement.nodes[0].offsetX&&i.offsetY===this.undoElement.nodes[0].offsetY&&(s=!0):fn.equals(i.sourcePoint,this.undoElement.connectors[0].sourcePoint)&&fn.equals(i.targetPoint,this.undoElement.connectors[0].targetPoint)&&(s=!0):i.wrapper.offsetX===this.undoElement.wrapper.offsetX&&i.wrapper.offsetY===this.undoElement.wrapper.offsetY&&(s=!0),i&&(n={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY});var r={source:i,state:"Start",oldValue:n,newValue:n,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(r={source:i,state:"Start",oldValue:n,newValue:n,target:e.target,targetPosition:e.position,allowDrop:r.allowDrop,cancel:r.cancel},"Port"===this.objectType){if(S=this.getPort(e)){for(var o=this.undoElement.nodes.length>0?this.undoElement.nodes[0].ports:[],a=this.undoElement.connectors.length>0?this.undoElement.connectors[0].ports:[],l=0;l<o.length;l++)if(n={offsetX:S.offset.x,offsetY:S.offset.y},S.offset.x!==o[parseInt(l.toString(),10)].offset.x||S.offset.y!==o[parseInt(l.toString(),10)].offset.y){s=!1;break}for(l=0;l<a.length;l++)if(n={offset:S.offset},S.offset!==a[parseInt(l.toString(),10)].offset){s=!1;break}}r={source:S,state:"Start",oldValue:n,newValue:n,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1}}if(!this.isStartAction&&(this.intialValue={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY},this.commandHandler.diagram.lineRoutingModule&&this.commandHandler.diagram.constraints&ms.LineRouting&&"ComplexHierarchicalTree"!==this.commandHandler.diagram.layout.type)){var h=Un(i.wrapper);h.Inflate(40);for(var c=0,d=this.commandHandler.diagram.spatialSearch.findObjects(h);c<d.length;c++){var p=d[c];p instanceof Rg&&this.commandHandler.diagram.routedConnectors.indexOf(p.id)}}if(s&&!x()&&(this.commandHandler.triggerEvent(Ds.positionChange,r),this.connectorEndPointChangeEvent(r),this.isStartAction=!0),this.commandHandler.diagram.cancelPositionChange=r.cancel,this.currentPosition=e.position,"Port"!==this.objectType){this.currentPosition.x,this.prevPosition.x,this.currentPosition.y,this.prevPosition.y;var u,g=this.initialOffset.x+(this.currentPosition.x-this.prevPosition.x),m=this.initialOffset.y+(this.currentPosition.y-this.prevPosition.y);this.commandHandler.dragOverElement(e,this.currentPosition),this.commandHandler.disConnect(e.source),this.commandHandler.removeSnap();var f=void 0,y=this.commandHandler.snapPoint(this.prevPosition,this.currentPosition,g,m);this.initialOffset.x=g-y.x,this.initialOffset.y=m-y.y,i&&(u={offsetX:i.wrapper.offsetX,offsetY:i.wrapper.offsetY},f={offsetX:i.wrapper.offsetX+y.x,offsetY:i.wrapper.offsetY+y.y}),this.currentTarget&&e.target!==this.currentTarget&&this.commandHandler.removeChildFromBPmn(e.source,e.target,this.currentTarget),this.currentTarget=e.target;var v={source:i,state:"Progress",oldValue:u,newValue:f,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};if(this.commandHandler.triggerEvent(Ds.positionChange,v),this.commandHandler.diagram.cancelPositionChange=v.cancel,this.canTrigger=!0,this.connectorEndPointChangeEvent(v,y),!v.cancel&&!this.canCancel){this.blocked=!this.commandHandler.dragSelectedObjects(y.x,y.y);var b=!this.commandHandler.mouseOver(this.currentElement,this.currentTarget,this.currentPosition);this.blocked=this.blocked||b}if(this.commandHandler.removeStackHighlighter(),this.commandHandler.renderStackHighlighter(e),this.currentTarget&&e.source!==this.currentTarget&&this.commandHandler.isDroppable(e.source,this.currentTarget)&&"helper"!==e.source.id){var C=e.source instanceof By?e.source.nodes[0]:e.source;this.commandHandler.isParentAsContainer(C,!0)||"SwimLane"===C.shape.type||C.shape.isPhase||(this.currentTarget.isLane?this.commandHandler.renderStackHighlighter(e,this.currentTarget):this.commandHandler.drawHighlighter(this.currentTarget))}else this.commandHandler.removeHighlighter();if(this.commandHandler.canEnableDefaultTooltip()){var I=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,Ri(function(){return I}),"MoveTool",this.isTooltipVisible),this.isTooltipVisible=!1}}else{var M,S,w=Nn(),D=e.source;f=void 0,o=this.undoElement.nodes.length>0?this.undoElement.nodes[0].ports:[],a=this.undoElement.connectors.length>0?this.undoElement.connectors[0].ports:[];if(S=this.getPort(e)){for(l=0;l<o.length;l++){M={offsetX:S.offset.x,offsetY:S.offset.y};break}for(l=0;l<a.length;l++){M={offset:S.offset};break}}On(w,-D.rotateAngle||-D.wrapper.rotateAngle,D.offsetX||D.wrapper.offsetX,D.offsetY||D.wrapper.offsetY);var E=Ln(w,{x:this.prevPosition.x,y:this.prevPosition.y}),T=Ln(w,{x:e.position.x,y:e.position.y});if(this.commandHandler.portDrag(e.source,e.sourceWrapper,T.x-E.x,T.y-E.y),S){for(l=0;l<o.length;l++){f={offsetX:S.offset.x,offsetY:S.offset.y};break}for(l=0;l<a.length;l++){f={offset:S.offset};break}}var A={source:S,state:"Progress",oldValue:M,newValue:f,target:e.target,targetPosition:e.position,allowDrop:!0,cancel:!1};this.commandHandler.triggerEvent(Ds.positionChange,A)}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.getTooltipContent=function(t){return"X:"+Math.round(t.wrapper.bounds.x)+" Y:"+Math.round(t.wrapper.bounds.y)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this),this.currentTarget=null,this.prevPosition=null},e}(Ju),ng=function(t){function e(e){var i=t.call(this,e,!0)||this;return i.rotateStart=!1,i}return Xu(e,t),e.prototype.mouseDown=function(e){if(this.undoElement=Fn(e.source),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var i=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),n=0;n<i.length;n++){var s=this.commandHandler.cloneChild(i[parseInt(n.toString(),10)].id);this.childTable[i[parseInt(n.toString(),10)].id]=Fn(s)}t.prototype.mouseDown.call(this,e)},e.prototype.mouseUp=function(e){return Gu(this,void 0,void 0,function(){var i,n,s,r,o,a;return Ku(this,function(l){return this.checkPropertyValue(),i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle!==i.wrapper.rotateAngle&&(n={rotateAngle:this.undoElement.rotateAngle},s={rotateAngle:i.wrapper.rotateAngle},r={source:e.source,state:"Completed",oldValue:n,newValue:s,cancel:!1},this.commandHandler.triggerEvent(Ds.rotateChange,r),void 0,o=Fn(e.source),a={type:"RotationChanged",redoObject:Fn(o),undoObject:Fn(this.undoElement),category:"Internal",childTable:this.childTable},this.commandHandler.addHistoryEntry(a),this.commandHandler.updateSelector(),this.rotateStart=!1),this.canCancel=void 0,this.tempArgs=void 0,t.prototype.mouseUp.call(this,e),[2]})})},e.prototype.mouseMove=function(e){var i;if(t.prototype.mouseMove.call(this,e),i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.rotateAngle===i.wrapper.rotateAngle&&!this.rotateStart){var n={rotateAngle:i.wrapper.rotateAngle},s={source:e.source,state:"Start",oldValue:n,newValue:n,cancel:!1};this.commandHandler.triggerEvent(Ds.rotateChange,s),this.rotateStart=!0}this.currentPosition=e.position;var r={x:i.wrapper.offsetX,y:i.wrapper.offsetY},o=fn.findAngle(r,this.currentPosition)+90,a=this.commandHandler.snapAngle(o);o=((o=0!==a?a:o)+360)%360;var l={rotateAngle:i.wrapper.rotateAngle},h={rotateAngle:o},c=(e.source,!1),d={source:e.source,state:"Progress",oldValue:l,newValue:h,cancel:c};if(this.commandHandler.triggerEvent(Ds.rotateChange,d),d.cancel||(this.blocked=!this.commandHandler.rotateSelectedItems(o-i.wrapper.rotateAngle)),this.commandHandler.canEnableDefaultTooltip()){var p=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,Ri(function(){return p}),"RotateTool",this.isTooltipVisible),this.isTooltipVisible=!1}return!this.blocked},e.prototype.getTooltipContent=function(t){return Math.round(t.rotateAngle%360).toString()+"\xb0"},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(Ju),sg=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.resizeStart=!1,n.initialBounds=new Tn,n.canCancel=!1,n.corner=i,n}return Xu(e,t),e.prototype.mouseDown=function(e){if(this.undoElement=Fn(e.source),this.undoParentElement=this.commandHandler.getSubProcess(e.source),this.undoContainerElement=this.commandHandler.getContainer(e.source),t.prototype.mouseDown.call(this,e),this.undoElement.nodes[0]&&this.undoElement.nodes[0].children)for(var i=this.commandHandler.getAllDescendants(this.undoElement.nodes[0],[]),n=0;n<i.length;n++){var s=this.commandHandler.cloneChild(i[parseInt(n.toString(),10)].id);this.childTable[i[parseInt(n.toString(),10)].id]=Fn(s)}this.commandHandler.checkSelection(e.source,this.corner),t.prototype.mouseDown.call(this,e),this.initialBounds.x=e.source.wrapper.offsetX,this.initialBounds.y=e.source.wrapper.offsetY,this.initialBounds.height=e.source.wrapper.actualSize.height,this.initialBounds.width=e.source.wrapper.actualSize.width},e.prototype.mouseUp=function(e,i){return Gu(this,void 0,void 0,function(){var n,s,r,o,a,l,h,c;return Ku(this,function(d){return this.checkPropertyValue(),this.commandHandler.removeSnap(),this.commandHandler.updateSelector(),n=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===n.wrapper.offsetX&&this.undoElement.offsetY===n.wrapper.offsetY&&this.undoElement.width===n.wrapper.bounds.width&&this.undoElement.height===n.wrapper.bounds.height||(s=this.updateSize(e.source,this.currentPosition,this.prevPosition,this.corner,this.initialBounds),this.blocked=this.scaleObjects(s.width,s.height,this.corner,this.currentPosition,this.prevPosition,n),r={width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height},o={source:e.source,state:"Completed",oldValue:this.startValues,newValue:r,cancel:!1},this.commandHandler.triggerEvent(Ds.sizeChange,o),a=Fn(e.source),l={type:"SizeChanged",redoObject:Fn(a),undoObject:Fn(this.undoElement),category:"Internal",childTable:this.childTable},this.resizeStart=!1,i||(this.commandHandler.startGroupAction(),a.nodes[0]&&a.nodes[0].processId&&(h={type:"SizeChanged",redoObject:this.commandHandler.getSubProcess(e.source),undoObject:this.undoParentElement,category:"Internal"},this.commandHandler.addHistoryEntry(h)),a.nodes[0]&&a.nodes[0].parentId&&"Container"===this.commandHandler.diagram.nameTable[a.nodes[0].parentId].shape.type&&(c={type:"SizeChanged",redoObject:this.commandHandler.getContainer(e.source),undoObject:this.undoContainerElement,category:"Internal"},this.commandHandler.addHistoryEntry(c)),this.commandHandler.addHistoryEntry(l),this.commandHandler.endGroupAction())),t.prototype.mouseUp.call(this,e),[2,!this.blocked]})})},e.prototype.mouseMove=function(e){var i;if(t.prototype.mouseMove.call(this,e),i=this.commandHandler.renderContainerHelper(e.source)||e.source,this.undoElement.offsetX===i.wrapper.offsetX&&this.undoElement.offsetY===i.wrapper.offsetY&&!this.resizeStart){var n={width:e.source.wrapper.actualSize.width,height:e.source.wrapper.actualSize.height};this.startValues=n;var s={source:e.source,state:"Start",oldValue:n,newValue:this.currentElement,cancel:!1};this.commandHandler.triggerEvent(Ds.sizeChange,s),this.resizeStart=!0}this.currentPosition=e.position;var r={x:this.currentPosition.x-this.startPosition.x,y:this.currentPosition.y-this.startPosition.y};r=ts(-this.currentElement.wrapper.rotateAngle,void 0,void 0,r);this.currentElement.wrapper.actualSize.width,r.x,this.currentElement.wrapper.actualSize.width,this.currentElement.wrapper.actualSize.height,r.y,this.currentElement.wrapper.actualSize.height;r=this.getChanges(r),this.commandHandler.removeSnap();var o=this.updateSize(e.source,this.startPosition,this.currentPosition,this.corner,this.initialBounds);if(this.blocked=!this.scaleObjects(o.width,o.height,this.corner,this.startPosition,this.currentPosition,i),this.commandHandler.canEnableDefaultTooltip()){var a=this.getTooltipContent(e.source);this.commandHandler.showTooltip(e.source,e.position,Ri(function(){return a}),"ResizeTool",this.isTooltipVisible),this.isTooltipVisible=!1}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.getTooltipContent=function(t){return"W:"+Math.round(t.wrapper.bounds.width)+" H:"+Math.round(t.wrapper.bounds.height)},e.prototype.getChanges=function(t){switch(this.corner){case"ResizeEast":return{x:t.x,y:0};case"ResizeSouthEast":return t;case"ResizeSouth":return{x:0,y:t.y};case"ResizeNorth":return{x:0,y:-t.y};case"ResizeNorthEast":return{x:t.x,y:-t.y};case"ResizeNorthWest":return{x:-t.x,y:-t.y};case"ResizeWest":return{x:-t.x,y:0};case"ResizeSouthWest":return{x:-t.x,y:t.y}}return t},e.prototype.scaleObjects=function(t,e,i,n,s,r){var o=this.commandHandler.diagram.selectedItems;(r instanceof By&&1===r.nodes.length&&r.nodes[0].constraints&ps.AspectRatio||r instanceof Ny&&"helper"===r.id&&1===o.nodes.length&&o.nodes[0].constraints&ps.AspectRatio)&&("ResizeWest"===i||"ResizeEast"===i||"ResizeNorth"===i||"ResizeSouth"===i?1===e&&1===t||(e=t=Math.max(1===e?0:e,1===t?0:t)):e=t=Math.max(e,t));var a={width:r.width,height:r.height};this.blocked=this.commandHandler.scaleSelectedItems(t,e,this.getPivot(this.corner));var l,h={width:r.width,height:r.height};return l={source:r,state:"Progress",oldValue:a,newValue:h,cancel:{source:r,state:"Progress",oldValue:a,newValue:h,cancel:!1}.cancel},this.commandHandler.triggerEvent(Ds.sizeChange,l),(l.cancel||this.canCancel)&&this.commandHandler.scaleSelectedItems(1/t,1/e,this.getPivot(this.corner)),this.blocked},e}(Ju),rg=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.sourceObject=i,n}return Xu(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setFocus(),this.triggerElementDrawEvent(e.source,"Start","Node",this.getShapeType(),!0)},e.prototype.mouseMove=function(e){var i;t.prototype.mouseMove.call(this,e);var n={offsetX:this.currentPosition.x,width:3,height:3,offsetY:this.currentPosition.y};if(this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(n)),this.triggerElementDrawEvent(this.drawingObject,"Progress","Node",this.getShapeType(),!1),this.inAction&&!1===fn.equals(this.currentPosition,this.prevPosition)){var s=Tn.toBounds([this.prevPosition,this.currentPosition]);(i=this.commandHandler.checkBoundaryConstraints(void 0,void 0,s))&&this.commandHandler.updateNodeDimension(this.drawingObject,s)}return i},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=Tn.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.checkBoundaryConstraints(void 0,void 0,i),this.drawingObject&&this.drawingObject instanceof Ny&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Node",this.getShapeType(),!1),this.drawingObject=null),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(Ju),og=function(t){function e(e,i,n){var s=t.call(this,e,i)||this;return s.sourceObject=n,s}return Xu(e,t),e.prototype.mouseDown=function(e){return Gu(this,void 0,void 0,function(){return Ku(this,function(i){return t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setFocus(),this.triggerElementDrawEvent(e.source,"Start","Connector",this.commandHandler.diagram.drawingObject.type,!0),[2]})})},e.prototype.mouseMove=function(e){if(this.commandHandler.enableServerDataBinding(!1),this.inAction){var i={sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.drawingObject||(this.drawingObject=this.commandHandler.drawObject(i)),e.source=this.drawingObject,this.triggerElementDrawEvent(e.source,"Progress","Connector",this.drawingObject.type,!1),e.actualObject&&(e.actualObject.parentId||e.actualObject.children)&&""===this.drawingObject.sourceID&&this.setTarget(e),(e.target&&e.target instanceof Ny||e.actualObject&&e.sourceWrapper&&vf(e.actualObject,e.sourceWrapper))&&("ConnectorTargetEnd"!==this.endPoint||bp(e.target))&&this.commandHandler.connect(this.endPoint,e),this.endPoint="ConnectorTargetEnd"}return this.inAction||(this.commandHandler.updateSelector(),e.source&&!e.source.isLane&&e.sourceWrapper&&this.commandHandler.renderHighlighter(e,!0)),t.prototype.mouseMove.call(this,e),this.commandHandler.enableServerDataBinding(!0),!this.blocked},e.prototype.setTarget=function(t){t.target?t.sourceWrapper.id.includes(t.target.id)||t.target.parentId&&t.sourceWrapper.id.includes(t.target.parentId)&&(t.target=this.commandHandler.diagram.nameTable[t.target.parentId]):t.sourceWrapper.id.includes(t.actualObject.id)?t.target=t.actualObject:t.actualObject.parentId&&t.sourceWrapper.id.includes(t.actualObject.parentId)&&(t.target=this.commandHandler.diagram.nameTable[t.actualObject.parentId])},e.prototype.mouseUp=function(e){return Gu(this,void 0,void 0,function(){return Ku(this,function(i){return this.commandHandler.enableServerDataBinding(!1),this.checkPropertyValue(),this.drawingObject&&this.drawingObject instanceof Rg&&(this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Connector",this.drawingObject.type,!1),this.drawingObject=null),this.inAction=!1,this.commandHandler.enableServerDataBinding(!0),t.prototype.mouseUp.call(this,e),[2]})})},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.mouseLeave=function(t){this.inAction&&this.mouseUp(t)},e}(eg),ag=function(t){function e(e){return t.call(this,e,!0)||this}return Xu(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.commandHandler.clearSelection();var i={shape:{type:"Text"},offsetX:this.currentPosition.x,offsetY:this.currentPosition.y};e.source||(this.drawingNode=this.commandHandler.drawObject(i))},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.drawingNode)this.drawingNode.style.strokeColor="black",this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent";else{var i={shape:{type:"Text"},offsetX:this.currentPosition.x,width:30,height:30,offsetY:this.currentPosition.y};this.drawingNode=this.commandHandler.drawObject(i),this.drawingNode.style.strokeDashArray="2 2",this.drawingNode.style.fill="transparent"}if(this.inAction&&!1===fn.equals(this.currentPosition,this.prevPosition)){var n=Tn.toBounds([this.prevPosition,this.currentPosition]);this.commandHandler.updateNodeDimension(this.drawingNode,n)}return!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.drawingNode?(this.drawingNode.style.strokeColor="none",this.drawingNode.style.fill="none"):this.drawingNode=e.source,this.drawingNode&&this.drawingNode instanceof Ny&&this.commandHandler.addText(this.drawingNode,this.currentPosition),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e}(Ju),lg=function(t){function e(e,i){var n=t.call(this,e)||this;return n.zooming=i,n}return Xu(e,t),e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0,this.commandHandler.setBlazorDiagramProps(!0)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction)if(this.zooming||!1!==fn.equals(this.currentPosition,this.prevPosition)){if(e.moveTouches&&e.moveTouches.length&&e.moveTouches.length>=2){var i=e.startTouches[0],n=e.startTouches[1],s=e.moveTouches[0],r=e.moveTouches[1],o=this.getDistance(s,r)/this.getDistance(i,n),a=e.position;1!==o&&this.commandHandler.zoom(o,0,0,a),this.updateTouch(i,s),this.updateTouch(n,r)}}else{var l=this.currentPosition.x-this.prevPosition.x,h=this.currentPosition.y-this.prevPosition.y;this.commandHandler.scroll(l,h,this.currentPosition)}return this.commandHandler.dataBinding(),!this.blocked},e.prototype.mouseUp=function(e){this.commandHandler.setBlazorDiagramProps(!1),this.checkPropertyValue(),this.commandHandler.updatePanState(!1),t.prototype.mouseUp.call(this,e),this.inAction=!1},e.prototype.endAction=function(){t.prototype.endAction.call(this)},e.prototype.getDistance=function(t,e){var i=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(i*i+n*n)},e.prototype.updateTouch=function(t,e){t.pageX=e.pageX,t.pageY=e.pageY},e}(Ju),hg=function(t){function e(e){return t.call(this,e,!0)||this}return Xu(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.commandHandler.initExpand(e),t.prototype.mouseUp.call(this,e)},e}(Ju),cg=function(t){function e(e){return t.call(this,e,!0)||this}return Xu(e,t),e.prototype.mouseUp=function(e){this.checkPropertyValue();var i="_blank",n="",s=window.innerHeight,r=window.innerWidth,o=window.screenTop,a=window.screenLeft;"CurrentTab"===e.sourceWrapper.hyperlink.hyperlinkOpenState?i="_self":"NewWindow"===e.sourceWrapper.hyperlink.hyperlinkOpenState&&(n="height="+s+",width="+r+",top="+o+",left="+a),window.open(e.sourceWrapper.hyperlink.link,i,n).focus(),t.prototype.mouseUp.call(this,e)},e}(Ju),dg=function(t){function e(e){return t.call(this,e,!0)||this}return Xu(e,t),e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=void 0,n=this.drawingObject.shape;i={x:(i=n.points[n.points.length-1]).x,y:i.y},this.drawingObject.shape.points.push(i)}else{this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var s={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,shape:{type:"Basic",shape:"Polygon",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};this.triggerElementDrawEvent(e.source,"Start","Node",this.getShapeType(),!0),this.drawingObject=this.commandHandler.drawObject(s)}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject.shape;if(i.points[i.points.length-1].x=this.currentPosition.x,i.points[i.points.length-1].y=this.currentPosition.y,this.drawingObject.wrapper.children[0].data=vn(this.drawingObject.shape.points),this.triggerElementDrawEvent(this.drawingObject,"Progress","Node",this.getShapeType(),!1),this.inAction&&!1===fn.equals(this.currentPosition,this.prevPosition)){var n=Tn.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,n)}}return!0},e.prototype.mouseUp=function(e,i){this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&(this.inAction=!1,this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Node",this.getShapeType(),!1)),this.endAction()},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.endAction=function(){this.inAction=!1,this.drawingObject=null},e}(Ju),pg=function(t){function e(e){return t.call(this,e,!0)||this}return Xu(e,t),e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject;i.targetPoint=this.currentPosition,this.triggerElementDrawEvent(this.drawingObject,"Progress","Connector",this.commandHandler.diagram.drawingObject.type,!1),this.commandHandler.updateConnectorPoints(i)}return!0},e.prototype.mouseDown=function(e){if(t.prototype.mouseDown.call(this,e),this.inAction=!0,this.drawingObject){var i=this.drawingObject,n=void 0;(n=new Tg(i,"segments",{type:"Straight"},!0)).point=this.currentPosition,i.segments[i.segments.length-1]=n}else{var s={id:"Connector",type:"Straight",sourcePoint:this.currentPosition,targetPoint:this.currentPosition};this.triggerElementDrawEvent(e.source,"Start","Connector",this.commandHandler.diagram.drawingObject.type,!0),this.inAction&&(this.drawingObject=this.commandHandler.drawObject(s))}},e.prototype.mouseWheel=function(e){t.prototype.mouseWheel.call(this,e),this.mouseMove(e)},e.prototype.mouseUp=function(e){if(this.checkPropertyValue(),t.prototype.mouseMove.call(this,e),this.inAction&&this.drawingObject){var i=this.drawingObject;i.segments[i.segments.length-1].point={x:0,y:0},this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Connector",this.commandHandler.diagram.drawingObject.type,!1)}this.endAction()},e.prototype.endAction=function(){this.drawingObject=null,this.inAction=!1},e}(Ju),ug=function(t){function e(e){return t.call(this,e,!0)||this}return Xu(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.undoElement=Fn(e.source),this.annotationId=e.sourceWrapper.id,t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){t.prototype.mouseMove.call(this,e);var i=this.currentPosition.x-this.prevPosition.x,n=this.currentPosition.y-this.prevPosition.y,s=e.source;if(s instanceof Ny){var r=Nn();On(r,-s.rotateAngle,0,0);var o=Ln(r,{x:i,y:n});i=o.x,n=o.y}return this.inAction&&(this.commandHandler.labelDrag(e.source,e.sourceWrapper,i,n),this.commandHandler.updateSelector()),this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=e.source;this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,undoObject:Fn(this.undoElement),category:"Internal",redoObject:Fn(i)};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(Ju),gg=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.corner=i,n}return Xu(e,t),e.prototype.mouseDown=function(e){this.inAction=!0;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.annotationId=e.source.wrapper.children[0].id,this.undoElement=Fn(i);var n=e.source.wrapper.children[0];this.initialBounds={x:n.offsetX,y:n.offsetY,width:n.actualSize.width,height:n.actualSize.height},t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){return t.prototype.mouseMove.call(this,e),this.inAction&&this.resizeObject(e),!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue();var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.inAction=!1;var n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Fn(i),undoObject:Fn(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e.prototype.resizeObject=function(t){var e;e=t.source.nodes.length?t.source.nodes[0]:t.source.connectors[0];var i,n,s=t.source.wrapper.children[0],r={x:s.offsetX,y:s.offsetY},o=s.rotateAngle;o=((o+=e instanceof Ny?e.rotateAngle:0)+360)%360;var a=Nn();On(a,o,r.x,r.y);var l=this.corner.slice(5),h=this.updateSize(s,this.startPosition,this.currentPosition,l,this.initialBounds,o),c=s.offsetX-s.actualSize.width*s.pivot.x,d=s.offsetY-s.actualSize.height*s.pivot.y,p=this.getPivot(l),u=Ln(a,p={x:c+s.actualSize.width*p.x,y:d+s.actualSize.height*p.y});h.x=u.x,h.y=u.y,i=(i=h.width)<0?1:i,n=(n=h.height)<0?1:n,this.commandHandler.labelResize(e,t.source.annotation,i,n,h,t.source),this.commandHandler.updateSelector()},e}(Ju),mg=function(t){function e(e){return t.call(this,e,!0)||this}return Xu(e,t),e.prototype.mouseDown=function(e){this.inAction=!0,this.annotationId=e.source.wrapper.children[0].id;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0];this.undoElement=Fn(i),t.prototype.mouseDown.call(this,e)},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),e.source&&this.inAction){var i,n=e.source.nodes[0]?e.source.nodes[0]:e.source.connectors[0];i=e.source.annotation,this.commandHandler.labelRotate(n,i,this.currentPosition,e.source),this.commandHandler.updateSelector()}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){this.checkPropertyValue(),this.inAction=!1;var i=e.source.nodes.length?e.source.nodes[0]:e.source.connectors[0],n={type:"AnnotationPropertyChanged",objectId:this.annotationId,redoObject:Fn(i),undoObject:Fn(this.undoElement),category:"Internal"};this.commandHandler.addHistoryEntry(n),t.prototype.mouseUp.call(this,e)},e.prototype.mouseLeave=function(t){this.mouseUp(t)},e}(Ju),fg=function(t){function e(e){return t.call(this,e,!0)||this}return Xu(e,t),e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.inAction){var i=this.drawingObject.shape,n=this.currentPosition;if(i.points.push(n),this.drawingObject.wrapper.children[0].data=bn(this.drawingObject.shape.points),i.data=bn(i.points),this.triggerElementDrawEvent(e.source,"Progress","Connector",this.drawingObject.type,!1),this.inAction&&!1===fn.equals(this.currentPosition,this.prevPosition)){var s=Tn.toBounds(this.drawingObject.shape.points);this.commandHandler.updateNodeDimension(this.drawingObject,s)}}return!0},e.prototype.mouseDown=function(e){t.prototype.mouseDown.call(this,e),this.inAction=!0,this.startPoint={x:this.startPosition.x,y:this.startPosition.y};var i={offsetX:this.currentPosition.x,offsetY:this.currentPosition.y,width:5,height:5,style:{strokeColor:"black",strokeWidth:1,fill:"transparent"},shape:{type:"Path",points:[{x:this.startPoint.x,y:this.startPoint.y},{x:this.currentPosition.x,y:this.currentPosition.y}]}};this.triggerElementDrawEvent(e.source,"Start","Connector",this.commandHandler.diagram.drawingObject.type,!0),this.drawingObject=this.commandHandler.drawObject(i)},e.prototype.mouseUp=function(e){this.checkPropertyValue();if(this.inAction){this.inAction=!1;var i=this.drawingObject.shape,n=i.points;this.commandHandler.addObjectToDiagram(this.drawingObject);var s=this.drawingObject.id,r=this.commandHandler.diagram.nameTable[""+s];this.commandHandler.diagram.remove(r),n=this.pointReduction(n,10);var o={};this.commandHandler.diagram.drawingObject.bezierSettings&&(o=this.commandHandler.diagram.drawingObject.bezierSettings),void 0===o.allowSegmentsReset&&(o.allowSegmentsReset=!1);var a={id:"newConnector"+Hn(),type:"Bezier",sourcePoint:{x:n[0].x,y:n[0].y},targetPoint:{x:n[n.length-1].x,y:n[n.length-1].y},segments:[],bezierSettings:o};this.drawingObject=this.commandHandler.drawObject(a),this.drawingObject=this.bezierCurveSmoothness(n,.5,this.drawingObject,i),this.commandHandler.updateConnectorPoints(this.drawingObject),this.commandHandler.addObjectToDiagram(this.drawingObject),this.triggerElementDrawEvent(this.drawingObject,"Completed","Connector",this.commandHandler.diagram.drawingObject.type,!1),t.prototype.mouseUp.call(this,e)}},e.prototype.pointReduction=function(t,e){if(null===t||t.length<3)return t;var i=t.length-1,n=[];for(n.push(0),n.push(i);t[parseInt((0).toString(),10)]===t[parseInt(i.toString(),10)];)i--;this.reduction(t,0,i,e,n);var s=[];return n.sort(function(t,e){return t-e}),n.forEach(function(e){s.push(t[parseInt(e.toString(),10)])}),s},e.prototype.reduction=function(t,e,i,n,s){for(var r=0,o=0,a=e;a<i;a++){var l=this.perpendicularDistance(t[parseInt(e.toString(),10)],t[parseInt(i.toString(),10)],t[parseInt(a.toString(),10)]);l>r&&(r=l,o=a)}r>n&&0!==o&&(s.push(o),this.reduction(t,e,o,n,s),this.reduction(t,o,i,n,s))},e.prototype.perpendicularDistance=function(t,e,i){return Math.abs(.5*(t.x*e.y-e.x*t.y+(e.x*i.y-i.x*e.y)+(i.x*t.y-t.x*i.y)))/Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))*2},e.prototype.bezierCurveSmoothness=function(t,e,i,n){if(t.length<3)return i;for(var s=0;s<t.length-1;s++){var r=t[parseInt(s.toString(),10)].x,o=t[parseInt(s.toString(),10)].y,a=t[s+1].x,l=t[s+1].y,h=void 0,c=void 0;if(0===s){var d=t[parseInt(s.toString(),10)];h=d.x,c=d.y}else h=t[s-1].x,c=t[s-1].y;var p=void 0,u=void 0;if(s===t.length-2){var g=t[s+1];p=g.x,u=g.y}else p=t[s+2].x,u=t[s+2].y;var m=(h+r)/2,f=(c+o)/2,y=(r+a)/2,v=(o+l)/2,b=(a+p)/2,C=(l+u)/2,I={},M={},S={},x={};I.x=h,I.y=c,M.x=r,M.y=o,S.x=a,S.y=l,x.x=p,x.y=u;var w=fn.findLength(I,M),D=fn.findLength(M,S),E=w/(w+D),T=D/(D+fn.findLength(S,x)),A=m+(y-m)*E,N=f+(v-f)*E,L=y+(b-y)*T,O=v+(C-v)*T,k=A+(y-A)*e+r-A,z=N+(v-N)*e+o-N,P=L+(y-L)*e+a-L,j=O+(v-O)*e+l-O,B=new Ag(n,"segments",{type:"Bezier"},!0),H={x:k,y:z},R={x:P,y:j},V={x:r,y:o},U={x:a,y:l};B.type="Bezier",i.segments[parseInt(s.toString(),10)]=B,0===s&&(H={x:r,y:o}),s===t.length-2&&(R={x:a,y:l}),i.segments[parseInt(s.toString(),10)].vector1={angle:Ad(V,H),distance:fn.findLength(V,H)},i.segments[parseInt(s.toString(),10)].vector2={angle:Ad(U,R),distance:fn.findLength(U,R)},i.segments[parseInt(s.toString(),10)].point=U}return i},e}(Ju),yg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vg=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},bg=function(t){if(t)switch(t.type){case"Bpmn":return Dg;case"UmlActivity":return wg;case"UmlClassifier":return Hg;default:return xg}return xg},Cg=function(t){if(t)switch(t.type){case"Straight":default:return Tg;case"Bezier":return Ag;case"Orthogonal":return Ng}},Ig=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt(10)],e.prototype,"width",void 0),vg([jt(10)],e.prototype,"height",void 0),vg([jt("Arrow")],e.prototype,"shape",void 0),vg([Bt({fill:"black",strokeColor:"black",strokeWidth:1},Hs)],e.prototype,"style",void 0),vg([Bt({x:0,y:.5},fn)],e.prototype,"pivot",void 0),vg([jt("")],e.prototype,"pathData",void 0),e}(re),Mg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt(0)],e.prototype,"angle",void 0),vg([jt(0)],e.prototype,"distance",void 0),e}(re),Sg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt(Us.All)],e.prototype,"controlPointsVisibility",void 0),vg([jt("FreeForm")],e.prototype,"segmentEditOrientation",void 0),vg([jt(Fs.Default)],e.prototype,"smoothness",void 0),vg([jt(!0)],e.prototype,"allowSegmentsReset",void 0),e}(re),xg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt("None")],e.prototype,"type",void 0),e}(re),wg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt("Object")],e.prototype,"flow",void 0),vg([jt(30)],e.prototype,"exceptionFlowHeight",void 0),e}(xg),Dg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt("Sequence")],e.prototype,"flow",void 0),vg([jt("Normal")],e.prototype,"sequence",void 0),vg([jt("Default")],e.prototype,"message",void 0),vg([jt("Default")],e.prototype,"association",void 0),e}(xg),Eg=function(t){function e(e,i,n,s){var r=t.call(this,e,i,n,s)||this;return r.points=[],r}return yg(e,t),vg([jt("Straight")],e.prototype,"type",void 0),vg([jt(!0)],e.prototype,"allowDrag",void 0),e}(re),Tg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),e.prototype.getClassName=function(){return"StraightSegment"},vg([Bt({x:0,y:0},fn)],e.prototype,"point",void 0),e}(Eg),Ag=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),e.prototype.getClassName=function(){return"BezierSegment"},e.prototype.getPoints=function(t,e){var i=[];if(i.length>0||null!=e){var n=i.length>0?i[i.length-1]:e,s=this.bezireToPoly(n,t);i.push.apply(i,s)}return i},e.prototype.bezireToPoly=function(t,e){var i=[];if(e){var n=e,s=t,r=n.bezierPoint1,o=n.bezierPoint2,a={x:n.points[1].x,y:n.points[1].y};this.flattenCubicBezier(i,s,r,o,a,10)}return i},e.prototype.flattenCubicBezier=function(t,e,i,n,s,r){var o,a=(fn.findLength(e,i)+fn.findLength(i,n)+fn.findLength(n,s))/r;for(o=0;o<=a;o++){var l=o/a,h=(1-l)*(1-l)*(1-l)*e.x+3*l*(1-l)*(1-l)*i.x+3*l*l*(1-l)*n.x+l*l*l*s.x,c=(1-l)*(1-l)*(1-l)*e.y+3*l*(1-l)*(1-l)*i.y+3*l*l*(1-l)*n.y+l*l*l*s.y;t.push({x:h,y:c})}},vg([jt("Horizontal")],e.prototype,"orientation",void 0),vg([Bt({x:0,y:0},fn)],e.prototype,"point1",void 0),vg([Bt({x:0,y:0},fn)],e.prototype,"point2",void 0),vg([Bt({angle:0,distance:0},Mg)],e.prototype,"vector1",void 0),vg([Bt({angle:0,distance:0},Mg)],e.prototype,"vector2",void 0),e}(Tg),Ng=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),e.prototype.getClassName=function(){return"OrthogonalSegment"},vg([jt(null)],e.prototype,"length",void 0),vg([jt(null)],e.prototype,"direction",void 0),e}(Eg);!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}yg(e,t),e.prototype.getClassName=function(){return"DiagramConnectorSegment"},vg([jt("Straight")],e.prototype,"type",void 0),vg([jt(!0)],e.prototype,"allowDrag",void 0),vg([Bt({x:0,y:0},fn)],e.prototype,"point",void 0),vg([Bt({x:0,y:0},fn)],e.prototype,"point1",void 0),vg([Bt({x:0,y:0},fn)],e.prototype,"point2",void 0),vg([Bt({angle:0,distance:0},Mg)],e.prototype,"vector1",void 0),vg([Bt({angle:0,distance:0},Mg)],e.prototype,"vector2",void 0),vg([jt(null)],e.prototype,"length",void 0),vg([jt(null)],e.prototype,"direction",void 0)}(re);function Lg(t,e,i){var n=t.center,s=i?45:180/(2+2/(t.height/t.width)),r=s,o=180-s,a=o+2*s,l=360-s,h=Ad(e,n);return h>r&&h<o?"top":h>o&&h<a?"right":h>a&&h<l?"bottom":"left"}function Og(t){return!t.distance&&!t.angle}function kg(t,e,i){var n=60,s={x:0,y:0};switch(i||(i=Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"right":"left":t.y<e.y?"bottom":"top"),i){case"bottom":case"top":n=Math.min(.45*Math.abs(t.y-e.y),n),s={x:t.x,y:t.y+("bottom"===i?n:-n)};break;case"right":case"left":n=Math.min(.45*Math.abs(t.x-e.x),n),s={x:t.x+("right"===i?n:-n),y:t.y}}return s}function zg(t,e,i,n,s){var r=0,o=0,a=0,l=0,h=Number((s.distance(e,t)+s.distance(i,e)+s.distance(n,i))/3);if(0!==h)for(var c=0;c<=h;c++){var d=c/h,p=(1-d)*(1-d)*(1-d)*t.x+3*d*(1-d)*(1-d)*e.x+3*d*d*(1-d)*i.x+d*d*d*n.x,u=(1-d)*(1-d)*(1-d)*t.y+3*d*(1-d)*(1-d)*e.y+3*d*d*(1-d)*i.y+d*d*d*n.y;0===c?(r=a=p,o=l=u):(r=Math.min(p,r),o=Math.min(u,o),a=Math.max(p,a),l=Math.max(u,l))}return{x:r,y:o,width:a-r,height:l-o,left:r,top:o,right:r+(a-r),bottom:o+(l-o),center:{x:(r+(a-r))/2,y:(o+(l-o))/2}}}function Pg(t,e,i,n,s,r,o){var a={x:0,y:0},l=r/o,h=(1-l)*(1-l)*(1-l)*e.x+3*l*(1-l)*(1-l)*i.x+3*l*l*(1-l)*n.x+l*l*l*s.x;a.x=h;var c=(1-l)*(1-l)*(1-l)*e.y+3*l*(1-l)*(1-l)*i.y+3*l*l*(1-l)*n.y+l*l*l*s.y;return a.y=c,a}var jg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt(!0)],e.prototype,"optional",void 0),vg([jt(void 0)],e.prototype,"lowerBounds",void 0),vg([jt(void 0)],e.prototype,"upperBounds",void 0),e}(re),Bg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt("OneToOne")],e.prototype,"type",void 0),vg([Bt({},jg)],e.prototype,"target",void 0),vg([Bt({},jg)],e.prototype,"source",void 0),e}(re),Hg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yg(e,t),vg([jt("UmlClassifier")],e.prototype,"type",void 0),vg([jt("Aggregation")],e.prototype,"relationship",void 0),vg([jt("Directional")],e.prototype,"associationType",void 0),vg([Bt({},Bg)],e.prototype,"multiplicity",void 0),e}(xg),Rg=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}yg(e,t),vg([jt("None")],e.prototype,"type",void 0),vg([jt("Directional")],e.prototype,"associationType",void 0),vg([jt("Aggregation")],e.prototype,"relationship",void 0),vg([Bt({},Bg)],e.prototype,"multiplicity",void 0),vg([jt("Sequence")],e.prototype,"bpmnFlow",void 0),vg([jt("Default")],e.prototype,"message",void 0),vg([jt("Normal")],e.prototype,"sequence",void 0),vg([jt("Default")],e.prototype,"association",void 0),vg([jt("Object")],e.prototype,"umlActivityFlow",void 0),vg([jt(30)],e.prototype,"exceptionFlowHeight",void 0)}(re),function(t){function e(e,i,n,s){var r=t.call(this,e,i,n,s)||this;return r.parentId="",r.bridges=[],r.status="None",r.outEdges=[],r.inEdges=[],r.shape&&"UmlActivity"===r.shape.type&&mm(n,r),n&&n.shape&&"None"!==n.shape.type&&fm(n,r),r}return yg(e,t),e.prototype.setPortID=function(t,e){if(this.targetID&&this.sourceID)for(var i=t.nameTable[this.targetID],n=t.nameTable[this.sourceID],s=e?i&&i.ports:n&&n.ports,r=void 0,o=0;s&&o<s.length;o++)r=s[parseInt(o.toString(),10)],this.targetPortID===r.id&&e?!(r.constraints&Es.None)&&r.constraints&Es.InConnect||(this.targetPortID=""):this.sourcePortID!==r.id||e||!(r.constraints&Es.None)&&r.constraints&Es.OutConnect||(this.sourcePortID="")},e.prototype.init=function(t){var e;this.id||(this.id=Hn()),this.sourcePortID&&this.setPortID(t),this.targetPortID&&this.setPortID(t,!0);var i=new $s,n=new Xs;n.id=this.id+"_path";var s=new Xs,r=new Xs;n=this.getSegmentElement(this,n);var o=[];o="Bezier"===this.type?this.intermediatePoints:this.getConnectorPoints(this.type),o=this.clipDecorators(this,o);var a=Tn.toBounds(o);switch(i.width=a.width,i.height=a.height,i.offsetX=a.x+i.pivot.x*a.width,i.offsetY=a.y+i.pivot.y*a.height,this.shape.type){case"Bpmn":switch(this.shape.flow){case"Sequence":e=this.getBpmnSequenceFlow();break;case"Association":(e=new Xs).visible=!1,this.getBpmnAssociationFlow();break;case"Message":e=this.getBpmnMessageFlow(),n=this.getSegmentElement(this,n),this.updateShapePosition(this,e)}break;case"UmlActivity":switch(this.shape.flow){case"Object":this.getUMLObjectFlow();break;case"Exception":this.getUMLExceptionFlow(n)}break;case"UmlClassifier":this.getConnectorRelation()}var l=this.intermediatePoints;if("Bezier"===this.type){var h=this.segments[0],c=this.segments[this.segments.length-1];l=[fn.isEmptyPoint(c.point2)?c.bezierPoint2:c.point2,fn.isEmptyPoint(h.point1)?h.bezierPoint1:h.point1]}var d=t.getDescription;if(s=this.getDecoratorElement(o[0],l[1],this.sourceDecorator,!0,d),r=this.getDecoratorElement(o[o.length-1],l[l.length-2],this.targetDecorator,!1,d),s.id=this.id+"_srcDec",r.id=this.id+"_tarDec",n.style=this.style,n.style.fill="transparent",void 0!==d){var p=d(this,t);n.description=p||this.id}i.style.strokeColor="transparent",i.style.fill="transparent",i.style.strokeWidth=0,i.children=[n,s,r],i.id=this.id,void 0!==e&&i.children.push(e),i.offsetX=n.offsetX,i.offsetY=n.offsetY,i.width=n.width,i.height=n.height;for(var u=0;this.annotations,u<this.annotations.length;u++)i.children.push(this.getAnnotationElement(this.annotations[parseInt(u.toString(),10)],this.intermediatePoints,a,d,t.element.id,t.annotationTemplate));for(u=0;this.fixedUserHandles,u<this.fixedUserHandles.length;u++)i.children.push(this.getFixedUserHandle(this.fixedUserHandles[parseInt(u.toString(),10)],this.intermediatePoints,a,t.fixedUserHandleTemplate,t.element.id));return this.initPorts(d,i,a),this.wrapper=i,i},e.prototype.initPorts=function(t,e,i){for(var n=0;this.ports,n<this.ports.length;n++)e.children.push(this.initPort(this.ports[parseInt(n.toString(),10)],this.intermediatePoints,i,t))},e.prototype.initPort=function(t,e,i,n){var s=new Xs;s.height=t.height,s.width=t.width,s.margin=t.margin,t.shape=t.shape||"Square";var r,o="Custom"===t.shape?t.pathData:Kc(t.shape);s.data=o,s.horizontalAlignment=t.horizontalAlignment,s.verticalAlignment=t.verticalAlignment,s=this.initPortWrapper(t,e,i,s,this);var a=is(n);return a&&(r=a(s,this)),s.description=r||s.id,s.elementActions=s.elementActions|us.ElementIsPort,s.isPathPort=!0,s},e.prototype.initPortWrapper=function(t,e,i,n,s){t.id=t.id||Hn();var r={x:0,y:0},o=function(t,e){var i=function(t,e){for(var i,n,s,r,o=0,a=e.offset,l=[],h=0;h<t.length-1;h++)o+=fn.distancePoints(t[parseInt(h.toString(),10)],t[h+1]),l.push(o);for(var c=a*o,d=0;d<l.length;d++){if(l[parseInt(d.toString(),10)]>=c)return n=fn.findAngle(t[parseInt(d.toString(),10)],t[d+1]),{point:i=fn.transform(t[parseInt(d.toString(),10)],n,c-(s||0)),index:r=d};s=l[parseInt(d.toString(),10)]}return{point:i,index:r}}(t,e),n=fn.findAngle(t[i.index],t[i.index+1]),s=function(t){var e=0,i=0;switch(t.alignment){case"Center":i=0;break;case"Before":i=-(0+e);break;case"After":i=0+e}return i}(e),r=fn.transform(i.point,n+45,s);return i.point=r,i.angle=n,i}(e,t),a=o.point;n.id=this.id+"_"+t.id;var l=t.style;n.style={fill:l.fill,strokeColor:l.strokeColor,gradient:null,opacity:l.opacity,strokeDashArray:l.strokeDashArray,strokeWidth:l.strokeWidth},0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth);var h=(a.x-i.x)/i.width,c=(a.y-i.y)/i.height;r.x=i.width*h,r.y=i.height*c;var d,p,u=Nm(t,o.angle,e),g=u.hAlign,m=u.vAlign;return"left"===g?(d="Left",r.x+=t.displacement.x):"right"===g?(d="Right",r.x-=t.displacement.x):"center"===g&&(d="Center"),"top"===m?(p="Top",r.y+=t.displacement.y):"bottom"===m?(p="Bottom",r.y-=t.displacement.y):"center"===m&&(p="Center"),n.horizontalAlignment=d,n.verticalAlignment=p,(n=s&&"Label"!==s.flipMode&&"None"!==s.flipMode?uf(n,this.flip,t):uf(n,"None",t)).float=!0,n.connectionDirection=t.connectionDirection,n.setOffsetWithRespectToBounds(r.x,r.y,"Absolute"),n.relativeMode="Point",n.visible=!(!Gm(t,rs.Visible)||Gm(t,rs.Hover)||Gm(t,rs.Connect)),n.elementActions=n.elementActions|us.ElementIsPort,n},e.prototype.getConnectorRelation=function(){var t=this.shape;"Association"===t.relationship?(this.segments[0].type="Straight",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Inheritance"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"):"Composition"===t.relationship||"Aggregation"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="Diamond",this.targetDecorator.shape="None"):"Dependency"===t.relationship?(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="OpenArrow"):"Realization"===t.relationship&&(this.segments[0].type="Orthogonal",this.sourceDecorator.shape="None",this.targetDecorator.shape="Arrow"),"BiDirectional"===t.associationType&&(this.sourceDecorator.shape="None",this.targetDecorator.shape="None");var e,i,n="",s="";t.multiplicity.source&&(t.multiplicity.source.lowerBounds=t.multiplicity.source.lowerBounds,t.multiplicity.source.upperBounds=t.multiplicity.source.upperBounds),t.multiplicity.target&&(t.multiplicity.target.lowerBounds=t.multiplicity.target.lowerBounds,t.multiplicity.target.upperBounds=t.multiplicity.target.upperBounds);var r=t.multiplicity.source,o=t.multiplicity.target;i=r.upperBounds?r.lowerBounds+"..."+r.upperBounds:r.lowerBounds,e=o.upperBounds?o.lowerBounds+"..."+o.upperBounds:o.lowerBounds,"ManyToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,n=i||"*",s="1"),"OneToMany"===t.multiplicity.type&&(t.multiplicity.source.optional=!1,s=e||"*",n="1"),"ManyToMany"===t.multiplicity.type&&(n=i||"*",s=e||"*"),"OneToOne"===t.multiplicity.type&&(t.multiplicity.target.optional=!1,t.multiplicity.source.optional=!1,n="1",s="1"),this.annotations=[{id:this.id+"sourcelabel",content:n,offset:0,alignment:"Before",margin:{right:5,bottom:5}},{id:this.id+"targetlabel",content:s,offset:1,alignment:"Before",margin:{right:5,bottom:5}}]},e.prototype.getBpmnSequenceFlow=function(){var t=new Xs,e=new Xs;if("Normal"===this.shape.sequence&&"Bezier"!==this.type&&(this.targetDecorator.shape="Arrow"),"Default"===this.shape.sequence){t=this.getSegmentElement(this,t);var i=this.intermediatePoints;e=ff(i,this),this.targetDecorator.shape="Arrow"}return"Conditional"===this.shape.sequence&&(this.targetDecorator.shape="Arrow",this.sourceDecorator.shape="Diamond",e.id=this.id+this.shape.type),e},e.prototype.getUMLObjectFlow=function(){if(this.annotations)for(var t=0;t<this.annotations.length;t++)this.annotations[parseInt(t.toString(),10)].content="["+this.annotations[parseInt(t.toString(),10)].content+"]"},e.prototype.getUMLExceptionFlow=function(t){this.type="Straight";var e=this.shape.exceptionFlowHeight/2,i={x:(this.targetPoint.x+this.sourcePoint.x)/2,y:(this.targetPoint.y+this.sourcePoint.y)/2},n=i.x-this.sourcePoint.x,s=i.y-this.sourcePoint.y,r=e/Math.sqrt(n*n+s*s),o={x:i.x-n*r,y:i.y-s*r},a={x:i.x+n*r,y:i.y+s*r},l=Nn();On(l,315,i.x,i.y),this.segments=[];var h=new Tg(this,"segments",{type:"Straight",point:Ln(l,a)},!0);this.segments.push(h),h=new Tg(this,"segments",{type:"Straight",point:Ln(l,o)},!0),this.segments.push(h),t=this.getSegmentElement(this,t)},e.prototype.getBpmnAssociationFlow=function(){"Default"===this.shape.association&&(this.targetDecorator.shape="None",this.style.strokeDashArray="2 2"),"Directional"===this.shape.association&&(this.targetDecorator.shape="OpenArrow",this.style.strokeDashArray="2 2"),"BiDirectional"===this.shape.association&&(this.targetDecorator.shape="OpenArrow",this.sourceDecorator.shape="OpenArrow",this.style.strokeDashArray="2 2")},e.prototype.getFixedUserHandle=function(t,e,i,n,s){var r;if(""===t.pathData&&n)(r=new sp(this.id,s,void 0,n)).isTemplate=!0,r.template=lv(r,!0,t),t.id=t.id||Hn(),r.id=this.id+"_"+t.id;else{(r=new $s).children=[],t.id=t.id||Hn(),r.id=this.id+"_"+t.id;var o=Em(t,r);r.children.push(o)}return r.float=!0,r.visible=t.visibility,r.width=t.width,r.height=t.height,r.style.strokeWidth=t.handleStrokeWidth,r.style.fill=t.fill,r.style.strokeColor=t.handleStrokeColor,r.cornerRadius=t.cornerRadius,this.updateAnnotation(t,e,i,r),r.description=r.id,r},e.prototype.getBpmnMessageFlow=function(){var t=new Xs;return this.targetDecorator.shape="Arrow",this.targetDecorator.width=10,this.targetDecorator.height=10,this.sourceDecorator.shape="Circle",this.sourceDecorator.style.fill="white",this.targetDecorator.style.fill="white","InitiatingMessage"!==this.shape.message&&"NonInitiatingMessage"!==this.shape.message||(t.id=this.id+"_"+this.shape.message,t.width=25,t.height=15,t.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",t.horizontalAlignment="Center",t.verticalAlignment="Center",t.transform=ys.Self,t.style.fill="NonInitiatingMessage"===this.shape.message?"lightgrey":"white"),t},e.prototype.distance=function(t,e){return If(t,e)},e.prototype.findPath=function(t,e){return bf(t,e)},e.prototype.getAnnotationElement=function(t,e,i,n,s,r){var o,a;if(t.content=t.content||"",t.id=t.id||Hn(),s&&(t.template||"Template"===t.annotationType||r&&""===t.content)){var l=document.getElementById(s).ej2_instances[0];o=new sp(this.id,s,t.id,r),t.template&&"function"==typeof t.template&&l.isReact&&(o.templateFn=Hi(t.template),o.isTemplate=!0),void 0!==t.height||"String"!==t.annotationType||!t.template&&""!==t.content||(t.height=i.height),o=gv(o,t,r,l)}else{o=new Zs;var h=t.hyperlink.link?t.hyperlink:void 0;o.style=t.style,o.style.color=h?h.color||o.hyperlink.color:t.style.color,o.hyperlink.link=t.hyperlink.link||void 0,o.hyperlink.hyperlinkOpenState=t.hyperlink.hyperlinkOpenState||void 0,o.hyperlink.textDecoration=t.hyperlink.textDecoration||void 0,o.content=h?h.content||o.hyperlink.link:t.content}o.constraints=t.constraints,o.visible=t.visibility,o.annotationVisibility=o.visible?"Visible":"Collapsed",o.rotateAngle=t.rotateAngle,o.horizontalAlignment=t.horizontalAlignment,o.verticalAlignment=t.verticalAlignment,o.width=t.width,o.height=t.height,void 0===i.width||t.template||(o.width=(t.width||i.width)-t.margin.left-t.margin.right),o.margin=t.margin,o.id=this.id+"_"+t.id,0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth);var c=is(n);return c&&(a=c(t,this)),o.description=a||o.id,this.updateAnnotation(t,e,i,o),o},e.prototype.updateAnnotation=function(t,e,i,n,s){var r={x:0,y:0};n instanceof Zs&&!s&&n.refreshTextElement(),n.width=t.width||i.width;var o=Tm(e,t,i),a=o.point;t instanceof Gc&&t.segmentAngle&&(n.rotateAngle=t.rotateAngle+o.angle,n.rotateAngle=(n.rotateAngle+360)%360),0===i.width&&(i.width=this.style.strokeWidth),0===i.height&&(i.height=this.style.strokeWidth);var l=(a.x-i.x)/i.width,h=(a.y-i.y)/i.height;r.x=i.width*l,r.y=i.height*h;var c,d,p=Nm(t,o.angle,e),u=p.hAlign,g=p.vAlign;"left"===u?(c="Left",r.x+=t.displacement.x):"right"===u?(c="Right",r.x-=t.displacement.x):"center"===u&&(c="Center"),"top"===g?(d="Top",r.y+=t.displacement.y):"bottom"===g?(d="Bottom",r.y-=t.displacement.y):"center"===g&&(d="Center"),n.horizontalAlignment=c,n.verticalAlignment=d,n.setOffsetWithRespectToBounds(r.x,r.y,"Absolute"),n.relativeMode="Point"},e.prototype.getConnectorPoints=function(t,e,i,n){var s=rd(this,i,n).slice(0);return s&&s.length>0&&(this.sourcePoint=s[0],this.targetPoint=s[s.length-1]),s},e.prototype.clipDecorator=function(t,e,i,n){var s,r,o={x:0,y:0},a=e.length;s=i?e[0]:e[a-1],r=i?e[1]:e[a-2];var l=fn.distancePoints(s,r);l=0===l?1:l;var h=1,c=i?t.sourceWrapper:t.targetWrapper;c&&(h=c.style.strokeWidth,n&&n&Is.DecoratorPropertyChange&&(h=1));var d=h-1;return o.x=Math.round(s.x+d*(r.x-s.x)/l),o.y=Math.round(s.y+d*(r.y-s.y)/l),(i&&"None"!==t.sourceDecorator.shape||!i&&"None"!==t.targetDecorator.shape)&&(o=fn.adjustPoint(o,r,!0,n&Is.DecoratorPropertyChange?0:h/2)),o},e.prototype.clipDecorators=function(t,e,i){return"None"!==t.sourceDecorator.shape&&(e[0]=this.clipDecorator(t,e,!0,i)),"None"!==t.targetDecorator.shape&&(e[e.length-1]=this.clipDecorator(t,e,!1,i)),e},e.prototype.updateSegmentElement=function(t,e,i,n){var s=new Tn,r=this.getSegmentPath(t,e,n);if("Bezier"===t.type){if(this.segments.length>0)for(var o=0;o<this.segments.length;o++){var a=this.segments[parseInt(o.toString(),10)],l=t.segments[parseInt(o.toString(),10)],h=fn.isEmptyPoint(a.point1)?l.bezierPoint1:l.point1,c=fn.isEmptyPoint(a.point2)?l.bezierPoint2:l.point2;s.uniteRect(zg(a.points[0],h,c,a.points[1],t))}}else s=Tn.toBounds(e);return i.width=s.width,i.height=s.height,i.offsetX=s.x+i.width/2,i.offsetY=s.y+i.height/2,i.data=r,t.wrapper&&(t.wrapper.offsetX=i.offsetX,t.wrapper.offsetY=i.offsetY,t.wrapper.width=s.width,t.wrapper.height=s.height),i},e.prototype.getSegmentElement=function(t,e,i,n,s){void 0===s&&(s=!0);var r;return s&&pf(t),r=this.getConnectorPoints(t.type,void 0,i),this.intermediatePoints=r,e.staticSize=!0,e=this.updateSegmentElement(t,r,e,n)},e.prototype.getDecoratorElement=function(t,e,i,n,s){var r=new Xs;if(r.transform=ys.Self,this.updateDecoratorElement(r,t,e,i),void 0!==s){var o=s(i,this);r.description=o||"source"}return r},e.prototype.bridgePath=function(t,e,i){var n=e;if(t.bridges.length>0)if("Straight"===t.type&&t.segments.length<2)for(var s=0;s<t.bridges.length;s++){(r=t.bridges[parseInt(s.toString(),10)]).rendered||(n+=" L"+r.startPoint.x+" "+r.startPoint.y,n+=r.path,r.rendered=!0)}else if("Orthogonal"===t.type||"Straight"===t.type&&t.segments.length>1)for(s=0;s<t.bridges.length;s++){var r;(r=t.bridges[parseInt(s.toString(),10)]).segmentPointIndex===i&&(r.rendered||r.segmentPointIndex===i&&(n+=" L"+r.startPoint.x+" "+r.startPoint.y,n+=r.path,r.rendered=!0))}return n},e.prototype.updateDecoratorElement=function(t,e,i,n){t.offsetX=e.x,t.offsetY=e.y;var s=fn.findAngle(e,i),r=function(t,e){return"Custom"===t?e.pathData:td[""+t]}(n.shape,n),o=new un(n.width,n.height);t.pivot.x=n.pivot.x,t.pivot.y=n.pivot.y,t.style=n.style,t.rotateAngle=s,t.data=r,t.canMeasurePath=!0,t.width=o.width,t.height=o.height},e.prototype.getSegmentPath=function(t,e,i){for(var n,s,r,o="",a=[],l=0;l<e.length;)a.push({x:e[parseInt(l.toString(),10)].x,y:e[parseInt(l.toString(),10)].y}),l++;for(var h=0;h<t.bridges.length;h++){t.bridges[parseInt(h.toString(),10)].rendered=!1}if(a=this.clipDecorators(t,a,i),this.cornerRadius>0&&"Bezier"!==this.type)for(var c=0;c<a.length-1;c++){n=a[parseInt(c.toString(),10)],0===c&&(o="M"+n.x+" "+n.y);var d=fn.distancePoints(a[parseInt(c.toString(),10)],a[c+1]);d>0&&(s=c<a.length-2?d<2*this.cornerRadius?fn.adjustPoint(a[parseInt(c.toString(),10)],a[c+1],!1,d/2):fn.adjustPoint(a[parseInt(c.toString(),10)],a[c+1],!1,this.cornerRadius):a[c+1],c>0&&(d<2*this.cornerRadius?(r=fn.adjustPoint(a[parseInt(c.toString(),10)],a[c+1],!0,d/2),c<a.length-2&&(s=null)):r=fn.adjustPoint(a[parseInt(c.toString(),10)],a[c+1],!0,this.cornerRadius)),r&&(o+="Q"+n.x+" "+n.y+" "+r.x+" "+r.y),s&&(t.bridges.length>0&&(o=this.bridgePath(t,o,c),"Orthogonal"===t.type&&(o=this.bridgePath(t,o,c+1))),o+=" L"+s.x+" "+s.y))}else if("Bezier"===this.type){var p=void 0,u=void 0;if(this.parentObj.element){var g=this.parentObj.element.ej2_instances[0].eventHandler.action;p=this.parentObj.element.ej2_instances[0].eventHandler.tool instanceof sg,u=g.includes("PortDraw")||g.includes("Drag")}for(var m=void 0,f=this.segments,y=0;y<f.length;y++)a.length>2&&(f[parseInt(y.toString(),10)].bezierPoint1={x:0,y:0},f[parseInt(y.toString(),10)].bezierPoint2={x:0,y:0}),!fn.isEmptyPoint(f[parseInt(y.toString(),10)].point1)||f[parseInt(y.toString(),10)].vector1.angle||f[parseInt(y.toString(),10)].vector1.distance?f[parseInt(y.toString(),10)].vector1.angle||f[parseInt(y.toString(),10)].vector1.distance?f[parseInt(y.toString(),10)].bezierPoint1=fn.transform(a[parseInt(y.toString(),10)],f[parseInt(y.toString(),10)].vector1.angle,f[parseInt(y.toString(),10)].vector1.distance):f[parseInt(y.toString(),10)].bezierPoint1={x:f[parseInt(y.toString(),10)].point1.x||f[parseInt(y.toString(),10)].bezierPoint1.x,y:f[parseInt(y.toString(),10)].point1.y||f[parseInt(y.toString(),10)].bezierPoint1.y}:(!t.sourceID&&!this.sourcePortID||!this.sourceWrapper||u||p||(m=Lg(this.sourceWrapper.bounds,a[parseInt(y.toString(),10)],!0)),f[parseInt(y.toString(),10)].bezierPoint1=kg(a[parseInt(y.toString(),10)],a[y+1],m)),!fn.isEmptyPoint(f[parseInt(y.toString(),10)].point2)||f[parseInt(y.toString(),10)].vector2.angle||f[parseInt(y.toString(),10)].vector2.distance?f[parseInt(y.toString(),10)].vector2.angle||f[parseInt(y.toString(),10)].vector2.distance?f[parseInt(y.toString(),10)].bezierPoint2=fn.transform(a[y+1],f[parseInt(y.toString(),10)].vector2.angle,f[parseInt(y.toString(),10)].vector2.distance):f[parseInt(y.toString(),10)].bezierPoint2={x:f[parseInt(y.toString(),10)].point2.x||f[parseInt(y.toString(),10)].bezierPoint2.x,y:f[parseInt(y.toString(),10)].point2.y||f[parseInt(y.toString(),10)].bezierPoint2.y}:(!t.targetID&&!this.targetPortID||!this.targetWrapper||u||p||(m=Lg(this.targetWrapper.bounds,a[y+1],!0)),f[parseInt(y.toString(),10)].bezierPoint2=kg(a[y+1],a[parseInt(y.toString(),10)],m));a.splice(1,0,{x:f[0].bezierPoint1.x,y:f[0].bezierPoint1.y}),a.splice(a.length-1,0,{x:f[f.length-1].bezierPoint2.x,y:f[f.length-1].bezierPoint2.y}),a=this.clipDecorators(t,a,i);for(var v=0;v<f.length;v++){0===v&&(o="M"+a[0].x+" "+a[0].y);var b=v===f.length-1?a[a.length-1].x+" "+a[a.length-1].y:f[parseInt(v.toString(),10)].points[f[parseInt(v.toString(),10)].points.length-1].x+" "+f[parseInt(v.toString(),10)].points[f[parseInt(v.toString(),10)].points.length-1].y;o+="C"+f[parseInt(v.toString(),10)].bezierPoint1.x+" "+f[parseInt(v.toString(),10)].bezierPoint1.y+" "+f[parseInt(v.toString(),10)].bezierPoint2.x+" "+f[parseInt(v.toString(),10)].bezierPoint2.y+" "+b}}else for(var C=0;C<a.length;C++)n=a[parseInt(C.toString(),10)],0===C&&(o="M"+n.x+" "+n.y),C>0&&(o=this.bridgePath(t,o,C),o+=" L"+n.x+" "+n.y);return o},e.prototype.updateShapeElement=function(t){var e;switch(t.shape.type){case"Bpmn":t.wrapper.children[3]instanceof Xs&&(e=t.wrapper.children[3]),"Message"===t.shape.flow&&this.updateShapePosition(t,e);break;case"UmlActivity":"Exception"===t.shape.flow&&this.getUMLExceptionFlow(t.wrapper.children[0])}},e.prototype.updateShapePosition=function(t,e){var i=this.intermediatePoints,n=yf(i,e,.5);e.offsetX=n.x,e.offsetY=n.y},e.prototype.scale=function(t,e,i,n,s){var r=0,o=0;if(this.wrapper&&this.wrapper.outerBounds){var a=qd(this),l=Math.abs((this.wrapper.bounds.width||this.style.strokeWidth||1)-2),h=Math.abs((this.wrapper.bounds.height||this.style.strokeWidth||1)-2);r=a.width-l,o=a.height-h,t=Math.abs((i-Math.max(r,o))/l),e=Math.abs((n-Math.max(r,o))/h),r=o=Math.min(r,o)}t=e=Math.min(t,e);var c=Nn();On(c,-(s=s||this.wrapper).rotateAngle,s.offsetX,s.offsetY),kn(c,t,e,s.offsetX,s.offsetY),On(c,s.rotateAngle,s.offsetX,s.offsetY);var d=function(t,e){for(var i=[],n=0,s=e;n<s.length;n++){var r=s[n];i.push(Ln(t,r))}return i}(c,this.intermediatePoints);return this.sourcePoint=d[0],this.targetPoint=d[d.length-1],_m(this,d=this.intermediatePoints=rd(this)),{x:r,y:o}},e.prototype.getClassName=function(){return"Connector"},vg([Ht(bg)],e.prototype,"shape",void 0),vg([jt(cs.Default)],e.prototype,"constraints",void 0),vg([jt(10)],e.prototype,"bridgeSpace",void 0),vg([Rt([],Gc)],e.prototype,"annotations",void 0),vg([Bt({},fn)],e.prototype,"sourcePoint",void 0),vg([Bt({},fn)],e.prototype,"targetPoint",void 0),vg([Rt([],hp)],e.prototype,"fixedUserHandles",void 0),vg([Vt(Cg)],e.prototype,"segments",void 0),vg([jt("")],e.prototype,"sourceID",void 0),vg([jt("")],e.prototype,"targetID",void 0),vg([jt(10)],e.prototype,"hitPadding",void 0),vg([jt(0)],e.prototype,"connectionPadding",void 0),vg([jt("Straight")],e.prototype,"type",void 0),vg([jt("Circle")],e.prototype,"segmentThumbShape",void 0),vg([jt(10)],e.prototype,"segmentThumbSize",void 0),vg([jt(0)],e.prototype,"cornerRadius",void 0),vg([Bt({shape:"None"},Ig)],e.prototype,"sourceDecorator",void 0),vg([Bt({shape:"Arrow"},Ig)],e.prototype,"targetDecorator",void 0),vg([Bt({},zc)],e.prototype,"tooltip",void 0),vg([jt("")],e.prototype,"sourcePortID",void 0),vg([jt("")],e.prototype,"targetPortID",void 0),vg([jt(0)],e.prototype,"sourcePadding",void 0),vg([Bt({},Jd)],e.prototype,"previewSize",void 0),vg([Bt({},Jd)],e.prototype,"dragSize",void 0),vg([jt(0)],e.prototype,"targetPadding",void 0),vg([jt(13)],e.prototype,"connectorSpacing",void 0),vg([Bt({strokeWidth:1,strokeColor:"black"},Rs)],e.prototype,"style",void 0),vg([jt(null)],e.prototype,"maxSegmentThumb",void 0),vg([jt(!1)],e.prototype,"allowNodeOverlap",void 0),vg([Bt({},Sg)],e.prototype,"bezierSettings",void 0),vg([Rt([],Yc)],e.prototype,"ports",void 0),vg([jt(null)],e.prototype,"wrapper",void 0),e}(ip)),Vg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ug=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Fg=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.offset=0,n.scale=1,n}return Vg(e,t),e.prototype.preRender=function(){this.unWireEvents(),this.wireEvents()},e.prototype.render=function(){this.updateRulerGeometry(),this.renderComplete()},e.prototype.getModuleName=function(){return"Ruler"},e.prototype.destroy=function(){this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),this.element.classList.remove("e-ruler")},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"length":case"interval":case"segmentWidth":case"tickAlignment":case"markerColor":case"thickness":this.updateRuler()}}},e.prototype.updateRulerGeometry=function(){this.element.style.textAlign="left",this.renderRulerSpace(),this.updateRuler()},e.prototype.renderRulerSpace=function(){var t=this.getRulerGeometry(),e=document.getElementById(this.element.id+"_ruler_space");return e||(e=iv("div",{id:this.element.id+"_ruler_space",style:"height:"+t.height+"px;width:"+t.width+"px;cssFloat:left;"}),this.element.appendChild(e)),e},e.prototype.updateRuler=function(){var t=this.getRulerSize(),e=this.getRulerGeometry(),i=0,n=0,s=new un,r=this.getRulerSVG(e);if(r&&(i=this.length,s.height=t,n=this.offset,i&&i!==1/0)){var o=i+this.segmentWidth,a=n;this.updateSegments(a,o+Math.abs(a),r,t)}},e.prototype.updateSegments=function(t,e,i,n){for(var s=t,r={trans:0};s<e;){var o=this.getNewSegment(s,i);o&&(i.appendChild(o.segment),s=this.updateSegment(t,e,o,s,r,n))}},e.prototype.updateSegment=function(t,e,i,n,s,r){var o=this.updateSegmentWidth(this.scale);n===t?(this.startValue=Math.floor(t/o)*o/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString(),this.defStartValue=n=this.startValue*this.scale,"Horizontal"===this.orientation?this.hRulerOffset=t-n:this.vRulerOffset=t-n):(this.startValue=n/this.scale,this.startValue=this.startValue%1!=0?Number(this.startValue.toFixed(1)):this.startValue,i.label.textContent=this.startValue.toString()),this.updateTickLabel(i,r);var a="Horizontal"===this.orientation?s.trans+.5+",0.5":"0.5,"+(s.trans+.5);return i.segment.setAttribute("transform","translate("+a+")"),s.trans+=o,n+=o},e.prototype.updateTickLabel=function(t,e){var i=t.segment.lastChild.getBBox(),n="Horizontal"===this.orientation,s="RightOrBottom"===this.tickAlignment,r=n?2:0,o=n?s?e/2+5.5-5.5:e/2+5.5:i.height,a=s?-(i.width+2)+","+(e/2-i.height):-(i.width+2)+","+(e/2-i.height/2),l=n?{x:r,y:o}:{x:r,y:o,transform:"rotate(270)translate("+a+")"};hv(t.segment.lastChild,l)},e.prototype.getNewSegment=function(t,e){var i=this.createNewTicks(t,e);return{segment:i,label:this.createTickLabel(e,i)}},e.prototype.createNewTicks=function(t,e){for(var i,n,s=this.updateSegmentWidth(this.scale),r=nv("g",{class:"e-ruler-segment"}),o=0;o<this.interval;o++)n=s/this.interval,i=this.createTick(e,n,o+1,t),r.appendChild(i);return r},e.prototype.getLinePoint=function(t,e,i){var n=this.updateSegmentWidth(this.scale),s=this.getRulerSize();return i=(e*=i-1)%n===0?s:.3*s},e.prototype.createTick=function(t,e,i,n){var s=this.getLinePoint(t,e,i),r=this.getRulerSize(),o="Horizontal"===this.orientation,a="RightOrBottom"===this.tickAlignment,l=is(this.arrangeTick),h={ruler:undefined,tickLength:s,tickInterval:this.segmentWidth/this.interval*(i-1)};l&&l(h),s=h.tickLength;var c=e*(i-1),d=nv("line",{x1:o?c:a?r:0,y1:o?a?r:r-(r-s):c,x2:o?c:a?r-s:r-(r-s),y2:o?a?r-s:0:c,"stroke-width":"1",stroke:"black"});return d.setAttribute("class","e-ruler-tick"),d},e.prototype.createTickLabel=function(t,e){var i;if(e){i=nv("text",{class:"e-ruler-tick-label"}),e.appendChild(i)}return i},e.prototype.updateSegmentWidth=function(t){if(100!==this.segmentWidth)return this.segmentWidth;var e,i=1;for(e=100,e=100/Math.pow(2,Math.round(Math.log(t)/Math.log(2)));e>100;)i/=10,e/=10;for(;e<25;)i*=10,e*=10;return e>=25&&e%25!=0&&(e=25*Math.round(e/25)),e*t/i},e.prototype.createMarkerLine=function(t,e,i){var n;return e&&((n=t.getElementById(e.id+"_marker"))&&n.parentNode.removeChild(n),n=nv("line",i)),n},e.prototype.drawRulerMarker=function(t,e,i){var n,s,r,o,a,l,h,c="Horizontal"===this.orientation,d=t.getElementsByTagName("svg");for(a=0;a<d.length;a++){d[parseInt(a.toString(),10)]&&(n=d[parseInt(a.toString(),10)]);break}if(n){s=this.getRulerSize(),l={id:t.id+"_marker",x1:0,y1:0,x2:c?0:s,y2:c?s:0,stroke:this.markerColor,"stroke-width":1.5,class:"e-d-ruler-marker"},h=this.createMarkerLine(n,t,l),r=this.scale,o=this.offset-this.defStartValue;var p=(c?e.x:e.y)*r+i+o;h.setAttribute("transform","translate("+(c?p+.5+" 0.5":"0.5 "+(p+.5))+")"),n.appendChild(h)}},e.prototype.getRulerGeometry=function(){return new un(this.element?this.element.getBoundingClientRect().width:0,this.element?this.element.getBoundingClientRect().height:0)},e.prototype.getRulerSize=function(){return this.thickness},e.prototype.getRulerSVG=function(t){var e,i,n=this.getRulerSize();if(this.element&&(e=document.getElementById(this.element.id+"_ruler_space"))){if(i=nv("svg",{id:this.element.id+"_Ruler_svg",width:"Horizontal"===this.orientation?t.width+200:n+"px",height:"Horizontal"===this.orientation?n:t.height+200+"px",style:"position:inherit;"}),e.childNodes.length>0)for(var s=e.childNodes.length-1;s>=0;s--)e.childNodes[parseInt(s.toString(),10)].parentNode.removeChild(e.childNodes[parseInt(s.toString(),10)]);e.appendChild(i)}return i},e.prototype.wireEvents=function(){},e.prototype.unWireEvents=function(){},Ug([jt(5)],e.prototype,"interval",void 0),Ug([jt(100)],e.prototype,"segmentWidth",void 0),Ug([jt("Horizontal")],e.prototype,"orientation",void 0),Ug([jt("RightOrBottom")],e.prototype,"tickAlignment",void 0),Ug([jt("red")],e.prototype,"markerColor",void 0),Ug([jt(25)],e.prototype,"thickness",void 0),Ug([jt(null)],e.prototype,"arrangeTick",void 0),Ug([jt(400)],e.prototype,"length",void 0),e}(_e);function Wg(t,e){var i=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler")),n=Qg(t),s=Zg(t),r=e?"margin-left:"+n.width+"px;":"margin-top:"+n.height+"px;";if(!i){var o="height:"+(e?n.height:s.height+100)+"px;overflow:hidden;width:"+(e?s.width+100:n.width)+"px;position:absolute;font-size:11px;"+r;i=iv("div",{id:t.element.id+(e?"_hRuler":"_vRuler"),style:o})}t.element.insertBefore(i,t.element.firstChild);var a=e?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler,l=new Fg(a);l.orientation=e?"Horizontal":"Vertical",l.length=(e?s.width:s.height)+a.segmentWidth,l.appendTo("#"+t.element.id+(e?"_hRuler":"_vRuler")),e?t.hRuler=l:t.vRuler=l;var h=document.getElementById(t.element.id+(e?"_hRuler":"_vRuler"));e?t.hRuler.element=h:t.vRuler.element=h}function Yg(t){var e=-t.scroller.horizontalOffset,i=-t.scroller.verticalOffset;t&&t.rulerSettings.showRulers?(t.hRuler.length=0,t.vRuler.length=0,void 0!==e&&t.hRuler.element&&qg(t,t.hRuler,e,!0),void 0!==i&&t.vRuler.element&&qg(t,t.vRuler,i,!1)):_g(t)}function _g(t){av(t.element.id+"_hRuler"),av(t.element.id+"_vRuler"),av(t.element.id+"_overlapRuler")}function Qg(t){var e=0,i=0;return t.rulerSettings.showRulers&&(e=t.rulerSettings.horizontalRuler.thickness,i=t.rulerSettings.verticalRuler.thickness),new un(i,e)}function Zg(t){var e=Qg(t),i=t.scroller.viewPortHeight,n=t.scroller.viewPortWidth;return n<t.element.clientWidth-e.width&&(n=t.element.clientWidth-e.width),i<t.element.clientHeight-e.height&&(i=t.element.clientHeight-e.height),t.hRuler&&t.hRuler.length&&(n=t.hRuler.length),t.vRuler&&t.vRuler.length&&(i=t.vRuler.length),new un(n,i)}function qg(t,e,i,n){var s=Qg(t),r=Zg(t),o=n?t.rulerSettings.horizontalRuler:t.rulerSettings.verticalRuler;!function(t,e,i){var n=document.getElementById(t.element.id+(i?"_hRuler":"_vRuler")),s=i?t.hRuler:t.vRuler;n&&t&&e&&(n.style.width=(i?e.width+s.segmentWidth:s.thickness)+"px",n.style.height=(i?s.thickness:e.height+s.segmentWidth)+"px",(n=document.getElementById(t.element.id+"_overlapRuler"))&&(i?n.style.height=s.thickness+"px":n.style.width=s.thickness+"px"))}(t,r,n),function(t,e,i){var n=document.getElementById(t.element.id+(i?"_hRuler_ruler_space":"_vRuler_ruler_space")),s=i?t.hRuler:t.vRuler;n&&t&&e&&(n.style.width=(i?e.width+2*s.segmentWidth:s.thickness)+"px",n.style.height=(i?s.thickness:e.height+2*s.segmentWidth)+"px")}(t,r,n),e.offset=i,e.scale=t.scroller.currentZoom,e.length=(n?r.width:r.height)+100,e.arrangeTick=is(o.arrangeTick),e.dataBind();var a=n?t.hRuler.element:t.vRuler.element;n?a.style.marginLeft=s.width-e.hRulerOffset+"px":a.style.marginTop=s.height-e.vRulerOffset+"px"}var Xg=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Gg=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Kg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xg(e,t),e.prototype.getClassName=function(){return"UserHandle"},Gg([jt("")],e.prototype,"name",void 0),Gg([jt("")],e.prototype,"pathData",void 0),Gg([jt("")],e.prototype,"content",void 0),Gg([jt("")],e.prototype,"source",void 0),Gg([jt("#000000")],e.prototype,"backgroundColor",void 0),Gg([jt("Top")],e.prototype,"side",void 0),Gg([jt("")],e.prototype,"borderColor",void 0),Gg([jt(.5)],e.prototype,"borderWidth",void 0),Gg([jt(25)],e.prototype,"size",void 0),Gg([jt("white")],e.prototype,"pathColor",void 0),Gg([jt(10)],e.prototype,"displacement",void 0),Gg([jt(!0)],e.prototype,"visible",void 0),Gg([jt(0)],e.prototype,"offset",void 0),Gg([Bt({},Os)],e.prototype,"margin",void 0),Gg([jt("Center")],e.prototype,"horizontalAlignment",void 0),Gg([jt("Center")],e.prototype,"verticalAlignment",void 0),Gg([jt(!1)],e.prototype,"disableNodes",void 0),Gg([jt(!1)],e.prototype,"disableConnectors",void 0),Gg([Bt({},zc)],e.prototype,"tooltip",void 0),Gg([jt("")],e.prototype,"template",void 0),e}(re);function Jg(t){return $g[t.toString()]}var $g={Action:"M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z",Decision:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",MergeNode:"M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z",InitialNode:"M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z",ForkNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",JoinNode:"m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z",TimeEvent:"M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z",AcceptingEvent:"M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z",SendSignal:"M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z",ReceiveSignal:"M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z",StructuredNode:"M0,0 L50,0 L50,50 L0,50 z",Note:"M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z"},tm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),em=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},im=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tm(e,t),em([jt()],e.prototype,"key",void 0),em([jt()],e.prototype,"keyModifiers",void 0),e}(re),nm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tm(e,t),e.prototype.getClassName=function(){return"Command"},em([jt("")],e.prototype,"name",void 0),em([jt()],e.prototype,"canExecute",void 0),em([jt()],e.prototype,"execute",void 0),em([Bt({},im)],e.prototype,"gesture",void 0),em([jt("")],e.prototype,"parameter",void 0),e}(re),sm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tm(e,t),em([Rt([],nm)],e.prototype,"commands",void 0),e}(re),rm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tm(e,t),em([jt()],e.prototype,"show",void 0),em([jt()],e.prototype,"showCustomMenuOnly",void 0),em([jt()],e.prototype,"items",void 0),e}(re),om=function(){function t(){}return t.prototype.renderShadow=function(t,e,i,n){void 0===i&&(i=null);var s,r,o=fn.transform({x:0,y:0},t.shadow.angle,t.shadow.distance);n&&(r=n.getElementById(e.id+"_shadow")),r||(s=i?"path":"rect",r=document.createElementNS("http://www.w3.org/2000/svg",s),e.appendChild(r));var a={id:e.id+"_shadow",fill:t.shadow.color,stroke:t.shadow.color,opacity:t.shadow.opacity.toString(),transform:"rotate("+t.angle+","+(t.x+t.width*t.pivotX)+","+(t.y+t.height*t.pivotY)+")translate("+(t.x+o.x)+","+(t.y+o.y)+")"};if(n){var l=n.getElementById(e.id);l&&l.insertBefore(r,l.firstChild)}hv(r,a),i?i&&this.renderPath(r,t,i):hv(r,{width:t.width,height:t.height})},t.prototype.parseDashArray=function(t){return[]},t.prototype.drawRectangle=function(t,e,i,n,s,r,o,a,l){var h,c,d,p;if(e.shadow&&!n&&this.renderShadow(e,t,void 0,r),h=e.id===t.id?e.id+"_container":e.id,r&&(c=r.getElementById(h)),c&&!s||(c=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(c)),r&&!e.shadow&&(d=r.getElementById(e.id+"_groupElement_shadow"))&&d.parentNode.removeChild(d),r&&(d=r.getElementById(e.id+"_groupElement_shadow"))&&(d.style.visibility=e.visible?"visible":"hidden"),a)p={id:h,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),visibility:e.visible?"visible":"hidden",transform:"rotate("+e.angle+","+(e.x+e.width/2)+","+(e.y+e.height/2)+")",rx:e.cornerRadius||0,ry:e.cornerRadius||0,opacity:e.opacity};else{var u=e.x,g=e.y,m=e.width,f=e.height,y=e.visible,v=e.angle,b=e.pivotX,C=e.pivotY,I=e.cornerRadius,M=void 0===I?0:I,S=e.opacity;p={id:h,x:u+"",y:g+"",width:m+"",height:f+"",visibility:y?"visible":"hidden",transform:"rotate("+v+","+(u+m*b)+","+(g+f*C)+")",rx:M,ry:M,opacity:void 0===S?1:S}}o&&(p.role="img",p["aria-label"]=o);var x=e.class||"";l||(x.includes("e-diagram-resize-handle")||x.includes("e-diagram-endpoint-handle")||x.includes("e-diagram-bezier-control-handle"))&&(x+=" e-disabled"),e.class&&(p.class=x);o||(p["pointer-events"]="none"),hv(c,p),this.setSvgStyle(c,e,i)},t.prototype.updateSelectionRegion=function(t,e){var i;i=t.parentNode.getElementById(e.id);var n={id:e.id,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",class:"e-diagram-selected-region"};i||(i=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.appendChild(i)),this.setSvgStyle(i,e),hv(i,n)},t.prototype.createGElement=function(t,e){return nv(t,e)},t.prototype.drawLine=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","line");this.setSvgStyle(i,e);var n=e.x+e.width*e.pivotX,s=e.y+e.height*e.pivotY,r={id:e.id,x1:e.startPoint.x+e.x,y1:e.startPoint.y+e.y,x2:e.endPoint.x+e.x,y2:e.endPoint.y+e.y,stroke:e.stroke,"stroke-width":e.strokeWidth.toString(),opacity:e.opacity.toString(),transform:"rotate("+e.angle+" "+n+" "+s+")",visibility:e.visible?"visible":"hidden"};e.class&&(r.class=e.class),hv(i,r),t.appendChild(i)},t.prototype.drawCircle=function(t,e,i,n){var s=document.createElementNS("http://www.w3.org/2000/svg","circle");this.setSvgStyle(s,e);var r=e.class||"";i||(r+=" e-disabled");var o={id:e.id,cx:e.centerX,cy:e.centerY,r:e.radius,visibility:e.visible?"visible":"hidden",class:r};n&&(o.role="img",o["aria-label"]=n),s.style.display=e.visible?"block":"none",hv(s,o),t.appendChild(s)},t.prototype.drawPath=function(t,e,i,n,s,r,o){Math.floor(10*Math.random()+1);var a,l,h=[];if(h=Cn(h=yn(e.data)),e.shadow&&this.renderShadow(e,t,h,s),s&&!e.shadow&&(a=s.getElementById(e.id+"_groupElement_shadow"))&&a.parentNode.removeChild(a),s&&(a=s.getElementById(e.id+"_groupElement_shadow"))&&(a.style.visibility=e.visible?"visible":"hidden"),s&&(l=s.getElementById(e.id)),!l||n)if(l=document.createElementNS("http://www.w3.org/2000/svg","path"),t.parentElement&&"diagram_nativeLayer"===t.parentElement.id){var c=document.createElementNS("http://www.w3.org/2000/svg","g");c.id=e.id+"_groupElement",t.appendChild(c),c.appendChild(l)}else t.appendChild(l);this.renderPath(l,e,h);var d={};d=o?{id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+"),scale("+o+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity}:{id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity},r&&(d.role="img",d["aria-label"]=r),e.class&&(d.class=e.class),hv(l,d),this.setSvgStyle(l,e,i)},t.prototype.renderPath=function(t,e,i){var n,s,r,o,a,l,h,c,d=i,p="";for(a=0,l=0,c=0,h=d.length;c<h;++c){var u=d[parseInt(c.toString(),10)],g=u.command;switch("x1"in u&&(n=u.x1),"x2"in u&&(r=u.x2),"y1"in u&&(s=u.y1),"y2"in u&&(o=u.y2),"x"in u&&(a=u.x),"y"in u&&(l=u.y),g){case"M":p=p+"M"+a.toString()+","+l.toString()+" ";break;case"L":p=p+"L"+a.toString()+","+l.toString()+" ";break;case"C":p=p+"C"+n.toString()+","+s.toString()+","+r.toString()+","+o.toString()+",",p+=a.toString()+","+l.toString()+" ";break;case"Q":p=p+"Q"+n.toString()+","+s.toString()+","+a.toString()+","+l.toString()+" ";break;case"A":p=p+"A"+u.r1.toString()+","+u.r2.toString()+","+u.angle.toString()+",",p+=u.largeArc.toString()+","+u.sweep+","+a.toString()+","+l.toString()+" ";break;case"Z":case"z":p+="Z "}}t.setAttribute("d",p)},t.prototype.setSvgFontStyle=function(t,e){t.style.fontStyle=e.italic?"italic":"normal",t.style.fontWeight=e.bold?"bold":"normal",t.style.fontSize=e.fontSize.toString()+"px",t.style.fontFamily=e.fontFamily},t.prototype.drawText=function(t,e,i,n,s,r,o){if(void 0!==e.content){var a=o.groupElement,l=void 0,h=void 0,c=void 0,d=void 0,p=void 0,u=void 0,g=0,m=0,f=0,y=void 0,v=void 0;if(i&&(y=i.getElementById(e.id+"_text")),y){if(e.doWrap)for(;y.firstChild;)y.removeChild(y.firstChild)}else if(e.doWrap=!0,y=document.createElementNS("http://www.w3.org/2000/svg","text"),"pre-wrap"===e.whiteSpace&&y.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a&&(v=document.getElementById(a.id+"_content_groupElement")),v&&a&&a.children&&a.children[0]instanceof hr){var b=this.createGElement("g",{id:n+"_groupElement"});v.appendChild(b),b.appendChild(y)}else t.appendChild(y);var C=e.x+e.width*e.pivotX,I=e.y+e.height*e.pivotY,M=0;if(e.doWrap||"Wrap"!==e.textOverflow){for(;y.firstChild;)y.removeChild(y.firstChild);for(this.setSvgStyle(y,e,s),this.setSvgFontStyle(y,e),l=document.createTextNode(e.content),h=e.childNodes,c=e.wrapBounds,d=this.svgLabelAlign(e,c,h),c.width>e.width&&"Wrap"!==e.textOverflow&&"NoWrap"===e.textWrapping&&(h[0].text=Kn(e.content,e)),f=0;f<h.length;f++)if(u=document.createElementNS("http://www.w3.org/2000/svg","tspan"),l=document.createTextNode(h[parseInt(f.toString(),10)].text),(p=h[parseInt(f.toString(),10)]).x=uv(p,h,f,e),g="justify"===e.textAlign||"left"===e.textAlign?0:d.x+p.x-c.x,m=d.y+p.dy*f+.8*e.fontSize,"Clip"!==e.textOverflow&&"Ellipsis"!==e.textOverflow||"WrapWithOverflow"!==e.textWrapping&&"Wrap"!==e.textWrapping||!a)this.alignText(y,u,p,l,g,m,f,e,h);else{var S=e.isHorizontalLane?a.actualSize.width:a.actualSize.height;if(!(m<S))break;if("Ellipsis"===e.textOverflow&&h[f+1]){var x=h[f+1];d.y+x.dy*(f+1)+.8*e.fontSize>S&&(p.text=p.text.slice(0,p.text.length-3),p.text=p.text.concat("..."),l.data=p.text)}this.alignText(y,u,p,l,g,m,f,e,h),M+=p.dy}}M&&e.isHorizontalLane&&(C=e.parentOffsetX+e.pivotX,I=e.parentOffsetY+e.pivotY,e.y=e.parentOffsetY-M*e.pivotY+.5),e.textDecoration&&"LineThrough"===e.textDecoration&&(e.textDecoration=Zn(e.textDecoration));var w={id:e.id+"_text",fill:e.color,visibility:e.visible?"visible":"hidden","text-decoration":e.textDecoration,transform:"rotate("+e.angle+","+C+","+I+")translate("+e.x+","+e.y+")",opacity:e.opacity};n&&(w.role="img",w["aria-label"]=n),hv(y,w)}},t.prototype.alignText=function(t,e,i,n,s,r,o,a,l){if("justify"!==a.textAlign)this.setText(t,e,i,n,s,r,a);else if(o!==l.length-1){var h=a.width;this.setText(t,e,i,n,s,r,a,h,"spacing")}else this.setText(t,e,i,n,s,r,a)},t.prototype.setText=function(t,e,i,n,s,r,o,a,l){var h={x:s.toString(),y:r.toString()};"justify"===o.textAlign&&(h.textLength=(a||0).toString(),h.lengthAdjust=l||"spacing"),hv(e,h),t.setAttribute("fill",i.text),e.appendChild(n),t.appendChild(e)},t.prototype.drawImage=function(t,e,i,n){var s;i&&(s=i.getElementById(e.id+"image")),s||(s=document.createElementNS("http://www.w3.org/2000/svg","image"),t.appendChild(s));var r=new Image;r.src=e.source;var o="None"!==e.scale?e.scale:"",a=e.alignment,l=a.charAt(0).toLowerCase()+a.slice(1);"Stretch"!==o&&(l+=" "+o.charAt(0).toLowerCase()+o.slice(1)),hv(s,{id:e.id+"image",x:e.x.toString(),y:e.y.toString(),transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")",width:e.width.toString(),visibility:e.visible?"visible":"hidden",height:e.height.toString(),preserveAspectRatio:l,opacity:e.opacity.toString()}),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r.src.toString())},t.prototype.drawHTMLContent=function(t,e,i,n,s){var r,o;if(e&&(r=e.querySelector("#"+t.id+"_html_element")),!r){if(!(o=e.querySelector("#"+t.id+"_html_element")||e.querySelector("#"+t.nodeId+"_html_element")))o=iv("div",{id:t.nodeId+"_html_element",class:"foreign-object"});var a={id:t.id+"_html_element",class:"foreign-object"};r=iv("div",a);var l=document.getElementById(t.diagramId).ej2_instances[0],h=!1;if(e.parentNode&&e.parentNode.parentNode&&e.parentNode.parentNode.parentNode&&e.parentNode.parentNode.parentNode.classList.contains("e-overview")&&(h=!0),h)l.isReact?l.renderReactTemplates(function(){r.appendChild(t.template.cloneNode(!0))}):r.appendChild(t.template.cloneNode(!0));else{if("string"==typeof t.template){var c=document.createElement("div");c.innerHTML=t.template,t.template=c,l.selectedItems.userHandles.filter(function(e){return e.name===t.id.split("_shape")[0]&&""!==e.template})[0].template=t.template}t.isTemplate&&t.template?r.appendChild(t.template):t.template&&r.appendChild(t.template.cloneNode(!0))}void 0!==s&&e.childNodes.length>s&&e.insertBefore(r,e.childNodes[parseInt(s.toString(),10)]),o.appendChild(r),e.appendChild(o)}var d=Vn(t).topLeft;r.style.height=t.actualSize.height+"px",r.style.width=t.actualSize.width+"px",r.style.left=d.x+"px",r.style.top=d.y+"px",r.style.position="absolute",r.style.transform="rotate("+(t.rotateAngle+t.parentTransform)+"deg)",r.style.pointerEvents=n?"all":"none",r.style.visibility=t.visible?"visible":"hidden",r.style.opacity=t.style.opacity.toString()},t.prototype.drawNativeContent=function(t,e,i,n,s){var r,o;if(s&&(r=s.getElementById(t.id+"_native_element"),o=s.getElementById(t.id+"_clip")),!r){(r=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id",t.id+"_native_element"),r.appendChild(t.template.cloneNode(!0));var a=this.createGElement("g",{id:t.id+"_inner_native_element"});a.appendChild(r),e.appendChild(a)}o&&r.removeChild(o),r.style.visibility=t.visible?"visible":"hidden",r.style.opacity=t.style.opacity?t.style.opacity.toString():"1",this.setNativTransform(t,r,i,n),"Slice"===t.scale&&this.drawClipPath(t,r,i,n,s),hv(r,t.description?{role:"img","aria-label":t.description}:{})},t.prototype.setNativTransform=function(t,e,i,n){var s=0!==t.contentSize.width?t.contentSize.width:1,r=0!==t.contentSize.height?t.contentSize.height:1,o=t.templatePosition.x*n/s,a=t.templatePosition.y*i/r;e.setAttribute("transform","rotate("+t.parentTransform+","+t.offsetX+","+t.offsetY+") translate("+(t.offsetX-o-n*t.pivot.x)+","+(t.offsetY-a-i*t.pivot.y)+") scale("+n/s+","+i/r+")")},t.prototype.drawClipPath=function(t,e,i,n,s){var r=t.contentSize.width,o=t.contentSize.height,a=t.width/(n/r),l=t.height/(i/o),h=t.templatePosition.x+(t.width>=t.height?0:(r-a)/2),c=t.templatePosition.y+(t.height>=t.width?0:(o-l)/2),d=s.getElementById(t.id+"_clip");(d=document.createElementNS("http://www.w3.org/2000/svg","clipPath")).setAttribute("id",t.id+"_clip"),e.appendChild(d);var p=s.getElementById(t.id+"_clip_rect");return p=document.createElementNS("http://www.w3.org/2000/svg","rect"),d.appendChild(p),hv(p,{id:t.id+"_clip_rect",width:a.toString(),height:l.toString(),x:h.toString(),y:c.toString()}),Sf()?e.setAttribute("clip-path","url("+location.protocol+"//"+location.host+location.pathname+"#"+t.id+"_clip)"):e.setAttribute("clip-path","url(#"+t.id+"_clip)"),e},t.prototype.renderGradient=function(t,e,i){var n,s,r,o,a,l=Jy(i),h=l.getElementById(i+"gradient_pattern");if(h||(h=nv("defs",{id:i+"gradient_pattern"}),l.insertBefore(h,l.firstChild)),Wm(e.id),"None"!==t.gradient.type){for(var c=0;c<t.gradient.stops.length;c++)n=n?Math.max(n,t.gradient.stops[parseInt(c.toString(),10)].offset):t.gradient.stops[parseInt(c.toString(),10)].offset,s=s?Math.min(s,t.gradient.stops[parseInt(c.toString(),10)].offset):t.gradient.stops[parseInt(c.toString(),10)].offset;"Linear"===t.gradient.type?((a=t.gradient).id=e.id+"_linear",r=this.createLinearGradient(a),h.appendChild(r)):((o=t.gradient).id=e.id+"_radial",r=this.createRadialGradient(o),h.appendChild(r));for(c=0;c<t.gradient.stops.length;c++){var d=t.gradient.stops[parseInt(c.toString(),10)],p=s<0?(n+d.offset)/(2*n):d.offset/n,u=document.createElementNS("http://www.w3.org/2000/svg","stop");hv(u,{offset:p.toString(),style:"stop-color:"+d.color}),r.appendChild(u)}}return r},t.prototype.createLinearGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");return hv(e,{id:t.id,x1:t.x1+"%",y1:t.y1+"%",x2:t.x2+"%",y2:t.y2+"%"}),e},t.prototype.createRadialGradient=function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient");return hv(e,{id:t.id,cx:t.cx+"%",cy:t.cy+"%",r:t.r+"%",fx:t.fx+"%",fy:t.fy+"%"}),e},t.prototype.setSvgStyle=function(t,e,i){if(e.canApplyStyle||void 0===e.canApplyStyle){"none"===e.fill&&(e.fill="transparent"),"none"===e.stroke&&(e.stroke="transparent");var n=[],s=void 0;if(e.dashArray)n=(new vv).parseDashArray(e.dashArray);if(e.gradient&&"None"!==e.gradient.type&&i){var r=this.renderGradient(e,t,i);s=Sf()?"url("+location.protocol+"//"+location.host+location.pathname+"#"+r.id+")":"url(#"+r.id+")"}else s=e.fill;e.stroke&&t.setAttribute("stroke",e.stroke),void 0!==e.strokeWidth&&null!==e.strokeWidth&&t.setAttribute("stroke-width",e.strokeWidth.toString()),n&&t.setAttribute("stroke-dasharray",n.toString()||"none"),s&&t.setAttribute("fill",s)}},t.prototype.svgLabelAlign=function(t,e,i){var n=new un(e.width,i.length*(1.2*t.fontSize)),s={x:0,y:0},r=.5*t.width,o=.5*t.height;return"left"===t.textAlign||"justify"===t.textAlign?r=0:"center"===t.textAlign?r=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(r=1*t.width),s.x=0+r+(e?e.x:0),s.y=1.2+o-n.height/2,s},t}(),am=function(){function t(t,e,i){this.renderer=null,this.isSvgMode=!0,this.touchMove=void 0,this.transform={x:0,y:0},this.diagramId=t,this.element=Yy(this.diagramId),this.svgRenderer=e,this.isSvgMode=i,this.renderer=i?new om:new vv}return t.prototype.setCursor=function(t,e){t.style.cursor=e},t.prototype.setLayers=function(){this.iconSvgLayer=this.element.getElementsByClassName("e-ports-expand-layer")[0],this.adornerSvgLayer=this.element.getElementsByClassName("e-adorner-layer")[0],this.nativeSvgLayer=this.element.getElementsByClassName("e-native-layer")[0],this.diagramSvgLayer=this.element.getElementsByClassName("e-diagram-layer")[0]},t.prototype.getAdornerLayer=function(){return qy(this.diagramId)},t.prototype.getParentSvg=function(t,e,i){return this.diagramId&&t&&t.id?t.id.split("_icon_content").length>1||t.id.split("_nodeport").length>1||t.elementActions&us.ElementIsPort?this.iconSvgLayer:e&&"selector"===e?this.adornerSvgLayer:t instanceof hr?this.nativeSvgLayer:this.diagramSvgLayer:i},t.prototype.getParentElement=function(t,e,i,n){var s=e;if(i&&this.diagramId&&t&&t.id){t.id.split("_icon_content").length>1?(s=i.getElementById(this.diagramId+"_diagramExpander"),e=null):t.id.split("_nodeport").length>1?s=i.getElementById(this.diagramId+"_diagramPorts"):t instanceof hr?(s=i.getElementById(this.diagramId+"_nativeLayer"),e=null):t.elementActions&us.ElementIsPort?(s=i.getElementById(this.diagramId+"_diagramPorts"),e=null):s=i.getElementById(this.diagramId+"_diagramLayer");var r=this.getGroupElement(t,e||s,n);s=r.g,r.svg&&(i=r.svg)}return{g:s,svg:i}},t.prototype.getGroupElement=function(t,e,i){var n,s,r=this.getParentSvg(t);if(e&&r){if(r&&!(n=r.getElementById(t.id+"_groupElement"))&&r!==this.nativeSvgLayer){var o=this.nativeSvgLayer;n=o.getElementById(t.id+"_groupElement"),s=o}n||(n=this.svgRenderer.createGElement("g",{id:t.id+"_groupElement"}),void 0!==i&&e.childNodes.length>i?e.insertBefore(n,e.childNodes[parseInt(i.toString(),10)]):e.appendChild(n))}return{g:n,svg:s}},t.prototype.renderElement=function(t,e,i,n,s,r,o,a,l,h,c){t instanceof _s?(t.id=t.id?t.id:Hn(),this.renderContainer(t,e,i,n,s,r,o,a,l,h,c)):t instanceof Ks?this.renderImageElement(t,e,n,s,o):t instanceof Xs?this.renderPathElement(t,e,n,s,o,l,c):t instanceof Zs?this.renderTextElement(t,e,n,s,o,h):t instanceof hr?this.renderNativeElement(t,e,n,s,o):t instanceof sp?this.renderHTMLElement(t,e,i,n,s,o,a):this.renderRect(t,e,n,s,l)},t.prototype.drawSelectionRectangle=function(t,e,i,n,s,r){t=(t+r.tx)*r.scale,e=(e+r.ty)*r.scale;var o={width:i*r.scale,height:n*r.scale,x:t+.5,y:e+.5,fill:"transparent",stroke:"gray",angle:0,pivotX:.5,pivotY:.5,strokeWidth:1,dashArray:"6 3",opacity:1,visible:!0,id:s.id+"_selected_region"},a=this.getAdornerLayer();this.svgRenderer.updateSelectionRegion(a,o)},t.prototype.renderHighlighter=function(t,e,i){var n=t.actualSize.width||2,s=t.actualSize.height||2,r=t.offsetX-n*t.pivot.x,o=t.offsetY-s*t.pivot.y;r=(r+i.tx)*i.scale,o=(o+i.ty)*i.scale;var a={width:n*i.scale,height:s*i.scale,x:r,y:o,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:4,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:e.id+"_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawRectangle(e,a,this.diagramId,void 0,void 0,e)},t.prototype.renderSelectionRectangle=function(t,e,i,n){var s=t.actualSize.width||2,r=t.actualSize.height||2,o=t.offsetX-s*t.pivot.x,a=t.offsetY-r*t.pivot.y;o=(o+i.tx)*i.scale,a=(a+i.ty)*i.scale;var l={width:s*i.scale,height:r*i.scale,x:o,y:a,fill:"transparent",stroke:"#00cc00",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:n?2:1,dashArray:"",opacity:1,cornerRadius:0,visible:!0,id:t.id+"_highlighter",class:n?"e-diagram-first-selection-indicator e-diagram-selection-indicator":"e-diagram-selection-indicator"},h=this.getParentSvg(t,"selector");this.svgRenderer.drawRectangle(e,l,this.diagramId,void 0,void 0,h)},t.prototype.renderSelectionLine=function(t,e,i,n){var s=this.getBaseAttributes(t,i);s.data=t.absolutePath,s.id=s.id+"_highlighter";var r=t.description?t.description:t.id;this.isSvgMode||(s.x=t.flipOffset.x?t.flipOffset.x:s.x,s.y=t.flipOffset.y?t.flipOffset.y:s.y),i&&(s.x=s.x*i.scale,s.y=s.y*i.scale),s.stroke="#00cc00",s.strokeWidth=n?2:1,s.class=n?"e-diagram-first-selection-indicator e-diagram-selection-indicator":"e-diagram-selection-indicator";var o=this.getParentSvg(t,"selector");this.svgRenderer.drawPath(e,s,this.diagramId,void 0,o,r,i.scale)},t.prototype.renderStackHighlighter=function(t,e,i,n,s,r,o){var a,l=t.actualSize.width||2,h=t.offsetX-l*t.pivot.x,c=t.actualSize.height||2,d=t.offsetY-c*t.pivot.y;h=(h+i.tx)*i.scale;var p=t.bounds,u="";if(d=(d+i.ty)*i.scale,n)if(r){a="M 0 0 L "+((f=l*i.scale)+2)+" 0 Z";var g=p.x,m=p.y;g=t.actualSize.width/Number(p.width?p.width:1)*i.scale,m=t.actualSize.height/Number(p.height?p.height:1)*i.scale;u=In(xn(yn("M7,4 L8,4 8,7 11,7 11,8 8,8 8,11 7,11 7,8 4,8 4,7 7,7 z M7.5,0.99999994C3.9160004,1 1,3.9160004 0.99999994,7.5 1,11.084 3.9160004,14 7.5,14 11.084,14 14,11.084 14,7.5 14,3.9160004 11.084,1 7.5,0.99999994 z M7.5,0 C11.636002,0 15,3.3639984 15,7.5 15,11.636002 11.636002,15 7.5,15 3.3640003,15 0,11.636002 0,7.5 0,3.3639984 3.3640003,0 7.5,0 z")),g+f+2,m-8,!1,p.x,p.y,0,0),s.y>=t.offsetY&&(d+=c)}else{var f;o&&s.y>=t.offsetY&&(d+=c*i.scale),a="M -10 -10 L 0 0 Z M -10 10 L 0 0 Z M 0 0 L "+(f=l*i.scale)+" 0 Z M "+f+" 0 L "+(f+10)+" 10 Z L "+(f+10)+" -10 Z"}else a="M 10 -10 L 0 0 Z M -10 -10 L 0 0 Z M 0 0 L 0 "+(f=c*i.scale)+" Z M 0  "+f+" L -10  "+(f+10)+" Z L 10  "+(f+10)+" Z",s.x>=t.offsetX&&(h+=l*i.scale);var y={data:a+u,width:l*i.scale,height:c*i.scale,x:h,y:d,fill:"transparent",stroke:"#8CC63F",angle:t.rotateAngle,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:1,dashArray:"",opacity:1,visible:!0,id:e.id+"_stack_highlighter",class:"e-diagram-highlighter"};this.svgRenderer.drawPath(e,y,this.diagramId)},t.prototype.drawLine=function(t,e){this.svgRenderer.drawLine(t,e)},t.prototype.drawPath=function(t,e){this.svgRenderer.drawPath(t,e,this.diagramId)},t.prototype.renderResizeHandle=function(t,e,i,n,s,r,o,a,l,h,c){var d=t.offsetX-t.actualSize.width*t.pivot.x,p=t.offsetY-t.actualSize.height*t.pivot.y,u=t.actualSize.height,g=t.actualSize.width;if(!h&&i&gs.Rotate&&Bp(this.rendererActions)&&!Hp(this.rendererActions))this.renderPivotLine(t,e,r,s,o),this.renderRotateThumb(t,e,r,s,o);else if(this.touchMove){var m=document.getElementById("rotateThumb");m&&m.setAttribute("visibility","hidden")}this.renderBorder(t,e,r,a,l,h);var f=t.actualSize.width*n,y=t.actualSize.height*n;l||!Bp(this.rendererActions)||Hp(this.rendererActions)||t.isTextAnnotation||(f>=40&&y>=40&&(s&as.ResizeNorthWest&&this.renderCircularHandle("resizeNorthWest",t,d,p,e,qm(s,"ResizeNorthWest"),i&gs.ResizeNorthWest,r,void 0,o,{"aria-label":"Thumb to resize the selected object on top left side direction"},void 0,"e-diagram-resize-handle e-northwest",c),s&as.ResizeNorthEast&&this.renderCircularHandle("resizeNorthEast",t,d+g,p,e,qm(s,"ResizeNorthEast"),i&gs.ResizeNorthEast,r,void 0,o,{"aria-label":"Thumb to resize the selected object on top right side direction"},void 0,"e-diagram-resize-handle e-northeast",c),s&as.ResizeSouthWest&&this.renderCircularHandle("resizeSouthWest",t,d,p+u,e,qm(s,"ResizeSouthWest"),i&gs.ResizeSouthWest,r,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom left side direction"},void 0,"e-diagram-resize-handle e-southwest",c),s&as.ResizeSouthEast&&this.renderCircularHandle("resizeSouthEast",t,d+g,p+u,e,qm(s,"ResizeSouthEast"),i&gs.ResizeSouthEast,r,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom right side direction"},void 0,"e-diagram-resize-handle e-southeast",c)),s&as.ResizeNorth&&this.renderCircularHandle("resizeNorth",t,d+g/2,p,e,qm(s,"ResizeNorth"),i&gs.ResizeNorth,r,void 0,o,{"aria-label":"Thumb to resize the selected object on top side direction"},void 0,"e-diagram-resize-handle e-north",c),s&as.ResizeSouth&&this.renderCircularHandle("resizeSouth",t,d+g/2,p+u,e,qm(s,"ResizeSouth"),i&gs.ResizeSouth,r,void 0,o,{"aria-label":"Thumb to resize the selected object on bottom side direction"},void 0,"e-diagram-resize-handle e-south",c),s&as.ResizeWest&&this.renderCircularHandle("resizeWest",t,d,p+u/2,e,qm(s,"ResizeWest"),i&gs.ResizeWest,r,void 0,o,{"aria-label":"Thumb to resize the selected object on left side direction"},void 0,"e-diagram-resize-handle e-west",c),s&as.ResizeEast&&this.renderCircularHandle("resizeEast",t,d+g,p+u/2,e,qm(s,"ResizeEast"),i&gs.ResizeEast,r,void 0,o,{"aria-label":"Thumb to resize the selected object on right side direction"},void 0,"e-diagram-resize-handle e-east",c));var v=document.getElementById(this.diagramId+"_SelectorElement");if(t.flippedPoint&&v){var b=document.getElementById(t.id+"_groupElement").getAttribute("transform");if(b.includes("scale"))b="translate("+(t.flippedPoint.x-t.corners.topLeft.x)+","+(t.flippedPoint.y-t.corners.topLeft.y)+")";b&&v.setAttribute("transform",b)}else v&&v.setAttribute("transform","")},t.prototype.renderEndPointHandle=function(t,e,i,n,s,r,o,a,l,h){var c,d,p=t.sourcePoint,u=t.targetPoint,g=t.wrapper;if(this.renderCircularHandle("connectorSourceThumb",g,p.x,p.y,e,qm(n,"ConnectorSourceThumb"),i&gs.ConnectorSource,s,r,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-endpoint-handle e-sourceend",h),this.renderCircularHandle("connectorTargetThumb",g,u.x,u.y,e,qm(n,"ConnectorTargetThumb"),i&gs.ConnectorTarget,s,o,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-endpoint-handle e-targetend",h),a)if("Straight"===t.type&&t.segments.length>0)for(c=0;c<t.segments.length-1;c++){d=t.segments[parseInt(c.toString(),10)];var m="e-diagram-straight-segment-handle";this.renderCircularHandle("segementThumb_"+(c+1),g,d.point.x,d.point.y,e,!0,i&gs.ConnectorSource,s,r,null,null,c,m,h)}else if("Bezier"===t.type&&t.segments.length>0)for(c=0;c<t.segments.length-1;c++){d=t.segments[parseInt(c.toString(),10)];m="e-diagram-bezier-segment-handle";this.renderBezierHandle("segementThumb_"+(c+1),g,d.point.x,d.point.y,e,!0,t,s,r,null,c,m,h)}else if(t.maxSegmentThumb){var f=t.segments.length<=t.maxSegmentThumb?0:1,y=t.segments.length<=t.maxSegmentThumb?t.segments.length:t.segments.length-1;for(t.maxSegmentThumb>=3&&3===t.segments.length&&(f=1,y=t.segments.length-1),f=t.segments.length>t.maxSegmentThumb+2?2:f,y=t.segments.length>t.maxSegmentThumb+2?t.segments.length-2:y,1===t.segments.length&&t.segments[0].points.length<=2&&(f=1,y=t.segments.length),c=f;c<y;c++){v=t.segments[parseInt(c.toString(),10)];this.renderOrthogonalThumbs("orthoThumb_"+(c+1),g,v,e,qm(n,"ConnectorSourceThumb"),s,t)}}else for(c=0;c<t.segments.length;c++){var v=t.segments[parseInt(c.toString(),10)];this.renderOrthogonalThumbs("orthoThumb_"+(c+1),g,v,e,qm(n,"ConnectorSourceThumb"),s,t)}if("Bezier"===t.type&&l){var b=t.segments.length-1,C=null!=t.bezierSettings?t.bezierSettings.controlPointsVisibility:null;for(c=0;c<=b;c++){var I=t.segments[parseInt(c.toString(),10)],M=fn.isEmptyPoint(I.point1)?I.bezierPoint1:I.point1;(null!=C&&0===c&&Xm(C,"Source")||0!==c&&Xm(C,"Intermediate"))&&(this.renderCircularHandle("bezierPoint_"+(c+1)+"_1",g,M.x,M.y,e,qm(n,"ConnectorSourceThumb"),i&gs.ConnectorSource,s,void 0,void 0,{"aria-label":"Thumb to move the source point of the connector"},void 0,"e-diagram-bezier-control-handle e-source",h),qm(n,"ConnectorSourceThumb")&&this.renderBezierLine("bezierLine_"+(c+1)+"_1",g,e,I.points[0],fn.isEmptyPoint(I.point1)?I.bezierPoint1:I.point1,s)),M=fn.isEmptyPoint(I.point2)?I.bezierPoint2:I.point2,(null!=C&&c===b&&Xm(C,"Target")||c!==b&&Xm(C,"Intermediate"))&&(this.renderCircularHandle("bezierPoint_"+(c+1)+"_2",g,M.x,M.y,e,qm(n,"ConnectorTargetThumb"),i&gs.ConnectorTarget,s,void 0,void 0,{"aria-label":"Thumb to move the target point of the connector"},void 0,"e-diagram-bezier-control-handle e-target",h),qm(n,"ConnectorTargetThumb")&&this.renderBezierLine("bezierLine_"+(c+1)+"_2",g,e,I.points[1],fn.isEmptyPoint(I.point2)?I.bezierPoint2:I.point2,s))}}},t.prototype.renderOrthogonalThumbs=function(t,e,i,n,s,r,o){var a,l,h,c,d=0;if(o.maxSegmentThumb){var p=i.points.length<3?0:1,u=i.points.length<3?i.points.length-1:i.points.length-2;for(p=1===o.segments.length?p:0,u=1===o.segments.length?u:i.points.length-1,d=p;d<u;d++)h=fn.distancePoints(i.points[parseInt(d.toString(),10)],i.points[d+1]),a=i.points[parseInt(d.toString(),10)].y.toFixed(2)===i.points[d+1].y.toFixed(2)?"horizontal":"vertical",l=!!(h>=50&&i.allowDrag),this.renderOrthogonalThumb(t+"_"+(d+1),e,(i.points[parseInt(d.toString(),10)].x+i.points[d+1].x)/2,(i.points[parseInt(d.toString(),10)].y+i.points[d+1].y)/2,n,l,a,r,o,c)}else for(d=0;d<i.points.length-1;d++)h=fn.distancePoints(i.points[parseInt(d.toString(),10)],i.points[d+1]),a=i.points[parseInt(d.toString(),10)].y.toFixed(2)===i.points[d+1].y.toFixed(2)?"horizontal":"vertical",c=fn.direction(i.points[parseInt(d.toString(),10)],i.points[d+1]),l=!!(h>=50&&i.allowDrag),this.renderOrthogonalThumb(t+"_"+(d+1),e,(i.points[parseInt(d.toString(),10)].x+i.points[d+1].x)/2,(i.points[parseInt(d.toString(),10)].y+i.points[d+1].y)/2,n,l,a,r,o,c)},t.prototype.renderOrthogonalThumb=function(t,e,i,n,s,r,o,a,l,h){var c,d,p=0,u=document.getElementById(this.diagramId);u&&(d=u.ej2_instances[0]);var g=l.constraints&cs.InheritSegmentThumbShape?d.segmentThumbShape:l.segmentThumbShape,m=l.constraints&cs.InheritSegmentThumbSize?d.segmentThumbSize:l.segmentThumbSize;if(c="horizontal"===o?ed[""+g]:Jc(g),"Arrow"===g||"DoubleArrow"===g||"OpenArrow"===g)switch(h){case"Bottom":case"Right":p=180;break;default:p=0}else if("Fletch"===g||"OpenFetch"===g||"IndentedArrow"===g||"OutdentedArrow"===g)switch(h){case"Bottom":p=-90;break;case"Top":p=90;break;case"Right":p=180;break;default:p=0}var f={x:(i+a.tx)*a.scale-m/2,y:(n+a.ty)*a.scale-m/2,angle:p,fill:"#e2e2e2",stroke:"black",strokeWidth:1,dashArray:"",data:c,width:m,height:m,pivotX:.5,pivotY:.5,opacity:1,visible:r,id:t,class:"e-diagram-ortho-segment-handle"},y=Vy(f.data),v=new un(f.width,f.height),b=new Xs;if(f.data=b.updatePath(f.data,y,v),this.touchMove){var C=document.getElementById(t);C?this.updateSegmentPosition(C,f):this.svgRenderer.drawPath(s,f,this.diagramId)}else this.svgRenderer.drawPath(s,f,this.diagramId)},t.prototype.renderPivotLine=function(t,e,i,n,s){var r=t,o=!!(n&as.Rotate);s&&(o=!1);var a=this.getBaseAttributes(r,i);a.fill="None",a.stroke="black",a.strokeWidth=1,a.dashArray="2,3",a.visible=o;var l=i.scale;a.x*=l,a.y*=l,a.width*=l,a.height*=l,a.id="pivotLine",a.class="e-diagram-pivot-line";var h={x:r.actualSize.width*r.pivot.x*l,y:-20},c={x:r.actualSize.width*r.pivot.x*l,y:0};a.startPoint=h,a.endPoint=c,this.svgRenderer.drawLine(e,a)},t.prototype.renderBezierLine=function(t,e,i,n,s,r){var o=this.getBaseAttributes(e,r);o.id=t,o.stroke="black",o.strokeWidth=1,o.dashArray="3,3",o.fill="None",o.class="e-diagram-bezier-control-line",o.x=0,o.y=0;var a=r.scale,l={x:(n.x+r.tx)*a,y:(n.y+r.ty)*a},h={x:(s.x+r.tx)*a,y:(s.y+r.ty)*a};o.startPoint=l,o.endPoint=h,this.svgRenderer.drawLine(i,o)},t.prototype.renderCircularHandle=function(t,e,i,n,s,r,o,a,l,h,c,d,p,u){var g=e,m={x:i,y:n};if(0!==g.rotateAngle||0!==g.parentTransform){var f=Nn();On(f,g.rotateAngle+g.parentTransform,g.offsetX,g.offsetY),m=Ln(f,m)}var y=this.getBaseAttributes(g);if(y.stroke="black",y.strokeWidth=1,void 0!==d?(y.id="segmentEnd_"+d,y.fill="#e2e2e2"):y.fill=l?"#8CC63F":"white",y.cornerRadius=u/2,y.angle=e.rotateAngle,y.id=t,y.visible=r,y.class=p,y.width=u,y.height=u,y.x=(m.x+a.tx)*a.scale,y.y=(m.y+a.ty)*a.scale,y.x=y.x-y.width/2,y.y=y.y-y.height/2,l&&(y.class+=" e-connected"),h&&(y.visible=!1),this.touchMove){var v=document.getElementById(t);if(v)this.updateResizeHandle(v,y);else{var b=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(s,y,this.diagramId,!0,!0,b,c,!0,o)}}else{b=this.getParentSvg(e,"selector");this.svgRenderer.drawRectangle(s,y,this.diagramId,!0,!0,b,c,!0,o)}},t.prototype.updateResizeHandle=function(t,e){hv(t,{id:e.id,x:e.x.toString(),y:e.y.toString(),width:e.width.toString(),height:e.height.toString(),visibility:e.visible?"visible":"hidden",transform:"rotate("+e.angle+","+(e.x+e.width/2)+","+(e.y+e.height/2)+")",rx:e.cornerRadius||0,ry:e.cornerRadius||0,opacity:e.opacity})},t.prototype.renderBezierHandle=function(t,e,i,n,s,r,o,a,l,h,c,d,p){var u,g=document.getElementById(this.diagramId);g&&(u=g.ej2_instances[0]);var m=e,f={x:i,y:n};if(0!==m.rotateAngle||0!==m.parentTransform){var y=Nn();On(y,m.rotateAngle+m.parentTransform,m.offsetX,m.offsetY),f=Ln(y,f)}var v=o.constraints&cs.InheritSegmentThumbShape?u.segmentThumbShape:o.segmentThumbShape,b=o.constraints&cs.InheritSegmentThumbSize?u.segmentThumbSize:o.segmentThumbSize,C=Jc(v),I=this.getBaseAttributes(m);I.stroke="black",I.strokeWidth=1,void 0!==c?(I.id="segmentEnd_"+c,I.fill="#e2e2e2"):I.fill=l?"#8CC63F":"white",I.angle=e.rotateAngle,I.id=t,I.visible=r,I.class=d,I.width=b,I.height=b,I.data=C,I.x=(f.x+a.tx)*a.scale,I.y=(f.y+a.ty)*a.scale,I.x=I.x-I.width/2,I.y=I.y-I.height/2,l&&(I.class+=" e-connected"),h&&(I.visible=!1);var M=Vy(I.data),S=new un(I.width,I.height),x=new Xs;if(I.data=x.updatePath(I.data,M,S),this.touchMove){var w=document.getElementById(t);if(w)this.updateSegmentPosition(w,I);else{var D=this.getParentSvg(e,"selector");this.svgRenderer.drawPath(s,I,this.diagramId,!0,D)}}else{D=this.getParentSvg(e,"selector");this.svgRenderer.drawPath(s,I,this.diagramId,!0,D)}},t.prototype.updateSegmentPosition=function(t,e){hv(t,{id:e.id,transform:"rotate("+e.angle+","+(e.x+e.width*e.pivotX)+","+(e.y+e.height*e.pivotY)+")translate("+e.x+","+e.y+")",visibility:e.visible?"visible":"hidden",opacity:e.opacity})},t.prototype.renderBorder=function(t,e,i,n,s,r){var o=t,a=this.getBaseAttributes(o,i);a.x*=i.scale,a.y*=i.scale,a.width*=i.scale,a.height*=i.scale,a.fill="transparent",a.stroke="#097F7F",a.strokeWidth=1.2,a.gradient=null,a.dashArray="6,3",a.class="e-diagram-selector",r&&(a.class+=" e-diagram-lane"),a.id="borderRect",a.id=this.rendererActions&Ms.DrawSelectorBorder?"borderRect_symbol":"borderRect",n||(a.class+=" e-disabled"),s&&(a.class+=" e-thick-border"),a.cornerRadius=0;var l=this.getParentSvg(t,"selector");this.svgRenderer.drawRectangle(e,a,this.diagramId,void 0,!0,l)},t.prototype.renderUserHandler=function(t,e,i,n,s,r){for(var o,a=t.wrapper,l=0,h=t.userHandles;l<h.length;l++){var c=h[l];o=!0,(c.disableConnectors&&t.connectors.length>0||c.disableNodes&&t.nodes.length>0||"Drag"===s&&r)&&(o=!1);var d=document.getElementById(c.name+"_template_hiddenUserHandle");d&&(c.template=d.childNodes[0].cloneNode(!0));var p=Qm(t,c,i);if(p.x=(p.x+i.tx)*i.scale,p.y=(p.y+i.ty)*i.scale,c.visible&&(c.visible=!!(t.constraints&as.UserHandle)),o)if(c.pathData){var u=c.pathData?c.pathData:c.content,g=this.getBaseAttributes(a);g.id=c.name+"_userhandle",g.fill=c.backgroundColor,g.stroke=c.borderColor,g.strokeWidth=c.borderWidth,g.centerX=p.x,g.centerY=p.y,g.radius=.5*c.size,g.class="e-diagram-userhandle-circle",g.angle=0,g.visible=c.visible,g.opacity=1,this.svgRenderer.drawCircle(e,g,1,{"aria-label":c.name+"user handle"});var m=[];m=xn(m=yn(u));var f=Vy(u),y=In(m,(c.size-.45*c.size)/f.width,(c.size-.45*c.size)/f.height,!0,f.x,f.y,0,0);f=Vy(y);var v={x:p.x-f.width/2,y:p.y-f.height/2,angle:0,id:"",class:"e-diagram-userhandle-path",fill:c.pathColor,stroke:c.backgroundColor,strokeWidth:.5,dashArray:"",data:y,width:c.size-5,height:c.size-5,pivotX:0,pivotY:0,opacity:1,visible:c.visible};this.svgRenderer.drawPath(e,v,this.diagramId,void 0,void 0,{"aria-label":c.name+"user handle"})}else if(c.content){var b=new hr(c.name,this.diagramId);b.content=c.content,b.offsetX=p.x,b.offsetY=p.y,b.id=c.name+"_shape",b.horizontalAlignment="Center",b.verticalAlignment="Center",b.visible=c.visible,b.setOffsetWithRespectToBounds(p.x,p.y,"Fraction"),b.relativeMode="Object",b.description=c.name||"User handle",b.measure(new un(c.size,c.size)),b.arrange(b.desiredSize),this.svgRenderer.drawNativeContent(b,e,c.size,c.size,this.adornerSvgLayer)}else if(c.source){var C=new Ks;(v=this.getBaseAttributes(C,i)).width=c.size,v.height=c.size,v.x=p.x-c.size/2,v.y=p.y-c.size/2,v.sourceWidth=c.size,v.sourceHeight=c.size,v.alignment=C.imageAlign,v.source=c.source,v.scale=C.imageScale,v.visible=c.visible,v.description=c.name||"User handle",v.id=c.name+"_",this.renderer.drawImage(e,v,this.adornerSvgLayer,!1)}else{var I=new sp(c.name,this.diagramId);I.offsetX=p.x,I.offsetY=p.y,I.id=c.name+"_shape",I.visible=c.visible,I.relativeMode="Object",I.template=c.template,I.measure(new un(c.size,c.size)),I.arrange(I.desiredSize),this.svgRenderer.drawHTMLContent(I,n,void 0,!0,void 0)}}},t.prototype.renderRotateThumb=function(t,e,i,n,s){new Xs;var r,o=new un;o.width=18,o.height=16;var a=t.offsetY-t.actualSize.height*t.pivot.y,l=t.offsetX-t.actualSize.width*t.pivot.x,h=!!(n&as.Rotate);s&&(h=!1);var c=l+t.pivot.x*t.actualSize.width,d=a;if(c=(c+i.tx)*i.scale,d=(d+i.ty)*i.scale,r={x:c-.5*o.width,y:d-30-.5*o.height},0!==t.rotateAngle||0!==t.parentTransform){var p=Nn();On(p,t.rotateAngle+t.parentTransform,(i.tx+t.offsetX)*i.scale,(i.ty+t.offsetY)*i.scale),r=Ln(p,r)}var u={x:r.x,y:r.y,angle:t.rotateAngle+t.parentTransform,fill:"#231f20",stroke:"black",strokeWidth:.5,dashArray:"",data:"M 16.856144362449648 10.238890446662904 L 18.000144362449646 3.437890446662903L 15.811144362449646 4.254890446662903 C 14.837144362449646 2.5608904466629028 13.329144362449647  1.2598904466629026 11.485144362449645 0.5588904466629026 C 9.375144362449646 - 0.24510955333709716 7.071144362449646  - 0.18010955333709716 5.010144362449646 0.7438904466629028 C 2.942144362449646 1.6678904466629028 1.365144362449646 3.341890446662903 0.558144362449646 5.452890446662903 C - 0.244855637550354 7.567890446662903 - 0.17985563755035394 9.866890446662904 0.7431443624496461 11.930890446662904 C 1.6681443624496461 13.994890446662904 3.343144362449646 15.575890446662903 5.457144362449647 16.380890446662903 C 6.426144362449647 16.7518904466629 7.450144362449647 16.9348904466629 8.470144362449647 16.9348904466629 C 9.815144362449647 16.9348904466629 11.155144362449647 16.6178904466629 12.367144362449647 15.986890446662901 L 11.351144362449647 14.024890446662901 C 9.767144362449647 14.8468904466629 7.906144362449647 14.953890446662902 6.237144362449647 14.3178904466629 C 4.677144362449647 13.7218904466629 3.444144362449647 12.5558904466629 2.758144362449647 11.028890446662901 C 2.078144362449646 9.501890446662903 2.031144362449646 7.802890446662903 2.622144362449646 6.243890446662903 C 3.216144362449646 4.6798904466629025 4.387144362449646 3.442890446662903 5.914144362449646 2.760890446662903 C 7.437144362449646 2.078890446662903 9.137144362449646 2.0298904466629026 10.700144362449645 2.6258904466629027 C 11.946144362449646 3.100890446662903 12.971144362449646 3.9538904466629026 13.686144362449646 5.049890446662903 L 11.540144362449645 5.850890446662903 L 16.856144362449648 10.238890446662904 Z",width:20,height:20,pivotX:0,pivotY:0,opacity:1,visible:h,id:(t.id,"rotateThumb"),class:"e-diagram-rotate-handle"};if(this.touchMove){var g=document.getElementById("rotateThumb");g?this.updateSegmentPosition(g,u):this.svgRenderer.drawPath(e,u,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})}else this.svgRenderer.drawPath(e,u,this.diagramId,!0,void 0,{"aria-label":"Thumb to rotate the selected object"})},t.prototype.renderPathElement=function(t,e,i,n,s,r,o){var a=this.getBaseAttributes(t,i,r);if(a.data=t.absolutePath,a.data=t.absolutePath,t.isPathPort&&o){a.x=o[t.id]?o[t.id].cx:a.x,a.y=o[t.id]?o[t.id].cy:a.y,t.bounds.x=a.x,t.bounds.y=a.y;var l=document.getElementById(this.diagramId);l&&"PortDrag"!==l.ej2_instances[0].eventHandler.currentAction&&(t.offsetX=a.x+t.width/2,t.offsetY=a.y+t.height/2)}var h=t.description?t.description:t.id;if(t.isExport){var c=t.absoluteBounds,d=yn(a.data),p=this.findAndStoreArcValues(d);a.arc=p,a.data=Fy(t,c,void 0,a)}this.renderer.drawPath(e,a,this.diagramId,void 0,n,h,void 0,this,t)},t.prototype.findAndStoreArcValues=function(t){var e=[];return t.forEach(function(t){if("A"===t.command){var i={r1:t.r1/2,r2:t.r2/2};e.push(i)}}),e},t.prototype.renderSvgGridlines=function(t,e,i,n,s,r){var o=document.createElementNS("http://www.w3.org/2000/svg","pattern"),a=document.createElementNS("http://www.w3.org/2000/svg","defs");a.setAttribute("id",this.diagramId+"_grid_pattern_defn"),(t.constraints&os.ShowHorizontalLines||t.constraints&os.ShowVerticalLines)&&o.setAttribute("id",this.diagramId+"_pattern");var l=0,h=0,c=0,d=0,p=1,u=!1,g="Lines"===t.gridType,m=g?t.verticalGridlines.lineIntervals:t.verticalGridlines.dotIntervals,f=g?t.horizontalGridlines.lineIntervals:t.horizontalGridlines.dotIntervals;if(n.showRulers&&n.dynamicGrid&&s&&r)c=r.updateSegmentWidth(i.scale),d=s.updateSegmentWidth(i.scale),t.horizontalGridlines.scaledIntervals=[c/s.interval],t.verticalGridlines.scaledIntervals=[d/r.interval],u=!0;else{for(var y=0;y<m.length;y+=1)l+=m[parseInt(y.toString(),10)];for(y=0;y<f.length;y+=1)h+=f[parseInt(y.toString(),10)];p=this.scaleSnapInterval(t,i.scale)}l=u?d:l*p,h=u?c:h*p,hv(o,{id:this.diagramId+"_pattern",x:0,y:0,width:l,height:h,patternUnits:"userSpaceOnUse"}),this.horizontalSvgGridlines(o,l,h,p,t,n,r,u,g,f),this.verticalSvgGridlines(o,l,h,p,t,n,s,u,g,m),a.appendChild(o),e.appendChild(a)},t.prototype.horizontalSvgGridlines=function(t,e,i,n,s,r,o,a,l,h){var c,d=0,p=[];if(s.constraints&os.ShowHorizontalLines){s.horizontalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(s.horizontalGridlines.lineDashArray)),r.showRulers&&r.dynamicGrid&&o&&(h=this.updateLineIntervals(h,r,o,i,l)),h=gm(h,l);for(var u=0;u<h.length;u+=2){d=um(h,l,u,d);c=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");var g=l?d+h[parseInt(u.toString(),10)]/2:d;g=a?g:g*n,l?(hv(c,""===p.toString()?{"stroke-width":h[parseInt(u.toString(),10)],d:"M0,"+g+" L"+e+","+g+" Z",class:1.25===h[parseInt(u.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:s.horizontalGridlines.lineColor}:{"stroke-width":h[parseInt(u.toString(),10)],stroke:s.horizontalGridlines.lineColor,d:"M0,"+g+" L"+e+","+g+" Z",class:1.25===h[parseInt(u.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",dashArray:p.toString()}),t.appendChild(c),d+=h[u+1]+h[parseInt(u.toString(),10)]):(this.renderDotGrid(u,t,s,0,g,n,!0),d+=h[parseInt(u.toString(),10)])}}},t.prototype.renderDotGrid=function(t,e,i,n,s,r,o){var a,l,h,c=o?i.verticalGridlines.dotIntervals:i.horizontalGridlines.dotIntervals;c=gm(c,!1);for(var d=1;d<c.length;d+=2)a=d===c.length-1?c[0]:c[d-1],h=n,h*=r,hv(l=document.createElementNS("http://www.w3.org/2000/svg","circle"),{cx:o?h:s,cy:o?s:h,fill:i.horizontalGridlines.lineColor,r:a}),e.appendChild(l),n+=c[parseInt(d.toString(),10)]+c[d-1]},t.prototype.verticalSvgGridlines=function(t,e,i,n,s,r,o,a,l,h){var c,d=0,p=[];if(s.constraints&os.ShowVerticalLines){s.verticalGridlines.lineDashArray&&(p=this.renderer.parseDashArray(s.verticalGridlines.lineDashArray)),r.showRulers&&r.dynamicGrid&&o&&(h=this.updateLineIntervals(h,r,o,e,l));h=gm(h,l);for(var u=0;u<h.length;u+=2){d=um(h,l,u,d);var g=l?d+h[parseInt(u.toString(),10)]/2:d;g=a?g:g*n,c=document.createElementNS("http://www.w3.org/2000/svg",l?"path":"circle");l?(hv(c,""===p.toString()?{"stroke-width":h[parseInt(u.toString(),10)],d:"M"+g+",0 L"+g+","+i+" Z",class:1.25===h[parseInt(u.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:s.verticalGridlines.lineColor}:{"stroke-width":h[parseInt(u.toString(),10)],class:1.25===h[parseInt(u.toString(),10)]?"e-diagram-thick-grid":"e-diagram-thin-grid",stroke:s.verticalGridlines.lineColor,d:"M"+g+",0 L"+g+","+i+" Z",dashArray:p.toString()}),t.appendChild(c),d+=h[u+1]+h[parseInt(u.toString(),10)]):(this.renderDotGrid(u,t,s,0,g,n,!1),d+=h[parseInt(u.toString(),10)])}}},t.prototype.updateGrid=function(t,e,i,n,s,r){var o=e.getElementById(this.diagramId+"_grid_rect"),a=!1;if(o){var l=e.getElementById(this.diagramId+"_pattern");l&&l.parentNode.removeChild(l);var h=0,c=0,d=1,p="Lines"===t.gridType,u=p?t.verticalGridlines.lineIntervals:t.verticalGridlines.dotIntervals,g=p?t.horizontalGridlines.lineIntervals:t.horizontalGridlines.dotIntervals;n.showRulers&&n.dynamicGrid&&r&&s?(h=r.updateSegmentWidth(i.scale),c=s.updateSegmentWidth(i.scale),a=!0,t.horizontalGridlines.scaledIntervals=[h/s.interval],t.verticalGridlines.scaledIntervals=[c/r.interval]):d=this.scaleSnapInterval(t,i.scale);for(var m=0,f=0;f<g.length;f+=1)m+=g[parseInt(f.toString(),10)];var y=0;for(f=0;f<u.length;f+=1)y+=u[parseInt(f.toString(),10)];var v={x:-i.tx*i.scale,y:-i.ty*i.scale};hv(o,v),y=a?c:y*d,m=a?h:m*d,v={id:this.diagramId+"_pattern",x:0,y:0,width:y,height:m,patternUnits:"userSpaceOnUse"},hv(l=document.createElementNS("http://www.w3.org/2000/svg","pattern"),v),this.horizontalSvgGridlines(l,y,m,d,t,n,r,a,p,g),this.verticalSvgGridlines(l,y,m,d,t,n,s,a,p,u);var b=e.getElementById(this.diagramId+"_grid_pattern_defn");b&&b.appendChild(l)}},t.prototype.updateLineIntervals=function(t,e,i,n,s){for(var r=[],o=n/i.interval,a=s?i.interval:i.interval+1,l=0;l<2*a;l++)r[parseInt(l.toString(),10)]=l%2==0?s?0===l?1.25:.25:0:s?o-r[l-1]:o;return r},t.prototype.scaleSnapInterval=function(t,e){if(e>=2)for(;e>=2;)e/=2;else if(e<=.5)for(;e<=.5;)e*=2;var i;if(t.horizontalGridlines.scaledIntervals=t.horizontalGridlines.snapIntervals,t.verticalGridlines.scaledIntervals=t.verticalGridlines.snapIntervals,1!==e){var n=t.horizontalGridlines;for(n.scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[parseInt(i.toString(),10)]=n.snapIntervals[parseInt(i.toString(),10)]*e;for((n=t.verticalGridlines).scaledIntervals=[],i=0;i<n.snapIntervals.length;i++)n.scaledIntervals[parseInt(i.toString(),10)]=n.snapIntervals[parseInt(i.toString(),10)]*e}return e},t.prototype.renderTextElement=function(t,e,i,n,s,r){var o=this.getBaseAttributes(t,i);r&&(o.x=r[t.id]?r[t.id].cx:o.x,o.y=r[t.id]?r[t.id].cy:o.y,t.bounds.x=o.x,t.bounds.y=o.y,t.isExport&&(o.x=o.x*Math.min(t.exportScaleValue.x||t.exportScaleValue.y),o.y=o.y*Math.min(t.exportScaleValue.x||t.exportScaleValue.y))),o.cornerRadius=0,o.whiteSpace=Jn(t.style.whiteSpace,t.style.textWrapping),o.content=t.content,o.breakWord=Zn(t.style.textWrapping),o.textAlign=Qn(t.style.textAlign),o.color=t.style.color,o.italic=t.style.italic,o.bold=t.style.bold,o.fontSize=t.style.fontSize,o.fontFamily=t.style.fontFamily,o.textOverflow=t.style.textOverflow,o.textWrapping=t.style.textWrapping,o.textDecoration=t.style.textDecoration,o.doWrap=t.doWrap,o.wrapBounds=t.wrapBounds,o.childNodes=t.childNodes,o.isHorizontalLane=t.isLaneOrientation,o.id=t.id?t.id:Hn(),t.isLaneOrientation&&(o.parentOffsetX=this.groupElement.offsetX,o.parentOffsetY=this.groupElement.offsetY,o.parentWidth=this.groupElement.actualSize.width,o.parentHeight=this.groupElement.actualSize.height),o.dashArray="",o.strokeWidth=0,o.fill=t.style.fill;var a=t.description?t.description:t.content?t.content:t.id;("Wrap"===t.style.textWrapping||"WrapWithOverflow"===t.style.textWrapping)&&this.groupElement&&o.height>this.groupElement.actualSize.height&&("Clip"===t.style.textOverflow||"Ellipsis"===t.style.textOverflow)&&(o.y=o.y+(o.height-this.groupElement.actualSize.height)/2),this.renderer.drawRectangle(e,o,this.diagramId,void 0,void 0,n),this.renderer.drawText(e,o,n,a,this.diagramId,t.isExport&&Math.min(t.exportScaleValue.x||t.exportScaleValue.y),this,t),this.isSvgMode&&(t.doWrap=!1)},t.prototype.renderNativeElement=function(t,e,i,n,s){var r,o,a=this.getParentSvg(t,void 0,e)||n,l=this.getParentElement(t,e,a).g||e,h=this.getBaseAttributes(t,i);switch(h.fill="transparent",h.cornerRadius=t.cornerRadius,h.stroke="transparent",this.renderer.drawRectangle(e,h,this.diagramId,void 0,void 0,n),t.scale){case"None":r=t.contentSize.width,o=t.contentSize.height;break;case"Stretch":r=t.actualSize.width,o=t.actualSize.height;break;case"Meet":r=o=t.actualSize.width<=t.actualSize.height?t.actualSize.width:t.actualSize.height;break;case"Slice":r=o=t.actualSize.width>=t.actualSize.height?t.actualSize.width:t.actualSize.height}this.svgRenderer&&this.svgRenderer.drawNativeContent(t,l,o,r,a)},t.prototype.renderHTMLElement=function(t,e,i,n,s,r,o){var a=this.getBaseAttributes(t,n);a.fill="transparent",a.cornerRadius=t.cornerRadius,a.stroke="transparent",this.renderer.drawRectangle(e,a,this.diagramId,void 0,void 0,s),this.svgRenderer&&this.svgRenderer.drawHTMLContent(t,i.children[0],n,function(t){var e=t.parentElement;do{if(rv(e,"e-diagram"))return!0;e=e.parentElement}while(e);return!1}(i),o)},t.prototype.renderImageElement=function(t,e,i,n,s){var r,o,a,l,h=this.getBaseAttributes(t,i);h.cornerRadius=0,this.renderer.drawRectangle(e,h,this.diagramId,void 0,void 0,n);var c,d=t.contentSize.width,p=t.contentSize.height,u=h.width/d,g=h.height/p;if("Stretch"===t.stretch)r=d*(c=Math.min(u,g)),o=p*c;else switch(t.stretch){case"Meet":r=d*(c=Math.min(u,g)),o=p*c,h.x+=Math.abs(h.width-r)/2,h.y+=Math.abs(h.height-o)/2;break;case"Slice":r=d*(c=Math.max(u,g)),o=p*c,a=h.width/r*d,l=h.height/o*p;break;case"None":r=d,o=p}h.width=r,h.height=o,h.sourceWidth=a,h.sourceHeight=l,h.source=t.source,h.alignment=t.imageAlign,h.scale=t.imageScale,h.description=t.description?t.description:t.id,this.renderer.drawImage(e,h,n,s,this,t)},t.prototype.renderContainer=function(t,e,i,n,s,r,o,a,l,h,c){var d,p={svg:s,g:e},u=document.getElementById(this.diagramId);if(u&&(d=u.ej2_instances[0]),this.diagramId&&(s=this.getParentSvg(t)||s,this.isSvgMode)){var g=this.getParentElement(t,e,s,a).g||e;s=this.getParentSvg(this.hasNativeParent(t.children))||s;var m=this.getParentElement(this.hasNativeParent(t.children),g,s,a);p.svg=m.svg||s,p.g=m.g||g,r?(s&&(s.getElementById(p.g.id)||e.appendChild(p.g)),e=p.g):e=p.g}if(this.renderRect(t,e,n,s),this.groupElement=t,t.hasChildren()){for(var f,y=void 0,v=0,b=t.children;v<b.length;v++){var C=b[v];this.groupElement=t,s=this.getParentSvg(this.hasNativeParent(t.children)||C)||s,this.isSvgMode&&(y=(f=this.getParentElement(this.hasNativeParent(t.children)||C,e,s)).g||e,f.svg&&(s=f.svg)),this.isSvgMode||"Object"===C.relativeMode&&(C.flip=t.flip,C.id&&(C.id.includes("_0_compensation")||C.id.includes("_0_adhoc"))&&t.children[0].flip&&(C.flip=t.children[0].flip));var I=y;this.renderElement(C,y||e,i,n,s,!0,o,a,l,h,c),t.children&&t.children[0]instanceof hr&&(C instanceof Zs||C.elementActions&us.ElementIsPort)&&(I=document.getElementById(C.id+"_groupElement")),C instanceof Zs&&I&&this.renderFlipTextElement(t,I,C,C.flip,C.flipMode)}var M=void 0;d&&d.selectedItems&&d.selectedItems.nodes&&d.selectedItems.nodes.length>0&&(M=d.selectedItems.nodes[0]);var S,x=void 0,w=!1,D=t.id.includes("group_container")?t.id.split("group_container")[0]:t.id;d&&d.selectedItems&&(S=d.getObject(D)),(M=S)&&M.flipMode&&(w=!0);var E="";M&&(E=M.children?M.id+"group_container":M.id+"_content_groupElement"),d instanceof qb&&d.nameTable[""+D]&&"connectors"!==d.nameTable[""+D].propName&&w&&M&&(t.children&&t.children[0]instanceof hr?x=document.getElementById(M.id+"_content_inner_native_element"):t.children&&t.children[0]instanceof sp&&(x=document.getElementById(M.id+"_content_html_element"))||(x=document.getElementById(E)),this.renderFlipElement(t,x,t.flip))}},t.prototype.renderFlipTextElement=function(t,e,i,n,s,r){var o={},a=1,l=1,h=0,c=0,d=0,p=0;if(n!==ss.None){var u=t.rotateAngle;0===t.rotateAngle&&t.id.includes("group_container")&&(u=t.parentTransform);var g=i.getAbsolutePosition(i.desiredSize);if(!g){var m=i.desiredSize;g={x:.5*m.width,y:.5*m.height}}if(g&&""!==i.content)if("All"===s||"LabelAndLabelText"===s){if(n!==ss.Horizontal&&n!==ss.Both||(h=t.bounds.center.x,d=-t.bounds.center.x,a=-1),n!==ss.Vertical&&n!==ss.Both||(c=t.bounds.center.y,p=-t.bounds.center.y,l=-1),n===ss.Horizontal||n===ss.Vertical){var f=Math.sin(u*Math.PI/180);if(void 0!==g.y&&!isNaN(g.y)){var y=g.y/i.desiredSize.height;isNaN(y)||(d+=-t.desiredSize.height*f*(-2*y+1))}if(void 0!==g.x&&!isNaN(g.x)){var v=g.x/i.desiredSize.width;isNaN(v)||(p+=t.desiredSize.width*f*(-2*v+1))}}o={transform:"translate("+h+","+c+") scale("+a+","+l+") translate("+d+","+p+")"}}else if("LabelText"===s||"PortAndLabelText"===s)n!==ss.Horizontal&&n!==ss.Both||(h=i.offsetX,d=-i.offsetX,a=-1),n!==ss.Vertical&&n!==ss.Both||(c=i.offsetY,p=-i.offsetY,l=-1),o={transform:"translate("+h+","+c+") scale("+a+","+l+") translate("+d+","+p+")"};else if("PortAndLabel"===s||"Label"===s){var b=this.flipLabel(t,i,g,n);o={transform:"translate("+(b.x-i.offsetX)+","+(b.y-i.offsetY)+")"}}}else o={transform:"translate(0,0)"};return r?o:(this.setFlipAttributes(t,e,o,a,l,!1),{})},t.prototype.renderFlipElement=function(t,e,i,n){var s={},r=1,o=1,a=0,l=0,h=0,c=0;i!==ss.None?(i!==ss.Horizontal&&i!==ss.Both||(a=t.bounds.center.x,h=-t.bounds.center.x,r=-1),i!==ss.Vertical&&i!==ss.Both||(l=t.bounds.center.y,c=-t.bounds.center.y,o=-1),s={transform:"translate("+a+","+l+") scale("+r+","+o+") translate("+h+","+c+")"}):s={transform:"translate(0,0)"};var d=t&&t.children&&t.children.length&&t.children[0]instanceof sp;return n?s:(this.setFlipAttributes(t,e,s,r,o,d),{})},t.prototype.setFlipAttributes=function(t,e,i,n,s,r){if(i)if(r){var o=e.id.split("_preview");e=(document.getElementById(o[0]+"_html_div")||ev(this.diagramId).children[0]).querySelector("#"+t.id+"_content_html_element");var a=t.flip===ss.None||t.flip===ss.Both?1:-1;e&&(e.style.transform="scale("+n+","+s+")rotate("+(a*t.rotateAngle+t.parentTransform)+"deg)")}else hv(e,i)},t.prototype.flipLabel=function(t,e,i,n){var s;if(n!==ss.None){var r=void 0,o=void 0,a={x:t.offsetX-t.desiredSize.width/2,y:t.offsetY-t.desiredSize.height/2};r=a.x+t.desiredSize.width*(i.x/e.desiredSize.width),o=a.y+t.desiredSize.height*(i.y/e.desiredSize.height),n!==ss.Both&&n!==ss.Horizontal||(r=a.x+t.desiredSize.width*(1-i.x/e.desiredSize.width)),n!==ss.Both&&n!==ss.Vertical||(o=a.y+t.desiredSize.height*(1-i.y/e.desiredSize.height)),s={x:r,y:o},s=ts(t.rotateAngle+t.parentTransform,t.offsetX,t.offsetY,s)}return s},t.prototype.hasNativeParent=function(t,e){if(t&&t.length>0){var i=t[0];if(i instanceof hr)return i;i.children&&i.children.length&&this.hasNativeParent(i.children,e++||0)}},t.prototype.renderRect=function(t,e,i,n,s){var r=this.getBaseAttributes(t,i,s);r.cornerRadius=t.cornerRadius||0,t.isExport&&(r.cornerRadius*=t.exportScaleValue.x);var o=t.description?t.description:t.id;this.renderer.drawRectangle(e,r,this.diagramId,t.isExport,void 0,n,o,void 0,void 0,this,t)},t.prototype.drawRect=function(t,e){e.cornerRadius=0,this.svgRenderer.drawRectangle(t,e,this.diagramId)},t.prototype.getBaseAttributes=function(t,e,i){var n={width:t.actualSize.width,height:t.actualSize.height,x:t.offsetX-t.actualSize.width*t.pivot.x,y:t.offsetY-t.actualSize.height*t.pivot.y,fill:t.style.fill,stroke:t.style.strokeColor,angle:t.rotateAngle+t.parentTransform,pivotX:t.pivot.x,pivotY:t.pivot.y,strokeWidth:t.style.strokeWidth,dashArray:t.style.strokeDashArray||"",opacity:t.style.opacity,shadow:t.shadow,gradient:t.style.gradient,visible:t.visible,id:t.id,description:t.description,canApplyStyle:t.canApplyStyle,shapeType:t.shapeType};return"Page"===t.rotationReference&&(n.angle=t.rotateAngle),i&&(n.x=n.x-.5,n.y=n.y-.5),t.isExport&&(n.width*=t.exportScaleValue.x,n.height*=t.exportScaleValue.y,n.x*=t.exportScaleValue.x,n.y*=t.exportScaleValue.y,n.strokeWidth*=t.exportScaleValue.x),t.flip&&(n.flip=t.flip,(t.flip===ss.Horizontal||t.flip===ss.Vertical)&&t instanceof Ks&&!this.isSvgMode&&(n.isImage=!0)),t.flipMode&&(n.flipMode=t.flipMode),e&&(n.x+=e.tx,n.y+=e.ty),n},t.renderSvgBackGroundImage=function(t,e,i,n,s,r){if(t.source){var o=Jy(e.id).getElementById(e.id+"_image");if(!o){var a=function(t){var e=Yy(t),i=e.getElementsByClassName("e-background-image-layer");return i[0]}(e.id);(o=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("id",e.id+"_image"),a.appendChild(o)}var l=new Image;l.src=t.source,o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l.src.toString());var h="None"!==t.scale?t.scale:"",c=t.align,d=c.charAt(0).toLowerCase()+c.slice(1);h&&(d+=" "+h.charAt(0).toLowerCase()+h.slice(1)),hv(o,{id:e.id+"_image",x:i,y:n,width:s,height:r,preserveAspectRatio:d})}},t.prototype.transformLayers=function(t,e){var i=t.tx*t.scale,n=t.ty*t.scale,s="domTable";if(i!==this.transform.x||n!==this.transform.y||0===i||0===n){if(e)window[""+s][this.diagramId+"_diagramLayer"]||(window[""+s][this.diagramId+"_diagramLayer"]=this.diagramSvgLayer.getElementById(this.diagramId+"_diagramLayer")),window[""+s][this.diagramId+"_diagramLayer"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")");var r=function(t){var e="domTable",i=null;if(window[e][t+"_gridline"])i=window[e][t+"_gridline"];else{i=Ky(t).getElementById(t+"_gridline"),window[e][t+"_gridline"]=i}return i}(this.diagramId);return r.setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+")"),window[""+s][this.diagramId+"_diagramPorts"]||(window[""+s][this.diagramId+"_diagramPorts"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramPorts")),window[""+s][this.diagramId+"_diagramPorts"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),window[""+s][this.diagramId+"_diagramExpander"]||(window[""+s][this.diagramId+"_diagramExpander"]=this.iconSvgLayer.getElementById(this.diagramId+"_diagramExpander")),window[""+s][this.diagramId+"_diagramExpander"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),window[""+s][this.diagramId+"_nativeLayer"]||(window[""+s][this.diagramId+"_nativeLayer"]=this.nativeSvgLayer.getElementById(this.diagramId+"_nativeLayer")),window[""+s][this.diagramId+"_nativeLayer"].setAttribute("transform","translate("+t.tx*t.scale+","+t.ty*t.scale+"),scale("+t.scale+")"),ev(this.diagramId).children[0].style.transform="translate("+t.tx*t.scale+"px,"+t.ty*t.scale+"px)scale("+t.scale+")",this.transform={x:t.tx*t.scale,y:t.ty*t.scale},!0}return!1},t.prototype.updateNode=function(t,e,i,n,s,r,o){this.renderElement(t,e,i,n,this.getParentSvg(t),void 0,void 0,s,null,r,o)},t}(),lm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hm=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},cm=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.mode="Canvas",n.id="overview",n.actionName="",n.startPoint=null,n.currentPoint=null,n.prevPoint=null,n.scale=null,n.inAction=!1,n.viewPortRatio=1,n.horizontalOffset=0,n.verticalOffset=0,n.model={},n.event=!0,n.overviewid=88123,n.prevTransform="",n.model={width:n.width,height:n.height},n}return lm(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"sourceID":this.setParent(t.sourceID);break;case"width":case"height":this.renderCanvas(),this.setParent(this.sourceID)}}},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-overview").length;this.element.id="overview_"+this.overviewid+"_"+t}this.id=this.element.id?this.element.id:this.id,this.element.style.background="transparent",this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-overview")},e.prototype.render=function(){this.diagramRenderer=new am(this.element.id,new om,!1),this.renderCanvas(),this.setParent(this.sourceID),this.renderComplete()},e.prototype.getSizeValue=function(t){return t.toString().indexOf("px")>0||t.toString().indexOf("%")>0?t.toString():t.toString()+"px"},e.prototype.renderCanvas=function(t){var e=document.getElementById(this.element.id+"_canvas");e||(e=iv("div",{}),this.element.appendChild(e)),dv(e,{id:this.element.id+"_canvas",class:"drawing",style:"position:relative; height:"+this.getSizeValue(this.model.height)+"; width:"+this.getSizeValue(this.model.width)+";style:-ms-touch-action: none;touch-action: none;"}),this.element.setAttribute("tabindex",String(-1)),this.element.style.overflow="hidden",this.element.style.height=String(this.model.height),this.element.style.width=String(this.model.width),this.canvas=e},e.prototype.setParent=function(t){var e=document.getElementById(t);if(this.parent){var i=this.parent;this.parent=null,i.setOverview(null,this.element.id),this.removeDocument(this)}this.parent=this.getDiagram(e,"ej2_instances"),this.parent&&this.parent.setOverview(this)},e.prototype.getDiagram=function(t,e){for(var i,n=t[""+e].length,s=0;s<n;s++)if(rv(t[""+e][parseInt(s.toString(),10)].element,"e-diagram")){i=t[""+e][parseInt(s.toString(),10)];break}return i},e.prototype.unWireEvents=function(){var t=G.touchStartEvent,e=G.touchMoveEvent,i=G.isPointer?"pointerleave":"mouseleave",n=G.touchEndEvent;K.remove(this.element,t,this.mouseDown),K.remove(this.element,e,this.mouseMove),K.remove(this.element,n,this.mouseUp),K.remove(this.element,i,this.documentMouseUp),K.remove(window,"resize",this.windowResize);var s=document.getElementById(this.sourceID+"content");s&&K.remove(s,"scroll",this.scrolled)},e.prototype.wireEvents=function(){var t=G.touchStartEvent,e=G.touchEndEvent,i=G.touchMoveEvent,n=G.isPointer?"pointerleave":"mouseleave";K.add(this.element,t,this.mouseDown,this),K.add(this.element,i,this.mouseMove,this),K.add(this.element,e,this.mouseUp,this),K.add(this.element,n,this.documentMouseUp,this),K.add(window,"resize",this.windowResize,this);var s=document.getElementById(this.sourceID+"content");s&&K.add(s,"scroll",this.scrolled,this)},e.prototype.initializeOverviewLayers=function(){this.htmlLayer=document.getElementById(this.element.id+"_htmlLayer"),this.overviewLayer=document.getElementById(this.element.id+"_overviewlayer"),this.diagramCanvas=document.getElementById(this.element.id+"_diagramLayer"),this.nativeLayer=tv(this.element.id),this.context2d=this.diagramCanvas.getContext("2d")},e.prototype.renderDocument=function(t){t.canvas=this.canvas;var e=document.getElementById(this.canvas.id+"_svg");e&&e.parentNode.removeChild(e);var i=nv("svg",{id:this.canvas.id+"_svg",version:"1.1",class:"overview_svg"});this.svg=i,t.svg=i,t.canvas.appendChild(i);var n=document.getElementById(this.element.id),s=n.clientWidth||n.offsetWidth,r=n.clientHeight||n.offsetHeight,o=n.getBoundingClientRect(),a=window.screenX<0?-1*window.screenX:window.screenX,l=window.screenY<0?-1*window.screenY:window.screenY;if(0===s){var h=Math.floor(window.innerWidth-a-Math.floor(o.left));s=h>0?h:Math.floor(window.innerWidth)}if(0===r){var c=Math.floor(window.innerHeight-l-Math.floor(o.top));r=c>0?c:Math.floor(window.innerHeight)}s>0&&(i.setAttribute("width",String(s)),this.model.height=r),r>0&&(i.setAttribute("height",String(r)),this.model.width=s),t.diagramLayerDiv||(t.diagramLayerDiv=iv("div",{}),t.diagramLayer=vv.createCanvas(this.element.id+"_diagramLayer",this.model.width,this.model.height),t.diagramLayer.style.position="absolute",t.diagramLayer.style.left="0px",t.diagramLayer.style.top="0px",t.diagramLayerDiv.appendChild(t.diagramLayer),t.canvas.appendChild(t.diagramLayerDiv));var d={id:this.element.id+"_diagramLayer_div",style:"width:"+this.model.width+"px; height:"+this.model.height+"px;position:absolute;top:0px;left:0px"};dv(t.diagramLayerDiv,d),this.renderHtmlLayer(t.canvas),this.renderNativeLayer(t.canvas,t),this.addOverviewRectPanel(t)},e.prototype.removeDocument=function(t){var e=document.getElementById(this.canvas.id+"_svg");this.canvas.removeChild(e);var i=document.getElementById(this.element.id+"_htmlLayer");this.canvas.removeChild(i);var n=document.getElementById(this.element.id+"_diagramLayer_div");this.canvas.removeChild(n),t.diagramLayerDiv=null,t.diagramLayer=null;window.domTable[this.id+"html_layer"]=null},e.prototype.renderHtmlLayer=function(t){var e=iv("div",{id:this.element.id+"_htmlLayer",class:"e-html-layer",style:"pointer-events:none;position:absolute;top:0px;left:0px;"}),i=iv("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;"});return e.appendChild(i),t.appendChild(e),e},e.prototype.renderNativeLayer=function(t,e){if(!document.getElementById(this.element.id+"_nativeLayer_svg")){var i=this.parent.createSvg(this.element.id+"_nativeLayer_svg",this.model.width,this.model.height),n=nv("g",{id:this.element.id+"_nativeLayer"});i.appendChild(n),e.diagramLayerDiv.appendChild(i),hv(i,{class:"e-native-layer"})}},e.prototype.addOverviewRectPanel=function(t){var e=document.getElementById(this.canvas.id+"_overviewsvg");e&&e.parentNode.removeChild(e),e=nv("svg",{id:this.canvas.id+"_overviewsvg",class:"overviewsvg",version:"1.1",style:"position:absolute;left:0px;top:0px; aria-label:Specifies overview",width:this.model.width,height:this.model.height}),t.canvas.appendChild(e);var i=nv("g",{id:this.element.id+"_overviewlayer",style:"pointer-events:none"});e.appendChild(i);var n=nv("rect",{fill:"transparent",width:"100%",height:"100%",class:"overviewbackrect",id:this.canvas.id+"overviewbackrect"});n.style.pointerEvents="none",i.appendChild(n);var s=nv("g",{id:this.canvas.id+"overviewhandle",style:"pointer-events:all"});i.appendChild(s);var r=nv("rect",{id:this.canvas.id+"overviewrect",fill:"transparent"});s.appendChild(r),this.renderOverviewCorner("left",s),this.renderOverviewCorner("right",s),this.renderOverviewCorner("top",s),this.renderOverviewCorner("bottom",s),this.renderOverviewCorner("topleft",s),this.renderOverviewCorner("topright",s),this.renderOverviewCorner("bottomleft",s),this.renderOverviewCorner("bottomright",s)},e.prototype.renderOverviewCorner=function(t,e){this.svg;var i,n=nv(i="top"===t||"bottom"===t||"right"===t||"left"===t?"rect":"circle",{id:this.canvas.id+"visible"+t,class:"overview-resizer"});e.appendChild(n);var s=nv(i,{id:this.canvas.id+t,class:"overviewresizer",fill:"transparent"});e.appendChild(s)},e.prototype.updateOverviewRectangle=function(){var t=this.currentPoint.x-this.prevPoint.x,e=this.currentPoint.y-this.prevPoint.y,i=new un;i.width=0,i.height=0;var n=0,s=0;switch(this.resizeDirection){case"left":i.width-=t,i.height-=t/this.viewPortRatio,n=t,s=t/this.viewPortRatio,s/=2;break;case"right":i.width+=t,i.height+=t/this.viewPortRatio,s=t/this.viewPortRatio,s/=-2;break;case"top":i.height-=e,i.width-=e*this.viewPortRatio,s=e,n=e*this.viewPortRatio,n/=2;break;case"bottom":i.height+=e,i.width+=e*this.viewPortRatio,n=e*this.viewPortRatio,n/=-2;break;case"topleft":Math.abs(e)>Math.abs(t)?t=e*this.viewPortRatio:e=t/this.viewPortRatio,i.width-=t,i.height-=e,n=t,s=e;break;case"topright":Math.abs(e)>Math.abs(t)?t=-e*this.viewPortRatio:e=-t/this.viewPortRatio,s=e,i.width+=t,i.height-=e;break;case"bottomleft":Math.abs(e)>Math.abs(t)?t=-e*this.viewPortRatio:e=-t/this.viewPortRatio,n=t,i.width-=t,i.height+=e;break;case"bottomright":Math.abs(e)>Math.abs(t)?t=e*this.viewPortRatio:e=t/this.viewPortRatio,i.width+=t,i.height+=e}this.updateHelper(n,s,i,undefined,undefined)},e.prototype.updateHelper=function(t,e,i,n,s){var r,o,a,l=this.element.getElementsByTagName("svg")[2].getElementById("helper");if(i)r=(a=l.getBBox()).x+t,o=a.y+e,n=a.width+i.width,s=a.height+i.height;else{var h,c;h=this.currentPoint.x>this.startPoint.x?this.currentPoint.x-this.prevPoint.x:this.prevPoint.x-this.currentPoint.x,c=this.currentPoint.y>this.startPoint.y?this.currentPoint.y-this.prevPoint.y:this.prevPoint.y-this.currentPoint.y;Math.abs(c)>Math.abs(h)?(h=this.viewPortRatio*c,!1):(c=h/this.viewPortRatio,!1),a=l.getBBox(),r=this.startPoint.x>this.currentPoint.x?a.x-h:a.x,o=this.startPoint.y>this.currentPoint.y?a.y-c:a.y,n=a.width+h,s=a.height+c}hv(this.helper,{id:this.helper.id,x:r,y:o,width:Math.max(0,n),height:Math.max(0,s)})},e.prototype.updateOverviewrect=function(t,e,i,n){dv(document.getElementById(this.canvas.id+"overviewrect"),{x:t,y:e,width:Math.max(1,i),height:Math.max(1,n)}),this.updateOverviewCorner("top",t+8,e+1,Math.max(0,i-16),2),this.updateOverviewCorner("bottom",t+8,e+n+3,Math.max(0,i-16),2),this.updateOverviewCorner("left",t-2,e+11,2,Math.max(0,n-16)),this.updateOverviewCorner("right",t+i,e+11,2,Math.max(0,n-16)),this.updateOverviewCorner("topleft",t,e+3,5,5),this.updateOverviewCorner("topright",t+i,e+3,5,5),this.updateOverviewCorner("bottomleft",t,e+n+3,5,5),this.updateOverviewCorner("bottomright",t+i,e+n+3,5,5)},e.prototype.updateOverviewCorner=function(t,e,i,n,s){var r,o,a="visible"+t;"top"===t||"bottom"===t||"right"===t||"left"===t?(r={x:e,y:i,width:n,height:s,fill:"#ED1C24"},o={x:e-2,y:i-2,width:2===n?4:n,height:2===s?4:s}):(r={cx:e,cy:i,r:4,fill:"#ED1C24"},o={cx:e,cy:i,r:6,fill:"transparent"}),dv(document.getElementById(this.canvas.id+a),r),dv(document.getElementById(this.canvas.id+t),o)},e.prototype.translateOverviewRectangle=function(){Number(this.model.width),Number(this.model.height);var t=this.currentPoint.x-this.prevPoint.x,e=this.currentPoint.y-this.prevPoint.y,i=this.element.getElementsByClassName("overviewsvg")[0].getElementById(this.canvas.id+"overviewrect").getBBox(),n=i.x+t,s=i.y+e,r=i.width,o=i.height;this.updateOverviewrect(n,s,r,o),this.updateParentView(this.parent.scroller.currentZoom,n,s,r,o,null)},e.prototype.renderOverviewRect=function(t,e,i,n){var s=Number(this.model.width),r=Number(this.model.height),o=i/s*this.contentWidth,a=n/r*this.contentHeight,l=Math.max(this.parent.scroller.viewPortWidth/o,this.parent.scroller.viewPortHeight/a);if(l>=.25&&l<=30){this.updateParentView(l,t,e,i,n,{x:0,y:0});var h=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);if(this.helper){var c=this.element.getElementsByTagName("rect")[10].getBBox();h.x=c.x,h.y=c.y}"pan"===this.actionName?this.updateOverviewrect(-h.x,-h.y,h.width,h.height):this.updateOverviewrect(h.x,h.y,h.width,h.height)}},e.prototype.scrollOverviewRect=function(t,e,i,n){if(!this.actionName||n){var s=Number(this.model.width),r=Number(this.model.height),o=Math.min(this.contentWidth/s,this.contentHeight/r),a=new Tn,l=a.x=t/i/o,h=a.y=e/i/o,c=0;this.parent.rulerSettings.showRulers&&(c=25);var d=document.getElementById(this.parent.element.id+"content"),p=0,u=0;d&&(p=d.offsetWidth-d.clientWidth,u=d.offsetHeight-d.clientHeight);var g=a.width=(this.parent.scroller.viewPortWidth-c-p)/i/o,m=a.height=(this.parent.scroller.viewPortHeight-c-u)/i/o;if(n){var f=new Tn;return f.x=l,f.y=h,f.width=g,f.height=m,f}this.updateOverviewrect(-l,-h,g,m)}return null},e.prototype.updateParentView=function(t,e,i,n,s,r){var o,a,l=Number(this.model.width),h=Number(this.model.height),c=e*(this.contentWidth/l)*t,d=i*(this.contentHeight/h)*t;this.parent.scroller.getPageBounds();1===t&&"pan"!==this.actionName||(o=-c-this.parent.scroller.horizontalOffset,a=-d-this.parent.scroller.verticalOffset),this.parent.setBlazorDiagramProps(!0),this.parent.realActions|=Ss.OverViewAction;"scale"===this.actionName||"draw"===this.actionName?this.parent.scroller.zoom(t/this.parent.scroller.currentZoom,o,a,r):x()?this.parent.scroller.zoom(1,o,a,r):this.parent.pan(o,a,r,!0)},e.prototype.updateHtmlLayer=function(t){var e=ev(t.element.id),i=this.parent.scroller.getPageBounds(!0),n=i.width,s=i.height,r=Math.max(n,this.parent.scroller.viewPortWidth),o=Math.max(s,this.parent.scroller.viewPortHeight/this.parent.scroller.currentZoom),a=Math.min(Number(this.model.width)/r,Number(this.model.height)/o);e.style.transform="scale("+a+") translate("+this.parent.scroller.transform.tx+"px,"+this.parent.scroller.transform.ty+"px)"},e.prototype.updateView=function(t){var e=this.parent.scroller.getPageBounds(),i=e.width,n=e.height,s=Number(this.model.width),r=Number(this.model.height),o=Math.max(i,this.parent.scroller.viewPortWidth),a=Math.max(n,this.parent.scroller.viewPortHeight);this.contentWidth=o=Math.max(o,s/r*a),this.contentHeight=a=Math.max(a,r/s*o);var l=Math.min(s/o,r/a),h="scale("+l+") translate("+-e.x+"px, "+-e.y+"px)";h===this.prevTransform&&this.htmlLayer.style.transform||(this.htmlLayer.style.transform=h,this.htmlLayer.style.webkitTransform=h,this.prevTransform=h),this.overviewLayer.setAttribute("transform","translate("+-e.x*l+","+-e.y*l+")"),this.horizontalOffset=e.x*l,this.verticalOffset=e.y*l;var c=Number(this.model.width)/this.contentWidth,d=Number(this.model.height)/this.contentHeight;c=Math.min(c,d);var p=this.parent.scroller.transform,u=p.tx,g=p.ty;this.nativeLayer.setAttribute("transform","translate("+u*c+","+g*d+"),scale("+c+")"),this.context2d.setTransform(c,0,0,c,0,0),this.context2d.fillStyle="red",this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom)},e.prototype.scrolled=function(t){if(this.event){var e=this.scrollOverviewRect(this.parent.scroller.horizontalOffset,this.parent.scroller.verticalOffset,this.parent.scroller.currentZoom,!0);this.updateOverviewrect(-e.x,-e.y,e.width,e.height),this.updateView(this)}},e.prototype.updateCursor=function(t){if(rv(t.target,"overviewresizer"))switch(t.target.id){case this.canvas.id+"left":this.canvas.style.cursor="w-resize";break;case this.canvas.id+"right":this.canvas.style.cursor="e-resize";break;case this.canvas.id+"top":this.canvas.style.cursor="n-resize";break;case this.canvas.id+"bottom":this.canvas.style.cursor="s-resize";break;case this.canvas.id+"topleft":this.canvas.style.cursor="nw-resize";break;case this.canvas.id+"topright":this.canvas.style.cursor="ne-resize";break;case this.canvas.id+"bottomleft":this.canvas.style.cursor="sw-resize";break;case this.canvas.id+"bottomright":this.canvas.style.cursor="se-resize"}else this.canvas.style.cursor="default"},e.prototype.mouseMove=function(t){if(this.event=!1,this.updateCursor(t),this.currentPoint=this.mousePosition(t),this.actionName)switch(this.actionName){case"draw":this.inAction||this.startPoint.x===this.currentPoint.x&&this.startPoint.y===this.currentPoint.y||(this.initHelper(),this.inAction=!0),this.inAction&&this.updateHelper();break;case"scale":this.inAction||(this.initHelper(),this.inAction=!0),this.updateOverviewRectangle();break;case"pan":(this.startPoint.x!==this.currentPoint.x||this.startPoint.y===this.currentPoint.y||this.inAction)&&(this.inAction=!0,this.translateOverviewRectangle())}this.prevPoint=this.currentPoint},e.prototype.documentMouseUp=function(t){this.inAction=!1,this.actionName="",this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},e.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){var t=document.getElementById(e.element.id).getBoundingClientRect();e.model.width=t.width>0?t.width:e.model.width,e.model.height=t.height>0?t.height:e.model.height,e.renderCanvas(),e.setParent(e.sourceID)},10),!1},e.prototype.mouseDown=function(t){if(t.target.id===this.canvas.id+"_overviewsvg"&&(this.actionName="draw"),t.target.id===this.canvas.id+"overviewrect"&&(this.actionName="pan"),rv(t.target,"overviewresizer"))switch(this.actionName="scale",t.target.id){case this.canvas.id+"left":this.resizeDirection="left";break;case this.canvas.id+"right":this.resizeDirection="right";break;case this.canvas.id+"top":this.resizeDirection="top";break;case this.canvas.id+"bottom":this.resizeDirection="bottom";break;case this.canvas.id+"topleft":this.resizeDirection="topleft";break;case this.canvas.id+"topright":this.resizeDirection="topright";break;case this.canvas.id+"bottomleft":this.resizeDirection="bottomleft";break;case this.canvas.id+"bottomright":this.resizeDirection="bottomright"}this.startPoint=this.prevPoint=this.mousePosition(t),this.viewPortRatio=this.parent.scroller.viewPortWidth/this.parent.scroller.viewPortHeight,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="none"},e.prototype.mouseUp=function(t){if(this.currentPoint=this.mousePosition(t),this.actionName)if(this.startPoint.x!==this.currentPoint.x||this.startPoint.y!==this.currentPoint.y){if("pan"===this.actionName);else if(this.helper){var e=this.element.getElementsByTagName("rect")[10].getBBox();this.resizeDirection=this.resizeDirection||"";var i=e.x,n=e.y,s=e.width,r=e.height;"topleft"===this.resizeDirection||"topright"===this.resizeDirection||"bottomleft"===this.resizeDirection||this.resizeDirection;this.renderOverviewRect(i,n,s,r)}}else if(t.target.id===this.canvas.id+"_overviewsvg"||"helper"===t.target.id){s=(e=this.element.getElementsByTagName("svg")[2].getElementById(this.canvas.id+"overviewrect").getBBox()).width,r=e.height;this.inAction=!0,this.actionName="pan",this.renderOverviewRect(this.currentPoint.x-s/2,this.currentPoint.y-r/2,s,r),this.inAction=!1}this.helper&&(this.helper.parentNode.removeChild(this.helper),this.helper=null),this.actionName="",this.startPoint=null,this.currentPoint=null,this.prevPoint=null,this.helper=null,this.viewPortRatio=1,this.resizeDirection="",this.inAction=!1,this.event=!0,document.getElementById(this.canvas.id+"overviewhandle").style.pointerEvents="all"},e.prototype.initHelper=function(){var t=this.element.getElementsByTagName("svg")[2],e=this.startPoint.x,i=this.startPoint.y,n=1,s=1;if("scale"===this.actionName){var r=t.getElementById(this.canvas.id+"overviewrect").getBBox();e=r.x,i=r.y,n=r.width,s=r.height}var o=nv("rect",{id:"helper",x:e,y:i,width:n,height:s,fill:"transparent",stroke:"gray","stroke-dasharray":"2 2","shape-rendering":"crispEdges"});t.getElementById(this.element.id+"_overviewlayer").appendChild(o),this.helper=o},e.prototype.mousePosition=function(t){var e,i,n;if(-1!==t.type.indexOf("touch")){var s=(e=t).changedTouches[0].clientX,r=e.changedTouches[0].clientY;i=s-this.element.offsetLeft,n=r-this.element.offsetTop}else i=t.clientX,n=t.clientY;var o=this.element.getBoundingClientRect();return i-=o.left,n-=o.top,{x:i+this.horizontalOffset,y:n+this.verticalOffset}},e.prototype.destroy=function(){if(this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),document.getElementById(this.element.id)){this.element.classList.remove("e-overview");var e=document.getElementById(this.element.id+"_canvas");e&&this.element.removeChild(e)}this.parent.views.splice(this.parent.views.indexOf(this.element.id),1),this.diagramLayerDiv=null,this.canvas=null,this.parent=null},e.prototype.getModuleName=function(){return"Overview"},hm([jt("100%")],e.prototype,"width",void 0),hm([jt("100%")],e.prototype,"height",void 0),hm([jt("")],e.prototype,"sourceID",void 0),hm([Ut()],e.prototype,"created",void 0),e}(_e);function dm(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].id===e)return!0;return!1}function pm(t,e){e instanceof Ny&&(t.shape.header||(e.shape.hasHeader=!1))}function um(t,e,i,n){return n=e?n:void 0!==t[i-1]?t[i-1]+n:0}function gm(t,e){var i=[];if(e)i=t;else{for(var n=0;n<t.length;n++)i.push(t[parseInt(n.toString(),10)]);i.push(t[i.length-2]),i.push(t[i.length-2])}return i}function mm(t,e){if(e instanceof Ny)switch(t.shape.shape){case"JoinNode":t.width||(e.width=20),t.height||(e.height=90),t.style&&t.style.fill||(e.style.fill="black");break;case"ForkNode":t.width||(e.width=90),t.height||(e.height=20),t.style&&t.style.fill||(e.style.fill="black");break;case"InitialNode":case"FinalNode":t.style&&t.style.fill||(e.style.fill="black")}else switch(t.shape.flow){case"Object":t.style&&t.style.strokeDashArray||(e.style.strokeDashArray="8 4"),t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow");break;case"Control":t.style&&t.style.strokeWidth||(e.style.strokeWidth=2),t.targetDecorator&&t.targetDecorator.shape||(e.targetDecorator.shape="OpenArrow"),t.sourceDecorator&&t.sourceDecorator.shape||(e.sourceDecorator.shape="None")}}function fm(t,e){switch(t.shape.type){case"Bpmn":switch(t.shape.flow){case"Sequence":("Normal"===t.shape.sequence&&"Bezier"!==t.type||"Default"===t.shape.sequence||"Conditional"===t.shape.sequence)&&(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"Conditional"===t.shape.sequence&&e.sourceDecorator&&(e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||20,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.width||10));break;case"Association":"Default"!==t.shape.association&&"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"black"),"BiDirectional"===t.shape.association&&e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white",e.sourceDecorator.width=t.sourceDecorator&&t.sourceDecorator.width||5,e.sourceDecorator.height=t.sourceDecorator&&t.sourceDecorator.height||10));break;case"Message":e.style&&!e.style.strokeDashArray&&(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")}break;case"UmlActivity":if("Exception"===t.shape.flow)"Directional"!==t.shape.association&&"BiDirectional"!==t.shape.association||(e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"2 2");break;case"UmlClassifier":var i=!1;"Association"===t.shape.relationship?i=!0:"Inheritance"===t.shape.relationship?(e.targetDecorator&&e.targetDecorator.style&&(e.targetDecorator.style.fill=t.targetDecorator&&t.targetDecorator.style&&t.targetDecorator.style.fill||"white"),e.style&&(i=!0,e.style.strokeDashArray=t.style&&t.style.strokeDashArray||"4 4")):"Composition"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"black"),i=!0):"Aggregation"===t.shape.relationship||void 0===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0):"Dependency"===t.shape.relationship?(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0,e.style.strokeDashArray="4 4"):"Realization"===t.shape.relationship&&(e.sourceDecorator&&e.sourceDecorator.style&&(e.sourceDecorator.style.fill=t.sourceDecorator&&t.sourceDecorator.style&&t.sourceDecorator.style.fill||"white"),i=!0),i&&(e.style.strokeWidth=t.style&&t.style.strokeWidth||2)}}function ym(t,e,i){var n;n=fn.findLength(e,t)>fn.findLength(i,t)?i:e;var s=fn.findAngle(e,i),r=fn.findAngle(n,t),o=fn.findLength(n,t),a=r+2*(s-r);return{x:n.x+o*Math.cos(a*Math.PI/180),y:n.y+o*Math.sin(a*Math.PI/180)}}function vm(t,e,i){if(t&&t.children&&t.children.length>0)for(var n=void 0,s=0;s<t.children.length;s++)return(n=i[t.children[parseInt(s.toString(),10)]]).shape.type===e||vm(n,e,i);return!1}function bm(t,e,i,n,s){if(i&&(t instanceof Rg||t&&(t.shape&&"SwimLane"!==t.shape.type||void 0===t.shape)))for(var r=void 0,o=0,a=Object.keys(i);o<a.length;o++){var l=a[o];if(r=i[""+l],"shape"===l&&r.type&&(t.shape={type:r.type}),r)if(Array.isArray(r)&&r.length&&r.length>0&&"annotations"!==s&&"ports"!==s)if(t[""+l].length>0)for(var h=0;h<=t[""+l].length;h++)bm(t[""+l],e?e[""+l]:void 0,i[""+l],"annotations"===l||"ports"===l?t:void 0,l);else bm(t[""+l],e?e[""+l]:void 0,i[""+l],"annotations"===l||"ports"===l?t:void 0,l);else if(r instanceof Object&&e&&"annotations"!==s&&"ports"!==s)bm(t[""+l],e[""+l],i[""+l]);else if("annotations"!==s&&"ports"!==s&&e&&!e[""+l]||!e&&t&&(t[""+l]||void 0!==t[""+l]))t[""+l]=i[""+l];else{var c=void 0;"annotations"!==s&&"ports"!==s||("annotations"===s?(t[""+l]&&bm(t[""+l],e[""+l],i[""+l]),t[""+l]||(df(n)===Rg?(c=new Gc(n,"annotations",i[""+l]),n.annotations.push(c)):(c=new Xc(n,"annotations",i[""+l]),n.annotations.push(c)))):t[""+l]?bm(t[""+l],e[""+l],i[""+l]):(c=new Wc(n,"ports",i[""+l]),n.ports.push(c)))}}}function Cm(t,e){for(var i="Bezier"===t.type?function(t){var e=[];if("Bezier"===t.type)for(var i=0,n=0;n<t.segments.length;n++)for(var s=t.segments[parseInt(n.toString(),10)],r=fn.isEmptyPoint(s.point1)?s.bezierPoint1:s.point1,o=fn.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,a=Number((t.distance(r,s.points[0])+t.distance(o,r)+t.distance(s.points[1],o))/1.5),l=0;l<a-1;l+=10)e[parseInt(i.toString(),10)]=Pg(0,s.points[0],fn.isEmptyPoint(s.point1)?s.bezierPoint1:s.point1,fn.isEmptyPoint(s.point2)?s.bezierPoint2:s.point2,s.points[1],l,a),i++;return e}(t):t.intermediatePoints,n=0;n<i.length-1;n++){var s=i[parseInt(n.toString(),10)],r=i[n+1],o=Tn.toBounds([s,r]);if(o.Inflate(t.hitPadding),o.containsPoint(e)){var a=ym(e,s,r),l=Im({x1:s.x,x2:r.x,y1:s.y,y2:r.y},{x1:e.x,x2:a.x,y1:e.y,y2:a.y});if(l.enabled){var h=fn.findLength(e,l.intersectPt);if(Math.abs(h)<t.hitPadding)return!0}else{var c=Tn.toBounds([e,e]);if(c.Inflate(3),c.containsPoint(s)||c.containsPoint(r))return!0}if(fn.equals(e,a))return!0}}if(t.annotations.length>0||t.ports.length>0){var d=t.wrapper.children;for(n=3;n<d.length;n++){if(d[parseInt(n.toString(),10)].bounds.containsPoint(e))return!0}}return!1}function Im(t,e){var i={x:0,y:0},n=t,s=e,r=(s.y2-s.y1)*(n.x2-n.x1)-(s.x2-s.x1)*(n.y2-n.y1),o=(s.x2-s.x1)*(n.y1-s.y1)-(s.y2-s.y1)*(n.x1-s.x1),a=(n.x2-n.x1)*(n.y1-s.y1)-(n.y2-n.y1)*(n.x1-s.x1);if(0===r||(t.x1===e.x1||t.y1===e.y1)&&(t.x2===e.x2||t.y2===e.y2)&&(0===o||0===a)&&r>0)return{enabled:!1,intersectPt:i};var l=o/r,h=a/r;return l>=0&&l<=1&&h>=0&&h<=1?(i.x=n.x1+l*(n.x2-n.x1),i.y=n.y1+l*(n.y2-n.y1),{enabled:!0,intersectPt:i}):{enabled:!1,intersectPt:i}}function Mm(t,e,i,n){var s=Im(Sm(t.x,t.y,e.x,e.y),Sm(i.x,i.y,n.x,n.y));return s.enabled?s.intersectPt:{x:0,y:0}}function Sm(t,e,i,n){return{x1:Number(t)||0,y1:Number(e)||0,x2:Number(i)||0,y2:Number(n)||0}}function xm(t,e,i){var n=[];i=i||0;var s={x:e.topLeft.x-i,y:e.topLeft.y},r={x:e.topRight.x+i,y:e.topRight.y},o={x:e.bottomRight.x,y:e.bottomRight.y-i},a={x:e.bottomLeft.x,y:e.bottomLeft.y+i};return n.push(s),n.push(r),n.push(o),n.push(a),n}function wm(t,e,i,n){var s=i instanceof Ny?i.constraints&ps.InheritTooltip:i instanceof Rg?i.constraints&cs.InheritTooltip:i.constraints&Es.InheritTooltip,r=i instanceof Ny?i.constraints&ps.Tooltip:i instanceof Rg?i.constraints&cs.Tooltip:i.constraints&Es.ToolTip,o="Mouse"===(!s&&r?i.tooltip.relativeMode:t.tooltip.relativeMode);"Mouse"===n?o=!0:"Object"===n&&(o=!1);var a=function(t,e,i,n){var s,r={},o=document.getElementById(i.element.id);if(t instanceof Ny||t instanceof Rg)s=t.wrapper.bounds;else{var a=i.findObjectsUnderMouse(e),l=i.findObjectUnderMouse(a,"Select",!1);s=i.findElementUnderMouse(l,e,i).bounds}var h=o.getBoundingClientRect();switch(i.tooltipObject.position){case"BottomCenter":r=Dm(e,s.bottomCenter,i,n,h.width/2,h.height);break;case"BottomLeft":case"LeftBottom":r=Dm(e,s.bottomLeft,i,n,0,h.height);break;case"BottomRight":case"RightBottom":r=Dm(e,s.bottomRight,i,n,h.width,h.height);break;case"LeftCenter":r=Dm(e,s.middleLeft,i,n,0,h.height/2);break;case"LeftTop":case"TopLeft":r=Dm(e,s.topLeft,i,n,0,0);break;case"RightCenter":r=Dm(e,s.middleRight,i,n,h.width,h.height/2);break;case"RightTop":case"TopRight":r=Dm(e,s.topRight,i,n,h.width,0);break;case"TopCenter":r=Dm(e,s.topCenter,i,n,h.width/2,0)}return r}(i,e,t,o),l=Qg(t);return{x:a.x+l.width,y:a.y+l.height}}function Dm(t,e,i,n,s,r){var o={},a=i.scroller.transform.scale,l=i.scroller.horizontalOffset,h=i.scroller.verticalOffset;return l=i.modifyClientOffset(l,!0),h=i.modifyClientOffset(h,!0),o.x=(n?t.x:e.x)*a+l-s,o.y=(n?t.y:e.y)*a+h-r,o}function Em(t,e){var i=new Xs;return i.data=t.pathData,i.height=t.height>10?t.height-(t.padding.bottom+t.padding.top):t.height,i.width=t.width>10?t.width-(t.padding.left+t.padding.right):t.width,i.visible=t.visibility,i.id=e.id+"_shape",i.inversedAlignment=!1,i.horizontalAlignment="Center",i.verticalAlignment="Center",i.style={fill:t.iconStrokeColor,strokeColor:t.iconStrokeColor,strokeWidth:t.iconStrokeWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.relativeMode="Object",i.description=e.description||"",i}function Tm(t,e,i){var n=Am(t,e),s=fn.findAngle(t[n.index],t[n.index+1]),r=function(t){var e;e=t instanceof hp?0:void 0===t.content?10:0;var i=0;switch(t.alignment){case"Center":i=0;break;case"Before":i=-(0+e);break;case"After":i=0+e}return i}(e),o=fn.transform(n.point,s+45,r);return n.point=o,n.angle=s,n}function Am(t,e){for(var i,n,s,r,o=0,a=e.offset,l=[],h=0;h<t.length-1;h++)o+=fn.distancePoints(t[parseInt(h.toString(),10)],t[h+1]),l.push(o);for(var c=a*o,d=0;d<l.length;d++){if(l[parseInt(d.toString(),10)]>=c)return n=fn.findAngle(t[parseInt(d.toString(),10)],t[d+1]),{point:i=fn.transform(t[parseInt(d.toString(),10)],n,c-(s||0)),index:r=d};s=l[parseInt(d.toString(),10)]}return{point:i,index:r}}function Nm(t,e,i){e%=360;var n,s,r,o,a=225;switch(t.alignment){case"Before":e>=45&&e<=135?(s="right",n=.5===t.offset?"center":"top"):e>=a&&e<=315?(s="left",n=.5===t.offset?"center":"bottom"):e>45&&e<a?(n="top",s=.5===t.offset?"center":"right"):(n="bottom",s=.5===t.offset?"center":"left");break;case"After":e>=45&&e<=135?(s="left",n=.5===t.offset?"center":"top"):e>=a&&e<=315?(s="right",n=.5===t.offset?"center":"bottom"):e>45&&e<a?(n="bottom",s=.5===t.offset?"center":"right"):(n="top",s=.5===t.offset?"center":"left");break;case"Center":s=y(t.horizontalAlignment)?"center":t.horizontalAlignment.toLowerCase(),n=y(t.verticalAlignment)?"center":t.verticalAlignment.toLowerCase()}if(0===t.offset||1===t.offset)switch(r=i[0],o=i[1],Math.abs(o.x-r.x)>Math.abs(o.y-r.y)?r.x<o.x?"right":"left":r.y<o.y?"bottom":"top"){case"left":s=0===t.offset?"right":"left";break;case"right":s=0===t.offset?"left":"right";break;case"bottom":n=0===t.offset?"top":"bottom";break;case"top":n=0===t.offset?"bottom":"top"}return{hAlign:s,vAlign:n}}function Lm(t,e){if(t instanceof Ny&&t.children)for(var i=0;i<t.children.length;i++)e.nameTable[t.children[parseInt(i.toString(),10)]].children&&Lm(t,e),e.removeFromAQuad(e.nameTable[t.children[parseInt(i.toString(),10)]]),e.removeObjectsFromLayer(e.nameTable[t.children[parseInt(i.toString(),10)]]),delete e.nameTable[t.children[parseInt(i.toString(),10)]]}function Om(t,e){if(t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[parseInt(i.toString(),10)];n instanceof $s&&Om(n,e)}return-1===e.indexOf(t.id)&&e.push(t.id),e}function km(t){var e=function(t){for(var e,i,n=[],s=0;s<t.length;s++)if("SwimLane"===(e=t[parseInt(s.toString(),10)]).shape.type){i=e.wrapper.children[0].childTable;for(var r=0,o=Object.keys(i);r<o.length;r++)n=Om(i[""+o[r]],n)}return n}(t.nodes),i=Fn(t,t.getCustomProperty);return i.selectedItems.nodes=[],i.selectedItems.connectors=[],i.selectedItems.wrapper=null,t.serializationSettings.preventDefaults&&(i=zm(i,t)),t.nodes.forEach(function(n){if("SwimLane"===n.shape.type){var s=t.commandHandler.findProcesses(n);s.forEach(function(t){i.nodes.forEach(function(e){if(e.id===t){var i=e.wrapper;e.offsetX=i.offsetX,e.offsetY=i.offsetY}})}),s.length>0&&(e=e.filter(function(t){return!s.includes(t)}))}}),function(t,e){var i=e.nodes;if(i)for(var n=0;n<i.length;n++)-1!==t.indexOf(i[parseInt(n.toString(),10)].id)&&(i.splice(n,1),n--)}(e,i),JSON.stringify(i)}function zm(t,e,i,n){i=function(t,e){var i,n=[],s="getClassName";if(t[s]){var r=new qb;switch(t[s]()){case"Diagram":i=r;break;case"Node":i=new Ny(r,"",n);break;case"Path":i=new ny(r,"",n);break;case"Native":i=new sy(r,"",n);break;case"Html":i=new ry(r,"",n);break;case"Image":i=new oy(r,"",n);break;case"Text":i=new ay(r,"",n);break;case"BasicShape":i=new ly(r,"",n);break;case"FlowShape":i=new hy(r,"",n);break;case"BpmnShape":i=new Cy(r,"",n);break;case"UmlActivityShape":i=new Iy(r,"",n);break;case"UmlClassifierShape":i=new Ay(r,"",n);break;case"SwimLane":i=new zy(r,"",n),t.header&&(i.header=new Ly(r,"",n),i.header.style.fill="");break;case"ShapeAnnotation":i=new Xc(r,"",n);break;case"PointPort":i=new Wc(r,"",n);break;case"BpmnGateway":i=new cy(r,"",n);break;case"BpmnDataObject":i=new dy(r,"",n);break;case"BpmnEvent":i=new uy(r,"",n);break;case"BpmnSubEvent":i=new gy(r,"",n);break;case"BpmnActivity":i=new yy(r,"",n);break;case"BpmnAnnotation":i=new vy(r,"",n);break;case"MethodArguments":i=new My(r,"",n);break;case"UmlClassAttribute":i=new Sy(r,"",n);break;case"UmlClassMethod":i=new xy(r,"",n);break;case"UmlClass":i=new wy(r,"",n);break;case"UmlInterface":i=new Dy(r,"",n);break;case"UmlEnumerationMember":i=new Ey(r,"",n);break;case"UmlEnumeration":i=new Ty(r,"",n);break;case"Lane":i=new Oy(r,"",n);break;case"Phase":i=new ky(r,"",n);break;case"ChildContainer":i=new jy;break;case"Connector":i=new Rg(r,"",n);break;case"StraightSegment":i=new Tg(r,"",n);break;case"BezierSegment":i=new Ag(r,"",n);break;case"OrthogonalSegment":i=new Ng(r,"",n);break;case"PathAnnotation":i=new Gc(r,"",n);break;case"Stop":i=new zs(r,"",n);break;case"Point":i=e||new fn(r,"",n);break;case"UserHandle":i=new Kg(r,"",n);break;case"Command":i=new nm(r,"",n)}}else i=e;return parent=void 0,e=void 0,i}(e,i);for(var s=[],r=0,o=s=s.concat(Object.keys(t));r<o.length;r++){var a=o[r];e instanceof Ny&&(n="shape"===a),t[""+a]instanceof Array?Pm(t,i,e,a):t[""+a]instanceof Object&&i&&i[""+a]?"wrapper"!==a&&(t[""+a]=zm(t[""+a],e[""+a],i[""+a],n)):(i&&t[""+a]===i[""+a]||void 0===t[""+a])&&(n&&"type"===a||e instanceof zy&&"orientation"===a||e instanceof Xc&&"content"===a||delete t[""+a]),"[]"!==JSON.stringify(t[""+a])&&"{}"!==JSON.stringify(t[""+a])&&void 0!==t[""+a]||delete t[""+a]}return i=void 0,s=void 0,t}function Pm(t,e,i,n){if(0===t[""+n].length)delete t[""+n];else if(t[n].every(function(t){return"number"==typeof t})){var s=void 0,r=!0;for(s=0;s<t[""+n].length;s++)r=!(!r||t[""+n][parseInt(s.toString(),10)]!==e[""+n][parseInt(s.toString(),10)]);r&&delete t[""+n]}else{s=void 0;if(t[""+n]&&"layers"!==n)for(s=t[""+n].length-1;s>=0;s--)"nodes"!==n&&"connectors"!==n||(t[""+n][parseInt(s.toString(),10)].wrapper=null),"dataManager"!==n&&(t[""+n][parseInt(s.toString(),10)]=zm(t[""+n][parseInt(s.toString(),10)],i[""+n][parseInt(s.toString(),10)],void 0!==e[""+n]?e[""+n][parseInt(s.toString(),10)]:[]),"[]"!==JSON.stringify(t[""+n][parseInt(s.toString(),10)])&&"{}"!==JSON.stringify(t[""+n][parseInt(s.toString(),10)])&&void 0!==t[""+n][parseInt(s.toString(),10)]||t[""+n].splice(s,1))}t=void 0}function jm(t,e){e.enableServerDataBinding(!1);var i=e.blazorActions;e.blazorActions=e.addConstraints(i,ns.ClearObject),e.clear(),e.blazorActions=e.removeConstraints(i,ns.ClearObject),e.protectPropertyChange(!0);for(var n=e.dataSourceSettings.doBinding,s=e.setNodeTemplate,r=e.getDescription,o=e.getCustomProperty,a={},l=0,h=e.commandManager.commands;l<h.length;l++){var c=h[l];a[c.name]={execute:c.execute,canExecute:c.canExecute}}var d,p=e.rulerSettings.horizontalRuler.arrangeTick,u=e.rulerSettings.verticalRuler.arrangeTick,g=e.layout.getLayoutInfo,m=e.layout.getBranch,f=e.getNodeDefaults,y=e.getConnectorDefaults;d=function(t){if(t&&(void 0===t.version||t.version<17.1)&&t.nodes)for(var e=0,i=t.nodes;e<i.length;e++){var n=i[e];if(n&&n.ports&&n.ports.length>0)for(var s=0,r=n.ports;s<r.length;s++){var o=r[s];o&&o.constraints&&o.constraints===Es.None&&(o.constraints=Es.Default)}}return t}(d=t instanceof Object?t:JSON.parse(t)),e.contextMenuSettings=d.contextMenuSettings||{},e.constraints=d.constraints||ms.Default,e.tool=d.tool||fs.Default,e.bridgeDirection=d.bridgeDirection||"Top",e.pageSettings=d.pageSettings||{},e.drawingObject=d.drawingObject||void 0,e.tooltip=d.tooltip||{},e.addInfo=d.addInfo||void 0,e.getDescription=r,e.scrollSettings=d.scrollSettings||{},e.commandManager=d.commandManager||{},d.layers&&d.layers.length>0&&function(t){var e,i,n,s=[];for(e=0;e<t.layers.length;e++){for(i=0;i<t.layers[e].objects.length;i++)if(t.nodes)for(n=0;n<t.nodes.length;n++)t.layers[e].objects[i]===t.nodes[n].id&&s.push(t.layers[e].objects[i]);for(i=0;i<t.layers[e].objects.length;i++)if(t.connectors)for(n=0;n<t.connectors.length;n++)t.layers[e].objects[i]===t.connectors[n].id&&s.push(t.layers[e].objects[i]);t.layers[e].objects=s,s=[]}}(d),e.layers=d.layers||[],e.rulerSettings.horizontalRuler.arrangeTick=p,e.rulerSettings.verticalRuler.arrangeTick=u;for(var v=0,b=e.commandManager.commands;v<b.length;v++){var C=b[v];a[C.name]&&(C.execute=a[C.name].execute,C.canExecute=a[C.name].canExecute)}if(e.backgroundColor=d.backgroundColor||"transparent",e.basicElements=d.basicElements||[],d.connectors)for(var I=0;I<d.connectors.length;I++)"Bezier"===d.connectors[I].type&&d.connectors[I].segments.length>0&&d.connectors[I].bezierSettings&&d.connectors[I].bezierSettings.allowSegmentsReset&&(d.connectors[I].segments=[]);if(e.connectors=d.connectors||[],e.dataSourceSettings=d.dataSourceSettings||{},e.dataSourceSettings.doBinding=n,e.height=d.height||"100%",e.setNodeTemplate=s,e.getConnectorDefaults=y,e.getNodeDefaults=f,e.getCustomProperty=o,e.mode=d.mode||"SVG",d.nodes)for(I=0;I<d.nodes.length;I++)d.nodes[I].shape&&"SwimLane"===d.nodes[I].shape.type&&(null==d.nodes[I].wrapper&&(d.nodes[I].wrapper={actualSize:{width:d.nodes[I].width,height:d.nodes[I].height},offsetX:d.nodes[I].offsetX,offsetY:d.nodes[I].offsetY}),vu(d.nodes[I],void 0,void 0,void 0,void 0,!0));e.nodes=d.nodes||[],Bm(e.nodes),Bm(e.connectors),e.rulerSettings=d.rulerSettings||{},e.snapSettings=d.snapSettings||{},e.width=d.width||"100%",e.layout=d.layout||{},d.layout&&"None"!==d.layout.type&&(e.canLayout=!1),e.layout.getLayoutInfo=is(g),e.layout.getBranch=is(m),e.diagramActions=0,e.isLoading=!0,e.protectPropertyChange(!1);var M;for(I=0;I<e.views.length;I++)M=e.views[e.views[I]],e.blazorActions=e.addConstraints(i,ns.ClearObject),M.refresh(),M instanceof cm&&M.onPropertyChanged({sourceID:M.sourceID},{}),e.blazorActions=e.removeConstraints(i,ns.ClearObject),M instanceof qb&&e.element.classList.add("e-diagram");var S={name:"loaded",diagram:e};return e.triggerEvent(Ds.loaded,S),d.selectedItems&&(d.selectedItems.nodes=[],d.selectedItems.connectors=[],d.selectedItems.selectedObjects=[]),e.selectedItems=d.selectedItems,e.enableServerDataBinding(!0),e.canLayout=!0,e.swimlaneChildTable={},e.swimlaneZIndexTable={},e.nodes.forEach(function(t){"SwimLane"===t.shape.type&&e.commandHandler.findProcesses(t).forEach(function(t){var i=e.nameTable[t];i&&e.nameTable[i.processId]&&e.nameTable[i.processId].wrapper.children.push(i.wrapper)})}),d}function Bm(t){for(var e=t.filter(function(t){return"string"==typeof t.flip}),i=0,n=e;i<n.length;i++){var s=n[i];switch(s.flip){case"Horizontal":s.flip=ss.Horizontal;break;case"Vertical":s.flip=ss.Vertical;break;case"Both":s.flip=ss.Both;break;case"None":s.flip=ss.None}}}function Hm(t,e){var i=e.style,n=e;e.canApplyStyle=!0;for(var s=0,r=Object.keys(t);s<r.length;s++){switch(r[s]){case"fill":i.fill=t.fill,i instanceof Rs&&(i.fill="transparent");break;case"textOverflow":i.textOverflow=t.textOverflow;break;case"opacity":i.opacity=t.opacity;break;case"strokeColor":i.strokeColor=t.strokeColor;break;case"strokeDashArray":i.strokeDashArray=t.strokeDashArray;break;case"strokeWidth":i.strokeWidth=t.strokeWidth;break;case"bold":i.bold=t.bold;break;case"color":i.color=t.color;break;case"textWrapping":i.textWrapping=t.textWrapping;break;case"fontFamily":i.fontFamily=t.fontFamily;break;case"fontSize":i.fontSize=t.fontSize;break;case"italic":i.italic=t.italic;break;case"textAlign":i.textAlign=t.textAlign;break;case"whiteSpace":i.whiteSpace=t.whiteSpace;break;case"textDecoration":i.textDecoration=t.textDecoration;break;case"gradient":if(i.gradient){Rm(t.gradient,i.gradient);break}}}e instanceof Zs&&n.refreshTextElement()}function Rm(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"type":e.type=t.type;break;case"x1":e.x1=t.x1;break;case"x2":e.x2=t.x2;break;case"y1":e.y1=t.y1;break;case"y2":e.y2=t.y2;break;case"cx":e.cx=t.cx;break;case"cy":e.cy=t.cy;break;case"fx":e.fx=t.fx;break;case"fy":e.fy=t.fy;break;case"r":e.r=t.r;break;case"stops":e.stops=t.stops}}}function Vm(t,e,i){t.width=e.width,t.height=e.height,t.minHeight=e.minHeight,t.maxHeight=e.maxHeight,t.minWidth=e.minWidth,t.maxWidth=e.maxWidth,t.horizontalAlignment=e.wrapper.children[0].horizontalAlignment,t.verticalAlignment=e.wrapper.children[0].verticalAlignment,t.relativeMode=e.wrapper.children[0].relativeMode,t.visible=e.wrapper.children[0].visible,e.shape instanceof ay&&(t.margin=e.shape.margin),t.id=e.wrapper.children[0].id,t.style=e.style;for(var n=0,s=i.views;n<s.length;n++){var r=s[n];av(e.id+"_groupElement",r),av(e.id+"_content_groupElement",r),av(e.id+"_html_element",r)}e.wrapper.children.splice(0,1),e.wrapper.children.splice(0,0,t)}function Um(t,e,i,n){var s=new Ws;switch(t.shape.type){case"Path":var r=new Xs;r.data=e.shape.data,Vm(s=r,e,n);break;case"Image":var o=new Ks;o.source=e.shape.source,o.imageAlign=e.shape.align,o.imageScale=e.shape.scale,Vm(s=o,e,n);break;case"Text":Vm(s=new Zs,e,n);break;case"Basic":var a="Rectangle"===e.shape.shape?new Ws:new Xs;x()||"Polygon"!==e.shape.shape?a.data=tr(e.shape.shape):a.data=vn(e.shape.points),x()||"Rectangle"!==e.shape.shape||(a.cornerRadius=e.shape.cornerRadius),Vm(s=a,e,n);break;case"Flow":var l=new Xs,h=e.shape.shape;l.data=nd(h),Vm(s=l,e,n);break;case"Native":var c=new hr(t.id,n.element.id);c.content=e.shape.content,c.scale=e.shape.scale,Vm(s=c,e,n);break;case"HTML":var d=new sp(e.id,n.element.id);d.content=e.shape.content,Vm(s=d,e,n)}void 0===t.shape.type||t.shape.type===i.shape.type?function(t,e,i,n){if(Object.keys(t.shape).length>0)if("Path"===e.shape.type&&void 0!==t.shape.data)e.wrapper.children[0].data=t.shape.data;else if("Text"===e.shape.type&&void 0!==t.shape.content)e.wrapper.children[0].content=t.shape.content;else if("Image"===e.shape.type&&void 0!==t.shape.source)e.wrapper.children[0].source=t.shape.source;else if("Native"===e.shape.type){for(var s=void 0,r=0;r<i.views.length;r++)s=Yy(e.wrapper.children[0].id+"_native_element",i.views[parseInt(r.toString(),10)]),void 0!==t.shape.content&&s&&(s.removeChild(s.children[0]),e.wrapper.children[0].content=t.shape.content,s.appendChild(lv(e.wrapper.children[0],!1)));e.wrapper.children[0].scale=t.shape.scale?t.shape.scale:e.wrapper.children[0].scale}else if("HTML"===e.shape.type){var o=void 0;for(r=0;r<i.views.length;r++)(o=Yy(e.wrapper.children[0].id+"_html_element",i.views[parseInt(r.toString(),10)]))&&(o.removeChild(o.children[0]),e.wrapper.children[0].content=t.shape.content,o.appendChild(lv(e.wrapper.children[0],!0)))}else if("Flow"===e.shape.type&&void 0!==t.shape.shape){e.shape.shape=t.shape.shape;var a=nd(e.shape.shape.toString());e.wrapper.children[0].data=a}else if("UmlActivity"!==e.shape.type||x()||void 0===t.shape.shape){if(void 0!==t.shape.cornerRadius)e.children&&e.children.length>0?e.wrapper.cornerRadius=t.shape.cornerRadius:e.wrapper.children[0].cornerRadius=t.shape.cornerRadius;else if("Basic"===e.shape.type&&n&&"Rectangle"===n.shape.shape){var l=new Xs,h=tr(e.shape.shape);l.data=h,Vm(l,e,i)}else if(void 0!==t.shape.shape){e.shape.shape=t.shape.shape;var c=tr(e.shape.shape.toString());e.wrapper.children[0].data=c}}else!function(t,e){x()?t.shape.umlActivityShape=e.shape.umlActivityShape:t.shape.shape=e.shape.shape;var i=x()?t.shape.umlActivityShape:t.shape.shape,n=Jg(i.toString());(x()||"InitialNode"!==t.shape.shape)&&(x()||"ForkNode"!==t.shape.shape&&"JoinNode"!==t.shape.shape)?x()||"FinalNode"!==t.shape.shape||t instanceof Ny&&(t.wrapper=Fm(t)):t.wrapper.children[0].style.fill="black";n&&(t.wrapper.children[0].data=n)}(e,t);e.wrapper.children[0].canMeasurePath=!0}(t,e,n,i):(s.width=e.wrapper.children[0].width,s.height=e.wrapper.children[0].height,e.shape instanceof ay&&(s.margin=e.shape.margin),s.style=e.style,e.wrapper.children[0]=s)}function Fm(t){var e=new $s;e.style.fill="transparent";var i="M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",n=new Xs;n.data=i,n.id=t.id+"_0_finalNode",n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object",n.style.strokeColor=t.style.strokeColor,n.style.strokeWidth=t.style.strokeWidth;var s=new Xs;return s.data=i,s.id=t.id+"_1_finalNode",s.horizontalAlignment="Center",s.verticalAlignment="Center",s.relativeMode="Object",s.style.fill=t.style.fill,s.style.strokeColor=t.style.strokeColor,s.style.strokeWidth=t.style.strokeWidth,e.children=[n,s],e.children[0].width=t.width,e.children[0].height=t.height,e.children[1].height=t.height/1.5,e.children[1].width=t.width/1.5,e.style.strokeWidth=0,e.style.strokeColor="transparent",e}function Wm(t){av(t+"_linear"),av(t+"_radial")}function Ym(t,e){var i=t.indexOf(e);i>=0&&t.splice(i,1)}function _m(t,e,i){var n;t.intermediatePoints=e,t.updateSegmentElement(t,e,t.wrapper.children[0],i);var s=t.sourceDecorator;if("Bezier"===t.type){var r=t.segments[0],o=t.segments[t.segments.length-1];n=[fn.isEmptyPoint(o.point2)?o.bezierPoint2:o.point2,fn.isEmptyPoint(r.point1)?r.bezierPoint1:r.point1]}else n=t.intermediatePoints;e=t.clipDecorators(t,e,i);var a=t.wrapper.children[0];a.canMeasurePath=!0,a=t.wrapper.children[1],t.updateDecoratorElement(a,e[0],n[1],s);var l=t.targetDecorator;a=t.wrapper.children[2],t.updateDecoratorElement(a,e[e.length-1],n[n.length-2],l),t.updateShapeElement(t)}function Qm(t,e,i){var n,s=t.wrapper,r=(s.bounds,e.offset),o=e.size/i.scale,a=e.margin,l=s.offsetX-s.actualSize.width*s.pivot.x,h=s.offsetY-s.actualSize.height*s.pivot.y;if(n={x:0,y:0},t.nodes.length>0){switch(e.side){case"Top":n.x+=l+r*s.actualSize.width,n.y+=h-o;break;case"Bottom":n.x+=l+r*s.actualSize.width,n.y+=h+s.actualSize.height+o;break;case"Left":n.x+=l-o,n.y+=h+r*s.actualSize.height;break;case"Right":n.x+=l+s.actualSize.width+o,n.y+=h+r*s.actualSize.height}n.x+=(a.left-a.right)/i.scale+o/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=(a.top-a.bottom)/i.scale+o/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1)}else if(t.connectors.length>0){var c=t.connectors[0],d={offset:r},p=Am(c.intermediatePoints,d),u=p.index;n=p.point;var g,m=Tm(c.intermediatePoints,d).angle;On(g=Nn(),-m,c.intermediatePoints[parseInt(u.toString(),10)].x,c.intermediatePoints[parseInt(u.toString(),10)].y),(n=Ln(g,n)).x+=a.left-a.right+o/2*("Center"===e.horizontalAlignment?0:"Right"===e.horizontalAlignment?-1:1),n.y+=a.top-a.bottom+o/2*("Center"===e.verticalAlignment?0:"Top"===e.verticalAlignment?-1:1),On(g=Nn(),m,c.intermediatePoints[parseInt(u.toString(),10)].x,c.intermediatePoints[parseInt(u.toString(),10)].y),n=Ln(g,n)}0===s.rotateAngle&&0===s.parentTransform||(On(g=Nn(),s.rotateAngle+s.parentTransform,s.offsetX,s.offsetY),n=Ln(g,n));return n}function Zm(t,e,i,n){if(n.annotation){if(Sp(n.annotation))return!0}else if(as[""+e]&t&&gs[""+e]&i)return!0;return!1}function qm(t,e){return!!(as[""+e]&t)}function Xm(t,e){return!!(Us[""+e]&t)}function Gm(t,e){return t.visibility&e}function Km(t,e){var i;if("Text"===t.shape.type)i=t.shape;else{var n=e.split("_");e=n[n.length-1];for(var s=0;s<t.annotations.length;s++)e===t.annotations[parseInt(s.toString(),10)].id&&(i=t.annotations[parseInt(s.toString(),10)])}return i}function Jm(t,e){if(e){var i=e.split("_");e=i[i.length-1]}if(t)for(var n=0;n<t.ports.length;n++)if(e===t.ports[parseInt(n.toString(),10)].id)return t.ports[parseInt(n.toString(),10)]}function $m(t,e){var i={},n=0;if(t.ports){var s=t.ports;for(n=0;n<s.length;n++)e?s[parseInt(n.toString(),10)].constraints&Es.InConnect&&(i=s[parseInt(n.toString(),10)]):s[parseInt(n.toString(),10)].constraints&Es.OutConnect&&(i=s[parseInt(n.toString(),10)])}return i}function tf(t,e,i){for(var n=i?t.annotations:t.ports,s=0;s<n.length;s++)if(n[parseInt(s.toString(),10)].id===e)return s.toString();return"-1"}function ef(t,e){var i;for(i=0;i<t.length;i++)if(e===t[parseInt(i.toString(),10)].id)return!0;return!1}function nf(t,e,i,n){if(void 0!==t.width&&void 0!==t.height&&(t.width*=e,t.height*=i),t instanceof _s){var s=Nn(),r=n.width||n.actualSize.width,o=n.height||n.actualSize.height;if(void 0!==r&&void 0!==o){var a=n.offsetX-r*n.pivot.x,l=n.offsetY-o*n.pivot.y,h={x:a+r*n.pivot.x,y:l+o*n.pivot.y};h=ts(n.rotateAngle,n.offsetX,n.offsetY,h),On(s,-n.rotateAngle,h.x,h.y),kn(s,e,i,h.x,h.y),On(s,n.rotateAngle,h.x,h.y);for(var c=0,d=t.children;c<d.length;c++){var p=d[c];if(void 0!==p.width&&void 0!==p.height){var u=Ln(s,{x:p.offsetX,y:p.offsetY});p.offsetX=u.x,p.offsetY=u.y,nf(p,e,i,n)}}}}}function sf(t,e,i,n,s,r){for(var o,a=t.children,l=0;l<a.length;l++)if(o=n[a[parseInt(l.toString(),10)]])if(o.children)sf(o,e,i,n,s,r);else if(o.offsetX-=e,o.offsetY-=i,!s){n[o.id]=o;var h=o.initContainer();h.children||(h.children=[]);var c=o.init(r);h.children.push(c),h.measure(new un(o.width,o.height)),h.arrange(h.desiredSize)}}function rf(t,e){var i,n;return(i=t instanceof Ny&&"Native"!==t.shape.type&&"HTML"!==t.shape.type||t instanceof Rg?1:t instanceof Ny&&"HTML"!==t.shape.type?2:3)!==(n=e instanceof Ny&&"Native"!==e.shape.type&&"HTML"!==e.shape.type||e instanceof Rg?1:e instanceof Ny&&"HTML"!==e.shape.type?2:3)?i-n:t.zIndex-e.zIndex}function of(t){return t.sort(rf)}function af(t,e,i){if(0===i.length)i.push(t);else if(1===i.length)i[0][""+e]>t[""+e]?i.splice(0,0,t):i.push(t);else if(i.length>1){for(var n=0,s=i.length-1,r=Math.floor((n+s)/2);r!==n;)if(i[parseInt(r.toString(),10)][""+e]<t[""+e])n=r,r=Math.floor((n+s)/2);else{if(!(i[parseInt(r.toString(),10)][""+e]>t[""+e]))break;s=r,r=Math.floor((n+s)/2)}i[parseInt(s.toString(),10)][""+e]<t[""+e]?i.push(t):i[parseInt(n.toString(),10)][""+e]>t[""+e]?i.splice(n,0,t):i[parseInt(n.toString(),10)][""+e]<t[""+e]&&i[parseInt(s.toString(),10)][""+e]>t[""+e]&&i.splice(s,0,t)}}function lf(t){var e=document.getElementById(t.diagramId).ej2_instances,i=e?e[0]:null,n=t.nodeId,s=i.nodes;void 0===s&&(s=function(t){for(var e=[],i=0;i<t.palettes.length;i++)for(var n=t.palettes[parseInt(i.toString(),10)].symbols,s=0;s<n.length;s++)n[parseInt(s.toString(),10)]instanceof Ny&&e.push(n[parseInt(s.toString(),10)]);return e}(i));for(var r="length",o=0;s&&o<s[""+r];o++)if(s[parseInt(o.toString(),10)].id===n)return t.annotationId?hf(s[parseInt(o.toString(),10)],t):s[parseInt(o.toString(),10)];var a=i.connectors;for(o=0;a&&o<a[""+r];o++)if(a[parseInt(o.toString(),10)].id===n)return t.annotationId?hf(a[parseInt(o.toString(),10)],t):a[parseInt(o.toString(),10)];var l=i.enterObject||{};return l.id===n||l.children?l.children&&vm(l,"HTML",i.enterTable)?i.enterTable[""+n]||null:l:null}function hf(t,e){var i,n=t.annotations;for(i=0;n&&i<n.length;i++)if(e.annotationId&&n[parseInt(i.toString(),10)].id===e.annotationId)return n[parseInt(i.toString(),10)];return t}function cf(t,e,i,n,s,r,o,a){var l={x:0,y:0},h=Nn();switch(On(h,s,r,o),a.x){case 0:switch(a.y){case 0:l=Ln(h,{x:t,y:e});break;case.5:l=Ln(h,{x:t,y:e+n/2});break;case 1:l=Ln(h,{x:t,y:e+n})}break;case.5:switch(a.y){case 0:l=Ln(h,{x:t+i/2,y:e});break;case.5:l=Ln(h,{x:t+i/2,y:e+n/2});break;case 1:l=Ln(h,{x:t+i/2,y:e+n})}break;case 1:switch(a.y){case 0:l=Ln(h,{x:t+i,y:e});break;case.5:l=Ln(h,{x:t+i,y:e+n/2});break;case 1:l=Ln(h,{x:t+i,y:e+n})}}return{x:l.x,y:l.y}}var df=function(t){return t&&(t=void 0!==t.sourceID||void 0!==t.sourcePoint||void 0!==t.targetID||void 0!==t.targetPoint||void 0!==t.type?Rg:Ny),t},pf=function(t,e,i){if(!t.sourceID||!t.targetID)if(t.wrapper){var n=(t.flip&ss.Horizontal^t.wrapper.flip&ss.Horizontal)===ss.Horizontal,s=(t.flip&ss.Vertical^t.wrapper.flip&ss.Vertical)===ss.Vertical,r={x:t.sourcePoint.x,y:t.sourcePoint.y},o={x:t.targetPoint.x,y:t.targetPoint.y},a=void 0,l=void 0;if(i&&t.parentId)e.nameTable[t.parentId].wrapper&&(l={x:(a=e.groupBounds).center.x,y:a.center.y});i?i&&l&&(t.sourceID||t.targetID?t.sourceID&&!t.targetID?(n&&(t.targetPoint.x=2*l.x-o.x),s&&(t.targetPoint.y=2*l.y-o.y)):!t.sourceID&&t.targetID&&(n&&(t.sourcePoint.x=2*l.x-r.x),s&&(t.sourcePoint.y=2*l.y-r.y)):(n&&(t.sourcePoint.x=2*l.x-r.x,t.targetPoint.x=2*l.x-o.x),s&&(t.sourcePoint.y=2*l.y-r.y,t.targetPoint.y=2*l.y-o.y))):(n&&(t.sourcePoint.x=o.x,t.targetPoint.x=r.x),s&&(t.sourcePoint.y=o.y,t.targetPoint.y=r.y),e&&!i&&(t.sourceID="",t.targetID="",e.updateConnectorProperties(t))),e&&e.updateConnectorProperties(t)}else{r={x:t.sourcePoint.x,y:t.sourcePoint.y},o={x:t.targetPoint.x,y:t.targetPoint.y};t.flip===ss.Horizontal?(t.sourcePoint.x=o.x,t.targetPoint.x=r.x):t.flip===ss.Vertical?(t.sourcePoint.y=o.y,t.targetPoint.y=r.y):t.flip===ss.Both&&(t.sourcePoint=o,t.targetPoint=r)}},uf=function(t,e,i){var n=i.offset.x,s=i.offset.y;return e===ss.Horizontal?(n=1-i.offset.x,s=i.offset.y):e===ss.Vertical?(n=i.offset.x,s=1-i.offset.y):e===ss.Both&&(n=1-i.offset.x,s=1-i.offset.y),t.setOffsetWithRespectToBounds(n,s,"Fraction"),t},gf=function(t,e,i,n,s,r,o,a){if(t.hasChildren())for(var l=0,h=t.children;l<h.length;l++){var c=h[l],d=void 0;if(c instanceof $s){(d=n.nameTable[c.id])&&(r&&(d.flip^=ss.Horizontal),o&&(d.flip^=ss.Vertical));var p=n.nameTable[c.id];if(p&&p instanceof Rg&&(r||o)){pf(p,n,!0),r&&(p.wrapper.flip^=ss.Horizontal),o&&(p.wrapper.flip^=ss.Vertical);continue}}var u=t.rotateAngle*(Math.PI/180),g=c.offsetX-e,m=c.offsetY-i,f=g*Math.cos(u)+m*Math.sin(u),y=-g*Math.sin(u)+m*Math.cos(u);(r||s===ss.Horizontal||s===ss.Both)&&(f=-f),(o||s===ss.Vertical||s===ss.Both)&&(y=-y);var v=e+(f*Math.cos(u)-y*Math.sin(u)),b=i+(f*Math.sin(u)+y*Math.cos(u));if(c instanceof Zs||c.elementActions&us.ElementIsPort||(c.offsetX=v,c.offsetY=b,d&&(d.offsetX=v,d.offsetY=b),c.flipOffset.x=v-c.desiredSize.width/2,c.flipOffset.y=b-c.desiredSize.height/2),a||(c instanceof $s||c instanceof _s)&&(r&&(c.flip^=ss.Horizontal),o&&(c.flip^=ss.Vertical),!c.id.includes("group_container")&&c.children&&(r&&(c.children[0].flip^=ss.Horizontal),o&&(c.children[0].flip^=ss.Vertical)),gf(c,e,i,n,s,r,o,a)),c.measure(new un(c.bounds.width,c.bounds.height)),c.arrange(c.desiredSize),!n.groupBounds){var C=n.nameTable[c.id];C&&n.updateConnectorEdges(C)}}},mf=function(t){var e=t.selectedItems.nodes,i=t.selectedItems.connectors,n=t.allowServerDataBinding,s=t.isProtectedOnChange;t.protectPropertyChange(!0),t.allowServerDataBinding=!1,t.selectedItems.nodes=[],t.selectedItems.connectors=[],t.allowServerDataBinding=n,t.protectPropertyChange(s);for(var r=Fn(t.selectedItems),o=0;o<e.length;o++)t.selectedItems.nodes.push(t.nameTable[e[o].id]);for(o=0;o<i.length;o++)t.selectedItems.connectors.push(t.nameTable[i[o].id]);return r},ff=function(t,e){for(var i,n=new Xs,s=0;s<t.length-1;s++){i=bf(t[s],t[s+1]),n.data=i[0],n.id=e.id+"_"+e.shape.sequence;var r=yf(t,e);n.offsetX=r.x,n.offsetY=r.y,n.rotateAngle=45,n.transform=ys.Self;break}return n},yf=function(t,e,i){for(var n,s,r,o=0,a=0;a<t.length-1;a++)o+=If(t[parseInt(a.toString(),10)],t[a+1]);r=i?o*i:o/2>30?10:o/2;for(var l=0,h=0;h<t.length-1;h++){var c=If(t[parseInt(h.toString(),10)],t[h+1]);if(l+c>=r){var d=r-l;n=Ad(t[h],t[h+1]),s=fn.transform(t[h],n,d);break}l+=c}return s},vf=function(t,e){if(t instanceof Ny||t instanceof Rg)for(var i=0;i<t.ports.length;i++)if(t.ports[i].id===e.id.split("_").splice(1).join("_"))return!0;return!1},bf=function(t,e){var i={x:t.x,y:t.y},n=If(t,e);n=Math.min(10,n/2);var s=Ad(t,e),r=fn.transform({x:i.x,y:i.y},s,n),o=fn.transform({x:r.x,y:r.y},s,-11),a=fn.transform({x:o.x,y:o.y},s,22);return["M"+o.x+" "+o.y+" L"+a.x+" "+a.y,r]},Cf=function(t,e){return Math.abs(e.x-t.x)>Math.abs(e.y-t.y)?t.x<e.x?"Right":"Left":t.y<e.y?"Bottom":"Top"},If=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))};function Mf(t){return t}function Sf(){return(navigator.platform.indexOf("Mac")>=0||navigator.platform.indexOf("iPad")>=0||navigator.platform.indexOf("iPhone")>=0||navigator.platform.indexOf("MacIntel")>=0)&&("safari"===G.info.name||"webkit"===G.info.name)}function xf(t,e,i,n){return void 0!==e.previewSize[""+n]?e.previewSize[""+n]:void 0!==t.symbolPreview[""+n]?t.symbolPreview[""+n]:e[""+n]||i.actualSize[""+n]}function wf(t,e,i){return t&&t.parentId&&(i=(t=e.nameTable[t.parentId]).parentId?wf(t,e,i):t.id),i}function Df(t,e){return t.selectedItems.connectors.length>1&&0===t.selectedItems.nodes.length&&0!==e.rotateAngle}function Ef(t){if(t.arrowType&&""!==t.arrowType.trim())switch(t.arrowType){case"single-line-arrow":default:return{targetDecorator:"Arrow",strokeWidth:1};case"double-line-arrow":return{targetDecorator:"Arrow",strokeWidth:2};case"dotted-arrow":return{targetDecorator:"Arrow",strokeDashArray:"2,2"};case"single-line":return{targetDecorator:"None",strokeWidth:1};case"double-line":return{targetDecorator:"None",strokeWidth:2};case"dotted":return{targetDecorator:"None",strokeDashArray:"2,2"};case"wiggly-arrow":return{targetDecorator:"None",strokeWidth:1,opacity:0}}return{targetDecorator:"Arrow",strokeWidth:1}}function Tf(t,e){var i=e.position.x,n=e.position.y;e.flip===ss.Horizontal?i=1-i:(e.flip===ss.Vertical||(i=1-i),n=1-n);var s=i*t.width,r=n*t.height,o=t.offsetY-t.height*e.pivot.y+t.padding.top,a=t.offsetX-t.width*e.pivot.x+t.padding.left,l=a+=s,h=o+=r,c=function(t,e,i){switch(e+=t.margin.left-t.margin.right,i+=t.margin.top-t.margin.bottom,t.horizontalAlignment){case"Auto":case"Left":e=t.inversedAlignment?e:e-t.desiredSize.width;break;case"Stretch":case"Center":e-=t.desiredSize.width*t.pivot.x;break;case"Right":e=t.inversedAlignment?e-t.desiredSize.width:e}switch(t.verticalAlignment){case"Auto":case"Top":i=t.inversedAlignment?i:i-t.desiredSize.height;break;case"Stretch":case"Center":i-=t.desiredSize.height*t.pivot.y;break;case"Bottom":i=t.inversedAlignment?i-t.desiredSize.height:i}return{x:e,y:i}}({horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,margin:e.margin,desiredSize:e.desiredSize,inversedAlignment:e.inversedAlignment,pivot:e.pivot},l,h),d=e.rotateAngle;if(0!==d||0!==e.parentTransform){var p=es({x:l-e.desiredSize.width/2,y:h-e.desiredSize.height/2},e);p=ts(e.rotateAngle,l,h,p),c=Vn({offsetX:(p=ts(t.rotateAngle+t.parentTransform,t.offsetX,t.offsetY,p)).x,offsetY:p.y,pivot:e.pivot,actualSize:e.actualSize}).topLeft;var u=Nn();On(u,d+e.parentTransform,p.x,p.y),c=Ln(u,c)}return c}function Af(t){return!(!t||t.flip===ss.None||"Label"!==t.flipMode&&"PortAndLabel"!==t.flipMode&&"LabelAndLabelText"!==t.flipMode&&"All"!==t.flipMode)}function Nf(t,e,i){return void 0===i&&(i=0),t.left-i<=e.x&&t.right+i>=e.x&&t.top-i<=e.y&&t.bottom+i>=e.y}var Lf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Of=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Lf(e,t),Of([jt("None")],e.prototype,"shape",void 0),Of([jt("white")],e.prototype,"fill",void 0),Of([jt("Auto")],e.prototype,"horizontalAlignment",void 0),Of([jt("Auto")],e.prototype,"verticalAlignment",void 0),Of([jt(10)],e.prototype,"width",void 0),Of([jt(10)],e.prototype,"height",void 0),Of([Bt({x:.5,y:1},fn)],e.prototype,"offset",void 0),Of([jt("#1a1a1a")],e.prototype,"borderColor",void 0),Of([jt(1)],e.prototype,"borderWidth",void 0),Of([Bt({},Os)],e.prototype,"margin",void 0),Of([jt("")],e.prototype,"pathData",void 0),Of([jt("")],e.prototype,"content",void 0),Of([jt(0)],e.prototype,"cornerRadius",void 0),Of([Bt({left:2,right:2,top:2,bottom:2},Os)],e.prototype,"padding",void 0),Of([jt("#1a1a1a")],e.prototype,"iconColor",void 0),e}(re),zf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pf=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orientation="Vertical",e.measureChildren=void 0,e.considerPadding=!0,e}return zf(e,t),e.prototype.measure=function(t){var e="Horizontal"===this.orientation?this.updateHorizontalStack:this.updateVerticalStack;return this.desiredSize=this.measureStackPanel(t,e),this.desiredSize},e.prototype.arrange=function(t){var e="Horizontal"===this.orientation?this.arrangeHorizontalStack:this.arrangeVerticalStack;return this.actualSize=this.arrangeStackPanel(t,e),this.updateBounds(),this.actualSize},e.prototype.measureStackPanel=function(e,i){var n=void 0;if(void 0!==this.children&&this.children.length>0)for(var s=0,r=this.children;s<r.length;s++){var o=r[s];o.parentTransform=this.rotateAngle+this.parentTransform,this.measureChildren?o.measure(o.desiredSize):o.measure(e);var a=o.desiredSize.clone();this.applyChildMargin(o,a),0!==o.rotateAngle&&(a=$n(a,o.rotateAngle)),void 0===n?n=a:o.preventContainer||i(a,n)}return n=t.prototype.validateDesiredSize.call(this,n,e),this.stretchChildren(n),this.considerPadding&&this.applyPadding(n),n},e.prototype.arrangeStackPanel=function(e,i){if(void 0!==this.children&&this.children.length>0){var n=void 0,s=void 0;n=this.offsetX-e.width*this.pivot.x+this.padding.left,s=this.offsetY-e.height*this.pivot.y+this.padding.top;for(var r=0,o=this.children;r<o.length;r++){var a=o[r],l=a.desiredSize.clone(),h=l;"Vertical"===this.orientation?s+=a.margin.top:n+=a.margin.left,0!==a.rotateAngle&&(h=$n(l,a.rotateAngle));var c=i(n,s,a,this,e,h);t.prototype.findChildOffsetFromCenter.call(this,a,c),a.arrange(l,!0),"Vertical"===this.orientation?s+=h.height+a.margin.bottom:n+=h.width+a.margin.right}}return e},e.prototype.updateHorizontalStack=function(t,e){e.height=Math.max(t.height,e.height),e.width+=t.width},e.prototype.updateVerticalStack=function(t,e){e.width=Math.max(t.width,e.width),e.height+=t.height},e.prototype.arrangeHorizontalStack=function(t,e,i,n,s,r){var o=0;if("Top"===i.verticalAlignment)o=e+i.margin.top+r.height/2;else if("Bottom"===i.verticalAlignment){o=n.offsetY+s.height*(1-n.pivot.y)-n.padding.bottom-i.margin.bottom-r.height/2}else o=n.offsetY-s.height*n.pivot.y+s.height/2,i.margin.top&&(o=e+i.margin.top+r.height/2);return{x:t+r.width/2,y:o}},e.prototype.arrangeVerticalStack=function(t,e,i,n,s,r){var o=0;if("Left"===i.horizontalAlignment)o=t+i.margin.left+r.width/2;else if("Right"===i.horizontalAlignment){o=n.offsetX+s.width*(1-n.pivot.x)-n.padding.right-i.margin.right-r.width/2}else o=n.offsetX-s.width*n.pivot.x+s.width/2,i.margin.left&&(o=t+i.margin.left+r.width/2);return{x:o,y:e+r.height/2}},e.prototype.stretchChildren=function(t){if(void 0!==this.children&&this.children.length>0)for(var e=0,i=this.children;e<i.length;e++){var n=i[e];"Vertical"===this.orientation?"Stretch"===n.horizontalAlignment&&(n.desiredSize.width=t.width-(n.margin.left+n.margin.right)):"Stretch"===n.verticalAlignment&&(n.desiredSize.height=t.height-(n.margin.top+n.margin.bottom))}},e.prototype.applyChildMargin=function(t,e){e.height+=t.margin.top+t.margin.bottom,e.width+=t.margin.left+t.margin.right},e}(_s);function jf(t,e,i){var n,s="NoWrap";"Class"===e.shape.classifier?n=e.shape.classShape:"Enumeration"===e.shape.classifier?n=e.shape.enumerationShape:"Interface"===e.shape.classifier&&(n=e.shape.interfaceShape),e.container={type:"Stack",orientation:"Vertical"},e.constraints=(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Resize),e.style={fill:e.style.fill,strokeColor:e.style.strokeColor,strokeWidth:1.5},e.children=[],e.maxWidth&&(s="Wrap");var r=new Ny(i,"nodes",{id:e.id+"_umlClass_header",annotations:[{id:"name",content:n.name,offset:{x:.5,y:.65},margin:{left:10,right:10},style:{bold:!0,fontSize:14,color:n.style.color,fill:n.style.fill,textWrapping:s}},{content:"<<"+e.shape.classifier+">>",margin:{left:10,right:10},id:"class",style:{fontSize:n.style.fontSize,color:n.style.color,fill:n.style.fill,textWrapping:s},offset:{x:.5,y:.3},constraints:ds.ReadOnly}],constraints:(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Drag|ps.Resize),verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:e.style.fill,strokeColor:"black"===e.style.strokeColor?"#ffffff00":e.style.strokeColor}},!0);return i.initObject(r),i.nodes.push(r),i.UpdateBlazorDiagramModel(r,"Node"),e.children.push(r.id),function(t,e,i,n){if("Enumeration"===t.shape.classifier){var s=i.members;if(s&&s.length){Bf(t,e);for(var r="",o=0;o<s.length;o++){var a=s[parseInt(o.toString(),10)];if(""!==a.name&&(r+=a.name),o!==s.length){var l=Rf(t,a),h=new Ny(e,"nodes",{id:Hn()+"_umlMember",annotations:[{id:"name",content:r,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n,italic:l.italic,fontFamily:l.fontFamily,whiteSpace:l.whiteSpace,textAlign:l.textAlign,textDecoration:l.textDecoration,textOverflow:l.textOverflow},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor,textWrapping:n},constraints:(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Drag|ps.Resize),minHeight:25},!0);e.initObject(h),e.nodes.push(h),e.UpdateBlazorDiagramModel(h,"Node"),t.children.push(h.id),r="",a.isSeparator&&o!==s.length-1&&Bf(t,e,a.separatorStyle),a.isSeparator&&o===s.length-1&&(a.isSeparator=!1)}}}}else{var c=i.attributes;if(c.length){var d="";Bf(t,e);for(o=0;o<c.length;o++){var p=void 0,u=c[parseInt(o.toString(),10)];if(p=u.scope&&"Public"===u.scope?" +":u.scope&&"Private"===u.scope?"-":u.scope&&"Protected"===u.scope?"#":"~",""!==u.name&&p&&(d+=p+" "+u.name+" : "+u.type),o!==c.length){l=Rf(t,u),h=new Ny(e,"nodes",{id:Hn()+"_umlProperty",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},annotations:[{id:"name",content:d,offset:{x:0,y:.5},style:{bold:!0,fontSize:l.fontSize,color:l.color,fill:l.fill,textWrapping:n,italic:l.italic,fontFamily:l.fontFamily,whiteSpace:l.whiteSpace,textAlign:l.textAlign,textDecoration:l.textDecoration,textOverflow:l.textOverflow},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Drag|ps.Resize),minHeight:25},!0);e.initObject(h),e.nodes.push(h),e.UpdateBlazorDiagramModel(h,"Node"),t.children.push(h.id),d="",u.isSeparator&&o!==c.length-1&&Bf(t,e,u.separatorStyle),u.isSeparator&&o===c.length-1&&(u.isSeparator=!1)}}}}}(e,i,n,s),function(t,e,i,n){if(i.methods&&i.methods.length){var s=i.methods;Bf(t,e);for(var r="",o="",a=void 0,l=0;l<s.length;l++){var h=s[parseInt(l.toString(),10)];if(a=h.scope&&"Public"===h.scope?" +":h.scope&&"Private"===h.scope?"-":h.scope&&"Protected"===h.scope?"#":"~",h.parameters)for(var c=0;c<h.parameters.length;c++)h.parameters[parseInt(c.toString(),10)].type?r+=h.parameters[parseInt(c.toString(),10)].name+":"+h.parameters[parseInt(c.toString(),10)].type:r+=h.parameters[parseInt(c.toString(),10)].name,c!==h.parameters.length-1&&(r+=",");if(""!==h.name&&(a&&(o+=a+" "+h.name+"("+r+") : "+h.type),r=""),l!==s.length){var d=Rf(t,h),p=new Ny(e,"nodes",{id:Hn()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:o,offset:{x:0,y:.5},style:{bold:!0,fontSize:d.fontSize,color:d.color,fill:d.fill,textWrapping:n,italic:d.italic,fontFamily:d.fontFamily,whiteSpace:d.whiteSpace,textAlign:d.textAlign,textDecoration:d.textDecoration,textOverflow:d.textOverflow},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},minHeight:25,constraints:(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Drag|ps.Resize)},!0);e.initObject(p),e.nodes.push(p),e.UpdateBlazorDiagramModel(p,"Node"),t.children.push(p.id),o="",h.isSeparator&&l!==s.length-1&&Bf(t,e,h.separatorStyle),h.isSeparator&&l===s.length-1&&(h.isSeparator=!1)}}}}(e,i,n,s),e.offsetX=e.offsetX,e.offsetY=e.offsetY,e.style.fill=e.style.fill,e.borderColor=e.borderColor,i.initObject(e),t}function Bf(t,e,i){var n=new Ny(e,"nodes",{id:Hn()+"_path",height:1,constraints:ps.Default&~ps.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor,fill:i?i.fill:"white"}},!0);e.initObject(n),e.nodes.push(n),t.children.push(n.id)}function Hf(t,e,i){var n=new Ny(e,"nodes",{id:Hn()+"_path",height:1,constraints:ps.Default&~ps.Select,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor,fill:"white"}},!0);n.parentId=t.id,n.umlIndex=i,e.add(n)}function Rf(t,e){var i={},n=e.style;return i.fill="transparent"!==n.fill?n.fill:t.style.fill,i.color=n.color,i.fontFamily="Arial"!==n.fontFamily?n.fontFamily:t.style.fontFamily,i.italic=n.italic,i.bold=n.bold,i.whiteSpace=n.whiteSpace,i.textAlign=n.textAlign,i.textWrapping=n.textWrapping,i.textDecoration=n.textDecoration,i.textOverflow=n.textOverflow,i.fontSize=12!==n.fontSize?n.fontSize:t.style.fontSize,i.strokeColor="black"!==n.strokeColor?n.strokeColor:t.style.strokeColor,i.strokeWidth=1!==n.strokeWidth?n.strokeWidth:t.style.strokeWidth,i}var Vf=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Uf=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Vf(e,t),Uf([jt("Horizontal")],e.prototype,"orientation",void 0),Uf([jt("Center")],e.prototype,"type",void 0),Uf([jt(void 0)],e.prototype,"offset",void 0),Uf([jt(!1)],e.prototype,"enableRouting",void 0),Uf([jt([])],e.prototype,"children",void 0),Uf([jt("")],e.prototype,"assistants",void 0),Uf([jt("")],e.prototype,"level",void 0),Uf([jt("")],e.prototype,"hasSubTree",void 0),Uf([jt("")],e.prototype,"rows",void 0),e}(re);function Wf(t,e,i){return t=function(t,e,i){var n=new $s;Yf(n,e),n.id=e.id+"_container";var s=function(t,e){var i=new un(t.width,t.height);e instanceof Xs||(i.width=i.width||50,i.height=i.height||50);if(e.actualSize.width&&e.actualSize.height)return e.actualSize;void 0!==t.maxWidth&&(i.width=Math.min(i.width,t.maxWidth));void 0!==t.maxHeight&&(i.height=Math.min(i.height,t.maxHeight));void 0!==t.minWidth&&(i.width=Math.max(i.width,t.minWidth));void 0!==t.minHeight&&(i.height=Math.max(i.height,t.minHeight));return i}(e,t);if(e.width=s.width,e.height=s.height,t.id=e.id+"_content",t.width=s.width,t.height=s.height,Yf(t,e),n.children=[t],e.shape.header&&e.shape.hasHeader){var r=function(t,e){var i=e.shape;i.header.id=i.header.id||Hn();var n={id:e.id+i.header.id,annotations:[Fn(i.header.annotation)],style:i.header.style,offsetX:e.offsetX,offsetY:e.offsetY,height:i.header.height,width:e.width},s=function(t,e,i,n){var s=new Ny(t,"nodes",i,!0);if(s.parentId=e.id,s.isHeader=n,s.constraints&=~(ps.InConnect|ps.OutConnect),s.constraints|=ps.HideThumbs,t.initObject(s),t.nodes.push(s),s.wrapper.children.length>0){for(var r=0;r<s.wrapper.children.length;r++){var o=s.wrapper.children[parseInt(r.toString(),10)];o instanceof Ws&&(o.isCalculateDesiredSize=!1),o instanceof Zs&&(o.canConsiderBounds=!1)}s.wrapper.measure(new un(void 0,void 0)),s.wrapper.arrange(s.wrapper.desiredSize)}return s.wrapper.measure(new un(void 0,void 0)),s.wrapper.arrange(s.wrapper.desiredSize),s.wrapper}(t,e,n,!0);return s}(i,e);n.children.push(r)}var o=e.shape;if(e.shape.children&&e.shape.children.length>0)for(var a=0;a<o.children.length;a++){var l=i.nameTable[o.children[parseInt(a.toString(),10)]];if(l&&(!l.parentId||l.parentId===e.id)){l.parentId=e.id,l.margin.left||(l.margin.left=10),l.margin.top||(l.margin.top=10),!e.shape.header||!e.shape.hasHeader||i.isLoading||i.diagramActions&Is.UndoRedo||(l.margin.top+=e.shape.header.height);var h=e.offsetX-e.width*e.pivot.x+(l.margin.left+l.width*l.pivot.x),c=e.offsetY-e.height*e.pivot.y+(l.margin.top+l.height*l.pivot.y);l.offsetX===h&&l.offsetY===c||(l.offsetX=h,l.offsetY=c),n.children.push(l.wrapper),_f(i,l)}}return n.width=e.width,n.height=e.height,n}(t,e,i),t}function Yf(t,e){t.style.fill=e.style.fill,t.style.strokeColor=e.style.strokeColor,t.style.strokeWidth=e.style.strokeWidth,t.style.strokeDashArray=e.style.strokeDashArray,t.style.opacity=e.style.opacity,t.style.gradient=e.style.gradient,0!==(e.constraints&ps.Shadow)&&e.visible&&(t.shadow=e.shadow)}function _f(t,e){var i=e,n=t.getIndex(i,i.id),s=t.layers.indexOf(t.commandHandler.getObjectLayer(e.id)),r=t.layers[parseInt(s.toString(),10)];t.nodes.splice(Number(n),1),delete r.zIndexTable[i.zIndex],i.zIndex=r.objectZIndex+1,t.nodes.push(i),r.zIndexTable[i.zIndex]=i.id}function Qf(t,e,i){var n=i.nameTable[t.id].shape;n.children=n.children||[];var s=Fn(e),r=i.nameTable[e.id].wrapper,o=i.nameTable[t.id].wrapper;r.margin.top=r.offsetY-r.actualSize.height/2-(t.offsetY-t.actualSize.height/2),r.margin.left=r.offsetX-r.actualSize.width/2-(t.offsetX-t.actualSize.width/2),i.nameTable[e.id].parentId=t.id,n.children.push(e.id),o.children[0].children.push(i.nameTable[e.id].wrapper),qf(Zf(t,e.id,i),e,i,!1),r.margin.left<0&&(r.margin.left=10),(r.margin.top<0||n.hasHeader&&r.margin.top<n.header.height)&&(r.margin.top=10,n.hasHeader&&(r.margin.top+=n.header.height)),o.measure(new un(void 0,void 0)),o.arrange(o.desiredSize);var a={type:"PositionChanged",undoObject:{nodes:[s]},redoObject:{nodes:[Fn(e)]},category:"Internal"};(i.addHistoryEntry(a),"SVG"===i.mode)&&(e.zIndex<t.zIndex&&(i.moveSvgNode(e.id),_f(i,e)),Yy(t.id+"_groupElement").appendChild(Yy(e.id+"_groupElement")))}function Zf(t,e,i){var n,s=t.shape.children;if(s&&s.length)for(var r=0;r<s.length;r++){var o=s[parseInt(r.toString(),10)];e!==o&&(n=n?i.nameTable[""+o].wrapper.bounds.uniteRect(n):i.nameTable[""+o].wrapper.bounds)}return n||i.nameTable[""+e].wrapper.bounds}function qf(t,e,i,n){var s,r,o=i.nameTable[e.parentId],a={x:.5,y:.5},l=o.wrapper.actualSize,h=0;o.shape.hasHeader&&(h=o.shape.header.height),o.wrapper.bounds.left+e.margin.left+e.width>o.wrapper.bounds.right?(a.x=0,s=(e.wrapper.margin.left+e.wrapper.bounds.width)/l.width):e.margin.left<0&&(a.x=1,s=(e.wrapper.bounds.x+e.wrapper.bounds.width)/o.wrapper.bounds.x),o.wrapper.bounds.top+e.margin.top+e.height>o.wrapper.bounds.bottom?(a.y=0,r=(e.wrapper.margin.top+e.wrapper.bounds.height)/l.height):e.margin.top<h&&!n&&(a.y=1,r=(e.wrapper.bounds.y+e.wrapper.bounds.height)/o.wrapper.bounds.y),(s>0||r>0)&&o.constraints&ps.Resize&&i.commandHandler.scale(i.nameTable[e.parentId],s||1,r||1,a)}function Xf(t,e){var i=t.shape.children;if(i)for(var n=0,s=i;n<s.length;n++){var r=s[n],o=e.nameTable[""+r];o&&(e.updateConnectorEdges(o),o.wrapper.measure(new un(o.wrapper.width,o.wrapper.height)),o.wrapper.arrange(o.wrapper.desiredSize),o.shape.children&&o.shape.children.length&&Xf(o,e))}}function Gf(t,e,i,n){for(var s=0,r=t.children;s<r.length;s++){var o=r[s];if(o.id===e){if(t.children.splice(t.children.indexOf(o),1),!n){var a=document.getElementById(o.id+"_groupElement"),l=document.getElementById(i.element.id+"_diagramLayer");a.parentElement.removeChild(a),l.appendChild(a)}}else o.children&&Gf(o,e,i,n)}}function Kf(t,e,i){var n=t.id,s=i.nameTable[""+n],r=Fn(s);s||(i.add(t),s=i.nameTable[""+n]),t.parentId=e;var o=i.nameTable[""+e],a=o.shape;if(a.children||(a.children=[]),s&&o){s.parentId=e,(s.margin.top<=0||o.shape.hasHeader&&s.margin.top<o.shape.header.height)&&(s.margin.top=10,o.shape.hasHeader&&(s.margin.top+=o.shape.header.height)),s.margin.left<=0&&(s.margin.left=10);var l=o.offsetX-o.width*o.pivot.x+(s.margin.left+s.width*s.pivot.x),h=o.offsetY-o.height*o.pivot.y+(s.margin.top+s.height*s.pivot.y);s.offsetX===l&&s.offsetY===h||(s.offsetX=l,s.offsetY=h);var c=a.children;if(c.indexOf(n)<0&&c.push(n),o.wrapper.children.push(s.wrapper),o.wrapper.measure(new un),o.wrapper.arrange(o.wrapper.desiredSize),i.refreshDiagramLayer(),!(i.diagramActions&Is.UndoRedo||i.historyManager.currentEntry&&"CollectionChanged"===i.historyManager.currentEntry.type)){var d={type:"PositionChanged",undoObject:{nodes:[r]},redoObject:{nodes:[Fn(s)]},category:"Internal"};i.addHistoryEntry(d)}if("SVG"===i.mode)Yy(e+"_groupElement").appendChild(Yy(t.id+"_groupElement"))}}function Jf(t,e){var i=t.id,n=e.nameTable[t.parentId],s=n.shape.children;Gf(n.wrapper,i,e,!0);var r=s.indexOf(i);s.splice(r,1),t.parentId="",e.refreshDiagramLayer(),e.updateSelector()}var $f=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ty=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ey=function(t){if(t)switch(t.type){case"Basic":default:return ly;case"Flow":return hy;case"Path":return ny;case"Image":return oy;case"Text":return ay;case"Bpmn":return Cy;case"Native":return sy;case"HTML":return ry;case"UmlActivity":return Iy;case"UmlClassifier":return Ay;case"SwimLane":return zy;case"Container":return t.header||(t.hasHeader=!1),Py}return ly},iy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),ty([jt("Basic")],e.prototype,"type",void 0),e}(re),ny=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"Path"},ty([jt("Path")],e.prototype,"type",void 0),ty([jt("")],e.prototype,"data",void 0),e}(iy),sy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"Native"},ty([jt("Native")],e.prototype,"type",void 0),ty([jt("")],e.prototype,"content",void 0),ty([jt("Stretch")],e.prototype,"scale",void 0),e}(iy),ry=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"Html"},ty([jt("HTML")],e.prototype,"type",void 0),ty([jt("")],e.prototype,"content",void 0),e}(iy),oy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"Image"},ty([jt("Image")],e.prototype,"type",void 0),ty([jt("")],e.prototype,"source",void 0),ty([jt("None")],e.prototype,"scale",void 0),ty([jt("None")],e.prototype,"align",void 0),e}(iy),ay=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"Text"},ty([jt("Text")],e.prototype,"type",void 0),ty([jt("")],e.prototype,"content",void 0),ty([Bt({},Os)],e.prototype,"margin",void 0),e}(iy),ly=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"BasicShape"},ty([jt("Basic")],e.prototype,"type",void 0),ty([jt("Rectangle")],e.prototype,"shape",void 0),ty([jt(0)],e.prototype,"cornerRadius",void 0),ty([Rt([],fn)],e.prototype,"points",void 0),e}(iy),hy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"FlowShape"},ty([jt("Flow")],e.prototype,"type",void 0),ty([jt("Terminator")],e.prototype,"shape",void 0),e}(iy),cy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"BpmnGateway"},ty([jt("None")],e.prototype,"type",void 0),e}(re),dy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"BpmnDataObject"},ty([jt("None")],e.prototype,"type",void 0),ty([jt(!1)],e.prototype,"collection",void 0),e}(re),py=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),ty([jt("None")],e.prototype,"type",void 0),ty([jt("None")],e.prototype,"loop",void 0),ty([jt(!1)],e.prototype,"call",void 0),ty([jt(!1)],e.prototype,"compensation",void 0),e}(re),uy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"BpmnEvent"},ty([jt("Start")],e.prototype,"event",void 0),ty([jt("None")],e.prototype,"trigger",void 0),e}(re),gy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"BpmnSubEvent"},ty([jt("None")],e.prototype,"trigger",void 0),ty([jt("Start")],e.prototype,"event",void 0),ty([jt("")],e.prototype,"id",void 0),ty([Bt({},fn)],e.prototype,"offset",void 0),ty([Rt([],Xc)],e.prototype,"annotations",void 0),ty([Rt([],Wc)],e.prototype,"ports",void 0),ty([jt()],e.prototype,"width",void 0),ty([jt()],e.prototype,"height",void 0),ty([Bt({},Os)],e.prototype,"margin",void 0),ty([jt("Center")],e.prototype,"horizontalAlignment",void 0),ty([jt("Center")],e.prototype,"verticalAlignment",void 0),ty([jt(!0)],e.prototype,"visible",void 0),e}(re),my=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),ty([Bt({id:"success",event:"End",offset:{x:1,y:.5}},gy)],e.prototype,"success",void 0),ty([Bt({id:"failure",event:"Intermediate",trigger:"Error",offset:{x:.25,y:1}},gy)],e.prototype,"failure",void 0),ty([Bt({id:"cancel",event:"Intermediate",trigger:"Cancel",offset:{x:.75,y:1}},gy)],e.prototype,"cancel",void 0),e}(re),fy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),ty([jt("None")],e.prototype,"type",void 0),ty([jt(!1)],e.prototype,"adhoc",void 0),ty([jt("Default")],e.prototype,"boundary",void 0),ty([jt(!1)],e.prototype,"compensation",void 0),ty([jt("None")],e.prototype,"loop",void 0),ty([jt(!0)],e.prototype,"collapsed",void 0),ty([Rt([],gy)],e.prototype,"events",void 0),ty([Bt({},my)],e.prototype,"transaction",void 0),ty([jt(void 0)],e.prototype,"processes",void 0),e}(re),yy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"BpmnActivity"},ty([jt("Task")],e.prototype,"activity",void 0),ty([Bt({},py)],e.prototype,"task",void 0),ty([Bt({},fy)],e.prototype,"subProcess",void 0),e}(re),vy=function(t){function e(e,i,n,s){return t.call(this,e,i,n,s)||this}return $f(e,t),e.prototype.getClassName=function(){return"BpmnAnnotation"},ty([jt("")],e.prototype,"text",void 0),ty([jt("")],e.prototype,"id",void 0),ty([jt(0)],e.prototype,"angle",void 0),ty([jt()],e.prototype,"height",void 0),ty([jt()],e.prototype,"width",void 0),ty([jt(0)],e.prototype,"length",void 0),e}(re),by=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),ty([jt("")],e.prototype,"textAnnotationTarget",void 0),ty([jt("Auto")],e.prototype,"textAnnotationDirection",void 0),e}(re),Cy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"BpmnShape"},ty([jt("Bpmn")],e.prototype,"type",void 0),ty([jt("Event")],e.prototype,"shape",void 0),ty([Bt({},uy)],e.prototype,"event",void 0),ty([Bt({},cy)],e.prototype,"gateway",void 0),ty([Bt({},dy)],e.prototype,"dataObject",void 0),ty([Bt({},yy)],e.prototype,"activity",void 0),ty([Bt({},vy)],e.prototype,"annotation",void 0),ty([Rt([],vy)],e.prototype,"annotations",void 0),ty([Bt({},by)],e.prototype,"textAnnotation",void 0),e}(iy),Iy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"UmlActivityShape"},ty([jt("UmlActivity")],e.prototype,"type",void 0),ty([jt("Action")],e.prototype,"shape",void 0),e}(iy),My=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"MethodArguments"},ty([jt("")],e.prototype,"name",void 0),ty([jt("")],e.prototype,"type",void 0),ty([Bt({},Vs)],e.prototype,"style",void 0),e}(re),Sy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"UmlClassAttribute"},ty([jt("Public")],e.prototype,"scope",void 0),ty([jt(!1)],e.prototype,"isSeparator",void 0),ty([Bt({fill:"#F9F9F9",strokeColor:"#CCCCCC"},Hs)],e.prototype,"separatorStyle",void 0),e}(My),xy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"UmlClassMethod"},ty([Rt([],My)],e.prototype,"parameters",void 0),e}(Sy),wy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"UmlClass"},ty([jt("")],e.prototype,"name",void 0),ty([Rt([],Sy)],e.prototype,"attributes",void 0),ty([Rt([],xy)],e.prototype,"methods",void 0),ty([Bt({},Vs)],e.prototype,"style",void 0),e}(re),Dy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"UmlInterface"},ty([jt(!1)],e.prototype,"isSeparator",void 0),ty([Bt({fill:"#F9F9F9",strokeColor:"#CCCCCC"},Hs)],e.prototype,"separatorStyle",void 0),e}(wy),Ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"UmlEnumerationMember"},ty([jt("")],e.prototype,"name",void 0),ty([jt("")],e.prototype,"value",void 0),ty([jt(!1)],e.prototype,"isSeparator",void 0),ty([Bt({fill:"#F9F9F9",strokeColor:"#CCCCCC"},Hs)],e.prototype,"separatorStyle",void 0),ty([Bt({},Vs)],e.prototype,"style",void 0),e}(re),Ty=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"UmlEnumeration"},ty([jt("")],e.prototype,"name",void 0),ty([Rt([],Ey)],e.prototype,"members",void 0),ty([Bt({},Vs)],e.prototype,"style",void 0),e}(re),Ay=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"UmlClassifierShape"},ty([jt("UmlClassifier")],e.prototype,"type",void 0),ty([Bt({},wy)],e.prototype,"classShape",void 0),ty([Bt({},Dy)],e.prototype,"interfaceShape",void 0),ty([Bt({},Ty)],e.prototype,"enumerationShape",void 0),ty([jt("Class")],e.prototype,"classifier",void 0),e}(iy),Ny=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}$f(e,t),e.prototype.getClassName=function(){return"DiagramShape"},ty([jt("Basic")],e.prototype,"type",void 0),ty([jt("Rectangle")],e.prototype,"basicShape",void 0),ty([jt("Terminator")],e.prototype,"flowShape",void 0),ty([jt("Event")],e.prototype,"bpmnShape",void 0),ty([jt("Action")],e.prototype,"umlActivityShape",void 0),ty([jt("")],e.prototype,"data",void 0),ty([jt("")],e.prototype,"content",void 0),ty([jt("")],e.prototype,"textContent",void 0),ty([jt("Stretch")],e.prototype,"scale",void 0),ty([jt("")],e.prototype,"source",void 0),ty([jt("None")],e.prototype,"align",void 0),ty([Bt({},Os)],e.prototype,"margin",void 0),ty([jt(0)],e.prototype,"cornerRadius",void 0),ty([Rt([],fn)],e.prototype,"points",void 0),ty([Bt({},dy)],e.prototype,"dataObject",void 0),ty([Bt({},uy)],e.prototype,"event",void 0),ty([Bt({},cy)],e.prototype,"gateway",void 0),ty([Rt([],vy)],e.prototype,"annotations",void 0),ty([Bt({},yy)],e.prototype,"activity",void 0),ty([Bt({},vy)],e.prototype,"annotation",void 0),ty([Bt({},Ty)],e.prototype,"enumerationShape",void 0),ty([jt("Class")],e.prototype,"classifier",void 0),ty([Bt({},wy)],e.prototype,"classShape",void 0),ty([Bt({},Dy)],e.prototype,"interfaceShape",void 0)}(re),function(t){function e(e,i,n,s){var r,o=t.call(this,e,i,n,s)||this;return o.isCanvasUpdate=!1,o.status="None",o.parentId="",o.processId="",o.umlIndex=-1,o.outEdges=[],o.inEdges=[],o.isHeader=!1,o.isLane=!1,o.isPhase=!1,o.laneGrids=[],o.children&&o.children.length>0&&((r=n).style&&r.style.fill||(o.style.fill="transparent"),r.style&&r.style.strokeColor||(o.style.strokeColor="transparent")),o.shape&&"UmlActivity"===o.shape.type&&mm(n,o),!o.shape||"SwimLane"!==o.shape.type&&"Container"!==o.shape.type||pm(n,o),o.ports&&o.ports.length&&function(t){for(var e=0;e<t.ports.length;e++)t.ports[parseInt(e.toString(),10)].inEdges=[],t.ports[parseInt(e.toString(),10)].outEdges=[]}(o),o}return $f(e,t),Object.defineProperty(e.prototype,"actualSize",{get:function(){return null!==this.wrapper?this.wrapper.actualSize:new un(this.width||0,this.height||0)},enumerable:!0,configurable:!0}),e.prototype.init=function(t){var e,i;e="SwimLane"!==this.shape.type?new Ws:new Vp;switch(this.shape.changedProperties={},this.shape.oldProperties={},this.shape.type){case"Path":if(x()||"Freehand"!==this.type){var n=new Xs;n.data=this.shape.data,e=n}else{(l=new Xs).data=bn(this.shape.points),e=l}break;case"Image":var s=new Ks;s.source=this.shape.source,s.imageAlign=this.shape.align,s.imageScale=this.shape.scale,e=s;break;case"Text":var r=new Zs;r.content=this.shape.content,e=r,i=this.style,e.style=i;break;case"Basic":if(x()||"Rectangle"!==this.shape.shape)if(x()||"Polygon"!==this.shape.shape){var o=new Xs,a=tr(this.shape.shape);o.data=a,e=o}else{var l;(l=new Xs).data=vn(this.shape.points),e=l}else(e=o=new Ws).cornerRadius=this.shape.cornerRadius;break;case"Flow":var h=new Xs,c=nd(this.shape.shape);h.data=c,e=h;break;case"UmlActivity":e=function(t,e,i){var n=i.shape.shape,s=Jg(n);switch(t.data=s,e=t,n){case"StructuredNode":if(i.annotations)for(var r=0;r<i.annotations.length;r++)i.annotations[parseInt(r.toString(),10)].content="<<"+i.annotations[parseInt(r.toString(),10)].content+">>";e=t;break;case"FinalNode":e=Fm(i)}return e}(new Xs,e,this);break;case"Bpmn":if(t.bpmnModule){this.shape.activity&&"SubProcess"===this.shape.activity.activity&&(this.flip=ss.None),e=t.bpmnModule.initBPMNContent(e,this,t),this.wrapper.elementActions=this.wrapper.elementActions|us.ElementIsGroup;var d=this.shape.activity.subProcess;if(d.processes&&d.processes.length)for(var p=0,u=this.shape.activity.subProcess.processes;p<u.length;p++){var g=u[p];!t.nameTable[""+g]||t.nameTable[""+g].processId&&t.nameTable[""+g].processId!==this.id||(t.nameTable[""+g].processId=this.id,d.collapsed&&t.updateElementVisibility(t.nameTable[""+g].wrapper,t.nameTable[""+g],!d.collapsed),e.children.push(t.nameTable[""+g].wrapper))}}else console.warn('[WARNING] :: Module "BpmnDiagrams" is not available in Diagram component! You either misspelled the module name or forgot to load it.');break;case"Native":var m=new hr(this.id,t.element.id);m.content=this.shape.content,m.scale=this.shape.scale,e=m;break;case"HTML":var f=new sp(this.id,t.element.id,void 0,t.nodeTemplate);!this.shape.content||"string"!=typeof this.shape.content&&t.isReact?t.nodeTemplate&&(f.isTemplate=!0,f.template=f.content=lv(f,!0,this)):f.content=this.shape.content,this.shape.content&&"function"==typeof this.shape.content&&t.isReact&&(f.isTemplate=!0,f.templateFn=Hi(this.shape.content),f.template=f.content=lv(f,!0,this)),e=f;break;case"UmlClassifier":e=jf(e,this,t);break;case"Container":this.constraints|=ps.ReadOnly|ps.AllowDrop,this.flip=ss.None,e=Wf(e,this,t);break;case"SwimLane":this.annotations=[],this.ports=[],e.cellStyle.fill="none",e.cellStyle.strokeColor="none",this.container={type:"Grid",orientation:this.shape.orientation},e.id=this.id,this.container.orientation=this.shape.orientation,this.constraints|=ps.HideThumbs,Qp(e,t,this)}return e.id=this.id+"_content",e.relativeMode="Object","Basic"===this.shape.type&&"Rectangle"===this.shape.shape?e.shapeType="Rectangle":e.shapeType="Others",void 0!==this.width&&(e.width=this.width),e.horizontalAlignment="Stretch",void 0!==this.height&&(e.height=this.height),void 0!==this.minHeight&&(e.minHeight=this.minHeight),void 0!==this.maxHeight&&(e.maxHeight=this.maxHeight),void 0!==this.minWidth&&(e.minWidth=this.minWidth),void 0!==this.maxWidth&&(e.maxWidth=this.maxWidth),x()||"Rectangle"!==this.shape.shape||this.shape.cornerRadius||(e.isRectElement=!0),e.verticalAlignment="Stretch",this.shape instanceof ay&&(e.margin=this.shape.margin),!vp(this)||"Freehand"===this.type||"Bpmn"===this.shape.type&&"TextAnnotation"!==this.shape.shape||0!==(this.constraints&ps.Shadow)&&this.visible&&(e.shadow=this.shadow),"Bpmn"===this.shape.type&&(x()||"Message"!==this.shape.shape)&&(x()||"DataSource"!==this.shape.shape)||"UmlActivity"===this.shape.type&&(x()||"FinalNode"===this.shape.shape)||"Text"!==this.shape.type&&(e.style=this.style,this.oldGradientValue=this.style.gradient?Fn(this.style.gradient):null),(this.wrapper.elementActions&us.ElementIsGroup||this.flip!==ss.Horizontal)&&this.flip!==ss.Vertical||(e.flip=this.flip,e.flipMode=this.flipMode),e},e.prototype.initContainer=function(){var t;if(this.id||(this.id=Hn()),!this.container||this.shape instanceof zy||"Container"===this.shape.type)t=this.children?new _s:new $s;else switch(this.container.type){case"Canvas":t=new $s;break;case"Stack":t=new Pf;break;case"Grid":(t=new Vp).setDefinitions(this.rows,this.columns)}return t.id=this.id,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t.visible=this.visible,t.horizontalAlignment=this.horizontalAlignment,t.verticalAlignment=this.verticalAlignment,this.container&&"SwimLane"!==this.shape.type&&(t.width=this.width,t.height=this.height,"Stack"===this.container.type&&(t.orientation=this.container.orientation)),t.style.fill=this.backgroundColor,t.style.strokeColor=this.borderColor,t.style.strokeWidth=this.borderWidth,t.rotateAngle=this.rotateAngle,t.minHeight=this.minHeight,t.minWidth=this.minWidth,t.maxHeight=this.maxHeight,t.maxWidth=this.maxWidth,t.pivot=this.pivot,t.margin=this.margin,t.flip=this.flip,t.flipMode=this.flipMode,this.wrapper=t,t},e.prototype.initPorts=function(t,e){for(var i=0;this.ports,i<this.ports.length;i++)this.initPort(t,e,this.ports[parseInt(i.toString(),10)])},e.prototype.initPort=function(t,e,i){var n,s,r=this.wrapper;n=this.initPortWrapper(i,this);var o=is(t);o&&(s=o(n,this)),n.description=s||n.id,n.inversedAlignment=r.inversedAlignment,n.elementActions=n.elementActions|us.ElementIsPort,e.children.push(n)},e.prototype.getIconOffet=function(t,e){var i,n;return"BottomToTop"===t.orientation?(i=e.offset.x,n=1-e.offset.y):"LeftToRight"===t.orientation?(i=e.offset.y,n=e.offset.x):"RightToLeft"===t.orientation?(i=1-e.offset.y,n=e.offset.x):(i=e.offset.x,n=e.offset.y),{x:i,y:n}},e.prototype.initIcons=function(t,e,i,n){var s,r=this.wrapper,o=this.isExpanded?this.expandIcon:this.collapseIcon;if("None"!==o.shape){var a=new $s;a.float=!0;a.id=this.id+"_icon_content",a.children=[],a.height=o.height,a.width=o.width,a.style.strokeColor="transparent",a.margin=o.margin,a.horizontalAlignment="Center",a.verticalAlignment="Center",a.visible=this.visible,a.cornerRadius=o.cornerRadius,s=this.getIconOffet(e,o),a.setOffsetWithRespectToBounds(s.x,s.y,"Fraction"),a.relativeMode="Point",this.initIconSymbol(o,a,t,n);var l=void 0,h=is(t);h&&(l=h(o,this)),a.description=l||a.id,a.inversedAlignment=r.inversedAlignment,i.children.push(a)}},e.prototype.initFixedUserHandles=function(t,e,i){var n;if(""===t.pathData&&e)(n=new sp(this.id,i,void 0,e)).isTemplate=!0,n.template=lv(n,!0,t),t.id=t.id||Hn(),n.id=this.id+"_"+t.id;else{var s=this.wrapper;(n=new $s).children=[],t.id=t.id||Hn(),n.id=this.id+"_"+t.id;var r=Em(t,n);n.children.push(r),n.inversedAlignment=s.inversedAlignment}n.float=!0,n.height=t.height,n.width=t.width,n.style.strokeColor=t.handleStrokeColor,n.style.fill=t.fill,n.style.strokeWidth=t.handleStrokeWidth,n.margin=t.margin,n.visible=t.visibility,n.cornerRadius=t.cornerRadius,n.horizontalAlignment="Center",n.verticalAlignment="Center";var o=this.getfixedUserHandleOffet(t);return n.setOffsetWithRespectToBounds(o.x,o.y,"Fraction"),n.relativeMode="Point",n.description=n.id,n},e.prototype.getfixedUserHandleOffet=function(t){return{x:t.offset.x,y:t.offset.y}},e.prototype.initAnnotations=function(t,e,i,n,s){for(var r,o=0;this.annotations,o<this.annotations.length;o++){r=this.initAnnotationWrapper(this.annotations[parseInt(o.toString(),10)],i,n,o,s);var a=void 0,l=is(t);l&&(a=l(r,this)),r.description=a||r.id,r.inversedAlignment=e.inversedAlignment,e.children.push(r)}},e.prototype.initPortWrapper=function(t,e){t.id=t.id||Hn();var i=new Xs;i.height=t.height,i.width=t.width,i.connectionDirection=t.connectionDirection,t.shape=t.shape||"Square";var n="Custom"===t.shape?t.pathData:Kc(t.shape);i.id=this.id+"_"+t.id,i.margin=t.margin,i.data=n,e&&"Bpmn"===e.shape.type&&(i.flip=this.flip);var s=t.style;return i.style={fill:s.fill,strokeColor:s.strokeColor,gradient:null,opacity:s.opacity,strokeDashArray:s.strokeDashArray,strokeWidth:s.strokeWidth},i.horizontalAlignment=t.horizontalAlignment,i.verticalAlignment=t.verticalAlignment,i="None"!==this.flipMode&&"Label"!==this.flipMode&&"LabelText"!==this.flipMode&&"LabelAndLabelText"!==this.flipMode?uf(i,this.flip,t):uf(i,ss.None,t),void 0===this.width&&void 0===this.height||(i.float=!0),i.relativeMode="Point",i.visible=!(!Gm(t,rs.Visible)||Gm(t,rs.Hover)||Gm(t,rs.Connect)),i.elementActions=i.elementActions|us.ElementIsPort,i},e.prototype.initAnnotationWrapper=function(t,e,i,n,s){t.content=t.content||"",t.id=t.id||n+"annotation"||0;var r,o=t;if(e&&(t.template||"Template"===t.annotationType||s&&""===t.content)){r=new sp(this.id,e,t.id,s);var a=document.getElementById(e).ej2_instances[0];t.template&&"function"==typeof t.template&&a.isReact&&(r.templateFn=Hi(t.template),r.isTemplate=!0),r=gv(r,t,s,a)}else{(r=new Zs).canMeasure=!i;var l=t.style,h=t.hyperlink.link?t.hyperlink:void 0;r.style={fill:l.fill,strokeColor:l.strokeColor,strokeWidth:l.strokeWidth,bold:l.bold,textWrapping:l.textWrapping,color:h?h.color||r.hyperlink.color:l.color,whiteSpace:l.whiteSpace,fontFamily:l.fontFamily,fontSize:l.fontSize,italic:l.italic,gradient:null,opacity:l.opacity,strokeDashArray:l.strokeDashArray,textAlign:l.textAlign,textOverflow:t.style.textOverflow,textDecoration:h?h.textDecoration||r.hyperlink.textDecoration:l.textDecoration},r.hyperlink.link=t.hyperlink.link||void 0,r.hyperlink.hyperlinkOpenState=t.hyperlink.hyperlinkOpenState||void 0,r.hyperlink.content=t.hyperlink.content||void 0,r.hyperlink.textDecoration=t.hyperlink.textDecoration||void 0,r.content=h?h.content||r.hyperlink.link:t.content}return r.constraints=t.constraints,r.height=t.height,r.width=t.width,r.visible=t.visibility,r.annotationVisibility=r.visible?"Visible":"Collapsed",r.rotateAngle=t.rotateAngle,r.rotationReference=t.rotationReference,r.id=this.id+"_"+t.id,void 0===this.width||t.template||void 0===t.width&&("Wrap"!==t.style.textWrapping&&"WrapWithOverflow"!==t.style.textWrapping||(r.width=this.width)),r.margin=t.margin,r.horizontalAlignment=t.horizontalAlignment,r.verticalAlignment=t.verticalAlignment,r.setOffsetWithRespectToBounds(o.offset.x,o.offset.y,"Fraction"),void 0===this.width&&void 0===this.height||(r.float=!0),r.relativeMode="Point",r},e.prototype.initIconContainer=function(t,e){var i=new Ws;return i.id=e.id+"_rect",i.height=t.height,i.width=t.width,i.visible=e.visible,i.margin=t.margin,i.cornerRadius=t.cornerRadius,i.style={fill:t.fill,strokeColor:t.borderColor,strokeWidth:t.borderWidth},i.setOffsetWithRespectToBounds(.5,.5,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",i.relativeMode="Object",i.description=i.description||"Click here to expand or collapse",i},e.prototype.initIconSymbol=function(t,e,i,n){var s;if(e.children.push(this.initIconContainer(t,e)),"Template"===t.shape)(s=new hr(this.id,n)).content=t.content,s.height=10,s.width=10;else{(s=new Xs).data=function(t){var e;switch(t.shape){case"Minus":e="M0,50 L100,50";break;case"Plus":e="M0,-50 L0,50 M-50,0 L50,0";break;case"ArrowUp":e="M0,100 L50,0 L100,100 Z";break;case"ArrowDown":e="M0,0 L50,100 L100,0 Z";break;case"Path":e=t.pathData}return e}(t);var r=Vy(s.data);s.height=r.height<10?r.height:10-(t.padding.bottom+t.padding.top),s.width=r.width<10?r.width:10-(t.padding.left+t.padding.right)}s.id=e.id+"_shape",s.horizontalAlignment="Center",s.verticalAlignment="Center",s.visible=e.visible,s.visible=e.visible,s.style={fill:"black",strokeColor:t.iconColor,strokeWidth:t.borderWidth},s.setOffsetWithRespectToBounds(.5,.5,"Fraction"),s.relativeMode="Object",s.description=e.description||"Click here to expand or collapse",e.children.push(s)},e.prototype.getClassName=function(){return"Node"},ty([Rt([],Xc)],e.prototype,"annotations",void 0),ty([jt(0)],e.prototype,"offsetX",void 0),ty([Bt({},Ff)],e.prototype,"layoutInfo",void 0),ty([jt(0)],e.prototype,"offsetY",void 0),ty([Rt([],Wc)],e.prototype,"ports",void 0),ty([jt(!0)],e.prototype,"isExpanded",void 0),ty([Rt([],lp)],e.prototype,"fixedUserHandles",void 0),ty([Bt({},kf)],e.prototype,"expandIcon",void 0),ty([Bt({},kf)],e.prototype,"collapseIcon",void 0),ty([Bt({x:.5,y:.5},fn)],e.prototype,"pivot",void 0),ty([jt()],e.prototype,"width",void 0),ty([jt()],e.prototype,"height",void 0),ty([jt()],e.prototype,"minWidth",void 0),ty([jt()],e.prototype,"minHeight",void 0),ty([jt()],e.prototype,"maxWidth",void 0),ty([jt()],e.prototype,"maxHeight",void 0),ty([jt(0)],e.prototype,"rotateAngle",void 0),ty([Bt({fill:"white"},Vs)],e.prototype,"style",void 0),ty([jt("transparent")],e.prototype,"backgroundColor",void 0),ty([jt("none")],e.prototype,"borderColor",void 0),ty([jt(0)],e.prototype,"borderWidth",void 0),ty([jt()],e.prototype,"data",void 0),ty([Ht(ey)],e.prototype,"shape",void 0),ty([Bt({},Jd)],e.prototype,"previewSize",void 0),ty([Bt({},Jd)],e.prototype,"dragSize",void 0),ty([jt(null)],e.prototype,"wrapper",void 0),ty([jt(ps.Default)],e.prototype,"constraints",void 0),ty([Bt({},ks)],e.prototype,"shadow",void 0),ty([jt()],e.prototype,"children",void 0),ty([Bt({left:0,right:0,top:0,bottom:0},Os)],e.prototype,"padding",void 0),ty([jt(null)],e.prototype,"container",void 0),ty([jt("Left")],e.prototype,"horizontalAlignment",void 0),ty([jt("Top")],e.prototype,"verticalAlignment",void 0),ty([jt()],e.prototype,"rows",void 0),ty([jt()],e.prototype,"columns",void 0),ty([jt()],e.prototype,"rowIndex",void 0),ty([jt()],e.prototype,"columnIndex",void 0),ty([jt()],e.prototype,"rowSpan",void 0),ty([jt()],e.prototype,"columnSpan",void 0),ty([jt("")],e.prototype,"branch",void 0),e}(ip)),Ly=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),ty([jt("")],e.prototype,"id",void 0),ty([Bt({},Xc)],e.prototype,"annotation",void 0),ty([Bt({fill:"#FFFFFF",strokeColor:"#CCCCCC"},Hs)],e.prototype,"style",void 0),ty([jt(50)],e.prototype,"height",void 0),ty([jt(50)],e.prototype,"width",void 0),e}(re),Oy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"Lane"},ty([jt("")],e.prototype,"id",void 0),ty([Bt({fill:"#F9F9F9",strokeColor:"#CCCCCC"},Hs)],e.prototype,"style",void 0),ty([Rt([],Ny)],e.prototype,"children",void 0),ty([jt(100)],e.prototype,"height",void 0),ty([jt(100)],e.prototype,"width",void 0),ty([Bt({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Ly)],e.prototype,"header",void 0),ty([jt(!0)],e.prototype,"canMove",void 0),ty([jt()],e.prototype,"addInfo",void 0),e}(re),ky=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.getClassName=function(){return"Phase"},ty([jt("")],e.prototype,"id",void 0),ty([Bt({fill:"#FFFFFF",strokeColor:"#CCCCCC"},Hs)],e.prototype,"style",void 0),ty([Bt({annotation:{content:"Phase"}},Ly)],e.prototype,"header",void 0),ty([jt(100)],e.prototype,"offset",void 0),ty([jt()],e.prototype,"addInfo",void 0),e}(re),zy=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.padding=20,e.hasHeader=!0,e}return $f(e,t),e.prototype.getClassName=function(){return"SwimLane"},ty([jt("SwimLane")],e.prototype,"type",void 0),ty([jt(20)],e.prototype,"phaseSize",void 0),ty([Rt([],ky)],e.prototype,"phases",void 0),ty([jt("Horizontal")],e.prototype,"orientation",void 0),ty([Rt([],Oy)],e.prototype,"lanes",void 0),ty([Bt({style:{fill:"#E7F4FF",strokeColor:"#CCCCCC"},annotation:{content:"Function"}},Ly)],e.prototype,"header",void 0),ty([jt(!1)],e.prototype,"isLane",void 0),ty([jt(!1)],e.prototype,"isPhase",void 0),e}(iy),Py=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasHeader=!0,e}return $f(e,t),e.prototype.getClassName=function(){return"Container"},ty([jt("Container")],e.prototype,"type",void 0),ty([Bt({},Ly)],e.prototype,"header",void 0),ty([jt()],e.prototype,"children",void 0),e}(iy),jy=function(){function t(){}return t.prototype.getClassName=function(){return"ChildContainer"},ty([jt("Canvas")],t.prototype,"type",void 0),ty([jt("Vertical")],t.prototype,"orientation",void 0),t}(),By=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $f(e,t),e.prototype.init=function(t){var e=new _s;if(e.measureChildren=!1,e.children=[],this.annotation){var i=this.nodes.length>0?t.nameTable[this.nodes[0].id].wrapper:t.nameTable[this.connectors[0].id].wrapper,n=t.getWrapper(i,this.annotation.id);e.children.push(n)}else if(this.nodes||this.connectors){for(var s=0;s<this.nodes.length;s++){n=t.nameTable[this.nodes[parseInt(s.toString(),10)].id].wrapper;e.children.push(n)}for(var r=0;r<this.connectors.length;r++){n=t.nameTable[this.connectors[parseInt(r.toString(),10)].id].wrapper;e.children.push(n)}}var o=t.isProtectedOnChange;return t.protectPropertyChange(!1),this.wrapper=e,t.protectPropertyChange(o),e},ty([jt(null)],e.prototype,"wrapper",void 0),ty([jt(14)],e.prototype,"handleSize",void 0),ty([Rt([],Ny)],e.prototype,"nodes",void 0),ty([Rt([],Rg)],e.prototype,"connectors",void 0),ty([jt()],e.prototype,"width",void 0),ty([jt()],e.prototype,"height",void 0),ty([jt(0)],e.prototype,"rotateAngle",void 0),ty([jt(0)],e.prototype,"offsetX",void 0),ty([jt(0)],e.prototype,"offsetY",void 0),ty([Bt({x:.5,y:.5},fn)],e.prototype,"pivot",void 0),ty([jt("CompleteIntersect")],e.prototype,"rubberBandSelectionMode",void 0),ty([Rt([],Kg)],e.prototype,"userHandles",void 0),ty([jt(as.All)],e.prototype,"constraints",void 0),ty([jt()],e.prototype,"setTooltipTemplate",void 0),ty([Rt([],Ny)],e.prototype,"selectedObjects",void 0),ty([jt(!1)],e.prototype,"canToggleSelection",void 0),e}(re);function Hy(t){var e,i=[];if("msie"===G.info.name||"edge"===G.info.name)for(var n=0;n<t.childNodes.length;n++)1===(e=t.childNodes[parseInt(n.toString(),10)]).nodeType&&i.push(e);else i=t.children;return i}var Ry={};function Vy(t){if(t){if(Ry[""+t])return Ry[""+t];var e="measureElement";window[""+e].style.visibility="visible";var i=Hy(window[""+e].children[2])[0];i.setAttribute("d",t);var n=i.getBBox(),s=new Tn(n.x,n.y,n.width,n.height);return window[""+e].style.visibility="hidden",Ry[""+t]=s,s}return new Tn(0,0,0,0)}function Uy(t,e,i,n,s){var r=new un,o=iv("span",{style:"display:inline-block; line-height: normal"});return t.bold&&(o.style.fontWeight="bold"),t.italic&&(o.style.fontStyle="italic"),void 0!==i&&(o.style.width=i.toString()+"px"),void 0!==n&&(o.style.height=n.toString()+"px"),void 0!==s&&(o.style.maxWidth=s.toString()+"px"),o.style.fontFamily=t.fontFamily,o.style.fontSize=t.fontSize+"px",o.style.color=t.color,o.textContent=e,o.style.whiteSpace=Jn(t.whiteSpace,t.textWrapping),o.style.wordBreak=void 0!==s?"break-word":Zn(t.textWrapping),document.body.appendChild(o),r.width=o.offsetWidth,r.height=o.offsetHeight,document.body.removeChild(o),r}function Fy(t,e,i,n){var s,r=0,o=0,a=!1,l=e;return 0===l.x&&0===l.y||(r=0-Number(l.x),o=0-Number(l.y)),(t.actualSize.width!==l.width||t.actualSize.height!==l.height||n)&&(r=(n&&n.width||t.actualSize.width)/Number(l.width?l.width:1),o=(n&&n.height||t.actualSize.height)/Number(l.height?l.height:1),a=!0),s=In(xn(yn(t.data)),r,o,a,l.x,l.y,0,0),a=!1,s}function Wy(t){return Yy(t).getElementsByClassName("e-diagram-layer")[0]}function Yy(t,e){var i;return e&&(i=document.getElementById(e)),"msie"===G.info.name||"edge"===G.info.name?i?i.querySelector("#"+t):document.getElementById(t):i?i.querySelector("#"+CSS.escape(t)):document.getElementById(t)}function _y(t,e,i){var n,s,r="";"native"===i?(n=tv(t),r="_content_groupElement"):"html"===i?(n=ev(t).childNodes[0],r="_html_element"):(n=Wy(s=t).getElementById(s+"_diagramLayer"),r="_groupElement");var o=e+r,a=document.getElementById(o);if(a&&n.contains(a))return Array.prototype.indexOf.call(n.childNodes,a)}function Qy(t){return Yy(t).getElementsByClassName("e-adorner-layer")[0]}function Zy(t){return Qy(t).getElementById(t+"_SelectorElement")}function qy(t){return Qy(t).getElementById(t+"_diagramAdorner")}function Xy(t){return Yy(t).getElementsByClassName("e-userHandle-layer")[0]}function Gy(t){return Yy(t).getElementsByClassName("e-native-layer")[0]}function Ky(t){return Yy(t).getElementsByClassName("e-grid-layer")[0]}function Jy(t){return Yy(t).getElementsByClassName("e-background-layer")[0].parentNode}function $y(t){return Yy(t).getElementsByClassName("e-background-layer")[0]}function tv(t){return Gy(t).getElementById(t+"_nativeLayer")}function ev(t){var e=null,i="domTable";window[i][t+"html_layer"]?e=window[i][t+"html_layer"]:(e=Yy(t).getElementsByClassName("e-html-layer")[0],window[i][t+"html_layer"]=e);return e}function iv(t,e){var i=$(t);return dv(i,e),i}function nv(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);return hv(i,e),i}function sv(t,e,i){for(var n=t;n&&!(i?n.id===e:rv(n,e));)n=n.parentNode;return n}function rv(t,e){return(" "+("object"==typeof t.className?t.className.animVal:t.className)+" ").indexOf(" "+e+" ")>-1}function ov(t,e,i){t=[];for(var n=0,s=i.length;n<s;n++)t.push({pageX:i[parseInt(n.toString(),10)].clientX,pageY:i[parseInt(n.toString(),10)].clientY,pointerId:null});return t}function av(t,e){var i=Yy(t,e);i&&i.parentNode.removeChild(i)}function lv(t,e,i){var n;if(e){n=iv("div",{style:"height: 100%; width: 100%"})}else n=document.createElementNS("http://www.w3.org/2000/svg","g");var s,r,o=lf(t),a={};o instanceof Ny?(a=o,s="nodeTemplate"):(a=o,s="annotationTemplate");var l=document.getElementById(t.diagramId).ej2_instances[0];if("string"!=typeof t.content&&"function"!=typeof t.content||t.isTemplate)if(t.isTemplate){d=void 0;if(l.isReact)d=t.getNodeTemplate()(Fn(i),l,s+"_"+("nodeTemplate"===s?i.id:t.nodeId+i.id),void 0,void 0,!1,n);else if(l.isVue||l.isVue3){d=t.getNodeTemplate()?t.getNodeTemplate()(Fn(i),l,s+"_"+("nodeTemplate"===s?i.id:t.nodeId+i.id),void 0,void 0,!1,n):(d=Hi("nodeTemplate"===s?l.nodeTemplate:l.annotationTemplate))(Fn(i),l,s+"_"+("nodeTemplate"===s?i.id:t.nodeId+i.id),void 0,void 0,!1,n)}else d=t.getNodeTemplate()(Fn(i),l,s+"_"+("nodeTemplate"===s?i.id:t.nodeId+i.id),void 0,void 0,!1);if(d)for(var h=0;h<d.length;h++)n.appendChild(d[parseInt(h.toString(),10)])}else t.content&&t.content.outerHTML&&n.appendChild(t.content);else{var c=document.getElementById(t.content);if(c)n.appendChild(c);else for(var d=void 0,p=0,u=(d=Hi(t.content))(a,l,s,"");p<u.length;p++)r=u[p],n.appendChild(r)}return t.isTemplate?n:n.cloneNode(!0)}function hv(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)t&&"style"!==i[parseInt(n.toString(),10)]?t.setAttribute(i[parseInt(n.toString(),10)],e[i[parseInt(n.toString(),10)]]):cv(t,e[i[parseInt(n.toString(),10)]])}function cv(t,e){for(var i=e.split(";"),n=0;n<i.length;n++){var s=i[parseInt(n.toString(),10)].split(":");2===s.length&&(t.style[s[0].trim()]=s[1].trim())}}function dv(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)"style"!==i[parseInt(n.toString(),10)]?t.setAttribute(i[parseInt(n.toString(),10)],e[i[parseInt(n.toString(),10)]]):cv(t,e[i[parseInt(n.toString(),10)]])}function pv(){var t="measureElement";if(window[""+t])window[""+t].usageCount+=1;else{var e=iv("div",{id:"measureElement",style:"visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;"}),i=iv("span",{style:"display:inline-block ; line-height: normal"});e.appendChild(i);var n=iv("img",{alt:"measureElementImage",src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"});e.appendChild(n);var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),e.appendChild(s);var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",""),s.appendChild(r);document.createTextNode("");var o=document.createElementNS("http://www.w3.org/2000/svg","text");o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),s.appendChild(o),window[""+t]=e,window[""+t].usageCount=1,document.body.appendChild(e);var a="measureElementCount";window[""+a]?window[""+a]++:window[""+a]=1}}function uv(t,e,i,n){return!(e.length>=1&&0===t.x)||"Clip"!==n.textOverflow&&"Ellipsis"!==n.textOverflow||"Wrap"!==n.textWrapping&&"WrapWithOverflow"!==n.textWrapping||(t.x=e[i-1]?e[i-1].x:-t.width/2),t.x}function gv(t,e,i,n){return i&&!e.template||e.template&&"function"==typeof e.template&&n.isReact?(t.isTemplate=!0,t.template=t.content=lv(t,!0,e)):t.content=e.template,t}var mv,fv,yv,vv=function(){function t(){}return t.getContext=function(t){return t.getContext("2d")},t.setCanvasSize=function(t,e,i){t&&(t.setAttribute("width",e.toString()),t.setAttribute("height",i.toString()))},t.prototype.renderGradient=function(t,e,i,n){var s,r,o;if("None"!==t.gradient.type){for(var a=0;a<t.gradient.stops.length;a++)s=void 0!==s?t.gradient.stops[parseInt(a.toString(),10)].offset:Math.max(s,t.gradient.stops[parseInt(a.toString(),10)].offset),r=void 0!==r?t.gradient.stops[parseInt(a.toString(),10)].offset:Math.min(r,t.gradient.stops[parseInt(a.toString(),10)].offset);if("Linear"===t.gradient.type){var l=t.gradient,h=l.x1,c=l.x2,d=l.y1,p=l.y2;if(l.controlParent instanceof qb&&"SVG"===l.controlParent.mode&&(h=t.width?h*t.width/100:h,c=t.width?c*t.width/100:c,d=t.height?d*t.height/100:d,p=t.height?p*t.height/100:p,h!==c&&d!==p)){var u=c-h,g=p-d,m=Math.atan2(g,u),f=m*(180/Math.PI)%360,y=(90-(f=f<0?f+360:f))*(Math.PI/180),v=u*Math.sin(m)+g*Math.cos(m);c=h+v*Math.cos(y),p=d+v*Math.sin(y)}o=e.createLinearGradient(i+h,n+d,i+c,n+p)}else{var b=t.gradient;o=e.createRadialGradient(i+b.fx,n+b.fy,0,i+b.cx,n+b.cy,b.r)}for(a=0;a<t.gradient.stops.length;a++){var C=t.gradient.stops[parseInt(a.toString(),10)],I=r<0?(s+C.offset)/(2*s):C.offset/s;o.addColorStop(I,C.color)}e.fillStyle=o}return e},t.prototype.renderShadow=function(e,i,n){void 0===n&&(n=null);var s=t.getContext(i);s.save(),s.beginPath(),s.strokeStyle=s.fillStyle=e.shadow.color,s.globalAlpha=e.shadow.opacity;var r=fn.transform({x:0,y:0},e.shadow.angle,e.shadow.distance),o=e.x+r.x,a=e.y+r.y,l=o+e.width*e.pivotX,h=a+e.height*e.pivotY;this.rotateContext(i,e.angle,l,h),n?(s.translate(o,a),this.renderPath(i,e,n),s.translate(-o,-a)):(s.rect(o,a,e.width,e.height),s.fillRect(o,a,e.width,e.height)),s.fill(),s.stroke(),s.closePath(),s.restore()},t.createCanvas=function(t,e,i){var n=iv("canvas",{id:t});return this.setCanvasSize(n,e,i),n},t.prototype.setStyle=function(e,i){var n=t.getContext(e);"none"===i.fill&&(i.fill="transparent"),"none"===i.stroke&&(i.stroke="transparent"),n.strokeStyle=i.stroke,n.lineWidth=i.strokeWidth,0===i.strokeWidth&&(n.strokeStyle="transparent"),n.globalAlpha=i.opacity;var s=[];i.dashArray&&(s=this.parseDashArray(i.dashArray)),n.setLineDash(s),i.gradient&&"None"!==i.gradient.type?"Rectangle"===i.shapeType?this.renderGradient(i,n,i.x,i.y):this.renderGradient(i,n,0,0):n.fillStyle=i.fill},t.prototype.rotateContext=function(e,i,n,s){var r=t.getContext(e);r.translate(n,s),r.rotate(i*Math.PI/180),r.translate(-n,-s)},t.prototype.setFontStyle=function(e,i){var n=t.getContext(e),s="";i.italic&&(s+="italic "),i.bold&&(s+="bold "),s+=i.fontSize+"px ",s+=i.fontFamily,n.font=s},t.prototype.parseDashArray=function(t){for(var e=[],i=-1!==t.indexOf(" ")?" ":",",n=0,s=t.split(i);n<s.length;n++){var r=s[n];e.push(Number(r))}return e},t.prototype.drawRoundedRect=function(e,i){var n=t.getContext(e);n.beginPath();var s=i.x,r=i.y,o=i.width,a=i.height,l=s+o/2,h=r+a/2;n.beginPath(),this.setStyle(e,i),n.moveTo(s,h),n.quadraticCurveTo(s,r,l,r),n.quadraticCurveTo(s+o,r,s+o,h),n.quadraticCurveTo(s+o,r+a,l,r+a),n.quadraticCurveTo(s,r+a,s,h),n.fill(),n.stroke()},t.prototype.drawRectangle=function(e,i,n,s,r,o,a,l,h,c,d){if(!0===i.visible)if(i.cornerRadius)!s&&(i.width<30||i.height<30)?this.drawRoundedRect(e,i):(i.data=function(t,e,i){var n,s,r,o="",a=[{x:0+t,y:0},{x:0+i-t,y:0},{x:0+i,y:0+t},{x:0+i,y:0+e-t},{x:0+i-t,y:0+e},{x:0+t,y:0+e},{x:0,y:0+e-t},{x:0,y:0+t}],l=[{x:0+i,y:0},{x:0+i,y:0+e},{x:0,y:0+e},{x:0,y:0}],h=0;for(o="M"+a[0].x+" "+a[0].y,r=0;r<a.length;r+=2)o+="L"+(n=a[r+1]).x+" "+n.y,s=a[r+2]||a[0],o+="Q"+l[parseInt(h.toString(),10)].x+" "+l[parseInt(h.toString(),10)].y+" "+s.x+" "+s.y,h++;return o}(i.cornerRadius,i.height,i.width),this.drawPath(e,i,n,r,o,a,void 0,c,d));else{var p=t.getContext(e);i.shadow&&this.renderShadow(i,e),p.save(),p.beginPath();i.cornerRadius;var u=i.x+i.width*i.pivotX,g=i.y+i.height*i.pivotY,m=i.isImage?-i.angle:i.angle;this.rotateContext(e,m,u,g),this.setStyle(e,i),p.rect(i.x,i.y,i.width,i.height),p.fillRect(i.x,i.y,i.width,i.height),p.fill(),p.stroke(),p.closePath(),p.restore()}},t.prototype.drawPath=function(e,i,n,s,r,o,a,l,h){var c=[];c=Cn(c=yn(i.data)),i.shadow&&this.renderShadow(i,e,c);var d=t.getContext(e);d.save(),d.beginPath();var p=i.y+i.height*i.pivotY,u=i.x+i.width*i.pivotX;this.applyFlipAndRotate(d,i,e,u,p,l,h),this.setStyle(e,i),d.translate(i.x,i.y),this.renderPath(e,i,c),d.fill(),d.translate(-i.x,-i.y),d.stroke(),d.restore()},t.prototype.renderPath=function(e,i,n){if(!0===i.visible){var s,r=0,o=t.getContext(e),a=void 0,l=void 0,h=void 0,c=void 0,d=void 0,p=void 0,u=void 0,g=void 0,m=void 0,f=n;for(u=0,g=0,m=0,s=f.length;m<s;++m){var y=f[parseInt(m.toString(),10)],v=y.command;switch("x1"in y&&(h=y.x1),"x2"in y&&(d=y.x2),"y1"in y&&(c=y.y1),"y2"in y&&(p=y.y2),"x"in y&&(u=y.x),"y"in y&&(g=y.y),v){case"M":o.moveTo(u,g),y.x=u,y.y=g;break;case"L":o.lineTo(u,g),y.x=u,y.y=g;break;case"C":o.bezierCurveTo(h,c,d,p,u,g),y.x=u,y.y=g,y.x1=h,y.y1=c,y.x2=d,y.y2=p;break;case"Q":o.quadraticCurveTo(h,c,u,g),y.x=u,y.y=g,y.x1=h,y.y1=c;break;case"A":var b={x:a,y:l},C=void 0,I=void 0;i.arc&&i.arc.length>0?(C=0===y.r1?i.arc[parseInt(r.toString(),10)].r1:y.r1,I=0===y.r2?i.arc[parseInt(r.toString(),10)].r2:y.r2,r++):(C=y.r1,I=y.r2);var M=y.angle*(Math.PI/180),S=y.largeArc,x=y.sweep,w={x:u,y:g},D={x:Math.cos(M)*(b.x-w.x)/2+Math.sin(M)*(b.y-w.y)/2,y:-Math.sin(M)*(b.x-w.x)/2+Math.cos(M)*(b.y-w.y)/2},E=Math.pow(D.x,2)/Math.pow(C,2)+Math.pow(D.y,2)/Math.pow(I,2);E>1&&(C*=Math.sqrt(E),I*=Math.sqrt(E));var T=Math.pow(I,2)*Math.pow(D.x,2),A=(S===x?-1:1)*Math.sqrt((Math.pow(C,2)*Math.pow(I,2)-Math.pow(C,2)*Math.pow(D.y,2)-T)/(Math.pow(C,2)*Math.pow(D.y,2)+Math.pow(I,2)*Math.pow(D.x,2)));isNaN(A)&&(A=0);var N={x:A*C*D.y/I,y:A*-I*D.x/C},L={x:(b.x+w.x)/2+Math.cos(M)*N.x-Math.sin(M)*N.y,y:(b.y+w.y)/2+Math.sin(M)*N.x+Math.cos(M)*N.y},O=this.a([1,0],[(D.x-N.x)/C,(D.y-N.y)/I]),k=[(D.x-N.x)/C,(D.y-N.y)/I],z=[(-D.x-N.x)/C,(-D.y-N.y)/I],P=this.a(k,z);this.r(k,z)<=-1&&(P=Math.PI),this.r(k,z)>=1&&(P=0);var j=O+(x?1:-1)*(P/2);Math.cos(j),Math.sin(j);if(y.centp=L,y.xAxisRotation=M,y.rx=C,y.ry=I,y.a1=O,y.ad=P,y.sweep=x,null!=o){var B=C>I?C:I,H=C>I?1:C/I,R=C>I?I/C:1;o.save(),o.translate(L.x,L.y),o.rotate(M),o.scale(H,R),o.arc(0,0,B,O,O+P,!x),o.scale(1/H,1/R),o.rotate(-M),o.translate(-L.x,-L.y),o.restore()}break;case"Z":case"z":o.closePath(),u=a,g=l}a=u,l=g}}},t.prototype.drawText=function(e,i,n,s,r,o,a,l){if(i.content&&!0===i.visible){var h=a.groupElement,c=t.getContext(e);c.save(),this.setStyle(e,i),o&&(i.fontSize*=o);var d=i.x+i.width*i.pivotX,p=i.y+i.height*i.pivotY;this.applyFlipAndRotate(c,i,e,d,p,a,l),this.setFontStyle(e,i);var u,g=0;u=i.childNodes;var m=i.wrapBounds;if(c.fillStyle=i.color,m){var f=this.labelAlign(i,m,u);for(g=0;g<u.length;g++){var y=u[parseInt(g.toString(),10)];y.x=uv(y,u,g,i);var v=f.x+(o?y.x*o:y.x)-m.x,b=f.y+(o?y.dy*o:y.dy)*g+.8*i.fontSize;if(m.width>i.width&&"Wrap"!==i.textOverflow&&"NoWrap"===i.textWrapping&&(y.text=Kn(y.text,i)),"Clip"!==i.textOverflow&&"Ellipsis"!==i.textOverflow||"Wrap"!==i.textWrapping)c.fillText(y.text,v,b);else if(b<h.actualSize.height+h.bounds.y){if("Ellipsis"===i.textOverflow&&u[g+1]){var C=u[g+1];f.y+C.dy*(g+1)+.8*i.fontSize>h.actualSize.height+h.bounds.y&&(y.text=y.text.slice(0,y.text.length-3),y.text=y.text.concat("..."))}c.fillText(y.text,v,b)}if("Underline"===i.textDecoration||"Overline"===i.textDecoration||"LineThrough"===i.textDecoration){var I=v,M=void 0,S=v+c.measureText(y.text).width,x=void 0;switch(i.textDecoration){case"Underline":M=b+2,x=b+2;break;case"Overline":M=f.y+y.dy*g,x=f.y+y.dy*g;break;case"LineThrough":M=(b+f.y+y.dy*g)/2+2,x=(b+f.y+y.dy*g)/2+2}c.beginPath(),c.moveTo(I,M),c.lineTo(S,x),c.strokeStyle=i.color,c.lineWidth=.08*i.fontSize,c.globalAlpha=i.opacity,c.stroke()}}}c.restore()}},t.prototype.applyFlipAndRotate=function(t,e,i,n,s,r,o){if(e.flip!==ss.None&&r&&o&&!(o.elementActions&us.ElementIsPort)){var a=r.groupElement,l=o,h=void 0;if(o instanceof Zs&&o.position?h=r.renderFlipTextElement(a,i,l,e.flip,e.flipMode,!0):(o instanceof Xs||o instanceof Ks||o instanceof Zs&&!o.position||o instanceof Ws)&&(h=r.renderFlipElement(a,i,e.flip,!0)),h&&h.transform)for(var c=/(translate|scale|rotate)\(([^)]+)\)/g,d=void 0;null!==(d=c.exec(h.transform));){var p=d[1],u=d[2].split(",").map(function(t){return parseFloat(t.trim())});switch(p){case"translate":var g=u[0]||0,m=u[1]||0;t.translate(g,m);break;case"scale":var f=u[0]||1,y=u[1]||f;t.scale(f,y)}}}this.rotateContext(i,e.angle,n,s)},t.prototype.loadImage=function(t,e,i,n,s){var r=new Image;r.src=e.source,this.image(t,r,e.x,e.y,e.width,e.height,e)},t.prototype.drawImage=function(e,i,n,s,r,o){var a=this;if(i.visible){var l=t.getContext(e);l.save();var h=i.x+i.width*i.pivotX,c=i.y+i.height*i.pivotY,d=new Image;d.src=i.source,this.setStyle(e,i);var p=l.canvas.id.split("_");p[p.length-1];this.applyFlipAndRotate(l,i,e,h,c,r,o),s?d.onload=function(){a.loadImage(l,i,e,h,c)}:this.loadImage(l,i,e,h,c),l.restore()}},t.prototype.image=function(t,e,i,n,s,r,o){t.beginPath();var a=e.width,l=e.height,h=s,c=r,d=0,p=0;if(o&&"None"!==o.alignment){var u=o.alignment.toLowerCase().substr(1,3),g=o.alignment.toLowerCase().substr(5,3);if("Slice"===o.scale){var m=function(){d=h,p=l*h/a},f=function(){d=a*c/l,p=c};h>c?(m(),c>p&&f()):h===c?a>l?f():m():(f(),h>d&&m());var y=this.getSliceOffset(u,d,h,a),v=this.getSliceOffset(g,p,c,l),b=a-y,C=l-v,I=d-y*(d/a),M=p-v*(p/l),S=iv("canvas",{width:s.toString(),height:r.toString()});S.getContext("2d").drawImage(e,y,v,b,C,0,0,I,M),t.drawImage(S,i,n,s,r)}else if("Meet"===o.scale){var x=l/a,w=c/h;d=w>x?h:c/x,p=w>x?h*x:c,i+=this.getMeetOffset(u,d,h),n+=this.getMeetOffset(g,p,c),t.drawImage(e,0,0,a,l,i,n,d,p)}else t.drawImage(e,i,n,s,r)}else t.drawImage(e,i,n,s,r);t.closePath()},t.prototype.getSliceOffset=function(t,e,i,n){switch(t){case"min":default:return 0;case"mid":return(e-i)/2*n/e;case"max":return(e-i)*n/e}},t.prototype.getMeetOffset=function(t,e,i){var n=Math.max(e,i),s=Math.min(e,i);switch(t){case"min":default:return 0;case"mid":return(n-s)/2;case"max":return n-s}},t.prototype.m=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},t.prototype.r=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(this.m(t)*this.m(e))},t.prototype.a=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(this.r(t,e))},t.prototype.labelAlign=function(t,e,i){var n=new un(e.width,i.length*(1.2*t.fontSize)),s={x:0,y:0},r=t.x,o=t.y,a=.5*t.width,l=.5*t.height;return"left"===t.textAlign?a=0:"center"===t.textAlign?a=e.width>t.width&&("Ellipsis"===t.textOverflow||"Clip"===t.textOverflow)&&"NoWrap"===t.textWrapping?0:.5*t.width:"right"===t.textAlign&&(a=1*t.width),s.x=r+a+(e?e.x:0),s.y=o+l-n.height/2,s},t}(),bv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cv=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Iv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bv(e,t),Cv([jt("")],e.prototype,"source",void 0),Cv([jt("transparent")],e.prototype,"color",void 0),Cv([jt("None")],e.prototype,"scale",void 0),Cv([jt("None")],e.prototype,"align",void 0),e}(re),Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bv(e,t),Cv([jt("Page")],e.prototype,"mode",void 0),Cv([jt("PageSettings")],e.prototype,"region",void 0),Cv([Bt({top:25,bottom:25,left:25,right:25},Os)],e.prototype,"margin",void 0),Cv([jt(!1)],e.prototype,"canZoomIn",void 0),Cv([jt(void 0)],e.prototype,"customBounds",void 0),Cv([jt(!1)],e.prototype,"canFit",void 0),e}(re),Sv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bv(e,t),Cv([jt(null)],e.prototype,"width",void 0),Cv([jt(null)],e.prototype,"height",void 0),Cv([Bt({},Os)],e.prototype,"margin",void 0),Cv([jt("Landscape")],e.prototype,"orientation",void 0),Cv([jt("Infinity")],e.prototype,"boundaryConstraints",void 0),Cv([Bt({},Iv)],e.prototype,"background",void 0),Cv([jt(!1)],e.prototype,"multiplePage",void 0),Cv([jt(!1)],e.prototype,"showPageBreaks",void 0),Cv([Bt({},Mv)],e.prototype,"fitOptions",void 0),e}(re),xv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bv(e,t),Cv([jt(0)],e.prototype,"horizontalOffset",void 0),Cv([jt(0)],e.prototype,"verticalOffset",void 0),Cv([jt(1)],e.prototype,"currentZoom",void 0),Cv([jt(0)],e.prototype,"viewPortWidth",void 0),Cv([jt(0)],e.prototype,"viewPortHeight",void 0),Cv([jt(.2)],e.prototype,"minZoom",void 0),Cv([jt(30)],e.prototype,"maxZoom",void 0),Cv([jt("Diagram")],e.prototype,"scrollLimit",void 0),Cv([jt()],e.prototype,"scrollableArea",void 0),Cv([jt(!1)],e.prototype,"canAutoScroll",void 0),Cv([jt(100)],e.prototype,"autoScrollFrequency",void 0),Cv([Bt({left:15,right:15,top:15,bottom:15},Os)],e.prototype,"autoScrollBorder",void 0),Cv([Bt({left:0,right:0,top:0,bottom:0},Os)],e.prototype,"padding",void 0),Cv([jt(.2)],e.prototype,"zoomFactor",void 0),e}(re),wv=function(){function t(){this.services={}}return t.prototype.register=function(t,e){this.services[""+t]=e},t.prototype.getService=function(t){return this.services[""+t]},t}(),Dv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ev=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dv(e,t),Ev([jt("lightgray")],e.prototype,"lineColor",void 0),Ev([jt("")],e.prototype,"lineDashArray",void 0),Ev([jt([1.25,18.75,.25,19.75,.25,19.75,.25,19.75,.25,19.75])],e.prototype,"lineIntervals",void 0),Ev([jt([1,19,.5,19.5,.5,19.5,.5,19.5,.5,19.5])],e.prototype,"dotIntervals",void 0),Ev([jt([20])],e.prototype,"snapIntervals",void 0),e}(re),Av=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Dv(e,t),Ev([Bt({},Tv)],e.prototype,"horizontalGridlines",void 0),Ev([Bt({},Tv)],e.prototype,"verticalGridlines",void 0),Ev([jt(os.All)],e.prototype,"constraints",void 0),Ev([jt(5)],e.prototype,"snapAngle",void 0),Ev([jt("Lines")],e.prototype,"gridType",void 0),Ev([jt(5)],e.prototype,"snapObjectDistance",void 0),Ev([jt("#07EDE1")],e.prototype,"snapLineColor",void 0),e}(re),Nv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Lv=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ov=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nv(e,t),Lv([jt(5)],e.prototype,"interval",void 0),Lv([jt(100)],e.prototype,"segmentWidth",void 0),Lv([jt("Horizontal")],e.prototype,"orientation",void 0),Lv([jt("RightOrBottom")],e.prototype,"tickAlignment",void 0),Lv([jt("red")],e.prototype,"markerColor",void 0),Lv([jt(25)],e.prototype,"thickness",void 0),Lv([jt(null)],e.prototype,"arrangeTick",void 0),e}(re),kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Nv(e,t),Lv([jt(!1)],e.prototype,"showRulers",void 0),Lv([jt(!0)],e.prototype,"dynamicGrid",void 0),Lv([Bt({orientation:"Horizontal"},Ov)],e.prototype,"horizontalRuler",void 0),Lv([Bt({orientation:"Vertical"},Ov)],e.prototype,"verticalRuler",void 0),e}(re),zv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pv=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},jv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zv(e,t),Pv([jt("")],e.prototype,"property",void 0),Pv([jt("")],e.prototype,"field",void 0),e}(re),Bv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Hv=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bv(e,t),Hv([jt("")],e.prototype,"read",void 0),Hv([jt("")],e.prototype,"create",void 0),Hv([jt("")],e.prototype,"update",void 0),Hv([jt("")],e.prototype,"destroy",void 0),Hv([jt()],e.prototype,"customFields",void 0),e}(re),Vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bv(e,t),Hv([jt("")],e.prototype,"id",void 0),Hv([jt("")],e.prototype,"sourceID",void 0),Hv([jt("")],e.prototype,"targetID",void 0),Hv([jt(null)],e.prototype,"sourcePointX",void 0),Hv([jt(null)],e.prototype,"sourcePointY",void 0),Hv([jt(null)],e.prototype,"targetPointX",void 0),Hv([jt(null)],e.prototype,"targetPointY",void 0),Hv([jt(null)],e.prototype,"dataManager",void 0),Hv([Bt({},Rv)],e.prototype,"crudAction",void 0),e}(re),Uv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Bv(e,t),Hv([jt("")],e.prototype,"id",void 0),Hv([jt(null)],e.prototype,"dataManager",void 0),Hv([jt(null)],e.prototype,"dataSource",void 0),Hv([jt("")],e.prototype,"root",void 0),Hv([jt("")],e.prototype,"parentId",void 0),Hv([jt()],e.prototype,"doBinding",void 0),Hv([Rt([],jv)],e.prototype,"dataMapSettings",void 0),Hv([Bt({},Rv)],e.prototype,"crudAction",void 0),Hv([Bt({},Vv)],e.prototype,"connectionDataSource",void 0),e}(re),Fv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Wv=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Yv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fv(e,t),Wv([jt("LeftInFlow")],e.prototype,"yesBranchDirection",void 0),Wv([jt("RightInFlow")],e.prototype,"noBranchDirection",void 0),Wv([jt(["Yes","True"])],e.prototype,"yesBranchValues",void 0),Wv([jt(["No","False"])],e.prototype,"noBranchValues",void 0),e}(re),_v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Fv(e,t),Wv([jt("")],e.prototype,"fixedNode",void 0),Wv([jt(30)],e.prototype,"horizontalSpacing",void 0),Wv([jt("SamePoint")],e.prototype,"connectionPointOrigin",void 0),Wv([jt("Nonlinear")],e.prototype,"arrangement",void 0),Wv([jt(30)],e.prototype,"verticalSpacing",void 0),Wv([jt(30)],e.prototype,"maxIteration",void 0),Wv([jt(40)],e.prototype,"springFactor",void 0),Wv([jt(50)],e.prototype,"springLength",void 0),Wv([Bt({left:50,top:50,right:0,bottom:0},Os)],e.prototype,"margin",void 0),Wv([jt("Auto")],e.prototype,"horizontalAlignment",void 0),Wv([jt("Auto")],e.prototype,"verticalAlignment",void 0),Wv([jt("TopToBottom")],e.prototype,"orientation",void 0),Wv([jt("Auto")],e.prototype,"connectionDirection",void 0),Wv([jt("Default")],e.prototype,"connectorSegments",void 0),Wv([jt("None")],e.prototype,"type",void 0),Wv([jt()],e.prototype,"getLayoutInfo",void 0),Wv([jt()],e.prototype,"layoutInfo",void 0),Wv([jt()],e.prototype,"getBranch",void 0),Wv([jt()],e.prototype,"bounds",void 0),Wv([jt(!0)],e.prototype,"enableAnimation",void 0),Wv([jt(!1)],e.prototype,"enableRouting",void 0),Wv([jt("")],e.prototype,"root",void 0),Wv([Bt({},Yv)],e.prototype,"flowchartLayoutSettings",void 0),e}(re),Qv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zv=function(t){function e(e,i){var n=t.call(this,e,!0)||this;return n.oldValue=null,n.endPoint=i,n}return Qv(e,t),e.prototype.mouseDown=function(e){var i,n=!0;if(e.source&&e.source.connectors&&(i=e.source.connectors[0]),e.info&&e.actualObject&&(n=e.info.ctrlKey&&"Orthogonal"!==e.actualObject.type),i&&n){this.inAction=!0,this.undoElement=Fn(e.source),t.prototype.mouseDown.call(this,e);var s=i.constraints&cs.InheritSegmentThumbSize?this.commandHandler.diagram.segmentThumbSize:i.segmentThumbSize,r=s>20&&"Straight"!==i.type?s/2:10;r/=this.commandHandler.diagram.scrollSettings.currentZoom;for(var o=0;o<i.segments.length;o++){var a=i.segments[parseInt(o.toString(),10)];if("OrthoThumb"===this.endPoint)for(var l=0;l<a.points.length-1;l++){var h={x:0,y:0};h.x=(a.points[parseInt(l.toString(),10)].x+a.points[l+1].x)/2,h.y=(a.points[parseInt(l.toString(),10)].y+a.points[l+1].y)/2,Yu(this.currentPosition,h,r)&&(this.selectedSegment=a,this.segmentIndex=l)}else Yu(this.currentPosition,a.point,r)&&(this.selectedSegment=a)}}},e.prototype.mouseMove=function(e){if(t.prototype.mouseMove.call(this,e),this.currentPosition=e.position,this.currentPosition&&this.prevPosition){var i=this.currentPosition.y-this.prevPosition.y,n=this.currentPosition.x-this.prevPosition.x;this.currentPosition=this.commandHandler.snapConnectorEnd(this.currentPosition);var s=void 0,r=void 0,o=!1;e.source&&e.source.connectors&&(s=e.source.connectors[0]),fn.equals(this.startPosition,this.prevPosition)&&(o=!0),null===this.oldValue&&(this.oldValue=Fn(this.selectedSegment));var a=(this.oldValue,this.oldValue,this.selectedSegment);if(a={source:s,state:"Start",oldValue:this.oldValue,newValue:this.oldValue,segment:this.selectedSegment,cancel:!1},o&&!x()&&this.commandHandler.triggerEvent(Ds.segmentChange,a),a.cancel&&this.commandHandler.diagram.resetTool(),this.inAction&&void 0!==this.selectedSegment&&void 0!==this.endPoint&&(0!==n||0!==i)&&!a.cancel){if("OrthoThumb"===this.endPoint)this.blocked=!this.dragOrthogonalSegment(s,this.selectedSegment,this.currentPosition,this.segmentIndex),null===this.oldValue.length&&null===this.oldValue.direction&&(this.oldValue=Fn(this.selectedSegment)),r=Fn(this.selectedSegment);else{var l=this.currentPosition.x-this.selectedSegment.point.x,h=this.currentPosition.y-this.selectedSegment.point.y,c=s.segments.indexOf(this.selectedSegment);this.blocked=!this.commandHandler.dragControlPoint(s,l,h,!1,c),r=Fn(this.selectedSegment)}this.commandHandler.updateSelector(),this.currentPosition=e.position;var d={source:s,state:"Progress",oldValue:this.oldValue,newValue:r,segment:this.selectedSegment,cancel:!1};this.commandHandler.triggerEvent(Ds.segmentChange,d)}}return this.prevPosition=this.currentPosition,!this.blocked},e.prototype.mouseUp=function(e){var i,n;if(e.source&&e.source.connectors&&(n={segments:(i=e.source.connectors[0]).segments}),e&&e.source&&e.info&&e.info.ctrlKey&&e.info.shiftKey&&"Straight"===i.type)this.addOrRemoveSegment(i,this.currentPosition);else if("OrthoThumb"===this.endPoint&&this.selectedSegment){var s=i.segments.indexOf(this.selectedSegment),r=i.segments[s-1],o=i.segments[s+1];if(s===i.segments.length-2&&this.updateLastSegment(i,this.selectedSegment))i.segments.splice(i.segments.length-2,1);else if(r&&Math.abs(r.length)<5&&r.length>0)1!==s&&this.removePrevSegment(i,s);else if(o){var a=fn.distancePoints(o.points[0],o.points[1]),l=o.length||0===o.length?o.length:a;Math.abs(l)<=5&&this.removeNextSegment(i,s)}this.commandHandler.updateEndPoint(i,n),i.selectedSegmentIndex=0}if(this.undoElement){var h={type:"SegmentChanged",redoObject:Fn(e.source),undoObject:this.undoElement,category:"Internal"};this.commandHandler.addHistoryEntry(h)}if(i.isBezierEditing&&(i.isBezierEditing=!1),this.prevPosition!==this.startPosition){var c={source:i,state:"Completed",oldValue:this.oldValue,newValue:Fn(this.selectedSegment),cancel:!1,segment:this.selectedSegment};this.commandHandler.triggerEvent(Ds.segmentChange,c)}t.prototype.mouseUp.call(this,e)},e.prototype.removePrevSegment=function(t,e){var i=t.segments[e-2],n=t.segments[e+1];if(n&&!((n.length||0===n.length?n.length:fn.distancePoints(n.points[0],n.points[1]))<=5)){var s=t.segments.slice(e-1,e+1),r={element:t,removeSegments:s,type:"Removal",cancel:!1};if(this.commandHandler.triggerEvent(Ds.segmentCollectionChange,r),!r.cancel){var o=t.segments[e+1];t.segments.splice(e-1,2);var a=this.selectedSegment;"Left"===a.direction||"Right"===a.direction?(i.points[i.points.length-1].x=o.points[0].x,o.points[0].y=i.points[i.points.length-1].y):(i.points[i.points.length-1].y=o.points[0].y,o.points[0].x=i.points[i.points.length-1].x),(a.length||0===a.length)&&this.findSegmentDirection(i),this.findSegmentDirection(o)}}},e.prototype.findSegmentDirection=function(t){t.direction&&(t.length||0===t.length)&&(t.length=fn.distancePoints(t.points[0],t.points[t.points.length-1]),t.direction=fn.direction(t.points[0],t.points[t.points.length-1]))},e.prototype.removeNextSegment=function(t,e){var i,n,s=this.selectedSegment,r=t.segments[e-1],o=t.segments[e+2],a=t.segments[e+1];if(a.length||0===a.length?(i=t.segments.slice(e,2),n={element:t,removeSegments:i,type:"Removal",cancel:!1},n={element:t,removeSegments:i,type:"Removal",cancel:!1},this.commandHandler.triggerEvent(Ds.segmentCollectionChange,n),n.cancel||(t.segments.splice(e,2),"Top"===s.direction||"Bottom"===s.direction?(o.points[0].y=s.points[0].y,r.points[r.points.length-1].x=o.points[0].x):(o.points[0].x=s.points[0].x,r.points[r.points.length-1].y=o.points[0].y))):(i=t.segments.slice(e+1,1),n={element:t,removeSegments:i,type:"Removal",cancel:!1},this.commandHandler.triggerEvent(Ds.segmentCollectionChange,n),n.cancel||(t.segments.splice(e+1,1),"Top"===s.direction||"Bottom"===s.direction?r.points[r.points.length-1].x=a.points[a.points.length-1].x:r.points[r.points.length-1].y=a.points[a.points.length-1].y,this.findSegmentDirection(r),s.length=s.direction=null)),r&&o&&!n.cancel&&(r.length=fn.distancePoints(r.points[0],o.points[0]),r.direction=fn.direction(r.points[0],o.points[0]),o.length||0===o.length)){o.length=fn.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]);var l=r.points,h=o.points;o.direction=fn.direction(l[l.length-1],h[h.length-1])}},e.prototype.addOrRemoveSegment=function(t,e,i){for(var n,s,r=[],o={segments:t.segments},a=0;a<t.segments.length;a++){if(Yu(e,(h=t.segments[parseInt(a.toString(),10)]).point,t.hitPadding)){s=a,n=!0,r.push(h);var l={element:t,removeSegments:r,type:"Removal",cancel:!1};i&&i.triggerEvent(Ds.segmentCollectionChange,l)}}if(this.commandHandler||(this.commandHandler=i),n&&void 0!==s){if(t.segments&&t.segments[parseInt(s.toString(),10)]&&"Straight"===t.segments[parseInt(s.toString(),10)].type){var h=t.segments[parseInt(s.toString(),10)],c=t.segments[s+1];c&&(t.segments.splice(s,1),c.points[0]=h.points[0])}}else{this.commandHandler.enableServerDataBinding(!1);var d=this.findIndex(t,e);if(t.segments&&t.segments[parseInt(d.toString(),10)]&&"Straight"===t.segments[parseInt(d.toString(),10)].type){h=t.segments[parseInt(d.toString(),10)];var p=new Tg(t,"segments",{type:"Straight",point:e},!0);p.points[0]=h.points[0],p.points[1]=e,h.points[0]=e,t.segments.splice(d,0,p),n=!0,r.push(h);l={element:t,addSegments:r,type:"Addition",cancel:!1};this.commandHandler.triggerEvent(Ds.segmentCollectionChange,l)}this.commandHandler.enableServerDataBinding(!0)}n&&this.commandHandler.updateEndPoint(t,o)},e.prototype.findIndex=function(t,e){for(var i=[],n=0;n<t.segments.length;n++){var s=t.segments[parseInt(n.toString(),10)],r=Tn.toBounds([s.points[0],s.points[1]]);r.Inflate(t.hitPadding),r.containsPoint(e)&&i.push(s)}if(1===i.length)return t.segments.indexOf(i[0]);var o=void 0,a=void 0,l=void 0,h=void 0,c=void 0,d=void 0;for(n=0;n<i.length;n++)h=i[parseInt(n.toString(),10)],c=(e.y-h.points[0].y)/(h.points[1].y-e.y),d=(e.x-h.points[0].x)/(h.points[1].x-e.x),o=Math.abs(c-d),0===n&&(a=o,l=0),o<a&&(a=o,l=n);return t.segments.indexOf(i[parseInt(l.toString(),10)])},e.prototype.dragOrthogonalSegment=function(t,e,i,n){var s={x:0,y:0},r={segments:t.segments};s.x=(e.points[parseInt(n.toString(),10)].x+e.points[n+1].x)/2,s.y=(e.points[parseInt(n.toString(),10)].y+e.points[n+1].y)/2;var o=i.y-s.y,a=i.x-s.x,l=t.segments.indexOf(e),h=!1;return t.allowNodeOverlap&&(t.selectedSegmentIndex=l||n),-1!==l&&(0===l&&1===t.segments.length&&2===e.points.length?(l=this.addSegments(t,e,a,o,l),h=!0):l!==t.segments.length-1||null!==e.direction&&null!==e.length?0===l&&(l=this.insertFirstSegment(t,e,a,o,l),h=!0):(l=this.addTerminalSegment(t,e,a,o,n),h=!0),l&&(h&&(this.selectedSegment=e=t.segments[parseInt(l.toString(),10)],this.segmentIndex=0),this.updateAdjacentSegments(t,l,a,o),this.commandHandler.updateEndPoint(t,r))),!0},e.prototype.addSegments=function(t,e,i,n,s){var r,o=[],a=fn.distancePoints(e.points[0],e.points[1]),l=fn.direction(e.points[0],e.points[1]);o.push(new Ng(t,"segments",{type:"Orthogonal",direction:l,length:a/4},!0));var h=e.points[0].y===e.points[1].y?n>0?"Bottom":"Top":i>0?"Right":"Left",c=e.points[0].x===e.points[1].x?n:i;o.push(new Ng(t,"segments",{type:"Orthogonal",direction:h,length:c},!0)),o.push(new Ng(t,"segments",{type:"Orthogonal",direction:l,length:a/2},!0));var d={element:t,addSegments:o,type:"Addition",cancel:!1};return this.commandHandler.triggerEvent(Ds.segmentCollectionChange,d),d.cancel||(t.segments=o.concat(t.segments),r=s+2),r},e.prototype.insertFirstSegment=function(t,e,i,n,s){var r,o,a,l,h,c=[];if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)for(var d=void 0,p=0;p<e.points.length-1;p++){var u=fn.distancePoints(e.points[parseInt(p.toString(),10)],e.points[p+1]),g=fn.direction(e.points[parseInt(p.toString(),10)],e.points[p+1]);0===(h=new Ng(t,"segments",{type:"Orthogonal",direction:g,length:u},!0)).length&&(!d||"Top"!==d.direction&&"Bottom"!==d.direction?h.direction=n>0?"Bottom":"Top":h.direction=i>0?"Right":"Left"),d=h,c.push(h)}else a={type:"Orthogonal",direction:e.direction,length:e.length/3},c.push(new Ng(t,"segments",a,!0)),"Bottom"===e.direction||"Top"===e.direction?(o=Math.abs(i),r=i>0?"Right":"Left"):(o=Math.abs(n),r=n>0?"Bottom":"Top"),h=new Ng(t,"segments",{type:"Orthogonal",direction:r,length:o},!0),c.push(h);var m={element:t,addSegments:c,type:"Addition",cancel:!1};if(this.commandHandler.triggerEvent(Ds.segmentCollectionChange,m),!m.cancel){if(t.sourcePortID&&e.length&&t.segments[0].points.length>2)t.segments.splice(0,1),l=1;else{var f=t.segments[1];f&&f.length&&(f.length=r!==f.direction?f.length+o:f.length-o),l=2,e.length=2*e.length/3}t.segments=c.concat(t.segments)}return l},e.prototype.updateAdjacentSegments=function(t,e,i,n){var s=t.segments[parseInt(e.toString(),10)],r=s.points[s.points.length-1],o=s.points[0],a=!0;if("Orthogonal"===s.type&&(s.points[0]=o,s.points[s.points.length-1]=r,t.segments[e-1]&&(a=this.updatePreviousSegment(i,n,t,e)),t.segments.length-1>e&&a)){var l=t.segments[e+1];this.updateNextSegment(t,s,l,i,n)}},e.prototype.addTerminalSegment=function(t,e,i,n,s){var r,o,a,l,h=t.segments.indexOf(e),c=[],d=t.segments.pop(),p=t.segments[t.segments.length-1];r=p&&"Orthogonal"===p.type?p:null;for(var u=0;u<e.points.length-2;u++)a=fn.distancePoints(e.points[parseInt(u.toString(),10)],e.points[u+1]),l=fn.direction(e.points[parseInt(u.toString(),10)],e.points[u+1]),o=new Ng(t,"segments",{type:"Orthogonal",length:a,direction:l},!0),c.push(o),r=o;var g=s;if((2===e.points.length||g===e.points.length-2)&&(r&&(r.length+=5),void 0!==g)){a=2*fn.distancePoints(e.points[e.points.length-2],e.points[e.points.length-1])/3,l=fn.direction(e.points[e.points.length-2],e.points[e.points.length-1]);var m=new Ng(t,"segments",{type:"Orthogonal",length:a,direction:l});c.push(m)}var f=new Ng(t,"segments",{type:"Orthogonal"},!0);c.push(f);var y={element:t,addSegments:c,type:"Addition",cancel:!1};return this.commandHandler.triggerEvent(Ds.segmentCollectionChange,y),y.cancel?t.segments.push(d):(t.segments=t.segments.concat(c),h+=s),this.commandHandler.updateEndPoint(t),h},e.prototype.updatePortSegment=function(t,e,i,n,s){if(1===i&&2===t.points.length&&t.length<0){var r=e.sourceWrapper.corners,o=e.segments[parseInt(i.toString(),10)],a=e.segments[i+1],l=void 0,h=[];l=new Ng(e,"segments",{type:"Orthogonal",length:13,direction:t.direction}),h.push(l);var c=void 0;c="Left"===o.direction?o.points[0].x-(r.middleLeft.x-20):"Right"===o.direction?r.middleRight.x+20-o.points[0].x:"Bottom"===o.direction?r.bottomCenter.y+20-o.points[0].y:o.points[0].y-(r.topCenter.y-20),l=new Ng(e,"segments",{type:"Orthogonal",length:c,direction:o.direction}),h.push(l),o.length=o.length-c,a&&a.length&&a.direction&&(a.direction===t.direction?a.length-=13:a.direction===Xd(t.direction)&&(a.length+=13)),e.segments=h.concat(e.segments),this.selectedSegment=e.segments[3]}},e.prototype.updatePreviousSegment=function(t,e,i,n){var s=i.segments[parseInt(n.toString(),10)],r=i.segments[n-1];r.points[r.points.length-1]=s.points[0];var o=!i.sourceID||""!==i.sourcePortID,a=!0;return"Orthogonal"===r.type&&("Bottom"===r.direction?r.length+=e:"Top"===r.direction?r.length-=e:"Right"===r.direction?r.length+=t:r.length-=t,""!==i.sourcePortID&&r.length<0&&!i.allowNodeOverlap?this.updatePortSegment(r,i,n,t,e):i.sourceID&&""===i.sourcePortID&&r.length<0&&1===n&&(a=!1,this.updateFirstSegment(i,s)),o&&this.changeSegmentDirection(r,i)),a},e.prototype.changeSegmentDirection=function(t,e){e.maxSegmentThumb||t.length<0&&(t.direction=Xd(t.direction),t.length*=-1)},e.prototype.updateNextSegment=function(t,e,i,n,s){i.points[0]=e.points[e.points.length-1],i&&"Orthogonal"===i.type&&(i.length||0===i.length)&&("Left"===i.direction||"Right"===i.direction?0!==n&&(i.length="Right"===i.direction?i.length-n:i.length+n,(i.length||0===i.length)&&this.changeSegmentDirection(i,t)):0!==s&&(i.length="Bottom"===i.direction?i.length-s:i.length+s,(i.length||0===i.length)&&this.changeSegmentDirection(i,t)))},e.prototype.updateFirstSegment=function(t,e){var i,n=t.segments.indexOf(e),s=!1,r=t.segments[parseInt(n.toString(),10)],o=t.segments[n-1],a={segments:t.segments};if(o.length<0&&t.sourceID){var l=t.sourceWrapper.corners,h=[],c=void 0,d=!1;this.changeSegmentDirection(r,t);var p=t.segments[n+1],u=t.segments[n+2];switch(p&&this.changeSegmentDirection(p,t),u&&this.changeSegmentDirection(u,t),o.direction){case"Top":case"Bottom":i=r.length>0&&"Left"===r.direction?l.middleLeft:l.middleRight,r.length>l.width/2?Math.abs(o.length)<l.height/2&&(o.length=fn.distancePoints(l.center,o.points[o.points.length-1]),r.points[0].x=i.x,r.length=fn.distancePoints(r.points[0],r.points[r.points.length-1]),r.length-=20,s=!0):(p&&p.direction&&p.length&&(p.points[0].y=i.y,p.points[0].x=p.points[p.points.length-1].x="Right"===r.direction?i.x+20:i.x-20),s=!0,d=!0);break;case"Left":case"Right":i=r.length>0&&"Top"===r.direction?l.topCenter:l.bottomCenter,r.length>l.height/2?Math.abs(o.length)<l.width/2&&(o.length=fn.distancePoints(l.center,o.points[o.points.length-1]),r.points[0].y=i.y,r.length=fn.distancePoints(r.points[0],r.points[r.points.length-1]),r.length-=20,s=!0):(p&&p.direction&&p.length&&(p.points[0].x=i.x,p.points[0].y=p.points[p.points.length-1].y="Bottom"===r.direction?i.y+20:i.y-20),s=!0,d=!0)}this.changeSegmentDirection(o,t),this.changeSegmentDirection(r,t),s&&(c={type:"Orthogonal",direction:r.direction,length:20},h.push(new Ng(t,"segments",c,!0)),d&&(p&&p.direction&&p.length&&(p.length=fn.distancePoints(p.points[0],p.points[p.points.length-1])),u&&u.direction&&u.length&&(u.length=fn.distancePoints(p.points[p.points.length-1],u.points[u.points.length-1])),t.segments.splice(n-1,2)),t.segments=h.concat(t.segments)),this.selectedSegment=d?t.segments[n-1]:t.segments[n+1],this.commandHandler.updateEndPoint(t,a)}},e.prototype.updateLastSegment=function(t,e){if(t.targetID&&""===t.targetPortID){var i=void 0,n=void 0,s=void 0,r=void 0,o=t.targetWrapper.corners,a=e.points[0],l=e.points[e.points.length-1];return"Right"===e.direction||"Left"===e.direction?(i={x:a.x,y:a.y},n={x:"Left"===e.direction?l.x-o.width/2:l.x+o.width/2,y:l.y},s={x:o.center.x,y:o.center.y-o.height},r={x:o.center.x,y:o.center.y+o.height}):(i={x:a.x,y:a.y},n={x:l.x,y:"Bottom"===e.direction?l.y+o.height/2:l.y-o.height/2},s={x:o.center.x-o.width,y:o.center.y},r={x:o.center.x+o.width,y:o.center.y}),Im({x1:i.x,y1:i.y,x2:n.x,y2:n.y},{x1:s.x,y1:s.y,x2:r.x,y2:r.y}).enabled}return!1},e.prototype.destroy=function(){},e.prototype.getModuleName=function(){return"ConnectorEditingTool"},e}(Ju),qv=function(){function t(t,e){this.currentAction="None",this.previousAction="None",this.previousTarget=null,this.touchArgs=void 0,this.focus=!1,this.isBlocked=!1,this.isMouseDown=!1,this.inAction=!1,this.doingAutoScroll=!1,this.diagram=null,this.objectFinder=null,this.tool=null,this.eventArgs=null,this.previousElement=null,this.isKeyUp=!0,this.keyCount=0,this.isNudgeKey=!1,this.commandObj={},this.keyArgs={},this.diagram=t,this.objectFinder=new Xv,this.commandHandler=e}return Object.defineProperty(t.prototype,"action",{get:function(){return this.currentAction},set:function(t){t!==this.currentAction&&("PortDraw"===this.currentAction&&(this.diagram.tool&=~fs.DrawOnce,this.diagram.currentDrawingObject&&(this.diagram.currentDrawingObject=null),this.tool&&this.tool.mouseUp({position:this.currentPosition}),this.tool=null),"Rotate"===t||"LabelRotate"===t?this.diagram.diagramCanvas.classList.add("e-diagram-rotate"):"Rotate"!==this.currentAction&&"LabelRotate"!==this.currentAction||this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),this.currentAction=t,"None"===this.currentAction||"Select"===this.currentAction||this.diagram.diagramActions&Is.TextEdit||this.currentPosition&&this.commandHandler.isUserHandle(this.currentPosition)||"FixedUserHandle"===this.currentAction?this.diagram.diagramActions=this.diagram.diagramActions&~Is.ToolAction:this.diagram.diagramActions=this.diagram.diagramActions|Is.ToolAction,this.diagram.setCursor(this.diagram.getCursor(t,this.inAction)))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blocked",{get:function(){return this.isBlocked},set:function(t){this.isBlocked=t,this.blocked?this.diagram.setCursor("not-allowed"):this.diagram.setCursor(this.diagram.getCursor(this.action,this.inAction))},enumerable:!0,configurable:!0}),t.prototype.getMousePosition=function(t){var e,i,n;-1!==t.type.indexOf("touch")?(i=(e=t).changedTouches[0].clientX,n=e.changedTouches[0].clientY):(i=t.clientX,n=t.clientY),i=this.diagram.modifyClientOffset(i),n=this.diagram.modifyClientOffset(n);var s=new un;s=Qg(this.diagram);var r=this.diagram.element.getBoundingClientRect();return this.diagram.modifyBounds(r),i=i+this.diagram.diagramCanvas.scrollLeft-r.left-s.width,n=n+this.diagram.diagramCanvas.scrollTop-r.top-s.height,i/=this.diagram.scroller.transform.scale,n/=this.diagram.scroller.transform.scale,{x:i-=this.diagram.scroller.transform.tx,y:n-=this.diagram.scroller.transform.ty}},t.prototype.windowResize=function(t){var e=this;return this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){e.updateViewPortSize(e.diagram.element)},300),!1},t.prototype.updateViewPortSize=function(t){var e=document.getElementById(t.id);if(e){var i=e.getBoundingClientRect();this.diagram.modifyBounds(i),this.diagram.scroller.setViewPortSize(i.width,i.height);var n=new un;n=Qg(this.diagram);var s=this.diagram.getSizeValue(this.diagram.width,n.width),r=this.diagram.getSizeValue(this.diagram.height,n.height);if(this.diagram.diagramCanvas.style.width=s,this.diagram.diagramCanvas.style.height=r,this.diagram.scroller.setSize(),this.diagram.transformLayers(),this.diagram.rulerSettings.showRulers&&Yg(this.diagram),this.diagram.views.length>1)for(var o=0,a=this.diagram.views;o<a.length;o++){var l=a[o],h=this.diagram.views[""+l];h instanceof cm&&h.onPropertyChanged({sourceID:h.sourceID},{})}}},t.prototype.canHideResizers=function(){return(this.tool instanceof ig||this.tool instanceof ng)&&this.isMouseDown},t.prototype.updateCursor=function(){if(1===this.diagram.selectedItems.nodes.length||1===this.diagram.selectedItems.connectors.length){var t=[];t=t.concat(this.diagram.selectedItems.nodes,this.diagram.selectedItems.connectors),this.blocked=!(this.eventArgs&&this.eventArgs.source&&!dp(this.eventArgs.source))&&(this.isMouseDown&&1===t.length&&this.tool instanceof $u&&!dp(t[0]))}},t.prototype.isForeignObject=function(t,e){var i=t;if(i)for(;null!==i.parentNode;){if("string"==typeof i.className&&(!e&&-1!==i.className.indexOf("foreign-object")||e&&-1!==i.className.indexOf("e-diagram-text-edit")))return i;i=i.parentNode}return null},t.prototype.isMetaKey=function(t){return"mousewheel"===t.type?t.ctrlKey:navigator.platform.match("Mac")?t.metaKey:t.ctrlKey},t.prototype.renderUmlHighLighter=function(t){this.diagram.commandHandler.removeStackHighlighter();var e=this.diagram.selectedItems.nodes[0];if(e&&e.container&&"Stack"===e.container.type&&"UmlClassifier"===e.shape.type&&!e.wrapper.bounds.containsPoint(this.currentPosition)){var i=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);if(n&&n.parentId&&n.parentId===e.id){var s="Vertical"===this.diagram.nameTable[n.parentId].container.orientation;Uu(n.wrapper,s,t.position,this.diagram,!0)}}},t.prototype.isDeleteKey=function(t,e){return navigator.platform.match("Mac")&&"Backspace"===t&&"delete"===e},t.prototype.isMouseOnScrollBar=function(t){var e,i,n,s,r,o=t.offsetX,a=t.offsetY,l=this.diagram.diagramCanvas,h=l.offsetHeight,c=l.offsetWidth;return!!(h<l.scrollHeight&&(e={x:c-17,y:0},i={x:c,y:0},n={x:c-17,y:h},s={x:c,y:h},r=Tn.toBounds([e,i,n,s]),0!==this.diagram.scroller.verticalOffset&&(r.x=r.x-this.diagram.scroller.horizontalOffset,r.y=r.y-this.diagram.scroller.verticalOffset),r.containsPoint({x:o,y:a})))||!!(c<l.scrollWidth&&(e={x:0,y:h-17},i={x:c,y:h-17},n={x:0,y:h},s={x:c,y:h},r=Tn.toBounds([e,i,n,s]),0!==this.diagram.scroller.horizontalOffset&&(r.x=r.x-this.diagram.scroller.horizontalOffset,r.y=r.y-this.diagram.scroller.verticalOffset),r.containsPoint({x:o,y:a})))},t.prototype.updateVirtualization=function(){var t=this,e=setInterval(function(i){t.diagram.removeVirtualObjects(e)},50);setTimeout(function(){t.diagram.deleteVirtualObject=!0},50)},t.prototype.checkPreviousAction=function(){if(this.action!==this.previousAction&&this.diagram.selectedItems.userHandles.length)for(var t=0;t<this.diagram.selectedItems.userHandles.length;t++)this.previousAction&&this.diagram.selectedItems.userHandles[parseInt(t.toString(),10)]&&(this.checkUserHandleEvent(Ds.onUserHandleMouseLeave),this.previousAction="None");this.action!==this.previousAction&&(this.checkFixedUserHandleEvent(Ds.onFixedUserHandleMouseLeave,this.targetItem,this.previousTarget),this.previousTarget=null,this.targetItem=null)},t.prototype.checkUserHandleEvent=function(t){if(this.diagram.selectedItems&&this.diagram.selectedItems.userHandles.length>0)for(var e=t===Ds.onUserHandleMouseLeave?this.previousAction:this.action,i={element:void 0},n=0;n<this.diagram.selectedItems.userHandles.length;n++)(e===this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)].name||t===Ds.onUserHandleMouseUp&&"Select"===e)&&(i.element=this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)],this.userHandle(t,n,i,null))},t.prototype.userHandle=function(t,e,i,n){if(t===Ds.onUserHandleMouseEnter||t===Ds.onFixedUserHandleMouseEnter){if(this.previousAction=this.action,i.element.tooltip&&"Auto"===i.element.tooltip.openOn&&""!==i.element.tooltip.content){Hc(this.diagram,i.element);var s=void 0;i.element.pathData?t===Ds.onUserHandleMouseEnter?s=document.getElementById(this.diagram.selectedItems.userHandles[parseInt(e.toString(),10)].name+"_userhandle"):t===Ds.onFixedUserHandleMouseEnter&&(s=document.getElementById(n.id+"_"+n.fixedUserHandles[parseInt(e.toString(),10)].id+"_groupElement")):s=i.element.source?document.getElementById(this.diagram.selectedItems.userHandles[parseInt(e.toString(),10)].name+"_image"):i.element.content?document.getElementById(this.diagram.selectedItems.userHandles[parseInt(e.toString(),10)].name+"_shape_native_element"):document.getElementById(this.diagram.selectedItems.userHandles[parseInt(e.toString(),10)].name+"_shape_html_element"),"Auto"===i.element.tooltip.openOn&&i.element!==this.isUserHandleHover&&(this.isUserHandleHover=i.element,this.diagram.tooltipObject.open(s))}this.diagram.triggerEvent(t,i)}if(t===Ds.onUserHandleMouseDown?(this.userHandleObject=this.diagram.selectedItems.userHandles[parseInt(e.toString(),10)].name,this.diagram.triggerEvent(t,i)):t===Ds.onFixedUserHandleMouseDown&&this.diagram.triggerEvent(t,i),t===Ds.onUserHandleMouseUp){var r=document.getElementById(this.diagram.selectedItems.userHandles[parseInt(e.toString(),10)].name+"_userhandle");this.commandHandler.isUserHandle(this.currentPosition)&&r&&r.id===this.userHandleObject+"_userhandle"&&this.diagram.triggerEvent(t,i)}else t===Ds.onFixedUserHandleMouseUp&&this.diagram.triggerEvent(t,i);t!==Ds.onUserHandleMouseLeave&&t!==Ds.onFixedUserHandleMouseLeave||(this.diagram.tooltipObject&&"Custom"!==this.diagram.tooltipObject.openOn&&(this.isUserHandleHover=null,this.diagram.tooltipObject.close()),this.diagram.triggerEvent(t,i))},t.prototype.checkFixedUserHandleEvent=function(t,e,i){if(e&&e.fixedUserHandles.length>0)for(var n={element:void 0},s=void 0,r=void 0,o=0;o<e.fixedUserHandles.length;o++)s=e.fixedUserHandles[parseInt(o.toString(),10)].id,i&&i.id&&i.id.indexOf(s)>-1&&(r=s,this.previousTarget=i,this.targetItem=e),r===e.fixedUserHandles[parseInt(o.toString(),10)].id&&(n.element=e.fixedUserHandles[parseInt(o.toString(),10)],this.userHandle(t,o,n,e))},t.prototype.mouseDown=function(t){var e=this;if("touchstart"===t.type&&(this.timeOutTapHold=setTimeout(function(){"Select"!==e.action&&"Drag"!==e.action||e.mouseMove(t,void 0)},500)),!(!0===this.inAction&&(this.tool instanceof rg||this.tool instanceof og)||!0===this.inAction&&t.buttons&&t.buttons&t.buttons-1)){this.focus=!0;var i=t.touches,n=!!document.getElementsByClassName("e-dragclone")[0];if(this.isMouseOnScrollBar(t)&&!n)return this.isScrolling=!0,void t.preventDefault();if(this.checkFixedUserHandleEvent(Ds.onFixedUserHandleMouseDown,this.targetItem,this.previousTarget),this.checkUserHandleEvent(Ds.onUserHandleMouseDown),!this.checkEditBoxAsTarget(t)&&Op(this.diagram)||Tp(this.diagram)&&!Lp(this.diagram))if(this.diagram.restrictedDeltaValue={x:0,y:0},"Select"!==this.action&&"Drag"!==this.action||this.diagram.updatePortVisibility(this.hoverElement,rs.Hover,!0),!(this.tool instanceof dg||this.tool instanceof pg)||2!==t.button&&2!==t.buttons)if(!0===this.inAction&&!0===this.isMouseDown&&(this.tool instanceof dg||this.tool instanceof pg))this.isMouseDown=!0,this.eventArgs={},this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.eventArgs.position=this.currentPosition,this.tool.mouseDown(this.eventArgs);else{this.isMouseDown=!0,this.currentPosition=this.prevPosition=this.getMousePosition(t),this.eventArgs={},this.diagram.textEditing&&!this.isMouseOnScrollBar(t)&&(this.diagram.endEdit(),this.diagram.textEditing=!1,"Canvas"===this.diagram.mode&&1!==this.diagram.scroller.currentZoom&&this.diagram.refreshDiagramLayer());var s=this.getTargetElement();this.action=this.diagram.findActionToBeDone(s.obj,s.sourceElement,this.currentPosition,s.target);var r=this.isMetaKey(t);if(r&&t.shiftKey&&this.diagram.connectorEditingToolModule?this.action="SegmentEnd":(r||t.shiftKey)&&(Dp(this.diagram)||Ep(this.diagram))&&(this.action="Select"),this.diagram.constraints&ms.AutomaticPortCreation&&t.ctrlKey&&this.eventArgs.actualObject&&this.createPortAutomaticallyAndActivateTool(!0),this.tool=this.diagram.getTool(this.action),this.tool||(this.action="Select",this.tool=this.diagram.getTool(this.action)),this.getMouseEventArgs(this.currentPosition,this.eventArgs),r||t.shiftKey){var o=r&&t.shiftKey?{ctrlKey:r,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=o}this.eventArgs.position=this.currentPosition;var a=this.diagram.selectedItems.nodes;if(this.tool.mouseDown(this.eventArgs),this.diagram.selectedItems.canToggleSelection&&a&&this.diagram.selectedItems.nodes&&this.tool instanceof ig)for(var l=0;l<a.length;l++)a[parseInt(l.toString(),10)].id!==this.diagram.selectedItems.nodes[parseInt(l.toString(),10)].id&&(this.isSwimlaneSelected=!0);this.initialEventArgs={source:this.eventArgs.source,sourceWrapper:this.eventArgs.sourceWrapper},this.initialEventArgs.position=this.currentPosition,this.initialEventArgs.info=this.eventArgs.info,this.inAction=!1,"touchstart"===t.type&&(i&&i.length>=2&&(this.touchStartList=ov(this.touchStartList,0,i)),i||t.preventDefault())}else{this.diagram,this.currentPosition,t.buttons,this.eventArgs.actualObject,0===t.button||t.button;this.inAction=!1,this.tool.mouseUp(this.eventArgs)}this.isForeignObject(t.target)||this.isForeignObject(t.target,!0)||i||t.preventDefault()}},t.prototype.deletePortAutomatically=function(){if(this.hoverElement instanceof Wc||this.hoverElement instanceof Yc)for(var t=this.hoverElement,e=this.diagram.nameTable[t.parentObj.id],i=0;i<e.ports.length;i++)e.ports[parseInt(i.toString(),10)].id===t.id&&0===t.inEdges.length&&0===t.outEdges.length&&this.diagram.removePorts(e,[t])},t.prototype.createPortAutomaticallyAndActivateTool=function(t){if(this.hoverElement)if(this.hoverElement instanceof Ny){var e=this.hoverElement,i=e.wrapper.bounds,n=(this.currentPosition.x-i.x)/i.width,s=(this.currentPosition.y-i.y)/i.height,r=void 0;if(e.ports&&e.ports.length>0?((r=Fn(e.ports[0])).id="port"+Hn(),r.offset={x:n,y:s},r.constraints|=Es.Draw):r={id:"port"+Hn(),offset:{x:n,y:s},visibility:rs.Visible,constraints:Es.Default|Es.Draw},t){this.diagram.addPorts(e,[r]);var o=Wu(this.diagram,e.ports[e.ports.length-1]);this.action="PortDraw"===o?o:this.action}else{if(this.eventArgs.source instanceof Rg&&this.eventArgs.target instanceof Ny)if(this.eventArgs.target.id===e.id)this.diagram.addPorts(e,[r]),(h=this.eventArgs.source).targetID=e.id,h.targetPortID=r.id}}else if(this.hoverElement instanceof Rg){var a=this.hoverElement,l=this.findConnectorOffset(a.intermediatePoints);r=void 0;if(a.ports&&a.ports.length>0?((r=Fn(a.ports[0])).id="port"+Hn(),r.offset=l,r.constraints|=Es.Draw):r={id:"port"+Hn(),offset:l,visibility:rs.Visible,constraints:Es.Default|Es.Draw},t)this.diagram.addPorts(a,[r]),this.diagram.drawingObject={sourcePortID:r.id,sourceID:a.id,type:"Orthogonal"},this.action="PortDraw";else if(this.eventArgs.source instanceof Rg&&this.eventArgs.target instanceof Rg){var h,c=this.eventArgs.target;(h=this.eventArgs.source).id!==a.id&&c.id===a.id&&(this.diagram.addPorts(a,[r]),h.targetID=a.id,h.targetPortID=r.id)}}else if(this.hoverElement instanceof Wc||this.hoverElement instanceof Yc){0===(r=this.hoverElement).inEdges.length&&0===r.outEdges.length&&(this.action="PortDraw")}},t.prototype.findConnectorOffset=function(t){for(var e=0,i=[],n=0;n<t.length-1;n++){var s=t[n+1].x-t[parseInt(n.toString(),10)].x,r=t[n+1].y-t[parseInt(n.toString(),10)].y,o=Math.hypot(s,r);i.push(o),e+=o}for(var a=0,l=1/0,h=0,c=0;h<t.length-1;h++){var d=t[parseInt(h.toString(),10)],p=t[h+1],u=this.getProjectionOnSegment(this.currentPosition,d,p),g=Math.hypot(this.currentPosition.x-u.x,this.currentPosition.y-u.y);g<l&&(l=g,a=c+Math.hypot(u.x-d.x,u.y-d.y)),c+=i[parseInt(h.toString(),10)]}return a/e},t.prototype.getProjectionOnSegment=function(t,e,i){var n=i.x-e.x,s=i.y-e.y,r=n*n+s*s;if(0===r)return e;var o=((t.x-e.x)*n+(t.y-e.y)*s)/r;return o=Math.max(0,Math.min(1,o)),{x:e.x+o*n,y:e.y+o*s}},t.prototype.mouseMoveExtend=function(t,e){(this.tool instanceof dg||this.tool instanceof pg)&&this.tool.mouseMove(this.eventArgs),this.diagram.scrollSettings.canAutoScroll?this.checkAutoScroll(t):this.blocked||this.tool.mouseMove(this.eventArgs),this.eventArgs.target&&(this.hoverElement=this.eventArgs.target);var i=!(this.eventArgs.target instanceof Ny||this.eventArgs.target instanceof Rg)||!(e instanceof Ny||e instanceof Rg);this.tool instanceof eg&&this.diagram.updatePortVisibility(this.hoverElement instanceof Ny||this.hoverElement instanceof Rg?this.hoverElement:this.hoverNode,rs.Connect|rs.Hover,i),this.hoverElement instanceof Ny&&this.hoverNode instanceof Ny&&this.hoverNode&&this.hoverNode.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.hoverNode,rs.Connect|rs.Hover,!0),this.hoverElement instanceof Rg&&this.hoverElement.ports.length>0&&this.diagram.updatePortVisibility(this.hoverElement,rs.Connect|rs.Hover,!0),this.previousElement instanceof Ny&&this.hoverElement&&this.previousElement.id!==this.hoverElement.id&&this.diagram.updatePortVisibility(this.previousElement,rs.Connect|rs.Hover,!0),this.previousElement=this.hoverElement,""!==this.diagram.tooltip.content&&(this.hoverElement=null),this.hoverNode=i?null:e},t.prototype.checkAction=function(t){if("LabelSelect"===this.action&&this.eventArgs.sourceWrapper&&(this.eventArgs.sourceWrapper instanceof Zs||this.eventArgs.sourceWrapper instanceof sp)){var e=this.commandHandler.findTarget(this.eventArgs.sourceWrapper,this.eventArgs.source);!Zu(this.diagram,e,!1,this.eventArgs.sourceWrapper)&&dp(e)&&(this.action="LabelDrag",this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))}else dp(t)&&cp(t)&&this.initialEventArgs&&this.initialEventArgs.source&&"Select"===this.action&&(!Zu(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof By&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),t instanceof Rg&&(!(t instanceof Rg)||Yu(this.currentPosition,t.sourcePoint,t.hitPadding)||Yu(this.currentPosition,t.targetPoint,t.hitPadding))||(this.action="Drag"),this.tool=this.getTool(this.action),this.tool.mouseDown(this.initialEventArgs))},t.prototype.isSwimlaneElements=function(t){return!t||!(t.isLane||t.isPhase||t.isHeader)},t.prototype.canShowTouchTooltip=function(t){return!!("touchstart"===t.type&&this.diagram.tool&fs.SingleSelect&&this.diagram.tool&fs.ZoomPan)&&(this.isMouseDown=!1,!0)},t.prototype.mouseMove=function(t,e){if(this.focus=!0,"touchmove"===t.type&&(this.touchArgs={target:t.target,type:"touchmove"}),this.isScrolling)t.preventDefault();else if(Op(this.diagram)||Tp(this.diagram)&&!Lp(this.diagram)){this.currentPosition=this.getMousePosition(t);var i=this.diagram.findObjectsUnderMouse(this.currentPosition),n=this.diagram.findObjectUnderMouse(i,this.action,this.inAction);!function(t,e){t.rulerSettings.showRulers&&(t.hRuler.drawRulerMarker(t.hRuler.element,e,t.scroller.horizontalOffset),t.vRuler.drawRulerMarker(t.vRuler.element,e,t.scroller.verticalOffset))}(this.diagram,this.currentPosition);var s=!1,r=void 0;if("touchmove"===t.type&&(e=t.touches)&&e.length>1&&(this.touchMoveList=ov(this.touchMoveList,0,e),"PinchZoom"!==this.action&&(s=!0)),!1===fn.equals(this.currentPosition,this.prevPosition)||this.inAction||this.canShowTouchTooltip(t)){if(!1===this.isMouseDown||s){this.eventArgs={};var o=null,a=void 0;if(null!==n){if((o=this.diagram.findElementUnderMouse(n,this.currentPosition,this.diagram))&&(a=this.commandHandler.findTarget(o,n)),(a instanceof Xc||a instanceof Gc)&&(a.tooltip&&""!==a.tooltip.content||(a=n)),a!==this.hoverElement){var l=this.getContent();this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==l&&this.elementLeave(),this.diagram.updatePortVisibility(this.hoverElement,rs.Hover,!0),n instanceof Ny&&(this.hoverNode=n);var h=!0;!this.isSwimlaneElements(n)&&this.hoverElement&&this.isSwimlaneElements(this.hoverElement)&&(h=!1),this.hoverElement=h?n:this.hoverElement;var c,d=void 0;(c=this.diagram.findElementUnderMouse(n,this.currentPosition,this.diagram))instanceof Xs&&((d=this.commandHandler.findTarget(c,n))instanceof Wc||d instanceof Yc)&&this.hoverElement.constraints&Es.ToolTip&&(this.hoverElement=d);var p=void 0;c instanceof Zs&&((p=this.commandHandler.findTarget(c,n))instanceof Xc||p instanceof Gc)&&p.constraints&ds.Tooltip&&(this.hoverElement=p),h?this.elementEnter(this.currentPosition,!1):this.hoverElement=n}else this.hoverElement&&this.hoverElement===a&&this.hoverElement.tooltip.content&&void 0!==this.diagram.tooltipObject&&"Mouse"===this.hoverElement.tooltip.relativeMode&&this.setTooltipOffset(this.currentPosition);o&&(r=this.commandHandler.findTarget(o,n))}this.action=this.diagram.findActionToBeDone(n,o,this.currentPosition,r),this.checkFixedUserHandleEvent(Ds.onFixedUserHandleMouseEnter,n,o),this.checkUserHandleEvent(Ds.onUserHandleMouseEnter),this.checkPreviousAction(),this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.tool=this.getTool(this.action),this.mouseEvents(),this.tool instanceof og||this.tool instanceof pg||this.tool instanceof dg?this.tool.mouseMove(this.eventArgs):e&&this.tool instanceof lg&&this.tool.mouseDown(this.eventArgs),this.updateCursor(),this.renderUmlHighLighter(this.eventArgs);var u=!1;this.hoverElement&&!(this.tool instanceof lg)&&n instanceof Ny&&this.isSwimlaneElements(n)&&(0===this.diagram.selectedItems.nodes.length||!Zu(this.diagram,this.hoverElement))||this.hoverElement instanceof Rg||(u=!0),this.hoverElement&&!(this.tool instanceof lg)&&n instanceof Rg&&(0===this.diagram.selectedItems.connectors.length||!Zu(this.diagram,this.hoverElement))||this.hoverElement instanceof Ny||(u=!0),this.diagram.updatePortVisibility(this.hoverElement,rs.Hover,u);var g=this.getContent();null===n&&this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&g&&(this.hoverElement=null,this.elementLeave()),s=!1}else{if(this.eventArgs.position=this.currentPosition,"Drag"===this.action&&!Zu(this.diagram,this.eventArgs.source,!1)&&this.eventArgs.source instanceof By&&this.getMouseEventArgs(this.currentPosition,this.eventArgs),this.mouseEvents(),t.ctrlKey||t.shiftKey){var m=t.ctrlKey&&t.shiftKey?{ctrlKey:t.ctrlKey,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=m}this.checkAction(n);var f=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,f),this.updateCursor(),this.inAction=!0,this.initialEventArgs=null,"Drag"!==this.action&&"Rotate"!==this.action||(this.diagram.diagramActions=this.diagram.diagramActions|Is.Interactions);var y=this.diagram.scroller.getPageBounds();this.mouseMoveExtend(t,n);var v=this.diagram.scroller.getPageBounds();if(n&&(y.width!==v.width||y.height!==v.height||y.x!==v.x||y.y!==v.y)&&this.diagram.views&&this.diagram.views.overview){var b=this.diagram.views.overview;b.updateView(b)}}this.prevPosition=this.currentPosition,this.isForeignObject(t.target,!0)||t.preventDefault()}}},t.prototype.getContent=function(){var t,e=this.hoverElement instanceof Ny&&this.hoverElement.constraints&ps.Tooltip||this.hoverElement instanceof Rg&&this.hoverElement.constraints&cs.Tooltip||(this.hoverElement instanceof Wc||this.hoverElement instanceof Yc)&&this.hoverElement.constraints&Es.ToolTip||(this.hoverElement instanceof Xc||this.hoverElement instanceof Gc)&&this.hoverElement.constraints&ds.Tooltip,i=this.hoverElement;i instanceof Ny&&i.children&&i.children.length>0&&(t=this.findIntersectChild(i));var n=e?this.hoverElement.tooltip.content:this.diagram.tooltip.content;return n=t?t.tooltip.content:n},t.prototype.findIntersectChild=function(t){for(var e,i=new Tn(this.currentPosition.x,this.currentPosition.y,8,8),n=0;n<t.children.length;n++)if((e=this.diagram.getObject(t.children[parseInt(n.toString(),10)])).wrapper.outerBounds.intersects(i))return e;return null},t.prototype.checkAutoScroll=function(t){var e=this.startAutoScroll(t);if(!e&&this.doingAutoScroll)this.doingAutoScroll=!1,clearInterval(this.timeOutValue);else if(e){if((this.tool instanceof rg||this.tool instanceof og||this.tool instanceof ig||this.tool instanceof sg||this.tool instanceof $u||this.tool instanceof eg)&&this.inAction){var i=this,n=this.diagram.scrollSettings.autoScrollFrequency;(n<10||isNaN(n))&&(n=100),this.diagram.scrollSettings.canAutoScroll&&e&&!this.doingAutoScroll&&(this.doingAutoScroll=!0,this.timeOutValue=setInterval(function(s){i.doAutoScroll(e,t,n)},n))}}else this.blocked=!this.tool.mouseMove(this.eventArgs)},t.prototype.mouseUp=function(t){clearTimeout(this.timeOutTapHold),this.touchArgs=void 0,this.diagram.diagramRenderer.touchMove=void 0,this.eventArgs&&this.eventArgs.target&&this.eventArgs.target!==this.hoverNode&&this.eventArgs.target!==this.lastObjectUnderMouse&&(this.hoverNode=this.eventArgs.target,this.lastObjectUnderMouse=this.eventArgs.target);var e=!1;(this.tool instanceof ig||this.tool instanceof ng)&&(e=!0),this.checkFixedUserHandleEvent(Ds.onFixedUserHandleMouseUp,this.targetItem,this.previousTarget),this.checkUserHandleEvent(Ds.onUserHandleMouseUp),"SVG"===this.diagram.mode&&wp(this.diagram)&&this.updateVirtualization();var i,n=this.diagram.selectedItems.nodes,s=this.diagram.selectedItems.connectors;this.diagram.previousSelectedObject=null,this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Ms.DrawSelectorBorder);var r=t.touches;if(this.isScrolling)return this.isScrolling=!1,void t.preventDefault();if(!this.checkEditBoxAsTarget(t)&&Op(this.diagram)||Tp(this.diagram)&&!Lp(this.diagram)){if(this.tool&&(!(this.tool instanceof dg||this.tool instanceof pg)||(this.tool instanceof dg||this.tool instanceof pg)&&2===t.detail)){if(!this.isForeignObject(t.target)&&this.isMouseDown&&document.getElementById(this.diagram.element.id+"content").focus(),!this.inAction&&3!==t.which&&"Drag"===this.action){this.action="Select";var o=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),a=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(a,this.action,this.inAction),h=!0;if(!t.ctrlKey&&this.isMouseDown&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1&&1===t.which&&!(this.diagram.diagramActions&Is.PreventClearSelection)&&(h=!1,this.commandHandler.clearSelection()),(!Zu(this.diagram,l)||!h)&&(this.commandHandler.selectObjects([l],void 0,o),this.diagram.selectedItems.canToggleSelection)){var c=this.diagram.selectedItems.nodes;c?c[0].parentObj instanceof Oy&&(i=!0):this.diagram.selectedItems.connectors.length>0&&(i=!0)}}var d=!1,p=this.updateContainerProperties();this.eventArgs.actualObject&&this.eventArgs.actualObject instanceof Ny&&("Container"===this.eventArgs.actualObject.shape.type||this.eventArgs.actualObject.shape.activity&&this.eventArgs.actualObject.shape.activity.subProcess&&this.eventArgs.actualObject.shape.activity.subProcess.processes)&&this.diagram.updateDiagramElementQuad();var u=void 0;if(this.addUmlNode(),this.inAction=!1,this.isMouseDown=!1,this.diagram.selectedObject.helperObject&&(u=this.updateContainerBounds()),this.tool&&(this.tool.prevPosition||this.tool instanceof cg)){this.eventArgs.position=this.currentPosition;var g=this.getConnectorPadding(this.eventArgs);this.getMouseEventArgs(this.currentPosition,this.eventArgs,this.eventArgs.source,g);var m=this.isMetaKey(t);if(m||t.shiftKey){var f=m&&t.shiftKey?{ctrlKey:m,shiftKey:t.shiftKey}:{ctrlKey:!0};this.eventArgs.info=f}if(this.diagram.diagramActions&Is.Interactions&&(this.diagram.diagramActions=this.diagram.diagramActions&~Is.Interactions),this.eventArgs.clickCount=t.detail,this.diagram.selectedObject.helperObject&&(this.tool instanceof ig||this.tool instanceof sg)){if(this.diagram.selectedObject.actualObject&&""!==this.diagram.selectedObject.actualObject.parentId){var y=this.diagram.getObject(this.diagram.selectedObject.actualObject.parentId);y&&y.isLane&&(this.commandHandler.isContainer=!0)}(d=this.diagram.lineRoutingModule&&this.diagram.nameTable.helper&&this.eventArgs.target&&this.eventArgs.target.isLane&&(this.eventArgs.source instanceof By&&this.eventArgs.source.nodes.length>0&&""===this.eventArgs.source.nodes[0].parentId||""===this.eventArgs.source.parentId))&&(this.diagram.diagramActions=this.diagram.diagramActions|Is.PreventLaneContainerUpdate),this.tool.mouseUp(this.eventArgs,p.isPreventHistory)}else{if(this.diagram.selectedItems.canToggleSelection){var v=void 0,b=void 0;if(this.diagram.selectedItems.nodes.length>0)for(var C=0;C<this.diagram.selectedItems.nodes.length;C++){this.diagram.selectedItems.nodes[parseInt(C.toString(),10)].isLane||this.diagram.selectedItems.nodes[parseInt(C.toString(),10)].isPhase||this.diagram.selectedItems.nodes[parseInt(C.toString(),10)].parentObj instanceof Oy||this.diagram.selectedItems.nodes[parseInt(C.toString(),10)].parentObj instanceof ky||(v=""!==this.diagram.selectedItems.nodes[parseInt(C.toString(),10)].parentId)}var I=this.diagram.selectedItems.nodes;for(C=0;C<n.length;C++)(n.length>1&&I[0].id===n[parseInt(C.toString(),10)].id||s.length>0)&&(b=!0);!this.isSwimlaneSelected&&!i&&!b&&this.tool instanceof ig&&"Select"===this.currentAction&&(!v||this.diagram.selectedItems.connectors.length>0)&&this.commandHandler.clearSelection(!0)}this.diagram.constraints&ms.AutomaticPortCreation&&t.ctrlKey&&this.createPortAutomaticallyAndActivateTool(!1),this.isSwimlaneSelected=!1,this.tool instanceof $u?this.tool.mouseUp(this.eventArgs,t.button):this.tool.mouseUp(this.eventArgs),this.diagram.constraints&ms.AutomaticPortCreation&&t.ctrlKey&&this.deletePortAutomatically(),!this.diagram.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(!t.pageY&&t instanceof TouchEvent&&t.changedTouches?(window.getSelection().removeAllRanges(),this.diagram.contextMenuModule.contextMenu.open(t.changedTouches[0].pageY,t.changedTouches[0].pageX,this.diagram.element),t.preventDefault()):this.diagram.contextMenuModule.contextMenu.open(t.pageY,t.pageX,this.diagram.element),this.diagram.checkMenu=!1)}p.hasStack&&this.diagram.endGroupAction()}if(u&&this.diagram.endGroupAction(),this.updateContainerBounds(!0),2!==this.eventArgs.clickCount&&("Select"!==this.action&&this.commandHandler.updateSelectedNodeProperties(this.eventArgs.source),d)){this.diagram.diagramActions=this.diagram.diagramActions&~Is.PreventLaneContainerUpdate;var M=this.eventArgs.source instanceof By?this.eventArgs.source.nodes:[this.eventArgs.source];if(M)for(C=0;C<M.length;C++)M[parseInt(C.toString(),10)].container||(this.commandHandler.dropChildToContainer(this.eventArgs.target,M[parseInt(C.toString(),10)]),this.commandHandler.renderContainerHelper(M[parseInt(C.toString(),10)]))}if(this.diagram.selectedObject&&this.diagram.selectedObject.helperObject){var S=this.isSwimlaneChild(this.diagram.selectedObject.actualObject),x=this.diagram.selectedObject.actualObject&&this.diagram.selectedObject.actualObject.width===this.diagram.selectedObject.helperObject.width&&this.diagram.selectedObject.actualObject.height===this.diagram.selectedObject.helperObject.height;this.diagram.remove(this.diagram.selectedObject.helperObject),this.commandHandler.isTargetSubProcess(this.diagram.selectedObject.actualObject)&&""===this.diagram.selectedObject.actualObject.parentId&&this.swapProcessChildInDom(this.diagram.element.id+"_diagramLayer",this.diagram.selectedObject.actualObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0},(this.diagram.diagramActions&Is.PublicMethod&&this.diagram.constraints&ms.LineRouting||S&&x)&&(this.diagram.diagramActions=this.diagram.diagramActions&~Is.PublicMethod)}if(this.blocked=!1,this.hoverElement){var w=rs.Connect;Zu(this.diagram,this.hoverElement)&&(w|=rs.Hover),this.diagram.updatePortVisibility(this.hoverElement,w,!0),this.hoverElement=null}this.touchStartList=null,this.touchMoveList=null,this.tool instanceof ag||(this.tool=null)}r||t.preventDefault(),this.diagram.currentDrawingObject=void 0;var D=this.diagram.selectedItems,E=!1;if(this.commandHandler.isUserHandle(this.currentPosition)&&this.isForeignObject(t.target)&&(E=!0),!this.inAction&&D.wrapper&&D.userHandles.length>0&&!E&&this.diagram.renderSelector(!0),!this.inAction&&!this.diagram.currentSymbol&&this.eventArgs){var T=this.getTargetElement(),A={element:T.target instanceof Wc||T.target instanceof Yc||T.target instanceof Kg||T.target instanceof lp||T.target instanceof hp?T.target:this.eventArgs.source||this.diagram,position:this.eventArgs.position,count:t.detail,actualObject:this.eventArgs.actualObject,button:0===t.button?"Left":1===t.button?"Middle":"Right"};this.diagram.tool!==fs.ZoomPan&&this.diagram.triggerEvent(Ds.click,A)}this.eventArgs={}}this.diagram.diagramActions=this.diagram.diagramActions&~Is.PreventLaneContainerUpdate,e&&this.updateAnnotation(this.diagram.selectedItems),this.previousElement=null,this.eventArgs={},this.diagram.commandHandler.removeStackHighlighter()},t.prototype.isSwimlaneChild=function(t){if(t.shape&&"SwimLane"!==t.shape.type){var e=this.diagram.nameTable[t.parentId];if(!e)return!1;var i=e.parentId?this.diagram.nameTable[e.parentId]:e;return i&&i.shape&&"SwimLane"===i.shape.type}return!1},t.prototype.updateAnnotation=function(t){var e=t.nodes;if(e.length>0)for(var i=0;i<e.length;i++){var n=e[parseInt(i.toString(),10)];this.diagram.updateConnectorEdges(n)}},t.prototype.swapProcessChildInDom=function(t,e){var i=document.getElementById(t);if(e.shape.activity.subProcess.processes)for(var n=0;n<e.shape.activity.subProcess.processes.length;n++){var s=document.getElementById(e.shape.activity.subProcess.processes[parseInt(n.toString(),10)]+"_groupElement");s&&i.appendChild(s)}},t.prototype.getTargetElement=function(){var t,e=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action),i=this.objectFinder.findObjectUnderMouse(this.diagram,e,this.action,this.inAction,this.eventArgs,this.currentPosition);if("None"!==this.previousAction&&this.diagram.selectedItems.userHandles)for(var n=0;n<this.diagram.selectedItems.userHandles.length;n++){var s=this.diagram.selectedItems.userHandles[parseInt(n.toString(),10)];this.previousAction===s.name&&(t=s)}var r=null;return null!==i&&(r=this.diagram.findElementUnderMouse(i,this.currentPosition,this.diagram))&&(t=this.commandHandler.findTarget(r,i)),{obj:i,sourceElement:r,target:t}},t.prototype.getConnectorPadding=function(t){var e,i=t.source;if(i&&i instanceof By&&i.connectors.length){var n=i.connectors[0];e=n.constraints&cs.ConnectToNearByPort?n.connectionPadding:0}else i&&i instanceof Rg&&"PortDraw"===this.action&&this.tool instanceof og&&i.constraints&cs.ConnectToNearByPort&&(e=i.connectionPadding);return e||0},t.prototype.addSwimLaneObject=function(t){var e,i,n,s,r,o,a=0,l=t.shape,h=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);if(i||(i=this.diagram.findObjectUnderMouse(h,this.action,this.inAction)),this.diagram.clearSelectorLayer(),i&&!(i.isLane||i.isPhase||i.isHeader))for(var c=0;c<h.length;c++){var d=this.diagram.nameTable[h[parseInt(c.toString(),10)].id];(d.isLane||d.isPhase||d.isHeader)&&(i=d)}if(i&&(l.isPhase||l.isLane&&i.isLane)){var p=i.parentId;e=this.diagram.nameTable[""+p]}var u=null;if(e&&(n=e.shape,r=l.isLane?l.orientation===n.orientation:l.orientation!==n.orientation,l.isLane&&l.orientation!==n.orientation&&(r=!0,u="Horizontal"===l.orientation?"height":"width")),r&&i){if(n&&n.header&&n.hasHeader&&"Horizontal"===n.orientation&&(a=1),n.phases&&n.phases.length>0&&(a+=1),l.isPhase){o="Horizontal"===n.orientation?this.currentPosition.x-e.wrapper.bounds.x:this.currentPosition.y-(e.wrapper.bounds.y+(n.hasHeader?n.header.height:0));var g={id:Hn(),offset:o,header:{annotation:{content:void 0===l.phases[0].header?"Phase":l.phases[0].header.annotation.content,style:void 0===l.phases[0].header?{}:l.phases[0].header.annotation.style}},style:void 0===l.phases[0]?{}:l.phases[0].style};this.diagram.addPhases(e,[g])}else{var m={id:Hn(),style:l.lanes[0].style,canMove:l.lanes[0].canMove,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}};if("Horizontal"===l.orientation?m.height=l.lanes[0].height:m.width=l.lanes[0].width,"Horizontal"===n.orientation?(s=i.rowIndex?i.rowIndex:this.diagram.nameTable[i.parentId].rowIndex,i.wrapper.offsetY<this.currentPosition.y&&(s+=1)):(s=i.columnIndex?i.columnIndex:this.diagram.nameTable[i.parentId].columnIndex,this.currentPosition.x<i.wrapper.bounds.center.x&&(s-=1)),n.lanes.length>s)m.header.width=n.lanes[parseInt(s.toString(),10)].header.width,m.header.height=n.lanes[parseInt(s.toString(),10)].header.height;else{var f=void 0;f="Horizontal"===n.orientation?i.rowIndex<3?0:s-a-1:s-1,m.header.width=n.lanes[parseInt(f.toString(),10)].header.width,m.header.height=n.lanes[parseInt(f.toString(),10)].header.height}u&&("height"===u?(m.width=m.height,delete m.height):(m.height=m.width,delete m.width)),this.diagram.addLanes(e,[m],"Horizontal"===n.orientation?s-a:s)}this.commandHandler.select(e)}else if(l.isLane){var y={id:Hn(),width:t.width,height:t.height,addInfo:t.addInfo,shape:{type:"SwimLane",header:{annotation:{content:void 0===l.header?"Header":l.header.annotation.content,style:void 0===l.header?{}:l.header.annotation.style},height:50,style:l.header?l.header.style:l.lanes[0].header.style},phases:[{id:Hn(),header:{annotation:{content:void 0===l.phases||void 0===l.phases[0].header?"Phase":l.phases[0].header.annotation.content,style:void 0===l.phases||void 0===l.phases[0].header?{}:l.phases[0].header.annotation.style},style:void 0===l.phases||void 0===l.phases[0].header?{}:l.phases[0].header.style},style:void 0===l.phases?{}:l.phases[0].style}],lanes:[{id:Hn(),height:t.height,width:t.width,style:l.lanes[0].style,canMove:l.lanes[0].canMove,header:{annotation:{content:l.lanes[0].header.annotation.content,style:l.lanes[0].header.annotation.style},style:l.lanes[0].header.style}}],orientation:l.orientation}};"Vertical"===l.orientation&&(y.width+=20),y.offsetX=this.currentPosition.x+y.width/2,y.offsetY=this.currentPosition.y+y.height/2,y.style=t.style,this.diagram.add(y)}},t.prototype.mouseLeave=function(t){(this.tool&&this.inAction&&this.tool.mouseLeave(this.eventArgs),this.diagram.selectedObject.helperObject)&&(this.updateContainerProperties(),this.updateContainerBounds()&&this.diagram.endGroupAction());this.eventArgs&&this.eventArgs.source&&(this.diagram.updatePortVisibility(this.eventArgs.source,rs.Hover,!0),this.hoverElement=null),this.eventArgs&&!this.eventArgs.source&&this.hoverElement&&(this.hoverElement=null),this.tool instanceof eg&&this.eventArgs&&this.eventArgs.target&&this.eventArgs.target instanceof Ny&&(this.diagram.updatePortVisibility(this.eventArgs.target,rs.Hover|rs.Connect,!0),this.hoverElement=null);var e=this.diagram.selectedItems;e&&e.wrapper&&(Df(this.diagram,e)||this.diagram.renderSelector(!0)),(this.diagram.diagramActions&Is.Interactions||this.diagram.diagramActions&Is.ToolAction)&&(this.diagram.diagramActions=this.diagram.diagramActions&~Is.ToolAction),this.isMouseDown=!1,this.focus=!1,this.touchStartList=null,this.touchMoveList=null,this.elementLeave(),this.commandHandler.removeSnap(),this.inAction=!1,this.eventArgs={},this.diagram.selectedObject&&this.diagram.selectedObject.helperObject&&(this.diagram.remove(this.diagram.selectedObject.helperObject),this.diagram.selectedObject={helperObject:void 0,actualObject:void 0}),this.tool=null,function(){var t,e,i=document.getElementsByClassName("e-d-ruler-marker");if(i&&i.length>0)for(e=i.length-1;e>=0;e--)(t=i[parseInt(e.toString(),10)])&&t.parentNode.removeChild(t)}(),"Rotate"===this.action&&this.diagram.diagramCanvas.classList.remove("e-diagram-rotate"),t.preventDefault()},t.prototype.mouseWheel=function(t){this.diagram.blazorActions|=ns.interaction;var e={event:t,cancel:!1};if(this.diagram.triggerEvent(Ds.mouseWheel,e),!e.cancel){var i=t.wheelDelta>0||-40*t.detail>0,n=this.getMousePosition(t);if(this.diagram.tooltipObject.close(),this.isMetaKey(t)){var s=this.diagram.scrollSettings.zoomFactor;i?this.diagram.zoomTo({type:"ZoomIn",zoomFactor:s,focusPoint:n}):this.diagram.zoomTo({type:"ZoomOut",zoomFactor:s,focusPoint:n}),t.preventDefault()}else{var r=this.diagram.scroller.horizontalOffset,o=this.diagram.scroller.verticalOffset,a=i?10:-10;this.tool&&(this.tool instanceof dg||this.tool instanceof pg)&&(this.eventArgs={},this.getMouseEventArgs(n,this.eventArgs),this.eventArgs.position=n,this.tool.mouseWheel(this.eventArgs)),this.diagram.scrollActions|=xs.Interaction;var l=!0;if(t.isTrusted){var h=!1;(Math.abs(t.deltaY)<100&&-0===Math.abs(t.deltaX)||Math.abs(t.deltaX)<100&&-0===Math.abs(t.deltaY))&&(h=!0);var c=!1;if(0===t.deltaX&&0===t.deltaY||(c=navigator.userAgent.includes("Macintosh")),c)Math.abs(t.deltaX)>Math.abs(t.deltaY)?(t.shiftKey||t.deltaX&&-0!==t.deltaX&&(h||!c))&&this.diagram.scroller.zoom(1,a,0,n,l,void 0,h):!t.deltaY||-0===t.deltaY||!h&&c||this.diagram.scroller.zoom(1,0,a,n,l,void 0,h);else t.shiftKey||t.deltaX&&-0!==t.deltaX&&(h||!c)?this.diagram.scroller.zoom(1,a,0,n,l,void 0,h):!t.deltaY||-0===t.deltaY||!h&&c||this.diagram.scroller.zoom(1,0,a,n,l,void 0,h)}else t.shiftKey||t.deltaX&&-0!==t.deltaX?this.diagram.scroller.zoom(1,a,0,n,l):this.diagram.scroller.zoom(1,0,a,n,l);this.diagram.scrollActions&=~xs.Interaction,r===this.diagram.scroller.horizontalOffset&&o===this.diagram.scroller.verticalOffset||t.preventDefault()}if(this.diagram.textEditing){if(this.diagram.isTriggerEvent=!0,this.diagram.activeLabel.parentId){var d=this.diagram.getObject(this.diagram.activeLabel.parentId);this.diagram.startTextEdit(d,this.diagram.activeLabel.id)}this.diagram.isTriggerEvent=!1}this.diagram.blazorActions=this.diagram.blazorActions&~ns.interaction}},t.prototype.keyDown=function(t){if(t.fromMouseEvents&&(t.ctrlKey&&(this.keyArgs.keyModifiers=1),t.shiftKey&&(this.keyArgs.keyModifiers=4),t.shiftKey&&t.ctrlKey&&(this.keyArgs.keyModifiers=5)),!(this.diagram.diagramActions&Is.TextEdit)&&!this.checkEditBoxAsTarget(t)||"Escape"===t.key||27===t.keyCode){var e=void 0,i=t.keyCode?t.keyCode:t.which,n=t.key;"ArrowDown"!==n&&"ArrowUp"!==n&&"ArrowLeft"!==n&&"ArrowRight"!==n||(this.isNudgeKey=!0);var s=this.isMetaKey(t);if(this.diagram.commandManager&&this.diagram.commands)for(var r=this.diagram.commands,o=0,a=Object.keys(r);o<a.length;o++){var l=a[o];if((e=this.diagram.commands[""+l])&&(e.gesture.keyModifiers||e.gesture.key)&&(i===e.gesture.key||Cs[e.gesture.key]&&n===Cs[e.gesture.key]||n===Cs[e.gesture.key].split("Number")[1]||this.isDeleteKey(n,l))&&(!e.gesture.keyModifiers&&!t.altKey&&!t.shiftKey&&!s||e.gesture.keyModifiers&&(s||t.altKey||t.shiftKey)&&this.altKeyPressed(e.gesture.keyModifiers)&&t.altKey||this.shiftKeyPressed(e.gesture.keyModifiers)&&t.shiftKey||this.ctrlKeyPressed(e.gesture.keyModifiers)&&s&&this.keyArgs.keyModifiers===e.gesture.keyModifiers)){var h=is(e.canExecute);if(x()||h&&h({keyDownEventArgs:KeyboardEvent,parameter:e.parameter})){if(t.preventDefault(),"Escape"===t.key)if(this.checkEditBoxAsTarget(t))document.getElementById(this.diagram.diagramCanvas.id).focus();else if(this.diagram.currentSymbol){this.diagram.removeFromAQuad(this.diagram.currentSymbol),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[this.diagram.currentSymbol.id]),this.diagram.removeElements(this.diagram.currentSymbol);var c=this.diagram.currentSymbol;c instanceof Ny&&"Bpmn"===c.shape.type&&"TextAnnotation"===c.shape.shape&&this.diagram.removeDependentConnector(c),Lm(this.diagram.currentSymbol,this.diagram),delete this.diagram.nameTable[this.diagram.currentSymbol.id],this.diagram.droppable.sourceElement.draggable.intDestroy();var d=this.diagram.droppable.selectedSymbols;d.parentNode.removeChild(d);var p=this.diagram.diagramActions;this.diagram.diagramActions=this.diagram.addConstraints(p,Is.PreventClearSelection),this.tool.mouseUp(this.eventArgs),this.diagram.diagramRenderer.rendererActions=this.diagram.removeConstraints(this.diagram.diagramRenderer.rendererActions,Ms.DrawSelectorBorder),this.diagram.previousSelectedObject&&this.diagram.select(this.diagram.previousSelectedObject),this.action="Select",this.diagram.previousSelectedObject=null,this.diagram.currentSymbol=null,this.diagram.diagramActions=this.diagram.removeConstraints(p,Is.PreventClearSelection),this.isMouseDown=!1}else this.inAction&&this.diagram.drawingObject&&this.tool&&this.tool.inAction&&(this.tool.mouseUp(this.eventArgs),this.tool=null,this.isMouseDown=!1);if(e.execute&&(this.commandObj=e,this.diagram.tool!==fs.ZoomPan)){var u=is(e.execute);this.isNudgeKey?(this.isKeyUp||(this.keyArgs.oldValue={offsetX:this.diagram.selectedItems.offsetX,offsetY:this.diagram.selectedItems.offsetY},this.keyCount++,this.keyCount>4&&(u({keyDownEventArgs:KeyboardEvent,parameter:e.parameter,type:"KEYDOWN"}),this.keyCount=0,this.keyArgs.newValue={offsetX:this.diagram.selectedItems.offsetX,offsetY:this.diagram.selectedItems.offsetY},this.diagram.triggerEvent(Ds.positionChange,this.keyArgs))),this.isKeyUp=!1):u({keyDownEventArgs:KeyboardEvent,parameter:e.parameter})}break}}}}this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;var g=this.diagram.selectedItems;this.keyArgs={element:g,key:t.key,keyCode:t.keyCode?t.keyCode:t.which},this.getKeyModifier(this.keyArgs,t),this.diagram.diagramActions&Is.TextEdit&&this.getlabel(this.keyArgs,t),this.diagram.triggerEvent(Ds.keyDown,this.keyArgs)},t.prototype.getlabel=function(t,e){var i=this.diagram.activeLabel;t.target=this.diagram.element.id+"_editBox";var n=this.diagram.nameTable[i.parentId];if(document.getElementById(this.diagram.element.id+"_editBox")){t.text=document.getElementById(this.diagram.element.id+"_editBox").value;for(var s=0;s<n.annotations.length;s++)if(n.annotations[parseInt(s.toString(),10)].id===i.id){t.label=n.annotations[parseInt(s.toString(),10)];break}}},t.prototype.getKeyModifier=function(t,e){t.keyModifiers=bs.None,e.ctrlKey&&(t.keyModifiers|=bs.Control),e.shiftKey&&(t.keyModifiers|=bs.Shift),e.altKey&&(t.keyModifiers|=bs.Alt),this.isMetaKey(e)&&(t.keyModifiers|=bs.Meta)},t.prototype.keyUp=function(t){var e=this.diagram.selectedItems;this.keyArgs={element:e,key:t.key,keyCode:t.keyCode?t.keyCode:t.which,oldValue:{offsetX:e.offsetX,offsetY:e.offsetY},newValue:{offsetX:e.offsetX,offsetY:e.offsetY}};this.diagram.selectedItems.nodes.length?this.diagram.selectedItems.nodes:this.diagram.selectedItems.connectors;(this.getKeyModifier(this.keyArgs,t),this.diagram.diagramActions&Is.TextEdit&&this.getlabel(this.keyArgs,t),this.diagram.triggerEvent(Ds.keyUp,this.keyArgs),!this.isKeyUp&&this.isNudgeKey)&&(is(this.commandObj.execute)({keyDownEventArgs:KeyboardEvent,parameter:this.commandObj.parameter,type:"KEYUP"}),this.keyArgs.newValue={offsetX:this.diagram.selectedItems.offsetX,offsetY:this.diagram.selectedItems.offsetY},this.diagram.triggerEvent(Ds.positionChange,this.keyArgs),this.isNudgeKey=!1,this.keyCount=0)},t.prototype.startAutoScroll=function(t){var e=this.getMousePosition(t);e.x*=this.diagram.scroller.currentZoom,e.y*=this.diagram.scroller.currentZoom;var i,n=Qg(this.diagram),s=this.diagram.scrollSettings.autoScrollBorder;if("mozilla"===G.info.name&&0===this.diagram.scroller.viewPortWidth){var r=document.getElementById(this.diagram.element.id).getBoundingClientRect();r.width!==this.diagram.scroller.viewPortWidth&&this.diagram.scroller.setViewPortSize(r.width,r.height)}return this.diagram.scrollSettings.canAutoScroll&&(e.x+this.diagram.scroller.horizontalOffset+s.right+n.width>=this.diagram.scroller.viewPortWidth-18?i="right":e.x+this.diagram.scroller.horizontalOffset<s.left?i="left":e.y+this.diagram.scroller.verticalOffset+s.bottom+n.height>this.diagram.scroller.viewPortHeight-18?i="bottom":e.y+this.diagram.scroller.verticalOffset<s.top&&(i="top")),i},t.prototype.doAutoScroll=function(t,e,i,n){var s=t;if((this.tool instanceof rg||this.tool instanceof og||this.tool instanceof ig||this.tool instanceof sg||this.tool instanceof $u||this.tool instanceof eg)&&this.inAction){var r=this.getMousePosition(e),o=(this.diagram.scrollSettings.autoScrollBorder,0),a=0,l=!1,h="",c={x:r.x,y:r.y};switch(this.tool instanceof sg&&("ResizeSouthEast"===this.tool.corner||"ResizeSouthWest"===this.tool.corner||"ResizeNorthWest"===this.tool.corner||"ResizeNorthEast"===this.tool.corner)&&(l=!0,h=this.tool.corner),s){case"right":c.x=r.x+10,o=10,l&&("ResizeSouthEast"===h?(c.y=r.y+10,a=10):(c.y=r.y-10,a=-10));break;case"left":c.x=r.x-10,o=-10,l&&("ResizeNorthWest"===h?(c.y=r.y-10,a=-10):(c.y=r.y+10,a=10));break;case"bottom":c.y=r.y+10,a=10,l&&("ResizeSouthEast"===h?(c.x=r.x+10,o=10):(c.x=r.x-10,o=-10));break;case"top":c.y=r.y-10,a=-10,l&&("ResizeNorthEast"===h?(c.x=r.x+10,o=10):(c.x=r.x-10,o=-10))}this.eventArgs.position={x:c.x,y:c.y},this.currentPosition=this.eventArgs.position;var d=this.objectFinder.findObjectsUnderMouse(this.currentPosition,this.diagram,this.eventArgs,null,this.action);this.eventArgs.target=this.diagram.findObjectUnderMouse(d,this.action,this.inAction),this.tool.mouseMove(this.eventArgs),this.diagram.scrollActions|=xs.Interaction,this.diagram.scroller.zoom(1,-o,-a,r,!0),this.diagram.scrollActions&=~xs.Interaction}},t.prototype.mouseEvents=function(){for(var t=this.diagram.findObjectsUnderMouse(this.currentPosition),e=0;e<t.length;e++)this.eventArgs.actualObject===t[parseInt(e.toString(),10)]&&t.splice(e,1);var i={targets:{}};if(x()||(i={targets:t,element:this.eventArgs.source===this.eventArgs.actualObject?void 0:this.eventArgs.source,actualObject:this.eventArgs.actualObject}),this.lastObjectUnderMouse&&this.diagram.mouseLeave&&(!this.eventArgs.actualObject||this.lastObjectUnderMouse!==this.eventArgs.actualObject)){var n={targets:void 0,element:this.lastObjectUnderMouse,actualObject:void 0};this.diagram.triggerEvent(Ds.mouseLeave,n),this.lastObjectUnderMouse=null}(!this.lastObjectUnderMouse&&this.eventArgs.source||this.lastObjectUnderMouse!==this.eventArgs.actualObject)&&(this.lastObjectUnderMouse=this.eventArgs.actualObject,void 0!==this.eventArgs.actualObject&&this.diagram.triggerEvent(Ds.mouseEnter,i)),this.eventArgs.actualObject&&this.diagram.triggerEvent(Ds.mouseOver,i)},t.prototype.elementEnter=function(t,e){if(!e){var i=this.hoverElement instanceof Ny&&this.hoverElement.constraints&ps.Tooltip||this.hoverElement instanceof Rg&&this.hoverElement.constraints&cs.Tooltip||(this.hoverElement instanceof Wc||this.hoverElement instanceof Yc)&&this.hoverElement.constraints&Es.ToolTip||(this.hoverElement instanceof Xc||this.hoverElement instanceof Gc)&&this.hoverElement.constraints&ds.Tooltip,n=this.getContent(),s=void 0;this.hoverElement&&this.hoverElement.children&&this.hoverElement.children.length>0&&(s=this.findIntersectChild(this.hoverElement)),"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&Hc(this.diagram,s||(i?this.hoverElement:void 0)),this.hoverElement.tooltip.content&&("Mouse"===this.hoverElement.tooltip.relativeMode?this.setTooltipOffset(t):(this.diagram.tooltipObject.offsetX=0,this.diagram.tooltipObject.offsetY=0));var r=this.diagram.findObjectsUnderMouse(this.currentPosition),o=this.diagram.findObjectUnderMouse(r,this.action,this.inAction);if(null!==o){var a=void 0;if(this.hoverElement.tooltip.isSticky&&(this.diagram.tooltipObject.isSticky=!0),o instanceof Ny&&o.children&&o.children.length>0&&(o=s||o),o.ports&&(this.hoverElement instanceof Wc||this.hoverElement instanceof Yc))a=document.getElementById(o.id+"_"+this.hoverElement.id);else if(o.annotations&&(this.hoverElement instanceof Xc||this.hoverElement instanceof Gc))a=document.getElementById(o.id+"_"+this.hoverElement.id);else{var l=o.shape&&o.shape instanceof sy?"_content_native_element":"_groupElement";a=document.getElementById(o.id+l)}"Auto"===this.hoverElement.tooltip.openOn&&""!==n&&(this.diagram.tooltipObject.close(),this.diagram.tooltipObject.openOn=this.hoverElement.tooltip.openOn,this.diagram.tooltipObject.dataBind()),function(t,e){var i=0;return t instanceof Rg?t.constraints&cs.Tooltip?i=t.constraints&cs.Tooltip:t.constraints&cs.InheritTooltip&&(i=e.constraints&ms.Tooltip):t instanceof Wc||t instanceof Yc?t.constraints&Es.ToolTip?i=t.constraints&Es.ToolTip:t.constraints&Es.InheritTooltip&&(i=e.constraints&ms.Tooltip):t instanceof Xc||t instanceof Gc?t.constraints&ds.Tooltip&&(i=t.constraints&ds.Tooltip):t.constraints&ps.Tooltip?i=t.constraints&ps.Tooltip:t.constraints&ps.InheritTooltip&&(i=e.constraints&ms.Tooltip),i}(this.hoverElement,this.diagram)&&"Auto"===this.hoverElement.tooltip.openOn&&(this.diagram.tooltipObject.target=this.hoverElement.id,"Mouse"===this.hoverElement.tooltip.relativeMode?this.diagram.tooltipObject.open(this.diagram.element):this.diagram.tooltipObject.open(a))}}},t.prototype.elementLeave=function(){this.diagram.tooltipObject&&!this.diagram.tooltipObject.isSticky&&"Custom"!==this.diagram.tooltipObject.openOn&&this.diagram.tooltipObject.close()},t.prototype.setTooltipOffset=function(t){var e=this.updatePointBasedOnScale(t),i=wm(this.diagram,e,this.hoverElement);this.diagram.tooltipObject.offsetX=i.x,this.diagram.tooltipObject.offsetY=i.y},t.prototype.updatePointBasedOnScale=function(t){var e=this.diagram.scaleValue;return{x:t.x*e,y:t.y*e}},t.prototype.altKeyPressed=function(t){return!!(t&bs.Alt)},t.prototype.ctrlKeyPressed=function(t){return!!(t&bs.Control)},t.prototype.shiftKeyPressed=function(t){return!!(t&bs.Shift)},t.prototype.scrolled=function(t){this.diagram.updateScrollOffset()},t.prototype.isMobileOrIPadDevice=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1?"iOS (iPad)":/iPhone|iPad|iPod/.test(t)&&!window.MSStream?"iOS":/android/i.test(t)?"Android":/Mobile|Tablet/.test(t)?"Mobile":"Desktop"},t.prototype.doubleClick=function(t){if(Op(this.diagram)){var e=this.isMobileOrIPadDevice(),i=this.diagram.tool;"Desktop"!==e&&this.tool&&(this.tool instanceof dg||this.tool instanceof pg)&&(this.diagram.tool=0);var n=void 0,s=this.diagram.findObjectsUnderMouse(this.currentPosition),r=this.diagram.findObjectUnderMouse(s,this.action,this.inAction);if(null!==r&&Op(this.diagram)){if(n=this.diagram.findElementUnderMouse(r,this.currentPosition,this.diagram),this.tool&&(this.tool instanceof dg||this.tool instanceof pg)){this.currentPosition,t.detail;this.diagram.tool=i,this.tool.mouseUp(this.eventArgs),this.isMouseDown=!1,this.eventArgs={},this.tool=null,t.preventDefault()}else{var o=this.diagram.commandHandler.getObjectLayer(r.id);if(o&&!o.lock&&o.visible&&!(this.diagram.diagramActions&Is.TextEdit)){this.diagram.startTextEdit(r,n instanceof Zs?n.id.split(r.id+"_")[1]:void 0)}}}var a={source:r||this.diagram,position:this.currentPosition,count:t.detail};this.diagram.triggerEvent(Ds.doubleClick,a)}},t.prototype.itemClick=function(t,e){var i=t;return zu(this.diagram,i,!0)?i:null},t.prototype.inputChange=function(t){var e,i,n,s,r,o,a,l,h,c=document.getElementById(this.diagram.element.id+"_editBox"),d=document.getElementById(this.diagram.element.id+"_editTextBoxDiv"),p=c.value,u=p.split("\n");(!(s=this.diagram.selectedItems.nodes[0]?this.diagram.selectedItems.nodes[0]:this.diagram.selectedItems.connectors[0])&&this.tool instanceof ag||s&&"SwimLane"===s.shape.type)&&(s=this.diagram.nameTable[this.diagram.activeLabel.parentId]),s&&("Text"!==s.shape.type&&s.annotations.length>0||"Text"===s.shape.type)&&(n=this.diagram.getWrapper(s.wrapper,this.diagram.activeLabel.id),e=(e=s.wrapper.bounds.width<n.bounds.width?s.wrapper.bounds.width:n.bounds.width)>90?e:90,a=Uy(n.style,p,void 0,void 0,e),i=Number(c.style.fontSize.split("px")[0]),u.length>1&&""===u[u.length-1]&&(a.height=a.height+i),l=this.diagram.scroller.transform,h=kp(this.diagram)?l.scale:1,o=(90>(o=a.width)?90:o)*h,r=(12>a.height?12:a.height)*h,d.style.left=(n.bounds.center.x+l.tx)*l.scale-o/2-2.5+"px",d.style.top=(n.bounds.center.y+l.ty)*l.scale-r/2-3+"px",n.flipTransformOffset&&(d.style.left=parseFloat(d.style.left)+n.flipTransformOffset.x+"px",d.style.top=parseFloat(d.style.top)+n.flipTransformOffset.y+"px"),d.style.width=o+"px",d.style.height=r+"px",c.style.minHeight="12px",c.style.minWidth="90px",c.style.width=o+"px",c.style.height=r+"px")},t.prototype.isAddTextNode=function(t,e){return!!(this.tool instanceof ag||e)&&(this.tool=null,t&&!Ap(this.diagram)&&(this.diagram.drawingObject=void 0,this.diagram.currentDrawingObject=void 0),!ef(this.diagram.nodes,t.id)&&!ef(this.diagram.connectors,t.id))},t.prototype.checkEditBoxAsTarget=function(t){return!(!t.target||t.target.id!==this.diagram.element.id+"_editBox")},t.prototype.getMouseEventArgs=function(t,e,i,n){var s,r,o;if(e.position=t,i?(r=this.diagram.findObjectsUnderMouse(this.currentPosition,i),s=this.diagram.findTargetObjectUnderMouse(r,this.action,this.inAction,e.position,i)):"Drag"===this.action||"ConnectorSourceEnd"===this.action||"SegmentEnd"===this.action||"OrthoThumb"===this.action||"BezierSourceThumb"===this.action||"BezierTargetThumb"===this.action||"ConnectorTargetEnd"===this.action||-1!==this.action.indexOf("Rotate")||-1!==this.action.indexOf("Resize")?(s=this.diagram.selectedItems,!this.diagram.currentSymbol&&"Drag"===this.action&&s&&this.diagram.selectedItems.nodes.length>0&&"SwimLane"===this.diagram.selectedItems.nodes[0].shape.type&&(r=this.diagram.findObjectsUnderMouse(this.currentPosition),s=this.diagram.findObjectUnderMouse(r,this.action,this.inAction))):(r=this.diagram.findObjectsUnderMouse(this.currentPosition),s=this.diagram.findObjectUnderMouse(r,this.action,this.inAction)),s&&s.isHeader&&-1===["LabelSelect","LabelDrag"].indexOf(this.currentAction)&&(s=this.diagram.nameTable[s.parentId],this.eventArgs.actualObject=s),s){var a=void 0,l=void 0,h=void 0;if(((o=this.diagram.findElementUnderMouse(s,this.currentPosition,this.diagram,n))&&s.ports&&s.ports.length&&!vf(s,o)||!o||!s)&&r&&r.length&&i instanceof By)for(a=i.connectors[0],h=r.length-1;h>=0;h--)if(((l=r[parseInt(h.toString(),10)])instanceof Ny||l instanceof Rg)&&a&&a.connectionPadding){if(s=l,o=this.diagram.findElementUnderMouse(s,this.currentPosition,this.diagram,n),a.constraints&cs.ConnectToNearByPort&&s&&s.ports&&s.ports.length&&vf(s,o))break;if((l instanceof Ny||l instanceof Rg)&&a&&a.connectionPadding&&l.wrapper.outerBounds.containsPoint(this.currentPosition)&&a.constraints&cs.ConnectToNearByNode&&!(a.constraints&cs.ConnectToNearByPort)){s=l,o=this.diagram.findElementUnderMouse(s,this.currentPosition,this.diagram,0);break}}}return i?(e.target=s,e.targetWrapper=o):(e.source=s,e.sourceWrapper=o),e.actualObject=this.eventArgs.actualObject,e.source instanceof By&&void 0===e.actualObject&&(e.source.nodes.length>0||e.source.connectors.length>0)&&(e.actualObject=e.source.nodes.length>0?this.diagram.nameTable[e.source.nodes[0].id]:this.diagram.nameTable[e.source.connectors[0].id]),e.startTouches=this.touchStartList,e.moveTouches=this.touchMoveList,e},t.prototype.resetTool=function(){this.action="Select",this.hoverElement=null,this.hoverNode=null,this.tool=this.diagram.getTool(this.action),this.updateCursor()},t.prototype.updateTool=function(){if(this.currentPosition){var t=this.diagram.findObjectsUnderMouse(this.currentPosition),e=this.diagram.findObjectUnderMouse(t,this.action,this.inAction),i=null,n=void 0;null!==e&&(i=this.diagram.findElementUnderMouse(e,this.currentPosition,this.diagram)),i&&(n=this.commandHandler.findTarget(i,e)),this.action=this.diagram.findActionToBeDone(e,i,this.currentPosition,n)}else this.action="Select"},t.prototype.getTool=function(t){switch(t){case"Select":return new $u(this.commandHandler,!0);case"Drag":return new ig(this.commandHandler);case"Rotate":return new ng(this.commandHandler);case"LayoutAnimation":return new hg(this.commandHandler);case"FixedUserHandle":return new tg(this.commandHandler,!0);case"Hyperlink":return new cg(this.commandHandler);case"ResizeSouthEast":case"ResizeSouthWest":case"ResizeNorthEast":case"ResizeNorthWest":case"ResizeSouth":case"ResizeNorth":case"ResizeWest":case"ResizeEast":return new sg(this.commandHandler,t);case"ConnectorSourceEnd":case"ConnectorTargetEnd":case"BezierSourceThumb":case"BezierTargetThumb":return new eg(this.commandHandler,t);case"SegmentEnd":case"OrthoThumb":return new Zv(this.commandHandler,t);case"Draw":var e="shape",i=function(t){var e;return t&&(t.type?e="Connector":t.shape&&!t.type&&(e="Node")),e}(this.diagram.drawingObject);if("Node"===i&&"Text"===this.diagram.drawingObject.shape.type)return new ag(this.commandHandler);if("Connector"===i&&"Freehand"===this.diagram.drawingObject.type)return new fg(this.commandHandler);if("Node"===i&&"Polygon"===this.diagram.drawingObject.shape[""+e]&&!this.diagram.drawingObject.shape.points)return new dg(this.commandHandler);if("Node"===i||"Node"===i&&"Polygon"===this.diagram.drawingObject.shape[""+e]&&this.diagram.drawingObject.shape.points)return new rg(this.commandHandler,this.diagram.drawingObject);if("Connector"===i&&"Polyline"===this.diagram.drawingObject.type)return new pg(this.commandHandler);if("Connector"===i)return new og(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);break;case"Pan":return new lg(this.commandHandler,!1);case"PinchZoom":return new lg(this.commandHandler,!0);case"PortDrag":return new ig(this.commandHandler,"Port");case"PortDraw":return new og(this.commandHandler,"ConnectorSourceEnd",this.diagram.drawingObject);case"LabelSelect":return new $u(this.commandHandler,!0,"LabelSelect");case"LabelDrag":return new ug(this.commandHandler);case"LabelResizeSouthEast":case"LabelResizeSouthWest":case"LabelResizeNorthEast":case"LabelResizeNorthWest":case"LabelResizeSouth":case"LabelResizeNorth":case"LabelResizeWest":case"LabelResizeEast":return new gg(this.commandHandler,t);case"LabelRotate":return new mg(this.commandHandler)}return null},t.prototype.getCursor=function(t){var e=this.diagram.selectedItems.annotation?this.diagram.selectedItems.wrapper.children[0]:this.diagram.selectedItems;return function(t,e){if(e+=360,e%=360,-1===t.indexOf("Resize"))return qu[""+t];var i=qu[""+t];return e>=0&&e<25||e>=160&&e<=205||e>=340&&e<=360?i:e>=25&&e<=70||e>=205&&e<=250?"n-resize"===i||"s-resize"===i?"ne-resize":"nw-resize"===i||"se-resize"===i?"n-resize":"e-resize"===i||"w-resize"===i?"nw-resize":"e-resize":e>=70&&e<=115||e>=250&&e<=295?"n-resize"===i||"s-resize"===i?"e-resize":"nw-resize"===i||"se-resize"===i?"ne-resize":"e-resize"===i||"w-resize"===i?"n-resize":"nw-resize":e>=115&&e<=155||e>=295&&e<=340?"n-resize"===i||"s-resize"===i?"nw-resize":"nw-resize"===i||"se-resize"===i?"e-resize":"e-resize"===i||"w-resize"===i?"ne-resize":qu[""+t]:"n-resize"}(t,this.diagram.selectedItems.annotation?e.rotateAngle+e.parentTransform:e.rotateAngle)},t.prototype.findElementUnderMouse=function(t,e,i,n){return this.objectFinder.findElementUnderSelectedItem(t,e,i,n)},t.prototype.findObjectsUnderMouse=function(t,e){return this.objectFinder.findObjectsUnderMouse(t,this.diagram,this.eventArgs,e)},t.prototype.findObjectUnderMouse=function(t,e,i){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,this.currentPosition)},t.prototype.findTargetUnderMouse=function(t,e,i,n,s){return this.objectFinder.findObjectUnderMouse(this.diagram,t,e,i,this.eventArgs,n,s)},t.prototype.findActionToBeDone=function(t,e,i,n){return Fu(t,e,this.currentPosition,this.diagram,this.touchStartList,this.touchMoveList,n)},t.prototype.updateContainerBounds=function(t){var e=!1;if(this.diagram.selectedObject.helperObject&&this.diagram.selectedObject.actualObject)for(var i=this.diagram.selectedObject.actualObject,n=this.diagram.selectedObject.actualObject instanceof By?i.nodes:[i],s=0;s<n.length;s++){var r=n[parseInt(s.toString(),10)],o=this.tool instanceof sg,a=this.diagram.nameTable[r.parentId];t?Ou(this.diagram,r,this.currentPosition,o):((!a||a&&"SwimLane"!==a.shape.type)&&this.diagram.updateDiagramObject(r),e=Lu(this.diagram,r,this.currentPosition,o),this.diagram.updateSelector(),(r.isLane||r.isPhase)&&(this.diagram.clearSelection(),this.commandHandler.selectObjects([r])))}return e},t.prototype.updateContainerProperties=function(){var t,e,i,n,s=!1,r=!1,o={hasStack:!1,isPreventHistory:!1};if(this.diagram.selectedObject.helperObject){var a=this.diagram.findObjectsUnderMouse(this.currentPosition),l=this.diagram.findObjectUnderMouse(a,this.action,this.inAction);if(t=this.diagram.selectedObject.helperObject,(n=this.diagram.selectedObject.actualObject)instanceof Ny){if("SwimLane"===n.shape.type&&(i=Jp(this.diagram,n.wrapper.children[0])),"SwimLane"!==n.shape.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l instanceof Ny&&this.diagram.getObject(l.parentId)&&"SwimLane"!==this.diagram.getObject(l.parentId).shape.type&&(l=this.diagram.getObject(l.parentId)),"Drag"===this.currentAction&&n.container&&"Canvas"===n.container.type&&n.parentId&&"SwimLane"===this.diagram.getObject(n.parentId).shape.type&&l&&l.container&&"Canvas"===l.container.type&&l.isLane&&n.isLane&&l.parentId===n.parentId)l!==n&&ou(this.diagram,n,l,this.currentPosition),o.isPreventHistory=!0;else{if(!(A=this.diagram.nameTable[n.parentId])||A&&"SwimLane"!==A.shape.type)if(A&&A.isLane&&n.constraints&ps.AllowMovingOutsideLane){var h=this.diagram.getObject(A.parentId),c=void 0,d=void 0;if("Vertical"===h.shape.orientation)c=h.wrapper.bounds.x+h.shape.phaseSize,d=h.wrapper.bounds.y+h.shape.header.height;else{var p=h.shape.header.height+h.shape.phaseSize;c=h.wrapper.bounds.x,d=h.wrapper.bounds.y+p}var u=h.wrapper.bounds.bottomRight.x-c,g=h.wrapper.bounds.bottomRight.y-d;new Tn(c,d,u,g).containsPoint(this.currentPosition)&&(n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.width=t.width,n.height=t.height,n.rotateAngle=t.rotateAngle)}else if(1===this.diagram.selectedItems.nodes.length)n.offsetX=t.offsetX,n.offsetY=t.offsetY,n&&n.shape&&"UmlClassifier"!==n.shape.type&&(n.width=t.width,n.height=t.height),n.rotateAngle=t.rotateAngle;else if(this.diagram.selectedItems.nodes.length>1)for(var m=t.offsetX-this.diagram.selectedItems.offsetX,f=t.offsetY-this.diagram.selectedItems.offsetY,y=t.rotateAngle-this.diagram.selectedItems.rotateAngle,v=0;v<this.diagram.selectedItems.nodes.length;v++)this.diagram.selectedItems.nodes[parseInt(v.toString(),10)].offsetX+=m,this.diagram.selectedItems.nodes[parseInt(v.toString(),10)].offsetY+=f,this.diagram.selectedItems.nodes[parseInt(v.toString(),10)].rotateAngle+=y;var b=void 0;if(A&&A.container&&"Stack"===A.container.type&&(this.diagram.startGroupAction(),r=!0),!l&&A&&A.container&&"Stack"===A.container.type&&"Drag"===this.action){var C=A.wrapper.children.indexOf(n.wrapper);if(b={targetIndex:void 0,target:void 0,sourceIndex:C,source:Fn(n)},C>-1){var I=A.children;I.splice(I.indexOf(n.id),1),this.diagram.nameTable[n.id].parentId="",e=!0,A.wrapper.children.splice(C,1)}}if(function(t,e,i,n){var s=t,r=i.nameTable[s.parentId],o=i.nameTable[s.parentId];if(e&&o&&o.container&&"Stack"===o.container.type&&e.container&&"Stack"===e.container.type&&o.id!==e.parentId){var a=o.wrapper.children.indexOf(s.wrapper);a>-1&&(i.nameTable[s.id].parentId=e.id,o.wrapper.children.splice(a,1))}if(e&&e.parentId&&s.parentId&&"Drag"===n&&o.container&&"Stack"===o.container.type){var l=r.wrapper.children.indexOf(e.wrapper),h=r.wrapper.children.indexOf(s.wrapper),c={targetIndex:l,target:e,sourceIndex:h,source:t};r.wrapper.children.splice(h,1),r.wrapper.children.splice(l,0,s.wrapper);var d={type:"StackChildPositionChanged",redoObject:{targetIndex:h,target:e,sourceIndex:l,source:t},undoObject:c,category:"Internal"};i.commandHandler.addHistoryEntry(d)}}(n,l,this.diagram,this.action),(A=zu(this.diagram,n)?this.diagram.nameTable[n.parentId]:this.diagram.nameTable[n.parentId]||n)&&A.container&&"Canvas"===A.container.type&&(A.wrapper.maxWidth=A.maxWidth=A.wrapper.actualSize.width,A.wrapper.maxHeight=A.maxHeight=A.wrapper.actualSize.height,s=!0),zu(this.diagram,n,!0)&&A&&"Canvas"===A.container.type)if(this.diagram.selectedItems.nodes.length>1)for(v=0;v<this.diagram.selectedItems.nodes.length;v++)Pu(this.diagram,this.diagram.selectedItems.nodes[parseInt(v.toString(),10)]);else Pu(this.diagram,n);else o=this.updateContainerPropertiesExtend(A,n,i,t,o);if(this.diagram.lineRoutingModule&&this.diagram.constraints&ms.LineRouting&&!zu(this.diagram,n,!0)&&(n.children&&(this.diagram.realActions|=Ss.EnableGroupAction),this.diagram.nodePropertyChange(n,{},{width:n.width,height:n.height,offsetX:n.offsetX,offsetY:n.offsetY}),n.children&&(this.diagram.realActions&=~Ss.EnableGroupAction)),n.shape.lanes&&this.updateLaneChildNode(n),s&&(A.maxWidth=A.wrapper.maxWidth=void 0,A.maxHeight=A.wrapper.maxHeight=void 0),e){this.diagram.nodePropertyChange(A,{},{offsetX:A.offsetX,offsetY:A.offsetY,width:A.width,height:A.height,rotateAngle:A.rotateAngle});var M={redoObject:{sourceIndex:void 0,source:b.source},type:"StackChildPositionChanged",undoObject:b,category:"Internal"};this.diagram.diagramActions&Is.UndoRedo||this.diagram.addHistoryEntry(M)}n&&n.container&&("Stack"===n.container.type||"Canvas"===n.container.type&&""===n.parentId)&&(n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle}),n&&n.shape&&"UmlClassifier"===n.shape.type&&(n.wrapper.measureChildren=!1))}ru(i,this.diagram),o.hasStack=r}else if(n instanceof By){m=t.offsetX-n.offsetX,f=t.offsetY-n.offsetY,y=t.rotateAngle-n.rotateAngle,u=t.width-n.width,g=t.height-n.height;var S=t.width/n.width,x=t.height/n.height;if(this.tool.corner){var w=this.tool.getPivot(this.tool.corner);for(v=0;v<n.nodes.length;v++){var D=(N=n.nodes[parseInt(v.toString(),10)]).wrapper,E=n.wrapper,T=cf(c=E.offsetX-E.actualSize.width*E.pivot.x,d=E.offsetY-E.actualSize.height*E.pivot.y,E.actualSize.width,E.actualSize.height,E.rotateAngle,E.offsetX,E.offsetY,w);this.diagram.commandHandler.scaleObject(S,x,T,N,D,n)}}else for(v=0;v<n.nodes.length;v++){var A,N=n.nodes[parseInt(v.toString(),10)];(A=this.diagram.nameTable[N.parentId])&&"SwimLane"!==A.shape.type&&zu(this.diagram,N,!0)&&"Canvas"===A.container.type&&(N.offsetX+=m,N.offsetY+=f,N&&N.shape&&"UmlClassifier"!==N.shape.type&&(N.width+=u,N.height+=g),N.rotateAngle+=y,Pu(this.diagram,N))}}}return n&&(n.isPhase||n.isLane||n.shape&&"SwimLane"===n.shape.type)&&this.diagram.updateDiagramElementQuad(),o},t.prototype.updateLaneChildNode=function(t){for(var e=0;e<t.shape.lanes.length;e++)if(t.shape.lanes[parseInt(e.toString(),10)].children&&t.shape.lanes[parseInt(e.toString(),10)].children.length>0)for(var i=0;i<t.shape.lanes[parseInt(e.toString(),10)].children.length;i++){var n=t.shape.lanes[parseInt(e.toString(),10)].children[parseInt(i.toString(),10)].id,s=this.diagram.nameTable[""+n];s&&(s.offsetX=s.wrapper.offsetX,s.offsetY=s.wrapper.offsetY)}},t.prototype.updateContainerPropertiesExtend=function(t,e,i,n,s){if("ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction||"SwimLane"===e.shape.type){var r=Fn(e),o=!1;if(t&&t.container&&"Grid"===t.container.type){var a="SwimLane"===t.shape.type,l=a?t.wrapper.children[0]:t.wrapper,h=a?t.shape.padding:void 0,c=t.wrapper.bounds.x,d=t.wrapper.bounds.y;if(void 0!==e.columnIndex&&"Horizontal"===t.container.orientation&&(a&&e.isPhase||!a&&1===e.rowIndex)||"Vertical"===t.container.orientation&&(!a&&e.rowIndex>0&&e.columnIndex>0||a&&e.isLane)){"Horizontal"===t.container.orientation&&e.isPhase&&e.wrapper.width>e.maxWidth&&(e.maxWidth=e.wrapper.width,e.wrapper.maxWidth=e.wrapper.width);var p=n.wrapper.actualSize.width-e.wrapper.actualSize.width;if(l.updateColumnWidth(e.columnIndex,n.width,!0,h),lu(this.diagram,e,t,n,p),e.isPhase){var u=t.shape.phases[e.columnIndex].header.id,g=this.diagram.nameTable[""+u];g.maxWidth<n.width&&(g.maxWidth=n.width,g.wrapper.maxWidth=n.width)}"SwimLane"===t.shape.type&&(t.width=t.width?l.width:t.width,pu(this.diagram,t),t.wrapper.width=t.width,i=Jp(this.diagram,l,e.rowIndex))}else if(void 0!==e.rowIndex){o=!0;var m=n.wrapper.actualSize.height-e.wrapper.actualSize.height;l.updateRowHeight(e.rowIndex,n.height,!0,h),lu(this.diagram,e,t,n,void 0,m),"SwimLane"===t.shape.type&&(t.height=t.height?l.height:t.height,t.wrapper.height=t.height,i=Jp(this.diagram,l,e.rowIndex))}"SwimLane"===t.shape.type&&(s.isPreventHistory=!0),this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY,rotateAngle:t.rotateAngle}),this.diagram.drag(t,c-t.wrapper.bounds.x,d-t.wrapper.bounds.y)}else e&&e.shape&&"UmlClassifier"===e.shape.type&&(e.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(e,{},{offsetX:e.offsetX,offsetY:e.offsetY,width:e.width,height:e.height,rotateAngle:e.rotateAngle}),e.wrapper.measureChildren=!1;if(e.wrapper.measure(new un(e.wrapper.width,e.wrapper.height)),e.wrapper.arrange(e.wrapper.desiredSize),"ResizeEast"===this.currentAction||"ResizeSouth"===this.currentAction){var f={category:"Internal",type:o?"RowHeightChanged":"ColumnWidthChanged",undoObject:r,redoObject:Fn(e)};this.diagram.addHistoryEntry(f)}}return ru(i,this.diagram),s},t.prototype.addUmlNode=function(){var t,e,i=this.diagram.selectedItems.nodes[0],n=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x+20,y:this.currentPosition.y}),s=this.diagram.findObjectUnderMouse(n,this.action,this.inAction);if(s||(n=this.diagram.findObjectsUnderMouse({x:this.currentPosition.x-20,y:this.currentPosition.y}),s=this.diagram.findObjectUnderMouse(n,this.action,this.inAction)),i&&i.container&&"Stack"===i.container.type&&s&&s.parentId&&s.parentId===i.id){var r=s,o=Qy(this.diagram.element.id);if(o.getElementById(o.id+"_stack_highlighter")){var a=i.wrapper.children.indexOf(s.wrapper)+1;this.diagram.enableServerDataBinding(!1);var l=new Ny(this.diagram,"nodes",{style:{fill:i.style.fill,strokeColor:"black"===i.style.strokeColor?"#ffffff00":i.style.strokeColor},annotations:s.annotations,verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Drag|ps.Resize),minHeight:25},!0);l.annotations[0].content=" + Name : Type";r.id.split("_");l.id=Hn()+l.id,l.parentId=i.id,l.zIndex=-1,l.umlIndex=a,this.diagram.startGroupAction();var h={name:"Name",type:"Type"};if("Class"===i.shape.classifier&&(s.id.includes("_umlProperty")&&i.shape.classShape.attributes.length>0?(t=new Sy(i,"",h),i.shape.classShape.attributes.push(t)):s.id.includes("_umlMethods")&&i.shape.classShape.methods.length>0&&(e=new xy(i,"",h),i.shape.classShape.methods.push(e))),"Interface"===i.shape.classifier&&(s.id.includes("_umlProperty")&&i.shape.interfaceShape.attributes.length>0?(t=new Sy(i,"",h),i.shape.classShape.attributes.push(t)):s.id.includes("_umlMethods")&&i.shape.interfaceShape.methods.length>0&&(e=new xy(i,"",h),i.shape.interfaceShape.methods.push(e))),"Enumeration"===i.shape.classifier&&s.id.includes("_umlMember")&&i.shape.enumerationShape.members.length>0){var c=new Ey(i,"",h);i.shape.enumerationShape.members.push(c)}i.wrapper.children.indexOf(l.wrapper);this.diagram.enableServerDataBinding(!0),this.diagram.add(l),this.diagram.updateConnectorEdges(i),this.diagram.clearSelection(),this.diagram.select([this.diagram.nameTable[l.id]]),this.diagram.endGroupAction(),this.diagram.startTextEdit()}}},t}(),Xv=function(){function t(){}return t.prototype.findObjectsUnderMouse=function(t,e,i,n,s){var r,o,a,l,h=[];n&&n instanceof By&&n.nodes.length+n.connectors.length===1&&(n=n.nodes[0]||n.connectors[0]).children&&0===n.children.length&&(i.actualObject=n);for(var c,d=n&&n instanceof Rg&&(n.constraints&cs.ConnectToNearByNode||n.constraints&cs.ConnectToNearByPort)&&n.connectionPadding||0,p={},u=0,g=e.spatialSearch.findObjects(new Tn(t.x-50-d,t.y-50-d,100+d,100+d));u<g.length;u++){var m=t;o=(D=g[u]).wrapper.outerBounds;var f=!D.rotateAngle&&o.containsPoint(m,d);if((D!==n||e.currentDrawingObject instanceof Rg)&&D instanceof Rg?D!==e.currentDrawingObject:D.wrapper.visible)if((M=e.commandHandler.getObjectLayer(D.id))&&!M.lock&&M.visible){if(c=p[M.zIndex]=p[M.zIndex]||[],D.rotateAngle){o=Vn(r=D.wrapper);for(var y=0,v=r.children;y<v.length;y++)a=v[y],On(l=Nn(),-(a.rotateAngle+a.parentTransform),a.offsetX,a.offsetY),m=Ln(l,t),Vn(a).containsPoint(m,d)&&(f=!0)}if((!n||!1===Zu(e,D))&&pp(D)&&(D instanceof Rg?Cm(D,t):f||D.flip)){var b=D instanceof Rg&&D.hitPadding||0;this.findElementUnderMouse(D,t,e,d||b)&&"helper"!==D.id&&af(D,"zIndex",c)}}}for(var C=0,I=e.layers;C<I.length;C++){var M,S=p[(M=I[C]).zIndex];S&&S.length>1&&(S=of(S));for(var x=0,w=h=h.concat(S||[]);x<w.length;x++){var D,E="eventHandler";if("Bpmn"===(D=w[x]).shape.type&&D.processId&&(!(e[""+E].tool instanceof ig)||e[""+E].tool instanceof ig&&xp(D)))(k=h.indexOf(e.nameTable[D.processId]))>-1&&h.splice(k,1);if("UmlClassifier"===D.shape.type&&D.container&&"Stack"===D.container.type)(k=h.indexOf(e.nameTable[e.nameTable[D.id].wrapper.children[0].id]))>-1&&h.splice(k,1)}}for(var T=0;T<h.length;T++){var A=e.nameTable[h[parseInt(T.toString(),10)].parentId];if(A)for(var N=this.findElementUnderMouse(A,t,e),L=0;L<A.ports.length;L++)if(N&&N.id.match("_"+A.ports[parseInt(L.toString(),10)].id+"$")){var O=A.ports[parseInt(L.toString(),10)];if(jp(O)||Pp(O))return h}for(;A;){var k;if(-1===(k=h.indexOf(A)))break;h.splice(k,1),A=e.nameTable[A.parentId]}}if(this.checkSwimlane(h,e),i&&!i.source)for(T=0;T<h.length;T++){var z=e.nameTable[h[parseInt(T.toString(),10)].parentId];if(z&&"SwimLane"===z.shape.type)for(L=0;L<h.length;L++){h[parseInt(L.toString(),10)]instanceof Rg&&h.splice(T,1)}}return h},t.prototype.checkSwimlane=function(t,e){for(var i,n=0;n<t.length;n++){var s=t[parseInt(n.toString(),10)],r=void 0,o=void 0;s instanceof Ny&&(r=t[parseInt(n.toString(),10)].parentId,o=s),""===r&&(i="SwimLane"!==o.shape.type);var a=e.nameTable[""+r];if(a&&a.isLane&&e.nameTable[a.parentId].zIndex>s.zIndex&&(t[parseInt(n.toString(),10)]=a),n>0&&i&&o&&(o.isLane||o.isPhase||o.isHeader)&&t[parseInt(n.toString(),10)].zIndex<t[n-1].zIndex){var l=t[parseInt(n.toString(),10)];t[parseInt(n.toString(),10)]=t[n-1],t[n-1]=l}}if(t.length>=2)for(var h=t.length-1;h>=0;h--)if(t[parseInt(h.toString(),10)].parentId){var c=wf(t[parseInt(h.toString(),10)],e,""),d=wf(t[h-1],e,""),p=e.nameTable[""+c],u=e.nameTable[""+d];u&&c!==d&&p.zIndex<u.zIndex&&t.splice(h,1)}},t.prototype.isTarget=function(t,e,i){var n,s=e.selectedItems.connectors[0];if(!(n="ConnectorSourceEnd"===i?e.nameTable[s.targetID]:n=e.nameTable[s.sourceID])||n.processId&&!t.processId||n.processId!==t.processId||(n.processId!==t.processId&&(t=null),t&&t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])),"ConnectorSourceEnd"===i&&s.targetID){var r=e.nameTable[s.targetID];if(r&&r.shape&&"TextAnnotation"===r.shape.shape){var o=s.id.split("_");("Bpmn"===r.shape.type&&"Bpmn"!==t.shape.type||o[0]===t.id||"TextAnnotation"===t.shape.shape)&&(t=null),t&&t.parentId&&"UmlClassifier"===e.nameTable[t.parentId].shape.type&&(t=e.nameTable[t.parentId])}}return t&&(n&&t.id===n.processId||n&&"Container"===t.shape.type&&t.id===n.parentId||("ConnectorSourceEnd"===i||"ConnectorTargetEnd"===i)&&t.id===s.parentId)&&(t=null),t},t.prototype.findObjectUnderMouse=function(t,e,i,n,s,r,o){var a,l,h="eventHandler",c="endPoint",d=null;if(0!==e.length)if(o&&o instanceof By&&o.nodes.length+o.connectors.length===1&&(o=o.nodes[0]||o.connectors[0]),"ConnectorSourceEnd"===i&&o||"PortDraw"===i||(Np(t)||Ap(t))&&df(t.drawingObject)===Rg)for(var p=t.selectedItems.connectors[0],u=e.length-1;u>=0;u--){l=$m(e[parseInt(u.toString(),10)],!1),a=$m(e[parseInt(u.toString(),10)],!0);var g=t[""+h].tool,m=this.findTargetElement(e[parseInt(u.toString(),10)].wrapper,r,t,void 0);if("Draw"===i&&m&&(e[parseInt(u.toString(),10)]instanceof Ny||e[parseInt(u.toString(),10)]instanceof Rg)&&!vf(e[parseInt(u.toString(),10)],m)&&(g&&"ConnectorSourceEnd"===g[""+c]&&!Ip(e[parseInt(u.toString(),10)])||g&&"ConnectorTargetEnd"===g[""+c]&&!bp(e[parseInt(u.toString(),10)])))return d;if(e[parseInt(u.toString(),10)]instanceof Ny||e[parseInt(u.toString(),10)]instanceof Rg&&(Ip(e[parseInt(u.toString(),10)])||Mp(l)||bp(e[parseInt(u.toString(),10)])||Cp(a)||"PortDraw"===i&&g instanceof eg&&"ConnectorTargetEnd"===g[""+c]&&(bp(e[parseInt(u.toString(),10)])||Cp(a))))return d=e[parseInt(u.toString(),10)],p&&(d=this.isTarget(d,t,i)),s.actualObject=d,d}else if("ConnectorTargetEnd"===i&&o){for(u=e.length-1;u>=0;u--)if(a=$m(e[parseInt(u.toString(),10)],!0),(e[parseInt(u.toString(),10)]instanceof Ny||e[parseInt(u.toString(),10)]instanceof Rg)&&(bp(e[parseInt(u.toString(),10)])||Cp(a)))return d=e[parseInt(u.toString(),10)],d=this.isTarget(d,t,i),s.actualObject=d,d}else{if(o&&("Drag"===i||t[""+h].tool instanceof ig)){var f=0;for(u=0;u<e.length;u++){var y=e[parseInt(u.toString(),10)];o!==y&&(y instanceof Rg||!r||y.wrapper.bounds.containsPoint(r))&&xp(y)&&(d?(d=f>=y.zIndex?d:y,f=Math.max(f,y.zIndex)):f=(d=y).zIndex)}return d&&"Bpmn"===d.shape.type&&(t.selectedItems.nodes.length>0&&"Bpmn"===t.selectedItems.nodes[0].shape.type&&"TextAnnotation"!==t.selectedItems.nodes[0].shape.shape||(d=null)),d&&(s.actualObject=d),d}if("Select"!==i&&"Pan"!==i||!t[""+h].tool)if("Pan"===i||"LayoutAnimation"===i){for(u=e.length-1;u>=0;u--)if(e[parseInt(u.toString(),10)]instanceof Ny||e[parseInt(u.toString(),10)]instanceof Rg){m=this.findTargetElement(e[parseInt(u.toString(),10)].wrapper,r,t,void 0);if("Pan"===i||m&&(m.id.match("_icon_content_shape$")||m.id.match("_icon_content_rect$")))return e[parseInt(u.toString(),10)]}}else d=e[e.length-1],s&&d&&(s.actualObject=d);else{for(var u=e.length-1;u>=0;u--)if(e[parseInt(u.toString(),10)]instanceof Rg){var v=e[u-1];if(e[u-1]instanceof Ny&&v.ports){if((m=this.findTargetElement(v.wrapper,r,t,void 0))&&(m.id.match("_icon_content_shape$")||m.id.match("_icon_content_rect$")))return v;for(var b=0;b<v.ports.length;b++)if(m&&m.id.match("_"+v.ports[parseInt(b.toString(),10)].id+"$")&&Pp(v.ports[parseInt(b.toString(),10)]))return v}}if(d=e[e.length-1],s.actualObject=d,!t[""+h].itemClick(d,!0)&&d.parentId&&t.nameTable[d.parentId]&&"Container"!==t.nameTable[d.parentId].shape.type)for(var C=d,I=Zu(t,C);C&&(!Zu(t,C)||I)&&(d=C,""===C.tooltip.content);)C=t.nameTable[C.parentId]}}return d},t.prototype.findElementUnderSelectedItem=function(t,e,i,n){return t instanceof By?1!==t.nodes.length||t.connectors&&t.connectors.length?t.nodes&&!t.nodes.length||1!==t.connectors.length?null:this.findElementUnderMouse(t.connectors[0],e,i):this.findElementUnderMouse(t.nodes[0],e,i):this.findElementUnderMouse(t,e,i,n)},t.prototype.findElementUnderMouse=function(t,e,i,n){return this.findTargetElement(t.wrapper,e,i,n)},t.prototype.findTargetElement=function(t,e,i,n){for(var s=t.children.length-1;s>=0;s--){var r=t.children[parseInt(s.toString(),10)],o=void 0;if(r instanceof Zs&&Af(r)&&r.position){var a=Tf({width:t.desiredSize.width,height:t.desiredSize.height,padding:t.padding,offsetX:t.offsetX,offsetY:t.offsetY,parentTransform:t.parentTransform,rotateAngle:t.rotateAngle},r);r.flippedPoint=a;var l=a.x-r.corners.topLeft.x,h=a.y-r.corners.topLeft.y;a?(o={left:r.bounds.x+l,top:r.bounds.y+h,right:r.bounds.x+l+r.bounds.width,bottom:r.bounds.y+h+r.bounds.height},r.flippedPoint=a):r.flippedPoint=void 0}else r.flippedPoint=void 0;if(r&&(o?Nf(o,e,n||0):r.outerBounds.containsPoint(e,n||0)))if(r.visible){if(r instanceof _s){var c=this.findTargetElement(r,e,i);if(c)return c}var d="Clip"===r.style.textOverflow||"Ellipsis"===r.style.textOverflow;if((o?Nf(o,e,n||0):r.bounds.containsPoint(e,n||0))&&!d)return r;if(t.bounds.containsPoint(e,n||0)&&d)return r}else if(r instanceof Xs&&t&&t.id){var p=void 0;if(t.id.includes("group_container")){var u=t.id.slice(0,-15);p=i.getObject(u)}else p=i.getObject(t.id);if(Jm(p,r.id))return r}}return t.bounds.containsPoint(e,n)&&"none"!==t.style.fill?t:null},t}(),Gv=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kv=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Jv=function(t){function e(e,i,n,s){var r=t.call(this,e,i,n,s)||this;return r.objectZIndex=-1,r.zIndexTable={},r.objects=[],r}return Gv(e,t),Kv([jt("")],e.prototype,"id",void 0),Kv([jt(!0)],e.prototype,"visible",void 0),Kv([jt(!1)],e.prototype,"lock",void 0),Kv([jt()],e.prototype,"objects",void 0),Kv([jt()],e.prototype,"addInfo",void 0),Kv([jt(-1)],e.prototype,"zIndex",void 0),e}(re),$v=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}l((n=n.apply(t,e||[])).next())})},tb=function(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},eb=function(){function t(t){this.clipboardData={},this.diagramObject={},this.newSelectedObjects={},this.oldSelectedObjects={},this.changedNodeZIndexes={},this.connectorsTable=[],this.PreventConnectorSplit=!1,this.processTable={},this.containerChildTable={},this.isContainer=!1,this.canUpdateTemplate=!1,this.cloningInProgress=!1,this.childTable={},this.objectStore=[],this.parentTable={},this.blazor="Blazor",this.blazorInterop="sfBlazor",this.cloneGroupChildCollection=[],this.diagram=t}return Object.defineProperty(t.prototype,"snappingModule",{get:function(){return this.diagram.snappingModule},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutAnimateModule",{get:function(){return this.diagram.layoutAnimateModule},enumerable:!0,configurable:!0}),t.prototype.startTransaction=function(t){this.state={element:this.diagram.selectedItems,backup:null},t&&this.diagram.protectPropertyChange(!0),qy(this.diagram.element.id).style.pointerEvents="none"},t.prototype.endTransaction=function(t){this.state=null,t&&this.diagram.protectPropertyChange(!1),qy(this.diagram.element.id).style.pointerEvents="all"},t.prototype.setFocus=function(){document.getElementById(this.diagram.element.id).focus()},t.prototype.showTooltip=function(t,e,i,n,s){var r,o,a=this,l=!1;if(t instanceof By?1===t.nodes.length&&0===t.connectors.length?(r=t.nodes[0].id,t.nodes[0].shape&&t.nodes[0].shape instanceof sy&&(l=!0)):0===t.nodes.length&&1===t.connectors.length?r=t.connectors[0].id:o=document.getElementById(this.diagram.element.id+"_SelectorElement"):t instanceof Ny?(r=t.id,t.shape&&t.shape instanceof sy&&(l=!0)):r=t.id,y(o)&&!y(r)){var h=l?"_content_native_element":"_groupElement";o=document.getElementById(r+h)}if(s&&(this.diagram.tooltipObject.position="BottomCenter",this.diagram.tooltipObject.animation={open:{delay:0,duration:0}},this.diagram.tooltipObject.openDelay=0,this.diagram.tooltipObject.closeDelay=0),this.diagram.selectedItems.setTooltipTemplate){var c=void 0,d=is(this.diagram.selectedItems.setTooltipTemplate);d&&(c=d(t,this.diagram)),i=c instanceof HTMLElement?c.cloneNode(!0):c||i}this.diagram.tooltipObject.isSticky=!1,t.tooltip&&(this.diagram.tooltipObject.openOn=t.tooltip.openOn),this.diagram.tooltipObject.content="string"==typeof i?Ri(function(){return i}):i,this.diagram.tooltipObject.offsetX=0,this.diagram.tooltipObject.offsetY=0,this.diagram.tooltipObject.refresh(o),s&&setTimeout(function(){a.diagram.tooltipObject.open(o)},1)},t.prototype.connectorSplit=function(t,e){var i=t.id,n=Fn(e),s=this.diagram.connectors.indexOf(e),r=this.diagram.nodes.indexOf(t),o=Fn(t),a={},l={},h={offsetX:o.offsetX,offsetY:o.offsetY},c={sourceID:n.sourceID,sourcePoint:n.sourcePoint,sourcePortID:n.sourcePortID,targetID:n.targetID,targetPoint:n.targetPoint,targetPortID:n.targetPortID};a[parseInt(s.toString(),10)]=c,l[parseInt(r.toString(),10)]=h;var d={},p={},u={},g={};if(""!==n.sourceID&&""!==n.targetID?g.targetID=this.ConnectorTargetChange(e,i):""!==n.sourceID&&""===n.targetID?(this.nodeOffsetChange(u,o,e.targetPoint),g.targetID=this.ConnectorTargetChange(e,i)):(""===n.sourceID&&""===n.targetID||""===n.sourceID&&""!==n.targetID)&&(this.nodeOffsetChange(u,o,e.sourcePoint),g.sourceID=this.ConnectorSourceChange(e,i)),d[parseInt(s.toString(),10)]=g,p[parseInt(r.toString(),10)]=u,this.diagram.nodePropertyChange(t,h,u),this.diagram.updateSelector(),this.diagram.connectorPropertyChange(e,c,g),""!==n.sourceID&&""!==n.targetID){var m={id:"connector "+i,constraints:cs.Default|cs.AllowDrop,sourceID:i};m.type=n.type,m.style=n.style,m.sourceDecorator=n.sourceDecorator,m.targetDecorator=n.targetDecorator,m.targetID=n.targetID,""!==n.targetPortID&&(m.targetPortID=n.targetPortID),this.diagram.add(m)}var f={type:"PropertyChanged",redoObject:{nodes:p},undoObject:{nodes:l},category:"Internal"};this.diagram.addHistoryEntry(f);var y={type:"PropertyChanged",redoObject:{connectors:d},undoObject:{connectors:a},category:"Internal"};this.diagram.addHistoryEntry(y)},t.prototype.nodeOffsetChange=function(t,e,i){t.offsetX=e.offsetX=i.x,t.offsetY=e.offsetY=i.y},t.prototype.ConnectorTargetChange=function(t,e){return t.targetID=e,e},t.prototype.ConnectorSourceChange=function(t,e){return t.sourceID=e,e},t.prototype.closeTooltip=function(){this.diagram.tooltipObject.close()},t.prototype.canEnableDefaultTooltip=function(){return!!(this.diagram.selectedItems.constraints&as.ToolTip)},t.prototype.updateSelector=function(){this.diagram.updateSelector()},t.prototype.triggerEvent=function(t,e){return $v(this,void 0,void 0,function(){return tb(this,function(i){switch(i.label){case 0:return t!==Ds.drop&&t!==Ds.positionChange&&t!==Ds.connectionChange?[3,3]:this.diagram.currentSymbol?[2]:(t===Ds.drop&&(e.source=this.diagram),this.diagram.currentDrawingObject instanceof Rg&&t!==Ds.positionChange?[4,this.diagram.triggerEvent(t,e)]:[3,2]);case 1:return[2,i.sent()];case 2:if(this.diagram.currentDrawingObject&&t!==Ds.positionChange)return[2];i.label=3;case 3:return[4,this.diagram.triggerEvent(t,e)];case 4:return[2,i.sent()]}})})},t.prototype.dragOverElement=function(t,e){if(this.diagram.currentSymbol){var i={element:t.source,target:t.target,mousePosition:e,diagram:this.diagram};this.triggerEvent(Ds.dragOver,i)}},t.prototype.disConnect=function(t,e,i){var n,s,r={},o={};if(t instanceof By?s=t.connectors[0]:t instanceof Rg&&this.diagram.currentDrawingObject&&(s=this.diagram.currentDrawingObject),t&&s&&(Qu(this.diagram)||this.diagram.currentDrawingObject))if(!e||"ConnectorSourceEnd"!==e&&"ConnectorTargetEnd"!==e){if("OrthoThumb"!==e&&"SegmentEnd"!==e&&(s.sourceID||s.targetID)){r={sourceID:s.sourceID,sourcePortID:s.sourcePortID,targetID:s.targetID,targetPortID:s.targetPortID},s.sourceID="",s.sourcePortID="",s.targetID="",s.targetPortID="";var a={connector:s,oldValue:r,newValue:o={sourceID:s.sourceID,sourcePortID:s.sourcePortID,targetID:s.targetID,targetPortID:s.targetPortID},cancel:!1,state:"Changing",connectorEnd:e};this.triggerEvent(Ds.connectionChange,a),a.cancel?(s.sourceID=r.sourceID,s.sourcePortID=r.sourcePortID,s.targetID=r.targetID,s.targetPortID=r.targetPortID):(this.diagram.connectorPropertyChange(s,r,o),this.diagram.updateDiagramObject(s),a={connector:s,oldValue:r,newValue:o,cancel:!1,state:"Changed",connectorEnd:e},this.triggerEvent(Ds.connectionChange,a))}}else{var l="ConnectorSourceEnd"===e?"sourceID":"targetID",h="ConnectorSourceEnd"===e?"sourcePortID":"targetPortID";s[""+l]&&(r[""+l]=s[""+l],s[""+l]="",o[""+l]=s[""+l],(s.sourcePortID||s.targetPortID)&&(r[""+h]=s[""+h],s[""+h]="",o[""+h]=s[""+h]),n=this.connectionEventChange(s,r,o,e,i))}return n},t.prototype.connectionEventChange=function(t,e,i,n,s){var r,o="ConnectorSourceEnd"===n?"sourceID":"targetID",a="ConnectorSourceEnd"===n?"sourcePortID":"targetPortID";if(this.enableCloneObject){var l=Fn(r=this.diagram.nameTable[i[""+o]]);this.diagram.insertValue(l,!0)}var h={cancel:!1,state:"Changing",connectorEnd:n,connector:t,oldValue:{nodeId:e[""+o],portId:e[""+a]},newValue:{nodeId:i[""+o],portId:i[""+a]}};if(this.triggerEvent(Ds.connectionChange,h),h.cancel&&(t[""+o]=e[""+o],t[""+a]=e[""+a],i=e),this.diagram.connectorPropertyChange(t,e,i),this.diagram.updateDiagramObject(t),h={connector:t,oldValue:{nodeId:e[""+o],portId:e[""+a]},newValue:{nodeId:i[""+o],portId:i[""+a]},cancel:!1,state:"Changing",connectorEnd:n},this.enableCloneObject&&void 0===r){l=Fn(r=this.diagram.nameTable[e[""+o]]);this.diagram.insertValue(l,!0)}this.diagram.bpmnModule&&(t.isBpmnAnnotationConnector&&(this.diagram.nameTable[t.targetID].shape.textAnnotation.textAnnotationTarget=t.sourceID))},t.prototype.findTarget=function(t,e,i,n){if(e instanceof Ny){if(t&&t.id===e.id+"_content")return e;if(i&&"Bpmn"===e.shape.type&&!x()&&"Activity"===e.shape.shape&&"Transaction"===e.shape.activity.subProcess.type){var s=e.shape.activity.subProcess.transaction;if(s.success.visible&&0===t.id.indexOf(e.id+"_success"))return s.success;if(s.cancel.visible&&0===t.id.indexOf(e.id+"_cancel"))return s.cancel;if(s.failure.visible&&0===t.id.indexOf(e.id+"_failure"))return s.failure}if(t instanceof Xs||t instanceof sp){var r=this.findMatch(e.ports,e.id,t.id);if(r)return r;var o=this.findMatch(e.fixedUserHandles,e.id,t.id);if(o)return o}}if(e instanceof Rg){if(t&&t.id===e.id+"_path")return e;if(t instanceof Xs||t instanceof sp){var a=this.findMatch(e.ports,e.id,t.id);if(a)return a;var l=this.findMatch(e.fixedUserHandles,e.id,t.id);if(l)return l}}if(!n)for(var h=void 0,c=0;c<e.annotations.length;c++)if(h=e.annotations[parseInt(c.toString(),10)],t.id===e.id+"_"+h.id)return h;return e},t.prototype.findMatch=function(t,e,i){for(var n=0;n<t.length;n++){var s=t[parseInt(n.toString(),10)];if(i===e+"_"+s.id||i===e+"_"+s.id+"_shape")return s}},t.prototype.canDisconnect=function(t,e,i,n){var s;e.source instanceof By?s=e.source.connectors[0]:e.source instanceof Rg&&this.diagram.currentDrawingObject&&(s=this.diagram.currentDrawingObject);this.findTarget(e.targetWrapper,e.target,"ConnectorSourceEnd"===t,!0);var r="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";return s[""+("ConnectorSourceEnd"===t?"sourceID":"targetID")]!==n||s[""+r]!==i},t.prototype.connect=function(t,e,i){var n,s,r,o,a={},l={};e.source instanceof By?r=e.source.connectors[0]:e.source instanceof Rg&&this.diagram.currentDrawingObject&&(r=this.diagram.currentDrawingObject);var h=this.findTarget(e.targetWrapper||e.sourceWrapper,e.target||e.actualObject,"ConnectorSourceEnd"===t,!0),c="ConnectorSourceEnd"===t?"sourceID":"targetID",d="ConnectorSourceEnd"===t?"sourcePortID":"targetPortID";if(h instanceof Ny)l[""+c]=r[""+c],r[""+c]=h.id,a[""+c]=r[""+c],l[""+d]=r[""+d],o=this.connectionEventChange(r,l,a,t,i);else if(h instanceof Fc||h instanceof gy){n=r[""+c],s=r[""+d],r[""+d]=h.id,r[""+c]=e.target&&e.target.id||e.actualObject.id,a[""+c]=r[""+c],a[""+d]=r[""+d];var p={connector:r,oldValue:{nodeId:n,portId:s},newValue:{nodeId:a[""+c],portId:a[""+d]},cancel:!1,state:"Changing",connectorEnd:t};this.triggerEvent(Ds.connectionChange,p),p.cancel?(r[""+c]=n,r[""+d]=s,a[""+c]=n,a[""+d]=s):(this.diagram.connectorPropertyChange(r,l,a),this.diagram.updateDiagramObject(r),p={connector:r,oldValue:{nodeId:n,portId:s},newValue:{nodeId:a[""+c],portId:a[""+d]},cancel:!1,state:"Changing",connectorEnd:t})}return this.renderHighlighter(e,void 0,"ConnectorSourceEnd"===t),o},t.prototype.cut=function(){this.clipboardData.pasteIndex=0,this.diagram.undoRedoModule&&this.diagram.historyManager.startGroupAction(),this.clipboardData.clipObject=this.copyObjects(),this.diagram.undoRedoModule&&this.diagram.historyManager.endGroupAction(),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()},t.prototype.addLayer=function(t,e,i){void 0===i&&(i=!0),t.id=t.id||Hn(),t.zIndex=this.diagram.layers.length;var n=this.diagram.allowServerDataBinding;this.diagram.enableServerDataBinding(!1),t=new Jv(this.diagram,"layers",t,!0),this.diagram.enableServerDataBinding(n),t.objectZIndex=-1,t.zIndexTable={},this.diagram.layers.push(t),this.diagram.layerZIndexTable[t.zIndex]=t.id,this.diagram.activeLayer=t;t.objects;if(e)for(var s=0;s<e.length;s++)this.diagram.add(e[parseInt(s.toString(),10)])},t.prototype.getObjectLayer=function(t){var e=this.diagram.layers;if(e.length>1)for(var i=0;i<e.length;i++){if(e[parseInt(i.toString(),10)].objects.indexOf(t)>-1)return e[parseInt(i.toString(),10)]}return this.diagram.activeLayer},t.prototype.getLayer=function(t){for(var e=this.diagram.layers,i=0;i<e.length;i++)if(e[parseInt(i.toString(),10)].id===t)return e[parseInt(i.toString(),10)]},t.prototype.removeLayer=function(t,e){void 0===e&&(e=!0);var i=this.getLayer(t);if(i){for(var n=this.diagram.layers.indexOf(i),s=i.objects,r=s.length-1;r>=0;r--)this.diagram.unSelect(this.diagram.nameTable[s[parseInt(r.toString(),10)]]),this.diagram.remove(this.diagram.nameTable[s[parseInt(r.toString(),10)]]),"default_layer"!==i.id&&this.diagram.activeLayer.id===t&&(this.diagram.activeLayer=this.diagram.layers[this.diagram.layers.length-1]);delete this.diagram.layerZIndexTable[i.zIndex],this.diagram.layers.splice(n,1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.moveObjects=function(t,e){this.diagram.startGroupAction();for(var i={},n=[],s=0;s<t.length;s++){var r=this.diagram.nameTable[t[parseInt(s.toString(),10)]];if(r instanceof Ny){var o={inEdges:r.inEdges,outEdges:r.outEdges};i[""+r.id]=Fn(o)}else if(r instanceof Rg){o={sourceID:r.sourceID,targetID:r.targetID,sourcePortID:r.sourcePortID,targetPortID:r.targetPortID};i[""+r.id]=Fn(o)}}var a,l=this.getLayer(e)||this.diagram.activeLayer;this.diagram.setActiveLayer(l.id);for(var h=0,c=t;h<c.length;h++){s=c[h];if(this.getObjectLayer(s).objects.indexOf(s)>-1){if(n=[],(a=this.diagram.nameTable[""+s]).children)for(var d=0,p=a.children;d<p.length;d++){var u=p[d];n.push(this.diagram.nameTable[""+u])}if(this.diagram.unSelect(a),this.diagram.deleteDependentConnector=!1,this.diagram.remove(this.diagram.nameTable[""+s]),this.diagram.deleteDependentConnector=!0,n.length>0){for(var g=void 0,m=0,f=n;m<f.length;m++){u=f[m];g=this.diagram.add(u),this.setConnectorDetails(g||u,i),a.children.push(g.id)}g=this.diagram.add(a),this.setConnectorDetails(g||a,i)}else{g=this.diagram.add(a);this.setConnectorDetails(g||a,i)}if(a.parentId){var y=a.parentId,v=this.diagram.nameTable[""+y];this.diagram.addChildToGroup(v,a.id)}}}this.diagram.endGroupAction()},t.prototype.setConnectorDetails=function(t,e){var i=e[t.id];if(t instanceof Ny){if(i){if(i.inEdges&&i.inEdges.length>0)for(var n=0;n<i.inEdges.length;n++){this.diagram.nameTable[i.inEdges[parseInt(n.toString(),10)]].targetID=t.id}if(i.outEdges&&i.outEdges.length>0)for(n=0;n<i.outEdges.length;n++){this.diagram.nameTable[i.outEdges[parseInt(n.toString(),10)]].sourceID=t.id}}}else t instanceof Rg&&i&&(t.sourceID=i.sourceID,t.targetID=i.targetID,t.sourcePortID=i.sourcePortID,t.targetPortID=i.targetPortID)},t.prototype.cloneLayer=function(t){this.diagram.layers;var e=this.getLayer(t);if(e){var i=[],n={id:t+"_"+Hn(),objects:[],visible:!0,lock:!1};this.addLayer(n,null,!0),n.zIndex=this.diagram.layers.length-1;i.length;for(var s=0,r=e.objects;s<r.length;s++){var o=r[s];i.push(this.diagram.nameTable[""+o])}this.paste(i)}},t.prototype.copy=function(){return this.clipboardData.pasteIndex=1,this.clipboardData.clipObject=this.copyObjects(),this.clipboardData.clipObject},t.prototype.copyObjects=function(){var t=[],e=[];this.clipboardData.childTable={};var i={};if(this.diagram.selectedItems.connectors.length>0){t=t.concat(this.diagram.selectedItems.connectors);for(var n=0;n<t.length;n++){var s=void 0;s=this.diagram.bpmnModule&&t[parseInt(n.toString(),10)].isBpmnAnnotationConnector?Fn(this.diagram.nameTable[t[parseInt(n.toString(),10)].targetID]):Fn(t[parseInt(n.toString(),10)]),e.push(s)}}if(this.diagram.selectedItems.nodes.length>0){t=t.concat(this.diagram.selectedItems.nodes);var r=function(t){if(!o.diagram.selectedItems.nodes[parseInt(t.toString(),10)].isPhase){var n;o.diagram.selectedItems.nodes.forEach(function(t){t.isLane&&(n=t.parentId,i[parseInt(n.toString(),10)]=i[parseInt(n.toString(),10)]||[],-1===i[parseInt(n.toString(),10)].indexOf(t.id)&&i[parseInt(n.toString(),10)].push(t.id))});var s=Fn(o.diagram.selectedItems.nodes[parseInt(t.toString(),10)]),r=e.filter(function(t){return t.isLane}),a=!1;if(s.isLane)for(var l=0,h=r;l<h.length;l++){if(Au(h[l],s,o.diagram)){a=!0;break}}if(!((s.isLane||s.isHeader)&&o.checkSwimlaneInSelection(s,e)||function(t,e){return t.parentId&&-1!==e.selectedItems.nodes.indexOf(e.nameTable[t.parentId])}(s,o.diagram)||a)){s.wrapper&&s.offsetX!==s.wrapper.offsetX&&(s.offsetX=s.wrapper.offsetX),s.wrapper&&s.offsetY!==s.wrapper.offsetY&&(s.offsetY=s.wrapper.offsetY);o.copyProcesses(s),o.copyContainerChild(s),e.push(Fn(s));var c=Nn();if(On(c,-s.rotateAngle,s.offsetX,s.offsetY),s.children){for(var d=o.clipboardData.childTable,p=void 0,u=o.getAllDescendants(s,[],!0),g=0;g<u.length;g++){var m=d[(p=o.diagram.nameTable[u[parseInt(g.toString(),10)].id]).id]=Fn(p),f=Ln(c,{x:m.wrapper.offsetX,y:m.wrapper.offsetY});p instanceof Ny&&(m.offsetX=f.x,m.offsetY=f.y,m.rotateAngle-=s.rotateAngle)}o.clipboardData.childTable=d}if("SwimLane"===s.shape.type){var y=o.diagram.getObject(o.diagram.selectedItems.nodes[parseInt(t.toString(),10)].id),v=(d=o.clipboardData.childTable,Jp(o.diagram,y.wrapper.children[0]));for(g=0;g<v.length;g++){var b=o.diagram.getObject(v[parseInt(g.toString(),10)]);d[b.id]=Fn(b),d[b.id].parentSwimlaneId=s.id}}if(s&&s.isLane){d=o.clipboardData.childTable,y=o.diagram.getObject(s.parentId);if(0===o.clipboardData.pasteIndex&&y&&y.shape&&y.shape.lanes&&y.shape.lanes.length===i[parseInt(n.toString(),10)].length)return{value:[]};var C=Tu(s,o.diagram);d[s.id]=Fn(C),d[s.id].width=y.wrapper.actualSize.width}}}},o=this;for(n=0;n<this.diagram.selectedItems.nodes.length;n++){var a=r(n);if("object"==typeof a)return a.value}}if(this.sortByZIndex(e,"zIndex"),this.diagram.selectedItems.nodes.some(function(t){return"SwimLane"===t.shape.type})&&(e=this.removeDuplicateObjects(e)),0===this.clipboardData.pasteIndex){this.startGroupAction();for(var l=0,h=t;l<h.length;l++){var c=h[l];this.diagram.nameTable[c.id]&&this.diagram.remove(c)}this.endGroupAction()}return e},t.prototype.findProcesses=function(t){var e=[];return t.shape.lanes.forEach(function(t){t.children&&t.children.forEach(function(t){var i=t.shape.activity;i&&i.subProcess.processes&&i.subProcess.processes.forEach(function(t){e.push(t)})})}),e},t.prototype.removeDuplicateObjects=function(t){for(var e={},i=0;i<t.length;i++)e[t[parseInt(i.toString(),10)].id]=t[parseInt(i.toString(),10)];var n=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.push(e[""+s]);var r,o=function(t){if(n[parseInt(t.toString(),10)].parentId){var e=a.diagram.getObject(n[parseInt(t.toString(),10)].parentId);e&&e.isLane&&e.parentId&&n.some(function(t){return t.id===e.parentId})&&(n.splice(t,1),t--)}r=t},a=this;for(i=0;i<n.length;i++)o(i),i=r;var l=Object.keys(this.clipboardData.childTable);return n.filter(function(t){return-1===l.indexOf(t.id)||t.isLane})},t.prototype.checkSwimlaneInSelection=function(t,e){return this.diagram.selectedItems.nodes.some(function(e){return e.id===t.parentId})},t.prototype.copyProcesses=function(t){var e=[];"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0?e=t.shape.activity.subProcess.processes:"SwimLane"===t.shape.type&&(e=this.findProcesses(t));for(var i=0,n=e;i<n.length;i++){var s=n[i];this.processTable[""+s]=Fn(this.diagram.nameTable[""+s]),this.processTable[""+s].shape.activity.subProcess.processes&&this.processTable[""+s].shape.activity.subProcess.processes.length>0&&this.copyProcesses(this.processTable[""+s])}this.clipboardData.processTable=this.processTable},t.prototype.copyContainerChild=function(t){var e=[];if("Container"===t.shape.type&&t.shape.children&&t.shape.children.length>0&&(e=t.shape.children),t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[parseInt(i.toString(),10)],s=this.diagram.nameTable[""+n];s&&"Container"===s.shape.type&&s.shape.children.length>0&&(e=e.concat(s.shape.children))}for(var r=0,o=e;r<o.length;r++){var a=o[r];this.containerChildTable[""+a]=Fn(this.diagram.nameTable[""+a]),this.containerChildTable[""+a].shape.children&&this.containerChildTable[""+a].shape.children.length>0&&this.copyContainerChild(this.containerChildTable[""+a])}this.clipboardData.containerChildTable=this.containerChildTable},t.prototype.group=function(){var t=this;this.oldSelectedObjects=mf(this.diagram);var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Is.Group;var i=[],n={};n.id="group"+Hn(),(n=new Ny(this.diagram,"nodes",n,!0)).children=[],i=(i=this.diagram.selectedItems.nodes).concat(this.diagram.selectedItems.connectors),this.diagram.connectors.forEach(function(e){var n=t.diagram.nameTable[e.sourceID],s=t.diagram.nameTable[e.targetID],r=n&&n.processId&&Zu(t.diagram,t.diagram.nameTable[n.processId]),o=s&&s.processId&&Zu(t.diagram,t.diagram.nameTable[s.processId]);i.some(function(t){return t.id===e.id})||!r&&!o||i.push(e)});for(var s=i.sort(function(t,e){return t.zIndex-e.zIndex}),r=0;r<s.length;r++)s[parseInt(r.toString(),10)].parentId||n.children.push(s[parseInt(r.toString(),10)].id);if(n.children.length>0){var o=this.diagram.add(n);o&&this.select(o),n.annotations=o.annotations,n.ports=o.ports,n.zIndex=o.zIndex,n.style=o.style;var a={type:"Group",undoObject:n,redoObject:n,category:"Internal"};this.addHistoryEntry(a),this.diagram.diagramActions=this.diagram.diagramActions&~Is.Group,this.diagram.protectPropertyChange(e)}},t.prototype.unGroup=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0),this.diagram.diagramActions=this.diagram.diagramActions|Is.Group;var i=[];t?i.push(t):i=this.diagram.selectedItems.nodes,this.diagram.startGroupAction();for(var n=0;n<i.length;n++){for(var s=i[parseInt(n.toString(),10)],r=Fn(s),o=[],a=0;a<s.children.length;a++)o.push(s.children[parseInt(a.toString(),10)]);if(s.children){s.ports&&s.ports.length>0&&this.diagram.removePorts(s,s.ports),s.annotations&&s.annotations.length>0&&!x()&&this.diagram.removeLabels(s,s.annotations);for(var l=this.diagram.nameTable[s.parentId],h=s.children.length-1;h>=0;h--){this.diagram.nameTable[s.children[parseInt(h.toString(),10)]].parentId="";var c=s.children[parseInt(h.toString(),10)];this.diagram.deleteChild(this.diagram.nameTable[s.children[parseInt(h.toString(),10)]],s),s.parentId&&c&&this.diagram.addChild(l,c)}this.resetDependentConnectors(s.inEdges,!0),this.resetDependentConnectors(s.outEdges,!1);var d={type:"UnGroup",undoObject:r,redoObject:r,category:"Internal"};this.diagram.diagramActions&Is.UndoRedo||this.addHistoryEntry(d),s.parentId&&this.diagram.deleteChild(s,l)}this.diagram.removeNode(s,o),this.clearSelection()}this.diagram.endGroupAction(),this.diagram.diagramActions=this.diagram.diagramActions&~Is.Group,this.diagram.protectPropertyChange(e)},t.prototype.resetDependentConnectors=function(t,e){for(var i=0;i<t.length;i++){var n=this.diagram.nameTable[t[parseInt(i.toString(),10)]],s=Fn(n),r=void 0;e?(n.targetID="",n.targetPortID="",r={targetID:n.targetID,targetPortID:n.targetPortID}):(n.sourceID="",n.sourcePortID="",r={sourceID:n.sourceID,sourcePortID:n.sourcePortID}),this.diagram.connectorPropertyChange(n,{},r);var o={type:"ConnectionChanged",undoObject:{connectors:[s],nodes:[]},redoObject:{connectors:[Fn(n)],nodes:[]},category:"Internal"};this.diagram.diagramActions&Is.UndoRedo||this.addHistoryEntry(o)}},t.prototype.paste=function(t){if(t||this.clipboardData.clipObject){this.diagram.protectPropertyChange(!0);var e=t?this.getNewObject(t):this.clipboardData.clipObject;if(e){var i=1!==e.length,n=!1,s={},r={};0!==this.clipboardData.pasteIndex&&this.clearSelection(),this.diagram.undoRedoModule&&(n=!0,this.diagram.historyManager.startGroupAction());for(var o=0,a=e;o<a.length;o++){s[(c=a[o]).id]=c}var l=[];i&&(this.diagram.isServerUpdate=!0);for(var h=0;h<e.length;h++){var c;if((c=e[parseInt(h.toString(),10)]).parentId)"SwimLane"!==this.diagram.getObject(c.parentId).shape.type&&c.parentId&&(c.parentId="");if(df(c)===Rg){var d=Fn(c),p=d.sourceID;d.sourceID="",s[""+p]&&r[""+p]&&(d.sourceID=r[""+p]),p=d.targetID,d.targetID="",s[""+p]&&r[""+p]&&(d.targetID=r[""+p]);var u=!0;if(d.targetID){var g=this.diagram.nameTable[d.targetID];"TextAnnotation"===g.shape.shape&&g.inEdges&&g.inEdges.length>0&&(u=!1)}if(u){var m=this.cloneConnector(d,i);l.push(m),r[c.id]=m.id}}else{c.shape&&"Bpmn"===c.shape.type&&(c.processId=""),this.cloningInProgress=!0;var f=this.cloneNode(c,i);if(this.cloningInProgress=!1,l.push(f),f){r[c.id]=f.id;var y=c.inEdges;if(y)for(var v=0,b=y;v<b.length;v++){if(s[""+(M=b[v])]&&r[""+M])(S=this.diagram.nameTable[r[""+M]]).targetID=r[c.id],this.diagram.connectorPropertyChange(S,{targetID:"",targetPortID:""},{targetID:S.targetID,targetPortID:S.targetPortID})}if(y=c.outEdges)for(var C=0,I=y;C<I.length;C++){var M,S;if(s[""+(M=I[C])]&&r[""+M])(S=this.diagram.nameTable[r[""+M]]).sourceID=r[c.id],this.diagram.connectorPropertyChange(S,{sourceID:"",sourcePortID:""},{sourceID:S.sourceID,sourcePortID:S.sourcePortID})}}}}i&&(this.diagram.isServerUpdate=!1,this.diagram.select(l,!0)),!0===n&&(this.diagram.historyManager.endGroupAction(),n=!1),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.clipboardData.pasteIndex++,this.diagram.protectPropertyChange(!1)}}},t.prototype.getNewObject=function(t){var e,i=[];this.clipboardData.pasteIndex=1;for(var n=0;n<t.length;n++)e=Fn(t[parseInt(n.toString(),10)]),i.push(e);return i},t.prototype.cloneConnector=function(t,e){var i=Fn(t);this.translateObject(i),i.zIndex=Number.MIN_VALUE;var n=this.diagram.add(i);return this.diagram.isServerUpdate||this.selectObjects([n],e),n},t.prototype.cloneNode=function(t,e,i,n){var s,r,o,a={},l=Fn(t),h=this.diagram.nameTable[t.parentId];t.shape&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length&&(r=l.shape.activity.subProcess.processes,l.zIndex=Number.MIN_VALUE,l.shape.activity.subProcess.processes=void 0),t.shape&&"Container"===t.shape.type&&t.shape.children&&t.shape.children.length&&(o=l.shape.children,l.zIndex=Number.MIN_VALUE,l.shape.children=void 0),t.shape&&"SwimLane"===t.shape.type?vu(t,this.diagram,this.clipboardData):h&&"SwimLane"===h.shape.type?vu(Fn(h),this.diagram,this.clipboardData,t,!0):!t.children||!t.children.length||i&&i.length?(this.translateObject(l,n),l.zIndex=Number.MIN_VALUE,i&&(l.children=i),l.shape&&"TextAnnotation"===l.shape.shape&&(l.isTextAnnotationCopied=!0),s=this.diagram.add(l)):s=this.cloneGroup(t,e),t.shape&&"SwimLane"===t.shape.type&&(r=this.findProcesses(t));for(var c=0,d=Object.keys(a);c<d.length;c++){var p=d[c];this.diagram.add(a[""+p])}return r&&r.length&&("Bpmn"===t.shape.type?(s.shape.activity.subProcess.processes=r,this.cloneSubProcesses(s)):"SwimLane"===t.shape.type&&this.cloneSubProcesses(t)),o&&o.length&&(s.shape.children=o,this.cloneSubProcesses(s)),s&&!this.diagram.isServerUpdate&&this.selectObjects([s],e),s},t.prototype.cloneSubProcesses=function(t){var e=this,i=[];if("Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length)i=t.shape.activity.subProcess.processes,this.cloneProcessess(i,t);else if("Container"===t.shape.type&&t.shape.children&&t.shape.children.length)for(var n=[],s={},r=t.shape.children,o=0;o<r.length;o++){for(var a=0,l=(C=this.diagram.nameTable[r[parseInt(o.toString(),10)]]||this.clipboardData.containerChildTable[r[parseInt(o.toString(),10)]]).outEdges;a<l.length;a++){var h=l[a];n.indexOf(h)<0&&n.push(h)}for(var c=0,d=C.inEdges;c<d.length;c++){h=d[c];n.indexOf(h)<0&&n.push(h)}var p=Fn(this.clipboardData.containerChildTable[r[parseInt(o.toString(),10)]]);p.parentId=t.id;var u=this.cloneNode(p,!1);s[r[parseInt(o.toString(),10)]]=u.id,r[parseInt(o.toString(),10)]=u.id,Kf(u,t.id,this.diagram);for(var g=0,m=n;g<m.length;g++){var f=m[g],y=Fn(this.diagram.nameTable[""+f]||this.diagram.connectorTable[""+f]);s[y.sourceID]&&s[y.targetID]&&(y.zIndex=-1,y.id+=Hn(),y.sourceID=s[y.sourceID],y.targetID=s[y.targetID],n.splice(n.indexOf(f),1),y.zIndex=Number.MIN_VALUE,this.diagram.add(y))}}if("SwimLane"===t.shape.type){var v=void 0,b=t.shape.lanes;for(f=0;f<b.length;f++){var C=b[parseInt(f.toString(),10)].children;for(h=0;h<C.length;h++){var I=C[parseInt(h.toString(),10)].shape.activity;I&&I.subProcess.processes&&(i=I.subProcess.processes,v=C[parseInt(h.toString(),10)],i.forEach(function(t){e.diagram.nameTable[""+t]&&(e.clipboardData.processTable[""+t]=e.diagram.nameTable[""+t])}),this.diagram.isServerUpdate=!0,this.cloneProcessess(i,v),this.diagram.isServerUpdate=!1)}}}},t.prototype.cloneProcessess=function(t,e){for(var i=[],n={},s=this.diagram.nameTable[e.id],r=0;r<t.length;r++){for(var o=this.diagram.nameTable[t[parseInt(r.toString(),10)]]||this.clipboardData.processTable[t[parseInt(r.toString(),10)]],a=0,l=o.outEdges;a<l.length;a++){var h=l[a];i.indexOf(h)<0&&i.push(h)}for(var c=0,d=o.inEdges;c<d.length;c++){h=d[c];i.indexOf(h)<0&&i.push(h)}var p=Fn(this.clipboardData.processTable[t[parseInt(r.toString(),10)]]);p.processId=s.id;var u=this.cloneNode(p,!1);n[t[parseInt(r.toString(),10)]]=u.id,s.shape.activity.subProcess.processes[parseInt(r.toString(),10)]=u.id,t[parseInt(r.toString(),10)]=u.id,this.diagram.addProcess(u,s.id);for(var g=0,m=i;g<m.length;g++){var f=m[g],y=Fn(this.diagram.nameTable[""+f]||this.diagram.connectorTable[""+f]);n[y.sourceID]&&n[y.targetID]&&(y.zIndex=-1,y.id+=Hn(),y.sourceID=n[y.sourceID],y.targetID=n[y.targetID],i.splice(i.indexOf(f),1),y.zIndex=Number.MIN_VALUE,this.diagram.add(y))}}},t.prototype.cloneGroup=function(t,e){var i,n,s,r=[],o=[],a=[],l=[];o=o.concat(t.children);var h=Hn(),c=[];if(this.diagram.blazorActions|=ns.GroupClipboardInProcess,this.clipboardData.childTable||t.children.length>0)for(var d=0;d<o.length;d++){var p=void 0;this.clipboardData.childTable&&(p=this.clipboardData.childTable[o[parseInt(d.toString(),10)]])||(p=this.diagram.nameTable[o[parseInt(d.toString(),10)]]),p.parentId="",p&&(df(p)===Rg?a.push(p):(s=this.cloneNode(p,e,void 0,h),l.push(p.id),r.push(s.id),c.push(s)))}for(var u=0;u<a.length;u++){if(a[parseInt(u.toString(),10)].sourceID||a[parseInt(u.toString(),10)].targetID)for(var g=0;g<l.length;g++)a[parseInt(u.toString(),10)].sourceID===l[parseInt(g.toString(),10)]&&(i=a[parseInt(u.toString(),10)].sourceID,a[parseInt(u.toString(),10)].sourceID+=h),a[parseInt(u.toString(),10)].targetID===l[parseInt(g.toString(),10)]&&(n=a[parseInt(u.toString(),10)].targetID,a[parseInt(u.toString(),10)].targetID+=h);s=this.cloneConnector(a[parseInt(u.toString(),10)],e),a[parseInt(u.toString(),10)].sourceID=i,a[parseInt(u.toString(),10)].targetID=n,r.push(s.id),c.push(s)}var m=this.cloneNode(t,e,r);return c.push(m),m&&m.container&&m.shape&&"UmlClassifier"===m.shape.type&&(this.diagram.updateDiagramObject(m),m.wrapper.measure(new un)),this.diagram.blazorActions&=~ns.GroupClipboardInProcess,this.diagram.isServerUpdate?this.cloneGroupChildCollection=c:this.diagram.UpdateBlazorDiagramModelCollection(void 0,c,void 0,!0),m},t.prototype.translateObject=function(t,e){t.id+=e||Hn();var i=10*this.clipboardData.pasteIndex;if(df(t)===Rg){if(t.sourcePoint={x:t.sourcePoint.x+i,y:t.sourcePoint.y+i},t.targetPoint={x:t.targetPoint.x+i,y:t.targetPoint.y+i},"Bezier"===t.type)for(var n=t.segments,s=0;s<n.length;s++)fn.isEmptyPoint(n[parseInt(s.toString(),10)].point1)||(n[parseInt(s.toString(),10)].point1={x:n[parseInt(s.toString(),10)].point1.x+i,y:n[parseInt(s.toString(),10)].point1.y+i}),fn.isEmptyPoint(n[parseInt(s.toString(),10)].point2)||(n[parseInt(s.toString(),10)].point2={x:n[parseInt(s.toString(),10)].point2.x+i,y:n[parseInt(s.toString(),10)].point2.y+i});if(("Straight"===t.type||"Bezier"===t.type)&&t.segments&&t.segments.length>0)for(n=t.segments,s=0;s<n.length-1;s++)n[parseInt(s.toString(),10)].point.x+=i,n[parseInt(s.toString(),10)].point.y+=i}else t.offsetX+=i,t.offsetY+=i},t.prototype.drawObject=function(t){var e;t&&t.shape&&"Text"===t.shape.type&&(t.width=this.diagram.drawingObject.width?this.diagram.drawingObject.width:50,t.height=this.diagram.drawingObject.height?this.diagram.drawingObject.height:20);for(var i=Fn(this.diagram.drawingObject),n=0,s=Object.keys(t);n<s.length;n++){var r=s[n];i[""+r]=t[""+r]}return df(this.diagram.drawingObject)===Ny||df(this.diagram.drawingObject)===Rg&&"Freehand"===this.diagram.drawingObject.type&&"Bezier"!==t.type?(e=new Ny(this.diagram,"nodes",i,!0)).id=(this.diagram.drawingObject.id||"node")+Hn():(e=new Rg(this.diagram,"connectors",i,!0)).id=(this.diagram.drawingObject&&this.diagram.drawingObject.id?this.diagram.drawingObject.id:"connector")+Hn(),this.diagram.initObject(e),this.diagram.updateDiagramObject(e),this.diagram.currentDrawingObject=e,e},t.prototype.addObjectToDiagram=function(t){this.diagram.removeFromAQuad(t),this.diagram.removeObjectsFromLayer(this.diagram.nameTable[t.id]),delete this.diagram.nameTable[t.id],t instanceof Rg&&"Bezier"===t.type&&t.segments.length>0&&this.diagram.drawingObject&&"Bezier"===this.diagram.drawingObject.type&&(t.segments=[]);var e=this.diagram.add(t);"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer(),this.selectObjects([e]),t&&!Ap(this.diagram)&&(this.diagram.tool&=~fs.DrawOnce,this.diagram.currentDrawingObject=void 0)},t.prototype.enableServerDataBinding=function(t){this.diagram.enableServerDataBinding(t)},t.prototype.addText=function(t,e){var i=this.diagram.findElementUnderMouse(t,e,this.diagram);this.diagram.startTextEdit(t,i instanceof Zs?i.id.split("_")[1]:void 0)},t.prototype.isUserHandle=function(t){var e=this.diagram.selectedItems;if(e.wrapper&&qm(e.constraints,"UserHandle"))for(var i=0,n=e.userHandles;i<n.length;i++){var s=n[i];if(s.visible)if(Yu(t,Qm(e,s,this.diagram.scroller.transform),s.size/(2*this.diagram.scroller.transform.scale)))return!0}return!1},t.prototype.selectObjects=function(t,e,i){return $v(this,void 0,void 0,function(){var n,s,r,o,a,l,h,c,d,p,u;return tb(this,function(g){if(n={oldValue:i||this.getSelectedObject(),newValue:t,cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1},t.length>0&&t[0]&&t[0].isLane)for(s=this.diagram.getObject(t[0].parentId),t[0].shape.header=[],r=0;r<t.length;r++)for(c=0;c<s.shape.lanes.length;c++)o=t[0].id.split(t[0].parentId),o[1].slice(0,-1)===s.shape.lanes[parseInt(c.toString(),10)].id&&t[0].shape.header.push(s.shape.lanes[parseInt(c.toString(),10)].header);if(this.diagram.enableServerDataBinding(!1),x()?this.oldSelectedObjects=mf(this.diagram):this.diagram.triggerEvent(Ds.selectionChange,n),a=this.diagram.selectedItems.annotation?[this.diagram.selectedItems.annotation]:this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),l=Ep(this.diagram),(h=Dp(this.diagram))||l){if(!l&&(t.length>1||e&&1===t.length)){if(1!==t.length)return[2];this.clearSelection()}if(!(h||l||1!==t.length||e&&_u(this.diagram)))return this.clearSelection(),[2]}if(!n.cancel){for(c=0;c<t.length;c++)if(d=t[parseInt(c.toString(),10)])if(_u(this.diagram)){if((c>0||e)&&d.children&&!d.parentId)for(p=0;p<this.diagram.selectedItems.nodes.length;p++)(u=this.diagram.nameTable[this.diagram.selectedItems.nodes[parseInt(p.toString(),10)].parentId])&&(u=this.findParent(u))&&d.id===u.id&&this.selectGroup(d);this.selectProcesses(d),this.selectBpmnSubProcesses(d)&&this.select(d,c>0||e,!0)}else this.select(d,c>0||e,!0);void 0===i&&(i=a),n={oldValue:i||[],newValue:this.getSelectedObject(),cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},this.diagram.renderSelector(e||t&&t.length>1),x()||this.diagram.triggerEvent(Ds.selectionChange,n),this.diagram.enableServerDataBinding(!0)}return[2]})})},t.prototype.findParent=function(t){return t.parentId&&(t=this.diagram.nameTable[t.parentId],this.findParent(t)),t},t.prototype.selectProcesses=function(t){if(this.hasProcesses(t))for(var e=t.shape.activity.subProcess.processes,i=0;i<e.length;i++){var n=this.diagram.nameTable[e[parseInt(i.toString(),10)]];this.hasProcesses(n)&&this.selectObjects([n],!0),this.unSelect(n)}else if(t&&"Container"===t.shape.type&&t.shape.children&&t.shape.children.length>0){var s=t.shape.children;for(i=0;i<s.length;i++){(n=this.diagram.nameTable[s[parseInt(i.toString(),10)]])&&"Container"===n.shape.type&&n.shape.children&&n.shape.children.length>0&&this.selectObjects([n],!0),this.unSelect(n)}}},t.prototype.selectGroup=function(t){for(var e=0;e<t.children.length;e++){var i=this.diagram.nameTable[t.children[parseInt(e.toString(),10)]];i.children&&this.selectGroup(i),this.unSelect(this.diagram.nameTable[t.children[parseInt(e.toString(),10)]])}},t.prototype.selectBpmnSubProcesses=function(t){var e,i=!0;if(t.processId)i=!Zu(this.diagram,this.diagram.nameTable[t.processId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[t.processId]);else if(t.parentId&&this.diagram.nameTable[t.parentId]&&"Container"===this.diagram.nameTable[t.parentId].shape.type)i=!Zu(this.diagram,this.diagram.nameTable[t.parentId])&&this.selectBpmnSubProcesses(this.diagram.nameTable[t.parentId]);else if(t instanceof Rg){if(t.sourceID&&this.diagram.nameTable[t.sourceID]&&this.diagram.nameTable[t.sourceID].processId&&(e=this.diagram.nameTable[t.sourceID].processId),t.targetID&&this.diagram.nameTable[t.targetID]&&this.diagram.nameTable[t.targetID].processId&&(e=this.diagram.nameTable[t.targetID].processId),e){if(Zu(this.diagram,this.diagram.nameTable[""+e]))return!1;i=this.selectBpmnSubProcesses(this.diagram.nameTable[""+e])}}else t.parentId&&this.diagram.nameTable[t.parentId]&&"UmlClassifier"===this.diagram.nameTable[t.parentId].shape.type&&Zu(this.diagram,this.diagram.nameTable[t.parentId])&&(i=!1);return i},t.prototype.hasProcesses=function(t){return!!(t&&"Bpmn"===t.shape.type&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)},t.prototype.select=function(t,e,i){var n=this.getObjectLayer(t.id);if(cp(t)&&!(t instanceof By)&&!Zu(this.diagram,t)&&n&&!n.lock&&n.visible&&t.wrapper.visible){(e=!!_u(this.diagram)&&e)||this.clearSelection(),this.diagram.enableServerDataBinding(!1);var s=this.diagram.selectedItems;if(t instanceof Ny)if(t.isHeader){var r=this.diagram.nameTable[t.parentId];s.nodes.push(r)}else s.nodes.push(t);else s.connectors.push(t);if(s.selectedObjects.push(t),e)s.wrapper.rotateAngle=s.rotateAngle=0,s.wrapper.children.push(t.wrapper);else if(s.init(this.diagram),1===s.nodes.length&&0===s.connectors.length){var o=bu(this.diagram,s);o&&(s.wrapper.children[0]=o),s.rotateAngle=s.nodes[0].rotateAngle,s.wrapper.rotateAngle=s.nodes[0].rotateAngle,s.wrapper.pivot=s.nodes[0].pivot}i||this.diagram.renderSelector(e),this.diagram.enableServerDataBinding(!0)}},t.prototype.labelSelect=function(t,e,i){this.oldSelectedObjects=mf(this.diagram);var n=this.findTarget(e,t),s={oldValue:i||this.getSelectedObject(),newValue:[n],cause:this.diagram.diagramActions,state:"Changing",type:"Addition",cancel:!1};if(x()?this.oldSelectedObjects=mf(this.diagram):this.diagram.triggerEvent(Ds.selectionChange,s),!s.cancel){var r=this.diagram.selectedItems,o=this.diagram.allowServerDataBinding;this.diagram.allowServerDataBinding=!1,r.nodes=r.connectors=[],this.diagram.allowServerDataBinding=o,t instanceof Ny?r.nodes[0]=t:r.connectors[0]=t,r.annotation=n,r.init(this.diagram),this.diagram.renderSelector(!1),s={oldValue:i||[],newValue:[r.annotation],cause:this.diagram.diagramActions,state:"Changed",type:"Addition",cancel:!1},x()||this.diagram.triggerEvent(Ds.selectionChange,s)}},t.prototype.unSelect=function(t){[].push(t);var e=this.diagram.selectedItems.nodes.concat(this.diagram.selectedItems.connectors),i=e.filter(function(e){return e.id!==t.id}),n={oldValue:e,newValue:i,cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1};if(this.diagram.currentSymbol||x()||this.diagram.triggerEvent(Ds.selectionChange,n),Zu(this.diagram,t)){var s=this.diagram.selectedItems,r=void 0;t instanceof Ny?(r=s.nodes.indexOf(t,0),s.nodes.splice(r,1)):(r=s.connectors.indexOf(t,0),s.connectors.splice(r,1)),r=s.selectedObjects.indexOf(t,0),s.selectedObjects.splice(r,1),n={oldValue:e,newValue:i,cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},(n={oldValue:e,newValue:i,cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:n.cancel}).cancel||(r=s.wrapper.children.indexOf(t.wrapper,0),s.wrapper.children.splice(r,1),this.diagram.updateSelector(),this.diagram.currentSymbol||this.diagram.triggerEvent(Ds.selectionChange,n))}},t.prototype.moveSvgNode=function(t,e){var i=this.diagram.nameTable[""+e];if("Native"===i.shape.type||"HTML"===i.shape.type)this.updateNativeNodeIndex(t,e);else{var n=Yy(e+"_groupElement",this.diagram.element.id),s=Yy(t+"_groupElement",this.diagram.element.id);n.parentNode.insertBefore(s,n)}},t.prototype.moveAfterSvgNode=function(t,e){var i=this.diagram.nameTable[""+e];if(!i||"HTML"!==i.shape.type&&"Native"!==i.shape.type){o=Yy(e+"_groupElement",this.diagram.element.id),r=Yy(t+"_groupElement",this.diagram.element.id);o.insertAdjacentElement("afterend",r)}else for(var n=0;n<this.diagram.views.length;n++){var s="HTML"===i.shape.type?"_html_element":"_content_groupElement",r=Yy(t+s,this.diagram.views[parseInt(n.toString(),10)]),o=e?Yy(e+s,this.diagram.views[parseInt(n.toString(),10)]):r.parentElement.firstChild;r&&o&&r.parentNode.id===o.parentNode.id&&o.insertAdjacentElement("afterend",r)}},t.prototype.sendLayerBackward=function(t){var e=this.getLayer(t);if(e&&0!==e.zIndex){var i=e.zIndex;if("SVG"===this.diagram.mode){var n=e.objects,s=this.getLayer(this.diagram.layerZIndexTable[i-1]).objects[0];if(s)for(var r=0,o=n;r<o.length;r++){var a=o[r];this.moveSvgNode(a,s)}}var l=this.getLayer(this.diagram.layerZIndexTable[i-1]);l.zIndex=l.zIndex+1,e.zIndex=e.zIndex-1;var h=this.diagram.layerZIndexTable[parseInt(i.toString(),10)];this.diagram.layerZIndexTable[parseInt(i.toString(),10)]=this.diagram.layerZIndexTable[i-1],this.diagram.layerZIndexTable[i-1]=h,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.bringLayerForward=function(t){var e=this.getLayer(t);if(e&&e.zIndex<this.diagram.layers.length-1){var i=e.zIndex,n=this.getLayer(this.diagram.layerZIndexTable[i+1]);if("SVG"===this.diagram.mode)for(var s=e.objects[0],r=0,o=n.objects;r<o.length;r++){var a=o[r];a&&this.moveSvgNode(a,s)}n.zIndex=n.zIndex-1,e.zIndex=e.zIndex+1;var l=this.diagram.layerZIndexTable[parseInt(i.toString(),10)];this.diagram.layerZIndexTable[parseInt(i.toString(),10)]=this.diagram.layerZIndexTable[i+1],this.diagram.layerZIndexTable[i+1]=l,"Canvas"===this.diagram.mode&&this.diagram.refreshDiagramLayer()}},t.prototype.sendToBack=function(t){if(this.diagram.protectPropertyChange(!0),_u(this.diagram)||t){var e=this.diagram.selectedItems,i=[];t&&t.id?i.push(t):i=(i=i.concat(e.nodes)).concat(e.connectors);var n=t&&t.id,s=Fn(this.diagram.selectedItems);i=i.slice().sort(function(t,e){return t.zIndex-e.zIndex});for(var r,o=this.diagram.layers.indexOf(this.getObjectLayer(i[0].id)),a=this.diagram.layers[parseInt(o.toString(),10)].objects,l=null,h=0;h<a.length;h++){var c=this.diagram.nameTable[a[parseInt(h.toString(),10)]];(null===l||c.zIndex<l)&&(l=c.zIndex,r=c)}var d=i.some(function(t){return t.id===r.id});if(d){var p=i.every(function(t,e){return 0===e||t.zIndex===i[e-1].zIndex+1});if(p)return void this.diagram.protectPropertyChange(!1)}for(h=i.length-1;h>=0;h--){Fn(i[parseInt(h.toString(),10)]);n=i[parseInt(h.toString(),10)].id;var u=this.diagram.nameTable[""+n].zIndex,g=this.diagram.layers.indexOf(this.getObjectLayer(n));this.updateLayerZindexTable(g);for(var m=this.diagram.layers[parseInt(g.toString(),10)].zIndexTable,f=this.diagram.layers[parseInt(g.toString(),10)].objects,y=null,v=0;v<f.length;v++){c=this.diagram.nameTable[f[parseInt(v.toString(),10)]];(null===y||c.zIndex<y)&&(y=c.zIndex,c.id)}var b=JSON.parse(JSON.stringify(m)),C=0;if(1!==this.diagram.nodes.length&&(void 0===this.diagram.nameTable[""+n].children||this.checkObjectBehind(n,m,u))){if((c=this.diagram.nameTable[""+n]).zIndex>y&&"SwimLane"!==c.shape.type){var I=Fn(c),M=null;c.children?(M=this.findMaxZIndex(c)-c.zIndex,c.zIndex=y-1-M,this.updateGroupZindex(c,"SendToBack",y)):c.zIndex=y-1,this.triggerOrderCommand(I,c,c)}else"SwimLane"===c.shape.type&&(C=this.swapZIndexObjects(u,m,n,b));if("SVG"===this.diagram.mode){for(var S="SwimLane"!==this.diagram.nameTable[""+n].shape.type?y:C,x=m[parseInt(S.toString(),10)];!x&&S<u;)x=m[++S];(x=this.resetTargetNode(n,x,S,m))&&(x=this.diagram.nameTable[""+x].parentId?this.checkParentExist(x):x,this.moveSvgNode(n,x)),this.updateNativeNodeIndex(n),this.updateLayerZindexTable(g)}else this.diagram.refreshCanvasLayers(),this.updateLayerZindexTable(g)}}var w={type:"SendToBack",category:"Internal",undoObject:s,redoObject:Fn(this.diagram.selectedItems)};this.diagram.diagramActions&Is.UndoRedo||this.addHistoryEntry(w),this.refreshOverviewLayer()}this.diagram.protectPropertyChange(!1)},t.prototype.findMaxZIndex=function(t){var e=this,i=null,n=function(t){for(var s=0;s<t.children.length;s++){var r=e.diagram.nameTable[t.children[parseInt(s.toString(),10)]];(null===i||r.zIndex>i)&&(i=r.zIndex),r.children&&n(r)}};return n(t),i},t.prototype.updateGroupZindex=function(t,e,i){var n,s=this;void 0===n&&(n=t.zIndex+1);var r=function(t){for(var e=0;e<t.children.length;e++){var i=s.diagram.nameTable[t.children[parseInt(e.toString(),10)]];i.children?(i.zIndex=n++,r(i)):i.zIndex=n++}};r(t)},t.prototype.updateLayerZindexTable=function(t){var e=this.diagram.layers[parseInt(t.toString(),10)];e.zIndexTable={};for(var i=0;i<e.objects.length;i++){var n=this.diagram.nameTable[e.objects[parseInt(i.toString(),10)]];e.zIndexTable[n.zIndex]=n.id}},t.prototype.swapZIndexObjects=function(t,e,i,n){for(var s=0,r=0,o=-1,a=1,l=0;l<=t;l++)e[parseInt(l.toString(),10)]&&this.diagram.nameTable[e[parseInt(l.toString(),10)]].parentId===i&&(-1===o&&(o=l),r++);for(l=0;l<=t;l++)if(e[parseInt(l.toString(),10)]&&a<=r){for(;!e[parseInt(o.toString(),10)];)o++;e[parseInt(l.toString(),10)]=e[parseInt(o.toString(),10)],this.diagram.nameTable[e[parseInt(l.toString(),10)]].zIndex=l,o++,a++}var h=0;for(l=0;l<r;l++){for(;!e[parseInt(h.toString(),10)];)h++;s=this.diagram.nameTable[e[parseInt(h.toString(),10)]].zIndex,h++}for(s+=1;!e[parseInt(s.toString(),10)];)++s;h=0,e[parseInt(s.toString(),10)]=this.diagram.nameTable[""+i].id,this.diagram.nameTable[""+i].zIndex=s;for(l=s+=1;l<=t;l++)if(e[parseInt(l.toString(),10)]){for(;!n[parseInt(h.toString(),10)];)h++;e[parseInt(l.toString(),10)]=n[parseInt(h.toString(),10)],this.diagram.nameTable[e[parseInt(l.toString(),10)]].zIndex=l,h++}return s},t.prototype.resetTargetNode=function(t,e,i,n){return"SwimLane"===this.diagram.nameTable[""+t].shape.type&&void 0!==this.diagram.nameTable[""+e].parentId&&""!==this.diagram.nameTable[""+e].parentId&&this.diagram.nameTable[this.diagram.nameTable[""+e].parentId].isLane?(i+=1,n[parseInt(i.toString(),10)]?(e=n[parseInt(i.toString(),10)],this.resetTargetNode(t,e,i,n)):e):e},t.prototype.checkParentExist=function(t){for(var e=t;this.diagram.nameTable[""+e].parentId;)e=this.diagram.nameTable[""+e].parentId;return e},t.prototype.checkObjectBehind=function(t,e,i){return!0},t.prototype.bringToFront=function(t){if(this.diagram.protectPropertyChange(!0),_u(this.diagram)||t){var e=t&&t.id,i=this.diagram.selectedItems,n=[];t&&t.id?n.push(t):n=(n=n.concat(i.nodes)).concat(i.connectors);var s=Fn(this.diagram.selectedItems);n=n.slice().sort(function(t,e){return t.zIndex-e.zIndex});for(var r,o=this.diagram.layers.indexOf(this.getObjectLayer(n[0].id)),a=this.diagram.layers[parseInt(o.toString(),10)].objects,l=null,h=0;h<a.length;h++){var c=this.diagram.nameTable[a[parseInt(h.toString(),10)]];(null===l||c.zIndex>l)&&(l=c.zIndex,r=c)}var d=n.some(function(t){return t.id===r.id});if(d){var p=n.every(function(t,e){return 0===e||t.zIndex===n[e-1].zIndex+1});if(p)return void this.diagram.protectPropertyChange(!1)}for(h=0;h<n.length;h++){Fn(n[parseInt(h.toString(),10)]);e=n[parseInt(h.toString(),10)].id;var u=this.diagram.layers.indexOf(this.getObjectLayer(e));this.updateLayerZindexTable(u);for(var g=this.diagram.layers[parseInt(u.toString(),10)].zIndexTable,m=this.diagram.layers[parseInt(u.toString(),10)].objects,f=null,y=0;y<m.length;y++){var v=this.diagram.nameTable[m[parseInt(y.toString(),10)]];(null===f||v.zIndex>f)&&(f=v.zIndex)}for(var b=JSON.parse(JSON.stringify(g)),C=Number(Object.keys(g).sort(function(t,e){return Number(t)-Number(e)}).reverse()[0]),I=this.diagram.nameTable[""+e].zIndex,M=[],S=0;S<=C;S++)M.push(g[parseInt(S.toString(),10)]);if("SwimLane"===this.diagram.nameTable[""+e].shape.type)for(var x=C;x>=I;x--)if(g[parseInt(x.toString(),10)]&&this.diagram.nameTable[g[parseInt(x.toString(),10)]].parentId!==e){C=x;break}var w=this.diagram.nameTable[""+e];if(w.zIndex<f&&"SwimLane"!==w.shape.type){var D=Fn(w);w.children?this.findMaxZIndex(w)<f&&(w.zIndex=f+1,this.updateGroupZindex(w,"BringToFront",f)):w.zIndex=f+1,this.triggerOrderCommand(D,w,w)}else if("SwimLane"===w.shape.type){for(var E=0,T=-1,A=0,N=0,L=JSON.parse(JSON.stringify(g)),O=0;O<=I;O++)if(g[parseInt(O.toString(),10)]&&this.diagram.nameTable[g[parseInt(O.toString(),10)]].parentId===e&&-1===T){T=O,A=O;break}for(var k=0;k<=C;k++)if(b[parseInt(k.toString(),10)]&&b[parseInt(k.toString(),10)]!==e&&this.diagram.nameTable[b[parseInt(k.toString(),10)]].parentId!==e){var z=this.diagram.nameTable[b[parseInt(k.toString(),10)]],P=this.diagram.nameTable[""+e];z.zIndex>=P.zIndex&&E++}for(var j=T,B=0;B<=E;B++){for(;!g[parseInt(j.toString(),10)];)j++;N=this.diagram.nameTable[g[parseInt(j.toString(),10)]].zIndex,j++}for(var H=N;H<=C;H++){for(;!L[parseInt(T.toString(),10)];)T++;for(;!g[parseInt(H.toString(),10)];)H++;g[parseInt(H.toString(),10)]=L[parseInt(T.toString(),10)],this.diagram.nameTable[g[parseInt(H.toString(),10)]].zIndex=H,T++}g[parseInt(C.toString(),10)]=this.diagram.nameTable[""+e].id,this.diagram.nameTable[""+e].zIndex=C,j=I+1;for(var R=A,V=0;V<E;V++){for(;!b[parseInt(j.toString(),10)];)j++;for(;this.diagram.nameTable[b[parseInt(j.toString(),10)]].parentId===e;)j++;for(;!g[parseInt(R.toString(),10)];)R++;g[parseInt(R.toString(),10)]=b[parseInt(j.toString(),10)],this.diagram.nameTable[g[parseInt(R.toString(),10)]].zIndex=R,j++,R++}}if("SVG"===this.diagram.mode){var U="SwimLane"!==this.diagram.nameTable[""+e].shape.type?f:0,F=g[parseInt(U.toString(),10)];(F=this.resetTargetNode(e,F,U,g))&&(F=this.diagram.nameTable[""+F].parentId?this.checkParentExist(F):F,this.moveAfterSvgNode(e,F));var W=this.diagram.diagramLayer,Y=Yy(e+"_groupElement",this.diagram.element.id),_=this.diagram.selectedItems.nodes;if(_.length>0&&("Native"===_[0].shape.type||"HTML"===_[0].shape.type)){Y.parentNode.removeChild(Y);for(R=0;R<this.diagram.views.length;R++){var Q=(Y=Yy(e+("HTML"===_[0].shape.type?"_html_element":"_content_groupElement"),this.diagram.views[parseInt(R.toString(),10)])).parentNode.lastChild;Q.parentNode.insertBefore(Y,Q.nextSibling)}var Z=ev(this.diagram.element.id);this.diagram.diagramRenderer.renderElement(this.diagram.nameTable[""+e].wrapper,W,Z)}this.updateLayerZindexTable(u)}else this.diagram.refreshCanvasLayers(),this.updateLayerZindexTable(u)}var q={type:"BringToFront",category:"Internal",undoObject:s,redoObject:Fn(this.diagram.selectedItems)};this.diagram.diagramActions&Is.UndoRedo||this.addHistoryEntry(q),this.refreshOverviewLayer()}this.diagram.protectPropertyChange(!1)},t.prototype.triggerOrderCommand=function(t,e,i){var n={zIndex:Fn(t).zIndex},s={zIndex:e.zIndex},r={element:i,cause:this.diagram.diagramActions,diagramAction:this.diagram.getDiagramAction(this.diagram.diagramActions),oldValue:n,newValue:s};this.diagram.triggerEvent(Ds.propertyChange,r)},t.prototype.checkGroupNode=function(t,e,i){return i[""+e].parentId===i[""+t].parentId},t.prototype.sortByZIndex=function(t,e,i){if("BringForward"===i){var n=e||"zIndex";t=t.sort(function(t,e){return e[""+n]-t[""+n]})}else{var s=e||"zIndex";t=t.sort(function(t,e){return t[""+s]-e[""+s]})}return t},t.prototype.refreshOverviewLayer=function(){for(var t=0,e=this.diagram.views;t<e.length;t++){var i=e[t],n=this.diagram.views[""+i],s=ev(n.element.id);n instanceof qb||this.diagram.renderDiagramElements(n.diagramLayer,n.diagramRenderer,s,void 0,void 0,void 0)}},t.prototype.orderCommands=function(t,e,i){var n=this,s=e.nodes;s=s.concat(e.connectors);for(var r,o=this.diagram.layers.indexOf(this.getObjectLayer(s[0].id)),a=this.diagram.layers[parseInt(o.toString(),10)].objects,l=null,h=0;h<a.length;h++){var c=this.diagram.nameTable[a[parseInt(h.toString(),10)]];(null===l||c.zIndex<l)&&(l=c.zIndex,r=c)}for(var d,p=s.some(function(t){return t.id===r.id}),u=null,g=0;g<a.length;g++){c=this.diagram.nameTable[a[parseInt(g.toString(),10)]];(null===u||c.zIndex>u)&&(u=c.zIndex,d=c)}var m=s.some(function(t){return t.id===d.id});if(t){var f=e.selectedObjects;if(f=f.slice().sort(function(t,e){return t.zIndex-e.zIndex}),"SendBackward"===i)for(h=0;h<f.length;h++)this.sendBackward(f[parseInt(h.toString(),10)]);else if("SendForward"===i)for(h=f.length-1;h>=0;h--)this.sendForward(f[parseInt(h.toString(),10)]);else if("BringToFront"===i){if(!m)for(h=0;h<f.length;h++)this.bringToFront(f[parseInt(h.toString(),10)])}else if("SendToBack"===i&&!p)for(h=f.length-1;h>=0;h--)this.sendToBack(f[parseInt(h.toString(),10)])}else{var v=s[0],b=this.getObjectLayer(v.id),C=b.zIndex,I=b.zIndexTable,M=void 0;if("SendBackward"===i||"SendToBack"===i){s=s.slice().sort(function(t,e){return t.zIndex-e.zIndex});for(h=0;h<s.length;h++){var S=s[parseInt(h.toString(),10)];if((O=this.diagram.nameTable[s[parseInt(h.toString(),10)].id]).zIndex=S.zIndex,this.diagram.layers[parseInt(C.toString(),10)].zIndexTable[S.zIndex]=S.id,M=S.id,"SendToBack"===i&&("SwimLane"===s[0].shape.type&&this.bringToFront(s[0]),O.children&&this.updateGroupZindex(O,"",null),this.updateLayerZindexTable(b.zIndex)),"SVG"===this.diagram.mode){for(var x=(k=this.diagram.nameTable[""+M]).zIndex,w=this.diagram.layers.indexOf(this.getObjectLayer(M)),D=this.diagram.layers[parseInt(w.toString(),10)].objects,E=null,T=function(t){var i=A.diagram.nameTable[D[parseInt(t.toString(),10)]];if(i.isHeader||i.isLane||i.isPhase)return"continue";var s=!0;e.selectedObjects.forEach(function(t){s=n.notChildOfSelectedNode(i,t)}),s&&i.zIndex<x&&(null===E||i.zIndex>E)&&(e.selectedObjects[0].shape.type===i.shape.type||"Native"!==e.selectedObjects[0].shape.type&&"Native"!==i.shape.type&&"HTML"!==e.selectedObjects[0].shape.type&&"HTML"!==i.shape.type)&&(E=i.zIndex)},A=this,N=0;N<D.length;N++)T(N);c=this.diagram.nameTable[""+M];var L=void 0;y(H=E)||(L=I[parseInt(H.toString(),10)]),L&&(L=this.diagram.nameTable[""+L].parentId?this.checkParentExist(L):L,"SendBackward"===i?""===k.parentId&&this.moveAfterSvgNode(M,L):"SendToBack"===i&&"SwimLane"!==s[0].shape.type&&this.moveAfterSvgNode(M,L)),this.refreshOverviewLayer()}else this.diagram.refreshCanvasLayers()}}else if("SendForward"===i||"BringToFront"===i){s=s.slice().sort(function(t,e){return t.zIndex-e.zIndex});for(h=0;h<s.length;h++){var O;S=s[parseInt(h.toString(),10)];if((O=this.diagram.nameTable[s[parseInt(h.toString(),10)].id]).zIndex=S.zIndex,this.diagram.layers[parseInt(C.toString(),10)].zIndexTable[S.zIndex]=S.id,M=S.id,"BringToFront"===i&&("SwimLane"===s[0].shape.type&&this.sendToBack(s[0]),O.children&&this.updateGroupZindex(O,"",null),this.updateLayerZindexTable(b.zIndex)),"SVG"===this.diagram.mode){x=(k=this.diagram.nameTable[""+M]).zIndex,w=this.diagram.layers.indexOf(this.getObjectLayer(M)),D=this.diagram.layers[parseInt(w.toString(),10)].objects;for(var k,z=null,P=function(t){var i=j.diagram.nameTable[D[parseInt(t.toString(),10)]];if(i.isHeader||i.isLane||i.isPhase)return"continue";var s=!0;e.selectedObjects.forEach(function(t){s=n.notChildOfSelectedNode(i,t)});var r=e.selectedObjects.some(function(t){return t.id===i.id});!r&&s&&i.zIndex>x&&(null===z||i.zIndex<z)&&(e.selectedObjects[0].shape.type===i.shape.type||"Native"!==e.selectedObjects[0].shape.type&&"Native"!==i.shape.type&&"HTML"!==e.selectedObjects[0].shape.type&&"HTML"!==i.shape.type)&&(z=i.zIndex)},j=this,B=D.length-1;B>=0;B--)P(B);var H;c=this.diagram.nameTable[""+M],L=void 0;y(H=z)||(L=I[parseInt(H.toString(),10)]),L&&(L=this.diagram.nameTable[""+L].parentId?this.checkParentExist(L):L,"SendForward"===i?""===k.parentId&&this.moveSvgNode(M,L):"BringToFront"===i&&"SwimLane"!==s[0].shape.type&&this.moveSvgNode(M,L)),this.refreshOverviewLayer()}else this.diagram.refreshCanvasLayers()}}}},t.prototype.sendForward=function(t){var e=this;if(this.diagram.protectPropertyChange(!0),_u(this.diagram)||t){var i=this.diagram.selectedItems,n=[];t&&t.id?n.push(t):n=(n=n.concat(i.nodes)).concat(i.connectors),this.sortByZIndex(n);var s=t&&t.id,r=Fn(this.diagram.selectedItems);this.diagram.startGroupAction();for(var o=[],a=function(t){Fn(n[parseInt(t.toString(),10)]);s=n[parseInt(t.toString(),10)].id;var i=l.diagram.layers.indexOf(l.getObjectLayer(s)),a=Fn(l.diagram.nameTable),h=l.diagram.layers[parseInt(i.toString(),10)].zIndexTable,c=l.diagram.nameTable[""+s],d=[],p=l.diagram.spatialSearch.findObjects(c.wrapper.bounds);p.length>2&&(p=l.sortByZIndex(p,void 0,"BringForward"));for(var u=function(t){if(c.id!==t.id){var e=l.getObjectLayer(t.id).zIndex,n=l.diagram.selectedItems.selectedObjects.some(function(e){return e.id===t.id});(1===l.diagram.selectedItems.selectedObjects.length||!n)&&i===e&&Number(l.diagram.nameTable[""+s].zIndex)<Number(t.zIndex)&&""===t.parentId&&c.wrapper.bounds.intersects(t.wrapper.bounds)&&(c.shape.type===t.shape.type||"Native"!==c.shape.type&&"HTML"!==c.shape.type&&"Native"!==t.shape.type&&"HTML"!==t.shape.type)&&d.push(t)}},g=0,m=p;g<m.length;g++){u(f=m[g])}for(var f=d.length-1;f>=0;f--){l.diagram.nameTable[d[parseInt(f.toString(),10)].id].parentId===s&&d.splice(f,1)}if(d.length>0){var y=l.diagram.nameTable[d[d.length-1].id];if(y.parentId){var v=wf(y,l.diagram,""),b=l.diagram.nameTable[""+v];b.id!==s&&(d[0]=b)}var C={};for(f=0;f<l.diagram.nodes.length;f++){var I=l.diagram.nodes[parseInt(f.toString(),10)];C[I.id]=I.zIndex}for(var M=0;M<l.diagram.connectors.length;M++){var S=l.diagram.connectors[parseInt(M.toString(),10)];C[S.id]=S.zIndex}var x=d[0].zIndex,w=(h[parseInt(x.toString(),10)],{});d.forEach(function(t){w[t.id]=t.zIndex});var D=[];if(c){var E=c.zIndex;Object.keys(w).length>0&&(Object.values(w).forEach(function(t){t>=E&&D.push(t)}),0!==D.length&&l.updateZIndexBySendForward(c,D,i))}var T=[];if(Object.keys(l.changedNodeZIndexes).forEach(function(t){if((a[""+t]?a[""+t].zIndex:null)!==e.changedNodeZIndexes[""+t]){var i=Fn(a[""+t]);T.push(i)}}),l.updateLayerZindexTable(i),T.forEach(function(t){if(!r.nodes.some(function(e){return e.id===t.id})){var e=Fn(t);r.nodes.push(e)}}),"SVG"===l.diagram.mode){var A=d[d.length-1].id;d[d.length-1];l.moveAfterSvgNode(s,A),l.updateNativeNodeIndex(A,s)}else l.diagram.refreshCanvasLayers();Object.keys(l.changedNodeZIndexes).forEach(function(t){if((a[""+t]?a[""+t].zIndex:null)!==e.changedNodeZIndexes[""+t]){var i=Fn(e.diagram.nameTable[""+t]);o.push(i)}})}},l=this,h=n.length-1;h>=0;h--)a(h);var c=Fn(this.diagram.selectedItems);o.forEach(function(t){if(!c.nodes.some(function(e){return e.id===t.id})){var e=Fn(t);c.nodes.push(e)}});var d={type:"SendForward",category:"Internal",undoObject:r,redoObject:c};!(this.diagram.diagramActions&Is.UndoRedo)&&o.length>0&&this.addHistoryEntry(d),this.diagram.endGroupAction(),o.length>0&&this.refreshOverviewLayer()}this.diagram.protectPropertyChange(!1)},t.prototype.updateZIndexBySendForward=function(t,e,i){var n,s=Fn(t),r=Math.min.apply(Math,e),o=this.diagram.layers[parseInt(i.toString(),10)].zIndexTable[parseInt(r.toString(),10)];this.diagram.nameTable[""+o].children&&(r=this.findGreatestChildZIndex(this.diagram.nameTable[""+o]));var a=this.diagram.layers[parseInt(i.toString(),10)].objects,l=this.diagram.nodes.filter(function(t){return-1!==a.indexOf(t.id)});this.diagram.connectors.filter(function(t){return-1!==a.indexOf(t.id)}).forEach(function(t){l.push(t)});var h=l.filter(function(e){return e.zIndex===r&&e.id!==t.id});t.children?(t.zIndex=r+1,this.updateGroupZindex(t,"BringForward",t.zIndex),n=this.findGreatestChildZIndex(t)):(t.zIndex=r+1,n=t.zIndex),this.triggerOrderCommand(s,t,t);for(var c=l.slice().sort(function(t,e){return t.zIndex-e.zIndex}),d=!0,p=0;p<c.length;p++){var u=c[parseInt(p.toString(),10)];if(t.children&&(d=this.notChildOfSelectedNode(u,t)),u.zIndex>r&&u!==t&&u.parentId!==t.id&&d&&h&&h.length>0&&u.parentId!==h[0].id){var g=Fn(u);if(!(u.zIndex<=n+1))break;u.zIndex=n+1,n++,this.triggerOrderCommand(g,u,u)}var m=u.zIndex;this.changedNodeZIndexes.hasOwnProperty(u.id),this.changedNodeZIndexes[u.id]=m}},t.prototype.findGreatestChildZIndex=function(t){var e=this,i=t.zIndex,n=function(t){for(var s=0;s<t.children.length;s++){var r=e.diagram.nameTable[t.children[parseInt(s.toString(),10)]];r.children?n(r):r.zIndex>i&&(i=r.zIndex)}};return n(t),i},t.prototype.notChildOfSelectedNode=function(t,e){var i=this,n=!0,s=function(t,e){for(var r=0;r<e.children.length;r++){var o=i.diagram.nameTable[e.children[parseInt(r.toString(),10)]];if(o.id===t.id)return n=!1;o.children&&s(t,o)}return n};return e.children&&s(t,e),n},t.prototype.sendBackward=function(t){var e=this;if(this.diagram.protectPropertyChange(!0),_u(this.diagram)||t){var i=this.diagram.selectedItems,n=[];t&&t.id?n.push(t):n=(n=n.concat(i.nodes)).concat(i.connectors),this.sortByZIndex(n);var s=t&&t.id,r=Fn(this.diagram.selectedItems);this.diagram.startGroupAction();for(var o=[],a=function(t){Fn(n[parseInt(t.toString(),10)]);s=n[parseInt(t.toString(),10)].id;var i=l.diagram.layers.indexOf(l.getObjectLayer(s)),a=Fn(l.diagram.nameTable),h=l.diagram.layers[parseInt(i.toString(),10)].zIndexTable,c=l.diagram.nameTable[""+s],d=[],p=l.diagram.spatialSearch.findObjects(c.wrapper.bounds);p.length>2&&(p=l.sortByZIndex(p));for(var u=function(t){if(c.id!==t.id){var e=l.getObjectLayer(t.id).zIndex,n=l.diagram.selectedItems.selectedObjects.some(function(e){return e.id===t.id});(1===l.diagram.selectedItems.selectedObjects.length||!n)&&i===e&&Number(l.diagram.nameTable[""+s].zIndex)>Number(t.zIndex)&&""===t.parentId&&c.wrapper.bounds.intersects(t.wrapper.bounds)&&(c.shape.type===t.shape.type||"Native"!==c.shape.type&&"HTML"!==c.shape.type&&"Native"!==t.shape.type&&"HTML"!==t.shape.type)&&d.push(t)}},g=0,m=p;g<m.length;g++){u(f=m[g])}for(var f=d.length-1;f>=0;f--){(y=l.diagram.nameTable[d[parseInt(f.toString(),10)].id]).parentId===s&&d.splice(f,1)}if(d.length>0){var y;if((y=l.diagram.nameTable[d[d.length-1].id]).parentId){var v=wf(y,l.diagram,""),b=l.diagram.nameTable[""+v];s!==b.id&&(d[d.length-1]=b)}var C={};for(f=0;f<l.diagram.nodes.length;f++){var I=l.diagram.nodes[parseInt(f.toString(),10)];C[I.id]=I.zIndex}for(var M=0;M<l.diagram.connectors.length;M++){var S=l.diagram.connectors[parseInt(M.toString(),10)];C[S.id]=S.zIndex}var x=d[d.length-1].zIndex,w=(h[parseInt(x.toString(),10)],{});d.forEach(function(t){w[t.id]=t.zIndex});var D=[];if(c){var E=c.zIndex;Object.keys(w).length>0&&(Object.values(w).forEach(function(t){t<=E&&D.push(t)}),0!==D.length&&l.updateZIndexBySendBackward(c,D,i))}var T=[];if(Object.keys(l.changedNodeZIndexes).forEach(function(t){if((a[""+t]?a[""+t].zIndex:null)!==e.changedNodeZIndexes[""+t]){var i=Fn(a[""+t]);T.push(i)}}),l.updateLayerZindexTable(i),T.forEach(function(t){if(!r.nodes.some(function(e){return e.id===t.id})){var e=Fn(t);r.nodes.push(e)}}),"SVG"===l.diagram.mode){var A=d[d.length-1].id,N=d[d.length-1];N&&"HTML"!==N.shape.type&&"Native"!==N.shape.type&&l.moveSvgNode(s,A);var L=l.diagram.nameTable[""+A];L.children&&L.children.length>0?l.updateNativeNodeIndex(s):l.updateNativeNodeIndex(s,A)}else l.diagram.refreshCanvasLayers();Object.keys(l.changedNodeZIndexes).forEach(function(t){if((a[""+t]?a[""+t].zIndex:null)!==e.changedNodeZIndexes[""+t]){var i=Fn(e.diagram.nameTable[""+t]);o.push(i)}})}},l=this,h=0;h<n.length;h++)a(h);var c=Fn(this.diagram.selectedItems);o.forEach(function(t){if(!c.nodes.some(function(e){return e.id===t.id})){var e=Fn(t);c.nodes.push(e)}});var d={type:"SendBackward",category:"Internal",undoObject:r,redoObject:c};!(this.diagram.diagramActions&Is.UndoRedo)&&o.length>0&&this.addHistoryEntry(d),this.diagram.endGroupAction(),o.length>0&&this.refreshOverviewLayer()}this.diagram.protectPropertyChange(!1)},t.prototype.updateZIndexBySendBackward=function(t,e,i){var n=Fn(t),s=Math.max.apply(Math,e),r=this.diagram.layers[parseInt(i.toString(),10)].objects,o=this.diagram.nodes.filter(function(t){return-1!==r.indexOf(t.id)});this.diagram.connectors.filter(function(t){return-1!==r.indexOf(t.id)}).forEach(function(t){o.push(t)});var a,l,h=o.filter(function(e){return e.zIndex===s&&e.id!==t.id});t.children?(a=this.findMaxZIndex(t)-t.zIndex,t.zIndex=s-1-a,this.updateGroupZindex(t,"SendBackward",t.zIndex),l=this.findLowestChildZIndex(t)):(t.zIndex=s-1,l=t.zIndex),this.triggerOrderCommand(n,t,t);for(var c=o.slice().sort(function(t,e){return e.zIndex-t.zIndex}),d=!0,p=0;p<c.length;p++){var u=c[parseInt(p.toString(),10)];if(t.children&&(d=this.notChildOfSelectedNode(u,t)),u.zIndex<s&&u!==t&&u.parentId!==t.id&&d&&h&&h.length>0&&u.parentId!==h[0].id){var g=Fn(u);if(!(u.zIndex>=l-1))break;u.zIndex=l-1,l--,this.triggerOrderCommand(g,u,u)}var m=u.zIndex;this.changedNodeZIndexes.hasOwnProperty(u.id),this.changedNodeZIndexes[""+u.id]=m}},t.prototype.findLowestChildZIndex=function(t){for(var e=t.zIndex,i=0;i<t.children.length;i++){var n=this.diagram.nameTable[t.children[parseInt(i.toString(),10)]];n.zIndex<e&&(e=n.zIndex)}return e},t.prototype.updateNativeNodeIndex=function(t,e){var i=this.diagram.selectedItems.nodes[0]||this.diagram.getObject(e);if(!i||"HTML"!==i.shape.type&&"Native"!==i.shape.type){if(e){var n=this.diagram.nameTable[""+e];if(n&&("HTML"===n.shape.type||"Native"===n.shape.type)){a=Yy(e+"_groupElement",this.diagram.element.id);(o=Yy(t+"_groupElement",this.diagram.element.id))&&a&&a.parentNode.insertBefore(o,a)}}}else for(var s=0;s<this.diagram.views.length;s++){var r="HTML"===i.shape.type?"_html_element":"_content_groupElement",o=Yy(t+r,this.diagram.views[parseInt(s.toString(),10)]),a=e?Yy(e+r,this.diagram.views[parseInt(s.toString(),10)]):o.parentElement.firstChild;o&&a&&o.parentNode.id===a.parentNode.id&&a.parentNode.insertBefore(o,a)}},t.prototype.initSelectorWrapper=function(){var t=this.diagram.selectedItems;t.init(this.diagram),1===t.nodes.length&&0===t.connectors.length&&(t.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.rotateAngle=t.nodes[0].rotateAngle,t.wrapper.pivot=t.nodes[0].pivot)},t.prototype.doRubberBandSelection=function(t){this.clearSelectionRectangle();var e=[],i=[];e=this.diagram.getNodesConnectors(e),i="CompleteIntersect"===this.diagram.selectedItems.rubberBandSelectionMode?function(t,e){for(var i=[],n=0;n<e.length;n++){var s=e[parseInt(n.toString(),10)];t.containsRect(s.wrapper.bounds)&&i.push(s)}return i}(t,e):this.diagram.spatialSearch.findObjects(t),i.length&&this.selectObjects(i,!0)},t.prototype.clearSelectionRectangle=function(){var t=Qy(this.diagram.element.id).getElementById(this.diagram.element.id+"_diagramAdorner_selected_region");t&&lt(t)},t.prototype.dragConnectorEnds=function(t,e,i,n,s,r){var o,a,l,h=!1;return e instanceof By?o=e.connectors[0]:e instanceof Rg&&this.diagram.currentDrawingObject&&(this.clearSelection(),o=this.diagram.currentDrawingObject),"BezierSourceThumb"!==t&&"BezierTargetThumb"!==t||(h=!0,o.isBezierEditing=!0),"ConnectorSourceEnd"===t||"BezierSourceThumb"===t?(a=i.x-(h?n.bezierPoint1.x:o.sourcePoint.x),l=i.y-(h?n.bezierPoint1.y:o.sourcePoint.y),this.dragSourceEnd(o,a,l,null,i,t,void 0,s,r,void 0,n)):(a=i.x-(h?n.bezierPoint2.x:o.targetPoint.x),l=i.y-(h?n.bezierPoint2.y:o.targetPoint.y),this.dragTargetEnd(o,a,l,null,i,t,void 0,n))},t.prototype.getSelectedObject=function(){var t=this.diagram.selectedItems;return t.annotation?[t.annotation]:t.nodes.concat(t.connectors)},t.prototype.enableCloneObject=function(t){},t.prototype.getBlazorOldValues=function(t,e){},t.prototype.clearObjectSelection=function(t){var e=this.diagram.selectedItems,i=[];-1===(i=i.concat(e.nodes,e.connectors)).indexOf(t)&&(this.clearSelection(i.length>0),this.selectObjects([t],!0))},t.prototype.clearSelection=function(t,e){return $v(this,void 0,void 0,function(){var e,i,n,s;return tb(this,function(r){return e=this.diagram.allowServerDataBinding,this.diagram.enableServerDataBinding(!1),_u(this.diagram)&&(i=this.diagram.selectedItems,n=this.getSelectedObject(),this.diagram.currentSymbol&&(this.diagram.previousSelectedObject=n),s={oldValue:n,newValue:[],cause:this.diagram.diagramActions,state:"Changing",type:"Removal",cancel:!1},t&&(x()||this.diagram.triggerEvent(Ds.selectionChange,s)),s.cancel||(i.offsetX=0,i.offsetY=0,i.width=0,i.height=0,i.rotateAngle=0,i.nodes=[],i.connectors=[],i.wrapper=null,i.annotation=void 0,i.selectedObjects=[],this.diagram.clearSelectorLayer(),t&&(s={oldValue:n,newValue:[],cause:this.diagram.diagramActions,state:"Changed",type:"Removal",cancel:!1},x()||this.diagram.triggerEvent(Ds.selectionChange,s))),this.diagram.enableServerDataBinding(e)),[2]})})},t.prototype.clearSelectedItems=function(){var t=this.diagram.selectedItems.nodes?this.diagram.selectedItems.nodes.length:0,e=this.diagram.selectedItems.connectors?this.diagram.selectedItems.connectors.length:0;this.clearSelection(t+e>0)},t.prototype.removeStackHighlighter=function(){var t=Qy(this.diagram.element.id),e=t.getElementById(t.id+"_stack_highlighter");e&&e.parentNode.removeChild(e)},t.prototype.renderStackHighlighter=function(t,e){var i,n,s,r=this.diagram.selectedItems.nodes[0];if(!e){var o=this.diagram.findObjectsUnderMouse(t.position);if((e=this.diagram.findObjectUnderMouse(o,"Drag",!0))&&!(e.isLane||e.isPhase||e.isHeader))for(var a=0;a<o.length;a++){var l=this.diagram.nameTable[o[parseInt(a.toString(),10)].id];(!l.isLane||l.isPhase||l.isHeader)&&(e=l,this.diagram.parentObject=e)}}if(r&&e&&e.isLane&&r.shape&&!r.shape.isPhase&&(n=this.diagram.nameTable[e.parentId],this.diagram.currentSymbol&&"SwimLane"===n.shape.type&&(i=!0),r&&!r.parentId&&"SwimLane"!==r.shape.type||r&&r.parentId&&this.diagram.nameTable[r.parentId]&&this.diagram.nameTable[r.parentId].isLane&&r.parentId!==e.parentId&&r.parentId!==e.id)){s=this.diagram.selectedItems;var h=bu(this.diagram,s,e.id,!0);this.diagram.renderSelector(!1,!0,h),s.wrapper.children[0]=s.nodes[0].wrapper}if(r&&e&&e.parentId&&r.shape&&r.shape.isPhase&&"SwimLane"===this.diagram.nameTable[e.parentId].shape.type){h=this.diagram.nameTable[e.parentId].wrapper;this.diagram.renderSelector(!1,!0,h)}if(i&&this.diagram.currentSymbol.shape.isLane||r&&e&&r.parentId&&e.parentId&&!r.isPhase&&r.parentId===e.parentId&&r.id!==e.id&&n&&n.container&&("Stack"===n.container.type||"Grid"===n.container.type)){h=void 0;var c="Vertical"===n.container.orientation,d="Stack"===n.container?c:!c;"Grid"===n.container.type&&e.isLane&&("Horizontal"===n.shape.orientation&&e.rowIndex!==r.rowIndex||"Vertical"===n.shape.orientation&&e.columnIndex!==r.columnIndex||this.diagram.currentSymbol&&this.diagram.currentSymbol.shape.orientation===n.container.orientation)&&(s=this.diagram.selectedItems,(r.isLane&&Nu(r,this.diagram)||!r.isLane)&&(h=bu(this.diagram,s,e.id,i)));var p="Stack"===n.container.type?e.wrapper:h;p&&Uu(p,d,t.position,this.diagram,!1,!0)}},t.prototype.insertBlazorConnector=function(t){if(t instanceof By)for(var e=0;e<t.connectors.length;e++)this.diagram.insertBlazorConnector(t.connectors[parseInt(e.toString(),10)]);else this.diagram.insertBlazorConnector(t)},t.prototype.drag=function(t,e,i){var n;if(!this.diagram.rotateUsingButton&&t.shape&&"SwimLane"!==t.shape.type&&(this.diagram.eventHandler.currentAction="Drag"),dp(t)&&this.checkBoundaryConstraints(e,i,t.wrapper.bounds)&&zp(this.diagram))if(t instanceof Ny){var s={offsetX:t.offsetX,offsetY:t.offsetY};if(t.offsetX+=e,t.offsetY+=i,t.children&&!t.container){zu(this.diagram,t,!0)||(this.diagram.diagramActions=this.diagram.diagramActions|Is.isGroupDragging);for(var r=this.getAllDescendants(t,[]),o=0;o<r.length;o++)n=this.diagram.nameTable[r[parseInt(o.toString(),10)].id],this.drag(n,e,i);this.updateInnerParentProperties(t),this.diagram.diagramActions=this.diagram.diagramActions&~Is.isGroupDragging}if(zu(this.diagram,t,!0)?Pu(this.diagram,t):(t&&t.shape&&"UmlClassifier"===t.shape.type&&(t.wrapper.measureChildren=!0),this.diagram.nodePropertyChange(t,s,{offsetX:t.offsetX,offsetY:t.offsetY},void 0,void 0,!1),t.wrapper.measureChildren=!1),"SwimLane"===t.shape.type&&!this.diagram.currentSymbol){var a=t.wrapper.children[0];ru(Jp(this.diagram,a),this.diagram)}}else{var l=t,h=Fn(t),c=(s={sourcePoint:h.sourcePoint,targetPoint:h.targetPoint},"Bezier"===l.type),d=!1;l.sourceWrapper?d=!0:this.dragSourceEnd(l,e,i,!0,null,"",c),l.targetWrapper?d=!0:this.dragTargetEnd(l,e,i,!0,null,"",c);var p=!1;if(t instanceof Rg&&(p=!0),!d||p){this.dragControlPoint(l,e,i,!0);var u={sourcePoint:l.sourcePoint,targetPoint:l.targetPoint};this.diagram.connectorPropertyChange(l,s,u)}}for(var g=0,m=this.diagram.views;g<m.length;g++){var f=m[g],y=this.diagram.views[f];y instanceof cm&&this.diagram.refreshCanvasDiagramLayer(y)}},t.prototype.connectorSegmentChange=function(t,e,i){var n,s,r=!0;if(!1===e.equals(e,t.wrapper.bounds)&&t.outEdges.length>0)for(var o=0;o<t.outEdges.length;o++){var a=this.diagram.nameTable[t.outEdges[parseInt(o.toString(),10)]];if(r=""!==a.targetID?!this.isSelected(this.diagram.nameTable[a.targetID]):!this.isSelected(this.diagram.nameTable[a.id]),"Orthogonal"===a.type&&a.segments&&a.segments.length>1)if(i){var l=a.segments[0],h=a.segments[1],c=Nd(vd(t.wrapper,t.wrapper.corners,t.wrapper.bounds),l.direction),d=Hd({corners:void 0,point:c=Od(a,a.sourceWrapper,c,{x:a.sourceWrapper.offsetX,y:a.sourceWrapper.offsetY},!1),margin:void 0,direction:l.direction},{corners:void 0,point:h.points[1],margin:void 0,direction:void 0});l.length=fn.distancePoints(d[0],d[1]),h.direction&&h.length&&(h.length=fn.distancePoints(d[1],d[2]))}else if(r){switch(a.segments[0].direction){case"Bottom":n=t.wrapper.bounds.bottomCenter.x-e.bottomCenter.x,s=t.wrapper.bounds.bottomCenter.y-e.bottomCenter.y;break;case"Top":n=t.wrapper.bounds.topCenter.x-e.topCenter.x,s=t.wrapper.bounds.topCenter.y-e.topCenter.y;break;case"Left":n=t.wrapper.bounds.middleLeft.x-e.middleLeft.x,s=t.wrapper.bounds.middleLeft.y-e.middleLeft.y;break;case"Right":n=t.wrapper.bounds.middleRight.x-e.middleRight.x,s=t.wrapper.bounds.middleRight.y-e.middleRight.y}this.dragSourceEnd(a,n,s,!0,null,"ConnectorSourceEnd",void 0,void 0,void 0,!(t.parentId&&this.diagram.diagramActions&Is.isGroupDragging))}}},t.prototype.updateEndPoint=function(t,e){t.sourcePoint,t.targetPoint,t.sourceID&&t.sourceID,t.targetID&&t.targetID,t.sourcePortID&&t.sourcePortID,t.targetPortID&&t.targetPortID,t.segments&&t.segments;var i={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};t.sourceID&&(i.sourceID=t.sourceID),t.targetID&&(i.targetID=t.targetID),t.sourcePortID&&(i.sourcePortID=t.sourcePortID),t.targetPortID&&(i.targetPortID=t.targetPortID),t.segments&&(i.segments=t.segments),this.diagram.connectorPropertyChange(t,e||{},i),this.diagram.updateSelector()},t.prototype.dragSourceEnd=function(t,e,i,n,s,r,o,a,l,h,c){var d=this.diagram.nameTable[t.id],p={},u=this.checkBoundaryConstraints(e,i,d.wrapper.bounds);if(gp(d)&&u&&"BezierSourceThumb"!==r&&zp(this.diagram)){if(p=Fn(p={sourcePoint:d.sourcePoint}),this.diagram.constraints&ms.RestrictNegativeAxisDragDrop){var g=d.sourcePoint.x+e,m=d.sourcePoint.y+i;d.sourcePoint.x=g<0?0:g,d.sourcePoint.y=m<0?0:m}else d.sourcePoint.x+=e,d.sourcePoint.y+=i;"ConnectorSourceEnd"===r&&"Orthogonal"===d.type&&this.changeSegmentLength(d,a,l,h),"Bpmn"===d.shape.type&&"Default"===d.shape.sequence&&"Sequence"===d.shape.flow&&this.updatePathElementOffset(d)}if("Bezier"===d.type)if(p={sourcePoint:d.sourcePoint},c)this.translateBezierPoints(t,""===r?"ConnectorSourceEnd":r,e,i,c,s,!o);else for(var f=0;f<t.segments.length;f++)this.translateBezierPoints(t,""===r?"ConnectorSourceEnd":r,e,i,t.segments[parseInt(f.toString(),10)],s,!o);return n||this.updateEndPoint(d,p),this.diagram.realActions&Ss.AnimationClick||this.diagram.refreshCanvasLayers(),u},t.prototype.updatePathElementOffset=function(t){t.wrapper.children.splice(3,1);var e=new Xs,i=t.intermediatePoints;e=ff(i,t),t.wrapper.children.splice(3,0,e)},t.prototype.changeSegmentLength=function(t,e,i,n){var s=!e||this.canConnect(t,e);if(t.segments&&null!==t.segments[0].direction&&(!e&&""===t.sourceID||n)&&s){var r=t.segments[0],o=t.segments[1],a=this.diagram.nameTable[t.sourceID],l=void 0;if(r.points[0]=t.sourcePoint,"Top"===r.direction||"Bottom"===r.direction?(r.points[r.points.length-1].x=t.sourcePoint.x,o.points[0].y=r.points[r.points.length-1].y):(r.points[r.points.length-1].y=t.sourcePoint.y,o.points[0].x=r.points[r.points.length-1].x),r.direction&&(r.length||0===r.length)&&(r.length=fn.distancePoints(r.points[0],r.points[r.points.length-1])),o.direction&&(o.length||0===o.length)&&(o.length=fn.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]),o.direction=fn.direction(r.points[r.points.length-1],o.points[o.points.length-1])),""!==t.sourcePortID&&r.length<10)if(t.segments.length>2){var h=t.segments[2],c=fn.direction(h.points[0],h.points[1]);r.direction===Xd(c)?("Right"===r.direction?h.points[0].x=r.points[r.points.length-1].x=a.wrapper.corners.middleRight.x+20:"Left"===r.direction?h.points[0].x=r.points[r.points.length-1].x=a.wrapper.corners.middleLeft.x-20:"Top"===r.direction?h.points[0].y=r.points[r.points.length-1].y=a.wrapper.corners.topCenter.y-20:h.points[0].y=r.points[r.points.length-1].y=a.wrapper.corners.bottomCenter.y+20,h.direction&&h.length&&(h.length=fn.distancePoints(h.points[0],h.points[h.points.length-1])),r.length=fn.distancePoints(r.points[0],r.points[r.points.length-1])):r.direction===c&&h.direction&&h.length?("Top"===r.direction||"Bottom"===r.direction?(h.points[0]=r.points[0],h.points[h.points.length-1].x=h.points[0].x):(h.points[0]=r.points[0],h.points[h.points.length-1].y=h.points[0].y),h.length=fn.distancePoints(h.points[0],h.points[h.points.length-1]),t.segments.splice(0,2)):r.length=20}else r.length=20;else if(r.length<1)if(""!==t.sourceID){if("Right"===o.direction?(l=a.wrapper.corners.middleRight,o.points[o.points.length-1].y=l.y):"Left"===o.direction?(l=a.wrapper.corners.middleLeft,o.points[o.points.length-1].y=l.y):"Top"===o.direction?(l=a.wrapper.corners.topCenter,o.points[o.points.length-1].x=l.x):(l=a.wrapper.corners.bottomCenter,o.points[o.points.length-1].x=l.x),o.length=fn.distancePoints(l,o.points[o.points.length-1]),t.segments.length>2)(h=t.segments[2]).direction&&h.length&&(h.length=fn.distancePoints(o.points[o.points.length-1],h.points[h.points.length-1]));t.segments.splice(0,1)}else t.segments.splice(0,1)}else e&&!i&&t.sourceID!==e.id&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof Ny&&s&&this.changeSourceEndToNode(t,e),e&&i&&t.sourcePortID!==i&&t.segments&&null!==t.segments[0].direction&&e&&e instanceof Ny&&s&&this.changeSourceEndToPort(t,e,i)},t.prototype.canConnect=function(t,e){return!(!bp(e)||!Ip(e))},t.prototype.changeSourceEndToPort=function(t,e,i){var n=this.diagram.getWrapper(e.wrapper,i),s={x:n.offsetX,y:n.offsetY},r=Zd(s,Vn(e.wrapper),e.wrapper.bounds),o=t.segments[0],a=t.segments[1];if(o.direction!==r){var l=[],h={};if(o.direction===Xd(r)){h={};var c=void 0;"Top"===r||"Bottom"===r?(c="Top"===r?{type:"Orthogonal",isTerminal:!0,direction:r,length:Math.abs(o.points[0].y-s.y)}:{type:"Orthogonal",isTerminal:!0,direction:r,length:Math.abs(s.y-o.points[0].y)},h=o.points[0].x>s.x?{type:"Orthogonal",isTerminal:!0,direction:"Right",length:o.points[0].x-s.x}:{type:"Orthogonal",isTerminal:!0,direction:"Left",length:s.x-o.points[0].x}):(c="Right"===r?{type:"Orthogonal",isTerminal:!0,direction:r,length:Math.abs(o.points[0].x-s.x)}:{type:"Orthogonal",isTerminal:!0,direction:r,length:Math.abs(s.x-o.points[0].x)},h=o.points[0].y>s.y?{type:"Orthogonal",direction:"Top",isTerminal:!0,length:o.points[0].y-s.y}:{type:"Orthogonal",direction:"Bottom",isTerminal:!0,length:s.y-o.points[0].y}),l.push(new Ng(t,"segments",c,!0)),l.push(new Ng(t,"segments",h,!0))}else h={type:"Orthogonal",direction:r,length:20,isTerminal:!0},l.push(new Ng(t,"segments",h,!0));o.direction!==Xd(r)&&("Top"===r||"Bottom"===r?(o.points[0].x=s.x,o.points[0].y=o.points[o.points.length-1].y="Top"===r?s.y-20:s.y+20):(o.points[0].y=s.y,o.points[0].x=o.points[o.points.length-1].x="Right"===r?s.x+20:s.x-20),o.length=fn.distancePoints(o.points[0],o.points[o.points.length-1]),a.length=fn.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1])),t.segments=l.concat(t.segments)}else o.points[0]=s,"Top"===r||"Bottom"===r?o.points[o.points.length-1].x=s.x:o.points[o.points.length-1].y=s.y,o.length=fn.distancePoints(o.points[0],o.points[o.points.length-1]),a.length=fn.distancePoints(o.points[o.points.length-1],a.points[a.points.length-1])},t.prototype.removeTerminalSegment=function(t,e){for(var i=0;i<t.segments.length-2;i++){var n=t.segments[0];n.isTerminal&&(e?n.isTerminal=!1:(t.segments.splice(i,1),i--))}},t.prototype.changeSourceEndToNode=function(t,e){this.removeTerminalSegment(t);var i,n,s=e.wrapper.children[0].corners,r=t.segments[0],o=t.segments[1],a=[];if("Right"===r.direction||"Left"===r.direction)if(i="Left"===r.direction?s.middleLeft:s.middleRight,r.length>s.width||"Left"===r.direction&&i.x>=r.points[0].x||"Right"===r.direction&&i.x<=r.points[0].x)r.points[0].y=r.points[r.points.length-1].y=i.y,r.points[0].x=i.x,r.length=fn.distancePoints(r.points[0],r.points[r.points.length-1]),o.length=fn.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]);else{var l=void 0;n="Bottom"===(l=o.direction?o.direction:fn.direction(o.points[0],o.points[o.points.length-1]))?s.bottomCenter:s.topCenter,o.length&&o.direction&&(o.length="Top"===l?r.points[r.points.length-1].y-(n.y+20):n.y+20-r.points[r.points.length-1].y),r.length=r.points[r.points.length-1].x-n.x,r.direction=r.length>0?"Right":"Left";var h={type:"Orthogonal",direction:l,length:20};a.push(new Ng(t,"segments",h,!0)),t.segments=a.concat(t.segments)}else if(i="Bottom"===r.direction?s.bottomCenter:s.topCenter,r.length>s.height||"Top"===r.direction&&i.y>=r.points[0].y||"Bottom"===r.direction&&i.y<=r.points[0].y)r.points[0].x=r.points[r.points.length-1].x=i.x,r.points[0].y=i.y,r.length=fn.distancePoints(r.points[0],r.points[r.points.length-1]),o.length=fn.distancePoints(r.points[r.points.length-1],o.points[o.points.length-1]);else{n="Left"===o.direction?s.middleLeft:s.middleRight;l=void 0;l=o.direction?o.direction:fn.direction(o.points[0],o.points[o.points.length-1]),o.length&&o.direction&&(o.length="Left"===l?r.points[r.points.length-1].x-(n.x+20):n.x+20-r.points[r.points.length-1].x),r.length=r.points[r.points.length-1].y-n.y,r.direction=r.length>0?"Bottom":"Top";h={type:"Orthogonal",direction:l,length:20};a.push(new Ng(t,"segments",h,!0)),t.segments=a.concat(t.segments)}},t.prototype.translateBezierPoints=function(t,e,i,n,s,r,o){var a=t.segments.indexOf(s),l=t.segments[parseInt(a.toString(),10)],h=a>0?t.segments[a-1]:null,c=null!==h?h.point:t.sourcePoint,d=a===t.segments.length-1?t.targetPoint:l.point;if(l)if("BezierSourceThumb"===e&&(l.vector1.angle||l.vector1.distance)){var p=l.vector1.distance,u=l.vector1.angle;l.vector1={distance:t.distance(c,r),angle:fn.findAngle(c,r)};var g=l.vector1.distance-p,m=l.vector1.angle-u;this.translateSubsequentSegment(t,s,!0,g,m)}else if("BezierTargetThumb"===e&&(l.vector2.angle||l.vector2.distance)){p=l.vector2.distance,u=l.vector2.angle;l.vector2={distance:t.distance(d,r),angle:fn.findAngle(d,r)};g=l.vector2.distance-p,m=l.vector2.angle-u;this.translateSubsequentSegment(t,s,!1,g,m)}else("ConnectorSourceEnd"===e&&!t.sourceID||"ConnectorTargetEnd"===e&&!t.targetID)&&o&&Og(l.vector1)&&Og(l.vector2)?(fn.isEmptyPoint(l.point1)&&(l.bezierPoint1=kg(t.sourcePoint,t.targetPoint)),fn.isEmptyPoint(l.point2)&&(l.bezierPoint2=kg(t.targetPoint,t.sourcePoint))):"BezierSourceThumb"===e||"ConnectorSourceEnd"===e&&!o&&Og(l.vector1)?(l.bezierPoint1.x+=i,l.bezierPoint1.y+=n,fn.isEmptyPoint(l.point1)&&!o||(l.point1={x:l.bezierPoint1.x,y:l.bezierPoint1.y}),0===i&&0===n||!0!==s.isInternalSegment||(s.isInternalSegment=!1)):("BezierTargetThumb"===e||"ConnectorTargetEnd"===e&&!o&&Og(l.vector2))&&(l.bezierPoint2.x+=i,l.bezierPoint2.y+=n,fn.isEmptyPoint(l.point2)&&!o||(l.point2={x:l.bezierPoint2.x,y:l.bezierPoint2.y}),0===i&&0===n||!0!==s.isInternalSegment||(s.isInternalSegment=!1))},t.prototype.translateSubsequentSegment=function(t,e,i,n,s){var r=t.segments.indexOf(e);t.segments[parseInt(r.toString(),10)];t.bezierSettings.smoothness&Fs.SymmetricAngle||(s=null),t.bezierSettings.smoothness&Fs.SymmetricDistance||(n=null),null==n&&null==s||(i?0!==r&&this.updatePreviousBezierSegment(t,r,n,s):r!==t.segments.length-1&&this.updateNextBezierSegment(t,r,n,s))},t.prototype.updatePreviousBezierSegment=function(t,e,i,n){var s=t.segments[e-1],r=s.vector2.distance+i,o=(s.vector2.angle+n)%360;o<0&&(o+=360),s.vector2={distance:r,angle:o}},t.prototype.updateNextBezierSegment=function(t,e,i,n){var s=t.segments[e+1],r=s.vector1.distance+i,o=(s.vector1.angle+n)%360;o<0&&(o+=360),s.vector1={distance:r,angle:o}},t.prototype.dragTargetEnd=function(t,e,i,n,s,r,o,a){var l,h=this.diagram.nameTable[t.id],c=this.checkBoundaryConstraints(e,i,h.wrapper.bounds);if(mp(h)&&"BezierTargetThumb"!==r&&c&&zp(this.diagram)){if(l=Fn(l={targetPoint:h.targetPoint}),this.diagram.constraints&ms.RestrictNegativeAxisDragDrop){var d=h.targetPoint.x+e,p=h.targetPoint.y+i;h.targetPoint.x=d<0?0:d,h.targetPoint.y=p<0?0:p}else h.targetPoint.x+=e,h.targetPoint.y+=i;if("ConnectorTargetEnd"===r&&"Orthogonal"===h.type&&h.segments&&h.segments.length>0){var u=h.segments[h.segments.length-2];u&&2===h.segments[h.segments.length-1].points.length&&("Left"===u.direction||"Right"===u.direction?u.points[u.points.length-1].x=h.targetPoint.x:u.points[u.points.length-1].y=h.targetPoint.y,u.length=fn.distancePoints(u.points[0],u.points[u.points.length-1]),u.direction=fn.direction(u.points[0],u.points[u.points.length-1]))}"Bpmn"===h.shape.type&&"Default"===h.shape.sequence&&"Sequence"===h.shape.flow&&this.updatePathElementOffset(h)}if("Bezier"===h.type)if(l={targetPoint:h.targetPoint},a)this.translateBezierPoints(t,""===r?"ConnectorTargetEnd":r,e,i,a,s,!o);else for(var g=0;g<t.segments.length;g++)this.translateBezierPoints(t,""===r?"ConnectorTargetEnd":r,e,i,t.segments[parseInt(g.toString(),10)],s,!o);return n||this.updateEndPoint(h,l),this.diagram.realActions&Ss.AnimationClick||this.diagram.refreshCanvasLayers(),c},t.prototype.dragControlPoint=function(t,e,i,n,s){var r=this.diagram.nameTable[t.id];if(("Straight"===r.type||"Bezier"===r.type)&&r.segments.length>0){if(void 0!==s&&r.segments[parseInt(s.toString(),10)])if("Bezier"===r.type){var o=r.segments[parseInt(s.toString(),10)],a=o.isInternalSegment;a&&null!==r.bezierSettings&&"FreeForm"!==r.bezierSettings.segmentEditOrientation?("Horizontal"===o.orientation?o.point.x+=e:o.point.y+=i,this.updateDirectionalBezierCurve(r)):(o.point.x+=e,o.point.y+=i),a&&(r.isBezierEditing=!0)}else r.segments[parseInt(s.toString(),10)].point.x+=e,r.segments[parseInt(s.toString(),10)].point.y+=i;else for(var l=0;l<r.segments.length-1;l++)r.segments[parseInt(l.toString(),10)].point.x+=e,r.segments[parseInt(l.toString(),10)].point.y+=i;n||this.updateEndPoint(r)}return!0},t.prototype.updateDirectionalBezierCurve=function(t){var e=[];e.push(t.sourcePoint);for(var i=0;i<t.segments.length-1;i++){var n=t.segments[parseInt(i.toString(),10)];"Horizontal"===n.orientation?e.push({x:n.point.x,y:e[e.length-1].y}):e.push({x:e[e.length-1].x,y:n.point.y}),i===t.segments.length-2&&("Horizontal"===n.orientation?e.push({x:n.point.x,y:t.targetPoint.y}):e.push({x:t.targetPoint.x,y:n.point.y}))}e.push(t.targetPoint);var s=e[0],r=e[e.length-1];if(t.segments.length>1){var o=e[1],a=e[2],l={x:.5*(o.x+a.x),y:.5*(o.y+a.y)},h=t.segments[0];h.vector1.angle=Ad(s,o),h.vector1.distance=.5*fn.findLength(s,o),h.vector2.angle=Ad(l,o),h.vector2.distance=.5*fn.findLength(l,o),h.point=l;var c=t.segments[1];if(c.vector1.angle=Ad(l,a),c.vector1.distance=.5*fn.findLength(l,a),t.segments.length>2){var d=e[3],p={x:.5*(a.x+d.x),y:.5*(a.y+d.y)};c.vector2.angle=Ad(p,a),c.vector2.distance=.5*fn.findLength(p,a),c.point=p;var u=t.segments[2];if(u.vector1.angle=Ad(p,d),u.vector1.distance=.5*fn.findLength(p,d),t.segments.length>3){var g=e[4],m={x:.5*(d.x+g.x),y:.5*(d.y+g.y)};u.vector2.angle=Ad(m,d),u.vector2.distance=.5*fn.findLength(m,d),u.point=m;var f=t.segments[3];f.vector1.angle=Ad(m,g),f.vector1.distance=.5*fn.findLength(m,g),f.vector2.angle=Ad(r,g),f.vector2.distance=.5*fn.findLength(r,g)}else u.vector2.angle=Ad(r,d),u.vector2.distance=.5*fn.findLength(r,d)}else c.vector2.angle=Ad(r,a),c.vector2.distance=.5*fn.findLength(r,a)}},t.prototype.rotateObjects=function(t,e,i,n,s){n=n||{};var r,o=Nn();On(o,i,n.x,n.y);for(var a=0,l=e;a<l.length;a++){var h=l[a];if(h instanceof Ny){if(yp(h)&&zp(this.diagram)){if(!1!==s||t!==h){r={offsetX:h.wrapper.offsetX,offsetY:h.wrapper.offsetY,rotateAngle:h.rotateAngle},h.rotateAngle=(h.rotateAngle+i+360)%360;var c=Ln(o,{x:h.wrapper.offsetX,y:h.wrapper.offsetY});h.offsetX=c.x,h.offsetY=c.y,this.diagram.nodePropertyChange(h,r,{offsetX:h.offsetX,offsetY:h.offsetY,rotateAngle:h.rotateAngle})}var d=this.diagram.nameTable[h.parentId];if(h.processId){var p=this.diagram.nameTable[h.processId],u=this.diagram.bpmnModule.getChildrenBound(p,h.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(u,h,this.diagram)}else if(d&&d.shape instanceof Py){u=Zf(d,h.id,this.diagram);qf(0,h,this.diagram,!1)}h.children&&h.children.length&&!h.container&&this.getChildren(h,e)}}else this.rotatePoints(h,i,n||{x:h.wrapper.offsetX,y:h.wrapper.offsetY});this.diagram.updateDiagramObject(h)}this.diagram.refreshCanvasLayers(),this.diagram.updateSelector()},t.prototype.snapConnectorEnd=function(t){return this.diagram.snapSettings.constraints&os.SnapToLines&&this.snappingModule&&this.diagram.snappingModule.snapConnectorEnd(t),t},t.prototype.snapAngle=function(t){return this.diagram.snapSettings.constraints&os.SnapToLines&&this.snappingModule?this.snappingModule.snapAngle(this.diagram,t):0},t.prototype.rotatePoints=function(t,e,i){if(!t.sourceWrapper||!t.targetWrapper){var n=Nn();On(n,e,i.x,i.y),t.sourcePoint=Ln(n,t.sourcePoint),t.targetPoint=Ln(n,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.updatePathElementOffset(t);var s={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};if(this.diagram.connectorPropertyChange(t,{},s),t.segments&&t.segments.length>0){this.diagram.protectPropertyChange(!0);var r=t;r.segments=[],this.diagram.connectorPropertyChange(r,{},{segments:r.segments}),this.diagram.protectPropertyChange(!1)}}},t.prototype.updateInnerParentProperties=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);for(var i=this.getAllDescendants(t,[],!1,!0),n=0;n<i.length;n++){var s=this.diagram.nameTable[i[parseInt(n.toString(),10)].id];s.offsetX=s.wrapper.offsetX,s.offsetY=s.wrapper.offsetY,s.width=s.wrapper.width,s.height=s.wrapper.height}this.diagram.protectPropertyChange(e)},t.prototype.scale=function(t,e,i,n,s,r){var o=this.diagram.nameTable[t.id],a=o,l=o.wrapper;s||(s=t);var h=s.wrapper,c=cf(h.offsetX-h.actualSize.width*h.pivot.x,h.offsetY-h.actualSize.height*h.pivot.y,h.actualSize.width,h.actualSize.height,h.rotateAngle,h.offsetX,h.offsetY,n);if(void 0!==l.actualSize.width&&void 0!==l.actualSize.height&&zp(this.diagram)){if(a.children&&!a.container){for(var d=0,p=this.getAllDescendants(a,[]);d<p.length;d++){var u=p[d];this.scaleObject(e,i,c,u,l,s)}t.wrapper.measure(new un),t.wrapper.arrange(t.wrapper.desiredSize),this.diagram.updateGroupOffset(o),this.updateInnerParentProperties(a)}else this.scaleObject(e,i,c,o,l,s);var g=Un(t.wrapper);if(!this.checkBoundaryConstraints(void 0,void 0,g)&&r)return this.scale(t,1/e,1/i,n,void 0,!0),!1;this.diagram.updateDiagramObject(t)}return!0},t.prototype.getAllDescendants=function(t,e,i,n){for(var s=t,r=[],o=0;o<s.children.length;o++)(t=this.diagram.nameTable[s.children[parseInt(o.toString(),10)]])&&(t.children?(i&&e.push(t),n&&r.push(t),e=this.getAllDescendants(t,e)):e.push(t));return n?r:e},t.prototype.getChildren=function(t,e){var i=t;if(t.children&&t.children.length)for(var n=0;n<i.children.length;n++)(t=this.diagram.nameTable[i.children[parseInt(n.toString(),10)]])&&e.push(t);return e},t.prototype.cloneChild=function(t){return this.diagram.nameTable[""+t]},t.prototype.scaleObject=function(t,e,i,n,s,r,o){e=e<0?1:e;var a={};if(1!==(t=t<0?1:t)||1!==e){var l=void 0,h=void 0;if(n instanceof Ny){var c=n,d=void 0,p=void 0;if(a={width:n.wrapper.actualSize.width,height:n.wrapper.actualSize.height,offsetX:n.wrapper.offsetX,offsetY:n.wrapper.offsetY,margin:{top:c.margin.top,left:c.margin.left}},"Bpmn"===c.shape.type&&c.shape.activity.subProcess.processes&&c.shape.activity.subProcess.processes.length>0&&(p=this.diagram.bpmnModule.getChildrenBound(c,c.id,this.diagram),d=c.wrapper.bounds.containsRect(p)),"Container"===c.shape.type&&c.shape.children&&c.shape.children.length>0&&(p=Zf(c,c.id,this.diagram),d=c.wrapper.bounds.containsRect(p)),l=c.wrapper.actualSize.width*t,h=c.wrapper.actualSize.height*e,"SwimLane"===c.shape.type&&(t<1||e<1)){var u="SwimLane"===n.shape.type?n.shape.padding:void 0,g="Horizontal"===c.shape.orientation?c.shape.phases[c.shape.phases.length-1]:c.shape.lanes[c.shape.lanes.length-1],m=this.diagram.nameTable[g.header.id];n.wrapper.children[0].updateColumnWidth(m.columnIndex,l,!0,u),l=m.actualSize.width,h=n.height}var f=(c.constraints&ps.AspectRatio)===ps.AspectRatio,y=void 0!==c.minWidth&&0!==c.minWidth,v=void 0!==c.maxWidth&&0!==c.maxWidth,b=void 0!==c.minHeight&&0!==c.minHeight,C=void 0!==c.maxHeight&&0!==c.maxHeight;if(f){var I=c.wrapper.actualSize;y&&b?h/c.minHeight<l/c.minWidth?h<c.minHeight&&(h=c.minHeight,l=c.minHeight*(I.width/I.height)):l<c.minWidth&&(l=c.minWidth,h=c.minWidth*(I.height/I.width)):y?l<c.minWidth&&(l=c.minWidth,h=c.minWidth*(I.height/I.width)):b&&h<c.minHeight&&(h=c.minHeight,l=c.minHeight*(I.width/I.height)),v&&C?h/c.maxHeight>l/c.maxWidth?h>c.maxHeight&&(h=c.maxHeight,l=c.maxHeight*(I.width/I.height)):l>c.maxWidth&&(l=c.maxWidth,h=c.maxWidth*(I.height/I.width)):v?l>c.maxWidth&&(l=c.maxWidth,h=c.maxWidth*(I.height/I.width)):C&&h>c.maxHeight&&(h=c.maxHeight,l=c.maxHeight*(I.width/I.height))}else v&&(l=Math.min(c.maxWidth,l)),y&&(l=Math.max(c.minWidth,l)),b&&(h=Math.max(c.minHeight,h)),C&&(h=Math.min(c.maxHeight,h));d&&(l=Math.max(l,p.right-c.wrapper.bounds.x),h=Math.max(h,p.bottom-c.wrapper.bounds.y)),t=l/c.actualSize.width,e=h/c.actualSize.height}var M=Nn();r||(r=n);var S=r.wrapper;if(On(M,-S.rotateAngle,i.x,i.y),kn(M,t,e,i.x,i.y),On(M,S.rotateAngle,i.x,i.y),n instanceof Ny){var x=(c=n).wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,w=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y,D=!(this.diagram.undoRedoModule&&this.diagram.checkUndoRedo&&("Bpmn"===c.shape.type||c.parentId&&this.diagram.nameTable[c.parentId])),E=Ln(M,{x:c.wrapper.offsetX,y:c.wrapper.offsetY}),T=D?E.x:a.offsetX,A=D?E.y:a.offsetY,N=c.processId?this.diagram.nameTable[c.processId]:c.parentId?this.diagram.nameTable[c.parentId]:void 0;if(l>0){var L=c.margin.left+l,O=!N||void 0===N.maxWidth||L<N.maxWidth;N&&c.processId&&L>N.wrapper.actualSize.width&&(O=!!(N.constraints&ps.Resize)),O&&(c.width=l,c.offsetX=T)}if(h>0){var k=c.margin.top+h,z=!N||void 0===N.maxHeight||k<N.maxHeight;N&&c.processId&&k>N.wrapper.actualSize.height&&(z=!!(N.constraints&ps.Resize)),z&&(c.height=h,c.offsetY=A)}var P=c.wrapper.offsetX-c.wrapper.actualSize.width*c.pivot.x,j=c.wrapper.offsetY-c.wrapper.actualSize.height*c.pivot.y,B=this.diagram.nameTable[c.processId],H=0;!B&&this.diagram.nameTable[c.parentId]&&"Container"===this.diagram.nameTable[c.parentId].shape.type&&(B=this.diagram.nameTable[c.parentId]).shape.hasHeader&&(H=B.shape.header.height),B&&(P=c.offsetX-c.width*c.pivot.x,j=c.offsetY-c.height*c.pivot.y),B&&(c.margin.top-H+(j-w)<=0||c.margin.left+(P-x)<=0)?"Drag"!==this.diagram.eventHandler.currentAction?this.diagram.nodePropertyChange(n,{},{margin:{top:c.margin.top,left:c.margin.left}}):this.diagram.nodePropertyChange(n,{},{width:c.width,height:c.height,margin:{top:c.margin.top,left:c.margin.left}}):zu(this.diagram,n,!0)?Pu(this.diagram,n):o||this.diagram.nodePropertyChange(n,a,{width:c.width,height:c.height,offsetX:c.offsetX,offsetY:c.offsetY,margin:{top:c.margin.top+(j-w),left:c.margin.left+(P-x)}})}else{var R=n,V={sourcePoint:R.sourcePoint,targetPoint:R.targetPoint};R.sourceWrapper&&R.targetWrapper||this.scaleConnector(R,M,V,t,e,i)}var U=this.diagram.nameTable[n.processId],F=this.diagram.nameTable[n.parentId];if(U){U.wrapper.bounds,n.wrapper.bounds,p=this.diagram.bpmnModule.getChildrenBound(U,n.id,this.diagram);this.diagram.bpmnModule.updateSubProcessess(p,n,this.diagram)}else if(F&&F.shape instanceof Py){p=Zf(F,n.id,this.diagram);qf(0,n,this.diagram,!0)}}},t.prototype.scaleConnector=function(t,e,i,n,s,r){t.sourcePoint=Ln(e,t.sourcePoint),t.targetPoint=Ln(e,t.targetPoint),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.updatePathElementOffset(t);var o={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint};this.diagram.connectorPropertyChange(t,i,o);var a=this.diagram.selectedItems;if(Df(this.diagram,a)){var l=Fn(this.diagram.selectedItems),h={offsetX:l.offsetX,offsetY:l.offsetY,height:l.height,width:l.width,rotateAngle:l.rotateAngle},c=new Ny(this.diagram,"nodes",h,!0);c.wrapper=l.wrapper,c.wrapper.rotateAngle=a.rotateAngle,this.scaleObject(n,s,r,c,c.wrapper,c,!0),a.wrapper.actualSize.width=c.width,a.wrapper.actualSize.height=c.height,a.wrapper.offsetX=c.offsetX,a.wrapper.offsetY=c.offsetY,this.diagram.selectedItems.connectors[0].id!==t.id&&this.measureSelector(a)}},t.prototype.measureSelector=function(t){var e,i=void 0,n=[];n=Fn(this.diagram.selectedItems).connectors;for(var s={x:this.diagram.selectedItems.offsetX,y:this.diagram.selectedItems.offsetY},r=0;r<n.length;r++){var o=Nn();On(o,-t.rotateAngle,s.x,s.y),n[parseInt(r.toString(),10)].sourcePoint=Ln(o,n[parseInt(r.toString(),10)].sourcePoint),n[parseInt(r.toString(),10)].targetPoint=Ln(o,n[parseInt(r.toString(),10)].targetPoint);var a={x:n[parseInt(r.toString(),10)].sourcePoint.x,y:n[parseInt(r.toString(),10)].sourcePoint.y},l={x:n[parseInt(r.toString(),10)].targetPoint.x,y:n[parseInt(r.toString(),10)].targetPoint.y};e=this.calculateBounds(a,l),void 0===i?i=e:i.uniteRect(e)}var h={};void 0!==i&&(h={x:i.x+i.width*t.wrapper.pivot.x,y:i.y+i.height*t.wrapper.pivot.y});var c={offsetX:h.x,offsetY:h.y,height:i.height,width:i.width,rotateAngle:0},d=new Ny(this.diagram,"nodes",c,!0),p=Nn();On(p,t.rotateAngle,s.x,s.y),d.rotateAngle+=t.rotateAngle,d.rotateAngle=(d.rotateAngle+360)%360;var u=Ln(p,{x:d.offsetX,y:d.offsetY});d.offsetX=u.x,d.offsetY=u.y,t.wrapper.actualSize.width=i.width,t.wrapper.actualSize.height=i.height,t.wrapper.offsetX=d.offsetX,t.wrapper.offsetY=d.offsetY;var g=Zy(this.diagram.element.id);this.diagram.diagramRenderer.renderResizeHandle(t.wrapper,g,t.thumbsConstraints,this.diagram.scroller.currentZoom,t.constraints,this.diagram.scroller.transform,!1,dp(t),null,null,t.handleSize)},t.prototype.calculateBounds=function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.x,e.x),s=Math.min(t.y,e.y),r=Math.max(t.y,e.y);return new Tn(i,s,n-i,r-s)},t.prototype.portDrag=function(t,e,i,n){var s,r,o=this.findTarget(e,t),a=Un(t.wrapper);o&&jp(o,this.diagram)&&(t instanceof Ny?(s=this.getPortChanges(t,o),o.offset.x+=i/a.width,o.offset.y+=n/a.height,o.offset.x=Math.max(0,Math.min(1,o.offset.x)),o.offset.y=Math.max(0,Math.min(1,o.offset.y)),r=this.getPortChanges(t,o),this.diagram.nodePropertyChange(t,s,r)):(s=this.getConnectorPortChanges(t,o),this.updatePortOffset(t,o,i,n),o.alignment="Center",r=this.getConnectorPortChanges(t,o),this.diagram.connectorPropertyChange(t,s,r)),this.diagram.updateDiagramObject(t))},t.prototype.labelDrag=function(t,e,i,n){var s=this.findTarget(e,t),r=Vn(t.wrapper),o=this.getAnnotationChanges(t,s),a=this.getSelectedObject();if(s instanceof Xc){var l=e.flippedPoint&&e.flip===ss.Horizontal||e.flip===ss.Both?-1:1,h=e.flippedPoint&&e.flip===ss.Vertical||e.flip===ss.Both?-1:1;s.offset.x+=l*i/r.width,s.offset.y+=h*n/r.height}else this.updatePathAnnotationOffset(t,s,i,n),s instanceof Gc&&(s.alignment="Center");var c=this.getAnnotationChanges(t,s);t instanceof Ny?this.diagram.nodePropertyChange(t,o,c):this.diagram.connectorPropertyChange(t,o,c),this.diagram.updateDiagramObject(t),Zu(this.diagram,s,!1,e)||this.labelSelect(t,e,a);for(var d=0,p=this.diagram.views;d<p.length;d++){var u=p[d],g=this.diagram.views[u];g instanceof qb||this.diagram.refreshCanvasDiagramLayer(g)}},t.prototype.updatePathAnnotationOffset=function(t,e,i,n,s,r){var o,a,l,h,c,d=this.diagram.getWrapper(t.wrapper,e.id),p=d.offsetX,u=d.offsetY,g=t.intermediatePoints,m=0;switch(e.verticalAlignment){case"Center":"Center"===e.horizontalAlignment?c=s||{x:p+i,y:u+n}:"Right"===e.horizontalAlignment?c=s||{x:p+d.actualSize.width/2+i,y:u+n}:"Left"===e.horizontalAlignment&&(c=s||{x:p-d.actualSize.width/2+i,y:u+n});break;case"Top":"Center"===e.horizontalAlignment?c=s||{x:p+i,y:u-d.actualSize.height/2+n}:"Right"===e.horizontalAlignment?c=s||{x:p+d.actualSize.width/2+i,y:u-d.actualSize.height/2+n}:"Left"===e.horizontalAlignment&&(c=s||{x:p-d.actualSize.width/2+i,y:u-d.actualSize.height/2+n});break;case"Bottom":"Center"===e.horizontalAlignment?c=s||{x:p+i,y:u+d.actualSize.height/2+n}:"Right"===e.horizontalAlignment?c=s||{x:p+d.actualSize.width/2+i,y:u+d.actualSize.height/2+n}:"Left"===e.horizontalAlignment&&(c=s||{x:p-d.actualSize.width/2+i,y:u+d.actualSize.height/2+n})}var f=this.getInterceptWithSegment(c,g),y=g[g.length-1];if(l=fn.getLengthFromListOfPoints(g),f.length>0){if(e.dragLimit=e.dragLimit?e.dragLimit:{},e.dragLimit.top||e.dragLimit.bottom||e.dragLimit.left||e.dragLimit.right){var v={minDistance:null};y=this.getRelativeOffset(c,g,v);var b={minDistance:null};if(h=this.getRelativeOffset(c,f,b),null!=v&&b.minDistance<v.minDistance)y=h;else y=Am(t.intermediatePoints,e).point}else y=h=f[f.length-1];if(y){var C=void 0;for(C=0;C<g.length;C++){if(null!=a){if(Tn.toBounds([a,g[parseInt(C.toString(),10)]]).containsPoint(y)){m+=fn.findLength(a,y);break}m+=fn.findLength(a,g[parseInt(C.toString(),10)])}a=g[parseInt(C.toString(),10)]}o={x:m/l,y:0}}this.updateLabelMargin(t,e,o,c,r,i,n)}else this.updateLabelMargin(t,e,null,c,r,i,n)},t.prototype.updatePortOffset=function(t,e,i,n,s,r){var o,a,l,h,c,d=this.diagram.getWrapper(t.wrapper,e.id),p=d.offsetX,u=d.offsetY,g=t.intermediatePoints,m=0;switch(e.verticalAlignment){case"Center":"Center"===e.horizontalAlignment?c=s||{x:p+i,y:u+n}:"Right"===e.horizontalAlignment?c=s||{x:p+d.actualSize.width/2+i,y:u+n}:"Left"===e.horizontalAlignment&&(c=s||{x:p-d.actualSize.width/2+i,y:u+n});break;case"Top":"Center"===e.horizontalAlignment?c=s||{x:p+i,y:u-d.actualSize.height/2+n}:"Right"===e.horizontalAlignment?c=s||{x:p+d.actualSize.width/2+i,y:u-d.actualSize.height/2+n}:"Left"===e.horizontalAlignment&&(c=s||{x:p-d.actualSize.width/2+i,y:u-d.actualSize.height/2+n});break;case"Bottom":"Center"===e.horizontalAlignment?c=s||{x:p+i,y:u+d.actualSize.height/2+n}:"Right"===e.horizontalAlignment?c=s||{x:p+d.actualSize.width/2+i,y:u+d.actualSize.height/2+n}:"Left"===e.horizontalAlignment&&(c=s||{x:p-d.actualSize.width/2+i,y:u+d.actualSize.height/2+n})}var f=this.getInterceptWithSegment(c,g),y=g[g.length-1];if(l=fn.getLengthFromListOfPoints(g),f.length>0){y=h=f[f.length-1];var v={minDistance:null};y=this.getRelativeOffset(c,g,v);var b={minDistance:null};if(h=this.getRelativeOffset(c,f,b),null!=v&&b.minDistance<v.minDistance)y=h;else y=Am(t.intermediatePoints,e).point;if(y){var C=void 0;for(C=0;C<g.length;C++){if(null!=a){if(Tn.toBounds([a,g[parseInt(C.toString(),10)]]).containsPoint(y)){m+=fn.findLength(a,y);break}m+=fn.findLength(a,g[parseInt(C.toString(),10)])}a=g[parseInt(C.toString(),10)]}o={x:m/l,y:0}}this.updateLabelMargin(t,e,o,c,r,i,n)}else this.updateLabelMargin(t,e,null,c,r,i,n)},t.prototype.getRelativeOffset=function(t,e,i){var n,s,r,o;for(o=0;o<e.length;o++)r=e[parseInt(o.toString(),10)],s=Math.round(Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))),null!==i.minDistance&&Math.min(Math.abs(i.minDistance),Math.abs(s))!==Math.abs(s)||(n=r,i.minDistance=s);return n},t.prototype.dragLimitValue=function(t,e,i,n){var s=!1,r=!1;return i.x>=e.x-t.left-n.width/2&&i.x<=e.x+t.right+n.width/2&&(s=!0),i.y>=e.y-t.top-n.height/2&&i.y<=e.y+t.bottom+n.height/2&&(r=!0),{x:s,y:r}},t.prototype.updateLabelMargin=function(t,e,i,n,s,r,o){if(i=i||{x:e.offset,y:0},e&&i&&i.x>0&&i.x<1){var a=fn.getLengthFromListOfPoints(t.intermediatePoints),l=this.getPointAtLength(a*i.x,t.intermediatePoints,0),h=this.diagram.scrollSettings.currentZoom,c=e.dragLimit?e.dragLimit:{left:0,right:0,top:0,bottom:0};if(c.top||c.bottom||c.left||c.right||e instanceof Yc){this.diagram.getWrapper(t.wrapper,e.id);var d=new Tn(0,0,0,0),p=this.diagram.getWrapper(t.wrapper,e.id);d.x=p.offsetX/h+r,d.y=p.offsetY/h+o,d.width=e instanceof Yc?0:p.bounds.width/h,d.height=e instanceof Yc?0:p.bounds.height/h;var u=new Tn(l.x-(c.left||0)-d.width/2,l.y-(c.top||0)-d.height/2,(c.left||0)+(c.right||0)+d.width,(c.top||0)+(c.bottom||0)+d.height);if(u.containsPoint(n));else for(var g=[l,n],m=0,f=this.boundsInterSects(g,u,!1);m<f.length;m++){n=f[m]}var y=this.dragLimitValue(c,l,n,d);e.margin={left:y.x?n.x-l.x:e.margin.left,top:y.y?n.y-l.y:e.margin.top,right:0,bottom:0}}else e.margin={left:n.x-l.x,top:n.y-l.y,right:0,bottom:0};e.offset=i.x,s&&(e.width=s.width,e.height=s.height)}},t.prototype.boundsInterSects=function(t,e,i){var n;if(e){var s=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height},{x:e.x,y:e.y}];n=this.intersect(t,s,i)}return n},t.prototype.intersect=function(t,e,i){for(var n=[],s=0;s<t.length-1;s++)for(var r=0;r<e.length-1;r++){var o=Mm(t[s],t[s+1],e[r],e[r+1]);0!==o.x&&0!==o.y&&n.push(o)}return n},t.prototype.getPointAtLength=function(t,e,i){for(var n,s,r=0,o={x:0,y:0},a=0;a<e.length;a++)if(s=e[a],n){var l=fn.findLength(n,s),h=void 0,c=void 0,d=void 0,p=void 0;if(r+l>=t){h=t-r,c=fn.findAngle(n,s),d=h*Math.cos(c*Math.PI/180),p=h*Math.sin(c*Math.PI/180),o={x:n.x+d,y:n.y+p};break}r+=l,n=s}else n=s;return o},t.prototype.getInterceptWithSegment=function(t,e){for(var i,n,s=[],r=[],o=[],a=fn.findLength({x:0,y:0},{x:this.diagram.scroller.viewPortWidth,y:this.diagram.scroller.viewPortHeight}),l=1;l<e.length;l++){o=[e[l-1],e[l]],r=[],n=Math.round(fn.findAngle(o[0],o[1])%360),i=Math.round(fn.findAngle(o[1],o[0])%360);var h=n>0&&n<=90||n>180&&n<=270?90:-90;r.push(fn.transform(t,n+h,a)),r.push(fn.transform(t,i+h,a));var c=Im({x1:o[0].x,y1:o[0].y,x2:o[1].x,y2:o[1].y},{x1:r[0].x,y1:r[0].y,x2:r[1].x,y2:r[1].y});c.enabled&&s.push(c.intersectPt)}return s},t.prototype.getAnnotationChanges=function(t,e){var i={};return i[tf(t,e.id,!0)]={width:e.width,height:e.height,offset:t instanceof Ny?{x:e.offset.x,y:e.offset.y}:e.offset,rotateAngle:e.rotateAngle,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,alignment:t instanceof Rg?e.alignment:void 0},{annotations:i}},t.prototype.getConnectorPortChanges=function(t,e){var i={};return i[function(t,e){for(var i=t.ports,n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)].id===e)return n.toString();return"-1"}(t,e.id)]={width:e.width,height:e.height,offset:e.offset,margin:{left:e.margin.left,right:e.margin.right,top:e.margin.top,bottom:e.margin.bottom},horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,alignment:t instanceof Rg?e.alignment:void 0},{ports:i}},t.prototype.getPortChanges=function(t,e){var i={};return i[tf(t,e.id,!1)]={offset:e.offset},{ports:i}},t.prototype.labelRotate=function(t,e,i,n){var s,r;s=this.getAnnotationChanges(t,e);Nn(),e.rotateAngle;var o=this.diagram.getWrapper(t.wrapper,e.id),a=0,l=0;o.flippedPoint&&(a=o.flippedPoint.x-o.corners.topLeft.x,l=o.flippedPoint.y-o.corners.topLeft.y);var h=Ad({x:o.offsetX+a,y:o.offsetY+l},i)+90,c=this.snapAngle(h);(h=0!==c?c:h,e instanceof Gc&&e.segmentAngle)&&(h-=Tm(t.intermediatePoints,e,t.wrapper.bounds).angle);h=(h+360)%360,e.rotateAngle+=h-(e.rotateAngle+o.parentTransform),e instanceof Gc&&(e.alignment="Center"),n.wrapper.rotateAngle=n.rotateAngle=e.rotateAngle,r=this.getAnnotationChanges(t,e),t instanceof Ny?this.diagram.nodePropertyChange(t,s,r):this.diagram.connectorPropertyChange(t,s,r),this.diagram.updateDiagramObject(t);for(var d=0,p=this.diagram.views;d<p.length;d++){var u=p[d],g=this.diagram.views[u];g instanceof qb||this.diagram.refreshCanvasDiagramLayer(g)}},t.prototype.labelResize=function(t,e,i,n,s,r){var o,a,l;o=this.getAnnotationChanges(t,e);var h=r.wrapper.children[0];if(i&&1!==i||n&&1!==n){var c=Nn(),d=Nn();On(c,-t.rotateAngle,t.offsetX,t.offsetY),On(d,-(l=(h.rotateAngle+(t instanceof Ny?t.rotateAngle:0)+360)%360),s.x,s.y),kn(d,i,n,s.x,s.y),On(d,l,s.x,s.y);var p=Ln(d,{x:h.offsetX,y:h.offsetY}),u=h.actualSize.height*n,g=h.actualSize.width*i,m=this.findTarget(h,t);if(m instanceof Gc&&(p.y+="Top"===m.verticalAlignment?-u/2:"Bottom"===m.verticalAlignment?u/2:0,p.x+="Left"===m.horizontalAlignment?-g/2:"Right"===m.horizontalAlignment?g/2:0),m instanceof Gc)this.updatePathAnnotationOffset(t,e,0,0,p,new un(g,u));else{var f=Vn(t.wrapper);(p=Ln(c,p)).x=p.x-h.margin.left+h.margin.right,p.y=p.y-h.margin.top+h.margin.bottom,p.y+="Top"===m.verticalAlignment?-u/2:"Bottom"===m.verticalAlignment?u/2:0,p.x+="Left"===m.horizontalAlignment?-g/2:"Right"===m.horizontalAlignment?g/2:0;var y=f.width/(p.x-f.x),v=f.height/(p.y-f.y);if(g>1){m.width=g;var b=m.offset.x;m.offset.x=1/y,!h.flippedPoint||h.flip!==ss.Horizontal&&h.flip!==ss.Both||(m.offset.x=b+b-m.offset.x)}if(u>1){m.height=u;var C=m.offset.y;m.offset.y=1/v,!h.flippedPoint||h.flip!==ss.Vertical&&h.flip!==ss.Both||(m.offset.y=C+C-m.offset.y)}}}e instanceof Gc&&(e.alignment="Center"),a=this.getAnnotationChanges(t,e),t instanceof Ny?this.diagram.nodePropertyChange(t,o,a):this.diagram.connectorPropertyChange(t,o,a),this.diagram.updateDiagramObject(t);for(var I=0,M=this.diagram.views;I<M.length;I++){var S=M[I],x=this.diagram.views[S];x instanceof qb||this.diagram.refreshCanvasDiagramLayer(x)}},t.prototype.getSubProcess=function(t){var e,i={nodes:[],connectors:[]};return t instanceof Ny?e=t.processId:t&&t.nodes&&t.nodes.length&&t.nodes[0].processId&&(e=t.nodes[0].processId),e?(i.nodes.push(Fn(this.diagram.nameTable[e])),i):i},t.prototype.getContainer=function(t){var e,i={nodes:[],connectors:[]};return t instanceof Ny?e=t.parentId:t&&t.nodes&&t.nodes.length&&t.nodes[0].parentId&&(e=t.nodes[0].parentId),e?(i.nodes.push(Fn(this.diagram.nameTable[e])),i):i},t.prototype.checkBoundaryConstraints=function(t,e,i,n){var s=this.diagram.pageSettings,r=this.diagram.pageSettings.boundaryConstraints,o=this.diagram.scroller;if("Page"===r||"Diagram"===r){var a=i?void 0:this.diagram.selectedItems.wrapper.bounds,l="Page"===r?s.width:o.viewPortWidth,h="Page"===r?s.height:o.viewPortHeight,c=i,d=(i?c.right:a.right)+(t||0),p=(i?c.left:a.left)+(t||0),u=(i?c.top:a.top)+(e||0),g=(i?c.bottom:a.bottom)+(e||0);return!!(d<=l&&p>=0&&g<=h&&u>=0||"None"!==this.diagram.layout.type&&n)}return!0},t.prototype.dragSelectedObjects=function(t,e){var i=this,n=this.diagram.selectedItems;this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY),n=ku(this.diagram,n)||n;var s=this.diagram.selectedItems.nodes.filter(function(t){return"SwimLane"===t.shape.type}),r=[];if(s.length>0&&!this.diagram.currentSymbol&&this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>1){var o=this.diagram.selectedItems.nodes.filter(function(t){return""===t.parentId||"SwimLane"!==i.diagram.nameTable[t.parentId].shape.type});if(o.length>0){for(var a=0;a<o.length;a++)(this.diagram.nameTable[o[parseInt(a.toString(),10)].parentId]&&this.diagram.nameTable[o[parseInt(a.toString(),10)].parentId].isLane||"SwimLane"===o[parseInt(a.toString(),10)].shape.type)&&(o.splice(a,1),a--);var l=s.filter(function(t,e,i){return e===i.findIndex(function(e){return e.id===t.id})});for(a=0;a<l.length;a++)r=r.concat(Jp(this.diagram,l[a].wrapper.children[0]));(o.length>0||l.length>1||this.diagram.selectedItems.connectors.length>0)&&(o=o.concat(l),this.diagram.selectedItems.nodes.splice(0,this.diagram.selectedItems.nodes.length),o.forEach(function(t){i.diagram.selectedItems.nodes.push(t)}),n=this.diagram.selectedItems,this.diagram.selectedObject.helperObject=void 0)}}if(this.checkBoundaryConstraints(t,e)){this.diagram.diagramActions=this.diagram.diagramActions|Is.PreventZIndexOnDragging|Is.DragUsingMouse;var h=this.diagram.selectedObject.actualObject;return(h&&h instanceof Ny&&h.isLane&&Nu(h,this.diagram)||!h||!h.isLane)&&(this.diagram.drag(n,t,e),ru(r,this.diagram)),this.diagram.diagramActions=this.diagram.diagramActions&~(Is.PreventZIndexOnDragging|Is.DragUsingMouse),this.diagram.refreshCanvasLayers(),this.checkHtmlObjectDrag(n),!0}return!1},t.prototype.checkHtmlObjectDrag=function(t){var e=!1;this.diagram.views&&this.diagram.views.length>1&&(t instanceof By?e=t.nodes.some(function(t){return t.shape&&"HTML"===t.shape.type}):t.shape&&"HTML"===t.shape.type&&(e=!0),e&&this.resetOverviewCanvas())},t.prototype.resetOverviewCanvas=function(){for(var t=0,e=this.diagram.views;t<e.length;t++){var i=e[t],n=this.diagram.views[i];if(!(n instanceof qb)){var s=document.getElementById(n.canvas.id+"overviewrect"),r=Number(s.getAttribute("x")),o=Number(s.getAttribute("y")),a=Number(s.getAttribute("width")),l=Number(s.getAttribute("height"));dv(s,{x:r,y:o,width:Math.max(1,a),height:Math.max(1,l)})}}},t.prototype.scaleSelectedItems=function(t,e,i){var n=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.offsetX=n.offsetX,this.state.backup.offsetY=n.offsetY,this.state.backup.width=n.width,this.state.backup.height=n.height,this.state.backup.pivot=i),n=ku(this.diagram,n)||n,this.diagram.scale(n,t,e,i)},t.prototype.rotateSelectedItems=function(t){var e=this.diagram.selectedItems;return this.state&&!this.state.backup&&(this.state.backup={},this.state.backup.angle=e.rotateAngle),e=ku(this.diagram,e)||e,this.diagram.rotate(e,t,void 0,!0)},t.prototype.hasSelection=function(){return _u(this.diagram)},t.prototype.isSelected=function(t){return Zu(this.diagram,t)},t.prototype.initExpand=function(t){var e=this.diagram.isProtectedOnChange;this.diagram.protectPropertyChange(!0);var i=t.target||t.source,n={isExpanded:i.isExpanded};i.isExpanded=!i.isExpanded,this.diagram.preventNodesUpdate=!0,this.diagram.diagramActions|=Is.PreventIconsUpdate,this.diagram.nodePropertyChange(i,n,{isExpanded:i.isExpanded}),this.diagram.diagramActions=this.diagram.diagramActions&~Is.PreventIconsUpdate,this.diagram.preventNodesUpdate=!1;for(var s=0,r=this.diagram.views;s<r.length;s++){var o=r[s],a=this.diagram.views[o];a instanceof qb||this.diagram.refreshCanvasDiagramLayer(a)}this.diagram.protectPropertyChange(e)},t.prototype.expandNode=function(t,e,i){var n=this.diagram.preventNodesUpdate,s=t.isExpanded;this.diagram.preventNodesUpdate=!0,this.expandCollapse(t,s,this.diagram,void 0),t.isExpanded=s;var r=this.diagram.layout.fixedNode;this.diagram.layout.fixedNode=t.id,this.diagram.diagramActions!=Is.Render&&this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&this.diagram.organizationalChartModule&&(this.diagram.organizationalChartModule.isAnimation=!0),this.diagram.blazorActions|=ns.expandNode;var o={};if(i||(this.layoutAnimateModule&&this.layoutAnimateModule.setIntervalObject.length>0&&(this.layoutAnimateModule.stopCurrentAnimation(this.objectStore[0],e,t),this.objectStore=[]),o=this.diagram.doLayout(),this.objectStore.push(o)),this.canUpdateTemplate=!1,this.diagram.blazorActions&=~ns.expandNode,this.diagram.preventNodesUpdate=n,this.diagram.layoutAnimateModule&&this.diagram.organizationalChartModule&&!i)this.diagram.allowServerDataBinding=!1,this.layoutAnimateModule.expand(this.diagram.layout.enableAnimation,o,t,this.diagram);else{var a={element:Fn(t),state:!!t.isExpanded};this.triggerEvent(Ds.expandStateChange,a),this.diagram.lineRoutingModule&&this.diagram.constraints&ms.LineRouting&&"ComplexHierarchicalTree"!==this.diagram.layout.type&&this.diagram.resetSegments()}return this.diagram.layout.fixedNode=""===r?"":this.diagram.layout.fixedNode,o},t.prototype.getparentexpand=function(t,e,i,n){for(var s,r=0;r<t.inEdges.length;r++){var o=e.nameTable[t.inEdges[r]],a=e.nameTable[o.sourceID];if(a.isExpanded&&!i&&a.id!==n.sourceID&&o.visible)return!1;s=!0}return s},t.prototype.expandCollapse=function(t,e,i,n){if(n&&0!==n.length||(n=[]),!n.some(function(e){return e.id===t.id})){n.push(t);for(var s=0;s<t.outEdges.length;s++){var r=i.nameTable[t.outEdges[s]],o=i.nameTable[r.targetID],a=this.getparentexpand(o,i,e,r);r.visible=e;var l={visible:o.visible,style:{opacity:o.wrapper.style.opacity}},h={visible:o.visible,style:{opacity:o.wrapper.style.opacity}};a&&(o.isExpanded&&this.expandCollapse(o,e,i,n),o.visible=e,o.style.opacity=this.diagram.layoutAnimateModule&&this.diagram.layout.enableAnimation&&e?.1:o.style.opacity,i.nodePropertyChange(o,l,h)),i.connectorPropertyChange(r,l,h)}}},t.prototype.updateNodeDimension=function(t,e){t instanceof Ny&&(t.offsetX=e.x+e.width/2,t.offsetY=e.y+e.height/2,t.width=e.width,t.height=e.height,t.wrapper.children[0].canMeasurePath=!0,this.diagram.nodePropertyChange(t,{},{width:e.width,height:e.height,offsetX:t.offsetX,offsetY:t.offsetY}),"SVG"!==this.diagram.mode&&this.diagram.refreshDiagramLayer())},t.prototype.updateConnectorPoints=function(t,e){t instanceof Rg&&"Bezier"!==t.type?(this.diagram.connectorPropertyChange(t,{},{targetPoint:t.targetPoint}),this.diagram.updateDiagramObject(t)):(this.diagram.connectorPropertyChange(t,{},{segments:t.segments}),this.diagram.updateDiagramObject(t))},t.prototype.updateSelectedNodeProperties=function(t){if(this.diagram.lineRoutingModule&&this.diagram.constraints&ms.LineRouting){this.diagram.protectPropertyChange(!0);var e=[],i=[],n=this.diagram.selectedObject.actualObject,s=this.diagram.selectedObject.helperObject,r=n instanceof By?Fn(n):void 0;if(s&&n){var o=s.offsetX-n.offsetX,a=s.offsetY-n.offsetY,l=s.width-n.width,h=s.height-n.height,c=s.rotateAngle-n.rotateAngle;if(this.diagram.selectedItems.nodes.length+this.diagram.selectedItems.connectors.length>0&&(this.diagram.selectedItems.wrapper.rotateAngle=this.diagram.selectedItems.rotateAngle=s.rotateAngle),!(n instanceof Ny&&"SwimLane"!==n.shape.type)||n.isLane||n.isPhase||n.isHeader||zu(this.diagram,n)){if(n instanceof By){var d=s.width/n.width,p=s.height/n.height,u=this.diagram.eventHandler.tool.getPivot(this.diagram.eventHandler.tool.corner);if(this.diagram.eventHandler.tool.corner)for(var g=0;g<n.nodes.length;g++){var m=(v=n.nodes[parseInt(g.toString(),10)]).wrapper,f=n.wrapper,y=cf(f.offsetX-f.actualSize.width*f.pivot.x,f.offsetY-f.actualSize.height*f.pivot.y,f.actualSize.width,f.actualSize.height,f.rotateAngle,f.offsetX,f.offsetY,u);this.diagram.commandHandler.scaleObject(d,p,y,v,m,n)}else for(g=0;g<n.nodes.length;g++){!((v=n.nodes[g])instanceof Ny&&"SwimLane"!==v.shape.type)||zu(this.diagram,v)||v.isLane||v.isPhase||v.isHeader||(v.offsetX+=o,v.offsetY+=a,v.width+=l,v.height+=h,v.rotateAngle+=c,this.diagram.nodePropertyChange(v,{},{offsetX:v.offsetX,offsetY:v.offsetY,width:v.width,height:v.height,rotateAngle:v.rotateAngle}),e=e.concat(this.diagram.spatialSearch.findObjects(n.wrapper.outerBounds)))}}}else n.offsetX===n.wrapper.offsetX&&n.offsetY===n.wrapper.offsetY&&n.width===n.wrapper.width&&n.height===n.wrapper.height&&n.rotateAngle===n.wrapper.rotateAngle||(n.offsetX+=o,n.offsetY+=a,n.width+=l,n.height+=h,n.rotateAngle+=c,this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,rotateAngle:n.rotateAngle},!1,!0)),e=this.diagram.spatialSearch.findObjects(n.wrapper.outerBounds)}else{var v;if(t instanceof Rg?e.push(t):t instanceof By&&t.connectors.length&&(e=e.concat(t.connectors)),t instanceof By)if(-1!==this.diagram.nodes.indexOf(t.nodes[0]))!((v=n||t.nodes[0])instanceof Ny&&"SwimLane"!==v.shape.type)||zu(this.diagram,v)||v.isLane||v.isPhase||v.isHeader||(e=e.concat(this.diagram.spatialSearch.findObjects(v.wrapper.outerBounds)))}for(g=0;g<e.length;g++)e[g]instanceof Rg&&-1===i.indexOf(e[g].id)&&i.push(e[g].id);(i.length>0||this.diagram.routedConnectors.length>0)&&(this.diagram.avoidLineOverlappingModule&&(this.diagram.avoidLineOverlappingModule.removeConnectors(i),this.diagram.avoidLineOverlappingModule.removeConnectors(this.diagram.routedConnectors)),this.diagram.lineRoutingModule.renderVirtualRegion(this.diagram,!0)),this.diagram.lineRoutingModule.skipObstacleCheck=!0;for(g=0;g<this.diagram.routedConnectors.length;g++){var b=this.diagram.nameTable[this.diagram.routedConnectors[g]];this.ReRouteConnector(b)}this.diagram.lineRoutingModule.skipObstacleCheck=!1;for(g=0;g<i.length;g++){b=this.diagram.nameTable[i[g]];-1===this.diagram.routedConnectors.indexOf(b.id)&&this.ReRouteConnector(b)}if(this.diagram.routedConnectors=[],s&&n&&r&&"Drag"===this.diagram.eventHandler.currentAction){var C=!1,I=this.diagram.nameTable;for(g=0;g<n.nodes.length;g++)I[n.nodes[g].parentId]&&I[n.nodes[g].parentId].isLane||(C=!0);if(C){var M=Fn(n);this.diagram.startGroupAction();var S={type:"PositionChanged",redoObject:Fn(M),undoObject:r,category:"Internal"};this.diagram.addHistoryEntry(S),this.diagram.endGroupAction()}}this.updateSelector(),this.diagram.protectPropertyChange(!1)}},t.prototype.drawSelectionRectangle=function(t,e,i,n){this.diagram.drawSelectionRectangle(t,e,i,n)},t.prototype.ReRouteConnector=function(t){if(t instanceof Rg&&"Orthogonal"===t.type&&t.sourceID&&t.targetID&&t.sourceID!=t.targetID&&"ComplexHierarchicalTree"!==this.diagram.layout.type){var e=this.diagram.getObject(t.sourceID),i=this.diagram.getObject(t.targetID),n=i.offsetX>e.offsetX?i.wrapper.outerBounds.middleLeft.x-e.wrapper.outerBounds.middleRight.x:e.wrapper.outerBounds.middleLeft.x-i.wrapper.outerBounds.middleRight.x,s=i.offsetY>e.offsetY?i.wrapper.outerBounds.topCenter.y-e.wrapper.outerBounds.bottomCenter.y:e.wrapper.outerBounds.topCenter.y-i.wrapper.outerBounds.bottomCenter.y;(n>30||s>30)&&this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,t,!0)}},t.prototype.startGroupAction=function(){this.diagram.startGroupAction()},t.prototype.endGroupAction=function(){this.diagram.endGroupAction()},t.prototype.removeChildFromBPmn=function(t,e,i){var n=this,s=this.diagram.nameTable[t.id]||t.nodes[0];if(i)if(s&&s.processId&&s.processId===i.wrapper.id){Fn(s).processId=s.processId;var r=this.diagram.nameTable[s.processId].shape.activity.subProcess.processes||[];if(s.hasTextAnnotation)s.outEdges.concat(s.inEdges).forEach(function(t){var e=n.diagram.nameTable[t].targetID,i=r.indexOf(e);-1!==i&&(r.splice(i,1),n.diagram.bpmnModule.removeChildFromBPMN(n.diagram.nameTable[s.processId].wrapper,e,n.diagram),n.diagram.nameTable[e].processId="")});r.splice(r.indexOf(s.id),1),this.diagram.bpmnModule.removeChildFromBPMN(this.diagram.nameTable[s.processId].wrapper,s.id,this.diagram),this.diagram.nameTable[s.id].processId="",s.offsetX=s.wrapper.offsetX,s.offsetY=s.wrapper.offsetY}else if(s&&s.parentId&&s.parentId===i.wrapper.id&&this.diagram.nameTable[s.parentId].shape instanceof Py){Fn(s).parentId=s.parentId;var o=this.diagram.nameTable[s.parentId].shape.children||[];o.splice(o.indexOf(s.id),1),Gf(this.diagram.nameTable[s.parentId].wrapper,s.id,this.diagram),this.diagram.nameTable[s.id].parentId="",s.offsetX=s.wrapper.offsetX,s.offsetY=s.wrapper.offsetY}},t.prototype.isDroppable=function(t,e){var i=this.diagram.nameTable[t.id]||t.nodes[0];return i instanceof Ny&&(!x()&&"TextAnnotation"===i.shape.shape||("Group"===e.shape.shape&&(e.shape.activity.subProcess.collapsed=!1),(!i||"Bpmn"!==i.shape.type||i.processId!==e.id&&i.id!==e.processId&&("Bpmn"!==e.shape.type||e instanceof Rg||!e.shape.activity||!e.shape.activity.subProcess||!e.shape.activity.subProcess.collapsed))&&((!i||i.parentId!==e.id&&i.id!==e.parentId||"Container"!==e.shape.type||e instanceof Rg)&&!(i&&"Container"===i.shape.type&&e.isLane||i&&"SwimLane"===i.shape.type&&"Container"===e.shape.type))))},t.prototype.renderHighlighter=function(t,e,i){new Tn;if(t.target instanceof Ny||t.target instanceof Rg||e&&(t.source instanceof Ny||t.source instanceof Rg)){var n=e?t.source:t.target,s=e?t.sourceWrapper:t.targetWrapper,r=this.findTarget(s,n,i,!0),o=void 0;if(r instanceof gy)for(var a=r.id,l=t.target,h=0,c=l.wrapper.children[0].children[0].children[2].children;h<c.length;h++){var d=c[h];if(d.id===l.id+"_"+a){o=d.children[0];break}}else o=r instanceof Ny?r.wrapper:e?t.sourceWrapper:t.targetWrapper;!o||r instanceof Rg||this.diagram.renderHighlighter(o)}},t.prototype.mouseOver=function(t,e,i){return!0},t.prototype.snapPoint=function(t,e,i,n){var s,r=this.diagram.selectedItems,o=e.x<t.x,a=e.y<t.y,l=s={x:i,y:n};return this.snappingModule&&(r.nodes.length>0&&r.nodes[0].constraints&ps.Drag||r.connectors.length>0&&r.connectors[0].constraints&cs.Drag)&&(l=this.diagram.snappingModule.snapPoint(this.diagram,r,o,a,s,t,e)),l},t.prototype.removeSnap=function(){this.diagram.snapSettings.constraints&os.SnapToObject&&this.snappingModule&&this.snappingModule.removeGuidelines(this.diagram)},t.prototype.dropAnnotation=function(t,e){if(t instanceof Ny||t instanceof By){var i=t instanceof Ny?t:t.nodes[0];if(this.diagram.bpmnModule&&"Bpmn"===e.shape.type&&!x()&&"TextAnnotation"===i.shape.shape){i.hasTarget=e.id,i.shape.annotation.nodeId=e.id,this.diagram.currentSymbol||(this.diagram.addTextAnnotation(i.shape.annotation,e),i.shape.annotation.nodeId="",this.diagram.remove(i)),this.diagram.refreshDiagramLayer()}}},t.prototype.drop=function(t,e,i){if(this.diagram.bpmnModule&&"Container"!==e.shape.type){for(var n=t instanceof Ny?[t]:t.nodes,s=0;s<n.length;s++){var r=n[s];if(r&&"Bpmn"===r.shape.type&&e instanceof Ny&&"Bpmn"===e.shape.type&&!(e instanceof Rg)&&(this.diagram.bpmnModule.dropBPMNchild(e,r,this.diagram),r.hasTextAnnotation))for(var o=0;o<r.outEdges.length;o++){var a=this.diagram.nameTable[r.outEdges[parseInt(o.toString(),10)]];if(a.isBpmnAnnotationConnector){var l=this.diagram.nameTable[a.targetID];this.diagram.bpmnModule.dropBPMNchild(e,l,this.diagram)}}}this.diagram.refreshDiagramLayer()}else if("Container"===e.shape.type){for(var h=t instanceof Ny?[t]:t.nodes,c=0;c<h.length;c++){Qf(e,h[c],this.diagram)}this.diagram.refreshDiagramLayer()}},t.prototype.addHistoryEntry=function(t){this.diagram.addHistoryEntry(t)},t.prototype.align=function(t,e,i){if(t.length>0){var n=0;t[0]=this.diagram.nameTable[t[0].id]||t[0];var s="Object"===i?Un(t[0].wrapper):this.diagram.selectedItems.wrapper.bounds,r={nodes:[],connectors:[]},o={nodes:[],connectors:[]};for(n="Object"===i?n+1:n;n<t.length;n++){var a=0,l=0;t[n]=this.diagram.nameTable[t[n].id]||t[n];var h=Un(t[n].wrapper);"Left"===e?a=s.left+h.width/2-h.center.x:"Right"===e?a=s.right-h.width/2-h.center.x:"Top"===e?l=s.top+h.height/2-h.center.y:"Bottom"===e?l=s.bottom-h.height/2-h.center.y:"Center"===e?a=s.center.x-h.center.x:"Middle"===e&&(l=s.center.y-h.center.y),r=this.storeObject(r,t[n]),this.drag(t[n],a,l),this.diagram.updateSelector(),o=this.storeObject(o,t[n])}r=Fn(r),o=Fn(o);var c={type:"Align",category:"Internal",undoObject:Fn(r),redoObject:Fn(o)};this.addHistoryEntry(c)}},t.prototype.distribute=function(t,e){if(t.length>0){var i=0,n=0,s=0,r=0,o=0,a=0,l=0,h=0,c=0,d={nodes:[],connectors:[]},p={nodes:[],connectors:[]};for(i=0;i<t.length;i++)t[i]=this.diagram.nameTable[t[i].id]||t[i];for(t=function(t,e){var i,n=0,s=0;for(n=0;n<t.length;n++){var r=Un(t[parseInt(n.toString(),10)].wrapper);for(s=n+1;s<t.length;s++){var o=Un(t[parseInt(s.toString(),10)].wrapper);"Top"===e||"Bottom"===e||"BottomToTop"===e||"Middle"===e?r.center.y>o.center.y&&(i=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(s.toString(),10)],t[parseInt(s.toString(),10)]=i):r.center.x>o.center.x&&(i=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(s.toString(),10)],t[parseInt(s.toString(),10)]=i)}}return t}(t,e),i=1;i<t.length;i++)n=n+t[i].wrapper.bounds.topRight.x-t[i-1].wrapper.bounds.topRight.x,s=s+t[i].wrapper.bounds.topLeft.x-t[i-1].wrapper.bounds.topLeft.x,r=r+t[i].wrapper.bounds.topRight.y-t[i-1].wrapper.bounds.topRight.y,o=o+t[i].wrapper.bounds.bottomRight.y-t[i-1].wrapper.bounds.bottomRight.y,a=a+t[i].wrapper.bounds.center.x-t[i-1].wrapper.bounds.center.x,l=l+t[i].wrapper.bounds.center.y-t[i-1].wrapper.bounds.center.y,h=h+t[i].wrapper.bounds.topRight.y-t[i-1].wrapper.bounds.bottomRight.y,c=c+t[i].wrapper.bounds.middleLeft.x-t[i-1].wrapper.bounds.middleRight.x;for(i=1;i<t.length-1;i++){var u=0,g=0,m=Un(t[i-1].wrapper),f=Un(t[i].wrapper);"Center"===e?u=m.center.x-f.center.x+a/(t.length-1):"RightToLeft"===e?u=m.middleRight.x-f.middleLeft.x+c/(t.length-1):"Right"===e?u=m.topRight.x-f.topRight.x+n/(t.length-1):"Left"===e?u=m.topLeft.x-f.topLeft.x+s/(t.length-1):"Middle"===e?g=m.center.y-f.center.y+l/(t.length-1):"Top"===e?g=m.topRight.y-f.topRight.y+r/(t.length-1):"Bottom"===e?g=m.bottomRight.y-f.bottomRight.y+o/(t.length-1):"BottomToTop"===e&&(g=m.bottomRight.y-f.topRight.y+h/(t.length-1)),d=this.storeObject(d,t[i]),this.drag(t[i],u,g),this.diagram.updateSelector(),p=this.storeObject(p,t[i])}d=Fn(d),p=Fn(p);var y={type:"Distribute",category:"Internal",undoObject:Fn(d),redoObject:Fn(p)};this.addHistoryEntry(y)}},t.prototype.sameSize=function(t,e){if(t.length>0){var i=0,n={x:.5,y:.5};t[0]=this.diagram.nameTable[t[0].id]||t[0];var s=Un(t[0].wrapper),r={nodes:[],connectors:[]},o={nodes:[],connectors:[]};for(i=1;i<t.length;i++){t[parseInt(i.toString(),10)]=this.diagram.nameTable[t[parseInt(i.toString(),10)].id]||t[0];var a=Un(t[parseInt(i.toString(),10)].wrapper),l=1,h=1;"Width"===e?l=s.width/a.width:"Height"===e?h=s.height/a.height:"Size"===e&&(l=s.width/a.width,h=s.height/a.height),r=this.storeObject(r,t[parseInt(i.toString(),10)]),this.scale(t[parseInt(i.toString(),10)],l,h,n),o=this.storeObject(o,t[parseInt(i.toString(),10)])}this.diagram.updateSelector(),r=Fn(r),o=Fn(o);var c={type:"Sizing",category:"Internal",undoObject:Fn(r),redoObject:Fn(o)};this.addHistoryEntry(c)}},t.prototype.storeObject=function(t,e){return e instanceof Ny?t.nodes.push(Fn(e)):t.connectors.push(Fn(e)),t},t.prototype.updatePanState=function(t){if(t)this.diagram.realActions=this.diagram.realActions|Ss.PanInProgress;else{this.diagram.dataBind();var e=this.diagram.scrollSettings;this.diagram.realActions=this.diagram.realActions&~Ss.PanInProgress;var i={VerticalOffset:e.verticalOffset,HorizontalOffset:e.horizontalOffset,ViewportHeight:e.viewPortHeight,ViewportWidth:e.viewPortWidth,CurrentZoom:e.currentZoom},n={oldValue:i,newValue:i,source:this.diagram,panState:"Completed"};this.triggerEvent(Ds.scrollChange,n)}},t.prototype.dataBinding=function(){this.diagram.dataBind()},t.prototype.setBlazorDiagramProps=function(t){this.diagram.setBlazorDiagramProps(t)},t.prototype.scroll=function(t,e,i){var n=this.diagram.constraints&ms.PanX,s=function(t){return t.constraints&ms.PanY}(this.diagram);this.diagram.pan((t=n?t:0)*this.diagram.scroller.currentZoom,(e=s?e:0)*this.diagram.scroller.currentZoom,i,!0)},t.prototype.drawHighlighter=function(t){this.diagram.renderHighlighter(t.wrapper)},t.prototype.removeHighlighter=function(){this.diagram.clearHighlighter()},t.prototype.renderContainerHelper=function(t){return ku(this.diagram,t)},t.prototype.isParentAsContainer=function(t,e){return zu(this.diagram,t,e)},t.prototype.isTargetSubProcess=function(t){return!!(t&&t.shape&&"Bpmn"===t.shape.type&&t.shape.activity&&"SubProcess"===t.shape.activity.activity)},t.prototype.dropChildToContainer=function(t,e){if(!(this.diagram.diagramActions&Is.PreventLaneContainerUpdate)&&(Hu(this.diagram,t,e),e.hasTextAnnotation))for(var i=0;i<e.outEdges.length;i++){var n=this.diagram.nameTable[e.outEdges[parseInt(i.toString(),10)]];if(n.isBpmnAnnotationConnector){var s=this.diagram.nameTable[n.targetID];Hu(this.diagram,t,s)}}},t.prototype.updateLaneChildrenZindex=function(t,e){var i=this.findLeastIndexObject(t,e),n=this.diagram.nameTable[e.parentId];if(n&&n.zIndex>i.zIndex){for(var s=this.diagram.layers.indexOf(this.diagram.getActiveLayer()),r=this.diagram.layers[parseInt(s.toString(),10)].zIndexTable,o=JSON.parse(JSON.stringify(r)),a=i.zIndex,l=n.zIndex,h=l;h>=a;h--)if(a!==h)r[h-1]?(r[parseInt(h.toString(),10)]=r[h-1],this.diagram.nameTable[r[parseInt(h.toString(),10)]].zIndex=h):(r[h-1]=r[parseInt(h.toString(),10)],this.diagram.nameTable[r[h-1]].zIndex=h,delete r[parseInt(h.toString(),10)]);else this.swapZIndexObjects(l,r,n.id,o);"SVG"===this.diagram.mode?(this.moveSvgNode(e.parentId,i.id),this.updateNativeNodeIndex(e.parentId,i.id)):this.diagram.refreshCanvasLayers()}},t.prototype.findLeastIndexConnector=function(t,e,i){for(var n=0;n<t.length;n++){var s=this.diagram.nameTable[t[parseInt(n.toString(),10)]];i.zIndex>s.zIndex&&(i=s)}return i},t.prototype.findLeastIndexObject=function(t,e){var i=t;return t instanceof Ny&&(i=this.findLeastIndexConnector(t.inEdges,e,i),i=this.findLeastIndexConnector(t.outEdges,e,i)),i},t.prototype.checkSelection=function(t,e){var i;if(1===t.nodes.length&&0===t.connectors.length)if(zu(this.diagram,t.nodes[0],!0)){i="SwimLane"===t.nodes[0].shape?t.nodes[0]:this.diagram.nameTable[t.nodes[0].parentId];var n=t.nodes[0];if("SwimLane"===i.shape.type){var s="Horizontal"===i.shape.orientation;(n.isPhase&&(s&&"ResizeSouth"===e||!s&&"ResizeEast"===e)||n.isLane&&(s&&"ResizeEast"===e||!s&&"ResizeSouth"===e))&&yu(this.diagram,i,e)}else if("Grid"===i.container.type)if("Horizontal"===i.container.orientation&&1===n.rowIndex||"Vertical"===i.container.orientation&&n.rowIndex>0&&n.columnIndex>0){if("ResizeSouth"===e)for(var r=0;r<this.diagram.nodes.length;r++){if((o=this.diagram.nodes[parseInt(r.toString(),10)]).rowIndex===i.rows.length-1&&0===o.columnIndex){this.select(o);break}}}else if("ResizeEast"===e)for(r=0;r<this.diagram.nodes.length;r++){var o;if(1===(o=this.diagram.nodes[parseInt(r.toString(),10)]).rowIndex&&o.columnIndex===i.columns.length-1){this.select(o);break}}}else yu(this.diagram,t.nodes[0],e)},t.prototype.zoom=function(t,e,i,n){this.diagram.scroller.zoom(t,e*this.diagram.scroller.currentZoom,i*this.diagram.scroller.currentZoom,n)},t}(),ib=function(){function t(t){this.transform={tx:0,ty:0,scale:1},this.oldCollectionObjects=[],this.removeCollection=[],this.vPortWidth=0,this.vPortHeight=0,this.currentZoomFActor=1,this.hOffset=0,this.vOffset=0,this.scrolled=!1,this.hScrollSize=0,this.vScrollSize=0,this.diagram=t,this.objects=[],this.transform=t.scroller?t.scroller.transform:{tx:0,ty:0,scale:1},this.vPortWidth=t.scrollSettings.viewPortWidth,this.vPortHeight=t.scrollSettings.viewPortHeight,this.currentZoomFActor=t.scrollSettings.currentZoom,this.hOffset=t.scrollSettings.horizontalOffset,this.vOffset=t.scrollSettings.verticalOffset}return Object.defineProperty(t.prototype,"viewPortHeight",{get:function(){return this.vPortHeight},set:function(t){this.vPortHeight=t,this.diagram.scrollSettings.viewPortHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentZoom",{get:function(){return this.currentZoomFActor||1},set:function(t){this.currentZoomFActor=t,this.diagram.scrollSettings.currentZoom=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPortWidth",{get:function(){return this.vPortWidth},set:function(t){this.vPortWidth=t,this.diagram.scrollSettings.viewPortWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"horizontalOffset",{get:function(){return this.hOffset},set:function(t){this.hOffset=t,Math.abs(this.hOffset-this.diagram.scrollSettings.horizontalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Ss.hScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.horizontalOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalOffset",{get:function(){return this.vOffset},set:function(t){this.vOffset=t,Math.abs(this.vOffset-this.diagram.scrollSettings.verticalOffset)>1&&(this.diagram.realActions=this.diagram.realActions|Ss.vScrollbarMoved,this.scrolled=!0),this.diagram.scrollSettings.verticalOffset=t},enumerable:!0,configurable:!0}),t.prototype.getBounds=function(){var t=this.diagram.spatialSearch.getPageBounds(0,0);return(t.x<0||t.y<0)&&!this.diagram.pageSettings.multiplePage?this.getPageBounds(void 0,void 0,!0,!0):this.getPageBounds(void 0,void 0,!0)},t.prototype.updateScrollOffsets=function(t,e){var i,n,s=this.getBounds();s.x*=this.currentZoom,s.y*=this.currentZoom,s.width*=this.currentZoom,s.height*=this.currentZoom,i=Math.max(0,t-s.left),n=Math.max(0,e-s.top),void 0!==t&&void 0!==e?(this.horizontalOffset=i,this.verticalOffset=n,this.diagram.setOffset(i,n)):this.diagram.setOffset(-this.horizontalOffset-s.x,-this.verticalOffset-s.y),this.transform={tx:Math.max(this.horizontalOffset,-s.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-s.top)/this.currentZoom,scale:this.currentZoom}},t.prototype.setScrollOffset=function(t,e){this.scrolled=!1;var i=this.getBounds();i.x*=this.currentZoom,i.y*=this.currentZoom,i.width*=this.currentZoom,i.height*=this.currentZoom;var n=-i.left,s=-i.top,r=!1,o=this.viewPortWidth*this.currentZoom,a=this.viewPortHeight*this.currentZoom,l=n-t;if(l!==this.horizontalOffset){n<this.horizontalOffset&&(this.horizontalOffset>l?this.horizontalOffset-=t:this.horizontalOffset=l,r=!0);var h=Math.max(i.right+this.vScrollSize,o);if(!r&&h<-l+this.viewPortWidth){var c=-l+o-this.vScrollSize,d=-this.horizontalOffset+o-this.vScrollSize;c<d||c-i.right>c-d?this.horizontalOffset=l:this.horizontalOffset=-(i.right+this.vScrollSize-o),r=!0}r||(this.horizontalOffset=n-t)}r=!1;var p=s-e;if(p!==this.verticalOffset){s<this.verticalOffset&&(this.verticalOffset>p?this.verticalOffset-=e:this.verticalOffset=p,r=!0);var u=Math.max(i.bottom+this.hScrollSize,a);if(!r&&u<-p+a){var g=-p+a-this.hScrollSize,m=-this.verticalOffset+a-this.hScrollSize;g<m||g-i.bottom>g-m?this.verticalOffset=p:this.verticalOffset=-(i.bottom+this.hScrollSize-a),r=!0}r||(this.verticalOffset=s-e)}this.transform={tx:Math.max(this.horizontalOffset,-i.left)/this.currentZoom,ty:Math.max(this.verticalOffset,-i.top)/this.currentZoom,scale:this.currentZoom},this.setSize()},t.prototype.getObjects=function(t,e){for(var i=[],n=new Set(e),s=0;s<t.length;s++)n.has(t[parseInt(s.toString(),10)])||i.push(t[parseInt(s.toString(),10)]);return i},t.prototype.virtualizeElements=function(){for(var t,e=this.viewPortWidth/this.currentZoom,i=this.viewPortHeight/this.currentZoom,n=this.diagram.spatialSearch.findObjects(new Tn(-this.horizontalOffset/this.currentZoom,-this.verticalOffset/this.currentZoom,e,i)),s=[],r=0;r<n.length;r++){var o=n[parseInt(r.toString(),10)].shape;if("Bpmn"===o.type&&o&&o.activity&&o.activity.subProcess&&o.activity.subProcess.processes&&o.activity.subProcess.processes.length>0){for(var a=0;a<o.activity.subProcess.processes.length;a++)s.push(o.activity.subProcess.processes[parseInt(a.toString(),10)]);s.push(n[parseInt(r.toString(),10)].id)}else""!==n[parseInt(r.toString(),10)].processId&&void 0!==n[parseInt(r.toString(),10)].processId||s.push(n[parseInt(r.toString(),10)].id)}t=s;var l=[];for(r=0;r<n.length;r++){var h=n[parseInt(r.toString(),10)].shape;if("Bpmn"===h.type&&h&&h.activity&&h.activity.subProcess&&h.activity.subProcess.processes&&h.activity.subProcess.processes.length>0){l.push(n[parseInt(r.toString(),10)].id);for(var c=0;c<h.activity.subProcess.processes.length;c++)l.push(h.activity.subProcess.processes[parseInt(c.toString(),10)])}else""!==n[parseInt(r.toString(),10)].processId&&void 0!==n[parseInt(r.toString(),10)].processId||l.push(n[parseInt(r.toString(),10)].id)}var d={};for(a=0;a<l.length;a++)d[l[parseInt(a.toString(),10)]]=a;this.diagram.protectPropertyChange(!0);for(r=0;r<n.length;r++){var p=n[parseInt(r.toString(),10)].id;p in d&&(n[parseInt(r.toString(),10)].zIndex=d[""+p])}this.diagram.protectPropertyChange(!1);var u=this.getObjects(t,this.oldCollectionObjects);0===this.oldCollectionObjects.length&&(this.oldCollectionObjects=t);var g=this.getObjects(this.oldCollectionObjects,t);this.diagram.updateVirtualObjects(u,!1,g),this.oldCollectionObjects=t},t.prototype.setSize=function(t){var e=this.getPageBounds(void 0,void 0,!0);e.x*=this.currentZoom,e.y*=this.currentZoom,e.width*=this.currentZoom,e.height*=this.currentZoom;var i=Math.min(e.x,-this.horizontalOffset),n=Math.min(e.y,-this.verticalOffset),s=(this.horizontalOffset,this.viewPortWidth,e.right,this.verticalOffset,this.viewPortHeight,e.bottom,this.scrollerWidth),r=this.scrollerWidth;-this.verticalOffset<=e.y&&-this.verticalOffset+this.viewPortHeight>=e.bottom&&(r=0),-this.horizontalOffset<=e.x&&-this.horizontalOffset+this.viewPortWidth>=e.right&&(s=0),this.hScrollSize=s,this.vScrollSize=r;var o=this.diagramWidth,a=this.diagramHeight;this.diagramWidth=Math.max(e.right,-this.horizontalOffset+this.viewPortWidth-r)-i,this.diagramHeight=Math.max(e.bottom,-this.verticalOffset+this.viewPortHeight-s)-n,o===this.diagramWidth&&a===this.diagramHeight||"Diagram"===this.diagram.scrollSettings.scrollLimit||this.diagram.setSize(this.diagramWidth,this.diagramHeight),"Diagram"===this.diagram.scrollSettings.scrollLimit&&(o===this.diagramWidth&&a===this.diagramHeight&&1===this.currentZoom||this.diagram.diagramActions&&t&&(!this.diagram.diagramActions||!t||0===this.verticalOffset&&this.verticalOffset!==t.y||0===this.horizontalOffset&&this.horizontalOffset!==t.x)?t&&o===this.diagramWidth&&a===this.diagramHeight&&(this.diagram.diagramCanvas.scrollHeight>this.viewPortHeight&&t.y<0&&this.horizontalOffset===t.x&&0===this.verticalOffset||this.diagram.diagramCanvas.scrollWidth>this.viewPortWidth&&t.x<0&&this.verticalOffset===t.y&&0===this.horizontalOffset)&&(this.verticalOffset=t.y,this.horizontalOffset=t.x,this.transform={tx:Math.max(t.x,-e.left)/this.currentZoom,ty:Math.max(t.y,-e.top)/this.currentZoom,scale:this.currentZoom}):(this.diagram.scrollActions&xs.Interaction&&t&&(this.transform={tx:Math.max(t.x,-e.left/this.currentZoom)/this.currentZoom,ty:Math.max(t.y,-e.top/this.currentZoom)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=t.x,this.verticalOffset=t.y),this.diagram.setSize(this.diagramWidth,this.diagramHeight),this.diagram.scrollActions&xs.PropertyChange||!t||(this.horizontalOffset=t.x,this.verticalOffset=t.y,this.transform={tx:Math.max(t.x,-e.left)/this.currentZoom,ty:Math.max(t.y,-e.top)/this.currentZoom,scale:this.currentZoom}))),this.diagram.transformLayers(),this.diagram.element.style.overflow="hidden"},t.prototype.setViewPortSize=function(t,e){this.viewPortWidth=t,this.viewPortHeight=e},t.prototype.getPageBounds=function(t,e,i,n){var s,r=new Tn;if("Content"===e||n||null===this.diagram.pageSettings.width||null===this.diagram.pageSettings.height){var o=t?void 0:0;s=this.diagram.spatialSearch.getPageBounds(o,o)}else{var a=this.diagram.pageSettings.width,l=this.diagram.pageSettings.height,h=0,c=0;if(this.diagram.pageSettings.multiplePage){if((r=this.diagram.spatialSearch.getPageBounds(0,0)).right>a)a*=d=Math.ceil(r.right/a);if(r.bottom>l)l*=d=Math.ceil(r.bottom/l);if(r.left<0&&Math.abs(r.left)>h){var d=Math.ceil(Math.abs(r.left)/this.diagram.pageSettings.width);h=this.diagram.pageSettings.width*d}if(r.top<0&&Math.abs(r.top)>c){d=Math.ceil(Math.abs(r.top)/this.diagram.pageSettings.height);c=this.diagram.pageSettings.height*d}}s=new Tn(-h,-c,a+h,l+c)}if(i){var p=this.diagram.scrollSettings.padding;s.x-=p.left,s.y-=p.top,s.width+=p.left+p.right,s.height+=p.top+p.bottom}return s},t.prototype.getPageBreak=function(t){for(var e=0,i=0,n=-1,s=[],r=0,o=0,a=0,l=0,h=this.diagram.pageSettings.margin.left,c=this.diagram.pageSettings.margin.right,d=this.diagram.pageSettings.margin.top,p=this.diagram.pageSettings.margin.bottom,u=1,g=1,m={x1:r,y1:a,x2:o,y2:l};t.width>e;)(e+=this.diagram.pageSettings.width?this.diagram.pageSettings.width:t.width)===this.diagram.pageSettings.width&&(m={x1:t.left+h,y1:t.top+d,x2:t.left+h,y2:t.bottom-p},s[++n]=m),e<t.width&&(m={x1:r=t.topLeft.x+this.diagram.pageSettings.width*u,y1:a=t.topLeft.y+d,x2:o=t.bottomLeft.x+this.diagram.pageSettings.width*u,y2:l=t.bottomLeft.y-p},s[++n]=m,u++),t.width===e&&(m={x1:t.right-c,y1:t.top+d,x2:t.right-c,y2:t.bottom-p},s[++n]=m);for(;t.height>i;)(i+=this.diagram.pageSettings.height?this.diagram.pageSettings.height:t.height)===this.diagram.pageSettings.height&&(m={x1:t.left+h,y1:t.top+d,x2:t.right-c,y2:t.top+d},s[++n]=m),i<t.height&&(m={x1:r=t.topLeft.x+h,y1:a=t.topLeft.y+this.diagram.pageSettings.height*g,x2:o=t.topRight.x-c,y2:l=t.topRight.y+this.diagram.pageSettings.height*g},s[++n]=m,g++),t.height===i&&(m={x1:t.left+h,y1:t.bottom-p,x2:t.right-c,y2:t.bottom-p},s[++n]=m);return s},t.prototype.zoom=function(t,e,i,n,s,r,o,a){if(this.diagram.constraints&ms.Zoom&&1!==t||function(t){return t.constraints&ms.Pan}(this.diagram)&&1===t){var l=Nn();if(kn(l,this.currentZoom,this.currentZoom),zn(l,this.horizontalOffset,this.verticalOffset),n=Ln(l,n=n||{x:(this.viewPortWidth/2-this.horizontalOffset)/this.currentZoom,y:(this.viewPortHeight/2-this.verticalOffset)/this.currentZoom}),this.currentZoom*t<=this.diagram.scrollSettings.maxZoom&&(this.currentZoom*t>=this.diagram.scrollSettings.minZoom||a||t>=1)){this.currentZoom*=t;var h=this.getPageBounds(void 0,void 0,!0);h.x*=this.currentZoom,h.y*=this.currentZoom;var c=Nn();kn(c,t,t,n.x,n.y),zn(c,e||0,i||0),Pn(l,c);var d=Ln(l,{x:0,y:0});if(1===t&&(d=this.applyScrollLimit(d.x,d.y,s,r,o)),o=-h.y>=d.y&&-h.x>=d.x&&o,(this.diagram.scrollActions&xs.PropertyChange||!(this.diagram.scrollActions&xs.Interaction)||"Diagram"!==this.diagram.scrollSettings.scrollLimit||o)&&(this.transform={tx:Math.max(d.x,-h.left)/this.currentZoom,ty:Math.max(d.y,-h.top)/this.currentZoom,scale:this.currentZoom},this.horizontalOffset=d.x,this.verticalOffset=d.y),this.setSize(d),"SVG"!==this.diagram.mode&&wp(this.diagram)&&this.diagram.scroller.virtualizeElements(),"SVG"===this.diagram.mode||wp(this.diagram)||this.diagram.refreshDiagramLayer(),this.diagram.setOffset(-this.horizontalOffset-h.x,-this.verticalOffset-h.y),Yg(this.diagram),this.diagram.views&&this.diagram.views.overview){var p=this.diagram.views.overview,u=p.scrollOverviewRect(p.parent.scroller.horizontalOffset,p.parent.scroller.verticalOffset,p.parent.scroller.currentZoom,!0);p.updateOverviewrect(-u.x,-u.y,u.width,u.height),p.updateView(p)}}}},t.prototype.fitToPage=function(t){var e=(t=t||{}).mode,i=t.region,n=t.margin||{},s=t.canZoomIn,r=t.customBounds,o=t.canZoomOut;n.bottom=n.bottom||25,n.top=n.top||25,n.left=n.left||25,n.right=n.right||25;var a,l=r,h=-this.horizontalOffset,c=-this.verticalOffset;if("PageSettings"===(i=i||"PageSettings")&&this.diagram.pageSettings.width&&this.diagram.pageSettings.height||this.diagram.nodes.length>0||this.diagram.connectors.length>0){e=e||"Page","CustomBounds"!==i&&(l=this.getPageBounds(!0,i,!0));var d={x:0,y:0};n.left+n.right>this.viewPortWidth&&(this.viewPortWidth<=100?(n.left=5,n.right=5):(n.left=25,n.right=25)),n.top+n.bottom>this.viewPortHeight&&(this.viewPortHeight<=100?(n.top=5,n.bottom=5):(n.top=25,n.bottom=25)),d.x=(this.viewPortWidth-(n.left+n.right))/l.width,d.y=(this.viewPortHeight-(n.top+n.bottom))/l.height,!s&&l.width-this.horizontalOffset<this.viewPortWidth&&l.height-this.verticalOffset<this.viewPortHeight&&(d.x=Math.min(this.currentZoom,d.x),d.y=Math.min(this.currentZoom,d.y));var p=void 0,u=void 0,g=void 0;switch(e){case"Width":a=(p=d.x)/this.currentZoom,h+=(u=(this.viewPortWidth-l.width*p)/2-l.x*p)+(n.left-n.right)/2*p,c-=-this.verticalOffset*a,c="CustomBounds"!==i?c:c-this.verticalOffset*a;break;case"Height":a=(p=d.y)/this.currentZoom,u=(this.viewPortWidth-l.width*p)/2-l.x*p,g=(this.viewPortHeight-l.height*p)/2-l.y*p,h+=u+(n.left-n.right)/2*p,c+=g+(n.top-n.bottom)/2*p;break;case"Page":a=(p=Math.min(d.x,d.y))/this.currentZoom,u=(this.viewPortWidth-l.width*p)/2-l.x*p,g=(this.viewPortHeight-l.height*p)/2-l.y*p,h+=u+(n.left-n.right)/2*p,c+=g+(n.top-n.bottom)/2*p}this.zoom(a,h,c,{x:0,y:0},!0,void 0,void 0,o)}else a=1/this.currentZoom,this.zoom(a,h,c,{x:0,y:0},!0,void 0,void 0,o)},t.prototype.bringIntoView=function(t,e){var i=0,n=0,s=this.currentZoom,r=t,o=-this.horizontalOffset,a=-this.verticalOffset;r=new Tn(r.x*s,r.y*s,r.width*s,r.height*s);new Tn(o,a,this.viewPortWidth,this.viewPortHeight).containsRect(r)||(r.right>-o+this.viewPortWidth&&(i=r.right-this.viewPortWidth,i+=20),r.x<-o&&(i=r.x),r.bottom>-a+this.viewPortHeight&&(n=r.bottom-this.viewPortHeight,n+=20),r.y<-a&&(n=r.y),this.zoom(1,-this.horizontalOffset-i,-this.verticalOffset-n,null,void 0,e))},t.prototype.bringToCenter=function(t){var e=this.currentZoom,i=new Tn(t.x*e,t.y*e,t.width*e,t.height*e),n=i.x+i.width/2-this.viewPortWidth/2,s=i.y+i.height/2-this.viewPortHeight/2;n*=-1,s*=-1,this.zoom(1,-this.horizontalOffset-n,-this.verticalOffset-s,null)},t.prototype.applyScrollLimit=function(t,e,i,n,s){if("Infinity"===this.diagram.scrollSettings.scrollLimit&&(void 0!==i||n||(t=-t,e=-e)),"Infinity"!==this.diagram.scrollSettings.scrollLimit){var r=void 0;if("Limited"===this.diagram.scrollSettings.scrollLimit){var o=this.diagram.scrollSettings.scrollableArea;r=new Tn(o.x,o.y,o.width,o.height)}r=r||(s?this.getPageBounds(!1,void 0,!0):this.getPageBounds(!0,void 0,!0));var a="eventHandler";"Pan"===this.diagram[""+a].currentAction&&this.diagram[""+a].inAction&&(r=this.getPageBounds(!1,void 0,!0)),r.x*=this.currentZoom,r.y*=this.currentZoom,r.width*=this.currentZoom,r.height*=this.currentZoom,void 0!==i&&(t*=-1,e*=-1),n&&(t*=-1,e*=-1);var l=Math.max(r.right,this.viewPortWidth);if(!n&&!(t<=r.x&&(t+this.viewPortWidth>=r.right||t>=r.right-this.viewPortWidth)||t>=r.x&&t+this.viewPortWidth<=l))if(t>=r.x)t=Math.max(r.x,Math.min(t,t-(t+this.viewPortWidth-this.vScrollSize-l)));else{var h=r.right-this.viewPortWidth;t=Math.min(h,r.x)}var c=Math.max(r.bottom,this.viewPortHeight);if(!n&&!(e<=r.y&&e+this.viewPortHeight>=r.bottom||e>=r.y&&e+this.viewPortHeight<=c))if(e>=r.y)e=Math.max(r.y,Math.min(e,e-(e+this.viewPortHeight-this.hScrollSize-c)));else{h=r.bottom-this.viewPortHeight;e=Math.min(r.y,h)}t*=-1,e*=-1}return{x:t,y:e}},t}(),nb=function(){function t(t,e,i,n,s){this.objects=[],this.left=t,this.top=e,this.width=i,this.height=n,this.spatialSearch=s}return t.prototype.findQuads=function(t,e){null!=this.first&&this.first.isIntersect(t)&&this.first.findQuads(t,e),null!=this.second&&this.second.isIntersect(t)&&this.second.findQuads(t,e),null!=this.third&&this.third.isIntersect(t)&&this.third.findQuads(t,e),null!=this.fourth&&this.fourth.isIntersect(t)&&this.fourth.findQuads(t,e),this.objects.length>0&&e.push(this)},t.prototype.isIntersect=function(t){return!(this.left+this.width<t.left||this.top+this.height<t.top||this.left>t.right||this.top>t.bottom)},t.prototype.selectQuad=function(){for(var t,e=null,i=this;null!=i;)t=i.getQuad(e),i=t.source,e=t.target||e;return e},t.prototype.getQuad=function(e){var i=this.width/2,n=this.height/2;if(i>=1e3&&n>=1e3){var s=this.left+i,r=this.top+n;if(this.spatialSearch.childRight<=s){if(this.spatialSearch.childBottom<=r){if(!this.first)(o=new t(this.left,this.top,i,n,this.spatialSearch)).parent=this,this.first=o;return{source:this.first}}if(this.spatialSearch.childTop>=r){if(!this.third)(o=new t(this.left,r,i,n,this.spatialSearch)).parent=this,this.third=o;return{source:this.third}}}else if(this.spatialSearch.childLeft>=s){if(this.spatialSearch.childBottom<=r){if(!this.second)(o=new t(s,this.top,i,n,this.spatialSearch)).parent=this,this.second=o;return{source:this.second}}if(this.spatialSearch.childTop>=r){var o;if(!this.fourth)(o=new t(s,r,i,n,this.spatialSearch)).parent=this,this.fourth=o;return{source:this.fourth}}}}return this.objects.push(this.spatialSearch.childNode),{target:this}},t.prototype.isContained=function(){return this.spatialSearch.childLeft>=this.left&&this.spatialSearch.childRight<=this.left+this.width&&this.spatialSearch.childTop>=this.top&&this.spatialSearch.childBottom<=this.top+this.height},t.prototype.addIntoAQuad=function(t){var e={};this.spatialSearch.setCurrentNode(t);for(var i=null;!e.isAdded;)i=(e=this.spatialSearch.parentQuad.add(i)).quad;return i},t.prototype.add=function(e){if(e=null,this.isContained())return{isAdded:!0,quad:e=this.selectQuad()};var i=void 0,n=!(0!==this.objects.length||this.first||this.second||this.third||this.fourth),s=2*this.width,r=2*this.height;return this.spatialSearch.childLeft<this.left?this.spatialSearch.childTop<this.top?(i=new t(this.left-this.width,this.top-this.height,s,r,this.spatialSearch),n||(i.fourth=this)):(i=new t(this.left-this.width,this.top,s,r,this.spatialSearch),n||(i.second=this)):this.spatialSearch.childTop<this.top?(i=new t(this.left,this.top-this.height,s,r,this.spatialSearch),n||(i.third=this)):(i=new t(this.left,this.top,s,r,this.spatialSearch),n||(i.first=this)),this.parent=i,this.spatialSearch.parentQuad=i,{isAdded:!1,quad:e}},t}(),sb=function(){function t(t){this.quadSize=500,this.objectTable=t,this.parentQuad=new nb(0,0,2*this.quadSize,2*this.quadSize,this),this.pageLeft=Number.MAX_VALUE,this.pageRight=-Number.MAX_VALUE,this.pageTop=Number.MAX_VALUE,this.pageBottom=-Number.MAX_VALUE,this.quadTable={}}return t.prototype.removeFromAQuad=function(t){if(this.quadTable[t.id]){var e=this.quadTable[t.id],i=this.objectIndex(e.objects,t);-1!==i&&(e.objects.splice(i,1),this.update(e),delete this.quadTable[t.id])}},t.prototype.update=function(t){if(t.parent&&0===t.objects.length&&null==t.first&&null==t.second&&null==t.third&&null==t.fourth){var e=t.parent;e.first===t?e.first=null:e.second===t?e.second=null:e.third===t?e.third=null:e.fourth===t&&(e.fourth=null),this.update(t.parent)}else t!==this.parentQuad||t.first||t.second||t.third||t.fourth||(t.left=0,t.width=1e3,t.top=0,t.height=1e3)},t.prototype.addIntoAQuad=function(t){var e=this.parentQuad.addIntoAQuad(t);this.quadTable[t.id]=e},t.prototype.objectIndex=function(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].id===e.id)return i;return-1},t.prototype.updateQuad=function(t){this.setCurrentNode(t);var e=t.outerBounds;if(isNaN(e.x)||isNaN(e.y)||isNaN(e.width)||isNaN(e.height))return!1;this.quadTable[t.id]?this.quadTable[t.id].isContained()||(this.removeFromAQuad(t),this.addIntoAQuad(t)):this.addIntoAQuad(t);if(!this.isWithinPageBounds(e)||this.leftElement===t||this.topElement===t||this.rightElement===t||this.bottomElement===t){var i=!1;return this.pageLeft===this.childLeft&&t===this.leftElement||(this.pageLeft>=this.childLeft?(this.pageLeft=this.childLeft,this.leftElement=t,i=!0):t===this.leftElement&&(this.pageLeft=Number.MAX_VALUE,this.findLeft(this.parentQuad),i=!0)),this.pageTop===this.childTop&&t===this.topElement||(this.pageTop>=this.childTop?(this.pageTop=this.childTop,this.topElement=t,i=!0):t===this.topElement&&(this.pageTop=Number.MAX_VALUE,this.findTop(this.parentQuad),i=!0)),this.pageBottom===this.childBottom&&t===this.bottomElement||(this.pageBottom<=this.childBottom?(i=!0,this.pageBottom=this.childBottom,this.bottomElement=t):t===this.bottomElement&&(this.pageBottom=-Number.MAX_VALUE,this.findBottom(this.parentQuad),i=!0)),this.pageRight===this.childRight&&t===this.rightElement||(this.pageRight<=this.childRight?(this.pageRight=this.childRight,this.rightElement=t,i=!0):t===this.rightElement&&(this.pageRight=-Number.MAX_VALUE,this.findRight(this.parentQuad),i=!0)),i}return this.setCurrentNode(null),!1},t.prototype.isWithinPageBounds=function(t){return t.left>=this.pageLeft&&t.right<=this.pageRight&&t.top>=this.pageTop&&t.bottom<=this.pageBottom},t.prototype.findQuads=function(t){var e=[];return this.parentQuad.findQuads(t,e),e},t.prototype.findObjects=function(t){for(var e=[],i=0,n=this.findQuads(t);i<n.length;i++)for(var s=0,r=n[i].objects;s<r.length;s++){var o=r[s];(o.outerBounds.intersects(t)||Af(o))&&e.push(this.objectTable[o.id])}return e},t.prototype.updateBounds=function(t,e){var i=!1;return e?(this.topElement&&t.id===this.topElement.id&&(i=this.updateTop()),this.leftElement&&t.id===this.leftElement.id&&(i=this.updateLeft()),this.rightElement&&t.id===this.rightElement.id&&(i=this.updateRight()),this.bottomElement&&t.id===this.bottomElement.id&&(i=this.updateBottom())):(t===this.topElement&&(i=this.updateTop()),t===this.leftElement&&(i=this.updateLeft()),t===this.rightElement&&(i=this.updateRight()),t===this.bottomElement&&(i=this.updateBottom())),i},t.prototype.updateTop=function(){return this.pageTop=Number.MAX_VALUE,this.topElement=null,this.findTop(this.parentQuad),!0},t.prototype.updateBottom=function(){return this.pageBottom=-Number.MAX_VALUE,this.bottomElement=null,this.findBottom(this.parentQuad),!0},t.prototype.updateLeft=function(){return this.pageLeft=Number.MAX_VALUE,this.leftElement=null,this.findLeft(this.parentQuad),!0},t.prototype.updateRight=function(){return this.pageRight=-Number.MAX_VALUE,this.rightElement=null,this.findRight(this.parentQuad),!0},t.prototype.findBottom=function(t){t.third||t.fourth?(t.third&&this.findBottom(t.third),t.fourth&&this.findBottom(t.fourth)):(t.second&&this.findBottom(t.second),t.first&&this.findBottom(t.first));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageBottom<=n.outerBounds.bottom&&(this.pageBottom=n.outerBounds.bottom,this.bottomElement=n)}},t.prototype.findRight=function(t){(t.second||t.fourth)&&(t.second&&this.findRight(t.second),t.fourth&&this.findRight(t.fourth)),t.first&&this.findRight(t.first),t.third&&this.findRight(t.third);for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageRight<=n.outerBounds.right&&(this.pageRight=n.outerBounds.right,this.rightElement=n)}},t.prototype.findLeft=function(t){t.first||t.third?(t.first&&this.findLeft(t.first),t.third&&this.findLeft(t.third)):(t.second&&this.findLeft(t.second),t.fourth&&this.findLeft(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageLeft>=n.outerBounds.left&&(this.pageLeft=n.outerBounds.left,this.leftElement=n)}},t.prototype.findTop=function(t){t.first||t.second?(t.first&&this.findTop(t.first),t.second&&this.findTop(t.second)):(t.third&&this.findTop(t.third),t.fourth&&this.findTop(t.fourth));for(var e=0,i=t.objects;e<i.length;e++){var n=i[e];this.pageTop>=n.outerBounds.top&&(this.pageTop=n.outerBounds.top,this.topElement=n)}},t.prototype.setCurrentNode=function(t){if(this.childNode=t,t){var e=t.outerBounds;this.childLeft=Number(e.left),this.childTop=Number(e.top),this.childRight=Number(e.right),this.childBottom=Number(e.bottom)}else this.childLeft=Number.MAX_VALUE,this.childTop=Number.MAX_VALUE,this.childRight=-Number.MAX_VALUE,this.childBottom=-Number.MAX_VALUE},t.prototype.getPageBounds=function(t,e){if(this.pageLeft===Number.MAX_VALUE)return new Tn(0,0,0,0);var i=void 0!==t?Math.min(this.pageLeft,0):this.pageLeft,n=void 0!==e?Math.min(this.pageTop,0):this.pageTop;return new Tn(Math.round(i),Math.round(n),Math.round(this.pageRight-i),Math.round(this.pageBottom-n))},t.prototype.getQuad=function(t){return this.quadTable[t.id]},t}(),rb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ob=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ab=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rb(e,t),ob([jt(!1)],e.prototype,"preventDefaults",void 0),e}(re),lb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hb=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},cb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lb(e,t),hb([jt("")],e.prototype,"action",void 0),hb([jt("")],e.prototype,"cursor",void 0),e}(re),db=function(){function t(){this.size=20,this.intermediatePoints=[],this.gridCollection=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.considerWalkable=[],this.skipObstacleCheck=!1,this.nonWalkableGrids=[]}return t.prototype.lineRouting=function(t){var e=t.connectors.length;if(this.renderVirtualRegion(t),e>0)for(var i=0;i<e;i++){var n=t.connectors[parseInt(i.toString(),10)];"Orthogonal"===n.type&&n.visible&&this.refreshConnectorSegments(t,n,!0)}},t.prototype.renderVirtualRegion=function(t,e){var i=this.size;(t.spatialSearch.pageTop<0||t.spatialSearch.pageLeft<0)&&(i=this.size+this.size/2);var n=t.spatialSearch.pageRight+i,s=t.spatialSearch.pageBottom+i,r=t.spatialSearch.pageLeft-i,o=t.spatialSearch.pageTop-i;if(r=r<0?r-20:0,o=o<0?o-20:0,e&&(this.width!==n-r||this.height!==s-o||this.diagramStartX!==r||this.diagramStartY!==o)||void 0===e){this.width=n-r,this.height=s-o,this.diagramStartX=r,this.diagramStartY=o,this.gridCollection=[],this.noOfRows=this.width/this.size,this.noOfCols=this.height/this.size;for(var a=this.size,l=this.diagramStartX<0?this.diagramStartX:0,h=this.diagramStartY<0?this.diagramStartY:0,c=0;c<this.noOfCols;c++){for(var d=0;d<this.noOfRows;d++){0===c&&this.gridCollection.push([0]);var p={x:l,y:h,width:a,height:a,gridX:d,gridY:c,walkable:!0,tested:void 0,nodeId:[]};this.gridCollection[parseInt(d.toString(),10)][parseInt(c.toString(),10)]=p,l+=a}l=this.diagramStartX<0?this.diagramStartX:0,h+=a}0!==this.nonWalkableGrids.length&&(this.nonWalkableGrids.length=0)}var u=this.findNodes(t.nodes);this.updateNodesInVirtualRegion(u)},t.prototype.findNodes=function(t){for(var e,i=[],n=0;n<t.length;n++)"SwimLane"===(e=t[parseInt(n.toString(),10)]).shape.type||e.isLane||e.isPhase||e.isHeader||!e.visible||i.push(e);return i},t.prototype.updateNodesInVirtualRegion=function(t){for(var e=this.size,i=0,n=this.nonWalkableGrids;i<n.length;i++){(h=n[i]).walkable=!0,h.tested=void 0,h.nodeId=[],h.parentNodeId=""}0!==this.nonWalkableGrids.length&&(this.nonWalkableGrids.length=0);for(var s=0;s<t.length;s++){var r=t[parseInt(s.toString(),10)],o=r.wrapper.bounds;if(o)for(var a=0,l=this.getGridsIntersectBounds(o);a<l.length;a++){var h=l[a],c=new Tn(h.x,h.y,e,e);this.intersectRect(c,o)&&(h.nodeId.push(r.id),h.walkable=!1,this.nonWalkableGrids.push(h),""!==r.parentId&&(h.parentNodeId=r.parentId))}}},t.prototype.getGridsIntersectBounds=function(t){for(var e=[],i=t.topLeft.x,n=t.bottomRight.x,s=t.topLeft.y,r=t.bottomRight.y,o=this.size,a=Math.floor((i-this.diagramStartX)/o),l=Math.floor((s-this.diagramStartY)/o),h=Math.floor((n-this.diagramStartX)/o),c=Math.floor((r-this.diagramStartY)/o),d=a;d<=h;d++)for(var p=l;p<=c;p++){var u=this.gridCollection[parseInt(d.toString(),10)];if(u){var g=u[parseInt(p.toString(),10)];g&&-1===e.indexOf(g)&&e.push(g)}}return e},t.prototype.intersectRect=function(t,e){return!(e.left>=t.right||e.right<=t.left||e.top>=t.bottom||e.bottom<=t.top)},t.prototype.findEndPoint=function(t,e,i){var n,s;if(e&&""!==t.sourcePortID&&t.sourcePortWrapper||!e&&""!==t.targetPortID&&t.targetPortWrapper){s=Zd(n=e?{x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY}:{x:t.targetPortWrapper.offsetX,y:t.targetPortWrapper.offsetY},void 0,e?t.sourceWrapper.bounds:t.targetWrapper.bounds);var r=e?t.sourcePortWrapper.bounds:t.targetPortWrapper.bounds;n=i?"Top"===s?{x:r.topCenter.x,y:r.topCenter.y}:"Left"===s?{x:r.middleLeft.x,y:r.middleLeft.y}:"Right"===s?{x:r.middleRight.x,y:r.middleRight.y}:{x:r.bottomCenter.x,y:r.bottomCenter.y}:{x:r.center.x,y:r.center.y}}else n=e&&this.startNode||!e&&this.targetNode?e?{x:this.startNode.wrapper.offsetX,y:this.startNode.wrapper.offsetY}:{x:this.targetNode.wrapper.offsetX,y:this.targetNode.wrapper.offsetY}:e?{x:t.sourcePoint.x,y:t.sourcePoint.y}:{x:t.targetPoint.x,y:t.targetPoint.y};return n},t.prototype.getGridsIntersect=function(t,e){var i=[],n=Math.min(t.x,e.x),s=Math.min(t.y,e.y),r=Math.max(t.x,e.x),o=Math.max(t.y,e.y),a=this.size,l=Math.floor((n-this.diagramStartX)/a),h=Math.floor((s-this.diagramStartY)/a),c=Math.floor((r-this.diagramStartX)/a),d=Math.floor((o-this.diagramStartY)/a);if(r-n>o-s)for(var p=l;p<=c;p++){if(g=this.gridCollection[parseInt(p.toString(),10)])(m=g[parseInt(h.toString(),10)])&&-1===i.indexOf(m)&&i.push(m)}else for(var u=h;u<=d;u++){var g,m;if(g=this.gridCollection[parseInt(l.toString(),10)])(m=g[parseInt(u.toString(),10)])&&-1===i.indexOf(m)&&i.push(m)}return i},t.prototype.isPathWalkable=function(t,e,i,n){for(var s=Math.min(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.x,e.x),a=Math.max(t.y,e.y),l=this.getGridsIntersect(t,e),h=0;h<l.length;h++){var c=l[parseInt(h.toString(),10)];if((!n||-1===c.nodeId.indexOf(n.sourceID)&&-1===c.nodeId.indexOf(n.targetID))&&!c.walkable)for(var d=o-s>a-r,p=0,u=c.nodeId;p<u.length;p++){var g=u[p],m=i.nameTable[""+g];if(m){var f=m.wrapper.bounds;if(d){if(f.top-5<r&&f.bottom+5>a)return!1}else if(f.left-5<s&&f.right+5>o)return!1}}}return!0},t.prototype.checkObstaclesIntersect=function(t,e,i){for(var n=1;n<t.length;n++){var s=t[n-1],r=t[parseInt(n.toString(),10)];if(!this.isPathWalkable(s,r,i,e))return!1}return!0},t.prototype.refreshConnectorSegments=function(t,e,i,n){if(e.sourceID&&e.targetID&&e.sourceID!==e.targetID)if(!this.skipObstacleCheck&&e.segments&&e.segments.length<2&&e.intermediatePoints&&this.checkObstaclesIntersect(e.intermediatePoints,e,t))t.avoidLineOverlappingModule&&i&&(t.avoidLineOverlappingModule.addConnector(e),t.avoidLineOverlappingModule.refreshModifiedConnectors(t));else{var s,r,o,a,l,h,c,d,p,u,g,m=e.sourceID,f=e.targetID,y=e.sourcePortID,v=e.targetPortID;if(function(t,e){var i=0;return t.constraints&cs.LineRouting?i=t.constraints&cs.LineRouting:t.constraints&cs.InheritLineRouting&&(i=e.constraints&ms.LineRouting),i}(e,t)||n){this.startNode=t.nameTable[""+m],this.targetNode=t.nameTable[""+f],this.intermediatePoints=[],this.startArray=[],this.targetGridCollection=[],this.sourceGridCollection=[],this.startGrid=void 0,this.targetGrid=void 0;for(var b=0;b<this.noOfCols;b++)for(var C=0;C<this.noOfRows;C++)this.gridCollection[parseInt(C.toString(),10)][parseInt(b.toString(),10)].tested=this.gridCollection[parseInt(C.toString(),10)][parseInt(b.toString(),10)].parent=void 0,this.gridCollection[parseInt(C.toString(),10)][parseInt(b.toString(),10)].previousDistance=this.gridCollection[parseInt(C.toString(),10)][parseInt(b.toString(),10)].afterDistance=void 0,this.gridCollection[parseInt(C.toString(),10)][parseInt(b.toString(),10)].totalDistance=void 0;s=this.findEndPoint(e,!0),r=this.findEndPoint(e,!1);for(b=0;b<this.noOfRows;b++)for(C=0;C<this.noOfCols;C++){o=this.gridCollection[parseInt(b.toString(),10)][parseInt(C.toString(),10)];var I=new Tn(o.x,o.y,o.width,o.height);if(!I.containsPoint(s)||this.startGrid||-1===o.nodeId.indexOf(m)&&""!==m||(this.startGrid=(y&&this.startGrid,o)),!I.containsPoint(r)||this.targetGrid||-1===o.nodeId.indexOf(f)&&""!==f||(this.targetGrid=(v&&this.targetGrid,o)),!y&&this.startNode){var M=this.startNode.wrapper.bounds;I.containsPoint(M.topCenter)&&!a&&(a=o),I.containsPoint(M.middleLeft)&&!h&&(h=o),I.containsPoint(M.middleRight)&&!c&&(c=o),I.containsPoint(M.bottomCenter)&&!l&&(l=o)}if(!v&&this.targetNode){M=this.targetNode.wrapper.bounds;I.containsPoint(M.topCenter)&&!p&&(p=o),I.containsPoint(M.middleLeft)&&!g&&(g=o),I.containsPoint(M.middleRight)&&!d&&(d=o),I.containsPoint({x:M.bottomCenter.x,y:M.bottomCenter.y})&&!u&&(u=o)}}this.findEdgeBoundary(y,h,c,a,l,!0),this.findEdgeBoundary(v,g,d,p,u,!1),this.startGrid.totalDistance=0,this.startGrid.previousDistance=0,this.intermediatePoints.push({x:this.startGrid.gridX,y:this.startGrid.gridY}),this.startArray.push(this.startGrid),e&&g&&d&&p&&u&&this.checkObstacles(e,t,g,d,p,u);t:for(;this.startArray.length>0;){var S=this.startArray.pop();if(S){for(b=0;b<this.targetGridCollection.length;b++){var x=this.targetGridCollection[parseInt(b.toString(),10)];if(S&&S.gridX===x.gridX&&S.gridY===x.gridY){if(this.getIntermediatePoints(S),this.optimizeIntermediatePoints(),S.nodeId&&S.nodeId.length>1&&(e.segments=[]),this.updateConnectorSegments(t,this.intermediatePoints,this.gridCollection,e,i)){this.considerWalkable=[];break t}this.targetGridCollection.splice(this.targetGridCollection.indexOf(x),1),S=this.startArray.pop()}}S&&this.findPath(S)}}}}},t.prototype.checkChildNodes=function(t,e){var i=!1,n=!1;if(t.nodeId.length>=1&&!e)for(var s=0;s<t.nodeId.length;s++){for(var r=t.nodeId[parseInt(s.toString(),10)],o=0;o<t.nodeId.length;o++)this.targetNode.parentId===t.nodeId[parseInt(o.toString(),10)]&&(n=!0);i=!n&&this.targetNode.id===r}else 1===t.nodeId.length&&(i=!0);return i},t.prototype.findEdgeBoundary=function(t,e,i,n,s,r){var o,a=r?this.sourceGridCollection:this.targetGridCollection;if(!t&&(r?this.startNode:this.targetNode)){for(var l=e.gridX;l<=i.gridX;l++)o=this.gridCollection[parseInt(l.toString(),10)][e.gridY],(this.checkChildNodes(o,r)&&(l===e.gridX||l===i.gridX)||l!==e.gridX&&l!==i.gridX)&&a.push(o);for(l=n.gridY;l<=s.gridY;l++)o=this.gridCollection[n.gridX][parseInt(l.toString(),10)],(this.checkChildNodes(o,r)&&(l===n.gridY||l===s.gridY)||l!==n.gridY&&l!==s.gridY)&&-1===a.indexOf(o)&&a.push(o)}else a.push(r?this.startGrid:this.targetGrid)},t.prototype.checkObstacles=function(t,e,i,n,s,r){var o,a=this.findNearestNeigbours(this.startGrid,this.gridCollection,!0);0===a.length&&(""!==t.sourcePortID?"Top"===(o=Zd({x:t.sourcePortWrapper.offsetX,y:t.sourcePortWrapper.offsetY},void 0,t.sourceWrapper.bounds))?this.resetGridColl(this.startGrid,"top",!0):"Right"===o?this.resetGridColl(this.startGrid,"right",!0):"Bottom"===o?this.resetGridColl(this.startGrid,"bottom",!0):this.resetGridColl(this.startGrid,"left",!0):(this.resetGridColl(this.startGrid,"top",!0),this.resetGridColl(this.startGrid,"right",!0),this.resetGridColl(this.startGrid,"bottom",!0),this.resetGridColl(this.startGrid,"left",!0)));0===(a=this.findNearestNeigbours(this.targetGrid,this.gridCollection,!1)).length&&(""!==t.targetPortID?"Top"===(o=Zd({x:t.targetPortWrapper.offsetX,y:t.targetPortWrapper.offsetY},void 0,t.targetWrapper.bounds))?this.resetGridColl(this.targetGrid,"top",!0):"Right"===o?this.resetGridColl(this.targetGrid,"right",!0):"Bottom"===o?this.resetGridColl(this.targetGrid,"bottom",!0):this.resetGridColl(this.targetGrid,"left",!0):(this.resetGridColl(this.targetGrid,"top",!1),this.resetGridColl(this.targetGrid,"right",!1),this.resetGridColl(this.targetGrid,"bottom",!1),this.resetGridColl(this.targetGrid,"left",!1)));if(this.targetGridCollection.length>1&&this.targetGridCollection[0].nodeId.length>1)for(var l=0;l<=1;l++){for(var h=this.targetGridCollection[parseInt(l.toString(),10)].gridX,c=this.targetGridCollection[parseInt(l.toString(),10)].gridY,d=this.targetGridCollection[parseInt(l.toString(),10)].nodeId,p=void 0,u=0;u<d.length;u++)if(this.targetNode.id!==d[parseInt(u.toString(),10)]){p=d[parseInt(u.toString(),10)];break}var g=void 0,m=void 0,f=void 0;e.nameTable[this.targetNode.id]&&(g=e.nameTable[this.targetNode.id].wrapper),e.nameTable[""+p]&&(m=e.nameTable[""+p].wrapper),g&&m&&(f=this.contains(m.bounds,g.bounds));for(var y=void 0,v=0;v<d.length;v++)this.targetNode.parentId===d[parseInt(v.toString(),10)]&&(y=!0);if(!this.gridCollection[parseInt(h.toString(),10)][parseInt(c.toString(),10)].walkable&&f&&!y){var b=void 0,C=void 0;b=this.getEndvalue(i,"left"),C=i.gridX-b.gridX,this.changeValue(i,C,"left"),C=(b=this.getEndvalue(n,"right")).gridX-n.gridX,this.changeValue(n,C,"right"),b=this.getEndvalue(s,"top"),C=s.gridY-b.gridY,this.changeValue(s,C,"top"),b=this.getEndvalue(r,"bottom"),C=r.gridY-b.gridY,this.changeValue(r,C,"top")}}},t.prototype.contains=function(t,e){return t.left<=e.left&&t.right>=e.right&&t.top<=e.top&&t.bottom>=e.bottom},t.prototype.getEndvalue=function(t,e){return this.gridCollection[t.gridX][t.gridY].walkable?t:"left"===e?this.getEndvalue(this.gridCollection[t.gridX-1][t.gridY],e):"right"===e?this.getEndvalue(this.gridCollection[t.gridX+1][t.gridY],e):"top"===e?this.getEndvalue(this.gridCollection[t.gridX][t.gridY-1],e):"bottom"===e?this.getEndvalue(this.gridCollection[t.gridX][t.gridY+1],e):t},t.prototype.changeValue=function(t,e,i){var n;t.walkable||this.considerWalkable.push(t);for(var s=0;s<=e;s++)"left"===i?n=this.gridCollection[t.gridX-s][t.gridY]:"right"===i?n=this.gridCollection[t.gridX+s][t.gridY]:"top"===i?n=this.gridCollection[t.gridX][t.gridY-s]:"bottom"===i&&(n=this.gridCollection[t.gridX][t.gridY+s]),n.walkable||this.considerWalkable.push(n)},t.prototype.getIntermediatePoints=function(t){var e;for(this.intermediatePoints=[];t;)this.intermediatePoints.push({x:t.gridX,y:t.gridY}),t=t.parent;this.intermediatePoints.reverse(),this.intermediatePoints.length>=1&&void 0!==this.intermediatePoints[0]&&void 0!==this.intermediatePoints[1]&&(this.intermediatePoints[0].x===this.intermediatePoints[1].x?this.intermediatePoints[0].y<this.intermediatePoints[1].y?(e=this.neigbour(this.startGrid,"bottom",void 0,!0),this.intermediatePoints[0].y+=e-1):(e=this.neigbour(this.startGrid,"top",void 0,!0),this.intermediatePoints[0].y-=e-1):this.intermediatePoints[0].x<this.intermediatePoints[1].x?(e=this.neigbour(this.startGrid,"right",void 0,!0),this.intermediatePoints[0].x+=e-1):(e=this.neigbour(this.startGrid,"left",void 0,!0),this.intermediatePoints[0].x-=e-1))},t.prototype.optimizeIntermediatePoints=function(){this.intermediatePoints=this.removePointsInSameLine(this.intermediatePoints),this.intermediatePoints=this.getValidPoints(this.intermediatePoints)},t.prototype.removePointsInSameLine=function(t){if(t.length<3)return t;for(var e=[t[0]],i=1;i<t.length-1;i++){var n=e[e.length-1],s=t[parseInt(i.toString(),10)],r=t[i+1];this.arePointsInSameLine(n,s,r)||e.push(s)}return e.push(t[t.length-1]),e},t.prototype.arePointsInSameLine=function(t,e,i){return(e.x-t.x)*(i.y-t.y)===(i.x-t.x)*(e.y-t.y)},t.prototype.getValidPoints=function(t){if(t.length<4)return t;for(var e=1;e<t.length-3;){var i=t[parseInt(e.toString(),10)],n=t[e+1],s=t[e+2],r=t[e+3];if(i.x===n.x){if(n.y<i.y&&r.y<s.y||n.y>i.y&&r.y>s.y){for(var o=i.x<s.x?1:-1,a=n.y<i.y?-1:1,l=i.x+o,h=i.y,c=!1;l!==r.x||h!==r.y;){if(!this.isWalkable(l,h)){c=!1;break}c=!0,l!==s.x?l+=o:h+=a}if(c){i.x=s.x,t.splice(e+1,2);continue}}}else if(i.y===n.y&&(n.x<i.x&&r.x<s.x||n.x>i.x&&r.x>s.x)){for(var d=i.y<s.y?1:-1,p=n.x<i.x?-1:1,u=i.y+d,g=i.x,m=!1;g!==r.x||u!==r.y;){if(!this.isWalkable(g,u)){m=!1;break}m=!0,u!==s.y?u+=d:g+=p}if(m){i.y=s.y,t.splice(e+1,2);continue}}e++}return t},t.prototype.updateConnectorSegments=function(t,e,i,n,s){var r,o,a,l,h,c,d,p,u,g=[],m=[],f=n.targetWrapper,y=n.sourceWrapper,v=this.findEndPoint(n,!0);""===n.targetPortID&&n.targetWrapper||(o=this.findEndPoint(n,!1,!0));for(var b=0;b<e.length;b++)(h=i[e[parseInt(b.toString(),10)].x][e[parseInt(b.toString(),10)].y])&&(a=h.x+h.width/2,l=h.y+h.height/2,m.push({x:a,y:l}),b>=1&&m.length>1&&(p=m[m.length-2].x!==m[m.length-1].x?m[m.length-2].x>m[m.length-1].x?"Left":"Right":m[m.length-2].y>m[m.length-1].y?"Top":"Bottom"),b>=2&&u===p&&m.length>1&&m.splice(m.length-2,1),u=p);if(m&&m.length>1){for(var C=0;C<m.length-1;C++){var I=m[parseInt(C.toString(),10)],M=m[C+1];if(I.x!==M.x){if(0===C&&""===n.sourcePortID&&y&&(v=I.x>M.x?y.bounds.middleLeft:y.bounds.middleRight),C===m.length-2&&""===n.targetPortID&&f&&(o=I.x>M.x?f.bounds.middleRight:f.bounds.middleLeft),0===C&&v){if(I.x=v.x,I.y=M.y=v.y,""===n.sourcePortID){var S=I.x>M.x?"Left":"Right";v=Od(n,0,v,Nd(y.bounds,Xd(S)),!1)}I.x=v.x}C===m.length-2&&o&&(C>0&&n.targetDecorator&&o.x-M.x<0&&Math.abs(o.x-I.x)<n.targetDecorator.width+1&&(I.x=m[C-1].x-=this.size/2),C>0&&n.targetDecorator&&o.x-M.x>0&&Math.abs(o.x-I.x)<n.targetDecorator.width+1&&(I.x=m[C-1].x+=this.size/2),M.x=o.x,I.y=M.y=o.y)}else{if(0===C&&""===n.sourcePortID&&y&&(v=I.y>M.y?y.bounds.topCenter:y.bounds.bottomCenter),C===m.length-2&&""===n.targetPortID&&f&&(o=I.y>M.y?f.bounds.bottomCenter:f.bounds.topCenter),0===C&&v){if(I.y=v.y,I.x=M.x=v.x,""===n.sourcePortID){var x=I.y>M.y?"Top":"Bottom";v=Od(n,0,v,Nd(y.bounds,Xd(x)),!1)}I.y=v.y}C===m.length-2&&o&&(C>0&&n.targetDecorator&&o.y-M.y<0&&Math.abs(o.y-I.y)<n.targetDecorator.height+1&&(I.y=m[C-1].y-=this.size/2),C>0&&n.targetDecorator&&o.y-M.y>0&&Math.abs(o.y-I.y)<n.targetDecorator.height+1&&(I.y=m[C-1].y+=this.size/2),M.y=o.y,I.x=M.x=o.x)}}if(t.avoidLineOverlappingModule&&s){t.avoidLineOverlappingModule.addConnector(n,m);var w=t.avoidLineOverlappingModule.getModifiedConnector();w.has(n)&&(g=t.avoidLineOverlappingModule.getModifiedConnectorSegments(n),w.delete(n)),w.size>0&&t.avoidLineOverlappingModule.refreshModifiedConnectors(t)}if(0===g.length)for(C=0;C<m.length-1;C++){I=m[parseInt(C.toString(),10)],M=m[C+1];I.x!==M.x?I.x>M.x?(c="Left",d=I.x-M.x):(c="Right",d=M.x-I.x):I.y>M.y?(c="Top",d=I.y-M.y):(c="Bottom",d=M.y-I.y),r={type:"Orthogonal",length:d,direction:c},g.push(r)}}if(g&&g.length>0){var D=g[g.length-1];if(1===g.length&&(D.length-=20),D.length<10&&2===g.length&&(g.pop(),g.length>0&&(g[0].length-=20,D=g[0])),n.targetDecorator&&("Top"===D.direction||"Bottom"===D.direction)&&D.length>n.targetDecorator.height+1||("Right"===D.direction||"Left"===D.direction)&&D.length>n.targetDecorator.width+1)return!s&&t.avoidLineOverlappingModule||(n.segments=g),s&&t.connectorPropertyChange(n,{},{type:"Orthogonal",segments:g}),!0}return!1},t.prototype.findPath=function(t){for(var e,i=[],n=this.findNearestNeigbours(t,this.gridCollection,!0),s=0;s<n.length;s++)if(null!==(e=this.findIntermediatePoints(n[parseInt(s.toString(),10)].gridX,n[parseInt(s.toString(),10)].gridY,t.gridX,t.gridY,this.targetGrid.gridX,this.targetGrid.gridY))){var r=this.gridCollection[e.x][e.y],o=this.octile(Math.abs(e.x-t.gridX),Math.abs(e.y-t.gridY));t.parent&&t.parent.parent&&r.gridX!==t.parent.gridX&&r.gridY!==t.parent.gridY&&(o+=.1);var a=t.previousDistance+o;r.previousDistance&&!(r.previousDistance>a)||e.x===t.gridX&&e.y===t.gridY||(i.push(e),r.previousDistance=a,r.afterDistance=r.afterDistance||this.manhattan(Math.abs(e.x-this.targetGrid.gridX),Math.abs(e.y-this.targetGrid.gridY)),r.totalDistance=r.previousDistance+r.afterDistance,r.parent=t)}if(i.length>0)for(s=0;s<i.length;s++){r=this.gridCollection[i[parseInt(s.toString(),10)].x][i[parseInt(s.toString(),10)].y];-1===this.startArray.indexOf(r)&&this.startArray.push(r)}this.sorting(this.startArray)},t.prototype.sorting=function(t){return t.sort(function(t,e){return e.totalDistance-t.totalDistance})},t.prototype.octile=function(t,e){var i=Math.SQRT2-1;return e>t?i*t+e:i*e+t},t.prototype.manhattan=function(t,e){return t+e},t.prototype.findNearestNeigbours=function(t,e,i){var n=[],s=t.parent;if(s){var r=(t.gridX-s.gridX)/Math.max(Math.abs(t.gridX-s.gridX),1),o=(t.gridY-s.gridY)/Math.max(Math.abs(t.gridY-s.gridY),1);0!==r?(this.isWalkable(t.gridX,t.gridY-1,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX][t.gridY-1])&&n.push(e[t.gridX][t.gridY-1]),this.isWalkable(t.gridX,t.gridY+1,!0)&&this.sourceGridCollection.indexOf(e[t.gridX][t.gridY+1])&&n.push(e[t.gridX][t.gridY+1]),this.isWalkable(t.gridX+r,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX+r][t.gridY])&&n.push(e[t.gridX+r][t.gridY])):0!==o&&(this.isWalkable(t.gridX-1,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX-1][t.gridY])&&n.push(e[t.gridX-1][t.gridY]),this.isWalkable(t.gridX+1,t.gridY,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX+1][t.gridY])&&n.push(e[t.gridX+1][t.gridY]),this.isWalkable(t.gridX,t.gridY+o,!0)&&-1===this.sourceGridCollection.indexOf(e[t.gridX][t.gridY+o])&&n.push(e[t.gridX][t.gridY+o]))}else this.neigbour(t,"top",n,i),this.neigbour(t,"right",n,i),this.neigbour(t,"bottom",n,i),this.neigbour(t,"left",n,i);return n},t.prototype.neigbour=function(t,e,i,n){for(var s,r=1;r>0;){var o="top"===e||"bottom"===e?t.gridX:"left"===e?t.gridX-r:t.gridX+r,a="right"===e||"left"===e?t.gridY:"top"===e?t.gridY-r:t.gridY+r;if((s=this.gridCollection[parseInt(o.toString(),10)][parseInt(a.toString(),10)])&&(n&&-1===this.sourceGridCollection.indexOf(s)||!n&&-1===this.targetGridCollection.indexOf(s)))return i&&this.isWalkable(o,a)&&i.push(s),r;if(!(o>0&&a>0))break;r++}return null},t.prototype.resetGridColl=function(t,e,i){for(var n,s=1;s>0;){var r="top"===e||"bottom"===e?t.gridX:"left"===e?t.gridX-s:t.gridX+s,o="right"===e||"left"===e?t.gridY:"top"===e?t.gridY-s:t.gridY+s;if((n=this.gridCollection[parseInt(r.toString(),10)][parseInt(o.toString(),10)])&&(i&&-1===this.sourceGridCollection.indexOf(n)||!i&&-1===this.targetGridCollection.indexOf(n))){if(this.isWalkable(r,o))break;var a=this.gridCollection[parseInt(r.toString(),10)][parseInt(o.toString(),10)];this.considerWalkable.push(a)}if(!(r>0&&o>0))break;"top"===e||"left"===e?s--:s++}return null},t.prototype.isWalkable=function(t,e,i){if(t>=0&&t<this.noOfRows&&e>=0&&e<this.noOfCols){var n=this.gridCollection[parseInt(t.toString(),10)][parseInt(e.toString(),10)];if(n&&(n.walkable||(1===n.nodeId.length||2===n.nodeId.length&&n.parentNodeId||-1!==this.considerWalkable.indexOf(n))&&(-1!==this.sourceGridCollection.indexOf(n)||-1!==this.targetGridCollection.indexOf(n)||-1!==this.considerWalkable.indexOf(n)))&&(i&&!n.parent||!i))return!0}return!1},t.prototype.findIntermediatePoints=function(t,e,i,n,s,r){for(var o=t-i,a=e-n,l=t,h=e,c=0;c<this.targetGridCollection.length;c++)if(t===this.targetGridCollection[parseInt(c.toString(),10)].gridX&&e===this.targetGridCollection[parseInt(c.toString(),10)].gridY)return{x:t,y:e};if(!this.isWalkable(t,e))return null;var d=this.gridCollection[parseInt(t.toString(),10)][parseInt(e.toString(),10)];if(d.tested)return{x:t,y:e};if(d.tested=!0,0!==o&&(o=o>0?1:-1,this.isWalkable(l,h-1)&&!this.isWalkable(l-o,h-1)||this.isWalkable(l,h+1)&&!this.isWalkable(l-o,h+1)))return{x:t,y:e};if(0!==a){if(a=a>0?1:-1,this.isWalkable(l-1,h)&&!this.isWalkable(l-1,h-a)||this.isWalkable(l+1,h)&&!this.isWalkable(l+1,h-a))return{x:t,y:e};if(this.findIntermediatePoints(l+1,h,l,h,s,r)||this.findIntermediatePoints(l-1,h,l,h,s,r))return{x:t,y:e}}return this.findIntermediatePoints(l+o,h+a,l,h,s,r)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LineRouting"},t}(),pb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ub=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},gb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pb(e,t),ub([jt(!0)],e.prototype,"inversedAlignment",void 0),e}(re),mb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fb=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};!function(t){t.Synchronous="Synchronous",t.Asynchronous="Asynchronous",t.Reply="Reply",t.Create="Create",t.Delete="Delete",t.Self="Self"}(mv||(mv={})),function(t){t.Alternative="Alternative",t.Loop="Loop",t.Optional="Optional"}(fv||(fv={})),function(t){t.Solid="Solid",t.Dashed="Dashed",t.SolidArrow="SolidArrow",t.DashedArrow="DashedArrow",t.Bidirectional="Bidirectional",t.DashedBidirectional="DashedBidirectional",t.OpenArrow="OpenArrow",t.DashedOpenArrow="DashedOpenArrow"}(yv||(yv={}));var yb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mb(e,t),fb([jt(void 0)],e.prototype,"id",void 0),fb([jt(void 0)],e.prototype,"startMessageID",void 0),fb([jt(void 0)],e.prototype,"endMessageID",void 0),e}(re),vb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=100,e.height=50,e}return mb(e,t),fb([jt(void 0)],e.prototype,"id",void 0),fb([jt("")],e.prototype,"content",void 0),fb([jt(!1)],e.prototype,"isActor",void 0),fb([jt(!1)],e.prototype,"showDestructionMarker",void 0),fb([Rt([],yb)],e.prototype,"activationBoxes",void 0),e}(re),bb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mb(e,t),fb([jt(void 0)],e.prototype,"id",void 0),fb([jt(void 0)],e.prototype,"fromParticipantID",void 0),fb([jt(void 0)],e.prototype,"toParticipantID",void 0),fb([jt("")],e.prototype,"content",void 0),fb([jt("Synchronous")],e.prototype,"type",void 0),e}(re),Cb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mb(e,t),fb([jt("")],e.prototype,"content",void 0),fb([jt([])],e.prototype,"messageIds",void 0),fb([jt(void 0)],e.prototype,"fragmentIds",void 0),e}(re),Ib=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mb(e,t),fb([jt(void 0)],e.prototype,"id",void 0),fb([jt("Optional")],e.prototype,"type",void 0),fb([Rt([],Cb)],e.prototype,"conditions",void 0),e}(re),Mb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isLoadedFromMermaid=!1,e.hideFootBox=!0,e.activationWidth=20,e.initialLifelineLength=100,e.messageSpacing=50,e.participantWidth=100,e.participantHeight=50,e.margin=0,e}return mb(e,t),e.prototype.parse=function(t,e){this.diagram=e,this.diagram.clear(),Rb.clearLifelines(),zb.clearMessages();var i=new Fb(e);this.model=i.parse(t),this.isLoadedFromMermaid=!0},e.prototype.loadDiagramFromMermaid=function(t,e){new Ob(e).render(this.model,this),this.mermaidData=t},e.prototype.generateMermaidFromModel=function(){return(new Wb).generateMermaidText(this)},e.prototype.updateUmlSequenceDiagram=function(t){this.diagram||(this.diagram=t),this.diagram.clear(),Rb.clearLifelines(),zb.clearMessages(),this.model=new Sb(this.diagram),this.model.isLoadedFromMermaid=!1,this.model.updateParticipants(this.participants),this.model.updateMessages(this.messages),this.model.updateActivations(this.participants),this.model.updateFragments(this.fragments)},e.prototype.render=function(){new Ob(this.diagram).render(this.model,this),this.isLoadedFromMermaid=!1},fb([Rt([],vb)],e.prototype,"participants",void 0),fb([Rt([],bb)],e.prototype,"messages",void 0),fb([Rt([],Ib)],e.prototype,"fragments",void 0),fb([jt(100)],e.prototype,"spaceBetweenParticipants",void 0),e}(re),Sb=function(){function t(t){this.maxParticipantWidth=100,this.maxParticipantHeight=50,this.isLoadedFromMermaid=!1,this.diagram=t,xb.clearMessageMapping(),this.participants=new Map,this.messages=[],this.activations=[],this.fragments=[],this.affectedParticipants=[],this.destroyedParticipants=[],this.destroyAtEndParticipants=[],this.aliases=new Map}return t.prototype.addParticipant=function(t){xb.updateNodeColor(t,"#6495ED"),this.diagram.nodes.push(t),this.participants.set(t.id,t),this.addLifeLine(t)},t.prototype.addLifeLine=function(t){var e=new Rg(this.diagram,"connectors",{id:t.id+"_Lifeline"});xb.updateConnectorStyles(e,"Dashed"),this.diagram.connectors.push(e),Rb.lifelines.set(t.id,e)},t.prototype.addMessage=function(t){this.diagram.connectors.push(t),this.messages.push(t)},t.prototype.addActivation=function(t){xb.updateNodeColor(t.node,"#6495ED"),this.diagram.nodes.push(t.node),this.activations.push(t)},t.prototype.addFragment=function(t){t.node&&this.diagram.nodes.push(t.node),this.fragments.push(t)},t.prototype.addAlias=function(t,e){this.aliases.set(t,e)},t.prototype.updateParticipants=function(t){this.participants.clear();for(var e=0,i=0,n=0,s=t;n<s.length;n++){var r=s[n];if(r.id){var o=new Ny(this.diagram,"nodes",{id:r.id.toString(),width:r.width,height:r.height,data:r},!0);xb.updateNodeShape(o,r.isActor),xb.updateAnnotation(o,r.content,r.isActor),r.showDestructionMarker&&this.destroyAtEndParticipants.push(r.id.toString()),this.addParticipant(o),r.width>e&&(e=r.width),r.height>i&&(i=r.height)}else console.warn("[WARNING] :: Participant ID cannot be undefined.")}this.maxParticipantWidth=e,this.maxParticipantHeight=i},t.prototype.updateMessages=function(t){this.messages=[],this.affectedParticipants=[];for(var e=0,i=t;e<i.length;e++){var n=i[e];if(n.id){var s=null,r=null;if(n.type===mv.Self?r=s=this.getNodeFromId(n.fromParticipantID||n.toParticipantID):(s=this.getNodeFromId(n.fromParticipantID),r=this.getNodeFromId(n.toParticipantID)),s&&r){var o=new Rg(this.diagram,"connectors",{id:n.id.toString()});xb.addOrUpdateParticipantDetails(o,s.id,r.id,n.type,null),xb.updateConnectorStyles(o,n.type.toString()),xb.updateAnnotation(o,n.content),n.type===mv.Create?(xb.addOrUpdateParticipantDetails(o,s.id,r.id,mv.Create,n.toParticipantID.toString()),this.affectedParticipants.push(n.toParticipantID.toString())):n.type===mv.Delete&&(xb.addOrUpdateParticipantDetails(o,s.id,r.id,mv.Delete,n.toParticipantID.toString()),-1===this.affectedParticipants.indexOf(n.toParticipantID.toString())&&this.affectedParticipants.push(n.toParticipantID.toString()),this.destroyedParticipants.push(n.toParticipantID.toString())),this.addMessage(o)}}else console.warn("[WARNING] :: Message ID cannot be undefined.")}},t.prototype.updateActivations=function(t){this.activations=[];for(var e=0,i=t;e<i.length;e++){var n=i[e];if(n.id&&n.activationBoxes&&n.activationBoxes.length>0)for(var s=0,r=n.activationBoxes;s<r.length;s++){var o=r[s];if(o.startMessageID&&o.endMessageID){var a=this.getNodeFromId(n.id),l=o.id?o.id.toString():Hn(),h=new Ny(this.diagram,"nodes",{id:a.id+"_Activation_"+l,minHeight:10,minWidth:10,data:o});xb.updateNodeShape(h,!1);var c=this.getConnectorFromId(o.startMessageID),d=this.getConnectorFromId(o.endMessageID);if(c&&d){var p=xb.getParticipantDetails(c),u=xb.getParticipantDetails(d),g=new Db(c.id,p.sourceParticipantName,p.targetParticipantName,xb.getAnnotation(c),0),m=new Db(d.id,u.sourceParticipantName,u.targetParticipantName,xb.getAnnotation(d),0),f=new wb(h,a.id,g,m,0);this.addActivation(f)}else console.warn("[WARNING] :: Activation or deactivation connector details not found.")}}}},t.prototype.updateFragments=function(t){this.fragments=[];for(var e=0,i=t;e<i.length;e++){var n=i[e];if(n.id){var s=this.processFragment(n);this.removeChildFragmentsFromCollection(s),this.addFragment(s)}else console.warn("[WARNING] :: Fragment ID cannot be null.")}},t.prototype.removeChildFragmentsFromCollection=function(t){for(var e=0,i=t.childFragments;e<i.length;e++){var n=i[e],s=this.fragments.indexOf(n);-1!==s&&this.fragments.splice(s,1),this.removeChildFragmentsFromCollection(n)}},t.prototype.processFragment=function(t){for(var e=new Eb(t.id.toString(),t.type,[],[],new Ny(this.diagram,"nodes",{id:t.id.toString()+"_Fragment",data:t,shape:{type:"Path"},style:{fill:"transparent",strokeColor:"#000000",strokeWidth:1}}),0),i=0,n=t.conditions;i<n.length;i++){var s=n[i],r=new Tb(s.content,[],[],new Ab);if(s.fragmentIds)for(var o=function(t){var i=a.fragments.find(function(e){return e.id===t});i?(r.nestedFragments.push(i),e.childFragments.push(i)):console.warn("[WARNING] :: Please ensure that all child fragments are defined in the collection before their respective parent fragments.")},a=this,l=0,h=s.fragmentIds;l<h.length;l++){o(h[l])}this.processSequenceMessageIds(r,s.messageIds),t.type===fv.Alternative&&this.populateConditionAltBlockDetails(r),e.conditions.push(r)}return e},t.prototype.populateConditionAltBlockDetails=function(t){for(var e=function(e){t.altBlockDetails.connectors.some(function(t){return t.id===e.id})||t.altBlockDetails.connectors.push(new Nb(e.id,e.source,e.target,e.message,-1,"",!1,-1))},i=0,n=t.connectors;i<n.length;i++){e(n[i])}for(var s=0,r=t.nestedFragments;s<r.length;s++){var o=r[s];this.addChildFragmentConnectors(t,o)}},t.prototype.addChildFragmentConnectors=function(t,e){for(var i=0,n=e.conditions;i<n.length;i++){for(var s=n[i],r=function(i){t.altBlockDetails.connectors.some(function(t){return t.id===i.id})||t.altBlockDetails.connectors.push(new Nb(i.id,i.source,i.target,i.message,-1,e.id.toString(),!0,-1))},o=0,a=s.connectors;o<a.length;o++){r(a[o])}for(var l=0,h=s.nestedFragments;l<h.length;l++){var c=h[l];this.addChildFragmentConnectors(t,c)}}},t.prototype.processSequenceMessageIds=function(t,e){for(var i=0,n=e;i<n.length;i++){var s=n[i];void 0!==s&&""!==s&&this.processConnector(t,s)}},t.prototype.processConnector=function(t,e){var i=this.getConnectorFromId(e);if(i){var n=xb.getParticipantDetails(i),s=new Db(i.id.toString(),n.sourceParticipantName,n.targetParticipantName,xb.getAnnotation(i),0);t.connectors.push(s)}},t.prototype.getNodeFromId=function(t){var e;return t?this.participants.has(t.toString())?e=this.participants.get(t.toString()):console.warn("[WARNING] :: Participant '"+t.toString()+"' not found."):console.warn("[WARNING] :: ParticipantID is null."),e},t.prototype.getConnectorFromId=function(t){var e=this.messages.find(function(e){return e.id.toString()===t.toString()});return e||console.warn("[WARNING] :: Message ID '"+t.toString()+"' is not found."),e},t}(),xb=function(){function t(){}return t.addOrUpdateParticipantDetails=function(t,e,i,n,s){var r=new Lb(e,i,s,n);this.messageMapping.set(t,r)},t.getParticipantDetails=function(t){return this.messageMapping.get(t)},t.clearMessageMapping=function(){this.messageMapping.clear()},t.updateAnnotation=function(t,e,i){var n=e.trim();if(t instanceof Ny){if(t.annotations=[{content:n,horizontalAlignment:"Center"}],i){var s=t.annotations[0];s.style.textWrapping="NoWrap",s.offset={x:.5,y:1},s.margin={left:0,top:6,right:0,bottom:0}}}else t.annotations=[{content:n,style:{textWrapping:"NoWrap"},margin:{left:0,top:-10,right:0,bottom:0},rotationReference:"Page"}]},t.getAnnotation=function(t){return t.annotations[0].content},t.updateNodeShape=function(t,e){t.shape=e?{type:"Path",data:Vb}:{type:"Path",data:Ub}},t.isActor=function(t){var e=t.shape;return"Path"===e.type&&e.data===Vb},t.updateNodeColor=function(t,e){t.style={fill:e,strokeColor:"#000000",strokeWidth:1}},t.updateConnectorStyles=function(t,e){t.segments=[{type:"Straight"}];var i={fill:"black",strokeColor:"black",strokeWidth:1};t.sourceDecorator={shape:"None",style:i},t.targetDecorator={shape:"None",style:i};var n={strokeColor:"black",strokeWidth:1},s={strokeColor:"black",strokeWidth:1,strokeDashArray:"5,5"};if(this.isMermaidConnectorType(e))switch(e){case"Solid":t.style=n;break;case"Dashed":t.style=s;break;case"SolidArrow":t.style=n,t.targetDecorator.shape="Arrow";break;case"DashedArrow":t.style=s,t.targetDecorator.shape="Arrow";break;case"Bidirectional":t.style=n,t.sourceDecorator.shape="Arrow",t.targetDecorator.shape="Arrow";break;case"DashedBidirectional":t.style=s,t.sourceDecorator.shape="Arrow",t.targetDecorator.shape="Arrow";break;case"OpenArrow":t.style=n,t.targetDecorator.shape="OpenArrow";break;case"DashedOpenArrow":t.style=s,t.targetDecorator.shape="OpenArrow"}else if(this.isUmlSequenceMessageType(e))switch(e){case"Synchronous":case"Delete":t.style=n,t.targetDecorator.shape="Arrow";break;case"Asynchronous":case"Create":t.style=n,t.targetDecorator.shape="OpenArrow";break;case"Reply":t.style=s,t.targetDecorator.shape="OpenArrow";break;case"Self":t.type="Orthogonal",t.segments=[{type:"Orthogonal",length:20,direction:"Left"},{type:"Orthogonal",length:50,direction:"Bottom"},{type:"Orthogonal",length:20,direction:"Right"}],t.style=n,t.targetDecorator.shape="Arrow"}},t.removeConnectableConstraintForNode=function(t){t&&(t.constraints=ps.Default&~(ps.InConnect|ps.OutConnect))},t.isMermaidConnectorType=function(t){return-1!==["Solid","Dashed","SolidArrow","DashedArrow","Bidirectional","DashedBidirectional","OpenArrow","DashedOpenArrow"].indexOf(t)},t.isUmlSequenceMessageType=function(t){return-1!==["Synchronous","Asynchronous","Create","Delete","Reply","Self"].indexOf(t)},t.messageMapping=new Map,t}(),wb=function(){function t(t,e,i,n,s){this._node=null,this.node=t,this.participantName=e,this.activateConnectorDetails=i,this.deactivateConnectorDetails=n,this.depth=s}return Object.defineProperty(t.prototype,"node",{get:function(){return this._node},set:function(t){this._node=t,this._node.annotations=null,xb.removeConnectableConstraintForNode(this._node)},enumerable:!0,configurable:!0}),t}(),Db=function(t,e,i,n,s){this.id="",this.index=-1,this.source="",this.target="",this.message="",this.id=t,this.index=s,this.source=e,this.target=i,this.message=n},Eb=function(){function t(t,e,i,n,s,r,o){this.id="",this.conditions=[],this.depth=0,this.index=0,this.childFragments=[],this.id=t,this.type=e,this.conditions=i,this.childFragments=n,this.node=s,this.index=r,this.depth=o,this.fragmentStartIndex=-1,this.fragmentEndIndex=-1}return Object.defineProperty(t.prototype,"node",{get:function(){return this._node},set:function(t){this._node=t,xb.removeConnectableConstraintForNode(this._node)},enumerable:!0,configurable:!0}),t}(),Tb=function(t,e,i,n){this.content="",this.connectors=[],this.altBlockDetails=new Ab,this.nestedFragments=[],this.conditionStartIndex=-1,this.conditionEndIndex=-1,this.content=t,this.nestedFragments=e,this.connectors=i,this.altBlockDetails=n},Ab=function(){this.connectors=[]},Nb=function(t){function e(e,i,n,s,r,o,a,l){var h=t.call(this,e,i,n,s,r)||this;return h.fragmentID="",h.inFragment=!1,h.fragmentIndex=-1,h.fragmentID=o,h.inFragment=a,h.fragmentIndex=l,h}return mb(e,t),e}(Db),Lb=function(t,e,i,n){this.sourceParticipantName=t,this.targetParticipantName=e,this.affectedParticipantName=i,this.messageType=n},Ob=function(){function t(t){this.diagram=t}return t.prototype.render=function(t,e){e.messageSpacing=50,kb.render(this.diagram,t,e),zb.render(this.diagram,t,e);for(var i=0;i<this.diagram.nodes.length;i++){var n=this.diagram.nodes[parseInt(i.toString(),10)];this.diagram.preventNodesUpdate=!0,this.diagram.nodePropertyChange(n,{},{offsetX:n.offsetX,offsetY:n.offsetY,width:n.width,height:n.height,annotations:n.annotations,ports:n.ports},!0),this.diagram.preventNodesUpdate=!1}for(i=0;i<this.diagram.connectors.length;i++){var s=this.diagram.connectors[parseInt(i.toString(),10)];this.diagram.preventConnectorsUpdate=!0,this.diagram.connectorPropertyChange(s,{},{sourcePoint:s.sourcePoint,targetPoint:s.targetPoint,sourceID:s.sourceID,targetID:s.targetID,sourcePortID:s.sourcePortID,targetPortID:s.targetPortID,sourcePadding:s.sourcePadding,targetPadding:s.targetPadding,sourceDecorator:s.sourceDecorator,targetDecorator:s.targetDecorator,annotations:s.annotations,ports:s.ports,constraints:s.constraints,segments:s.segments},!0),this.diagram.preventConnectorsUpdate=!1}Bb.render(this.diagram,t,e),Hb.render(this.diagram,t,e)},t}(),kb=function(){function t(){}return t.render=function(t,e,i){this.diagram=t,this.model=e,this.settings=i;var n=[];e.participants.forEach(function(t,e){return n.push(t)}),this.updateParticipantsSize(n);for(var s=this.getUpdatedMargin(),r=i.margin+s.x,o=0;o<n.length;o++){var a=n[parseInt(o.toString(),10)];a.offsetX=r,a.offsetY=i.margin+s.y;var l=0;if(o<n.length-1){var h=n[o+1];xb.isActor(h)&&e.isLoadedFromMermaid&&this.resizeWithAspectRatio(h,e.maxParticipantHeight),l=h.width>0?h.width:this.model.maxParticipantWidth}r+=a.width/2+i.spaceBetweenParticipants+l/2,Rb.render(t,e,a,i)}},t.updateParticipantsSize=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];if(xb.isActor(n)){var s=n.annotations[0];s.style.textWrapping="NoWrap",s.offset={x:.5,y:1},s.margin={left:0,top:6,right:0,bottom:0},this.model.isLoadedFromMermaid?this.resizeWithAspectRatio(n,this.model.maxParticipantHeight):this.resizeWithAspectRatio(n,50)}else n.width>0||(n.width=this.model.maxParticipantWidth),n.height>0||(n.height=this.model.maxParticipantHeight)}},t.resizeWithAspectRatio=function(t,e){t.width=e,t.height=1.5*t.width},t.getUpdatedMargin=function(){var t=0,e=0,i=!0;return this.model.participants.forEach(function(n,s){n.width;var r=n.height/2;i&&(t=n.width/2,i=!1),r>e&&(e=r)}),{x:t,y:e}},t}(),zb=function(){function t(){}return t.render=function(t,e,i){this.diagram=t,this.model=e,this.settings=i,this.messageLayouts=[],this.model.participants.forEach(function(t,i){t.height>e.maxParticipantHeight&&(e.maxParticipantHeight=t.height)});var n=i.messageSpacing+e.maxParticipantHeight;this.adjustMessageSpacing(e,i);for(var s=0;s<e.messages.length;s++){var r=e.messages[parseInt(s.toString(),10)];n=this.storeLayoutInfo(n,r),n+=i.messageSpacing}jb.adjustMessagePositionsForFragments(e,this.messageLayouts,i.messageSpacing);var o=this.calculateRequiredLifelineLength();this.model.participants.forEach(function(t,e){Rb.updateLifelineLength(t,o)}),this.updateCreateMessage(),this.updateDestroyMessage(),this.renderMessagesOnLifeline()},t.adjustMessageSpacing=function(t,e){var i=e.messageSpacing;t.maxParticipantHeight>100&&(i+=.5*(t.maxParticipantHeight-100)),this.settings.messageSpacing=Math.max(i,e.messageSpacing)},t.storeLayoutInfo=function(t,e){return this.messageLayouts.push(new Pb(e.id.toString(),t,e)),this.isSelfMessage(e)&&(t+=this.settings.messageSpacing),this.isCreateMessage(e)&&(t+=this.settings.messageSpacing/2),t},t.calculateRequiredLifelineLength=function(){if(!this.messageLayouts||0===this.messageLayouts.length)return this.getTopAndBottomPadding();for(var t=0,e=0,i=this.messageLayouts;e<i.length;e++){var n=i[e];n.yPosition>t&&(t=n.yPosition)}return t+this.settings.messageSpacing},t.getTopAndBottomPadding=function(){return 2*(this.settings.messageSpacing+this.model.maxParticipantHeight)},t.isSelfMessage=function(t){var e=xb.getParticipantDetails(t);return!!e&&e.sourceParticipantName===e.targetParticipantName},t.isCreateMessage=function(t){var e=xb.getParticipantDetails(t);return e&&e.messageType===mv.Create},t.updateCreateMessage=function(){for(var t=function(t){var i=xb.getParticipantDetails(t);if(i&&i.messageType===mv.Create){var n=void 0;if(i.affectedParticipantName&&e.model.participants.has(i.affectedParticipantName)){n=e.model.participants.get(i.affectedParticipantName);var s=e.messageLayouts.find(function(e){return e.messageID===t.id.toString()});s&&(n.offsetY=s.yPosition,Rb.updateLifelinePosition(n,s.yPosition))}}},e=this,i=0,n=this.model.messages;i<n.length;i++){t(n[i])}},t.updateDestroyMessage=function(){for(var t=function(t){var i=xb.getParticipantDetails(t);if(i&&i.messageType===mv.Delete){var n=void 0;if(i.affectedParticipantName&&e.model.participants.has(i.affectedParticipantName)){n=e.model.participants.get(i.affectedParticipantName);var s=e.messageLayouts.find(function(e){return e.messageID===t.id.toString()});s&&Rb.updateLifelineToDestroy(n,t,s.yPosition)}}},e=this,i=0,n=this.model.messages;i<n.length;i++){t(n[i])}},t.renderMessagesOnLifeline=function(){Rb.clearPorts();for(var t=0,e=this.messageLayouts;t<e.length;t++){var i=e[t],n=i.connector,s=xb.getParticipantDetails(n);if(s){var r=this.getLifeline(this.model.participants,s.sourceParticipantName),o=this.getLifeline(this.model.participants,s.targetParticipantName);this.isSelfMessage(n)?this.renderSelfMessage(r,n,i.yPosition):this.renderNormalMessage(r,o,n,i.yPosition)}}},t.renderNormalMessage=function(t,e,i,n){var s=this.createPort(t,n),r=this.createPort(e,n);this.applyActivationPadding(s,i,n,!0),this.applyActivationPadding(r,i,n,!1),this.assignPortOrPoint(i,s,t,n,!0),this.assignPortOrPoint(i,r,e,n,!1)},t.renderSelfMessage=function(t,e,i){var n=this.createPort(t,i),s=this.createPort(t,i+this.settings.messageSpacing);this.applyActivationPadding(n,e,i,!0),this.applyActivationPadding(s,e,i+this.settings.messageSpacing,!1),e.type="Orthogonal",e.segments=[{type:"Orthogonal",length:20,direction:"Left"},{type:"Orthogonal",length:50,direction:"Bottom"},{type:"Orthogonal",length:20,direction:"Right"}],this.assignPortOrPoint(e,n,t,i,!0),this.assignPortOrPoint(e,s,t,i,!1)},t.applyActivationPadding=function(t,e,i,n){var s=xb.getParticipantDetails(e);if(s&&this.model.activations){var r=n?s.sourceParticipantName:s.targetParticipantName;this.isWithinActivation(r,i,e)&&(n?e.sourcePadding=this.settings.activationWidth/2-t.height/2:e.targetPadding=this.settings.activationWidth/2-t.height/2)}},t.isWithinActivation=function(t,e,i){var n=this.model.messages.findIndex(function(t){return t.id.toString()===i.id.toString()});if(-1===n)return!1;for(var s=function(e){if(e.participantName===t&&e.activateConnectorDetails&&e.deactivateConnectorDetails){var i=r.model.messages.findIndex(function(t){return t.id.toString()===e.activateConnectorDetails.id}),s=r.model.messages.findIndex(function(t){return t.id.toString()===e.deactivateConnectorDetails.id});if(-1!==i&&-1!==s){var o=xb.getParticipantDetails(r.model.messages[parseInt(i.toString(),10)]);if(o&&o.sourceParticipantName===o.targetParticipantName&&n===i)return{value:!1};if(n>=i&&n<=s)return{value:!0}}}},r=this,o=0,a=this.model.activations;o<a.length;o++){var l=s(a[o]);if("object"==typeof l)return l.value}return!1},t.createPort=function(t,e){var i=this.getLifelineSourceY(t),n=this.calculateLifelineLength(t,i),s=this.calculateLengthFraction(e,i,n);s=s>1?1:s;var r=new Yc(this.diagram,"ports",{id:Hn(),offset:s});return this.addPortToLifeline(t,r),r},t.assignPortOrPoint=function(t,e,i,n,s){var r=i.sourcePoint.x;if(1===e.offset)s?t.sourcePoint={x:r,y:n}:t.targetPoint={x:r,y:n};else if(s)t.sourceID=i.id,t.sourcePortID=e.id;else{var o=xb.getParticipantDetails(t);if(o&&o.messageType===mv.Create&&o.affectedParticipantName&&o.targetParticipantName===o.affectedParticipantName){var a=void 0;this.model.participants.has(o.affectedParticipantName)&&(a=this.model.participants.get(o.affectedParticipantName),t.targetID=a.id,t.targetPadding=0)}t.targetID||(t.targetID=i.id,t.targetPortID=e.id)}},t.addPortToLifeline=function(t,e){this.diagram.addPorts(t,[e]),this.diagram.protectPropertyChange(!0)},t.getLifelineSourceY=function(t){return t.sourcePoint.y},t.calculateLifelineLength=function(t,e){return t.targetPoint.y-e},t.calculateLengthFraction=function(t,e,i){return(t-e)/i},t.getLifeline=function(t,e){return Rb.lifelines.get(e)},t.clearMessages=function(){this.messageLayouts=[]},t.messageLayouts=[],t}(),Pb=function(t,e,i){this.messageID=t,this.yPosition=e,this.connector=i},jb=function(){function t(){}return t.adjustMessagePositionsForFragments=function(t,e,i){for(var n=0,s=t.fragments;n<s.length;n++){var r=s[n];this.computeFragmentMessageRange(r,t)}var o=[];this.collectAllFragments(t.fragments,o),o.sort(function(t,e){return t.fragmentStartIndex-e.fragmentStartIndex});for(var a=0,l=o;a<l.length;a++){if(!((r=l[a]).fragmentStartIndex<0)){var h=r.childFragments&&r.childFragments.length>0?1.5*i:i,c=.7*i;if(this.shiftMessages(e,r.fragmentStartIndex,h),r.fragmentEndIndex>=0&&r.fragmentEndIndex+1<e.length&&this.shiftMessages(e,r.fragmentEndIndex+1,c),r.type===fv.Alternative){for(var d=0,p=r.conditions;d<p.length;d++){var u=p[d];this.computeConditionMessageRange(u,t)}for(var g=r.conditions.filter(function(t){return t.conditionStartIndex>=0}).sort(function(t,e){return t.conditionStartIndex-e.conditionStartIndex}),m=.8*i,f=1;f<g.length;f++){var y=g[parseInt(f.toString(),10)].conditionStartIndex;y>=0&&y<e.length&&this.shiftMessages(e,y,m)}}}}},t.collectAllFragments=function(t,e){for(var i=0,n=t;i<n.length;i++){var s=n[i];e.push(s),s.childFragments&&s.childFragments.length>0&&this.collectAllFragments(s.childFragments,e)}},t.computeFragmentMessageRange=function(t,e){for(var i=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,s=0,r=t.conditions;s<r.length;s++)for(var o=function(t){var s=e.messages.findIndex(function(e){return e.id.toString()===t.id});s>=0&&s<i&&(i=s),s>n&&(n=s)},a=0,l=r[s].connectors;a<l.length;a++){o(l[a])}for(var h=0,c=t.childFragments;h<c.length;h++){var d=c[h];this.computeFragmentMessageRange(d,e),d.fragmentStartIndex>=0&&d.fragmentStartIndex<i&&(i=d.fragmentStartIndex),d.fragmentEndIndex>n&&(n=d.fragmentEndIndex)}i===Number.MAX_SAFE_INTEGER&&(i=-1),n===Number.MIN_SAFE_INTEGER&&(n=-1),t.fragmentStartIndex=i,t.fragmentEndIndex=n},t.computeConditionMessageRange=function(t,e){for(var i=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,s=function(t){var s=e.messages.findIndex(function(e){return e.id.toString()===t.id});if(s<0)return"continue";s<i&&(i=s),s>n&&(n=s)},r=0,o=t.connectors;r<o.length;r++){s(o[r])}i===Number.MAX_SAFE_INTEGER&&(i=-1),n===Number.MIN_SAFE_INTEGER&&(n=-1),t.conditionStartIndex=i,t.conditionEndIndex=n},t.shiftMessages=function(t,e,i){if(0!==i)for(var n=e;n<t.length;n++)t[parseInt(n.toString(),10)].yPosition+=i},t}(),Bb=function(){function t(){}return t.render=function(t,e,i){this.diagram=t,this.model=e,this.settings=i;for(var n=0,s=e.activations;n<s.length;n++){var r=s[n];this.renderActivation(r)}},t.renderActivation=function(t){var e=this.model.messages.find(function(e){var i=xb.getParticipantDetails(e);return null!=e.id&&e.id===t.activateConnectorDetails.id.toString()&&null!=i&&i.sourceParticipantName===t.activateConnectorDetails.source&&i.targetParticipantName===t.activateConnectorDetails.target&&xb.getAnnotation(e)===t.activateConnectorDetails.message}),i=this.model.messages.find(function(e){var i=xb.getParticipantDetails(e);return null!=e.id&&e.id===t.deactivateConnectorDetails.id.toString()&&null!=i&&i.sourceParticipantName===t.deactivateConnectorDetails.source&&i.targetParticipantName===t.deactivateConnectorDetails.target&&xb.getAnnotation(e)===t.deactivateConnectorDetails.message}),n=this.getParticipantByName(t.participantName),s=e?{x:e.sourcePoint.x,y:e.sourcePoint.y}:{x:0,y:0},r=i?{x:i.targetPoint.x,y:i.targetPoint.y}:{x:0,y:0};t.depth=this.calculateActivationDepth(t,s,r);var o=xb.getParticipantDetails(e);o&&(o.sourceParticipantName===o.targetParticipantName?s.y=e.targetPoint.y:o.messageType===mv.Create&&o.targetParticipantName===t.participantName&&(s.y+=n.height/2+(xb.isActor(n)?15:5)));var a=t.node;a.offsetX=n.offsetX+t.depth*(this.settings.activationWidth/4),a.offsetY=s.y+(r.y-s.y)/2,a.width=this.settings.activationWidth,a.height=Math.abs(s.y-r.y),a.zIndex=-100+t.activateConnectorDetails.index,this.diagram.preventNodesUpdate=!0,this.diagram.nodePropertyChange(a,{},{offsetX:a.offsetX,offsetY:a.offsetY,width:a.width,height:a.height},!0),this.diagram.preventNodesUpdate=!1},t.calculateActivationDepth=function(t,e,i){for(var n=this,s=0,r=0,o=this.model.activations.filter(function(e){return e.participantName===t.participantName&&e!==t&&n.isOverlapping(t,e)}).sort(function(t,e){return t.activateConnectorDetails.index-e.activateConnectorDetails.index});r<o.length;r++){var a=o[r],l=this.getStartPoint(a);e.y>l&&s++}return s},t.isOverlapping=function(t,e){var i=this.getStartPoint(t),n=this.getEndPoint(t),s=this.getStartPoint(e);return i<this.getEndPoint(e)&&s<n},t.getStartPoint=function(t){var e=this.model.messages.find(function(e){return e.id.toString()===t.activateConnectorDetails.id.toString()});return e?e.sourcePoint.y:0},t.getEndPoint=function(t){var e=this.model.messages.find(function(e){return e.id.toString()===t.deactivateConnectorDetails.id.toString()});return e?e.targetPoint.y:0},t.getParticipantByName=function(t){return this.model.participants.has(t)?this.model.participants.get(t):null},t}(),Hb=function(){function t(){}return t.render=function(t,e,i){this.diagram=t,this.model=e,this.settings=i;for(var n=0,s=e.fragments;n<s.length;n++){var r=s[n];this.renderFragment(r)}},t.renderFragment=function(t){for(var e=0,i=t.childFragments;e<i.length;e++){var n=i[e];this.renderFragment(n)}switch(t.type){case fv.Optional:case fv.Loop:this.renderGeneralFragment(t);break;case fv.Alternative:this.renderAlternativeFragment(t)}},t.renderGeneralFragment=function(t){for(var e=0,i=t.conditions;e<i.length;e++){var n=i[e],s=this.calculateFragmentBoundary(n,t);if(s&&0!==s.width&&0!==s.height){this.createFragmentNode(t,n.content,s);var r=t.node;this.diagram.preventNodesUpdate=!0,this.diagram.nodePropertyChange(r,{shape:{type:"Path"}},{shape:r.shape},!0),this.diagram.preventNodesUpdate=!1}}},t.renderAlternativeFragment=function(t){var e=this.calculateAltFragmentBoundary(t);if(e&&0!==e.width&&0!==e.height){this.createFragmentNode(t,t.conditions[0].content,e);var i=t.node;this.updateAlternativeFragmentShape(t,i),this.diagram.preventNodesUpdate=!0,this.diagram.nodePropertyChange(i,{shape:{type:"Path"}},{shape:i.shape},!0),this.diagram.preventNodesUpdate=!1}},t.updateAlternativeFragmentShape=function(t,e){var i=e.wrapper.bounds,n=this.getAlternateFragmentShape(i);n=this.appendConditionDottedLines(t,e,i,n),e.shape={type:"Path",data:n}},t.getAlternateFragmentShape=function(t){var e=t.width,i=t.height,n=19.7,s="M "+t.x+" "+t.y+" L "+(t.x+e)+" "+t.y+" L "+(t.x+e)+" "+(t.y+i)+" L "+t.x+" "+(t.y+i)+" Z";return s+" "+s+" "+("M "+t.x+" "+t.y+" H "+(t.x+40)+" V "+(t.y+9.85+n/6)+" C "+(t.x+40-7.6)+" "+(t.y+n)+" "+(t.x+40)+" "+(t.y+9.85+n/6)+" "+(t.x+40-7.6)+" "+(t.y+n)+" H "+t.x+" Z")},t.appendConditionDottedLines=function(t,e,i,n){for(var s=0;s<t.conditions.length-1;s++){var r=t.conditions[parseInt(s.toString(),10)],o=t.conditions[s+1],a=this.calculateCenterYBetweenConditions(r,o);0===a&&(a=i.top+i.height/(t.conditions.length+1)*(s+1)),n+=this.createDashedLinePath(e,i,a),this.addAnnotationForAlternativeCondition(e,a,i,o)}return n},t.createDashedLinePath=function(t,e,i){for(var n="M "+e.x+" "+i+" ",s=Math.floor(e.width/10),r=0;r<s;r++)n+="l 5 0 ",n+="m 5 0 ";return n},t.addAnnotationForAlternativeCondition=function(t,e,i,n){var s=this.calculateAnnotationYOffset(e,t.height,i.y),r=new Xc(t,"annotations",{content:"["+n.content+"]",offset:{x:0,y:s},horizontalAlignment:"Left",margin:{left:9,top:15,right:5,bottom:5},style:{bold:!0}});this.diagram.addLabels(t,[r]),this.diagram.protectPropertyChange(!0)},t.calculateAnnotationYOffset=function(t,e,i){var n=t-i;return Math.max(0,Math.min(n,e))/e},t.calculateFragmentBoundary=function(t,e){var i=void 0;if(t.connectors&&t.connectors.length>0){var n=this.getMessagesFromConnectorDetails(t.connectors);i=this.getBoundaryFromMessages(n)}var s=this.calculateChildFragmentBoundary(e),r=this.model.maxParticipantWidth/4;if(i||s){if(!i){var o=new Tn(s.left-r,s.top-r,s.width+2*r,s.height+2*r);return this.adjustCombinedBoundary(o,i,s)}return s?this.combineBoundaries(i,s):i}},t.getBoundaryFromMessages=function(t){var e=this.getMinCoordinates(t),i=this.getMaxCoordinates(t),n=this.hasCreateMessage(t),s=this.hasSelfMessage(t),r=this.model.maxParticipantWidth/4;n&&(r+=this.model.maxParticipantWidth/3),s&&(r+=this.model.maxParticipantWidth/6);for(var o=this.settings.messageSpacing/3,a=e.x-r,l=e.y-o,h=i.x-e.x+2*r,c=i.y-e.y+2*o,d=0,p=t;d<p.length;d++){var u=p[d];if(u.targetID&&this.diagram.getObject(u.targetID)instanceof Ny){var g=this.diagram.getObject(u.targetID);if(g&&g instanceof Ny&&g.wrapper){var m=g.wrapper.bounds,f=m.x+m.width+r,y=m.y+m.height+o;h=Math.max(h,f-a),c=Math.max(c,y-l)}}}var v=t[t.length-1],b=xb.getParticipantDetails(v);return b&&b.messageType===mv.Delete&&(c+=25),new Tn(a,l,h,c)},t.hasSelfMessage=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e],s=xb.getParticipantDetails(n);if(s&&s.sourceParticipantName===s.targetParticipantName)return!0}return!1},t.hasCreateMessage=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];if(n.targetID&&this.diagram.getObject(n.targetID)instanceof Ny)return!0}return!1},t.calculateChildFragmentBoundary=function(t){if(t.childFragments&&0!==t.childFragments.length){for(var e=[],i=0;i<t.childFragments.length;i++){for(var n=t.childFragments[parseInt(i.toString(),10)],s=[],r=0;r<n.conditions.length;r++)for(var o=n.conditions[parseInt(r.toString(),10)].connectors,a=0;a<o.length;a++)s.push(o[parseInt(a.toString(),10)]);var l=this.getMessagesFromConnectorDetails(s),h=this.getBoundaryFromMessages(l),c=this.calculateChildFragmentBoundary(n),d=this.combineBoundaries(h,c);d&&e.push(d)}if(0!==e.length){var p=Math.min.apply(null,e.map(function(t){return t.left})),u=Math.min.apply(null,e.map(function(t){return t.top})),g=Math.max.apply(null,e.map(function(t){return t.right})),m=Math.max.apply(null,e.map(function(t){return t.bottom}));return new Tn(p,u,g-p,m-u)}}},t.combineBoundaries=function(t,e){if(!e)return t;var i=this.model.maxParticipantWidth/4,n=new Tn(Math.min(t.left,e.left)-i,Math.min(t.top,e.top)-i,Math.max(t.right,e.right)-Math.min(t.left,e.left)+2*i,Math.max(t.bottom,e.bottom)-Math.min(t.top,e.top)+2*i);return this.adjustCombinedBoundary(n,t,e)},t.adjustCombinedBoundary=function(t,e,i){var n=this.settings.messageSpacing/2;return!e&&i||e&&i&&e.top>i.top?new Tn(t.left,t.top-n,t.width,t.height+n):t},t.getMinCoordinates=function(t){for(var e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,n=0;n<t.length;n++){var s=t[parseInt(n.toString(),10)],r=Math.min(s.sourcePoint.x,s.targetPoint.x),o=Math.min(s.sourcePoint.y,s.targetPoint.y);r<e&&(e=r),o<i&&(i=o)}return{x:e,y:i}},t.getMaxCoordinates=function(t){for(var e=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=0;n<t.length;n++){var s=t[parseInt(n.toString(),10)],r=Math.max(s.sourcePoint.x,s.targetPoint.x),o=Math.max(s.sourcePoint.y,s.targetPoint.y);r>e&&(e=r),o>i&&(i=o)}return{x:e,y:i}},t.calculateAltFragmentBoundary=function(t){var e=[].concat.apply([],t.conditions.map(function(t){return t.connectors})),i=void 0;if(e.length>0){var n=this.getMessagesFromConnectorDetails(e);i=this.getBoundaryFromMessages(n)}var s=this.calculateChildFragmentBoundary(t),r=this.model.maxParticipantWidth/4;if(i||s){if(!i){var o=new Tn(s.x-r,s.y-r,s.width+2*r,s.height+2*r);return this.adjustCombinedBoundary(o,i,s)}return s?this.combineBoundaries(i,s):i}},t.getMessagesFromConnectorDetails=function(t){for(var e=[],i=0;i<t.length;i++){for(var n=t[parseInt(i.toString(),10)],s=[],r=0;r<this.model.messages.length;r++){var o=this.model.messages[parseInt(r.toString(),10)],a=xb.getParticipantDetails(o);null!=o.id&&o.id.toString()===n.id.toString()&&null!=a&&this.stringEquals(a.sourceParticipantName,n.source)&&this.stringEquals(a.targetParticipantName,n.target)&&this.stringEquals(xb.getAnnotation(o),n.message)&&s.push(o)}Array.prototype.push.apply(e,s)}return e},t.stringEquals=function(t,e){return t.toString().toLowerCase()===e.toString().toLowerCase()},t.getMessageFromConnectorDetails=function(t,e,i,n){return this.model.messages.find(function(s){var r=xb.getParticipantDetails(s);return null!=s.id&&s.id.toString().toLowerCase()===t.toLowerCase()&&null!=r&&r.sourceParticipantName.toLowerCase()===e.toLowerCase()&&r.targetParticipantName.toLowerCase()===i.toLowerCase()&&xb.getAnnotation(s).toLowerCase()===n.toLowerCase()})},t.calculateCenterYBetweenConditions=function(t,e){var i=0,n=0;if(t.altBlockDetails.connectors.length>0){var s=t.altBlockDetails.connectors[t.altBlockDetails.connectors.length-1];if(s.inFragment){i=(-1!==s.fragmentIndex?this.diagram.getObject(s.fragmentIndex.toString()+"_Fragment"):this.diagram.getObject(s.fragmentID+"_Fragment")).wrapper.bounds.bottomLeft.y}else{var r=this.getMessageFromConnectorDetails(s.id,s.source,s.target,s.message);r&&(i=r.targetPoint.y)}}if(e.altBlockDetails.connectors.length>0){var o=e.altBlockDetails.connectors[0];if(o.inFragment){n=(-1!==o.fragmentIndex?this.diagram.getObject(o.fragmentIndex.toString()+"_Fragment"):this.diagram.getObject(o.fragmentID+"_Fragment")).wrapper.bounds.topLeft.y}else{var a=this.getMessageFromConnectorDetails(o.id,o.source,o.target,o.message);a&&(n=a.targetPoint.y)}}return 0!==i&&0!==n?i+(n-i)/2:0===i&&0!==n?n-20:0===n&&0!==i?i+10:0},t.createFragmentNode=function(t,e,i){var n=this.getFragmentType(t.type),s=Math.max(i.width,this.model.maxParticipantWidth),r=i.height+this.settings.messageSpacing,o=0===t.index?t.id.toString():t.index.toString(),a=i.x+i.width/2,l=i.y+i.height/2-this.settings.messageSpacing/2,h=[this.createAnnotation(n),this.createAnnotation(e?"["+e+"]":"",30)],c=t.node;c?(c.id=o+"_Fragment",this.diagram.addLabels(c,h),this.diagram.protectPropertyChange(!0),c.width=s,c.height=r,c.offsetX=a,c.offsetY=l,c.shape={type:"Path",data:this.getGeneralFragmentShape(s,r)},this.diagram.preventNodesUpdate=!0,this.diagram.nodePropertyChange(c,{},{offsetX:c.offsetX,offsetY:c.offsetY,width:c.width,height:c.height,annotations:c.annotations},!0),this.diagram.preventNodesUpdate=!1):(t.node=new Ny(this.diagram,"nodes",{id:o+"_Fragment",annotations:h,width:s,height:r,offsetX:a,offsetY:l,shape:{type:"Path",data:this.getGeneralFragmentShape(s,r)},style:{fill:"transparent",strokeColor:"#000000",strokeWidth:1}}),t.node=this.diagram.add(t.node))},t.getGeneralFragmentShape=function(t,e){var i="M 0,0 L "+t+",0 L "+t+","+e+" L 0,"+e+" Z";return i+" "+i+" M 0,0 H 40 V 12 C 32 20 40 12 32 20 H 0 Z"},t.getFragmentType=function(t){switch(t){case fv.Alternative:return"alt";case fv.Loop:return"loop";case fv.Optional:return"opt";default:throw new Error("Invalid fragment type")}},t.createAnnotation=function(t,e){return void 0===e&&(e=9),{content:t,offset:{x:0,y:0},horizontalAlignment:"Left",verticalAlignment:"Top",margin:{left:9,top:e,right:5,bottom:5},style:{bold:!0}}},t}(),Rb=function(){function t(){}return t.render=function(t,e,i,n){this.diagram=t,this.model=e,this.settings=n;var s={x:i.offsetX,y:i.offsetY+e.maxParticipantHeight},r={x:s.x,y:s.y+n.initialLifelineLength},o=null;n.hideFootBox||-1!==e.destroyedParticipants.indexOf(i.id.toString())||-1!==e.destroyAtEndParticipants.indexOf(i.id.toString())||((o=this.renderFootBoxNode(i)).offsetX=r.x,o.offsetY=r.y),this.createCenterPort(i),this.createLifelineConnector(i,o,r)},t.createCenterPort=function(t){var e=new Wc(this.diagram,"ports",{id:t.id+"_center_port",shape:null});this.diagram.addPorts(t,[e]),this.diagram.protectPropertyChange(!0)},t.createLifelineConnector=function(t,e,i){var n=this.lifelines.get(t.id);if(e&&e.ports&&e.ports.length>0){var s=e.ports[0];n.targetPortID=s.id,n.targetID=e.id;var r=e.height/2;n.targetPadding=-(r+s.height/2),n.targetPoint={x:e.offsetX,y:e.offsetY-r}}else n.targetPoint=i;if(t&&t.ports&&t.ports.length>0){s=t.ports[0];n.sourcePortID=s.id,n.sourceID=t.id;var o=xb.isActor(t)?t.height/2+t.height/6:t.height/2;n.sourcePadding=o-s.height/2,n.sourcePoint={x:t.offsetX,y:t.offsetY+o}}return n.annotations=null,n.sourceDecorator={shape:"None"},n.targetDecorator={shape:"None"},n.constraints=n.constraints&~(cs.DragSourceEnd|cs.Delete),n},t.renderFootBoxNode=function(t){var e=new Ny(this.diagram,"nodes",{id:"FootBox_"+t.id,width:t.width,height:t.height,shape:t.shape,annotations:t.annotations,style:t.style,ports:[{id:t.id+"_center_port",shape:null}]});return this.diagram.add(e)},t.updateLifelineLength=function(t,e){var i=this.lifelines.get(t.id);if(this.settings.hideFootBox)i.targetPoint={x:i.targetPoint.x,y:t.offsetY+this.model.maxParticipantHeight+e},-1!==this.model.destroyAtEndParticipants.indexOf(t.id.toString())&&-1===this.model.destroyedParticipants.indexOf(t.id.toString())&&this.updateDestroyMark(i);else{var n=i.targetID,s=t.offsetY+this.model.maxParticipantHeight+e;if(n)this.diagram.nodes.find(function(t){return t.id===n}).offsetY=s;else-1!==this.model.destroyAtEndParticipants.indexOf(t.id.toString())&&-1===this.model.destroyedParticipants.indexOf(t.id.toString())&&(i.targetPoint={x:i.targetPoint.x,y:s},this.updateDestroyMark(i))}},t.updateLifelinePosition=function(t,e){var i=this.lifelines.get(t.id),n=xb.isActor(t)?t.height/2+t.height/6:t.height/2;i.sourcePoint={x:i.sourcePoint.x,y:e+n}},t.updateLifelineToDestroy=function(t,e,i){var n=this.lifelines.get(t.id);i+=20,n.targetPoint={x:n.targetPoint.x,y:i},this.updateDestroyMark(n)},t.updateDestroyMark=function(t){t.targetDecorator={shape:"Custom",pathData:"M 0,0 L 25,25 M 25,0 L 0,25",pivot:{x:.5,y:.5},style:{fill:"none",strokeColor:"#000000",strokeWidth:1}}},t.clearLifelines=function(){this.lifelines.clear()},t.clearPorts=function(){this.lifelines.forEach(function(t,e){t.ports=[]})},t.lifelines=new Map,t}(),Vb="M4.5000001,12.548 L18.5,12.548 C20.709,12.548 22.5,14.335995 22.5,16.542004 L22.5,32.516996 19.5,32.516996 19.5,24.529997 17.5,24.529997 17.5,43.5 12.5,43.5 12.5,35.512999 C12.5,34.960997 12.052002,34.514006 11.5,34.514006 10.947998,34.514006 10.5,34.960997 10.5,35.512999 L10.5,43.5 5.4999996,43.5 5.4999996,24.529997 3.5000001,24.529997 3.5000001,32.516996 0.5,32.516996 0.5,16.542004 C0.50000012,14.335995 2.2910005,12.548 4.5000001,12.548 z M11.499001,0.5 C14.305002,0.5 16.580004,2.795001 16.580004,5.6260009 16.580004,8.4570012 14.305002,10.752001 11.499001,10.752002 8.6939994,10.752001 6.4189988,8.4570012 6.4189988,5.6260009 6.4189988,2.795001 8.6939994,0.5 11.499001,0.5 z",Ub="M242,1078L231,1078L231,1067L242,1067z",Fb=function(){function t(t){this.lines=[],this.activationCache=new Map,this.fragmentStack=[],this.currentCondition=null,this.diagram=t,this.sequenceDiagramModel=new Sb(t),this.sequenceDiagramModel.isLoadedFromMermaid=!0}return t.prototype.parse=function(t){this.lines=t.split(/\r?\n/).filter(function(t){return t.trim().length>0});for(var e=1;e<=this.lines.length;e++){var i=this.lines[e-1];this.parseLine(i.trim(),e)}return this.sequenceDiagramModel},t.prototype.parseLine=function(t,e){/^\s*(create|destroy)\b/i.test(t)?this.parseCreateOrDestroyMessage(t,e):/^\s*(participant|actor)\b/i.test(t)?this.parseParticipant(t):/\w+\s*(<<-{1,2}|-{1,2}>>?|<<-{1,2}>>?|-{1,2}\))\s*\w+/i.test(t)?this.parseConnector(t,e):/^(?!\s*(alt|else if|else|opt|loop|end)\b)(?!\w+\s*--?\)\s*\w+\s*:)(?=.*(?:activate|deactivate)\b|.*[+-])/i.test(t)?this.parseActivation(t,e):/^\s*(alt|else if|else|opt|loop|end)(?:\s+(.*))?/i.test(t)&&this.parseFragment(t,e)},t.prototype.parseCreateOrDestroyMessage=function(t,e){if(/^\s*create\b/i.test(t)){if(!(p=t.match(/create\s+(participant|actor)\s+(\w+)(?:\s+as\s+(.+))?/i)))return void console.warn("[WARNING] :: Invalid create syntax: '"+t+"'.");var i=p[1],n=p[3]?p[2]:null,s=p[3]||p[2],r=n||s;this.createOrGetParticipant(s,n,"actor"===i.toLowerCase());for(var o=e,a=null;o<this.lines.length&&(!(a=this.lines[parseInt(o.toString(),10)].trim())||a.startsWith("%%"));)o++;if(o<this.lines.length&&/\w+\s*(-\)|<<-{1,2}|-{1,2}>>?|<<-{1,2}>>?|\(-{1,2}\))\s*\w+\s*:\s*.+/.test(a))if(u=a.match(/(\w+)\s*(-\)|<<-{1,2}|-{1,2}>>?|<<-{1,2}>>?|\(-{1,2}\))\s*(\w+)\s*:\s*(.+)/)){var l=u[1],h=(u[2],u[3]),c=u[4];if(l.toLowerCase()===r.toLowerCase()||h.toLowerCase()===r.toLowerCase()){var d=new Rg(this.diagram,"connectors",{id:(o+1).toString()});xb.addOrUpdateParticipantDetails(d,l,h,mv.Create,r),xb.updateAnnotation(d,c),xb.updateConnectorStyles(d,mv.Create.toString()),this.sequenceDiagramModel.affectedParticipants.push(r),this.sequenceDiagramModel.addMessage(d),this.registerConnectorInCondition(d,o+1)}}}else{var p;if(!(p=t.match(/destroy\s+(\w+)/i)))return void console.warn("[WARNING] :: Invalid destroy syntax: '"+t+"'.");s=p[1];if(!this.sequenceDiagramModel.participants.has(s))return void console.warn("[WARNING] :: Participant '"+s+"' not found for destroy.");var u;for(o=e,a=null;o<this.lines.length&&(!(a=this.lines[parseInt(o.toString(),10)].trim())||a.startsWith("%%"));)o++;if(o<this.lines.length&&/\w+\s*(<<-{1,2}|-{1,2}>>?|\(-{1,2}\)|<<-{1,2}>>?)\s*\w+\s*:\s*.+/.test(a))if(u=a.match(/(\w+)\s*(<<-{1,2}|-{1,2}>>?|\(-{1,2}\)|<<-{1,2}>>?)\s*(\w+)\s*:\s*(.+)/)){l=u[1],u[2],h=u[3],c=u[4];if(l.toLowerCase()===s.toLowerCase()||h.toLowerCase()===s.toLowerCase()){var g=new Rg(this.diagram,"connectors",{id:(o+1).toString()});xb.addOrUpdateParticipantDetails(g,l,h,mv.Delete,s),xb.updateAnnotation(g,c),xb.updateConnectorStyles(g,mv.Delete.toString()),-1===this.sequenceDiagramModel.affectedParticipants.indexOf(s)&&this.sequenceDiagramModel.affectedParticipants.push(s),this.sequenceDiagramModel.destroyedParticipants.push(s),this.sequenceDiagramModel.addMessage(g),this.registerConnectorInCondition(g,o+1)}}}},t.prototype.parseParticipant=function(t){var e=/^(participant|actor)\s+([A-Za-z0-9._/\-\s]+?)(?:\s+as\s+(.+))?$/i.exec(t);if(e){var i=e[1],n=e[3]?e[2]:null,s=e[3]?e[3]:e[2];this.createOrGetParticipant(s,n,"actor"===i.toLowerCase())}else console.warn("[WARNING] :: Invalid participant syntax: '"+t+"'.")},t.prototype.parseConnector=function(t,e){if(!this.sequenceDiagramModel.messages.some(function(t){return t.id.toString()===e.toString()})){var i=(t=this.removeActivationSymbols(t)).match(/([\w/.\-_ ]+?)\s*(<<-{1,2}|-{1,2}>>?|\(-{1,2}\)|-{1,2}\)|<<-{1,2}>>?)\s*([\w/.\-_ ]+?)\s*:\s*(.+)/);if(i){var n=i[1],s=i[2],r=i[3],o=i[4];this.createOrGetParticipant(n),this.createOrGetParticipant(r);var a=new Rg(this.diagram,"connectors",{id:e.toString()});xb.addOrUpdateParticipantDetails(a,n,r,mv.Synchronous,null),xb.updateAnnotation(a,o),xb.updateConnectorStyles(a,this.getMermaidConnectorTypeFromArrow(s).toString()),this.sequenceDiagramModel.addMessage(a),this.registerConnectorInCondition(a,e)}else console.warn("[WARNING] :: Invalid connector syntax: '"+t+"'.")}},t.prototype.parseActivation=function(t,e){var i,n,s,r;if(t.startsWith("activate")||t.startsWith("deactivate")){if(!(p=t.match(/(activate|deactivate)\s+(\w+)/i)))return void console.warn("[WARNING] :: Invalid activation syntax: '"+t+"'.");var o=p[1].toLowerCase();if(i=p[2],this.createOrGetParticipant(i),e>1)for(var a=e-2;a>=0;){var l=this.lines[parseInt(a.toString(),10)].trim();if(l&&!l.startsWith("%%")){var h=l.match(/(\w+)\s*(<<-{1,2}|-{1,2}>>?|\(-{1,2}\)|-{1,2}\)|<<-{1,2}>>?)\s*(\w+)\s*:\s*(.+)/);if(h){n=h[1],s=h[3],r=h[4],e=a+2;break}a--}else a--}if("activate"===o)this.activationCache.has(i)||this.activationCache.set(i,[]),this.activationCache.get(i).push(new Db((e-1).toString(),n,s,r,e));else if(this.activationCache.has(i)&&this.activationCache.get(i).length>0){var c=this.activationCache.get(i).pop(),d=new Ny(this.diagram,"nodes",{id:i+"_Activation_"+Hn(),minHeight:10,minWidth:10});xb.updateNodeShape(d,!1),this.sequenceDiagramModel.addActivation(new wb(d,i,c,new Db((e-1).toString(),n,s,r,e))),0===this.activationCache.get(i).length&&this.activationCache.delete(i)}}else{var p;if(this.parseConnector(t,e),!(p=t.match(/(\w+)\s*(-+>|->>|-->|-->|<<->>|<<-->>|-x|--x|-\)|--\)|-x|--)>\s*(\+|-)\s*(\w+)\s*:\s*(.+)/)))return void console.warn("[WARNING] :: Invalid activation syntax: '"+t+"'.");n=p[1];var u=p[3];if(s=p[4],r=p[5],i="+"===u?s:n,this.createOrGetParticipant(n),this.createOrGetParticipant(i),"+"===u)this.activationCache.has(i)||this.activationCache.set(i,[]),this.activationCache.get(i).push(new Db(e.toString(),n,s,r,e));else if("-"===u&&this.activationCache.has(i)&&this.activationCache.get(i).length>0){c=this.activationCache.get(i).pop(),d=new Ny(this.diagram,"nodes",{id:i+"_Activation_"+Hn(),minHeight:10,minWidth:10});xb.updateNodeShape(d,!1),this.sequenceDiagramModel.addActivation(new wb(d,i,c,new Db(e.toString(),n,s,r,e))),0===this.activationCache.get(i).length&&this.activationCache.delete(i)}}},t.prototype.parseFragment=function(t,e){var i=this,n=t.match(/(alt|else|opt|loop|end)(?:\s+(.*))?/i),s=n[1].toLowerCase(),r=n[2]||null;if("end"===s){if(0===this.fragmentStack.length)return void console.warn("[WARNING] :: Unmatched 'end' found.");var o=this.fragmentStack.pop();if(null!==this.currentCondition&&(o.conditions.some(function(t){return t.content===i.currentCondition.content})||o.conditions.push(this.currentCondition),this.currentCondition=null),o.conditions.forEach(function(t){i.populateConditionAltBlockDetails(t,o)}),this.fragmentStack.length>0){var a=this.fragmentStack[this.fragmentStack.length-1];a.childFragments.push(o),a.type===fv.Alternative&&a.conditions.length>0&&a.conditions[a.conditions.length-1].nestedFragments.push(o)}else this.sequenceDiagramModel.addFragment(o)}else{var l=null;if(this.fragmentStack.length>0&&(l=this.fragmentStack[this.fragmentStack.length-1]),"alt"===s||"opt"===s||"loop"===s){var h=new Eb("",fv.Optional,[],[],null,e,this.fragmentStack.length);switch(s){case"alt":h.type=fv.Alternative;break;case"opt":h.type=fv.Optional;break;case"loop":h.type=fv.Loop}this.fragmentStack.push(h),l=h}if(l&&("alt"===s||"opt"===s||"loop"===s||"else if"===s||"else"===s)){var c=new Tb(r,[],[],new Ab);l.conditions.some(function(t){return t.content===c.content})?this.currentCondition=l.conditions.find(function(t){return t.content===c.content})||null:(this.currentCondition=c,l.conditions.push(c))}}},t.prototype.populateConditionAltBlockDetails=function(t,e){for(var i=0,n=t.connectors;i<n.length;i++){var s=n[i];t.altBlockDetails.connectors.push(new Nb(s.id,s.source,s.target,s.message,-1,"",!1,-1))}t.altBlockDetails.connectors.sort(function(t,e){return parseInt(t.id,10)-parseInt(e.id,10)});for(var r=0,o=t.nestedFragments;r<o.length;r++){var a=o[r];this.addChildFragmentConnectors(t,a)}},t.prototype.addChildFragmentConnectors=function(t,e){for(var i=0,n=e.conditions;i<n.length;i++){var s=n[i];if(-1!==t.nestedFragments.indexOf(e)){for(var r=0,o=s.connectors;r<o.length;r++){var a=o[r];t.altBlockDetails.connectors.push(new Nb(a.id,a.source,a.target,a.message,-1,"",!0,e.index))}for(var l=0,h=e.childFragments;l<h.length;l++){var c=h[l];this.addChildFragmentConnectors(t,c)}}}t.altBlockDetails.connectors.sort(function(t,e){return parseInt(t.id,10)-parseInt(e.id,10)})},t.prototype.registerConnectorInCondition=function(t,e){var i=xb.getParticipantDetails(t);if(this.currentCondition){var n=new Db(e.toString(),i.sourceParticipantName,i.targetParticipantName,xb.getAnnotation(t),e);this.currentCondition.connectors.push(n)}else if(this.fragmentStack.length>0){var s=this.fragmentStack[this.fragmentStack.length-1];if(s.conditions.length>0){var r=s.conditions[s.conditions.length-1];n=new Db(e.toString(),i.sourceParticipantName,i.targetParticipantName,xb.getAnnotation(t),e);r.connectors.push(n)}}},t.prototype.createOrGetParticipant=function(t,e,i){if(void 0===e&&(e=""),void 0===i&&(i=!1),t&&""!==t.trim()){if(!this.sequenceDiagramModel.participants.has(e||t)){var n=new Ny(this.diagram,"nodes",{id:e||t});xb.updateNodeShape(n,i),xb.updateAnnotation(n,t,i),this.sequenceDiagramModel.addParticipant(n),e&&this.sequenceDiagramModel.addAlias(e,t)}}else console.warn("[WARNING] :: Participant name cannot be null or empty.")},t.prototype.getMermaidConnectorTypeFromArrow=function(t){switch(t){case"->":return yv.Solid;case"--\x3e":return yv.Dashed;case"->>":default:return yv.SolidArrow;case"--\x3e>":return yv.DashedArrow;case"<<->>":return yv.Bidirectional;case"<<--\x3e>":return yv.DashedBidirectional;case"-)":return yv.OpenArrow;case"--)":return yv.DashedOpenArrow}},t.prototype.removeActivationSymbols=function(t){return t.replace(/(->>\s*)(\+|-)(\s*\w+)/g,function(t,e,i,n){return e+n})},t}(),Wb=function(){function t(){}return t.prototype.generateMermaidText=function(t){for(var e="sequenceDiagram\n",i=new Set(t.messages.filter(function(t){return t.type===mv.Create}).map(function(t){return t.toParticipantID})),n=0,s=t.participants;n<s.length;n++){var r=s[n];r.id&&!i.has(r.id)&&(e+="    "+this.getParticipantContent(r)+"\n")}for(var o=this.buildActivationLookup(t.participants,!0),a=this.buildActivationLookup(t.participants,!1),l=[],h=function(i){for(var n=c.getContextChainForMessage(i.id,t.fragments);l.length>n.length;){var s=l.length,r=Array(4*s+1).join(" ");e+=r+"end\n",l.pop()}for(var h,d=0;d<l.length&&d<n.length&&l[parseInt(d.toString(),10)].fragment.id.toString()===n[parseInt(d.toString(),10)].fragment.id.toString();){if(l[parseInt(d.toString(),10)].condition.content!==n[parseInt(d.toString(),10)].condition.content){for(;l.length>d+1;){r=Array(4*l.length+1).join(" ");e+=r+"end\n",l.pop()}var p=Array(4*(d+1)+1).join(" ");e+=p+"else "+n[parseInt(d.toString(),10)].condition.content+"\n",l[parseInt(d.toString(),10)]=n[parseInt(d.toString(),10)]}d++}h=d;for(var u=l.length-1;u>=h;u--){r=Array(4*(u+1)+1).join(" ");e+=r+"end\n",l.pop()}for(u=h;u<n.length;u++){r=Array(4*(l.length+1)+1).join(" ");e+=r+c.getFragmentType(n[parseInt(u.toString(),10)].fragment.type)+" "+n[parseInt(u.toString(),10)].condition.content+"\n",l.push(n[parseInt(u.toString(),10)])}var g=Array(4*(l.length+1)+1).join(" ");if(i.toParticipantID&&i.type===mv.Create){var m=t.participants.find(function(t){return t.id.toString()===i.toParticipantID.toString()});m&&(e+=g+"create "+c.getParticipantContent(m)+"\n")}if(i.toParticipantID&&i.type===mv.Delete){var f=t.participants.find(function(t){return t.id.toString()===i.toParticipantID.toString()});f&&(e+=g+"destroy "+f.id+"\n")}e+=g+c.getParticipantContentByID(t,i.fromParticipantID)+c.getArrowType(i.type)+c.getParticipantContentByID(t,i.toParticipantID)+": "+i.content+"\n",e=c.handleActivationsAndDeactivations(e,i,o,a,l.length+1)},c=this,d=0,p=t.messages;d<p.length;d++){h(p[d])}for(var u=l.length-1;u>=0;u--){var g=Array(4*(u+1)+1).join(" ");e+=g+"end\n"}return e},t.prototype.getContextChainForMessage=function(t,e){for(var i=[],n=0;n<e.length;n++)for(var s=e[parseInt(n.toString(),10)],r=0;r<s.conditions.length;r++){var o=s.conditions[parseInt(r.toString(),10)];if(this.isMessageIdInCondition(o,t))return i.push({fragment:s,condition:o}),i}return i},t.prototype.isMessageIdInCondition=function(t,e){for(var i=0;i<t.messageIds.length;i++){if(t.messageIds[parseInt(i.toString(),10)].toString()===e.toString())return!0}return!1},t.prototype.handleActivationsAndDeactivations=function(t,e,i,n,s){void 0===s&&(s=1);var r=" ".repeat(4*s),o=i.get(e.id.toString());o&&o.forEach(function(e){t+=r+"activate "+e+"\n"});var a=n.get(e.id.toString());return a&&a.forEach(function(e){t+=r+"deactivate "+e+"\n"}),t},t.prototype.buildActivationLookup=function(t,e){var i=new Map;return t.forEach(function(t){t.activationBoxes.forEach(function(n){var s=(e?n.startMessageID:n.endMessageID).toString(),r=t.id.toString();i.has(s)||i.set(s,[]),i.get(s).push(r)})}),i},t.prototype.getArrowType=function(t){switch(t){case mv.Synchronous:case mv.Delete:return"->>";case mv.Asynchronous:case mv.Create:return"--\x3e";case mv.Reply:return"--\x3e>";default:return"->>"}},t.prototype.getFragmentType=function(t){switch(t){case fv.Alternative:return"alt";case fv.Loop:return"loop";case fv.Optional:return"opt";default:throw new Error("Invalid fragment type")}},t.prototype.getParticipantContent=function(t){return(t.isActor?"actor":"participant")+" "+t.id+" as "+t.content},t.prototype.getParticipantContentByID=function(t,e){return t.participants.find(function(t){return t.id&&t.id.toString()===e.toString()}).id.toString()},t}(),Yb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_b=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Qb=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}l((n=n.apply(t,e||[])).next())})},Zb=function(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},qb=function(t){function e(e,i){var n,s,r=t.call(this,e,i)||this;r.version=17.1,r.checkMenu=!1,r.isServerUpdate=!1,r.oldNodeObjects=[],r.oldDiagramObject={},r.oldConnectorObjects=[],r.preventOverviewRefresh=!1,r.canEnableBlazorObject=!1,r.connectorTable={},r.groupTable={},r.scrollActions=xs.None,r.blazorActions=ns.Default,r.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},r.textEditing=!1,r.isTriggerEvent=!1,r.preventNodesUpdate=!1,r.preventConnectorsUpdate=!1,r.callBlazorModel=!0,r.isRowHeightUpdate=!1,r.selectionConnectorsList=[],r.deleteVirtualObject=!1,r.canLayout=!0,r.cancelPositionChange=!1,r.isRefreshed=!1,r.swimlaneChildTable={},r.swimlaneZIndexTable={},r.canExpand=!1,r.changedConnectorCollection=[],r.changedNodesCollection=[],r.previousNodeCollection=[],r.previousConnectorCollection=[],r.crudDeleteNodes=[],r.previousSelectedObjects=[],r.blazorAddorRemoveCollection=[],r.blazorRemoveIndexCollection=[],r.diagramid=88123,r.portCenterPoint=[],r.selectedObject={helperObject:void 0,actualObject:void 0},r.deleteDependentConnector=!0,r.scaleValue=1,r.routedConnectors=[],r.pathDataStorage=new Map,r.isUndo=!1,r.checkUndoRedo=!1,r.activeLayerObjectsSet=new Set,r.mermaidNodeBaseCollection=[],r.bangShape="M0 0 a15.470625686645507,15.470625686645507 1 0,0 25.78437614440918,-3.7200001525878905 a15.470625686645507,15.470625686645507 1 0,0 25.78437614440918,0 a15.470625686645507,15.470625686645507 1 0,0 25.78437614440918,0 a15.470625686645507,15.470625686645507 1 0,0 25.78437614440918,3.7200001525878905 a15.470625686645507,15.470625686645507 1 0,0 15.470625686645507,12.276000503540038 a12.376500549316406,12.376500549316406 1 0,0 0,12.648000518798828 a15.470625686645507,15.470625686645507 1 0,0 -15.470625686645507,12.276000503540038 a15.470625686645507,15.470625686645507 1 0,0 -25.78437614440918,5.580000228881835 a15.470625686645507,15.470625686645507 1 0,0 -25.78437614440918,0 a15.470625686645507,15.470625686645507 1 0,0 -25.78437614440918,0 a15.470625686645507,15.470625686645507 1 0,0 -25.78437614440918,-5.580000228881835 a15.470625686645507,15.470625686645507 1 0,0 -10.313750457763673,-12.276000503540038 a12.376500549316406,12.376500549316406 1 0,0 0,-12.648000518798828 a15.470625686645507,15.470625686645507 1 0,0 10.313750457763673,-12.276000503540038 H0 V0 Z",r.cloudShape="M0 0 a16.18875045776367,16.18875045776367 0 0,1 26.981250762939453,-10.792500305175782 a37.77375106811523,37.77375106811523 1 0,1 43.17000122070313,-10.792500305175782 a26.981250762939453,26.981250762939453 1 0,1 37.77375106811523,21.585000610351564 a16.18875045776367,16.18875045776367 1 0,1 16.18875045776367,13.020000534057615 a21.585000610351564,21.585000610351564 1 0,1 -16.18875045776367,24.180000991821288 a26.981250762939453,16.18875045776367 1 0,1 -26.981250762939453,16.18875045776367 a37.77375106811523,37.77375106811523 1 0,1 -53.962501525878906,0 a16.18875045776367,16.18875045776367 1 0,1 -26.981250762939453,-16.18875045776367 a16.18875045776367,16.18875045776367 1 0,1 -10.792500305175782,-13.020000534057615 a21.585000610351564,21.585000610351564 1 0,1 10.792500305175782,-24.180000991821288 H0 V0 Z",r.renderTimer=null,r.ignoreCollectionWatch=!0;for(var o=0;e&&e.nodes&&o<e.nodes.length;o++)n=e.nodes[parseInt(o.toString(),10)],s=r.nodes[parseInt(o.toString(),10)],n.children&&n.children.length>0&&(n.style&&n.style.fill||(s.style.fill="transparent"),n.style&&n.style.strokeColor||(s.style.strokeColor="transparent")),n.shape&&"UmlActivity"===n.shape.type&&mm(n,s),!n.shape||"SwimLane"!==n.shape.type&&"Container"!==n.shape.type||pm(n,s),r.nodeDefaults&&bm(s,n,r.nodeDefaults),r.updateAnnotationText(s.annotations);if(e&&e.connectors)for(o=0;e&&e.connectors&&o<e.connectors.length;o++)n=e.connectors[parseInt(o.toString(),10)],s=r.connectors[parseInt(o.toString(),10)],r.connectorDefaults&&bm(s,n,r.connectorDefaults),r.updateAnnotationText(s.annotations);for(o=0;e&&e.connectors&&o<e.connectors.length;o++){var a=e.connectors[parseInt(o.toString(),10)],l=r.connectors[parseInt(o.toString(),10)];a.shape&&"None"!==a.shape.type&&fm(a,l)}return r}return Yb(e,t),e.prototype.updateAnnotationText=function(t){},e.prototype.clearCollection=function(t){for(var e,i=[],n=0,s=Object.keys(this.nameTable);n<s.length;n++){var r=s[n];(e=this.nameTable[""+r])&&(t&&e instanceof Rg||!t&&e instanceof Ny)&&i.push(e)}this.clearObjects(i)},e.prototype.onPropertyChanged=function(i,n){var s=this;if(this.rotateUsingButton)this.rotateUsingButton=!1;else{var r=!0,o=!1,a=!1,l=void 0;if(this.diagramActions&Is.Render){for(var h=0,c=Object.keys(i);h<c.length;h++){switch(c[h]){case"width":case"height":this.element.style.width=this.getSizeValue(this.width),this.element.style.height=this.getSizeValue(this.height),this.eventHandler.updateViewPortSize(this.element);for(var d=0,p=this.views;d<p.length;d++){var u=p[d];($=this.views[""+u])instanceof e||$.updateView($)}break;case"nodes":if(i.nodes.length>0&&0===n.nodes.length)this.clearCollection(),a=!0;else{for(var g=0,m=Object.keys(i.nodes);g<m.length;g++){var f=m[g],y=Number(f),v=this.nodes[parseInt(y.toString(),10)],b=i.nodes[parseInt(y.toString(),10)];i.nodes[parseInt(y.toString(),10)].style&&i.nodes[parseInt(y.toString(),10)].style.gradient&&(this.updateGradient(i.nodes[parseInt(y.toString(),10)],n.nodes[parseInt(y.toString(),10)],this.nodes[parseInt(y.toString(),10)]),this.nodes[parseInt(y.toString(),10)].oldGradientValue=Fn(i.nodes[parseInt(y.toString(),10)].style.gradient)),o=o||void 0!==b.excludeFromLayout,i.nodes[y]&&i.nodes[y].shape&&i.nodes[y].shape.textAnnotation&&""!==i.nodes[y].shape.textAnnotation.textAnnotationTarget&&(l=Fn(this.nameTable[v.inEdges[0]])),this.nodePropertyChange(v,n.nodes[parseInt(y.toString(),10)],b,void 0,!0,!0);var C={element:Mf(v),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:Mf(n.nodes[parseInt(y.toString(),10)]),newValue:Mf(i.nodes[parseInt(y.toString(),10)])};this.triggerEvent(Ds.propertyChange,C),r&&(r=!1)}"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"connectors":if(i.connectors.length>0&&0===n.connectors.length)this.clearCollection(!0),a=!0;else{for(var I=0,M=Object.keys(i.connectors);I<M.length;I++){f=M[I],y=Number(f),v=this.connectors[parseInt(y.toString(),10)],b=i.connectors[parseInt(y.toString(),10)];var S={sourcePoint:{x:v.sourcePoint.x,y:v.sourcePoint.y},targetPoint:{x:v.targetPoint.x,y:v.targetPoint.y}};b&&(b.sourceDecorator||b.targetDecorator)&&(this.diagramActions|=Is.DecoratorPropertyChange),this.connectorPropertyChange(v,n.connectors[parseInt(y.toString(),10)],b,!0,!0),i.connectors[parseInt(y.toString(),10)].sourceID&&!i.connectors[parseInt(y.toString(),10)].sourcePoint&&(n.connectors[parseInt(y.toString(),10)].sourcePoint={x:S.sourcePoint.x,y:S.sourcePoint.y},i.connectors[parseInt(y.toString(),10)].sourcePoint={x:v.sourcePoint.x,y:v.sourcePoint.y}),i.connectors[parseInt(y.toString(),10)].targetID&&!i.connectors[parseInt(y.toString(),10)].targetPoint&&(n.connectors[parseInt(y.toString(),10)].targetPoint={x:S.targetPoint.x,y:S.targetPoint.y},i.connectors[parseInt(y.toString(),10)].targetPoint={x:v.targetPoint.x,y:v.targetPoint.y}),b&&(b.sourceDecorator||b.targetDecorator)&&(this.diagramActions=this.diagramActions&~Is.DecoratorPropertyChange);C={element:Mf(v),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:Mf(n.connectors[parseInt(y.toString(),10)]),newValue:Mf(i.connectors[parseInt(y.toString(),10)])};this.triggerEvent(Ds.propertyChange,C),v&&v.parentId&&"UmlClassifier"===this.nameTable[v.parentId].shape.type&&this.updateConnectorEdges(this.nameTable[v.parentId]||v),r&&(r=!1)}this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer()}break;case"bridgeDirection":this.updateBridging(),"Canvas"===this.mode&&this.refreshDiagramLayer();break;case"backgroundColor":this.intOffPageBackground();break;case"pageSettings":this.validatePageSize(),this.updatePage();break;case"selectedItems":if(i.selectedItems.userHandles&&this.selectedItems.wrapper&&this.selectedItems.userHandles&&this.selectedItems.userHandles.length>0){this.renderSelector(!0);break}if(i.selectedItems.constraints){this.renderSelector(!0);break}break;case"snapSettings":this.updateSnapSettings(i);break;case"commandManager":this.initCommands();break;case"layout":o=!0;break;case"segmentThumbShape":this.updateSelector();break;case"dataSourceSettings":this.clear(),"None"===this.layout.type?a=!0:(this.initObjects(),o=!0);break;case"tooltip":Pc(this);break;case"rulerSettings":this.updateRulerSettings(i);break;case"layers":this.updateLayer(i);break;case"scrollSettings":this.scrollActions|=xs.PropertyChange,this.updateScrollSettings(i),this.scrollActions&=~xs.PropertyChange;break;case"locale":i.locale!==n.locale&&t.prototype.refresh.call(this);break;case"contextMenuSettings":if(void 0!==i.contextMenuSettings.showCustomMenuOnly&&(this.contextMenuSettings.showCustomMenuOnly=i.contextMenuSettings.showCustomMenuOnly),void 0!==i.contextMenuSettings.show&&(this.contextMenuSettings.show=i.contextMenuSettings.show),i.contextMenuSettings.items){for(var x=i.contextMenuSettings.items,w=0,D=Object.keys(x);w<D.length;w++){f=D[w],y=Number(f);this.contextMenuSettings.items[parseInt(y.toString(),10)]=x[parseInt(y.toString(),10)]}this.contextMenuModule?this.contextMenuModule.refreshItems():console.warn('[WARNING] :: Module "DiagramContextMenu" is not available in Diagram component! You either misspelled the module name or forgot to load it.')}break;case"serializationSettings":void 0!==i.serializationSettings.preventDefaults&&(this.serializationSettings.preventDefaults=i.serializationSettings.preventDefaults);break;case"tool":this.eventHandler.updateTool();break;case"constraints":(i.constraints&ms.LineRouting)===(n.constraints&ms.LineRouting)&&(i.constraints&ms.AvoidLineOverlapping)===(n.constraints&ms.AvoidLineOverlapping)||this.resetSegments()}}if(o&&!a){if(n.layout&&"DifferentPoint"===n.layout.connectionPointOrigin&&"SamePoint"===i.layout.connectionPointOrigin||n.layout&&i.layout&&!i.layout.enableRouting&&n.layout.enableRouting){for(var E=0;E<this.nodes.length;E++){var T=this.nodes[parseInt(E.toString(),10)];if(T.ports&&T.ports.length>0){for(var A=[],N=T.ports.length-1;N>=0;N--)"LineDistribution"===T.ports[parseInt(N.toString(),10)].id.split("_")[1]&&A.push(T.ports[parseInt(N.toString(),10)]);this.removePorts(T,A)}}for(N=0;N<this.connectors.length;N++){var L=this.connectors[parseInt(N.toString(),10)],O=L.sourcePortID,k=L.targetPortID;L.sourcePortID="",L.targetPortID="",L.sourcePortWrapper=void 0,L.targetPortWrapper=void 0,L.segments=[],this.connectorPropertyChange(L,{sourcePortID:O,targetPortID:k},{sourcePortID:"",targetPortID:""})}}this.doLayout(),this.renderReactTemplates()}if(r&&this.propertyChange){C={element:this,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:n,newValue:i};this.triggerEvent(Ds.propertyChange,C)}if(!a&&this.canLogChange()&&this.modelChanged(i,n)){var z,P=[],j=[],B=void 0,H=void 0;if(i.nodes&&Object.keys(i.nodes).length>0)for(var R=0,V=Object.keys(i.nodes);R<V.length;R++){f=V[R];if(B=parseInt(f,10),P.push(this.nodes[parseInt(B.toString(),10)].id),i.nodes[parseInt(B.toString(),10)]&&i.nodes[parseInt(B.toString(),10)].shape&&i.nodes[parseInt(B.toString(),10)].shape.lanes)for(var U=0,F=Object.keys(i.nodes[parseInt(B.toString(),10)].shape.lanes);U<F.length;U++){var W=F[U];H=parseInt(W,10)}}if(i.connectors&&Object.keys(i.connectors).length>0)for(var Y=0,_=Object.keys(i.connectors);Y<_.length;Y++){f=_[Y];var Q=parseInt(f,10);j.push(this.connectors[parseInt(Q.toString(),10)].id)}if(z=P.concat(j),0===j.filter(function(t){return s.nameTable[""+t].isBpmnAnnotationConnector}).length)if(i.nodes&&i.nodes[B]&&i.nodes[B].shape&&i.nodes[B].shape.textAnnotation&&""!==i.nodes[B].shape.textAnnotation.textAnnotationTarget){var Z=this.nameTable[this.nodes[parseInt(B.toString(),10)].inEdges[0]];this.startGroupAction();var q={type:"ConnectionChanged",undoObject:l,redoObject:Fn(Z),category:"Internal"},X={type:"PropertyChanged",undoObject:n,redoObject:i,category:"Internal"};this.historyManager&&(this.addHistoryEntry(q),this.addHistoryEntry(X,z)),this.endGroupAction()}else{X={type:"PropertyChanged",undoObject:n,redoObject:i,category:"Internal"};this.historyManager&&!this.isRowHeightUpdate&&(this.addHistoryEntry(X,z),i.nodes&&i.nodes[B]&&i.nodes[B].shape&&i.nodes[B].shape.lanes&&i.nodes[B].shape.lanes[H]&&i.nodes[B].shape.lanes[H].children&&!(this.diagramActions&Is.UndoRedo)&&this.endGroupAction()),this.isRowHeightUpdate=!1}}this.resetDiagramActions(),a&&(this.initObjects(!0),this.refreshDiagramLayer(),o&&this.doLayout());var G=1===Object.keys(i).length&&void 0!==i.scrollSettings;if(!a)for(var K=0,J=this.views;K<J.length;K++){var $=J[K];(u=this.views[""+$])instanceof e||(i.scrollSettings&&(i.scrollSettings.currentZoom,n.scrollSettings.currentZoom),G||this.refreshCanvasDiagramLayer(u))}}}},e.prototype.updateSnapSettings=function(t){(void 0!==t.snapSettings.constraints||t.snapSettings.horizontalGridlines||t.snapSettings.verticalGridlines||t.snapSettings.gridType)&&this.diagramRenderer.updateGrid(this.snapSettings,Ky(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.updateGradient=function(t,e,i){if(i.oldGradientValue)for(var n=i,s=i,r=e.style.gradient,o=e.style.gradient,a=0,l=Object.keys(t.style.gradient);a<l.length;a++){switch(l[a]){case"type":n.type&&(r.type=n.type);break;case"x1":n.x1&&(r.x1=n.x1);break;case"x2":n.x2&&(r.x2=n.x2);break;case"y1":n.y1&&(r.y1=n.y1);break;case"y2":n.y2&&(r.y2=n.y2);break;case"cx":s.cx&&(o.cx=s.cx);break;case"cy":s.cy&&(o.cy=s.cy);break;case"fx":s.fx&&(o.fx=s.fx);break;case"fy":s.fy&&(o.fy=s.fy);break;case"r":s.r&&(o.r=s.r);break;case"stops":if(i.oldGradientValue.stops){var h=Object.values(Fn(i.oldGradientValue.stops));h.pop(),e.style.gradient.stops=h}}}},e.prototype.updateRulerSettings=function(t){void 0!==t.rulerSettings.dynamicGrid&&this.diagramRenderer.updateGrid(this.snapSettings,Ky(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),void 0!==t.rulerSettings.showRulers?(this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):void 0===t.rulerSettings.horizontalRuler&&void 0===t.rulerSettings.verticalRuler||(void 0!==t.rulerSettings.horizontalRuler.thickness||void 0!==t.rulerSettings.verticalRuler.thickness?(_g(this),this.intOffPageBackground(),this.scroller.setSize(),this.renderRulers()):Yg(this)),this.diagramRenderer.updateGrid(this.snapSettings,Ky(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler)},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){this.initializePrivateVariables(),this.isProtectedOnChange=!0,this.serviceLocator=new wv,this.initializeServices(),this.setCulture();var t="measureElement";window[""+t]&&(window[""+t]=null),this.initDiagram(),this.initViews(),this.unWireEvents(),this.wireEvents(),this.element.classList.add("e-diagram")},e.prototype.initializePrivateVariables=function(){if(""===this.element.id){var t=document.getElementsByClassName("e-diagram").length;this.element.id="diagram_"+this.diagramid+"_"+t}this.defaultLocale={Copy:"Copy",Cut:"Cut",Paste:"Paste",Undo:"Undo",Redo:"Redo",SelectAll:"Select All",Grouping:"Grouping",Group:"Group",UnGroup:"Un Group",Order:"Order",BringToFront:"Bring To Front",MoveForward:"Move Forward",SendToBack:"Send To Back",SendBackward:"Send Backward"},this.layerZIndex=-1,this.layerZIndexTable={},void 0===this.swimlaneChildTable&&void 0===this.swimlaneZIndexTable&&(this.swimlaneChildTable={},this.swimlaneZIndexTable={}),this.activeLayerObjectsSet||(this.activeLayerObjectsSet=new Set),this.nameTable={},this.pathTable={},this.groupTable={},this.commands={},this.isLoading||(this.views=[]),this.commandHandler=new eb(this),this.eventHandler=new qv(this,this.commandHandler),this.spatialSearch=new sb(this.nameTable),this.scroller=new ib(this)},e.prototype.initializeServices=function(){this.serviceLocator.register("localization",this.localeObj=new ri(this.getModuleName(),this.defaultLocale,this.locale))},e.prototype.setCulture=function(){this.localeObj=new ri(this.getModuleName(),this.defaultLocale,this.locale)},e.prototype.render=function(){if(this.refreshing&&this.dataSourceSettings.dataSource&&!this.isLoading&&(this.nodes=[],this.connectors=[]),!this.refreshing){var t={diagram:this,name:"load"};this.trigger("load",t)}this.isRefreshed=!1,this.ignoreCollectionWatch=!0;window.domTable={};var e=[];this.dataSourceSettings.crudAction.read&&this.renderInitialCrud(),this.initHistory(),this.diagramRenderer=new am(this.element.id,new om,"SVG"===this.mode),this.initLayers(),this.initializeDiagramLayers(),this.diagramRenderer.setLayers(),this.initObjects(!0);for(var i=this.nodes,n=0;n<i.length;n++)i[parseInt(n.toString(),10)].isExpanded||e.push(i[parseInt(n.toString(),10)]);if(e.length)for(n=e.length-1;n>=0;n--)0===n?this.commandHandler.expandNode(e[parseInt(n.toString(),10)],this,!1):this.commandHandler.expandNode(e[parseInt(n.toString(),10)],this,!0);if(this.canLayout&&this.doLayout(),this.updateFromModel(),this.lineRoutingModule){this.lineRoutingModule.lineRouting(this)}else this.constraints&ms.LineRouting&&console.warn('[WARNING] :: Module "LineRouting" is not available in Diagram component! You either misspelled the module name or forgot to load it.');this.validatePageSize(),this.renderPageBreaks(),this.diagramRenderer.renderSvgGridlines(this.snapSettings,Ky(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.commandHandler.initSelectorWrapper(),this.notify("initial-load",{}),this.trigger("load"),this.scroller.setSize(),this.scroller.updateScrollOffsets(),this.isRefreshed||this.refreshDiagramLayer(),(this.scrollSettings.verticalOffset>0||this.scrollSettings.horizontalOffset>0)&&this.updateScrollOffset(),G.isDevice&&(this.tool=fs.ZoomPan|fs.SingleSelect),this.notify("initial-end",{}),this.isProtectedOnChange=!1,this.tooltipObject=Pc(this),this.diagramActions=Is.Render,this.initCommands();var s=document.getElementsByClassName(this.element.id+"_hiddenUserHandleTemplate");!function(t,e,i,n){var s,r,o,a,l,h=document.getElementById(n).ej2_instances[0];if(t&&e){s=Rn(t);for(var c=0,d=i.userHandles;c<d.length;c++)if(r=d[c],s){for(o=s(Fn(r),h,"userHandleTemplate_"+r.name,void 0,void 0,!1),a=0;a<o.length;a++)(l=iv("div",{style:"height: 100%; width: 100%; pointer-events: all",id:r.name+"_template_hiddenUserHandle"})).appendChild(o[a]);e[0].appendChild(l)}}}(this.userHandleTemplate,s,this.selectedItems,this.element.id),this.isLoading=!1,this.refreshRoutingConnectors(),this.renderComplete(),this.updateFitToPage(),this.refreshing&&this.renderReactTemplates()},e.prototype.updateFitToPage=function(){this.pageSettings&&this.pageSettings.fitOptions&&this.pageSettings.fitOptions.canFit&&this.fitToPage(this.pageSettings.fitOptions)},e.prototype.updateTemplate=function(){},e.prototype.renderInitialCrud=function(){var t,e=this;e.dataSourceSettings.crudAction.read&&((t=new V(e.dataSourceSettings.crudAction.read,"GET")).onSuccess=function(t){e.dataSourceSettings.dataManager?e.dataSourceSettings.dataManager=JSON.parse(t):e.dataSourceSettings.dataSource=JSON.parse(t),e.dataBind()},t.send().then());e.dataSourceSettings.connectionDataSource.crudAction.read&&((t=new V(e.dataSourceSettings.connectionDataSource.crudAction.read,"GET")).onSuccess=function(t){e.dataSourceSettings.connectionDataSource.dataManager=JSON.parse(t),e.dataBind()},t.send().then())},e.prototype.getModuleName=function(){return"diagram"},e.prototype.getClassName=function(){return"Diagram"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t.push({member:"Bridging",args:[]}),t.push({member:"ConnectorEditingTool",args:[]}),this.constraints&ms.UndoRedo&&t.push({member:"UndoRedo",args:[]}),("OrganizationalChart"===this.layout.type||"HierarchicalTree"===this.layout.type||this.layout.enableAnimation)&&t.push({member:"LayoutAnimate",args:[]}),this.snapSettings.constraints&&t.push({member:"Snapping",args:[this]}),t.push({member:"Ej1Serialization",args:[this]}),t.push({member:"PrintandExport",args:[this]}),this.contextMenuSettings.show&&t.push({member:"contextMenu",args:[this,this.serviceLocator]}),"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type||t.push({member:"OrganizationalChart",args:[this]}),"ComplexHierarchicalTree"===this.layout.type&&t.push({member:"ComplexHierarchicalTree",args:[]}),"MindMap"===this.layout.type&&t.push({member:"MindMapChart",args:[]}),"RadialTree"===this.layout.type&&t.push({member:"RadialTree",args:[]}),"SymmetricalLayout"===this.layout.type&&t.push({member:"SymmetricalLayout",args:[]}),"Flowchart"===this.layout.type&&t.push({member:"FlowchartLayout",args:[]}),(this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource||this.dataSourceSettings.crudAction.read||this.dataSourceSettings.connectionDataSource.crudAction.read)&&t.push({member:"DataBinding",args:[]}),this.constraints&ms.LineRouting&&t.push({member:"LineRouting",args:[]}),this.constraints&ms.AvoidLineOverlapping&&t.push({member:"AvoidLineOverlapping",args:[this]}),(this.layout&&("ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type)||"Linear"===this.layout.arrangement||this.layout.enableRouting)&&t.push({member:"LineDistribution",args:[]}),t},e.prototype.removeUserHandlesTemplate=function(){if(this.selectedItems.userHandles.length)for(var t=0;t<this.selectedItems.userHandles.length;t++)for(var e=0,i=this.views;e<i.length;e++){var n=i[e];av(this.selectedItems.userHandles[parseInt(t.toString(),10)].name+"_template_hiddenUserHandle",n)}},e.prototype.destroy=function(){if(clearInterval(this.renderTimer),this.renderTimer=null,this.hRuler&&this.vRuler&&(this.hRuler.destroy(),this.vRuler.destroy()),this.tooltipObject.destroy(),this.droppable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this),this.removeUserHandlesTemplate(),this.clearTemplate(),document.getElementById(this.element.id)){this.element.classList.remove("e-diagram");for(var e=document.getElementsByClassName("e-diagram-tooltip");e.length>0;)e[0].parentNode.removeChild(e[0]);var i=document.getElementById(this.element.id+"content");i&&this.element.removeChild(i);var n="measureElement";if(window[""+n]){window[""+n].usageCount-=1;var s="measureElementCount";window[""+s]--,0===window[""+s]&&(window[""+n].parentNode.removeChild(window[""+n]),window[""+n]=null)}Ry={}}window.domTable={};for(var r=0;r<this.layers.length;r++){this.layers[parseInt(r.toString(),10)].zIndexTable={}}this.diagramActions=void 0},e.prototype.wireEvents=function(){var t=G.touchStartEvent,e=G.touchEndEvent,i=G.touchMoveEvent,n=G.isPointer?"pointerleave":"mouseleave",s=G.isPointer,r="mozilla"===G.info.name?s?"mousewheel":"DOMMouseScroll":"mousewheel";K.add(this.diagramCanvas,t,this.eventHandler.mouseDown,this.eventHandler),K.add(this.diagramCanvas,i,this.eventHandler.mouseMove,this.eventHandler),K.add(this.diagramCanvas,e,this.eventHandler.mouseUp,this.eventHandler),K.add(this.diagramCanvas,n,this.eventHandler.mouseLeave,this.eventHandler),K.add(this.diagramCanvas,"keydown",this.eventHandler.keyDown,this.eventHandler),K.add(this.diagramCanvas,"keyup",this.eventHandler.keyUp,this.eventHandler),K.add(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick,this.eventHandler),K.add(this.diagramCanvas,"scroll",this.eventHandler.scrolled,this.eventHandler),K.add(this.diagramCanvas,r,this.eventHandler.mouseWheel,this.eventHandler),K.add(window,"resize",this.eventHandler.windowResize,this.eventHandler),this.initDroppables()},e.prototype.unWireEvents=function(){var t=G.touchStartEvent,e=G.touchMoveEvent,i=G.isPointer?"pointerleave":"mouseleave",n=G.isPointer,s="mozilla"===G.info.name?n?"mousewheel":"DOMMouseScroll":"mousewheel",r=G.touchEndEvent;K.remove(this.diagramCanvas,t,this.eventHandler.mouseDown),K.remove(this.diagramCanvas,e,this.eventHandler.mouseMove),K.remove(this.diagramCanvas,r,this.eventHandler.mouseUp),K.remove(this.diagramCanvas,i,this.eventHandler.mouseLeave),K.remove(this.diagramCanvas,"keydown",this.eventHandler.keyDown),K.remove(this.diagramCanvas,"keyup",this.eventHandler.keyUp),K.remove(this.diagramCanvas,"dblclick",this.eventHandler.doubleClick),K.remove(this.diagramCanvas,"scroll",this.eventHandler.scrolled),K.remove(this.diagramCanvas,s,this.eventHandler.mouseWheel),K.remove(window,"resize",this.eventHandler.windowResize)},e.prototype.select=function(t,e,i){null!=t&&this.commandHandler.selectObjects(t,e,i)},e.prototype.getDiagramAction=function(t){var e;return 2===t&&Is.Render?e="Render":t&Is.UndoRedo?e="UndoRedo":t&Is.PublicMethod?e="PublicMethod":t&Is.ToolAction?e="ToolAction":t&Is.TextEdit?e="TextEdit":t&Is.Group?e="Group":t&Is.Interactions?e="Interactions":t&Is.PreventHistory?e="PreventHistory":t&Is.DecoratorPropertyChange?e="DecoratorPropertyChange":t&Is.PreventZIndexOnDragging?e="PreventZIndexOnDragging":t&Is.isGroupDragging?e="isGroupDragging":t&Is.DragUsingMouse&&(e="DragUsingMouse"),e},e.prototype.selectAll=function(){var t;t=this.getObjectsOfLayer(this.activeLayer.objects),this.select(t)},e.prototype.unSelect=function(t){t&&Zu(this,t)&&this.commandHandler.unSelect(t)},e.prototype.clearSelection=function(){this.commandHandler.clearSelection(!0)},e.prototype.updateViewPort=function(){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.eventHandler.updateViewPortSize(this.element),this.updateBlazorDiagramProperties(t,!0)},e.prototype.cutCommand=function(){this.cut()},e.prototype.cut=function(){this.commandHandler.cut()},e.prototype.addProcess=function(t,e){this.bpmnModule&&this.bpmnModule.addProcess(t,e,this)},e.prototype.removeProcess=function(t){this.bpmnModule&&this.bpmnModule.removeProcess(t,this)},e.prototype.pasteCommand=function(){this.paste()},e.prototype.paste=function(t){this.commandHandler.paste(t)},e.prototype.fitToPage=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.fitToPage(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.bringIntoView=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.bringIntoView(t,!0),this.updateBlazorDiagramProperties(e,!0)},e.prototype.bringToCenter=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e),this.scroller.bringToCenter(t),this.updateBlazorDiagramProperties(e,!0)},e.prototype.copyCommand=function(){this.copy()},e.prototype.copy=function(){return this.commandHandler.copy()},e.prototype.group=function(){this.selectedItems.nodes.concat(this.selectedItems.connectors).length>1&&(this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.group(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues())},e.prototype.unGroup=function(){this.callBlazorModel=!1,this.insertBlazorDiagramObjects(this.selectedItems),this.commandHandler.unGroup(),this.callBlazorModel=!0,this.commandHandler.getBlazorOldValues()},e.prototype.sendToBack=function(){this.commandHandler.sendToBack()},e.prototype.setActiveLayer=function(t){var e=this.commandHandler.getLayer(t);this.activeLayer=e;var i=e.objects;this.activeLayerObjectsSet.clear();for(var n=0,s=i;n<s.length;n++){var r=s[n];this.activeLayerObjectsSet.add(r)}},e.prototype.addLayer=function(t,e){this.commandHandler.addLayer(t,e)},e.prototype.removeLayer=function(t){this.commandHandler.removeLayer(t,x())},e.prototype.moveObjects=function(t,e){Fn(this.layers);this.enableServerDataBinding(!1),this.commandHandler.moveObjects(t,e)},e.prototype.layerObjectUpdate=function(){},e.prototype.sendLayerBackward=function(t){this.layerObjectUpdate(),this.commandHandler.sendLayerBackward(t)},e.prototype.bringLayerForward=function(t){this.layerObjectUpdate(),this.commandHandler.bringLayerForward(t)},e.prototype.cloneLayer=function(t){this.commandHandler.cloneLayer(t)},e.prototype.bringToFront=function(){this.commandHandler.bringToFront()},e.prototype.moveForward=function(){this.commandHandler.sendForward()},e.prototype.sendBackward=function(){this.commandHandler.sendBackward()},e.prototype.getObject=function(t){return this.nameTable[""+t]},e.prototype.getNodeObject=function(t){return Fn(this.nameTable[""+t])},e.prototype.getConnectorObject=function(t){return Fn(this.nameTable[""+t])},e.prototype.getActiveLayer=function(){return this.activeLayer},e.prototype.nudgeCommand=function(t,e,i){if("object"!=typeof t&&(this.selectedItems.nodes.length||this.selectedItems.connectors.length)>0){var n=void 0;e.type&&"KEYDOWN"===e.type&&(n=e.type),this.nudge(t,void 0,void 0,n)}},e.prototype.nudge=function(t,e,i,n){var s=0,r=0;"Left"===t||"Right"===t?s=("Left"===t?-1:1)*(e||1):r=("Up"===t?-1:1)*(i||1),"KEYDOWN"===n&&(s*=5,r*=5),this.restrictedDeltaValue={x:0,y:0};var o=this.selectedItems,a=this.selectedItems.wrapper.children[0];if(a instanceof Zs)this.commandHandler.labelDrag(o.nodes[0],a,s,r);else{var l=Fn(this.selectedItems);this.protectPropertyChange(!0),this.drag(o,s,r),this.protectPropertyChange(!1);var h={type:"PositionChanged",redoObject:Fn(this.selectedItems),undoObject:l,category:"Internal"};this.addHistoryEntry(h)}this.refreshCanvasLayers()},e.prototype.insertBlazorDiagramObjects=function(t){},e.prototype.drag=function(t,e,i){if(this.insertBlazorDiagramObjects(t),this.bpmnModule&&t instanceof Ny&&(!this.nameTable[t.parentId]||"Container"!==this.nameTable[t.parentId].shape.type)){if(this.bpmnModule.updateAnnotationDrag(t,this,e,i))return}else if(t instanceof Ny&&this.nameTable[t.parentId]&&"Container"===this.nameTable[t.parentId].shape.type)return void function(t,e,i,n){var s=e.nameTable[t.parentId],r=0;s.shape.hasHeader&&(r=s.shape.header.height);var o={top:t.margin.top+n-r>=0?t.margin.top+n:t.margin.top,left:t.margin.left+i>=0?t.margin.left+i:t.margin.left};o.top===t.margin.top&&o.left===t.margin.left||e.nodePropertyChange(t,{},{margin:o}),Zf(s,t.id,e),qf(0,t,e,!0),s.wrapper.measure(new un(void 0,void 0)),s.wrapper.arrange(s.wrapper.desiredSize),e.updateSelector(),Xf(s,e)}(t,this,e,i);if((t instanceof By&&t.wrapper||t&&"helper"===t.id&&t.wrapper)&&this.constraints&ms.RestrictNegativeAxisDragDrop){var n=t.wrapper.bounds;if(n){if(this.restrictedDeltaValue.x>0&&(this.restrictedDeltaValue.x-=e,this.restrictedDeltaValue.x>0?e=0:(e=-1*this.restrictedDeltaValue.x,this.restrictedDeltaValue.x=0)),this.restrictedDeltaValue.y>0&&(this.restrictedDeltaValue.y-=i,this.restrictedDeltaValue.y>0?i=0:(i=-1*this.restrictedDeltaValue.y,this.restrictedDeltaValue.y=0)),n.x+e<0){var s=-(n.x+e);this.restrictedDeltaValue.x+=s,e+=s}if(n.y+i<0){var r=-(n.y+i);this.restrictedDeltaValue.y+=r,i+=r}}}if(t instanceof By){if(this.preventConnectorsUpdate=!0,t.nodes&&t.nodes.length){for(var o=0,a=t.nodes;o<a.length;o++){var l=a[o];if(this.callBlazorModel=!1,this.drag(l,e,i),l.parentId){var h=this.nameTable[l.parentId];if(h.isLane)t.nodes.length>1&&(this.preventConnectorsUpdate=!1),Vu(h,this.nameTable[h.parentId],l,this)}}this.callBlazorModel=!0}if(t.connectors&&t.connectors.length){this.callBlazorModel=!1;for(var c=0,d=t.connectors;c<d.length;c++){var p=d[c];this.drag(p,e,i),-1===this.selectionConnectorsList.indexOf(p)&&this.selectionConnectorsList.push(p)}this.callBlazorModel=!0}this.updateSelector(),this.diagramActions&Is.DragUsingMouse&&this.updatePage()}else t instanceof Ny&&this.bpmnModule&&this.bpmnModule.updateAnnotationDrag(t,this,e,i),this.commandHandler.drag(t,e,i);if(t instanceof By){this.preventConnectorsUpdate=!1;for(var u=0,g=this.selectionConnectorsList;u<g.length;u++){var m=g[u];this.updateConnectorProperties(this.nameTable[m.id]),"Bpmn"===m.shape.type&&"Default"===m.shape.sequence&&"Sequence"===m.shape.flow&&this.commandHandler.updatePathElementOffset(m)}this.selectionConnectorsList=[]}!this.callBlazorModel||this.blazorActions&ns.interaction||this.blazorActions&ns.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues()},e.prototype.disableStackContainerPadding=function(t,e){if(t instanceof Pf&&(t.considerPadding=e),t.children)for(var i=0,n=t.children;i<n.length;i++){var s=n[i];this.disableStackContainerPadding(s,!1)}},e.prototype.checkSize=function(t,e,i){if(!t||!t.wrapper||!t.wrapper.bounds)return!0;if(t.constraints&&t.constraints&ps.AspectRatio)return!0;var n=t.wrapper.bounds,s=n.width*e,r=n.height*i;if(void 0!==t.minWidth&&s<t.minWidth||void 0!==t.minHeight&&r<t.minHeight||void 0!==t.maxWidth&&s>t.maxWidth||void 0!==t.maxHeight&&r>t.maxHeight)return!1;if(t.children&&t.children.length>0)for(var o=0,a=t.children;o<a.length;o++){var l=a[o],h=this.nameTable[""+l];if(h&&!this.checkSize(h,e,i))return!1}return!0},e.prototype.scale=function(t,e,i,n){this.disableStackContainerPadding(t.wrapper,!1),this.insertBlazorDiagramObjects(t);var s=!0;if(t.id&&(t=this.nameTable[t.id]||t),(t instanceof By&&t.wrapper||t&&"helper"===t.id&&t.wrapper)&&this.constraints&ms.RestrictNegativeAxisDragDrop){var r=t.wrapper.bounds;if(r){var o=t.wrapper,a=cf(o.offsetX-o.actualSize.width*o.pivot.x,o.offsetY-o.actualSize.height*o.pivot.y,o.actualSize.width,o.actualSize.height,o.rotateAngle,o.offsetX,o.offsetY,n),l=Nn();On(l,-t.rotateAngle,a.x,a.y),kn(l,e,i,a.x,a.y),On(l,t.rotateAngle,a.x,a.y);var h={x:r.x+.5*r.width,y:r.y+.5*r.height},c=Ln(l,h);if(t.rotateAngle%360==0){var d=c.x-r.width*e*.5;d<0&&(e=Math.round(r.width*e+d)/r.width);var p=c.y-r.height*i*.5;p<0&&(i=Math.round(r.height*i+p)/r.height)}else{var u=[{x:r.x,y:r.y},{x:r.x+r.width,y:r.y},{x:r.x,y:r.y+r.height},{x:r.x+r.width,y:r.y+r.height}].map(function(t){return Ln(l,t)}),g=Math.min.apply(Math,u.map(function(t){return t.x})),m=Math.min.apply(Math,u.map(function(t){return t.y}));(g<0||m<0)&&(e=1,i=1)}}}if(t instanceof By){if(t.nodes&&t.nodes.length){this.callBlazorModel=!1;for(var f=0,y=t.nodes;f<y.length;f++){var v=y[f];if(!this.checkSize(v,e,i))return!1}for(var b=0,C=t.nodes;b<C.length;b++){v=C[b];s=this.commandHandler.scale(v,e,i,n,t),this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds)||this.commandHandler.scale(v,1/e,1/i,n,t)}this.callBlazorModel=!0}if(t.connectors&&t.connectors.length){this.callBlazorModel=!1;for(var I=0,M=t.connectors;I<M.length;I++){var S=M[I];this.commandHandler.scale(S,e,i,n,t),this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds)||this.commandHandler.scale(S,1/e,1/i,n,t)}this.callBlazorModel=!0}Df(this,this.selectedItems)||this.updateSelector(),this.refreshCanvasLayers()}else this.commandHandler.scale(t,e,i,n,t.children?t:void 0);return!this.callBlazorModel||this.blazorActions&ns.interaction||this.blazorActions&ns.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),this.disableStackContainerPadding(t.wrapper,!0),s},e.prototype.rotate=function(t,e,i,n){var s,r,o=[];if(!n){if((s=Fn(t)).nodes&&s.nodes.length>0&&s.nodes[0].children){this.fromUndo||(this.rotateUsingButton=!0);for(var a=this.commandHandler.getAllDescendants(s.nodes[0],[]),l=0;l<a.length;l++){var h=this.commandHandler.cloneChild(a[parseInt(l.toString(),10)].id);o[a[parseInt(l.toString(),10)].id]=Fn(h)}}e<0&&(e=(e+360)%360)}if(this.insertBlazorDiagramObjects(t),t.id&&(t=this.nameTable[t.id]||t),t)if(i=i||{x:t.wrapper.offsetX,y:t.wrapper.offsetY},t instanceof By){this.callBlazorModel=!1,t.rotateAngle+=e,t.wrapper.rotateAngle+=e;var c=Un(t.wrapper);if(!(r=this.commandHandler.checkBoundaryConstraints(void 0,void 0,c)))return t.rotateAngle-=e,t.wrapper.rotateAngle-=e,r;var d=[];d=(d=d.concat(t.nodes)).concat(t.connectors),this.commandHandler.rotateObjects(t,d,e,i),this.callBlazorModel=!0}else this.commandHandler.rotateObjects(t,[t],e,i);if(!this.callBlazorModel||this.blazorActions&ns.interaction||this.commandHandler.getBlazorOldValues(),!n&&!this.fromUndo&&s.nodes&&s.nodes.length>0&&s.nodes[0].children){var p={type:"RotationChanged",redoObject:Fn(t),undoObject:Fn(s),category:"Internal",childTable:o};this.commandHandler.addHistoryEntry(p),this.commandHandler.updateSelector()}return r},e.prototype.dragSourceEnd=function(t,e,i){this.insertBlazorDiagramObjects(t),this.commandHandler.dragSourceEnd(t,e,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},e.prototype.dragTargetEnd=function(t,e,i){this.insertBlazorDiagramObjects(t),this.commandHandler.dragTargetEnd(t,e,i),this.callBlazorModel&&this.commandHandler.getBlazorOldValues()},e.prototype.findObjectsUnderMouse=function(t,e){return this.eventHandler.findObjectsUnderMouse(t,e)},e.prototype.findObjectUnderMouse=function(t,e,i){return this.eventHandler.findObjectUnderMouse(t,e,i)},e.prototype.findTargetObjectUnderMouse=function(t,e,i,n,s){return this.eventHandler.findTargetUnderMouse(t,e,i,n,s)},e.prototype.findElementUnderMouse=function(t,e,i,n){return this.eventHandler.findElementUnderMouse(t,e,i,n)},e.prototype.findActionToBeDone=function(t,e,i,n){return this.eventHandler.findActionToBeDone(t,e,i,n)},e.prototype.updateConnectorPort=function(t){if(t.ports.length)for(var e=void 0,i=0,n=t.ports;i<n.length;i++){var s=n[i];e=this.getWrapper(t.wrapper,s.id),t.initPortWrapper(s,t.intermediatePoints,t.wrapper.bounds,e)}t.wrapper.measure(new un(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.getTool=function(t){var e,i=is(this.getCustomTool);return i&&(e=i(t))?e:this.eventHandler.getTool(t)},e.prototype.getCursor=function(t,e){var i,n=is(this.getCustomCursor);if(n&&(i=n(t,e)))return i;if(this.customCursor.length)for(var s=0;s<this.customCursor.length;s++)if(this.customCursor[parseInt(s.toString(),10)].action===t)return this.customCursor[parseInt(s.toString(),10)].cursor;return this.eventHandler.getCursor(t)},e.prototype.initHistory=function(){this.undoRedoModule&&this.undoRedoModule.initHistory(this)},e.prototype.addHistoryEntry=function(t,e){if(this.undoRedoModule&&this.constraints&ms.UndoRedo&&(!this.currentSymbol||this.checkCurrentSymbol(this.currentSymbol,t))){if(t.undoObject&&"helper"===t.undoObject.id)return;var i=this.undoRedoModule.addHistoryEntry(t,this);"StartGroup"!==t.type&&"EndGroup"!==t.type&&i&&this.historyChangeTrigger(t,"CustomAction",e)}},e.prototype.checkCurrentSymbol=function(t,e){var i=!1;if(e.undoObject&&e.redoObject){var n=e.undoObject,s=e.undoObject;return!(!s.id||!n.id||s.id===t.id||n.id===t.id)||i}return i},e.prototype.addCustomHistoryEntry=function(t){},e.prototype.historyChangeTrigger=function(t,e,i){var n={},s="oldValue",r="newValue",o=[];if("Internal"===t.category){switch(t&&t.redoObject&&t.redoObject.nodes instanceof Array&&t.redoObject.connectors instanceof Array?o=t.redoObject.nodes.concat(t.redoObject.connectors):t.redoObject&&o.push(t.redoObject),n.type=t.type,t.type){case"PositionChanged":case"ConnectionChanged":"Undo"===e?(n[""+s]={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY},n[""+r]={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY}):(n[""+s]={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY},n[""+r]={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY});break;case"RotationChanged":"Undo"===e?(n[""+s]={rotateAngle:t.redoObject.rotateAngle},n[""+r]={rotateAngle:t.undoObject.rotateAngle}):(n[""+s]={rotateAngle:t.undoObject.rotateAngle},n[""+r]={rotateAngle:t.redoObject.rotateAngle});break;case"SizeChanged":"Undo"===e?(n[""+s]={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY,width:t.redoObject.width,height:t.redoObject.height},n[""+r]={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY,width:t.undoObject.width,height:t.undoObject.height}):(n[""+s]={offsetX:t.undoObject.offsetX,offsetY:t.undoObject.offsetY,width:t.undoObject.width,height:t.undoObject.height},n[""+r]={offsetX:t.redoObject.offsetX,offsetY:t.redoObject.offsetY,width:t.redoObject.width,height:t.redoObject.height});break;case"CollectionChanged":n[t.changeType]=o}var a=[],l=[];if(void 0===i&&"PropertyChanged"===t.type){for(var h=0;h<Object.keys(t.undoObject).length;h++)if("nodes"===Object.keys(t.undoObject)[parseInt(h.toString(),10)])for(var c=0,d=Object.keys(t.undoObject.nodes);c<d.length;c++){var p=d[c],u=parseInt(p,10);a.push(this.nodes[parseInt(u.toString(),10)].id)}for(h=0;h<Object.keys(t.undoObject).length;h++)if("connectors"===Object.keys(t.undoObject)[parseInt(h.toString(),10)])for(var g=0,m=Object.keys(t.undoObject.connectors);g<m.length;g++){p=m[g],u=parseInt(p,10);l.push(this.connectors[parseInt(u.toString(),10)].id)}i=a.concat(l)}var f={cause:t.category,source:o,change:n,action:e,sourceId:i};o.length&&this.triggerEvent(Ds.historyChange,f)}},e.prototype.startGroupAction=function(){this.diagramActions&Is.UndoRedo||this.addHistoryEntry({type:"StartGroup",category:"Internal"})},e.prototype.endGroupAction=function(){this.diagramActions&Is.UndoRedo||this.addHistoryEntry({type:"EndGroup",category:"Internal"})},e.prototype.undo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&ms.UndoRedo?(this.isUndo=!0,this.undoRedoModule.undo(this),this.isUndo=!1):this.constraints&ms.UndoRedo&&console.warn('[WARNING] :: Module "UndoRedo" is not available in Diagram component! You either misspelled the module name or forgot to load it.'),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.redo=function(){this.canEnableBlazorObject=!0,this.callBlazorModel=!1,this.undoRedoModule&&this.constraints&ms.UndoRedo?this.undoRedoModule.redo(this):this.constraints&ms.UndoRedo&&console.warn('[WARNING] :: Module "UndoRedo" is not available in Diagram component! You either misspelled the module name or forgot to load it.'),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.getBlazorDiagramObjects=function(t){if(t)for(var e=0;e<t.length;e++)this.insertBlazorDiagramObjects(t[parseInt(e.toString(),10)]);else this.insertBlazorDiagramObjects(this.selectedItems);this.callBlazorModel=!1,this.canEnableBlazorObject=!0},e.prototype.align=function(t,e,i){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Is.PublicMethod,this.commandHandler.align(e,t,i||"Object"),this.commandHandler.getBlazorOldValues(),this.callBlazorModel=!0,this.canEnableBlazorObject=!1},e.prototype.distribute=function(t,e){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Is.PublicMethod,this.commandHandler.distribute(e,t),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},e.prototype.sameSize=function(t,e){this.getBlazorDiagramObjects(e),e||(e=(e=[]).concat(this.selectedItems.nodes,this.selectedItems.connectors)),this.diagramActions=this.diagramActions|Is.PublicMethod,this.commandHandler.sameSize(e,t),this.commandHandler.getBlazorOldValues(),this.canEnableBlazorObject=!1,this.callBlazorModel=!0},e.prototype.updateBlazorDiagramProperties=function(t,e){},e.prototype.getZoomingAttribute=function(){var t=[];return t.push("scrollSettings"),t.push("snapSettings"),t},e.prototype.zoom=function(t,e){var i=this.getZoomingAttribute();this.updateBlazorDiagramProperties(i),this.scroller.zoom(t,0,0,e),this.blazorActions&ns.interaction||this.updateBlazorDiagramProperties(i,!0)},e.prototype.zoomTo=function(t){var e=this.getZoomingAttribute();this.updateBlazorDiagramProperties(e);var i=t.zoomFactor?t.zoomFactor:.2;i="ZoomOut"===t.type?1/(1+i):1+i,this.scroller.zoom(i,0,0,t.focusPoint),this.updateBlazorDiagramProperties(e,!0)},e.prototype.pan=function(t,e,i,n){var s=this.getZoomingAttribute();this.updateBlazorDiagramProperties(s),this.setCursor("grabbing"),this.scroller.zoom(1,t,e,i,n),this.updateBlazorDiagramProperties(s,!0)},e.prototype.reset=function(){var t=this.getZoomingAttribute();this.updateBlazorDiagramProperties(t),this.scroller.zoom(1/this.scroller.currentZoom,-this.scroller.horizontalOffset,-this.scroller.verticalOffset,{x:0,y:0}),this.updateBlazorDiagramProperties(t,!0)},e.prototype.resetSegments=function(){if(this.constraints&ms.LineRouting&&this.lineRoutingModule)this.lineRoutingModule.lineRouting(this);else{this.protectPropertyChange(!0);for(var t=void 0,e=0;e<this.connectors.length;e++)(t=this.connectors[parseInt(e.toString(),10)]).segments=[],this.connectorPropertyChange(t,{},{segments:t.segments}),this.avoidLineOverlappingModule&&this.avoidLineOverlappingModule.removeConnector(t);this.protectPropertyChange(!1)}},e.prototype.setBlazorDiagramProps=function(t){var e=this.getZoomingAttribute();t?this.updateBlazorDiagramProperties(e):this.updateBlazorDiagramProperties(e,!0)},e.prototype.triggerEvent=function(t,e){return Qb(this,void 0,void 0,function(){return Zb(this,function(i){switch(i.label){case 0:return e&&this.updateEventValue(e),[4,this.trigger(Ds[""+t],e)];case 1:return[2,i.sent()]}})})},e.prototype.updateEventValue=function(t){var e=t.element;t.element&&e instanceof By&&e.nodes.length+e.connectors.length===1&&(t.element=1===e.nodes.length?e.nodes[0]:e.connectors[0])},e.prototype.addNodeToLane=function(t,e,i){if(this.nameTable[""+e]){var n=this.nameTable[""+e];if(this.protectPropertyChange(!0),this.undoRedoModule&&this.historyManager.startGroupAction(),this.nameTable[t.id]||(t.offsetX=n.wrapper.bounds.width+n.wrapper.bounds.x,t.offsetY=n.wrapper.bounds.height+n.wrapper.bounds.y,t=this.add(t)),t.parentId="",n.shape.phases.length)for(var s=0;s<n.shape.phases.length;s++){h=e+i+s;if(this.nameTable[""+h]&&this.nameTable[""+h].isLane){var r=this.nameTable[""+h].wrapper.bounds,o={x:r.x+(r.x-n.wrapper.bounds.x+t.margin.left+t.wrapper.bounds.width/2),y:r.y+n.wrapper.bounds.y-t.margin.top};if("Horizontal"===n.shape.orientation)o.y=r.y;else{o.x=r.x;var a=this.nameTable[""+h].parentId+n.shape.lanes[0].id+"_0_header";o.y=r.y+(n.wrapper.bounds.y-this.nameTable[""+a].wrapper.bounds.height+t.margin.top+t.wrapper.bounds.height/2)}var l=n.shape.phases[parseInt(s.toString(),10)];if(t.margin.left<=l.offset){this.addChildToPhase(t,n,h);break}if(h===e+i+(n.shape.phases.length-1)||r.containsPoint(o)){this.addChildToPhase(t,n,h);break}}}else{var h=e+i+"0";this.nameTable[""+h]&&(this.commandHandler.updateLaneChildrenZindex(t,this.nameTable[""+h]),Hu(this,this.nameTable[""+h],t,void 0,!0),Vu(this.nameTable[""+h],n,t,this))}this.undoRedoModule&&this.historyManager.endGroupAction(),this.protectPropertyChange(!1)}this.updateDiagramElementQuad()},e.prototype.addChildToPhase=function(t,e,i){this.commandHandler.updateLaneChildrenZindex(t,this.nameTable[""+i]),Hu(this,this.nameTable[""+i],t,void 0,!0),Vu(this.nameTable[""+i],e,t,this)},e.prototype.showTooltip=function(t){t&&t.id&&!t.wrapper&&(t=this.nameTable[t.id]);var e=Un(t.wrapper),i={x:0,y:0},n=t.tooltip.content?t.tooltip.content:"X:"+Math.round(e.x)+" Y:"+Math.round(e.y);t&&"Custom"===t.tooltip.openOn&&(i=t instanceof Ny?{x:t.offsetX+t.width/2,y:t.offsetY+t.height/2}:{x:t.targetPoint.x,y:t.targetPoint.x},this.commandHandler.showTooltip(t,i,n,"SelectTool",!0))},e.prototype.hideTooltip=function(t){t&&"Custom"===t.tooltip.openOn&&this.tooltipObject.close()},e.prototype.addNode=function(t,e){return this.add(t,e)},e.prototype.addChildToGroup=function(t,e){var i=t&&t.shape&&"Container"===t.shape.type,n=this.allowServerDataBinding;this.enableServerDataBinding(!1);var s=this.isProtectedOnChange;this.protectPropertyChange(!0),t=this.getObject(t.id);var r=!(this.diagramActions&Is.UndoRedo||this.diagramActions&Is.Group||this.diagramActions&Is.PreventHistory);if(i&&!e.id){var o=this.getObject(e);o?e=o:e.id=Hn()}r&&this.startGroupAction();var a=e.id;if(i)Kf(e,t.id,this);else{a=this.addChild(t,e);var l=this.nameTable[e]?this.nameTable[e]:e,h=document.getElementById(l.id+"_groupElement"),c=document.getElementById(t.id+"_groupElement");c&&h&&c.appendChild(h)}if(r){var d={};d[""+a]=Fn(this.getObject(a));var p={type:"AddChildToGroupNode",changeType:"Insert",undoObject:Fn(t),redoObject:Fn(t),category:"Internal",objectId:a,childTable:d};this.addHistoryEntry(p),this.endGroupAction()}this.protectPropertyChange(s),this.enableServerDataBinding(n),this.updateSelector()},e.prototype.removeChildFromGroup=function(t,e){var i=t&&t.shape&&"Container"===t.shape.type,n=this.allowServerDataBinding;this.enableServerDataBinding(!1);var s=this.isProtectedOnChange;this.protectPropertyChange(!0);var r=Fn(t=this.getObject(t.id)),o=!(this.diagramActions&Is.UndoRedo||this.diagramActions&Is.Group||this.diagramActions&Is.PreventHistory),a=e.id||(this.nameTable[e]?this.nameTable[e].id:e);if(o&&this.startGroupAction(),i){if(o){(c={})[""+a]=Fn(this.getObject(a));var l={type:"RemoveChildFromGroupNode",changeType:"Remove",undoObject:r,redoObject:Fn(t),category:"Internal",objectId:a,childTable:c};this.addHistoryEntry(l),Jf(e,this)}}else{var h=this.removeChild(t,e);if(o){var c;(c={})[""+h]=Fn(this.getObject(h));l={type:"RemoveChildFromGroupNode",changeType:"Remove",undoObject:Fn(r),redoObject:Fn(t),category:"Internal",objectId:h,childTable:c};this.addHistoryEntry(l)}var d=this.nameTable[e]?this.nameTable[e]:e,p=d.zIndex,u=this.layers.indexOf(this.commandHandler.getObjectLayer(d.id)),g=this.layers[parseInt(u.toString(),10)].objects[p+1],m=document.getElementById(g+"_groupElement"),f=document.getElementById(d.id+"_groupElement"),y=document.getElementById(t.id+"_groupElement");y&&f&&(g&&m?y.contains(m)?y.insertBefore(f,m):y.parentNode.contains(m)&&m.parentElement===y.parentElement?y.parentNode.insertBefore(f,m):y.parentNode.appendChild(f):y.parentNode.appendChild(f))}o&&this.endGroupAction(),this.protectPropertyChange(s),this.enableServerDataBinding(n),this.updateSelector()},e.prototype.getHistoryStack=function(t){var e=[],i=t?this.historyManager.undoStack:this.historyManager.redoStack;if(void 0!==this.historyManager.stackLimit){for(var n=i.length-1;n>=0;n--)if(e.push(i[parseInt(n.toString(),10)]),e.length>this.historyManager.stackLimit)return e}else e=i;return e},e.prototype.getEdges=function(t){return t.outEdge?this.nameTable[t.id].outEdges:this.nameTable[t.id].inEdges},e.prototype.getParentId=function(t){return this.nameTable[""+t].parentId},e.prototype.addConnector=function(t){return this.add(t)},e.prototype.UpdateBlazorDiagramModelCollection=function(t,e,i,n){},e.prototype.UpdateBlazorDiagramModel=function(t,e,i,n){},e.prototype.UpdateBlazorLabelOrPortObjects=function(t,e,i,n){},e.prototype.addBlazorDiagramObjects=function(){},e.prototype.removeNodeEdges=function(t,e,i){var n=this.nameTable[""+t],s=i?n.outEdges:n.inEdges;if(s.length>0)for(var r=0;r<s.length;r++)s[parseInt(r.toString(),10)]===e&&s.splice(r,1)},e.prototype.insertBlazorConnector=function(t){},e.prototype.add=function(t,i){var n,s=this.isProtectedOnChange;this.protectPropertyChange(!0);var r=!1;if(t){var o=void 0;if(o={element:t=Fn(t),cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changing",type:"Addition",cancel:!1},this.parentObject&&(o.parentId=this.parentObject.id),"helper"===t.id||this.diagramActions&Is.PreventCollectionChangeOnDragOver||this.triggerEvent(Ds.collectionChange,o),o.cancel&&this.drawingObject){this.removeElements(o.element),this.tooltipObject.close();var a=this.getObject(o.element.sourceID),l=void 0;if(df(o.element)===Rg){if(o.element.sourceID&&(this.removeNodeEdges(o.element.sourceID,o.element.id,!0),a.ports.length>0)){for(var h=0;h<a.ports.length;h++){var c=a.ports[parseInt(h.toString(),10)];c.id===o.element.sourcePortID&&(l=!(c.outEdges.length>0))}this.removePortEdges(a,o.element.sourcePortID,o.element.id,l)}o.element.targetID&&this.removeNodeEdges(o.element.targetID,o.element.id,!1)}}this.diagramActions=this.diagramActions|Is.PublicMethod,t.id=t.id||Hn();var d=this.activeLayer;if(!o.cancel&&d&&!d.lock){if(d.objects.indexOf(t.id)<0&&!d.lock&&(d.visible||(d.visible=!0,this.dataBind()),d.objects.push(t.id),this.activeLayerObjectsSet.add(t.id)),df(t)===Rg)(n=new Rg(this,"connectors",t,!0)).status="New",this.nameTable[n.targetID]&&"TextAnnotation"===this.nameTable[n.targetID].shape.shape&&(n.isBpmnAnnotationConnector=!0,n.constraints=n.constraints&~cs.Delete),bm(n,t,this.connectorDefaults),this.connectors.push(n),this.initObject(n),!1===t.visible&&this.updateElementVisibility(n.wrapper,n,t.visible),this.updateEdges(n),this.insertBlazorConnector(n);else{if(bm(n=new Ny(this,"nodes",t,!0),t,this.nodeDefaults),n.parentId=t.parentId?t.parentId:n.parentId,n.umlIndex=t.umlIndex,n.status="New",(r="TextAnnotation"===n.shape.shape)&&!t.isTextAnnotationCopied&&(n.inEdges=t.inEdges?t.inEdges:n.inEdges),this.nodes.push(n),this.initObject(n,d,void 0,i),r&&this.bpmnModule)for(h=0;h<this.bpmnModule.bpmnTextAnnotationConnector.length;h++)null===this.bpmnModule.bpmnTextAnnotationConnector[parseInt(h.toString(),10)].wrapper&&this.initConnectors(this.bpmnModule.bpmnTextAnnotationConnector[parseInt(h.toString(),10)],void 0,!0);if(this.updateTemplate(),this.bpmnModule&&n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.bpmnModule.updateDocks(n,this),this.lineRoutingModule&&this.constraints&ms.LineRouting){var p=this.spatialSearch.findObjects(n.wrapper.outerBounds);for(h=0;h<p.length;h++){var u=p[parseInt(h.toString(),10)];u instanceof Rg&&this.connectorPropertyChange(u,{},{sourceID:u.sourceID,targetID:u.targetID,sourcePortID:u.sourcePortID,targetPortID:u.targetPortID,sourcePoint:u.sourcePoint,targetPoint:u.targetPoint})}}else this.constraints&ms.LineRouting&&console.warn('[WARNING] :: Module "LineRouting" is not available in Diagram component! You either misspelled the module name or forgot to load it.');if(n.umlIndex>-1&&t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type){var g=this.nameTable[t.parentId];g.children.splice(n.umlIndex,0,n.id),g.wrapper.children.splice(n.umlIndex,0,n.wrapper),g.wrapper.measure(new un),g.wrapper.arrange(g.wrapper.desiredSize),this.updateDiagramObject(g)}}if(o={element:n,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changed",type:"Addition",cancel:!1},this.parentObject&&(o.parentId=this.parentObject.id),"helper"===t.id||this.diagramActions&Is.PreventCollectionChangeOnDragOver||this.triggerEvent(Ds.collectionChange,o),!(this.diagramActions&Is.UndoRedo||this.diagramActions&Is.Group||this.diagramActions&Is.PreventHistory)){var m=void 0,f={type:"CollectionChanged",changeType:"Insert",undoObject:Fn(m=t&&t.shape&&"SwimLane"===t.shape.type||t&&t.shape&&"Bpmn"===t.shape.type?t:n),redoObject:Fn(m),category:"Internal"};this.addHistoryEntry(f)}if(this.parentObject=void 0,"SVG"===this.mode){if(this.updateSvgNodes(n),this.updateTextElementValue(n),this.updateDiagramObject(n),r){var y=this.nameTable[n.inEdges[0]];this.updateDiagramObject(y)}n.shape.activity&&n.shape.activity.subProcess.processes&&n.shape.activity.subProcess.processes.length&&this.updateProcesses(n),this.updateBridging()}}}if(this.protectPropertyChange(s),this.resetDiagramActions(Is.PublicMethod),n&&this.layers.length>1&&this.moveNode(n),this.views)for(var v=0,b=this.views;v<b.length;v++){var C=b[v],I=this.views[""+C];I instanceof e||this.refreshCanvasDiagramLayer(I)}return this.renderReactTemplates(),n},e.prototype.addElements=function(t){for(var e=0;e<t.length;e++)this.add(t[parseInt(e.toString(),10)]);this.pathDataStorage&&this.pathDataStorage.clear()},e.prototype.getPathData=function(t){return this.pathDataStorage||(this.pathDataStorage=new Map),this.pathDataStorage.has(t)?this.pathDataStorage.get(t):[]},e.prototype.setPathData=function(t,e){0===(this.pathDataStorage.get(t)||[]).length&&this.pathDataStorage.set(t,e)},e.prototype.updateSvgNodes=function(t){if(t.children)for(var e=0,i=t.children;e<i.length;e++){var n=i[e];if(this.nameTable[""+n]&&this.nameTable[""+n].parentId){var s=Yy(n+"_groupElement",this.element.id);s&&s.parentNode.removeChild(s)}}},e.prototype.updateProcesses=function(t){if(this.bpmnModule&&t&&t.shape&&t.shape.activity&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length){var e=t.shape.activity.subProcess.processes;this.moveSvgNode(t.id);for(var i=0,n=e;i<n.length;i++){var s=n[i];this.moveSvgNode(s);for(var r=[],o=(r=r.concat(this.nameTable[""+s].outEdges,this.nameTable[""+s].inEdges)).length-1;o>=0;o--)this.moveSvgNode(r[parseInt(o.toString(),10)])}for(var a=0,l=e;a<l.length;a++){s=l[a];this.nameTable[""+s].shape.activity.subProcess.processes&&this.nameTable[""+s].shape.activity.subProcess.processes.length&&this.updateProcesses(this.nameTable[""+s])}}else this.moveSvgNode(t.id)},e.prototype.moveSvgNode=function(t){var e=Yy(t+"_groupElement",this.element.id),i=e.parentElement;e.parentNode.removeChild(e),i.appendChild(e)},e.prototype.addTextAnnotation=function(t,e){this.bpmnModule&&this.getBPMNTextAnnotation(e,this,t,!0)},e.prototype.spliceConnectorEdges=function(t,e){var i=[],n=e?this.nameTable[t.sourceID]:this.nameTable[t.targetID];if(n){for(var s=(i=e?n.outEdges:n.inEdges).length-1;s>=0;s--)i[parseInt(s.toString(),10)]===t.id&&i.splice(s,1);for(var r=0;n.ports&&r<n.ports.length;r++){var o=!e;this.removePortEdges(n,n.ports[parseInt(r.toString(),10)].id,t.id,o)}}},e.prototype.removeDependentConnector=function(t){if(t)for(var e=void 0,i=[],n=(i=i.concat(t.outEdges,t.inEdges)).length-1;n>=0;n--)if(e=this.nameTable[i[parseInt(n.toString(),10)]])if(this.connectorTable[e.id]=Fn(e),e.isBpmnAnnotationConnector){var s=this.nameTable[e.targetID];this.removeObjectsFromLayer(e);var r=this.connectors.indexOf(e);-1!==r&&this.connectors.splice(r,1),this.removeElements(e),this.removeFromAQuad(e),delete this.nameTable[e.id];var o=this.nameTable[e.sourceID];if(o){var a=o.outEdges.indexOf(e.id);-1!==a&&o.outEdges.splice(a,1)}t.id!==e.targetID&&this.remove(s)}else this.remove(e)},e.prototype.removeObjectsFromLayer=function(t){if(t.children)for(var e=0;e<t.children.length;e++){var i=this.nameTable[t.children[parseInt(e.toString(),10)]];i&&this.removeObjectsFromLayer(i)}var n=this.layers.indexOf(this.commandHandler.getObjectLayer(t.id)),s=this.layers[parseInt(n.toString(),10)].objects.indexOf(t.id);s>-1&&(Zu(this,t)&&this.unSelect(t),this.layers[parseInt(n.toString(),10)].objects.splice(s,1),this.activeLayerObjectsSet.delete(t.id),delete this.layers[parseInt(n.toString(),10)].zIndexTable[this.nameTable[t.id].zIndex])},e.prototype.removeElements=function(t){if("SVG"===this.mode||"Canvas"===this.mode&&"Native"===t.shape.type){var i=Yy(t.id+"_groupElement",this.element.id),n=t;if(n.ports&&n.ports.length>0)for(var s=0;s<n.ports.length;s++){var r=n.ports[parseInt(s.toString(),10)],o=Yy(n.id+"_"+r.id+"_groupElement",this.element.id);o&&o.parentNode.removeChild(o)}i&&i.parentNode.removeChild(i)}if(this.refreshCanvasLayers(),t.wrapper){var a=t.wrapper.children,l=void 0;if(a)for(s=0;s<a.length;s++){if(a[parseInt(s.toString(),10)]instanceof hr||a[parseInt(s.toString(),10)].id&&a[parseInt(s.toString(),10)].id.indexOf("icon_content")>0){a[parseInt(s.toString(),10)].id.indexOf("icon_content")>0&&"SVG"===this.mode&&((l=Yy(a[parseInt(s.toString(),10)].id+"_shape_groupElement",this.element.id))&&l.parentNode.removeChild(l),(l=Yy(a[parseInt(s.toString(),10)].id+"_rect_groupElement",this.element.id))&&l.parentNode.removeChild(l));for(var h=0,c=this.views;h<c.length;h++){var d=c[h];av(a[parseInt(s.toString(),10)].id+"_groupElement",d);var p=this.scroller.removeCollection.indexOf(t.id);this.scroller.removeCollection.splice(p,1)}}else if(a[parseInt(s.toString(),10)]instanceof sp)for(var u=0,g=this.views;u<g.length;u++){d=g[u];if(this.views[""+d]instanceof e||!this.preventOverviewRefresh){av(t.id+"_html_element",d),av(a[parseInt(s.toString(),10)].id+"_html_element",d);var m=!0,f=this.nameTable[t.parentId];(this.isAngular||this.isReact||this.isVue)&&(f&&f.isLane||this.constraints&ms.Virtualization)&&(m=!1),m&&(this.clearTemplate(["nodeTemplate_"+t.id]),a[parseInt(s.toString(),10)].annotationId&&this.clearTemplate(["annotationTemplate_"+t.id+a[parseInt(s.toString(),10)].annotationId]))}}Wm(a[parseInt(s.toString(),10)].id)}}},e.prototype.removeCommand=function(){this.remove()},e.prototype.remove=function(t){var e,i=[];i=i.concat(this.selectedItems.nodes,this.selectedItems.connectors);var n=!1;if(t){if(t=this.nameTable[t.id],this.insertBlazorConnector(t),t&&(up(t)||this.diagramActions&Is.Clear)&&(e={element:t,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changing",type:"Removal",cancel:!1},this.diagramActions&Is.Clear||"helper"===t.id||this.triggerEvent(Ds.collectionChange,e),!e.cancel)){if(up(t)&&t&&t.shape&&"SwimLane"===t.shape.type&&function(t,e){var i,n,s,r,o,a,l=e.wrapper.children[0].rows;for(n=0;n<l.length;n++)for(s=0;s<l[parseInt(n.toString(),10)].cells.length;s++){if((o=Iu(l[parseInt(n.toString(),10)].cells[parseInt(s.toString(),10)]))&&o.children)for(r=o.children.length-1;r>=0;r--)o.children[parseInt(r.toString(),10)].children&&(a=t.nameTable[o.children[parseInt(r.toString(),10)].id])&&(a.isLane?Mu(t,a):(t.removeDependentConnector(a),t.diagramActions|=Is.PreventHistory,a.constraints&ps.Delete?t.remove(a):Ou(t,a,{},!1),t.diagramActions&=~Is.PreventHistory));o&&(i=t.nameTable[o.id])&&Mu(t,i)}}(this,t),!(this.diagramActions&Is.UndoRedo||this.diagramActions&Is.PreventHistory||!(t instanceof Ny||t instanceof Rg))){var s={type:"CollectionChanged",changeType:"Remove",undoObject:Fn(t),redoObject:Fn(t),category:"Internal"};this.diagramActions&Is.Clear||t.children&&!t.isLane&&!t.isPhase&&t.children.length>0&&this.undoRedoModule&&"None"===this.layout.type&&(this.historyManager.startGroupAction(),n=!0),(t instanceof Ny||t instanceof Rg)&&this.deleteDependentConnector&&this.removeDependentConnector(t),t.isLane||t.isPhase||t.isHeader&&"Container"===this.nameTable[t.parentId].shape.type||this.diagramActions&Is.Clear||this.isStackChild(t)||this.addHistoryEntry(s)}"TextAnnotation"===t.shape.shape&&this.removeDependentConnector(t),!t.children||t.isLane||t.isPhase||this.diagramActions&Is.UndoRedo&&x()||this.deleteGroup(t),t.parentId&&(this.deleteChild(t,void 0,!0),this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type&&(this.updateDiagramObject(this.nameTable[t.parentId]),this.updateConnectorEdges(this.nameTable[t.parentId])));var r=void 0;this.diagramActions=this.diagramActions|Is.PublicMethod;var o=this.nameTable[t.id];if(o instanceof Ny){if("Bpmn"===o.shape.type&&this.bpmnModule&&this.bpmnModule.removeBpmnProcesses(o,this),(o.parentId&&this.nameTable[o.parentId]&&"Container"===this.nameTable[o.parentId].shape.type||"Container"===o.shape.type)&&function(t,e){var i=e.nameTable[t.parentId];if("Container"===t.shape.type){if(t.shape.children&&t.shape.children.length>0)for(var n=(s=t.shape.children).length-1;n>=0;n--)e.remove(e.nameTable[s[parseInt(n.toString(),10)]]);t.shape.hasHeader&&e.remove(e.nameTable[t.id+t.shape.header.id])}if(i){e.removeDependentConnector(t);var s=i.shape.children;if(Gf(i.wrapper,t.id,e,!0),s){var r=s.indexOf(t.id);s.splice(r,1)}}}(o,this),o.isLane||o.isPhase||"SwimLane"===o.shape.type){(a=o.isLane||o.isPhase?this.nameTable[o.parentId]:this.nameTable[o.id]).wrapper.children[0];o.isLane?Su(this,o,a):o.isPhase&&Du(this,o,a)}-1!==(r=this.nodes.indexOf(o))&&(this.crudDeleteNodes.push(this.nameTable[o.id]),this.nodes.splice(r,1),this.updateNodeEdges(o))}else-1!==(r=this.connectors.indexOf(o))&&(this.crudDeleteNodes.push(this.nameTable[o.id]),this.connectors.splice(r,1)),this.updateEdges(o),this.spliceConnectorEdges(t,!0),this.spliceConnectorEdges(t,!1);if(this.isServerUpdate||this.blazorActions&ns.GroupClipboardInProcess||this.commandHandler.getBlazorOldValues(),n&&this.historyManager.endGroupAction(),Zu(this,o)&&this.unSelect(o),!o.isPhase){if(this.removeObjectsFromLayer(t),this.currentDrawingObject&&(this.currentDrawingObject.wrapper=void 0),delete this.nameTable[t.id],i.length>0&&i[0].id===o.id&&o.parentId){var a,l=this.nameTable[o.parentId];if(l&&l.isLane&&"SwimLane"===this.nameTable[l.parentId].shape.type)Cu(this,a=this.nameTable[l.parentId],l,o)}this.removeElements(o),this.updateBridging(),"SVG"!==this.mode&&this.refreshDiagramLayer(),this.diagramActions&Is.Clear||(this.removeFromAQuad(o),e={element:t,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),state:"Changed",type:"Removal",cancel:!1},"helper"!==t.id&&this.triggerEvent(Ds.collectionChange,e),this.resetTool())}}this.selectedItems.annotation&&this.clearSelection()}else if(i.length>0){this.undoRedoModule&&(this.historyManager.startGroupAction(),this.blazorActions|=ns.GroupingInProgress,n=!0);for(var h=0;h<i.length;h++){var c=i[parseInt(h.toString(),10)],d=this.nameTable[c.parentId];if(this.nameTable[i[parseInt(h.toString(),10)].id])if(d&&d.shape instanceof zy&&!c.isPhase){if(c.isLane){var p=d.shape.header.id?d.shape.header.height:0;(this.selectedItems.wrapper.bounds.x<=d.wrapper.bounds.x&&this.selectedItems.wrapper.bounds.width>=d.wrapper.bounds.width&&"Horizontal"===d.shape.orientation||this.selectedItems.wrapper.bounds.y<=d.wrapper.bounds.y+p&&this.selectedItems.wrapper.bounds.height>=d.wrapper.bounds.height-p&&"Vertical"===d.shape.orientation)&&(up(d)||d.shape.lanes.length>1)&&this.remove(i[parseInt(h.toString(),10)])}}else this.remove(i[parseInt(h.toString(),10)])}n&&(this.blazorActions&=~ns.GroupingInProgress,this.isServerUpdate=!0,this.commandHandler.getBlazorOldValues(),this.UpdateBlazorDiagramModelCollection(void 0,void 0,void 0,!0),this.historyManager.endGroupAction(),this.isServerUpdate=!1),this.clearSelection()}if(!(t&&(up(t)||this.diagramActions&Is.Clear)||this.diagramActions&Is.UndoRedo||this.diagramActions&Is.PreventHistory||!(t instanceof Ny||t instanceof Rg))){s={type:"ConnectionChanged",undoObject:Fn(t),redoObject:Fn(t),category:"Internal"};t.isLane||t.isPhase||t.isHeader&&this.nameTable[t.parentId]&&"Container"===this.nameTable[t.parentId].shape.type||this.diagramActions&Is.Clear||this.isStackChild(t)||this.addHistoryEntry(s)}if(this.tooltipObject.close(),t&&"helper"!==t.id&&this.lineRoutingModule&&this.constraints&ms.LineRouting&&t instanceof Ny&&"ComplexHierarchicalTree"!==this.layout.type){var u=Un(t.wrapper);u.Inflate(40);var g=this.spatialSearch.findObjects(u);this.avoidLineOverlappingModule&&this.avoidLineOverlappingModule.removeConnectors(g),this.lineRoutingModule.renderVirtualRegion(this,!0);for(var m=0,f=g;m<f.length;m++){var y=f[m];y instanceof Rg&&"Orthogonal"===y.type&&this.lineRoutingModule.refreshConnectorSegments(this,y,!0)}}},e.prototype.isStackChild=function(t){var e,i=this.nameTable[t.parentId];if(t&&t.parentId&&i.container&&"Stack"===i.container.type&&"UmlClassifier"!==this.nameTable[t.parentId].shape.type){e=!0;var n={type:"StackChildPositionChanged",redoObject:{sourceIndex:void 0,source:t,target:void 0,targetIndex:void 0},undoObject:{sourceIndex:i.wrapper.children.indexOf(t.wrapper),source:t,target:void 0,targetIndex:void 0},category:"Internal"};this.diagramActions&Is.UndoRedo||this.addHistoryEntry(n)}return e},e.prototype.deleteChild=function(t,e,i){var n;if(e=e?this.nameTable[e.id]:this.nameTable[t.parentId],n="string"==typeof t?t:t.id,e&&e.children){for(var s=0;s<e.children.length;s++)if(e.children[parseInt(s.toString(),10)]===n){e.children.splice(s,1);for(var r=0;r<e.wrapper.children.length;r++)e.wrapper.children[parseInt(r.toString(),10)].id===n&&e.wrapper.children.splice(r,1);if(!i){var o=this.getObject(e.parentId);if(o&&o.shape instanceof zy)for(var a=0;a<o.shape.lanes.length;a++){var l=t.parentId.split(o.id);if(o.shape.lanes[parseInt(a.toString(),10)].id===l[1].slice(0,-1))for(var h=0;h<o.shape.lanes[parseInt(a.toString(),10)].children.length;h++)if(t.id===o.shape.lanes[parseInt(a.toString(),10)].children[parseInt(h.toString(),10)].id){o.shape.lanes[parseInt(a.toString(),10)].children.splice(h,1);break}}}}e.wrapper.measure(new un),e.wrapper.arrange(e.wrapper.desiredSize)}},e.prototype.addChild=function(t,e,i){var n,s=this.nameTable[t.id];if(s.children||(s.children=[]),s.children&&("string"==typeof e?this.nameTable[""+e]&&(n=e):(n=e.id=e.id||Hn(),this.add(e)),n&&(!e.umlIndex||-1===e.umlIndex))){var r=this.nameTable[""+n];if(r.parentId=s.id,s.container&&"Stack"===s.container.type&&this.updateStackProperty(s,r),i)s.children.splice(i,0,n),s.wrapper.children.splice(i,0,r.wrapper);else{s.children.push(n),s.wrapper.children.push(r.wrapper);var o=this.getObject(t.parentId),a=!1;if(o&&o.shape instanceof zy)for(var l=0;l<o.shape.lanes.length;l++){var h=Tu(s,this);if(o.shape.lanes[parseInt(l.toString(),10)].id===h.id){for(var c=0;c<o.shape.lanes[parseInt(l.toString(),10)].children.length;c++)if(o.shape.lanes[parseInt(l.toString(),10)].children[parseInt(c.toString(),10)].id===r.id){a=!0;break}a||o.shape.lanes[parseInt(l.toString(),10)].children.push(r);break}}}s.wrapper.measure(new un),s.wrapper.arrange(s.wrapper.desiredSize),s.isLane||(this.nameTable[t.id].width=s.wrapper.actualSize.width,this.nameTable[t.id].height=s.wrapper.actualSize.height,this.nameTable[t.id].offsetX=s.wrapper.offsetX,this.nameTable[t.id].offsetY=s.wrapper.offsetY),void 0!==s.container&&(r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY),(!s.parentId||this.nameTable[s.parentId]&&"SwimLane"!==this.nameTable[s.parentId].shape.type)&&this.updateDiagramObject(s)}return n},e.prototype.removeChild=function(t,e){var i,n=this.nameTable[t.id];if(n.children||(n.children=[]),n.children&&("string"==typeof e?this.nameTable[""+e]&&(i=e):i=e.id=e.id||Hn(),i&&(!e.umlIndex||-1===e.umlIndex))){var s=this.nameTable[""+i];s.parentId="",n.container&&"Stack"===n.container.type&&this.updateStackProperty(n,s);for(var r=0;r<n.children.length;r++)if(n.children[parseInt(r.toString(),10)]===i){n.children.splice(r,1);for(var o=0;o<n.wrapper.children.length;o++)n.wrapper.children[parseInt(o.toString(),10)]===s.wrapper&&n.wrapper.children.splice(o,1)}n.wrapper.measure(new un),n.wrapper.arrange(n.wrapper.desiredSize),n.isLane||(this.nameTable[t.id].width=n.wrapper.actualSize.width,this.nameTable[t.id].height=n.wrapper.actualSize.height,this.nameTable[t.id].offsetX=n.wrapper.offsetX,this.nameTable[t.id].offsetY=n.wrapper.offsetY),(!n.parentId||this.nameTable[n.parentId]&&"SwimLane"!==this.nameTable[n.parentId].shape.type)&&this.updateDiagramObject(n)}return i},e.prototype.clear=function(){this.clearObjects(),this.clearLayers()},e.prototype.clearLayers=function(){for(var t=this.layers.length-1;t>=0;t--)this.removeLayer(this.layers[parseInt(t.toString(),10)].id);this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}},null,!0),this.setActiveLayer(this.layers[this.layers.length-1].id)},e.prototype.clearObjects=function(t){var e=[];e=t||(e=e.concat(this.nodes)).concat(this.connectors),this.diagramActions=this.diagramActions|Is.Clear;for(var i=0,n=e;i<n.length;i++){var s=n[i];this.nameTable[s.id]&&this.remove(s)}this.diagramActions=this.diagramActions&~Is.Clear,this.spatialSearch=new sb(this.nameTable),this.initHistory()},e.prototype.startEditCommad=function(){var t,e=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:void 0;if(e&&e instanceof Ny)if(e.isLane&&e.parentId)for(var i=this.nameTable[e.parentId],n=i.shape.lanes,s=e.id.slice(i.id.length),r=s.substring(0,s.length-1),o=0;o<n.length;o++)e.isLane&&r===n[parseInt(o.toString(),10)].id&&(t=this.nameTable[n[parseInt(o.toString(),10)].header.id]);else if("SwimLane"===e.shape.type&&e.shape.header&&e.shape.hasHeader){var a=e.wrapper.children[0].rows[0].cells[0].children[0].id;t=this.nameTable[""+a]}this.startTextEdit(t)},e.prototype.startTextEdit=function(t,e){if(!Tp(this)&&!Ep(this)||Dp(this)){this.textEditing=!0;var i=this.scroller.transform,n=kp(this)?i.scale:1,s=void 0,r=void 0,o=void 0,a=void 0,l=void 0;if(t||(t=this.selectedItems.nodes[0]?this.selectedItems.nodes[0]:this.selectedItems.connectors[0]),t){!t.shape||"UmlClassifier"!==t.shape.type||t instanceof Rg||(t=this.nameTable[t.children[0]]);var h=!1;if(l)h=!0;else{if("Text"!==t.shape.type&&0===t.annotations.length&&(t.constraints&ps.ReadOnly||(this.activeLabel.isGroup=!0,this.startGroupAction(),this.addLabels(t,[{id:Hn(),content:""}]))),!e&&("Text"!==t.shape.type&&t.annotations.length>0||"Text"===t.shape.type))if("Text"===t.shape.type)e=t.wrapper.children[0].id.split("_")[1];else for(var c=t.annotations.length-1;c>=0;c--)t.annotations[parseInt(c.toString(),10)].visibility&&(e=t.annotations[parseInt(c.toString(),10)].id);e&&(l=this.getWrapper(t.wrapper,e))}if(t&&l&&!(l instanceof sp)&&(!function(t,e){var i;return i=e instanceof Rg?cs.ReadOnly:ps.ReadOnly,"Text"===e.shape.type?e.constraints&ps.ReadOnly:e.constraints&i?t.constraints&ds.InheritReadOnly?1:0:t.constraints&ds.ReadOnly?1:0}(l,t)||h)){var d=l.style,p=void 0;p=90>(p=l.bounds.width<t.wrapper.bounds.width?l.bounds.width:t.wrapper.bounds.width)?90:p;var u=document.getElementById(this.element.id+"_editTextBoxDiv"),g=document.getElementById(this.element.id+"_editBox");if(s=g?g.value:l.content,this.activeLabel.text=s,u||g||(u=iv("div",{}),g=iv("textarea",{}),this.diagramCanvas.appendChild(u),u.appendChild(g),g.appendChild(document.createTextNode(s))),(r=Uy(l.style,s,void 0,void 0,p)).isEmpty()&&(r="Text"!==t.shape.type?new un(Km(t,l.id.split(t.id+"_")[1]).width||50,l.style.fontSize):new un(t.width>50?50:t.width,l.style.fontSize)),t.parentId&&"UmlClassifier"===this.nameTable[t.parentId].shape.type?(r.width=t.wrapper.bounds.width-20,o=(t.wrapper.bounds.center.x+i.tx)*i.scale-r.width/2*n-2.5,a=(t.wrapper.bounds.center.y+i.ty)*i.scale-r.height/2*n-3,l.style.textAlign="Left"):(r.width=Math.max(r.width,50),o=(l.bounds.center.x+i.tx)*i.scale-r.width/2*n-2.5,a=(l.bounds.center.y+i.ty)*i.scale-r.height/2*n-3),l.flippedPoint&&Af(l)){var m=l.flippedPoint.x-l.corners.topLeft.x,f=l.flippedPoint.y-l.corners.topLeft.y;o+=m,a+=f,l.flipTransformOffset={x:m,y:f}}dv(u,{id:this.element.id+"_editTextBoxDiv",style:"position: absolute;left:"+o+"px;top:"+a+"px;width:"+(r.width+1)*n+"px;height:"+r.height*n+"px; containerName:"+t.id+";"}),dv(g,{"aria-label":s,id:this.element.id+"_editBox",style:"width:"+(r.width+1)*n+"px;height:"+r.height*n+"px;resize: none;outline: none;overflow: hidden;;font-family:"+d.fontFamily+";font-size:"+d.fontSize*n+"px;text-align:"+l.style.textAlign.toLocaleLowerCase()+";",class:"e-diagram-text-edit"}),g.style.fontWeight=d.bold?"bold":"",g.style.fontStyle=d.italic?"italic":"",g.style.lineHeight=(1.2*d.fontSize+"px;").toString(),g.style.textDecoration=d.textDecoration?d.textDecoration:"",this.activeLabel.parentId=t.id,this.activeLabel.id=e,l.visible=!1,this.updateDiagramObject(t),this.diagramActions=this.diagramActions|Is.TextEdit,this.isTriggerEvent||(K.add(g,"input",this.eventHandler.inputChange,this.eventHandler),K.add(g,"focusout",this.focusOutEdit,this),g.select())}}}},e.prototype.updateConnectorfixedUserHandles=function(t){if(t.fixedUserHandles.length)for(var e=void 0,i=0,n=t.fixedUserHandles;i<n.length;i++){var s=n[i];e=this.getWrapper(t.wrapper,s.id),t.updateAnnotation(s,t.intermediatePoints,t.wrapper.bounds,e)}t.wrapper.measure(new un(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.updateNodeExpand=function(t,e){for(var i=0;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[parseInt(i.toString(),10)]],s=this.nameTable[n.targetID];n.visible=e,s&&(e||(this.updateElementVisibility(n.wrapper,n,!1),s.isExpanded=e),this.updateNodeExpand(s,s.isExpanded),s.visible=e,e||this.updateElementVisibility(s.wrapper,s,!1))}},e.prototype.updateConnectorAnnotation=function(t){if(t.annotations.length)for(var e=void 0,i=0,n=t.annotations;i<n.length;i++){var s=n[i];e=this.getWrapper(t.wrapper,s.id),t.updateAnnotation(s,t.intermediatePoints,t.wrapper.bounds,e,this.diagramActions&Is.Interactions)}t.wrapper.measure(new un(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.removeChildrenFromLayout=function(t){for(var e,i=[],n=0;n<t.length;n++)(e=t[parseInt(n.toString(),10)]).parentId||e.processId||i.push(e);return i},e.prototype.doLayout=function(){var t,e=!1,i="ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type,n=this.isProtectedOnChange;this.protectPropertyChange(!0);var s=this.removeChildrenFromLayout(this.nodes),r=this.layout.enableRouting&&"ComplexHierarchicalTree"===this.layout.type,o={x:this.scroller.viewPortWidth,y:this.scroller.viewPortHeight};if("None"!==this.layout.type){if(this.organizationalChartModule||this.mindMapChartModule||this.radialTreeModule||this.symmetricalLayoutModule||this.complexHierarchicalTreeModule||this.flowchartLayoutModule){var a={state:"Started",type:this.layout.type};this.triggerEvent(Ds.layoutUpdated,a)}if(this.organizationalChartModule)t=this.organizationalChartModule.updateLayout(s,this.nameTable,this.layout,o,this.dataSourceSettings.id,this.diagramActions),e=!0,this.canDistribute(r,i)&&this.lineDistributionModule.initLineDistribution(this.layout,this),this.layoutAnimateModule&&t.rootNode&&!this.diagramActions?this.updateNodeExpand(t.rootNode,t.rootNode.isExpanded):this.layoutAnimateModule||!t.rootNode||t.rootNode.isExpanded||this.canExpand||this.updateNodeExpand(t.rootNode,t.rootNode.isExpanded);else if(this.mindMapChartModule)s&&s.length>0&&this.mindMapChartModule.updateLayout(s,this.nameTable,this.layout,o,this.dataSourceSettings.id,this.dataSourceSettings.root),e=!0;else if(this.radialTreeModule)this.radialTreeModule.updateLayout(s,this.nameTable,this.layout,o),e=!0;else if(this.symmetricalLayoutModule)this.symmetricalLayoutModule.maxIteration=this.layout.maxIteration,this.symmetricalLayoutModule.springLength=this.layout.springLength,this.symmetricalLayoutModule.springFactor=this.layout.springFactor,this.symmetricalLayoutModule.updateLayout(s,this.connectors,this.symmetricalLayoutModule,this.nameTable,this.layout,o),e=!0;else if(this.complexHierarchicalTreeModule){if(this.canDistribute(r,i)){this.lineDistributionModule.diagram=this;this.connectors.forEach(function(t){t.obstaclePointCollection=[]})}var l=this.complexHierarchicalTreeModule.getLayoutNodesCollection(this.nodes);l.length>0&&this.complexHierarchicalTreeModule.doLayout(l,this.nameTable,this.layout,o,this),e=!0,this.canDistribute(r,i)&&this.lineDistributionModule.initLineDistribution(this.layout,this)}else if(this.flowchartLayoutModule)this.flowchartLayoutModule.updateLayout(this.nodes,this),e=!0;else{var h="OrganizationalChart"===this.layout.type?"HierarchicalTree":this.layout.type;console.warn("[WARNING] :: Module "+h+" is not available in Diagram component! You either misspelled the module name or forgot to load it.")}if(e){this.preventDiagramUpdate=!0;for(var c={},d=0,p=s;d<p.length;d++){var u=p[d];if(this.preventNodesUpdate||this.diagramActions&&this.diagramActions&Is.PreventIconsUpdate||(this.updateIcon(u),this.updateDefaultLayoutIcons(u)),this.preventNodesUpdate=!0,this.nodePropertyChange(u,{},{offsetX:u.offsetX,offsetY:u.offsetY},!0),this.preventNodesUpdate=!1,u.wrapper.measure(new un(u.wrapper.width,u.wrapper.height)),u.wrapper.arrange(u.wrapper.desiredSize),this.updateDiagramObject(u,!0),u.inEdges.length>0)for(var g=0;g<u.inEdges.length;g++){c[(C=this.nameTable[u.inEdges[parseInt(g.toString(),10)]]).id]=C}if(u.outEdges.length>0)for(var m=0;m<u.outEdges.length;m++){var f=this.nameTable[u.outEdges[parseInt(m.toString(),10)]];c[f.id]=f}}for(var y=0,v=Object.keys(c);y<v.length;y++){var b=v[y];r&&this.lineDistributionModule.resetConnectorSegments(this.nameTable[""+b]);var C=c[""+b],I=this.getPoints(C);r&&this.lineDistributionModule.resetRoutingSegments(C,this,I),_m(C,I),"Bpmn"===C.shape.type&&"Default"===C.shape.sequence&&"Sequence"===C.shape.flow&&this.commandHandler.updatePathElementOffset(C),C.wrapper.measure(new un(void 0,void 0)),C.wrapper.arrange(C.wrapper.desiredSize),this.updateConnectorAnnotation(C),this.updateConnectorfixedUserHandles(C),this.updateQuad(C),this.updateDiagramObject(C,!0)}(r||"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&i)&&this.lineDistributionModule.distributeLines(this.layout,this),this.refreshFlowChartConnectors(),this.preventDiagramUpdate=!1,this.updatePage(),this.diagramActions&Is.Render&&"Canvas"!==this.mode||(this.refreshDiagramLayer(),this.isRefreshed=!0)}n||this.protectPropertyChange(n)}if(e&&this.updateDiagramElementQuad(),this.diagramActions&Is.Render&&this.layout.enableRouting&&this.refreshRoutingConnectors(),e){a={state:"Completed",type:this.layout.type};this.triggerEvent(Ds.layoutUpdated,a)}return!(this.blazorActions&ns.expandNode)||t},e.prototype.refreshRoutingConnectors=function(){if(this.isProtectedOnChange=!0,this.routingConnectors)for(var t=0;t<this.routingConnectors.length;t++){var e=this.routingConnectors[parseInt(t.toString(),10)],i=this.nameTable[e.sourceID],n=this.nameTable[e.targetID],s=new db;if(i.visible&&n.visible)s.renderVirtualRegion(this,!0),s.refreshConnectorSegments(this,e,!1,!0),_m(e,this.getPoints(e)),e.wrapper.measure(new un(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateDiagramObject(e,!0),this.routingConnectors.splice(t,1),t--}this.isProtectedOnChange=!1},e.prototype.refreshFlowChartConnectors=function(){if(this.flowchartLayoutModule){this.flowchartLayoutModule.reRouteFlowChartConnectors(this.layout.flowChartData,this);for(var t=0;t<this.connectors.length;t++){var e=this.connectors[parseInt(t.toString(),10)];_m(e,this.getPoints(e)),e.wrapper.measure(new un(void 0,void 0)),e.wrapper.arrange(e.wrapper.desiredSize),this.updateConnectorAnnotation(e),this.updateConnectorfixedUserHandles(e),this.updateQuad(e),this.updateDiagramObject(e,!0)}}},e.prototype.canDistribute=function(t,e){return!!(t&&this.lineDistributionModule||"DifferentPoint"===this.layout.connectionPointOrigin&&this.lineDistributionModule&&e||"Linear"===this.layout.arrangement&&this.lineDistributionModule)||((t||"DifferentPoint"===this.layout.connectionPointOrigin&&e||"Linear"===this.layout.arrangement)&&console.warn('[WARNING] :: Module "LineDistribution" is not available in Diagram component! You either misspelled the module name or forgot to load it.'),!1)},e.prototype.saveDiagram=function(){for(var t,e,i=[],n=0;n<this.nodes.length;n++)if("SwimLane"===(t=this.nodes[parseInt(n.toString(),10)]).shape.type){e=t.wrapper.children[0].childTable;for(var s=0,r=Object.keys(e);s<r.length;s++){i=Om(e[""+r[s]],i)}for(var o=0;o<i.length;o++)this.nameTable[i[parseInt(o.toString(),10)]]&&(this.swimlaneChildTable[i[parseInt(o.toString(),10)]]=this.nameTable[i[parseInt(o.toString(),10)]].zIndex);this.swimlaneZIndexTable[t.id]=t.zIndex}return km(this)},e.prototype.loadDiagram=function(t,e){if(e&&this.ej1SerializationModule){var i=JSON.parse(t);t=this.ej1SerializationModule.getSerializedData(i)}else e&&console.warn('[WARNING] :: Module "Ej1Serialization" is not available in Diagram component! You either misspelled the module name or forgot to load it.');return jm(t,this)},e.prototype.saveDiagramAsMermaid=function(){return this.layout&&"Flowchart"===this.layout.type?this.saveFlowDiagramInMermaidFormat():this.layout&&"MindMap"===this.layout.type?this.saveMindmapDiagramInMermaidFormat():this.saveSequenceDiagramAsMermaid()},e.prototype.saveMindmapDiagramInMermaidFormat=function(){var t="",e=[];if(this.layout&&"MindMap"===this.layout.type&&(e.push("mindmap"),this.nodes.length>0)){var i=this.nodes.filter(function(t){return 0===t.inEdges.length})[0],n=this.convertMindmapToMermaid(i,0);e.push(n);var s=i.outEdges;this.updateTextDataSource(e,s,1),t=(e=e.filter(function(t){return""!==t.trim()})).join("\n")}return t},e.prototype.updateTextDataSource=function(t,e,i){for(var n=0;n<e.length;){var s=this.getObject(e[parseInt(n.toString(),10)]),r=this.getObject(s.targetID),o=this.convertMindmapToMermaid(r,i);t.push(o);var a=r.outEdges;a.length>0&&this.updateTextDataSource(t,a,i+1),n++}},e.prototype.convertMindmapToMermaid=function(t,e){var i=t.id,n=" ".repeat(2*(e+1)),s=t.annotations.length>0?t.annotations[0].content.replace(/\n/g," "):"",r=n+s,o=n+i;if(t.shape&&"Basic"===t.shape.type){var a=t.shape;"Rectangle"===a.shape?r=o+"["+s+"]":"Ellipse"===a.shape?r=o+"(("+s+"))":"Hexagon"===a.shape&&(r=o+"{{"+s+"}}")}else if(t.shape&&"Flow"===t.shape.type){"Terminator"===t.shape.shape&&(r=o+"("+s+")")}else if(t.shape&&"Path"===t.shape.type){var l=t.shape;l.data===this.bangShape?r=o+"))"+s+"((":l.data===this.cloudShape&&(r=o+")"+s+"(")}return r},e.prototype.saveFlowDiagramInMermaidFormat=function(){var t=this,e=[],i="graph TD\n",n={nodes:this.nodes,edges:this.connectors},s=n.nodes.reduce(function(t,e){return t[e.id]=e.annotations.length?e.annotations[0].content:"",t},{});return n.edges.forEach(function(n){var r=n.sourceID,o=n.targetID,a=(s[""+r],s[""+o],t.nameTable[""+r]),l=t.nameTable[""+o],h=t.getNodeShape(a),c=t.getNodeShape(l),d=n.annotations[0]&&""!==n.annotations[0].content?"|"+n.annotations[0].content+"|":"";-1===e.indexOf(r)?e.push(r):h="",-1===e.indexOf(o)?e.push(o):c="";var p=t.arrowType(n);i+="    "+r+h+" "+p+d+" "+o+c+"\n"}),n.nodes.forEach(function(t){var e=t.id,n=t.style.fill,s=t.style.strokeColor,r=t.style.strokeWidth+"px";i+="    style "+e+" fill:"+n+",stroke:"+s+",stroke-width:"+r+";\n"}),i},e.prototype.arrowType=function(t){var e=t.targetDecorator.shape,i=t.style.strokeDashArray,n=t.style.strokeWidth;return t.style.opacity<1?"~~~":""!==i?"-.->":"Arrow"===e?n>1?"==>":"--\x3e":"None"===e?"---":"--\x3e"},e.prototype.getNodeShape=function(t){var e=t.annotations.length>0?t.annotations[0].content:"",i=t.shape.shape;if(!i){var n=t.shape.data;return"M 0 0 A 1 1 0 0 0 7 0 A 1 1 0 0 0 0 0 M -1 0 A 1 1 0 0 0 8 0 A 1 1 0 0 0 -1 0"===n?"((("+e+")))":"M 0 0 L 1 -1 L 5 -1 L 6 0 L 0 0"===n?"[/"+e+"\\]":"M 0 1 L 0 6 C 2 7 4 7 6 6 L 6 1 C 5 0 1 0 0 1 C 1 2 5 2 6 1"===n?"[("+e+")]":"M 0 0 L 12 0 L 14 2 L 2 2 L 0 0"===n?"[\\"+e+"\\]":"M 0 0 L 5 0 L 4 1 L 1 1 L 0 0"===n?"[\\"+e+"/]":"M 0 0 L 2 -2 L 11 -2 L 13 0 L 11 2 L 2 2 L 0 0"===n?"{{"+e+"}}":">"+e+"]"}switch(i){case"Terminator":return"(["+e+"])";case"Process":default:return"["+e+"]";case"Decision":return"{"+e+"}";case"Parallelogram":return"[/"+e+"/]";case"Ellipse":return"(("+e+"))";case"PreDefinedProcess":return"[["+e+"]]"}},e.prototype.loadDiagramFromMermaid=function(t){this.layout&&"Flowchart"===this.layout.type&&this.flowchartLayoutModule?this.convertMermaidToFlowChart(t):this.layout&&"MindMap"===this.layout.type&&this.mindMapChartModule?this.convertMermaidToMindmap(t):this.isSequenceDiagram(t)?this.loadSequenceDiagramFromMermaid(t):console.warn('[WARNING] :: Module "FlowchartLayout" or "MindMap" is not available in Diagram component! You either misspelled the module name or forgot to load it.')},e.prototype.countLeadingSpaces=function(t){for(var e=0,i=t.length;e<i&&" "===t.charAt(e);)e++;return e},e.prototype.convertMermaidToMindmap=function(t){if(t&&this.layout&&"MindMap"===this.layout.type&&this.mindMapChartModule){var e=t.split(/\r?\n/).filter(function(t){return t.trim().length>0});this.clear(),this.mermaidNodeBaseCollection=[];var i=[],n={text:"",children:[],currentLevel:0,branch:"Left"},s=[],r=!1,o=!1,a=!1;if(e.length>0){for(var l=function(t){var l=e[parseInt(t.toString(),10)],c=0,d="",p=h.countLeadingSpaces(l),u=l.includes('"`');if(o=l.includes('`"'),a=(r=!!u||r)||a?a:0===p&&t>0,r&&o&&!u)return n.text+="\n"+l,r=!1,"continue";if(!u&&r)return n.text+="\n"+l,"continue";if(r=!o&&r,l.length>0&&(/\s/.test(l[0])&&t>0||0===p)){if(-1!==s.findIndex(function(t){return t.space===p.toString()}))for(var g=s.length-1;g>=0;g--){var m=s[parseInt(g.toString(),10)];if((f=parseFloat(m.space))>p)s.splice(g,1);else{if(f<p){s.push({space:p.toString(),level:m.level+1}),c=m.level+1;break}if(f===p){c=m.level;break}}}else if(0===s.length)s.push({space:p.toString(),level:1}),c=1;else{for(g=s.length-1;g>=0;g--){var f,y=s[parseInt(g.toString(),10)];if(!((f=parseFloat(y.space))>p)){var v=s[s.length-1];s.push({space:p.toString(),level:v.level+1});break}s.splice(g,1)}c=s[s.length-1].level}d=l.trim().replace(/^[+-]/,"")}var b={text:d,branch:void 0,children:[],currentLevel:0===t?0:c-1};if(i.length>0){for(;i.length>=c&&0!==i.length;)i.pop();i.length>0&&i[i.length-1].children.push(b)}else 0;i.push(b),n=b},h=this,c=0;c<e.length;c++)l(c);var d=i[0];if("mindmap"===d.text||a){if(a){var p=this.getNodeDetails(d),u={id:p.nodeId,shape:p.nodeShapeData,annotations:[{content:p.annotationContent}]};this.mermaidNodeBaseCollection.push(u),this.createDataSource(d.children,d,u.id)}else{var g=d.children[0],m=this.getNodeDetails(g),f={id:m.nodeId,shape:m.nodeShapeData,annotations:[{content:m.annotationContent}]};this.mermaidNodeBaseCollection.push(f),this.createDataSource(g.children,g,f.id)}this.addElements(this.mermaidNodeBaseCollection),this.doLayout()}}}},e.prototype.saveSequenceDiagramAsMermaid=function(){var t=this.model;return t.isLoadedFromMermaid?t.mermaidData:t.generateMermaidFromModel()},e.prototype.isSequenceDiagram=function(t){var e=t.split(/\r?\n/).filter(function(t){return t.trim().length>0});return e.length>0&&"sequenceDiagram"===e[0].trim()},e.prototype.loadSequenceDiagramFromMermaid=function(t){this.model={},this.model.parse(t,this),this.initLayerObjects();var e=this.isProtectedOnChange;this.protectPropertyChange(!0),this.model.loadDiagramFromMermaid(t,this),this.refreshDiagramLayer(),e||this.protectPropertyChange(e),this.fitToPage({mode:"Page",region:"Content",margin:{left:10,top:10,right:10,bottom:10},canZoomIn:!0,canZoomOut:!0})},e.prototype.createDataSource=function(t,e,i){for(var n=0;n<t.length;){var s=t[parseInt(n.toString(),10)],r=this.getNodeDetails(s),o={id:r.nodeId,shape:r.nodeShapeData,annotations:[{content:r.annotationContent}]},a={sourceID:i,targetID:o.id};this.mermaidNodeBaseCollection.push(o),this.mermaidNodeBaseCollection.push(a),this.createDataSource(s.children,s,o.id),n++}},e.prototype.getNodeDetails=function(t){var e=t.text.match(/^(.*?)\s*([\\[\\(\\{][\s\S]*?[\]\\)\\}]|[)\\(][\s\S]*|[)\\{][\s\S]*|[)\\(][^{}()\\[\]]*$)/),i=Hn(),n=t.text,s={type:"Basic",shape:"Rectangle"};if(e){i=e[1]?e[1]:i;var r=e[2].trim().replace(/["`]/g,""),o=r.charAt(0);"["===o?n=r.slice(1,-1):"("===o?(n=r.startsWith("((")?r.slice(2,-1):r.slice(1,-1),s=r.startsWith("((")?{type:"Basic",shape:"Ellipse"}:{type:"Flow",shape:"Terminator"}):")"===o?(n=r.startsWith("))")?r.slice(2,-2):r.slice(1,-1),s=r.startsWith("))")?{type:"Path",data:this.bangShape}:{type:"Path",data:this.cloudShape}):"{"===o&&(n=r.slice(2,-1),s={type:"Basic",shape:"Hexagon"})}return{nodeId:i,annotationContent:n,nodeShapeData:s}},e.prototype.convertMermaidToFlowChart=function(t){var e=[];this.clear();for(var i=(t=t.replace(/;(?!\s*[\n\r])/g,";\n")).trim().split("\n"),n=function(t){var n=i[parseInt(t.toString(),10)];(n=n.trim()).endsWith(";")&&!n.startsWith("style")&&(n=n.slice(0,-1).trim());if(""!==n&&!["%","subgraph","graph","flowchart","end","End"].some(function(t){return n.startsWith(t)}))if(n.startsWith("style"))s.parseStyle(n,e);else{var r=s.getLineSplitting(n),o=[r[0],r[1]],a=s.getNodeData(o,e,r[2]);if(a&&a.length>0){var l=a[a.length-1];l.arrowType=r[2],""!==r[3]&&(l.label&&l.label.some(function(t){return t.trim().length>0})?l.label.push(r[3]):(l.label=[],l.label[l.parentId.length-1]=r[3])),a.filter(function(t){return t.parentId&&0===t.parentId.length}).forEach(function(t){t.parentId=null}),e=e.concat(a)}}},s=this,r=1;r<i.length;r++)n(r);this.createFlowChart(e),this.doLayout(),this.clearHistory()},e.prototype.createFlowChart=function(t){for(var e=[],i=0;i<t.length;i++){var n={id:(r=t[parseInt(i.toString(),10)]).id,shape:r.shape,annotations:[{content:r.name}],style:{fill:r.color,strokeColor:r.stroke,strokeWidth:r.strokeWidth}};e.push(n)}for(var s=0;s<t.length;s++){var r,o=Ef(r=t[parseInt(s.toString(),10)]);if(r.parentId&&r.parentId.length>1)for(var a=0;a<r.parentId.length;a++){var l={id:Hn(),sourceID:r.parentId[parseInt(a.toString(),10)],targetID:r.id,annotations:[{content:r.label?r.label[parseInt(a.toString(),10)]:""}],style:{strokeWidth:o.strokeWidth?o.strokeWidth:1,strokeDashArray:o.strokeDashArray?o.strokeDashArray:"",opacity:void 0!==o.opacity?o.opacity:1},targetDecorator:{shape:o.targetDecorator}};e.push(l)}else if(r.parentId&&1===r.parentId.length){l={id:Hn(),sourceID:r.parentId[0],targetID:r.id,annotations:[{content:r.label?r.label[0]:""}],style:{strokeWidth:o.strokeWidth?o.strokeWidth:1,strokeDashArray:o.strokeDashArray?o.strokeDashArray:"",opacity:void 0!==o.opacity?o.opacity:1},targetDecorator:{shape:o.targetDecorator}};e.push(l)}}this.addElements(e)},e.prototype.getLineSplitting=function(t){var e,i,n,s="",r=t.match(/^(.*?)\s*(-->|---|--\s*.*?\s*-->|~~~|==>|===|==\s*.*?\s*==>|\s*-\.\s*->|\s*-\.\s*-|\s*-\.\s*.*?\s*\.\s*->|\s*-\..*?\.\s*->)(.*)$/);if(r){e=r[1].trim();var o=r[2].trim();i=r[3].trim();var a=o.match(/(-\.|\\-\\-|==|--|~~)(.*?)(\1>|\.->|==>|\\->|~~>)/),l=void 0,h="";if(a)l={text:a[2].trim()||null,arrowType:a[1]+a[3]};else l={text:null,arrowType:o};s=null!==l.text?l.text:"",n=(h=l.arrowType).includes("--\x3e")?"single-line-arrow":h.includes("---")?"single-line":h.includes("==>")?"double-line-arrow":h.includes("==")?"double-line":h.includes("~~~")?"wiggly-arrow":h.includes("-.->")||h.includes(".->")?"dotted-arrow":h.includes("-.-")||h.includes(".-")?"dotted":"single-line-arrow"}else e=t.trim(),i=null;return[e,i,n,s]},e.prototype.parseStyle=function(t,e){if(t.startsWith("style")){var i=t.match(/^style\s+(\w+)\s+fill:([^,]+),stroke:([^,]+),stroke-width:(\d+)px;/);if(i){var n={id:i[1],fill:i[2],stroke:i[3],strokeWidth:parseInt(i[4],10)},s=e.filter(function(t){return t.id===n.id});s[0].color=n.fill,s[0].stroke=n.stroke,s[0].strokeWidth=n.strokeWidth}}},e.prototype.getNodeData=function(t,e,i){for(var n=[],s=null,r=null,o=0,a="",l=function(i){var l=t[parseInt(i.toString(),10)];if(l){var c=h.splitNested(l);if(c&&c[0].includes("|")){var d=c[0].match(/\|([^|]*)\|/);d&&(a=d[1]);var p=c[0].split("|");p.length>=3&&(c[0]=p[2].trim())}var u=c[0].trim().replace(/;$/,"");0===i?s=u:r=u;var g=e.find(function(t){return t.id===u});if(g)o++;else{var m=c.length>1?c[1]:c[0],f=h.getShape(m),y=m.replace(/[\\[\]\\(\\)\\{\\}\\{\\}\\/>]/g,""),v={id:u,name:y,shape:f,color:"white",parentId:[]};n.push(v)}}},h=this,c=0;c<t.length;c++)l(c);if(n.length){var d=n[n.length-1];if(d.id!==s)d.parentId.push(s),d.label?d.label.push(a):d.label=[a];else{var p=e.find(function(t){return t.id===r});p&&(p.parentId?p.parentId.push(s):p.parentId=[s],p.label?p.label.push(a):p.label=[a])}}else if(2===o){var u;(u=e.filter(function(t){return t.id===r})[0]).parentId=u.parentId||[],u.parentId.push(s),u.label=u.label||[],u.label[u.parentId.length-1]=a}i&&((u=e.filter(function(t){return t.id===r})[0])&&(u.arrowType=i));return n},e.prototype.splitNested=function(t){for(var e=[],i="",n=0,s="",r=0,o=t;r<o.length;r++){var a=o[r];"["===a||"{"===a||"("===a||">"===a?0===n?(i.trim().length>0&&e.push(i.trim()),i=a,s=a,n++):(i+=a,n++):"]"===a||"}"===a||")"===a?1===n&&a===s?(i+=a,e.push(i.trim()),i="",n--):n>1?(i+=a,n--):i+=a:i+=a}return i.trim().length>0&&e.push(i.trim()),e},e.prototype.getShape=function(t){var e={};return t.startsWith("(((")?e={type:"Path",data:"M 0 0 A 1 1 0 0 0 7 0 A 1 1 0 0 0 0 0 M -1 0 A 1 1 0 0 0 8 0 A 1 1 0 0 0 -1 0"}:t.startsWith("((")?e={shape:"Ellipse",type:"Basic"}:t.startsWith("([")?e={type:"Flow",shape:"Terminator"}:t.startsWith("(")?e={type:"Flow",shape:"Process"}:t.startsWith("[[")?e={type:"Flow",shape:"PreDefinedProcess"}:t.startsWith("[/")?e=t.endsWith("/]")?{type:"Basic",shape:"Parallelogram"}:{type:"Path",data:"M 0 0 L 1 -1 L 5 -1 L 6 0 L 0 0"}:t.startsWith("[(")?e={type:"Path",data:"M 0 1 L 0 6 C 2 7 4 7 6 6 L 6 1 C 5 0 1 0 0 1 C 1 2 5 2 6 1"}:t.startsWith("[\\")?e=t.endsWith("\\]")?{type:"Path",data:"M 0 0 L 12 0 L 14 2 L 2 2 L 0 0"}:{type:"Path",data:"M 0 0 L 5 0 L 4 1 L 1 1 L 0 0"}:t.startsWith("[")?e={type:"Basic",shape:"Rectangle"}:t.startsWith("{{")?e={type:"Path",data:"M 0 0 L 2 -2 L 11 -2 L 13 0 L 11 2 L 2 2 L 0 0"}:t.startsWith("{")?e={type:"Flow",shape:"Decision"}:t.startsWith(">")&&(e={type:"Path",data:"M 0 0 L 8 0 L 8 2 L 0 2 L 2 1 L 0 0"}),e},e.prototype.getDiagramContent=function(t){return this.printandExportModule?this.printandExportModule.getDiagramContent(t):(console.warn('[WARNING] :: Module "PrintAndExport" is not available in Diagram component! You either misspelled the module name or forgot to load it.'),"")},e.prototype.exportImage=function(t,e){this.printandExportModule?this.printandExportModule.exportImages(t,e):console.warn('[WARNING] :: Module "PrintAndExport" is not available in Diagram component! You either misspelled the module name or forgot to load it.')},e.prototype.printImage=function(t,e){this.printandExportModule?(e.printOptions=!0,this.printandExportModule.exportImages(t,e)):console.warn('[WARNING] :: Module "PrintAndExport" is not available in Diagram component! You either misspelled the module name or forgot to load it.')},e.prototype.setStackLimit=function(t){this.undoRedoModule&&t&&(this.historyManager.stackLimit=t,this.undoRedoModule.applyLimit(this.historyManager.currentEntry,t,this,!0))},e.prototype.clearHistory=function(){this.undoRedoModule&&this.undoRedoModule.clearHistory(this)},e.prototype.getDiagramBounds=function(){if(this.printandExportModule){var t=this.printandExportModule.getDiagramBounds("",{});return t.width=t.width>this.scrollSettings.viewPortWidth?t.width+(t.x>0?t.x:0):this.scrollSettings.viewPortWidth,t.height=t.height>this.scrollSettings.viewPortHeight?t.height+(t.y>0?t.y:0):this.scrollSettings.viewPortHeight,t.x=t.x>0?0:t.x,t.y=t.y>0?0:t.y,t}return console.warn('[WARNING] :: Module "PrintAndExport" is not available in Diagram component! You either misspelled the module name or forgot to load it.'),new Tn},e.prototype.exportDiagram=function(t){return this.printandExportModule?this.printandExportModule.exportDiagram(t):(console.warn('[WARNING] :: Module "PrintAndExport" is not available in Diagram component! You either misspelled the module name or forgot to load it.'),"")},e.prototype.print=function(t){this.printandExportModule?this.printandExportModule.print(t):console.warn('[WARNING] :: Module "PrintAndExport" is not available in Diagram component! You either misspelled the module name or forgot to load it.')},e.prototype.addPorts=function(t,e){this.protectPropertyChange(!0);var i;t=this.nameTable[t.id]||t,e.length>1&&this.startGroupAction();for(var n=function(n){if(t.ports.some(function(t){return t.id===e[parseInt(n.toString(),10)].id}))return"continue";if(t instanceof Ny?(i=new Wc(t,"ports",e[parseInt(n.toString(),10)],!0),t.ports.push(i)):t instanceof Rg&&(i=new Yc(t,"ports",e[parseInt(n.toString(),10)],!0),t.ports.push(i)),t.children)for(var r=t.wrapper,o=0;o<r.children.length;o++){var a=r.children[parseInt(o.toString(),10)];if(a.id.match(r.id)){t.initPort(s.getDescription,a,i);break}}else{var l=t.wrapper;if(t instanceof Ny)l.children.push(t.initPortWrapper(t.ports[t.ports.length-1]));else if(t instanceof Rg){var h="Bezier"===t.type?t.intermediatePoints:t.getConnectorPoints(t.type);h=t.clipDecorators(t,h);var c=Tn.toBounds(h);l.children.push(t.initPort(t.ports[t.ports.length-1],h,c,void 0))}}if(!(s.diagramActions&Is.UndoRedo||s.diagramActions&Is.Group)){var d={type:"PortCollectionChanged",changeType:"Insert",undoObject:Fn(i),redoObject:Fn(t),category:"Internal"};s.addHistoryEntry(d)}},s=this,r=0;r<e.length;r++)n(r);e.length>1&&this.endGroupAction(),t.wrapper.measure(new un(t.width,t.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1)},e.prototype.addConstraints=function(t,e){return t|e},e.prototype.removeConstraints=function(t,e){return t&~e},e.prototype.addNodeLabels=function(t,e){this.addLabels(t,e)},e.prototype.addConnectorLabels=function(t,e){this.addLabels(t,e)},e.prototype.addLabels=function(t,e){this.protectPropertyChange(!0);var i,n=(t=this.nameTable[t.id]||t).wrapper;e.length>1&&this.startGroupAction();for(var s=0;s<e.length;s++){if(t instanceof Ny)if(i=new Xc(t,"annotations",e[parseInt(s.toString(),10)],!0),t.annotations.push(i),t.children)for(var r=t,o=0;o<r.wrapper.children.length;o++){if(r.wrapper.children[parseInt(o.toString(),10)].id===r.id+"group_container")r.wrapper.children[parseInt(o.toString(),10)].children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id))}else n.children.push(t.initAnnotationWrapper(t.annotations[t.annotations.length-1],this.element.id));else if(t instanceof Rg){i=new Gc(t,"annotations",e[parseInt(s.toString(),10)],!0),t.annotations.push(i);var a=n.children[0],l=new Tn(a.offsetX-a.width/2,a.offsetY-a.height/2,a.width,a.height);n.children.push(t.getAnnotationElement(t.annotations[t.annotations.length-1],t.intermediatePoints,l,this.getDescription,this.element.id))}if(!(this.diagramActions&Is.UndoRedo||this.diagramActions&Is.Group)){var h={type:"LabelCollectionChanged",changeType:"Insert",undoObject:Fn(i),redoObject:Fn(t),category:"Internal"};this.addHistoryEntry(h)}}e.length>1&&this.endGroupAction(),t.wrapper.measure(new un(n.width,n.height)),t.wrapper.arrange(n.desiredSize),this.updateDiagramObject(t),this.protectPropertyChange(!1),this.refreshCanvasLayers()},e.prototype.addChildToUmlNode=function(t,e,i){var n,s,r,o,a="NoWrap";"Class"===t.shape.classifier||"Interface"===t.shape.classifier?"Method"===i?(s=new xy(t,"",e),"Class"===t.shape.classifier?(t.shape.classShape.methods.push(s),n=t.shape.classShape):"Interface"===t.shape.classifier&&(t.shape.interfaceShape.methods.push(s),n=t.shape.interfaceShape),function(t,e,i,n){if(i.methods&&i.methods.length){var s=i.methods,r="",o="",a=void 0,l=1,h=void 0,c=0,d=0,p=t.shape,u="Class"===p.classifier,g=(p.classifier,u?p.classShape:p.interfaceShape);1===s.length?g.attributes.length>0?(c=g.attributes.filter(function(t){return t.isSeparator}).length,h=(l=2+g.attributes.length+c)+1,Hf(t,e,l)):h=l+1:(c=g.attributes.filter(function(t){return t.isSeparator}).length,d=g.methods.filter(function(t){return t.isSeparator}).length,h=(l=2+g.attributes.length+c+g.methods.length+d)+1);for(var m=0;m<s.length;m++){var f=s[s.length-1];if(a=f.scope&&"Public"===f.scope?" +":f.scope&&"Private"===f.scope?"-":f.scope&&"Protected"===f.scope?"#":"~",f.parameters)for(var y=0;y<f.parameters.length;y++)f.parameters[parseInt(y.toString(),10)].type?r+=f.parameters[parseInt(y.toString(),10)].name+":"+f.parameters[parseInt(y.toString(),10)].type:r+=f.parameters[parseInt(y.toString(),10)].name,y!==f.parameters.length-1&&(r+=",");if(""!==f.name&&a&&(o+=a+" "+f.name+"("+r+") : "+f.type),m!==s.length){var v=Rf(t,f),b=new Ny(e,"nodes",{id:Hn()+"_umlMethods",verticalAlignment:"Stretch",horizontalAlignment:"Stretch",annotations:[{id:"name",content:o,offset:{x:0,y:.5},style:{bold:!0,fontSize:v.fontSize,color:v.color,fill:v.fill,textWrapping:n,italic:v.italic,fontFamily:v.fontFamily,whiteSpace:v.whiteSpace,textAlign:v.textAlign,textDecoration:v.textDecoration,textOverflow:v.textOverflow},margin:{left:14,right:5},horizontalAlignment:"Left"}],style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},minHeight:25,constraints:(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Drag|ps.Resize)},!0);b.parentId=t.id,b.umlIndex=h,e.add(b),o=""}break}}}(t,this,n,a)):"Attribute"===i&&(r=new Sy(t,"",e),"Class"===t.shape.classifier?(t.shape.classShape.attributes.push(r),n=t.shape.classShape):"Interface"===t.shape.classifier&&(t.shape.interfaceShape.attributes.push(r),n=t.shape.interfaceShape),function(t,e,i,n){if(i.attributes&&i.attributes.length){var s=i.attributes,r="",o=void 0;1===s.length&&Hf(t,e,s.length);for(var a=0,l=0;l<s.length-1;l++)!0===s[parseInt(l.toString(),10)].isSeparator&&a++;var h=s.length+a+1;for(l=0;l<s.length;l++){var c=s[s.length-1];if(o=c.scope&&"Public"===c.scope?" +":c.scope&&"Private"===c.scope?"-":c.scope&&"Protected"===c.scope?"#":"~",""!==c.name&&o&&(r+=o+" "+c.name+" : "+c.type),l!==s.length){var d=Rf(t,c),p=new Ny(e,"nodes",{id:Hn()+"_umlProperty",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor},annotations:[{id:"name",content:r,offset:{x:0,y:.5},style:{bold:!0,fontSize:d.fontSize,color:d.color,fill:d.fill,textWrapping:n,italic:d.italic,fontFamily:d.fontFamily,whiteSpace:d.whiteSpace,textAlign:d.textAlign,textDecoration:d.textDecoration,textOverflow:d.textOverflow},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",constraints:(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Drag|ps.Resize),minHeight:25},!0);p.parentId=t.id,p.umlIndex=h,e.add(p),r=""}break}}}(t,this,n,a)):"Enumeration"===t.shape.classifier&&"Member"===i&&(o=new Ey(t,"",e),t.shape.enumerationShape.members.push(o),function(t,e,i,n){if("Enumeration"===t.shape.classifier){var s=i.members,r="";1===s.length&&Hf(t,e,s.length);for(var o=0,a=0;a<s.length-1;a++)!0===s[parseInt(a.toString(),10)].isSeparator&&o++;var l=s.length+o+1;for(a=0;a<s.length;a++){var h=s[s.length-1];if(""!==h.name&&(r+=h.name),a!==s.length){var c=Rf(t,h),d=new Ny(e,"nodes",{id:Hn()+"_umlMember",annotations:[{id:"name",content:r,offset:{x:0,y:.5},style:{bold:!0,fontSize:c.fontSize,color:c.color,fill:c.fill,textWrapping:n,italic:c.italic,fontFamily:c.fontFamily,whiteSpace:c.whiteSpace,textAlign:c.textAlign,textDecoration:c.textDecoration,textOverflow:c.textOverflow},margin:{left:14,right:5},horizontalAlignment:"Left"}],verticalAlignment:"Stretch",horizontalAlignment:"Stretch",style:{fill:t.style.fill,strokeColor:"black"===t.style.strokeColor?"#ffffff00":t.style.strokeColor,textWrapping:n},constraints:(ps.Default|ps.HideThumbs)&~(ps.Rotate|ps.Drag|ps.Resize),minHeight:25},!0);d.parentId=t.id,d.umlIndex=l,e.add(d),r=""}break}}}(t,this,n=t.shape.enumerationShape,a)),this.clearSelection(),this.updateSelector()},e.prototype.addLanes=function(t,e,i){t=this.nameTable[t.id]||t;for(var n=0;n<e.length;n++)uu(this,t,e[parseInt(n.toString(),10)],i),void 0!==i&&(i+=1);this.updateDiagramElementQuad()},e.prototype.addPhases=function(t,e){t=this.nameTable[t.id]||t;for(var i=0;i<e.length;i++)this.protectPropertyChange(!0),mu(this,t,e[parseInt(i.toString(),10)]),this.protectPropertyChange(!1);this.updateDiagramElementQuad()},e.prototype.removeLane=function(t,e){if(e){var i=this.nameTable[e.header.id];this.diagramActions=this.diagramActions|Is.PublicMethod,Su(this,i,t,void 0),this.updateDiagramElementQuad()}},e.prototype.removePhase=function(t,e){var i=e.header.id;Du(this,this.nameTable[""+i],t),this.updateDiagramElementQuad()},e.prototype.editSegment=function(t){if("Straight"===t.connector.type){for(var e=t.connector,i=t&&t.SegmentEditing?t.SegmentEditing:"Toggle",n=t.point,s=void 0,r=void 0,o=0;o<e.segments.length;o++){if(Yu(n,e.segments[parseInt(o.toString(),10)].point,e.hitPadding)){s=!0;break}}(s&&"Remove"===i||!s&&"Add"===i)&&(r=!0),"Straight"!==e.type||!r&&"Toggle"!==i||this.connectorEditingToolModule.addOrRemoveSegment(e,n,this.commandHandler)}},e.prototype.removelabelExtension=function(t,e,i,n){for(var s=0;s<n.children.length;s++){var r=n.children[parseInt(s.toString(),10)];if((r instanceof Zs||r instanceof sp)&&r.id.match("_"+e[parseInt(i.toString(),10)].id+"$")){for(var o=0;o<t.annotations.length;o++)if(r.id.match("_"+t.annotations[parseInt(o.toString(),10)].id+"$")){if(!(this.diagramActions&Is.UndoRedo)){var a={type:"LabelCollectionChanged",changeType:"Remove",undoObject:Fn(t.annotations[parseInt(o.toString(),10)]),redoObject:Fn(t),category:"Internal"};this.addHistoryEntry(a)}t.annotations.splice(o,1)}if(n.children.splice(s,1),"SVG"===this.mode){var l=Yy(r.id,this.element.id);if(l){var h=Yy(r.id,this.element.id);h.parentNode.removeChild(h)}Yy(r.id+"_text",this.element.id)&&(l=Yy(r.id+"_text",this.element.id)).parentNode.removeChild(l);var c=Yy(r.id+"_html_element",this.element.id);c&&c.parentNode.removeChild(c)}else this.refreshCanvasLayers()}}},e.prototype.removeLabels=function(t,e){t=this.nameTable[t.id]||t,e.length>1&&this.startGroupAction();for(var i=e.length-1;i>=0;i--)if(t.children&&t.children.length>0){var n=t.wrapper.children.filter(function(e){return e.id===t.id+"group_container"});n&&n.length>0&&this.removelabelExtension(t,e,i,n[0])}else this.removelabelExtension(t,e,i,t.wrapper);e.length>1&&this.endGroupAction(),this.refreshCanvasLayers()},e.prototype.removePortsExtenion=function(t,e,i,n){for(var s=0;s<n.children.length;s++){var r=n.children[parseInt(s.toString(),10)];if(r instanceof Xs&&r.id.match("_"+e[parseInt(i.toString(),10)].id+"$")){for(var o=0;o<t.ports.length;o++)if(r.id.match("_"+t.ports[parseInt(o.toString(),10)].id+"$")){if(!(this.diagramActions&Is.UndoRedo)){var a={type:"PortCollectionChanged",changeType:"Remove",undoObject:Fn(t.ports[parseInt(o.toString(),10)]),redoObject:Fn(t),category:"Internal"};this.addHistoryEntry(a)}t.ports.splice(o,1)}if(n.children.splice(s,1),"SVG"===this.mode){var l=Yy(r.id,this.element.id);l&&l.parentNode.removeChild(l)}else this.refreshCanvasLayers()}}},e.prototype.removePorts=function(t,e){t=this.nameTable[t.id]||t;var i=e.length;i>1&&this.startGroupAction();for(var n=e.length-1;n>=0;n--)if(t.children&&t.children.length>0)for(var s=0;s<t.wrapper.children.length;s++){t.wrapper.children[parseInt(s.toString(),10)].id.match(t.wrapper.id)&&this.removePortsExtenion(t,e,n,t.wrapper.children[parseInt(s.toString(),10)])}else this.removePortsExtenion(t,e,n,t.wrapper);i>1&&this.endGroupAction()},e.prototype.getSizeValue=function(t,e){var i;if(i=t.toString().indexOf("px")>0?t.toString():t.toString().indexOf("%")>0?void 0!==e?"100%":t.toString():t.toString()+"px",e){Qg(this);i="calc("+i+" - "+e+"px)"}return i},e.prototype.renderRulers=function(){this.rulerSettings.showRulers?(!function(t){var e=Qg(t),i=iv("div",{id:t.element.id+"_overlapRuler",style:"height:"+e.height+"px;width:"+e.width+"px;position:absolute;left:0;top:0",class:"e-ruler-overlap"});t.element.insertBefore(i,t.element.firstChild)}(this),Wg(this,!0),Wg(this,!1)):_g(this)},e.prototype.intOffPageBackground=function(){var t=new un;t=Qg(this);var e=document.getElementById(this.element.id+"content");this.width||(this.width="100%"),this.height||(this.height="100%");var i=this.getSizeValue(this.width,t.width),n=this.getSizeValue(this.height,t.height),s=this.rulerSettings.showRulers?"width:"+i+"; height:"+n+";top:"+t.height+"px;left:"+t.width+"px;overflow: scroll;position:absolute;overflow:auto;":"width:"+i+"; height:"+n+";position:absolute; left:0px;  top:0px;overflow: auto;",r={id:this.element.id+"content",tabindex:"0",style:s};e?(this.diagramCanvas=e,cv(this.diagramCanvas,s)):(this.diagramCanvas=iv("div",r),this.element.appendChild(this.diagramCanvas)),this.diagramCanvas.style.background=this.backgroundColor},e.prototype.initDiagram=function(){this.intOffPageBackground(),dv(this.element,{style:"width:"+this.getSizeValue(this.width)+"; height:"+this.getSizeValue(this.height)+";position:relative;overflow:hidden;"})},e.prototype.renderHiddenUserHandleTemplateLayer=function(t){var e=iv("div",{class:this.element.id+"_hiddenUserHandleTemplate",style:"width:"+t.width+"px; height:"+t.height+"px;visibility:hidden ;  overflow: hidden;"});this.element.appendChild(e)},e.prototype.renderBackgroundLayer=function(t,e){var i=this.createSvg(this.element.id+"_backgroundLayer_svg",t.width,t.height);cv(i,e);var n=nv("g",{id:this.element.id+"_backgroundImageLayer",class:"e-background-image-layer"});i.appendChild(n);var s=nv("g",{id:this.element.id+"_backgroundLayer",class:"e-background-layer"});i.appendChild(s),this.diagramCanvas.appendChild(i)},e.prototype.renderGridLayer=function(t,e){var i=this.createSvg(this.element.id+"_gridline_svg",t.width,t.height);i.setAttribute("class","e-grid-layer");var n=nv("g",{id:this.element.id+"_gridline"}),s=nv("rect",{id:this.element.id+"_grid_rect",x:"0",y:"0",width:"100%",height:"100%"});Sf()?""!==new URL(window.location.href).search?s.setAttribute("fill","url(#"+this.element.id+"_pattern)"):s.setAttribute("fill","url("+location.protocol+"//"+location.host+location.pathname+"#"+this.element.id+"_pattern)"):s.setAttribute("fill","url(#"+this.element.id+"_pattern)");n.appendChild(s),i.appendChild(n),this.diagramCanvas.appendChild(i),hv(i,{style:e})},e.prototype.renderDiagramLayer=function(t,e){var i={id:this.element.id+"_diagramLayer_div",style:"width:"+t.width+"px; height:"+t.height+"px;"+e};if(this.diagramLayerDiv=iv("div",i),"SVG"===this.mode){var n=this.createSvg(this.element.id+"_diagramLayer_svg",t.width,t.height);n.style["pointer-events"]="none",n.setAttribute("class","e-diagram-layer");var s=nv("g",{id:this.element.id+"_diagramLayer"}),r=nv("g",{});this.diagramLayer=s,n.style["pointer-events"]="all",r.appendChild(s),n.appendChild(r),this.diagramLayerDiv.appendChild(n)}else this.diagramLayer=vv.createCanvas(this.element.id+"_diagram",t.width,t.height),cv(this.diagramLayer,"position:absolute;left:0px;top:0px;"),this.diagramLayerDiv.appendChild(this.diagramLayer);this.diagramCanvas.appendChild(this.diagramLayerDiv)},e.prototype.initLayers=function(){var t="position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",e=document.getElementById(this.element.id),i=e.getBoundingClientRect();this.setScaleFromElement(i,e),this.modifyBounds(i);var n=function(){var t=iv("div",{style:"visibility:hidden; width: 100px"});document.body.appendChild(t);var e=t.getBoundingClientRect().width;t.style.overflow="scroll";var i=iv("div",{style:"width:100%"});t.appendChild(i);var n=i.getBoundingClientRect().width;return t.parentNode.removeChild(t),e-n}();this.scroller.scrollerWidth=n,this.scroller.setViewPortSize(i.width,i.height),this.renderRulers();var s="measureElement";window[""+s]&&(window[""+s]=null,document.getElementById("measureElement").remove());pv(),this.renderBackgroundLayer(i,t),this.renderGridLayer(i,t),this.renderDiagramLayer(i,t),this.renderHTMLLayer(i,t),this.renderPortsExpandLayer(i,t),this.renderNativeLayer(i,t),this.renderAdornerLayer(i,t),this.renderHiddenUserHandleTemplateLayer(i)},e.prototype.setScaleFromElement=function(t,e){var i=t.width/e.clientWidth;this.scaleValue=i},e.prototype.modifyBounds=function(t){var e=this.scaleValue;t.x=t.x/e,t.y=t.y/e,t.width=t.width/e,t.height=t.height/e},e.prototype.modifyClientOffset=function(t,e){var i=this.scaleValue;return e?t*i:t/i},e.prototype.renderAdornerLayer=function(t,e){var i=iv("div",{id:this.element.id+"_diagramAdornerLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e}),n=iv("div",{id:this.element.id+"_diagramUserHandleLayer",style:"width:"+t.width+"px;height:"+t.height+"px;"+e});n.setAttribute("class","e-userHandle-layer"),i.appendChild(n);var s=this.createSvg(this.element.id+"_diagramAdorner_svg",t.width,t.height);s.setAttribute("class","e-adorner-layer"),s.style["pointer-events"]="none",this.adornerLayer=nv("g",{id:this.element.id+"_diagramAdorner"}),this.adornerLayer.style[" pointer-events"]="all",s.appendChild(this.adornerLayer),i.appendChild(s),this.diagramCanvas.appendChild(i);var r=nv("g",{id:this.element.id+"_SelectorElement"});this.adornerLayer.appendChild(r),hv(s,{style:"pointer-events:none;"})},e.prototype.renderPortsExpandLayer=function(t,e){var i=this.createSvg(this.element.id+"_diagramPorts_svg",t.width,t.height);i.setAttribute("class","e-ports-expand-layer");var n=nv("g",{id:this.element.id+"_diagramPorts",class:"e-ports-layer",style:"pointer-events: all;"});i.appendChild(n);var s=nv("g",{id:this.element.id+"_diagramExpander",class:"e-expand-layer",style:"pointer-events: all;"});i.appendChild(s),this.diagramCanvas.appendChild(i),hv(i,{style:e})},e.prototype.renderHTMLLayer=function(t,e){this.htmlLayer=iv("div",{id:this.element.id+"_htmlLayer",style:"width:"+t.width+"px; height:"+t.height+"px;position:absolute;top:0px;left:0px;overflow:hidden;pointer-events:none;",class:"e-html-layer"});var i=iv("div",{id:this.element.id+"_htmlLayer_div",style:"position:absolute;top:0px;left:0px;pointer-events:all;"});this.htmlLayer.appendChild(i),this.diagramCanvas.appendChild(this.htmlLayer)},e.prototype.renderNativeLayer=function(t,e){var i=this.createSvg(this.element.id+"_nativeLayer_svg",t.width,t.height),n=nv("g",{id:this.element.id+"_nativeLayer",style:"pointer-events:all;"});i.appendChild(n),this.diagramLayerDiv.appendChild(i),hv(i,{class:"e-native-layer",style:e})},e.prototype.createSvg=function(t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return hv(n,{id:t,width:e,height:i}),n},e.prototype.updateBazorShape=function(){for(var t=0;t<this.nodes.length;t++){var e=this.nodes[parseInt(t.toString(),10)];switch(e.shape.type){case"Bpmn":e.shape.bpmnShape=e.shape.shape;break;case"UmlActivity":e.shape.umlActivityShape=e.shape.shape;break;case"Flow":e.shape.flowShape=e.shape.shape;break;case"Basic":e.shape.basicShape=e.shape.shape;break;case"Text":e.shape.textContent=e.shape.content}}},e.prototype.initObjects=function(t){this.updateBazorShape(),this.isLoading||this.initData(),this.initLayerObjects(),this.updateBridging(t)},e.prototype.initLayerObjects=function(){for(var t=this.layers.length>1,e=[],i={},n={},s={},r=[],o=0,a=this.nodes;o<a.length;o++){(b=a[o]).id=b.id||Hn(),this.addToLayer(b,t),i[b.id]=b}for(var l=0,h=this.connectors;l<h.length;l++){(b=h[l]).id=b.id||Hn(),this.addToLayer(b,t),i[b.id]=b}for(var c=0,d=this.layers;c<d.length;c++){for(var p=0,u=(D=d[c]).objects;p<u.length;p++){if(i[""+(b=u[p])])if(i[""+b]instanceof Rg)if((A=i[""+b]).sourceID&&A.targetID){var g=i[A.sourceID],m=i[A.targetID],f=!0;this.isLoading&&(g&&g.children&&g.children.length>0||m&&m.children&&m.children.length>0)&&(f=!1),g&&g.wrapper&&m&&m.wrapper&&f?this.initConnectors(i[""+b],D):e.push(i[""+b])}else{g=i[A.sourceID],m=i[A.targetID];g&&g.children&&g.children.length>0||m&&m.children&&m.children.length>0?e.push(i[""+b]):this.initConnectors(i[""+b],D)}else i[""+b].children?r.push(b):i[""+b].shape instanceof Cy&&i[""+b].shape.activity.subProcess.processes&&i[""+b].shape.activity.subProcess.processes.length>0?n[i[""+b].id]=b:i[""+b].shape instanceof Py&&i[""+b].shape.children&&i[""+b].shape.children.length>0?s[i[""+b].id]=b:this.initNodes(i[""+b],D)}if(this.pathDataStorage&&this.pathDataStorage.clear(),this.bpmnModule)for(var y=0,v=this.bpmnModule.bpmnTextAnnotationConnector;y<v.length;y++){var b=v[y];this.initConnectors(b,void 0,!0)}}for(var C=0,I=Object.keys(n);C<I.length;C++){b=I[C];this.initObject(i[""+b]),this.bpmnModule.updateDocks(i[""+b],this)}for(var M=0,S=Object.keys(s);M<S.length;M++){b=S[M];this.initObject(i[""+b]),Xf(i[""+b],this)}for(var x=0,w=this.alignGroup(r,i);x<w.length;x++){b=w[x];var D=this.commandHandler.getObjectLayer(b);this.initNodes(i[""+b],D)}for(var E=0,T=e;E<T.length;E++){var A=T[E];D=this.commandHandler.getObjectLayer(A.id);this.initConnectors(A,D)}},e.prototype.alignGroup=function(t,e){var i,n,s,r,o=[],a=[];for(s=0;s<t.length;s++){var l=void 0;if((n=e[""+(i=t[parseInt(s.toString(),10)])])&&n.children.length)for(r=0;r<n.children.length;r++)l=n.children[parseInt(r.toString(),10)],t.indexOf(l)>-1&&-1===o.indexOf(l)&&-1===a.indexOf(l)&&o.splice(0,0,l);-1===o.indexOf(i)&&a.push(i)}return o=o.concat(a)},e.prototype.addToLayer=function(t,e){var i;if(e&&(i=this.commandHandler.getObjectLayer(t.id)),e&&i||this.activeLayerObjectsSet.has(t.id)||(this.activeLayer.objects.push(t.id),this.activeLayerObjectsSet.add(t.id)),(t instanceof Ny||t instanceof Rg)&&("SwimLane"!==t.shape.type||t.children&&t.children.length>0)){if(t.parentId){var n=this.swimlaneZIndexTable[t.parentId],s=this.swimlaneChildTable[t.id];(n&&-1!==n||s&&-1!==s)&&(t.zIndex=this.swimlaneChildTable[t.id])}t instanceof Rg&&t.sourceID&&t.targetID?this.activeLayerObjectsSet.has(t.sourceID)&&this.activeLayerObjectsSet.has(t.targetID)&&this.setZIndex(i||this.activeLayer,t):this.setZIndex(i||this.activeLayer,t)}},e.prototype.updateLayer=function(t){for(var e=0,i=Object.keys(t.layers);e<i.length;e++){for(var n=i[e],s=0,r=this.layers[""+n].objects;s<r.length;s++){var o=r[s],a=this.nameTable[""+o];void 0!==t.layers[""+n].visible?this.updateElementVisibility(a.wrapper,a,t.layers[""+n].visible):!0===t.layers[""+n].lock&&this.unSelect(a)}void 0!==t.layers[""+n].lock&&(this.layers[""+n].lock=t.layers[""+n].lock)}"SVG"!==this.mode&&this.refreshDiagramLayer()},e.prototype.updateScrollSettings=function(t){var e=-this.scroller.horizontalOffset+t.scrollSettings.horizontalOffset||0,i=-this.scroller.verticalOffset+t.scrollSettings.verticalOffset||0;this.scrollSettings.horizontalOffset=-this.scroller.horizontalOffset||0,this.scrollSettings.verticalOffset=-this.scroller.verticalOffset||0;var n={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom};0===e&&0===i||(this.pan(e,i),this.scrollSettings.horizontalOffset=-this.scroller.horizontalOffset||0,this.scrollSettings.verticalOffset=-this.scroller.verticalOffset||0);var s={VerticalOffset:this.scrollSettings.verticalOffset,HorizontalOffset:this.scrollSettings.horizontalOffset,ViewportHeight:this.scrollSettings.viewPortHeight,ViewportWidth:this.scrollSettings.viewPortWidth,CurrentZoom:this.scroller.currentZoom},r="Start";this.realActions&Ss.PanInProgress&&(r="Progress");var o={oldValue:n,newValue:s,source:this,panState:r};this.triggerEvent(Ds.scrollChange,o),this.commandHandler.updatePanState(!0),"Canvas"===this.mode&&this.constraints&ms.Virtualization&&this.refreshDiagramLayer()},e.prototype.updateFromModel=function(){if(this.model.participants.length>0){this.model.updateUmlSequenceDiagram(this),this.initLayerObjects();var t=this.isProtectedOnChange;this.protectPropertyChange(!0),this.model.render(),this.refreshDiagramLayer(),this.diagramActions&Is.Render&&"Canvas"!==this.mode||(this.isRefreshed=!0),t||this.protectPropertyChange(t),this.fitToPage({mode:"Page",region:"Content",margin:{left:10,top:10,right:10,bottom:10},canZoomIn:!0,canZoomOut:!0})}},e.prototype.initData=function(){var t=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;if(!this.dataBindingModule||this.realActions&Ss.PreventDataInit)t&&!this.dataBindingModule&&console.warn('[WARNING] :: Module "DataBinding" is not available in Diagram component! You either misspelled the module name or forgot to load it.');else if(t&&this.dataSourceSettings.connectionDataSource.dataManager){var e=this.dataSourceSettings.dataManager||this.dataSourceSettings.dataSource;this.nodes=this.generateData(e,!0),this.connectors=this.generateData(this.dataSourceSettings.connectionDataSource.dataManager,!1)}else t&&t.dataSource&&(t.dataSource.url||"BlazorAdaptor"===t.adaptorName&&!t.dataSource.url)?this.dataBindingModule.initSource(this.dataSourceSettings,this):this.dataBindingModule.initData(this.dataSourceSettings,this)},e.prototype.generateData=function(t,e){var i,n=[];for(i=0;i<t.length;i++){var s=t[parseInt(i.toString(),10)],r=e?this.makeData(s,!0):this.makeData(s,!1);r&&r.id&&!dm(n,r.id)&&n.push(r)}return n},e.prototype.makeData=function(t,e){var i,n=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource,s={};if(s.id=t[n.id]?t[n.id]:Hn(),n.sourceID&&(s.sourceID=t[n.sourceID]),n.targetID&&(s.targetID=t[n.targetID]),t[n.sourcePointX]&&t[n.sourcePointY]&&(s.sourcePoint={x:Number(t[n.sourcePointX]),y:Number(t[n.sourcePointY])}),t[n.targetPointX]&&t[n.targetPointY]&&(s.targetPoint={x:Number(t[n.targetPointX]),y:Number(t[n.targetPointY])}),n.crudAction.customFields&&n.crudAction.customFields.length>0)for(i=0;i<n.crudAction.customFields.length;i++)s[n.crudAction.customFields[parseInt(i.toString(),10)]]=t[n.crudAction.customFields[parseInt(i.toString(),10)]];return s},e.prototype.initNodes=function(t,e){this.preventDiagramUpdate=!0,this.initObject(t,e),this.preventDiagramUpdate=!1},e.prototype.initConnectors=function(t,e,i){this.preventDiagramUpdate=!0,this.initObject(t,e,i),this.updateEdges(t),this.preventDiagramUpdate=!1},e.prototype.setZIndex=function(t,e){var i=t;if(e.zIndex===Number.MIN_VALUE){for(;i.zIndexTable[i.objectZIndex+1];)t.objectZIndex++;this.setIndex(t,e)}else{var n=null!==e.zIndex?e.zIndex:i.objectZIndex+1;if(i.zIndexTable[parseInt(n.toString(),10)])for(var s=Object.keys(i.zIndexTable).length,r=0;r<s;r++){if(r===n){for(var o=s;o>n;o--)i.zIndexTable[parseInt(o.toString(),10)]=i.zIndexTable[o-1],this.nameTable[i.zIndexTable[parseInt(o.toString(),10)]]&&(this.nameTable[i.zIndexTable[parseInt(o.toString(),10)]].zIndex=o);i.zIndexTable[parseInt(r.toString(),10)]=e.id}0}}},e.prototype.setIndex=function(t,e){var i=this,n=function(e){(e.zIndex=++t.objectZIndex,"Bpmn"===e.shape.type&&e.shape.activity&&e.shape.activity.subProcess&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length)&&e.shape.activity.subProcess.processes.forEach(function(e){var n=i.nameTable[""+e];n&&(n.zIndex=++t.objectZIndex)})},s=function(e){var s=i.nodes.find(function(t){return t.id===e}),r=i.connectors.find(function(t){return t.id===e});s?s.children&&s.children.length>0||s.shape.activity&&s.shape.activity.subProcess&&s.shape.activity.subProcess.processes&&s.shape.activity.subProcess.processes.length>0?i.setIndex(t,s):n(s):r&&n(r)};if(-1!==t.objects.indexOf(e.id))if(e instanceof Ny){if(n(e),"SwimLane"!==e.shape.type&&e.children&&e.children.length>0)for(var r=0;r<e.children.length;r++)s(e.children[parseInt(r.toString(),10)]);else if(e.shape.activity&&e.shape.activity.subProcess&&e.shape.activity.subProcess.processes&&e.shape.activity.subProcess.processes.length>0)for(var o=0;o<e.shape.activity.subProcess.processes.length;o++)s(e.shape.activity.subProcess.processes[parseInt(o.toString(),10)])}else n(e)},e.prototype.initializeDiagramLayers=function(){for(var t=0;t<this.layers.length;t++)if(-1!==this.layers[parseInt(t.toString(),10)].zIndex){var e=this.layers[parseInt(t.toString(),10)];this.layers[parseInt(t.toString(),10)]=this.layers[this.layers[parseInt(t.toString(),10)].zIndex],this.layers[e.zIndex]=e}for(var i=0,n=this.layers;i<n.length;i++){var s=n[i];s.zIndex=-1!==s.zIndex?s.zIndex:this.layers.indexOf(s),this.layerZIndexTable[s.zIndex]=s.id}for(t=0;t<this.layers.length;t++)for(var r=t+1;r<this.layers.length;r++)if(this.layers[parseInt(t.toString(),10)].zIndex>this.layers[parseInt(r.toString(),10)].zIndex){e=this.layers[parseInt(t.toString(),10)];this.layers[parseInt(t.toString(),10)]=this.layers[parseInt(r.toString(),10)],this.layers[parseInt(r.toString(),10)]=e}if(0===this.layers.length){this.commandHandler.addLayer({id:"default_layer",visible:!0,lock:!1,objects:[],zIndex:0,objectZIndex:-1,zIndexTable:{}},null,!0)}this.setActiveLayer(this.layers[this.layers.length-1].id)},e.prototype.resetTool=function(){this.eventHandler.resetTool()},e.prototype.initObjectExtend=function(t,e,i){if(i){var n=this.commandHandler.checkBoundaryConstraints(void 0,void 0,t.wrapper.bounds,!0);if("SwimLane"===t.shape.type)for(var s=0,r=Object.keys(e.zIndexTable);s<r.length;s++)e.zIndexTable[r[parseInt(s.toString(),10)]]&&e.zIndexTable[r[parseInt(s.toString(),10)]]===t.id&&delete e.zIndexTable[r[parseInt(s.toString(),10)]];if(e.zIndexTable[t.zIndex]=t.id,!n){var o=t instanceof Ny?this.nodes:this.connectors;for(s=0;s<=o.length;s++)o[parseInt(s.toString(),10)]&&t.id===o[parseInt(s.toString(),10)].id&&o.splice(s,1);delete e.zIndexTable[t.zIndex]}}},e.prototype.initObject=function(t,e,i,n){if(void 0===i&&(i=!0),void 0!==t){if(i&&(e||(this.addToLayer(t,!1),e=this.activeLayer),(t instanceof Ny||t instanceof Rg)&&("SwimLane"!==t.shape.type||t.children&&t.children.length>0)&&this.setZIndex(e,t)),t instanceof Ny){if(i){if("helper"!==t.id&&!(this.diagramActions&Is.UndoRedo))if(r=is(this.getNodeDefaults)){if((o=r(t,this))&&o.ports)for(var s=0;s<o.ports.length;s++)o.ports[parseInt(s.toString(),10)].inEdges=[],o.ports[parseInt(s.toString(),10)].outEdges=[];o&&o!==t&&Yn(o,t)}this.initNode(t,this.element.id)}}else if(t instanceof Rg){var r,o;if(r=is(this.getConnectorDefaults))(o=r(t,this))&&o!==t&&Yn(o,t),t.segments.length&&t.type!==t.segments[0].type&&(t.segments=[]);var a=this.nameTable[t.sourceID],l=this.nameTable[t.targetID],h=this.getConnectedPort(a,t,!0),c=this.getConnectedPort(l,t),d=this.findInOutConnectPorts(a,!1),p=this.findInOutConnectPorts(l,!0);if((void 0!==a&&Ip(a)||""!==t.sourcePortID&&Mp(d))&&(t.sourceWrapper=this.getEndNodeWrapper(a,t,!0),t.sourcePortID&&h&&h.constraints&&!(h.constraints&Es.None)&&h.constraints&Es.OutConnect&&(t.sourcePortWrapper=this.getWrapper(a.wrapper,t.sourcePortID))),(void 0!==l&&bp(l)||""!==t.targetPortID&&Cp(p))&&(t.targetWrapper=this.getEndNodeWrapper(l,t,!1),t.targetPortID&&c&&c.constraints&&!(c.constraints&Es.None)&&c.constraints&Es.InConnect&&(t.targetPortWrapper=this.getWrapper(l.wrapper,t.targetPortID))),!i){var u=t.getConnectorPoints(t.type);_m(t,u)}i&&t.init(this);for(var g=0;g<t.wrapper.children.length;g++)this.pathTable[t.wrapper.children[parseInt(g.toString(),10)].data]&&(t.wrapper.children[parseInt(g.toString(),10)].absoluteBounds=this.pathTable[t.wrapper.children[parseInt(g.toString(),10)].data].absoluteBounds);t.wrapper.measure(new un(void 0,void 0)),t.wrapper.arrange(t.wrapper.desiredSize),t instanceof Rg&&"Bezier"===t.type&&(this.updateConnectorAnnotation(t),this.updateConnectorfixedUserHandles(t));for(var m=0;m<t.wrapper.children.length;m++)this.pathTable[t.wrapper.children[parseInt(m.toString(),10)].data]={},this.pathTable[t.wrapper.children[parseInt(m.toString(),10)].data].absoluteBounds=t.wrapper.children[parseInt(m.toString(),10)].absoluteBounds}if(t instanceof Ny&&t.children&&t.container)for(s=0;s<t.children.length;s++)this.nameTable[t.children[parseInt(s.toString(),10)]].offsetX=this.nameTable[t.children[parseInt(s.toString(),10)]].wrapper.offsetX,this.nameTable[t.children[parseInt(s.toString(),10)]].offsetY=this.nameTable[t.children[parseInt(s.toString(),10)]].wrapper.offsetY;if(t instanceof Ny&&t.shape&&"Activity"===t.shape.shape&&"SubProcess"===t.shape.activity.activity&&t.shape.activity.subProcess.processes){var f=t.shape.activity.subProcess.processes;for(s=0;s<f.length;s++)this.nameTable[f[parseInt(s.toString(),10)]]&&(this.nameTable[f[parseInt(s.toString(),10)]].offsetX=this.nameTable[f[parseInt(s.toString(),10)]].wrapper.offsetX,this.nameTable[f[parseInt(s.toString(),10)]].offsetY=this.nameTable[f[parseInt(s.toString(),10)]].wrapper.offsetY,this.updateQuad(this.nameTable[f[parseInt(s.toString(),10)]]))}if(this.initObjectExtend(t,e,i),this.nameTable[t.id]=t,!this.refreshing&&t.shape.annotations&&t.shape.annotations.length>0)for(s=0;s<t.shape.annotations.length&&t.shape.annotations[parseInt(s.toString(),10)].text;s++)this.getBPMNTextAnnotation(t,this,t.shape.annotations[parseInt(s.toString(),10)],!1);if(t instanceof Ny&&t.children){this.preventNodesUpdate=!0,this.preventConnectorsUpdate=!0,n||t.container||this.updateGroupOffset(t,!0),this.groupTable[t.id]=t.children;for(s=0;s<t.children.length;s++){var y=this.nameTable[t.children[parseInt(s.toString(),10)]];y&&(y.parentId=t.id)}this.isLoading||!t.rotateAngle||t.container||this.isUndo||this.commandHandler.rotateObjects(t,[t],t.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),this.preventNodesUpdate=!1,this.preventConnectorsUpdate=!1}void 0===this.enterObject&&this.updateQuad(t)}!1===t.visible&&this.updateElementVisibility(t.wrapper,t,!1)},e.prototype.getConnectedPort=function(t,e,i){if(t&&t.ports)for(var n=0,s=t.ports;n<s.length;n++){var r=s[n];if(r.id===e.sourcePortID&&i)return r;if(r.id===e.targetPortID&&!i)return r}return null},e.prototype.scaleObject=function(t,e,i){var n=i?t.wrapper.actualSize.width:t.wrapper.actualSize.height,s=i?1+(e-n)/n:1,r=i?1:1+(e-n)/n;this.realActions|=Ss.PreventDrag,this.scale(t,s,r,{x:.5,y:.5}),this.realActions&=~Ss.PreventDrag},e.prototype.updateDefaultLayoutIcons=function(t){"OrganizationalChart"!==this.layout.type&&"HierarchicalTree"!==this.layout.type&&"ComplexHierarchicalTree"!==this.layout.type||(this.updateDefaultLayoutIcon(t,t.expandIcon),this.updateDefaultLayoutIcon(t,t.collapseIcon))},e.prototype.updateDefaultLayoutIcon=function(t,e){if("None"!==e.shape&&"Auto"===e.horizontalAlignment&&"Auto"===e.verticalAlignment&&.5===e.offset.x&&1===e.offset.y){var i=this.getWrapper(t.wrapper,"icon_content"),n=void 0,s=void 0;"TopToBottom"===this.layout.orientation||"BottomToTop"===this.layout.orientation?(n=.5,s="TopToBottom"===this.layout.orientation?1:0):"RightToLeft"!==this.layout.orientation&&"LeftToRight"!==this.layout.orientation||(n="LeftToRight"===this.layout.orientation?1:0,s=.5),i.setOffsetWithRespectToBounds(n,s,"Fraction"),i.horizontalAlignment="Center",i.verticalAlignment="Center",t.wrapper.measure(new un(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize)}},e.prototype.updateGroupOffset=function(t,e){if(t.children&&t.children.length>0&&!t.container||t.processId||t.parentId&&this.nameTable[t.parentId]&&"Container"===this.nameTable[t.parentId].shape.type){var i=this.nameTable[t.id];if(!(this.realActions&Ss.PreventScale||this.realActions&Ss.PreventDrag)){if(!i.offsetX||!(this.realActions&Ss.EnableGroupAction)&&(this.diagramActions&Is.UndoRedo||this.diagramActions&Is.ToolAction||this.diagramActions&Is.PublicMethod||t.processId))i.offsetX=t.wrapper.offsetX;else{this.realActions|=Ss.PreventScale;var n=i.offsetX-t.wrapper.offsetX;i.offsetX=t.wrapper.offsetX;var s=i.offsetY-t.wrapper.offsetY;i.offsetY=t.wrapper.offsetY,n+s!==0&&this.drag(i,n,s),this.realActions&=~Ss.PreventScale}if(!i.offsetY||!(this.realActions&Ss.EnableGroupAction)&&(this.diagramActions&Is.UndoRedo||this.diagramActions&Is.ToolAction||this.diagramActions&Is.PublicMethod||t.processId))i.offsetY=t.wrapper.offsetY;else{this.realActions|=Ss.PreventScale;s=i.offsetY-t.wrapper.offsetY;i.offsetY=t.wrapper.offsetY,this.drag(i,0,s),this.realActions&=~Ss.PreventScale}this.diagramActions&&(i.width=t.wrapper.actualSize.width,i.height=t.wrapper.actualSize.height)}}t&&t.annotations&&t.annotations.length>0&&(t.wrapper.children.forEach(function(t){t instanceof $s&&t.children.forEach(function(t){t&&t instanceof Zs&&t.refreshTextElement()})}),t.wrapper.measure(new un(t.width,t.height),t.id,this.onLoadImageSize.bind(this)),t.wrapper.arrange(t.wrapper.desiredSize)),e&&t.children&&t.children.length>0&&(void 0!==this.nameTable[t.id].width?this.scaleObject(t,this.nameTable[t.id].width,!0):this.nameTable[t.id].width=t.wrapper.actualSize.width,void 0!==this.nameTable[t.id].height?this.scaleObject(t,this.nameTable[t.id].height,!1):this.nameTable[t.id].height=t.wrapper.actualSize.height)},e.prototype.initNode=function(t,e,i){var n,s,r=t.initContainer(),o=new $s;if(this.diagramSettings.inversedAlignment||(r.inversedAlignment=!1),r.children||(r.children=[]),t.children){if(r.measureChildren=!1,o.id=t.id+"group_container",t.shape&&"SwimLane"===t.shape.type?o.style.fill=t.style.fill:o.style.fill="none",o.style.strokeColor="none",o.horizontalAlignment="Stretch",o.verticalAlignment="Stretch",o.pivot=t.pivot,r.style=t.style,t.shape&&"Basic"===t.shape.type&&(r.cornerRadius=t.shape.cornerRadius),r.padding.left=t.padding.left,r.padding.right=t.padding.right,r.padding.top=t.padding.top,r.padding.bottom=t.padding.bottom,o.children=[],o.preventContainer=!0,t.container&&(o.relativeMode="Object"),t.container&&"Grid"===t.container.type)for(var a=0;a<t.children.length;a++){var l=new $s,h=this.nameTable[t.children[a]];l.children=[],l.children.push(h.wrapper),h&&r.addObject(h.wrapper,h.rowIndex,h.columnIndex,h.rowSpan,h.columnSpan)}else for(a=0;a<t.children.length;a++)if(this.nameTable[t.children[a]]){h=this.nameTable[t.children[a]];this.updateStackProperty(t,h,a),r.children.push(h.wrapper),r.elementActions=r.elementActions|us.ElementIsGroup,h.wrapper.flip=h.wrapper.flip^=t.wrapper.flip}(y(t.container)||t.container&&"Grid"!==t.container.type)&&r.children.push(o)}else{var c=is(this.setNodeTemplate);c&&"helper"!==t.id&&(n=c(t,this)),n||(n=t.init(this)),r.children.push(n)}s=is(this.getDescription),(t.children?r:n).description=s||(t.annotations.length?t.annotations[0].content:t.id);var d=t.children?o:r;t.initAnnotations(this.getDescription,d,this.element.id,!!wp(this),this.annotationTemplate),t.initPorts(this.getDescription,d),t.initIcons(this.getDescription,this.layout,d,e);for(a=0;t.fixedUserHandles,a<t.fixedUserHandles.length;a++){var p=t.initFixedUserHandles(t.fixedUserHandles[a],this.fixedUserHandleTemplate,this.element.id);d.children.push(p)}if("SwimLane"===t.shape.type&&t.wrapper&&t.wrapper.children.length>0&&t.wrapper.children[0]instanceof Vp?(this.setZIndex(this.activeLayer,t),$p(t),eu(this,t),this.updateLaneAfterAddChild(t),this.updateDiagramElementQuad()):(r.measure(new un(t.width,t.height),t.id,this.onLoadImageSize.bind(this)),r instanceof Vp?r.arrange(r.desiredSize,!0):r.arrange(r.desiredSize)),"Container"===t.shape.type&&this.updateDiagramElementQuad(),t.wrapper.flip!==ss.None)if(t.children&&t.children.length>0){for(a=0;a<t.children.length;a++){var u=this.nameTable[t.children[a]];u&&(this.refreshing||this.commandHandler.cloningInProgress||this.diagramActions&Is.UndoRedo||(u.flip^=t.flip,u.flipMode=t.flipMode),"None"!==u.flipMode&&"Label"!==u.flipMode&&"LabelText"!==u.flipMode&&"LabelAndLabelText"!==u.flipMode?this.updatePorts(u,u.flip):this.updatePorts(u,ss.None),this.applyWrapperFlip(u),u.wrapper.measure(new un(u.wrapper.bounds.width,u.wrapper.bounds.height),u.id,this.onLoadImageSize.bind(this)),u.wrapper.arrange(u.wrapper.desiredSize))}var g=t.wrapper.children[t.wrapper.children.length-1];g.flip=t.wrapper.flip,g.flipMode=t.wrapper.flipMode;for(var m=0;m<g.children.length;m++){var f=g.children[m];f instanceof Zs&&"Port"!==t.flipMode&&"None"!==t.flipMode&&(f.flip=t.wrapper.flip,f.flipMode=t.wrapper.flipMode)}this.refreshing||this.commandHandler.cloningInProgress||this.diagramActions&Is.UndoRedo||gf(t.wrapper,t.wrapper.offsetX,t.wrapper.offsetY,this,t.wrapper.flip,void 0,void 0,!0)}else this.applyWrapperFlip(t);if("Bpmn"===t.shape.type&&"TextAnnotation"===t.shape.shape){var v=!1;for(a=0;a<this.connectors.length;a++)if(this.connectors[parseInt(a.toString(),10)].id===t.id+"_connector"){this.connectors[parseInt(a.toString(),10)].isBpmnAnnotationConnector=!0,v=!0;break}v||this.addBpmnAnnotationConnector(t,r)}t instanceof Ny&&t.container&&(t.width<r.outerBounds.width||t.height<r.outerBounds.height)&&r.bounds.x<=r.outerBounds.x&&r.bounds.y<=r.outerBounds.y&&(t.width=r.width=r.outerBounds.width,t.height=r.height=r.outerBounds.height,r.measure(new un(t.width,t.height)),r.arrange(r.desiredSize)),t.container&&"Grid"===t.container.type&&t.children&&t.children.length>0&&this.updateChildPosition(t)},e.prototype.updateLaneAfterAddChild=function(t){for(var e=0;e<this.nodes.length;e++){var i=this.nodes[parseInt(e.toString(),10)];i.parentId!==t.id||t.shape.hasHeader||(i.width=i.wrapper.width,i.height=i.wrapper.height)}},e.prototype.applyWrapperFlip=function(t){t.wrapper.flip=t.flip,t.wrapper.flipMode=t.flipMode,t.wrapper.children[0].flip=t.flip,t.wrapper.children[0].flipMode=t.flipMode;for(var e=0;e<t.wrapper.children.length;e++){var i=t.wrapper.children[e];i instanceof $s?this.applyWrapperCanvasFlip(i,t):(i.flip=t.flip,i.flipMode=t.flipMode)}},e.prototype.applyWrapperCanvasFlip=function(t,e){for(var i=0;i<t.children.length;i++){var n=t.children[parseInt(i.toString(),10)];n instanceof $s?this.applyWrapperCanvasFlip(n,e):"None"!==e.flipMode&&(n.flip=e.flip,n.flipMode=e.flipMode)}},e.prototype.addBpmnAnnotationConnector=function(t,i){if(t.parentObj instanceof e||t.parentObj instanceof Oy){var n=t.shape,s=n.textAnnotation.textAnnotationDirection,r=""!==n.textAnnotation.textAnnotationTarget&&this.nameTable[n.textAnnotation.textAnnotationTarget],o=r?this.nameTable[n.textAnnotation.textAnnotationTarget]:null,a=null!=o?o.wrapper:null,l=t.ports[0],h={x:0,y:0};switch(s){case"Left":l.offset={x:0,y:.5},h.x=i.bounds.left-40,h.y=i.bounds.bottom+30;break;case"Right":l.offset={x:1,y:.5},h.x=i.bounds.right+40,h.y=i.bounds.bottom+30;break;case"Top":l.offset={x:.5,y:0},h.x=i.bounds.right+30,h.y=i.bounds.top-40;break;case"Bottom":l.offset={x:.5,y:1},h.x=i.bounds.right+30,h.y=i.bounds.bottom+40;break;default:l.offset={x:0,y:.5},h.x=i.bounds.left-40,h.y=i.bounds.bottom+30,r&&null!=i&&null!=a&&(i.bounds.left>a.bounds.right?l.offset={x:0,y:.5}:i.bounds.right<a.bounds.left?l.offset={x:1,y:.5}:i.bounds.bottom>a.bounds.top?l.offset={x:.5,y:0}:i.bounds.top<a.bounds.bottom&&(l.offset={x:.5,y:1}))}var c=new Rg(this,"connectors",{id:t.id+"_connector",targetID:t.id,targetPortID:l.id,type:"Straight",shape:{type:"Bpmn",flow:"Association"},constraints:cs.Default&~(cs.DragTargetEnd|cs.Delete),isBpmnAnnotationConnector:!0},!0);r?c.sourceID=n.textAnnotation.textAnnotationTarget:c.sourcePoint=h;var d=this.isProtectedOnChange;this.isProtectedOnChange=!0,t.constraints|=ps.InConnect,this.connectors.push(c),this.bpmnModule.bpmnTextAnnotationConnector||(this.bpmnModule.bpmnTextAnnotationConnector=[]),this.bpmnModule.bpmnTextAnnotationConnector.push(c);var p=0!==(t.constraints&ps.Shadow),u=0!==(t.constraints&ps.AllowMovingOutsideLane);t.constraints=ps.Default&~(ps.OutConnect|ps.InConnect),p&&(t.constraints|=ps.Shadow),u&&(t.constraints|=ps.AllowMovingOutsideLane),this.isProtectedOnChange=d}},e.prototype.getBPMNTextAnnotation=function(t,e,i,n){var s,r={id:i.id||Hn(),height:i.height||100,width:i.width||100,annotations:[{id:(i.id?i.id:Hn())+i.text,content:i.text}],offsetX:t.offsetX+i.length*Math.cos(i.angle*(Math.PI/180)),offsetY:t.offsetY+i.length*Math.sin(i.angle*(Math.PI/180)),shape:{type:"Bpmn",shape:"TextAnnotation",textAnnotation:{textAnnotationDirection:"Auto",textAnnotationTarget:t.id}},constraints:ps.Default&~(ps.OutConnect|ps.InConnect)},o=t.wrapper.bounds,a={x:r.offsetX,y:r.offsetY},l=Zd(a,o,o);switch(l){case"Right":s={x1:o.right,y1:o.top,x2:o.right,y2:o.bottom};break;case"Left":s={x1:o.left,y1:o.top,x2:o.left,y2:o.bottom};break;case"Bottom":s={x1:o.right,y1:o.bottom,x2:o.left,y2:o.bottom};break;case"Top":s={x1:o.right,y1:o.top,x2:o.left,y2:o.top}}var h=o.center,c=zd(s,[h,fn.transform(a,i.angle,Math.max(o.width,o.height))],0,h);if(void 0!==i.length&&void 0!==i.angle&&c&&(c=fn.transform(c,i.angle,i.length),r.offsetX=c.x,r.offsetY=c.y),"Right"===l?r.offsetX+=r.width/2:"Left"===l?r.offsetX-=r.width/2:"Bottom"===l?r.offsetY+=r.height/2:r.offsetY-=r.height/2,n)this.add(r);else{var d=new Ny(this,"nodes",r,!0);e.initObject(d,void 0,void 0,!0),e.nodes.push(d)}},e.prototype.updateDiagramElementQuad=function(){for(var t=0;t<this.nodes.length;t++)this.nodes[parseInt(t.toString(),10)].wrapper&&this.nodes[parseInt(t.toString(),10)].wrapper instanceof _s&&this.updateQuad(this.nodes[parseInt(t.toString(),10)])},e.prototype.onLoadImageSize=function(t,e){var i=this.getObject(t),n=document.getElementById(t+"sf-imageNode");n&&n.parentNode.removeChild(n),this.nodePropertyChange(i,{},{width:e.width,height:e.height});var s={element:Fn(i),size:e};this.triggerEvent(Ds.onImageLoad,s)},e.prototype.updateChildPosition=function(t){for(var e=0;e<t.children.length;e++){var i=this.getObject(t.children[parseInt(e.toString(),10)]);i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY,i.children&&i.children.length>0&&this.updateChildPosition(i)}},e.prototype.canExecute=function(){return!0},e.prototype.updateStackProperty=function(t,e,i){t.container&&"Stack"===t.container.type&&(e.width||(e.wrapper.horizontalAlignment="Stretch",e.horizontalAlignment="Stretch"),e.height||(e.verticalAlignment="Stretch",e.wrapper.verticalAlignment="Stretch"),i&&"UmlClassifier"===t.shape.type&&(e.umlIndex=i))},e.prototype.initViews=function(){this.isLoading||(this.views.push(this.element.id),this.views[this.element.id]=this)},e.prototype.initCommands=function(){var t=this.commandManager.commands,e={copy:{execute:this.copyCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.C,keyModifiers:bs.Control}},paste:{execute:this.pasteCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.V,keyModifiers:bs.Control}},cut:{execute:this.cutCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.X,keyModifiers:bs.Control}},delete:{execute:this.removeCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Delete}},selectAll:{execute:this.selectAll.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.A,keyModifiers:bs.Control}},undo:{execute:this.undo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Z,keyModifiers:bs.Control}},redo:{execute:this.redo.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Y,keyModifiers:bs.Control}},nudgeUp:{execute:this.nudgeCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Up},parameter:"up"},nudgeRight:{execute:this.nudgeCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Right},parameter:"right"},nudgeDown:{execute:this.nudgeCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Down},parameter:"down"},nudgeLeft:{execute:this.nudgeCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Left},parameter:"left"},startEdit:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.F2}},endEdit:{execute:this.endEditCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Escape}},focusToNextItem:{execute:this.navigateItems.bind(this,!0),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Tab}},focusToPreviousItem:{execute:this.navigateItems.bind(this,!1),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Tab,keyModifiers:bs.Shift}},selectFocusedItem:{execute:this.startEditCommad.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Enter}},bold:{execute:this.fontStyleCommand.bind(this,"bold"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.B,keyModifiers:bs.Control}},italic:{execute:this.fontStyleCommand.bind(this,"italic"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.I,keyModifiers:bs.Control}},underline:{execute:this.fontStyleCommand.bind(this,"underline"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.U,keyModifiers:bs.Control}},duplicate:{execute:this.duplicateCommand.bind(this),canExecute:this.canExecute.bind(this),gesture:{key:Cs.D,keyModifiers:bs.Control}},group:{execute:this.groupCommand.bind(this,"group"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.G,keyModifiers:bs.Control}},ungroup:{execute:this.groupCommand.bind(this,"ungroup"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.U,keyModifiers:bs.Control|bs.Shift}},rotateClockwise:{execute:this.rotateCommand.bind(this,"clockwise"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.R,keyModifiers:bs.Control}},rotateAntiClockwise:{execute:this.rotateCommand.bind(this,"antiClockwise"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.L,keyModifiers:bs.Control}},flipHorizontal:{execute:this.flipCommand.bind(this,"horizontal"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.H,keyModifiers:bs.Control}},flipVertical:{execute:this.flipCommand.bind(this,"vertical"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.J,keyModifiers:bs.Control}},pointerTool:{execute:this.toolCommand.bind(this,"pointer"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Number1,keyModifiers:bs.Control}},textTool:{execute:this.toolCommand.bind(this,"text"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Number2,keyModifiers:bs.Control}},connectTool:{execute:this.toolCommand.bind(this,"connect"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Number3,keyModifiers:bs.Control}},freeForm:{execute:this.toolCommand.bind(this,"freeForm"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Number5,keyModifiers:bs.Control}},lineTool:{execute:this.toolCommand.bind(this,"line"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Number6,keyModifiers:bs.Control}},rectangleTool:{execute:this.toolCommand.bind(this,"rectangle"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Number8,keyModifiers:bs.Control}},ellipseTool:{execute:this.toolCommand.bind(this,"ellipse"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Number9,keyModifiers:bs.Control}},zoomIn:{execute:this.zoomCommand.bind(this,"zoomIn"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Plus,keyModifiers:bs.Control}},zoomOut:{execute:this.zoomCommand.bind(this,"zoomOut"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Minus,keyModifiers:bs.Control}},shiftUp:{execute:this.shiftCommand.bind(this,"Up"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Up,keyModifiers:bs.Shift}},shiftDown:{execute:this.shiftCommand.bind(this,"Down"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Down,keyModifiers:bs.Shift}},shiftLeft:{execute:this.shiftCommand.bind(this,"Left"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Left,keyModifiers:bs.Shift}},shiftRight:{execute:this.shiftCommand.bind(this,"Right"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.Right,keyModifiers:bs.Shift}},alignTextCenter:{execute:this.alignCommand.bind(this,"center"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.C,keyModifiers:bs.Control|bs.Shift}},alignTextLeft:{execute:this.alignCommand.bind(this,"right"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.L,keyModifiers:bs.Control|bs.Shift}},alignTextRight:{execute:this.alignCommand.bind(this,"left"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.R,keyModifiers:bs.Control|bs.Shift}},alignTextTop:{execute:this.alignCommand.bind(this,"top"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.E,keyModifiers:bs.Control|bs.Shift}},alignTextCenterVertical:{execute:this.alignCommand.bind(this,"centerVertical"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.M,keyModifiers:bs.Control|bs.Shift}},alignTextBottom:{execute:this.alignCommand.bind(this,"bottom"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.V,keyModifiers:bs.Control|bs.Shift}},alignJustify:{execute:this.alignCommand.bind(this,"justify"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.J,keyModifiers:bs.Control|bs.Shift}},sendToBack:{execute:this.orderCommand.bind(this,"sendToBack"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.B,keyModifiers:bs.Control|bs.Shift}},bringToFront:{execute:this.orderCommand.bind(this,"bringToFront"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.F,keyModifiers:bs.Control|bs.Shift}},sendBackward:{execute:this.orderCommand.bind(this,"sendBackward"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.BracketLeft,keyModifiers:bs.Control}},bringForward:{execute:this.orderCommand.bind(this,"bringForward"),canExecute:this.canExecute.bind(this),gesture:{key:Cs.BracketRight,keyModifiers:bs.Control}}};this.initCommandManager(t,e)},e.prototype.overrideCommands=function(t,e){for(var i,n=0,s=Object.keys(e);n<s.length;n++){var r=s[n];if(i=e[""+r],t.gesture.key===i.gesture.key&&t.gesture.keyModifiers===i.gesture.keyModifiers){delete e[""+r];break}}},e.prototype.initCommandManager=function(t,e){var i=0;if(t)for(i=0;i<t.length;i++)e[t[parseInt(i.toString(),10)].name]&&t[parseInt(i.toString(),10)]?(t[parseInt(i.toString(),10)].canExecute&&(e[t[parseInt(i.toString(),10)].name].canExecute=t[parseInt(i.toString(),10)].canExecute),t[parseInt(i.toString(),10)].execute&&(e[t[parseInt(i.toString(),10)].name].execute=t[parseInt(i.toString(),10)].execute),(t[parseInt(i.toString(),10)].gesture.key||t[parseInt(i.toString(),10)].gesture.keyModifiers)&&(e[t[parseInt(i.toString(),10)].name].gesture=t[parseInt(i.toString(),10)].gesture),""!==t[parseInt(i.toString(),10)].parameter&&(e[t[parseInt(i.toString(),10)].name].parameter=t[parseInt(i.toString(),10)].parameter)):(this.overrideCommands(t[parseInt(i.toString(),10)],e),e[t[parseInt(i.toString(),10)].name]={execute:t[parseInt(i.toString(),10)].execute,canExecute:t[parseInt(i.toString(),10)].canExecute,gesture:t[parseInt(i.toString(),10)].gesture,parameter:t[parseInt(i.toString(),10)].parameter});this.commands=e},e.prototype.updateNodeEdges=function(t){for(var e=0,i=t.inEdges;e<i.length;e++){var n=i[e];this.nameTable[""+n]&&(this.nameTable[""+n].targetID="")}for(var s=0,r=t.outEdges;s<r.length;s++){n=r[s];this.nameTable[""+n]&&(this.nameTable[""+n].sourceID="")}t.inEdges=[],t.outEdges=[]},e.prototype.updateIconVisibility=function(t,e){for(var i=t.id+"_icon",n=0,s=t.wrapper.children;n<s.length;n++){var r=s[n];r.id&&r.id.startsWith(i)&&(r.visible=e,this.updateDiagramContainerVisibility(r,e))}},e.prototype.updateEdges=function(t){if(void 0!==t.sourceID&&""!==t.sourceID){var e=this.nameTable[t.sourceID];e&&e.outEdges&&0===e.outEdges.length&&(e.outEdges=[]),e&&e.outEdges&&-1===e.outEdges.indexOf(t.id)&&e.outEdges.push(t.id),this.updatePortEdges(e,t,!1)}if(void 0!==t.targetID&&""!==t.targetID){var i=this.nameTable[t.targetID];if(i&&i.inEdges&&0===i.inEdges.length&&(i.inEdges=[]),i&&i.inEdges&&-1===i.inEdges.indexOf(t.id)&&i.inEdges.push(t.id),this.updatePortEdges(i,t,!0),i&&i.visible&&i.outEdges){var n=0!==i.outEdges.length;this.updateIconVisibility(i,n)}}},e.prototype.updatePortEdges=function(t,e,i){if(t)for(var n=0;n<t.ports.length;n++){var s=t.ports[parseInt(n.toString(),10)],r=i?e.targetPortID:e.sourcePortID;if(s.id===r){var o=i?s.inEdges:s.outEdges;-1===o.indexOf(e.id)&&o.push(e.id)}}},e.prototype.refreshDiagram=function(){this.initLayerObjects(),this.doLayout(),this.updateBridging(),this.scroller.setSize(),this.addBlazorDiagramObjects(),this.updateFitToPage()},e.prototype.updateCanupdateStyle=function(t,e){for(var i=0;i<t.length;i++)t[parseInt(i.toString(),10)].children&&this.updateCanupdateStyle(t[parseInt(i.toString(),10)].children,e),t[parseInt(i.toString(),10)].canApplyStyle=e},e.prototype.getZindexPosition=function(t,e){var i,n,s=[],r=void 0;if(s=(s=s.concat(this.nodes)).concat(this.connectors),n=t.children?this.commandHandler.findMaxZIndex(t):t.zIndex,t.zIndex!==Number.MIN_VALUE)for(var o=0;o<s.length;o++)if(s[parseInt(o.toString(),10)].zIndex>n){"HTML"!==t.shape.type&&"Native"!==t.shape.type||(i="HTML"===t.shape.type?"html":"native"),r=_y(e,s[parseInt(o.toString(),10)].id,i);break}return r},e.prototype.updateDiagramObject=function(t,e,i){for(var n,s="domTable",r=0,o=this.views;r<o.length;r++){var a=o[r];if(n=this.views[""+a],this.diagramActions&&"SVG"===n.mode){var l=void 0;if(this.layers.length>1&&(l=this.commandHandler.getObjectLayer(t.id)),void 0===l||l&&l.visible||i){var h=ev(this.element.id);window[""+s][n.element.id+"_diagramLayer"]||(window[""+s][n.element.id+"_diagramLayer"]=document.getElementById(n.element.id+"_diagramLayer"));var c=window[""+s][n.element.id+"_diagramLayer"];this.diagramActions&Is.Interactions&&this.updateCanupdateStyle(t.wrapper.children,!0);var d=this.getMidPoint(t);this.diagramRenderer.updateNode(t.wrapper,c,h,void 0,e?void 0:this.getZindexPosition(t,n.element.id),d,this.portCenterPoint),this.updateCanupdateStyle(t.wrapper.children,!0)}}}},e.prototype.applyMarginBezier=function(t,e){e.cx=e.cx+t.margin.left,e.cx=e.cx-t.margin.right,e.cy=e.cy+t.margin.top,e.cy=e.cy-t.margin.bottom},e.prototype.getMidPoint=function(t){var e;if(t instanceof Rg&&"Bezier"===t.type){e=[];for(var i=this.getBezierPoints(t),n=fn.getLengthFromListOfPoints(i),s=0;s<t.annotations.length;s++)for(var r=t.annotations[parseInt(s.toString(),10)].offset*n,o=this.commandHandler.getPointAtLength(r,i,0),a={cx:o.x,cy:o.y},l=0;l<t.wrapper.children.length;l++)t.wrapper&&t.wrapper.children[parseInt(l.toString(),10)]instanceof Zs&&t.wrapper.children[parseInt(l.toString(),10)].id===t.id+"_"+t.annotations[parseInt(s.toString(),10)].id&&(this.applyMarginBezier(t.wrapper.children[parseInt(l.toString(),10)],a),e[t.id+"_"+t.annotations[parseInt(s.toString(),10)].id]=this.applyAlignment(t.wrapper.children[parseInt(l.toString(),10)],a,t.annotations[parseInt(s.toString(),10)].displacement));for(s=0;s<t.ports.length;s++){var h=t.ports[parseInt(s.toString(),10)].offset*n,c=this.commandHandler.getPointAtLength(h,i,0),d={cx:c.x,cy:c.y};for(l=0;l<t.wrapper.children.length;l++)t.wrapper&&t.wrapper.children[parseInt(l.toString(),10)]instanceof Xs&&t.wrapper.children[parseInt(l.toString(),10)].isPathPort&&t.wrapper.children[parseInt(l.toString(),10)].id===t.id+"_"+t.ports[parseInt(s.toString(),10)].id&&(this.applyMarginBezier(t.wrapper.children[parseInt(l.toString(),10)],d),this.portCenterPoint[t.id+"_"+t.ports[parseInt(s.toString(),10)].id]=this.applyAlignment(t.wrapper.children[parseInt(l.toString(),10)],d,t.ports[parseInt(s.toString(),10)].displacement))}}return e},e.prototype.applyAlignment=function(t,e,i){switch(t.horizontalAlignment){case"Auto":case"Left":e.cx=t.inversedAlignment?e.cx:e.cx-t.desiredSize.width,e.cx+=i.x;break;case"Stretch":case"Center":e.cx-=t.desiredSize.width*t.pivot.x;break;case"Right":e.cx=t.inversedAlignment?e.cx-t.desiredSize.width:e.cx,e.cx-=i.x}switch(t.verticalAlignment){case"Auto":case"Top":e.cy=t.inversedAlignment?e.cy:e.cy-t.desiredSize.height,e.cy+=i.y;break;case"Stretch":case"Center":e.cy-=t.desiredSize.height*t.pivot.y;break;case"Bottom":e.cy=t.inversedAlignment?e.cy-t.desiredSize.height:e.cy,e.cy-=i.y}return e},e.prototype.getBezierPoints=function(t){var e,i=[],n={x:t.sourcePoint.x,y:t.sourcePoint.y};for(i.push(n),e=0;e<t.segments.length;e++){var s=t.segments[parseInt(e.toString(),10)].getPoints(t.segments[parseInt(e.toString(),10)],n);i.push.apply(i,s),n=i[i.length-1]}return i},e.prototype.updateGridContainer=function(t){for(var e,i=ev(this.element.id),n=0,s=this.views;n<s.length;n++){var r=s[n];if("SVG"===(e=this.views[""+r]).mode&&this.diagramActions){var o=document.getElementById(e.element.id+"_diagramLayer");this.diagramRenderer.updateNode(t,o,i,void 0)}else this.refreshCanvasDiagramLayer(e)}},e.prototype.getObjectsOfLayer=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var s=n[i];this.nameTable[""+s]&&e.push(this.nameTable[""+s])}return e},e.prototype.refreshDiagramLayer=function(){for(var t,e=0,i=this.views;e<i.length;e++){var n=i[e];switch((t=this.views[""+n]).mode){case"SVG":this.refreshSvgDiagramLayer(t);break;case"Canvas":this.refreshCanvasLayers(t)}}},e.prototype.refreshCanvasLayers=function(t){if(t)this.refreshCanvasDiagramLayer(t);else for(var e=0,i=this.views;e<i.length;e++){var n=i[e],s=this.views[""+n];this.refreshCanvasDiagramLayer(s)}},e.prototype.renderBasicElement=function(t){for(var e=ev(t.element.id),i=0;i<this.basicElements.length;i++){var n=this.basicElements[parseInt(i.toString(),10)];n instanceof _s&&(n.prevRotateAngle=0),n.measure(new un(n.width,n.height)),n.arrange(n.desiredSize),t.diagramRenderer.renderElement(n,t.diagramLayer,e)}},e.prototype.refreshElements=function(t){var i=!1;if(!this.isDestroyed){if(this.clearCanvas(t),t instanceof e)t.diagramLayer.getContext("2d").setTransform(t.scroller.currentZoom,0,0,t.scroller.currentZoom,0,0),t.diagramLayer.getContext("2d").scale(1.5,1.5);else i=!0,(r=document.getElementById(t.element.id+"_nativeLayer")).children.length>0&&t.updateView(t);var n=ev(t.element.id);this.renderDiagramElements(t.diagramLayer,t.diagramRenderer,n,void 0,void 0,i);for(var s=0;s<this.basicElements.length;s++){var r;(r=this.basicElements[parseInt(s.toString(),10)]).measure(new un(r.width,r.height)),r.arrange(r.desiredSize),t.diagramRenderer.renderElement(r,t.diagramLayer,n)}t instanceof e&&(t.diagramLayer.style.transform="scale("+2/3+")",t.diagramLayer.style.transformOrigin="0 0"),this.renderTimer=null}},e.prototype.refreshCanvasDiagramLayer=function(t){var e=this;"SVG"===t.mode||this.isDestroyed||(this.basicElements.length>0&&this.renderBasicElement(t),this.preventOverviewRefresh||(!this.diagramActions||0===(this.diagramActions&Is.Render)||Is.ToolAction&this.diagramActions||wp(this)||1!==this.scroller.currentZoom?this.refreshElements(t):this.renderTimer||(this.renderTimer=setTimeout(function(){e.refreshElements(t)},40))))},e.prototype.updatePortVisibility=function(t,e,i){var n,s=!this.drawingObject||!this.drawingObject.shape;if((t instanceof Ny||t instanceof Rg)&&s&&dp(t)){for(var r=t.ports,o=!1,a=0;a<r.length;a++)n=this.getWrapper(t.wrapper,r[parseInt(a.toString(),10)].id),(e&rs.Hover||e&rs.Connect)&&Gm(r[parseInt(a.toString(),10)],e)&&(n.visible=!i,o=!0);o&&this.updateDiagramObject(t),"Canvas"===this.mode&&this.refreshCanvasLayers()}},e.prototype.refreshSvgDiagramLayer=function(t){var e,i=document.getElementById(t.element.id+"_diagramLayer"),n=ev(t.element.id);if(wp(this))this.scroller.virtualizeElements();else{for(var s=0;s<this.basicElements.length;s++)(e=this.basicElements[parseInt(s.toString(),10)]).measure(new un(e.width,e.height)),e.arrange(e.desiredSize,!(this.diagramActions&Is.Render)),this.diagramRenderer.renderElement(e,i,n);this.renderDiagramElements(i,this.diagramRenderer,n)}},e.prototype.removeVirtualObjects=function(t){if(this.deleteVirtualObject){this.preventOverviewRefresh=!0;for(var e=0;e<this.scroller.removeCollection.length;e++){var i=this.nameTable[this.scroller.removeCollection[parseInt(e.toString(),10)]];void 0!==i&&this.removeElements(i)}this.deleteVirtualObject=!1,this.preventOverviewRefresh=!1}clearInterval(t)},e.prototype.updateTextElementValue=function(t){for(var e=0;e<t.wrapper.children.length;e++){var i=t.wrapper.children[parseInt(e.toString(),10)];if(i instanceof Zs){i.canMeasure=!0;var n=this.scroller.viewPortHeight,s=this.scroller.viewPortWidth,r=!1;t.offsetX<s&&t.offsetY<n&&(r=!0),r&&wp(this)&&void 0===i.actualSize.height&&void 0===i.actualSize.width&&(t.wrapper.measure(new un(t.width,t.height),t.id,this.onLoadImageSize.bind(this)),t.wrapper.arrange(t.wrapper.desiredSize)),i.measure(new un(t.width,t.height)),i.arrange(i.desiredSize)}}},e.prototype.updateVirtualObjects=function(t,e,i){var n=document.getElementById(this.element.id+"_diagramLayer"),s=ev(this.element.id);if("SVG"===this.mode){for(var r=0;r<t.length;r++){var o=this.scroller.removeCollection.indexOf(t[parseInt(r.toString(),10)]);o>=0&&this.scroller.removeCollection.splice(o,1);var a=this.nameTable[t[parseInt(r.toString(),10)]];this.updateTextElementValue(a),this.diagramRenderer.renderElement(a.wrapper,n,s,void 0,void 0,void 0,void 0,a.zIndex)}for(var l=0;l<i.length;l++)this.scroller.removeCollection.push(i[parseInt(l.toString(),10)]);1!==this.scroller.currentZoom&&this.eventHandler.updateVirtualization()}else this.diagramActions&&this.refreshDiagramLayer()},e.prototype.renderDiagramElements=function(t,e,i,n,s,r){void 0===n&&(n=!0);var o=this.scroller.getPageBounds();o.x*=this.scroller.currentZoom,o.y*=this.scroller.currentZoom,o.width*=this.scroller.currentZoom,o.height*=this.scroller.currentZoom;for(var a,l=-this.scroller.horizontalOffset-o.x,h=-this.scroller.verticalOffset-o.y,c=0,d=Object.keys(this.layerZIndexTable);c<d.length;c++){var p=d[c],u=this.commandHandler.getLayer(this.layerZIndexTable[""+p]),g=void 0,m=void 0;"Canvas"===this.mode&&wp(this)&&!this.diagramActions&&this.scroller.virtualizeElements();var f="Canvas"===this.mode&&wp(this)&&this.scroller.oldCollectionObjects.length>0?this.scroller.oldCollectionObjects:void 0,y=Object.keys(f||u.zIndexTable);y.sort(function(t,e){return parseInt(""+t,10)-parseInt(""+e,10)});for(var v=0,b=y;v<b.length;v++){var C=b[v],I=f?this.nameTable[f[""+C]]:this.nameTable[u.zIndexTable[""+C]];if(I&&!I.parentId&&u.visible&&(!I.processId||this.refreshing)){var M=void 0;if(M=this.scroller.currentZoom<1&&"SVG"===this.mode?{tx:-o.x/this.scroller.currentZoom,ty:-o.y/this.scroller.currentZoom,scale:this.scroller.transform.scale}:{tx:this.scroller.transform.tx,ty:this.scroller.transform.ty,scale:this.scroller.transform.scale},r&&(M={tx:-o.x/this.scroller.currentZoom,ty:-o.y/this.scroller.currentZoom,scale:this.scroller.transform.scale}),wp(this)){if(this.scroller.currentZoom<1){if(o.x<0||this.scroller.horizontalOffset<0){var S=this.scroller.verticalOffset<0?this.scroller.verticalOffset:0;g=(l>0?l:0)+"px",m=(this.realActions&Ss.vScrollbarMoved?0:-S)+"px"}else g="0px",m="0px";this.realActions&Ss.hScrollbarMoved&&(this.realActions=this.realActions&~Ss.hScrollbarMoved),this.realActions&Ss.vScrollbarMoved&&(this.realActions=this.realActions&~Ss.vScrollbarMoved)}else g=(o.x<0?l:-this.scroller.horizontalOffset)+"px",m=(o.y<0?h:-this.scroller.verticalOffset)+"px";this.diagramLayer.style.left=g,this.diagramLayer.style.top=m,M.tx=-o.x/M.scale,M.ty=-o.y/M.scale}var x=!0;if(s&&(x=!1),this.updateTextElementValue(I),this.refreshing&&I.shape.activity&&I.shape.activity.subProcess&&I.shape.activity.subProcess.processes){for(var w=0;w<I.shape.activity.subProcess.processes.length;w++){var D=I.shape.activity.subProcess.processes[parseInt(w.toString(),10)];I.wrapper.children.push(this.nameTable[""+D].wrapper)}I.wrapper.measure(new un(I.wrapper.bounds.width,I.wrapper.bounds.height)),I.wrapper.arrange(I.wrapper.desiredSize)}I instanceof Rg&&"Bezier"===I.type?(a=this.getMidPoint(I),"Canvas"===this.mode&&n&&(a.cx+=M.tx,a.cy+=M.ty)):a=null,e.renderElement(I.wrapper,t,i,!e.isSvgMode&&n?M:void 0,void 0,void 0,x&&(!this.diagramActions||r),void 0,void 0,a,this.portCenterPoint)}}}},e.prototype.updateBridging=function(t){if(this.bridgingModule)for(var e=0;e<this.connectors.length;e++){var i=this.connectors[parseInt(e.toString(),10)];this.bridgingModule.updateBridging(i,this);var n=this.connectors[parseInt(e.toString(),10)].wrapper;if(n&&n.children&&n.children.length>0){var s=n.children[0],r=s.data;(i.isBezierEditing&&this.selectedItems.connectors[0].id===i.id||"Bezier"!==i.type)&&i.getSegmentElement(i,s,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0,void 0,!1),s.data!==r&&(n.measure(new un),n.arrange(n.desiredSize),"SVG"!==this.mode||t||this.updateDiagramObject(i))}}else this.constraints&ms.Bridging&&console.warn('[WARNING] :: Module "ConnectorBridging" is not available in Diagram component! You either misspelled the module name or forgot to load it.')},e.prototype.setCursor=function(t){this.diagramRenderer.setCursor(this.diagramCanvas,t)},e.prototype.clearCanvas=function(t){var e=t.contentWidth||t.diagramLayer.width/this.scroller.currentZoom,i=t.contentHeight||t.diagramLayer.height/this.scroller.currentZoom;"SVG"!==t.mode&&vv.getContext(t.diagramLayer).clearRect(0,0,e,i)},e.prototype.updateScrollOffset=function(){this.scroller.setScrollOffset(this.diagramCanvas.scrollLeft,this.diagramCanvas.scrollTop),Yg(this),wp(this)&&this.scroller.virtualizeElements()},e.prototype.setOffset=function(t,e){var i=this.element.id+"content",n=window.domTable;if(!n[""+i]){var s=document.getElementById(i);s&&(n[""+i]=s)}var r=n[""+i];r&&(r.scrollLeft!==t&&(r.scrollLeft=t),r.scrollTop!==e&&(r.scrollTop=e))},e.prototype.setSize=function(t,e){if(this.diagramLayer&&!this.preventDiagramUpdate){var i=Qg(this);t-=i.width,e-=i.height;var n=this.spatialSearch.getPageBounds();n.x*=this.scroller.currentZoom,n.y*=this.scroller.currentZoom,n.width*=this.scroller.currentZoom,n.height*=this.scroller.currentZoom;var s="SVG"===this.mode?1:1.5,r="SVG"===this.mode?Wy(this.element.id):this.diagramLayer,o="Canvas"===this.mode&&this.constraints&ms.Virtualization?this.scroller.viewPortWidth:t,a="Canvas"===this.mode&&this.constraints&ms.Virtualization?this.scroller.viewPortHeight:e;r.setAttribute("width",(s*o).toString()),r.setAttribute("height",(s*a).toString());var l=document.getElementById(this.element.id+"_diagramUserHandleLayer");l&&(l.style.width=t+"px",l.style.height=e+"px");var h={width:t.toString(),height:e.toString()};this.diagramLayerDiv.style.width=t+"px",this.diagramLayerDiv.style.height=e+"px",hv(Gy(this.element.id),h),hv(Yy(this.element.id).getElementsByClassName("e-ports-expand-layer")[0],h);var c=Qy(this.element.id);hv(c,h),c.parentNode.style.width=t+"px",c.parentNode.style.height=e+"px";var d=Ky(this.element.id);hv(d,h),this.diagramRenderer.updateGrid(this.snapSettings,d,this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),hv(Jy(this.element.id),h),this.htmlLayer.style.width=t+"px",this.htmlLayer.style.height=e+"px","SVG"===this.mode||wp(this)||this.refreshDiagramLayer(),"SVG"===this.mode&&wp(this)&&this.scroller.virtualizeElements()}},e.prototype.transformLayers=function(){var t=this.spatialSearch.getPageBounds();t.x*=this.scroller.currentZoom,t.y*=this.scroller.currentZoom,t.width*=this.scroller.currentZoom,t.height*=this.scroller.currentZoom,this.diagramRenderer.updateGrid(this.snapSettings,Ky(this.element.id),this.scroller.transform,this.rulerSettings,this.hRuler,this.vRuler),this.diagramRenderer.transformLayers(this.scroller.transform,"SVG"===this.mode),this.diagramActions&Is.DragUsingMouse||this.updateSelector(),this.renderPageBreaks(t)},e.prototype.removePageBreaks=function(){if(this.diagramLayer){var t=$y(this.element.id);if(t&&t.childNodes)for(var e=t.childNodes.length,i=0;i<e;i++)t.removeChild(t.childNodes[0])}},e.prototype.renderPageBreaks=function(t){this.removePageBreaks();var e=$y(this.element.id);if(e){var i=0;t=this.scroller.getPageBounds(!0);var n=(this.scroller.transform.tx+t.x)*this.scroller.currentZoom,s=(this.scroller.transform.ty+t.y)*this.scroller.currentZoom,r=t.height*this.scroller.currentZoom,o=t.width*this.scroller.currentZoom;am.renderSvgBackGroundImage(this.pageSettings.background,this.element,n,s,o,r);var a={id:e.id+"rect",x:n,y:s,height:r,width:o,angle:0,stroke:"",strokeWidth:1,fill:this.pageSettings.background.color,opacity:1,pivotX:0,pivotY:0,visible:!0,dashArray:"0"};if(this.diagramRenderer.drawRect(e,a),this.pageSettings.showPageBreaks){var l=this.scroller.getPageBreak(t);for(i=0;i<l.length;i++)this.diagramRenderer.drawLine(e,{class:"e-diagram-page-break",fill:"none",stroke:"#aaaaaa",strokeWidth:1,dashArray:"10 10",opacity:2,x:0,y:0,width:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,startPoint:{x:(l[parseInt(i.toString(),10)].x1+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[parseInt(i.toString(),10)].y1+this.scroller.transform.ty)*this.scroller.currentZoom},endPoint:{x:(l[parseInt(i.toString(),10)].x2+this.scroller.transform.tx)*this.scroller.currentZoom,y:(l[parseInt(i.toString(),10)].y2+this.scroller.transform.ty)*this.scroller.currentZoom},id:l[parseInt(i.toString(),10)].y1===l[parseInt(i.toString(),10)].y2?"HorizontalLines":"VerticalLines"})}}},e.prototype.validatePageSize=function(){var t=0;"Portrait"===this.pageSettings.orientation?this.pageSettings.width>this.pageSettings.height&&(t=this.pageSettings.height,this.pageSettings.height=this.pageSettings.width,this.pageSettings.width=t):this.pageSettings.height>this.pageSettings.width&&(t=this.pageSettings.width,this.pageSettings.width=this.pageSettings.height,this.pageSettings.height=t)},e.prototype.setOverview=function(t,e){if(t)t&&(this.views.push(t.id),this.views[t.id]=t,t.renderDocument(t),t.diagramRenderer.setLayers(),t.initializeOverviewLayers(),t.updateView(t),this.renderNodes(t));else{for(var i=0;i<this.views.length;i++)this.views[parseInt(i.toString(),10)]===e&&(t=this.views[""+e]);this.views[""+e]=void 0;var n=this.views.indexOf(e);this.views.splice(n,1)}},e.prototype.renderNodes=function(t){if(t){var e=new am(t.id,new om,!1),i=document.getElementById(t.element.id+"_diagramLayer"),n=ev(t.element.id);this.renderDiagramElements(i,t.diagramRenderer||e,n,void 0,void 0,!0)}},e.prototype.updateThumbConstraints=function(t,e,i){for(var n=t.length,s=0;s<n;s++){var r=t[parseInt(s.toString(),10)],o=!1,a=e.thumbsConstraints,l=!1;if(this.nameTable[r.parentId])l=this.nameTable[r.parentId].isLane;r instanceof Ny?(o="Bpmn"===r.shape.type&&"Activity"===r.shape.shape&&!1===r.shape.activity.subProcess.collapsed||"SwimLane"===r.shape.type||l,yp(r)&&a&gs.Rotate&&!o||(a&=~gs.Rotate),Sp(r,"SouthEast")&&a&gs.ResizeSouthEast||(a&=~gs.ResizeSouthEast),Sp(r,"NorthWest")&&a&gs.ResizeNorthWest||(a&=~gs.ResizeNorthWest),Sp(r,"East")&&a&gs.ResizeEast||(a&=~gs.ResizeEast),Sp(r,"West")&&a&gs.ResizeWest||(a&=~gs.ResizeWest),Sp(r,"North")&&a&gs.ResizeNorth||(a&=~gs.ResizeNorth),Sp(r,"South")&&a&gs.ResizeSouth||(a&=~gs.ResizeSouth),Sp(r,"NorthEast")&&a&gs.ResizeNorthEast||(a&=~gs.ResizeNorthEast),Sp(r,"SouthWest")&&a&gs.ResizeSouthWest||(a&=~gs.ResizeSouthWest)):r instanceof Rg?(i||(a|=gs.Default),gp(r)?a|=gs.ConnectorSource:a&=~gs.ConnectorSource,mp(r)?a|=gs.ConnectorTarget:a&=~gs.ConnectorTarget):(i||(a|=gs.Default),Sp(r)||(a&=~(gs.ResizeSouthEast|gs.ResizeSouthWest|gs.ResizeSouth|gs.ResizeEast|gs.ResizeWest|gs.ResizeNorth|gs.ResizeNorthEast|gs.ResizeNorthWest)),yp(r)||(a&=~gs.Rotate)),e.thumbsConstraints=a}},e.prototype.renderSelector=function(t,e,i){var n=this.isProtectedOnChange,s=new un,r=this.selectedItems,o=(r.constraints,this.diagramRenderer.rendererActions);document.getElementsByClassName("blazor-inner-template");if(this.diagramRenderer.rendererActions=this.currentSymbol?this.addConstraints(o,Ms.DrawSelectorBorder):this.removeConstraints(o,Ms.DrawSelectorBorder),this.clearSelectorLayer(),this.commandHandler.hasSelection()){if(1===r.nodes.length&&0===r.connectors.length&&(r.rotateAngle=r.nodes[0].rotateAngle,r.pivot=r.nodes[0].pivot),r.wrapper.measure(s),r.wrapper.arrange(r.wrapper.desiredSize),r.width=r.wrapper.actualSize.width,r.height=r.wrapper.actualSize.height,r.offsetX=r.wrapper.offsetX,r.offsetY=r.wrapper.offsetY,0!==r.rotateAngle){for(var a=0,l=r.nodes;a<l.length;a++){var h=l[a];h.offsetX=h.wrapper.offsetX,h.offsetY=h.wrapper.offsetY}for(var c=0,d=r.connectors;c<d.length;c++)d[c]}this.spatialSearch.getPageBounds();var p=Zy(this.element.id),u=Xy(this.element.id);if(r.thumbsConstraints=gs.Default,r.annotation?this.updateThumbConstraints([r.annotation],r):(this.updateThumbConstraints(r.nodes,r),this.updateThumbConstraints(r.connectors,r,!0)),r.annotation)this.renderSelectorForAnnotation(r,p);else if(r.nodes.length+r.connectors.length===1||this.nameTable.helper){if(r.nodes[0]instanceof Ny){var g=r.nodes[0];zu(this,g)&&(e||"UmlClassifier"===g.shape.type||g.parentId&&this.nameTable[g.parentId]&&"UmlClassifier"===this.nameTable[g.parentId].shape.type||(r.thumbsConstraints&=~gs.Rotate));var m=!!e||!!(g.constraints&ps.HideThumbs),f=!!("SwimLane"===g.shape.type||g.isLane||g.isPhase||e);this.diagramRenderer.renderResizeHandle(e?i:r.wrapper.children[0],p,r.thumbsConstraints,this.scroller.currentZoom,r.constraints,this.scroller.transform,void 0,dp(g),m,f,r.handleSize)}else if(r.connectors[0]instanceof Rg&&Bp(this.diagramRenderer.rendererActions)){var y=r.connectors[0];this.diagramRenderer.renderEndPointHandle(y,p,r.thumbsConstraints,r.constraints,this.scroller.transform,void 0!==y.sourceWrapper,void 0!==y.targetWrapper,!(!this.connectorEditingToolModule||!fp(y)),!!this.connectorEditingToolModule,r.handleSize)}}else this.diagramRenderer.renderResizeHandle(r.wrapper,p,r.thumbsConstraints,this.scroller.currentZoom,r.constraints,this.scroller.transform,void 0,dp(r),null,null,r.handleSize);r.annotation||this.currentSymbol||this.diagramRenderer.renderUserHandler(r,p,this.scroller.transform,u,this.eventHandler.currentAction,this.eventHandler.inAction)}this.selectedItems.selectedObjects.length>1&&this.updateSelectionRectangle(),this.isProtectedOnChange=n},e.prototype.updateSelectionRectangle=function(){for(var t=Zy(this.element.id),e=!1,i=0;i<this.selectedItems.selectedObjects.length;i++)e=0===i,df(this.selectedItems.selectedObjects[parseInt(i.toString(),10)])===Rg?this.diagramRenderer.renderSelectionLine(this.selectedItems.selectedObjects[parseInt(i.toString(),10)].wrapper.children[0],t,this.scroller.transform,e):this.diagramRenderer.renderSelectionRectangle(this.selectedItems.selectedObjects[parseInt(i.toString(),10)].wrapper,t,this.scroller.transform,e)},e.prototype.updateSelector=function(){var t=this.allowServerDataBinding;this.enableServerDataBinding(!1);var e=new un,i=this.selectedItems,n=i.constraints;document.getElementsByClassName("blazor-inner-template");if(this.diagramActions&Is.ToolAction||1!==this.selectedItems.nodes.length||(this.selectedItems.rotateAngle=this.selectedItems.nodes[0].rotateAngle,this.selectedItems.wrapper.rotateAngle=this.selectedItems.nodes[0].rotateAngle),void 0!==this.selectedItems&&(this.clearSelectorLayer(),null!==i.wrapper&&i.wrapper.children&&i.wrapper.children.length)){var s=!0,r=!0;if(i.wrapper.rotateAngle=i.rotateAngle,Df(this,i)){var o=this.eventHandler.action,a=o.includes("Rotate"),l=o.includes("None")||o.includes("Select")||o.includes("Drag");(a||l)&&(r=!1),l||(s=!1)}if(s&&(i.wrapper.measure(e),i.wrapper.arrange(i.wrapper.desiredSize)),0!==i.rotateAngle||i.rotateAngle!==i.wrapper.prevRotateAngle)for(var h=0,c=i.nodes;h<c.length;h++){var d=c[h];d.offsetX=d.wrapper.offsetX,d.offsetY=d.wrapper.offsetY}i.width=i.wrapper.actualSize.width,i.height=i.wrapper.actualSize.height,i.offsetX=i.wrapper.offsetX,i.offsetY=i.wrapper.offsetY;var p=Zy(this.element.id),u=Xy(this.element.id),g=this.eventHandler.canHideResizers();if(i.thumbsConstraints=gs.Default,i.annotation?this.updateThumbConstraints([i.annotation],i):(this.updateThumbConstraints(i.nodes,i),this.updateThumbConstraints(i.connectors,i,!0)),this.selectedItems.constraints&as.UserHandle&&!i.annotation&&!this.currentSymbol&&this.diagramRenderer.renderUserHandler(i,p,this.scroller.transform,u,this.eventHandler.currentAction,this.eventHandler.inAction),i.annotation)this.renderSelectorForAnnotation(i,p);else if(i.nodes.length+i.connectors.length===1){if(i.connectors[0]instanceof Rg&&Bp(this.diagramRenderer.rendererActions)){var m=i.connectors[0];this.diagramRenderer.renderEndPointHandle(m,p,i.thumbsConstraints,n,this.scroller.transform,void 0!==m.sourceWrapper,void 0!==m.targetWrapper,!(!this.connectorEditingToolModule||!fp(m)),!!this.connectorEditingToolModule,i.handleSize)}else if(i.nodes[0]instanceof Ny){var f=i.nodes[0];zu(this,i.nodes[0])&&("UmlClassifier"===f.shape.type||f.parentId&&this.nameTable[f.parentId]&&"UmlClassifier"===this.nameTable[f.parentId].shape.type||(i.thumbsConstraints&=~gs.Rotate));var y=!("SwimLane"!==f.shape.type&&!f.isLane&&!f.isPhase);this.diagramRenderer.renderResizeHandle(i.wrapper.children[0],p,i.thumbsConstraints,this.scroller.currentZoom,i.constraints,this.scroller.transform,g,dp(i.nodes[0]),!!(i.nodes[0].constraints&ps.HideThumbs),y,i.handleSize)}}else this.diagramActions&Is.Interactions&&(this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions|Ms.PreventRenderSelector),Df(this,i)&&r||this.diagramRenderer.renderResizeHandle(i.wrapper,p,i.thumbsConstraints,this.scroller.currentZoom,i.constraints,this.scroller.transform,g,dp(i),null,null,i.handleSize),this.diagramRenderer.rendererActions=this.diagramRenderer.rendererActions&~Ms.PreventRenderSelector}this.selectedItems.selectedObjects.length>1&&this.updateSelectionRectangle(),this.enableServerDataBinding(t)},e.prototype.renderSelectorForAnnotation=function(t,e){this.diagramRenderer.renderResizeHandle(t.wrapper.children[0],e,t.thumbsConstraints,this.scroller.currentZoom,t.constraints,this.scroller.transform,void 0,dp(t.annotation),void 0,void 0,t.handleSize)},e.prototype.drawSelectionRectangle=function(t,e,i,n){this.clearSelectorLayer(),this.diagramRenderer.drawSelectionRectangle(t,e,i,n,this.adornerLayer,this.scroller.transform)},e.prototype.renderHighlighter=function(t){var e=Qy(this.element.id);this.diagramRenderer.renderHighlighter(t,e,this.scroller.transform)},e.prototype.clearHighlighter=function(){var t=Qy(this.element.id),e=t.getElementById(t.id+"_highlighter");e&&e.parentNode.removeChild(e)},e.prototype.getNodesConnectors=function(t){for(var e=0;e<this.nodes.length;e++){var i=this.nodes[parseInt(e.toString(),10)];t.push(i)}for(e=0;e<this.connectors.length;e++){var n=this.connectors[parseInt(e.toString(),10)];t.push(n)}return t},e.prototype.clearSelectorLayer=function(){var t,e=Qy(this.element.id);document.getElementsByClassName("blazor-inner-template");if(this.currentSymbol){var i=e.getElementById("borderRect_symbol");i&&i.parentNode.removeChild(i)}else{var n=e.getElementById(this.adornerLayer.id+"_selected_region");n&&n.parentNode.removeChild(n),this.clearHighlighter();var s=Zy(this.element.id).childNodes,r=void 0,o=this.eventHandler.touchArgs?this.eventHandler.touchArgs.target.id:void 0;o&&o.includes("bezierLine")&&(o=void 0);for(var a=s.length;a>0;a--)this.eventHandler&&this.eventHandler.touchArgs&&"touchmove"===this.eventHandler.touchArgs.type?(this.diagramRenderer.touchMove=!0,o&&o===s[a-1].id||(r=s[a-1]).parentNode.removeChild(r)):(r=s[a-1]).parentNode.removeChild(r);if(!x()){var l=Xy(this.element.id).childNodes;for(t=l.length;t>0;t--)l[t-1].parentNode.removeChild(l[t-1])}}},e.prototype.getWrapper=function(t,e){var i;e=t.id+"_"+e;for(var n=t instanceof $s?t:this.getPortContainer(this.nameTable[t.id]),s=0;s<n.children.length;s++)e===n.children[parseInt(s.toString(),10)].id&&(i=n.children[parseInt(s.toString(),10)]);return i},e.prototype.getEndNodeWrapper=function(t,e,i){if("Bpmn"===t.shape.type&&t.wrapper.children[0]instanceof $s){if(!x()&&"Activity"===t.shape.shape){if(i&&"Transaction"===t.shape.activity.subProcess.type&&e.sourcePortID){var n=e.sourcePortID,s=t.wrapper.children[0].children[0].children[2];if(s.children)for(var r=0,o=s.children;r<o.length;r++){var a=o[r];if(a.visible&&a.id===t.id+"_"+n)return a.children[0]}}return t.wrapper.children[0].children[0].children[0]}return"Group"===t.shape.shape?t.wrapper.children[0]:t.wrapper.children[0].children[0]}var l=t.wrapper.children[0];return!l||this.containsMargin(l)||t.children&&0!==t.children.length?t.wrapper:l},e.prototype.containsMargin=function(t){return t.margin&&(0!==t.margin.left||0!==t.margin.top||0!==t.margin.right||0!==t.margin.bottom)},e.prototype.focusOutEdit=function(){this.endEdit(),"Canvas"===this.mode&&1!==this.scroller.currentZoom&&this.refreshDiagramLayer()},e.prototype.endEditCommand=function(){this.endEdit(),this.textEditing=!1,"Canvas"===this.mode&&1!==this.scroller.currentZoom&&this.refreshDiagramLayer()},e.prototype.fontStyleCommand=function(t){for(var e=0;e<this.selectedItems.nodes.length;e++){var i=this.selectedItems.nodes[parseInt(e.toString(),10)];if("SwimLane"===i.shape.type&&i.shape.hasHeader&&this.applyStyleText(t,i.shape.header.annotation),i.isLane){var n=this.getObject(i.shape.header[0].id);this.applyStyle(t,n.annotations)}if("Text"===i.shape.type){var s=i;this.applyStyleText(t,s)}if(i.annotations.length>0){var r=i.annotations;this.applyStyle(t,r)}}for(e=0;e<this.selectedItems.connectors.length;e++)if(this.selectedItems.connectors[parseInt(e.toString(),10)].annotations.length>0){r=this.selectedItems.connectors[parseInt(e.toString(),10)].annotations;this.applyStyle(t,r)}},e.prototype.applyStyle=function(t,e){for(var i=0;i<e.length;i++)switch(t){case"bold":e[parseInt(i.toString(),10)].style.bold=!e[parseInt(i.toString(),10)].style.bold;break;case"italic":e[parseInt(i.toString(),10)].style.italic=!e[parseInt(i.toString(),10)].style.italic;break;case"underline":"None"===e[parseInt(i.toString(),10)].style.textDecoration?e[parseInt(i.toString(),10)].style.textDecoration="Underline":"Underline"===e[parseInt(i.toString(),10)].style.textDecoration&&(e[parseInt(i.toString(),10)].style.textDecoration="None")}this.dataBind()},e.prototype.applyStyleText=function(t,e){switch(t){case"bold":e.style.bold=!e.style.bold;break;case"italic":e.style.italic=!e.style.italic;break;case"underline":"None"===e.style.textDecoration?e.style.textDecoration="Underline":"Underline"===e.style.textDecoration&&(e.style.textDecoration="None")}this.dataBind()},e.prototype.duplicateCommand=function(){var t=[];t=t.concat(this.selectedItems.nodes,this.selectedItems.connectors),this.copy(),this.paste()},e.prototype.groupCommand=function(t){switch(t){case"group":this.group();break;case"ungroup":this.unGroup()}},e.prototype.rotateCommand=function(t){var e=this.selectedItems;switch(t){case"clockwise":this.rotate(e,90);break;case"antiClockwise":this.rotate(e,-90)}},e.prototype.flipCommand=function(t){var e=[];e=e.concat(this.selectedItems.nodes,this.selectedItems.connectors);for(var i=0;i<e.length;i++)switch(t){case"horizontal":e[parseInt(i.toString(),10)].flip=ss.Horizontal;break;case"vertical":e[parseInt(i.toString(),10)].flip=ss.Vertical}this.dataBind()},e.prototype.toolCommand=function(t){switch(t){case"pointer":this.tool=fs.Default,this.dataBind();break;case"text":this.drawingObject={shape:{type:"Text"}},this.tool=fs.DrawOnce,this.dataBind();break;case"connect":this.drawingObject={id:"connector1",type:"Straight"},this.tool=fs.DrawOnce,this.dataBind();break;case"freeForm":this.drawingObject={id:"connector1",type:"Freehand"},this.tool=fs.DrawOnce,this.dataBind();break;case"line":this.drawingObject={id:"connector1",type:"Polyline"},this.tool=fs.DrawOnce,this.dataBind();break;case"rectangle":var e={shape:{type:"Basic",shape:"Rectangle"}};this.drawingObject=e,this.tool=fs.DrawOnce,this.dataBind();break;case"ellipse":var i={shape:{type:"Basic",shape:"Ellipse"}};this.drawingObject=i,this.tool=fs.DrawOnce,this.dataBind()}},e.prototype.zoomCommand=function(t){switch(t){case"zoomIn":this.zoomTo({type:"ZoomIn",zoomFactor:.2});break;case"zoomOut":this.zoomTo({type:"ZoomOut",zoomFactor:.2})}},e.prototype.shiftCommand=function(t){if(this.selectedItems instanceof By&&this.selectedItems.wrapper&&this.constraints&ms.RestrictNegativeAxisDragDrop){var e=this.selectedItems.wrapper.bounds;if(e){if("Left"===t&&e.x-5<0)return;if("Top"===t&&e.y-5<0)return}}var i=0,n=0;"Left"===t||"Right"===t?i="Left"===t?-5:5:n="Up"===t?-5:5;var s=this.selectedItems,r=this.selectedItems.wrapper.children[0];r instanceof Zs?this.commandHandler.labelDrag(s.nodes[0],r,i,n):this.drag(s,i,n);for(var o=0;o<this.selectedItems.connectors.length;o++){var a=this.selectedItems;"Up"===t?this.drag(a,0,-5):"Down"===t?this.drag(a,0,5):"Left"===t?this.drag(a,-5,0):"Right"===t&&this.drag(a,5,0)}},e.prototype.alignCommand=function(t){if(this.selectedItems.nodes.length>0)for(var e=0;e<this.selectedItems.nodes.length;e++)this.updateNodesAndConnectorAnnotation(this.selectedItems.nodes[parseInt(e.toString(),10)],t)},e.prototype.updateNodesAndConnectorAnnotation=function(t,e){for(var i,n=0;n<t.annotations.length;n++){switch(i=t.annotations[parseInt(n.toString(),10)],e){case"left":i.horizontalAlignment="Left";break;case"center":i.horizontalAlignment="Center";break;case"right":i.horizontalAlignment="Right";break;case"justify":i.style.textAlign="Justify";break;case"top":i.verticalAlignment="Top";break;case"centerVertical":i.verticalAlignment="Center";break;case"bottom":i.verticalAlignment="Bottom"}this.dataBind()}},e.prototype.orderCommand=function(t){switch(t){case"sendToBack":this.sendToBack();break;case"bringToFront":this.bringToFront();break;case"sendBackward":this.sendBackward();break;case"bringForward":this.moveForward()}},e.prototype.navigateItems=function(t){var e=0,i=this.activeLayer.objectZIndex,n=[],s=[];n=n.concat(this.selectedItems.nodes,this.selectedItems.connectors),s=s.concat(this.nodes,this.connectors),(e=n.length>0?n[0].zIndex+(t?1:-1):t?0:i)<0?e=i:e>i&&(e=0);var r=!1;do{for(var o=0;o<s.length;o++){var a=s[parseInt(o.toString(),10)];if(e===a.zIndex){this.clearSelection(),this.select([a]),r=!0;break}}r||(t?e++:e--)}while(!r)},e.prototype.endEdit=function(){return Qb(this,void 0,void 0,function(){var t,e,i,n,s,r,o,a,l,h,c,d,p,u,g,m,f,y,v,b,C,I;return Zb(this,function(M){if(this.diagramActions&Is.TextEdit&&(t=void 0,e=void 0,i={},this.enableServerDataBinding(!1),n=document.getElementById(this.element.id+"_editBox"),!x())){if(s=n.value,K.remove(n,"input",this.eventHandler.inputChange),K.remove(n,"focusout",this.focusOutEdit),r=document.getElementById(this.element.id+"_editTextBoxDiv"),o=void 0,o=this.nameTable[this.activeLabel.parentId],a=Km(o,this.activeLabel.id),l={oldValue:this.activeLabel.text,newValue:s,cancel:!1,element:o,annotation:a},r.parentNode.removeChild(r),h=void 0,!a||a instanceof ay?t={shape:{content:o.shape.content}}:(p=tf(o,a.id,!0),i[""+p]={content:a.content},t={annotations:i}),c=!1,"Draw"===this.eventHandler.currentAction&&(c=this.eventHandler.isAddTextNode(o,!0)),c||r.textContent===s&&s===this.activeLabel.text||this.triggerEvent(Ds.textEdit,l),h||(h=this.getWrapper(o.wrapper,this.activeLabel.id)),d=!1,a.content===s||l.cancel||(d=!0,this.activeLabel.isGroup||this.startGroupAction(),o.parentId&&"UmlClassifier"===this.nameTable[o.parentId].shape.type&&-1===s.indexOf("+")&&-1===s.indexOf("-")&&-1===s.indexOf("#")&&-1===s.indexOf("~")&&-1===o.id.indexOf("_umlClass_header")&&(s=" + "+s),(o.isLane||o.isPhase)&&this.protectPropertyChange(!0),a instanceof ay?e={shape:{content:s}}:(p=tf(o,a.id,!0),(u={})[""+p]={content:s},e={annotations:u}),(g=this.getIndex(o,o.id))&&((m={})[""+g]=t,(f={})[""+g]=e,df(o)===Ny?this.onPropertyChanged({nodes:f},{nodes:m}):this.onPropertyChanged({connectors:f},{connectors:m})),this.protectPropertyChange(!0),a.content=s,this.protectPropertyChange(!1),this.updateSelector(),(o.isLane||o.isPhase)&&this.protectPropertyChange(!1)),c&&(this.removeObjectsFromLayer(o),this.removeFromAQuad(o),delete this.nameTable[this.activeLabel.parentId],""!==s&&(this.clearSelection(),y=Fn(o),o=this.add(y),this.updateDiagramObject(o),this.commandHandler.oldSelectedObjects=mf(this),this.commandHandler.select(this.nameTable[o.id]))),this.selectedItems.nodes.length){if(v=this.nameTable[this.activeLabel.parentId],(b=this.nameTable[v.parentId])&&"SwimLane"===b.shape.type||"SwimLane"===v.shape.type)if("SwimLane"===v.shape.type&&(b=this.nameTable[this.activeLabel.parentId],v=o),v.isLane||v.isPhase)for(C=v.isLane?b.shape.lanes:b.shape.phases,I=0;I<C.length;I++)C[parseInt(I.toString(),10)].id===(v.LaneHeaderParent||v.PhaseHeaderParent)&&(C[parseInt(I.toString(),10)].header.annotation.content=v.annotations[0].content);else v.isHeader&&b.shape.hasHeader&&(b.shape.header.annotation.content=v.annotations[0].content);this.dataBind()}h.visible=!0,this.updateDiagramObject(o),this.diagramActions=this.diagramActions&~Is.TextEdit,(this.activeLabel.isGroup||d)&&this.endGroupAction(),this.activeLabel={id:"",parentId:"",isGroup:!1,text:void 0},this.commandHandler.getBlazorOldValues(),this.enableServerDataBinding(!0)}return[2]})})},e.prototype.getIndex=function(t,e){for(var i=df(t)===Ny?this.nodes:this.connectors,n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)].id.toString()===e.toString())return n.toString();return null},e.prototype.canLogChange=function(){return!(!(this.diagramActions&Is.Render)||this.diagramActions&Is.ToolAction||this.diagramActions&Is.UndoRedo||this.diagramActions&Is.PublicMethod)},e.prototype.modelChanged=function(t,e){return!!(t.connectors||e.connectors||t.nodes||e.connectors||t.pageSettings||e.pageSettings||t.bridgeDirection||e.bridgeDirection)},e.prototype.resetDiagramActions=function(t){var e=!!t;this.diagramActions&Is.UndoRedo&&(!e||t===Is.UndoRedo)&&(this.diagramActions=this.diagramActions&~Is.UndoRedo),this.diagramActions&Is.PublicMethod&&(!e||t===Is.PublicMethod)&&(this.diagramActions=this.diagramActions&~Is.PublicMethod)},e.prototype.removeNode=function(t,e){this.removeObjectsFromLayer(t),this.removeFromAQuad(this.nameTable[t.id]);var i=document.getElementById(t.id+"_groupElement");if(delete this.nameTable[t.id],t.children&&delete this.groupTable[t.id],this.nodes.splice(this.nodes.indexOf(t),1),i&&i.children&&i.children.length>0)for(var n=void 0,s=i.children.length-1;s>=0;s--){var r=i.children[parseInt(s.toString(),10)];e.length>0&&-1!==e.indexOf(r.id.split("_groupElement")[0])&&(n?i.parentNode.insertBefore(r,n):i.parentNode.insertBefore(r,i),n=r)}i&&i.parentNode.removeChild(i)},e.prototype.deleteGroup=function(t){var e=[];t.children&&(e=this.commandHandler.getChildren(t,[])),this.UpdateBlazorDiagramModelCollection(t);for(var i=0,n=e;i<n.length;i++){var s=n[i];s&&this.nameTable[s.id]&&this.remove(s)}},e.prototype.updateObject=function(t,e,i){if(!(this.diagramActions&Is.ToolAction)){var n=t.wrapper.children[0].bounds;if(!this.commandHandler.checkBoundaryConstraints(void 0,void 0,n,!0))if(t instanceof Ny){for(var s=e,r=0,o=Object.keys(i);r<o.length;r++){switch(h=o[r]){case"width":t.width=s.width;break;case"height":t.height=s.height;break;case"offsetX":t.offsetX=s.offsetX;break;case"offsetY":t.offsetY=s.offsetY;break;case"rotateAngle":t.rotateAngle=s.rotateAngle}}this.nodePropertyChange(t,i,e)}else{for(var a=0,l=Object.keys(i);a<l.length;a++){var h=l[a],c=e,d=t.sourcePoint,p=t.targetPoint;switch(h){case"sourcePoint":d.x=c.sourcePoint.x||d.x,d.y=c.sourcePoint.y||d.y;break;case"targetPoint":p.x=c.targetPoint.x||p.x,p.y=c.targetPoint.y||p.y}}this.connectorPropertyChange(t,i,e)}}},e.prototype.nodePropertyChangeExtend=function(t,e,i,n){return void 0!==i.style&&"Bpmn"!==t.shape.type&&(Hm(i.style,t.wrapper.children[0]),n=!0),void 0!==i.shadow&&(this.updateShadow(t.shadow,i.shadow),n=!0),void 0!==i.constraints&&(e.constraints&ps.Select&&!(i.constraints&ps.Select)&&Zu(this,t)?this.clearSelection():(this.updateThumbConstraints(this.selectedItems.nodes,this.selectedItems),this.updateSelector(),n=!0)),this.updateTextAnnotationInSwimlane(t,i),this.swimLaneNodePropertyChange(t,e,i,n),n},e.prototype.updateTextAnnotationInSwimlane=function(t,e){if(t.hasTextAnnotation&&this.isPositionUndo)for(var i=0;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[parseInt(i.toString(),10)]];if(n.isBpmnAnnotationConnector){var s=this.nameTable[n.targetID];if(this.isProtectedOnChange=!0,t.laneMargin&&s){var r=t.margin.left-t.laneMargin.left,o=t.margin.top-t.laneMargin.top;s.margin.left+=r,s.margin.top+=o,s.offsetX+=r,s.offsetY+=o,s.wrapper.offsetX+=r,s.wrapper.offsetY+=o,s.wrapper.measure(new un(s.wrapper.width,s.wrapper.height)),s.wrapper.arrange(s.wrapper.desiredSize),this.updateDiagramObject(s)}this.isProtectedOnChange=!1}}},e.prototype.swimLaneNodePropertyChange=function(t,e,i,n){if(("SwimLane"===t.shape.type||"Container"===t.shape.type)&&!this.currentSymbol){if(e.shape){var s,r=i.shape,o=t.shape,a="Horizontal"===o.orientation,l=o.padding,h=e.shape,c=t.wrapper.children[0],d=void 0,p=void 0,u=void 0;if(h.lanes||h.phases){if(h.lanes)for(var g=0,m=Object.keys(r.lanes);g<m.length;g++){var f=m[g],y=Number(f),v=h.lanes[parseInt(y.toString(),10)],b=void 0,C=r.lanes[parseInt(y.toString(),10)];if(C&&C.header&&(u=o.lanes[parseInt(y.toString(),10)].header.id,d=v.header,(p=C.header).annotation&&p.annotation.content&&(this.nameTable[""+u].annotations[0].content=p.annotation.content),p.annotation&&p.annotation.style&&(this.nameTable[""+u].annotations[0].style=p.annotation.style),p.annotation&&p.annotation.offset&&(this.nameTable[""+u].annotations[0].offset=p.annotation.offset),this.nodePropertyChange(this.nameTable[""+u],d,p)),v.children){for(var I=0,M=Object.keys(v.children);I<M.length;I++){var S=M[I];u=o.lanes[parseInt(y.toString(),10)].children[Number(S)].id;var x=this.nameTable[""+u];d=v.children[Number(S)],p=C.children[Number(S)],this.nodePropertyChange(x,d,p);var w=this.nameTable[x.parentId];this.diagramActions&Is.UndoRedo||(this.startGroupAction(),Vu(w,t,x,this))}this.updateSelector()}v.width&&!a&&(b=o.phases&&o.phaseSize?y+1:y,c.updateColumnWidth(b,C.width,!0,l),this.updateDiagramElementQuad()),v.height&&a&&(b=o.header&&o.hasHeader?y+1:y,b+=o.phases&&o.phaseSize?1:0,c.updateRowHeight(b,C.height,!0,l),this.updateDiagramElementQuad())}if(r.phases)for(var D=0,E=Object.keys(r.phases);D<E.length;D++){var T=E[D],A=(y=Number(T),r.phases[parseInt(y.toString(),10)]),N=void 0,L=o.header&&o.hasHeader?1:0;if(A&&A.header&&(u=o.phases[parseInt(y.toString(),10)].header.id,d=h.phases[parseInt(y.toString(),10)].header,(p=A.header).annotation&&p.annotation.content&&(this.nameTable[""+u].annotations[0].content=p.annotation.content),p.annotation&&p.annotation.style&&(this.nameTable[""+u].annotations[0].style=p.annotation.style),p.annotation&&p.annotation.offset&&(this.nameTable[""+u].annotations[0].offset=p.annotation.offset),this.nodePropertyChange(this.nameTable[""+u],d,p)),A.offset){if(0===y)N=A.offset;else{var O=o.phases[y-1];(N=A.offset-O.offset)<=0&&(N=A.offset)}a?(c.updateColumnWidth(y,N,!0,l),du(t,this,c.rows[parseInt(L.toString(),10)].cells[parseInt(y.toString(),10)],y)):c.updateRowHeight(L+y,N,!0,l)}}}if(void 0!==r.phaseSize&&o.phases.length)if(0===r.phaseSize||0===h.phaseSize)if(h.phaseSize)a?(c.removeRow(o.header&&o.hasHeader?1:0),t.height=t.wrapper.height=c.height):(o.header&&o.hasHeader&&(c.rows[0].cells[1].children=c.rows[0].cells[0].children,c.rows[0].cells[1].columnSpan=c.rows[0].cells[0].columnSpan-1,c.rows[0].cells[0].children=[]),c.removeColumn(0));else{if(a){var k=new Up;k.height=r.phaseSize,c.addRow(o.header&&o.hasHeader?1:0,k,!0),t.height=t.wrapper.height+=r.phaseSize}else{var z=new Fp;z.width=r.phaseSize,c.addColumn(0,z,!0),o.header&&o.hasHeader&&(c.rows[0].cells[0].children=c.rows[0].cells[1].children,c.rows[0].cells[1].children=[],c.rows[0].cells[1].columnSpan=1,c.rows[0].cells[1].minWidth=void 0,c.rows[0].cells[0].columnSpan=o.lanes.length+1)}for(var P=0;P<o.phases.length;P++)""===o.phases[parseInt(P.toString(),10)].id&&(o.phases[parseInt(P.toString(),10)].id=Hn()),qp(c,this,t,o.header&&o.hasHeader?1:0,a,P)}else a?c.updateRowHeight(o.header&&o.hasHeader?1:0,r.phaseSize,!1):c.updateColumnWidth(0,r.phaseSize,!1);if(o.header&&o.hasHeader&&h.header)"SwimLane"===t.shape.type?s=c.rows[0].cells[0].children[0].id:"Container"===t.shape.type&&(s=c.children[1].id),p=r.header,d=h.header,p.annotation&&p.annotation.offset&&(this.nameTable[""+s].annotations[0].offset=p.annotation.offset),this.nodePropertyChange(this.nameTable[""+s],d,p);t.height=t.wrapper.height=c.height,t.width=t.wrapper.width=c.width}else if(e.constraints){var j=e.constraints&ps.Select,B=i.constraints&ps.Select;if(j!==B){r=t.shape;var H=this.nameTable[t.id+r.header.id];H.constraints=B?H.constraints|ps.Select:H.constraints&~ps.Select;var R=void 0;if(r.phaseSize>0)for(var V=0;V<r.phases.length;V++)(R=this.nameTable[t.id+r.phases[parseInt(V.toString(),10)].id+"_header"]).constraints=B?R.constraints|ps.Select:R.constraints&~ps.Select;var U=void 0,F=void 0,W=r.phases.length||1;for(V=0;V<r.lanes.length;V++)for(var Y=0;Y<W;Y++)(U=this.nameTable[t.id+r.lanes[parseInt(V.toString(),10)].id+Y]).constraints=B?U.constraints|ps.Select:U.constraints&~ps.Select,0===Y&&((F=this.nameTable[t.id+r.lanes[parseInt(V.toString(),10)].id+"_"+Y+"_header"]).constraints=B?F.constraints|ps.Select:F.constraints&~ps.Select)}}n=!0}return n},e.prototype.insertValue=function(t,e){if(!(this.blazorActions&ns.GroupClipboardInProcess)){for(var i=void 0,n=e?this.oldNodeObjects:this.oldConnectorObjects,s=0;s<n.length;s++)n[parseInt(s.toString(),10)].id===t.id&&(i=!0);i||(e?this.oldNodeObjects.push(t):this.oldConnectorObjects.push(t))}},e.prototype.nodePropertyChange=function(t,e,i,n,s,r){var o=this;if(this.canEnableBlazorObject&&"helper"!==t.id){var a=Fn(t);this.insertValue(a,!0)}var l,h=t.wrapper.outerBounds,c=t.wrapper.bounds,d=!1,p=0,u=0,g=0,m=0,f=!1,y=!1,v=!1;if(void 0!==i.width&&(t.children?t.container?t.wrapper.width=i.width:this.scaleObject(t,i.width,!0):(t.wrapper.children[0].width=i.width,l=!0,d=!0,"SwimLane"===t.shape.type&&(t.wrapper.width=i.width)),f=!0),void 0!==i.height){if(t.children)t.container?t.wrapper.height=i.height:this.scaleObject(t,i.height,!1);else if(t.wrapper.children[0].height=i.height,l=!0,d=!0,"SwimLane"===t.shape.type&&(t.wrapper.height=i.height,"SwimLane"===t.shape.type&&this.isUndo)){var b=t.shape;if(b.header&&b.hasHeader){var C=t.wrapper.children[0],I=b.padding,M=e.height-i.height,S=C.rowDefinitions(),w=S.length-1,D=S[parseInt(w.toString(),10)].height-M;C.updateRowHeight(w,D,!0,I,!0)}}f=!0}if(l=this.nodePropertyChangeExtend(t,e,i,l),void 0!==i.constraints&&vp(e)!==vp(i)&&(t.wrapper.children[0].shadow=vp(t)?t.shadow:null),void 0!==i.offsetX){if(p=e.offsetX,u=i.offsetX,t.wrapper.flip!==ss.None)if(t.offsetX!==t.wrapper.offsetX&&void 0!==e.offsetX){var E=i.offsetX-e.offsetX;t.wrapper.offsetX=t.wrapper.offsetX+E,this.updateFlipOffset(t.wrapper,E,0,t.wrapper.flip)}else t.wrapper.offsetX=i.offsetX;else t.wrapper.offsetX=i.offsetX;l=!0,d=!0,y=!0}if(void 0!==i.offsetY){if(g=e.offsetY,m=i.offsetY,t.wrapper.flip!==ss.None)if(t.offsetY!==t.wrapper.offsetY&&void 0!==e.offsetY){var T=i.offsetY-e.offsetY;t.wrapper.offsetY=t.wrapper.offsetY+T,this.updateFlipOffset(t.wrapper,0,T,t.wrapper.flip)}else t.wrapper.offsetY=i.offsetY;else t.wrapper.offsetY=i.offsetY;l=!0,d=!0,y=!0}if(void 0!==i.padding&&(t.wrapper.padding.left=void 0!==i.padding.left?i.padding.left:t.wrapper.padding.left,t.wrapper.padding.right=void 0!==i.padding.right?i.padding.right:t.wrapper.padding.right,t.wrapper.padding.top=void 0!==i.padding.top?i.padding.top:t.wrapper.padding.top,t.wrapper.padding.bottom=void 0!==i.padding.bottom?i.padding.bottom:t.wrapper.padding.bottom,l=!0),void 0!==i.pivot&&(t.wrapper.pivot=i.pivot,l=!0),void 0!==i.minWidth&&(t.wrapper.minWidth=t.wrapper.children[0].minWidth=i.minWidth,l=!0,d=!0,f=!0),void 0!==i.minHeight&&(t.wrapper.minHeight=t.wrapper.children[0].minHeight=i.minHeight,l=!0,d=!0,f=!0),void 0!==i.maxWidth&&(t.wrapper.maxWidth=i.maxWidth,l=!0,d=!0,f=!0),void 0!==i.maxHeight&&(t.wrapper.maxHeight=i.maxHeight,l=!0,d=!0,f=!0),"Container"!==t.shape.type&&("Bpmn"!==t.shape.type||"Activity"!==t.shape.shape||"SubProcess"!==t.shape.activity.activity)){if(void 0!==i.flip){var A=(i.flip&ss.Horizontal^t.wrapper.flip&ss.Horizontal)===ss.Horizontal,N=(i.flip&ss.Vertical^t.wrapper.flip&ss.Vertical)===ss.Vertical;if(A&&(t.wrapper.flip^=ss.Horizontal),N&&(t.wrapper.flip^=ss.Vertical),l=!0,d=!0,t.children){var L=t.children.filter(function(t){return o.nameTable[""+t]&&o.nameTable[""+t]instanceof Rg});L&&L.length>0?this.groupBounds=t.wrapper.bounds:this.groupBounds=null}else this.groupBounds=null;gf(t.wrapper,t.offsetX,t.offsetY,this,void 0,A,N),this.updateWrapperChildFlip(t)}if(void 0!==i.flipMode){var O;O=t.wrapper.flipMode=i.flipMode,l=!0,d=!0,this.updateWrapperChildFlip(t,O)}}if(void 0!==i.rotateAngle&&t.constraints&ps.Rotate&&(t.children&&s&&this.commandHandler.rotateObjects(t,[t],t.rotateAngle-t.wrapper.rotateAngle,{x:t.offsetX,y:t.offsetY},!1),t.wrapper.rotateAngle=i.rotateAngle,l=!0,d=!0,v=!0,t.processId||t.parentId&&"Container"===this.nameTable[t.parentId].shape.type)){var k=Fn(t),z=void 0;z=t.processId?this.nameTable[t.processId]:this.nameTable[t.parentId],k.margin.top=t.offsetY-t.actualSize.height/2-(z.offsetY-z.actualSize.height/2),k.margin.left=t.offsetX-t.actualSize.width/2-(z.offsetX-z.actualSize.width/2),k.margin.left===t.margin.left&&k.margin.top===t.margin.top||this.updateMargin(t,k)}if(void 0!==i.backgroundColor&&(t.wrapper.style.fill=i.backgroundColor),void 0!==i.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==i.shape&&"Bpmn"!==t.shape.type&&(l=!0,Um(i,t,e,this),d=!0),i.margin&&(l=!0,this.updateMargin(t,i),t.parentId&&"Container"===this.nameTable[t.parentId].shape.type&&function(t,e){for(var i=e.nameTable[t.parentId].wrapper.children[0].children,n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)].id===t.wrapper.id&&(i[parseInt(n.toString(),10)].offsetX===t.wrapper.offsetX||i[parseInt(n.toString(),10)].offsetY===t.wrapper.offsetY)){i[parseInt(n.toString(),10)]=t.wrapper;break}}(t,this),d=!0,y=!0),(void 0!==i.shape&&void 0===i.shape.type||void 0!==i.width||void 0!==i.maxWidth||void 0!==i.minWidth||void 0!==i.maxHeight||void 0!==i.minHeight||void 0!==i.height||void 0!==i.style)&&"Bpmn"===t.shape.type&&this.bpmnModule&&(l=!0,d=!0,this.bpmnModule.updateBPMN(i,e,t,this)),void 0===i.width&&void 0===i.height||"Container"!==t.shape.type||(l=!0,function(t,e,i,n,s){if(n.children[0].width=t.width,n.children[0].height=t.height,i.shape.header&&i.shape.hasHeader){var r=s.nameTable[i.id+i.shape.header.id];r.wrapper.children[0].width=t.width,r.wrapper.measure(new un(r.wrapper.bounds.width,r.wrapper.bounds.height)),r.wrapper.arrange(r.wrapper.desiredSize)}}(i,0,t,t.wrapper.children[0],this)),void 0!==i.style&&"Container"===t.shape.type&&(l=!0,Hm(i.style,t.wrapper.children[0].children[0])),"UmlActivity"!==t.shape.type||x()||"FinalNode"!==t.shape.shape||(l=!0,d=!0,this.updateUMLActivity(i,e,t,this)),(t.shape&&"UmlClassifier"===t.shape.type||t.parentId&&this.nameTable[t.parentId]&&"UmlClassifier"===this.nameTable[t.parentId].shape.type)&&(l=!0,d=!0),void 0!==i.ports)for(var P=0,j=Object.keys(i.ports);P<j.length;P++){var B=j[P],H=Number(B);l=!0;var R=i.ports[""+B],V=t.ports[parseInt(H.toString(),10)];this.updatePort(R,V,t.wrapper),t.flip!==ss.None&&("Port"!==t.flipMode&&"PortAndLabel"!==t.flipMode&&"PortAndLabelText"!==t.flipMode&&"All"!==t.flipMode||this.updatePorts(t,t.flip)),d=!0}if(void 0!==i.annotation||void 0!==i.annotations||void 0!==i.width)for(var U=0,F=Object.keys(i.annotations||t.annotations);U<F.length;U++){B=F[U],H=Number(B);l=!0;R=void 0;R=i.annotation?i.annotation:i.annotations?i.annotations[""+B]:t.annotations;var W=t.annotations[parseInt(H.toString(),10)];if(W){var Y=!!t.width;this.updateAnnotation(R,W,t.wrapper,t,Y);var _=this.nameTable[t.parentId];if(_&&"SwimLane"===_.shape.type){if(t.isLane||t.isPhase){for(var Q=t.isLane?_.shape.lanes:_.shape.phases,Z=0;Z<Q.length;Z++)if(Q[parseInt(Z.toString(),10)].id===(t.LaneHeaderParent||t.PhaseHeaderParent)){Q[parseInt(Z.toString(),10)].header.annotation.content=t.annotations[0].content,Q[parseInt(Z.toString(),10)].header.annotation.style=t.annotations[0].style,Q[parseInt(Z.toString(),10)].header.annotation.offset.x=t.annotations[0].offset.x,Q[parseInt(Z.toString(),10)].header.annotation.offset.y=t.annotations[0].offset.y,Q[parseInt(Z.toString(),10)].header.annotation.width=t.annotations[0].width,Q[parseInt(Z.toString(),10)].header.annotation.height=t.annotations[0].height;break}}else t.isHeader&&(_.shape.header.annotation.offset.x=t.annotations[0].offset.x,_.shape.header.annotation.offset.y=t.annotations[0].offset.y,_.shape.header.annotation.rotateAngle=t.annotations[0].rotateAngle,_.shape.header.annotation.width=t.annotations[0].width,_.shape.header.annotation.height=t.annotations[0].height)}else if(_&&"Container"===_.shape.type){var q=_.shape.header;q.annotation.content=t.annotations[0].content,q.annotation.offset=t.annotations[0].offset,q.annotation.width=t.annotations[0].width,q.annotation.height=t.annotations[0].height,q.annotation.rotateAngle=t.annotations[0].rotateAngle}}}if(void 0===i.expandIcon&&void 0===i.collapseIcon&&void 0===i.isExpanded||(this.updateIcon(t),this.updateDefaultLayoutIcons(t),void 0!==i.isExpanded&&(this.canExpand=!0,this.diagramActions|=Is.PreventIconsUpdate,this.commandHandler.expandNode(t,this),this.diagramActions=this.diagramActions&~Is.PreventIconsUpdate),l=!0,this.canExpand=!1),void 0!==i.fixedUserHandles){H=void 0,R=void 0;for(var X=void 0,G=0,K=Object.keys(i.fixedUserHandles);G<K.length;G++){B=K[G];H=Number(B),l=!0,i.fixedUserHandles[parseInt(H.toString(),10)]&&(R=i.fixedUserHandles[parseInt(H.toString(),10)]),(X=t.fixedUserHandles[parseInt(H.toString(),10)])&&this.updateNodefixedUserHandle(R,X,t.wrapper,t)}}if(void 0!==i.tooltip&&this.updateTooltip(t,i),l){if(void 0!==this.bpmnModule&&(y&&!f&&!this.sizeUndo||f&&"Bpmn"===t.shape.type&&"TextAnnotation"!==t.shape.shape)&&!v&&this.updateBpmnAnnotationPosition(p,g,u,m,t,t.wrapper,t.shape,"TextAnnotation"===t.shape.shape,e,f,this.sizeUndo),this.checkSelectedItem(t)&&t.wrapper.children[0]instanceof Zs&&t.wrapper.children[0].refreshTextElement(),t.wrapper.measure(new un(t.wrapper.bounds.width,t.wrapper.bounds.height),t.id,this.onLoadImageSize.bind(this)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateObject(t,e,i),!("SwimLane"!==t.shape.type||this.currentSymbol||this.diagramActions&Is.ToolAction)){pu(this,t);C=t.wrapper.children[0];var J=t.shape,$=C.columnDefinitions().length;if("Horizontal"===J.orientation){H=J.header&&J.hasHeader?1:0;du(t,this,C.rows[parseInt(H.toString(),10)].cells[$-1],$-1)}t.wrapper.measure(new un(t.wrapper.bounds.width,t.wrapper.bounds.height)),t.wrapper.arrange(t.wrapper.desiredSize)}if(this.diagramActions&Is.ToolAction&&!(this.diagramActions&Is.UndoRedo)||this.checkSelectedItem(t)&&this.updateSelector(),!1===h.equals(h,t.wrapper.outerBounds)&&(this.updateQuad(t),t.parentId&&this.nameTable[t.parentId])){var tt=this.nameTable[t.parentId];this.updateQuad(tt)}if(n?t&&t.visible&&t.outEdges&&this.updateIconVisibility(t,0!==t.outEdges.length):this.commandHandler.connectorSegmentChange(t,c,void 0!==i.rotateAngle),void 0!==this.bpmnModule&&this.bpmnModule.updateDocks(t,this),t.shape instanceof Py&&Xf(t,this),(i.annotations||t.isHeader)&&(t.processId||t.parentId&&"Container"===this.nameTable[t.parentId].shape.type)||void 0!==i.flip||this.updateGroupOffset(t),t.parentId&&this.nameTable[t.parentId]){var et=this.nameTable[t.parentId];et.wrapper.measure(new un(et.wrapper.width,t.wrapper.height)),et.wrapper.arrange(et.wrapper.desiredSize),et.offsetX=et.wrapper.offsetX,et.offsetY=et.wrapper.offsetY}if(!1===c.equals(c,t.wrapper.bounds)&&("Drag"!==this.eventHandler.currentAction&&this.updateGroupSize(t),t.children&&this.updateGroupOffset(t)),"SwimLane"===t.shape.type&&!this.currentSymbol&&this.diagramActions&Is.Render)ru(Jp(this,t.wrapper.children[0]),this);if(!this.preventNodesUpdate){if((!wp(this)||wp(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)&&(this.diagramActions&Is.PreventZIndexOnDragging?this.updateDiagramObject(t,!0):this.updateDiagramObject(t),t.parentId)){var it=this.nameTable[t.parentId];"BPMN"!==it.shape.type&&(this.diagramActions&Is.PreventZIndexOnDragging?this.updateDiagramObject(it,!0):this.updateDiagramObject(it))}if(!n&&d&&(this.lineRoutingModule&&this.diagramActions&&this.constraints&ms.LineRouting&&"helper"!==t.id?this.diagramActions&Is.ToolAction||this.lineRoutingModule.renderVirtualRegion(this,!0):this.diagramActions&&this.constraints&ms.LineRouting&&"helper"!==t.id&&console.warn('[WARNING] :: Module "LineRouting" is not available in Diagram component! You either misspelled the module name or forgot to load it.'),this.updateConnectorEdges(t),"helper"!==t.id&&!(this.diagramActions&Is.ToolAction)))for(var nt=this.spatialSearch.findObjects(t.wrapper.outerBounds),st=0;st<nt.length;st++){var rt=nt[parseInt(st.toString(),10)];rt instanceof Rg&&this.connectorPropertyChange(nt[parseInt(st.toString(),10)],{},{sourceID:rt.sourceID,targetID:rt.targetID,sourcePortID:rt.sourcePortID,targetPortID:rt.targetPortID,sourcePoint:rt.sourcePoint,targetPoint:rt.targetPoint})}}"New"!==t.status&&this.diagramActions&&(t.status="Update")}if(!r){var ot={element:t,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:e,newValue:i};this.triggerEvent(Ds.propertyChange,ot)}},e.prototype.updateWrapperChildFlip=function(t,e){if(t&&t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[parseInt(i.toString(),10)],s=this.nameTable[""+n],r="";e?(r=e,s.wrapper.flipMode=r,s.flipMode=r):r=s.flipMode,"None"===r||"Label"===r||"LabelText"===r||"LabelAndLabelText"===r?this.updatePorts(s,ss.None):this.updatePorts(s,s.wrapper.flip),this.updateWrapperFlip(s.wrapper,s)}var o;"None"===(e=t.flipMode)||"Label"===e||"LabelText"===e||"LabelAndLabelText"===e?this.updatePorts(t,ss.None):this.updatePorts(t,t.wrapper.flip),(o=t.children?t.wrapper.children[t.wrapper.children.length-1]:t.wrapper).flip=t.wrapper.flip,o.flipMode=t.flipMode,this.updateWrapperFlip(o,t)},e.prototype.updateWrapperFlip=function(t,e){for(var i=0;i<t.children.length;i++){var n=t.children[parseInt(i.toString(),10)];n instanceof Zs?"None"!==e.flipMode&&"Port"!==e.flipMode?(n.flip=e.wrapper.flip,n.flipMode=e.flipMode):n.flip=ss.None:n instanceof $s&&this.applyWrapperCanvasFlip(n,e)}},e.prototype.getResizeHandle=function(t,e,i,n,s,r,o,a){var l=s-t,h=r-e,c=o-i,d=a-n;return 0===d&&(l>0&&c>0||l<0&&c<0)?"ResizeEast":0===d&&(l>0&&c<0||l<0&&c>0)?"ResizeWest":0===c&&(h>0&&d<0||h<0&&d>0)?"ResizeNorth":0===c&&(h>0&&d>0||h<0&&d<0)?"ResizeSouth":(l>0&&c>0||l<0&&c<0)&&(h>0&&d>0||h<0&&d<0)?"ResizeSouthEast":(l>0&&c<0||l<0&&c>0)&&(h>0&&d>0||h<0&&d<0)?"ResizeSouthWest":(l>0&&c>0||l<0&&c<0)&&(h>0&&d<0||h<0&&d>0)?"ResizeNorthEast":(l>0&&c<0||l<0&&c>0)&&(h>0&&d<0||h<0&&d>0)?"ResizeNorthWest":null},e.prototype.getTextAnnotationOffset=function(t,e,i,n,s){var r=t.width-i.width,o=t.height-i.height,a=this.getTextAnnotationQuadrant(t,e),l=this.getResizeHandle(i.offsetX,i.offsetY,i.width,i.height,t.offsetX,t.offsetY,t.width,t.height),h=0,c=0;return function(t){return"ResizeEast"===l||"ResizeNorthEast"===l||"ResizeSouthEast"===l?t.includes("East"):("ResizeWest"===l||"ResizeNorthWest"===l||"ResizeSouthWest"===l)&&t.includes("West")}(a)&&(h=l.includes("West")?-r:r),function(t){return"ResizeSouth"===l||"ResizeSouthWest"===l||"ResizeSouthEast"===l?t.includes("South"):("ResizeNorth"===l||"ResizeNorthWest"===l||"ResizeNorthEast"===l)&&t.includes("North")}(a)&&(c=l.includes("North")?-o:o),{x:n+h,y:s+c}},e.prototype.getTextAnnotationQuadrant=function(t,e){var i=t.wrapper.bounds.left,n=t.wrapper.bounds.right,s=t.wrapper.bounds.top,r=t.wrapper.bounds.bottom,o=e.wrapper.bounds.center.x,a=e.wrapper.bounds.center.y;if(o>=i&&o<=n){if(a<s)return"North";if(a>r)return"South"}if(a>=s&&a<=r){if(o<i)return"West";if(o>n)return"East"}return o<i&&a<s?"NorthWest":o>n&&a<s?"NorthEast":o<i&&a>r?"SouthWest":o>n&&a>r?"SouthEast":""},e.prototype.updateBpmnAnnotationPosition=function(t,e,i,n,s,r,o,a,l,h,c){var d,p,u=i>t?Math.abs(i-t):Math.abs(t-i),g=n>e?Math.abs(n-e):Math.abs(e-n);(0===u&&0===g||Number.isNaN(u)&&Number.isNaN(g))&&s.laneMargin&&(d=s.margin.left-s.laneMargin.left,p=s.margin.top-s.laneMargin.top);var m=s.width,f=s.height,y=new Tn(0,0,0,0);if(0!==m&&0!==f&&(y=new Tn((0!==i?i:s.offsetX)-m/2,(0!==n?n:s.offsetY)-f/2,m,f)),a){var v=o,b=""!==v.textAnnotation.textAnnotationTarget&&this.nameTable[v.textAnnotation.textAnnotationTarget],C=this.selectedItems.nodes?this.selectedItems.nodes[0]:void 0,I=C&&C.shape&&"TextAnnotation"===C.shape.shape;if(b)if(""===s.parentId||I){if("Auto"===v.textAnnotation.textAnnotationDirection&&r.children[0]instanceof $s&&r.children[0].children[0]instanceof Xs){var M=r.children[0],S=document.getElementById(M.id+"_groupElement"),x=document.getElementById(M.children[0].id+"_groupElement");S.removeChild(x),M.children.splice(0,1),this.isProtectedOnChange=!0,this.bpmnModule.setAnnotationPath(y,M,s,v,v.textAnnotation.textAnnotationDirection,this),this.isProtectedOnChange=!1}}else this.isPositionUndo=!0,this.updateTextAnnotationInSwimlane(s,s),this.isPositionUndo=!1;else if(s.inEdges.length>0){var w=s.inEdges[0];(A=this.nameTable[""+w])&&A.isBpmnAnnotationConnector&&(A.sourcePoint={x:i>t?A.sourcePoint.x+u:A.sourcePoint.x-u,y:n>e?A.sourcePoint.y+g:A.sourcePoint.y-g})}var D={ports:[{offset:s.ports[0].offset}]};this.nodePropertyChange(s,{},D)}else for(var E=0,T=s.outEdges;E<T.length;E++){var A,N=T[E];if((A=this.nameTable[""+N])&&A.isBpmnAnnotationConnector){var L=this.nameTable[A.targetID],O=L.shape.textAnnotation.textAnnotationTarget,k=this.nameTable[""+O];if(h&&!c){var z=this.getTextAnnotationOffset(s,L,l,t,e);i=z.x,n=z.y,u=i>t?Math.abs(i-t):Math.abs(t-i),g=n>e?Math.abs(n-e):Math.abs(e-n)}if("TextAnnotation"===L.shape.shape&&!Zu(this,L)&&Zu(this,k)){var P=void 0;D=void 0;if(s.isResized){P={margin:{left:L.margin.left,top:L.margin.top}};var j=s.resizeDif[L.id];j&&(L.margin.left+=j.x,L.margin.top+=j.y,D={margin:{left:L.margin.left,top:L.margin.top}})}else void 0!==d&&void 0!==p?L.parentId?(P={margin:{left:L.margin.left,top:L.margin.top}},L.margin.left+=d,L.margin.top+=p,D={margin:{left:L.margin.left,top:L.margin.top}}):(P={offsetX:L.offsetX,offsetY:L.offsetY},L.offsetX+=d,L.offsetY+=p,D={offsetX:L.offsetX,offsetY:L.offsetY}):(P={offsetX:L.offsetX,offsetY:L.offsetY},L.offsetX=i>t?L.offsetX+u:L.offsetX-u,L.offsetY=n>e?L.offsetY+g:L.offsetY-g,D={offsetX:L.offsetX,offsetY:L.offsetY});this.nodePropertyChange(L,P,D)}}}},e.prototype.updatePorts=function(t,e){if(t&&t.ports.length>0)for(var i=0,n=Object.keys(t.ports);i<n.length;i++){var s=n[i],r=Number(s),o=t.ports[parseInt(r.toString(),10)],a=this.getWrapper(t.wrapper,o.id);(a=uf(a,e,o)).relativeMode="Point",void 0===t.wrapper.measureChildren&&(t.wrapper.measureChildren=!1),a.measure(new un(a.width,a.height)),a.arrange(a.desiredSize)}},e.prototype.updateFlipOffset=function(t,e,i,n){if(t.hasChildren())for(var s=0,r=t.children;s<r.length;s++){var o=r[s];n!==ss.Horizontal&&n!==ss.Both||(o.flipOffset.x=o.flipOffset.x+e),n!==ss.Vertical&&n!==ss.Both||(o.flipOffset.y=o.flipOffset.y+i),(o instanceof $s||o instanceof _s)&&this.updateFlipOffset(o,e,i,n)}},e.prototype.updateUMLActivity=function(t,e,i,n){if(void 0!==t.width||void 0!==t.height){var s=i.wrapper.children[0].children[0];s.width=t.width,s.height=t.height;var r=i.wrapper.children[0].children[1];r.width=t.width/1.5,r.height=t.height/1.5}},e.prototype.updateConnectorProperties=function(t){if(this.preventConnectorsUpdate){-1===this.selectionConnectorsList.indexOf(t)&&t&&this.selectionConnectorsList.push(t)}else{var e={sourcePoint:t.sourcePoint,targetPoint:t.targetPoint,sourceID:t.sourceID,targetID:t.targetID,sourcePortID:t.sourcePortID,targetPortID:t.targetPortID};this.connectorPropertyChange(t,{},e,void 0,!0)}},e.prototype.updateConnectorEdges=function(t){if(t.inEdges.length>0)for(var e=0;e<t.inEdges.length;e++)this.updateConnectorProperties(this.nameTable[t.inEdges[parseInt(e.toString(),10)]]);if(t.outEdges.length>0)for(var i=0;i<t.outEdges.length;i++)this.updateConnectorProperties(this.nameTable[t.outEdges[parseInt(i.toString(),10)]]);t instanceof Rg||!t.parentId||!this.nameTable[t.parentId]||this.updateConnectorEdges(this.nameTable[t.parentId])},e.prototype.connectorProprtyChangeExtend=function(t,e,i,n){return void 0!==i.type&&i.type!==e.type&&t.segments.length>0&&void 0===i.segments&&(t.segments=[]),void 0!==i.shape&&void 0!==t.shape&&t.shape&&"Bpmn"===t.shape.type&&this.bpmnModule&&this.bpmnModule.updateBPMNConnector(t,e,i,this),void 0!==t.constraints?(this.updateThumbConstraints(this.selectedItems.connectors,this.selectedItems),!0):n},e.prototype.connectorPropertyChange=function(t,e,i,n,s){if(this.canEnableBlazorObject){var r=Fn(t);this.insertValue(r,!1)}var o,a,l,h,c,d=t.wrapper.bounds,p=!1,u=[];if(p=this.connectorProprtyChangeExtend(t,e,i,p),void 0!==i.visible&&this.updateElementVisibility(t.wrapper,t,t.visible),void 0!==i.sourcePoint||void 0!==i.targetPoint||void 0!==i.sourceID||void 0!==i.targetID||void 0!==i.targetPadding||void 0!==i.sourcePortID||void 0!==i.targetPortID||void 0!==i.sourcePadding||void 0!==i.type||void 0!==i.segments||void 0!==i.flip){if(void 0!==i.sourceID&&i.sourceID!==e.sourceID||i.sourcePortID){var g=this.nameTable[t.sourceID];if(a=this.findInOutConnectPorts(g,!1),(!g||Ip(g)||""!==t.sourcePortID&&Mp(a))&&(t.sourceWrapper=g?this.getEndNodeWrapper(g,t,!0):void 0,t.sourcePortID&&void 0===i.sourcePortID&&(t.sourcePortWrapper=g?this.getWrapper(g.wrapper,t.sourcePortID):void 0),this.removePortEdges(this.nameTable[e.sourceID]||g,e.sourcePortID||t.sourcePortID,t.id,!1)),void 0!==i.sourceID&&void 0!==e.sourceID&&""!==e.sourceID){var m=this.nameTable[e.sourceID];void 0!==m&&m.outEdges&&-1!==m.outEdges.indexOf(t.id)&&Ym(m.outEdges,t.id)}this.updateEdges(t)}if(void 0!==i.targetID&&i.targetID!==e.targetID){var f=this.nameTable[i.targetID];if(o=this.findInOutConnectPorts(f,!0),(!f||bp(f)||""!==t.targetPortID&&Cp(o))&&(t.targetWrapper=f?this.getEndNodeWrapper(f,t,!1):void 0,t.targetPortID&&void 0===i.targetPortID&&(t.targetPortWrapper=f?this.getWrapper(f.wrapper,t.targetPortID):void 0),this.removePortEdges(this.nameTable[e.targetID]||f,e.targetPortID||t.targetPortID,t.id,!0)),void 0!==e&&void 0!==e.targetID&&""!==e.targetID){var y=this.nameTable[e.targetID];void 0!==y&&y.inEdges&&-1!==y.inEdges.indexOf(t.id)&&Ym(y.inEdges,t.id)}this.updateEdges(t)}if(void 0!==i.sourcePortID&&i.sourcePortID!==e.sourcePortID)t.sourceID&&this.nameTable[t.sourceID]&&(l=this.nameTable[t.sourceID].wrapper),!(g=this.nameTable[t.sourceID])||Ip(g)||""!==t.sourcePortID&&Mp(a)?t.sourcePortWrapper=l?this.getWrapper(l,i.sourcePortID):void 0:""!==t.sourcePortID||Ip(g)||(t.sourcePortWrapper=void 0);if(void 0!==i.targetPortID&&i.targetPortID!==e.targetPortID){f=this.nameTable[t.targetID];t.targetID&&this.nameTable[t.targetID]&&(h=this.nameTable[t.targetID].wrapper),!f||bp(f)||""!==t.targetPortID&&Cp(o)?t.targetPortWrapper=h?this.getWrapper(h,i.targetPortID):void 0:""!==t.targetPortID||bp(f)||(t.targetPortWrapper=void 0)}void 0!==i.flip&&(t.flip=i.flip,pf(t,this),t.wrapper.flip=i.flip),"Orthogonal"===t.type&&this.lineRoutingModule&&this.diagramActions&&this.constraints&ms.LineRouting&&!(this.diagramActions&Is.ToolAction)&&"ComplexHierarchicalTree"!==this.layout.type&&(this.lineRoutingModule.renderVirtualRegion(this,!0),t.sourceID!==t.targetID&&t.segments.length>1&&this.lineRoutingModule.refreshConnectorSegments(this,t,!1)),u=this.getPoints(t)}void 0!==i.style&&Hm(i.style,t.wrapper.children[0]),(u.length>0||void 0!==i.sourceDecorator||void 0!==i.targetDecorator&&(-1!==(c=Object.keys(i.targetDecorator)).indexOf("shape")||-1!==c.indexOf("pathData")||-1!==c.indexOf("width")||-1!==c.indexOf("height"))||void 0!==i.cornerRadius)&&(_m(t,u.length>0?u:t.intermediatePoints,this.diagramActions),void 0!==i.type&&(p=!0),u.length>0&&(t.wrapper.measure(new un(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),this.updateConnectorAnnotation(t),this.updateConnectorPort(t),this.updateConnectorfixedUserHandles(t),this.updateObject(t,e,i))),(i.sourcePoint||i.targetPoint||i.segments)&&this.diagramActions===Is.Render&&(p=!0),"Bpmn"===t.shape.type&&"Default"===t.shape.sequence&&"Sequence"===t.shape.flow&&this.commandHandler.updatePathElementOffset(t),n||this.updateBridging(),this.updateAnnotations(i,t),this.updateConnectorPorts(i,t),this.updatefixedUserHandle(i,t),t.wrapper.measure(new un(t.wrapper.width,t.wrapper.height)),t.wrapper.arrange(t.wrapper.desiredSize),!1===d.equals(d,t.wrapper.bounds)&&(this.updateQuad(t),"Drag"!==this.eventHandler.currentAction&&this.updateGroupSize(t)),!0!==p||!this.checkSelectedItem(t)||this.diagramActions&Is.ToolAction&&!(this.diagramActions&Is.UndoRedo)||this.updateSelector(),this.preventConnectorsUpdate||(!wp(this)||wp(this)&&this.scroller.oldCollectionObjects.indexOf(t.id)>-1)&&(this.diagramActions&Is.PreventZIndexOnDragging?this.updateDiagramObject(t,!0):this.updateDiagramObject(t)),this.updateConnectorEdges(t),this.diagramActions&&"New"!==t.status&&(t.status="Update"),this.triggerPropertyChange(s,t,e,i)},e.prototype.removePortEdges=function(t,e,i,n){if(t)for(var s=0;s<t.ports.length;s++){var r=t.ports[parseInt(s.toString(),10)];if(r.id===e)Ym(n?r.inEdges:r.outEdges,i)}},e.prototype.updateConnectorPorts=function(t,e){if(void 0!==t.ports)for(var i=0,n=Object.keys(t.ports);i<n.length;i++){var s=n[i],r=Number(s),o=t.ports[""+s],a=e.ports[parseInt(r.toString(),10)];this.updatePort(o,a,e.wrapper,e)}},e.prototype.triggerPropertyChange=function(t,e,i,n){if(!t){var s={element:e,cause:this.diagramActions,diagramAction:this.getDiagramAction(this.diagramActions),oldValue:i,newValue:n};this.triggerEvent(Ds.propertyChange,s)}},e.prototype.findInOutConnectPorts=function(t,e){var i={};return t&&(i=$m(t,e)),i},e.prototype.getPoints=function(t,e){var i=!(!this.lineDistributionModule||"DifferentPoint"!==this.layout.connectionPointOrigin);return t.getConnectorPoints(t.type,e,"ComplexHierarchicalTree"===this.layout.type||"HierarchicalTree"===this.layout.type?this.layout.orientation:void 0,i)},e.prototype.updateNodeProperty=function(t,e,i){if(void 0===e)this.updateElementVisibility(t,this.nameTable[t.id],e);else{t.style.opacity=i;for(var n=0;n<t.children.length;n++)t.children[parseInt(n.toString(),10)]instanceof _s&&this.updateNodeProperty(t.children[parseInt(n.toString(),10)],void 0,i),t.children[parseInt(n.toString(),10)].style.opacity=i}},e.prototype.checkSelectedItem=function(t){var e=this.selectedItems,i=!1,n=[];return(n=n.concat(e.nodes,e.connectors)).length>0&&t.id===n[n.length-1].id&&(i=!0),i},e.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof _s)for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[parseInt(i.toString(),10)],e);t.visible=e},e.prototype.updateElementVisibility=function(t,e,i){if(void 0!==i){if(t.visible=i,e instanceof Ny){if(e.children)for(var n=0,s=e.children;n<s.length;n++){var r=s[n];this.updateElementVisibility(this.nameTable[""+r].wrapper,this.nameTable[""+r],i)}else t.children[0].visible=i,this.updateDiagramContainerVisibility(t.children[0],i),"Bpmn"===e.shape.type&&this.bpmnModule&&this.bpmnModule.updateElementVisibility(e,i,this);if("Bpmn"===e.shape.type&&"TextAnnotation"===e.shape.shape&&this.diagramActions){var o=this.nameTable[e.inEdges[0]],a=o.visible;o.visible=i,this.connectorPropertyChange(o,{visible:a},{visible:i})}if(e.ports)for(var l=0,h=e.ports;l<h.length;l++){var c=h[l];if(c.visibility&rs.Visible)(y=this.getWrapper(t,c.id)).visible=i}if(e.annotations)for(var d=0,p=e.annotations;d<p.length;d++){var u=p[d];(y=this.getWrapper(t,u.id)).visible=i?"Visible"===y.annotationVisibility:i}}else if("Bpmn"===e.shape.type)for(var g=0;g<4;g++)t.children[parseInt(g.toString(),10)].visible=i;else for(g=0;g<3;g++)t.children[parseInt(g.toString(),10)].visible=i;if(e.annotations)for(var m=0,f=e.annotations;m<f.length;m++){u=f[m];(y=this.getWrapper(t,u.id)).visible=i?"Visible"===y.annotationVisibility:i}if(e.expandIcon||e.collapseIcon){var y;if(y=this.getWrapper(t,"icon_content")){for(g=0;g<y.children.length;g++)y.children[parseInt(g.toString(),10)].visible=i;y.visible=i}e&&e.visible&&e.outEdges&&this.updateIconVisibility(e,0!==e.outEdges.length)}!1===i&&this.unSelect(this.nameTable[t.id]),(e instanceof Ny&&!this.preventNodesUpdate||e instanceof Rg&&!this.preventConnectorsUpdate)&&this.diagramActions&&this.updateDiagramObject(this.nameTable[t.id],void 0,!0)}},e.prototype.updateAnnotations=function(t,e){if(void 0!==t.annotations)for(var i=0,n=Object.keys(t.annotations);i<n.length;i++){var s=n[i],r=Number(s),o=t.annotations[""+s],a=e.annotations[parseInt(r.toString(),10)];this.updateAnnotation(o,a,e.wrapper,e)}},e.prototype.updatefixedUserHandle=function(t,e){if(void 0!==t.fixedUserHandles)for(var i=void 0,n=void 0,s=void 0,r=0,o=Object.keys(t.fixedUserHandles);r<o.length;r++){var a=o[r];i=Number(a),n=t.fixedUserHandles[""+a],s=e.fixedUserHandles[parseInt(i.toString(),10)],this.updateConnectorfixedUserHandle(n,s,e.wrapper,e)}},e.prototype.updateConnectorfixedUserHandle=function(t,e,i,n,s){var r=!1,o=this.getWrapper(i,e.id);void 0!==o&&(void 0!==t.width&&(o.width=t.width,r=!0),void 0!==t.height&&(o.height=t.height,r=!0),e instanceof hp&&void 0!==t.offset&&n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,o),e instanceof hp&&t.displacement&&(void 0===t.displacement.x&&void 0===t.displacement.y||(r=!0)),void 0!==t.fill&&(o.style.fill=t.fill),void 0!==t.handleStrokeColor&&(o.style.strokeColor=t.handleStrokeColor),void 0!==t.handleStrokeWidth&&(o.style.strokeWidth=t.handleStrokeWidth),void 0!==t.visibility&&(o.visible=t.visibility),void 0!==t.cornerRadius&&(o.cornerRadius=t.cornerRadius),this.updatefixedUserHandleContent(t,r,o,n,e,i),!0===r&&(o.measure(new un(o.width,o.height)),o.arrange(o.desiredSize)))},e.prototype.updateAnnotation=function(t,e,i,n,s){var r=!1,o=this.getWrapper(i,e.id);if(void 0!==o){if(void 0!==t.width&&void 0!==t.height&&(o.width=t.width,o.height=t.height,r=!0),void 0!==t.rotateAngle&&(o.rotateAngle=t.rotateAngle),!s||o instanceof sp||o.refreshTextElement(),e instanceof Gc&&void 0!==t.segmentAngle&&(o.rotateAngle=e.rotateAngle),void 0!==t.rotationReference&&(o.rotationReference=t.rotationReference),e instanceof Xc&&void 0!==t.offset){var a=t.offset;r=!0;var l=void 0!==a.x?a.x:e.offset.x,h=void 0!==a.y?a.y:e.offset.y;o.setOffsetWithRespectToBounds(l,h,"Fraction"),o.relativeMode="Point"}else e instanceof Gc&&(void 0!==t.offset||void 0!==t.segmentAngle||void 0!==t.alignment)&&n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,o);if(e instanceof Gc&&t.displacement&&(void 0===t.displacement.x&&void 0===t.displacement.y||(r=!0,n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,o))),void 0!==t.margin&&(r=!0,void 0!==t.margin.bottom&&(o.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(o.margin.top=t.margin.top),void 0!==t.margin.left&&(o.margin.left=t.margin.left),void 0!==t.margin.right&&(o.margin.right=t.margin.right)),(r||s)&&(o.width=e.width||n.width,e.template&&(o.width=o.width||o.actualSize.width,o.height=e.height||n.height||o.actualSize.height)),void 0!==t.horizontalAlignment&&(o.horizontalAlignment=t.horizontalAlignment,r=!0),void 0!==t.verticalAlignment&&(o.verticalAlignment=t.verticalAlignment,r=!0),void 0!==t.visibility){o.visible=!(!i.visible||!t.visibility),o.annotationVisibility=o.visible?"Visible":"Collapsed";var c=this.selectedItems;!o.visible&&c.annotation&&this.clearSelection()}if(void 0!==t.constraints){o.constraints&ds.Select&&!(t.constraints&ds.Select)&&Zu(this,n,!1,o),o.constraints=t.constraints}void 0!==t.style&&Hm(t.style,o),void 0!==t.hyperlink&&function(t,e,i){for(var n=e,s=n.hyperlink,r=0,o=Object.keys(t);r<o.length;r++)switch(o[r]){case"color":n.style.color=s.color=t.color;break;case"content":n.content=s.content=t.content||s.link;break;case"link":var a=i.style;n.style.color=t.link?s.color:a.color,n.style.textDecoration=t.link?s.textDecoration:i.style.textDecoration,n.content=t.link?s.content||t.link:i.content,s.link=t.link;break;case"textDecoration":n.style.textDecoration=s.textDecoration=t.textDecoration;break;case"hyperlinkOpenState":s.hyperlinkOpenState=t.hyperlinkOpenState}}(t.hyperlink,o,e),this.updateAnnotationContent(t,r,o,n,e,i),!0===r&&(o.measure(new un(o.width,o.height)),o.arrange(o.desiredSize)),o instanceof sp||o.refreshTextElement()}},e.prototype.updatefixedUserHandleContent=function(t,e,i,n,s,r){void 0!==t&&this.updateConnectorfixedUserHandleWrapper(i,n,s,r)},e.prototype.updateConnectorfixedUserHandleWrapper=function(t,e,i,n){for(var s=0,r=this.views;s<r.length;s++){var o=r[s];av(t.id+"_groupElement",o),av(t.id+"_html_element",o)}if(e instanceof Rg){var a=e.wrapper.children[0],l=new Tn(a.offsetX-a.width/2,a.offsetY-a.height/2,a.width,a.height);t=e.getFixedUserHandle(e.fixedUserHandles[e.fixedUserHandles.length-1],e.intermediatePoints,l,void 0,void 0)}for(var h=0;h<n.children.length;h++)t.id===n.children[parseInt(h.toString(),10)].id&&n.children.splice(h,1,t)},e.prototype.updateAnnotationContent=function(t,e,i,n,s,r){void 0!==t.content&&(i&&("UmlActivity"!==n.shape.type||x()||"StructuredNode"!==n.shape.shape?i.content=t.content:i.content="<<"+t.content+">>"),i instanceof sp&&this.updateAnnotationWrapper(i,n,s,r)),void 0!==t.template&&(i.content=t.template,this.updateAnnotationWrapper(i,n,s,r))},e.prototype.updateAnnotationWrapper=function(t,e,i,n){for(var s=0,r=this.views;s<r.length;s++){var o=r[s];av(t.id+"_groupElement",o),av(t.id+"_html_element",o)}if(e instanceof Ny)t=e.initAnnotationWrapper(i,this.element.id);else if(e instanceof Rg){var a=e.wrapper.children[0],l=new Tn(a.offsetX-a.width/2,a.offsetY-a.height/2,a.width,a.height);t=e.getAnnotationElement(e.annotations[e.annotations.length-1],e.intermediatePoints,l,this.getDescription,this.element.id)}for(var h=0;h<n.children.length;h++)t.id===n.children[parseInt(h.toString(),10)].id&&n.children.splice(h,1,t)},e.prototype.updateNodefixedUserHandle=function(t,e,i,n){var s=!1,r=this.getWrapper(i,e.id);if(void 0!==r){if(void 0!==t.width&&(r.actualSize.width=t.width,s=!0),void 0!==t.height&&(r.height=t.height,s=!0),e instanceof lp&&void 0!==t.offset){var o=t.offset;s=!0;var a=void 0!==o.x?o.x:e.offset.x,l=void 0!==o.y?o.y:e.offset.y;r.setOffsetWithRespectToBounds(a,l,"Fraction"),r.relativeMode="Point"}void 0!==t.margin&&(s=!0,void 0!==t.margin.bottom&&(r.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(r.margin.top=t.margin.top),void 0!==t.margin.left&&(r.margin.left=t.margin.left),void 0!==t.margin.right&&(r.margin.right=t.margin.right)),void 0!==t.visibility&&(r.visible=t.visibility),void 0!==t.fill&&(r.style.fill=t.fill),void 0!==t.handleStrokeColor&&(r.style.strokeColor=t.handleStrokeColor),void 0!==t.handleStrokeWidth&&(r.style.strokeWidth=t.handleStrokeWidth),void 0!==t.cornerRadius&&(r.cornerRadius=t.cornerRadius),this.updatefixedUserHandleWrapper(r,n,e,i),!0===s&&(r.measure(new un(r.width,r.height)),r.arrange(r.desiredSize))}},e.prototype.updatefixedUserHandleWrapper=function(t,e,i,n){for(var s=0,r=this.views;s<r.length;s++){var o=r[s];av(t.id+"_groupElement",o),av(t.id+"_html_element",o)}e instanceof Ny&&(t=e.initFixedUserHandles(i,void 0,void 0));for(var a=0;a<n.children.length;a++)t.id===n.children[parseInt(a.toString(),10)].id&&n.children.splice(a,1,t)},e.prototype.updatePort=function(t,e,i,n){var s=!1,r=this.getWrapper(i,e.id);if(void 0!==r){if(void 0!==t.offset)if(s=!0,n)void 0!==t.offset&&n.updateAnnotation(e,n.intermediatePoints,n.wrapper.bounds,r);else{var o=void 0!==t.offset.x?t.offset.x:e.offset.x,a=void 0!==t.offset.y?t.offset.y:e.offset.y;r.setOffsetWithRespectToBounds(o,a,"Fraction"),r.relativeMode="Point"}if(void 0!==t.width&&(s=!0,r.width=t.width),void 0!==t.height&&(s=!0,r.height=t.height),void 0!==t.connectionDirection&&(r.connectionDirection=t.connectionDirection),void 0!==t.visibility&&(r.visible=!(!i.visible||!Gm(e,rs.Visible))),void 0!==t.margin&&(s=!0,void 0!==t.margin.bottom&&(r.margin.bottom=t.margin.bottom),void 0!==t.margin.top&&(r.margin.top=t.margin.top),void 0!==t.margin.right&&(r.margin.right=t.margin.right),void 0!==t.margin.left&&(r.margin.left=t.margin.left)),void 0!==t.horizontalAlignment&&(s=!0,r.horizontalAlignment=t.horizontalAlignment),void 0!==t.verticalAlignment&&(s=!0,r.verticalAlignment=t.verticalAlignment),void 0!==t.style&&(void 0!==t.style.fill&&(r.style.fill=t.style.fill),void 0!==t.style.opacity&&(r.style.opacity=t.style.opacity),void 0!==t.style.strokeColor&&(r.style.strokeColor=t.style.strokeColor),void 0!==t.style.strokeWidth&&(r.style.strokeWidth=t.style.strokeWidth),void 0!==t.style.strokeDashArray&&(r.style.strokeDashArray=t.style.strokeDashArray)),void 0!==t.shape&&r){var l=Kc(t.shape);r.data=l,r.canMeasurePath=!0}void 0!==t.pathData&&(r.data=String(t.pathData),s=!0),!0===s&&(r.measure(new un(r.width,r.height)),r.arrange(r.desiredSize))}},e.prototype.updateIcon=function(t){var e=this.getWrapper(t.wrapper,"icon_content"),i=this.diagramActions&Is.Render?this.element.id:void 0;if(e){if("SVG"===this.mode){var n=Yy(t.wrapper.id+"_icon_content",i);if(n){var s=Yy(n.id+"_rect",i),r=Yy(n.id+"_shape",i),o=Yy(r.id+"_native_element",i);o&&o.parentNode.removeChild(o),r.parentNode.removeChild(r),s.parentNode.removeChild(s),n.parentNode.removeChild(n)}}var a=t.wrapper.children.indexOf(e);t.wrapper.children.splice(a,1)}var l=this.getPortContainer(t);t.initIcons(this.getDescription,this.layout,l,this.element.id)},e.prototype.getPortContainer=function(t){if(t.children)for(var e=0;e<t.wrapper.children.length;e++)if(t.wrapper.children[parseInt(e.toString(),10)].id===t.id+"group_container")return t.wrapper.children[parseInt(e.toString(),10)];return t.wrapper},e.prototype.updateTooltip=function(t,e){void 0!==e.tooltip.content&&(t.tooltip.content=e.tooltip.content),void 0!==e.tooltip.position&&(t.tooltip.position=e.tooltip.position),void 0!==e.tooltip.height&&(t.tooltip.height=e.tooltip.height),void 0!==e.tooltip.width&&(t.tooltip.width=e.tooltip.width),void 0!==e.tooltip.showTipPointer&&(t.tooltip.showTipPointer=e.tooltip.showTipPointer),void 0!==e.tooltip.relativeMode&&(t.tooltip.relativeMode=e.tooltip.relativeMode)},e.prototype.updateQuad=function(t){this.spatialSearch.updateQuad(t.wrapper)&&!this.preventDiagramUpdate&&this.updatePage()},e.prototype.removeFromAQuad=function(t){if(t.children)for(var e=void 0,i=t.children,n=0;n<i.length;n++)(e=this.nameTable[i[parseInt(n.toString(),10)]])&&this.removeFromAQuad(e);this.spatialSearch.removeFromAQuad(t.wrapper);var s="SwimLane"===t.shape.type;this.spatialSearch.updateBounds(t.wrapper,s)&&!this.preventDiagramUpdate&&this.updatePage()},e.prototype.updateGroupSize=function(t){var e;t.parentId&&(e=this.nameTable[t.parentId])&&(e.parentId?this.updateGroupSize(e):(e.wrapper.measure(new un),e.wrapper.arrange(e.wrapper.desiredSize),this.updateGroupOffset(e),this.updateDiagramObject(e)))},e.prototype.updatePage=function(){if(this.diagramActions&Is.Render&&!(this.diagramActions&Is.DragUsingMouse)){this.scroller.updateScrollOffsets(),this.scroller.setSize();for(var t=0,i=this.views;t<i.length;t++){var n=i[t],s=this.views[""+n];s instanceof e||s.updateView(s)}}this.diagramActions&Is.DragUsingMouse&&(this.renderPageBreaks(),this.pageSettings.width&&this.pageSettings.height&&!this.pageSettings.multiplePage||(this.scroller.updateScrollOffsets(),this.scroller.setSize()))},e.prototype.protectPropertyChange=function(t){this.isProtectedOnChange=t},e.prototype.getProtectPropertyChangeValue=function(){return this.isProtectedOnChange},e.prototype.enableServerDataBinding=function(t){},e.prototype.updateShadow=function(t,e){void 0!==e.angle&&(t.angle=e.angle),void 0!==e.color&&(t.color=e.color),void 0!==e.distance&&(t.distance=e.distance),void 0!==e.opacity&&(t.opacity=e.opacity)},e.prototype.updateMargin=function(t,e){void 0!==e.margin.top&&(t.margin.top=e.margin.top),void 0!==e.margin.bottom&&(t.margin.bottom=e.margin.bottom),void 0!==e.margin.left&&(t.margin.left=e.margin.left),void 0!==e.margin.right&&(t.margin.right=e.margin.right)},e.prototype.removePreviewChildren=function(t){if(t.children&&t.children.length&&t.shape&&"SwimLane"===t.shape.type){for(var e=0;e<t.children.length;e++){var i=t.children[parseInt(e.toString(),10)],n=this.nodes.indexOf(this.nameTable[""+i]);n>=0&&this.nodes.splice(n,1),delete this.nameTable[""+i]}(r=this.nodes.indexOf(this.nameTable[this.currentSymbol.id]))>=0&&this.nodes.splice(r,1)}else if("Container"===t.shape.type){if(t.shape.hasHeader){var s=this.nodes.indexOf(this.nameTable[t.id+t.shape.header.id]);s>=0&&this.nodes.splice(s,1)}var r;(r=this.nodes.indexOf(this.nameTable[this.currentSymbol.id]))>=0&&this.nodes.splice(r,1)}},e.prototype.selectDragedNode=function(t,e,i){this.currentSymbol=t,"SVG"!==this.mode&&this.refreshDiagramLayer(),this.commandHandler.oldSelectedObjects=mf(this),this.commandHandler.select(t),this.eventHandler.mouseDown(e.event),this.eventHandler.mouseMove(e.event,e),this.preventDiagramUpdate=!1,this.updatePage(),i.style.opacity="0"},e.prototype.initDroppables=function(){var t,e,i=this,n={},s={},r="selectedSymbols";this.droppable=new ti(this.element);var o=5;this.droppable.over=function(a){if(i.rulerSettings.showRulers){var l=document.getElementById(i.element.id+"_vRuler"),h=parseFloat(l.style.width);o=h+1}if(0!==i.previousSelectedObjects.length||i.currentSymbol||(i.previousSelectedObjects=i.commandHandler.getSelectedObject()),i.commandHandler.PreventConnectorSplit=!0,i.currentSymbol)a.event.touches&&a.event.touches.length&&i.eventHandler.mouseMove(a.event,a.event.touches);else{var c=null;if(!a.dragData&&"drag"===a.name){var d=document.getElementsByClassName("e-dragclone")[0];d&&(c=d)}if(a.dragData||c){var p=void 0,u=void 0;document.getElementById(i.element.id+"content").focus();var g=i.eventHandler.getMousePosition(a.event),m=void 0,f=c||a.dragData.helper,y=f.getAttribute("paletteId"),v=void 0,b=void 0,C=void 0,I=void 0;if(!y&&a.dragData){var M={source:null,element:p,cancel:!1,diagram:i,dragData:a.dragData.draggedElement.ej2_instances[0].dragData,dragItem:p};i.triggerEvent(Ds.dragEnter,M);var S=void 0,x=void 0;if(M.dragItem){if(M.dragItem.sourcePoint&&M.dragItem.targetPoint?x=new Rg(i,"connectors",M.dragItem,!0):S=new Ny(i,"nodes",M.dragItem,!0),p=S||x,i.initObject(p,void 0,void 0,!0),i.enterObject=p,i.enterTable=s,p instanceof Ny)S.offsetX=g.x+5+S.width*S.pivot.x,S.offsetY=g.y+S.height*S.pivot.y;else if(p instanceof Rg){var w=Tn.toBounds([p.sourcePoint,p.targetPoint]),D=g.x-w.left,E=g.y-w.top;p.sourcePoint.x+=D,p.sourcePoint.y+=E,p.targetPoint.x+=D,p.targetPoint.y+=E}i.preventDiagramUpdate=!0,i.currentSymbol=p,"SVG"!==i.mode&&i.refreshDiagramLayer(),i.selectDragedNode(p,a,f),delete i.enterObject,delete i.enterTable,i.droppable[""+r]=f,i.allowServerDataBinding=!0}}if(y){var T=document.getElementById(y).ej2_instances[0];i.droppable.sourceElement=T;if(T){var A=T[""+r];i.allowServerDataBinding=!1,m=Fn(T[""+r]),n=T.childTable;var N=A.wrapper.children[0].children[0];if(I=function(t,e,i){var n=xf(t,e,i,"width"),s=xf(t,e,i,"height");return new un(n,s)}(T,m,N),T[""+r]instanceof Ny){"TextAnnotation"===A.shape.shape?(m.offsetX=g.x+11+I.width*m.pivot.x,m.offsetY=g.y+11+I.height*m.pivot.y):(m.offsetX=g.x+5+I.width*m.pivot.x,m.offsetY=g.y+I.height*m.pivot.y),"Bpmn"===(S=new Ny(i,"nodes",m,!0)).shape.type&&S.shape.activity.subProcess.processes&&S.shape.activity.subProcess.processes.length&&(S.shape.activity.subProcess.processes=[]),v=S.dragSize,b=S.previewSize,C=T.symbolDragSize;var L=T.symbolPreview;if(S.width=v.width||C.width||b.width||L.width||S.width,S.height=v.height||C.height||b.height||L.height||S.height,"SwimLane"===S.shape.type){var O;if(i.diagramActions|=Is.PreventHistory,S.shape.isLane)S.children=[],t={id:"header"+Hn()},"Horizontal"===S.shape.orientation?(t.width=S.shape.lanes[0].header.width,t.height=S.shape.lanes[0].height):(t.width=S.shape.lanes[0].width,t.height=S.shape.lanes[0].header.height),t.style=S.shape.lanes[0].header.style,t.offsetX=g.x+o+t.width/2,t.offsetY=g.y+t.height/2,i.diagramActions|=Is.PreventCollectionChangeOnDragOver,t=i.add(t),e={id:"body"+Hn()},"Horizontal"===S.shape.orientation?(e.width=S.shape.lanes[0].width-t.width,e.height=S.shape.lanes[0].height,e.offsetX=g.x+o+(S.shape.lanes[0].header.width+e.width/2),e.offsetY=g.y+e.height/2):(e.width=S.shape.lanes[0].width,e.height=S.shape.lanes[0].height-t.height,e.offsetX=g.x+o+e.width/2,e.offsetY=g.y+(S.shape.lanes[0].header.height+e.height/2)),e.style=S.shape.lanes[0].style,e=i.add(e),(O={id:"group"+Hn(),children:[t.id,e.id]}).shape=S.shape,O.width=S.shape.lanes[0].width,O.height=S.shape.lanes[0].height,O.previewSize=S.previewSize,O.dragSize=S.dragSize,O.addInfo=S.addInfo,S=i.add(O),i.diagramActions&=~Is.PreventCollectionChangeOnDragOver;i.diagramActions&=~Is.PreventHistory}if("Container"===S.shape.type)i.diagramActions|=Is.PreventHistory,i.diagramActions|=Is.PreventCollectionChangeOnDragOver,S.shape.hasHeader&&((t={id:"header"+Hn()}).width=S.width,t.height=S.shape.header.height,t.style=S.shape.header.style),(O={id:"group"+Hn()}).shape=S.shape,O.shape.header=t,O.width=S.width,O.height=S.height,O.previewSize=S.previewSize,O.dragSize=S.dragSize,O.addInfo=S.addInfo,O.offsetX=S.offsetX,O.offsetY=S.offsetY,O.ports=S.ports,O.style=S.style,S=i.add(O),i.diagramActions&=~Is.PreventCollectionChangeOnDragOver,i.diagramActions&=~Is.PreventHistory;if(S.shape.isPhase&&((u="Horizontal"===S.shape.orientation)?(S.offsetX=g.x+o+(S.width||N.actualSize.width)/2,S.offsetY=g.y,S.shape.data="M20,"+S.height/2+" L"+(S.width-20)+","+S.height/2+"z",S.height=1):(S.offsetX=g.x+5,S.offsetY=g.y+(S.height||N.actualSize.height)/2,S.shape.data="M"+S.width/2+",20 L"+S.width/2+","+(S.height-20)+"z",S.width=1)),"UmlClassifier"===S.shape.type&&(S.children=S.width=S.height=void 0,m.children=void 0,"Class"===S.shape.classifier&&S.shape.classShape.methods.length<=0&&S.shape.classShape.attributes.length<=0&&(S.shape.classShape.attributes=[{name:"Name",type:"Type",style:{}}]),"Enumeration"===S.shape.classifier&&S.shape.enumerationShape.members.length<=0&&(S.shape.enumerationShape.members=[{name:"Name"}]),"Interface"===S.shape.classifier&&S.shape.interfaceShape.methods.length<=0&&S.shape.interfaceShape.attributes.length<=0&&(S.shape.interfaceShape.attributes=[{name:"Name",type:"Type",style:{}}])),p=S,m.children){var k=m;s=i.getChildren(k,{},n),sf(k,-k.offsetX,-k.offsetY,s,!0,i)}}else if(T[""+r]instanceof Rg){p=new Rg(i,"connectors",m,!0);var z=Tn.toBounds([p.sourcePoint,p.targetPoint]),P=g.x-z.left,j=g.y-z.top;p.sourcePoint.x+=P,p.sourcePoint.y+=j,p.targetPoint.x+=P,p.targetPoint.y+=j}p.shape.isLane||"Container"===p.shape.type||(p.id+=Hn());M={source:T,element:p,cancel:!1,diagram:i,dragData:null,dragItem:p};if(i.enterObject=p,i.enterTable=s,i.triggerEvent(Ds.dragEnter,M),p instanceof Ny&&"SwimLane"===p.shape.type&&p.shape.isLane){var B=M.element,H=B.shape.lanes[0];u="Horizontal"===B.shape.orientation;var R=i.nameTable[p.children[0]],V=i.nameTable[p.children[1]];v=p.dragSize,b=p.previewSize,C=T.symbolDragSize,H.width=v.width||C.width||b.width||H.width,H.height=v.height||C.height||b.height||H.height,u?(t.width=H.header.width,t.height=H.height,e.width=H.width-t.width,e.height=H.height,e.offsetX=g.x+o+(H.header.width+V.width/2),e.offsetY=g.y+V.height/2):(t.width=H.width,t.height=H.header.height,e.width=H.width,e.height=H.height-t.height,e.offsetX=g.x+o+V.width/2,e.offsetY=g.y+(H.header.height+V.height/2)),t.offsetX=g.x+o+R.width/2,t.offsetY=g.y+R.height/2,p.width=H.width,p.height=H.height}p instanceof Ny&&p.shape.isPhase&&(u?p.height=1:p.width=1);var U=!1;if(i.element.ej2_instances[0].constraints&ms.RestrictNegativeAxisDragDrop){if(p instanceof Ny){var F=p.offsetX-p.width*p.pivot.x,W=p.offsetY-p.height*p.pivot.y;U=F<0||W<0}else if(p instanceof Rg){F=Math.min(p.sourcePoint.x,p.targetPoint.x),W=Math.min(p.sourcePoint.y,p.targetPoint.y);U=F<0||W<0}U&&i.element.ej2_instances[0].setCursor("not-allowed")}if(!i.activeLayer.lock&&!M.cancel&&!U){if(i.preventDiagramUpdate=!0,p.children&&i.findChild(p,s),i.preventDiagramUpdate=!0,p.zIndex!==Number.MIN_VALUE&&(p.zIndex=Number.MIN_VALUE),"Container"!==p.shape.type&&i.initObject(p,void 0,void 0,!0),i.bpmnModule)for(var Y=0;Y<i.bpmnModule.bpmnTextAnnotationConnector.length;Y++)null===i.bpmnModule.bpmnTextAnnotationConnector[parseInt(Y.toString(),10)].wrapper&&i.initConnectors(i.bpmnModule.bpmnTextAnnotationConnector[parseInt(Y.toString(),10)],void 0,!0);i.selectDragedNode(p,a,f)}delete i.enterObject,delete i.enterTable}i.droppable[""+r]=f,i.allowServerDataBinding=!0}}}},this.droppable.drop=function(t){return Qb(i,void 0,void 0,function(){var e,i,n,s,r,o,a,l,h,c,d,p,u;return Zb(this,function(g){if(this.allowServerDataBinding=!1,e="sourceElement",this.currentSymbol?(n=!1,r=this.currentSymbol instanceof Rg,t.event.touches&&this.eventHandler.mouseUp(t.event),l={source:this.droppable[""+e],element:this.currentSymbol,target:this.eventHandler.hoverNode||this.findObjectsUnderMouse(this.eventHandler.getMousePosition(t.event))[0]||this,cancel:!1,position:{x:this.currentSymbol.wrapper.offsetX,y:this.currentSymbol.wrapper.offsetY}},this.commandHandler.PreventConnectorSplit=!1,this.triggerEvent(Ds.drop,l),c="id",(h=Fn(this.currentSymbol)).hasTarget=this.currentSymbol.hasTarget,this.removeFromAQuad(this.currentSymbol),this.removeObjectsFromLayer(this.nameTable[this.currentSymbol.id]),this.removeElements(this.currentSymbol),(this.currentSymbol.shape.isLane||this.currentSymbol.shape.isPhase||"UmlClassifier"===this.currentSymbol.shape.type||"Container"===this.currentSymbol.shape.type)&&this.removeChildInNodes(this.currentSymbol),l.cancel&&Lm(this.currentSymbol,this),this.currentSymbol.shape.isPhase&&(n=!0,s=this.currentSymbol.shape.orientation,h.shape.phases=this.currentSymbol.shape.phases),this.removePreviewChildren(this.currentSymbol),delete this.nameTable[this.currentSymbol.id],this.currentSymbol=null,this.protectPropertyChange(!0),l.cancel?this.clearSelectorLayer():(this.startGroupAction(),h&&(h.shape.isLane||n)&&(n&&(h.shape.isPhase=n,h.shape.orientation=s),this.eventHandler.addSwimLaneObject(h)),h&&"UmlClassifier"===h.shape.type&&!h.shape.relationship&&(h.children=void 0,this.clearSelectorLayer(),this.add(h)),"Bpmn"===h.shape.type&&h.shape.annotation&&h.hasTarget&&(o=h.shape.annotation.nodeId,h.shape.annotation.id=h.id,this.addTextAnnotation(h.shape.annotation,this.nameTable[""+o]),h.nodeId=""),h.shape.isLane||n||void 0===h.type&&"UmlClassifier"===h.shape.type||(h.children&&this.addChildNodes(h),l.target&&l.target instanceof Ny&&!r&&zu(this,l.target)&&xp(l.target)&&!this.commandHandler.isTargetSubProcess(l.target)?Hu(this,l.target,h):("Bezier"===h.type&&h.segments.length>0&&(h.segments=[]),i=this.add(h,!0)),(h||i)&&(Dp(this)||Ep(this))&&this.select([this.nameTable[h[""+c]]],!1,this.previousSelectedObjects),this.lineRoutingModule&&this.constraints&ms.LineRouting&&this.commandHandler.updateSelectedNodeProperties(this.selectedItems),l.target&&l.target instanceof Rg&&!0===this.enableConnectorSplit&&this.nameTable[h[""+c]]instanceof Ny&&(this.commandHandler.connectorSplit(this.nameTable[h[""+c]],l.target),this.commandHandler.PreventConnectorSplit=!1))),this.protectPropertyChange(!1),a=this.nameTable[h[""+c]],h.hasTarget&&(h.nodeId=h.hasTarget,this.remove(h)),this.bpmnModule&&a instanceof Ny&&h.processId&&(a.processId=h.processId,this.bpmnModule.dropBPMNchild(this.nameTable[a.processId],a,this)),l.cancel||this.endGroupAction(),"SVG"!==this.mode&&this.refreshDiagramLayer(),delete this.droppable[""+e]):(l={source:t.droppedElement,element:void 0,target:this.eventHandler.hoverNode||this.eventHandler.lastObjectUnderMouse||this,cancel:!1,position:void 0},this.triggerEvent(Ds.drop,l),h=void 0,c="id"),d="selectedSymbols",this.droppable[""+d]&&this.droppable[""+d].parentNode)lt(this.droppable[""+d]);else for(p=document.getElementsByClassName("e-dragclone"),u=0;u<p.length;u++)p[parseInt(u.toString(),10)].remove();return this.allowServerDataBinding=!0,this.previousSelectedObjects=[],[2]})})},this.droppable.out=function(t){if("touchmove"===t.evt.type&&i.eventHandler.mouseLeave(t.evt),i.currentSymbol&&!i.eventHandler.focus){if(i.unSelect(i.currentSymbol),i.removeFromAQuad(i.currentSymbol),"SVG"!==i.mode&&"Native"===i.currentSymbol.shape.type&&i.removeElements(i.currentSymbol),i.removeObjectsFromLayer(i.nameTable[i.currentSymbol.id]),i.currentSymbol.shape&&"TextAnnotation"===i.currentSymbol.shape.shape){var e=i.nameTable[i.currentSymbol.inEdges[0]];i.removeObjectsFromLayer(i.nameTable[e.id]),i.removeFromAQuad(e),i.removePreviewChildren(e),delete i.nameTable[e.id];var n=i.connectors.indexOf(e);i.connectors.splice(n,1),i.removeElements(e)}i.removePreviewChildren(i.currentSymbol),delete i.nameTable[i.currentSymbol.id];var s={element:i.currentSymbol,diagram:i};if(i.triggerEvent(Ds.dragLeave,s),"SVG"!==i.mode)i.refreshDiagramLayer();else{if(i.removeElements(i.currentSymbol),"SwimLane"!==i.currentSymbol.shape.type&&i.currentSymbol.children&&i.currentSymbol.children.length>0)for(var r=0;r<i.currentSymbol.children.length;r++){var o=i.nameTable[i.currentSymbol.children[parseInt(r.toString(),10)]];i.removeElements(o),delete i.nameTable[i.currentSymbol.children[parseInt(r.toString(),10)]]}if("Container"===i.currentSymbol.shape.type&&i.currentSymbol.shape.hasHeader){o=i.nameTable[i.currentSymbol.id+i.currentSymbol.shape.header.id];i.removeFromAQuad(o),delete i.nameTable[o.id],i.removeElements(o)}}i.currentSymbol=null;i.droppable.selectedSymbols.style.opacity="1";delete i.droppable.sourceElement,i.diagramRenderer.rendererActions=i.removeConstraints(i.diagramRenderer.rendererActions,Ms.DrawSelectorBorder),i.previousSelectedObject&&i.select(i.previousSelectedObject,i.previousSelectedObject.length>1),i.previousSelectedObject=null}}},e.prototype.getDropEventArgs=function(t){if(this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode){var e=this.eventHandler.lastObjectUnderMouse||this.eventHandler.hoverNode;t.target=df(e)===Rg?{connector:e}:{node:e}}else t.target.diagramId=this.element.id},e.prototype.removeChildInNodes=function(t){if(t&&"Container"!==t.shape.type){if(t.children)for(var e=0;e<t.children.length;e++)this.removeChildInNodes(this.nameTable[t.children[parseInt(e.toString(),10)]]);-1!==(i=this.nodes.indexOf(t))&&this.nodes.splice(i,1)}else if(t&&"Container"===t.shape.type){var i;t.shape.hasHeader&&this.removeChildInNodes(this.nameTable[t.id+t.shape.header.id]),-1!==(i=this.nodes.indexOf(t))&&this.nodes.splice(i,1)}},e.prototype.getBlazorDragEventArgs=function(t){return t={source:t.source,element:df(t.element)===Rg?{connector:t.element}:{node:t.element},cancel:t.cancel,diagramId:this.element.id}},e.prototype.findChild=function(t,e){for(var i,n,s=0;s<t.children.length;s++)(i=e[t.children[parseInt(s.toString(),10)]])&&(i.children&&this.findChild(i,e),i.id=i.id+Hn(),e[i.id]=i,t.children[parseInt(s.toString(),10)]=i.id,n=new Ny(this,"nodes",i,!0),this.initObject(n,void 0,void 0,!0))},e.prototype.getChildren=function(t,e,i){for(var n,s=0;s<t.children.length;s++)(n=i[t.children[parseInt(s.toString(),10)]])&&(n.children&&(e=this.getChildren(n,e,i)),e[n.id]=Fn(n));return e},e.prototype.addChildNodes=function(t){for(var e,i=0;i<t.children.length;i++)(e=this.nameTable[t.children[parseInt(i.toString(),10)]])&&(e.children&&this.addChildNodes(e),this.add(e,!0))},e.prototype.moveNode=function(t){for(var e,i=this.commandHandler.getObjectLayer(t.id),n=i.zIndex,s=i.objects.length,r=0;r<this.layers.length;r++)n===this.layers[parseInt(r.toString(),10)].zIndex&&(e=this.layers[r+1]);if(s>1){var o=2;if(t.children&&t.children.length>0)for(;t.children.indexOf(i.objects[s-o])>-1;)o++;this.commandHandler.moveSvgNode(t.id,i.objects[s-o]),this.commandHandler.moveSvgNode(i.objects[s-o],t.id)}else if(e){var a=this.commandHandler.getLayer(this.layerZIndexTable[e.zIndex]).objects[0];a?(this.commandHandler.moveSvgNode(t.id,a),this.commandHandler.updateNativeNodeIndex(t.id,a)):this.moveObjectsUp(t,i)}else this.moveObjectsUp(t,i)},e.prototype.moveObjectsUp=function(t,e){for(var i,n=this.layers.length-1;n>=0;n--)if(i=this.layers[parseInt(n.toString(),10)],e.id!==i.id){var s=this.commandHandler.getLayer(this.layerZIndexTable[i.zIndex]).objects[i.objects.length-1];if(s){this.commandHandler.moveSvgNode(t.id,s),this.commandHandler.moveSvgNode(s,t.id);break}}},e.prototype.insertData=function(t){return this.crudOperation(t,"create",this.getNewUpdateNodes("New"))},e.prototype.updateData=function(t){return this.crudOperation(t,"update",this.getNewUpdateNodes("Update"))},e.prototype.removeData=function(t){return this.crudOperation(t,"destroy",this.getDeletedNodes())},e.prototype.distributePorts=function(t){for(var e=this,i=function(i){var s=n.nameTable[t[parseInt(i.toString(),10)]];if(!(s&&s.ports&&s.width&&s.height))return"continue";for(var r=function(t){var e=s.ports[parseInt(t.toString(),10)],i=0;if(e.inEdges&&e.inEdges.length&&(i+=e.inEdges.length),e.outEdges&&e.outEdges.length&&(i+=e.outEdges.length),i>1)return"continue";var r=e.offset.x*s.width,o=e.offset.y*s.height,a=r,l=s.width-r,h=o,c=s.height-o,d=[{edge:"Left",value:a},{edge:"Right",value:l},{edge:"Top",value:h},{edge:"Bottom",value:c}],p=Math.min(a,l,h,c),u=d.filter(function(t){return t.value===p}),g=u[0].edge;if(u.length>1){var m=null;if(e.outEdges&&e.outEdges.length>0?m=n.nameTable[e.outEdges[0]]:e.inEdges&&e.inEdges.length>0&&(m=n.nameTable[e.inEdges[0]]),m){var f=m.targetPoint;if(f){var y=s.offsetX-s.width*s.pivot.x,v=s.offsetY-s.height*s.pivot.y,b={x:y+e.offset.x*s.width,y:v+e.offset.y*s.height},C=f.x-b.x,I=f.y-b.y;Math.abs(C)>Math.abs(I)?C<0&&u.some(function(t){return"Left"===t.edge})?g="Left":C>0&&u.some(function(t){return"Right"===t.edge})&&(g="Right"):I<0&&u.some(function(t){return"Top"===t.edge})?g="Top":I>0&&u.some(function(t){return"Bottom"===t.edge})&&(g="Bottom")}}}switch(g){case"Left":e.offset.x=0;break;case"Right":e.offset.x=1;break;case"Top":e.offset.y=0;break;case"Bottom":e.offset.y=1}},o=0;o<s.ports.length;o++)r(o);for(var a={Left:[],Right:[],Top:[],Bottom:[]},l=0;l<s.ports.length;l++){var h=s.ports[parseInt(l.toString(),10)];0===h.offset.x?a.Left.push(h):1===h.offset.x?a.Right.push(h):0===h.offset.y?a.Top.push(h):1===h.offset.y&&a.Bottom.push(h)}["Left","Right","Top","Bottom"].forEach(function(t){var i=a[""+t];if(0!==i.length){i.sort(e.callSort(s,t,e));for(var n=i.length,r=0;r<n;r++){var o=i[parseInt(r.toString(),10)],l=0;if(o.inEdges&&o.inEdges.length&&(l+=o.inEdges.length),o.outEdges&&o.outEdges.length&&(l+=o.outEdges.length),!(l>1)){var h=(r+1)/(n+1);"Left"===t||"Right"===t?o.offset.y=h:o.offset.x=h}}}})},n=this,s=0;s<t.length;s++)i(s)},e.prototype.getProjectedOffset=function(t,e,i){return"Left"===i||"Right"===i?t.offset.y:"Top"===i||"Bottom"===i?t.offset.x:0},e.prototype.callSort=function(t,e,i){return function(n,s){var r=n.outEdges&&n.outEdges.length||n.inEdges&&n.inEdges.length,o=s.outEdges&&s.outEdges.length||s.inEdges&&s.inEdges.length;return(r?i.getConnectorTargetOffset(n,t,e,i):i.getProjectedOffset(n,t,e))-(o?i.getConnectorTargetOffset(s,t,e,i):i.getProjectedOffset(s,t,e))}},e.prototype.getConnectorTargetOffset=function(t,e,i,n){var s=null;if(t.outEdges&&t.outEdges.length>0?s=n.nameTable[t.outEdges[0]]:t.inEdges&&t.inEdges.length>0&&(s=n.nameTable[t.inEdges[0]]),s){var r=s.targetPoint;if(r){var o=e.offsetX-e.width*e.pivot.x,a=e.offsetY-e.height*e.pivot.y;if("Left"===i||"Right"===i){var l=(r.y-a)/e.height;return Math.max(0,Math.min(1,l))}var h=(r.x-o)/e.width;return Math.max(0,Math.min(1,h))}}return this.getProjectedOffset(t,e,i)},e.prototype.crudOperation=function(t,e,i){if(t){var n=this.parameterMap(t,!(t instanceof Rg));if(n){var s=t instanceof Rg?this.dataSourceSettings.connectionDataSource.crudAction[""+e]:this.dataSourceSettings.crudAction[""+e];this.raiseAjaxPost(JSON.stringify(n),s)}return n}var r=i;return this.processCrudCollection(r,this.dataSourceSettings.crudAction[""+e],this.dataSourceSettings.connectionDataSource.crudAction[""+e]),r},e.prototype.processCrudCollection=function(t,e,i){if(t.nodes){var n=[],s=void 0;for(s=0;s<t.nodes.length;s++)n.push(this.parameterMap(t.nodes[parseInt(s.toString(),10)],!0));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),e)}if(t.connectors){n=[],s=void 0;for(s=0;s<t.connectors.length;s++)n.push(this.parameterMap(t.connectors[parseInt(s.toString(),10)],!1));n&&n.length>0&&this.raiseAjaxPost(JSON.stringify(n),i)}},e.prototype.parameterMap=function(t,e){var i,n={},s=e?this.dataSourceSettings:this.dataSourceSettings.connectionDataSource;if(s.id&&(n[s.id]=t.id),s.sourcePointX&&s.sourcePointY&&(n[s.sourcePointX]=t.sourcePoint.x,n[s.sourcePointY]=t.sourcePoint.y),s.targetPointX&&s.targetPointY&&(n[s.targetPointX]=t.targetPoint.x,n[s.targetPointY]=t.targetPoint.y),s.sourceID&&(n[s.sourceID]=t.sourceID),s.targetID&&(n[s.targetID]=t.targetID),s.crudAction&&s.crudAction.customFields&&s.crudAction.customFields.length>0)for(i=0;i<s.crudAction.customFields.length;i++)n[s.crudAction.customFields[parseInt(i.toString(),10)]]=t[s.crudAction.customFields[parseInt(i.toString(),10)]];return n},e.prototype.getNewUpdateNodes=function(t){var e=[],i=[];for(var n in this.nameTable){var s=this.nameTable[""+n];s.status===t&&(s&&s instanceof Rg?(s.status="None",i.push(s)):(s.status="None",e.push(s)))}return{nodes:e,connectors:i}},e.prototype.getDeletedNodes=function(){var t,e=[],i=[];for(t=0;t<this.crudDeleteNodes.length;t++){var n=this.crudDeleteNodes[parseInt(t.toString(),10)];n&&n.segments?i.push(n):n&&e.push(n)}return this.crudDeleteNodes=[],{nodes:e,connectors:i}},e.prototype.raiseAjaxPost=function(t,e){var i=new V(e,"POST","application/json"),n=JSON.stringify(JSON.parse(t));i.send(n).then(),i.onSuccess=function(t){}},e.prototype.getHiddenItems=function(t){if(this.contextMenuModule){this.contextMenuModule.hiddenItems=[];for(var e=0,i=t.items;e<i.length;e++){var n=i[e];if(this.contextMenuModule.ensureItems(n,t.event),n.items&&n.items.length)for(var s=0,r=n.items;s<r.length;s++){var o=r[s];this.contextMenuModule.ensureItems(o,t.event)}}return this.contextMenuModule.hiddenItems}return[]},_b([jt("100%")],e.prototype,"width",void 0),_b([jt(!1)],e.prototype,"enableConnectorSplit",void 0),_b([jt("SVG")],e.prototype,"mode",void 0),_b([jt("100%")],e.prototype,"height",void 0),_b([jt("Circle")],e.prototype,"segmentThumbShape",void 0),_b([jt(10)],e.prototype,"segmentThumbSize",void 0),_b([Bt({},rm)],e.prototype,"contextMenuSettings",void 0),_b([jt(ms.Default)],e.prototype,"constraints",void 0),_b([jt(fs.Default)],e.prototype,"tool",void 0),_b([jt("Top")],e.prototype,"bridgeDirection",void 0),_b([jt("transparent")],e.prototype,"backgroundColor",void 0),_b([Bt({},Av)],e.prototype,"snapSettings",void 0),_b([Bt({},kv)],e.prototype,"rulerSettings",void 0),_b([Bt({},Sv)],e.prototype,"pageSettings",void 0),_b([Bt({},ab)],e.prototype,"serializationSettings",void 0),_b([Rt([],Ny)],e.prototype,"nodes",void 0),_b([jt()],e.prototype,"drawingObject",void 0),_b([Rt([],Rg)],e.prototype,"connectors",void 0),_b([jt([])],e.prototype,"basicElements",void 0),_b([Bt({},zc)],e.prototype,"tooltip",void 0),_b([Bt({},Uv)],e.prototype,"dataSourceSettings",void 0),_b([jt()],e.prototype,"addInfo",void 0),_b([jt()],e.prototype,"historyManager",void 0),_b([jt()],e.prototype,"nodeTemplate",void 0),_b([jt()],e.prototype,"annotationTemplate",void 0),_b([jt()],e.prototype,"userHandleTemplate",void 0),_b([jt()],e.prototype,"fixedUserHandleTemplate",void 0),_b([jt()],e.prototype,"getNodeDefaults",void 0),_b([jt()],e.prototype,"nodeDefaults",void 0),_b([jt()],e.prototype,"getConnectorDefaults",void 0),_b([jt()],e.prototype,"connectorDefaults",void 0),_b([jt()],e.prototype,"setNodeTemplate",void 0),_b([jt()],e.prototype,"getDescription",void 0),_b([jt()],e.prototype,"getCustomProperty",void 0),_b([jt()],e.prototype,"getCustomTool",void 0),_b([jt()],e.prototype,"getCustomCursor",void 0),_b([Rt([],cb)],e.prototype,"customCursor",void 0),_b([jt()],e.prototype,"updateSelection",void 0),_b([Bt({},gb)],e.prototype,"diagramSettings",void 0),_b([Bt({},By)],e.prototype,"selectedItems",void 0),_b([Bt({},xv)],e.prototype,"scrollSettings",void 0),_b([Bt({},_v)],e.prototype,"layout",void 0),_b([Bt(void 0,Mb)],e.prototype,"model",void 0),_b([Bt({},sm)],e.prototype,"commandManager",void 0),_b([Ut()],e.prototype,"dataLoaded",void 0),_b([Ut()],e.prototype,"dragEnter",void 0),_b([Ut()],e.prototype,"dragLeave",void 0),_b([Ut()],e.prototype,"dragOver",void 0),_b([Ut()],e.prototype,"click",void 0),_b([Ut()],e.prototype,"historyChange",void 0),_b([Ut()],e.prototype,"historyStateChange",void 0),_b([Ut()],e.prototype,"doubleClick",void 0),_b([Ut()],e.prototype,"textEdit",void 0),_b([Ut()],e.prototype,"scrollChange",void 0),_b([Ut()],e.prototype,"mouseWheel",void 0),_b([Ut()],e.prototype,"selectionChange",void 0),_b([Ut()],e.prototype,"sizeChange",void 0),_b([Ut()],e.prototype,"connectionChange",void 0),_b([Ut()],e.prototype,"sourcePointChange",void 0),_b([Ut()],e.prototype,"targetPointChange",void 0),_b([Ut()],e.prototype,"propertyChange",void 0),_b([Ut()],e.prototype,"positionChange",void 0),_b([Ut()],e.prototype,"keyUp",void 0),_b([Ut()],e.prototype,"keyDown",void 0),_b([Ut()],e.prototype,"animationComplete",void 0),_b([Ut()],e.prototype,"rotateChange",void 0),_b([Ut()],e.prototype,"collectionChange",void 0),_b([Ut()],e.prototype,"fixedUserHandleClick",void 0),_b([Ut()],e.prototype,"onUserHandleMouseDown",void 0),_b([Ut()],e.prototype,"onUserHandleMouseUp",void 0),_b([Ut()],e.prototype,"onUserHandleMouseEnter",void 0),_b([Ut()],e.prototype,"onUserHandleMouseLeave",void 0),_b([Ut()],e.prototype,"onFixedUserHandleMouseDown",void 0),_b([Ut()],e.prototype,"onFixedUserHandleMouseUp",void 0),_b([Ut()],e.prototype,"onFixedUserHandleMouseEnter",void 0),_b([Ut()],e.prototype,"onFixedUserHandleMouseLeave",void 0),_b([Ut()],e.prototype,"segmentCollectionChange",void 0),_b([Ut()],e.prototype,"onImageLoad",void 0),_b([Ut()],e.prototype,"expandStateChange",void 0),_b([Ut()],e.prototype,"load",void 0),_b([Ut()],e.prototype,"created",void 0),_b([Ut()],e.prototype,"mouseEnter",void 0),_b([Ut()],e.prototype,"mouseLeave",void 0),_b([Ut()],e.prototype,"mouseOver",void 0),_b([Ut()],e.prototype,"elementDraw",void 0),_b([Ut()],e.prototype,"contextMenuOpen",void 0),_b([Ut()],e.prototype,"contextMenuBeforeItemRender",void 0),_b([Ut()],e.prototype,"contextMenuClick",void 0),_b([Ut()],e.prototype,"commandExecute",void 0),_b([Rt([],Jv)],e.prototype,"layers",void 0),_b([Ut()],e.prototype,"drop",void 0),_b([Ut()],e.prototype,"segmentChange",void 0),_b([Ut()],e.prototype,"loaded",void 0),_b([Ut()],e.prototype,"layoutUpdated",void 0),e}(_e),Xb=function(){function t(t){var e=this;this.printWindow=void 0,this.closePrintWindow=function(){e.printWindow&&!e.printWindow.closed&&e.printWindow.close()},this.diagram=t}return t.prototype.exportDiagram=function(t){var e,i,n,s="data",r=[],o=t.margin||{},a=t&&t.region?t.region:"Content",l=t&&t.mode?t.mode:"Download",h=this.getDiagramBounds(a,t);t.bounds&&(i=!0,h.x=t.bounds.x?t.bounds.x:h.x,h.y=t.bounds.y?t.bounds.y:h.y,h.width=t.bounds.width||h.width,h.height=t.bounds.height||h.height),o={top:void 0!==o.top?o.top:25,bottom:void 0!==o.bottom?o.bottom:25,right:void 0!==o.right?o.right:25,left:void 0!==o.left?o.left:25};this.diagram.nodes;"PageSettings"!==a&&(h.x-=o.left,h.y-=o.top,h.width+=o.left+o.right,h.height+=o.top+o.bottom);var c=t.fileName||"diagram";if("SVG"!==t.format){if(null!==(s=this.setCanvas(t,h,o,l,i,a,c)))return s}else{e=t.format,t.bounds=h,t.margin=o;var d=n=this.diagramAsSvg(t,o);if("Data"===l)return n;var p=(new XMLSerializer).serializeToString(d);r.push(p)}if("Download"===l&&null!==s)for(var u=0;u<r.length;u++){var g=new Blob([r[parseInt(u.toString(),10)]],{type:"application/octet-stream"});if("msie"===G.info.name)window.navigator.msSaveOrOpenBlob(g,c+"."+e);else{var m=iv("a",{download:c+"."+e}),f=URL.createObjectURL(g);m.href=f;var y=document.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),m.dispatchEvent(y)}}return null},t.prototype.setCanvas=function(t,e,i,n,s,r,o){var a;t.bounds=e,t.region=r;this.setScaleValueforCanvas(t,e);var l,h=this.diagramAsCanvas({bounds:e,margin:i,region:r,scaleX:t.scaleX,scaleY:t.scaleY,scaleOffsetX:t.scaleOffsetX,scaleOffsetY:t.scaleOffsetY},s);return l=a="JPG"===t.format?h.toDataURL("image/jpeg"):"BMP"===t.format?h.toDataURL("image/bmp"):h.toDataURL(),"Data"===n?a:(this.canvasMultiplePage(t,h,i,l,o),null)},t.prototype.canvasMultiplePage=function(t,e,i,n,s){var r=this,o=[],a=n.substring(n.indexOf(":")+1,n.indexOf(";")),l=a.substring(a.indexOf("/")+1),h=(l="jpeg"===l?void 0:l.toUpperCase())||"JPG";if(t.multiplePage){if(t.pageHeight=t.pageHeight?t.pageHeight:this.diagram.pageSettings.height,t.pageWidth=t.pageWidth?t.pageWidth:this.diagram.pageSettings.width,t.pageHeight=t.pageHeight?t.pageHeight:e.width,t.pageWidth=t.pageWidth?t.pageWidth:e.height,i=t.margin||{},t.pageOrientation&&("Landscape"===t.pageOrientation&&t.pageHeight>t.pageWidth||"Portrait"===t.pageOrientation&&t.pageWidth>t.pageHeight)){var c=t.pageWidth;t.pageWidth=t.pageHeight,t.pageHeight=c}t.margin={top:isNaN(i.top)?0:i.top,bottom:isNaN(i.bottom)?0:i.bottom,left:isNaN(i.left)?0:i.left,right:isNaN(i.right)?0:i.right};var d=iv("img",{id:this.diagram.element.id+"_printImage",src:n});d.onload=function(){o=r.getMultipleImage(d,t,!0),r.exportImage(o,s,h,n)}}else o=[n],this.exportImage(o,s,h,n)},t.prototype.exportImage=function(t,e,i,n){for(var s=[],r=t instanceof HTMLElement?0:t.length,o=0;o<r;o++){for(var a=t[parseInt(o.toString(),10)].replace(/^data:[a-z]*;,/,"").split(","),l=atob(a[1]),h=new ArrayBuffer(l.length),c=new Uint8Array(h),d=0;d<l.length;d++)c[parseInt(d.toString(),10)]=l.charCodeAt(d);s.push(h)}for(var p=function(t){var n=new Blob([s[parseInt(t.toString(),10)]],{type:"application/octet-stream"});if("msie"===G.info.name)window.navigator.msSaveOrOpenBlob(n,e+"."+i);else{var r=iv("a",{download:e+"."+i}),o=URL.createObjectURL(n);r.href=o;var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),setTimeout(function(){r.dispatchEvent(a)},5*(t+1))}},u=0;u<s.length;u++)p(u)},t.prototype.getObjectsBound=function(t){for(var e,i=0,n=this.diagram.nodes;i<n.length;i++){var s=n[i];s.visible&&(("SVG"===t.format||s instanceof hr||s instanceof sp)&&("SVG"!==t.format||s instanceof sp)||(e=e?e.uniteRect(s.wrapper.outerBounds):s.wrapper.outerBounds))}for(var r=0,o=this.diagram.connectors;r<o.length;r++){var a=o[r];a.visible&&(e=e?e.uniteRect(a.wrapper.outerBounds):a.wrapper.outerBounds)}return e||new Tn(0,0,0,0)},t.prototype.getDiagramBounds=function(t,e){var i=this.getObjectsBound(e),n=i.left,s=i.top,r=i.right-i.left,o=i.bottom-i.top;if("Content"!==t&&(this.diagram.pageSettings&&this.diagram.pageSettings.multiplePage?(n=i.left,s=i.top,this.diagram.pageSettings.width&&(n=Math.floor(n/this.diagram.pageSettings.width)*this.diagram.pageSettings.width,r=Math.ceil(i.right/this.diagram.pageSettings.width)*this.diagram.pageSettings.width-n),this.diagram.pageSettings.height&&(s=Math.floor(s/this.diagram.pageSettings.height)*this.diagram.pageSettings.height,o=Math.ceil(i.bottom/this.diagram.pageSettings.height)*this.diagram.pageSettings.height-s),0===i.width&&null!==this.diagram.pageSettings.width&&(r=this.diagram.pageSettings.width),0===i.height&&null!==this.diagram.pageSettings.height&&(o=this.diagram.pageSettings.height)):(this.diagram.pageSettings.width&&(n=0,r=this.diagram.pageSettings.width),this.diagram.pageSettings.height&&(s=0,o=this.diagram.pageSettings.height))),this.diagram.scrollSettings.padding){var a=this.diagram.scrollSettings.padding;n-=a.left,s-=a.top,r+=a.left+a.right,o+=a.top+a.bottom}var l=new Tn;return l.x=n,l.y=s,l.width=r,l.height=o,l},t.prototype.setScaleValueforCanvas=function(t,e){var i="scaleX",n="scaleY",s="scaleOffsetX",r="scaleOffsetY";t[""+i]=1,t[""+n]=1,t[""+s]=0,t[""+r]=0,t.pageHeight=t.pageHeight||this.diagram.pageSettings.height,t.pageWidth=t.pageWidth||this.diagram.pageSettings.width;var o=t.pageOrientation||this.diagram.pageSettings.orientation;if(o||(o="Portrait"),"Portrait"===o){if(t.pageWidth>t.pageHeight){var a=t.pageHeight;t.pageHeight=t.pageWidth,t.pageWidth=a}}else if(t.pageHeight>t.pageWidth){a=t.pageWidth;t.pageWidth=t.pageHeight,t.pageHeight=a}t.pageWidth&&t.pageHeight&&!t.multiplePage&&(t.stretch="Meet");var l=t.pageHeight||e.height,h=t.pageWidth||e.width;"Stretch"!==t.stretch&&"Meet"!==t.stretch&&"Slice"!==t.stretch||(t[""+i]=h/e.width,t[""+n]=l/e.height,"Meet"===t.stretch?(t[""+i]=t[""+n]=Math.min(t[""+i],t[""+n]),t[""+r]=(t.pageHeight-e.height*t[""+i])/2,t[""+s]=(t.pageWidth-e.width*t[""+i])/2):"Slice"===t.stretch&&(t[""+i]=t[""+n]=Math.max(t[""+i],t[""+n])),e.width=h,e.height=l),e.x*=t[""+i],e.y*=t[""+n]},t.prototype.diagramAsSvg=function(t,e){var i=this.diagram.createSvg(this.diagram.element.id+"_diagram_svg",t.bounds.width,t.bounds.height);document.body.appendChild(i);var n=nv("g",{id:this.diagram.element.id+"_pageBackground"}),s=t&&t.region?t.region:"Content",r=this.getDiagramBounds(s,t),o=r.x,a=r.y,l=r.width,h=r.height;i.appendChild(n);var c={x:String(o),y:String(a),width:String(l),height:String(h)};hv(n,c),this.setTransform(n,t.bounds,e);var d=document.getElementById(this.diagram.element.id+"gradient_pattern");d&&i.appendChild(d.cloneNode(!0)),c={x:String(o),y:String(a),width:String(l+e.left+e.right),height:String(h+e.top+e.bottom)};var p=document.getElementById(this.diagram.element.id+"_backgroundImageLayer").cloneNode(!0);hv(p,c),i.appendChild(p),this.setTransform(p,r,e);var u=document.getElementById(this.diagram.element.id+"_backgroundLayerrect").cloneNode(!0);if(hv(u,c),i.appendChild(u),this.setTransform(u,r,e),"SVG"===this.diagram.mode){var g=void 0,m=void 0,f=Wy(this.diagram.element.id);for(i.appendChild(f.getElementById(this.diagram.diagramLayer.id).cloneNode(!0)),m=0;m<i.childNodes.length;m++)(g=i.childNodes[parseInt(m.toString(),10)]).id===this.diagram.element.id+"_diagramLayer"&&this.setTransform(g,r,e)}else{n=nv("g",{id:this.diagram.element.id+"_diagramLayer"}),i.appendChild(n),this.setTransform(n,t.bounds,e);var y=new am("",null,!0),v=ev(this.diagram.element.id);this.diagram.renderDiagramElements(i,y,v,!1)}return document.body.removeChild(i),i},t.prototype.setTransform=function(t,e,i){t.setAttribute("transform","translate("+(-e.x+i.left)+", "+(-e.y+i.top)+")")},t.prototype.diagramAsCanvas=function(t,e){var i="scaleX",n="scaleY",s="scaleOffsetX",r="scaleOffsetY",o=t.bounds,a=t.margin,l=t.region,h=this.getDiagramBounds(l,t),c=this.diagram.pageSettings.background.color,d=vv.createCanvas(this.diagram.element.id+"_diagram",t.bounds.width,t.bounds.height),p=d.getContext("2d");p.translate(-o.x,-o.y),p.save(),p.fillStyle="transparent"===this.diagram.pageSettings.background.color?"white":this.diagram.pageSettings.background.color,o="Content"===l?h:o,p.fillRect(o.x,o.y,o.width,o.height);var u=this.diagram.pageSettings.background;if(u&&u.source){h=this.getDiagramBounds(l,t);var g=new Image;g.src=u.source;var m=h.width/g.width,f=h.height/g.height,y=h.x,v=h.y,b=h.width,C=h.height,I=this.isImageExportable(u);if("None"!==u.scale&&"None"!==u.align){var M="Meet"===u.scale?Math.min(m,f):Math.max(m,f);b=M*g.width,C=M*g.height,u.align.indexOf("xmid")>-1?y+=(h.width-b)/2:u.align.indexOf("xmax")>-1&&(y=y+h.width-b),u.align.indexOf("ymid")>-1?v+=(h.height-C)/2:u.align.indexOf("ymax")>-1&&(v=v+h.height-C),"none"!==this.diagram.pageSettings.background.color&&"transparent"!==this.diagram.pageSettings.background.color||(p.fillStyle="white",p.fillRect(h.x*t[""+i],h.y*t[""+n],h.width*t[""+i],h.height*t[""+n])),I&&p.drawImage(g,y,v,M*g.width,M*g.height)}else I&&p.drawImage(g,y,v,h.width,h.height)}else p.fillStyle="transparent"===c?"white":c,p.fillRect(h.x*t[""+i]-a.left,h.y*t[""+n]-a.top,h.width*t[""+i]+a.left+a.right,t[""+n]*h.height+a.top+a.bottom);var S=this.diagram.pageSettings.background.color,x=this.diagram.pageSettings.width;x&&(p.strokeStyle="none"===S?"transparent":S,p.lineWidth=x,p.strokeRect(h.x*t[""+i],h.y*t[""+n],h.width*t[""+i],h.height*t[""+n])),p.restore();var w=ev(this.diagram.element.id),D=new am("",null,!1);return this.updateObjectValue(t[""+i],t[""+s],t[""+r],!0),this.diagram.renderDiagramElements(d,D,w,!1,!0),this.updateObjectValue(t[""+i],t[""+s],t[""+r],!1),d},t.prototype.updateWrapper=function(t,e,i,n,s){if(t&&t.length>0)for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].children&&this.updateWrapper(t[parseInt(r.toString(),10)].children,e,i,n,s),t[parseInt(r.toString(),10)].exportScaleValue.x=e,t[parseInt(r.toString(),10)].exportScaleValue.y=e,t[parseInt(r.toString(),10)].exportScaleOffset.x=i,t[parseInt(r.toString(),10)].exportScaleOffset.y=n,t[parseInt(r.toString(),10)].isExport=s},t.prototype.scaleGradientValue=function(t,e,i){if(t.style.gradient.stops.length>0){var n=t.style.gradient;t.style.gradient instanceof js?(n.x1=i?n.x1*e:n.x1/e,n.y1=i?n.y1*e:n.y1/e,n.x2=i?n.x2*e:n.x2/e,n.y2=i?n.y2*e:n.y2/e):(n.fx=i?n.fx*e:n.fx/e,n.fy=i?n.fy*e:n.fy/e,n.cx=i?n.cx*e:n.cx/e,n.cy=i?n.cy*e:n.cy/e,n.r=i?n.r*e:n.r/e)}},t.prototype.updateObjectValue=function(t,e,i,n){for(var s,r=0;r<this.diagram.nodes.length;r++)s=this.diagram.nodes[parseInt(r.toString(),10)].wrapper,this.scaleGradientValue(this.diagram.nodes[parseInt(r.toString(),10)],t,n),this.updateWrapper(s.children,t,e,i,n),s.exportScaleValue.x=t,s.exportScaleValue.y=t,s.exportScaleOffset.x=e,s.exportScaleOffset.y=i,s.isExport=n;for(var o=0;o<this.diagram.connectors.length;o++){s=this.diagram.connectors[parseInt(o.toString(),10)].wrapper;for(var a=0;a<s.children.length;a++)s.children[parseInt(a.toString(),10)].isExport=n,n&&(s.children[parseInt(a.toString(),10)].exportScaleValue.x=t,s.children[parseInt(a.toString(),10)].exportScaleValue.y=t,s.children[parseInt(a.toString(),10)].exportScaleOffset.x=e,s.children[parseInt(a.toString(),10)].exportScaleOffset.y=i)}},t.prototype.isImageExportable=function(t){var e,i=!0;if(t.source)try{var n=(e=vv.createCanvas(this.diagram.element.id+"temp_canvas",100,100)).getContext("2d");n.save();var s=new Image;s.src=t.source,n.drawImage(s,0,0,100,100),n.restore(),e.toDataURL()}catch(t){i=!1}return i},t.prototype.getPrintCanvasStyle=function(t,e){var i=0,n=0,s=new un;if(i=t.width,n=t.height,(e.pageHeight||e.pageWidth)&&(n=e.pageHeight?e.pageHeight:n,i=e.pageWidth?e.pageWidth:i),e.pageOrientation&&("Landscape"===e.pageOrientation&&n>i||"Portrait"===e.pageOrientation&&i>n)){var r=i;i=n,n=r}return s.height=n,s.width=i,s},t.prototype.getMultipleImage=function(t,e,i){var n=[],s=iv("div",{}),r=this.getPrintCanvasStyle(t,e),o=e.margin,a=o.left,l=o.top,h=o.right,c=o.bottom,d=0,p=r.width+d,u=r.height+0,g=0,m=0;if(e&&e.multiplePage){s.style.height="auto",s.style.width="auto";var f=t.height,y=t.width,v=0,b=0,C=void 0,I=0,M=0,S=void 0,x=void 0;do{do{I=r.width,M=r.height,g+r.width>=y&&(I=y-g),m+r.height>=f&&(M=f-m),(S=(x=vv.createCanvas(this.diagram.element.id+"_multiplePrint",r.width,r.height)).getContext("2d")).drawImage(t,d+g+a,0+m+l,I-h-a,M-c-l,0+a,0+l,I-h-a,M-c-l),g+r.width>=y&&(g-=g-y),C=x.toDataURL(),S.restore(),g+=p,i?n.push(C):this.printImage(s,C,v+""+b,p+"px;",u+"px;"),v++}while(g<y);b++,v=d=g=0,m+r.height>=f&&(m-=m-f),m+=u}while(m<f)}else{var w=this.getPrintCanvasStyle(t,e),D=w.width,E=w.height;(S=(x=vv.createCanvas(this.diagram.element.id+"_diagram",D,E)).getContext("2d")).drawImage(t,0+a,0+l,t.width-(h+a),t.height-(l+c),0+a,0+l,D-(h+a),E-(l+c));C=x.toDataURL();S.restore(),i?n.push(C):this.printImage(s,C,0)}return i?n:s},t.prototype.printImage=function(t,e,i,n,s){var r={class:"e-diagram-print-page",style:"width:"+n+"height:"+s},o=iv("img",r),a=iv("div",r);dv(o,r={id:this.diagram.element.id+"_multiplePrint_img"+i,style:"float:left",src:e}),a.appendChild(o),t.appendChild(a)},t.prototype.print=function(t){t.mode="Data";var e=this.exportDiagram(t);this.printImages(e,t)},t.prototype.printImages=function(t,e){var i=this,n={id:this.diagram.element.id+"_printImage",src:t};e.margin={top:0,bottom:0,right:0,left:0};var s=iv("img",n);s.onload=function(){var t=i.getMultipleImage(s,e),n=window.open("");i.printWindow=n,null!=n&&t instanceof HTMLElement&&(n.document.write("<html><head><style> body{margin:0px;}  @media print { .e-diagram-print-page{page-break-after: left; }.e-diagram-print-page:last-child {page-break-after: avoid;}}</style><title></title></head>"),window.addEventListener("beforeunload",i.closePrintWindow),n.addEventListener("load",function(){setTimeout(function(){n.window.print(),n.close()},3e3)}),n.document.write("<center>"+t.innerHTML+"</center>"),n.document.close())}},t.prototype.getContent=function(t){var e=this.diagram.snapSettings.constraints;this.diagram.snapSettings.constraints=this.diagram.snapSettings.constraints&~os.ShowLines,this.diagram.dataBind(),this.diagram.clearSelection(),t=t||document.styleSheets;for(var i="",n=0;n<t.length;n++)(t[parseInt(n.toString(),10)].href||"string"==typeof t[parseInt(n.toString(),10)])&&(i+="<link href='"+(t[parseInt(n.toString(),10)].href||t[parseInt(n.toString(),10)])+"' rel='stylesheet' />");var s=document.getElementById(this.diagram.element.id+"content").innerHTML;return s=(s=i+"<body style=\"margin: 0px; padding: 0px\"><div style='margin-left:0px;margin-top:0px;margin-right:0px;margin-bottom:0px;'>"+s+"</div></body>").replace(/ transform: t/g," -webkit-transform: t"),this.diagram.snapSettings.constraints=e,this.diagram.dataBind(),s},t.prototype.getDiagramContent=function(t){if(1===this.diagram.scroller.currentZoom){var e=this.getContent(t);return Sf()?e.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):e}var i=document.getElementById(this.diagram.element.id+"content"),n=i.scrollLeft,s=i.scrollTop,r=this.diagram.scrollSettings.currentZoom,o=this.diagram.scroller.horizontalOffset,a=this.diagram.scroller.verticalOffset,l=Number(String(this.diagram.width).split("%")[0])?i.clientWidth:Number(String(this.diagram.width).split("px")[0]),h=Number(String(this.diagram.height).split("%")[0])?i.clientHeight:Number(String(this.diagram.height).split("px")[0]),c=this.getDiagramBounds("",{});this.diagram.scroller.zoom(1/r);var d,p;d=c.x,p=c.y,this.diagram.scroller.transform={tx:-d,ty:-p,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=-d,this.diagram.scroller.verticalOffset=-p,this.diagram.scroller.setSize(),this.diagram.setSize(c.width,c.height);e=this.getContent(t);return this.diagram.setSize(l,h),this.diagram.scroller.zoom(r/this.diagram.scrollSettings.currentZoom),this.diagram.dataBind(),n||s?this.diagram.setOffset(n,s):(this.diagram.scroller.transform={tx:o/this.diagram.scroller.currentZoom,ty:a/this.diagram.scroller.currentZoom,scale:this.diagram.scroller.currentZoom},this.diagram.scroller.horizontalOffset=o,this.diagram.scroller.verticalOffset=a),this.diagram.renderSelector(!1),Sf()?e.replace("url("+location.protocol+"//"+location.host+location.pathname+"#diagram_pattern ","url(#diagram_pattern)"):e},t.prototype.exportImages=function(t,e){var i=this,n=e&&e.region?e.region:"Content",s=e.margin||{};s={top:isNaN(s.top)?0:s.top,bottom:isNaN(s.bottom)?0:s.bottom,left:isNaN(s.left)?0:s.left,right:isNaN(s.right)?0:s.right};var r=this.getDiagramBounds(n,{});e.bounds&&(r.x=isNaN(e.bounds.x)?r.x:e.bounds.x,r.y=isNaN(e.bounds.y)?r.y:e.bounds.y,r.width=e.bounds.width||r.width,r.height=e.bounds.height||r.height);var o=document.createElement("img");dv(o,{src:t});var a=this;o.onload=function(){var n=vv.createCanvas(a.diagram.element.id+"innerImage",r.width+(s.left+s.right),r.height+(s.top+s.bottom)),l=n.getContext("2d");if(l.fillStyle=a.diagram.pageSettings.background.color,l.fillRect(0,0,r.width+(s.left+s.right),r.height+(s.top+s.bottom)),l.drawImage(o,0,0,r.width,r.height,s.left,s.top,r.width,r.height),t=t&&"JPG"===e.format?n.toDataURL("image/jpeg"):n.toDataURL(),e.printOptions)a.printImages(t,e);else{l.restore();var h=e.fileName||"diagram";i.canvasMultiplePage(e,n,s,t,h)}},"SVG"===e.format&&this.exportDiagram(e)},t.prototype.destroy=function(){window.removeEventListener("beforeunload",this.closePrintWindow),this.printWindow=void 0},t.prototype.getModuleName=function(){return"PrintandExport"},t}(),Gb=function(){function t(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return Object.defineProperty(t.prototype,"moduleName",{get:function(){return"query"},enumerable:!0,configurable:!0}),t.prototype.setKey=function(t){return this.key=t,this},t.prototype.using=function(t){return this.dataManager=t,this},t.prototype.execute=function(t,e,i,n){return(t=t||this.dataManager)?t.executeQuery(this,e,i,n):$b.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},t.prototype.executeLocal=function(t){return(t=t||this.dataManager)?t.executeLocal(this):$b.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},t.prototype.clone=function(){var e=new t;return e.queries=this.queries.slice(0),e.key=this.key,e.isChild=this.isChild,e.dataManager=this.dataManager,e.fromTable=this.fromTable,e.params=this.params.slice(0),e.expands=this.expands.slice(0),e.sortedColumns=this.sortedColumns.slice(0),e.groupedColumns=this.groupedColumns.slice(0),e.subQuerySelector=this.subQuerySelector,e.subQuery=this.subQuery,e.fKey=this.fKey,e.isCountRequired=this.isCountRequired,e.distincts=this.distincts.slice(0),e.lazyLoad=this.lazyLoad.slice(0),e},t.prototype.from=function(t){return this.fromTable=t,this},t.prototype.addParams=function(t,e){return"function"==typeof e?this.params.push({key:t,fn:e}):this.params.push({key:t,value:e}),this},t.prototype.distinct=function(t){return this.distincts="string"==typeof t?[].slice.call([t],0):t.slice(0),this},t.prototype.expand=function(t){return this.expands="string"==typeof t?[].slice.call([t],0):t.slice(0),this},t.prototype.where=function(t,e,i,n,s,r){e=e?e.toLowerCase():null;var o=null;return"string"==typeof t?o=new Kb(t,e,i,n,s,r):t instanceof Kb&&(o=t),this.queries.push({fn:"onWhere",e:o}),this},t.prototype.search=function(t,e,i,n,s){"string"==typeof e&&(e=[e]),i&&"none"!==i||(i="contains");var r=$b.fnOperators[i];return this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:n,ignoreAccent:s,comparer:r}}),this},t.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},t.prototype.sortByForeignKey=function(e,i,n,s){var r,o,a=y(s)?"ascending":s;if("string"==typeof e&&$b.endsWith(e.toLowerCase()," desc")&&(e=e.replace(/ desc$/i,""),i="descending"),i&&"string"!=typeof i||(a=i?i.toLowerCase():"ascending",i=$b.fnSort(i)),n){r=t.filterQueries(this.queries,"onSortBy");for(var l=0;l<r.length;l++)if("string"==typeof(o=r[l].e.fieldName)){if(o===e)return this}else if(o instanceof Array)for(var h=0;h<o.length;h++)if(o[h]===e||e.toLowerCase()===o[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:e,comparer:i,direction:a}}),this},t.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},t.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},t.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},t.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},t.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},t.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},t.prototype.select=function(t){return"string"==typeof t&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},t.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},t.prototype.foreignKey=function(t){return this.fKey=t,this},t.prototype.requiresCount=function(){return this.isCountRequired=!0,this},t.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},t.filterQueries=function(t,e){return t.filter(function(t){return t.fn===e})},t.filterQueryLists=function(t,e){for(var i=t.filter(function(t){return-1!==e.indexOf(t.fn)}),n={},s=0;s<i.length;s++)n[i[s].fn]||(n[i[s].fn]=i[s].e);return n},t}(),Kb=function(){function t(e,i,n,s,r,o){return void 0===s&&(s=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof e?(this.field=e,this.operator=i.toLowerCase(),this.value=n,this.matchCase=o,this.ignoreCase=s,this.ignoreAccent=r,this.isComplex=!1,this.comparer=$b.fnOperators.processOperator(this.operator)):(e instanceof t&&n instanceof t||n instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[e],this.matchCase=e.matchCase,this.ignoreCase=e.ignoreCase,this.ignoreAccent=e.ignoreAccent,n instanceof Array?[].push.apply(this.predicates,n):this.predicates.push(n)),this}return t.and=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"and")},t.prototype.and=function(e,i,n,s,r){return t.combine(this,e,i,n,"and",s,r)},t.or=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"or")},t.prototype.or=function(e,i,n,s,r){return t.combine(this,e,i,n,"or",s,r)},t.ornot=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"or not")},t.prototype.ornot=function(e,i,n,s,r){return t.combine(this,e,i,n,"ornot",s,r)},t.andnot=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return t.combinePredicates([].slice.call(e,0),"and not")},t.prototype.andnot=function(e,i,n,s,r){return t.combine(this,e,i,n,"andnot",s,r)},t.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.fromJSONData(t[i]));return e}var s=t;return this.fromJSONData(s)},t.prototype.validate=function(t){var e,i,n=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.condition&&-1!==this.condition.indexOf("not")?(this.condition=""===this.condition.split("not")[0]?void 0:this.condition.split("not")[0],!this.comparer.call(this,$b.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,$b.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);i=this.condition&&-1!==this.condition.indexOf("not")?-1!==this.condition.indexOf("and"):"and"===this.condition;for(var s=0;s<n.length;s++)if(s>0&&this.condition&&-1!==this.condition.indexOf("not")&&(n[s].condition=n[s].condition?n[s].condition+"not":"not"),e=n[s].validate(t),i){if(!e)return!1}else if(e)return!0;return i},t.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},t.combinePredicates=function(e,i){if(1===e.length){if(!(e[0]instanceof Array))return e[0];e=e[0]}return new t(e[0],i,e.slice(1))},t.combine=function(e,i,n,s,r,o,a){return i instanceof t?t[r](e,i):"string"==typeof i?t[r](e,new t(i,n,s,o,a)):$b.throwError("Predicate - "+r+" : invalid arguments")},t.fromJSONData=function(e){for(var i=e.predicates||[],n=i.length,s=[],r=0;r<n;r++)s.push(this.fromJSONData(i[r]));return e.isComplex?new t(s[0],e.condition,s.slice(1)):new t(e.field,e.operator,e.value,e.ignoreCase,e.ignoreAccent)},t}(),Jb={GroupGuid:"{271bbba0-1ee7}"},$b=function(){function t(){}return t.getValue=function(t,e){return"function"==typeof t?t.call(e||{}):t},t.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},t.notEndsWith=function(t,e){return t.slice&&t.slice(-e.length)!==e},t.startsWith=function(t,e){return t.slice(0,e.length)===e},t.notStartsWith=function(t,e){return t.slice(0,e.length)!==e},t.wildCard=function(t,e){var i,n;if(-1!==e.indexOf("[")&&(e=e.split("[").join("[[]")),-1!==e.indexOf("(")&&(e=e.split("(").join("[(]")),-1!==e.indexOf(")")&&(e=e.split(")").join("[)]")),-1!==e.indexOf("\\")&&(e=e.split("\\").join("[\\\\]")),-1!==e.indexOf("*")){"*"!==e.charAt(0)&&(e="^"+e),"*"!==e.charAt(e.length-1)&&(e+="$"),i=e.split("*");for(var s=0;s<i.length;s++)-1===i[s].indexOf(".")?i[s]=i[s]+".*":i[s]=i[s]+"*";e=i.join("")}return-1===e.indexOf("%3f")&&-1===e.indexOf("?")||(n=-1!==e.indexOf("%3f")?e.split("%3f"):e.split("?"),e=n.join(".")),new RegExp(e,"g").test(t)},t.like=function(e,i){return-1!==i.indexOf("%")&&("%"===i.charAt(0)&&i.lastIndexOf("%")<2?(i=i.substring(1,i.length),t.startsWith(t.toLowerCase(e),t.toLowerCase(i))):"%"===i.charAt(i.length-1)&&i.indexOf("%")>i.length-3?(i=i.substring(0,i.length-1),t.endsWith(t.toLowerCase(e),t.toLowerCase(i))):i.lastIndexOf("%")!==i.indexOf("%")&&i.lastIndexOf("%")>i.indexOf("%")+1?(i=i.substring(i.indexOf("%")+1,i.lastIndexOf("%")),-1!==e.indexOf(i)):-1!==e.indexOf(i))},t.fnSort=function(e){return"ascending"===(e=e?t.toLowerCase(e):"ascending")?this.fnAscending:this.fnDescending},t.fnAscending=function(t,e){return y(t)&&y(e)?0:null==e?-1:"string"==typeof t?t.localeCompare(e):null==t?1:t-e},t.fnDescending=function(t,e){return y(t)&&y(e)?0:null==e?1:"string"==typeof t?-1*t.localeCompare(e):null==t?-1:e-t},t.extractFields=function(t,e){for(var i={},n=0;n<e.length;n++)i=this.setValue(e[n],this.getObject(e[n],t),i);return i},t.select=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(this.extractFields(t[n],e));return i},t.group=function(e,i,n,s,r,o,a){s=s||1;var l=e,h="GroupGuid";if(l.GroupGuid===Jb[h]){for(var c=function(t){if(y(r))l[t].items=d.group(l[t].items,i,n,l.level+1,null,o,a),l[t].count=l[t].items.length;else{var e,s=r.filter(function(e){return e.key===l[t].key});e=r.indexOf(s[0]),l[t].items=d.group(l[t].items,i,n,l.level+1,r[e].items,o,a),l[t].count=r[e].count}},d=this,p=0;p<l.length;p++)c(p);return l.childLevels+=1,l}var u={},g=[];g.GroupGuid=Jb[h],g.level=s,g.childLevels=0,g.records=l;for(var m=function(t){var e=f.getVal(l,t,i);if(y(o)||(e=o(e,i)),!u[e]&&(u[e]={key:e,count:0,items:[],aggregates:{},field:i},g.push(u[e]),!y(r))){var s=r.filter(function(t){return t.key===u[e].key});u[e].count=s[0].count}u[e].count=y(r)?u[e].count+=1:u[e].count,(!a||a&&n.length)&&u[e].items.push(l[t])},f=this,v=0;v<l.length;v++)m(v);if(n&&n.length){var b=function(e){for(var i={},s=void 0,o=n,a=0;a<n.length;a++)if(s=t.aggregates[n[a].type],y(r))s&&(i[o[a].field+" - "+o[a].type]=s(g[e].items,o[a].field));else{var l=r.filter(function(t){return t.key===g[e].key});s&&(i[o[a].field+" - "+o[a].type]=s(l[0].items,o[a].field))}g[e].aggregates=i};for(v=0;v<g.length;v++)b(v)}if(a&&g.length&&n.length)for(v=0;v<g.length;v++)g[v].items=[];return l.length&&g||l},t.buildHierarchy=function(t,e,i,n,s){var r,o={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),r=0;r<n.length;r++){(o[a=this.getObject(t,n[r])]||(o[a]=[])).push(n[r])}for(r=0;r<i.length;r++){var a=this.getObject(s||t,i[r]);i[r][e]=o[a]}},t.getFieldList=function(t,e,i){if(void 0===i&&(i=""),null==e)return this.getFieldList(t,[],i);for(var n=t,s=0,r=Object.keys(t);s<r.length;s++){var o=r[s];"object"!=typeof n[o]||n[o]instanceof Array?e.push(i+o):this.getFieldList(n[o],e,i+o+".")}return e},t.getObject=function(t,e){if(!t)return e;if(e){if(-1===t.indexOf(".")){if(y(e[t])){var i=t.charAt(0).toLowerCase()+t.slice(1),n=t.charAt(0).toUpperCase()+t.slice(1);return y(e[i])?y(e[n])?null:e[n]:e[i]}return e[t]}for(var s=e,r=t.split("."),o=0;o<r.length&&null!=s;o++){if(void 0===(s=s[r[o]])){var a=r[o].charAt(0).toUpperCase()+r[o].slice(1);s=e[a]||e[a.charAt(0).toLowerCase()+a.slice(1)]||null}e=s}return s}},t.setValue=function(t,e,i){var n,s,r=t.toString().split("."),o=i||{},a=o,l=r.length;for(n=0;n<l;n++)s=r[n],n+1===l?a[s]=void 0===e?void 0:e:y(a[s])&&(a[s]={}),a=a[s];return o},t.sort=function(t,e,i){var n=this;return t.length<=1?t:t.slice().sort(function(t,s){return i(n.getVal([t],0,e),n.getVal([s],0,e),t,s)})},t.ignoreDiacritics=function(e){return"string"!=typeof e?e:e.split("").map(function(e){return e in t.diacritics?t.diacritics[e]:e}).join("")},t.ignoreDiacriticsForArrays=function(e){return Array.isArray(e)?e.map(function(e){return t.ignoreDiacritics(e)}):[]},t.merge=function(t,e,i,n){for(var s,r=[];t.length>0||e.length>0;)s=t.length>0&&e.length>0?n?n(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:t[0][i]<t[0][i]?t:e:t.length>0?t:e,r.push(s.shift());return r},t.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},t.toLowerCase=function(t){return y(t)?"":"string"==typeof t?t.toLowerCase():t instanceof Date?t.toString().toLowerCase():t.toString()},t.callAdaptorFunction=function(t,e,i,n){if(e in t){var s=t[e](i,n);y(s)||(i=s)}return i},t.getAddParams=function(e,i,n){var s={};return t.callAdaptorFunction(e,"addParams",{dm:i,query:n,params:n?n.params:[],reqParams:s}),s},t.isPlainObject=function(t){return!!t&&t.constructor===Object},t.isCors=function(){var t=null;try{t=new window.XMLHttpRequest}catch(t){}return!!t&&"withCredentials"in t},t.getGuid=function(t){var e;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(t,i){if("crypto"in window&&"getRandomValues"in crypto){var n=new Uint8Array(1);window.crypto.getRandomValues(n),e=n[0]%16|0}else e=16*Math.random()|0;return"0123456789abcdef"[19===i?3&e|8:e]})},t.isNull=function(t){return null==t},t.getItemFromComparer=function(e,i,n){var s,r,o,a=0,l="string"==typeof t.getVal(e,0,i);if(e.length)for(;y(s)&&a<e.length;)s=t.getVal(e,a,i),o=e[a++];for(;a<e.length;a++)y(r=t.getVal(e,a,i))||(l&&(s=+s,r=+r),n(s,r)>0&&(s=r,o=e[a]));return o},t.distinct=function(e,i,n){n=!y(n)&&n;var s,r=[],o={};return e.forEach(function(a,l){(s="object"==typeof e[l]?t.getVal(e,l,i):e[l])in o||(r.push(n?e[l]:s),o[s]=1)}),r},t.processData=function(t,e){var i=this.prepareQuery(t),n=new dC(e);t.requiresCounts&&i.requiresCount();var s=n.executeLocal(i),r={result:t.requiresCounts?s.result:s,count:s.count,aggregates:JSON.stringify(s.aggregates)};return t.requiresCounts?r:s},t.prepareQuery=function(e){var i=this,n=new Gb;(e.select&&n.select(e.select),e.where)&&t.parse.parseJson(e.where).filter(function(t){if(y(t.condition))n.where(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent);else{var e=[];t.field?e.push(new Kb(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)):e=e.concat(i.getPredicate(t.predicates)),"or"===t.condition?n.where(Kb.or(e)):"and"===t.condition&&n.where(Kb.and(e))}});e.search&&t.parse.parseJson(e.search).filter(function(t){return n.search(t.key,t.fields,t.operator,t.ignoreCase,t.ignoreAccent)});return e.aggregates&&e.aggregates.filter(function(t){return n.aggregate(t.type,t.field)}),e.sorted&&e.sorted.filter(function(t){return n.sortBy(t.name,t.direction)}),e.skip&&n.skip(e.skip),e.take&&n.take(e.take),e.group&&e.group.filter(function(t){return n.group(t)}),n},t.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n.field)e.push(new Kb(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var s=[],r=this.getPredicate(n.predicates),o=0,a=Object.keys(r);o<a.length;o++){var l=a[o];s.push(r[l])}e.push("or"===n.condition?Kb.or(s):Kb.and(s))}}return e},t.serverTimezoneOffset=null,t.timeZoneHandling=!0,t.throwError=function(t){try{throw new Error(t)}catch(t){throw t.message+"\n"+t.stack}},t.aggregates={sum:function(e,i){for(var n,s=0,r="number"!=typeof t.getVal(e,0,i),o=0;o<e.length;o++)n=t.getVal(e,o,i),isNaN(n)||null===n||(r&&(n=+n),s+=n);return s},average:function(e,i){return t.aggregates.sum(e,i)/e.length},min:function(e,i){var n;return"function"==typeof i&&(n=i,i=null),t.getObject(i,t.getItemFromComparer(e,i,n||t.fnAscending))},max:function(e,i){var n;return"function"==typeof i&&(n=i,i=null),t.getObject(i,t.getItemFromComparer(e,i,n||t.fnDescending))},truecount:function(t,e){return new dC(t).executeLocal((new Gb).where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new dC(t).executeLocal((new Gb).where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},t.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},t.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},t.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},t.fnOperators={equal:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?t.toLowerCase(e)===t.toLowerCase(i):e===i},notequal:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),!t.fnOperators.equal(e,i,n)},lessthan:function(e,i,n){return n?t.toLowerCase(e)<t.toLowerCase(i):(y(e)&&(e=void 0),e<i)},greaterthan:function(e,i,n){return n?t.toLowerCase(e)>t.toLowerCase(i):(y(e)&&(e=void 0),e>i)},lessthanorequal:function(e,i,n){return n?t.toLowerCase(e)<=t.toLowerCase(i):(y(e)&&(e=void 0),e<=i)},greaterthanorequal:function(e,i,n){return n?t.toLowerCase(e)>=t.toLowerCase(i):e>=i},contains:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?!y(e)&&!y(i)&&-1!==t.toLowerCase(e).indexOf(t.toLowerCase(i)):!y(e)&&!y(i)&&-1!==e.toString().indexOf(i)},doesnotcontain:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?!y(e)&&!y(i)&&-1===t.toLowerCase(e).indexOf(t.toLowerCase(i)):!y(e)&&!y(i)&&-1===e.toString().indexOf(i)},isnotnull:function(t){return null!=t},isnull:function(t){return null==t},startswith:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.startsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.startsWith(e,i)},doesnotstartwith:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.notStartsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.notStartsWith(e,i)},like:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.like(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.like(e,i)},isempty:function(t){return void 0===t||""===t},isnotempty:function(t){return void 0!==t&&""!==t},wildcard:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?(e||"boolean"==typeof e)&&i&&"object"!=typeof e&&t.wildCard(t.toLowerCase(e),t.toLowerCase(i)):(e||"boolean"==typeof e)&&i&&t.wildCard(e,i)},endswith:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.endsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.endsWith(e,i)},doesnotendwith:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacritics(i)),n?e&&i&&t.notEndsWith(t.toLowerCase(e),t.toLowerCase(i)):e&&i&&t.notEndsWith(e,i)},processSymbols:function(e){var i=t.operatorSymbols[e];return i?t.fnOperators[i]:t.throwError("Query - Process Operator : Invalid operator")},processOperator:function(e){var i=t.fnOperators[e];return i||t.fnOperators.processSymbols(e)},in:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacriticsForArrays(i)),n?!y(e)&&i&&i.length>0&&i.map(function(e){return t.toLowerCase(e)}).indexOf(t.toLowerCase(e))>-1:e instanceof Date?!y(e)&&i&&i.length>0&&Array.isArray(i)&&i.some(function(t){return t instanceof Date&&t.getTime()===e.getTime()}):!y(e)&&i&&i.length>0&&i.indexOf(e)>-1},notin:function(e,i,n,s){return s&&(e=t.ignoreDiacritics(e),i=t.ignoreDiacriticsForArrays(i)),n?!y(e)&&i&&i.length>0&&-1===i.map(function(e){return t.toLowerCase(e)}).indexOf(t.toLowerCase(e)):e instanceof Date?!y(e)&&i&&i.length>0&&Array.isArray(i)&&i.every(function(t){return!(t instanceof Date)||t.getTime()!==e.getTime()}):!y(e)&&i&&i.length>0&&-1===i.indexOf(e)}},t.parse={parseJson:function(e){return"string"!=typeof e||!/^[\s]*\[|^[\s]*\{(.)+:/g.test(e)&&-1!==e.indexOf('"')?e instanceof Array?t.parse.iterateAndReviveArray(e):"object"==typeof e&&null!==e&&t.parse.iterateAndReviveJson(e):e=JSON.parse(e,t.parse.jsonReviver),e},iterateAndReviveArray:function(e){for(var i=0;i<e.length;i++)"object"==typeof e[i]&&null!==e[i]?t.parse.iterateAndReviveJson(e[i]):"string"!=typeof e[i]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(e[i])&&-1!==e[i].toString().indexOf('"')?e[i]=t.parse.parseJson(e[i]):e[i]=t.parse.jsonReviver("",e[i])},iterateAndReviveJson:function(e){for(var i,n=0,s=Object.keys(e);n<s.length;n++){var r=s[n];t.startsWith(r,"__")||("object"==typeof(i=e[r])?i instanceof Array?t.parse.iterateAndReviveArray(i):i&&t.parse.iterateAndReviveJson(i):e[r]=t.parse.jsonReviver(e[r],i))}},jsonReviver:function(e,i){if("string"==typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),s=t.timeZoneHandling?t.serverTimezoneOffset:null;if(n)return t.dateParse.toTimeZone(new Date(parseInt(n[1],10)),s,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var r=i.indexOf("Z")>-1||i.indexOf("z")>-1,o=i.split(/[^0-9.]/);if(r){if(o[5].indexOf(".")>-1){var a=o[5].split(".");o[5]=a[0],o[6]=new Date(i).getUTCMilliseconds().toString()}else o[6]="00";i=t.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5]?o[5]:"00",10),parseInt(o[6],10)),t.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5]?o[5]:"00",10)),h=parseInt(o[6],10),c=parseInt(o[7],10);if(isNaN(h)&&isNaN(c))return l;i.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-c):l.setHours(l.getHours()+h,l.getMinutes()+c),i=t.dateParse.toTimeZone(l,t.serverTimezoneOffset,!1)}null==t.serverTimezoneOffset&&(i=t.dateParse.addSelfOffset(i))}}return i},isJson:function(e){return"string"==typeof e[0]?e:t.parse.parseJson(e)},isGuid:function(t){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(t)},replacer:function(e,i){return t.isPlainObject(e)?t.parse.jsonReplacer(e,i):e instanceof Array?t.parse.arrayReplacer(e):e instanceof Date?t.parse.jsonReplacer({val:e},i).val:e},jsonReplacer:function(e,i){for(var n,s=0,r=Object.keys(e);s<r.length;s++){var o=r[s];if((n=e[o])instanceof Date){var a=n;null==t.serverTimezoneOffset?e[o]=t.dateParse.toTimeZone(a,null).toJSON():(a=new Date(+a+36e5*t.serverTimezoneOffset),e[o]=t.dateParse.toTimeZone(t.dateParse.addSelfOffset(a),null).toJSON())}}return e},arrayReplacer:function(e){for(var i=0;i<e.length;i++)t.isPlainObject(e[i])?e[i]=t.parse.jsonReplacer(e[i]):e[i]instanceof Date&&(e[i]=t.parse.jsonReplacer({date:e[i]}).date);return e},jsonDateReplacer:function(e,i){if("value"===e&&i){if("string"==typeof i){var n=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(n)i=t.dateParse.toTimeZone(new Date(parseInt(n[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var s=i.split(/[^0-9]/);i=t.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5],10)),null,!0)}}if(i instanceof Date)return i=t.dateParse.addSelfOffset(i),null===t.serverTimezoneOffset?t.dateParse.toTimeZone(t.dateParse.addSelfOffset(i),null).toJSON():(i=t.dateParse.toTimeZone(i,i.getTimezoneOffset()/60-t.serverTimezoneOffset,!1)).toJSON()}return i}},t.dateParse={addSelfOffset:function(t){return new Date(+t-6e4*t.getTimezoneOffset())},toUTC:function(t){return new Date(+t+6e4*t.getTimezoneOffset())},toTimeZone:function(e,i,n){if(null===i)return e;var s=n?t.dateParse.toUTC(e):e;return new Date(+s-36e5*i)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),n=i>=0?"+":"-",s=function(t){var e=Math.floor(Math.abs(t));return(e<10?"0":"")+e};return e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())+"T"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())+n+s(i/60)+":"+s(i%60)}},t}(),tC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),eC={GroupGuid:"{271bbba0-1ee7}"},iC=function(){function t(e){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=t,this.dataSource=e,this.pvt={}}return t.prototype.processResponse=function(t,e,i,n){return t},t}(),nC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tC(e,t),e.prototype.processQuery=function(t,e){for(var i,n,s,r=t.dataSource.json.slice(0),o=r.length,a=!0,l={},h=0,c=[],d=[],p=0;p<e.lazyLoad.length;p++)h++,l[e.lazyLoad[p].key]=e.lazyLoad[p].value;var u={},g=!1;if(e.lazyLoad.length)for(p=0;p<e.queries.length;p++)if("onGroup"===(n=e.queries[p]).fn&&!y(n.e.format)){g=!0;break}for(p=0;p<e.queries.length;p++)"onPage"!==(n=e.queries[p]).fn&&"onGroup"!==n.fn&&("onSortBy"!==n.fn||g)||!e.lazyLoad.length?(i=this[n.fn].call(this,r,n.e,e),"onAggregates"===n.fn?u[n.e.field+" - "+n.e.type]=i:r=void 0!==i?i:r,"onPage"!==n.fn&&"onSkip"!==n.fn&&"onTake"!==n.fn&&"onRange"!==n.fn||(a=!1),a&&(o=r.length)):("onGroup"===n.fn&&c.push(n.e),"onPage"===n.fn&&(s=n.e),"onSortBy"===n.fn&&d.unshift(n.e));if(h){var m={query:e,lazyLoad:l,result:r,group:c,page:s,sort:d},f=this.lazyLoadGroup(m);r=f.result,o=f.count}return e.isCountRequired&&(r={result:r,count:o,aggregates:u}),r},e.prototype.lazyLoadGroup=function(t){var e=0,i=this.getAggregate(t.query),n=t.result;if(y(t.lazyLoad.onDemandGroupInfo)){var s=t.group[0].fieldName;e=(n=$b.group(n,s,i,null,null,t.group[0].comparer,!0)).length;h=n;if(t.sort.length){var r=t.sort.length>1?t.sort.filter(function(t){return t.fieldName===s})[0]:t.sort[0];n=this.onSortBy(n,r,t.query,!0)}t.page&&(n=this.onPage(n,t.page,t.query)),this.formGroupResult(n,h)}else{for(var o=t.lazyLoad.onDemandGroupInfo,a=o.where.length-1;a>=0;a--)n=this.onWhere(n,o.where[a]);if(t.group.length!==o.level){var l=t.group[o.level].fieldName;n=$b.group(n,l,i,null,null,t.group[o.level].comparer,!0),t.sort.length&&(n=this.onSortBy(n,t.sort[parseInt(o.level.toString(),10)],t.query,!0))}else for(a=t.sort.length-1;a>=o.level;a--)n=this.onSortBy(n,t.sort[parseInt(a.toString(),10)],t.query,!1);e=n.length;var h=n;n=(n=n.slice(o.skip)).slice(0,o.take),t.group.length!==o.level&&this.formGroupResult(n,h)}return{result:n,count:e}},e.prototype.formGroupResult=function(t,e){if(t.length&&e.length){var i="GroupGuid",n="childLevels",s="level",r="records";t[i]=e[i],t[n]=e[n],t[s]=e[s],t[r]=e[r]}return t},e.prototype.getAggregate=function(t){var e=Gb.filterQueries(t.queries,"onAggregates"),i=[];if(e.length)for(var n=void 0,s=0;s<e.length;s++)n=e[s].e,i.push({type:n.type,field:$b.getValue(n.field,t)});return i},e.prototype.batchRequest=function(t,e,i){var n,s=e.deletedRecords.length;for(n=0;n<e.addedRecords.length;n++)this.insert(t,e.addedRecords[n]);for(n=0;n<e.changedRecords.length;n++)this.update(t,i.key,e.changedRecords[n]);for(n=0;n<s;n++)this.remove(t,i.key,e.deletedRecords[n]);return e},e.prototype.onWhere=function(t,e){return t&&t.length?t.filter(function(t){if(e)return e.validate(t)}):t},e.prototype.onAggregates=function(t,e){var i=$b.aggregates[e.type];return t&&i&&0!==t.length?i(t,e.field):null},e.prototype.onSearch=function(t,e){return t&&t.length?(0===e.fieldNames.length&&$b.getFieldList(t[0],e.fieldNames),t.filter(function(t){for(var i=0;i<e.fieldNames.length;i++)if(e.comparer.call(t,$b.getObject(e.fieldNames[i],t),e.searchKey,e.ignoreCase,e.ignoreAccent))return!0;return!1})):t},e.prototype.onSortBy=function(t,e,i,n){if(!t||!t.length)return t;var s,r=$b.getValue(e.fieldName,i);if(!r)return t.sort(e.comparer);if(r instanceof Array){for(var o=(r=r.slice(0)).length-1;o>=0;o--)r[o]&&(s=e.comparer,$b.endsWith(r[o]," desc")&&(s=$b.fnSort("descending"),r[o]=r[o].replace(" desc","")),t=$b.sort(t,r[o],s));return t}return $b.sort(t,n?"key":r,e.comparer)},e.prototype.onGroup=function(t,e,i){if(!t||!t.length)return t;var n=this.getAggregate(i);return $b.group(t,$b.getValue(e.fieldName,i),n,null,null,e.comparer)},e.prototype.onPage=function(t,e,i){var n=$b.getValue(e.pageSize,i),s=($b.getValue(e.pageIndex,i)-1)*n,r=s+n;return t&&t.length?t.slice(s,r):t},e.prototype.onRange=function(t,e){return t&&t.length?t.slice($b.getValue(e.start),$b.getValue(e.end)):t},e.prototype.onTake=function(t,e){return t&&t.length?t.slice(0,$b.getValue(e.nos)):t},e.prototype.onSkip=function(t,e){return t&&t.length?t.slice($b.getValue(e.nos)):t},e.prototype.onSelect=function(t,e){return t&&t.length?$b.select(t,$b.getValue(e.fieldNames)):t},e.prototype.insert=function(t,e,i,n,s){return y(s)?t.dataSource.json.push(e):t.dataSource.json.splice(s,0,e)},e.prototype.remove=function(t,e,i,n){var s,r=t.dataSource.json;for("object"!=typeof i||i instanceof Date||(i=$b.getObject(e,i)),s=0;s<r.length&&$b.getObject(e,r[s])!==i;s++);return s!==r.length?r.splice(s,1):null},e.prototype.update=function(t,e,i,n){var s,r,o=t.dataSource.json;for(y(e)||(r=c(e,i)),s=0;s<o.length&&(y(e)||c(e,o[s])!==r);s++);return s<o.length?m(o[s],i):null},e}(iC),sC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tC(e,t),e.prototype.processQuery=function(t,e,i){var n,s,r=this.getQueryRequest(e),o=Gb.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=e.params,l=t.dataSource.url,h=null,c=this.options,d={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?(n=o.onPage,s=((s=$b.getValue(n.pageIndex,e))-1)*(h=$b.getValue(n.pageSize,e))):"onRange"in o&&(s=(n=o.onRange).start,h=n.end-n.start);for(var p=0;p<r.sorts.length;p++)n=$b.getValue(r.sorts[p].e.fieldName,e),d.sorts.push($b.callAdaptorFunction(this,"onEachSort",{name:n,direction:r.sorts[p].e.direction},e));i&&(n=this.getFiltersFrom(i,e))&&d.filters.push($b.callAdaptorFunction(this,"onEachWhere",n.toJson(),e));for(p=0;p<r.filters.length;p++){var u=$b.callAdaptorFunction(this,"onEachWhere",r.filters[p].e.toJson(),e);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!y(r.filters[p].e.key)&&r.filters.length>1&&(u="("+u+")"),d.filters.push(u);for(var g=0,m="object"==typeof d.filters[p]?Object.keys(d.filters[p]):[];g<m.length;g++){var f=m[g];$b.isNull(d[f])&&delete d[f]}}for(p=0;p<r.searches.length;p++)n=r.searches[p].e,d.searches.push($b.callAdaptorFunction(this,"onEachSearch",{fields:n.fieldNames,operator:n.operator,key:n.searchKey,ignoreCase:n.ignoreCase,ignoreAccent:n.ignoreAccent},e));for(p=0;p<r.groups.length;p++)d.groups.push($b.getValue(r.groups[p].e.fieldName,e));for(p=0;p<r.aggregates.length;p++)n=r.aggregates[p].e,d.aggregates.push({type:n.type,field:$b.getValue(n.field,e)});var v={};if(this.getRequestQuery(c,e,o,d,v),$b.callAdaptorFunction(this,"addParams",{dm:t,query:e,params:a,reqParams:v}),e.lazyLoad.length)for(p=0;p<e.lazyLoad.length;p++)v[e.lazyLoad[p].key]=e.lazyLoad[p].value;for(var b=0,C=Object.keys(v);b<C.length;b++){f=C[b];($b.isNull(v[f])||""===v[f]||0===v[f].length)&&delete v[f]}c.skip in v&&c.take in v||null===h||(v[c.skip]=$b.callAdaptorFunction(this,"onSkip",s,e),v[c.take]=$b.callAdaptorFunction(this,"onTake",h,e));var I=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(v,$b.parse.jsonDateReplacer),url:l,pvtData:I,type:"POST",contentType:"application/json; charset=utf-8"}:(n=this.convertToQueryString(v,e,t),{type:"GET",url:(n=(-1!==t.dataSource.url.indexOf("?")?"&":"/")+n).length?l.replace(/\/*$/,n):l,pvtData:I})},e.prototype.getRequestQuery=function(t,e,i,n,s){var r=s;r[t.from]=e.fromTable,t.apply&&e.distincts.length&&(r[t.apply]="onDistinct"in this?$b.callAdaptorFunction(this,"onDistinct",e.distincts):""),!e.distincts.length&&t.expand&&(r[t.expand]="onExpand"in this&&"onSelect"in i?$b.callAdaptorFunction(this,"onExpand",{selects:$b.getValue(i.onSelect.fieldNames,e),expands:e.expands},e):e.expands),r[t.select]="onSelect"in i&&!e.distincts.length?$b.callAdaptorFunction(this,"onSelect",$b.getValue(i.onSelect.fieldNames,e),e):"",r[t.count]=e.isCountRequired?$b.callAdaptorFunction(this,"onCount",e.isCountRequired,e):"",r[t.search]=n.searches.length?$b.callAdaptorFunction(this,"onSearch",n.searches,e):"",r[t.skip]="onSkip"in i?$b.callAdaptorFunction(this,"onSkip",$b.getValue(i.onSkip.nos,e),e):"",r[t.take]="onTake"in i?$b.callAdaptorFunction(this,"onTake",$b.getValue(i.onTake.nos,e),e):"",r[t.where]=n.filters.length||n.searches.length?$b.callAdaptorFunction(this,"onWhere",n.filters,e):"",r[t.sortBy]=n.sorts.length?$b.callAdaptorFunction(this,"onSortBy",n.sorts,e):"",r[t.group]=n.groups.length?$b.callAdaptorFunction(this,"onGroup",n.groups,e):"",r[t.aggregates]=n.aggregates.length?$b.callAdaptorFunction(this,"onAggregates",n.aggregates,e):"",r.param=[]},e.prototype.convertToQueryString=function(t,e,i){return""},e.prototype.processResponse=function(t,e,i,n,s,r){if(n&&n.headers.get("Content-Type")&&-1!==n.headers.get("Content-Type").indexOf("application/json")){var o=$b.timeZoneHandling;e&&!e.timeZoneHandling&&($b.timeZoneHandling=!1),e.enableCache||(t=$b.parse.parseJson(t)),$b.timeZoneHandling=o}var a=s,l=a.pvtData||{},h=t?t.groupDs:[];if(n&&n.headers.get("Content-Type")&&-1!==n.headers.get("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];var c=JSON.parse(a.data);if(c&&"batch"===c.action&&t&&t.addedRecords&&!y(r))return r.addedRecords=t.addedRecords,r;t&&t.d&&(t=t.d);var d={};t&&"count"in t&&(d.count=t.count),d.result=t&&t.result?t.result:t;var p=!1;if(Array.isArray(t.result)&&t.result.length){if(y(t.result[0].key)||(d.result=this.formRemoteGroupedData(d.result,1,l.groups.length-1)),i&&i.lazyLoad.length&&l.groups.length)for(var u=0;u<i.lazyLoad.length;u++)if("onDemandGroupInfo"===i.lazyLoad[u].key){var g=i.lazyLoad[u].value.level;l.groups.length===g&&(p=!0)}}return p||this.getAggregateResult(l,t,d,h,i),$b.isNull(d.count)?d.result:{result:d.result,count:d.count,aggregates:d.aggregates}},e.prototype.formRemoteGroupedData=function(t,e,i){for(var n=0;n<t.length;n++)t[n].items.length&&Object.keys(t[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(t[n].items,e+1,i-1);var s="GroupGuid",r="records";return t[s]=eC[s],t.level=e,t.childLevels=i,t[r]=t[0].items.length?this.getGroupedRecords(t,!y(t[0].items[r])):[],t},e.prototype.getGroupedRecords=function(t,e){for(var i=[],n=0;n<t.length;n++)if(e)i=i.concat(t[n].items.records);else for(var s=0;s<t[n].items.length;s++)i.push(t[n].items[s]);return i},e.prototype.onGroup=function(t){return this.pvt.groups=t,t},e.prototype.onAggregates=function(t){this.pvt.aggregates=t},e.prototype.batchRequest=function(t,e,i,n,s){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.removeUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(f({},{changed:e.changedRecords,added:e.addedRecords,deleted:e.deletedRecords,action:"batch",table:i[undefined],key:i[undefined]},$b.getAddParams(this,t,n)))}},e.prototype.beforeSend=function(t,e,i){},e.prototype.insert=function(t,e,i,n){return{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(f({},{value:e,table:i,action:"insert"},$b.getAddParams(this,t,n)))}},e.prototype.remove=function(t,e,i,n,s){return{type:"POST",url:t.dataSource.removeUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(f({},{key:i,keyColumn:e,table:n,action:"remove"},$b.getAddParams(this,t,s)))}},e.prototype.update=function(t,e,i,n,s){return{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(f({},{value:i,action:"update",keyColumn:e,key:$b.getObject(e,i),table:n},$b.getAddParams(this,t,s)))}},e.prototype.getFiltersFrom=function(t,e){var i,n=e.fKey,s=n,r=e.key,o=[];"object"!=typeof t[0]&&(s=null);for(var a=0;a<t.length;a++)i="object"==typeof t[0]?$b.getObject(r||s,t[a]):t[a],o.push(new Kb(n,"equal",i));return Kb.or(o)},e.prototype.getAggregateResult=function(t,e,i,n,s){var r=e;if(e&&e.result&&(r=e.result),t&&t.aggregates&&t.aggregates.length){var o=t.aggregates,a=void 0,l=r,h={};e.aggregate&&(l=e.aggregate);for(var c=0;c<o.length;c++)(a=$b.aggregates[o[c].type])&&(h[o[c].field+" - "+o[c].type]=a(l,o[c].field));i.aggregates=h}var d=Array.isArray(e.result)&&e.result.length&&!y(e.result[0].key);if(t&&t.groups&&t.groups.length&&!d){var p=t.groups;for(c=0;c<p.length;c++){y(n)||(n=$b.group(n,p[c]));var u=Gb.filterQueries(s.queries,"onGroup")[c].e;r=$b.group(r,p[c],t.aggregates,null,n,u.comparer)}i.result=r}return i},e.prototype.getQueryRequest=function(t){var e={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return e.sorts=Gb.filterQueries(t.queries,"onSortBy"),e.groups=Gb.filterQueries(t.queries,"onGroup"),e.filters=Gb.filterQueries(t.queries,"onWhere"),e.searches=Gb.filterQueries(t.queries,"onSearch"),e.aggregates=Gb.filterQueries(t.queries,"onAggregates"),e},e.prototype.addParams=function(t){var e=t.reqParams;t.params.length&&(e.params={});for(var i=0,n=t.params;i<n.length;i++){var s=n[i];if(e[s.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");e[s.key]=s.value,s.fn&&(e[s.key]=s.fn.call(t.query,s.key,t.query,t.dm)),e.params[s.key]=e[s.key]}},e}(iC),rC=function(t){function e(e){var i=t.call(this)||this;return i.options=f({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),f(i.options,e||{}),i}return tC(e,t),e.prototype.getModuleName=function(){return"ODataAdaptor"},e.prototype.onPredicate=function(t,i,n){var s,r,o="",a=t.value,l=typeof a,h=t.field?e.getField(t.field):null;if(a instanceof Date&&(a="datetime'"+$b.parse.replacer(a)+"'"),"string"===l&&(a=a.replace(/'/g,"''"),t.ignoreCase&&(a=a.toLowerCase()),"like"!==t.operator&&(a=encodeURIComponent(a)),"wildcard"!==t.operator&&"like"!==t.operator&&(a="'"+a+"'"),n&&(h="cast("+h+", 'Edm.String')"),$b.parse.isGuid(a)&&(r="guid"),t.ignoreCase&&(r||(h="tolower("+h+")"),a=a.toLowerCase())),"isempty"===t.operator||"isnull"===t.operator||"isnotempty"===t.operator||"isnotnull"===t.operator?(s=-1!==t.operator.indexOf("isnot")?$b.odBiOperator.notequal:$b.odBiOperator.equal,a="isnull"===t.operator||"isnotnull"===t.operator?null:"''"):s=$b.odBiOperator[t.operator],s)return o+=h,o+=s,r&&(o+=r),o+a;if("like"===(s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator[t.operator]:$b.odv4UniOperator[t.operator]))-1!==a.indexOf("%")&&("%"===a.charAt(0)&&a.lastIndexOf("%")<2?(a=a.substring(1,a.length),s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.startswith:$b.odv4UniOperator.startswith):"%"===a.charAt(a.length-1)&&a.indexOf("%")>a.length-3?(a=a.substring(0,a.length-1),s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.endswith:$b.odv4UniOperator.endswith):a.lastIndexOf("%")!==a.indexOf("%")&&a.lastIndexOf("%")>a.indexOf("%")+1?(a=a.substring(a.indexOf("%")+1,a.lastIndexOf("%")),s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.contains:$b.odv4UniOperator.contains):s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.contains:$b.odv4UniOperator.contains),a="'"+(a=encodeURIComponent(a))+"'";else if("wildcard"===s)if(-1!==a.indexOf("*")){var c=a.split("*"),d=void 0,p=0;if(0!==a.indexOf("*")&&-1===c[0].indexOf("%3f")&&-1===c[0].indexOf("?")&&(d="'"+(d=c[0])+"'",o+=(s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.startswith:$b.odv4UniOperator.startswith)+"(",o+=h+",",r&&(o+=r),o+=d+")",p++),a.lastIndexOf("*")!==a.length-1&&-1===c[c.length-1].indexOf("%3f")&&-1===c[c.length-1].indexOf("?")&&(d="'"+(d=c[c.length-1])+"'",p>0&&(o+=" and "),o+=(s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.endswith:$b.odv4UniOperator.endswith)+"(",o+=h+",",r&&(o+=r),o+=d+")",p++),c.length>2)for(var u=1;u<c.length-1;u++)if(-1===c[u].indexOf("%3f")&&-1===c[u].indexOf("?")){if(d="'"+(d=c[u])+"'",p>0&&(o+=" and "),"substringof"===(s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.contains:$b.odv4UniOperator.contains)||"not substringof"===s){var g=d;d=h,h=g}o+=s+"(",o+=h+",",r&&(o+=r),o+=d+")",p++}0===p?(s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.contains:$b.odv4UniOperator.contains,-1===a.indexOf("?")&&-1===a.indexOf("%3f")||(a=-1!==a.indexOf("?")?a.split("?").join(""):a.split("%3f").join("")),a="'"+a+"'"):s="wildcard"}else s=y(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?$b.odUniOperator.contains:$b.odv4UniOperator.contains,-1===a.indexOf("?")&&-1===a.indexOf("%3f")||(a=-1!==a.indexOf("?")?a.split("?").join(""):a.split("%3f").join("")),a="'"+a+"'";if("substringof"===s||"not substringof"===s){g=a;a=h,h=g}return"wildcard"!==s&&(o+=s+"(",o+=h+",",r&&(o+=r),o+=a+")"),o},e.prototype.addParams=function(e){t.prototype.addParams.call(this,e),delete e.reqParams.params},e.prototype.onComplexPredicate=function(t,e,i){for(var n=[],s=0;s<t.predicates.length;s++)n.push("("+this.onEachWhere(t.predicates[s],e,i)+")");return n.join(" "+t.condition+" ")},e.prototype.onEachWhere=function(t,e,i){return t.isComplex?this.onComplexPredicate(t,e,i):this.onPredicate(t,e,i)},e.prototype.onWhere=function(t){return this.pvt.search&&t.push(this.onEachWhere(this.pvt.search,null,!0)),t.join(" and ")},e.prototype.onEachSearch=function(t){t.fields&&0===t.fields.length&&$b.throwError("Query() - Search : oData search requires list of field names to search");for(var e=this.pvt.search||[],i=0;i<t.fields.length;i++)e.push(new Kb(t.fields[i],t.operator,t.key,t.ignoreCase));this.pvt.search=e},e.prototype.onSearch=function(t){return this.pvt.search=Kb.or(this.pvt.search),""},e.prototype.onEachSort=function(t){var i=[];if(t.name instanceof Array)for(var n=0;n<t.name.length;n++)i.push(e.getField(t.name[n])+("descending"===t.direction?" desc":""));else i.push(e.getField(t.name)+("descending"===t.direction?" desc":""));return i.join(",")},e.prototype.onSortBy=function(t){return t.reverse().join(",")},e.prototype.onGroup=function(t){return this.pvt.groups=t,[]},e.prototype.onSelect=function(t){for(var i=0;i<t.length;i++)t[i]=e.getField(t[i]);return t.join(",")},e.prototype.onAggregates=function(t){return this.pvt.aggregates=t,""},e.prototype.onCount=function(t){return!0===t?"allpages":""},e.prototype.beforeSend=function(t,e,i){$b.endsWith(i.url,this.options.batch)&&"post"===i.type.toLowerCase()?(e.headers.set("Accept",this.options.multipartAccept),e.headers.set("DataServiceVersion","2.0")):e.headers.set("Accept",this.options.accept),e.headers.set("DataServiceVersion","2.0"),e.headers.set("MaxDataServiceVersion","2.0")},e.prototype.processResponse=function(t,e,i,n,s,r){var o="odata.metadata";if(s&&"GET"===s.type&&!this.rootUrl&&t[o]){var a=t[o].split("/$metadata#");this.rootUrl=a[0],this.resourceTableName=a[1]}if(!y(t.d)){var l=i&&i.isCountRequired?t.d.results:t.d,h="__metadata";if(!y(l))for(var c=0;c<l.length;c++)y(l[c][h])||delete l[c][h]}var d=s&&s.pvtData,p=this.processBatchResponse(t,i,n,s,r);if(p)return p;var u=n&&s.fetchRequest.headers.get("DataServiceVersion"),g=null,m=u&&parseInt(u,10)||2;if(i&&i.isCountRequired){var f="__count";(t[f]||t["odata.count"])&&(g=t[f]||t["odata.count"]),t.d&&(t=t.d),(t[f]||t["odata.count"])&&(g=t[f]||t["odata.count"])}3===m&&t.value&&(t=t.value),t.d&&(t=t.d),m<3&&t.results&&(t=t.results);var v={};return v.count=g,v.result=t,this.getAggregateResult(d,t,v,null,i),$b.isNull(g)?v.result:{result:v.result,count:v.count,aggregates:v.aggregates}},e.prototype.convertToQueryString=function(t,e,i){var n=[],s="table",r=t[s]||"";delete t[s],i.dataSource.requiresFormat&&(t.$format="json");for(var o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];n.push(l+"="+t[l])}return n=n.join("&"),i.dataSource.url&&-1!==i.dataSource.url.indexOf("?")&&!r?n:n.length?r+"?"+n:r||""},e.prototype.localTimeReplacer=function(t,e){for(var i=0,n=y(e)?[]:Object.keys(e);i<n.length;i++){var s=n[i];e[s]instanceof Date&&(e[s]=$b.dateParse.toLocalTime(e[s]))}return e},e.prototype.insert=function(t,e,i){return{url:(t.dataSource.insertUrl||t.dataSource.url).replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(e,this.options.localTime?this.localTimeReplacer:null)}},e.prototype.remove=function(t,e,i,n){var s;return s="string"!=typeof i||$b.parse.isGuid(i)?"("+i+")":"('"+i+"')",{type:"DELETE",url:(t.dataSource.removeUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s}},e.prototype.update=function(t,e,i,n,s,r){var o;return"PATCH"!==this.options.updateType||y(r)||(i=this.compareAndRemove(i,r,e)),o="string"!=typeof i[e]||$b.parse.isGuid(i[e])?"("+i[e]+")":"('"+i[e]+"')",{type:this.options.updateType,url:(t.dataSource.updateUrl||t.dataSource.url).replace(/\/*$/,n?"/"+n:"")+o,data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},e.prototype.batchRequest=function(t,e,i,n,s){var r=i.guid=$b.getGuid(this.options.batchPre),o=t.dataSource.batchUrl||this.rootUrl?(t.dataSource.batchUrl||this.rootUrl)+"/"+this.options.batch:(t.dataSource.batchUrl||t.dataSource.url).replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;var a={url:i.url,key:i.key,cid:1,cSet:$b.getGuid(this.options.changeSet)},l="--"+r+"\n";return l+="Content-Type: multipart/mixed; boundary="+a.cSet.replace("--","")+"\n",this.pvt.changeSet=0,l+=this.generateInsertRequest(e.addedRecords,a,t),l+=this.generateUpdateRequest(e.changedRecords,a,t,s?s.changedRecords:[]),l+=this.generateDeleteRequest(e.deletedRecords,a,t),l+=a.cSet+"--\n",{type:"POST",url:o,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+r,data:l+="--"+r+"--"}},e.prototype.generateDeleteRequest=function(t,e,i){if(!t)return"";var n={method:"DELETE ",url:function(t,e,i){var n=$b.getObject(i,t[e]);return"number"==typeof n||$b.parse.isGuid(n)?"("+n+")":n instanceof Date?"("+t[e][i].toJSON()+")":"('"+n+"')"},data:function(t,e){return""}};return this.generateBodyContent(t,e,n,i)+"\n"},e.prototype.generateInsertRequest=function(t,e,i){if(!t)return"";var n={method:"POST ",url:function(t,e,i){return""},data:function(t,e){return JSON.stringify(t[e])+"\n\n"}};return this.generateBodyContent(t,e,n,i)},e.prototype.generateUpdateRequest=function(t,e,i,n){var s=this;if(!t)return"";t.forEach(function(t){return t=s.compareAndRemove(t,n.filter(function(i){return $b.getObject(e.key,i)===$b.getObject(e.key,t)})[0],e.key)});var r={method:this.options.updateType+" ",url:function(t,e,i){return"number"==typeof t[e][i]||$b.parse.isGuid(t[e][i])?"("+t[e][i]+")":t[e][i]instanceof Date?"("+t[e][i].toJSON()+")":"('"+t[e][i]+"')"},data:function(t,e){return JSON.stringify(t[e])+"\n\n"}};return this.generateBodyContent(t,e,r,i)},e.getField=function(t){return t.replace(/\./g,"/")},e.prototype.generateBodyContent=function(t,e,i,n){for(var s="",r=0;r<t.length;r++)s+="\n"+e.cSet+"\n",s+=this.options.changeSetContent+"\n\n",s+=i.method,"POST "===i.method?s+=(n.dataSource.insertUrl||n.dataSource.crudUrl||e.url)+i.url(t,r,e.key)+" HTTP/1.1\n":"PUT "===i.method||"PATCH "===i.method?s+=(n.dataSource.updateUrl||n.dataSource.crudUrl||e.url)+i.url(t,r,e.key)+" HTTP/1.1\n":"DELETE "===i.method&&(s+=(n.dataSource.removeUrl||n.dataSource.crudUrl||e.url)+i.url(t,r,e.key)+" HTTP/1.1\n"),s+="Accept: "+this.options.accept+"\n",s+="Content-Id: "+this.pvt.changeSet+++"\n",s+=this.options.batchChangeSetContentType+"\n",y(t[r]["@odata.etag"])?s+="\n":(s+="If-Match: "+t[r]["@odata.etag"]+"\n\n",delete t[r]["@odata.etag"]),s+=i.data(t,r);return s},e.prototype.processBatchResponse=function(t,e,i,n,s){if(i&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("xml"))return e.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&$b.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()){var r=i.headers.get("Content-Type"),o=void 0,a=void 0,l=t+"";if(r=r.substring(r.indexOf("=batchresponse")+1),(l=l.split(r)).length<2)return{};l=l[1];var h=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l);h&&l.replace(h[0],"");for(var c=h?h[1]:"",d=(l=l.split(c)).length;d>-1;d--)/\bContent-ID:/i.test(l[d])&&/\bHTTP.+201/.test(l[d])&&(o=parseInt(/\bContent-ID: (\d+)/i.exec(l[d])[1],10),s.addedRecords[o]&&(a=$b.parse.parseJson(/^\{.+\}/m.exec(l[d])[0]),f({},s.addedRecords[o],this.processResponse(a))));return s}return null},e.prototype.compareAndRemove=function(t,e,i){var n=this;return y(e)||Object.keys(t).forEach(function(s){s!==i&&"@odata.etag"!==s&&($b.isPlainObject(t[s])?(n.compareAndRemove(t[s],e[s]),0===Object.keys(t[s]).filter(function(t){return"@odata.etag"!==t}).length&&delete t[s]):(t[s]===e[s]||t[s]&&e[s]&&t[s].valueOf()===e[s].valueOf())&&delete t[s])}),t},e}(sC),oC=(function(t){function e(e){var i=t.call(this,e)||this;return i.options=f({},i.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),f(i.options,e||{}),i}tC(e,t),e.prototype.getModuleName=function(){return"ODataV4Adaptor"},e.prototype.onCount=function(t){return!0===t?"true":""},e.prototype.onPredicate=function(e,i,n){var s="",r=e.value,o=r instanceof Date;if(i instanceof Gb)for(var a=this.getQueryRequest(i),l=0;l<a.filters.length;l++)a.filters[l].e.key===e.value&&(n=!0);return s=t.prototype.onPredicate.call(this,e,i,n),o&&(s=s.replace(/datetime'(.*)'$/,"$1")),$b.parse.isGuid(r)&&(s=s.replace("guid","").replace(/'/g,"")),s},e.prototype.onEachSearch=function(t){var e=this.pvt.searches||[];e.push(t.key),this.pvt.searches=e},e.prototype.onSearch=function(t){return this.pvt.searches.join(" OR ")},e.prototype.onExpand=function(t){var e=this,i={},n={},s=t.expands.slice(),r=[];return t.selects.filter(function(t){return t.indexOf(".")>-1}).forEach(function(t){var n=t.split(".");if(n[0]in i||(i[n[0]]=[]),2===n.length)i[n[0]].length&&-1!==Object.keys(i).indexOf(n[0])?-1!==i[n[0]][0].indexOf("$expand")&&-1===i[n[0]][0].indexOf(";$select=")?i[n[0]][0]=i[n[0]][0]+";$select="+n[1]:i[n[0]][0]=i[n[0]][0]+","+n[1]:i[n[0]].push("$select="+n[1]);else{for(var s="$select="+n[n.length-1],r="",o="",a=1;a<n.length-1;a++)r=r+"$expand="+n[a]+"(",o+=")";var l=r+s+o;if(i[n[0]].length&&-1!==Object.keys(i).indexOf(n[0])&&e.expandQueryIndex(i[n[0]],!0)){var h=e.expandQueryIndex(i[n[0]]);i[n[0]][h]=i[n[0]][h]+l.replace("$expand=",",")}else i[n[0]].push(l)}}),Object.keys(i).forEach(function(t){-1===s.indexOf(t)&&s.push(t)}),s.forEach(function(t){n[t]=t in i?t+"("+i[t].join(";")+")":t}),Object.keys(n).forEach(function(t){return r.push(n[t])}),r.join(",")},e.prototype.expandQueryIndex=function(t,e){for(var i=0;i<t.length;i++)if(-1!==t[i].indexOf("$expand"))return!!e||i;return!e&&0},e.prototype.onDistinct=function(t){return"groupby(("+t.map(function(t){return rC.getField(t)}).join(",")+"))"},e.prototype.onSelect=function(e){return t.prototype.onSelect.call(this,e.filter(function(t){return-1===t.indexOf(".")}))},e.prototype.beforeSend=function(t,e,i){"POST"!==i.type&&"PUT"!==i.type&&"PATCH"!==i.type||e.headers.set("Prefer","return=representation"),e.headers.set("Accept",this.options.accept)},e.prototype.processResponse=function(e,i,n,s,r,o){var a="@odata.context",l="@context";if(r&&"GET"===r.type&&!this.rootUrl&&(e[a]||e[l])){var h=e[a]?e[a].split("/$metadata#"):e[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}var c=r&&r.pvtData,d=t.prototype.processBatchResponse.call(this,e,n,s,r,o);if(d)return d;var p=null,u="@odata.count",g="@count";n&&n.isCountRequired&&(u in e?p=e[u]:g in e&&(p=e[g])),e=y(e.value)?e:e.value;var m={};return m.count=p,m.result=e,this.getAggregateResult(c,e,m,null,n),$b.isNull(p)?m.result:{result:m.result,count:p,aggregates:m.aggregates}}}(rC),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}tC(e,t),e.prototype.getModuleName=function(){return"WebApiAdaptor"},e.prototype.insert=function(t,e,i){return{type:"POST",url:t.dataSource.url,data:JSON.stringify(e)}},e.prototype.remove=function(t,e,i,n){return{type:"DELETE",url:t.dataSource.url+"/"+i,data:JSON.stringify(i)}},e.prototype.update=function(t,e,i,n){return{type:"PUT",url:t.dataSource.url,data:JSON.stringify(i)}},e.prototype.batchRequest=function(t,e,i){var n=this,s=i.guid=$b.getGuid(this.options.batchPre),r=t.dataSource.url.replace(/\/*$/,"/"+this.options.batch);i.url=this.resourceTableName?this.resourceTableName:i.url;for(var o=[],a=function(n,r){e.addedRecords.forEach(function(r,a){var l=function(t,e,i){return""};o.push("--"+s),o.push("Content-Type: application/http; msgtype=request",""),o.push("POST /api/"+(t.dataSource.insertUrl||t.dataSource.crudUrl||i.url)+l(e.addedRecords,n,i.key)+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",r?JSON.stringify(r):"")})},l=0,h=e.addedRecords.length;l<h;l++)a(l);var c=function(r,a){e.changedRecords.forEach(function(a,l){n.options.updateType;var h=function(t,e,i){return""};o.push("--"+s),o.push("Content-Type: application/http; msgtype=request",""),o.push("PUT /api/"+(t.dataSource.updateUrl||t.dataSource.crudUrl||i.url)+h(e.changedRecords,r,i.key)+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",a?JSON.stringify(a):"")})};for(l=0,h=e.changedRecords.length;l<h;l++)c(l);var d=function(n,r){e.deletedRecords.forEach(function(r,a){var l=function(t,e,i){var n=$b.getObject(i,t[e]);return"number"==typeof n||$b.parse.isGuid(n)?"/"+n:n instanceof Date?"/"+t[e][i].toJSON():"/'"+n+"'"};o.push("--"+s),o.push("Content-Type: application/http; msgtype=request",""),o.push("DELETE /api/"+(t.dataSource.removeUrl||t.dataSource.crudUrl||i.url)+l(e.deletedRecords,n,i.key)+" HTTP/1.1"),o.push("Content-Type: application/json; charset=utf-8"),o.push("Host: "+location.host),o.push("",r?JSON.stringify(r):"")})};for(l=0,h=e.deletedRecords.length;l<h;l++)d(l);return o.push("--"+s+"--",""),{type:"POST",url:r,contentType:"multipart/mixed; boundary="+s,data:o.join("\r\n")}},e.prototype.beforeSend=function(t,e,i){e.headers.set("Accept","application/json, text/javascript, */*; q=0.01")},e.prototype.processResponse=function(t,e,i,n,s,r){var o=s&&s.pvtData,a=null,l={};if(s&&"post"!==s.type.toLowerCase()){var h=n&&s.fetchRequest.headers.get("DataServiceVersion"),c=h&&parseInt(h,10)||2;i&&i.isCountRequired&&($b.isNull(t.Count)||(a=t.Count)),c<3&&t.Items&&(t=t.Items),l.count=a,l.result=t,this.getAggregateResult(o,t,l,null,i)}return l.result=l.result||t,$b.isNull(a)?l.result:{result:l.result,count:l.count,aggregates:l.aggregates}}}(rC),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}tC(e,t),e.prototype.processQuery=function(t,e,i){var n=(new sC).processQuery(t,e,i),s=$b.parse.parseJson(n.data),r={};if(s.param)for(var o=0;o<s.param.length;o++){var a=s.param[o],l=Object.keys(a)[0];r[l]=a[l]}r.value=s;return{data:JSON.stringify(r,$b.parse.jsonDateReplacer),url:n.url,pvtData:n.pvtData,type:"POST",contentType:"application/json; charset=utf-8"}}}(sC),function(t){function e(){return t.call(this)||this}return tC(e,t),e.prototype.insert=function(t,e,i,n,s){return this.pvt.position=s,this.updateType="add",{url:t.dataSource.insertUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(f({},{value:e,table:i,action:"insert"},$b.getAddParams(this,t,n)))}},e.prototype.remove=function(e,i,n,s,r){return t.prototype.remove.call(this,e,i,n),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(f({},{key:n,keyColumn:i,table:s,action:"remove"},$b.getAddParams(this,e,r)))}},e.prototype.update=function(t,e,i,n,s){return this.updateType="update",this.updateKey=e,{type:"POST",url:t.dataSource.updateUrl||t.dataSource.crudUrl||t.dataSource.url,data:JSON.stringify(f({},{value:i,action:"update",keyColumn:e,key:i[e],table:n},$b.getAddParams(this,t,s)))}},e.prototype.processResponse=function(e,i,n,s,r,o,a){var l;if(e="batch"===(r?JSON.parse(r.data):e).action?$b.parse.parseJson(e):e,"add"===this.updateType&&t.prototype.insert.call(this,i,e,null,null,this.pvt.position),"update"===this.updateType&&t.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(l=0;l<e.added.length;l++)t.prototype.insert.call(this,i,e.added[l]);if(e.changed)for(l=0;l<e.changed.length;l++)t.prototype.update.call(this,i,a.key,e.changed[l]);if(e.deleted)for(l=0;l<e.deleted.length;l++)t.prototype.remove.call(this,i,a.key,e.deleted[l]);return e},e.prototype.batchRequest=function(t,e,i,n,s){return{type:"POST",url:t.dataSource.batchUrl||t.dataSource.crudUrl||t.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(f({},{changed:e.changedRecords,added:e.addedRecords,deleted:e.deletedRecords,action:"batch",table:i.url,key:i.key},$b.getAddParams(this,t,n)))}},e.prototype.addParams=function(t){(new sC).addParams(t)},e.prototype.beforeSend=function(t,e,i){},e}(nC)),aC=function(t){function e(e){var i=t.call(this)||this;return i.options=f({},i.options,{getData:function(){},addRecord:function(){},updateRecord:function(){},deleteRecord:function(){},batchUpdate:function(){}}),f(i.options,e||{}),i}return tC(e,t),e.prototype.getModuleName=function(){return"CustomDataAdaptor"},e}(sC),lC=(function(t){function e(e){var i=t.call(this)||this;return i.opt=e,i.schema=i.opt.response,i.query=i.opt.query,i.getVariables=i.opt.getVariables?i.opt.getVariables:function(){},i.getQuery=function(){return i.query},i}tC(e,t),e.prototype.getModuleName=function(){return"GraphQLAdaptor"},e.prototype.processQuery=function(e,i){var n=t.prototype.processQuery.apply(this,arguments),s=JSON.parse(n.data),r={};["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"].filter(function(t){r[t]="searchwhereparams".indexOf(t)>-1?JSON.stringify(s[t]):s[t]});var o=this.getVariables()||{};o.datamanager=r;var a=JSON.stringify({query:this.getQuery(),variables:o});return n.data=a,n},e.prototype.processResponse=function(t,e,i,n,s){var r,o,a=t,l=c(this.schema.result,a.data);this.schema.count&&(r=c(this.schema.count,a.data)),this.schema.aggregates&&(o=y(o=c(this.schema.aggregates,a.data))?o:$b.parse.parseJson(o));var h=s.pvtData||{},d={result:l,aggregates:o},p=d;return h&&h.groups&&h.groups.length&&this.getAggregateResult(h,p,d,null,i),y(r)?d.result:{result:d.result,count:r,aggregates:o}},e.prototype.insert=function(){var e=t.prototype.insert.apply(this,arguments);return this.generateCrudData(e,"insert")},e.prototype.update=function(){var e=t.prototype.update.apply(this,arguments);return this.generateCrudData(e,"update")},e.prototype.remove=function(){var e=t.prototype.remove.apply(this,arguments);return this.generateCrudData(e,"remove")},e.prototype.batchRequest=function(e,i,n,s,r){var o=t.prototype.batchRequest.apply(this,arguments),a=JSON.parse(o.data);return a.key=n.key,o.data=JSON.stringify(a),this.generateCrudData(o,"batch")},e.prototype.generateCrudData=function(t,e){var i=JSON.parse(t.data);return t.data=JSON.stringify({query:this.opt.getMutation(e),variables:i}),t}}(sC),function(t){function e(e,i,n){var s=t.call(this)||this;s.isCrudAction=!1,s.isInsertAction=!1,y(e)||(s.cacheAdaptor=e),s.pageSize=n,s.guidId=$b.getGuid("cacheAdaptor");window.localStorage.setItem(s.guidId,JSON.stringify({keys:[],results:[]}));var r=s.guidId;return y(i)||setInterval(function(){for(var t=$b.parse.parseJson(window.localStorage.getItem(r)),e=[],n=0;n<t.results.length;n++){var s=+new Date,o=+new Date(t.results[n].timeStamp);t.results[n].timeStamp=s-o,s-o>i&&e.push(n)}for(n=0;n<e.length;n++)t.results.splice(e[n],1),t.keys.splice(e[n],1);window.localStorage.removeItem(r),window.localStorage.setItem(r,JSON.stringify(t))},i),s}return tC(e,t),e.prototype.generateKey=function(t,e){var i=this.getQueryRequest(e),n=Gb.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=t,r="onPage";r in n&&(s+=n[r].pageIndex),i.sorts.forEach(function(t){s+=t.e.direction+t.e.fieldName}),i.groups.forEach(function(t){s+=t.e.fieldName}),i.searches.forEach(function(t){s+=t.e.searchKey});for(var o=0;o<i.filters.length;o++){var a=i.filters[o];if(a.e.isComplex){var l=e.clone();l.queries=[];for(var h=0;h<a.e.predicates.length;h++)l.queries.push({fn:"onWhere",e:a.e.predicates[h],filter:e.queries.filter});s+=a.e.condition+this.generateKey(t,l)}else s+=a.e.field+a.e.operator+a.e.value}return s},e.prototype.processQuery=function(t,e,i){var n=this.generateKey(t.dataSource.url,e),s=$b.parse.parseJson(window.localStorage.getItem(this.guidId)),r=s?s.results[s.keys.indexOf(n)]:null;return null==r||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):r},e.prototype.processResponse=function(t,e,i,n,s,r){if(this.isInsertAction||s&&this.cacheAdaptor.options.batch&&$b.endsWith(s.url,this.cacheAdaptor.options.batch)&&"post"===s.type.toLowerCase())return this.cacheAdaptor.processResponse(t,e,i,n,s,r);t=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var o=i?this.generateKey(e.dataSource.url,i):e.dataSource.url,a={},l=(a=$b.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(o);for(-1!==l&&(a.results.splice(l,1),a.keys.splice(l,1)),a.results[a.keys.push(o)-1]={keys:o,result:t.result,timeStamp:new Date,count:t.count};a.results.length>this.pageSize;)a.results.splice(0,1),a.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(a)),t},e.prototype.beforeSend=function(t,e,i){!y(this.cacheAdaptor.options.batch)&&$b.endsWith(i.url,this.cacheAdaptor.options.batch)&&"post"===i.type.toLowerCase()&&e.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),t.dataSource.crossDomain||e.headers.set("Accept",this.cacheAdaptor.options.accept)},e.prototype.update=function(t,e,i,n){return this.isCrudAction=!0,this.cacheAdaptor.update(t,e,i,n)},e.prototype.insert=function(t,e,i){return this.isInsertAction=!0,this.cacheAdaptor.insert(t,e,i)},e.prototype.remove=function(t,e,i,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(t,e,i,n)},e.prototype.batchRequest=function(t,e,i){return this.cacheAdaptor.batchRequest(t,e,i)},e}(sC)),hC=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}l((n=n.apply(t,e||[])).next())})},cC=function(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},dC=function(){function t(t,e,i){var n,s=this;if(this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isEnableCache=!1,this.isInitialLoad=!0,this.isEnableCache=!1,t||this.dataSource||(t=[]),i=i||t.adaptor,t&&!1===t.timeZoneHandling&&(this.timeZoneHandling=t.timeZoneHandling),t instanceof Array?n={json:t,offline:!0}:"object"==typeof t?(t.json||(t.json=[]),t.enablePersistence||(t.enablePersistence=!1),t.id||(t.id=""),t.ignoreOnPersist||(t.ignoreOnPersist=[]),n={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,enableCache:t.enableCache,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:void 0!==t.offline?t.offline:!(t.adaptor instanceof oC||t.adaptor instanceof aC)&&!t.url,requiresFormat:t.requiresFormat,enablePersistence:t.enablePersistence,id:t.id,ignoreOnPersist:t.ignoreOnPersist}):$b.throwError("DataManager: Invalid arguments"),void 0!==n.requiresFormat||$b.isCors()||(n.requiresFormat=!!y(n.crossDomain)||n.crossDomain),void 0===n.dataType&&(n.dataType="json"),this.isEnableCache=n.enableCache,this.dataSource=n,this.defaultQuery=e,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=i||new rC,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new Gb),this.ready.then(function(t){s.dataSource.offline=!0,s.isDataAvailable=!0,n.json=t.result,s.adaptor=new nC})):this.adaptor=n.offline?new nC:new rC,!n.jsonp&&this.adaptor instanceof rC&&(n.jsonp="callback"),this.adaptor=i||this.adaptor,this.isEnableCache){this.guidId=$b.getGuid("cacheAdaptor");window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}))}return n.enableCaching&&(this.adaptor=new lC(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return Object.defineProperty(t.prototype,"moduleName",{get:function(){return"datamanager"},enumerable:!0,configurable:!0}),t.prototype.getPersistedData=function(t){var e=localStorage.getItem(t||this.dataSource.id);return JSON.parse(e)},t.prototype.setPersistData=function(t,e,i){localStorage.setItem(e||this.dataSource.id,JSON.stringify(i||this.persistQuery))},t.prototype.setPersistQuery=function(t){var e=this,i=this.getPersistedData();if(this.isInitialLoad&&i&&Object.keys(i).length){this.persistQuery=i,this.persistQuery.queries=this.persistQuery.queries.filter(function(t){if(e.dataSource.ignoreOnPersist&&e.dataSource.ignoreOnPersist.length&&t.fn&&e.dataSource.ignoreOnPersist.some(function(e){return t.fn===e}))return!1;if("onWhere"===t.fn){var i=t.e;if(i&&i.isComplex&&i.predicates instanceof Array){var n=i.predicates.map(function(t){if(t.predicates&&t.predicates instanceof Array){var e=t.predicates.map(function(t){var e=t.field,i=t.operator,n=t.value,s=t.ignoreCase,r=t.ignoreAccent,o=t.matchCase;return new Kb(e,i,n,s,r,o)});return"and"===t.condition?Kb.and(e):Kb.or(e)}var i=t.field,n=t.operator,s=t.value,r=t.ignoreCase,o=t.ignoreAccent,a=t.matchCase;return new Kb(i,n,s,r,o,a)});t.e=new Kb(n[0],i.condition,n.slice(1))}}return!0});var n=f(new Gb,this.persistQuery);return this.isInitialLoad=!1,n}return this.persistQuery=t,this.isInitialLoad=!1,t},t.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},t.prototype.executeLocal=function(e){this.defaultQuery||e instanceof Gb||$b.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||$b.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(e=this.setPersistQuery(e)),e=e||this.defaultQuery;var i=this.adaptor.processQuery(this,e);if(e.subQuery){var n=e.subQuery.fromTable,s=e.subQuery.lookups,r=e.isCountRequired?i.result:i;s&&s instanceof Array&&$b.buildHierarchy(e.subQuery.fKey,n,r,s,e.subQuery.key);for(var o=0;o<r.length;o++)r[o][n]instanceof Array&&(r[o]=f({},{},r[o]),r[o][n]=this.adaptor.processResponse(e.subQuery.using(new t(r[o][n].slice(0))).executeLocal(),this,e))}return this.adaptor.processResponse(i,this,e)},t.prototype.executeQuery=function(e,i,n,s){var r=this,o="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(e=this.setPersistQuery(e)),"function"==typeof e&&(s=n,n=i,i=e,e=null),e||(e=this.defaultQuery),e instanceof Gb||$b.throwError("DataManager - executeQuery() : A query is required to execute");var a=new pC,l={query:e};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!y(this.adaptor[o])||this.isCustomDataAdaptor(this.adaptor)){var h=this.isEnableCache?this.processQuery(e):this.adaptor.processQuery(this,e);y(this.adaptor[o])?!y(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,e)):(l=t.getDeferedArgs(e,h,l),a.resolve(l)):this.adaptor[o](h,a,l,e)}else t.nextTick(function(){var i=r.executeLocal(e);l=t.getDeferedArgs(e,i,l),a.resolve(l)});return(i||n)&&a.promise.then(i,n),s&&a.promise.then(s,s),a.promise},t.prototype.getQueryRequest=function(t){var e={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return e.sorts=Gb.filterQueries(t.queries,"onSortBy"),e.groups=Gb.filterQueries(t.queries,"onGroup"),e.filters=Gb.filterQueries(t.queries,"onWhere"),e.searches=Gb.filterQueries(t.queries,"onSearch"),e.aggregates=Gb.filterQueries(t.queries,"onAggregates"),e},t.prototype.generateKey=function(t,e){var i=this.getQueryRequest(e),n=Gb.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=t,r="onPage";i.sorts.forEach(function(t){s+=t.e.direction+t.e.fieldName}),i.groups.forEach(function(t){s+=t.e.fieldName}),i.searches.forEach(function(t){s+=t.e.searchKey});for(var o=0;o<i.filters.length;o++){var a=i.filters[o];if(a.e.isComplex){var l=e.clone();l.queries=[];for(var h=0;h<a.e.predicates.length;h++)l.queries.push({fn:"onWhere",e:a.e.predicates[h],filter:e.queries.filter});s+=a.e.condition+this.generateKey(t,l)}else s+=a.e.field+a.e.operator+a.e.value}if(!y(this.previousCacheQuery)&&this.previousCacheQuery!==s){window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}))}return this.previousCacheQuery=s,r in n&&(s+=n[r].pageIndex),s},t.prototype.processQuery=function(t){var e=this.generateKey(this.dataSource.url,t),i=JSON.parse(window.localStorage.getItem(this.guidId)),n=i?i.results[i.keys.indexOf(e)]:null;return null!=n?$b.parse.parseJson(n):this.adaptor.processQuery(this,t)},t.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},t.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},t.prototype.extendRequest=function(t,e,i){return f({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},t.prototype.makeRequest=function(t,e,i,n){var s=this,r=!!n.subQuerySelector,o=function(t){i.error=t,e.reject(i)},a=function(t,n,s,r,o,a,l){i.xhr=s,i.count=n?parseInt(n.toString(),10):0,i.result=t,i.request=r,i.aggregates=a,i.actual=o,i.virtualSelectRecords=l,e.resolve(i)},l=function(t,e){var l=new pC,h={parent:i};n.subQuery.isChild=!0;var c=s.adaptor.processQuery(s,n.subQuery,t?s.adaptor.processResponse(t):e),d=s.makeRequest(c,l,h,n.subQuery);return r||l.then(function(e){t&&($b.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,t,e,n.subQuery.key),a(t,e.count,e.xhr))},o),d},h=this.extendRequest(t,function(t,h){if(s.isGraphQLAdaptor(s.adaptor)&&!y(t.errors))return o(t.errors);var c;s.isCustomDataAdaptor(s.adaptor)&&(h=f({},s.fetchReqOption,h)),-1===h.contentType.indexOf("xml")&&s.dateParse&&!s.isEnableCache&&(t=$b.parse.parseJson(t)),s.afterReponseRequest(t).then(function(t){if(c=s.adaptor.processResponse(t,s,n,h.fetchRequest,h),s.isEnableCache){var e=n?s.generateKey(s.dataSource.url,n):s.dataSource.url,i={},o=(i=JSON.parse(window.localStorage.getItem(s.guidId))).keys.indexOf(e);-1!==o&&(i.results.splice(o,1),i.keys.splice(o,1)),i.results[i.keys.push(e)-1]={keys:e,result:c.result,timeStamp:new Date,count:c.count},window.localStorage.setItem(s.guidId,JSON.stringify(i))}-1===h.contentType.indexOf("xml")&&s.dateParse&&s.isEnableCache&&(c=$b.parse.parseJson(c));var d=0,p=null,u=t.virtualSelectRecords;n.isCountRequired&&(d=c.count,p=c.aggregates,c=c.result),n.subQuery?r||l(c,h):a(c,d,h.fetchRequest,h.type,t,p,u)}).catch(function(t){return s.dataManagerFailure(t,e,i)})},o);if(this.isCustomDataAdaptor(this.adaptor)){this.fetchReqOption=h;var c=h;this.adaptor.options.getData({data:c.data,onSuccess:c.onSuccess,onFailure:c.onFailure})}else{var d;this.useMiddleware(h).then(function(t){(d=new V(h)).beforeSend=function(){s.beforeSend(d.fetchRequest,d,t)},(h=d.send()).catch(function(t){return!0}),s.requests.push(d)}).catch(function(t){return s.dataManagerFailure(t,e,i)})}if(r){var p=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});p&&p.length?Promise.all([h,l(null,p)]).then(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=t[0],o=s.adaptor.processResponse(i[0],s,n,s.requests[0].fetchRequest,s.requests[0]),l=0;n.isCountRequired&&(l=o.count,o=o.result);var h=s.adaptor.processResponse(i[1],s,n.subQuery,s.requests[1].fetchRequest,s.requests[1]);l=0,n.subQuery.isCountRequired&&(l=h.count,h=h.result),$b.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,o,h,n.subQuery.key),r=!1,a(o,l,s.requests[0].fetchRequest)}):r=!1}return h},t.prototype.dataManagerFailure=function(t,e,i){i.error=t,e.reject(i)},t.prototype.afterReponseRequest=function(t){return hC(this,void 0,void 0,function(){var e,i;return cC(this,function(n){switch(n.label){case 0:return[4,this.applyPostRequestMiddlewares(t)];case 1:return e=n.sent(),(i=new pC).resolve(e),[2,i.promise]}})})},t.prototype.applyPostRequestMiddlewares=function(t){return hC(this,void 0,void 0,function(){return cC(this,function(e){return[2,t]})})},t.prototype.useMiddleware=function(t){return hC(this,void 0,void 0,function(){var e,i;return cC(this,function(n){switch(n.label){case 0:return[4,this.applyPreRequestMiddlewares(t)];case 1:return e=n.sent(),(i=new pC).resolve(e),[2,i.promise]}})})},t.prototype.applyPreRequestMiddlewares=function(t){return hC(this,void 0,void 0,function(){return cC(this,function(e){return[2,t]})})},t.prototype.beforeSend=function(t,e,i){this.adaptor.beforeSend(this,t,e);var n,s=[];this.dataSource.headers&&(s=s.concat(this.dataSource.headers)),i&&i.headers&&(s=s.concat(i.headers));for(var r=0;s&&r<s.length;r++){n=[];for(var o=0,a=Object.keys(s[r]);o<a.length;o++){var l=a[o];n.push(l),t.headers.set(l,s[r][l])}}},t.prototype.saveChanges=function(t,e,i,n,s){var r=this;i instanceof Gb&&(n=i,i=null);var o={url:i,key:e||this.dataSource.key},a=this.adaptor.batchRequest(this,t,o,n||new Gb,s),l="dofetchRequest";if(this.dataSource.offline)return a;if(y(this.adaptor[l])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(a,this.adaptor.options.batchUpdate,t);var h=new pC,c=new V(a);return c.beforeSend=function(){r.beforeSend(c.fetchRequest,c)},c.onSuccess=function(e,i){r.isGraphQLAdaptor(r.adaptor)&&(y(e.errors)||c.onFailure(JSON.stringify(e.errors))),h.resolve(r.adaptor.processResponse(e,r,null,i.fetchRequest,i,t,o))},c.onFailure=function(t){h.reject([{error:t}])},c.send().catch(function(t){return!0}),h.promise}return this.adaptor[l](a)},t.prototype.insert=function(t,e,i,n){e instanceof Gb&&(i=e,e=null);var s=this.adaptor.insert(this,t,e,i,n),r="dofetchRequest";return this.dataSource.offline?s:y(this.adaptor[r])?this.dofetchRequest(s,this.adaptor.options.addRecord):this.adaptor[r](s)},t.prototype.remove=function(t,e,i,n){"object"==typeof e&&(e=$b.getObject(t,e)),i instanceof Gb&&(n=i,i=null);var s=this.adaptor.remove(this,t,e,i,n),r="dofetchRequest";if(this.dataSource.offline)return s;if(y(this.adaptor[r])){var o=this.adaptor.options.deleteRecord;return this.dofetchRequest(s,o)}return this.adaptor[r](s)},t.prototype.update=function(t,e,i,n,s){i instanceof Gb&&(n=i,i=null),this.isEnableCache&&(this.cacheQuery=this.generateKey(this.dataSource.url,n));var r=this.adaptor.update(this,t,e,i,n,s),o="dofetchRequest";if(this.dataSource.offline)return r;if(y(this.adaptor[o])){var a=this.adaptor.options.updateRecord;return this.dofetchRequest(r,a)}return this.adaptor[o](r)},t.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},t.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},t.prototype.successFunc=function(t,e,i){this.isGraphQLAdaptor(this.adaptor)&&(y((s="object"==typeof t?t:JSON.parse(t)).errors)||this.failureFunc(JSON.stringify(s.errors)));this.isCustomDataAdaptor(this.adaptor)&&(e=f({},this.fetchReqOption,e));try{$b.parse.parseJson(t)}catch(e){t=[]}if(this.isEnableCache){var n=JSON.parse(e.data);if("insert"===n.action||"remove"===n.action){window.localStorage.setItem(this.guidId,JSON.stringify({keys:[],results:[]}))}else if("update"===n.action){var s,r=JSON.parse(window.localStorage.getItem(this.guidId));if((s=r?r.results[r.keys.indexOf(this.cacheQuery)]:null)&&s.result)for(var o=s.result,a=0;a<o.length;a++)if(o[a][n.keyColumn]===n.key){o[a]=n.value,window.localStorage.setItem(this.guidId,JSON.stringify(r));break}}}t=this.adaptor.processResponse($b.parse.parseJson(t),this,null,e.fetchRequest,e,i),this.fetchDeffered.resolve(t)},t.prototype.failureFunc=function(t){this.isEnableCache&&(this.cacheQuery=""),this.fetchDeffered.reject([{error:t}])},t.prototype.dofetchRequest=function(t,e,i){var n=this;if(t=f({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.fetchDeffered=new pC,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this),changes:i});else{var s=new V(t);s.beforeSend=function(){n.beforeSend(s.fetchRequest,s)},s.onSuccess=this.successFunc.bind(this),s.onFailure=this.failureFunc.bind(this),s.send().catch(function(t){return!0})}return this.fetchDeffered.promise},t.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},t}(),pC=function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)},uC=function(){function t(){this.dataTable={}}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"DataBinding"},t.prototype.initData=function(t,e){var i,n=t.dataManager||t.dataSource||{};(i=n.data||n.json||(n.dataSource?n.dataSource.json:void 0))&&0===i.length&&n.dataSource.data&&(i=n.dataSource.data),i&&i.length&&(this.applyDataSource(t,i,e),e.trigger("dataLoaded",{diagram:x()?null:e}))},t.prototype.initSource=function(t,e){var i,n=this,s=t,r=t;if(s.dataManager instanceof dC||s.dataSource instanceof dC){var o=(r.dataManager||r.dataSource).defaultQuery||new Gb;(t.dataManager||t.dataSource).executeQuery(o).then(function(s){i=s.result,e.isDestroyed||(e.protectPropertyChange(!0),n.applyDataSource(t,i,e),e.refreshDiagram(),e.protectPropertyChange(!1),e.trigger("dataLoaded",{diagram:x()?null:e}))})}},t.prototype.applyDataSource=function(t,e,i){var n,s,r;this.dataTable={};var o,a,l=[],h=[];if(void 0!==e){for(var c=0;c<e.length;c++)void 0===(n=e[parseInt(c.toString(),10)])[t.parentId]||null===n[t.parentId]||"object"!=typeof n[t.parentId]||0===n[t.parentId].length?isNaN(n[t.parentId])&&void 0!==n[t.parentId]?void 0!==l[n[t.parentId]?n[t.parentId].toLowerCase():n[t.parentId]]?l[n[t.parentId].toLowerCase()].items.push(n):l[n[t.parentId]?n[t.parentId].toLowerCase():n[t.parentId]]={items:[n]}:void 0!==l[n[t.parentId]]?l[n[t.parentId]].items.push(n):l[n[t.parentId]]={items:[n]}:l=this.updateMultipleRootNodes(n,l,t,e),t.root&&isNaN(t.root)&&n[t.id]&&isNaN(n[t.id])?t.root.toLowerCase()===n[t.id].toLowerCase()&&(s={items:[n]}):t.root===n[t.id]&&(s={items:[n]});if(s)h.push(s);else for(var d=0,p=Object.keys(l);d<p.length;d++){var u=p[d];u&&"undefined"!==u&&"''"!==u&&"null"!==u||h.push(l[""+u])}for(var g=0;g<h.length;g++)for(var m=0;m<h[parseInt(g.toString(),10)].items.length;m++)o=h[parseInt(g.toString(),10)].items[parseInt(m.toString(),10)],r=this.applyNodeTemplate(t,o,i),i.nodes.push(r),isNaN(o[t.id])&&void 0!==o[t.id]?this.dataTable[o[t.id].toLowerCase()]=r:this.dataTable[o[t.id]]=r,void 0!==(a=isNaN(r.data[t.id])&&void 0!==r.data[t.id]?l[r.data[t.id].toLowerCase()]:l[r.data[t.id]])&&this.renderChildNodes(t,a,r.id,l,i)}this.dataTable=null},t.prototype.updateMultipleRootNodes=function(t,e,i,n){for(var s,r=t[i.parentId],o=0;o<r.length;o++)r[parseInt(o.toString(),10)]?e[""+(s=isNaN(r[parseInt(o.toString(),10)])?r[parseInt(o.toString(),10)].toLowerCase():r[parseInt(o.toString(),10)])]?e[""+s].items.push(t):e[""+s]={items:[t]}:e[""+(s=r[parseInt(o.toString(),10)])]?e[""+s].items.push(t):e[""+s]={items:[t]};return e},t.prototype.applyNodeTemplate=function(t,e,i){var n={id:Hn(),data:e};if("Flowchart"===i.layout.type){var s=this.getFlowChartNodeShape(e),r={fill:e.color?e.color:"white",strokeColor:e.stroke?e.stroke:"black",strokeWidth:e.strokeWidth?e.strokeWidth:1};n.shape=s,n.style=r,n.annotations=[{content:e.name?e.name:""}]}var o=is(t.doBinding);o&&o(n,e,i);var a=new Ny(i,"nodes",n,!0);if(bm(a,n,i.nodeDefaults),t.dataMapSettings)for(var l=void 0,h=[],c=[],d=0;d<t.dataMapSettings.length;d++){if(-1!==t.dataMapSettings[parseInt(d.toString(),10)].property.indexOf(".")){c=this.splitString(t.dataMapSettings[parseInt(d.toString(),10)].property);for(var p=0;p<c.length;p++)-1!==c[parseInt(p.toString(),10)].indexOf("[")&&(l=c[parseInt(p.toString(),10)].indexOf("["),h=c[parseInt(p.toString(),10)].split("["));if(l)if(c[2])a[h[0]][c[0].charAt(l+1)][c[1]][c[2]]=e[t.dataMapSettings[parseInt(d.toString(),10)].field];else{var u=e[t.dataMapSettings[parseInt(d.toString(),10)].field];a[h[0]][c[0].charAt(l+1)][c[1]]=u}else c[2]?a[c[0]][c[1]][c[2]]=e[t.dataMapSettings[parseInt(d.toString(),10)].field]:a[c[0]][c[1]]=e[t.dataMapSettings[parseInt(d.toString(),10)].field]}else{var g=t.dataMapSettings[parseInt(d.toString(),10)].property;a[""+(g=g.charAt(0).toLowerCase()+g.slice(1))]=e[t.dataMapSettings[parseInt(d.toString(),10)].field]}l=0,h=[],c=[]}return this.collectionContains(a,i,t.id,t.parentId)?e[t.id]&&isNaN(e[t.id])?this.dataTable[e[t.id].toLowerCase()]:this.dataTable[e[t.id]]:a},t.prototype.getFlowChartNodeShape=function(t){if(""!==t.shape)switch(t.shape){case"Rectangle":return{type:"Basic",shape:"Rectangle"};case"Decision":return{type:"Flow",shape:"Decision"};case"Hexagon":return{type:"Path",data:"M 0 0 L 2 -2 L 11 -2 L 13 0 L 11 2 L 2 2 L 0 0"};case"Ellipse":return{type:"Basic",shape:"Ellipse"};case"Terminator":return{type:"Flow",shape:"Terminator"};case"PredefinedProcess":return{type:"Flow",shape:"PreDefinedProcess"};case"Parallelogram":return{type:"Basic",shape:"Parallelogram"};case"ParallelogramAlt":return{type:"Path",data:"M 0 0 L 12 0 L 14 2 L 2 2 L 0 0"};case"Trapezoid":return{type:"Path",data:"M 0 0 L 1 -1 L 5 -1 L 6 0 L 0 0"};case"TrapezoidAlt":return{type:"Path",data:"M 0 0 L 5 0 L 4 1 L 1 1 L 0 0"};case"DataSource":return{type:"Path",data:"M 0 1 L 0 6 C 2 7 4 7 6 6 L 6 1 C 5 0 1 0 0 1 C 1 2 5 2 6 1"};case"Asymmetric":return{type:"Path",data:"M 0 0 L 8 0 L 8 2 L 0 2 L 2 1 L 0 0"};case"DoubleCircle":return{type:"Path",data:"M 0 0 A 1 1 0 0 0 7 0 A 1 1 0 0 0 0 0 M -1 0 A 1 1 0 0 0 8 0 A 1 1 0 0 0 -1 0"};case"Document":return{type:"Flow",shape:"Document"};case"PaperTap":return{type:"Flow",shape:"PaperTap"};case"DirectData":return{type:"Flow",shape:"DirectData"};case"SequentialData":return{type:"Flow",shape:"SequentialData"};case"Sort":return{type:"Flow",shape:"Sort"};case"MultiDocument":return{type:"Flow",shape:"MultiDocument"};case"Collate":return{type:"Flow",shape:"Collate"};case"SummingJunction":return{type:"Flow",shape:"SummingJunction"};case"Or":return{type:"Flow",shape:"Or"};case"InternalStorage":return{type:"Flow",shape:"InternalStorage"};case"Extract":return{type:"Flow",shape:"Extract"};case"ManualOperation":return{type:"Flow",shape:"ManualOperation"};case"Merge":return{type:"Flow",shape:"Merge"};case"OffPageReference":return{type:"Flow",shape:"OffPageReference"};case"SequentialAccessStorage":return{type:"Flow",shape:"SequentialAccessStorage"};case"Data":return{type:"Flow",shape:"Data"};case"Card":return{type:"Flow",shape:"Card"};case"Delay":return{type:"Flow",shape:"Delay"};case"Preparation":return{type:"Flow",shape:"Preparation"};case"Display":return{type:"Flow",shape:"Display"};case"ManualInput":return{type:"Flow",shape:"ManualInput"};case"LoopLimit":return{type:"Flow",shape:"LoopLimit"};case"StoredData":return{type:"Flow",shape:"StoredData"};case"Annotation":return{type:"Flow",shape:"Annotation"};case"Annotation2":return{type:"Flow",shape:"Annotation2"};default:return{type:"Flow",shape:"Process"}}return{type:"Flow",shape:"Process"}},t.prototype.splitString=function(t){var e=[];e=t.split(".");for(var i=0;i<e.length;i++)e[parseInt(i.toString(),10)]=e[parseInt(i.toString(),10)].charAt(0).toLowerCase()+e[parseInt(i.toString(),10)].slice(1);return e},t.prototype.renderChildNodes=function(t,e,i,n,s,r){var o,a,l;r||(r=new Set(s.connectors.filter(function(t){return t.sourceID&&t.targetID}).map(function(t){return t.sourceID+"->"+t.targetID})));for(var h=0;h<e.items.length;h++)if((o=e.items[parseInt(h.toString(),10)])[t.id]){l=this.applyNodeTemplate(t,o,s);var c=!1;if(this.collectionContains(l,s,t.id,t.parentId)?c=!0:(o[t.id]&&isNaN(o[t.id])?this.dataTable[o[t.id].toLowerCase()]=l:this.dataTable[o[t.id]]=l,s.nodes.push(l)),!this.containsConnector(s,i,l.id,r)){var d=this.applyConnectorTemplate(i,l.id,s);s.connectors.push(d),r.add(d.sourceID+"->"+d.targetID)}c||void 0!==(a=l.data[t.id]&&isNaN(l.data[t.id])?n[l.data[t.id].toLowerCase()]:n[l.data[t.id]])&&this.renderChildNodes(t,a,l.id,n,s,r)}},t.prototype.containsConnector=function(t,e,i,n){return e&&i&&n.has(e+"->"+i)},t.prototype.collectionContains=function(t,e,i,n){var s;return void 0!==(s=isNaN(t.data[""+i])&&t.data[""+i]?this.dataTable[t.data[""+i].toLowerCase()]:this.dataTable[t.data[""+i]])&&s.data[""+i]===t.data[""+i]&&s.data[""+n]===t.data[""+n]},t.prototype.applyConnectorTemplate=function(t,e,i){var n,s={id:Hn(),sourceID:t,targetID:e};if("Flowchart"===i.layout.type){var r=i.nodes.find(function(t){return t.id===e});if("string"==typeof r.data.label)s.annotations=[{content:r.data.label}];else if(Array.isArray(r.data.label)){var o=i.connectors.filter(function(t){return t.targetID===e}),a=0;o.length>0&&(a=o.length),s.annotations=[{content:r.data.label[parseInt(a.toString(),10)]}]}n=this.getConnectorArrowType(r.data)}var l=new Rg(i,"connectors",s,!0);return n&&(l.style.strokeWidth=n.strokeWidth,l.targetDecorator.shape=n.targetDecorator),bm(l,s,i.connectorDefaults),l},t.prototype.getConnectorArrowType=function(t){if(""===t.arrowType)return{targetDecorator:"Arrow",strokeWidth:1};switch(t.arrowType){case"None":return{targetDecorator:"None",strokeWidth:1};case"Arrow":default:return{targetDecorator:"Arrow",strokeWidth:1};case"Diamond":return{targetDecorator:"Diamond",strokeWidth:1};case"Circle":return{targetDecorator:"Circle",strokeWidth:1};case"OpenArrow":return{targetDecorator:"OpenArrow",strokeWidth:1};case"Square":return{targetDecorator:"Square",strokeWidth:1};case"Fletch":return{targetDecorator:"Fletch",strokeWidth:1};case"OpenFetch":return{targetDecorator:"OpenFetch",strokeWidth:1};case"IndentedArrow":return{targetDecorator:"IndentedArrow",strokeWidth:1};case"OutdentedArrow":return{targetDecorator:"OutdentedArrow",strokeWidth:1};case"DoubleArrow":return{targetDecorator:"DoubleArrow",strokeWidth:1}}},t}(),gC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mC=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},fC="e-rtl",yC="e-overlay",vC="e-nav-arrow",bC="e-nav-right-arrow",CC="e-nav-left-arrow",IC="e-scroll-nav",MC="e-scroll-right-nav",SC="e-scroll-left-nav",xC="e-scroll-device",wC="e-scroll-overlay",DC="e-scroll-right-overlay",EC="e-scroll-left-overlay",TC=function(t){function e(e,i){return t.call(this,e,i)||this}return gC(e,t),e.prototype.preRender=function(){this.browser=G.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=G.isDevice,this.customStep=!0;var t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=b("hscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add(fC)},e.prototype.render=function(){this.touchModule=new ci(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),K.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(xC),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},e.prototype.setScrollState=function(){y(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},e.prototype.initialize=function(){var t=this.createElement("div",{className:"e-hscroll-content"}),e=this.createElement("div",{className:"e-hscroll-bar"});e.setAttribute("tabindex","-1");for(var i=this.element,n=0,s=[].slice.call(i.children);n<s.length;n++){var r=s[n];t.appendChild(r)}e.appendChild(t),i.appendChild(e),e.style.overflowX="hidden",this.scrollEle=e,this.scrollItems=t},e.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},e.prototype.getModuleName=function(){return"hScroll"},e.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove(xC),e.classList.remove(fC);var i=dt(".e-"+e.id+"_nav."+IC,e),n=dt("."+wC,e);[].slice.call(n).forEach(function(t){at(t)});for(var s=0,r=[].slice.call(this.scrollItems.children);s<r.length;s++){var o=r[s];e.appendChild(o)}this.uniqueId&&this.element.removeAttribute("id"),at(this.scrollEle),i.length>0&&(at(i[0]),y(i[1])||at(i[1])),K.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,t.prototype.destroy.call(this)},e.prototype.disable=function(t){var e=dt(".e-scroll-nav:not(."+yC+")",this.element);t?this.element.classList.add(yC):this.element.classList.remove(yC),[].slice.call(e).forEach(function(e){e.setAttribute("tabindex",t?"-1":"0")})},e.prototype.createOverlay=function(t){var e=t.id.concat("_nav"),i=this.createElement("div",{className:wC+" "+DC}),n="e-"+t.id.concat("_nav "+IC+" "+MC),s=this.createElement("div",{id:e.concat("_right"),className:n}),r=this.createElement("div",{className:bC+" "+vC+" e-icons"});s.appendChild(r);var o=this.createElement("div",{className:wC+" "+EC});this.ieCheck&&s.classList.add("e-ie-align"),t.appendChild(i),t.appendChild(s),t.insertBefore(o,t.firstChild),this.eventBinding([s])},e.prototype.createNavIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav "+IC+" "+MC),n={role:"button",id:e.concat("_right"),"aria-label":"Scroll right"},s=this.createElement("div",{className:i,attrs:n});s.setAttribute("aria-disabled","false");var r=this.createElement("div",{className:bC+" "+vC+" e-icons"}),o="e-"+t.id.concat("_nav "+IC+" "+SC),a={role:"button",id:e.concat("_left"),"aria-label":"Scroll left"},l=this.createElement("div",{className:o+" "+yC,attrs:a});l.setAttribute("aria-disabled","true");var h=this.createElement("div",{className:CC+" "+vC+" e-icons"});l.appendChild(h),s.appendChild(r),t.appendChild(s),t.insertBefore(l,t.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([s,l])},e.prototype.onKeyPress=function(t){var e=this;if("Enter"===t.key){this.keyTimer=window.setTimeout(function(){e.keyTimeout=!0,e.eleScrolling(10,t.target,!0)},100)}},e.prototype.onKeyUp=function(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))},e.prototype.eventBinding=function(t){var e=this;[].slice.call(t).forEach(function(t){new ci(t,{tapHold:e.tabHoldHandler.bind(e),tapHoldThreshold:500}),t.addEventListener("keydown",e.onKeyPress.bind(e)),t.addEventListener("keyup",e.onKeyUp.bind(e)),t.addEventListener("mouseup",e.repeatScroll.bind(e)),t.addEventListener("touchend",e.repeatScroll.bind(e)),t.addEventListener("contextmenu",function(t){t.preventDefault()}),K.add(t,"click",e.clickEventHandler,e)})},e.prototype.repeatScroll=function(){clearInterval(this.timeout)},e.prototype.tabHoldHandler=function(t){var e=this,i=t.originalEvent.target;i=this.contains(i,IC)?i.firstElementChild:i;this.timeout=window.setInterval(function(){e.eleScrolling(10,i,!0)},50)},e.prototype.contains=function(t,e){return t.classList.contains(e)},e.prototype.eleScrolling=function(t,e,i){var n=this.element,s=e.classList;s.contains(IC)&&(s=e.querySelector("."+vC).classList),this.contains(n,fC)&&this.browserCheck&&(t=-t),!this.contains(n,fC)||this.browserCheck||this.ieCheck?s.contains(bC)?this.frameScrollRequest(t,"add",i):this.frameScrollRequest(t,"",i):s.contains(CC)?this.frameScrollRequest(t,"add",i):this.frameScrollRequest(t,"",i)},e.prototype.clickEventHandler=function(t){this.eleScrolling(this.scrollStep,t.target,!1)},e.prototype.swipeHandler=function(t){var e,i=this.scrollEle;e=t.velocity<=1?t.distanceX/(10*t.velocity):t.distanceX/t.velocity;var n=.5,s=function(){var r=Math.sin(n);r<=0?window.cancelAnimationFrame(r):("Left"===t.swipeDirection?i.scrollLeft+=e*r:"Right"===t.swipeDirection&&(i.scrollLeft-=e*r),n-=.5,window.requestAnimationFrame(s))};s()},e.prototype.scrollUpdating=function(t,e){"add"===e?this.scrollEle.scrollLeft+=t:this.scrollEle.scrollLeft-=t,this.enableRtl&&this.scrollEle.scrollLeft>0&&(this.scrollEle.scrollLeft=0)},e.prototype.frameScrollRequest=function(t,e,i){var n=this;if(i)this.scrollUpdating(t,e);else{this.customStep||[].slice.call(dt("."+wC,this.element)).forEach(function(e){t-=e.offsetWidth});var s=function(){var i,r;n.contains(n.element,fC)&&n.browserCheck?(i=-t,r=-10):(i=t,r=10),i<10?window.cancelAnimationFrame(r):(n.scrollUpdating(r,e),t-=r,window.requestAnimationFrame(s))};s()}},e.prototype.touchHandler=function(t){var e=this.scrollEle,i=t.distanceX;this.ieCheck&&this.contains(this.element,fC)&&(i=-i),"Left"===t.scrollDirection?e.scrollLeft=e.scrollLeft+i:"Right"===t.scrollDirection&&(e.scrollLeft=e.scrollLeft-i)},e.prototype.arrowDisabling=function(t,e){if(this.isDevice){var i=(y(t)?e:t).querySelector("."+vC);y(t)?mt(i,[bC],[CC]):mt(i,[CC],[bC])}else t&&e&&(t.classList.add(yC),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),e.classList.remove(yC),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0"));this.repeatScroll()},e.prototype.scrollHandler=function(t){var e=t.target,i=e.offsetWidth,n=(this.element,this.element.querySelector("."+SC)),s=this.element.querySelector("."+MC),r=this.element.querySelector("."+EC),o=this.element.querySelector("."+DC),a=e.scrollLeft;if(a<=0&&(a=-a),this.isDevice&&(!this.enableRtl||this.browserCheck||this.ieCheck||(r=this.element.querySelector("."+DC),o=this.element.querySelector("."+EC)),r.style.width=a<40?a+"px":"40px",e.scrollWidth-Math.ceil(i+a)<40?o.style.width=e.scrollWidth-Math.ceil(i+a)+"px":o.style.width="40px"),0===a)this.arrowDisabling(n,s);else if(Math.ceil(i+a+.1)>=e.scrollWidth)this.arrowDisabling(s,n);else{var l=this.element.querySelector("."+IC+"."+yC);l&&(l.classList.remove(yC),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add(fC):this.element.classList.remove(fC)}}},mC([jt(null)],e.prototype,"scrollStep",void 0),e=mC([Ft],e)}(_e),AC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),NC=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},LC="e-rtl",OC="e-overlay",kC="e-nav-arrow",zC="e-nav-up-arrow",PC="e-nav-down-arrow",jC="e-scroll-nav",BC="e-scroll-up-nav",HC="e-scroll-down-nav",RC="e-scroll-device",VC="e-scroll-overlay",UC="e-scroll-up-overlay",FC="e-scroll-down-overlay",WC=function(t){function e(e,i){return t.call(this,e,i)||this}return AC(e,t),e.prototype.preRender=function(){this.browser=G.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=G.isDevice,this.customStep=!0;var t=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===t.id&&(t.id=b("vscroll"),this.uniqueId=!0),t.style.display="block",this.enableRtl&&t.classList.add(LC)},e.prototype.render=function(){this.touchModule=new ci(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),K.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(RC),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),K.add(this.element,"wheel",this.wheelEventHandler,this)},e.prototype.setScrollState=function(){y(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},e.prototype.initialize=function(){var t=$("div",{className:"e-vscroll-content"}),e=$("div",{className:"e-vscroll-bar"});e.setAttribute("tabindex","-1");for(var i=this.element,n=0,s=[].slice.call(i.children);n<s.length;n++){var r=s[n];t.appendChild(r)}e.appendChild(t),i.appendChild(e),e.style.overflow="hidden",this.scrollEle=e,this.scrollItems=t},e.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},e.prototype.getModuleName=function(){return"vScroll"},e.prototype.destroy=function(){var e=this.element;e.style.display="",et([this.element],["e-vscroll",RC,LC]);var i=dt(".e-"+e.id+"_nav."+jC,e),n=dt("."+VC,e);[].slice.call(n).forEach(function(t){at(t)});for(var s=0,r=[].slice.call(this.scrollItems.children);s<r.length;s++){var o=r[s];e.appendChild(o)}this.uniqueId&&this.element.removeAttribute("id"),at(this.scrollEle),i.length>0&&(at(i[0]),y(i[1])||at(i[1])),K.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,t.prototype.destroy.call(this)},e.prototype.disable=function(t){var e=dt(".e-scroll-nav:not(."+OC+")",this.element);t?this.element.classList.add(OC):this.element.classList.remove(OC),[].slice.call(e).forEach(function(e){e.setAttribute("tabindex",t?"-1":"0")})},e.prototype.createOverlayElement=function(t){var e=t.id.concat("_nav"),i=$("div",{className:VC+" "+FC}),n="e-"+t.id.concat("_nav "+jC+" "+HC),s=$("div",{id:e.concat("down"),className:n}),r=$("div",{className:PC+" "+kC+" e-icons"});s.appendChild(r);var o=$("div",{className:VC+" "+UC});this.ieCheck&&s.classList.add("e-ie-align"),t.appendChild(i),t.appendChild(s),t.insertBefore(o,t.firstChild),this.eventBinding([s])},e.prototype.createNavIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav "+jC+" "+HC),n=$("div",{id:e.concat("_down"),className:i});n.setAttribute("aria-disabled","false");var s=$("div",{className:PC+" "+kC+" e-icons"}),r="e-"+t.id.concat("_nav "+jC+" "+BC),o=$("div",{id:e.concat("_up"),className:r+" "+OC});o.setAttribute("aria-disabled","true");var a=$("div",{className:zC+" "+kC+" e-icons"});o.appendChild(a),n.appendChild(s),n.setAttribute("tabindex","0"),t.appendChild(n),t.insertBefore(o,t.firstChild),this.ieCheck&&(n.classList.add("e-ie-align"),o.classList.add("e-ie-align")),this.eventBinding([n,o])},e.prototype.onKeyPress=function(t){var e=this;if("Enter"===t.key){this.keyTimer=window.setTimeout(function(){e.keyTimeout=!0,e.eleScrolling(10,t.target,!0)},100)}},e.prototype.onKeyUp=function(t){"Enter"===t.key&&(this.keyTimeout?this.keyTimeout=!1:t.target.click(),clearTimeout(this.keyTimer))},e.prototype.eventBinding=function(t){var e=this;[].slice.call(t).forEach(function(t){new ci(t,{tapHold:e.tabHoldHandler.bind(e),tapHoldThreshold:500}),t.addEventListener("keydown",e.onKeyPress.bind(e)),t.addEventListener("keyup",e.onKeyUp.bind(e)),t.addEventListener("mouseup",e.repeatScroll.bind(e)),t.addEventListener("touchend",e.repeatScroll.bind(e)),t.addEventListener("contextmenu",function(t){t.preventDefault()}),K.add(t,"click",e.clickEventHandler,e)})},e.prototype.repeatScroll=function(){clearInterval(this.timeout)},e.prototype.tabHoldHandler=function(t){var e=this,i=t.originalEvent.target;i=this.contains(i,jC)?i.firstElementChild:i;this.timeout=window.setInterval(function(){e.eleScrolling(10,i,!0)},50)},e.prototype.contains=function(t,e){return t.classList.contains(e)},e.prototype.eleScrolling=function(t,e,i){var n=e.classList;n.contains(jC)&&(n=e.querySelector("."+kC).classList),n.contains(PC)?this.frameScrollRequest(t,"add",i):n.contains(zC)&&this.frameScrollRequest(t,"",i)},e.prototype.clickEventHandler=function(t){this.eleScrolling(this.scrollStep,t.target,!1)},e.prototype.wheelEventHandler=function(t){t.preventDefault(),this.frameScrollRequest(this.scrollStep,t.deltaY>0?"add":"",!1)},e.prototype.swipeHandler=function(t){var e,i=this.scrollEle;e=t.velocity<=1?t.distanceY/(10*t.velocity):t.distanceY/t.velocity;var n=.5,s=function(){var r=Math.sin(n);r<=0?window.cancelAnimationFrame(r):("Up"===t.swipeDirection?i.scrollTop+=e*r:"Down"===t.swipeDirection&&(i.scrollTop-=e*r),n-=.02,window.requestAnimationFrame(s))};s()},e.prototype.scrollUpdating=function(t,e){"add"===e?this.scrollEle.scrollTop+=t:this.scrollEle.scrollTop-=t},e.prototype.frameScrollRequest=function(t,e,i){var n=this;if(i)this.scrollUpdating(t,e);else{this.customStep||[].slice.call(dt("."+VC,this.element)).forEach(function(e){t-=e.offsetHeight});var s=function(){t<10?window.cancelAnimationFrame(10):(n.scrollUpdating(10,e),t-=10,window.requestAnimationFrame(s))};s()}},e.prototype.touchHandler=function(t){var e=this.scrollEle,i=t.distanceY;"Up"===t.scrollDirection?e.scrollTop=e.scrollTop+i:"Down"===t.scrollDirection&&(e.scrollTop=e.scrollTop-i)},e.prototype.arrowDisabling=function(t,e){if(this.isDevice){var i=(y(t)?e:t).querySelector("."+kC);y(t)?mt(i,[PC],[zC]):mt(i,[zC],[PC])}else t.classList.add(OC),t.setAttribute("aria-disabled","true"),t.removeAttribute("tabindex"),e.classList.remove(OC),e.setAttribute("aria-disabled","false"),e.setAttribute("tabindex","0");this.repeatScroll()},e.prototype.scrollEventHandler=function(t){var e=t.target,i=e.offsetHeight,n=this.element.querySelector("."+BC),s=this.element.querySelector("."+HC),r=this.element.querySelector("."+UC),o=this.element.querySelector("."+FC),a=e.scrollTop;if(a<=0&&(a=-a),this.isDevice&&(r.style.height=a<40?a+"px":"40px",e.scrollHeight-Math.ceil(i+a)<40?o.style.height=e.scrollHeight-Math.ceil(i+a)+"px":o.style.height="40px"),0===a)this.arrowDisabling(n,s);else if(Math.ceil(i+a+.1)>=e.scrollHeight)this.arrowDisabling(s,n);else{var l=this.element.querySelector("."+jC+"."+OC);l&&(l.classList.remove(OC),l.setAttribute("aria-disabled","false"),l.setAttribute("tabindex","0"))}},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"scrollStep":this.setScrollState();break;case"enableRtl":t.enableRtl?this.element.classList.add(LC):this.element.classList.remove(LC)}}},NC([jt(null)],e.prototype,"scrollStep",void 0),e=NC([Ft],e)}(_e);function YC(t,e,i,n,s,r){var o,a,l=e.parentElement;if("vscroll"===n?(o=r||e.getBoundingClientRect().height,a=i.getBoundingClientRect().height):(o=e.getBoundingClientRect().width,a=i.getBoundingClientRect().width),o<a)return _C(t,e,i,n,s,r);if(l){var h=l.getBoundingClientRect().width;return h<o&&"hscroll"===n?(a=h,e.style.maxWidth=h+"px",_C(t,e,i,n,s,r)):i}return i}function _C(t,e,i,n,s,r){var o=t("div",{className:"e-menu-"+n});return e.appendChild(o),o.appendChild(i),r?(o.style.overflow="hidden",o.style.height=r+"px"):(o.style.maxHeight=e.style.maxHeight,e.style.overflow="hidden"),"vscroll"===n?new WC({enableRtl:s},o).scrollStep=ct(".e-"+n+"-bar",e).offsetHeight/2:new TC({enableRtl:s},o).scrollStep=ct(".e-"+n+"-bar",e).offsetWidth,o}function QC(t,e,i){if(t){var n=ct(".e-menu-parent",e);n?i&&i!==n||(t.destroy(),e.parentElement.appendChild(n),at(e)):(t.destroy(),at(e))}}var ZC,qC={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function XC(t,e){var i={};if(y(t)||"string"==typeof t||"number"==typeof t||!y(t.isHeader))return t;for(var n=0,s=Object.keys(e);n<s.length;n++){var r=e[""+s[n]],o=y(r)||"string"!=typeof r?void 0:c(r,t);y(o)||(i[""+r]=o)}return i}function GC(t){if(t)try{return"function"!=typeof t&&document.querySelector(t)?Hi(document.querySelector(t).innerHTML.trim()):Hi(t)}catch(e){return Hi(t)}}!function(t){t.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var e={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:t.defaultMappedFields,ariaAttributes:e,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(t,e,i,n,r){return M(t,s(t,e,i,n,r),null,n)}function s(t,e,n,s,r){var o=[],a=f({},i,s);qC=b(a.moduleName);for(var l=u(),h=0;h<e.length;h++)if(!y(e[h])){var c=void 0;if(a.itemCreating&&"function"==typeof a.itemCreating){var d={dataSource:e,curData:e[h],text:e[h],options:a};a.itemCreating(d)}if(c=n?v(t,e[h],void 0,null,null,[],null,l,h,s):I(t,e[h],void 0,null,null,s,r),a.itemCreated&&"function"==typeof a.itemCreated){d={dataSource:e,curData:e[h],text:e[h],item:c,options:a};a.itemCreated(d)}o.push(c)}return o}function r(n,s,r,o,a,l){var h=f({},i,r);qC=b(h.moduleName);var p,C=!l||"listview"!==l.getModuleName()&&"multiselect"!==l.getModuleName()?f({},t.defaultMappedFields,h.fields):h.fields,M=f({},e,h.ariaAttributes),S=[];o&&(M.level=o);var x,w,D=[];s&&s.length&&!y(c(s).item)&&!Object.prototype.hasOwnProperty.call(c(s).item,C.id)&&(p=u());for(var E=0;E<s.length;E++){var T=XC(s[E],C);if(!y(s[E])){if(h.itemCreating&&"function"==typeof h.itemCreating){var A={dataSource:s,curData:s[E],text:T[C.text],options:h,fields:C};h.itemCreating(A)}var N=s[E];h.itemCreating&&"function"==typeof h.itemCreating&&(T=XC(s[E],C)),Object.prototype.hasOwnProperty.call(T,C.id)&&!y(T[C.id])&&(p=T[C.id]);var L=[];if(h.showCheckBox&&(h.itemNavigable&&(T[C.url]||T[C.urlAttributes])?S.push(n("input",{className:qC.check,attrs:{type:"checkbox"}})):L.push(n("input",{className:qC.check,attrs:{type:"checkbox"}}))),!0===a){if(h.showIcon&&Object.prototype.hasOwnProperty.call(T,C.iconCss)&&!y(T[C.iconCss])&&L.push(n("span",{className:qC.icon+" "+T[C.iconCss]})),w=(x=v(n,N,T,C,h.itemClass,L,!(!Object.prototype.hasOwnProperty.call(N,"isHeader")||!N.isHeader),p,E,r)).querySelector("."+qC.anchorWrap),Object.prototype.hasOwnProperty.call(T,C.tooltip)){var O=T[C.tooltip];if(r&&r.enableHtmlSanitizer)O=Yi.sanitize(O);else O=n("span",{innerHTML:O}).innerText;x.setAttribute("title",O)}h.itemNavigable&&S.length&&st(S,x.firstElementChild)}else{if((x=I(n,N,T,C,h.itemClass,r,l)).classList.add(qC.level+"-"+M.level),x.setAttribute("aria-level",M.level.toString()),"presentation"!==M.groupItemRole&&"presentation"!==M.itemRole||x.removeAttribute("aria-level"),w=x.querySelector("."+qC.anchorWrap),Object.prototype.hasOwnProperty.call(T,C.tooltip)){O=T[C.tooltip];if(r&&r.enableHtmlSanitizer)O=Yi.sanitize(O);else O=n("span",{innerHTML:O}).innerText;x.setAttribute("title",O)}if(Object.prototype.hasOwnProperty.call(T,C.htmlAttributes)&&T[C.htmlAttributes]){var k=T[C.htmlAttributes];"class"in k&&"string"==typeof k.class&&""===k.class.trim()&&delete k.class,d(x,k)}if(Object.prototype.hasOwnProperty.call(T,C.enabled)&&!1===T[C.enabled]&&x.classList.add(qC.disabled),Object.prototype.hasOwnProperty.call(T,C.isVisible)&&!1===T[C.isVisible]&&(x.style.display="none"),Object.prototype.hasOwnProperty.call(T,C.imageUrl)&&!y(T[C.imageUrl])&&!h.template){var z={src:T[C.imageUrl],alt:y(T.name)?"Displaying Image":"Displaying "+T.name+" Image"};m(z,T[C.imageAttributes]);var P=n("img",{className:qC.image,attrs:z});w?w.insertAdjacentElement("afterbegin",P):st([P],x.firstElementChild)}if(h.showIcon&&Object.prototype.hasOwnProperty.call(T,C.iconCss)&&!y(T[C.iconCss])&&!h.template){var j=n("div",{className:qC.icon+" "+T[C.iconCss]});w?w.insertAdjacentElement("afterbegin",j):st([j],x.firstElementChild)}L.length&&st(L,x.firstElementChild),h.itemNavigable&&S.length&&st(S,x.firstElementChild),g(n,T,C,s,h,x,M.level)}if(w&&tt([x],[qC.navigable]),h.itemCreated&&"function"==typeof h.itemCreated){A={dataSource:s,curData:s[E],text:T[C.text],item:x,options:h,fields:C};h.itemCreated(A)}S=[],D.push(x)}}return D}function o(t,e,n,s,o,a){var l=f({},i,n);return M(t,r(t,e,n,s,o,a),l.listClass,n)}function a(t,e){if(e&&t){return Array.prototype.slice.call(e).indexOf(t)}}function l(t,e,i){if(void 0===i&&(i=new Gb),"Ascending"===t)i.sortBy(e,"ascending",!0);else if("Descending"===t)i.sortBy(e,"descending",!0);else for(var n=0;n<i.queries.length;n++)"onSortBy"===i.queries[n].fn&&i.queries.splice(n,1);return i}function h(t,e){return new dC(t).executeLocal(e)}function c(t){for(var e={typeof:null,item:null},i=0;i<t.length;i++)if(!y(t[i]))return{typeof:typeof t[i],item:t[i]};return e}function d(t,e){var i={};m(i,e),i.class&&(tt([t],i.class.split(" ")),delete i.class),ht(t,i)}function p(t){for(var e={},i=t.attributes,n=0;n<i.length;n++)e[i[n].nodeName]=i[n].nodeValue;return e}function u(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function g(t,e,i,n,s,r,a){var l=e[i.child]||[],h=e[i.hasChildren];if(l.length&&(h=!0,r.classList.add(qC.hasChild),s.processSubChild)){var c=o(t,l,s,++a);r.appendChild(c)}s.expandCollapse&&h&&!s.template&&(r.firstElementChild.classList.add(qC.iconWrapper),("Left"===s.expandIconPosition?st:rt)([t("div",{className:"e-icons "+s.expandIconClass})],r.querySelector("."+qC.textContent)))}function v(t,n,s,r,o,a,l,h,c,p){var u,g,m=f({},i,p),v=f({},e,m.ariaAttributes),b=n,I=n;"string"!=typeof n&&"number"!=typeof n&&"boolean"!=typeof n&&(u=n,b="boolean"==typeof s[r.text]||"number"==typeof s[r.text]?s[r.text]:s[r.text]||"",I=s[r.value]),g=y(u)||y(s[r.id])||""===s[r.id]?h+"-"+c:h;var M=t("li",{className:(!0===l?qC.group:qC.li)+" "+(y(o)?"":o),id:g,attrs:""!==v.groupItemRole&&""!==v.itemRole?{role:!0===l?v.groupItemRole:v.itemRole}:{}});return u&&Object.prototype.hasOwnProperty.call(s,r.enabled)&&"false"===s[r.enabled].toString()&&M.classList.add(qC.disabled),p&&p.enableHtmlSanitizer&&(b=Yi.sanitize(b)),l?M.innerText=b:(M.setAttribute("data-value",y(I)?"null":I),M.setAttribute("role","option"),u&&Object.prototype.hasOwnProperty.call(s,r.htmlAttributes)&&s[r.htmlAttributes]&&d(M,s[r.htmlAttributes]),a.length&&!m.itemNavigable&&rt(a,M),u&&(s[r.url]||s[r.urlAttributes]&&s[r.urlAttributes].href)?M.appendChild(C(t,u,r,b,a,m.itemNavigable)):(a.length&&m.itemNavigable&&rt(a,M),M.appendChild(document.createTextNode(b)))),M}function b(t){return{li:"e-"+t+"-item",ul:"e-"+t+"-parent e-ul",group:"e-"+t+"-group-item",icon:"e-"+t+"-icon",text:"e-"+t+"-text",check:"e-"+t+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+t+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+t+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function C(t,e,i,n,s,r){var o,a=XC(e,i),l={href:a[i.url]};if(Object.prototype.hasOwnProperty.call(a,i.urlAttributes)&&a[i.urlAttributes]&&(m(l,a[i.urlAttributes]),l.href=a[i.url]?a[i.url]:a[i.urlAttributes].href),r){o=t("a",{className:qC.text+" "+qC.url});var h=t("div",{className:qC.anchorWrap});s&&s.length&&rt(s,h),h.appendChild(document.createTextNode(n)),rt([h],o)}else o=t("a",{className:qC.text+" "+qC.url,innerHTML:n});return d(o,l),o}function I(t,n,s,r,o,a,l){var h,c,d,p=f({},i,a),g=f({},e,p.ariaAttributes),m=n;"string"!=typeof n&&"number"!=typeof n&&(d=n,m=s[r.text]||"",h=y(s._id)?s[r.id]:s._id,c=!(!Object.prototype.hasOwnProperty.call(n,"isHeader")||!n.isHeader)),a&&a.enableHtmlSanitizer&&(m=Yi.sanitize(m));var v=t("li",{className:(!0===c?qC.group:qC.li)+" "+(y(o)?"":o),attrs:""!==g.groupItemRole&&""!==g.itemRole?{role:!0===c?g.groupItemRole:g.itemRole}:{}});if(!0==!y(h)?v.setAttribute("data-uid",h):v.setAttribute("data-uid",u()),c&&a&&a.groupTemplate){var b=GC(a.groupTemplate);if(l&&"listview"!==l.getModuleName())(I=b(n,l,"groupTemplate",p.groupTemplateID,!!p.isStringTemplate,null,v))&&rt(I,v);else rt(b(n,l,"groupTemplate",p.groupTemplateID,!!p.isStringTemplate),v)}else if(!c&&a&&a.template){var I;b=GC(a.template);if(l&&"listview"!==l.getModuleName())(I=b(n,l,"template",p.templateID,!!p.isStringTemplate,null,v))&&rt(I,v);else rt(b(n,l,"template",p.templateID,!!p.isStringTemplate),v)}else{var M=t("div",{className:qC.textContent,attrs:""!==g.wrapperRole?{role:g.wrapperRole}:{}});if(d&&(s[r.url]||s[r.urlAttributes]&&s[r.urlAttributes].href))M.appendChild(C(t,d,r,m,null,p.itemNavigable));else{var S=t("span",{className:qC.text,attrs:""!==g.itemText?{role:g.itemText}:{}});a&&a.enableHtmlSanitizer?S.innerText=m:S.innerHTML=m,M.appendChild(S)}v.appendChild(M)}return v}function M(t,n,s,r){var o=f({},i,r),a=f({},e,o.ariaAttributes),l=t("ul",{className:(qC=b(o.moduleName)).ul+" "+(y(s)?"":s),attrs:""!==a.listRole?{role:a.listRole}:{}});return rt(n,l),l}t.createList=function(t,s,r,a,l){var h=f({},i,r),d=f({},e,h.ariaAttributes),p=c(s).typeof;return"string"===p||"number"===p?n(t,s,a,r,l):o(t,s,r,d.level,a,l)},t.createListFromArray=n,t.createListItemFromArray=s,t.createListItemFromJson=r,t.createListFromJson=o,t.getSiblingLI=function(t,e,n){if(qC=b(i.moduleName),t&&t.length){var s,r,o=Array.prototype.slice.call(t);for(s=o[(r=e?a(e,o):!0===n?o.length:-1)+(!0===n?-1:1)];s&&(!nt(s)||s.classList.contains(qC.disabled));)s=o[r+=!0===n?-1:1];return s}},t.indexOf=a,t.groupDataSource=function(e,i,n){void 0===n&&(n="None");var s=f({},t.defaultMappedFields,i),r=(new Gb).group(s.groupBy),o=h(e,r=l(n,"key",r));e=[];for(var a=0;a<o.length;a++){var c=o[a].items,d={};d[s.text]=o[a].key,d.isHeader=!0;var p=s.text;"id"===p&&(d[""+(p="text")]=o[a].key),d._id="group-list-item-"+(o[a].key?o[a].key.toString().trim():"undefined"),d.items=c,e.push(d);for(var u=0;u<c.length;u++)e.push(c[u])}return e},t.addSorting=l,t.getDataSource=h,t.createJsonFromElement=function e(n,s){var r=f({},i,s),o=f({},t.defaultMappedFields,r.fields),a=n.cloneNode(!0),l=[];a.classList.add("json-parent");var h=a.querySelectorAll(".json-parent>li");a.classList.remove("json-parent");for(var c=0;c<h.length;c++){for(var d=h[c],g=d.querySelector("a"),m=d.querySelector("ul"),y={},v=g?g.childNodes:d.childNodes,b=Object.keys(v),C=0;C<v.length;C++)v[Number(b[C])].hasChildNodes()||(y[o.text]=v[Number(b[C])].textContent);var I=p(d);I.id?(y[o.id]=I.id,delete I.id):y[o.id]=u(),Object.keys(I).length&&(y[o.htmlAttributes]=I),g&&(I=p(g),Object.keys(I).length&&(y[o.urlAttributes]=I)),m&&(y[o.child]=e(m,s)),l.push(y)}return l},t.renderContentTemplate=function(e,n,s,r,o,a){for(var l,h=e("ul",{className:(qC=b(i.moduleName)).ul,attrs:{role:"presentation"}}),c=f({},i,o),d=f({},t.defaultMappedFields,r),p=GC(n),g=[],m=u(),v=0;v<s.length;v++){var C=XC(s[v],d),I=s[v],M=I.isHeader;if(l="string"==typeof s[v]||"number"==typeof s[v]?I:C[d.value],c.itemCreating&&"function"==typeof c.itemCreating){var S={dataSource:s,curData:I,text:l,options:c,fields:d};c.itemCreating(S)}c.itemCreating&&"function"==typeof c.itemCreating&&(C=XC(s[v],d),l="string"==typeof s[v]||"number"==typeof s[v]?I:C[d.value]);var x=e("li",{id:m+"-"+v,className:M?qC.group:qC.li,attrs:{role:"presentation"}});if(M)"string"==typeof s[v]||"number"==typeof s[v]?x.innerText=I:x.innerText=C[d.text];else{var w,D=M?c.groupTemplateID:c.templateID;if(M)if(a&&"listview"!==a.getModuleName())(w=p(I,a,"headerTemplate",D,!!c.isStringTemplate,null,x))&&rt(w,x);else rt(p(I,a,"headerTemplate",D,!!c.isStringTemplate),x);else if(a&&"listview"!==a.getModuleName())(w=p(I,a,"template",D,!!c.isStringTemplate,null,x))&&rt(w,x);else rt(p(I,a,"template",D,!!c.isStringTemplate),x);x.setAttribute("data-value",y(l)?"null":l),x.setAttribute("role","option")}if(c.itemCreated&&"function"==typeof c.itemCreated){S={dataSource:s,curData:I,text:l,item:x,options:c,fields:d};c.itemCreated(S)}g.push(x)}return rt(g,h),h},t.renderGroupTemplate=function(e,n,s,r,o,a){for(var l=GC(e),h=f({},t.defaultMappedFields,s),c=f({},i,o),d=h.groupBy,p=0,u=r;p<u.length;p++){var g=u[p],m={};if(m[""+d]=g.textContent,g.innerHTML="",a&&"listview"!==a.getModuleName()){var y=l(m,a,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate,null,g);y&&rt(y,g)}else rt(l(m,a,"groupTemplate",c.groupTemplateID,!!c.isStringTemplate),g)}return r},t.generateId=u,t.generateUL=M,t.generateIcon=function(t,e,n,s){var r=f({},i,s);return qC=b(r.moduleName),("Left"===r.expandIconPosition?st:rt)([t("div",{className:"e-icons "+r.expandIconClass+" "+(y(n)?"":n)})],e.querySelector("."+qC.textContent)),e}}(ZC||(ZC={}));var KC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),JC=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},$C={None:[],SlideLeft:["SlideRightOut","SlideLeftOut","SlideLeftIn","SlideRightIn"],SlideDown:["SlideTopOut","SlideBottomOut","SlideBottomIn","SlideTopIn"],Zoom:["FadeOut","FadeZoomOut","FadeZoomIn","FadeIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},tI={None:[],SlideLeft:["SlideLeftOut","SlideRightOut","SlideRightIn","SlideLeftIn"],SlideDown:["SlideBottomOut","SlideTopOut","SlideTopIn","SlideBottomIn"],Zoom:["FadeZoomOut","FadeOut","FadeIn","FadeZoomIn"],Fade:["FadeOut","FadeOut","FadeIn","FadeIn"]},eI={root:"e-listview",hover:"e-hover",selected:"e-active",focused:"e-focused",parentItem:"e-list-parent",listItem:"e-list-item",listIcon:"e-list-icon",textContent:"e-text-content",listItemText:"e-list-text",groupListItem:"e-list-group-item",hasChild:"e-has-child",view:"e-view",header:"e-list-header",headerText:"e-headertext",headerTemplateText:"e-headertemplate-text",text:"e-text",disable:"e-disabled",container:"e-list-container",icon:"e-icons",backIcon:"e-icon-back",backButton:"e-back-button",checkboxWrapper:"e-checkbox-wrapper",checkbox:"e-checkbox",checked:"e-check",checklist:"e-checklist",checkboxIcon:"e-frame",checkboxRight:"e-checkbox-right",checkboxLeft:"e-checkbox-left",listviewCheckbox:"e-listview-checkbox",itemCheckList:"e-checklist",virtualElementContainer:"e-list-virtualcontainer"},iI="Template",nI="GroupTemplate",sI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return KC(e,t),JC([jt("id")],e.prototype,"id",void 0),JC([jt("text")],e.prototype,"text",void 0),JC([jt("isChecked")],e.prototype,"isChecked",void 0),JC([jt("isVisible")],e.prototype,"isVisible",void 0),JC([jt("enabled")],e.prototype,"enabled",void 0),JC([jt("iconCss")],e.prototype,"iconCss",void 0),JC([jt("child")],e.prototype,"child",void 0),JC([jt("tooltip")],e.prototype,"tooltip",void 0),JC([jt("groupBy")],e.prototype,"groupBy",void 0),JC([jt("text")],e.prototype,"sortBy",void 0),JC([jt("htmlAttributes")],e.prototype,"htmlAttributes",void 0),JC([jt("tableName")],e.prototype,"tableName",void 0),e}(re),rI=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.previousSelectedItems=[],n.hiddenItems=[],n.enabledItems=[],n.disabledItems=[],n}KC(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"htmlAttributes":this.setHTMLAttribute();break;case"cssClass":this.setCSSClass(e.cssClass);break;case"enable":this.setEnable();break;case"width":case"height":this.setSize();break;case"enableRtl":this.setEnableRTL();break;case"fields":this.listBaseOption.fields=this.fields.properties,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"headerTitle":this.curDSLevel.length||this.header(this.headerTitle,!1,"header");break;case"query":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"showHeader":this.header(this.headerTitle,!1,"header");break;case"enableVirtualization":y(this.contentContainer)||at(this.contentContainer),this.refresh();break;case"showCheckBox":case"checkBoxPosition":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.setCheckbox();break;case"dataSource":this.previousScrollTop=this.element.scrollTop,this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():this.reRender();break;case"sortOrder":case"template":this.enableVirtualization||this.refresh();break;case"showIcon":this.enableVirtualization?this.virtualizationModule.reRenderUiVirtualization():(this.listBaseOption.showIcon=this.showIcon,this.curViewDS=this.getSubDS(),this.resetCurrentList())}}},e.prototype.setHTMLAttribute=function(){!y(this.htmlAttributes)&&Object.keys(this.htmlAttributes).length&&ht(this.element,this.htmlAttributes)},e.prototype.setCSSClass=function(t){this.cssClass&&tt([this.element],this.cssClass.split(" ").filter(function(t){return t})),t&&et([this.element],t.split(" ").filter(function(t){return t}))},e.prototype.setSize=function(){this.element.style.height=S(this.height),this.element.style.width=S(this.width),this.isWindow=!this.element.clientHeight},e.prototype.setEnable=function(){this.enableElement(this.element,this.enable)},e.prototype.setEnableRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.enableElement=function(t,e){e?t.classList.remove(eI.disable):t.classList.add(eI.disable)},e.prototype.header=function(t,e,i){if(void 0===this.headerEle&&this.showHeader){this.headerEle=this.createElement("div",{className:eI.header});var n=this.createElement("span",{className:eI.headerText});this.enableHtmlSanitizer?(this.setProperties({headerTitle:Yi.sanitize(this.headerTitle)},!0),n.innerText=this.headerTitle):n.innerHTML=this.headerTitle;var s=this.createElement("div",{className:eI.text,innerHTML:n.outerHTML}),r=this.createElement("div",{className:eI.icon+" "+eI.backIcon+" "+eI.backButton,attrs:{style:"display:none;"}});if(this.headerEle.appendChild(r),this.headerEle.appendChild(s),this.headerTemplate){var o=Hi(this.headerTemplate),a=this.createElement("div",{className:eI.headerTemplateText}),l=o({},this,i,this.LISTVIEW_HEADERTEMPLATE_ID,null,null,this.headerEle);l&&rt(l,a),rt([a],this.headerEle),this.isReact&&this.renderReactTemplates()}this.headerTemplate&&this.headerTitle&&s.classList.add("header"),this.element.classList.add("e-has-header"),st([this.headerEle],this.element)}else if(this.headerEle)if(this.showHeader){this.headerEle.style.display="";s=this.headerEle.querySelector("."+eI.headerText),r=this.headerEle.querySelector("."+eI.backIcon);this.enableHtmlSanitizer&&(t=Yi.sanitize(t)),s.innerHTML=t,this.headerTemplate&&e&&(s.parentElement.classList.remove("header"),this.headerEle.querySelector("."+eI.headerTemplateText).classList.add("nested-header")),this.headerTemplate&&!e&&(s.parentElement.classList.add("header"),this.headerEle.querySelector("."+eI.headerTemplateText).classList.remove("nested-header"),this.headerEle.querySelector("."+eI.headerTemplateText).classList.add("header")),r.style.display=!0===e?"":"none"}else this.headerEle.style.display="none"},e.prototype.switchView=function(t,e,i){var n=this;if(t&&e){var s=t.style.position,r="hidden"!==this.element.style.overflow?this.element.style.overflow:"";t.style.position="absolute",t.classList.add("e-view");var o=void 0,a=this.animation.duration;if(this.animation.effect)o=this.enableRtl?tI[this.animation.effect]:$C[this.animation.effect];else{o=$C.SlideLeft,i=this.enableRtl,a=0}this.element.style.overflow="hidden",this.aniObj.animate(t,{name:!0===i?o[0]:o[1],duration:0===a&&"Enable"===te?400:a,timingFunction:this.animation.easing,end:function(){t.style.display="none",n.element.style.overflow=r,t.style.position=s,t.classList.remove("e-view")}}),e.style.display="",this.aniObj.animate(e,{name:!0===i?o[2]:o[3],duration:0===a&&"Enable"===te?400:a,timingFunction:this.animation.easing,end:function(){n.trigger("actionComplete")}}),this.curUL=e}},e.prototype.preRender=function(){if(this.template)try{"function"!=typeof this.template&&document.querySelectorAll(this.template).length&&this.setProperties({template:document.querySelector(this.template).innerHTML.trim()},!0)}catch(t){Hi(this.template)}this.listBaseOption={template:this.template,headerTemplate:this.headerTemplate,groupTemplate:this.groupTemplate,expandCollapse:!0,listClass:"",ariaAttributes:{itemRole:"listitem",listRole:"list",itemText:"",groupItemRole:"presentation",wrapperRole:"presentation"},fields:this.fields.properties,sortOrder:this.sortOrder,showIcon:this.showIcon,itemCreated:this.renderCheckbox.bind(this),templateID:""+this.element.id+iI,groupTemplateID:""+this.element.id+nI,enableHtmlSanitizer:this.enableHtmlSanitizer},this.initialization()},e.prototype.initialization=function(){this.curDSLevel=[],this.animateOptions={},this.curViewDS=[],this.currentLiElements=[],this.isNestedList=!1,this.selectedData=[],this.selectedId=this.enablePersistence?this.selectedId:[],this.LISTVIEW_TEMPLATE_ID=""+this.element.id+iI,this.LISTVIEW_GROUPTEMPLATE_ID=""+this.element.id+nI,this.LISTVIEW_HEADERTEMPLATE_ID=this.element.id+"HeaderTemplate",this.aniObj=new qt(this.animateOptions),this.removeElement(this.curUL),this.removeElement(this.ulElement),this.removeElement(this.headerEle),this.removeElement(this.contentContainer),this.curUL=this.ulElement=this.liCollection=this.headerEle=this.contentContainer=void 0},e.prototype.renderCheckbox=function(t){var e=this;if(t.item.classList.contains(eI.hasChild)&&(this.isNestedList=!0),this.showCheckBox&&t.item.classList.contains(eI.listItem)){var i,n=no(this.createElement,!1,{checked:!1,enableRtl:this.enableRtl,cssClass:eI.listviewCheckbox});n.setAttribute("role","checkbox");var s=n.querySelector("."+eI.checkboxIcon);if(t.item.classList.add(eI.itemCheckList),t.item.firstElementChild.classList.add(eI.checkbox),"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0])if(i=XC(t.curData,this.listBaseOption.fields),this.enablePersistence&&!y(this.selectedId))-1!==this.selectedId.findIndex(function(t){return t===i[e.listBaseOption.fields.id].toString()})&&this.checkInternally(t,n);else i[this.listBaseOption.fields.isChecked]&&this.checkInternally(t,n);else"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]||-1===this.selectedData.indexOf(t.text)||this.checkInternally(t,n);n.setAttribute("aria-checked",s.classList.contains(eI.checked)?"true":"false"),n.setAttribute("aria-label",t.text),"Left"===this.checkBoxPosition?(n.classList.add(eI.checkboxLeft),t.item.firstElementChild.classList.add(eI.checkboxLeft),t.item.firstElementChild.insertBefore(n,t.item.firstElementChild.childNodes[0])):(n.classList.add(eI.checkboxRight),t.item.firstElementChild.classList.add(eI.checkboxRight),t.item.firstElementChild.appendChild(n)),this.currentLiElements.push(t.item),"Left"===this.checkBoxPosition?this.virtualCheckBox=t.item.firstElementChild.children[0]:this.virtualCheckBox=t.item.firstElementChild.lastElementChild}},e.prototype.checkInternally=function(t,e){t.item.classList.add(eI.selected),e.querySelector("."+eI.checkboxIcon).classList.add(eI.checked),e.setAttribute("aria-checked","true")},e.prototype.checkItem=function(t){this.toggleCheckBase(t,!0)},e.prototype.toggleCheckBase=function(t,e){if(this.showCheckBox){var i=t;if(t instanceof Object&&t.constructor!==HTMLLIElement&&(i=this.getLiFromObjOrElement(t)),!y(i)){var n=i.querySelector("."+eI.checkboxIcon);!0===e?i.classList.add(eI.selected):i.classList.remove(eI.selected),!0===e?n.classList.add(eI.checked):n.classList.remove(eI.checked),n.parentElement.setAttribute("aria-checked",e?"true":"false")}this.setSelectedItemData(i),this.updateSelectedId()}},e.prototype.uncheckItem=function(t){this.toggleCheckBase(t,!1)},e.prototype.checkAllItems=function(){this.toggleAllCheckBase(!0)},e.prototype.uncheckAllItems=function(){this.toggleAllCheckBase(!1)},e.prototype.toggleAllCheckBase=function(t){if(this.showCheckBox){for(var e=0;e<this.liCollection.length;e++){var i=this.liCollection[e].querySelector("."+eI.checkboxIcon);i&&(t?i.classList.contains(eI.checked)||this.checkItem(this.liCollection[e]):i.classList.contains(eI.checked)&&this.uncheckItem(this.liCollection[e]))}this.enableVirtualization&&this.virtualizationModule.checkedItem(t),this.updateSelectedId()}},e.prototype.setCheckbox=function(){if(this.showCheckBox)for(var t=Array.prototype.slice.call(this.element.querySelectorAll("."+eI.listItem)),e={item:void 0,curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:""},i=0;i<t.length;i++){var n=t[i];e.item=n,e.curData=this.getItemData(n),n.querySelector("."+eI.checkboxWrapper)&&this.removeElement(n.querySelector("."+eI.checkboxWrapper)),this.renderCheckbox(e),e.item.classList.contains(eI.selected)&&this.checkInternally(e,e.item.querySelector("."+eI.checkboxWrapper))}else{for(t=Array.prototype.slice.call(this.element.querySelectorAll("."+eI.itemCheckList)),i=0;i<t.length;i++){(n=t[i]).classList.remove(eI.selected),n.firstElementChild.classList.remove(eI.checkbox),this.removeElement(n.querySelector("."+eI.checkboxWrapper))}this.selectedItems&&this.selectedItems.item.classList.add(eI.selected)}},e.prototype.refreshItemHeight=function(){this.virtualizationModule&&this.virtualizationModule.refreshItemHeight()},e.prototype.handleCheckboxState=function(t,e,i,n,s,r,o,a){this.trigger("select",r,function(l){l.cancel&&((o?n:!n)?(e.classList.add(eI.checked),t.classList.add(eI.selected)):(e.classList.remove(eI.checked),t.classList.remove(eI.selected)),i.setAttribute("aria-checked",o?n?"true":"false":n?"false":"true"),m(r,{isChecked:e.classList.contains(eI.checked)}),s&&(t.classList.remove(eI.focused),a&&a.classList.remove("e-focused")))})},e.prototype.clickHandler=function(t){if(!Array.isArray(this.dataSource)||0!==this.dataSource.length){var e=t.target;this.targetElement=e;var i,n=e.classList;if(n.contains(eI.backIcon)||n.contains(eI.headerText))this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();else{var s=ut(e.parentNode,"."+eI.listItem);if(null===s&&(s=e),this.removeFocus(),this.enable&&this.showCheckBox&&this.isValidLI(s))if(t.target.classList.contains(eI.checkboxIcon)){if(s.classList.add(eI.focused),y(s.querySelector("."+eI.checked))){var r={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:s};this.checkInternally(r,r.item.querySelector("."+eI.checkboxWrapper))}else this.uncheckItem(s),s.classList.add(eI.focused);if(this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(s,t),t){var o=this.selectEventData(s,t),a=s.querySelector("."+eI.checkboxIcon);m(o,{isChecked:a.classList.contains(eI.checked)});var l=s.querySelector("."+eI.checkboxWrapper),h=a.classList.contains(eI.checked),c=s.classList.contains(eI.focused);this.handleCheckboxState(s,a,l,h,c,o,!1)}}else s.classList.contains(eI.hasChild)?(this.removeHover(),this.removeSelect(),this.removeSelect(s),this.setSelectLI(s,t),s.classList.remove(eI.selected)):(this.setCheckboxLI(s,t),"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||(e.classList.add("e-focused"),this.targetElement=e));else this.setSelectLI(s,t),"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||(e.classList.add("e-focused"),this.targetElement=e);y(i=ut(t.target,"li"))||i.classList.contains("e-has-child")&&!t.target.parentElement.classList.contains("e-listview-checkbox")&&i.classList.add(eI.disable)}this.updateSelectedId()}},e.prototype.removeElement=function(t){return t&&t.parentNode&&t.parentNode.removeChild(t)},e.prototype.hoverHandler=function(t){var e=ut(t.target.parentNode,"."+eI.listItem);this.setHoverLI(e)},e.prototype.leaveHandler=function(){this.removeHover()},e.prototype.homeKeyHandler=function(t,e){if(t.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var i=this.curUL.querySelectorAll("."+eI.listItem),n=this.curUL.querySelector("."+eI.focused)||this.curUL.querySelector("."+eI.selected);n&&(n.classList.remove(eI.focused),this.showCheckBox||n.classList.remove(eI.selected));var s=e?i.length-1:0;i[s].classList.contains(eI.hasChild)||this.showCheckBox?i[s].classList.add(eI.focused):this.setSelectLI(i[s],t),i[s]?this.element.setAttribute("aria-activedescendant",i[s].id.toString()):this.element.removeAttribute("aria-activedescendant")}},e.prototype.onArrowKeyDown=function(t,e){var i,n;return!y(this.curUL.querySelector("."+eI.hasChild))||this.showCheckBox?(n=this.curUL.querySelector("."+eI.focused)||this.curUL.querySelector("."+eI.selected),y(i=ZC.getSiblingLI(this.curUL.querySelectorAll("."+eI.listItem),n,e))||(n&&(n.classList.remove(eI.focused),this.showCheckBox||n.classList.remove(eI.selected)),i.classList.contains(eI.hasChild)||this.showCheckBox?i.classList.add(eI.focused):this.setSelectLI(i,t))):(n=this.curUL.querySelector("."+eI.selected),i=ZC.getSiblingLI(this.curUL.querySelectorAll("."+eI.listItem),n,e),this.setSelectLI(i,t)),i?this.element.setAttribute("aria-activedescendant",i.id.toString()):this.element.removeAttribute("aria-activedescendant"),i},e.prototype.arrowKeyHandler=function(t,e){var i=this;if(t.preventDefault(),Object.keys(this.dataSource).length&&this.curUL){var n=this.onArrowKeyDown(t,e),s=this.element.getBoundingClientRect().top,r=this.element.getBoundingClientRect().height,o=this.curUL.querySelector("."+eI.listItem).getBoundingClientRect(),a=void 0,l=void 0;if(this.fields.groupBy&&(l=this.curUL.querySelector("."+eI.groupListItem).getBoundingClientRect()),n){var h=n.getBoundingClientRect().top,c=n.getBoundingClientRect().height;if(e)(a=this.isWindow?h:h-s)<0&&(!0===this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop+a);else{var d=this.isWindow?window.innerHeight:r;(a=this.isWindow?h+c:h-s+c)>d&&(!0===this.isWindow?window.scroll(0,pageYOffset+(a-d)):this.element.scrollTop=this.element.scrollTop+(a-d))}}else if(this.enableVirtualization&&e&&this.virtualizationModule.uiFirstIndex)this.onUIScrolled=function(){i.onArrowKeyDown(t,e),i.onUIScrolled=void 0},a=this.virtualizationModule.listItemHeight,!0===this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=this.element.scrollTop-a;else if(e)if(this.showHeader&&this.headerEle){var p=l?l.top:o.top,u=this.headerEle.getBoundingClientRect();a=u.top<0?u.height-p:0,!0===this.isWindow?window.scroll(0,pageYOffset-a):this.element.scrollTop=0}else this.fields.groupBy&&(a=this.isWindow?l.top<0?l.top:0:s-o.top+l.height,!0===this.isWindow?window.scroll(0,pageYOffset+a):this.element.scrollTop=this.element.scrollTop-a)}},e.prototype.enterKeyHandler=function(t){if(Object.keys(this.dataSource).length&&this.curUL){var e=!y(this.curUL.querySelector("."+eI.hasChild)),i=this.curUL.querySelector("."+eI.focused);e&&i&&(i.classList.remove(eI.focused),this.showCheckBox&&(this.removeSelect(),this.removeSelect(i),this.removeHover()),this.setSelectLI(i,t))}},e.prototype.spaceKeyHandler=function(t){if(this.enable&&this.showCheckBox&&Object.keys(this.dataSource).length&&this.curUL){t.preventDefault();var e=this.curUL.querySelector("."+eI.focused),i=void 0,n=void 0;if(!y(e)&&y(e.querySelector("."+eI.checked))){var s={curData:void 0,dataSource:void 0,fields:void 0,options:void 0,text:void 0,item:e};i=s.item.querySelector("."+eI.checkboxWrapper),this.checkInternally(s,i),n=i.querySelector("."+eI.checkboxIcon+"."+eI.icon)}else this.uncheckItem(e);var r=this.selectEventData(e,t);if(m(r,{isChecked:!!n&&n.classList.contains(eI.checked)}),!y(e)){var o=e.querySelector("."+eI.checkboxWrapper),a=e.querySelector("."+eI.checkboxIcon),l=a.classList.contains(eI.checked),h=e.classList.contains(eI.focused);this.handleCheckboxState(e,a,o,l,h,r,!1)}this.updateSelectedId()}},e.prototype.keyActionHandler=function(t){switch(t.keyCode){case 36:this.homeKeyHandler(t);break;case 35:this.homeKeyHandler(t,!0);break;case 40:this.arrowKeyHandler(t);break;case 38:this.arrowKeyHandler(t,!0);break;case 13:this.enterKeyHandler(t);break;case 8:this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back();break;case 32:!y(this.targetElement)&&this.targetElement.classList.contains("e-focused")||this.spaceKeyHandler(t)}},e.prototype.swipeActionHandler=function(t){"Right"===t.swipeDirection&&t.velocity>.5&&"touchend"===t.originalEvent.type&&(this.showCheckBox&&this.curDSLevel[this.curDSLevel.length-1]&&this.uncheckAllItems(),this.back())},e.prototype.focusout=function(){if(Object.keys(this.dataSource).length&&this.curUL){var t=this.curUL.querySelector("."+eI.focused);t&&(t.classList.remove(eI.focused),this.showCheckBox||y(this.selectedLI)||this.selectedLI.classList.add(eI.selected))}},e.prototype.wireEvents=function(){K.add(this.element,"keydown",this.keyActionHandler,this),K.add(this.element,"click",this.clickHandler,this),K.add(this.element,"mouseover",this.hoverHandler,this),K.add(this.element,"mouseout",this.leaveHandler,this),K.add(this.element,"focusout",this.focusout,this),this.touchModule=new ci(this.element,{swipe:this.swipeActionHandler.bind(this)}),y(this.scroll)||K.add(this.element,"scroll",this.onListScroll,this)},e.prototype.unWireEvents=function(){K.remove(this.element,"keydown",this.keyActionHandler),K.remove(this.element,"click",this.clickHandler),K.remove(this.element,"mouseover",this.hoverHandler),K.remove(this.element,"mouseout",this.leaveHandler),K.remove(this.element,"mouseover",this.hoverHandler),K.remove(this.element,"mouseout",this.leaveHandler),K.remove(this.element,"focusout",this.focusout),y(this.scroll)||K.remove(this.element,"scroll",this.onListScroll),this.touchModule&&this.touchModule.destroy(),this.touchModule=null},e.prototype.removeFocus=function(){for(var t=0,e=this.element.querySelectorAll("."+eI.focused);t<e.length;t++){e[t].classList.remove(eI.focused)}},e.prototype.removeHover=function(){var t=this.element.querySelector("."+eI.hover);t&&t.classList.remove(eI.hover)},e.prototype.removeSelect=function(t){if(y(t))for(var e=0,i=this.element.querySelectorAll("."+eI.selected);e<i.length;e++){var n=i[e];this.showCheckBox&&n.querySelector("."+eI.checked)||n.classList.remove(eI.selected)}else t.classList.remove(eI.selected)},e.prototype.isValidLI=function(t){return t&&t.classList.contains(eI.listItem)&&!t.classList.contains(eI.groupListItem)&&!t.classList.contains(eI.disable)},e.prototype.setCheckboxLI=function(t,e){if(this.isValidLI(t)&&this.enable&&this.showCheckBox){this.curUL.querySelector("."+eI.focused)&&this.curUL.querySelector("."+eI.focused).classList.remove(eI.focused);var i=t.querySelector("textarea")||t.querySelector("input");t.classList.add(eI.focused),y(e)||e.target===i&&i.classList.add("e-focused");var n=t.querySelector("."+eI.checkboxWrapper),s=n.querySelector("."+eI.checkboxIcon+"."+eI.icon);this.removeHover();var r=s.classList.contains(eI.checked),o=t.classList.contains(eI.focused);r?(s.classList.remove(eI.checked),t.classList.remove(eI.selected)):(s.classList.add(eI.checked),t.classList.add(eI.selected)),n.setAttribute("aria-checked",s.classList.contains(eI.checked)?"true":"false");var a=this.selectEventData(t,e);m(a,{isChecked:s.classList.contains(eI.checked)}),this.enableVirtualization&&this.virtualizationModule.setCheckboxLI(t,e),this.handleCheckboxState(t,s,n,r,o,a,!0,i),this.setSelectedItemData(t),this.renderSubList(t)}},e.prototype.selectEventData=function(t,e){var i=this.getItemData(t),n=XC(i,this.listBaseOption.fields),s={};return m(s,!y(i)&&"string"==typeof this.dataSource[0]||"number"==typeof this.dataSource[0]?{item:t,text:t&&t.innerText.trim(),data:this.dataSource}:{item:t,text:n&&n[this.listBaseOption.fields.text],data:i}),e&&m(s,{isInteracted:!0,event:e,cancel:!1,index:this.curUL&&Array.prototype.indexOf.call(this.curUL.children,t)}),s},e.prototype.setSelectedItemData=function(t){var e=this.getItemData(t),i=XC(e,this.listBaseOption.fields);y(e)||"string"!=typeof this.dataSource[0]&&"number"!=typeof this.dataSource[0]?this.selectedItems={item:t,text:i&&i[this.listBaseOption.fields.text],data:e}:this.selectedItems={item:t,text:t&&t.innerText.trim(),data:this.dataSource}},e.prototype.setSelectLI=function(t,e){var i=this;if(this.isValidLI(t)&&!t.classList.contains(eI.selected)&&this.enable){this.showCheckBox||this.removeSelect(),t.classList.add(eI.selected),this.removeHover(),this.setSelectedItemData(t),this.enableVirtualization&&this.virtualizationModule.setSelectLI(t,e);var n=this.selectEventData(t,e);this.trigger("select",n,function(e){e.cancel?(t.classList.remove(eI.selected),i.selectedLI=t):(i.selectedLI=t,i.renderSubList(t))})}},e.prototype.setHoverLI=function(t){if(this.isValidLI(t)&&!t.classList.contains(eI.hover)&&this.enable){var e=this.element.querySelectorAll("."+eI.hover);e&&e.length&&et(e,eI.hover),t.classList.contains(eI.selected)&&!this.showCheckBox||t.classList.add(eI.hover)}},e.prototype.getSubDS=function(){var t=this.curDSLevel;if(t.length){for(var e=this.localData,i=0,n=t;i<n.length;i++){var s=n[i],r={};r[this.fields.id]=s,this.curDSJSON=this.findItemFromDS(e,r);var o=XC(this.curDSJSON,this.listBaseOption.fields);e=this.curDSJSON?o[this.fields.child]:e}return e}return this.localData},e.prototype.getItemData=function(t){var e,i=this.dataSource instanceof dC?this.localData:this.dataSource,n=this.getElementUID(t);return e=y(this.element.querySelector("."+eI.hasChild))&&this.fields.groupBy?this.curViewDS:i,this.findItemFromDS(e,n)},e.prototype.findItemFromDS=function(t,e,i){var n,s=this;return t&&t.length&&e?t.some(function(r){var o=XC(r,s.listBaseOption.fields);if(!e[s.fields.id]&&!e[s.fields.text]||e[s.fields.id]&&(!y(o[s.fields.id])&&o[s.fields.id].toString())!==e[s.fields.id].toString()||e[s.fields.text]&&o[s.fields.text]!==e[s.fields.text])if("object"!=typeof r&&-1!==t.indexOf(r))n=i?t:r;else if(!y(e[s.fields.id])&&y(o[s.fields.id])){var a=s.element.querySelector('[data-uid="'+e[s.fields.id]+'"]');a&&a.innerText.trim()===o[s.fields.text]&&(n=r)}else Object.prototype.hasOwnProperty.call(o,s.fields.child)&&o[s.fields.child].length&&(n=s.findItemFromDS(o[s.fields.child],e,i));else n=i?t:r;return!!n}):n=t,n},e.prototype.getQuery=function(){var t=[],e=this.query?this.query:new Gb;if(!this.query){for(var i=0,n=Object.keys(this.fields.properties);i<n.length;i++){var s=n[i];"tableName"!==s&&this.fields[""+s]&&this.fields[""+s]!==ZC.defaultMappedFields[""+s]&&-1===t.indexOf(this.fields[""+s])&&t.push(this.fields[""+s])}e.select(t),Object.prototype.hasOwnProperty.call(this.fields.properties,"tableName")&&e.from(this.fields.tableName)}return e},e.prototype.setViewDataSource=function(t){void 0===t&&(t=this.localData);var e=y(this.fields.sortBy)?this.fields.text:this.fields.sortBy,i=ZC.addSorting(this.sortOrder,e);t&&this.fields.groupBy?"None"!==this.sortOrder?this.curViewDS=ZC.groupDataSource(ZC.getDataSource(t,i),this.listBaseOption.fields,this.sortOrder):this.curViewDS=ZC.groupDataSource(t,this.listBaseOption.fields,this.sortOrder):t&&"None"!==this.sortOrder?this.curViewDS=ZC.getDataSource(t,i):this.curViewDS=t},e.prototype.isInAnimation=function(){return this.curUL.classList.contains(".e-animate")},e.prototype.renderRemoteLists=function(t,e){this.isDestroyed||(this.localData=t.result,e.removeElement(e.contentContainer),this.renderList(),this.trigger("actionComplete",t))},e.prototype.triggerActionFailure=function(t){this.isDestroyed||this.trigger("actionFailure",t)},e.prototype.setLocalData=function(){var t=this;if(this.trigger("actionBegin"),this.dataSource instanceof dC)this.dataSource.ready?this.dataSource.ready.then(function(e){t.isOffline=t.dataSource.dataSource.offline,t.dataSource instanceof dC&&t.isOffline&&t.renderRemoteLists(e,t)}).catch(function(e){t.triggerActionFailure(e)}):this.dataSource.executeQuery(this.getQuery()).then(function(e){t.renderRemoteLists(e,t)}).catch(function(e){t.triggerActionFailure(e)});else if(this.dataSource&&this.dataSource.length)this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData});else{var e=this.element.querySelector("ul");e&&(lt(e),this.setProperties({dataSource:ZC.createJsonFromElement(e)},!0),this.localData=this.dataSource,this.renderList(),this.trigger("actionComplete",{data:this.localData}))}},e.prototype.reRender=function(){this.removeElement(this.headerEle),this.removeElement(this.ulElement),this.removeElement(this.contentContainer),this.isReact&&this.clearTemplate(),-1===Object.keys(window).indexOf("ejsInterop")&&(this.element.innerHTML=""),this.headerEle=this.ulElement=this.liCollection=void 0,this.header(),this.setLocalData()},e.prototype.resetCurrentList=function(){this.setViewDataSource(this.curViewDS),this.contentContainer.innerHTML="",this.createList(),this.renderIntoDom(this.curUL)},e.prototype.setAttributes=function(t){for(var e=0;e<t.length;e++){var i=t[parseInt(e.toString(),10)];i.classList.contains("e-list-item")&&(i.setAttribute("id",this.element.id+"_"+i.getAttribute("data-uid")),i.setAttribute("tabindex","-1"))}},e.prototype.createList=function(){this.currentLiElements=[],this.isNestedList=!1,this.ulElement=this.curUL=ZC.createList(this.createElement,this.curViewDS,this.listBaseOption,null,this),this.liCollection=this.curUL.querySelectorAll("."+eI.listItem),this.setAttributes(this.liCollection)},e.prototype.renderSubList=function(t){this.liElement=t;var e=t.getAttribute("data-uid");if(t.classList.contains(eI.hasChild)&&e){var i=ut(t.parentNode,"."+eI.parentItem),n=this.element.querySelector("[pid='"+e+"']");if(this.curDSLevel.push(e),this.setViewDataSource(this.getSubDS()),this.enableVirtualization&&this.virtualizationModule.updateDOMItemCount(),!n){var s=this.curViewDS;n=ZC.createListFromJson(this.createElement,s,this.listBaseOption,this.curDSLevel.length,null,this),this.isReact&&this.renderReactTemplates();var r=n.querySelectorAll("."+eI.listItem);this.setAttributes(r),n.setAttribute("pID",e),n.style.display="none",this.renderIntoDom(n)}if(this.switchView(i,n),this.liCollection=this.curUL.querySelectorAll("."+eI.listItem),this.selectedItems){var o=XC(this.selectedItems.data,this.listBaseOption.fields);this.header(o[this.listBaseOption.fields.text],!0,"header")}this.selectedLI=void 0}},e.prototype.renderIntoDom=function(t){this.contentContainer.appendChild(t)},e.prototype.renderList=function(t){this.setViewDataSource(t),this.enableVirtualization?(Object.keys(this.dataSource).length&&(!this.template&&!this.groupTemplate||this.virtualizationModule.isNgTemplate()||(this.listBaseOption.itemCreated=this.virtualizationModule.createUIItem.bind(this.virtualizationModule))),this.virtualizationModule.uiVirtualization()):(this.createList(),this.contentContainer=this.createElement("div",{className:eI.container}),this.element.appendChild(this.contentContainer),this.renderIntoDom(this.ulElement),this.isReact&&this.renderReactTemplates())},e.prototype.getElementUID=function(t){var e={};return t instanceof Element?e[this.fields.id]=t.getAttribute("data-uid"):e=t,e},e.prototype.render=function(){this.element.classList.add(eI.root),ht(this.element,{tabindex:"0"}),this.setCSSClass(),this.setEnableRTL(),this.setEnable(),this.setSize(),this.wireEvents(),this.header(),this.setLocalData(),this.setHTMLAttribute(),this.rippleFn=Xt(this.element,{selector:"."+eI.listItem}),this.renderComplete(),this.previousScrollTop=this.element.scrollTop},e.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.unWireEvents();var e=[eI.root,eI.disable,"e-rtl","e-has-header","e-lib"].concat(this.cssClass?this.cssClass.split(" ").filter(function(t){return t}):[]);et([this.element],e),this.element.removeAttribute("role"),this.element.removeAttribute("tabindex"),this.curUL=this.ulElement=this.liCollection=this.headerEle=void 0,this.element.innerHTML="",this.contentContainer=null,this.selectedItems=null,this.selectedLI=null,this.liElement=null,this.targetElement=null,this.currentLiElements=null,this.virtualCheckBox=null,t.prototype.destroy.call(this)},e.prototype.back=function(){var t=this.curDSLevel[this.curDSLevel.length-1];if(void 0!==t&&!this.isInAnimation()){this.curDSLevel.pop(),this.setViewDataSource(this.getSubDS()),this.enableVirtualization&&this.virtualizationModule.updateDOMItemCount();var e=this.element.querySelector("[data-uid='"+t+"']"),i=this.curUL;e?e=e.parentElement:(this.createList(),this.renderIntoDom(this.ulElement),e=this.curUL);var n=XC(this.curDSJSON,this.listBaseOption.fields)[this.fields.text];this.switchView(i,e,!0),this.removeFocus();var s=this.element.querySelector("[data-uid='"+t+"']");s.classList.remove(eI.disable),s.classList.add(eI.focused),this.showCheckBox&&s.querySelector("."+eI.checkboxIcon).classList.contains(eI.checked)||s.classList.remove(eI.selected),this.liCollection=this.curUL.querySelectorAll("."+eI.listItem),this.enableHtmlSanitizer&&this.setProperties({headerTitle:Yi.sanitize(this.headerTitle)},!0),this.header(this.curDSLevel.length?n:this.headerTitle,!!this.curDSLevel.length,"header")}},e.prototype.selectItem=function(t){this.enableVirtualization?this.virtualizationModule.selectItem(t):this.showCheckBox?this.setCheckboxLI(this.getLiFromObjOrElement(t)):!0===y(t)?this.removeSelect():this.setSelectLI(this.getLiFromObjOrElement(t))},e.prototype.unselectItem=function(t){if(y(t))this.removeSelect();else{var e=this.getLiFromObjOrElement(t);y(e)||this.removeSelect(e)}},e.prototype.getLiFromObjOrElement=function(t){var e,i=this.dataSource instanceof dC?this.localData:this.dataSource;if(!y(t))if("string"==typeof i[0]||"number"==typeof i[0])if(t instanceof Element){for(var n=t.getAttribute("data-uid").toString(),s=0;s<this.liCollection.length;s++)if(this.liCollection[parseInt(s.toString(),10)].getAttribute("data-uid").toString()===n){e=this.liCollection[parseInt(s.toString(),10)];break}}else Array.prototype.some.call(this.curUL.querySelectorAll("."+eI.listItem),function(i){return i.innerText.trim()===t.toString()&&(e=i,!0)});else{var r=this.getItemData(t),o=XC(r,this.listBaseOption.fields);if(r&&(e=this.element.querySelector('[data-uid="'+o[this.fields.id]+'"]'),!this.enableVirtualization&&y(e))){var a=this.element.querySelectorAll("."+eI.listItem);for(s=0;s<a.length;s++)a[parseInt(s.toString(),10)].innerText.trim()===o[this.fields.text]&&(e=a[parseInt(s.toString(),10)])}}return e},e.prototype.selectMultipleItems=function(t){if(!y(t))for(var e=0;e<t.length;e++)y(t[parseInt(e.toString(),10)])||this.selectItem(t[parseInt(e.toString(),10)])},e.prototype.getParentId=function(){var t=[];if(this.isNestedList)for(var e=this.curDSLevel.length-1;e>=0;e--)t.push(this.curDSLevel[parseInt(e.toString(),10)]);return t},e.prototype.updateSelectedId=function(){this.selectedId=[];for(var t=this.curUL.getElementsByClassName(eI.selected),e=0;e<t.length;e++){var i=this.getItemData(t[parseInt(e.toString(),10)]);!y(i)&&i[this.listBaseOption.fields.id]&&this.selectedId.push(i[this.listBaseOption.fields.id])}},e.prototype.getSelectedItems=function(){var t,e=!1;this.selectedId=[];var i=this.dataSource instanceof dC?this.localData:this.dataSource;if(this.enableVirtualization&&!e)t=this.virtualizationModule.getSelectedItems(),e=!0;else if(this.showCheckBox&&!e){var n=this.curUL.getElementsByClassName(eI.selected),s=[],r=[];this.selectedId=[];for(var o=[],a=0;a<n.length;a++)if("string"==typeof i[0]||"number"==typeof i[0])s.push(n[parseInt(a.toString(),10)].innerText.trim());else{var l=this.getItemData(n[parseInt(a.toString(),10)]),h=XC(l,this.listBaseOption.fields);this.isNestedList?o.push({data:l,parentId:this.getParentId()}):r.push(l),h?(s.push(h[this.listBaseOption.fields.text]),this.selectedId.push(h[this.listBaseOption.fields.id])):(s.push(void 0),this.selectedId.push(void 0))}"string"!=typeof i[0]&&"number"!=typeof i[0]||e||(t={item:n,data:i,text:s},e=!0),this.isNestedList&&!e?(t={item:n,data:o,text:s},e=!0):e||(t={item:n,data:r,text:s},e=!0)}else if(!e){var c=this.element.getElementsByClassName(eI.selected)[0];h=XC(this.getItemData(c),this.listBaseOption.fields);"string"!=typeof i[0]&&"number"!=typeof i[0]||e?e||(y(h)||y(c)?(t=void 0,e=!0):(this.selectedId.push(h[this.listBaseOption.fields.id]),t={text:h[this.listBaseOption.fields.text],item:c,data:this.getItemData(c)},e=!0)):(t=y(c)?void 0:{item:c,data:i,text:c.innerText.trim()},e=!0)}return t},e.prototype.findItem=function(t){return this.getItemData(t)},e.prototype.enableItem=function(t){this.setItemState(t,!0),this.enableVirtualization&&this.virtualizationModule.enableItem(t)},e.prototype.disableItem=function(t){this.setItemState(t,!1),this.enableVirtualization&&this.virtualizationModule.disableItem(t)},e.prototype.setItemState=function(t,e){var i=this.getItemData(t),n=XC(i,this.listBaseOption.fields);if(i){var s=this.element.querySelector('[data-uid="'+n[this.fields.id]+'"]');e?(s&&s.classList.remove(eI.disable),delete i[this.fields.enabled]):e||(s&&s.classList.add(eI.disable),i[this.fields.enabled]=!1)}},e.prototype.showItem=function(t){this.showHideItem(t,!1,""),this.enableVirtualization&&this.virtualizationModule.showItem(t)},e.prototype.hideItem=function(t){this.showHideItem(t,!0,"none"),this.enableVirtualization&&this.virtualizationModule.hideItem(t)},e.prototype.showHideItem=function(t,e,i){var n=this.getItemData(t),s=XC(n,this.listBaseOption.fields);if(n){var r=this.element.querySelector('[data-uid="'+s[this.fields.id]+'"]');r&&(r.style.display=i),e?n[this.fields.isVisible]=!1:delete n[this.fields.isVisible]}},e.prototype.addItem=function(t,e,i){void 0===e&&(e=void 0);var n=this.dataSource instanceof dC?this.localData:this.dataSource;this.addItemInternally(t,e,n,i)},e.prototype.addItemInternally=function(t,e,i,n){if(t instanceof Array)if(this.enableVirtualization)this.virtualizationModule.addItem(t,e,i,n);else{var s=this.findItemFromDS(i,e),r=void 0;if(s)(r=XC(s,this.listBaseOption.fields)[this.fields.child])||(r=[]),r=r.concat(t);if(s instanceof Array){for(var o=0;o<t.length;o++){i=this.addItemAtIndex(n,i,t[parseInt(o.toString(),10)]),this.setViewDataSource(i);var a=this.contentContainer?this.contentContainer.children[0]:null;this.contentContainer&&a?this.addItemIntoDom(t[parseInt(o.toString(),10)],a,this.curViewDS):this.reRender()}this.liCollection=this.curUL.querySelectorAll("."+eI.listItem)}else s&&(s[this.fields.child]=r,this.addItemInNestedList(s,t))}},e.prototype.addItemAtIndex=function(t,e,i){return!y(t)&&t>=0&&t<e.length&&y(this.listBaseOption.fields.groupBy)?e.splice(t,0,i):e.push(i),e},e.prototype.addItemInNestedList=function(t,e){var i=t[this.fields.id],n=t[this.fields.child],s=this.element.querySelector("[pid='"+i+"']"),r=this.element.querySelector("[data-uid='"+i+"']"),o=s||(r?ut(r,"ul"):null),a=s?n:[t];if(!!r&&!r.classList.contains(eI.hasChild)){var l=ZC.createListItemFromJson(this.createElement,a,this.listBaseOption,null,null,this);this.setAttributes(l),o.insertBefore(l[0],r),at(r)}if(s&&e)for(var h=0;h<e.length;h++)a.push(e[parseInt(h.toString(),10)]),this.addItemIntoDom(e[parseInt(h.toString(),10)],o,a)},e.prototype.addItemIntoDom=function(t,e,i){var n=i.indexOf(t);this.addListItem(t,n,e,i);var s=i[n-1];s&&s.isHeader&&1===s.items.length&&this.addListItem(s,n-1,e,i)},e.prototype.addListItem=function(t,e,i,n){var s=this.getLiFromObjOrElement(n[e+1])||this.getLiFromObjOrElement(n[e+2])||null,r=ZC.createListItemFromJson(this.createElement,[t],this.listBaseOption,null,null,this);if(this.setAttributes(r),this.template&&this.isReact&&this.renderReactTemplates(),this.fields.groupBy&&n[e+1]&&n[e+1].isHeader){var o=this.getLiFromObjOrElement(n[e-1]);o&&(s=o.nextElementSibling)}i.insertBefore(r[0],s)},e.prototype.removeItem=function(t){var e=this.dataSource instanceof dC?this.localData:this.dataSource;this.enableVirtualization?this.virtualizationModule.removeItem(t):this.removeItemFromList(t,e)},e.prototype.removeItemFromList=function(t,e){var i=this,n=this.curViewDS,s=t instanceof Element?this.getElementUID(t):t,r=this.findItemFromDS(e,s,!0);if(r){var o=this.findItemFromDS(r,s),a=n.indexOf(o),l=this.getLiFromObjOrElement(t),h=void 0;this.validateNestedView(l),this.fields.groupBy&&this.curViewDS[a-1]&&n[a-1].isHeader&&1===n[a-1].items.length&&l&&l.previousElementSibling.classList.contains(eI.groupListItem)&&(y(l.nextElementSibling)||l.nextElementSibling&&l.nextElementSibling.classList.contains(eI.groupListItem))&&(h=l.previousElementSibling),l&&at(l),h&&at(h);var c=r.length-1<=0?this.findParent(this.localData,this.fields.id,function(t){return t===o[i.fields.id]},null):null,d=r.indexOf(o);if(r.splice(d,1),this.setViewDataSource(e),c&&c.parent&&Array.isArray(c.parent[this.fields.child])&&c.parent[this.fields.child].length<=0){var p=this.getLiFromObjOrElement(c.parent);if(p){var u=ZC.createListItemFromJson(this.createElement,[c.parent],this.listBaseOption,null,null,this);this.setAttributes(u),p.parentElement.insertBefore(u[0],p),p.parentElement.removeChild(p)}}r.length<=0&&this.back(),this.liCollection=Array.prototype.slice.call(this.element.querySelectorAll("."+eI.listItem))}},e.prototype.validateNestedView=function(t){var e=t?t.getAttribute("data-uid").toString().toLowerCase():null;if(e&&this.curDSLevel&&this.curDSLevel.length>0)for(;this.curDSLevel.some(function(t){return t.toString().toLowerCase()===e});)this.back()},e.prototype.removeMultipleItems=function(t){if(t.length)for(var e=0;e<t.length;e++)this.removeItem(t[parseInt(e.toString(),10)])},e.prototype.findParent=function(t,e,i,n){if(Object.prototype.hasOwnProperty.call(t,e)&&!0===i(t[e]))return f({},t);for(var s=0;s<Object.keys(t).length;s++)if(t[Object.keys(t)[parseInt(s.toString(),10)]]&&"object"==typeof t[Object.keys(t)[parseInt(s.toString(),10)]]){var r=this.findParent(t[Object.keys(t)[parseInt(s.toString(),10)]],e,i,t);if(null!=r)return r.parent||(r.parent=n),r}return null},e.prototype.getModuleName=function(){return"listview"},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"virtualization",name:"Virtualization"}),t},e.prototype.onListScroll=function(t){var e={originalEvent:t,scrollDirection:"Bottom",distanceY:this.element.scrollHeight-this.element.scrollTop},i=this.element.scrollTop;i>this.previousScrollTop?(e.scrollDirection="Bottom",e.distanceY=this.element.scrollHeight-this.element.clientHeight-this.element.scrollTop,this.trigger("scroll",e)):this.previousScrollTop>i&&(e.scrollDirection="Top",e.distanceY=this.element.scrollTop,this.trigger("scroll",e)),this.previousScrollTop=i},e.prototype.getPersistData=function(){return this.addOnPersist(["cssClass","enableRtl","htmlAttributes","enable","fields","animation","headerTitle","sortOrder","showIcon","height","width","showCheckBox","checkBoxPosition","selectedId"])},JC([jt("")],e.prototype,"cssClass",void 0),JC([jt(!1)],e.prototype,"enableVirtualization",void 0),JC([jt({})],e.prototype,"htmlAttributes",void 0),JC([jt(!0)],e.prototype,"enable",void 0),JC([jt([])],e.prototype,"dataSource",void 0),JC([jt()],e.prototype,"query",void 0),JC([Bt(ZC.defaultMappedFields,sI)],e.prototype,"fields",void 0),JC([jt({effect:"SlideLeft",duration:400,easing:"ease"})],e.prototype,"animation",void 0),JC([jt("None")],e.prototype,"sortOrder",void 0),JC([jt(!1)],e.prototype,"showIcon",void 0),JC([jt(!1)],e.prototype,"showCheckBox",void 0),JC([jt("Left")],e.prototype,"checkBoxPosition",void 0),JC([jt("")],e.prototype,"headerTitle",void 0),JC([jt(!1)],e.prototype,"showHeader",void 0),JC([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),JC([jt("")],e.prototype,"height",void 0),JC([jt("")],e.prototype,"width",void 0),JC([jt(null)],e.prototype,"template",void 0),JC([jt(null)],e.prototype,"headerTemplate",void 0),JC([jt(null)],e.prototype,"groupTemplate",void 0),JC([Ut()],e.prototype,"select",void 0),JC([Ut()],e.prototype,"actionBegin",void 0),JC([Ut()],e.prototype,"actionComplete",void 0),JC([Ut()],e.prototype,"actionFailure",void 0),JC([Ut()],e.prototype,"scroll",void 0),e=JC([Ft],e)}(_e),function(){function t(t){this.elementDifference=0,this.listViewInstance=t}t.prototype.isNgTemplate=function(){return!y(this.listViewInstance.templateRef)&&"string"!=typeof this.listViewInstance.templateRef},t.prototype.isVueFunctionTemplate=function(){return this.listViewInstance.isVue&&"function"==typeof this.listViewInstance.template},t.prototype.uiVirtualization=function(){this.wireScrollEvent(!1);var t=this.listViewInstance.curViewDS,e=this.listViewInstance.isRendered,i=e&&!y(this.uiFirstIndex)&&this.uiLastIndex<=Object.keys(t).length?this.uiFirstIndex:0,n=t.slice(i,i+1);this.listViewInstance.ulElement=this.listViewInstance.curUL=ZC.createList(this.listViewInstance.createElement,n,this.listViewInstance.listBaseOption,null,this.listViewInstance),this.listViewInstance.contentContainer=this.listViewInstance.createElement("div",{className:eI.container}),this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer),this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement),this.listItemHeight=this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height,this.expectedDomItemCount=this.ValidateItemCount(1e4),this.updateDOMItemCount();var s=e&&!y(this.uiLastIndex)&&0!==this.listDiff?this.uiLastIndex:this.domItemCount-1;this.uiFirstIndex=i,this.uiLastIndex=s;var r=t.slice(i+1,s+1);rt(ZC.createListItemFromJson(this.listViewInstance.createElement,r,this.listViewInstance.listBaseOption,null,null,this.listViewInstance),this.listViewInstance.ulElement),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li"),this.topElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.topElement,this.listViewInstance.ulElement.firstElementChild),this.bottomElement=this.listViewInstance.createElement("div"),this.listViewInstance.ulElement.insertBefore(this.bottomElement,null),this.totalHeight=Object.keys(t).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.topElement.style.height=e?this.topElementHeight+"px":"0px",this.bottomElement.style.height=e?this.totalHeight-this.topElementHeight+"px":this.totalHeight+"px",this.topElementHeight=e?this.topElementHeight:0,this.bottomElementHeight=e?this.totalHeight-this.topElementHeight:this.totalHeight,this.listDiff=e&&Object.keys(t).length!==this.domItemCount?this.listDiff:0,e&&(this.listViewInstance.element.scrollTop=this.listViewInstance.previousScrollTop),this.uiIndicesInitialization()},t.prototype.wireScrollEvent=function(t){t?!0===this.listViewInstance.isWindow?(window.removeEventListener("scroll",this.onVirtualScroll),window.removeEventListener("scroll",this.updateUl)):K.remove(this.listViewInstance.element,"scroll",this.onVirtualUiScroll):this.listViewInstance.isWindow?(this.onVirtualScroll=this.onVirtualUiScroll.bind(this),window.addEventListener("scroll",this.onVirtualScroll)):K.add(this.listViewInstance.element,"scroll",this.onVirtualUiScroll,this)},t.prototype.ValidateItemCount=function(t){var e,i=parseFloat(S(this.listViewInstance.height));return(e=this.listViewInstance.isWindow?Math.round(window.innerHeight/this.listItemHeight*3):"string"==typeof this.listViewInstance.height&&-1!==this.listViewInstance.height.indexOf("%")?Math.round(this.listViewInstance.element.getBoundingClientRect().height/this.listItemHeight*1.5):Math.round(i/this.listItemHeight*1.5))>t&&(e=t),e},t.prototype.updateDOMItemCount=function(){this.domItemCount=this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length)},t.prototype.uiIndicesInitialization=function(){this.uiIndices={activeIndices:[],disabledItemIndices:[],hiddenItemIndices:[]};for(var t=this.listViewInstance.curViewDS,e=0;e<t.length;e++)this.listViewInstance.showCheckBox&&t[e][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(e),y(t[parseInt(e.toString(),10)][this.listViewInstance.fields.enabled])||t[e][this.listViewInstance.fields.enabled]||this.uiIndices.disabledItemIndices.push(e);if(this.isNgTemplate())for(var i=this.listViewInstance.element.querySelectorAll("."+eI.listItem),n=0;n<i.length;n++)i[n].context=this.listViewInstance.viewContainerRef.get(n).context},t.prototype.refreshItemHeight=function(){if(this.listViewInstance.curViewDS.length){var t=this.listViewInstance.curViewDS;this.listItemHeight=this.topElement.nextSibling.getBoundingClientRect().height,this.totalHeight=Object.keys(t).length*this.listItemHeight-this.domItemCount*this.listItemHeight,this.bottomElementHeight=this.totalHeight,this.bottomElement.style.height=this.totalHeight+"px"}},t.prototype.getscrollerHeight=function(t){return this.listViewInstance.isWindow?pageYOffset-t<=0?0:pageYOffset-t:this.listViewInstance.element.scrollTop-t<=0?0:this.listViewInstance.element.scrollTop-t},t.prototype.onVirtualUiScroll=function(){var t,e,i=this.listViewInstance.curViewDS;this.listItemHeight=ct(".e-list-item",this.listViewInstance.element).getBoundingClientRect().height,this.totalHeight=Object.keys(i).length*this.listItemHeight-this.domItemCount*this.listItemHeight,e=this.listViewInstance.isWindow?this.listViewInstance.ulElement.getBoundingClientRect().top-document.documentElement.getBoundingClientRect().top:this.listViewInstance.headerEle?this.listViewInstance.headerEle.getBoundingClientRect().height:0,this.scrollPosition=y(this.scrollPosition)?0:this.scrollPosition;var n,s=this.getscrollerHeight(e);(this.topElementHeight=this.listItemHeight*Math.floor(s/this.listItemHeight),this.bottomElementHeight=this.totalHeight-this.topElementHeight,t=s<=this.totalHeight?[this.topElementHeight,this.bottomElementHeight]:[this.totalHeight,0],this.topElementHeight=t[0],this.bottomElementHeight=t[1],this.topElementHeight!==parseFloat(this.topElement.style.height))&&(this.topElement.style.height=this.topElementHeight+"px",this.bottomElement.style.height=this.bottomElementHeight+"px",s>this.scrollPosition?(n=Math.round(this.topElementHeight/this.listItemHeight-this.listDiff))>this.expectedDomItemCount+5?this.onLongScroll(n,!0):this.onNormalScroll(n,!0):(n=Math.round(this.listDiff-this.topElementHeight/this.listItemHeight))>this.expectedDomItemCount+5?this.onLongScroll(n,!1):this.onNormalScroll(n,!1));this.listDiff=Math.round(this.topElementHeight/this.listItemHeight),"function"==typeof this.listViewInstance.onUIScrolled&&this.listViewInstance.onUIScrolled(),this.scrollPosition=s},t.prototype.onLongScroll=function(t,e){for(var i=e?this.uiFirstIndex+t:this.uiFirstIndex-t,n=this.listViewInstance.ulElement.querySelectorAll("li"),s=0;s<n.length;s++)this.updateUI(n[s],i),i++;this.uiLastIndex=e?this.uiLastIndex+t:this.uiLastIndex-t,this.uiFirstIndex=e?this.uiFirstIndex+t:this.uiFirstIndex-t},t.prototype.onNormalScroll=function(t,e){if(e)for(var i=0;i<t;i++){var n=++this.uiLastIndex;this.updateUI(this.topElement.nextElementSibling,n,this.bottomElement),this.uiFirstIndex++}else for(i=0;i<t;i++){n=--this.uiFirstIndex;var s=this.topElement.nextSibling;this.updateUI(this.bottomElement.previousElementSibling,n,s),this.uiLastIndex--}},t.prototype.updateUiContent=function(t,e){var i=this.listViewInstance.curViewDS;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]?(t.dataset.uid=ZC.generateId(),t.getElementsByClassName(eI.listItemText)[0].innerHTML=this.listViewInstance.curViewDS[e].toString()):(t.dataset.uid=i[parseInt(e.toString(),10)][this.listViewInstance.fields.id]?i[parseInt(e.toString(),10)][this.listViewInstance.fields.id]:ZC.generateId(),t.getElementsByClassName(eI.listItemText)[0].innerHTML=i[parseInt(e.toString(),10)][this.listViewInstance.fields.text]),this.listViewInstance.showIcon&&(t.querySelector("."+eI.listIcon)&&at(t.querySelector("."+eI.listIcon)),this.listViewInstance.curViewDS[e][this.listViewInstance.fields.iconCss])){var n=t.querySelector("."+eI.textContent),s=this.listViewInstance.curViewDS[e][this.listViewInstance.fields.iconCss].toString(),r=this.listViewInstance.createElement("div",{className:eI.listIcon+" "+s});n.insertBefore(r,t.querySelector("."+eI.listItemText))}if(this.listViewInstance.showCheckBox&&this.listViewInstance.fields.groupBy){this.checkListWrapper||(this.checkListWrapper=this.listViewInstance.curUL.querySelector("."+eI.checkboxWrapper).cloneNode(!0));n=t.querySelector("."+eI.textContent);this.listViewInstance.curViewDS[e].isHeader?t.querySelector("."+eI.checkboxWrapper)&&(t.classList.remove(eI.checklist),n.classList.remove(eI.checkbox),at(t.querySelector("."+eI.checkboxWrapper))):t.querySelector("."+eI.checkboxWrapper)||(t.classList.add(eI.checklist),n.classList.add(eI.checkbox),"Left"===this.listViewInstance.checkBoxPosition?n.classList.add("e-checkbox-left"):n.classList.add("e-checkbox-right"),n.append(this.checkListWrapper.cloneNode(!0)))}},t.prototype.changeElementAttributes=function(t,e){if(t.classList.remove(eI.disable),this.uiIndices.disabledItemIndices.length&&-1!==this.uiIndices.disabledItemIndices.indexOf(e)&&t.classList.add(eI.disable),t.style.display="",this.uiIndices.hiddenItemIndices.length&&-1!==this.uiIndices.hiddenItemIndices.indexOf(e)&&(t.style.display="none"),this.listViewInstance.showCheckBox){var i=t.querySelector("."+eI.checkboxWrapper);t.classList.remove(eI.selected),t.classList.remove(eI.focused),i&&(i.removeAttribute("aria-checked"),i.firstElementChild.classList.remove(eI.checked)),this.uiIndices.activeIndices.length&&-1!==this.uiIndices.activeIndices.indexOf(e)&&!this.listViewInstance.curUL.querySelector(eI.selected)&&(t.classList.add(eI.selected),i.firstElementChild.classList.add(eI.checked),i.setAttribute("aria-checked","true"),this.activeIndex===e&&t.classList.add(eI.focused))}else t.classList.remove(eI.selected),t.removeAttribute("aria-selected"),y(this.activeIndex)||this.activeIndex!==e||this.listViewInstance.curUL.querySelector(eI.selected)||(t.classList.add(eI.selected),t.setAttribute("aria-selected","true"));this.listViewInstance.fields.groupBy&&(this.listViewInstance.curViewDS[e].isHeader?t.classList.contains(eI.listItem)&&(t.classList.remove(eI.listItem),t.setAttribute("role","group"),t.classList.add(eI.groupListItem)):t.classList.contains(eI.groupListItem)&&(t.classList.remove(eI.groupListItem),t.setAttribute("role","listitem"),t.classList.add(eI.listItem)))},t.prototype.findDSAndIndexFromId=function(t,e){var i=this,n={};return y(e=this.listViewInstance.getElementUID(e))||t.some(function(t,s){return!!(e[i.listViewInstance.fields.id]&&e[i.listViewInstance.fields.id]===(t[i.listViewInstance.fields.id]&&t[i.listViewInstance.fields.id])||e===t)&&(n.index=s,n.data=t,!0)}),n},t.prototype.getSelectedItems=function(){var t=this;if(!y(this.activeIndex)||this.listViewInstance.showCheckBox&&this.uiIndices.activeIndices.length){var e=[],i=[];if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0]){var n=this.listViewInstance.curViewDS;if(this.listViewInstance.showCheckBox){for(var s=this.uiIndices.activeIndices,r=0;r<s.length;r++)e.push(n[s[r]]);return{text:e,data:e,index:this.uiIndices.activeIndices.map(function(e){return t.listViewInstance.dataSource.indexOf(n[e])})}}return{text:n[this.activeIndex],data:n[this.activeIndex],index:this.listViewInstance.dataSource.indexOf(n[this.activeIndex])}}var o=this.listViewInstance.curViewDS,a=this.listViewInstance.fields.text;if(this.listViewInstance.showCheckBox){var l=this.uiIndices.activeIndices;for(r=0;r<l.length;r++)i.push(o[l[r]][""+a]),e.push(o[l[parseInt(r.toString(),10)]]);var h=this.listViewInstance.dataSource instanceof dC?o:this.listViewInstance.dataSource;return{text:i,data:e,index:this.uiIndices.activeIndices.map(function(t){return h.indexOf(o[t])})}}var c=this.listViewInstance.dataSource instanceof dC?o:this.listViewInstance.dataSource;return{text:o[this.activeIndex][this.listViewInstance.fields.text],data:o[this.activeIndex],index:c.indexOf(o[this.activeIndex])}}},t.prototype.selectItem=function(t){var e=this,i=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);if(Object.keys(i).length){var n,s=this.activeIndex===i.index;if(this.activeIndex=i.index,this.listViewInstance.showCheckBox&&(-1===this.uiIndices.activeIndices.indexOf(i.index)?(n=!0,this.uiIndices.activeIndices.push(i.index)):(n=!1,this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i.index),1)),this.listViewInstance.curUL.querySelector("."+eI.focused)&&this.listViewInstance.curUL.querySelector("."+eI.focused).classList.remove(eI.focused)),this.listViewInstance.getLiFromObjOrElement(t))this.listViewInstance.showCheckBox?this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(t)):this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(t));else{var r;if("string"==typeof this.listViewInstance.dataSource[0]||"number"==typeof this.listViewInstance.dataSource[0])r={text:this.listViewInstance.curViewDS[this.activeIndex],data:this.listViewInstance.curViewDS[this.activeIndex],index:this.activeIndex};else{var o=this.listViewInstance.curViewDS;r={text:o[this.activeIndex][this.listViewInstance.fields.text],data:o[this.activeIndex],index:this.activeIndex}}this.listViewInstance.showCheckBox?this.listViewInstance.trigger("select",r,function(t){t.cancel&&(n?(r.isChecked=!n,e.uiIndices.activeIndices.splice(e.uiIndices.activeIndices.indexOf(i.index),1)):(r.isChecked=n,e.uiIndices.activeIndices.push(i.index)))}):s||(this.listViewInstance.removeSelect(),this.listViewInstance.trigger("select",r,function(t){t.cancel&&(e.activeIndex=void 0)}))}}else y(t)&&!this.listViewInstance.showCheckBox&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0)},t.prototype.enableItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);Object.keys(e).length&&this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e.index),1)},t.prototype.disableItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);Object.keys(e).length&&-1===this.uiIndices.disabledItemIndices.indexOf(e.index)&&this.uiIndices.disabledItemIndices.push(e.index)},t.prototype.showItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);Object.keys(e).length&&this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e.index),1)},t.prototype.hideItem=function(t){var e=this.findDSAndIndexFromId(this.listViewInstance.curViewDS,t);Object.keys(e).length&&-1===this.uiIndices.hiddenItemIndices.indexOf(e.index)&&this.uiIndices.hiddenItemIndices.push(e.index)},t.prototype.removeItem=function(t){var e,i=this.listViewInstance.curViewDS,n=this.findDSAndIndexFromId(i,t);Object.keys(n).length&&(e=n.data,i[n.index-1]&&i[n.index-1].isHeader&&1===i[n.index-1].items.length?(this.removeUiItem(n.index-1),this.removeUiItem(n.index-1)):this.removeUiItem(n.index));var s=this.listViewInstance.dataSource instanceof dC?this.listViewInstance.localData:this.listViewInstance.dataSource,r=s.indexOf(e);-1!==r&&(s.splice(r,1),this.listViewInstance.setViewDataSource(s)),this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")},t.prototype.setCheckboxLI=function(t,e){var i=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),t)+this.uiFirstIndex;this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),t)+this.uiFirstIndex,t.classList.contains(eI.selected)?-1===this.uiIndices.activeIndices.indexOf(i)&&this.uiIndices.activeIndices.push(i):this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i),1)},t.prototype.setSelectLI=function(t,e){this.activeIndex=Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"),t)+this.uiFirstIndex},t.prototype.checkedItem=function(t){if(t){this.uiIndices.activeIndices=[],this.activeIndex=void 0;for(var e=this.listViewInstance.curViewDS,i=0;i<e.length;i++)e[i].isHeader||this.uiIndices.activeIndices.push(i)}else this.activeIndex=void 0,this.uiIndices.activeIndices=[]},t.prototype.addUiItem=function(t){var e=this.listViewInstance.curViewDS;if(this.changeUiIndices(t,!0),this.activeIndex&&this.activeIndex>=t&&this.activeIndex++,this.listViewInstance.showCheckBox&&e[t][this.listViewInstance.fields.isChecked]&&this.uiIndices.activeIndices.push(t),parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)||(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px"),parseFloat(this.bottomElement.style.height)){var i=this.listViewInstance.curUL.lastElementChild.previousSibling;(n=this.listViewInstance.getLiFromObjOrElement(e[t+1])||this.listViewInstance.getLiFromObjOrElement(e[t+2]))&&(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)+this.listItemHeight+"px",this.updateUI(i,t,n))}else{i=this.listViewInstance.curUL.firstElementChild.nextSibling;var n=void 0;n=Object.keys(this.listViewInstance.curViewDS).length-1===t?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(e[t+1])||this.listViewInstance.getLiFromObjOrElement(e[t+2]),this.topElement.style.height=parseFloat(this.topElement.style.height)+this.listItemHeight+"px",this.uiFirstIndex++,this.uiLastIndex++,n&&(this.updateUI(i,t,n),!0===this.listViewInstance.isWindow?window.scrollTo(0,pageYOffset+this.listItemHeight):this.listViewInstance.element.scrollTop+=this.listItemHeight)}this.totalHeight+=this.listItemHeight,this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},t.prototype.removeUiItem=function(t){this.totalHeight-=this.listItemHeight;var e=this.listViewInstance.curViewDS[t],i=this.listViewInstance.getLiFromObjOrElement(e);if(this.listViewInstance.curViewDS.splice(t,1),this.activeIndex&&this.activeIndex>=t&&this.activeIndex--,i)if(this.domItemCount>Object.keys(this.listViewInstance.curViewDS).length)at(i),this.domItemCount--,this.uiLastIndex--,this.totalHeight=0;else{if(i.classList.contains(eI.disable)&&(i.classList.remove(eI.disable),this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t),1)),"none"===i.style.display&&(i.style.display="",this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t),1)),this.listViewInstance.showCheckBox&&i.classList.contains(eI.selected)){this.listViewInstance.removeSelect(),this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(t),1);var n=i.querySelector("."+eI.checkboxWrapper);n.removeAttribute("aria-checked"),n.firstElementChild.classList.remove(eI.checked),i.classList.contains(eI.focused)&&(i.classList.remove(eI.focused),this.activeIndex=void 0)}else i.classList.contains(eI.selected)&&(this.listViewInstance.removeSelect(),this.activeIndex=void 0);parseFloat(this.bottomElement.style.height)||parseFloat(this.topElement.style.height)?parseFloat(this.bottomElement.style.height)?(this.bottomElement.style.height=parseFloat(this.bottomElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiLastIndex,this.bottomElement)):(this.topElement.style.height=parseFloat(this.topElement.style.height)-this.listItemHeight+"px",this.updateUI(i,this.uiFirstIndex-1,this.topElement.nextSibling),this.uiLastIndex--,this.uiFirstIndex--):this.updateUI(i,this.uiLastIndex,this.bottomElement)}this.changeUiIndices(t,!1),this.listDiff=Math.round(parseFloat(this.topElement.style.height)/this.listItemHeight)},t.prototype.changeUiIndices=function(t,e){for(var i=Object.keys(this.uiIndices),n=0;n<i.length;n++)this.uiIndices[i[n]]=this.uiIndices[i[n]].map(function(i){return i>=t?e?++i:--i:i})},t.prototype.addItem=function(t,e,i,n){for(var s=0;s<t.length;s++){var r=t[s];if(i=this.listViewInstance.addItemAtIndex(n,i,r),this.listViewInstance.setViewDataSource(i),this.domItemCount)if(this.domItemCount<this.expectedDomItemCount){if(this.listViewInstance.findItemFromDS(i,e)instanceof Array){if(this.listViewInstance.ulElement){var o=this.listViewInstance.curViewDS.indexOf(r);this.createAndInjectNewItem(r,o),(a=this.listViewInstance.curViewDS[o-1])&&a.isHeader&&1===a.items.length&&(--o,this.createAndInjectNewItem(a,o))}this.listViewInstance.liCollection=this.listViewInstance.curUL.querySelectorAll("li")}}else{var a,l=this.listViewInstance.curViewDS.indexOf(r);this.addUiItem(l),(a=this.listViewInstance.curViewDS[l-1])&&a.isHeader&&1===a.items.length&&this.addUiItem(l-1)}else!this.listViewInstance.template&&!this.listViewInstance.groupTemplate||this.isNgTemplate()||(this.listViewInstance.listBaseOption.template=null,this.listViewInstance.listBaseOption.groupTemplate=null,this.listViewInstance.listBaseOption.itemCreated=this.createUIItem.bind(this)),this.uiVirtualization()}},t.prototype.createAndInjectNewItem=function(t,e){var i,n=ZC.createListItemFromJson(this.listViewInstance.createElement,[t],this.listViewInstance.listBaseOption,null,null,this.listViewInstance);if(i=Object.keys(this.listViewInstance.curViewDS).length-1===e?this.listViewInstance.curUL.lastElementChild:this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[e+1])||this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[e+2]),this.listViewInstance.fields.groupBy&&this.listViewInstance.curViewDS[e+1]&&this.listViewInstance.curViewDS[e+1].isHeader){var s=this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[e-1]);s&&(i=s.nextElementSibling)}this.listViewInstance.ulElement.insertBefore(n[0],i),this.domItemCount++,this.bottomElementHeight<=0&&this.uiLastIndex++,this.refreshItemHeight()},t.prototype.createUIItem=function(t){if(!t.item.classList.contains("e-list-group-item")&&(this.templateData=t.curData.isHeader?t.curData.items[0]:t.curData,this.listViewInstance.showCheckBox&&(this.listViewInstance.renderCheckbox(t),!y(this.listViewInstance.virtualCheckBox)&&!y(this.listViewInstance.virtualCheckBox.outerHTML)))){var e=document.createElement("div"),i='<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${'+this.listViewInstance.fields.text+"} </span></div>",n=Hi(this.listViewInstance.template||i,this.listViewInstance)(this.templateData,this.listViewInstance);if(this.listViewInstance.template&&this.listViewInstance.isReact&&this.listViewInstance.renderReactTemplates(),[].slice.call(n).forEach(function(t){e.appendChild(t)}),e.children&&e.children[0]){for(e.children[0].classList.add("e-checkbox"),"Left"===this.listViewInstance.checkBoxPosition?e.children[0].classList.add("e-checkbox-left"):e.children[0].classList.add("e-checkbox-right"),"Left"===this.listViewInstance.checkBoxPosition?e.children[0].insertBefore(this.listViewInstance.virtualCheckBox,e.childNodes[0].children[0]):e.children[0].appendChild(this.listViewInstance.virtualCheckBox);t.item.lastChild;)t.item.removeChild(t.item.lastChild);[].slice.call(e.children).forEach(function(e){t.item.appendChild(e)})}}},t.prototype.reRenderUiVirtualization=function(){this.wireScrollEvent(!0),this.listViewInstance.contentContainer&&at(this.listViewInstance.contentContainer),this.listViewInstance.preRender(),this.domItemCount=0,this.listViewInstance.header(),this.listViewInstance.setLocalData()},t.prototype.updateUI=function(t,e,i){var n=this.isNgTemplate()?this.onNgChange:this.onChange;if(this.listViewInstance.template||this.listViewInstance.groupTemplate){var s=this.listViewInstance.curViewDS[e];t.dataset.uid=s[this.listViewInstance.fields.id]?s[this.listViewInstance.fields.id]:ZC.generateId(),n(s,t,this)}else this.updateUiContent(t,e);this.changeElementAttributes(t,e),i&&this.listViewInstance.ulElement.insertBefore(t,i)},t.prototype.onChange=function(t,e,i){var n=ZC.createListItemFromJson(i.listViewInstance.createElement,[t],i.listViewInstance.listBaseOption,null,null,i.listViewInstance);for(i.listViewInstance.isReact&&i.listViewInstance.renderReactTemplates();e.lastChild;)e.removeChild(e.lastChild);[].slice.call(n[0].children).forEach(function(t){e.appendChild(t)})},t.prototype.onNgChange=function(t,e,i){for(var n=Hi(i.listViewInstance.template)(t);e.lastChild;)e.removeChild(e.lastChild);e.appendChild(n[0])},t.prototype.getModuleName=function(){return"virtualization"},t.prototype.destroy=function(){this.wireScrollEvent(!0),this.topElement=null,this.bottomElement=null}}(),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),oI=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},aI=function(t){function e(e,i){var n=t.call(this,i,e)||this;return n.getHelper=function(t){var e,i=n.getSortableElement(t.sender.target);return!!n.isValidTarget(i,n)&&(n.helper?e=n.helper({sender:i,element:t.element}):((e=i.cloneNode(!0)).style.width=i.offsetWidth+"px",e.style.height=i.offsetHeight+"px"),tt([e],["e-sortableclone"]),document.body.appendChild(e),e)},n.onDrag=function(t){if(t.target){n.trigger("drag",{event:t.event,element:n.element,target:t.target});var e,i=n.getSortableInstance(t.target),s=n.getSortableElement(t.target,i);if(!(n.isValidTarget(s,i)||t.target&&"string"==typeof t.target.className&&t.target.className.indexOf("e-list-group-item")>-1)||n.curTarget===s&&y(i.placeHolder)||i.placeHolderElement&&i.placeHolderElement===t.target)n.curTarget!==n.target&&n.scope&&n.curTarget!==s&&!y(i.placeHolder)&&(n.removePlaceHolder(n.getSortableInstance(n.curTarget)),n.curTarget=n.target);else{if(t.target.classList.contains("e-list-group-item")&&(s=t.target),n.curTarget=s,n.target===s)return;var r=n.getIndex(i.placeHolderElement,i),o=n.getPlaceHolder(s,i),a=void 0;if(o){r=y(r)?n.getIndex(n.target):r,a=n.getIndex(s,i,t.event);var l=n.isPlaceHolderPresent(i);if(l&&r===a)return;l&&n.removePlaceHolder(i),i.placeHolderElement=o,t.target&&"string"==typeof t.target.className&&t.target.className.indexOf("e-list-group-item")>-1?i.element.insertBefore(i.placeHolderElement,i.element.children[a]):i.element!==n.element&&a===i.element.childElementCount?i.element.appendChild(i.placeHolderElement):i.element.insertBefore(i.placeHolderElement,i.element.children[a])}else{r=y(r)?n.getIndex(n.target):n.getIndex(s,i)<r||!r?r:r-1,a=n.getIndex(s,i);var h=i.element!==n.element?a:r<a?a+1:a;n.updateItemClass(i),i.element.insertBefore(n.target,i.element.children[h]),n.curTarget=n.target,n.trigger("drop",{droppedElement:n.target,element:i.element,previousIndex:r,currentIndex:a,target:t.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:t.event,scope:n.scope})}}if(i=n.getSortableInstance(n.curTarget),y(s)&&t.target!==i.placeHolderElement)n.isPlaceHolderPresent(i)&&n.removePlaceHolder(i);else[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(function(t){(e=n.getSortableInstance(t)).element&&e!==i&&n.removePlaceHolder(e)})}},n.onDragStart=function(t){if(n.target=n.getSortableElement(t.target),y(n.target)&&ut(n.element,".e-listbox-container")&&G.isDevice)return at(t.dragElement),void It(n.element,"draggable").intDestroy(t.event);var e=!1;n.target.classList.add("e-grabbed"),n.curTarget=n.target,t.helper=document.getElementsByClassName("e-sortableclone")[0];var i={cancel:!1,element:n.element,target:n.target};n.trigger("beforeDragStart",i,function(i){i.cancel&&(e=i.cancel,n.onDragStop(t))}),e||(x?n.trigger("dragStart",{event:t.event,element:n.element,target:n.target,bindEvents:t.bindEvents,dragElement:t.dragElement}):n.trigger("dragStart",{event:t.event,element:n.element,target:n.target}))},n.onDragStop=function(t){var e,i,s,r=n.getSortableInstance(n.curTarget);e=n.getIndex(n.target);var o=n.isPlaceHolderPresent(r);if(o){var a=n.getIndex(r.placeHolderElement,r),l={previousIndex:e=n===r&&e-a>=1?e-1:e,currentIndex:a,target:t.target,droppedElement:n.target,helper:t.helper,cancel:!1,handled:!1};n.trigger("beforeDrop",l,function(i){if(!i.cancel){if(s=i.handled,n.updateItemClass(r),i.handled){var o=n.target.cloneNode(!0);n.target.classList.remove("e-grabbed"),n.target=o}r.element.insertBefore(n.target,r.placeHolderElement);var a=n.getIndex(n.target,r);i.currentIndex>i.previousIndex&&(e=n===r&&e-a>=1?e-1:e),n.trigger("drop",{event:t.event,element:r.element,previousIndex:e,currentIndex:a,target:t.target,helper:t.helper,droppedElement:n.target,scopeName:n.scope,handled:s})}n.removePlaceHolder(r)})}if(r=n.getSortableInstance(t.target),i=r.element.childElementCount,e=n.getIndex(n.target),r.element.querySelector(".e-list-nrt")&&(i-=1),n.curTarget===n.target&&t.target===n.curTarget&&(i=e),r.element===t.target||!o&&n.curTarget===n.target){var h={previousIndex:e,currentIndex:i,target:t.target,droppedElement:n.target,helper:t.helper,cancel:!1};n.trigger("beforeDrop",h,function(s){(r.element===t.target||"string"==typeof t.target.className&&t.target.className.indexOf("e-list-nrt")>-1||"string"==typeof t.target.className&&t.target.className.indexOf("e-list-nr-template")>-1||t.target.closest(".e-list-nr-template"))&&!s.cancel&&(n.updateItemClass(r),r.element.appendChild(n.target),n.trigger("drop",{event:t.event,element:r.element,previousIndex:e,currentIndex:i,target:t.target,helper:t.helper,droppedElement:n.target,scopeName:n.scope}))})}n.target.classList.remove("e-grabbed"),n.target=null,n.curTarget=null,lt(t.helper),It(n.element,"draggable").intDestroy(t.event)},n.bind(),n}var i;return rI(e,t),i=e,e.prototype.bind=function(){this.element.id||(this.element.id=b("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},e.prototype.initializeDraggable=function(){new Ke(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:1}),this.wireEvents()},e.prototype.wireEvents=function(){var t=this.element;K.add(t,"keydown",this.keyDownHandler,this)},e.prototype.unwireEvents=function(){var t=this.element;K.remove(t,"keydown",this.keyDownHandler)},e.prototype.keyDownHandler=function(t){if(27===t.keyCode){var e=It(this.element,"draggable");e&&e.intDestroy(null);var i=document.getElementsByClassName("e-sortableclone")[0];i&&i.remove();var n=document.getElementsByClassName("e-sortable-placeholder")[0];n&&n.remove()}},e.prototype.getPlaceHolder=function(t,e){if(e.placeHolder){var i=e.placeHolder({element:e.element,grabbedElement:this.target,target:t});return i.classList.add("e-sortable-placeholder"),i}return null},e.prototype.isValidTarget=function(t,e){return t&&I(t,e.element)&&t.classList.contains(e.itemClass)&&!t.classList.contains("e-disabled")},e.prototype.removePlaceHolder=function(t){lt(t.placeHolderElement),t.placeHolderElement=null},e.prototype.updateItemClass=function(t){this!==t&&(this.target.classList.remove(this.itemClass),this.target.classList.add(t.itemClass))},e.prototype.getSortableInstance=function(t){if(t=ut(t,".e-"+this.getModuleName())){var e=It(t,i);return e.scope&&this.scope&&e.scope===this.scope?e:this}return this},e.prototype.getIndex=function(t,e,i){var n,s;return void 0===e&&(e=this),[].slice.call(e.element.children).forEach(function(e,r){if(e.classList.contains("e-sortable-placeholder")&&(s=!0),e!==t);else if(n=r,!y(i)){s&&(n-=1);var o=t.getBoundingClientRect(),a=o.bottom-(o.bottom-o.top)/2,l=i.changedTouches?i.changedTouches[0].clientY:i.clientY;n=l<=a?n:n+1}}),n},e.prototype.getSortableElement=function(t,e){return void 0===e&&(e=this),ut(t,"."+e.itemClass)},e.prototype.queryPositionInfo=function(t){return t.left=scrollX?parseFloat(t.left)-scrollX+"px":t.left,t.top=scrollY?parseFloat(t.top)-scrollY+"px":t.top,t},e.prototype.isPlaceHolderPresent=function(t){return t.placeHolderElement&&!!ut(t.placeHolderElement,"#"+t.element.id)},e.prototype.moveTo=function(t,e,i){lI(this.element,t,e,i)},e.prototype.destroy=function(){this.unwireEvents(),"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),It(this.element,Ke).destroy(),t.prototype.destroy.call(this)},e.prototype.getModuleName=function(){return"sortable"},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){if("itemClass"===n[i])[].slice.call(this.element.children).forEach(function(i){i.classList.contains(e.itemClass)&&i.classList.remove(e.itemClass),t.itemClass&&i.classList.add(t.itemClass)})}},oI([jt(!1)],e.prototype,"enableAnimation",void 0),oI([jt(null)],e.prototype,"itemClass",void 0),oI([jt(null)],e.prototype,"scope",void 0),oI([jt()],e.prototype,"helper",void 0),oI([jt()],e.prototype,"placeHolder",void 0),oI([Ut()],e.prototype,"drag",void 0),oI([Ut()],e.prototype,"beforeDragStart",void 0),oI([Ut()],e.prototype,"dragStart",void 0),oI([Ut()],e.prototype,"beforeDrop",void 0),oI([Ut()],e.prototype,"drop",void 0),e=i=oI([Ft],e)}(Ct);function lI(t,e,i,n){var s=[];if(e||(e=t),i&&i.length?i.forEach(function(e){s.push(t.children[e])}):s=[].slice.call(t.children),y(n))s.forEach(function(t){e.appendChild(t)});else{var r=e.children[n];s.forEach(function(t){e.insertBefore(t,r)})}}var hI,cI=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),dI=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},pI="enter",uI="escape",gI="e-focused",mI="e-menu-header",fI="e-selected",yI="e-separator",vI="uparrow",bI="downarrow",CI="leftarrow",II="rightarrow",MI="home",SI="end",xI="tab",wI="e-caret",DI="e-menu-item",EI="e-disabled",TI="e-menu-hide",AI="e-icons",NI="e-rtl",LI="e-menu-popup",OI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cI(e,t),dI([jt("id")],e.prototype,"itemId",void 0),dI([jt("parentId")],e.prototype,"parentId",void 0),dI([jt("text")],e.prototype,"text",void 0),dI([jt("iconCss")],e.prototype,"iconCss",void 0),dI([jt("url")],e.prototype,"url",void 0),dI([jt("separator")],e.prototype,"separator",void 0),dI([jt("items")],e.prototype,"children",void 0),e}(re),kI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cI(e,t),dI([jt(null)],e.prototype,"iconCss",void 0),dI([jt("")],e.prototype,"id",void 0),dI([jt(!1)],e.prototype,"separator",void 0),dI([Rt([],e)],e.prototype,"items",void 0),dI([jt("")],e.prototype,"text",void 0),dI([jt("")],e.prototype,"url",void 0),dI([jt()],e.prototype,"htmlAttributes",void 0),e}(re),zI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cI(e,t),dI([jt("SlideDown")],e.prototype,"effect",void 0),dI([jt(400)],e.prototype,"duration",void 0),dI([jt("ease")],e.prototype,"easing",void 0),e}(re),PI=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.navIdx=[],n.animation=new qt({}),n.isTapHold=!1,n.tempItem=[],n.showSubMenuOn="Auto",n.isAnimationNone=!1,n.isKBDAction=!1,n}return cI(e,t),e.prototype.preRender=function(){if(!this.isMenu){var t=void 0;if("EJS-CONTEXTMENU"===this.element.tagName){t=this.createElement("ul",{id:b(this.getModuleName()),className:"e-control e-lib e-"+this.getModuleName()});var e=c("ej2_instances",this.element);et([this.element],["e-control","e-lib","e-"+this.getModuleName()]),this.clonedElement=this.element,this.element=t,d("ej2_instances",e,this.element)}else{t=this.createElement("ul",{id:b(this.getModuleName())}),rt([].slice.call(this.element.cloneNode(!0).children),t);var i=this.element.nextElementSibling;i?this.element.parentElement.insertBefore(t,i):this.element.parentElement.appendChild(t),this.clonedElement=t}this.clonedElement.style.display="none"}if("EJS-MENU"===this.element.tagName){for(var n=this.element,s=c("ej2_instances",n),r=(t=this.createElement("ul"),this.createElement("EJS-MENU",{className:"e-"+this.getModuleName()+"-wrapper"})),o=0,a=n.attributes.length;o<a;o++)t.setAttribute(n.attributes[o].nodeName,n.attributes[o].nodeValue);n.parentNode.insertBefore(r,n),at(n),n=t,r.appendChild(n),d("ej2_instances",s,n),this.clonedElement=r,this.element=n,this.element.id||(this.element.id=b(this.getModuleName()))}},e.prototype.render=function(){var t=this;this.initialize(),this.renderItems(),this.wireEvents(),this.renderComplete();var e=this.getWrapper();this.template&&this.enableScrolling&&(this.isReact||this.isAngular)&&requestAnimationFrame(function(){YC(t.createElement,e,t.element,"hscroll",t.enableRtl)})},e.prototype.enableTouchScroll=function(t){var e=0;this.touchStartFn=function(t){e=t.touches[0].clientY},this.touchMoveFn=function(i){var n=i.touches[0].clientY,s=e-n,r=0===t.scrollTop,o=t.scrollTop+t.clientHeight===t.scrollHeight;(r&&s<0||o&&s>0)&&i.preventDefault(),e=n},t.addEventListener("touchstart",this.touchStartFn,{passive:!1}),t.addEventListener("touchmove",this.touchMoveFn,{passive:!1})},e.prototype.touchOutsideHandler=function(t){ut(t.target,".e-"+this.getModuleName()+"-wrapper")||this.closeMenu()},e.prototype.initialize=function(){var t=this.getWrapper();t||(t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.isMenu?this.element.parentElement.insertBefore(t,this.element):document.body.appendChild(t)),this.cssClass&&tt([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&t.classList.add(NI),t.appendChild(this.element),this.isMenu&&this.hamburgerMode&&(this.target||this.createHeaderContainer(t)),this.defaultOption=this.showItemOnClick},e.prototype.renderItems=function(){if(!this.items.length){var t=ZC.createJsonFromElement(this.element,{fields:{child:"items"}});this.setProperties({items:t},!0),x()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML=""}var e=this.createItems(this.items);if(rt(Array.prototype.slice.call(e.children),this.element),this.element.classList.add("e-menu-parent"),this.isMenu){if(!this.hamburgerMode&&this.element.classList.contains("e-vertical")&&this.setBlankIconStyle(this.element),this.enableScrolling){var i=this.getWrapper();this.element.classList.contains("e-vertical")?YC(this.createElement,i,this.element,"vscroll",this.enableRtl):YC(this.createElement,i,this.element,"hscroll",this.enableRtl)}}else this.element.parentElement.setAttribute("role","dialog"),this.element.parentElement.setAttribute("aria-label","context menu")},e.prototype.wireEvents=function(){var t=this.getWrapper();if(this.target){for(var e=void 0,i=dt(this.target),n=0,s=i.length;n<s;n++)e=i[n],this.isMenu?K.add(e,"click",this.menuHeaderClickHandler,this):G.isIos?new ci(e,{tapHold:this.touchHandler.bind(this)}):K.add(e,"contextmenu",this.cmenuHandler,this);if(this.targetElement=e,!this.isMenu){K.add(this.targetElement,"scroll",this.scrollHandler,this);for(var r=0,o=$r(this.targetElement);r<o.length;r++){var a=o[r];K.add(a,"scroll",this.scrollHandler,this)}}}G.isDevice||(this.delegateMoverHandler=this.moverHandler.bind(this),this.delegateMouseDownHandler=this.mouseDownHandler.bind(this),K.add(this.isMenu?document:t,"mouseover",this.delegateMoverHandler,this),K.add(document,"mousedown",this.delegateMouseDownHandler,this),K.add(document,"keydown",this.domKeyHandler,this),this.isMenu||this.target||K.add(document,"scroll",this.scrollHandler,this)),this.delegateClickHandler=this.clickHandler.bind(this),K.add(document,"click",this.delegateClickHandler,this),this.wireKeyboardEvent(t),this.rippleFn=Xt(t,{selector:"."+DI}),!this.isMenu&&this.enableScrolling&&(this.enableTouchScroll(t),document.addEventListener("touchstart",this.touchOutsideHandler.bind(this),{passive:!0}))},e.prototype.wireKeyboardEvent=function(t){var e={downarrow:bI,uparrow:vI,enter:pI,leftarrow:CI,rightarrow:II,escape:uI};this.isMenu&&(e.home=MI,e.end=SI,e.tab=xI),new si(t,{keyAction:this.keyBoardHandler.bind(this),keyConfigs:e})},e.prototype.mouseDownHandler=function(t){ut(t.target,".e-"+this.getModuleName()+"-wrapper")===this.getWrapper()||ut(t.target,".e-"+this.getModuleName()+"-popup")||this.closeMenu(this.isMenu?null:this.navIdx.length,t)},e.prototype.keyHandler=function(t){38!==t.keyCode&&40!==t.keyCode||t.target&&(t.target.classList.contains("e-contextmenu")||t.target.classList.contains("e-menu-item"))&&t.preventDefault()},e.prototype.domKeyHandler=function(t){27===t.keyCode&&(this.isMenuVisible()&&t.stopImmediatePropagation(),t.action=uI,this.leftEscKeyHandler(t))},e.prototype.keyBoardHandler=function(t){var e="",i=t.target,n=this.isMenu&&!this.hamburgerMode&&!this.element.classList.contains("e-vertical")&&this.navIdx.length<1;if(t.preventDefault(),this.enableScrolling&&13===t.keyCode&&i.classList.contains("e-scroll-nav")&&this.removeLIStateByClass([gI,fI],[ut(i,".e-"+this.getModuleName()+"-wrapper")]),this.isKBDAction=!0,n)switch(t.action){case II:e=II,t.action=bI;break;case CI:e=CI,t.action=vI;break;case bI:e=bI,t.action=II;break;case vI:e=vI,t.action=""}else if(this.enableRtl)switch(t.action){case CI:n=!0,e=CI,t.action=II;break;case II:n=!0,e=II,t.action=CI}switch(t.action){case bI:case vI:case SI:case MI:case xI:this.upDownKeyHandler(t);break;case II:this.rightEnterKeyHandler(t);break;case CI:this.leftEscKeyHandler(t);break;case pI:this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):this.rightEnterKeyHandler(t)}this.isAnimationNone&&(this.isKBDAction=!1),n&&(t.action=e)},e.prototype.upDownKeyHandler=function(t){var e=this.getUlByNavIdx(),i=t.action===bI||t.action===MI||t.action===xI?0:e.childElementCount-1,n=i,s=this.getLIByClass(e,gI);s&&(t.action!==SI&&t.action!==MI&&(n=this.getIdx(e,s)),s.classList.remove(gI),t.action!==SI&&t.action!==MI&&(t.action===bI?n++:n--,n===(t.action===bI?e.childElementCount:-1)&&(n=i)));var r=e.children[n];n=this.isValidLI(r,n,t.action),e.children[n].classList.add(gI),e.children[n].focus()},e.prototype.isValidLI=function(t,e,i){var n=this.getUlByNavIdx(),s=i===bI||i===MI||i===xI?0:n.childElementCount-1;return(t.classList.contains(yI)||t.classList.contains(EI)||t.classList.contains(TI))&&(i===bI&&e===n.childElementCount-1||i===vI&&0===e?e=s:i===bI||i===II||"tab"===i&&t.classList.contains(yI)?e++:e--),(t=n.children[e])&&(t.classList.contains(yI)||t.classList.contains(EI)||t.classList.contains(TI))&&(e=this.isValidLI(t,e,i)),e},e.prototype.getUlByNavIdx=function(t){var e=this;if(void 0===t&&(t=this.navIdx.length),this.isMenu){var i=[this.getWrapper()].concat([].slice.call(dt("."+LI)))[t],n=[];return dt("."+LI).forEach(function(t){(e.element.id===t.id.split("-")[2]||t.id.split("-")[2]+"-"+t.id.split("-")[3])&&n.push(t)}),y(i=[this.getWrapper()].concat([].slice.call(n))[t])?null:ct(".e-menu-parent",i)}return document.body.contains(this.element)||0!==t?this.getWrapper().children[t]:null},e.prototype.rightEnterKeyHandler=function(t){var e,i=this.getUlByNavIdx(),n=this.getLIByClass(i,gI);if(n){var s=this.getIdx(i,n),r=this.navIdx.concat(s),o=this.getItem(r);if(o.items.length)this.navIdx.push(s),this.keyType="right",this.action=t.action,this.openMenu(n,o,-1,-1,t);else if(t.action===pI){this.isMenu&&0===this.navIdx.length?this.removeLIStateByClass([fI],[this.getWrapper()]):n.classList.remove(gI),n.classList.add(fI),e={element:n,item:o,event:t},this.trigger("select",e);var a=n.querySelector(".e-menu-url");if(o.url&&a)switch(a.getAttribute("target")){case"_blank":window.open(o.url,"_blank");break;case"_parent":window.parent.location.href=o.url;break;default:window.location.href=o.url}this.closeMenu(null,t);var l=this.getLIByClass(this.getUlByNavIdx(),fI);l&&(l.classList.add(gI),l.focus())}}},e.prototype.leftEscKeyHandler=function(t){this.navIdx.length?(this.keyType="left",this.closeMenu(this.navIdx.length,t)):t.action===uI&&this.closeMenu(null,t)},e.prototype.scrollHandler=function(t){this.closeMenu(null,t)},e.prototype.touchHandler=function(t){this.isTapHold=!0,this.cmenuHandler(t.originalEvent)},e.prototype.cmenuHandler=function(t){t.preventDefault(),this.currentTarget=t.target,this.isCMenu=!0,this.pageX=t.changedTouches?t.changedTouches[0].pageX+1:t.pageX+1,this.pageY=t.changedTouches?t.changedTouches[0].pageY+1:t.pageY+1,this.closeMenu(null,t),this.isCMenu&&(this.canOpen(t.target)&&this.openMenu(null,null,this.pageY,this.pageX,t),this.isCMenu=!1)},e.prototype.closeMenu=function(t,e,i){var n=this;if(void 0===t&&(t=0),void 0===e&&(e=null),this.isMenuVisible()){var s,r,o=void 0,a=this.getWrapper(),l=void 0,h=this.getPopups(),c=!1,d=this.isMenu?h.length+1:a.childElementCount,p=this.isMenu&&1!==d?ct(".e-ul",h[d-2]):dt(".e-menu-parent",a)[d-1];if(this.isMenu&&p.classList.contains("e-menu")&&((o=this.getLIByClass(p,fI))&&o.classList.remove(fI),c=!0),!c){var u=e&&e.target&&this.getLI(e.target);this.cli=u||p.children[0],s=this.navIdx.length?this.getItem(this.navIdx):null,r=s?s.items:this.items,l={element:p,parentItem:s,items:r,event:e,cancel:!1,isFocused:!0},this.trigger("beforeClose",l,function(o){var l,h,c,d,g,m,f="",v=!o.cancel;(v||n.isCMenu)&&(n.isMenu?(l=ut(p,"."+LI),n.hamburgerMode&&(l.parentElement.style.minHeight="",ut(p,".e-menu-item").setAttribute("aria-expanded","false")),n.unWireKeyboardEvent(l),QC(D(l.children[0],WC),l.children[0]),(c=D(l,Jr)).hide(),f=l.id,c.destroy(),at(l)):(n.isContextMenuClosed=!1,n.toggleAnimation(p,!1)),h={element:p,parentItem:s,items:r},n.trigger("onClose",h),n.navIdx.pop(),0===n.navIdx.length&&e&&"keyup"===e.type&&(n.showSubMenu=!1),n.isMenu||(K.remove(p,"keydown",n.keyHandler),"right"===n.keyType&&(n.keyType=""))),n.updateReactTemplate();var b=n.getWrapper()&&n.getUlByNavIdx();(n.isCMenu&&(n.canOpen(e.target)&&n.openMenu(null,null,n.pageY,n.pageX,e),n.isCMenu=!1),n.isMenu&&b&&f.length)?(d=new RegExp("(.*)-ej2menu-"+n.element.id+"-popup").exec(f)[1],g=b.querySelector('[id="'+d+'"]'),m=u&&b.querySelector('[id="'+u.id+'"]')):b&&(g=b.querySelector(".e-menu-item.e-selected"),m=u&&b.querySelector('[id="'+u.id+'"]'));var C=u&&u.querySelectorAll(".e-menu-item");if(v&&n.hamburgerMode&&t&&!C.length)n.afterCloseMenu(e);else if(v&&!n.hamburgerMode&&g&&!m&&"left"!==n.keyType&&(n.navIdx.length||!n.isMenu&&0===n.navIdx.length)){var I=e&&e.target.classList&&(e.target.classList.contains("e-vscroll")||e.target.classList.contains("e-scroll-nav"))?ut(e.target,".e-menu-wrapper"):null;I?(I=I.querySelector(".e-menu-item"),(n.showItemOnClick||I&&n.getIndex(I.id,!0).length<=n.navIdx.length)&&n.closeMenu(n.navIdx[n.navIdx.length-1],e,!0)):e&&e.target.classList&&e.target.classList.contains("e-nav-arrow")||n.closeMenu(n.navIdx[n.navIdx.length-1],e)}else if(v&&!i&&!t&&(n.hamburgerMode&&n.navIdx.length||1===n.navIdx.length&&u&&b!==u.parentElement))n.closeMenu(null,e);else if(v&&y(t)&&n.navIdx.length)n.closeMenu(null,e);else if(!v||n.isMenu||t||0!==n.navIdx.length||n.isMenusClosed||n.isCmenuHover)if(v&&n.isMenu&&e&&e.target&&0!==n.navIdx.length&&ut(e.target,".e-menu-parent.e-control"))n.closeMenu(0,e);else if(v&&!n.isMenu&&dt(".e-menu-parent",a)[t-1]&&3===e.which)n.closeMenu(null,e);else{if(!v||"right"!==n.keyType&&"click"!==n.keyType){var M=n.getUlByNavIdx(),S=n.getLIByClass(M,fI);if(S&&(S.setAttribute("aria-expanded","false"),S.classList.remove(fI),(o.isFocused&&u||"left"===n.keyType)&&(S.classList.add(gI),e.target&&e.target.classList.contains("e-edit-template")||S.focus())),!v&&n.hamburgerMode&&u&&"false"===u.getAttribute("aria-expanded")&&"true"===u.getAttribute("aria-haspopup")){ut(u,".e-menu-parent.e-control")?n.navIdx=[]:n.navIdx.pop(),n.navIdx.push(n.cliIdx);var x=n.getItem(n.navIdx);u.setAttribute("aria-expanded","true"),n.openMenu(u,x,-1,-1,e)}}else n.afterCloseMenu(e);n.navIdx.length<1&&("Hover"!==n.showSubMenuOn&&"Click"!==n.showSubMenuOn||(n.showItemOnClick=n.defaultOption,n.showSubMenuOn="Auto"))}else n.isMenusClosed=!0,n.closeMenu(0,e);n.removeStateWrapper()})}}},e.prototype.updateReactTemplate=function(){if(this.isReact&&this.template&&0===this.navIdx.length){var t=void 0;this.portals&&(t=this.portals.splice(0,this.items.length)),this.clearTemplate(["template"]),this.portals=t,this.renderReactTemplates()}},e.prototype.getMenuItemModel=function(t,e){if(y(t))return null;y(e)&&(e=0);var i=this.getFields(e);return{text:t[i.text],id:t[i.id],items:t[i.child],separator:t[i.separator],iconCss:t[i.iconCss],url:t[i.url]}},e.prototype.getPopups=function(){var t=this,e=[];return[].slice.call(document.querySelectorAll("."+LI)).forEach(function(i){!y(i.querySelector("."+DI))&&t.getIndex(i.querySelector("."+DI).id,!0).length&&e.push(i)}),e},e.prototype.isMenuVisible=function(){return this.navIdx.length>0||this.element.classList.contains("e-contextmenu")&&nt(this.element).valueOf()},e.prototype.canOpen=function(t){var e=!0;if(this.filter){e=!1;for(var i=this.filter.split(" "),n=0,s=i.length;n<s;n++)if(ut(t,"."+i[n])){e=!0;break}}return e},e.prototype.openMenu=function(t,e,i,n,s,r){var o=this;void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=null),void 0===r&&(r=this.targetElement);var a=this.getWrapper();this.lItem=t;var l=""!==this.element.id?this.element.id:"menu";if(this.isMenusClosed=!1,y(i)&&(i=-1),y(n)&&(n=-1),t){if(this.uList=this.createItems(e[this.getField("children",this.navIdx.length-1)]),!this.isMenu&&G.isDevice){a.lastChild.style.display="none";var h={text:e[this.getField("text")].toString(),iconCss:AI+" e-previous"};this.template&&(e.iconCss=(e.iconCss||"")+AI+" e-previous");var c=new kI(this.items[0],"items",this.template?e:h,!0),d=this.createItems([c]).children[0];d.classList.add(mI),this.uList.insertBefore(d,this.uList.children[0])}this.isMenu?(this.popupWrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper "+LI,id:t.id+"-ej2menu-"+l+"-popup"}),this.popupWrapper.setAttribute("role","navigation"),this.popupWrapper.setAttribute("aria-label",e.text+"-menu-popup"),this.hamburgerMode?(i=t.offsetHeight,t.appendChild(this.popupWrapper)):document.body.appendChild(this.popupWrapper),this.isNestedOrVertical=this.element.classList.contains("e-vertical")||1!==this.navIdx.length,this.popupObj=this.generatePopup(this.popupWrapper,this.uList,t,this.isNestedOrVertical),this.template&&this.renderReactTemplates(),this.hamburgerMode?this.calculateIndentSize(this.uList,t):(this.cssClass&&tt([this.popupWrapper],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.popupObj.hide()),this.hamburgerMode||this.showItemOnClick||!this.hoverDelay?this.triggerBeforeOpen(t,this.uList,e,s,0,0,"menu"):(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){o.triggerBeforeOpen(t,o.uList,e,s,0,0,"menu")},this.hoverDelay))):(this.uList.style.zIndex=this.element.style.zIndex,a.appendChild(this.uList),!this.showItemOnClick&&this.hoverDelay?(window.clearInterval(this.timer),this.timer=window.setTimeout(function(){o.triggerBeforeOpen(t,o.uList,e,s,i,n,"none")},this.hoverDelay)):this.triggerBeforeOpen(t,this.uList,e,s,i,n,"none"))}else if(this.uList=this.element,this.uList.style.zIndex=to(r||this.element).toString(),y(s)){var p=document.createEvent("MouseEvents");p.initEvent("click",!0,!1);var u=this.copyObject(p,{});u.target=u.srcElement=r,u.currentTarget=r,this.triggerBeforeOpen(t,this.uList,e,u,i,n,"none")}else this.triggerBeforeOpen(t,this.uList,e,s,i,n,"none")},e.prototype.copyObject=function(t,e){for(var i in t)e[""+i]=t[""+i];return e},e.prototype.calculateIndentSize=function(t,e){var i=getComputedStyle(e),n=parseInt(i.textIndent,10);this.navIdx.length<2&&!e.classList.contains("e-blankicon")?n*=2:n+=n/4,t.style.textIndent=n+"px";var s=t.querySelectorAll(".e-blankicon");if(s&&s.length)for(var r=t.querySelector(".e-menu-icon"),o=getComputedStyle(r),a=parseInt(o.marginRight,10)+r.offsetWidth+n,l=0;l<s.length;l++)s[l].style.textIndent=a+"px"},e.prototype.generatePopup=function(t,e,i,n){var s=this,r=new Jr(t,{actionOnScroll:this.hamburgerMode?"none":"reposition",relateTo:i,collision:this.hamburgerMode?{X:"none",Y:"none"}:{X:n||this.enableRtl?"none":"flip",Y:"fit"},position:n&&!this.hamburgerMode?{X:"right",Y:"top"}:{X:"left",Y:"bottom"},targetType:"relative",enableRtl:this.enableRtl,content:e,open:function(){var t=ct(".e-menu-vscroll",r.element);t&&(t.style.height="inherit",t.style.maxHeight="");var e=ct(".e-ul",r.element);r.element.style.maxHeight="",e.focus(),s.triggerOpen(e)}});return r},e.prototype.createHeaderContainer=function(t){t=t||this.getWrapper();var e=this.createElement("span",{className:"e-"+this.getModuleName()+"-header"}),i=this.enableHtmlSanitizer?Yi.sanitize(this.title):this.title,n=this.createElement("span",{className:"e-"+this.getModuleName()+"-title",innerHTML:i}),s=this.createElement("span",{className:"e-icons e-"+this.getModuleName()+"-icon",attrs:{tabindex:"0"}});e.appendChild(n),e.appendChild(s),t.insertBefore(e,this.element)},e.prototype.openHamburgerMenu=function(t){this.hamburgerMode&&this.triggerBeforeOpen(null,this.element,null,t,0,0,"hamburger")},e.prototype.closeHamburgerMenu=function(t){var e=this,i={element:this.element,parentItem:null,event:t,items:this.items,cancel:!1};this.trigger("beforeClose",i,function(i){i.cancel||(e.closeMenu(null,t),e.element.classList.add("e-hide-menu"),e.trigger("onClose",{element:e.element,parentItem:null,items:e.items}))})},e.prototype.callFit=function(t,e,i,n,s){return Mr(t,null,{X:e,Y:i},{top:n,left:s})},e.prototype.triggerBeforeOpen=function(t,e,i,n,s,r,o){var a,l=this,h=t?i[this.getField("children",this.navIdx.length-1)]:this.items,c={element:e,items:h,parentItem:i,event:n,cancel:!1,top:s,left:r,showSubMenuOn:"Auto"},d=o;this.trigger("beforeOpen",c,function(s){switch(d){case"menu":l.hamburgerMode||("Auto"!==s.showSubMenuOn&&(l.showItemOnClick=!l.defaultOption,l.showSubMenuOn=s.showSubMenuOn),l.top=s.top,l.left=s.left),l.popupWrapper.style.display="block",l.hamburgerMode||(l.popupWrapper.style.maxHeight=l.popupWrapper.getBoundingClientRect().height+"px",l.enableScrolling&&YC(l.createElement,l.popupWrapper,l.uList,"vscroll",l.enableRtl),l.checkScrollOffset(n)),l.hamburgerMode||l.left||l.top?(l.popupObj.collision={X:"none",Y:"none"},l.popupWrapper.style.display=""):(l.popupObj.refreshPosition(l.lItem,!0),l.left=parseInt(l.popupWrapper.style.left,10),l.top=parseInt(l.popupWrapper.style.top,10),l.enableRtl&&(l.left=l.isNestedOrVertical?l.left-l.popupWrapper.offsetWidth-l.lItem.parentElement.offsetWidth+2:l.left-l.popupWrapper.offsetWidth+l.lItem.offsetWidth),l.template&&(l.isReact||l.isAngular)?requestAnimationFrame(function(){l.collision(),l.popupWrapper.style.display=""}):(l.collision(),l.popupWrapper.style.display=""));break;case"none":l.top=s.top,l.left=s.left,l.isContextMenuClosed=!0,a=s.element,l.enableScrolling&&l.isCMenu&&a&&a.parentElement&&(a.style.height=a.parentElement.style.height);break;case"hamburger":s.cancel||(l.element.classList.remove("e-hide-menu"),l.triggerOpen(l.element))}if("hamburger"!==d)if(s.cancel)l.isMenu?(l.popupObj.destroy(),at(l.popupWrapper)):e.className.indexOf("e-ul")>-1&&at(e),l.navIdx.pop();else if(l.isMenu)if(l.hamburgerMode)l.popupWrapper.style.top=l.top+"px",l.popupWrapper.style.left="0px",l.toggleAnimation(l.popupWrapper);else{l.setBlankIconStyle(l.popupWrapper),l.wireKeyboardEvent(l.popupWrapper),Xt(l.popupWrapper,{selector:"."+DI}),l.popupWrapper.style.left=l.left+"px",l.popupWrapper.style.top=l.top+"px";var r="None"!==l.animationSettings.effect?{name:l.animationSettings.effect,duration:l.animationSettings.duration,timingFunction:l.animationSettings.easing}:null;l.popupObj.show(r,l.lItem),G.isDevice&&(l.popupWrapper.style.left=l.left+"px")}else l.setBlankIconStyle(l.uList),l.setPosition(l.lItem,l.uList,l.top,l.left),l.toggleAnimation(l.uList);if("right"===l.keyType){var o=l.getUlByNavIdx();if(t.classList.remove(gI),l.isMenu&&1===l.navIdx.length&&l.removeLIStateByClass([fI],[l.getWrapper()]),t.classList.add(fI),l.action===pI){var h={element:t,item:i,event:n};l.trigger("select",h)}t.focus(),o=l.getUlByNavIdx();var c=l.isValidLI(o.children[0],0,l.action);o.children[c].classList.add(gI),o.children[c].focus()}})},e.prototype.collision=function(){var t;if(t=Sr(this.popupWrapper,null,this.left,this.top),(this.isNestedOrVertical||this.enableRtl)&&(t.indexOf("right")>-1||t.indexOf("left")>-1)){this.popupObj.collision.X="none";var e=ut(this.lItem,".e-"+this.getModuleName()+"-wrapper").offsetWidth;this.left=this.enableRtl?dr(this.lItem,this.isNestedOrVertical?"right":"left","top").left:this.left-this.popupWrapper.offsetWidth-e+2}((t=Sr(this.popupWrapper,null,this.left,this.top)).indexOf("left")>-1||t.indexOf("right")>-1)&&(this.left=this.callFit(this.popupWrapper,!0,!1,this.top,this.left).left),this.popupWrapper.style.left=this.left+"px"},e.prototype.setBlankIconStyle=function(t){var e=[].slice.call(t.getElementsByClassName("e-blankicon"));if(e.length){var i=t.querySelector(".e-menu-item:not(.e-blankicon):not(.e-separator)");if(i){var n=i.querySelector(".e-menu-icon");if(n){var s=this.enableRtl?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"},r=getComputedStyle(n),o=parseInt(r.fontSize,10);parseInt(r.width,10)&&parseInt(r.width,10)>o&&(o=parseInt(r.width,10));var a=o+parseInt(r[s.margin],10)+parseInt(getComputedStyle(i)[s.padding],10)+"px";e.forEach(function(t){t.style[s.padding]=a})}}}},e.prototype.checkScrollOffset=function(t){var e=this.getWrapper();if(e.children[0].classList.contains("e-menu-hscroll")&&1===this.navIdx.length){var i=y(t)?this.element:ut(t.target,"."+DI),n=ct(".e-hscroll-bar",e);n.scrollLeft>i.offsetLeft&&(n.scrollLeft-=n.scrollLeft-i.offsetLeft);var s=n.scrollLeft+n.offsetWidth,r=i.offsetLeft+i.offsetWidth;s<r&&(n.scrollLeft+=r-s)}},e.prototype.setPosition=function(t,e,i,n,s){void 0===s&&(s=!1);var r="px";if(this.toggleVisiblity(e),e===this.element||n>-1&&i>-1){if((h=Sr(e,null,n,i)).indexOf("right")>-1&&(n-=e.offsetWidth),h.indexOf("bottom")>-1)if((i=(l=this.callFit(e,!1,!0,i,n)).top-20)<0){var o=pageYOffset+document.documentElement.clientHeight-e.getBoundingClientRect().height;o>-1&&(i=o)}if((h=Sr(e,null,n,i)).indexOf("left")>-1)n=(l=this.callFit(e,!0,!1,i,n)).left}else if(G.isDevice)if(!this.isMenu&&this.enableScrolling){var a=document.querySelector(".e-menu-vscroll");i=Number(a.style.top.replace("px","")),n=Number(a.style.left.replace("px",""))}else i=Number(this.element.style.top.replace(r,"")),n=Number(this.element.style.left.replace(r,""));else{var l;i=(l=dr(t,this.enableRtl?"left":"right","top")).top,n=l.left;var h,c=(h=Sr(e,null,this.enableRtl?n-e.offsetWidth:n,i)).indexOf("left")>-1||h.indexOf("right")>-1;c&&(n=(l=dr(t,this.enableRtl?"right":"left","top")).left),(this.enableRtl||c)&&(n=this.enableRtl&&c?n:n-e.offsetWidth),h.indexOf("bottom")>-1&&(this.isMenu||!this.enableScrolling)&&(i=(l=this.callFit(e,!1,!0,i,n)).top)}this.toggleVisiblity(e,!1),this.isCMenu&&this.enableScrolling&&e&&(e.style.height="",e.style.top="",e.style.left="",e.style.width="",e.style.position="");var d=ut(this.element,".e-"+this.getModuleName()+"-wrapper");if(!this.isMenu&&this.enableScrolling&&e&&d&&d.offsetHeight>0){var p=ut(e,".e-menu-vscroll");e.style.display="block",p&&QC(D(p,WC),p);var u=Math.ceil(this.getMenuWidth(e,e.offsetWidth,this.enableRtl)),g=YC(this.createElement,d,e,"vscroll",this.enableRtl,d.offsetHeight);i=this.callFit(g,!1,!0,i,n).top,Object.assign(g.style,{top:i+"px",left:n+"px",width:u+"px",position:"absolute",display:s?"block":"none"})}else e.style.top=i+r,e.style.left=n+r},e.prototype.getMenuWidth=function(t,e,i){var n=t.getElementsByClassName(wI)[0];return n&&(e+=parseInt(getComputedStyle(n)[i?"marginRight":"marginLeft"],10)),e<120?120:e},e.prototype.toggleVisiblity=function(t,e){void 0===e&&(e=!0),t.style.visibility=e?"hidden":"",t.style.display=e?"block":"none"},e.prototype.createItems=function(t){var e=this,i=this.navIdx?this.navIdx.length:0,n=this.getFields(i),s=this.hasField(t,this.getField("iconCss",i)),r={showIcon:s,moduleName:"menu",fields:n,template:this.template,itemNavigable:!0,itemCreating:function(t){t.curData[t.fields[n.id]]||(t.curData[t.fields[n.id]]=b("menuitem")),y(t.curData.htmlAttributes)&&Object.defineProperty(t.curData,"htmlAttributes",{value:{},writable:!0,enumerable:!0,configurable:!0}),G.isIE?(t.curData.htmlAttributes.role||(t.curData.htmlAttributes.role="menuitem"),t.curData.htmlAttributes.tabindex||(t.curData.htmlAttributes.tabindex="-1")):Object.assign(t.curData.htmlAttributes,{role:t.curData.htmlAttributes.role||"menuitem",tabindex:t.curData.htmlAttributes.tabindex||"-1"}),e.isMenu&&!t.curData[e.getField("separator",i)]&&(t.curData.htmlAttributes["aria-label"]||(t.curData.htmlAttributes["aria-label"]=t.curData[t.fields.text]?t.curData[t.fields.text]:t.curData[t.fields.id])),""===t.curData[t.fields[n.iconCss]]&&(t.curData[t.fields[n.iconCss]]=null)},itemCreated:function(t){if(t.curData[e.getField("separator",i)]&&(t.item.classList.add(yI),t.curData.htmlAttributes.role||t.item.setAttribute("role","separator"),t.curData.htmlAttributes.ariaLabel||t.item.setAttribute("aria-label","separator")),!s||t.curData[t.fields.iconCss]||t.curData[e.getField("separator",i)]||t.item.classList.add("e-blankicon"),t.curData[t.fields.child]&&t.curData[t.fields.child].length){var n=e.createElement("span",{className:AI+" "+wI});t.item.appendChild(n),t.item.setAttribute("aria-haspopup","true"),t.item.setAttribute("aria-expanded","false"),t.item.classList.add("e-menu-caret-icon")}e.template&&(t.item.setAttribute("id",t.curData[t.fields.id].toString()),t.item.removeAttribute("data-uid"),t.item.classList.contains("e-level-1")&&t.item.classList.remove("e-level-1"),t.item.classList.contains("e-has-child")&&t.item.classList.remove("e-has-child"),t.item.removeAttribute("aria-level"));var r={item:t.curData,element:t.item};e.trigger("beforeItemRender",r)}};this.setProperties({items:this.items},!0),this.isMenu&&(r.templateID=this.element.id+"Template");var o=ZC.createList(this.createElement,t,r,!this.template,this);return o.setAttribute("tabindex","0"),this.isMenu?o.setAttribute("role","menu"):o.setAttribute("role","menubar"),o},e.prototype.moverHandler=function(t){var e=t.target;this.liTrgt=e,this.isMenu||(this.isCmenuHover=!0);var i=this.getLI(e),n=i?ut(i,".e-"+this.getModuleName()+"-wrapper"):this.getWrapper(),s=this.getWrapper(),r=new RegExp("-ej2menu-(.*)-popup"),o=!1;if(n){if((""!==n.id?r.exec(n.id)[1]:n.querySelector("ul").id)!==this.element.id){if(this.removeLIStateByClass([gI,fI],[this.getWrapper()]),!this.navIdx.length)return;o=!0}i&&ut(i,".e-"+this.getModuleName()+"-wrapper")&&!o?(this.removeLIStateByClass([gI],this.isMenu?[n].concat(this.getPopups()):[n]),this.removeLIStateByClass([gI],this.isMenu?[s].concat(this.getPopups()):[s]),i.classList.add(gI),this.showItemOnClick||this.clickHandler(t)):this.isMenu&&this.showItemOnClick&&!o&&this.removeLIStateByClass([gI],[n].concat(this.getPopups())),this.isMenu&&(this.showItemOnClick||e.parentElement===n||ut(e,".e-"+this.getModuleName()+"-popup")||i&&(!i||this.getIndex(i.id,!0).length)||"Hover"===this.showSubMenuOn?o&&!this.showItemOnClick&&this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t)):(this.removeLIStateByClass([gI],[n]),this.navIdx.length&&(this.isClosed=!0,this.closeMenu(null,t))),this.isClosed||this.removeStateWrapper(),this.isClosed=!1),this.isMenu||(this.isCmenuHover=!1)}},e.prototype.removeStateWrapper=function(){if(this.liTrgt){var t=ut(this.liTrgt,".e-menu-vscroll");"DIV"===this.liTrgt.tagName&&t&&this.removeLIStateByClass([gI,fI],[t])}},e.prototype.removeLIStateByClass=function(t,e){for(var i,n=function(n){t.forEach(function(t){(i=ct("."+t,e[n]))&&i.classList.remove(t)})},s=0;s<e.length;s++)n(s)},e.prototype.getField=function(t,e){void 0===e&&(e=0);var i=this.fields[""+t];return"string"==typeof i?i:i[e]?i[e].toString():i[i.length-1].toString()},e.prototype.getFields=function(t){return void 0===t&&(t=0),{id:this.getField("itemId",t),iconCss:this.getField("iconCss",t),text:this.getField("text",t),url:this.getField("url",t),child:this.getField("children",t),separator:this.getField("separator",t)}},e.prototype.hasField=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][""+e])return!0;return!1},e.prototype.menuHeaderClickHandler=function(t){var e=ut(t.target,".e-menu-wrapper");e&&e.querySelector("ul.e-menu-parent").id!==this.element.id||(this.element.className.indexOf("e-hide-menu")>-1?this.openHamburgerMenu(t):this.closeHamburgerMenu(t))},e.prototype.clickHandler=function(t){this.isTapHold=!this.isTapHold&&this.isTapHold;var e=this.getWrapper(),i=t.target,n=this.cli=this.getLI(i),s=new RegExp("-ej2menu-(.*)-popup"),r=n?ut(n,".e-"+this.getModuleName()+"-wrapper"):null,o=n&&r&&(this.isMenu?this.getIndex(n.id,!0).length>0:e.firstElementChild.id===r.firstElementChild.id);if(G.isDevice&&this.isMenu&&(this.removeLIStateByClass([gI],[e].concat(this.getPopups())),this.mouseDownHandler(t)),n&&r&&this.isMenu){var a=r.id?s.exec(r.id)[1]:r.querySelector(".e-menu-parent").id;if(this.element.id!==a)return}if(o&&"click"===t.type&&!n.classList.contains(mI)){this.setLISelected(n);var l=this.getIndex(n.id,!0),h={element:n,item:this.getItem(l),event:t};this.trigger("select",h)}if(o&&("mouseover"===t.type||G.isDevice||this.showItemOnClick)){var c=void 0;if(n.classList.contains(mI)){c=e.children[this.navIdx.length-1],this.toggleAnimation(c),(u=this.getLIByClass(c,fI))&&u.classList.remove(fI);var d=this.enableScrolling&&!this.isMenu?ut(n.parentElement,".e-menu-vscroll"):null;d&&QC(D(d,WC),d),at(n.parentNode),this.navIdx.pop()}else if(!n.classList.contains(yI)){this.showSubMenu=!0;var p=n.parentNode;if(y(p))return;if(this.cliIdx=this.getIdx(p,n),this.isMenu||!G.isDevice){var u,g=this.isMenu?Array.prototype.indexOf.call([e].concat(this.getPopups()),ut(p,".e-"+this.getModuleName()+"-wrapper")):this.getIdx(e,p);if(this.navIdx[g]===this.cliIdx&&(this.showSubMenu=!1),g!==this.navIdx.length&&("mouseover"!==t.type||this.showSubMenu))(u=this.getLIByClass(p,fI))&&u.classList.remove(fI),this.isClosed=!0,this.keyType="click",this.showItemOnClick&&(this.setLISelected(n),this.isMenu||(this.isCmenuHover=!0)),this.closeMenu(g+1,t),this.showItemOnClick&&(this.setLISelected(n),this.isMenu||(this.isCmenuHover=!1))}this.isClosed||this.afterCloseMenu(t),this.isClosed=!1}}else if("DIV"===i.tagName&&ut(i,".e-menu-vscroll")&&(this.navIdx.length||!this.isMenu&&this.enableScrolling&&0===this.navIdx.length)){var m=this.isMenu?ut(i,"."+LI):ut(i,".e-menu-vscroll"),f=this.isMenu?Array.prototype.indexOf.call(this.getPopups(),m)+1:this.getIdx(e,ct("ul.e-menu-parent",m));f<this.navIdx.length&&(this.closeMenu(f+1,t),m&&this.removeLIStateByClass([gI,fI],[m]))}else this.isMenu&&this.hamburgerMode&&"SPAN"===i.tagName&&i.classList.contains("e-menu-icon")?this.menuHeaderClickHandler(t):"UL"===i.tagName&&(this.isMenu?!i.parentElement.classList.contains("e-menu-wrapper")||this.getIndex(i.querySelector("."+DI).id,!0).length:i.parentElement===e)||(n||this.removeLIStateByClass([fI],[e]),(!this.isAnimationNone&&!n||n&&!n.querySelector("."+wI))&&(navigator.platform.toUpperCase().indexOf("MAC")<0||navigator.platform.toUpperCase().indexOf("MAC")>=0&&!t.ctrlKey)&&this.closeMenu(null,t))},e.prototype.afterCloseMenu=function(t){if(!y(t)){var e;if(this.showSubMenu){e=this.showItemOnClick&&0===this.navIdx.length?ut(t.target,".e-menu-parent.e-control"):ut(this.element,".e-menu-parent.e-control");var i=this.navIdx.concat(this.cliIdx),n=this.getItem(i);if(n&&n[this.getField("children",i.length-1)]&&n[this.getField("children",i.length-1)].length?(("mouseover"===t.type||G.isDevice&&this.isMenu)&&this.setLISelected(this.cli),(!this.hamburgerMode&&e||this.hamburgerMode&&"false"===this.cli.getAttribute("aria-expanded"))&&(this.cli.setAttribute("aria-expanded","true"),this.navIdx.push(this.cliIdx),this.openMenu(this.cli,n,null,null,t))):"mouseover"!==t.type&&this.closeMenu(null,t),!e){var s=this.getUlByNavIdx(),r=this.getLIByClass(s,fI);r&&(r.setAttribute("aria-expanded","false"),r.classList.remove(fI))}}this.keyType=""}},e.prototype.setLISelected=function(t){var e=this.getLIByClass(t.parentElement,fI);e&&e.classList.remove(fI),this.isMenu||t.classList.remove(gI),t.classList.add(fI)},e.prototype.getLIByClass=function(t,e){if(t&&t.children)for(var i=0,n=t.children.length;i<n;i++)if(t.children[i].classList.contains(e))return t.children[i];return null},e.prototype.getItemIndex=function(t,e){var i;i="string"==typeof t?t:t.id;var n=!1!==e;return this.getIndex(i,n)},e.prototype.setItem=function(t,e,i){var n;n=i?e||t.id:e||t.text;var s=this.getIndex(n,i),r=this.getItem(s);Object.assign(r,t)},e.prototype.getItem=function(t){var e=(t=t.slice()).pop();return this.getItems(t)[e]},e.prototype.getItems=function(t){for(var e=this.items,i=0;i<t.length;i++)e=e[t[i]][this.getField("children",i)];return e},e.prototype.setItems=function(t,e){var i=this.getItems(e);i.splice(0,i.length);for(var n=0;n<t.length;n++)i.splice(n,0,t[n])},e.prototype.getIdx=function(t,e,i){void 0===i&&(i=!0);var n=!this.isMenu&&this.enableScrolling&&ct(".e-menu-vscroll",t)?dt(".e-menu-parent",t):Array.from(t.children),s=Array.prototype.indexOf.call(n,e);return i&&t.children[0].classList.contains(mI)&&s--,s},e.prototype.getLI=function(t){return"LI"===t.tagName&&t.classList.contains("e-menu-item")?t:ut(t,"li.e-menu-item")},e.prototype.updateItemsByNavIdx=function(){for(var t=this.items,e=0,i=0;i<this.navIdx.length&&(t=t[i].items);i++){e++;var n=this.getUlByNavIdx(e);if(!n)break;this.updateItem(n,t)}},e.prototype.removeChildElement=function(t){for(;t.firstElementChild;)t.removeChild(t.firstElementChild);return t},e.prototype.onPropertyChanged=function(t,e){for(var i=this,n=this.getWrapper(),s=function(s){switch(s){case"cssClass":e.cssClass&&et([n],e.cssClass.split(" ")),t.cssClass&&tt([n],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":r.enableRtl?n.classList.add(NI):n.classList.remove(NI);break;case"showItemOnClick":r.unWireEvents(),r.showItemOnClick=t.showItemOnClick,r.wireEvents();break;case"enableScrolling":if(t.enableScrolling){var o;r.element.classList.contains("e-vertical")?YC(r.createElement,n,r.element,"vscroll",r.enableRtl):YC(r.createElement,n,r.element,"hscroll",r.enableRtl),r.getPopups().forEach(function(t){o=ct(".e-ul",t),YC(i.createElement,t,o,"vscroll",i.enableRtl)})}else{var a=n.children[0];r.element.classList.contains("e-vertical")||!r.isMenu?QC(D(a,WC),a):QC(D(a,TC),a),n.style.overflow="",n.appendChild(r.element),r.getPopups().forEach(function(t){QC(D(a=t.children[0],WC),a),t.style.overflow=""})}break;case"items":var l=void 0,h=void 0,c=void 0;if(r.isReact&&r.template&&r.clearTemplate(["template"]),Object.keys(e.items).length){var d=Object.keys(t.items);for(p=0;p<d.length;p++)(h=r.getChangedItemIndex(t,[],Number(d[p]))).length<=r.getWrapper().children.length&&(l=h.pop(),c=r.getItems(h),r.insertAfter([c[l]],c[l].text),r.removeItem(c,h,l),r.setItems(c,h)),h.length=0}else{if(r.updateItem(r.element,r.items),r.enableScrolling&&r.element.parentElement.classList.contains("e-custom-scroll")&&(r.element.classList.contains("e-vertical")?YC(r.createElement,n,r.element,"vscroll",r.enableRtl):YC(r.createElement,n,r.element,"hscroll",r.enableRtl)),r.enableScrolling&&r.element.classList.contains("e-contextmenu")&&(r.isCMenu=!0,r.setPosition(r.lItem,r.uList,r.top,r.left,!0),r.isCMenu=!1),!r.hamburgerMode)for(var p=1,u=n.childElementCount;p<u;p++)at(n.lastElementChild);r.navIdx=[]}}},r=this,o=0,a=Object.keys(t);o<a.length;o++){s(a[o])}},e.prototype.updateItem=function(t,e){if(x()&&!this.isMenu)t=this.removeChildElement(t);else{if(this.enableScrolling){var i=this.getWrapper().children[0];this.element.classList.contains("e-vertical")?QC(D(i,WC),i):QC(D(i,TC),i)}t.innerHTML=""}[].slice.call(this.createItems(e).children).forEach(function(e){t.appendChild(e)})},e.prototype.getChangedItemIndex=function(t,e,i){e.push(i);var n=Object.keys(t.items[i]).pop();if("items"===n){var s=t.items[i],r=Object.keys(s.items).pop();r&&this.getChangedItemIndex(s,e,Number(r))}else"isParentArray"===n&&e.length>1&&e.pop();return e},e.prototype.removeItem=function(t,e,i){t.splice(i,1);var n=this.getWrapper().children;e.length<n.length&&(this.enableScrolling&&!n[e.length].classList.contains("e-menu-parent")?at(n[e.length].querySelector(".e-menu-parent").children[i]):at(n[e.length].children[i]))},e.prototype.unWireEvents=function(t){void 0===t&&(t=this.target);var e=this.getWrapper();if(t){for(var i=void 0,n=void 0,s=dt(t),r=0,o=s.length;r<o;r++)i=s[r],this.isMenu?K.remove(i,"click",this.menuHeaderClickHandler):G.isIos?(n=D(i,ci))&&n.destroy():K.remove(i,"contextmenu",this.cmenuHandler);if(!this.isMenu){K.remove(this.targetElement,"scroll",this.scrollHandler);for(var a=0,l=$r(this.targetElement);a<l.length;a++){var h=l[a];K.remove(h,"scroll",this.scrollHandler)}}}G.isDevice||(K.remove(this.isMenu?document:e,"mouseover",this.delegateMoverHandler),K.remove(document,"mousedown",this.delegateMouseDownHandler),K.remove(document,"keydown",this.domKeyHandler),this.isMenu||this.target||K.remove(document,"scroll",this.scrollHandler)),K.remove(document,"click",this.delegateClickHandler),this.unWireKeyboardEvent(e),this.rippleFn(),!this.isMenu&&this.enableScrolling&&(e.removeEventListener("touchstart",this.touchStartFn),e.removeEventListener("touchmove",this.touchMoveFn),document.removeEventListener("touchstart",this.touchOutsideHandler))},e.prototype.unWireKeyboardEvent=function(t){var e=D(t,si);e&&e.destroy()},e.prototype.toggleAnimation=function(t,e){var i,n,s=this;void 0===e&&(e=!0);var r=this.enableScrolling&&!this.isMenu&&ut(t,".e-menu-vscroll")?ut(t,".e-menu-vscroll"):t;qt.stop(r),"None"!==this.animationSettings.effect&&e?(r.style.maxHeight="",this.animation.animate(r,{name:this.animationSettings.effect,duration:this.animationSettings.duration,timingFunction:this.animationSettings.easing,begin:function(t){s.hamburgerMode?(n=t.element.parentElement,t.element.style.position="absolute",n&&(i=n.offsetHeight),t.element.style.maxHeight=t.element.offsetHeight+"px",n&&(n.style.maxHeight="")):(t.element.style.display="block",t.element.style.maxHeight=t.element.getBoundingClientRect().height+"px")},progress:function(t){s.hamburgerMode&&n&&(n.style.minHeight=i+t.element.offsetHeight+"px")},end:function(t){s.hamburgerMode?(t.element.style.position="",t.element.style.maxHeight="",n&&(n.style.minHeight=""),t.element.style.top="0px",t.element.children[0].focus(),s.triggerOpen(t.element.children[0])):s.end(t.element,e),s.isKBDAction=!1}})):(this.hamburgerMode&&t&&(t.style.top="0px"),this.isAnimationNone="None"===this.animationSettings.effect,this.end(t,e))},e.prototype.triggerOpen=function(t){var e=this.navIdx.length?this.getItem(this.navIdx):null,i={element:t,parentItem:e,items:e?e.items:this.items};this.trigger("onOpen",i),this.isMenu||K.add(t,"keydown",this.keyHandler,this)},e.prototype.end=function(t,e){var i;if(e&&this.isContextMenuClosed)if((this.isMenu||!G.isDevice||!this.isMenu&&this.isAnimationNone&&G.isDevice)&&(t.style.display="block"),t.style.maxHeight="",(i=this.enableScrolling&&!this.isMenu?ut(t,".e-menu-vscroll"):null)&&(i.style.display="block"),this.triggerOpen(t),t.querySelector("."+gI)&&this.isKBDAction)t.querySelector("."+gI).focus();else{var n=this.getWrapper().children[this.getIdx(this.getWrapper(),t)-1];this.currentTarget&&(this.currentTarget.classList.contains("e-numerictextbox")||this.currentTarget.classList.contains("e-textbox")||"INPUT"===this.currentTarget.tagName)||(n&&this.isKBDAction?n.querySelector("."+fI).focus():this.element.focus())}else if((i=this.enableScrolling&&!this.isMenu?ut(t,".e-menu-vscroll"):null)&&QC(D(i,WC),i),t===this.element){var s=this.getLIByClass(this.element,gI);s&&s.classList.remove(gI);var r=this.getLIByClass(this.element,fI);r&&r.classList.remove(fI),t.style.display="none",this.isAnimationNone=!1}else at(t)},e.prototype.getPersistData=function(){return""},e.prototype.getWrapper=function(){return ut(this.element,".e-"+this.getModuleName()+"-wrapper")},e.prototype.getIndex=function(t,e,i,n,s,r){var o;void 0===i&&(i=this.items),void 0===n&&(n=[]),void 0===s&&(s=!1),void 0===r&&(r=0),r=s?r+1:0;for(var a=0,l=i.length;a<l;a++){o=i[a];var h=e?o[this.getField("itemId",r)]:o[this.getField("text",r)];if((o.htmlAttributes&&"id"in o.htmlAttributes?o.htmlAttributes.id:h)===t){n.push(a);break}if(o[this.getField("children",r)]&&o[this.getField("children",r)].length){if(-1!==(n=this.getIndex(t,e,o[this.getField("children",r)],n,!0,r))[n.length-1]){n.unshift(a);break}a!==l-1&&n.pop()}else a===l-1&&n.push(-1)}return s||-1!==n[0]?n:[]},e.prototype.enableItems=function(t,e,i){var n,s,r;void 0===e&&(e=!0);for(var o,a=EI,l=0;l<t.length;l++){if(r=this.getIndex(t[l],i),this.navIdx.length){if(1!==r.length){o=!1;for(var h=0,c=r.length-1;h<c;h++)if(r[h]!==this.navIdx[h]){o=!0;break}if(o)continue}}else if(1!==r.length)continue;if(s=r.pop(),(n=this.getUlByNavIdx(r.length))&&!y(s))if(e)if(this.isMenu)n.children[s].classList.remove(a),n.children[s].removeAttribute("aria-disabled");else if(G.isDevice&&!n.classList.contains("e-contextmenu"))n.children[s+1].classList.remove(a);else if(this.enableScrolling&&!n.classList.contains("e-menu-parent")){n.querySelector(".e-menu-parent").children[s].classList.remove(a)}else n.children[s].classList.remove(a);else if(this.isMenu)n.children[s].classList.add(a),n.children[s].setAttribute("aria-disabled","true");else if(G.isDevice&&!n.classList.contains("e-contextmenu"))n.children[s+1].classList.add(a);else if(this.enableScrolling&&!n.classList.contains("e-menu-parent"))n.querySelector(".e-menu-parent").children[s].classList.add(a);else n.children[s].classList.add(a)}},e.prototype.showItems=function(t,e){this.showHideItems(t,!1,e)},e.prototype.hideItems=function(t,e){this.showHideItems(t,!0,e)},e.prototype.showHideItems=function(t,e,i){for(var n,s,r,o,a=0;a<t.length;a++)if(s=(r=this.getIndex(t[a],i)).pop(),n=this.getUlByNavIdx(r.length),o=this.getItems(r),n){this.enableScrolling&&!n.classList.contains("e-menu-parent")&&(n=n.querySelector(".e-menu-parent"));var l=i?n.children[s].id:o[s].text.toString();e&&l===t[a]?n.children[s].classList.add(TI):e||l!==t[a]||n.children[s].classList.remove(TI)}},e.prototype.removeItems=function(t,e){for(var i,n,s,r=0;r<t.length;r++)i=(n=this.getIndex(t[r],e)).pop(),s=this.getItems(n),y(i)||this.removeItem(s,n,i)},e.prototype.insertAfter=function(t,e,i){this.insertItems(t,e,i)},e.prototype.insertBefore=function(t,e,i){this.insertItems(t,e,i,!1)},e.prototype.insertItems=function(t,e,i,n){var s,r,o,a,l,h;void 0===n&&(n=!0);for(var c=0;c<t.length;c++){r=(o=this.getIndex(e,i)).pop(),a=this.getItems(o),(l=new kI(a[0],"items",t[c],!0)).parentObj=a[0].parentObj,a.splice(n?r+1:r,0,l);var d=this.isMenu?[this.getWrapper()].concat(this.getPopups()):[].slice.call(this.getWrapper().children);if(!y(r)&&o.length<d.length){r=n?r+1:r,s=this.createItems(a).children[r];var p=h=this.isMenu?ct(".e-menu-parent",d[o.length]):d[o.length];if(this.enableScrolling&&!p.classList.contains("e-menu-parent")&&(p=p.querySelector(".e-menu-parent")),p.insertBefore(s,p.children[r]),c===t.length-1&&!this.isMenu&&"block"===p.style.display)if(this.enableScrolling){this.setPosition(null,p,parseFloat(h.style.top),parseFloat(h.style.left));var u=ut(p,".e-vscroll");u&&(u.style.display="block")}else this.setPosition(null,p,parseFloat(p.style.top),parseFloat(p.style.left)),p.style.display="block"}}},e.prototype.removeAttributes=function(){var t=this;["top","left","display","z-index"].forEach(function(e){t.element.style.removeProperty(e)}),["role","tabindex","class","style"].forEach(function(e){"class"===e&&t.element.classList.contains("e-menu-parent")&&t.element.classList.remove("e-menu-parent"),-1!==["class","style"].indexOf(e)&&t.element.getAttribute(e)||t.element.removeAttribute(e),t.isMenu&&"class"===e&&t.element.classList.contains("e-vertical")&&t.element.classList.remove("e-vertical")})},e.prototype.destroy=function(){var e=this.getWrapper();if(e){if(this.unWireEvents(),this.isMenu)this.closeMenu(),x()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",this.removeAttributes(),e.parentNode.insertBefore(this.element,e),this.clonedElement=null;else{if(this.clonedElement.style.display="","EJS-CONTEXTMENU"===this.clonedElement.tagName)tt([this.clonedElement],["e-control","e-lib","e-"+this.getModuleName()]),this.element=this.clonedElement;else if(this.refreshing&&this.clonedElement.childElementCount&&"LI"===this.clonedElement.children[0].tagName&&this.setProperties({items:[]},!0),document.getElementById(this.clonedElement.id)){var i=this.clonedElement.nextElementSibling;i&&i!==e?this.clonedElement.parentElement.insertBefore(this.element,i):this.clonedElement.parentElement.appendChild(this.element),x()&&!this.isMenu?this.element=this.removeChildElement(this.element):this.element.innerHTML="",rt([].slice.call(this.clonedElement.children),this.element),at(this.clonedElement),this.removeAttributes()}this.clonedElement=null}at(e),t.prototype.destroy.call(this),this.template&&this.clearTemplate(["template"])}this.rippleFn=null},dI([Ut()],e.prototype,"beforeItemRender",void 0),dI([Ut()],e.prototype,"beforeOpen",void 0),dI([Ut()],e.prototype,"onOpen",void 0),dI([Ut()],e.prototype,"beforeClose",void 0),dI([Ut()],e.prototype,"onClose",void 0),dI([Ut()],e.prototype,"select",void 0),dI([Ut()],e.prototype,"created",void 0),dI([jt("")],e.prototype,"cssClass",void 0),dI([jt(0)],e.prototype,"hoverDelay",void 0),dI([jt(!1)],e.prototype,"showItemOnClick",void 0),dI([jt("")],e.prototype,"target",void 0),dI([jt("")],e.prototype,"filter",void 0),dI([jt(null)],e.prototype,"template",void 0),dI([jt(!1)],e.prototype,"enableScrolling",void 0),dI([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),dI([Bt({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},OI)],e.prototype,"fields",void 0),dI([Rt([],kI)],e.prototype,"items",void 0),dI([Bt({duration:400,easing:"ease",effect:"SlideDown"},zI)],e.prototype,"animationSettings",void 0),e=dI([Ft],e)}(_e),jI=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),BI=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},HI="e-vertical",RI="e-toolbar-items",VI="e-toolbar-item",UI="e-rtl",FI="e-separator",WI="e-popup-up-icon",YI="e-popup-down-icon",_I="e-popup-open",QI="e-template",ZI="e-overlay",qI="e-toolbar-text",XI="e-popup-text",GI="e-overflow-show",KI="e-overflow-hide",JI="e-hor-nav",$I="e-scroll-nav",tM="e-toolbar-center",eM="e-tbar-pos",iM="e-hscroll-bar",nM="e-toolbar-pop",sM="e-toolbar-popup",rM="e-nav-active",oM="e-ignore",aM="e-popup-alone",lM="e-hidden",hM="e-toolbar-multirow",cM="e-multirow-pos",dM="e-multirow-separator",pM="e-extended-separator",uM="e-extended-toolbar",gM="e-toolbar-extended",mM="e-tbar-extended",fM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jI(e,t),BI([jt("")],e.prototype,"id",void 0),BI([jt("")],e.prototype,"text",void 0),BI([jt("auto")],e.prototype,"width",void 0),BI([jt("")],e.prototype,"cssClass",void 0),BI([jt(!1)],e.prototype,"showAlwaysInPopup",void 0),BI([jt(!1)],e.prototype,"disabled",void 0),BI([jt("")],e.prototype,"prefixIcon",void 0),BI([jt("")],e.prototype,"suffixIcon",void 0),BI([jt(!0)],e.prototype,"visible",void 0),BI([jt("None")],e.prototype,"overflow",void 0),BI([jt("")],e.prototype,"template",void 0),BI([jt("Button")],e.prototype,"type",void 0),BI([jt("Both")],e.prototype,"showTextOn",void 0),BI([jt(null)],e.prototype,"htmlAttributes",void 0),BI([jt("")],e.prototype,"tooltipText",void 0),BI([jt("Left")],e.prototype,"align",void 0),BI([Ut()],e.prototype,"click",void 0),BI([jt(-1)],e.prototype,"tabIndex",void 0),e}(re),yM=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.resizeContext=n.resize.bind(n),n.orientationChangeContext=n.orientationChange.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return jI(e,t),e.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(t){y(t)||y(t.ej2_instances)||y(t.ej2_instances[0])||t.ej2_instances[0].isDestroyed||t.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(t){y(e.element.querySelector(t))||(document.body.appendChild(e.element.querySelector(t)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),at(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&et([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","role"].forEach(function(t){return e.element.removeAttribute(t)}),t.prototype.destroy.call(this)},e.prototype.preRender=function(){var t={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",t),this.enableCollision=t.enableCollision,this.scrollStep=t.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(HI),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,UI)},e.prototype.wireEvents=function(){K.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),window.addEventListener("orientationchange",this.orientationChangeContext),this.allowKeyboard&&this.wireKeyboardEvent()},e.prototype.wireKeyboardEvent=function(){this.keyModule=new si(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),K.add(this.element,"keydown",this.docKeyDown,this),this.updateTabIndex("0")},e.prototype.updateTabIndex=function(t){var e=this.element.querySelector("."+VI+":not(."+ZI+" ):not(."+FI+" ):not(."+lM+" )");if(!y(e)&&!y(e.firstElementChild)){var i=e.firstElementChild.getAttribute("data-tabindex");i&&"-1"===i&&"INPUT"!==e.firstElementChild.tagName&&e.firstElementChild.setAttribute("tabindex",t)}},e.prototype.unwireKeyboardEvent=function(){this.keyModule&&(K.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},e.prototype.docKeyDown=function(t){if("INPUT"!==t.target.tagName){var e=!y(this.popObj)&&nt(this.popObj.element)&&"Extended"!==this.overflowMode;9===t.keyCode&&!0===t.target.classList.contains("e-hor-nav")&&e&&this.popObj.hide({name:"FadeOut",duration:100}),(40===t.keyCode||38===t.keyCode||35===t.keyCode||36===t.keyCode)&&t.preventDefault()}},e.prototype.unwireEvents=function(){K.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),window.removeEventListener("orientationchange",this.orientationChangeContext),document.removeEventListener("scroll",this.clickEvent),document.removeEventListener("click",this.scrollEvent),this.scrollEvent=null,this.clickEvent=null},e.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},e.prototype.docEvent=function(t){var e=ut(t.target,".e-popup");this.popObj&&nt(this.popObj.element)&&!e&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},e.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,eM),this.scrollModule.destroy(),this.scrollModule=null)},e.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+VI)).forEach(function(t){at(t)}),this.tbarAlign){var t=this.element.querySelector("."+RI);[].slice.call(t.children).forEach(function(t){at(t)}),this.tbarAlign=!1,this.remove(t,eM)}this.clearProperty()},e.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,UI),this.destroyScroll()),this.remove(this.element,mM),this.remove(this.element,uM);var t=this.element.querySelector(".e-toolbar-multirow");t&&this.remove(t,hM),this.popObj&&this.popupRefresh(this.popObj.element,!0)},e.prototype.add=function(t,e){t.classList.add(e)},e.prototype.remove=function(t,e){t.classList.remove(e)},e.prototype.elementFocus=function(t){var e=t.firstElementChild;e?(e.focus(),this.activeEleSwitch(t)):t.focus()},e.prototype.clstElement=function(t,e){return t&&this.popObj&&nt(this.popObj.element)?this.popObj.element.querySelector("."+VI):this.element===e||t?this.element.querySelector("."+VI+":not(."+ZI+" ):not(."+FI+" ):not(."+lM+" )"):ut(e,"."+VI)},e.prototype.getNextFocusableItem=function(t,e){var i,n="."+VI+":not(."+ZI+"):not(."+FI+"):not(."+lM+")",s=Array.from(this.element.querySelectorAll(n)),r=s.indexOf(t);if(r<0)return null;switch(e){case"moveRight":case"moveDown":case"tab":i=(r+1)%s.length;break;case"moveLeft":case"moveUp":i=(r-1+s.length)%s.length;break;case"home":i=0;break;case"end":i=s.length-1;break;default:i=r}return i>=0&&i<s.length?s[parseInt(i.toString(),10)]:null},e.prototype.keyHandling=function(t,e,i,n,s){var r,o,a=this.popObj,l=this.element,h={name:"FadeOut",duration:100},c="moveUp"===e.action?"previous":"next";switch(e.action){case"moveRight":if(this.isVertical)return;l===i?this.elementFocus(t):n||this.eleFocus(t,"next");break;case"moveLeft":if(this.isVertical)return;n||this.eleFocus(t,"previous");break;case"home":case"end":if(t){var d=ut(t,".e-popup"),p=this.element.querySelector("."+gM);"Extended"===this.overflowMode&&p&&p.classList.contains("e-popup-open")&&(d="end"===e.action?p:null),d?nt(this.popObj.element)&&(o=[].slice.call(d.children),r="home"===e.action?this.focusFirstVisibleEle(o):this.focusLastVisibleEle(o)):(o=this.element.querySelectorAll("."+RI+" ."+VI+":not(."+FI+")"),r="home"===e.action?this.focusFirstVisibleEle(o):this.focusLastVisibleEle(o)),r&&this.elementFocus(r)}break;case"moveUp":case"moveDown":if(this.isVertical)"moveUp"===e.action?this.eleFocus(t,"previous"):this.eleFocus(t,"next");else if(a&&ut(i,".e-popup")){var u=a.element;if("previous"===c&&u.firstElementChild===t){var g=this.focusLastVisibleEle([].slice.call(u.children));g&&this.elementFocus(g)}else if("next"===c&&u.lastElementChild===t){var m=this.focusFirstVisibleEle([].slice.call(u.children));m&&this.elementFocus(m)}else this.eleFocus(t,c)}else if("moveDown"===e.action&&a&&nt(a.element)){this.eleContains(t)?this.eleFocus(t,c):this.elementFocus(t)}break;case"tab":if(!s&&!n){var f=t.firstElementChild;l===i&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(f),f.focus()))}break;case"popupClose":a&&"Extended"!==this.overflowMode&&a.hide(h);break;case"popupOpen":if(!n)return;a&&!nt(a.element)?(a.element.style.top=l.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(h)}},e.prototype.keyActionHandler=function(t){var e=this,i=t.target;if("home"!==t.action&&"end"!==t.action&&"moveRight"!==t.action&&"moveLeft"!==t.action&&"moveUp"!==t.action&&"moveDown"!==t.action||"INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!this.element.classList.contains(ZI)){t.preventDefault();var n=i.classList.contains(JI),s=i.classList.contains($I),r=this.clstElement(n,i);if(r||s){var o=r,a=this.getNextFocusableItem(o,t.action),l={originalEvent:t,currentItem:o,nextItem:a,cancel:!1};this.trigger("keyDown",l,function(o){o.cancel||e.keyHandling(r,t,i,n,s)})}}},e.prototype.disable=function(t){var e=this.element;t?e.classList.add(ZI):e.classList.remove(ZI),this.activeEle&&this.activeEle.setAttribute("tabindex",this.activeEle.getAttribute("data-tabindex")),this.scrollModule&&this.scrollModule.disable(t),this.popObj&&(nt(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),e.querySelector("#"+e.id+"_nav").setAttribute("tabindex",t?"-1":"0"))},e.prototype.eleContains=function(t){return t.classList.contains(FI)||t.classList.contains(ZI)||t.getAttribute("disabled")||t.classList.contains(lM)||!nt(t)||!t.classList.contains(VI)},e.prototype.focusFirstVisibleEle=function(t){for(var e=0;e<t.length;){var i=t[parseInt(e.toString(),10)];if(!i.classList.contains(FI)&&!i.classList.contains(lM)&&!i.classList.contains(ZI))return i;e++}},e.prototype.focusLastVisibleEle=function(t){for(var e=t.length-1;e>=0;){var i=t[parseInt(e.toString(),10)];if(!i.classList.contains(FI)&&!i.classList.contains(lM)&&!i.classList.contains(ZI))return i;e--}},e.prototype.eleFocus=function(t,e){var i=Object(t)[e+"ElementSibling"];if(i){if(this.eleContains(i))return void this.eleFocus(i,e);this.elementFocus(i)}else if(this.tbarAlign){var n=Object(t.parentElement)[e+"ElementSibling"];if(y(n)||0!==n.children.length||(n=Object(n)[e+"ElementSibling"]),!y(n)&&n.children.length>0)if("next"===e){var s=n.querySelector("."+VI);this.eleContains(s)?this.eleFocus(s,e):(s.firstElementChild.focus(),this.activeEleSwitch(s))}else{s=n.lastElementChild;this.eleContains(s)?this.eleFocus(s,e):this.elementFocus(s)}}else if(!y(t)){var r=this.element.querySelectorAll("."+RI+" ."+VI+":not(."+FI+"):not(."+ZI+"):not(."+lM+")");"next"===e&&r?this.elementFocus(r[0]):"previous"===e&&r&&this.elementFocus(r[r.length-1])}},e.prototype.clickHandler=function(t){var e,i=this,n=t.target,s=this.element,r=!y(ut(n,"."+nM)),o=n.classList,a=ut(n,"."+JI);a||(a=n),s.children[0].classList.contains("e-hscroll")||s.children[0].classList.contains("e-vscroll")||!o.contains(JI)||(o=n.querySelector(".e-icons").classList),(o.contains(WI)||o.contains(YI))&&this.popupClickHandler(s,a,UI);var l=ut(t.target,"."+VI);if(!y(l)&&!l.classList.contains(ZI)||a.classList.contains(JI)){if(l)e=this.items[this.tbarEle.indexOf(l)];var h={originalEvent:t,item:e};(e&&!y(e.click)&&"object"==typeof e.click?!y(e.click.observers)&&e.click.observers.length>0:!y(e)&&!y(e.click))&&this.trigger("items["+this.tbarEle.indexOf(l)+"].click",h),h.cancel||this.trigger("clicked",h,function(t){!y(i.popObj)&&r&&!t.cancel&&"Popup"===i.overflowMode&&t.item&&"Input"!==t.item.type&&i.popObj.hide({name:"FadeOut",duration:100})})}},e.prototype.popupClickHandler=function(t,e,i){var n=this.popObj;nt(n.element)?(e.classList.remove(rM),n.hide({name:"FadeOut",duration:100})):(t.classList.contains(i)&&(n.enableRtl=!0,n.position={X:"left",Y:"top"}),0!==n.offsetX||t.classList.contains(i)||(n.enableRtl=!1,n.position={X:"right",Y:"top"}),"Extended"===this.overflowMode&&(n.element.style.minHeight="0px",n.width=this.getToolbarPopupWidth(this.element)),n.dataBind(),n.refreshPosition(),n.element.style.top=this.getElementOffsetY()+"px",e.classList.add(rM),n.show({name:"FadeIn",duration:100}))},e.prototype.getToolbarPopupWidth=function(t){var e=window.getComputedStyle(t);return parseFloat(e.width)+2*parseFloat(e.borderRightWidth)},e.prototype.render=function(){var t=this;this.initialize(),this.renderControl(),this.wireEvents(),this.clickEvent=this.docEvent.bind(this),this.scrollEvent=this.docEvent.bind(this),this.renderComplete(),this.isReact&&this.portals&&this.portals.length>0&&this.renderReactTemplates(function(){t.refreshOverflow()})},e.prototype.initialize=function(){var t=S(this.width),e=S(this.height);"msie"===G.info.name&&"auto"===this.height&&"MultiRow"!==this.overflowMode||gt(this.element,{height:e}),gt(this.element,{width:t});var i={role:"toolbar","aria-disabled":"false","aria-orientation":this.isVertical?"vertical":"horizontal"};ht(this.element,i),this.cssClass&&tt([this.element],this.cssClass.split(" "))},e.prototype.renderControl=function(){var t=this.element;this.trgtEle=t.children.length>0?t.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},e.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},e.prototype.itemsAlign=function(t,e){var i,n;this.tbarEle||(this.tbarEle=[]);for(var s=0;s<t.length;s++)i=this.renderSubComponent(t[parseInt(s.toString(),10)],s),-1===this.tbarEle.indexOf(i)&&this.tbarEle.push(i),this.tbarAlign||this.tbarItemAlign(t[parseInt(s.toString(),10)],e,s),(n=e.querySelector(".e-toolbar-"+t[parseInt(s.toString(),10)].align.toLowerCase()))?(t[parseInt(s.toString(),10)].showAlwaysInPopup&&"Show"!==t[parseInt(s.toString(),10)].overflow||this.tbarAlgEle[(t[parseInt(s.toString(),10)].align+"s").toLowerCase()].push(i),n.appendChild(i)):e.appendChild(i);if(this.isReact){this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates()}},e.prototype.changeOrientation=function(){var t=this.element;this.isVertical?(t.classList.remove(HI),this.isVertical=!1,"auto"!==this.height&&"100%"!==this.height||(t.style.height=this.height),t.setAttribute("aria-orientation","horizontal")):(t.classList.add(HI),this.isVertical=!0,t.setAttribute("aria-orientation","vertical"),gt(this.element,{height:S(this.height),width:S(this.width)})),this.destroyMode(),this.refreshOverflow()},e.prototype.initScroll=function(t,e){if(!this.scrollModule&&this.checkOverflow(t,e[0])){this.tbarAlign&&this.element.querySelector("."+RI+" ."+tM).removeAttribute("style"),this.isVertical?this.scrollModule=new WC({scrollStep:this.scrollStep,enableRtl:this.enableRtl},e[0]):this.scrollModule=new TC({scrollStep:this.scrollStep,enableRtl:this.enableRtl},e[0]),this.cssClass&&tt([e[0]],this.cssClass.split(" "));var i=this.scrollModule.element.querySelector("."+iM+", .e-vscroll-bar");i&&i.removeAttribute("tabindex"),this.remove(this.scrollModule.element,eM),gt(this.element,{overflow:"hidden"})}},e.prototype.itemWidthCal=function(t){var e,i=this,n=0;return[].slice.call(dt("."+VI,t)).forEach(function(t){nt(t)&&(e=window.getComputedStyle(t),n+=i.isVertical?t.offsetHeight:t.offsetWidth,n+=parseFloat(i.isVertical?e.marginTop:e.marginRight),n+=parseFloat(i.isVertical?e.marginBottom:e.marginLeft))}),n},e.prototype.getScrollCntEle=function(t){var e=this.isVertical?".e-vscroll-content":".e-hscroll-content";return t.querySelector(e)},e.prototype.checkOverflow=function(t,e){if(y(t)||y(e)||!nt(t))return!1;var i=this.isVertical?t.offsetHeight:t.offsetWidth,n=this.isVertical?e.offsetHeight:e.offsetWidth;(this.tbarAlign||this.scrollModule||i===n)&&(n=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(e):e));var s=t.querySelector("."+JI),r=t.querySelector("."+$I),o=0;return s?o=this.isVertical?s.offsetHeight:s.offsetWidth:r&&(o=this.isVertical?2*r.offsetHeight:2*r.offsetWidth),!(i>=n&&r)&&n>i-o},e.prototype.refreshOverflow=function(){this.resize()},e.prototype.toolbarAlign=function(t){this.tbarAlign&&(this.add(t,eM),this.itemPositioning())},e.prototype.renderOverflowMode=function(){var t=this.element,e=t.querySelector("."+RI),i=this.popupPriCount>0;if(t&&t.children.length>0)switch(this.offsetWid=t.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===G.info.name&&"auto"===this.height&&(t.style.height=""),this.overflowMode){case"Scrollable":y(this.scrollModule)&&this.initScroll(t,[].slice.call(t.getElementsByClassName(RI)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(t,e)||i)&&this.setOverflowAttributes(t),this.toolbarAlign(e);break;case"MultiRow":this.add(e,hM),this.checkOverflow(t,e)&&this.tbarAlign&&(this.removePositioning(),this.add(e,cM)),"hidden"===t.style.overflow&&(t.style.overflow=""),"msie"!==G.info.name&&"auto"===t.style.height||(t.style.height="auto");break;case"Extended":this.add(this.element,uM),(this.checkOverflow(t,e)||i)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(t)),this.toolbarAlign(e)}},e.prototype.setOverflowAttributes=function(t){this.createPopupEle(t,[].slice.call(dt("."+RI+" ."+VI,t)));ht(this.element.querySelector("."+JI),{tabindex:"0",role:"button","aria-haspopup":"true","aria-label":"overflow"})},e.prototype.separator=function(){var t=this.element,e=[].slice.call(t.querySelectorAll("."+FI)),i=t.querySelector("."+dM),n=t.querySelector("."+pM),s="MultiRow"===this.overflowMode?i:n;null!==s&&("MultiRow"===this.overflowMode?s.classList.remove(dM):"Extended"===this.overflowMode&&s.classList.remove(pM));for(var r=0;r<=e.length-1;r++)e[parseInt(r.toString(),10)].offsetLeft<30&&0!==e[parseInt(r.toString(),10)].offsetLeft&&("MultiRow"===this.overflowMode?e[parseInt(r.toString(),10)].classList.add(dM):"Extended"===this.overflowMode&&e[parseInt(r.toString(),10)].classList.add(pM))},e.prototype.createPopupEle=function(t,e){var i=t.querySelector("."+JI),n=this.isVertical;i||this.createPopupIcon(t),i=t.querySelector("."+JI);var s=n?i.offsetHeight:i.offsetWidth,r=(n?t.offsetHeight:t.offsetWidth)-s;this.element.classList.remove("e-rtl"),gt(this.element,{direction:"initial"}),this.checkPriority(t,e,r,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},e.prototype.pushingPoppedEle=function(t,e,i,n,s){var r=t.element,o=[].slice.call(dt("."+sM,r.querySelector("."+RI))),a=dt("."+GI,i),l=0,h=0;o.forEach(function(r,o){a=dt("."+GI,i),r.classList.contains(GI)&&a.length>0?t.tbResize&&a.length>o?(i.insertBefore(r,a[parseInt(o.toString(),10)]),++h):(i.insertBefore(r,i.children[a.length]),++h):r.classList.contains(GI)||t.tbResize&&r.classList.contains(KI)&&i.children.length>0&&0===a.length?(i.insertBefore(r,i.firstChild),++h):r.classList.contains(KI)?e.push(r):t.tbResize?(i.insertBefore(r,i.childNodes[l+h]),++l):i.appendChild(r),r.classList.contains(FI)?gt(r,{display:"",height:s+"px"}):gt(r,{display:"",height:n+"px"})}),e.forEach(function(t){i.appendChild(t)});for(var c=dt("."+VI,r.querySelector("."+RI)),d=c.length-1;d>=0;d--){var p=c[parseInt(d.toString(),10)];if(!p.classList.contains(FI)||"Extended"===this.overflowMode)break;gt(p,{display:"none"})}},e.prototype.createPopup=function(){var t,e,i=this.element;"Extended"===this.overflowMode&&(e=i.querySelector("."+FI),t="auto"===i.style.height||""===i.style.height?null:e&&e.offsetHeight);var n,s=i.querySelector("."+VI+":not(."+FI+"):not(."+sM+")"),r="auto"===i.style.height||""===i.style.height?null:s&&s.offsetHeight;if(ct("#"+i.id+"_popup."+nM,i))n=ct("#"+i.id+"_popup."+nM,i);else{var o=this.createElement("div",{id:i.id+"_popup",className:nM+" "+gM}),a=this.createElement("div",{id:i.id+"_popup",className:nM});n="Extended"===this.overflowMode?o:a}this.pushingPoppedEle(this,[],n,r,t),this.popupInit(i,n)},e.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},e.prototype.popupInit=function(t,e){if(this.popObj){if("Extended"!==this.overflowMode){var i=this.popObj.element;gt(i,{maxHeight:"",display:"block"}),gt(i,{maxHeight:i.offsetHeight+"px",display:""})}}else{t.appendChild(e),this.cssClass&&tt([e],this.cssClass.split(" ")),gt(this.element,{overflow:""});var n=new Jr(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if("Extended"===this.overflowMode&&(n.width=this.getToolbarPopupWidth(this.element),n.offsetX=0),n.appendTo(e),document.addEventListener("scroll",this.clickEvent),document.addEventListener("click",this.scrollEvent),"Extended"!==this.overflowMode&&(n.element.style.maxHeight=n.element.offsetHeight+"px"),this.isVertical&&(n.element.style.visibility="hidden"),this.isExtendedOpen){var s=this.element.querySelector("."+JI);s.classList.add(rM),mt(s.firstElementChild,[WI],[YI]),this.element.querySelector("."+gM).classList.add(_I)}else n.hide();this.popObj=n}},e.prototype.tbarPopupHandler=function(t){"Extended"===this.overflowMode&&(t?this.add(this.element,mM):this.remove(this.element,mM))},e.prototype.popupOpen=function(t){var e=this.popObj;this.isVertical||(e.offsetY=this.getElementOffsetY(),e.dataBind());var i=this.popObj.element,n=this.popObj.element.parentElement,s=n.querySelector("."+JI);s.setAttribute("aria-expanded","true"),"Extended"===this.overflowMode?e.element.style.minHeight="":(gt(e.element,{height:"auto",maxHeight:""}),e.element.style.maxHeight=e.element.offsetHeight+"px");var r=i.offsetTop+i.offsetHeight+dr(n).top,o=s.firstElementChild;s.classList.add(rM),mt(o,[WI],[YI]),this.tbarPopupHandler(!0);var a=y(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+a<r&&this.element.offsetTop<i.offsetHeight){var l=i.offsetHeight-(r-window.innerHeight-a+5);e.height=l+"px";for(var h=0;h<=i.childElementCount;h++){var c=i.children[parseInt(h.toString(),10)];if(c.offsetTop+c.offsetHeight>l){l=c.offsetTop;break}}"Extended"!==this.overflowMode&&gt(e.element,{maxHeight:l+"px"})}else if(this.isVertical&&"Extended"!==this.overflowMode){var d=this.element.getBoundingClientRect();gt(e.element,{maxHeight:d.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(e){var p=i.getBoundingClientRect();p.right>document.documentElement.clientWidth&&p.width>n.getBoundingClientRect().width&&(e.collision={Y:"none"},e.dataBind()),e.refreshPosition()}},e.prototype.popupClose=function(t){var e=this.element.querySelector("."+JI);e.setAttribute("aria-expanded","false");var i=e.firstElementChild;e.classList.remove(rM),mt(i,[YI],[WI]),this.tbarPopupHandler(!1)},e.prototype.checkPriority=function(t,e,i,n){for(var s,r=this.popupPriCount>0,o=i,a=0,l=0,h=0,c=function(t,e){var i=!1;return e.forEach(function(e){t.classList.contains(e)&&(i=!0)}),i},d=e.length-1;d>=0;d--){var p=void 0,u=window.getComputedStyle(e[parseInt(d.toString(),10)]);this.isVertical?(p=parseFloat(u.marginTop),p+=parseFloat(u.marginBottom)):(p=parseFloat(u.marginRight),p+=parseFloat(u.marginLeft));var g=e[parseInt(d.toString(),10)]===this.tbarEle[0];g&&(this.tbarEleMrgn=p),s=this.isVertical?e[parseInt(d.toString(),10)].offsetHeight:e[parseInt(d.toString(),10)].offsetWidth;var m=g?s+p:s;if(c(e[parseInt(d.toString(),10)],[aM])&&r&&(e[parseInt(d.toString(),10)].classList.add(sM),this.isVertical?gt(e[parseInt(d.toString(),10)],{display:"none",minHeight:m+"px"}):gt(e[parseInt(d.toString(),10)],{display:"none",minWidth:m+"px"}),h++),this.isVertical?e[parseInt(d.toString(),10)].offsetTop+e[parseInt(d.toString(),10)].offsetHeight+p>i:e[parseInt(d.toString(),10)].offsetLeft+e[parseInt(d.toString(),10)].offsetWidth+p>i){if(e[parseInt(d.toString(),10)].classList.contains(FI)){if("Extended"===this.overflowMode)c(f=e[parseInt(d.toString(),10)],[FI,oM])&&(e[parseInt(d.toString(),10)].classList.add(sM),h++),l++;else if("Popup"===this.overflowMode){var f;if(a>0&&l===h)c(f=e[d+l+(a-1)],[FI,oM])&&gt(f,{display:"none"});a++,l=0,h=0}}else l++;e[parseInt(d.toString(),10)].classList.contains(GI)&&n||c(e[parseInt(d.toString(),10)],[FI,oM])?i-=(this.isVertical?e[parseInt(d.toString(),10)].offsetHeight:e[parseInt(d.toString(),10)].offsetWidth)+p:(e[parseInt(d.toString(),10)].classList.add(sM),this.isVertical?gt(e[parseInt(d.toString(),10)],{display:"none",minHeight:m+"px"}):gt(e[parseInt(d.toString(),10)],{display:"none",minWidth:m+"px"}),h++)}}if(n){var y=dt("."+VI+":not(."+sM+")",this.element);this.checkPriority(t,y,o,!1)}},e.prototype.createPopupIcon=function(t){var e=t.id.concat("_nav"),i="e-"+t.id.concat("_nav e-hor-nav");i="Extended"===this.overflowMode?i+" e-expended-nav":i;var n=this.createElement("div",{id:e,className:i});"msie"!==G.info.name&&"edge"!==G.info.name||n.classList.add("e-ie-align");var s=this.createElement("div",{className:YI+" e-icons"});n.appendChild(s),n.setAttribute("tabindex","0"),n.setAttribute("role","button"),t.appendChild(n)},e.prototype.tbarPriRef=function(t,e,i,n,s,r,o,a,l){var h=a,c=this.popObj.element,d="."+VI+":not(."+FI+"):not(."+GI+")",p=dt("."+sM+":not(."+GI+")",c).length,u=function(t,e){return t.classList.contains(e)};if(0===dt(d,t).length){var g=t.children[e-(e-i)-1],m=!y(g)&&u(g,oM);if(!y(g)&&u(g,FI)&&!nt(g)||m){g.style.display="unset";var f=g.offsetWidth+2*parseFloat(window.getComputedStyle(g).marginRight),v=g.previousElementSibling;r+f<o||s?(t.insertBefore(n,t.children[e+h-(e-i)]),y(v)||(v.style.display="")):(gt(n,l),v.classList.contains(FI)&&(v.style.display="none")),g.style.display=""}else t.insertBefore(n,t.children[e+h-(e-i)])}else t.insertBefore(n,t.children[e+h-p])},e.prototype.popupRefresh=function(t,e){var i=this,n=this.element,s=this.isVertical,r=n.querySelector("."+RI),o=n.querySelector("."+JI);if(!y(o)){var a;r.removeAttribute("style"),t.style.display="block",a=s?n.offsetHeight-(o.offsetHeight+r.offsetHeight):n.offsetWidth-(o.offsetWidth+r.offsetWidth);var l=0;[].slice.call(t.children).forEach(function(t){l+=i.popupEleWidth(t),gt(t,{position:""})}),a+(s?o.offsetHeight:o.offsetWidth)>l&&0===this.popupPriCount&&(e=!0),this.popupEleRefresh(a,t,e),t.style.display="",0===t.children.length&&o&&this.popObj&&(at(o),o=null,this.popObj.destroy(),at(this.popObj.element),this.popObj=null)}},e.prototype.ignoreEleFetch=function(t,e){var i=[].slice.call(e.querySelectorAll("."+oM)),n=[],s=0;return i.length>0?(i.forEach(function(t){n.push([].slice.call(e.children).indexOf(t))}),n.forEach(function(e){e<=t&&s++}),s):0},e.prototype.checkPopupRefresh=function(t,e){e.style.display="block";var i=this.popupEleWidth(e.firstElementChild);e.firstElementChild.style.removeProperty("Position");var n=t.offsetWidth-t.querySelector("."+JI).offsetWidth,s=t.querySelector("."+RI).offsetWidth;return e.style.removeProperty("display"),n>i+s},e.prototype.popupEleWidth=function(t){t.style.position="absolute";var e=window.getComputedStyle(t),i=this.isVertical?t.offsetHeight:t.offsetWidth+parseFloat(e.marginLeft)+parseFloat(e.marginRight),n=t.querySelector(".e-tbar-btn-text");if(t.classList.contains("e-tbtn-align")||t.classList.contains(XI)){var s=t.children[0];!y(n)&&t.classList.contains(XI)?n.style.display="none":!y(n)&&t.classList.contains(qI)&&(n.style.display="block"),s.style.minWidth="0%",i=parseFloat(this.isVertical?t.style.minHeight:t.style.minWidth),s.style.minWidth="",s.style.minHeight="",y(n)||(n.style.display="")}return i},e.prototype.popupEleRefresh=function(t,e,i){for(var n,s,r=this.popupPriCount>0,o=this.tbarEle,a=this.element.querySelector("."+RI),l=0,h=function(e){if(e.classList.contains(aM)&&r&&!i)return"continue";var h=c.popupEleWidth(e);if(e===c.tbarEle[0]&&(h+=c.tbarEleMrgn),e.style.position="",!(h<t||i))return"break";var d={minWidth:e.style.minWidth,height:e.style.height,minHeight:e.style.minHeight};if(gt(e,{minWidth:"",height:"",minHeight:""}),e.classList.contains(KI)||e.classList.remove(sM),s=c.tbarEle.indexOf(e),c.tbarAlign){var p=c.items[parseInt(s.toString(),10)].align;s=c.tbarAlgEle[(p+"s").toLowerCase()].indexOf(e),o=c.tbarAlgEle[(p+"s").toLowerCase()],a=c.element.querySelector("."+RI+" .e-toolbar-"+p.toLowerCase())}var u=0;"Extended"!==c.overflowMode&&o.slice(0,s).forEach(function(e){(e.classList.contains(GI)||e.classList.contains(FI))&&(e.classList.contains(FI)&&(e.style.display="",t-=e.offsetWidth),u++)}),l=c.ignoreEleFetch(s,a),e.classList.contains(GI)?(c.tbarPriRef(a,s,u,e,i,h,t,l,d),t-=e.offsetWidth):0===s?(a.insertBefore(e,a.firstChild),t-=e.offsetWidth):(n=dt("."+GI,c.popObj.element).length,a.insertBefore(e,a.children[s+l-n]),t-=e.offsetWidth),e.style.height=""},c=this,d=0,p=[].slice.call(e.children);d<p.length;d++){if("break"===h(p[d]))break}this.checkOverflow(this.element,this.element.getElementsByClassName(RI)[0])&&!i&&this.renderOverflowMode()},e.prototype.removePositioning=function(){var t=this.element.querySelector("."+RI);if(!y(t)&&t.classList.contains(eM)){this.remove(t,eM);var e=[].slice.call(t.childNodes);e[1].removeAttribute("style"),e[2].removeAttribute("style")}},e.prototype.refreshPositioning=function(){var t=this.element.querySelector("."+RI);this.add(t,eM),this.itemPositioning()},e.prototype.itemPositioning=function(){var t,e=this.element.querySelector("."+RI);if(!y(e)&&e.classList.contains(eM)){var i,n=this.element.querySelector("."+JI);if(this.scrollModule){var s=this.isVertical?"e-vscroll-content":"e-hscroll-content";i=[].slice.call(e.querySelector("."+s).children)}else i=[].slice.call(e.childNodes);t=this.isVertical?i[0].offsetHeight+i[2].offsetHeight:i[0].offsetWidth+i[2].offsetWidth;var r=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){r-=this.isVertical?n.offsetHeight:n.offsetWidth;var o=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";i[2].removeAttribute("style"),this.isVertical?this.enableRtl?i[2].style.top=o:i[2].style.bottom=o:this.enableRtl?i[2].style.left=o:i[2].style.right=o}if(!(r<=t)){var a=(r-t-(this.isVertical?i[1].offsetHeight:i[1].offsetWidth))/2;i[1].removeAttribute("style");var l=(this.isVertical?i[0].offsetHeight:i[0].offsetWidth)+a+"px";this.isVertical?this.enableRtl?i[1].style.marginBottom=l:i[1].style.marginTop=l:this.enableRtl?i[1].style.marginRight=l:i[1].style.marginLeft=l}}},e.prototype.tbarItemAlign=function(t,e,i){var n=this;if(!t.showAlwaysInPopup||"Show"===t.overflow){var s=[];if(s.push(this.createElement("div",{className:"e-toolbar-left",attrs:{role:"group"}})),s.push(this.createElement("div",{className:tM,attrs:{role:"group"}})),s.push(this.createElement("div",{className:"e-toolbar-right",attrs:{role:"group"}})),0===i&&"Left"!==t.align)s.forEach(function(t){e.appendChild(t)}),this.tbarAlign=!0,this.add(e,eM);else if("Left"!==t.align){var r=e.childNodes,o=s[0];[].slice.call(r).forEach(function(t){n.tbarAlgEle.lefts.push(t),o.appendChild(t)}),e.appendChild(o),e.appendChild(s[1]),e.appendChild(s[2]),this.tbarAlign=!0,this.add(e,eM)}}},e.prototype.ctrlTemplate=function(){var t=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,RI),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(e){"DIV"===e.tagName&&(t.tbarEle.push(e),y(e.firstElementChild)||e.firstElementChild.setAttribute("aria-disabled","false"),t.add(e,VI))})},e.prototype.renderItems=function(){var t=this.element,e=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(t&&e.length>0){var i=void 0;t&&t.children.length>0&&(i=t.querySelector("."+RI)),i||(i=this.createElement("div",{className:RI})),this.itemsAlign(e,i),t.appendChild(i)}},e.prototype.setAttr=function(t,e){for(var i,n=Object.keys(t),s=0;s<n.length;s++)"class"===(i=n[parseInt(s.toString(),10)])?this.add(e,t[""+i]):e.setAttribute(i,t[""+i])},e.prototype.enableItems=function(t,e){var i,n=this,s=t,r=s.length;y(e)&&(e=!0);var o=function(t,e){t?(e.classList.remove(ZI),y(e.firstElementChild)||(e.firstElementChild.setAttribute("aria-disabled","false"),n.updateTabIndex("0"))):(e.classList.add(ZI),y(e.firstElementChild)||(e.firstElementChild.setAttribute("aria-disabled","true"),e.firstElementChild.setAttribute("tabindex","-1"),n.updateTabIndex("0")))};if(!y(r)&&r>=1){for(var a=0,l=[].slice.call(s);a<r;a++){var h=l[parseInt(a.toString(),10)];if("number"==typeof h){if(y(i=this.getElementByIndex(h)))return;s[parseInt(a.toString(),10)]=i}else i=h;o(e,i)}e?et(s,ZI):tt(s,ZI)}else{if("number"==typeof s){if(y(i=this.getElementByIndex(s)))return}else i=t;o(e,i)}},e.prototype.getElementByIndex=function(t){return this.tbarEle[parseInt(t.toString(),10)]?this.tbarEle[parseInt(t.toString(),10)]:null},e.prototype.addItems=function(t,e){var i;this.extendedOpen();var n=this.element.querySelector("."+RI);if(y(n))this.itemsRerender(t);else{var s,r="Left";y(e)&&(e=0),t.forEach(function(t){y(t.align)||"Left"===t.align||"Left"!==r||(r=t.align)});for(var o=0,a=t;o<a.length;o++){var l=a[o];if(y(l.type)&&(l.type="Button"),i=dt("."+VI,this.element),l.align=r,s=this.renderSubComponent(l,e),this.tbarEle.length>=e&&i.length>=0){y(this.scrollModule)&&this.destroyMode();var h="L"===l.align[0]?0:"C"===l.align[0]?1:2,c=void 0;this.tbarAlign||"Left"===r?this.tbarAlign?((c=ut(i[0],"."+RI).children[parseInt(h.toString(),10)]).insertBefore(s,c.children[parseInt(e.toString(),10)]),this.tbarAlgEle[(l.align+"s").toLowerCase()].splice(e,0,s),this.refreshPositioning()):0===i.length?(i=dt("."+RI,this.element))[0].appendChild(s):i[0].parentNode.insertBefore(s,i[parseInt(e.toString(),10)]):(this.tbarItemAlign(l,n,1),this.tbarAlign=!0,(c=ut(i[0],"."+RI).children[parseInt(h.toString(),10)]).appendChild(s),this.tbarAlgEle[(l.align+"s").toLowerCase()].push(s),this.refreshPositioning()),this.items.splice(e,0,l),l.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(e,0,s),e++,this.offsetWid=n.offsetWidth}}n.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},e.prototype.removeItems=function(t){var e,i=t,n=[].slice.call(dt("."+VI,this.element));if("number"==typeof i)e=parseInt(t.toString(),10),this.removeItemByIndex(e,n);else if(i&&i.length>1)for(var s=0,r=[].slice.call(i);s<r.length;s++){var o=r[s];e=this.tbarEle.indexOf(o),this.removeItemByIndex(e,n),n=dt("."+VI,this.element)}else{o=i&&i.length&&1===i.length?i[0]:t;e=n.indexOf(o),this.removeItemByIndex(e,n)}this.resize()},e.prototype.removeItemByIndex=function(t,e){if(this.tbarEle[parseInt(t.toString(),10)]&&e[parseInt(t.toString(),10)]){var i=this.tbarEle.indexOf(e[parseInt(t.toString(),10)]);if(this.tbarAlign){var n=this.tbarAlgEle[(this.items[parseInt(i.toString(),10)].align+"s").toLowerCase()].indexOf(this.tbarEle[parseInt(i.toString(),10)]);this.tbarAlgEle[(this.items[parseInt(i.toString(),10)].align+"s").toLowerCase()].splice(parseInt(n.toString(),10),1)}this.isReact&&this.clearToolbarTemplate(e[parseInt(t.toString(),10)]);var s=e[parseInt(t.toString(),10)].querySelector(".e-control.e-btn");y(s)||y(s.ej2_instances[0])||s.ej2_instances[0].isDestroyed||s.ej2_instances[0].destroy(),at(e[parseInt(t.toString(),10)]),this.items.splice(i,1),this.tbarEle.splice(i,1)}},e.prototype.templateRender=function(t,e,i,n){var s,r=i.type,o=t;if("object"==typeof t&&(s="function"==typeof o.appendTo),"string"!=typeof t&&s){if("Input"===r){c=this.createElement("input");i.id?c.id=i.id:c.id=b("tbr-ipt"),e.appendChild(c),o.appendTo(c)}}else{var a,l=void 0,h=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);a="string"==typeof t?t.trim():t;try{if("object"!=typeof t||y(t.tagName))if("string"==typeof t&&h.test(a))e.innerHTML=a;else if(document.querySelectorAll(a).length){var c,d=(c=document.querySelector(a)).outerHTML.trim();e.appendChild(c),c.style.display="",y(d)||this.tempId.push(a)}else l=Hi(a);else e.appendChild(t)}catch(t){l=Hi(a)}var p=void 0;if(!y(l))p=l({},this,"template",this.element.id+n+"_template",this.isStringTemplate,void 0,void 0,this.root);!y(p)&&p.length>0&&[].slice.call(p).forEach(function(t){y(t.tagName)||(t.style.display=""),e.appendChild(t)})}this.add(e,QI);var u=e.firstElementChild;y(u)||(u.setAttribute("tabindex",y(u.getAttribute("tabIndex"))?"-1":this.getDataTabindex(u)),u.setAttribute("data-tabindex",y(u.getAttribute("tabIndex"))?"-1":this.getDataTabindex(u))),this.tbarEle.push(e)},e.prototype.buttonRendering=function(t,e){var i=this.createElement("button",{className:"e-tbar-btn"});i.setAttribute("type","button");var n,s,r=t.text;t.id?i.id=t.id:i.id=b("e-tbr-btn");var o=this.createElement("span",{className:"e-tbar-btn-text"});r?(o.innerHTML=this.enableHtmlSanitizer?Yi.sanitize(r):r,i.appendChild(o),i.classList.add("e-tbtn-txt")):this.add(e,"e-tbtn-align"),(t.prefixIcon||t.suffixIcon)&&(t.prefixIcon&&t.suffixIcon||t.prefixIcon?(n=t.prefixIcon+" e-icons",s="Left"):(n=t.suffixIcon+" e-icons",s="Right"));var a=new mo({iconCss:n,iconPosition:s});return a.createElement=this.createElement,a.appendTo(i),t.width&&gt(i,{width:S(t.width)}),i},e.prototype.renderSubComponent=function(t,e){var i,n=this.createElement("div",{className:VI}),s=this.createElement("div",{innerHTML:this.enableHtmlSanitizer&&!y(t.tooltipText)?Yi.sanitize(t.tooltipText):t.tooltipText});if(this.tbarEle||(this.tbarEle=[]),t.htmlAttributes&&this.setAttr(t.htmlAttributes,n),t.tooltipText&&n.setAttribute("title",s.textContent),t.cssClass&&(n.className=n.className+" "+t.cssClass),t.template)this.templateRender(t.template,n,t,e);else switch(t.type){case"Button":(i=this.buttonRendering(t,n)).setAttribute("tabindex",y(t.tabIndex)?"-1":t.tabIndex.toString()),i.setAttribute("data-tabindex",y(t.tabIndex)?"-1":t.tabIndex.toString()),i.setAttribute("aria-label",t.text||t.tooltipText),i.setAttribute("aria-disabled","false"),n.appendChild(i),n.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(n,FI)}if(t.showTextOn){var r=t.showTextOn;"Toolbar"===r?(this.add(n,qI),this.add(n,"e-tbtn-align")):"Overflow"===r&&this.add(n,XI)}if(t.overflow){var o=t.overflow;"Show"===o?this.add(n,GI):"Hide"===o&&(n.classList.contains(FI)||this.add(n,KI))}return"Show"!==t.overflow&&t.showAlwaysInPopup&&!n.classList.contains(FI)&&(this.add(n,aM),this.popupPriCount++),t.disabled&&this.add(n,ZI),!1===t.visible&&this.add(n,lM),n},e.prototype.getDataTabindex=function(t){return y(t.getAttribute("data-tabindex"))?"-1":t.getAttribute("data-tabindex")},e.prototype.itemClick=function(t){this.activeEleSwitch(t.currentTarget)},e.prototype.activeEleSwitch=function(t){this.activeEleRemove(t.firstElementChild),this.activeEle.focus()},e.prototype.activeEleRemove=function(t){var e=this.element.querySelector("."+VI+":not(."+ZI+" ):not(."+FI+" ):not(."+lM+" )");if(y(this.activeEle)||(this.activeEle.setAttribute("tabindex",this.getDataTabindex(this.activeEle)),e&&e.removeAttribute("tabindex"),e=this.activeEle),this.activeEle=t,"-1"===this.getDataTabindex(this.activeEle))if(y(this.trgtEle)&&!t.parentElement.classList.contains(QI)){if(!y(this.element.querySelector(".e-hor-nav"))&&this.element.querySelector(".e-hor-nav").classList.contains("e-nav-active")){this.updateTabIndex("0");var i="-1"===this.getDataTabindex(e)?"0":this.getDataTabindex(e);e.setAttribute("tabindex",i)}else this.updateTabIndex("-1");t.removeAttribute("tabindex")}else{var n=parseInt(this.getDataTabindex(this.activeEle),10)+1;this.activeEle.setAttribute("tabindex",n.toString())}},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.getModuleName=function(){return"toolbar"},e.prototype.itemsRerender=function(t){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=t,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},e.prototype.resize=function(){var t=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var e=this.checkOverflow(t,t.getElementsByClassName(RI)[0]);if(!e){this.destroyScroll();var i=t.querySelector("."+RI);y(i)||(this.remove(i,cM),this.tbarAlign&&this.add(i,eM))}e&&this.scrollModule&&this.offsetWid===t.offsetWidth||((this.offsetWid>t.offsetWidth||e)&&this.renderOverflowMode(),this.popObj&&("Extended"===this.overflowMode&&(this.popObj.width=this.getToolbarPopupWidth(this.element)),this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()),this.element.querySelector("."+iM)&&(this.scrollStep=this.element.querySelector("."+iM).offsetWidth),this.offsetWid=t.offsetWidth,this.tbResize=!1,this.separator())},e.prototype.orientationChange=function(){var t=this;setTimeout(function(){t.resize()},500)},e.prototype.extendedOpen=function(){var t=this.element.querySelector("."+gM);"Extended"===this.overflowMode&&t&&(this.isExtendedOpen=t.classList.contains(_I))},e.prototype.updateHideEleTabIndex=function(t,e,i,n,s){i&&(n=s.indexOf(t));for(var r=s[++n];r;){if(!this.eleContains(r)){var o=r.firstElementChild.getAttribute("data-tabindex");e&&"-1"===o?r.firstElementChild.setAttribute("tabindex","0"):o!==r.firstElementChild.getAttribute("tabindex")&&r.firstElementChild.setAttribute("tabindex",o);break}r=s[++n]}},e.prototype.clearToolbarTemplate=function(t){if(this.registeredTemplate&&this.registeredTemplate.template)for(var e=this.registeredTemplate,i=0;i<e.template.length;i++){if(!y(s=ut(e.template[parseInt(i.toString(),10)].rootNodes[0],"."+VI))&&s===t){this.clearTemplate(["template"],[e.template[parseInt(i.toString(),10)]]);break}}else if(this.portals&&this.portals.length>0){var n=this.portals;for(i=0;i<n.length;i++){var s;if(!y(s=ut(n[parseInt(i.toString(),10)].containerInfo,"."+VI))&&s===t){this.clearTemplate(["template"],i);break}}}},e.prototype.onPropertyChanged=function(t,e){var i=this.element;this.extendedOpen();for(var n=0,s=Object.keys(t);n<s.length;n++){switch(s[n]){case"items":if(t.items instanceof Array&&e.items instanceof Array)this.itemsRerender(t.items);else for(var r=Object.keys(t.items),o=0;o<r.length;o++){var a=parseInt(Object.keys(t.items)[parseInt(o.toString(),10)],10),l=Object.keys(t.items[parseInt(a.toString(),10)])[0],h=Object(t.items[parseInt(a.toString(),10)])[""+l];if(this.tbarAlign||"align"===l){this.refresh(),this.trigger("created");break}var c="showAlwaysInPopup"===l&&!h,d="overflow"===l&&0!==this.popupPriCount;(c||this.items[parseInt(a.toString(),10)].showAlwaysInPopup&&d)&&--this.popupPriCount,y(this.scrollModule)&&this.destroyMode();var p=[].slice.call(dt("."+RI+" ."+VI,i));this.isReact&&this.items[parseInt(a.toString(),10)].template&&this.clearToolbarTemplate(p[parseInt(a.toString(),10)]),at(p[parseInt(a.toString(),10)]),this.tbarEle.splice(a,1),this.addItems([this.items[parseInt(a.toString(),10)]],a),this.items.splice(a,1),this.items[parseInt(a.toString(),10)].template&&this.tbarEle.splice(this.items.length,1)}break;case"width":gt(i,{width:S(t.width)}),this.refreshOverflow();break;case"height":gt(this.element,{height:S(t.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(i,UI),this.refreshOverflow();break;case"enableRtl":t.enableRtl?this.add(i,UI):this.remove(i,UI),y(this.scrollModule)||(t.enableRtl?this.add(this.scrollModule.element,UI):this.remove(this.scrollModule.element,UI)),y(this.popObj)||(t.enableRtl?this.add(this.popObj.element,UI):this.remove(this.popObj.element,UI)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":e.cssClass&&et([this.element],e.cssClass.split(" ")),t.cssClass&&tt([this.element],t.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),t.allowKeyboard&&this.wireKeyboardEvent()}}},e.prototype.hideItem=function(t,e){var i,n="object"==typeof t,s=t;if(n||!y(s)){var r=[].slice.call(dt("."+VI,this.element));if(n)i=t;else if(this.tbarEle[parseInt(s.toString(),10)]){i=[].slice.call(dt("."+VI,this.element))[parseInt(s.toString(),10)]}i&&(e?(i.classList.add(lM),i.classList.contains(FI)||(y(i.firstElementChild.getAttribute("tabindex"))||"-1"!==i.firstElementChild.getAttribute("tabindex"))&&this.updateHideEleTabIndex(i,e,n,s,r)):(i.classList.remove(lM),i.classList.contains(FI)||this.updateHideEleTabIndex(i,e,n,s,r)),this.refreshOverflow())}},BI([Rt([],fM)],e.prototype,"items",void 0),BI([jt("auto")],e.prototype,"width",void 0),BI([jt("auto")],e.prototype,"height",void 0),BI([jt("")],e.prototype,"cssClass",void 0),BI([jt("Scrollable")],e.prototype,"overflowMode",void 0),BI([jt()],e.prototype,"scrollStep",void 0),BI([jt(!0)],e.prototype,"enableCollision",void 0),BI([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),BI([jt(!0)],e.prototype,"allowKeyboard",void 0),BI([Ut()],e.prototype,"clicked",void 0),BI([Ut()],e.prototype,"created",void 0),BI([Ut()],e.prototype,"destroyed",void 0),BI([Ut()],e.prototype,"beforeCreate",void 0),BI([Ut()],e.prototype,"keyDown",void 0),e=BI([Ft],e)}(_e),vM=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bM=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},CM="e-acrdn-root",IM="e-accordion",MM="e-acrdn-item",SM="e-item-focus",xM="e-hide",wM="e-acrdn-header",DM="e-acrdn-header-content",EM="e-acrdn-panel",TM="e-acrdn-content",AM="e-toggle-icon",NM="e-expand-icon",LM="e-rtl",OM="e-content-hide",kM="e-select",zM="e-selected",PM="e-active",jM="e-overlay",BM="e-toggle-animation",HM="e-expand-state",RM="e-accordion-container",VM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vM(e,t),bM([jt("SlideDown")],e.prototype,"effect",void 0),bM([jt(400)],e.prototype,"duration",void 0),bM([jt("linear")],e.prototype,"easing",void 0),e}(re),UM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vM(e,t),bM([Bt({effect:"SlideUp",duration:400,easing:"linear"},VM)],e.prototype,"collapse",void 0),bM([Bt({effect:"SlideDown",duration:400,easing:"linear"},VM)],e.prototype,"expand",void 0),e}(re),FM=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vM(e,t),bM([jt(null)],e.prototype,"content",void 0),bM([jt(null)],e.prototype,"header",void 0),bM([jt(null)],e.prototype,"cssClass",void 0),bM([jt(null)],e.prototype,"iconCss",void 0),bM([jt(!1)],e.prototype,"expanded",void 0),bM([jt(!0)],e.prototype,"visible",void 0),bM([jt(!1)],e.prototype,"disabled",void 0),bM([jt()],e.prototype,"id",void 0),e}(re),WM=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.keyConfigs={moveUp:"uparrow",moveDown:"downarrow",enter:"enter",space:"space",home:"home",end:"end"},n}return vM(e,t),e.prototype.destroy=function(){(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate();var e=this.element;if(t.prototype.destroy.call(this),this.unWireEvents(),this.isDestroy=!0,this.restoreContent(null),[].slice.call(e.children).forEach(function(t){e.removeChild(t)}),this.trgtEle){for(this.trgtEle=null;this.ctrlTem.firstElementChild;)e.appendChild(this.ctrlTem.firstElementChild);this.ctrlTem=null}e.classList.remove(CM),e.removeAttribute("style"),this.element.removeAttribute("data-ripple"),!this.isNested&&ie&&this.removeRippleEffect()},e.prototype.preRender=function(){var t=ut(this.element,"."+EM);this.isNested=!1,this.templateEle=[],this.isDestroy||(this.isDestroy=!1),t&&t.firstElementChild&&t.firstElementChild.firstElementChild?t.firstElementChild.firstElementChild.classList.contains(IM)&&(t.classList.add("e-nested"),this.isNested=!0):this.element.classList.add(CM),this.enableRtl&&this.add(this.element,LM)},e.prototype.add=function(t,e){t.classList.add(e)},e.prototype.remove=function(t,e){t.classList.remove(e)},e.prototype.render=function(){this.initializeHeaderTemplate(),this.initializeItemTemplate(),this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){var t=S(this.width),e=S(this.height);gt(this.element,{width:t,height:e}),y(this.initExpand)&&(this.initExpand=[]),!y(this.expandedIndices)&&this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices)},e.prototype.renderControl=function(){this.trgtEle=this.element.children.length>0?ct("div",this.element):null,this.renderItems(),this.initItemExpand()},e.prototype.wireFocusEvents=function(){for(var t=0,e=[].slice.call(this.element.querySelectorAll("."+MM));t<e.length;t++){var i=e[t],n=i.querySelector("."+wM);i.childElementCount>0&&n&&(K.clearEvents(n),K.add(n,"focus",this.focusIn,this),K.add(n,"blur",this.focusOut,this))}},e.prototype.unWireEvents=function(){K.remove(this.element,"click",this.clickHandler),y(this.keyModule)||this.keyModule.destroy()},e.prototype.wireEvents=function(){K.add(this.element,"click",this.clickHandler,this),this.isNested||this.isDestroy||(this.removeRippleEffect=Xt(this.element,{selector:"."+wM})),this.isNested||(this.keyModule=new si(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}))},e.prototype.templateParser=function(t){if(t)try{return"function"!=typeof t&&document.querySelectorAll(t).length?Hi(document.querySelector(t).innerHTML.trim()):Hi(t)}catch(e){return Hi(t)}},e.prototype.initializeHeaderTemplate=function(){this.headerTemplate&&(this.headerTemplateFn=this.templateParser(this.headerTemplate))},e.prototype.initializeItemTemplate=function(){this.itemTemplate&&(this.itemTemplateFn=this.templateParser(this.itemTemplate))},e.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},e.prototype.getItemTemplate=function(){return this.itemTemplateFn},e.prototype.focusIn=function(t){t.target.parentElement.classList.add(SM)},e.prototype.focusOut=function(t){t.target.parentElement.classList.remove(SM)},e.prototype.ctrlTemplate=function(){var t;this.ctrlTem=this.element.cloneNode(!0);var e=ct("."+RM,this.element);t=e?e.children:this.element.children;var i=[];[].slice.call(t).forEach(function(t){i.push({header:t.childElementCount>0&&t.children[0]?t.children[0]:"",content:t.childElementCount>1&&t.children[1]?t.children[1]:""}),t.parentNode.removeChild(t)}),e&&this.element.removeChild(e),this.setProperties({items:i},!0)},e.prototype.toggleIconGenerate=function(){var t=this.createElement("div",{className:AM}),e=this.createElement("span",{className:"e-tgl-collapse-icon e-icons"});return t.appendChild(e),t},e.prototype.initItemExpand=function(){var t=this.initExpand.length;if(0!==t){if("Single"===this.expandMode)this.expandItem(!0,this.initExpand[t-1]);else for(var e=0;e<t;e++)this.expandItem(!0,this.initExpand[parseInt(e.toString(),10)]);this.isReact&&this.renderReactTemplates()}},e.prototype.renderItems=function(){var t,e,i=this,n=this.element;if(y(this.trgtEle)||this.ctrlTemplate(),!y(this.dataSource)&&this.dataSource.length>0)this.dataSource.forEach(function(t,s){e=i.renderInnerItem(t,s),n.appendChild(e),e.childElementCount>0&&(K.add(e.querySelector("."+wM),"focus",i.focusIn,i),K.add(e.querySelector("."+wM),"blur",i.focusOut,i))});else{var s=this.items;n&&s.length>0&&s.forEach(function(e,s){t=i.renderInnerItem(e,s),n.appendChild(t),t.childElementCount>0&&(K.add(t.querySelector("."+wM),"focus",i.focusIn,i),K.add(t.querySelector("."+wM),"blur",i.focusOut,i))})}this.isReact&&this.renderReactTemplates()},e.prototype.clickHandler=function(t){var e,i=t.target,n=this.getItems(),s={};if(ut(i,"."+IM)===this.element){i.classList.add("e-target");var r,o=ut(i,"."+MM),a=ut(i,"."+wM),l=ut(i,"."+EM);o&&(y(a)||y(l))&&(a=o.children[0],l=o.children[1]),a&&(e=ct("."+AM,a)),a?r=ut(a,"."+MM):l&&(r=ut(l,"."+MM));var h=this.getIndexByItem(o);r&&(s.item=n[this.getIndexByItem(r)]),s.originalEvent=t,!(!y(e)&&o.childElementCount<=1)||!y(l)&&y(ct("."+wM+" ."+AM,r))||(o.appendChild(this.contentRendering(h)),this.ariaAttrUpdate(o)),this.afterContentRender(i,s,o,a,l,r),this.isReact&&this.renderReactTemplates()}},e.prototype.afterContentRender=function(t,e,i,n,s,r){var o=this,a=[];this.trigger("clicked",e,function(e){if(!e.cancel){var l=s&&!y(ct(".e-target",s)),h="."+EM+" ."+IM,c=s&&!y(ct("."+IM,s))&&y(ut(t,h)),d=s&&y(ct("."+IM,s))||!(ut(t,"."+IM)===o.element);if(l=l&&(c||d),t.classList.remove("e-target"),!(t.classList.contains(EM)||t.classList.contains(TM)||l)){var p=o.element.querySelector("."+RM),u=p?p.children:o.element.children;[].slice.call(u).forEach(function(t){t.classList.contains(PM)&&a.push(t)});var g=[].slice.call(o.element.querySelectorAll("."+MM+" [e-animate]"));if(g.length>0)for(var m=0,f=g;m<f.length;m++){var v=f[m];a.push(v.parentElement)}var b=-1!==a.indexOf(r)&&"true"===s.getAttribute("e-animate"),C=!1;if(!y(i)&&!y(n)){var I=ct("."+EM,i),M=ut(i,"."+CM).querySelector("."+HM);if(y(I))return;C=M===i,!nt(I)||b&&!r.classList.contains(zM)?(a.length>0&&"Single"===o.expandMode&&!b&&a.forEach(function(t){o.collapse(ct("."+EM,t)),t.classList.remove(HM)}),o.expand(I)):o.collapse(I),y(M)||C||M.classList.remove(HM)}}}})},e.prototype.eleMoveFocus=function(t,e,i){var n,s=ut(i,"."+MM);i===e?n=("moveUp"===t?i.lastElementChild:i).querySelector("."+wM):i.classList.contains(wM)&&(s="moveUp"===t?s.previousElementSibling:s.nextElementSibling)&&(n=ct("."+wM,s)),n&&n.focus()},e.prototype.keyActionHandler=function(t){var e=t.target;if(!y(ut(t.target,wM))||e.classList.contains(IM)||e.classList.contains(wM)){var i,n=this.element;switch(t.action){case"moveUp":case"moveDown":this.eleMoveFocus(t.action,n,e);break;case"space":case"enter":!y(i=e.nextElementSibling)&&i.classList.contains(EM)?"true"!==i.getAttribute("e-animate")&&e.click():e.click(),t.preventDefault();break;case"home":case"end":("home"===t.action?n.firstElementChild.children[0]:n.lastElementChild.children[0]).focus(),t.preventDefault()}}},e.prototype.headerEleGenerate=function(){var t=this.createElement("div",{className:wM,id:b("acrdn_header")});return ht(t,{tabindex:"0",role:"button","aria-disabled":"false","aria-expanded":"false"}),t},e.prototype.renderInnerItem=function(t,e){var i=this.createElement("div",{className:MM,id:t.id||b("acrdn_item")});if(this.headerTemplate){var n=this.headerEleGenerate(),s=this.createElement("div",{className:DM});return n.appendChild(s),rt(this.getHeaderTemplate()(t,this,"headerTemplate",this.element.id+"_headerTemplate",!1),s),i.appendChild(n),n.appendChild(this.toggleIconGenerate()),this.add(i,kM),i}if(t.header&&this.angularnativeCondiCheck(t,"header")){var r=t.header;this.enableHtmlSanitizer&&"string"==typeof t.header&&(r=Yi.sanitize(t.header));n=this.headerEleGenerate(),s=this.createElement("div",{className:DM});n.appendChild(s),n.appendChild(this.fetchElement(s,r,e)),i.appendChild(n)}var o=ct("."+wM,i);if(!t.expanded||y(e)||this.enablePersistence||-1===this.initExpand.indexOf(e)&&this.initExpand.push(e),t.cssClass&&tt([i],t.cssClass.split(" ")),t.disabled&&tt([i],jM),!1===t.visible&&tt([i],xM),t.iconCss){var a=this.createElement("div",{className:"e-acrdn-header-icon"}),l=this.createElement("span",{className:t.iconCss+" e-icons"});a.appendChild(l),y(o)?((o=this.headerEleGenerate()).appendChild(a),i.appendChild(o)):o.insertBefore(a,o.childNodes[0])}if(t.content&&this.angularnativeCondiCheck(t,"content")){var h=this.toggleIconGenerate();y(o)&&(o=this.headerEleGenerate(),i.appendChild(o)),o.appendChild(h),this.add(i,kM)}return i},e.prototype.angularnativeCondiCheck=function(t,e){var i="content"===e?t.content:t.header;if(this.isAngular&&!y(i.elementRef)){var n=i.elementRef.nativeElement.data;if(y(n)||""===n||-1===n.indexOf("bindings="))return!0;var s=JSON.parse(i.elementRef.nativeElement.data.replace("bindings=",""));return!(!y(s)&&"false"===s["ng-reflect-ng-if"])}return!0},e.prototype.fetchElement=function(t,e,i){var n,s,r;try{if(document.querySelectorAll(e).length&&"Button"!==e){var o=document.querySelector(e);s=o.outerHTML.trim(),t.appendChild(o),o.style.display=""}else n=Hi(e)}catch(i){"string"==typeof e?t.innerHTML=this.enableHtmlSanitizer?Yi.sanitize(e):e:e instanceof HTMLElement?(t.appendChild(e),this.trgtEle&&(t.firstElementChild.style.display="")):n=Hi(e)}if(!y(n)){this.isReact&&this.renderReactTemplates();var a=void 0,l=void 0;t.classList.contains(DM)?(a=this.element.id+i+"_header",l="header"):t.classList.contains(TM)&&(a=this.element.id+i+"_content",l="content"),r=n({},this,l,a,this.isStringTemplate)}return y(r)||!(r.length>0)||y(r[0].tagName)&&1===r.length?0===t.childElementCount&&(t.innerHTML=this.enableHtmlSanitizer?Yi.sanitize(e):e):[].slice.call(r).forEach(function(e){y(e.tagName)||(e.style.display=""),t.appendChild(e)}),y(s)||-1===this.templateEle.indexOf(e)&&this.templateEle.push(e),t},e.prototype.ariaAttrUpdate=function(t){var e=ct("."+wM,t),i=ct("."+EM,t);e.setAttribute("aria-controls",i.id),i.setAttribute("aria-labelledby",e.id),i.setAttribute("role","region")},e.prototype.contentRendering=function(t){var e=this.createElement("div",{className:EM+" "+OM,id:b("acrdn_panel")});ht(e,{"aria-hidden":"true"});var i=this.createElement("div",{className:TM});if(!y(this.dataSource)&&this.dataSource.length>0)this.isReact&&this.renderReactTemplates(),rt(this.getItemTemplate()(this.dataSource[parseInt(t.toString(),10)],this,"itemTemplate",this.element.id+"_itemTemplate",!1),i),e.appendChild(i);else{var n=this.items[parseInt(t.toString(),10)].content;this.enableHtmlSanitizer&&"string"==typeof n&&(n=Yi.sanitize(n)),e.appendChild(this.fetchElement(i,n,t))}return e},e.prototype.expand=function(t){var e=this,i=this.getItems(),n=ut(t,"."+MM);if(!(y(t)||nt(t)&&"true"!==t.getAttribute("e-animate")||n.classList.contains(jM))){var s=ut(n,"."+CM).querySelector("."+HM),r={name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing},o=ct("."+AM,n).firstElementChild,a={element:n,item:i[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+EM),isExpanded:!0};this.trigger("expanding",a,function(i){i.cancel||(o.classList.add(BM),e.expandedItemsPush(n),y(s)||s.classList.remove(HM),n.classList.add(HM),"None"===r.name&&"Enable"!==te||"Disable"===te?(e.expandProgress("begin",o,t,n,i),e.expandProgress("end",o,t,n,i)):e.expandAnimation(r.name,o,t,n,r,i))})}},e.prototype.expandAnimation=function(t,e,i,n,s,r){var o,a=this;"None"===t&&"Enable"===te&&(t="SlideDown",s.name="SlideDown"),this.lastActiveItemId=n.id,"SlideDown"===t?(s.begin=function(){a.expandProgress("begin",e,i,n,r),i.style.position="absolute",o=n.offsetHeight,i.style.maxHeight=i.offsetHeight+"px",n.style.maxHeight=""},s.progress=function(){n.style.minHeight=o+i.offsetHeight+"px"},s.end=function(){gt(i,{position:"",maxHeight:""}),n.style.minHeight="",a.expandProgress("end",e,i,n,r)}):(s.begin=function(){a.expandProgress("begin",e,i,n,r)},s.end=function(){a.expandProgress("end",e,i,n,r)}),new qt(s).animate(i)},e.prototype.expandProgress=function(t,e,i,n,s){this.remove(i,OM),this.add(n,zM),this.add(e,NM),"end"===t&&(this.add(n,PM),i.setAttribute("aria-hidden","false"),ht(i.previousElementSibling,{"aria-expanded":"true"}),e.classList.remove(BM),this.trigger("expanded",s))},e.prototype.expandedItemsPush=function(t){var e=this.getIndexByItem(t);if(-1===this.expandedIndices.indexOf(e)){var i=[].slice.call(this.expandedIndices);i.push(e),this.setProperties({expandedIndices:i},!0)}},e.prototype.getIndexByItem=function(t){var e=this.getItemElements();return[].slice.call(e).indexOf(t)},e.prototype.getItemElements=function(){var t=[],e=this.element.children;return[].slice.call(e).forEach(function(e){e.classList.contains(MM)&&t.push(e)}),t},e.prototype.expandedItemsPop=function(t){var e=this.getIndexByItem(t),i=[].slice.call(this.expandedIndices);i.splice(i.indexOf(e),1),this.setProperties({expandedIndices:i},!0)},e.prototype.collapse=function(t){var e=this;if(!y(t)){var i=this.getItems(),n=ut(t,"."+MM);if(nt(t)&&!n.classList.contains(jM)){var s={name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing},r=ct("."+AM,n).firstElementChild,o={element:n,item:i[this.getIndexByItem(n)],index:this.getIndexByItem(n),content:n.querySelector("."+EM),isExpanded:!1};this.trigger("expanding",o,function(i){i.cancel||(e.expandedItemsPop(n),n.classList.remove(HM),r.classList.add(BM),"None"===s.name&&"Enable"!==te||"Disable"===te?(e.collapseProgress("begin",r,t,n,i),e.collapseProgress("end",r,t,n,i)):e.collapseAnimation(s.name,t,n,r,s,i))})}}},e.prototype.collapseAnimation=function(t,e,i,n,s,r){var o,a,l,h,c=this;"None"===t&&"Enable"===te&&(t="SlideUp",s.name="SlideUp"),this.lastActiveItemId=i.id,"SlideUp"===t?(s.begin=function(){l=i.offsetHeight,i.style.minHeight=l+"px",e.style.position="absolute",o=i.offsetHeight,a=e.offsetHeight,e.style.maxHeight=a+"px",c.collapseProgress("begin",n,e,i,r)},s.progress=function(){(h=o-(a-e.offsetHeight))<l&&(i.style.minHeight=h+"px")},s.end=function(){e.style.display="none",c.collapseProgress("end",n,e,i,r),i.style.minHeight="",gt(e,{position:"",maxHeight:"",display:""})}):(s.begin=function(){c.collapseProgress("begin",n,e,i,r)},s.end=function(){c.collapseProgress("end",n,e,i,r)}),new qt(s).animate(e)},e.prototype.collapseProgress=function(t,e,i,n,s){this.remove(e,NM),this.remove(n,zM),"end"===t&&(this.add(i,OM),e.classList.remove(BM),this.remove(n,PM),i.setAttribute("aria-hidden","true"),ht(i.previousElementSibling,{"aria-expanded":"false"}),this.trigger("expanded",s))},e.prototype.getModuleName=function(){return"accordion"},e.prototype.getItems=function(){return this.itemTemplate&&this.headerTemplate?this.dataSource:this.items},e.prototype.addItem=function(t,e){var i=this,n=this.element,s=this.getItemElements(),r=this.getItems();(y(e)&&(e=r.length),n.childElementCount>=e)&&(t instanceof Array?t:[t]).forEach(function(t,o){var a=e+o;r.splice(a,0,t);var l=i.renderInnerItem(t,a);n.childElementCount===a?n.appendChild(l):n.insertBefore(l,s[parseInt(a.toString(),10)]),K.add(l.querySelector("."+wM),"focus",i.focusIn,i),K.add(l.querySelector("."+wM),"blur",i.focusOut,i),i.expandedIndices=[],i.expandedItemRefresh(),t&&t.expanded&&i.expandItem(!0,a)});this.isReact&&this.renderReactTemplates()},e.prototype.expandedItemRefresh=function(){var t=this,e=this.getItemElements();[].slice.call(e).forEach(function(e){e.classList.contains(zM)&&t.expandedItemsPush(e)})},e.prototype.removeItem=function(t){if(this.isReact||this.isAngular){var e=dt("."+MM,this.element)[parseInt(t.toString(),10)],i=ct("."+DM,e),n=ct("."+TM,e);this.clearAccordionTemplate(i,this.dataSource.length>0?"headerTemplate":"header",DM),this.clearAccordionTemplate(n,this.dataSource.length>0?"itemTemplate":"content",TM)}var s=this.getItemElements()[parseInt(t.toString(),10)],r=this.getItems();y(s)||(this.restoreContent(t),at(s),r.splice(t,1),this.expandedIndices=[],this.expandedItemRefresh())},e.prototype.select=function(t){var e=this.getItemElements()[parseInt(t.toString(),10)];y(e)||y(ct("."+wM,e))||e.children[0].focus()},e.prototype.hideItem=function(t,e){var i=this.getItemElements()[parseInt(t.toString(),10)];y(i)||(y(e)&&(e=!0),e?this.add(i,xM):this.remove(i,xM))},e.prototype.enableItem=function(t,e){var i=this.getItemElements()[parseInt(t.toString(),10)];if(!y(i)){var n=i.firstElementChild;e?(this.remove(i,jM),ht(n,{tabindex:"0","aria-disabled":"false"}),n.focus()):(i.classList.contains(PM)&&(this.expandItem(!1,t),this.eleMoveFocus("movedown",this.element,n)),this.add(i,jM),n.setAttribute("aria-disabled","true"),n.removeAttribute("tabindex"))}},e.prototype.expandItem=function(t,e){var i=this,n=this.getItemElements();if(y(e))if("Single"===this.expandMode&&t){var s=n[n.length-1];this.itemExpand(t,s,this.getIndexByItem(s))}else{var r=ct("#"+this.lastActiveItemId,this.element);[].slice.call(n).forEach(function(e){i.itemExpand(t,e,i.getIndexByItem(e)),e.classList.remove(HM)});var o=ct("."+HM,this.element);o&&o.classList.remove(HM),r&&r.classList.add(HM)}else{if(y(s=n[parseInt(e.toString(),10)])||!s.classList.contains(kM)||s.classList.contains(PM)&&t)return;"Single"===this.expandMode&&this.expandItem(!1),this.itemExpand(t,s,e)}},e.prototype.itemExpand=function(t,e,i){var n=e.children[1];e.classList.contains(jM)||(y(n)&&t?(n=this.contentRendering(i),e.appendChild(n),this.ariaAttrUpdate(e),this.expand(n)):y(n)||(t?this.expand(n):this.collapse(n)),this.isReact&&this.renderReactTemplates())},e.prototype.destroyItems=function(){this.restoreContent(null),(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate(),[].slice.call(this.element.querySelectorAll("."+MM)).forEach(function(t){at(t)})},e.prototype.restoreContent=function(t){var e;e=y(t)?this.element:this.element.querySelectorAll("."+MM)[parseInt(t.toString(),10)],this.templateEle.forEach(function(t){y(e.querySelector(t))||(document.body.appendChild(e.querySelector(t)).style.display="none")})},e.prototype.updateItem=function(t,e){if(!y(t)){var i=this.getItems(),n=i[parseInt(e.toString(),10)];i.splice(e,1),this.restoreContent(e);var s=ct("."+DM,t),r=ct("."+TM,t);(this.isReact||this.isAngular)&&(this.clearAccordionTemplate(s,"header",DM),this.clearAccordionTemplate(r,"content",TM)),at(t),this.addItem(n,e)}},e.prototype.setTemplate=function(t,e,i){this.fetchElement(e,t,i),this.isReact&&this.renderReactTemplates()},e.prototype.clearAccordionTemplate=function(t,e,i){if(this.registeredTemplate&&this.registeredTemplate[""+e])for(var n=this.registeredTemplate,s=0;s<n[""+e].length;s++){var r=n[""+e][parseInt(s.toString(),10)].rootNodes[0];if(!y(a=ut(r,"."+i))&&a===t||y(r.parentNode)){this.clearTemplate([e],[n[""+e][parseInt(s.toString(),10)]]);break}}else if(this.portals&&this.portals.length>0){var o=this.portals;for(s=0;s<o.length;s++){var a;if(!y(a=ut(o[parseInt(s.toString(),10)].containerInfo,"."+i))&&a===t){this.clearTemplate([e],s);break}}}},e.prototype.getPersistData=function(){return this.addOnPersist(["expandedIndices"])},e.prototype.onPropertyChanged=function(t,e){for(var i=this.element,n=!1,s=0,r=Object.keys(t);s<r.length;s++){switch(r[s]){case"items":if(t.items instanceof Array&&e.items instanceof Array)n=!0;else for(var o=Object.keys(t.items),a=0;a<o.length;a++)for(var l=parseInt(Object.keys(t.items)[parseInt(a.toString(),10)],10),h=Object.keys(t.items[parseInt(l.toString(),10)]),c=0;c<h.length;c++){var d=dt("."+MM,this.element)[parseInt(l.toString(),10)],p=Object(e.items[parseInt(l.toString(),10)])[""+h[parseInt(c.toString(),10)]],u=Object(t.items[parseInt(l.toString(),10)])[""+h[parseInt(c.toString(),10)]],g=h[parseInt(c.toString(),10)],m=ct("."+TM,d);if(("header"===g||"iconCss"===g||"expanded"===g||"content"===g&&""===p)&&this.updateItem(d,l),"cssClass"!==h[parseInt(c.toString(),10)]||y(d)||(p&&et([d],p.split(" ")),u&&tt([d],u.split(" "))),"visible"!==h[parseInt(c.toString(),10)]||y(d)||(!1===Object(t.items[parseInt(l.toString(),10)])[""+h[parseInt(c.toString(),10)]]?d.classList.add(xM):d.classList.remove(xM)),"disabled"!==h[parseInt(c.toString(),10)]||y(d)||this.enableItem(l,!u),h.indexOf("header")<0&&"content"===h[parseInt(c.toString(),10)]&&!y(d)&&2===d.children.length)if("function"==typeof u){(this.isAngular||this.isReact)&&this.clearAccordionTemplate(m,h[parseInt(c.toString(),10)],TM);var f=d.querySelector("."+TM);f.innerHTML="",this.setTemplate(u,f,l)}else d.classList.contains(zM)&&this.expandItem(!1,l),at(d.querySelector("."+EM))}break;case"dataSource":case"expandedIndices":null===this.expandedIndices&&(this.expandedIndices=[]),n=!0;break;case"headerTemplate":this.initializeHeaderTemplate(),n=!0;break;case"itemTemplate":this.initializeItemTemplate(),n=!0;break;case"enableRtl":t.enableRtl?this.add(i,LM):this.remove(i,LM);break;case"height":gt(this.element,{height:S(t.height)});break;case"width":gt(this.element,{width:S(t.width)});break;case"expandMode":"Single"===t.expandMode&&!y(this.expandedIndices)&&this.expandedIndices.length>1&&this.expandItem(!1)}}n&&(this.initExpand=[],!y(this.expandedIndices)&&this.expandedIndices.length>0&&(this.initExpand=this.expandedIndices),this.destroyItems(),this.renderItems(),this.initItemExpand())},bM([Rt([],FM)],e.prototype,"items",void 0),bM([jt([])],e.prototype,"dataSource",void 0),bM([jt()],e.prototype,"itemTemplate",void 0),bM([jt()],e.prototype,"headerTemplate",void 0),bM([jt("100%")],e.prototype,"width",void 0),bM([jt("auto")],e.prototype,"height",void 0),bM([jt([])],e.prototype,"expandedIndices",void 0),bM([jt("Multiple")],e.prototype,"expandMode",void 0),bM([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),bM([Bt({},UM)],e.prototype,"animation",void 0),bM([Ut()],e.prototype,"clicked",void 0),bM([Ut()],e.prototype,"expanding",void 0),bM([Ut()],e.prototype,"expanded",void 0),bM([Ut()],e.prototype,"created",void 0),bM([Ut()],e.prototype,"destroyed",void 0),e=bM([Ft],e)}(_e),YM=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_M=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},QM=function(t){function e(e,i){return t.call(this,e,i)||this}return YM(e,t),e.prototype.preRender=function(){this.isMenu=!1,this.element.id=this.element.id||b("ej2-contextmenu"),t.prototype.preRender.call(this)},e.prototype.initialize=function(){this.template=this.itemTemplate?this.itemTemplate:null,t.prototype.initialize.call(this),ht(this.element,{role:"menubar",tabindex:"0"}),this.element.style.zIndex=to(this.element).toString()},e.prototype.open=function(e,i,n){t.prototype.openMenu.call(this,null,null,e,i,null,n)},e.prototype.close=function(){t.prototype.closeMenu.call(this)},e.prototype.onPropertyChanged=function(e,i){t.prototype.onPropertyChanged.call(this,e,i);for(var n=0,s=Object.keys(e);n<s.length;n++){switch(s[n]){case"filter":this.close(),this.filter=e.filter;break;case"target":this.unWireEvents(i.target),this.wireEvents();break;case"itemTemplate":this.itemTemplate=e.itemTemplate,this.refresh()}}},e.prototype.getModuleName=function(){return"contextmenu"},_M([jt("")],e.prototype,"target",void 0),_M([jt("")],e.prototype,"filter",void 0),_M([Rt([],kI)],e.prototype,"items",void 0),_M([jt(null)],e.prototype,"itemTemplate",void 0),_M([jt(!1)],e.prototype,"enableScrolling",void 0),e=_M([Ft],e)}(PI),ZM=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qM=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},XM="e-vertical",GM="e-hamburger",KM=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.tempItems=[],n}return ZM(e,t),e.prototype.getModuleName=function(){return"menu"},e.prototype.preRender=function(){if(this.isMenu=!0,this.element.id=this.element.id||b("ej2-menu"),this.template){try{"function"!=typeof this.template&&document.querySelectorAll(this.template).length&&(this.template=document.querySelector(this.template).innerHTML.trim(),this.clearChanges())}catch(t){}this.updateMenuItems(this.items)}else this.updateMenuItems(this.items);t.prototype.preRender.call(this)},e.prototype.initialize=function(){t.prototype.initialize.call(this),ht(this.element,{role:"menubar",tabindex:"0"}),"Vertical"===this.orientation?(this.element.classList.add(XM),this.hamburgerMode&&!this.target&&this.element.previousElementSibling.classList.add(XM),this.element.setAttribute("aria-orientation","vertical")):G.isDevice&&!this.enableScrolling&&this.element.parentElement.classList.add("e-scrollable"),this.hamburgerMode&&(this.element.parentElement.classList.add(GM),"Horizontal"===this.orientation&&this.element.classList.add("e-hide-menu"))},e.prototype.updateMenuItems=function(t){this.tempItems=t,this.items=[],this.tempItems.map(this.createMenuItems,this),this.setProperties({items:this.items},!0),this.tempItems=[]},e.prototype.onPropertyChanged=function(e,i){for(var n=this,s=0,r=Object.keys(e);s<r.length;s++){switch(r[s]){case"orientation":"Vertical"===e.orientation?(this.element.classList.add(XM),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.add(XM),this.element.classList.remove("e-hide-menu")),this.element.setAttribute("aria-orientation","vertical")):(this.element.classList.remove(XM),this.hamburgerMode&&(this.target||this.element.previousElementSibling.classList.remove(XM),this.element.classList.add("e-hide-menu")),this.element.removeAttribute("aria-orientation"));break;case"items":Object.keys(i.items).length||this.updateMenuItems(e.items);break;case"hamburgerMode":this.element.previousElementSibling||t.prototype.createHeaderContainer.call(this),e.hamburgerMode?(this.element.parentElement.classList.add(GM),[].slice.call(this.element.getElementsByClassName("e-blankicon")).forEach(function(t){t.style[n.enableRtl?"paddingRight":"paddingLeft"]=""})):(this.element.parentElement.classList.remove(GM),"Vertical"===this.orientation&&this.setBlankIconStyle(this.element)),"Vertical"===this.orientation?(this.target||this.element.previousElementSibling.classList.add(XM),this.element.classList.remove("e-hide-menu")):(this.target?this.element.previousElementSibling.classList.add(XM):this.element.previousElementSibling.classList.remove(XM),this.element.classList[e.hamburgerMode?"add":"remove"]("e-hide-menu"));break;case"title":this.hamburgerMode&&this.element.previousElementSibling&&(e.title=this.enableHtmlSanitizer?Yi.sanitize(e.title):e.title,this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML=e.title);break;case"target":this.hamburgerMode&&(this.unWireEvents(i.target),this.wireEvents(),"Horizontal"===this.orientation&&(e.target?this.element.previousElementSibling.classList.add(XM):(this.element.previousElementSibling||t.prototype.createHeaderContainer.call(this),this.element.previousElementSibling.classList.remove(XM)),this.element.classList.add("e-hide-menu")));break;case"template":this.template=e.template,this.refresh()}}t.prototype.onPropertyChanged.call(this,e,i)},e.prototype.createMenuItems=function(t){var e,i,n=this.items,s=this.getField("parentId");if(t[""+s]){for(e=this.getIndex(t[""+s].toString(),!0),i=0;i<e.length;i++)n[e[i]].items||(n[e[i]].items=[]),n=n[e[i]].items;n.push(t)}else this.items.push(t)},e.prototype.open=function(){t.prototype.openHamburgerMenu.call(this)},e.prototype.close=function(){t.prototype.closeHamburgerMenu.call(this)},qM([jt("Horizontal")],e.prototype,"orientation",void 0),qM([jt("")],e.prototype,"target",void 0),qM([jt(null)],e.prototype,"template",void 0),qM([jt(!1)],e.prototype,"enableScrolling",void 0),qM([jt(!1)],e.prototype,"hamburgerMode",void 0),qM([jt("Menu")],e.prototype,"title",void 0),qM([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),qM([Bt({itemId:"id",text:"text",parentId:"parentId",iconCss:"iconCss",url:"url",separator:"separator",children:"items"},OI)],e.prototype,"fields",void 0),e=qM([Ft],e)}(PI),JM=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$M=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},tS="e-tab",eS="e-tab-header",iS="e-content",nS="e-nested",sS="e-item",rS="e-template",oS="e-rtl",aS="e-active",lS="e-disable",hS="e-hidden",cS="e-focused",dS="e-icons",pS="e-icon",uS="e-icon-tab",gS="e-close-icon",mS="e-close-show",fS="e-tab-text",yS="e-indicator",vS="e-tab-wrap",bS="e-text-wrap",CS="e-tab-icon",IS="e-toolbar-items",MS="e-toolbar-item",SS="e-toolbar-pop",xS="e-toolbar-popup",wS="e-progress",DS="e-overlay",ES="e-vertical-tab",TS="e-vertical",AS="e-vertical-left",NS="e-vertical-right",LS="e-horizontal-bottom",OS="e-fill-mode",kS="tabitem_",zS="e-reorder-active-item",PS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return JM(e,t),$M([jt("SlideLeftIn")],e.prototype,"effect",void 0),$M([jt(600)],e.prototype,"duration",void 0),$M([jt("ease")],e.prototype,"easing",void 0),e}(re),jS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return JM(e,t),$M([Bt({effect:"SlideLeftIn",duration:600,easing:"ease"},PS)],e.prototype,"previous",void 0),$M([Bt({effect:"SlideRightIn",duration:600,easing:"ease"},PS)],e.prototype,"next",void 0),e}(re),BS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return JM(e,t),$M([jt("")],e.prototype,"text",void 0),$M([jt("")],e.prototype,"iconCss",void 0),$M([jt("left")],e.prototype,"iconPosition",void 0),e}(re),HS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return JM(e,t),$M([Bt({},BS)],e.prototype,"header",void 0),$M([jt(null)],e.prototype,"headerTemplate",void 0),$M([jt("")],e.prototype,"content",void 0),$M([jt("")],e.prototype,"cssClass",void 0),$M([jt(!1)],e.prototype,"disabled",void 0),$M([jt(!0)],e.prototype,"visible",void 0),$M([jt()],e.prototype,"id",void 0),$M([jt(-1)],e.prototype,"tabIndex",void 0),e}(re),RS=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.show={},n.hide={},n.maxHeight=0,n.title="Close",n.isInteracted=!1,n.lastIndex=0,n.isAdd=!1,n.isIconAlone=!1,n.draggableItems=[],n.resizeContext=n.refreshActiveTabBorder.bind(n),n.keyConfigs={tab:"tab",home:"home",end:"end",enter:"enter",space:"space",delete:"delete",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"},n}return JM(e,t),e.prototype.destroy=function(){if((this.isReact||this.isAngular)&&this.clearTemplate(),y(this.tbObj)||(this.tbObj.destroy(),this.tbObj=null),this.unWireEvents(),this.element.removeAttribute("aria-disabled"),this.expTemplateContent(),this.isTemplate){var e=ct(".e-tab > ."+iS,this.element);this.element.classList.remove(rS),y(e)||(e.innerHTML=this.cnt)}else for(;this.element.firstElementChild;)lt(this.element.firstElementChild);if(this.btnCls&&(this.btnCls=null),this.hdrEle=null,this.cntEle=null,this.tbItems=null,this.tbItem=null,this.tbPop=null,this.prevItem=null,this.popEle=null,this.bdrLine=null,this.content=null,this.dragItem=null,this.cloneElement=null,this.draggingItems=[],this.draggableItems&&this.draggableItems.length>0){for(var i=0;i<this.draggableItems.length;i++)this.draggableItems[i].destroy(),this.draggableItems[i]=null;this.draggableItems=[]}t.prototype.destroy.call(this),this.trigger("destroyed")},e.prototype.refresh=function(){this.isReact&&this.clearTemplate(),t.prototype.refresh.call(this),this.isReact&&this.renderReactTemplates()},e.prototype.refreshOverflow=function(){y(this.tbObj)||this.tbObj.refreshOverflow()},e.prototype.preRender=function(){var t=ut(this.element,"."+iS);this.prevIndex=0,this.isNested=!1,this.isPopup=!1,this.initRender=!0,this.isSwiped=!1,this.itemIndexArray=[],this.templateEle=[],this.allowDragAndDrop&&(this.dragArea=y(this.dragArea)?"#"+this.element.id+" ."+eS:this.dragArea),y(t)||(t.parentElement.classList.add(nS),this.isNested=!0);var e=G.info.name,i="msie"===e?"e-ie":"edge"===e?"e-edge":"safari"===e?"e-safari":"";gt(this.element,{width:S(this.width),height:S(this.height)}),this.setCssClass(this.element,this.cssClass,!0),ht(this.element,{"aria-disabled":"false"}),this.setCssClass(this.element,i,!0),this.updatePopAnimationConfig()},e.prototype.render=function(){var t=this;this.btnCls=this.createElement("span",{className:dS+" "+gS,attrs:{title:this.title}}),this.tabId=this.element.id.length>0?"-"+this.element.id:Bi(),this.renderContainer(),this.wireEvents(),this.initRender=!1,this.isReact&&this.portals&&this.portals.length>0&&this.renderReactTemplates(function(){t.refreshOverflow(),t.selectingContent(t.selectedItem,t.isInteracted),t.refreshActiveBorder()})},e.prototype.renderContainer=function(){var t=this.element;if(this.items.forEach(function(t,e){y(t.id)&&!y(t.setProperties)&&t.setProperties({id:kS+e.toString()},!0)}),this.items.length>0&&0===t.children.length)t.appendChild(this.createElement("div",{className:iS})),this.setOrientation(this.headerPlacement,this.createElement("div",{className:eS})),this.isTemplate=!1;else if(this.element.children.length>0){this.isTemplate=!0,t.classList.add(rS);var e=t.querySelector("."+eS);e&&"Bottom"===this.headerPlacement&&this.setOrientation(this.headerPlacement,e)}if(!y(ct("."+eS,this.element))&&!y(ct("."+iS,this.element))){if(this.renderHeader(),this.tbItems=ct("."+eS+" ."+IS,this.element),y(this.tbItems)||Xt(this.tbItems,{selector:".e-tab-wrap"}),this.renderContent(),dt("."+MS,this.element).length>0){this.tbItems=ct("."+eS+" ."+IS,this.element),this.bdrLine=this.createElement("div",{className:yS+" "+hS+" e-ignore"});var i=ct("."+this.scrCntClass,this.tbItems);y(i)?this.tbItems.insertBefore(this.bdrLine,this.tbItems.firstChild):i.insertBefore(this.bdrLine,i.firstChild),this.setContentHeight(!0),this.select(this.selectedItem)}this.setRTL(this.enableRtl)}},e.prototype.renderHeader=function(){var t=this,e=this.headerPlacement,i=[];if(this.hdrEle=this.getTabHeader(),this.addVerticalClass(),this.isTemplate){this.element.children.length>1&&this.element.children[1].classList.contains(eS)&&this.setProperties({headerPlacement:"Bottom"},!0);for(var n=this.hdrEle.children.length,s=[],r=0;r<n;r++)s.push(this.hdrEle.children.item(r));if(n>0){var o=this.createElement("div",{className:"e-items"});this.hdrEle.appendChild(o),s.forEach(function(e,i){t.lastIndex=i;var n={className:sS,id:sS+t.tabId+"_"+i},s=t.createElement("span",{className:fS,attrs:{role:"presentation"}}).outerHTML,r=t.createElement("div",{className:bS,innerHTML:s+t.btnCls.outerHTML}).outerHTML,a=t.createElement("div",{className:vS,innerHTML:r,attrs:{role:"tab",tabIndex:"-1","aria-selected":"false","aria-controls":iS+t.tabId+"_"+i,"aria-disabled":"false"}});a.querySelector("."+fS).appendChild(e),o.appendChild(t.createElement("div",n)),dt("."+sS,o)[i].appendChild(a)})}}else i=this.parseObject(this.items,0);this.tbObj=new yM({width:"Left"===e||"Right"===e?"auto":"100%",height:"Left"===e||"Right"===e?"100%":"auto",overflowMode:this.overflowMode,items:0!==i.length?i:[],clicked:this.clickHandler.bind(this),scrollStep:this.scrollStep,enableHtmlSanitizer:this.enableHtmlSanitizer,cssClass:this.cssClass}),this.tbObj.isStringTemplate=!0,this.tbObj.createElement=this.createElement,this.tbObj.appendTo(this.hdrEle),ht(this.hdrEle,{role:"tablist"}),y(this.element.getAttribute("aria-label"))?y(this.element.getAttribute("aria-labelledby"))||(this.hdrEle.setAttribute("aria-labelledby",this.element.getAttribute("aria-labelledby")),this.element.removeAttribute("aria-labelledby")):(this.hdrEle.setAttribute("aria-label",this.element.getAttribute("aria-label")),this.element.removeAttribute("aria-label")),this.setCloseButton(this.showCloseButton);var a=this.tbObj.element.querySelector("."+IS);y(a)||(y(a.id)||""===a.id)&&(a.id=this.element.id+"_tab_header_items")},e.prototype.createContentElement=function(t){var e=this.createElement("div",{id:iS+this.tabId+"_"+t,className:sS,attrs:{role:"tabpanel","aria-labelledby":sS+this.tabId+"_"+t}});return(-1!==["Dynamic","Demand"].indexOf(this.loadOn)||"Init"===this.loadOn&&t===this.selectedItem)&&tt([e],aS),e},e.prototype.renderContent=function(){this.cntEle=ct("."+iS,this.element);var t=dt("."+MS,this.element);if(this.isTemplate){this.cnt=this.cntEle.children.length>0?this.cntEle.innerHTML:"";for(var e=this.cntEle.children,i=0;i<t.length;i++)e.length-1>=i&&(tt([e.item(i)],sS),ht(e.item(i),{role:"tabpanel","aria-labelledby":sS+this.tabId+"_"+i}),e.item(i).id=iS+this.tabId+"_"+i)}else if(dt("."+MS,this.element).length>0)if("Init"===this.loadOn)for(i=0;i<this.itemIndexArray.length;i++)this.itemIndexArray[i]&&this.cntEle.appendChild(this.createContentElement(Number(this.extIndex(this.itemIndexArray[i]))));else"Dynamic"===this.loadOn&&this.cntEle.appendChild(this.createContentElement(this.selectedItem>0?this.selectedItem:Number(this.extIndex(this.itemIndexArray[0]))))},e.prototype.reRenderItems=function(){this.renderContainer(),y(this.cntEle)||this.bindSwipeEvents()},e.prototype.parseObject=function(t,e){var i=this,n=Array.prototype.slice.call(dt(".e-tab-header ."+MS,this.element)),s=this.lastIndex;!this.isReplace&&n.length>0&&(s=this.getMaxIndicesFromItems(n));var r,o=[],a=[];return t.forEach(function(t,l){var h=y(t.header)||y(t.header.iconPosition)?"":t.header.iconPosition,c=y(t.header)||y(t.header.iconCss)?"":t.header.iconCss;if(y(t.headerTemplate)&&(y(t.header)||y(t.header.text)||0===t.header.text.length&&""===c))a.push(l);else{var d,p=t.headerTemplate||t.header.text;"string"==typeof p&&i.enableHtmlSanitizer&&(p=Yi.sanitize(p)),i.isReplace&&!y(i.tbId)&&""!==i.tbId?(d=parseInt(i.tbId.substring(i.tbId.lastIndexOf("_")+1),10),i.tbId=""):d=e+l,i.lastIndex=0===n.length?l:i.isReplace?d:s+1+l;var u=t.disabled?" "+lS+" "+DS:"",g=!1===t.visible?" "+hS:"";r=i.createElement("div",{className:fS,attrs:{role:"presentation"}});var m=p instanceof Object?p.outerHTML:p,f=!y(m)&&""!==m;y(p.tagName)?i.headerTextCompile(r,p,l):r.appendChild(p);var v=i.createElement("span",{className:dS+" "+CS+" "+pS+"-"+h+" "+c}),b=i.createElement("div",{className:bS});b.appendChild(r),""!==p&&void 0!==p&&""!==c?("left"===h||"top"===h?b.insertBefore(v,b.firstElementChild):b.appendChild(v),i.isIconAlone=!1):(""===c?r:v)===v&&(at(r),b.appendChild(v),i.isIconAlone=!0);var C=y(t.tabIndex)?"-1":t.tabIndex.toString(),I=t.disabled?{role:"tab","aria-disabled":"true"}:{tabIndex:C,"data-tabindex":C,role:"tab","aria-selected":"false","aria-disabled":"false"};b.appendChild(i.btnCls.cloneNode(!0));var M=i.createElement("div",{className:vS,attrs:I});M.appendChild(b),i.itemIndexArray instanceof Array&&i.itemIndexArray.splice(e+l,0,sS+i.tabId+"_"+i.lastIndex);var S={htmlAttributes:{id:sS+i.tabId+"_"+i.lastIndex,"data-id":t.id},template:M};S.cssClass=(void 0!==t.cssClass?t.cssClass:" ")+" "+u+" "+g+" "+(""!==c?"e-i"+h:"")+" "+(f?"":pS),"top"!==h&&"bottom"!==h||i.element.classList.add("e-vertical-icon"),o.push(S),l++}}),this.isAdd||a.forEach(function(t){i.items.splice(t,1)}),this.isIconAlone?this.element.classList.add(uS):this.element.classList.remove(uS),o},e.prototype.removeActiveClass=function(){var t=this.getTabHeader();if(t){var e=dt("."+MS+"."+aS,t);[].slice.call(e).forEach(function(t){return t.classList.remove(aS)}),[].slice.call(e).forEach(function(t){return t.firstElementChild.setAttribute("aria-selected","false")})}},e.prototype.checkPopupOverflow=function(t){this.tbPop=ct("."+SS,this.element);var e=ct(".e-hor-nav",this.element),i=ct("."+IS,this.element),n=i.lastChild,s=!1;return(!this.isVertical()&&(this.enableRtl&&e.offsetLeft+e.offsetWidth>i.offsetLeft||!this.enableRtl&&e.offsetLeft<i.offsetWidth)||this.isVertical()&&e.offsetTop<n.offsetTop+n.offsetHeight)&&(s=!0),s&&(t.classList.add(xS),this.tbPop.insertBefore(t,dt("."+xS,this.tbPop)[0])),!0},e.prototype.popupHandler=function(t){var e=t.querySelector(".e-ripple-element");y(e)||(e.outerHTML="",t.querySelector("."+vS).classList.remove("e-ripple")),this.tbItem=dt("."+IS+" ."+MS,this.hdrEle);var i=this.tbItem[this.tbItem.length-1];if(0!==this.tbItem.length){if(t.classList.remove(xS),t.removeAttribute("style"),this.tbItems.appendChild(t),this.actEleId=t.id,this.checkPopupOverflow(i)){var n=this.tbItems.lastChild.previousElementSibling;this.checkPopupOverflow(n)}this.isPopup=!0}return dt("."+MS,this.tbItems).length-1},e.prototype.setCloseButton=function(t){var e=ct("."+eS,this.element);!0===t?e.classList.add(mS):e.classList.remove(mS),this.refreshOverflow(),this.refreshActiveTabBorder()},e.prototype.prevCtnAnimation=function(t,e){this.enableRtl||this.element.classList.contains(oS);return this.isPopup||t<=e?"SlideLeftIn"===this.animation.previous.effect?{name:"SlideLeftOut",duration:this.animation.previous.duration,timingFunction:this.animation.previous.easing}:null:"SlideRightIn"===this.animation.next.effect?{name:"SlideRightOut",duration:this.animation.next.duration,timingFunction:this.animation.next.easing}:null},e.prototype.triggerPrevAnimation=function(t,e){var i=this,n=this.prevCtnAnimation(e,this.selectedItem);y(n)?t.classList.remove(aS):(n.begin=function(){gt(t,{position:"absolute"}),t.classList.add(wS),t.classList.add("e-view")},n.end=function(){t.style.display="none",t.classList.remove(aS),t.classList.remove(wS),t.classList.remove("e-view"),gt(t,{display:"",position:""}),0!==t.childNodes.length||i.isTemplate||at(t)},new qt(n).animate(t))},e.prototype.triggerAnimation=function(t,e){var i,n=this,s=this.prevIndex;[].slice.call(this.element.querySelector("."+iS).children).forEach(function(t){t.id===n.prevActiveEle&&(i=t)});var r=this.tbItem[s],o=this.getTrgContent(this.cntEle,this.extIndex(t));if(y(i)&&!y(r)){var a=this.extIndex(r.id);i=this.getTrgContent(this.cntEle,a)}y(o)||(this.prevActiveEle=o.id);var l=y(this.animation)||y(this.animation.next.effect)||y(this.animation.previous.effect)||"None"===this.animation.previous.effect||"None"===this.animation.next.effect;if(this.initRender||!1===e||l)i&&i!==o&&i.classList.remove(aS);else{var h,c=ct("."+iS,this.element);if(this.prevIndex>this.selectedItem&&!this.isPopup){var d=this.animation.previous.effect;h={name:"None"===d?"":"SlideLeftIn"!==d?d:"SlideLeftIn",duration:0===this.animation.previous.duration&&"Enable"===te?600:this.animation.previous.duration,timingFunction:this.animation.previous.easing}}else if(this.isPopup||this.prevIndex<this.selectedItem||this.prevIndex===this.selectedItem){var p=this.animation.next.effect;h={name:"None"===p?"":"SlideRightIn"!==p?p:"SlideRightIn",duration:0===this.animation.next.duration&&"Enable"===te?600:this.animation.next.duration,timingFunction:this.animation.next.easing}}h.progress=function(){c.classList.add(wS),n.setActiveBorder()},h.end=function(){c.classList.remove(wS),o.classList.add(aS)},this.initRender||y(i)||this.triggerPrevAnimation(i,s),this.isPopup=!1,""===h.name?o.classList.add(aS):new qt(h).animate(o)}},e.prototype.keyPressed=function(t){var e=ut(t,"."+eS+" ."+MS),i=this.getEleIndex(e);!y(this.popEle)&&t.classList.contains("e-hor-nav")?this.popEle.classList.contains("e-popup-open")?this.popObj.hide(this.hide):this.popObj.show(this.show):t.classList.contains("e-scroll-nav")?t.click():y(e)||!1!==e.classList.contains(aS)||(this.selectTab(i,null,!0),y(this.popEle)||this.popObj.hide(this.hide))},e.prototype.getTabHeader=function(){if(!y(this.element)){var t=[].slice.call(this.element.children).filter(function(t){return t.classList.contains(eS)});if(t.length>0)return t[0];var e=[].slice.call(this.element.children).filter(function(t){return!t.classList.contains("blazor-template")})[0];if(e)return[].slice.call(e.children).filter(function(t){return t.classList.contains(eS)})[0]}},e.prototype.getEleIndex=function(t){return Array.prototype.indexOf.call(dt("."+MS,this.getTabHeader()),t)},e.prototype.extIndex=function(t){return t.replace(sS+this.tabId+"_","")},e.prototype.getMaxIndicesFromItems=function(t){var e=this,i=[];return t.forEach(function(t){i.push(e.getIndexFromEle(t.id))}),Math.max.apply(Math,i)},e.prototype.expTemplateContent=function(){var t=this;this.templateEle.forEach(function(e){y(t.element.querySelector(e))||(document.body.appendChild(t.element.querySelector(e)).style.display="none")})},e.prototype.templateCompile=function(t,e,i){var n=this.createElement("div");this.compileElement(n,e,"content",i),0!==n.childNodes.length&&t.appendChild(n),this.isReact&&this.renderReactTemplates()},e.prototype.compileElement=function(t,e,i,n){var s,r;"string"==typeof e?(e=e.trim(),this.isVue?s=Hi(this.enableHtmlSanitizer?Yi.sanitize(e):e):t.innerHTML=this.enableHtmlSanitizer?Yi.sanitize(e):e):s=Hi(e),y(s)||(r=s({},this,i)),!y(s)&&r.length>0&&[].slice.call(r).forEach(function(e){t.appendChild(e)})},e.prototype.headerTextCompile=function(t,e,i){this.compileElement(t,e,"headerTemplate",i)},e.prototype.getContent=function(t,e,i,n){var s;if("string"==typeof(e=y(e)?"":e)||y(e.innerHTML))if("string"==typeof e&&this.enableHtmlSanitizer&&(e=Yi.sanitize(e)),"."===e[0]||"#"===e[0])if(document.querySelectorAll(e).length){var r=document.querySelector(e);s=r.outerHTML.trim(),"clone"===i?t.appendChild(r.cloneNode(!0)):(t.appendChild(r),r.style.display="")}else this.templateCompile(t,e,n);else this.templateCompile(t,e,n);else t.appendChild(e);y(s)||-1===this.templateEle.indexOf(e.toString())&&this.templateEle.push(e.toString())},e.prototype.getTrgContent=function(t,e){return this.element.classList.contains(nS)?ct("."+nS+"> ."+iS+" > #"+iS+this.tabId+"_"+e,this.element):this.findEle(t.children,iS+this.tabId+"_"+e)},e.prototype.findEle=function(t,e){for(var i,n=0;n<t.length;n++)if(t[n].id===e){i=t[n];break}return i},e.prototype.isVertical=function(){var t="Left"===this.headerPlacement||"Right"===this.headerPlacement;return this.scrCntClass=t?"e-vscroll-content":"e-hscroll-content",t},e.prototype.addVerticalClass=function(){if(this.isVertical()){var t="Left"===this.headerPlacement?AS:NS;tt([this.hdrEle],[TS,t]),this.element.classList.contains(nS)?tt([this.hdrEle],[ES,t]):tt([this.element],[ES,t])}"Bottom"===this.headerPlacement&&tt([this.hdrEle],[LS])},e.prototype.updatePopAnimationConfig=function(){this.show={name:this.isVertical()?"FadeIn":"SlideDown",duration:100},this.hide={name:this.isVertical()?"FadeOut":"SlideUp",duration:100}},e.prototype.changeOrientation=function(t){this.setOrientation(t,this.hdrEle);var e=this.hdrEle.querySelector("."+aS),i=!!this.hdrEle.classList.contains(TS);et([this.element],[ES]),et([this.hdrEle],[TS,AS,NS]),i!==this.isVertical()&&(this.changeToolbarOrientation(),!y(e)&&e.classList.contains(xS)&&this.popupHandler(e)),this.addVerticalClass(),this.setActiveBorder(),this.focusItem()},e.prototype.focusItem=function(){var t=ct(" #"+sS+this.tabId+"_"+this.selectedItem,this.hdrEle);y(t)||t.firstElementChild.focus()},e.prototype.changeToolbarOrientation=function(){this.tbObj.setProperties({height:this.isVertical()?"100%":"auto",width:this.isVertical()?"auto":"100%"},!0),this.tbObj.changeOrientation(),this.updatePopAnimationConfig()},e.prototype.setOrientation=function(t,e){var i=Array.prototype.indexOf.call(this.element.children,e),n=Array.prototype.indexOf.call(this.element.children,this.element.querySelector("."+iS));"Bottom"===t&&n>i?this.element.appendChild(e):(et([e],[LS]),this.element.insertBefore(e,ct("."+iS,this.element)))},e.prototype.setCssClass=function(t,e,i){if(""!==e&&!y(e))for(var n=e.split(" "),s=0;s<n.length;s++)i?t.classList.add(n[s]):t.classList.remove(n[s])},e.prototype.loadContentInitMode=function(t){if(t&&"Init"===this.loadOn)for(var e=0;e<this.items.length;e++)this.cntEle.children.item(e)&&this.getContent(this.cntEle.children.item(e),this.items[e].content,"render",e)},e.prototype.loadContentElement=function(){if(!this.isTemplate){var t=this.cntEle.children.item(0);this.loadContentInitMode(t)}},e.prototype.setContentHeight=function(t){if(this.element.classList.contains(OS)&&et([this.element],[OS]),!y(this.cntEle)){var e=this.getTabHeader();if("None"===this.heightAdjustMode){if(this.loadContentElement(),"auto"===this.height)return;this.isVertical()||gt(this.cntEle,{height:this.element.clientHeight-e.offsetHeight+"px"})}else if("Fill"===this.heightAdjustMode)tt([this.element],[OS]),gt(this.element,{height:"100%"}),this.loadContentElement(),this.cntEle.style.height="calc(100% - "+this.hdrEle.offsetHeight+"px)";else if("Auto"===this.heightAdjustMode){if(!0===this.isTemplate)for(var i=dt("."+iS+" > ."+sS,this.element),n=0;n<i.length;n++)i[n].style.display="block",i[n].style.visibility="visible",this.maxHeight=Math.max(this.maxHeight,this.getHeight(i[n])),i[n].style.removeProperty("display"),i[n].style.removeProperty("visibility");else{this.cntEle=ct("."+iS,this.element),!0===t&&"Demand"===this.loadOn&&this.cntEle.appendChild(this.createContentElement(Number(this.extIndex(this.itemIndexArray[0]))));var s=this.cntEle.children.item(0);for(n=0;n<this.items.length;n++)for(this.getContent(s,this.items[n].content,"clone",n),this.maxHeight=Math.max(this.maxHeight,this.getHeight(s));s.firstChild;)s.removeChild(s.firstChild);(this.isReact||this.isAngular||this.isVue)&&this.clearTemplate(["content"]),this.templateEle=[],"Demand"===this.loadOn&&this.getContent(s,this.items[0].content,"render",0),this.loadContentInitMode(s),this.prevIndex!==this.selectedItem&&s.classList.remove(aS)}gt(this.cntEle,{height:this.maxHeight+"px"})}else this.loadContentElement(),gt(this.cntEle,{height:"auto"})}},e.prototype.getHeight=function(t){var e=window.getComputedStyle(t);return t.offsetHeight+parseFloat(e.getPropertyValue("padding-top"))+parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("margin-top"))+parseFloat(e.getPropertyValue("margin-bottom"))},e.prototype.setActiveBorder=function(){var t=this.getTabHeader(),e=ct("."+MS+"."+aS,t);if(!y(e)){this.reorderActiveTab?t&&t.classList.remove(zS):(e.classList.contains(xS)&&!this.bdrLine.classList.contains(hS)&&this.bdrLine.classList.add(hS),t&&!t.classList.contains(zS)&&t.classList.add(zS));var i=ut(e,"."+tS);if(this.element===i){this.tbItems=ct("."+IS,t);var n=ct("."+yS,t),s=ct("."+IS+" ."+this.scrCntClass,t);if(this.isVertical()){gt(n,{left:"",right:""}),gt(n,0!==(y(s)?this.tbItems.offsetHeight:s.offsetHeight)?{top:e.offsetTop+"px",height:e.offsetHeight+"px"}:{top:0,height:0})}else{if("MultiRow"===this.overflowMode)gt(n,{top:("Bottom"===this.headerPlacement?e.offsetTop:e.offsetHeight+e.offsetTop)+"px",height:""});else gt(n,{top:"",height:""});var r=y(s)?this.tbItems.offsetWidth:s.offsetWidth;gt(n,0!==r?{left:e.offsetLeft+"px",right:r-(e.offsetLeft+e.offsetWidth)+"px"}:{left:"auto",right:"auto"})}y(this.bdrLine)||e.classList.contains(xS)||this.bdrLine.classList.remove(hS)}}},e.prototype.setActive=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.tbItem=dt("."+MS,this.getTabHeader());var n=this.tbItem[t];if(!(t<0||isNaN(t)||0===this.tbItem.length||!y(n)&&n.classList.contains(lS)))if(t>=0&&!e&&(this.allowServerDataBinding=!1,this.setProperties({selectedItem:t},!0),this.allowServerDataBinding=!0,this.initRender||this.serverDataBind()),n.classList.contains(aS))this.setActiveBorder();else{this.isTemplate||ht(n.firstElementChild,{"aria-controls":iS+this.tabId+"_"+this.extIndex(n.id)});var s=n.id;this.removeActiveClass(),n.classList.add(aS),n.firstElementChild.setAttribute("aria-selected","true");var r=Number(this.extIndex(s));if(y(this.prevActiveEle)&&(this.prevActiveEle=iS+this.tabId+"_"+r),this.isTemplate){if(ct("."+iS,this.element).children.length>0){var o=this.findEle(ct("."+iS,this.element).children,iS+this.tabId+"_"+r);y(o)||o.classList.add(aS),this.triggerAnimation(s,this.enableAnimation)}}else{for(this.cntEle=ct(".e-tab > ."+iS,this.element);"Dynamic"===this.loadOn&&this.cntEle.firstElementChild;)this.cntEle.removeChild(this.cntEle.firstElementChild);var a=this.getTrgContent(this.cntEle,this.extIndex(s));if(y(a)){this.cntEle.appendChild(this.createElement("div",{id:iS+this.tabId+"_"+this.extIndex(s),className:sS+" "+aS,attrs:{role:"tabpanel","aria-labelledby":sS+this.tabId+"_"+this.extIndex(s)}}));var l=this.getTrgContent(this.cntEle,this.extIndex(s)),h=Array.prototype.indexOf.call(this.itemIndexArray,s);this.getContent(l,this.items[h].content,"render",h)}else a.classList.add(aS);this.triggerAnimation(s,this.enableAnimation)}if(this.setActiveBorder(),this.refreshItemVisibility(n),!this.initRender&&!e){var c={previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:n,selectedIndex:t,selectedContent:ct("#"+iS+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwiped,isInteracted:i,preventFocus:!1};this.trigger("selected",c,function(t){t.preventFocus||n.firstElementChild.focus()})}}},e.prototype.setItems=function(t){this.isReplace=!0,this.tbItems=ct("."+IS,this.getTabHeader()),this.tbObj.items=this.parseObject(t,0),this.tbObj.dataBind(),this.isReplace=!1},e.prototype.setRTL=function(t){this.tbObj.enableRtl=t,this.tbObj.dataBind(),this.setCssClass(this.element,oS,t),this.refreshActiveBorder()},e.prototype.refreshActiveBorder=function(){y(this.bdrLine)||this.bdrLine.classList.add(hS),this.setActiveBorder()},e.prototype.showPopup=function(t){var e=ct(".e-popup.e-toolbar-pop",this.hdrEle);if(e&&e.classList.contains("e-popup-close")){var i=e&&e.ej2_instances[0];i.position.X="Left"===this.headerPlacement||this.element.classList.contains(oS)?"left":"right",i.dataBind(),i.show(t)}},e.prototype.bindDraggable=function(){var t=this;if(this.allowDragAndDrop){var e=this.element.querySelector("."+eS);if(e)Array.prototype.slice.call(e.querySelectorAll("."+MS)).forEach(function(e){t.initializeDrag(e)})}},e.prototype.bindSwipeEvents=function(){"None"!==this.swipeMode&&(this.touchModule=new ci(this.cntEle,{swipe:this.swipeHandler.bind(this)}))},e.prototype.wireEvents=function(){this.bindDraggable(),window.addEventListener("resize",this.resizeContext),K.add(this.element,"mouseover",this.hoverHandler,this),K.add(this.element,"keydown",this.spaceKeyDown,this),y(this.cntEle)||this.bindSwipeEvents(),this.keyModule=new si(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}),this.tabKeyModule=new si(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:{openPopup:"shift+f10",tab:"tab",shiftTab:"shift+tab"},eventName:"keydown"})},e.prototype.unWireEvents=function(){y(this.keyModule)||this.keyModule.destroy(),y(this.tabKeyModule)||this.tabKeyModule.destroy(),y(this.cntEle)||y(this.touchModule)||(this.touchModule.destroy(),this.touchModule=null),window.removeEventListener("resize",this.resizeContext),K.remove(this.element,"mouseover",this.hoverHandler),K.remove(this.element,"keydown",this.spaceKeyDown),this.element.classList.remove(oS),this.element.classList.remove(cS)},e.prototype.clickHandler=function(t){this.element.classList.remove(cS);var e=t.originalEvent.target,i=ut(e,"."+MS),n=this.getEleIndex(i);e.classList.contains(gS)?this.removeTab(n):this.isVertical()&&ut(e,".e-hor-nav")?this.showPopup(this.show):(this.isPopup=!1,y(i)||n===this.selectedItem||this.selectTab(n,t.originalEvent,!0))},e.prototype.swipeHandler=function(t){if(!(t.velocity<3&&y(t.originalEvent.changedTouches)||"Touch"===this.swipeMode&&("mouseup"===t.originalEvent.type||"mouseleave"===t.originalEvent.type)||"Mouse"===this.swipeMode&&"touchend"===t.originalEvent.type||"None"===this.swipeMode)){this.isNested&&this.element.setAttribute("data-swipe","true");var e=this.element.querySelector('[data-swipe="true"]');if(e)e.removeAttribute("data-swipe");else{if(this.isSwiped=!0,"Right"===t.swipeDirection&&0!==this.selectedItem){for(var i=this.selectedItem-1;i>=0;i--)if(!this.tbItem[i].classList.contains(hS)){this.selectTab(i,null,!0);break}}else if("Left"===t.swipeDirection&&this.selectedItem!==dt("."+MS,this.element).length-1)for(var n=this.selectedItem+1;n<this.tbItem.length;n++)if(!this.tbItem[n].classList.contains(hS)){this.selectTab(n,null,!0);break}this.isSwiped=!1}}},e.prototype.spaceKeyDown=function(t){(32===t.keyCode&&32===t.which||35===t.keyCode&&35===t.which)&&(y(ut(t.target,"."+eS))||t.preventDefault())},e.prototype.keyHandler=function(t){if(!this.element.classList.contains(lS)){this.element.classList.add(cS);var e=t.target,i=this.getTabHeader(),n=ct("."+aS,i);this.popEle=ct("."+SS,i),y(this.popEle)||(this.popObj=this.popEle.ej2_instances[0]);var s=ut(document.activeElement,"."+MS),r=ut(e,"."+MS);switch(t.action){case"space":case"enter":if(e.parentElement.classList.contains(lS))return;if("enter"===t.action&&e.classList.contains("e-hor-nav")){this.showPopup(this.show);break}this.keyPressed(e);break;case"tab":case"shiftTab":e.classList.contains(vS)&&!1===ut(e,"."+MS).classList.contains(aS)&&e.setAttribute("tabindex",e.getAttribute("data-tabindex")),this.popObj&&nt(this.popObj.element)&&this.popObj.hide(this.hide),y(n)||"-1"!==n.children.item(0).getAttribute("tabindex")||n.children.item(0).setAttribute("tabindex","0");break;case"moveLeft":case"moveRight":y(s)||this.refreshItemVisibility(s);break;case"openPopup":!y(t.target)&&t.target.classList.contains(vS)&&t.preventDefault(),!y(this.popEle)&&this.popEle.classList.contains("e-popup-close")&&this.popObj.show(this.show);break;case"delete":if(!0===this.showCloseButton&&!y(r)){var o=r.nextSibling;!y(o)&&o.classList.contains(MS)&&o.firstElementChild.focus(),this.removeTab(this.getEleIndex(r))}this.setActiveBorder()}}},e.prototype.refreshItemVisibility=function(t){var e=ct("."+this.scrCntClass,this.tbItems);if(!this.isVertical()&&!y(e)){var i=ct(".e-hscroll-bar",this.tbItems),n=i.scrollLeft,s=n+i.offsetWidth,r=t.offsetLeft,o=t.offsetWidth,a=t.offsetLeft+t.offsetWidth;if(n<r&&s<a){var l=s-r;i.scrollLeft=n+(o-l)}else if(n>r&&s>a){l=a-n;i.scrollLeft=n-(o-l)}}},e.prototype.getIndexFromEle=function(t){return parseInt(t.substring(t.lastIndexOf("_")+1),10)},e.prototype.hoverHandler=function(t){var e=t.target;!y(e.classList)&&e.classList.contains(gS)&&e.setAttribute("title",new ri("tab",{closeButtonTitle:this.title},this.locale).getConstant("closeButtonTitle"))},e.prototype.evalOnPropertyChangeItems=function(t,e){var i=this;if(t.items instanceof Array&&e.items instanceof Array)if(this.lastIndex=0,y(this.tbObj))this.reRenderItems();else{(this.isReact||this.isAngular)&&this.clearTemplate(),this.setItems(t.items),this.templateEle.length>0&&this.expTemplateContent(),this.templateEle=[];for(var n=ct(".e-tab > ."+iS,this.element);n.firstElementChild;)at(n.firstElementChild);this.select(this.selectedItem),this.draggableItems=[],this.bindDraggable()}else{for(var s=Object.keys(t.items),r=0;r<s.length;r++)for(var o=parseInt(Object.keys(t.items)[r],10),a=Object.keys(t.items[o]),l=0;l<a.length;l++){var h=Object(e.items[o])[a[l]],c=Object(t.items[o])[a[l]],d=this.element.querySelectorAll("."+MS)[o],p=void 0;p=d&&!y(d.id)&&""!==d.id?this.getIndexFromEle(d.id):o;var u=ct("."+IS+" #"+sS+this.tabId+"_"+p,this.element),g=ct("."+iS+" #"+iS+this.tabId+"_"+p,this.element);if("header"===a[l]||"headerTemplate"===a[l]){var m=y(this.items[o].header)||y(this.items[o].header.iconCss)?"":this.items[o].header.iconCss,f=this.items[o].headerTemplate||this.items[o].header.text;if("headerTemplate"===a[l]&&this.clearTabTemplate(u,a[l],MS),""===f&&""===m)this.removeTab(o);else{this.tbId=d.id;var v=[];v.push(this.items[o]),this.items.splice(o,1),this.itemIndexArray.splice(o,1),this.tbObj.items.splice(o,1);var b=u.classList.contains(hS);at(u),this.isReplace=!0,this.addTab(v,o),b&&this.hideTab(o),this.isReplace=!1}}if("content"===a[l]&&!y(g))if(("string"==typeof c||y(c.innerHTML))&&("."===c[0]||"#"===c[0])&&c.length){var C=document.querySelector(c);g.appendChild(C),C.style.display=""}else""===c&&"#"===h[0]?(document.body.appendChild(this.element.querySelector(h)).style.display="none",g.innerHTML=c):this.isAngular||this.isReact?(this.clearTabTemplate(g,a[l],sS),g.innerHTML="",this.templateCompile(g,c,o)):"function"!=typeof c&&(g.innerHTML=c);"cssClass"===a[l]&&(y(u)||(u.classList.remove(h),u.classList.add(c)),y(g)||(g.classList.remove(h),g.classList.add(c))),"disabled"===a[l]&&this.enableTab(o,!0!==c),"visible"===a[l]&&this.hideTab(o,!0!==c)}this.isReact&&this.portals&&this.portals.length>0&&this.renderReactTemplates(function(){i.refreshActiveTabBorder()})}},e.prototype.clearTabTemplate=function(t,e,i){if(this.clearTemplates)if(this.registeredTemplate&&this.registeredTemplate[e])for(var n=this.registeredTemplate,s=0;s<n[e].length;s++){if(!y(o=ut(n[e][s].rootNodes[0],"."+i))&&o===t){this.clearTemplate([e],[n[e][s]]);break}}else if(this.portals&&this.portals.length>0){var r=this.portals;for(s=0;s<r.length;s++){var o;if(!y(o=ut(r[s].containerInfo,"."+i))&&o===t){this.clearTemplate([e],s);break}}}},e.prototype.initializeDrag=function(t){var e=this,i=new Ke(t,{dragArea:this.dragArea,dragTarget:"."+MS,clone:!0,helper:this.helper.bind(this),dragStart:this.itemDragStart.bind(this),drag:function(t){var i,n,s=e.getEleIndex(e.dragItem),r={draggedItem:e.dragItem,event:t.event,target:t.target,droppedItem:t.target.closest("."+MS),clonedElement:e.cloneElement,index:s};if(y(t.target.closest("."+tS))||t.target.closest("."+tS).isEqualNode(e.element)||e.dragArea==="."+eS){if(t.target.closest(e.dragArea)||"Popup"===e.overflowMode?(document.body.style.cursor="",e.dragItem.querySelector("."+vS).style.visibility="hidden",e.cloneElement.classList.contains(hS)&&et([e.cloneElement],hS)):(document.body.style.cursor="not-allowed",tt([e.cloneElement],hS),e.dragItem.classList.contains(hS)&&et([e.dragItem],hS),e.dragItem.querySelector("."+vS).style.visibility="visible"),"Scrollable"===e.overflowMode&&!y(e.element.querySelector(".e-hscroll"))){var o=e.element.querySelector(".e-scroll-right-nav"),a=e.element.querySelector(".e-scroll-left-nav"),l=e.element.querySelector(".e-hscroll-bar");!y(o)&&Math.abs(o.offsetWidth/2+o.offsetLeft)>e.cloneElement.offsetLeft+e.cloneElement.offsetWidth&&(l.scrollLeft-=10),!y(a)&&Math.abs(a.offsetLeft+a.offsetWidth-e.cloneElement.offsetLeft)>a.offsetWidth/2&&(l.scrollLeft+=10)}e.cloneElement.style.pointerEvents="none",n=ut(t.target,"."+MS+".e-draggable");var h=0;"Scrollable"!==e.overflowMode||y(e.element.querySelector(".e-hscroll"))||(h=e.element.querySelector(".e-hscroll-content").offsetWidth),null!=n&&!n.isSameNode(e.dragItem)&&n.closest("."+tS).isSameNode(e.dragItem.closest("."+tS))&&((i=e.getEleIndex(n))<s&&Math.abs(n.offsetLeft+n.offsetWidth-e.cloneElement.offsetLeft)>n.offsetWidth/2&&e.dragAction(n,s,i),i>s&&Math.abs(n.offsetWidth/2)+n.offsetLeft-h<e.cloneElement.offsetLeft+e.cloneElement.offsetWidth&&e.dragAction(n,s,i)),e.droppedIndex=e.getEleIndex(e.dragItem),e.trigger("dragging",r)}else e.trigger("dragging",r)},dragStop:this.itemDragStop.bind(this)});this.draggableItems.push(i)},e.prototype.helper=function(t){return this.cloneElement=this.createElement("div"),t.element&&(this.cloneElement=t.element.cloneNode(!0),tt([this.cloneElement],"e-tab-clone-element"),this.element.querySelector("."+eS).classList.contains(mS)&&tt([this.cloneElement],mS),et([this.cloneElement.querySelector("."+vS)],"e-ripple"),y(this.cloneElement.querySelector(".e-ripple-element"))||lt(this.cloneElement.querySelector(".e-ripple-element")),document.body.appendChild(this.cloneElement)),this.cloneElement},e.prototype.itemDragStart=function(t){var e=this;this.draggingItems=this.items.map(function(t){return t}),this.dragItem=t.element;var i={draggedItem:t.element,event:t.event,target:t.target,droppedItem:null,index:this.getEleIndex(this.dragItem),clonedElement:this.cloneElement,cancel:!1};this.trigger("onDragStart",i,function(i){if(i.cancel){var n=t.element.ej2_instances[0];y(n)||n.intDestroy(t.event),at(e.cloneElement)}else e.removeActiveClass(),tt([e.tbItems.querySelector("."+yS)],hS),e.dragItem.querySelector("."+vS).style.visibility="hidden"})},e.prototype.dragAction=function(t,e,i){if(this.items.length>0){var n=this.draggingItems[e];this.draggingItems.splice(e,1),this.draggingItems.splice(i,0,n)}if("MultiRow"===this.overflowMode&&t.parentNode.insertBefore(this.dragItem,t.nextElementSibling),e>i)if(this.dragItem.parentElement.isSameNode(t.parentElement))this.dragItem.parentNode.insertBefore(this.dragItem,t);else if("Extended"===this.overflowMode)if(t.isSameNode(t.parentElement.lastChild)){var s=this.dragItem.parentNode;t.parentNode.insertBefore(this.dragItem,t),s.insertBefore(t.parentElement.lastChild,s.childNodes[0])}else this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t);else{var r=t.parentElement.lastChild;if(t.isSameNode(r)){s=this.dragItem.parentNode;t.parentNode.insertBefore(this.dragItem,t),s.insertBefore(r,s.childNodes[0])}else this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t)}e<i&&(this.dragItem.parentElement.isSameNode(t.parentElement)?this.dragItem.parentNode.insertBefore(this.dragItem,t.nextElementSibling):"Extended"===this.overflowMode?(this.dragItem.parentElement.appendChild(t.parentElement.firstElementChild),t.parentNode.insertBefore(this.dragItem,t.nextSibling)):(this.dragItem.parentNode.insertBefore(t.parentElement.lastChild,this.dragItem.parentElement.childNodes[0]),t.parentNode.insertBefore(this.dragItem,t)))},e.prototype.itemDragStop=function(t){var e=this;at(this.cloneElement),this.cloneElement=null,this.dragItem.querySelector("."+vS).style.visibility="visible",document.body.style.cursor="";var i={draggedItem:this.dragItem,event:t.event,target:t.target,droppedItem:this.tbItem[this.droppedIndex],clonedElement:null,index:this.droppedIndex,cancel:!1};this.trigger("dragged",i,function(t){t.cancel?e.refresh():e.items.length>0&&e.draggingItems.length>0?(e.items=e.draggingItems,e.selectedItem=y(e.droppedIndex)?e.getEleIndex(e.dragItem):e.droppedIndex,e.refresh()):(e.dragItem.querySelector("."+vS).style.visibility="",et([e.tbItems.querySelector("."+yS)],hS),e.droppedIndex=y(e.droppedIndex)?e.getEleIndex(e.dragItem):e.droppedIndex,e.selectTab(e.droppedIndex,null,!0))}),this.dragItem=null,this.droppedIndex=null},e.prototype.enableTab=function(t,e){var i=dt("."+MS,this.element)[t];y(i)||(!0===e?(i.classList.remove(lS,DS),i.firstElementChild.setAttribute("tabindex",i.firstElementChild.getAttribute("data-tabindex"))):(i.classList.add(lS,DS),i.firstElementChild.removeAttribute("tabindex"),i.classList.contains(aS)&&this.select(t+1)),y(this.items[t])||(this.items[t].disabled=!e,this.dataBind()),i.firstElementChild.setAttribute("aria-disabled",!0===e?"false":"true"))},e.prototype.addTab=function(t,e){var i=this,n={addedItems:t,cancel:!1};if(this.isReplace)this.addingTabContent(t,e);else{for(var s=0,r=t;s<r.length;s++){var o=r[s];o.disabled=o.disabled||!1,o.visible=o.visible||!0}t&&0!==t.length&&this.element&&this.element.classList.contains(hS)&&this.element.classList.remove(hS),this.trigger("adding",n,function(n){n.cancel||i.addingTabContent(t,e)})}this.isReact&&this.renderReactTemplates()},e.prototype.addingTabContent=function(t,e){var i=this,n=0;if(this.hdrEle=ct("."+eS,this.element),y(this.hdrEle))this.items=t,this.reRenderItems(),this.bindDraggable();else{var s=Array.from(dt(".e-tab-header ."+MS,this.element)),r=s.length;if(0!==r&&(n=this.getMaxIndicesFromItems(s)+1),y(e)&&(e=r-1),r<e||e<0||isNaN(e))return;0!==r||y(this.hdrEle)||(this.hdrEle.style.display=""),y(this.bdrLine)||this.bdrLine.classList.add(hS),this.tbItems=ct("."+IS,this.getTabHeader()),this.isAdd=!0;var o=this.parseObject(t,e);this.isAdd=!1;var a,l=0;t.forEach(function(t,s){if(a=t.headerTemplate||t.header.text,y(t.headerTemplate||t.header)||y(a)||0===a.length&&!y(t.header)&&y(t.header.iconCss)||(o[s]&&(y(t.id)&&(t.id=sS+i.tabId+"_"+kS+(n+s).toString()),o[s].htmlAttributes["data-id"]=t.id),i.items.splice(e+l,0,t),l++),!y(t.header)&&!y(t.header.text)&&(i.isTemplate||"Init"===i.loadOn)){var r=n+s,h=i.createElement("div",{id:iS+i.tabId+"_"+r,className:sS,attrs:{role:"tabpanel","aria-labelledby":sS+"_"+r}});i.cntEle.insertBefore(h,i.cntEle.children[e+s]);var c=i.getTrgContent(i.cntEle,r.toString());i.getContent(c,t.content,"render",e)}}),this.tbObj.addItems(o,e),this.isReplace||this.trigger("added",{addedItems:t}),this.selectedItem===e?this.select(e):(this.setActiveBorder(),this.tbItem=dt("."+MS,this.getTabHeader())),this.bindDraggable()}},e.prototype.removeTab=function(t){var e=this,i=dt("."+MS,this.hdrEle)[t];if(!y(i)){var n={removedItem:i,removedIndex:t,cancel:!1};this.trigger("removing",n,function(n){if(!n.cancel){var s=ct("#"+sS+e.tabId+"_"+e.extIndex(i.id),ct("."+IS,e.hdrEle));y(s)||e.clearTabTemplate(s,"headerTemplate",MS),e.tbObj.removeItems(t),e.allowDragAndDrop&&t!==Array.prototype.indexOf.call(e.itemIndexArray,i.id)&&(t=Array.prototype.indexOf.call(e.itemIndexArray,i.id));var r=e.itemIndexArray.indexOf(i.id);e.items.splice(r,1),e.itemIndexArray.splice(r,1),e.refreshActiveBorder();var o=ct("#"+iS+e.tabId+"_"+e.extIndex(i.id),ct("."+iS,e.element));if(y(o)||(e.clearTabTemplate(o,"content",sS),at(o)),e.trigger("removed",n),e.draggableItems&&e.draggableItems.length>0&&(e.draggableItems[t].destroy(),e.draggableItems[t]=null,e.draggableItems.splice(t,1)),i.classList.contains(aS)){t=t>dt("."+MS+":not(."+xS+")",e.element).length-1?t-1:t,e.enableAnimation=!1,e.tbItem=dt("."+MS,e.getTabHeader()),t=e.getSelectingTabIndex(t),t=!isNaN(t)&&t>=0&&e.tbItem.length>t?t:0;var a=e.tbItem[t];if(a){a.classList.contains(hS)&&a.classList.remove(hS);var l=a.firstElementChild;l&&l.hasAttribute("aria-hidden")&&l.removeAttribute("aria-hidden")}e.selectedItem=t,e.select(t)}else t!==e.selectedItem&&(t<e.selectedItem&&(t=e.itemIndexArray.indexOf(e.tbItem[e.selectedItem].id),e.setProperties({selectedItem:t>-1?t:e.selectedItem},!0),e.prevIndex=e.selectedItem),e.tbItem=dt("."+MS,e.getTabHeader()));if(0===dt("."+MS,e.element).length){var h=ct("."+iS,e.element);at(e.hdrEle),at(h)}e.enableAnimation=!0}})}},e.prototype.hideTab=function(t,e){var i,n;t>=0&&t<this.tbItem.length&&(n=this.tbItem[t].getAttribute("id"));var s=this.element.querySelector('[id="'+n+'"]');if(!y(s)){if(y(e)&&(e=!0),this.bdrLine.classList.add(hS),!0===e)if(s.classList.add(hS),0!==(i=dt("."+MS+":not(."+hS+")",this.tbItems)).length&&s.classList.contains(aS)){if(0!==t)for(var r=t-1;r>=0;r--){if(!this.tbItem[r].classList.contains(hS)){this.select(r);break}if(0===r)for(var o=t+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains(hS)){this.select(o);break}}else for(o=t+1;o<this.tbItem.length;o++)if(!this.tbItem[o].classList.contains(hS)){this.select(o);break}}else 0===i.length&&this.element.classList.add(hS);else this.element.classList.remove(hS),i=dt("."+MS+":not(."+hS+")",this.tbItems),s.classList.remove(hS),0===i.length&&this.select(t);this.setActiveBorder(),y(this.items[t])||(this.items[t].visible=!e,this.dataBind()),y(s.firstElementChild)||s.firstElementChild.setAttribute("aria-hidden",""+e),"Popup"===this.overflowMode&&this.refreshOverflow()}},e.prototype.selectTab=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=!1),this.isInteracted=i,this.select(t,e)},e.prototype.select=function(t,e){var i=this,n=this.getTabHeader();this.tbItems=ct("."+IS,n),this.tbItem=dt("."+MS,n),this.content=ct("."+iS,this.element),this.prevItem=this.tbItem[this.prevIndex],y(this.selectedItem)||this.selectedItem<0||this.tbItem.length<=this.selectedItem||isNaN(this.selectedItem)?this.selectedItem=0:this.selectedID=this.extIndex(this.tbItem[this.selectedItem].id);var s=this.tbItem[t];y(s)?this.selectedID="0":this.selectingID=this.extIndex(s.id),y(this.prevItem)||this.prevItem.classList.contains(lS)||this.prevItem.children.item(0).setAttribute("tabindex",this.prevItem.firstElementChild.getAttribute("tabindex"));var r={event:e,previousItem:this.prevItem,previousIndex:this.prevIndex,selectedItem:this.tbItem[this.selectedItem],selectedIndex:this.selectedItem,selectedContent:y(this.content)?null:ct("#"+iS+this.tabId+"_"+this.selectedID,this.content),selectingItem:s,selectingIndex:t,selectingContent:y(this.content)?null:ct("#"+iS+this.tabId+"_"+this.selectingID,this.content),isSwiped:this.isSwiped,isInteracted:this.isInteracted,cancel:!1};this.initRender?this.selectingContent(t,this.isInteracted):this.trigger("selecting",r,function(e){e.cancel||i.selectingContent(t,i.isInteracted)}),this.isInteracted=!1},e.prototype.getSelectingTabIndex=function(t){if(!y(this.tbItem[t])&&(this.tbItem[t].classList.contains(lS)||this.tbItem[t].classList.contains(hS)))for(var e=t+1;e<this.items.length;e++){if(!1===this.items[e].disabled&&!0===this.items[e].visible){t=e;break}t=0}return t},e.prototype.selectingContent=function(t,e){if("number"==typeof t)if(t=this.getSelectingTabIndex(t),this.tbItem.length>t&&t>=0&&!isNaN(t))if(this.prevIndex=this.selectedItem,this.prevItem=this.tbItem[this.prevIndex],this.tbItem[t].classList.contains(xS)&&this.reorderActiveTab){if(this.setActive(this.popupHandler(this.tbItem[t]),null,e),!y(this.items)&&this.items.length>0&&this.allowDragAndDrop){this.tbItem=dt("."+IS+" ."+MS,this.hdrEle);var i=this.items[t];this.items.splice(t,1),this.items.splice(this.tbItem.length-1,0,i);var n=this.itemIndexArray[t];this.itemIndexArray.splice(t,1),this.itemIndexArray.splice(this.tbItem.length-1,0,n)}}else this.setActive(t,null,e);else this.setActive(0,null,e);else t instanceof HTMLElement&&this.setActive(this.getEleIndex(t),null,e)},e.prototype.getItemIndex=function(t){for(var e,i=0;i<this.tbItem.length;i++){if(t===this.tbItem[i].getAttribute("data-id")){e=i;break}}return e},e.prototype.disable=function(t){this.setCssClass(this.element,lS,t),this.element.setAttribute("aria-disabled",""+t)},e.prototype.getPersistData=function(){return this.addOnPersist(["selectedItem","actEleId"])},e.prototype.getModuleName=function(){return"tab"},e.prototype.onPropertyChanged=function(t,e){for(var i=this,n=0,s=Object.keys(t).sort(function(t,e){return"items"===t?-1:"items"===e?1:0});n<s.length;n++){switch(s[n]){case"width":gt(this.element,{width:S(t.width)});break;case"height":gt(this.element,{height:S(t.height)}),this.setContentHeight(!1);break;case"cssClass":var r=this.element.querySelector("."+eS);""===e.cssClass||y(e.cssClass)?(this.setCssClass(this.element,t.cssClass,!0),y(r)||this.setCssClass(r,t.cssClass,!0)):(this.setCssClass(this.element,e.cssClass,!1),this.setCssClass(this.element,t.cssClass,!0),y(r)||(this.setCssClass(r,e.cssClass,!1),this.setCssClass(r,t.cssClass,!0)));break;case"items":this.evalOnPropertyChangeItems(t,e);break;case"showCloseButton":this.setCloseButton(t.showCloseButton);break;case"reorderActiveTab":this.refreshActiveTabBorder();break;case"selectedItem":this.selectedItem=e.selectedItem,this.select(t.selectedItem);break;case"headerPlacement":this.changeOrientation(t.headerPlacement);break;case"enableRtl":this.setRTL(t.enableRtl);break;case"overflowMode":this.tbObj.overflowMode=t.overflowMode,this.tbObj.dataBind(),this.refreshActiveTabBorder();break;case"heightAdjustMode":this.setContentHeight(!1),this.select(this.selectedItem);break;case"scrollStep":this.tbObj&&(this.tbObj.scrollStep=this.scrollStep);break;case"allowDragAndDrop":this.bindDraggable();break;case"swipeMode":this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.bindSwipeEvents();break;case"dragArea":this.allowDragAndDrop&&(this.draggableItems.forEach(function(t){t.dragArea=i.dragArea}),this.refresh())}}},e.prototype.refreshActiveTab=function(){if(this.isReact&&this.isTemplate&&this.clearTemplate(),this.isTemplate){var t=this.element.querySelector("."+IS),e=this.element.querySelector("."+MS+"."+aS),i=this.getIndexFromEle(e.id),n=e.innerText,s=this.element.querySelector("."+iS).querySelector("."+aS).children[0],r=s.innerHTML;at(e),at(s);var o={className:MS+" "+rS+" "+aS,id:sS+this.tabId+"_"+i},a=this.createElement("span",{className:fS,innerHTML:n,attrs:{role:"presentation"}}).outerHTML,l=this.createElement("div",{className:bS,innerHTML:a+this.btnCls.outerHTML}).outerHTML,h=(v=e.firstElementChild.getAttribute("data-tabindex"),this.createElement("div",{className:vS,innerHTML:l,attrs:{tabIndex:v,"data-tabindex":v,role:"tab","aria-controls":iS+this.tabId+"_"+i,"aria-selected":"true","aria-disabled":"false"}}));t.insertBefore(this.createElement("div",o),t.children[i+1]),this.element.querySelector("."+MS+"."+aS).appendChild(h);I=this.createElement("div",{innerHTML:r});this.element.querySelector("."+iS).querySelector("."+aS).appendChild(I)}else if(this.element.querySelector("."+MS+"."+aS)){at(this.element.querySelector("."+MS+"."+aS).children[0]),at(this.element.querySelector("."+iS).querySelector("."+aS).children[0]);var c=this.items[this.selectedItem],d=y(c.header)||y(c.header.iconPosition)?"":c.header.iconPosition,p=y(c.header)||y(c.header.iconCss)?"":c.header.iconCss,u=c.headerTemplate||c.header.text,g=this.createElement("div",{className:fS,attrs:{role:"presentation"}});y(u.tagName)?this.headerTextCompile(g,u,this.selectedItem):g.appendChild(u);var m=this.createElement("span",{className:dS+" "+CS+" "+pS+"-"+d+" "+p}),f=this.createElement("div",{className:bS});f.appendChild(g),""!==u&&void 0!==u&&""!==p?("left"===d||"top"===d?f.insertBefore(m,f.firstElementChild):f.appendChild(m),this.isIconAlone=!1):(""===p?g:m)===m&&(at(g),f.appendChild(m),this.isIconAlone=!0);var v=y(c.tabIndex)?"-1":c.tabIndex.toString(),b=c.disabled?{}:{tabIndex:v,"data-tabindex":v,role:"tab","aria-selected":"true","aria-disabled":"false"};f.appendChild(this.btnCls.cloneNode(!0));var C=this.createElement("div",{className:vS,attrs:b});C.appendChild(f),"top"!==d&&"bottom"!==d||this.element.classList.add("e-vertical-icon"),this.element.querySelector("."+MS+"."+aS).appendChild(C);var I=this.createElement("div"),M=c.content,S=void 0;if("string"==typeof M||y(M.innerHTML))if("string"==typeof M&&this.enableHtmlSanitizer&&(M=Yi.sanitize(M)),"."===M[0]||"#"===M[0])if(document.querySelectorAll(M).length){var x=document.querySelector(M);S=x.outerHTML.trim(),I.appendChild(x),x.style.display=""}else this.compileElement(I,M,"content",this.selectedItem);else this.compileElement(I,M,"content",this.selectedItem);else I.appendChild(M);y(S)||-1===this.templateEle.indexOf(M.toString())&&this.templateEle.push(M.toString()),this.element.querySelector("."+sS+"."+aS).appendChild(I)}this.isReact&&this.renderReactTemplates()},e.prototype.refreshActiveTabBorder=function(){if("None"===this.heightAdjustMode&&"auto"!==this.height&&this.cntEle&&!this.isVertical()){var t=this.getTabHeader();gt(this.cntEle,{height:this.element.clientHeight-t.offsetHeight+"px"})}var e=ct("."+MS+"."+xS+"."+aS,this.element);!y(e)&&this.reorderActiveTab&&this.select(this.getEleIndex(e)),this.refreshActiveBorder()},$M([Rt([],HS)],e.prototype,"items",void 0),$M([jt("100%")],e.prototype,"width",void 0),$M([jt("Both")],e.prototype,"swipeMode",void 0),$M([jt("auto")],e.prototype,"height",void 0),$M([jt("")],e.prototype,"cssClass",void 0),$M([jt(0)],e.prototype,"selectedItem",void 0),$M([jt("Top")],e.prototype,"headerPlacement",void 0),$M([jt("Content")],e.prototype,"heightAdjustMode",void 0),$M([jt("Scrollable")],e.prototype,"overflowMode",void 0),$M([jt("Demand")],e.prototype,"loadOn",void 0),$M([jt(!1)],e.prototype,"enablePersistence",void 0),$M([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),$M([jt(!1)],e.prototype,"showCloseButton",void 0),$M([jt(!0)],e.prototype,"reorderActiveTab",void 0),$M([jt()],e.prototype,"scrollStep",void 0),$M([jt()],e.prototype,"dragArea",void 0),$M([jt(!1)],e.prototype,"allowDragAndDrop",void 0),$M([jt(!0)],e.prototype,"clearTemplates",void 0),$M([Bt({},jS)],e.prototype,"animation",void 0),$M([Ut()],e.prototype,"created",void 0),$M([Ut()],e.prototype,"adding",void 0),$M([Ut()],e.prototype,"added",void 0),$M([Ut()],e.prototype,"selecting",void 0),$M([Ut()],e.prototype,"selected",void 0),$M([Ut()],e.prototype,"removing",void 0),$M([Ut()],e.prototype,"removed",void 0),$M([Ut()],e.prototype,"onDragStart",void 0),$M([Ut()],e.prototype,"dragging",void 0),$M([Ut()],e.prototype,"dragged",void 0),$M([Ut()],e.prototype,"destroyed",void 0),e=$M([Ft],e)}(_e),VS="e-rtl",US="e-disabled",FS="e-input",WS="e-multi-line-input",YS="e-input-group",_S="e-float-input",QS="e-float-line",ZS="e-float-text",qS="e-float-text-content",XS="e-clear-icon",GS="e-clear-icon-hide",KS="e-label-top",JS="e-label-bottom",$S="e-no-float-label",tx="e-input-custom-tag",ex="e-float-custom-tag",ix=["title","style","class"],nx="e-input-focus";!function(t){var e=!0;function i(e){n(e.floatLabelType,e.element);var i=function(){return function(e){var i=u(e.element);(i.classList.contains("e-input-group")||i.classList.contains("e-outline")||i.classList.contains("e-filled"))&&i.classList.add("e-input-focus"),"Never"!==e.floatLabelType&&setTimeout(function(){t.calculateWidth(e.element,i)},80)}(e)},s=function(){return function(e){var i=u(e.element);(i.classList.contains("e-input-group")||i.classList.contains("e-outline")||i.classList.contains("e-filled"))&&i.classList.remove("e-input-focus"),"Never"!==e.floatLabelType&&setTimeout(function(){t.calculateWidth(e.element,i)},80)}(e)},r=function(){return function(t){n(t.floatLabelType,t.element)}(e)};e.element.addEventListener("focus",i),e.element.addEventListener("blur",s),e.element.addEventListener("input",r),e.element.__eventHandlers.inputFocusHandler={focusHandler:i},e.element.__eventHandlers.inputBlurHandler={blurHandler:s},e.element.__eventHandlers.inputHandler={inputHandler:r}}function n(t,e){var i=e.value,n=e.parentElement,s=n&&n.parentElement;""===i||y(i)?"Always"!==t&&(n&&n.classList.contains("e-input-group")?n.classList.remove("e-valid-input"):s&&s.classList.contains("e-input-group")&&s.classList.remove("e-valid-input")):n&&n.classList.contains("e-input-group")?n.classList.add("e-valid-input"):s&&s.classList.contains("e-input-group")&&s.classList.add("e-valid-input")}function s(){var t=u(this).getElementsByClassName("e-float-text")[0];y(t)||(tt([t],KS),t.classList.contains(JS)&&et([t],JS))}function r(){var t=u(this);if(t.getElementsByTagName("textarea")[0]?""===t.getElementsByTagName("textarea")[0].value:""===t.getElementsByTagName("input")[0].value){var e=t.getElementsByClassName("e-float-text")[0];y(e)||(e.classList.contains(KS)&&et([e],KS),tt([e],JS))}}function o(t){t.addEventListener("focus",s),t.addEventListener("blur",r)}function a(t){y(t)||(t.removeEventListener("focus",s),t.removeEventListener("blur",r))}function l(t,e,i){var n=y(i)?$:i;"Auto"===t.floatLabelType&&o(t.element),y(e.container)?(e.container=f(t,_S,ex,"div",n),e.container.classList.add(YS),t.element.parentNode&&t.element.parentNode.insertBefore(e.container,t.element)):(y(t.customTag)||e.container.classList.add(ex),e.container.classList.add(_S));var s=n("span",{className:QS}),r=n("label",{className:ZS});if(y(t.element.id)||""===t.element.id||(r.id="label_"+t.element.id.replace(/ /g,"_"),ht(t.element,{"aria-labelledby":r.id})),y(t.element.placeholder)||""===t.element.placeholder||(r.innerText=v(t.element.placeholder),t.element.removeAttribute("placeholder")),y(t.properties)||y(t.properties.placeholder)||""===t.properties.placeholder||(r.innerText=v(t.properties.placeholder)),r.innerText||e.container.classList.add($S),e.container.classList.contains("e-float-icon-left")){var a=e.container.querySelector(".e-input-in-wrap");a.appendChild(t.element),a.appendChild(s),a.appendChild(r)}else e.container.appendChild(t.element),e.container.appendChild(s),e.container.appendChild(r);if(p(t.element.value,r),"Always"===t.floatLabelType&&(r.classList.contains(JS)&&et([r],JS),tt([r],KS)),"Auto"===t.floatLabelType){var l=function(){return function(t){m(t.element,t.floatLabelType)}(t)},c=function(){return function(t){m(t.element,t.floatLabelType)}(t)};t.element.addEventListener("input",l),t.element.addEventListener("blur",c),t.element.__eventHandlers.floatInputHandler={inputFloatHandler:l},t.element.__eventHandlers.floatBlurHandler={blurFloatHandler:c}}else h(t);y(t.element.getAttribute("id"))||r.setAttribute("for",t.element.getAttribute("id"))}function h(t){if(!(y(t.element)||y(t.element.__eventHandlers)||y(t.element.__eventHandlers.floatInputHandler)||y(t.element.__eventHandlers.floatBlurHandler))){var e=t.element.__eventHandlers.floatInputHandler.inputFloatHandler,i=t.element.__eventHandlers.floatBlurHandler.blurFloatHandler;t.element.removeEventListener("input",e),t.element.removeEventListener("blur",i),delete t.element.__eventHandlers.floatInputHandler,delete t.element.__eventHandlers.floatBlurHandler}}function c(t,e){"Always"===t&&e.classList.contains("e-outline")&&e.classList.add("e-valid-input")}function d(t,e,i){y(e)||(t&&!i?et([e],GS):tt([e],GS))}function p(t,e,i){(void 0===i&&(i=null),t)?(tt([e],KS),e.classList.contains(JS)&&et([e],JS)):(null==i||i!==document.activeElement)&&(e.classList.contains(KS)&&et([e],KS),tt([e],JS))}function u(t){var e=y(t.parentNode)?t:t.parentNode;return e&&e.classList.contains("e-input-in-wrap")&&(e=e.parentNode),e}function g(t,i,n){if(void 0===e||e){var s=function(e){return function(t,e,i){e.classList.contains(US)||e.readOnly||(t.preventDefault(),e!==document.activeElement&&e.focus(),e.value="",tt([i],GS))}(e,t,i)};i.addEventListener("click",s),t.__eventHandlers.clearClickHandler={clickHandlerEvent:s}}var r=function(){return function(t,e){d(t.value,e)}(t,i)},o=function(){return function(t,e){d(t.value,e,t.readOnly)}(t,i)},a=function(){return function(t,e){setTimeout(function(){y(e)||(tt([e],GS),e=!y(t)&&t.classList.contains("e-combobox")?null:e)},200)}(t,i)};t.addEventListener("input",r),t.addEventListener("focus",o),t.addEventListener("blur",a),t.__eventHandlers.clearInputHandler={inputHandlerEvent:r},t.__eventHandlers.clearFocusHandler={focusHandlerEvent:o},t.__eventHandlers.clearBlurHandler={blurHandlerEvent:a}}function m(t,e){if(u(t).classList.contains(_S)&&"Auto"===e){var i=u(t).getElementsByClassName("e-float-text")[0];p(t.value,i,t)}}function f(t,e,i,n,s){var r,o=y(s)?$:s;return y(t.customTag)?r=o(n,{className:e}):(r=o(t.customTag,{className:e})).classList.add(i),r.classList.add("e-control-wrapper"),r}function v(t){var e="";if(!y(t)&&""!==t){var i=document.createElement("span");i.innerHTML='<input  placeholder="'+t+'"/>',e=i.children[0].placeholder}return e}function b(t,e,i){y(i)||""===i||et(e,i.split(" ")),y(t)||""===t||tt(e,t.split(" "))}function C(t,e,i){if("multiselect"===i||function(t){if(!t)return!1;var e=t;for(;e&&e!==document.body;){if("none"===window.getComputedStyle(e).display)return!1;e=e.parentElement}return!0}(t)){var n="multiselect"===i?t:t.clientWidth-parseInt(getComputedStyle(t,null).getPropertyValue("padding-left"),10);y(e)||y(e.getElementsByClassName("e-float-text-content")[0])||(e.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&e.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(n<e.getElementsByClassName("e-float-text-content")[0].clientWidth||n===e.getElementsByClassName("e-float-text-content")[0].clientWidth)&&e.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}}function I(t,e){t=v(t);var i=u(e);if(i.classList.contains(_S))if(y(t)||""===t){if(i.classList.add($S),n=i.getElementsByClassName("e-float-text-content")[0])n.children[0].textContent="";else y(s=i.getElementsByClassName(ZS)[0])||(s.textContent="")}else{var n,s;if((n=i.getElementsByClassName("e-float-text-content")[0])&&n.children[0])n.children[0].textContent=t;else y(s=i.getElementsByClassName(ZS)[0])||(s.textContent=t);i.classList.remove($S),e.removeAttribute("placeholder")}else y(t)||""===t?e.removeAttribute("placeholder"):ht(e,{placeholder:t})}function M(t,e,i){t?ht(e,{readonly:""}):e.removeAttribute("readonly"),y(i)||m(e,i)}function x(t,e){t?tt(e,VS):et(e,VS)}function w(t,e,i,n){var s={disabled:"","aria-disabled":"true"},r=!y(n);t?(e.classList.remove(US),E(s,e),r&&et([n],US)):(e.classList.add(US),T(s,e),r&&tt([n],US)),y(i)||m(e,i)}function D(t,e,i,n,s){var r=y(s)?$:s;t?i.clearButton=function(t,e,i,n){var s=(y(n)?$:n)("span",{className:XS}),r=e.container;return y(i)?(e.container.classList.contains(_S)?e.container.querySelector("."+ZS):t).insertAdjacentElement("afterend",s):r.appendChild(s),tt([s],GS),g(t,s),s.setAttribute("aria-label","close"),s}(e,i,n,r):(lt(i.clearButton),i.clearButton=null)}function E(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var s=n[i],r=u(e);"disabled"===s&&e.classList.remove(US),"disabled"===s&&r.classList.contains(YS)&&r.classList.remove(US),"placeholder"===s&&r.classList.contains(_S)?r.getElementsByClassName(ZS)[0].textContent="":e.removeAttribute(s)}}function T(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var s=n[i],r=u(e);"disabled"===s&&e.classList.add(US),"disabled"===s&&r.classList.contains(YS)&&r.classList.add(US),"placeholder"===s&&r.classList.contains(_S)?r.getElementsByClassName(ZS)[0].textContent=t[""+s]:e.setAttribute(s,t[""+s])}}function A(t,e){if(t.classList.contains("e-outline")&&t.getElementsByClassName("e-float-text")[0]){var i=e("span",{className:qS});i.innerHTML=t.getElementsByClassName("e-float-text")[0].innerHTML,t.getElementsByClassName("e-float-text")[0].innerHTML="",t.getElementsByClassName("e-float-text")[0].appendChild(i)}}function N(t,e,i){var n=[];n.push(i);var s=y(i)?e.querySelectorAll(".e-input-group-icon"):n;if(t&&s.length>0)for(var r=0;r<s.length;r++)s[parseInt(r.toString(),10)].addEventListener("mousedown",L,!1),s[parseInt(r.toString(),10)].addEventListener("mouseup",O,!1);else if(s.length>0)for(r=0;r<s.length;r++)s[parseInt(r.toString(),10)].removeEventListener("mousedown",L,this),s[parseInt(r.toString(),10)].removeEventListener("mouseup",O,this)}function L(){for(var t,e,i=this.parentElement;!i.classList.contains("e-input-group");)i=i.parentElement;e=this,(t=i).classList.contains("e-disabled")||t.querySelector("input").readOnly||e.classList.add("e-input-btn-ripple")}function O(){var t=this;setTimeout(function(){t.classList.remove("e-input-btn-ripple")},500)}function k(t,e){var i=e("span",{className:t});return i.classList.add("e-input-group-icon"),i}function z(t,e,i,n){var s=y(n)?$:n,r=k(t,s);e.classList.add("e-float-icon-left");var o=e.querySelector(".e-input-in-wrap");if(y(o)){o=s("span",{className:"e-input-in-wrap"}),i.parentNode.insertBefore(o,i);var a=e.querySelectorAll(i.tagName+" ~ *");o.appendChild(i);for(var l=0;l<a.length;l++){var h=a[parseInt(l.toString(),10)],c=o.parentElement;h.classList.contains("e-float-line")&&(c&&c.classList.contains("e-filled")||!c)||o.appendChild(h)}}return o.parentNode.insertBefore(r,o),N(!0,e,r),r}function P(t,e,i){var n=k(t,y(i)?$:i);return(e.classList.contains("e-float-icon-left")?e.querySelector(".e-input-in-wrap"):e).appendChild(n),N(!0,e,n),n}function j(t,e){"hidden"===e.type?t.classList.add("e-hidden"):t.classList.contains("e-hidden")&&t.classList.remove("e-hidden")}function B(t){var e=t;return y(t)||""===t||(e=t.replace(/\s+/g," ").trim()),e}t.createInput=function(t,n){t.element.__eventHandlers={};var s=y(n)?$:n,r={container:null,buttons:[],clearButton:null};if(t.floatLabelType,e=t.bindClearAction,y(t.floatLabelType)||"Never"===t.floatLabelType?(r.container=f(t,YS,tx,"span",s),t.element.parentNode.insertBefore(r.container,t.element),tt([t.element],FS),r.container.appendChild(t.element)):l(t,r,s),i(t),y(t.properties)||y(t.properties.showClearButton)||!t.properties.showClearButton||(D(t.properties.showClearButton,t.element,r,!0,s),r.clearButton.setAttribute("role","button"),r.container.classList.contains(_S)&&tt([r.container],YS)),!y(t.buttons))for(var o=0;o<t.buttons.length;o++)r.buttons.push(P(t.buttons[o],r.container,s));return y(t.element)||"TEXTAREA"!==t.element.tagName||tt([r.container],WS),j(r.container,t.element),r=function(t,e){if(!y(t.properties))for(var i=0,n=Object.keys(t.properties);i<n.length;i++){switch(n[i]){case"cssClass":b(t.properties.cssClass,[e.container]),c(t.floatLabelType,e.container);break;case"enabled":w(t.properties.enabled,t.element,t.floatLabelType,e.container);break;case"enableRtl":x(t.properties.enableRtl,[e.container]);break;case"placeholder":I(t.properties.placeholder,t.element);break;case"readonly":M(t.properties.readonly,t.element)}}return e}(t,r),A(r.container,s),r},t.bindInitialEvent=i,t.wireFloatingEvents=o,t.wireClearBtnEvents=g,t.destroy=function(t,i){void 0===i&&(i=null),function(t){if(!y(t.element)&&!(y(t.element.__eventHandlers)||y(t.element.__eventHandlers.inputFocusHandler)||y(t.element.__eventHandlers.inputBlurHandler)||y(t.element.__eventHandlers.inputHandler))){var e=t.element.__eventHandlers.inputFocusHandler.focusHandler,i=t.element.__eventHandlers.inputBlurHandler.blurHandler,n=t.element.__eventHandlers.inputHandler.inputHandler;t.element.removeEventListener("focus",e),t.element.removeEventListener("blur",i),t.element.removeEventListener("input",n),delete t.element.__eventHandlers.inputFocusHandler,delete t.element.__eventHandlers.inputBlurHandler,delete t.element.__eventHandlers.inputHandler}}(t),"Auto"===t.floatLabelType&&h(t),t.properties.showClearButton&&function(t,i){if(!y(t)&&!y(t.__eventHandlers)){if(!y(t.__eventHandlers.clearClickHandler)){var n=t.__eventHandlers.clearClickHandler.clickHandlerEvent;(void 0===e||e)&&(y(i)||i.removeEventListener("click",n)),delete t.__eventHandlers.clearClickHandler}if(!y(t.__eventHandlers.clearInputHandler)&&!y(t.__eventHandlers.clearFocusHandler)&&!y(t.__eventHandlers.clearBlurHandler)){var s=t.__eventHandlers.clearInputHandler.inputHandlerEvent,r=t.__eventHandlers.clearFocusHandler.focusHandlerEvent,o=t.__eventHandlers.clearBlurHandler.blurHandlerEvent;t.removeEventListener("input",s),t.removeEventListener("focus",r),t.removeEventListener("blur",o),delete t.__eventHandlers.clearInputHandler,delete t.__eventHandlers.clearFocusHandler,delete t.__eventHandlers.clearBlurHandler}}}(t.element,i),y(t.buttons)||N(!1,null,t.buttons),a(t.element),y(t.element)||(delete t.element.__eventHandlers,t.element.classList.contains(FS)&&t.element.classList.remove(FS))},t.setValue=function(t,e,i,s){if(e.value=t,"Never"!==i&&C(e,e.parentElement),y(i)||"Auto"!==i||m(e,i),!y(s)&&s){var r=u(e);if(!y(r)){var o=r.getElementsByClassName(XS)[0];y(o)||(e.value&&!y(r)&&r.classList.contains("e-input-focus")?et([o],GS):tt([o],GS))}}n(i,e)},t.setCssClass=b,t.calculateWidth=C,t.setWidth=function(t,e){"number"==typeof t?e.style.width=S(t):"string"==typeof t&&(e.style.width=t.match(/px|%|em/)?t:S(t)),C(e.firstChild,e)},t.setPlaceholder=I,t.setReadonly=M,t.setEnableRtl=x,t.setEnabled=w,t.setClearButton=D,t.removeAttributes=E,t.addAttributes=T,t.removeFloating=function(t){var e=t.container;if(!y(e)&&e.classList.contains(_S)){var i=e.querySelector("textarea")?e.querySelector("textarea"):e.querySelector("input"),n=e.querySelector("."+ZS).textContent,s=null!==e.querySelector(".e-clear-icon");at(e.querySelector("."+QS)),at(e.querySelector("."+ZS)),mt(e,[YS],[_S]),a(i),ht(i,{placeholder:n}),i.classList.add(FS),s||"INPUT"!==i.tagName||i.removeAttribute("required")}},t.addFloating=function(t,e,i,n){var s=y(n)?$:n,r=ut(t,"."+YS);0;var o=r.tagName,a={element:t,floatLabelType:e,customTag:o="DIV"!==o&&"SPAN"!==o?o:null,properties:{placeholder:i}};if("Never"!==e){var d=r.querySelector(".e-clear-icon"),p={container:r};t.classList.remove(FS),l(a,p,s),A(p.container,s),C(a.element,p.container);var u=r.classList.contains("e-float-icon-left");if(y(d))if(u)d=r.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon");else d=r.querySelector(".e-input-group-icon");if(y(d))u&&(d=r.querySelector(".e-input-group-icon"));else{var g=r.querySelector("."+QS),m=r.querySelector("."+ZS),f=u?r.querySelector(".e-input-in-wrap"):r;f.insertBefore(t,d),f.insertBefore(g,d),f.insertBefore(m,d)}}else h(a);c(e,t.parentElement)},t.createSpanElement=A,t.setRipple=function(t,e){for(var i=0;i<e.length;i++)N(t,e[parseInt(i.toString(),10)].container)},t.addIcon=function(t,e,i,n,s){var r="string"==typeof e?e.split(","):e;if("append"===t.toLowerCase())for(var o=0,a=r;o<a.length;o++){P(a[o],i,s)}else for(var l=0,h=r;l<h.length;l++){z(h[l],i,n,s)}i.getElementsByClassName("e-input-group-icon")[0]&&i.getElementsByClassName("e-float-text-overflow")[0]&&i.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},t.prependSpan=z,t.appendSpan=P,t.validateInputType=j,t.updateHTMLAttributesToElement=function(t,e){if(!y(t))for(var i=0,n=Object.keys(t);i<n.length;i++){var s=n[i];ix.indexOf(s)<0&&e.setAttribute(s,t[""+s])}},t.updateCssClass=function(t,e,i){b(B(t),[i],B(e))},t.getInputValidClassList=B,t.updateHTMLAttributesToWrapper=function(t,e){if(!y(t))for(var i=0,n=Object.keys(t);i<n.length;i++){var s=n[i];if(ix.indexOf(s)>-1)if("class"===s){var r=this.getInputValidClassList(t[""+s]);""!==r&&tt([e],r.split(" "))}else if("style"===s){var o=e.getAttribute(s);o=y(o)?t[""+s]:o+t[""+s],e.setAttribute(s,o)}else e.setAttribute(s,t[""+s])}},t.isBlank=function(t){return!t||/^\s*$/.test(t)}}(hI||(hI={}));var sx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),rx=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ox="e-input-group-icon",ax="e-spin-up",lx="e-error",hx="increment",cx="decrement",dx=new RegExp("^(-)?(\\d*)$"),px="e-input-focus",ux=["title","style","class"],gx=0,mx=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.preventChange=!1,n.isDynamicChange=!1,n.numericOptions=e,n}return sx(e,t),e.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var t=c("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),et([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=ut(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var e=this.createElement("input"),i=0;i<this.element.attributes.length;i++){var n=this.element.attributes[i].nodeName;"id"!==n&&"class"!==n?(e.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML):"class"===n&&e.setAttribute(n,this.element.className.split(" ").filter(function(t){return 0!==t.indexOf("ng-")}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(e),this.element=e,d("ej2_instances",t,this.element)}ht(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"});var s={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new ri("numerictextbox",s,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",b("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},e.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null===this.value||isNaN(this.value)||this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),this.element.hasAttribute("aria-labelledby")||this.element.hasAttribute("placeholder")||this.element.hasAttribute("aria-label")||this.element.setAttribute("aria-label","numerictextbox"),!y(ut(this.element,"fieldset"))&&ut(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},e.prototype.checkAttributes=function(t){for(var e=0,i=t?y(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];e<i.length;e++){var n=i[e];if(!y(this.element.getAttribute(n)))switch(n){case"disabled":if(y(this.numericOptions)||void 0===this.numericOptions.enabled||t){var s="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:s},!t)}break;case"readonly":if(y(this.numericOptions)||void 0===this.numericOptions.readonly||t){var r="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:r},!t)}break;case"placeholder":(y(this.numericOptions)||void 0===this.numericOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"value":if(y(this.numericOptions)||void 0===this.numericOptions.value||t){var o=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));this.setProperties(d(n,o,{}),!t)}break;case"min":if(y(this.numericOptions)||void 0===this.numericOptions.min||t){var a=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===a||isNaN(a)||this.setProperties(d(n,a,{}),!t)}break;case"max":if(y(this.numericOptions)||void 0===this.numericOptions.max||t){var l=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===l||isNaN(l)||this.setProperties(d(n,l,{}),!t)}break;case"step":if(y(this.numericOptions)||void 0===this.numericOptions.step||t){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));null===h||isNaN(h)||this.setProperties(d(n,h,{}),!t)}break;case"style":this.inputStyle=this.element.getAttribute(n);break;case"name":this.inputName=this.element.getAttribute(n);break;default:var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(n));(null!==c&&!isNaN(c)||"value"===n)&&this.setProperties(d(n,c,{}),!0)}}},e.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},e.prototype.initCultureFunc=function(){this.instance=new Te(this.locale)},e.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==c("currency",this)&&(d("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},e.prototype.createWrapper=function(){var t=this.cssClass;y(this.cssClass)||""===this.cssClass||(t=this.getNumericValidClassList(this.cssClass));var e=hI.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:t,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=e,this.container=e.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&ht(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text","data-validateHidden":"true","aria-label":"hidden",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),this.isAngular&&"EJS-NUMERICTEXTBOX"===this.angularTagName&&this.cloneElement.id.length>0?ht(this.hiddenInput,{name:this.cloneElement.id}):ht(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&ht(this.container,{style:this.inputStyle})},e.prototype.updateDataAttribute=function(t){var e={};if(t)e=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)e[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var n=0,s=Object.keys(e);n<s.length;n++){var r=s[n];0===r.indexOf("data")&&this.hiddenInput.setAttribute(r,e[""+r])}},e.prototype.updateHTMLAttrToElement=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];ux.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.updateCssClass=function(t,e){hI.setCssClass(this.getNumericValidClassList(t),[this.container],this.getNumericValidClassList(e))},e.prototype.getNumericValidClassList=function(t){var e=t;return y(t)||""===t||(e=t.replace(/\s+/g," ").trim()),e},e.prototype.updateHTMLAttrToWrapper=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(ux.indexOf(i)>-1)if("class"===i){var n=this.getNumericValidClassList(this.htmlAttributes[""+i]);""!==n&&tt([this.container],n.split(" "))}else if("style"===i){var s=this.container.getAttribute(i);s=y(s)?this.htmlAttributes[""+i]:s+this.htmlAttributes[""+i],this.container.setAttribute(i,s)}else this.container.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.setElementWidth=function(t){y(t)||("number"==typeof t?this.container.style.width=S(t):"string"==typeof t&&(this.container.style.width=t.match(/px|%|em/)?t:S(t)))},e.prototype.spinBtnCreation=function(){this.spinDown=hI.appendSpan(ox+" e-spin-down",this.container,this.createElement),ht(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=hI.appendSpan(ox+" "+ax,this.container,this.createElement),ht(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},e.prototype.validateMinMax=function(){("number"!=typeof this.min||isNaN(this.min))&&this.setProperties({min:-Number.MAX_VALUE},!0),("number"!=typeof this.max||isNaN(this.max))&&this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&ht(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&ht(this.element,{"aria-valuemax":this.max.toString()})},e.prototype.formattedValue=function(t,e){return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(e)},e.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},e.prototype.action=function(t,e){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,t)),this.raiseChangeEvent(e)},e.prototype.checkErrorClass=function(){this.isValidState?et([this.container],lx):tt([this.container],lx),ht(this.element,{"aria-invalid":this.isValidState?"false":"true"})},e.prototype.bindClearEvent=function(){this.showClearButton&&K.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},e.prototype.resetHandler=function(t){t.preventDefault(),this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")&&!this.inputWrapper.container.classList.contains("e-static-clear")||this.clear(t),this.isInteract=!0,this.raiseChangeEvent(t)},e.prototype.clear=function(t){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",ut(this.element,"form")){var e=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),e.dispatchEvent(i)}},e.prototype.resetFormHandler=function(){"EJS-NUMERICTEXTBOX"===this.element.tagName?this.updateValue(null):this.updateValue(this.inputEleValue)},e.prototype.setSpinButton=function(){y(this.spinDown)||ht(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),y(this.spinUp)||ht(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},e.prototype.wireEvents=function(){K.add(this.element,"focus",this.focusHandler,this),K.add(this.element,"blur",this.focusOutHandler,this),K.add(this.element,"keydown",this.keyDownHandler,this),K.add(this.element,"keyup",this.keyUpHandler,this),K.add(this.element,"input",this.inputHandler,this),K.add(this.element,"keypress",this.keyPressHandler,this),K.add(this.element,"change",this.changeHandler,this),K.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&K.add(this.formEle,"reset",this.resetFormHandler,this))},e.prototype.wireSpinBtnEvents=function(){K.add(this.spinUp,G.touchStartEvent,this.mouseDownOnSpinner,this),K.add(this.spinDown,G.touchStartEvent,this.mouseDownOnSpinner,this),K.add(this.spinUp,G.touchEndEvent,this.mouseUpOnSpinner,this),K.add(this.spinDown,G.touchEndEvent,this.mouseUpOnSpinner,this),K.add(this.spinUp,G.touchMoveEvent,this.touchMoveOnSpinner,this),K.add(this.spinDown,G.touchMoveEvent,this.touchMoveOnSpinner,this)},e.prototype.unwireEvents=function(){K.remove(this.element,"focus",this.focusHandler),K.remove(this.element,"blur",this.focusOutHandler),K.remove(this.element,"keyup",this.keyUpHandler),K.remove(this.element,"input",this.inputHandler),K.remove(this.element,"keydown",this.keyDownHandler),K.remove(this.element,"keypress",this.keyPressHandler),K.remove(this.element,"change",this.changeHandler),K.remove(this.element,"paste",this.pasteHandler),this.formEle&&K.remove(this.formEle,"reset",this.resetFormHandler)},e.prototype.unwireSpinBtnEvents=function(){K.remove(this.spinUp,G.touchStartEvent,this.mouseDownOnSpinner),K.remove(this.spinDown,G.touchStartEvent,this.mouseDownOnSpinner),K.remove(this.spinUp,G.touchEndEvent,this.mouseUpOnSpinner),K.remove(this.spinDown,G.touchEndEvent,this.mouseUpOnSpinner),K.remove(this.spinUp,G.touchMoveEvent,this.touchMoveOnSpinner),K.remove(this.spinDown,G.touchMoveEvent,this.touchMoveOnSpinner)},e.prototype.changeHandler=function(t){t.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var e=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(e,t)},e.prototype.raiseChangeEvent=function(t){if(this.inputValue=y(this.inputValue)||isNaN(this.inputValue)?null:this.inputValue,this.prevValue!==this.value||this.prevValue!==this.inputValue){var e={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:t},t&&(this.changeEventArgs.event=t),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),m(e,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",e)}},e.prototype.pasteHandler=function(){var t=this;if(this.enabled&&!this.readonly){var e=this.element.value;setTimeout(function(){t.numericRegex().test(t.element.value)||t.setElementValue(e)})}},e.prototype.preventHandler=function(){var t=this,e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(t.element.selectionStart>0){var i=t.element.selectionStart,n=t.element.selectionStart-1,s=t.element.value.split(""),r=c("decimal",Ae(t.locale)),o=r.charCodeAt(0);" "===t.element.value[n]&&t.element.selectionStart>0&&!e?(y(t.prevVal)?t.element.value=t.element.value.trim():0!==n?t.element.value=t.prevVal:0===n&&(t.element.value=t.element.value.trim()),t.element.setSelectionRange(n,n)):isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&45!==t.element.value[t.element.selectionStart-1].charCodeAt(0)?(s.indexOf(t.element.value[t.element.selectionStart-1])!==s.lastIndexOf(t.element.value[t.element.selectionStart-1])&&t.element.value[t.element.selectionStart-1].charCodeAt(0)===o||t.element.value[t.element.selectionStart-1].charCodeAt(0)!==o)&&(t.element.value=t.element.value.substring(0,n)+t.element.value.substring(i,t.element.value.length),t.element.setSelectionRange(n,n),isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&t.element.selectionStart>0&&t.element.value.length&&t.preventHandler()):isNaN(parseFloat(t.element.value[t.element.selectionStart-2]))&&t.element.selectionStart>1&&45!==t.element.value[t.element.selectionStart-2].charCodeAt(0)&&(s.indexOf(t.element.value[t.element.selectionStart-2])!==s.lastIndexOf(t.element.value[t.element.selectionStart-2])&&t.element.value[t.element.selectionStart-2].charCodeAt(0)===o||t.element.value[t.element.selectionStart-2].charCodeAt(0)!==o)&&(t.element.setSelectionRange(n,n),t.nextEle=t.element.value[t.element.selectionStart],t.cursorPosChanged=!0,t.preventHandler()),!0===t.cursorPosChanged&&t.element.value[t.element.selectionStart]===t.nextEle&&isNaN(parseFloat(t.element.value[t.element.selectionStart-1]))&&(t.element.setSelectionRange(t.element.selectionStart+1,t.element.selectionStart+1),t.cursorPosChanged=!1,t.nextEle=null),""===t.element.value.trim()&&t.element.setSelectionRange(0,0),t.element.selectionStart>0&&(45===t.element.value[t.element.selectionStart-1].charCodeAt(0)&&t.element.selectionStart>1&&(y(t.prevVal)||(t.element.value=t.prevVal),t.element.setSelectionRange(t.element.selectionStart,t.element.selectionStart)),t.element.value[t.element.selectionStart-1]===r&&0===t.decimals&&t.validateDecimalOnType&&(t.element.value=t.element.value.substring(0,n)+t.element.value.substring(i,t.element.value.length))),t.prevVal=t.element.value}})},e.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))&&G.isDevice&&this.preventHandler();var t=this.instance.getNumberParser({format:"n"})(this.element.value);if(t=null===t||isNaN(t)?null:t,this.hiddenInput.value=t||0===t?t.toString():null,ut(this.element,"form")){var e=this.element.nextElementSibling,i=document.createEvent("KeyboardEvent");i.initEvent("keyup",!1,!0),e.dispatchEvent(i)}}},e.prototype.inputHandler=function(t){var e=this;if(this.enabled&&!this.readonly){var i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||i)&&G.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==c("decimal",Ae(this.locale))&&this.element.value!==c("minusSign",Ae(this.locale))){var n=this.instance.getNumberParser({format:"n"})(this.element.value);n=isNaN(n)?null:n,e.localChange({value:n}),this.preventChange=!0}if(this.isVue){var s=this.instance.getNumberParser({format:"n"})(this.element.value),r=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(s=this.value);var o={event:t,value:null===s||isNaN(s)?null:s,previousValue:null===r||isNaN(r)?null:r};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",o)}}},e.prototype.keyDownHandler=function(t){if(!this.readonly)switch(t.keyCode){case 38:t.preventDefault(),this.action(hx,t);break;case 40:t.preventDefault(),this.action(cx,t)}},e.prototype.performAction=function(t,e,i){(null===t||isNaN(t))&&(t=0);var n=i===hx?t+e:t-e;return n=this.correctRounding(t,e,n),this.strictMode?this.trimValue(n):n},e.prototype.correctRounding=function(t,e,i){var n=new RegExp("[,.](.*)"),s=n.test(t.toString()),r=n.test(e.toString());if(s||r){var o=s?n.exec(t.toString())[0].length:0,a=r?n.exec(e.toString())[0].length:0,l=Math.max(o,a);return this.roundValue(i,l)}return i},e.prototype.roundValue=function(t,e){e=e||0;var i=Math.pow(10,e);return t*=i,Math.round(t)/i},e.prototype.updateValue=function(t,e){e&&(this.isInteract=!0),null===t||isNaN(t)||this.decimals&&(t=this.roundNumber(t,this.decimals)),this.inputValue=t,this.isVue&&this.element&&this.element.hasAttribute("modelvalue")&&this.isDynamicChange||this.changeValue(null===t||isNaN(t)?null:this.strictMode?this.trimValue(t):t),this.isDynamicChange||this.raiseChangeEvent(e)},e.prototype.updateCurrency=function(t,e){d(t,e,this.cultureInfo),this.updateValue(this.value)},e.prototype.changeValue=function(t){if(t||0===t){var e=this.getNumberOfDecimals(t);this.setProperties({value:this.roundNumber(t,e)},!0)}else t=null,this.setProperties({value:t},!0);this.modifyText(),this.strictMode||this.validateState()},e.prototype.modifyText=function(){if(this.value||0===this.value){var t=this.formatNumber(),e=this.isFocused?t:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(e),ht(this.element,{"aria-valuenow":t}),y(this.hiddenInput)||(this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator)))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},e.prototype.setElementValue=function(t,e){hI.setValue(t,e||this.element,this.floatLabelType,this.showClearButton)},e.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},e.prototype.getNumberOfDecimals=function(t){var e,i=new RegExp("[eE][-+]?([0-9]+)"),n=t.toString();if(i.test(n)){var s=i.exec(n);y(s)||(n=t.toFixed(Math.min(parseInt(s[1],10),20)))}var r=n.split(".")[1];return e=r&&r.length?r.length:0,null!==this.decimals&&(e=e<this.decimals?e:this.decimals),e},e.prototype.formatNumber=function(){var t=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:t,minimumFractionDigits:t,useGrouping:!1})(this.value)},e.prototype.trimValue=function(t){return t>this.max?this.max:t<this.min?this.min:t},e.prototype.roundNumber=function(t,e){var i=t,n=e||0,s=i.toString().split("e"),r=(i=Math.round(Number(s[0]+"e"+(s[1]?Number(s[1])+n:n)))).toString().split("e");return i=Number(r[0]+"e"+(r[1]?Number(r[1])-n:-n)),Number(i.toFixed(n))},e.prototype.cancelEvent=function(t){return t.preventDefault(),!1},e.prototype.keyPressHandler=function(t){if(!this.enabled||this.readonly)return!0;if(!G.isDevice&&"11.0"===G.info.version&&13===t.keyCode){var e=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(e,t),!0}if(0===t.which||t.metaKey||t.ctrlKey||8===t.keyCode||13===t.keyCode)return!0;var i=String.fromCharCode(t.which),n=c("decimal",Ae(this.locale)),s="NumpadDecimal"===t.code&&i!==n;s&&(i=n);var r=this.element.value;if(r=r.substring(0,this.element.selectionStart)+i+r.substring(this.element.selectionEnd),this.numericRegex().test(r)){if(s){var o=this.element.selectionStart+1;this.element.value=r,this.element.setSelectionRange(o,o),t.preventDefault(),t.stopPropagation()}return!0}return t.preventDefault(),t.stopPropagation(),!1},e.prototype.numericRegex=function(){var t=c("decimal",Ae(this.locale)),e="*";return"."===t&&(t="\\"+t),0===this.decimals&&this.validateDecimalOnType?dx:(this.decimals&&this.validateDecimalOnType&&(e="{0,"+this.decimals+"}"),new RegExp("^\\s*(-)?(((\\d+("+t+"\\d"+e+")?)|("+t+"\\d"+e+")))?$"))},e.prototype.mouseWheel=function(t){var e;t.preventDefault();var i=t;i.wheelDelta?e=i.wheelDelta/120:i.detail&&(e=-i.detail/3),e>0?this.action(hx,t):e<0&&this.action(cx,t),this.cancelEvent(t)},e.prototype.focusHandler=function(t){var e=this;if(clearTimeout(gx),this.focusEventArgs={event:t,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,this.prevValue=this.value,this.value||0===this.value){var i=this.formatNumber();if(this.setElementValue(i),!this.isPrevFocused)if(G.isDevice||"11.0"!==G.info.version){var n=G.isDevice&&G.isIos?600:0;gx=setTimeout(function(){e.element.setSelectionRange(0,i.length)},n)}else this.element.setSelectionRange(0,i.length)}G.isDevice||K.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},e.prototype.focusOutHandler=function(t){var e=this;if(this.blurEventArgs={event:t,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(t.preventDefault(),G.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var n=this.element;setTimeout(function(){e.setElementValue(i,n)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var s=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(s),G.isDevice||K.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(ut(this.element,"form")){var r=this.element.nextElementSibling,o=document.createEvent("FocusEvent");o.initEvent("focusout",!1,!0),r.dispatchEvent(o)}}},e.prototype.mouseDownOnSpinner=function(t){var e=this;if(this.isFocused&&(this.isPrevFocused=!0,t.preventDefault()),this.getElementData(t)){this.getElementData(t);var i=t.currentTarget,n=i.classList.contains(ax)?hx:cx;K.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){e.isCalled=!0,e.action(n,t)},150),K.add(document,"mouseup",this.mouseUpClick,this)}},e.prototype.touchMoveOnSpinner=function(t){var e;if("touchmove"===t.type){var i=t.touches;e=i.length&&document.elementFromPoint(i[0].pageX,i[0].pageY)}else e=document.elementFromPoint(t.clientX,t.clientY);e.classList.contains(ox)||clearInterval(this.timeOut)},e.prototype.mouseUpOnSpinner=function(t){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),G.isDevice||(this.isPrevFocused=!1)),G.isDevice||t.preventDefault(),this.getElementData(t)){var e=t.currentTarget,i=e.classList.contains(ax)?hx:cx;if(K.remove(e,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,t),this.isCalled=!1,K.remove(document,"mouseup",this.mouseUpClick),ut(this.element,"form")){var n=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}}},e.prototype.getElementData=function(t){return!(t.which&&3===t.which||t.button&&2===t.button||!this.enabled||this.readonly)&&(clearInterval(this.timeOut),!0)},e.prototype.floatLabelTypeUpdate=function(){hI.removeFloating(this.inputWrapper);var t=this.hiddenInput;this.hiddenInput.remove(),hI.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(t,this.container.childNodes[1])},e.prototype.mouseUpClick=function(t){t.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&K.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&K.remove(this.spinDown,"mouseleave",this.mouseUpClick)},e.prototype.increment=function(t){void 0===t&&(t=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,t,hx)),this.raiseChangeEvent()},e.prototype.decrement=function(t){void 0===t&&(t=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,t,cx)),this.raiseChangeEvent()},e.prototype.destroy=function(){this.unwireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),at(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),at(this.spinUp),at(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),at(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,hI.destroy({element:this.element,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),t.prototype.destroy.call(this)},e.prototype.getText=function(){return this.element.value},e.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),tt([this.container],[px]))},e.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),et([this.container],[px]))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var s=n[i];switch(s){case"width":this.setElementWidth(t.width),hI.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass);break;case"enabled":hI.setEnabled(t.enabled,this.element),this.bindClearEvent();break;case"enableRtl":hI.setEnableRtl(t.enableRtl,[this.container]);break;case"readonly":hI.setReadonly(t.readonly,this.element),this.readonly?ht(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),hI.validateInputType(this.container,this.element);break;case"placeholder":hI.setPlaceholder(t.placeholder,this.element),hI.calculateWidth(this.element,this.container);break;case"step":this.step=t.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(t);break;case"showClearButton":this.updateClearButton(t);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(t.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":d(s,c(s,t),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=t.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),hI.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var r=c(s,t);this.setProperties({currencyCode:r},!0),this.updateCurrency(s,r);break;case"currencyCode":var o=c(s,t);this.setProperties({currency:o},!0),this.updateCurrency("currency",o);break;case"format":d(s,c(s,t),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=t.decimals,this.updateValue(this.value)}}},e.prototype.updateClearButton=function(t){hI.setClearButton(t.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},e.prototype.updateSpinButton=function(t){t.showSpinButton?this.spinBtnCreation():(at(this.spinUp),at(this.spinDown))},e.prototype.getModuleName=function(){return"numerictextbox"},rx([jt("")],e.prototype,"cssClass",void 0),rx([jt(null)],e.prototype,"value",void 0),rx([jt(-Number.MAX_VALUE)],e.prototype,"min",void 0),rx([jt(Number.MAX_VALUE)],e.prototype,"max",void 0),rx([jt(1)],e.prototype,"step",void 0),rx([jt(null)],e.prototype,"width",void 0),rx([jt(null)],e.prototype,"placeholder",void 0),rx([jt({})],e.prototype,"htmlAttributes",void 0),rx([jt(!0)],e.prototype,"showSpinButton",void 0),rx([jt(!1)],e.prototype,"readonly",void 0),rx([jt(!0)],e.prototype,"enabled",void 0),rx([jt(!1)],e.prototype,"showClearButton",void 0),rx([jt(!1)],e.prototype,"enablePersistence",void 0),rx([jt("n2")],e.prototype,"format",void 0),rx([jt(null)],e.prototype,"decimals",void 0),rx([jt(null)],e.prototype,"currency",void 0),rx([jt(null)],e.prototype,"currencyCode",void 0),rx([jt(!0)],e.prototype,"strictMode",void 0),rx([jt(!1)],e.prototype,"validateDecimalOnType",void 0),rx([jt("Never")],e.prototype,"floatLabelType",void 0),rx([Ut()],e.prototype,"created",void 0),rx([Ut()],e.prototype,"destroyed",void 0),rx([Ut()],e.prototype,"change",void 0),rx([Ut()],e.prototype,"focus",void 0),rx([Ut()],e.prototype,"blur",void 0),e=rx([Ft],e)}(_e),fx="e-error",yx="e-label-top",vx={0:"[0-9]",9:"[0-9 ]","#":"[0-9 +-]",L:"[A-Za-z]","?":"[A-Za-z ]","&":"[^\x7f ]+",C:"[^\x7f]+",A:"[A-Za-z0-9]",a:"[A-Za-z0-9 ]"};function bx(){if(ht(this.element,{role:"textbox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-live":"assertive"}),this.mask){for(var t=this.mask.split("]"),e=0;e<t.length;e++)if("\\"===t[e][t[e].length-1]){t[e]=t[e]+"]";for(var i=t[e].split("["),n=0;n<i.length;n++)"\\"===i[n][i[n].length-1]&&(i[n]=i[n]+"["),Ax.call(this,i[n])}else{if((i=t[e].split("[")).length>1){var s=!1;for(n=0;n<i.length;n++)"\\"===i[n]?(this.customRegExpCollec.push("["),this.hiddenMask+=i[n]+"["):""===i[n]?s=!0:""!==i[n]&&s||n===i.length-1?(this.customRegExpCollec.push("["+i[n]+"]"),this.hiddenMask+=this.promptChar,s=!1):Ax.call(this,i[n])}else Ax.call(this,i[0])}if(this.escapeMaskValue=this.hiddenMask,this.promptMask=this.hiddenMask.replace(/[09?LCAa#&]/g,this.promptChar),!y(this.customCharacters))for(e=0;e<this.promptMask.length;e++)y(this.customCharacters[this.promptMask[e]])||(this.promptMask=this.promptMask.replace(new RegExp(this.promptMask[e],"g"),this.promptChar));var r=0;if(this.hiddenMask.match(new RegExp(/\\/)))for(e=0;e<this.hiddenMask.length;e++){n=0;e>=1&&(n=e),n-=r=this.hiddenMask.length-this.promptMask.length,e>0&&"\\"!==this.hiddenMask[e-1]&&(">"===this.hiddenMask[e]||"<"===this.hiddenMask[e]||"|"===this.hiddenMask[e])&&(this.promptMask=this.promptMask.substring(0,n)+this.promptMask.substring(e+1-r,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,n)+this.escapeMaskValue.substring(e+1-r,this.escapeMaskValue.length)),"\\"===this.hiddenMask[e]&&(this.promptMask=this.promptMask.substring(0,n)+this.hiddenMask[e+1]+this.promptMask.substring(e+2-r,this.promptMask.length),this.escapeMaskValue=this.escapeMaskValue.substring(0,n)+this.escapeMaskValue[e+1]+this.escapeMaskValue.substring(e+2-r,this.escapeMaskValue.length))}else this.promptMask=this.promptMask.replace(/[>|<]/g,""),this.escapeMaskValue=this.hiddenMask.replace(/[>|<]/g,"");ht(this.element,{"aria-invalid":"false"})}}function Cx(){ew.call(this,this.promptMask),tw.call(this,this.value)}function Ix(){K.add(this.element,"keydown",Rx,this),K.add(this.element,"keypress",Wx,this),K.add(this.element,"keyup",_x,this),K.add(this.element,"input",Hx,this),K.add(this.element,"focus",Ox,this),K.add(this.element,"blur",zx,this),K.add(this.element,"paste",Px,this),K.add(this.element,"cut",jx,this),K.add(this.element,"drop",Bx,this),K.add(this.element,"mousedown",Nx,this),K.add(this.element,"mouseup",Lx,this),this.enabled&&(Sx.call(this),this.formElement&&K.add(this.formElement,"reset",Dx,this))}function Mx(){K.remove(this.element,"keydown",Rx),K.remove(this.element,"keypress",Wx),K.remove(this.element,"keyup",_x),K.remove(this.element,"input",Hx),K.remove(this.element,"focus",Ox),K.remove(this.element,"blur",zx),K.remove(this.element,"paste",Px),K.remove(this.element,"cut",jx),K.remove(this.element,"drop",Bx),K.remove(this.element,"mousedown",Nx),K.remove(this.element,"mouseup",Lx),this.formElement&&K.remove(this.formElement,"reset",Dx)}function Sx(){this.showClearButton&&K.add(this.inputObj.clearButton,"mousedown touchstart",xx,this)}function xx(t){t.preventDefault(),this.inputObj.clearButton.classList.contains("e-clear-icon-hide")&&!this.inputObj.container.classList.contains("e-static-clear")||(wx.call(this,t),this.value="")}function wx(t){var e=this.element.value;ew.call(this,this.promptMask),this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),Yx.call(this,t,e),this.element.setSelectionRange(0,0)}function Dx(){"EJS-MASKEDTEXTBOX"===this.element.tagName?ew.call(this,this.promptMask):this.value=this.initInputValue}function Ex(t){return t.value}function Tx(t,e){var i="",n=0,s=!1,r=y(e)?y(t)||y(this)?e:t.value:e;if(r!==this.promptMask)for(var o=0;o<this.customRegExpCollec.length;o++)s&&(s=!1),">"!==this.customRegExpCollec[n]&&"<"!==this.customRegExpCollec[n]&&"|"!==this.customRegExpCollec[n]&&"\\"!==this.customRegExpCollec[n]||(--o,s=!0),s||r[o]!==this.promptChar&&!y(this.customRegExpCollec[n])&&(this._callPasteHandler||!y(this.regExpCollec[this.customRegExpCollec[n]])&&!this.maskedRegExp.includes(this.customRegExpCollec[n])||this.customRegExpCollec[n].length>2&&"["===this.customRegExpCollec[n][0]&&"]"===this.customRegExpCollec[n][this.customRegExpCollec[n].length-1]||!y(this.customCharacters)&&!y(this.customCharacters[this.customRegExpCollec[n]]))&&""!==r&&(i+=r[o]),++n;return(null===this.mask||""===this.mask&&void 0!==this.value)&&(i=r),i}function Ax(t){for(var e=0;e<t.length;e++)this.hiddenMask+=t[e],"\\"!==t[e]?this.customRegExpCollec.push(t[e]):"\\"!==t[e]||y(this.regExpCollec[t[e+1]])||this.maskedRegExp.push(t[e+1])}function Nx(){this.isClicked=!0}function Lx(){this.isClicked=!1}function Ox(t){var e,i=this,n=this.element,s=0,r=Tx.call(this,n),o=!1,a=!1,l={selectionStart:n.selectionStart,event:t,value:this.value,maskedValue:n.value,container:y(this.inputObj)?this.inputObj:this.inputObj.container,selectionEnd:n.selectionEnd};if(this.isClicked||kx.call(this,l,n),this.mask&&(null!==r&&""!==r||"Always"===this.floatLabelType||null===this.placeholder||""===this.placeholder||(n.value=this.promptMask),setTimeout(function(){if(n.selectionStart===i.promptMask.length||n.value[n.selectionStart]===i.promptChar)o=!0;else for(var t=n.selectionStart;t<i.promptMask.length;t++){if(n.value[t]===i.promptChar){o=!0;break}if(n.value[t]!==i.promptMask[t]){o=!1;break}}}),setTimeout(function(){var t=n.selectionStart-1;if(t===i.promptMask.length-1||n.value[t]===i.promptChar)a=!0;else for(var e=t;e>=0;e--){if(n.value[e]===i.promptChar){a=!0;break}if(n.value[e]!==i.promptMask[e]){a=!1;break}}}),this.isClicked||"Always"!==this.floatLabelType&&(null===r||""===r)&&null!==this.placeholder&&""!==this.placeholder)){for(s=0;s<this.promptMask.length;s++)if(n.value[s]===this.promptChar){setTimeout(function(){(o||a)&&(n.selectionEnd=s,n.selectionStart=s),l={selectionStart:n.selectionStart,event:t,value:i.value,maskedValue:n.value,container:y(i.inputObj)?i.inputObj:i.inputObj.container,selectionEnd:n.selectionEnd},kx.call(i,l,n)},110);break}y(n.value.match(y(e=this.promptChar)?e:e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")))&&(l={selectionStart:n.selectionStart,event:t,value:this.value,maskedValue:n.value,container:y(this.inputObj)?this.inputObj:this.inputObj.container,selectionEnd:n.selectionEnd},kx.call(this,l,n)),this.isClicked=!1}}function kx(t,e){this.trigger("focus",t,function(t){e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd})}function zx(t){if(this.blurEventArgs={event:t,value:this.value,maskedValue:this.element.value,container:y(this.inputObj)?this.inputObj:this.inputObj.container},this.trigger("blur",this.blurEventArgs),this.mask&&(this.isFocus=!1,this.placeholder&&this.element.value===this.promptMask&&"Always"!==this.floatLabelType)){ew.call(this,"");var e=this.element.parentNode.querySelector(".e-float-text");"Auto"===this.floatLabelType&&!y(e)&&e.classList.contains(yx)&&et([e],yx)}}function Px(t){var e=this;if(this.mask&&!this.readonly){var i=this.element.selectionStart,n=this.element.selectionEnd,s=this.element.value;ew.call(this,""),this._callPasteHandler=!0,setTimeout(function(){var r=e.element.value.replace(/ /g,"");e.redoCollec.length>0&&e.redoCollec[0].value===e.element.value&&(r=Tx.call(e,e.element)),ew.call(e,s),e.element.selectionStart=i,e.element.selectionEnd=n;var o=0;e.maskKeyPress=!0;do{qx.call(e,r[o],!1,null),++o}while(o<r.length);if(e.maskKeyPress=!1,e._callPasteHandler=!1,e.element.value===s){var a=0;e.maskKeyPress=!0;do{qx.call(e,r[a],!1,null),++a}while(a<r.length);e.maskKeyPress=!1}else Yx.call(e,t,s)},1)}}function jx(t){var e=this;if(this.mask&&!this.readonly){var i=this.element.value,n=this.element.selectionStart,s=this.element.selectionEnd;this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd});var r=this.element.value.substring(0,n)+this.promptMask.substring(n,s)+this.element.value.substring(s);setTimeout(function(){ew.call(e,r),e.element.selectionStart=e.element.selectionEnd=n,e.element.value!==i&&Yx.call(e,t,null)},0)}}function Bx(t){t.preventDefault()}function Hx(t){if(!0!==G.isIE||""!==this.element.value||"Never"!==this.floatLabelType){if(f(t,{ctrlKey:!1,keyCode:229}),this.mask){if(""===this.element.value&&this.redoCollec.unshift({value:this.promptMask,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this._callPasteHandler||Fx.call(this,t),this.element.value.length>this.promptMask.length){var e=this.element.selectionStart,i=this.element.value.length-this.promptMask.length,n=this.element.value.substring(e-i,e);this.maskKeyPress=!1;var s=0;do{qx.call(this,n[s],t.ctrlKey,t),++s}while(s<n.length);this.element.value!==this.preEleVal&&Yx.call(this,t,null)}var r=Tx.call(this,this.element);this.prevValue=r,this.value=r,""===r&&(ew.call(this,this.promptMask),this.element.setSelectionRange(0,0))}}}function Rx(t){if(this.mask&&!this.readonly){229!==t.keyCode&&(!t.ctrlKey||89!==t.keyCode&&90!==t.keyCode||t.preventDefault(),Fx.call(this,t));var e=this.element.value;if(t.ctrlKey&&(89===t.keyCode||90===t.keyCode)){var i=void 0;90===t.keyCode&&this.undoCollec.length>0&&e!==this.undoCollec[this.undoCollec.length-1].value?(i=this.undoCollec[this.undoCollec.length-1],this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),ew.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.undoCollec.splice(this.undoCollec.length-1,1)):89===t.keyCode&&this.redoCollec.length>0&&e!==this.redoCollec[0].value&&(i=this.redoCollec[0],this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),ew.call(this,i.value),this.element.selectionStart=i.startIndex,this.element.selectionEnd=i.endIndex,this.redoCollec.splice(0,1))}}}function Vx(){var t,e=this.element.selectionStart,i=this.element.selectionEnd;this.redoCollec.length>0?(t=this.redoCollec[0],ew.call(this,t.value),t.startIndex-e===1?(this.element.selectionStart=t.startIndex,this.element.selectionEnd=t.endIndex):(this.element.selectionStart=e+1,this.element.selectionEnd=i+1)):(ew.call(this,this.promptMask),this.element.selectionStart=this.element.selectionEnd=e)}function Ux(t,e,i){return"input"===i.type&&(t=!1,e=this.element.value,ew.call(this,this.promptMask),tw.call(this,e)),t}function Fx(t){var e,i=!1,n=!1;this.element.value.length<this.promptMask.length&&(i=!0,e=this.element.value,i=Ux.call(this,i,e,t),Vx.call(this)),this.element.value.length>=this.promptMask.length&&"input"===t.type&&(i=Ux.call(this,i,e,t));var s=this.element.selectionStart,r=this.element.selectionEnd,o=this.element.selectionStart,a=this.element.selectionEnd,l=this.hiddenMask.replace(/[>|\\<]/g,""),h=l[o-1],c=this.element.selectionEnd;if(i||8===t.keyCode||46===t.keyCode){this.undoCollec.push({value:this.element.value,startIndex:this.element.selectionStart,endIndex:a});var d=!1,p=this.element.value;if(o>0||(8===t.keyCode||46===t.keyCode)&&o<this.element.value.length&&this.element.selectionEnd-o!==this.element.value.length){var u=o;o!==a?(o=a,46===t.keyCode&&(d=!0)):46===t.keyCode?++u:--u;for(var g=o;8===t.keyCode||i||d?g>u:g<u;8===t.keyCode||i||d?g--:g++)for(var m=o;8===t.keyCode||i||d?m>0:m<this.element.value.length;8===t.keyCode||i||d?m--:m++){var f=void 0;(8===t.keyCode||d)&&(s!==r&&s!==o||s===r)||i?(h=l[m-1],f=o-1):(h=l[m],f=o,++o);var v=this.element.value[f];if(y(this.regExpCollec[""+h])&&!y(this.customCharacters)&&y(this.customCharacters[""+h])&&this.hiddenMask[f]!==this.promptChar&&"["!==this.customRegExpCollec[f][0]&&"]"!==this.customRegExpCollec[f][this.customRegExpCollec[f].length-1]||this.promptMask[f]!==this.promptChar&&y(this.customCharacters))this.element.selectionStart=this.element.selectionEnd=f,t.preventDefault(),46!==t.keyCode||d||++this.element.selectionStart;else{var b=this.element.value,C=this.promptChar,I=b.substring(0,f)+C+b.substring(o,b.length);ew.call(this,I),t.preventDefault(),46!==t.keyCode||d||f++,this.element.selectionStart=this.element.selectionEnd=f,n=!0}if(o=this.element.selectionStart,!n&&8===t.keyCode||d||!n&&46!==t.keyCode?f=o-1:(f=o,n=!1),v=this.element.value[f],s!==r&&this.element.selectionStart===s||this.promptMask[f]===this.promptChar||v!==this.promptMask[f]&&this.promptMask[f]!==this.promptChar&&!y(this.customCharacters))break}}46===t.keyCode&&d&&n&&(this.element.selectionStart=this.element.selectionEnd=c),0===this.element.selectionStart&&this.element.selectionEnd===this.element.value.length&&(ew.call(this,this.promptMask),t.preventDefault(),this.element.selectionStart=this.element.selectionEnd=o),this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),this.element.value!==p&&Yx.call(this,t,e)}}function Wx(t){if(this.mask&&!this.readonly){var e=this.element.value;if(!t.ctrlKey&&!t.metaKey||(t.ctrlKey||t.metaKey)&&"KeyA"!==t.code&&"KeyY"!==t.code&&"KeyZ"!==t.code&&"KeyX"!==t.code&&"KeyC"!==t.code&&"KeyV"!==t.code){this.maskKeyPress=!0;var i=t.key;"Spacebar"===i&&(i=String.fromCharCode(t.keyCode)),i?i&&1===i.length&&(qx.call(this,i,t.ctrlKey,t),t.preventDefault()):(this.isIosInvalid=!0,qx.call(this,String.fromCharCode(t.keyCode),t.ctrlKey,t),t.preventDefault(),this.isIosInvalid=!1),32===t.keyCode&&" "===i&&" "===this.promptChar&&(this.element.selectionStart=this.element.selectionEnd=this.element.selectionStart-i.length)}this.element.value!==e&&Yx.call(this,t,e)}}function Yx(t,e){var i=this.isProtectedOnChange;if(!y(this.changeEventArgs)&&!this.isInitial){var n={};this.changeEventArgs={value:this.element.value,maskedValue:this.element.value,isInteraction:!1,isInteracted:!1},this.mask&&(this.changeEventArgs.value=Tx.call(this,this.element)),y(t)||(this.changeEventArgs.isInteracted=!0,this.changeEventArgs.isInteraction=!0,this.changeEventArgs.event=t),this.isProtectedOnChange=!0,this.value=this.changeEventArgs.value,this.isProtectedOnChange=i,m(n,this.changeEventArgs),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}this.preEleVal=this.element.value,this.prevValue=Tx.call(this,this.element)}function _x(t){if(this.mask&&!this.readonly){var e=void 0;if(this.maskKeyPress||229!==t.keyCode)Jx.call(this);else{var i=void 0;if(1===this.element.value.length&&(this.element.value=this.element.value+this.promptMask,this.element.setSelectionRange(1,1)),this.element.value.length>this.promptMask.length){var n=this.element.selectionStart,s=this.element.value.length-this.promptMask.length,r=this.element.value.substring(n-s,n);if(this.undoCollec.length>0){e=this.undoCollec[this.undoCollec.length-1];var o=this.element.selectionStart;i=e.value;var a=e.value.substring(o-s,o);e=this.redoCollec[0],r=r.trim();var l=G.isAndroid&&""===r;l||a===r||e.value.substring(o-s,o)===r?l&&Gx.call(this,t,o-1,this.element.selectionEnd-1,r,t.ctrlKey,!1):qx.call(this,r,t.ctrlKey,t)}else i=this.promptMask,qx.call(this,r,t.ctrlKey,t);this.maskKeyPress=!1,Yx.call(this,t,i)}}var h=Tx.call(this,this.element);(0!==this.element.selectionStart||this.promptMask!==this.element.value||""!==h||""===h&&this.value!==h)&&(this.prevValue=h,this.value=h)}else Yx.call(this,t);if(0===this.element.selectionStart&&0===this.element.selectionEnd){var c=this.element;setTimeout(function(){c.setSelectionRange(0,0)},0)}}function Qx(t){if(t.length>1&&this.promptMask.length+t.length<this.element.value.length){var e=this.redoCollec[0].value.substring(0,this.redoCollec[0].startIndex)+t+this.redoCollec[0].value.substring(this.redoCollec[0].startIndex,this.redoCollec[0].value.length);ew.call(this,e),this.element.selectionStart=this.element.selectionEnd=this.redoCollec[0].startIndex+t.length}this.element.selectionStart=this.element.selectionStart-t.length,this.element.selectionEnd=this.element.selectionEnd-t.length}function Zx(t){this.maskKeyPress||Qx.call(this,t)}function qx(t,e,i){if(Zx.call(this,t),!y(this)&&!y(t))for(var n,s,r=this.element.selectionStart,o=r,a=!1,l=this.element.value,h=!1,c=!1,d=0;d<t.length;d++){var p=t[d];if(r=this.element.selectionStart,this.maskKeyPress||o!==r||(r+=d),!this.maskKeyPress||r<this.promptMask.length){for(var u=r;u<this.promptMask.length;u++){n=this.escapeMaskValue[r],"\\"===this.hiddenMask[r]&&this.hiddenMask[r+1]===t&&(c=!0),(y(this.regExpCollec[""+n])&&(y(this.customCharacters)||!y(this.customCharacters)&&y(this.customCharacters[""+n]))&&this.hiddenMask[r]!==this.promptChar&&"["!==this.customRegExpCollec[r][0]&&"]"!==this.customRegExpCollec[r][this.customRegExpCollec[r].length-1]||this.promptMask[r]!==this.promptChar&&y(this.customCharacters)||this.promptChar===n&&this.escapeMaskValue===this.mask)&&(this.element.selectionStart=this.element.selectionEnd=r+1,r=this.element.selectionStart,n=this.hiddenMask[r])}if(y(this.customCharacters)||y(this.customCharacters[""+n]))(!y(this.regExpCollec[""+n])&&p.match(new RegExp(this.regExpCollec[""+n]))&&this.promptMask[r]===this.promptChar||this.promptMask[r]===this.promptChar&&"["===this.customRegExpCollec[r][0]&&"]"===this.customRegExpCollec[r][this.customRegExpCollec[r].length-1]&&p.match(new RegExp(this.customRegExpCollec[r])))&&(a=!0);else{var g=this.customCharacters[""+n].split(",");for(u=0;u<g.length;u++)if(p.match(new RegExp("["+g[u]+"]"))){a=!0;break}}if((!this.maskKeyPress||r<this.hiddenMask.length)&&a){if(0===d)if(this.maskKeyPress)this.undoCollec.push({value:l,startIndex:r,endIndex:r});else{var m=this.element.selectionStart,f=this.element.selectionEnd;this.redoCollec.length>0?(s=this.redoCollec[0].value,ew.call(this,s),this.undoCollec.push(this.redoCollec[0])):(this.undoCollec.push({value:this.promptMask,startIndex:r,endIndex:r}),s=this.promptMask,ew.call(this,s)),this.element.selectionStart=m,this.element.selectionEnd=f}r=this.element.selectionStart,Xx.call(this,i,r,p,s,c),h=!0,d===t.length-1&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd}),a=!1}else r=this.element.selectionStart,Gx.call(this,i,r,o,t,e,h);d!==t.length-1||a||(!G.isAndroid||G.isAndroid&&r<this.promptMask.length)&&this.redoCollec.unshift({value:this.element.value,startIndex:this.element.selectionStart,endIndex:this.element.selectionEnd})}else 1!==t.length||e||y(i)||Kx.call(this)}}function Xx(t,e,i,n,s){if(this.hiddenMask.length>this.promptMask.length&&(i=$x.call(this,i,this.element.value)),!s){var r=this.element.value,o=r.substring(0,e)+i+r.substring(e+1,r.length);ew.call(this,o),this.element.selectionStart=this.element.selectionEnd=e+1}}function Gx(t,e,i,n,s,r){if(!this.maskKeyPress){var o=this.element.value;e>=this.promptMask.length?ew.call(this,o.substring(0,e)):(i===e?ew.call(this,o.substring(0,e)+o.substring(e+1,o.length)):this.promptMask.length===this.element.value.length?ew.call(this,o.substring(0,e)+o.substring(e,o.length)):ew.call(this,o.substring(0,i)+o.substring(i+1,o.length)),this.element.selectionStart=this.element.selectionEnd=r||this.element.value[i]!==this.promptChar?e:i),Kx.call(this)}1!==n.length||s||y(t)||Kx.call(this)}function Kx(){var t=this,e=this.element.parentNode,i=200;e.classList.contains("e-input-group")||e.classList.contains("e-float-input")?tt([e],fx):tt([this.element],fx),!0===this.isIosInvalid&&(i=400),ht(this.element,{"aria-invalid":"true"}),setTimeout(function(){t.maskKeyPress||Jx.call(t)},i)}function Jx(){var t=this.element.parentNode;y(t)||et([t],fx),et([this.element],fx),ht(this.element,{"aria-invalid":"false"})}function $x(t,e){var i,n,s=e,r=0;for(n=0;n<this.hiddenMask.length;n++)if("\\"===this.hiddenMask[n]&&(i=s.substring(0,n)+"\\"+s.substring(n,s.length)),">"!==this.hiddenMask[n]&&"<"!==this.hiddenMask[n]&&"|"!==this.hiddenMask[n]||(this.hiddenMask[n]!==s[n]&&(i=s.substring(0,n)+this.hiddenMask[n]+s.substring(n,s.length)),++r),i){if(i[n]===this.promptChar&&n>this.element.selectionStart||this.element.value.indexOf(this.promptChar)<0&&this.element.selectionStart+r===n){r=0;break}s=i}for(;n>=0&&i;){if(0===n||"\\"!==i[n-1]){if(">"===i[n]){t=t.toUpperCase();break}if("<"===i[n]){t=t.toLowerCase();break}if("|"===i[n])break}--n}return t}function tw(t){if(this.mask&&void 0!==t&&(void 0===this.prevValue||this.prevValue!==t)){if(this.maskKeyPress=!0,ew.call(this,this.promptMask),""===t||null===t&&"Never"===this.floatLabelType&&this.placeholder||(this.element.selectionStart=0,this.element.selectionEnd=0),null!==t)for(var e=0;e<t.length;e++)qx.call(this,t[e],!1,null);var i=Tx.call(this,this.element);this.prevValue=i,this.value=i,Yx.call(this,null,null),this.maskKeyPress=!1;var n=this.element.parentNode.querySelector(".e-float-text");this.element.value===this.promptMask&&"Auto"===this.floatLabelType&&this.placeholder&&!y(n)&&n.classList.contains(yx)&&!this.isFocus&&(et([n],yx),tt([n],"e-label-bottom"),ew.call(this,""))}(null===this.mask||""===this.mask&&void 0!==this.value)&&ew.call(this,this.value)}function ew(t,e){!this.isFocus&&"Auto"===this.floatLabelType&&this.placeholder&&y(this.value)&&(t="");var i=Tx.call(this,e||this.element,t);null===i||""===i?(hI.setValue(t,e||this.element,this.floatLabelType,!1),this.showClearButton&&this.inputObj.clearButton.classList.add("e-clear-icon-hide")):hI.setValue(t,e||this.element,this.floatLabelType,this.showClearButton)}new function(){};var iw,nw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sw=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},rw="e-input-focus",ow=["title","style","class"],aw=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.initInputValue="",n.preventChange=!1,n.isClicked=!1,n.maskOptions=e,n}return nw(e,t),e.prototype.getModuleName=function(){return"maskedtextbox"},e.prototype.preRender=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.regExpCollec=vx,this.customRegExpCollec=[],this.maskedRegExp=[],this.undoCollec=[],this.redoCollec=[],this.changeEventArgs={},this.focusEventArgs={},this.blurEventArgs={},this.maskKeyPress=!1,this.isFocus=!1,this.isInitial=!1,this.isIosInvalid=!1;var t=c("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),et([this.cloneElement],["e-control","e-maskedtextbox","e-lib"]),this.angularTagName=null,this.formElement=ut(this.element,"form"),"EJS-MASKEDTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var e=this.createElement("input"),i=0;i<this.element.attributes.length;i++)e.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML;this.element.hasAttribute("id")&&this.element.removeAttribute("id"),this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-maskedtextbox"),this.element.classList.add("e-mask-container"),this.element.appendChild(e),this.element=e,d("ej2_instances",t,this.element)}this.updateHTMLAttrToElement(),this.checkHtmlAttributes(!1),this.formElement&&(this.initInputValue=this.value)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&("Never"===this.floatLabelType&&tt([this.element],"e-input"),this.createWrapper(),this.updateHTMLAttrToWrapper(),""===this.element.name&&this.element.setAttribute("name",this.element.id),this.isInitial=!0,this.resetMaskedTextBox(),this.isInitial=!1,this.setMaskPlaceholder(!0,!1),this.setWidth(this.width),this.preEleVal=this.element.value,G.isDevice||"11.0"!==G.info.version&&"edge"!==G.info.name||this.element.blur(),G.isDevice&&G.isIos&&this.element.blur(),(this.element.getAttribute("value")||this.value)&&this.element.setAttribute("value",this.element.value),!y(ut(this.element,"fieldset"))&&ut(this.element,"fieldset").disabled&&(this.enabled=!1),this.element.hasAttribute("aria-labelledby")||this.element.hasAttribute("placeholder")||this.element.hasAttribute("aria-label")||this.element.setAttribute("aria-label","maskedtextbox"),this.renderComplete())},e.prototype.updateHTMLAttrToElement=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];ow.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.updateCssClass=function(t,e){hI.setCssClass(this.getValidClassList(t),[this.inputObj.container],this.getValidClassList(e))},e.prototype.getValidClassList=function(t){var e=t;return y(t)||""===t||(e=t.replace(/\s+/g," ").trim()),e},e.prototype.updateHTMLAttrToWrapper=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(ow.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&tt([this.inputObj.container],n.split(" "))}else if("style"===i){var s=this.inputObj.container.getAttribute(i);s=y(s)?this.htmlAttributes[""+i]:s+this.htmlAttributes[""+i],this.inputObj.container.setAttribute(i,s)}else this.inputObj.container.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.resetMaskedTextBox=function(){this.promptMask="",this.hiddenMask="",this.escapeMaskValue="",this.customRegExpCollec=[],this.undoCollec=[],this.redoCollec=[],this.promptChar&&this.promptChar.length>1&&(this.promptChar=this.promptChar[0]),bx.call(this),Cx.call(this),(null===this.mask||""===this.mask&&void 0!==this.value)&&ew.call(this,this.value);var t=Tx.call(this,this.element);this.prevValue=t,this.value=t,this.isInitial||Mx.call(this),Ix.call(this)},e.prototype.setMaskPlaceholder=function(t,e){(e||this.placeholder)&&(hI.setPlaceholder(this.placeholder,this.element),(this.element.value===this.promptMask&&t&&"Always"!==this.floatLabelType||this.element.value===this.promptMask&&"Never"===this.floatLabelType)&&ew.call(this,""))},e.prototype.setWidth=function(t){if(!y(t))if("number"==typeof t)this.inputObj.container.style.width=S(t),this.element.style.width=S(t);else if("string"==typeof t){var e=t.match(/px|%|em/)?t:S(t);this.inputObj.container.style.width=e,this.element.style.width=e}},e.prototype.checkHtmlAttributes=function(t){for(var e=0,i=t?y(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];e<i.length;e++){var n=i[e];if(!y(this.element.getAttribute(n)))switch(n){case"placeholder":(y(this.maskOptions)||void 0===this.maskOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"disabled":if(y(this.maskOptions)||void 0===this.maskOptions.enabled||t){var s="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:s},!t)}break;case"value":(y(this.maskOptions)||void 0===this.maskOptions.value||t)&&this.setProperties({value:this.element.value},!t);break;case"readonly":if(y(this.maskOptions)||void 0===this.maskOptions.readonly||t){var r="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:r},!t)}}}},e.prototype.createWrapper=function(){var t=this.cssClass;y(this.cssClass)||""===this.cssClass||(t=this.getValidClassList(this.cssClass)),this.inputObj=hI.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enableRtl:this.enableRtl,cssClass:t,enabled:this.enabled,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}},this.createElement),this.inputObj.container.setAttribute("class","e-control-wrapper e-mask "+this.inputObj.container.getAttribute("class"))},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"value":tw.call(this,this.value),this.placeholder&&!this.isFocus&&this.setMaskPlaceholder(!1,!1),""===this.value&&null!=e.value&&(this.element.selectionStart=0,this.element.selectionEnd=0);break;case"placeholder":this.setMaskPlaceholder(!0,!0);break;case"width":this.setWidth(t.width),hI.calculateWidth(this.element,this.inputObj.container);break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass);break;case"enabled":hI.setEnabled(t.enabled,this.element,this.floatLabelType,this.inputObj.container);break;case"readonly":hI.setReadonly(t.readonly,this.element);break;case"enableRtl":hI.setEnableRtl(t.enableRtl,[this.inputObj.container]);break;case"customCharacters":this.customCharacters=t.customCharacters,this.resetMaskedTextBox();break;case"showClearButton":hI.setClearButton(t.showClearButton,this.element,this.inputObj,void 0,this.createElement),Sx.call(this);break;case"floatLabelType":this.floatLabelType=t.floatLabelType,hI.removeFloating(this.inputObj),hI.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement);break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHtmlAttributes(!0);break;case"mask":var s=this.value;this.mask=t.mask,this.maskedRegExp=[],this.updateValue(s);break;case"promptChar":t.promptChar.length>1&&(t.promptChar=t.promptChar[0]),t.promptChar?this.promptChar=t.promptChar:this.promptChar="_";var r=this.element.value.replace(new RegExp("["+e.promptChar+"]","g"),this.promptChar);this.promptMask===this.element.value&&(r=this.promptMask.replace(new RegExp("["+e.promptChar+"]","g"),this.promptChar)),this.promptMask=this.promptMask.replace(new RegExp("["+e.promptChar+"]","g"),this.promptChar),this.undoCollec=this.redoCollec=[],ew.call(this,r)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},e.prototype.updateValue=function(t){this.resetMaskedTextBox(),tw.call(this,t)},e.prototype.getMaskedValue=function(){return Ex.call(this,this.element)},e.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.isFocus=!0,this.element.focus(),tt([this.inputObj.container],[rw]))},e.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.isFocus=!1,this.element.blur(),et([this.inputObj.container],[rw]))},e.prototype.destroy=function(){Mx.call(this),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]);for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.inputObj&&(this.inputObj.container.insertAdjacentElement("afterend",this.element),at(this.inputObj.container)),this.blurEventArgs=null,hI.destroy({element:this.element,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),this.changeEventArgs=null,this.inputObj=null,t.prototype.destroy.call(this)},sw([jt(null)],e.prototype,"cssClass",void 0),sw([jt(null)],e.prototype,"width",void 0),sw([jt(null)],e.prototype,"placeholder",void 0),sw([jt("Never")],e.prototype,"floatLabelType",void 0),sw([jt({})],e.prototype,"htmlAttributes",void 0),sw([jt(!0)],e.prototype,"enabled",void 0),sw([jt(!1)],e.prototype,"readonly",void 0),sw([jt(!1)],e.prototype,"showClearButton",void 0),sw([jt(!1)],e.prototype,"enablePersistence",void 0),sw([jt(null)],e.prototype,"mask",void 0),sw([jt("_")],e.prototype,"promptChar",void 0),sw([jt(null)],e.prototype,"value",void 0),sw([jt(null)],e.prototype,"customCharacters",void 0),sw([Ut()],e.prototype,"created",void 0),sw([Ut()],e.prototype,"destroyed",void 0),sw([Ut()],e.prototype,"change",void 0),sw([Ut()],e.prototype,"focus",void 0),sw([Ut()],e.prototype,"blur",void 0),e=sw([Ft],e)}(_e),lw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hw=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},cw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lw(e,t),hw([jt("None")],e.prototype,"placement",void 0),hw([jt(10)],e.prototype,"largeStep",void 0),hw([jt(1)],e.prototype,"smallStep",void 0),hw([jt(!1)],e.prototype,"showSmallTicks",void 0),hw([jt(null)],e.prototype,"format",void 0),e}(re),dw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lw(e,t),hw([jt(null)],e.prototype,"color",void 0),hw([jt(null)],e.prototype,"start",void 0),hw([jt(null)],e.prototype,"end",void 0),e}(re),pw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lw(e,t),hw([jt(!1)],e.prototype,"enabled",void 0),hw([jt(null)],e.prototype,"minStart",void 0),hw([jt(null)],e.prototype,"minEnd",void 0),hw([jt(null)],e.prototype,"maxStart",void 0),hw([jt(null)],e.prototype,"maxEnd",void 0),hw([jt(!1)],e.prototype,"startHandleFixed",void 0),hw([jt(!1)],e.prototype,"endHandleFixed",void 0),e}(re),uw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lw(e,t),hw([jt("")],e.prototype,"cssClass",void 0),hw([jt("Before")],e.prototype,"placement",void 0),hw([jt("Focus")],e.prototype,"showOn",void 0),hw([jt(!1)],e.prototype,"isVisible",void 0),hw([jt(null)],e.prototype,"format",void 0),e}(re),gw=1e-10,mw="e-slider",fw="e-rtl",yw="e-slider-input",vw="e-control-wrapper",bw="e-handle",Cw="e-range",Iw="e-slider-button",Mw="e-first-button",Sw="e-second-button",xw="e-scale",ww="e-tick",Dw="e-large",Ew="e-tick-value",Tw="e-slider-tooltip",Aw="e-slider-hover",Nw="e-handle-first",Lw="e-handle-second",Ow="e-disabled",kw="e-slider-container",zw="e-slider-horizontal-before",Pw="e-slider-horizontal-after",jw="e-slider-vertical-before",Bw="e-slider-vertical-after",Hw="e-material-tooltip-open",Rw="e-tooltip-active",Vw="e-material-slider",Uw="e-slider-track",Fw="e-slider-horizantal-color",Ww="e-slider-vertical-color",Yw="e-handle-focused",_w="e-vertical",Qw="e-horizontal",Zw="e-handle-start",qw="e-material-tooltip-start",Xw="e-tab-handle",Gw="e-button-icon",Kw="e-small-size",Jw="e-tick-pos",$w="e-first-tick",tD="e-last-tick",eD="e-slider-btn",iD="e-tab-track",nD="e-tab-range",sD="e-handle-active",rD="e-material-handle",oD="e-material-range",aD="e-material-default",lD="e-material-tooltip-show",hD="e-material-tooltip-hide",cD="e-read-only",dD="e-limits",pD="e-limit-bar",uD="e-limit-first",gD="e-limit-second",mD="e-drag-horizontal",fD="e-drag-vertical",yD=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.horDir="left",n.verDir="bottom",n.transition={handle:"left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)",rangeBar:"all .4s cubic-bezier(.25, .8, .25, 1)"},n.transitionOnMaterialTooltip={handle:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out",rangeBar:"left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out"},n.scaleTransform="transform .4s cubic-bezier(.25, .8, .25, 1)",n.customAriaText=null,n.drag=!0,n.isDragComplete=!1,n.initialTooltip=!0,n}return lw(e,t),e.prototype.preRender=function(){this.l10n=new ri("slider",{incrementTitle:"Increase",decrementTitle:"Decrease"},this.locale),this.isElementFocused=!1,this.tickElementCollection=[],this.tooltipFormatInfo={},this.ticksFormatInfo={},this.initCultureInfo(),this.initCultureFunc(),this.formChecker()},e.prototype.formChecker=function(){var t=ut(this.element,"form");t?(this.isForm=!0,y(this.formResetValue)||this.setProperties({value:this.formResetValue},!0),this.formResetValue=this.value,"Range"!==this.type||!y(this.formResetValue)&&"object"==typeof this.formResetValue?y(this.formResetValue)&&(this.formResetValue=parseFloat(S(this.min))):this.formResetValue=[parseFloat(S(this.min)),parseFloat(S(this.max))],this.formElement=t):this.isForm=!1},e.prototype.initCultureFunc=function(){this.internationalization=new Te(this.locale)},e.prototype.initCultureInfo=function(){this.tooltipFormatInfo.format=y(this.tooltip.format)?null:this.tooltip.format,this.ticksFormatInfo.format=y(this.ticks.format)?null:this.ticks.format},e.prototype.formatString=function(t,e){var i=null,n=null;if(t||0===t){i=this.formatNumber(t);var s=this.numberOfDecimals(t);n=this.internationalization.getNumberFormat(e)(this.makeRoundNumber(t,s))}return{elementVal:i,formatString:n}},e.prototype.formatNumber=function(t){var e=this.numberOfDecimals(t);return this.internationalization.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},e.prototype.numberOfDecimals=function(t){var e=t.toString().split(".")[1];return e&&e.length?e.length:0},e.prototype.makeRoundNumber=function(t,e){var i=e||0;return Number(t.toFixed(i))},e.prototype.render=function(){var t=this;this.initialize(),this.initRender(),this.wireEvents(),this.setZindex(),this.renderComplete(),"EJS-SLIDER"===this.element.tagName&&"none"===this.getTheme(this.sliderContainer)&&setTimeout(function(){t.refresh()},0)},e.prototype.initialize=function(){tt([this.element],mw),this.setCSSClass()},e.prototype.setElementWidth=function(t){y(t)||y(this.sliderContainer)||("number"==typeof t?this.sliderContainer.style.width=S(t):"string"==typeof t&&(this.sliderContainer.style.width=t.match(/px|%|em/)?t:S(t)))},e.prototype.setCSSClass=function(t){t&&et([this.element],t.split(" ")),this.cssClass&&tt([this.element],this.cssClass.split(" "))},e.prototype.setEnabled=function(){this.enabled?(et([this.sliderContainer],[Ow]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.remove(Ow),this.wireEvents()):(tt([this.sliderContainer],[Ow]),this.tooltip.isVisible&&this.tooltipElement&&"Always"===this.tooltip.showOn&&this.tooltipElement.classList.add(Ow),this.unwireEvents())},e.prototype.getTheme=function(t){return window.getComputedStyle(t,":after").getPropertyValue("content").replace(/['"]+/g,"")},e.prototype.initRender=function(){this.sliderContainer=this.createElement("div",{className:kw+" "+vw}),this.element.parentNode.insertBefore(this.sliderContainer,this.element),this.sliderContainer.appendChild(this.element),this.sliderTrack=this.createElement("div",{className:Uw}),this.element.appendChild(this.sliderTrack),this.setElementWidth(this.width),this.element.tabIndex=-1,this.getThemeInitialization(),this.setHandler(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setOrientClass(),this.hiddenInput=this.createElement("input",{attrs:{type:"hidden",value:y(this.value)?y(this.min)?"0":this.min.toString():this.value.toString(),name:this.element.getAttribute("name")||this.element.getAttribute("id")||"_"+(1e3*Math.random()).toFixed(0)+"slider",class:yw}}),this.hiddenInput.tabIndex=-1,this.sliderContainer.appendChild(this.hiddenInput),this.showButtons&&this.setButtons(),this.setEnableRTL(),"Range"===this.type?this.rangeValueUpdate():this.value=y(this.value)?y(this.min)?0:parseFloat(S(this.min.toString())):this.value,this.previousVal="Range"!==this.type?this.checkHandleValue(parseFloat(S(this.value.toString()))):[this.checkHandleValue(parseFloat(S(this.value[0].toString()))),this.checkHandleValue(parseFloat(S(this.value[1].toString())))],this.previousChanged=this.previousVal,y(this.element.hasAttribute("name"))||this.element.removeAttribute("name"),this.setValue(),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.renderScale(),this.tooltip.isVisible&&this.renderTooltip(),this.enabled?et([this.sliderContainer],[Ow]):tt([this.sliderContainer],[Ow]),this.readonly?tt([this.sliderContainer],[cD]):et([this.sliderContainer],[cD])},e.prototype.getThemeInitialization=function(){this.isMaterial="material"===this.getTheme(this.sliderContainer)||"material-dark"===this.getTheme(this.sliderContainer),this.isMaterial3="Material3"===this.getTheme(this.sliderContainer)||"Material3-dark"===this.getTheme(this.sliderContainer),this.isBootstrap="bootstrap"===this.getTheme(this.sliderContainer)||"bootstrap-dark"===this.getTheme(this.sliderContainer),this.isBootstrap4="bootstrap4"===this.getTheme(this.sliderContainer),this.isTailwind="tailwind"===this.getTheme(this.sliderContainer)||"tailwind-dark"===this.getTheme(this.sliderContainer),this.isTailwind3="tailwind3"===this.getTheme(this.sliderContainer)||"tailwind3-dark"===this.getTheme(this.sliderContainer),this.isBootstrap5="bootstrap5"===this.getTheme(this.sliderContainer),this.isFluent="FluentUI"===this.getTheme(this.sliderContainer),this.isFluent2="fluent2"===this.getTheme(this.sliderContainer),this.isBootstrap5Dot3="bootstrap5.3"===this.getTheme(this.sliderContainer),this.isMaterialTooltip=(this.isMaterial||this.isMaterial3)&&"Range"!==this.type&&this.tooltip.isVisible},e.prototype.createRangeBar=function(){"Default"!==this.type&&(this.rangeBar=this.createElement("div",{attrs:{class:Cw}}),this.element.appendChild(this.rangeBar),this.drag&&"Range"===this.type&&("Horizontal"===this.orientation?this.rangeBar.classList.add(mD):this.rangeBar.classList.add(fD)))},e.prototype.createLimitBar=function(){var t="Range"!==this.type?pD:uD;t+=" "+dD,this.limitBarFirst=this.createElement("div",{attrs:{class:t}}),this.element.appendChild(this.limitBarFirst),"Range"===this.type&&(this.limitBarSecond=this.createElement("div",{attrs:{class:gD+" "+dD}}),this.element.appendChild(this.limitBarSecond))},e.prototype.setOrientClass=function(){"Vertical"!==this.orientation?(this.sliderContainer.classList.remove(_w),this.sliderContainer.classList.add(Qw),this.firstHandle.setAttribute("aria-orientation","horizontal"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","horizontal")):(this.sliderContainer.classList.remove(Qw),this.sliderContainer.classList.add(_w),this.firstHandle.setAttribute("aria-orientation","vertical"),"Range"===this.type&&this.secondHandle.setAttribute("aria-orientation","vertical"))},e.prototype.setAriaAttributes=function(t){var e=this,i=this.min,n=this.max;(!y(this.customValues)&&this.customValues.length>0&&(i=this.customValues[0],n=this.customValues[this.customValues.length-1]),"Range"!==this.type)?ht(t,{"aria-valuemin":y(i)?"0":i.toString(),"aria-valuemax":y(n)?"100":n.toString()}):(!y(this.customValues)&&this.customValues.length>0?[[y(i)?"":i.toString(),this.value.length>1&&!y(this.customValues[this.value[1]])?this.customValues[this.value[1]].toString():""],[this.value.length>0&&!y(this.customValues[this.value[0]])?this.customValues[this.value[0]].toString():"",y(n)?"":n.toString()]]:[[y(i)?"":i.toString(),this.value.length>1&&!y(this.value[1])?this.value[1].toString():""],[this.value.length>0&&!y(this.value[0])?this.value[0].toString():"",y(n)?"":n.toString()]]).forEach(function(t,i){var n=0===i?e.firstHandle:e.secondHandle;n&&ht(n,{"aria-valuemin":t[0],"aria-valuemax":t[1]})})},e.prototype.createSecondHandle=function(){this.secondHandle=this.createElement("div",{attrs:{class:bw,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.secondHandle.classList.add(Lw),this.element.appendChild(this.secondHandle)},e.prototype.createFirstHandle=function(){this.firstHandle=this.createElement("div",{attrs:{class:bw,role:"slider",tabIndex:"0","aria-label":"slider"}}),this.firstHandle.classList.add(Nw),this.element.appendChild(this.firstHandle),this.isMaterialTooltip&&(this.materialHandle=this.createElement("div",{attrs:{class:bw+" "+rD}}),this.element.appendChild(this.materialHandle))},e.prototype.wireFirstHandleEvt=function(t){t?(K.remove(this.firstHandle,"mousedown touchstart",this.handleFocus),K.remove(this.firstHandle,"transitionend",this.transitionEnd),K.remove(this.firstHandle,"mouseenter touchenter",this.handleOver),K.remove(this.firstHandle,"mouseleave touchend",this.handleLeave)):(K.add(this.firstHandle,"mousedown touchstart",this.handleFocus,this),K.add(this.firstHandle,"transitionend",this.transitionEnd,this),K.add(this.firstHandle,"mouseenter touchenter",this.handleOver,this),K.add(this.firstHandle,"mouseleave touchend",this.handleLeave,this))},e.prototype.wireSecondHandleEvt=function(t){t?(K.remove(this.secondHandle,"mousedown touchstart",this.handleFocus),K.remove(this.secondHandle,"transitionend",this.transitionEnd),K.remove(this.secondHandle,"mouseenter touchenter",this.handleOver),K.remove(this.secondHandle,"mouseleave touchend",this.handleLeave)):(K.add(this.secondHandle,"mousedown touchstart",this.handleFocus,this),K.add(this.secondHandle,"transitionend",this.transitionEnd,this),K.add(this.secondHandle,"mouseenter touchenter",this.handleOver,this),K.add(this.secondHandle,"mouseleave touchend",this.handleLeave,this))},e.prototype.handleStart=function(){"Range"!==this.type&&(this.firstHandle.classList[0===this.handlePos1?"add":"remove"](Zw),this.isMaterialTooltip&&(this.materialHandle.classList[0===this.handlePos1?"add":"remove"](Zw),this.tooltipElement&&this.tooltipElement.classList[0===this.handlePos1?"add":"remove"](qw)))},e.prototype.transitionEnd=function(t){"transform"!==t.propertyName&&(this.handleStart(),this.enableAnimation||(this.getHandle().style.transition="none"),"Default"!==this.type&&(this.rangeBar.style.transition="none"),(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible&&"Default"===this.type&&(this.tooltipElement.style.transition=this.transition.handle),this.tooltipToggle(this.getHandle()),this.closeTooltip())},e.prototype.handleFocusOut=function(){this.firstHandle.classList.contains(Yw)&&this.firstHandle.classList.remove(Yw),"Range"===this.type&&this.secondHandle.classList.contains(Yw)&&this.secondHandle.classList.remove(Yw)},e.prototype.handleFocus=function(t){this.focusSliderElement(),this.sliderBarClick(t),t.currentTarget===this.firstHandle?(this.firstHandle.classList.add(Yw),this.firstHandle.classList.add(Xw)):(this.secondHandle.classList.add(Yw),this.secondHandle.classList.add(Xw)),K.add(document,"mousemove touchmove",this.sliderBarMove,this),K.add(document,"mouseup touchend",this.sliderBarUp,this)},e.prototype.handleOver=function(t){this.tooltip.isVisible&&"Hover"===this.tooltip.showOn&&this.tooltipToggle(t.currentTarget),"Default"===this.type&&this.tooltipToggle(this.getHandle())},e.prototype.handleLeave=function(t){!this.tooltip.isVisible||"Hover"!==this.tooltip.showOn||t.currentTarget.classList.contains(Yw)||t.currentTarget.classList.contains(Xw)||this.closeTooltip()},e.prototype.setHandler=function(){this.createFirstHandle(),"Range"===this.type&&this.createSecondHandle()},e.prototype.setEnableRTL=function(){this.enableRtl&&"Vertical"!==this.orientation?tt([this.sliderContainer],fw):et([this.sliderContainer],fw);var t="Vertical"!==this.orientation?this.horDir:this.verDir;this.enableRtl?(this.horDir="right",this.verDir="bottom"):(this.horDir="left",this.verDir="bottom"),t!==("Vertical"!==this.orientation?this.horDir:this.verDir)&&"Horizontal"===this.orientation&&(gt(this.firstHandle,{right:"",left:"auto"}),"Range"===this.type&&gt(this.secondHandle,{top:"",left:"auto"})),this.setBarColor()},e.prototype.tooltipValue=function(){var t,e=this,i={value:this.value,text:""};this.initialTooltip&&(this.initialTooltip=!1,this.setTooltipContent(),i.text=t="function"==typeof this.tooltipObj.content?this.tooltipObj.content():this.tooltipObj.content,this.trigger("tooltipChange",i,function(i){if(e.addTooltipClass(i.text),t!==i.text){e.customAriaText=i.text,e.enableHtmlSanitizer?i.text=Yi.sanitize(i.text.toString()):i.text=i.text.toString();e.tooltipObj.content=Ri(function(){return i.text}),e.setAriaAttrValue(e.firstHandle),"Range"===e.type&&e.setAriaAttrValue(e.secondHandle)}}),this.isMaterialTooltip&&this.setPreviousVal("change",this.value))},e.prototype.setTooltipContent=function(){var t=this.formatContent(this.tooltipFormatInfo,!1);this.tooltipObj.content=Ri(function(){return t})},e.prototype.formatContent=function(t,e){var i="",n=this.handleVal1,s=this.handleVal2;return!y(this.customValues)&&this.customValues.length>0&&(n=this.customValues[this.handleVal1],s=this.customValues[this.handleVal2]),e?("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?y(this.tooltip)||y(this.tooltip.format)?s.toString()+" - "+n.toString():this.formatString(s,t).elementVal+" - "+this.formatString(n,t).elementVal:y(this.tooltip)||y(this.tooltip.format)?n.toString()+" - "+s.toString():this.formatString(n,t).elementVal+" - "+this.formatString(s,t).elementVal:y(n)||(i=y(this.tooltip)||y(this.tooltip.format)?n.toString():this.formatString(n,t).elementVal),i):("Range"===this.type?i=this.enableRtl&&"Vertical"!==this.orientation?y(t.format)?s.toString()+" - "+n.toString():this.formatString(s,t).formatString+" - "+this.formatString(n,t).formatString:y(t.format)?n.toString()+" - "+s.toString():this.formatString(n,t).formatString+" - "+this.formatString(s,t).formatString:y(n)||(i=y(t.format)?n.toString():this.formatString(n,t).formatString),i)},e.prototype.addTooltipClass=function(t){if(this.isMaterialTooltip){var e=t.toString().length;if(this.tooltipElement){i=e>4?{oldCss:aD,newCss:oD}:{oldCss:oD,newCss:aD};this.tooltipElement.classList.remove(i.oldCss),this.tooltipElement.classList.contains(i.newCss)||(this.tooltipElement.classList.add(i.newCss),this.tooltipElement.style.transform=e>4?"scale(1)":this.getTooltipTransformProperties(this.previousTooltipClass).rotate)}else{var i=e>4?oD:aD;this.tooltipObj.cssClass=Tw+" "+i}}},e.prototype.tooltipPlacement=function(){return"Horizontal"===this.orientation?"Before"===this.tooltip.placement?"TopCenter":"BottomCenter":"Before"===this.tooltip.placement?"LeftCenter":"RightCenter"},e.prototype.tooltipBeforeOpen=function(t){this.tooltipElement=t.element,this.tooltip.cssClass&&tt([this.tooltipElement],this.tooltip.cssClass.split(" ").filter(function(t){return t})),t.target.removeAttribute("aria-describedby"),this.isMaterialTooltip&&(this.tooltipElement.firstElementChild.classList.add(hD),this.handleStart(),this.setTooltipTransform())},e.prototype.tooltipCollision=function(t){if(this.isBootstrap||this.isBootstrap4||(this.isMaterial||this.isMaterial3)&&!this.isMaterialTooltip){var e=this.isBootstrap4?3:6;switch(t){case"TopCenter":this.tooltipObj.setProperties({offsetY:-e},!1);break;case"BottomCenter":this.tooltipObj.setProperties({offsetY:e},!1);break;case"LeftCenter":this.tooltipObj.setProperties({offsetX:-e},!1);break;case"RightCenter":this.tooltipObj.setProperties({offsetX:e},!1)}}},e.prototype.materialTooltipEventCallBack=function(t){this.sliderBarClick(t),K.add(document,"mousemove touchmove",this.sliderBarMove,this),K.add(document,"mouseup touchend",this.sliderBarUp,this)},e.prototype.wireMaterialTooltipEvent=function(t){this.isMaterialTooltip&&(t?K.remove(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack):K.add(this.tooltipElement,"mousedown touchstart",this.materialTooltipEventCallBack,this))},e.prototype.tooltipPositionCalculation=function(t){var e;switch(t){case"TopCenter":e=zw;break;case"BottomCenter":e=Pw;break;case"LeftCenter":e=jw;break;case"RightCenter":e=Bw}return e},e.prototype.getTooltipTransformProperties=function(t){var e;if(this.tooltipElement){var i="Horizontal"===this.orientation?this.tooltipElement.clientHeight+14-this.tooltipElement.clientHeight/2:this.tooltipElement.clientWidth+14-this.tooltipElement.clientWidth/2;e="Horizontal"===this.orientation?t===zw?{rotate:"rotate(45deg)",translate:"translateY("+i+"px)"}:{rotate:"rotate(225deg)",translate:"translateY("+-i+"px)"}:t===jw?{rotate:"rotate(-45deg)",translate:"translateX("+i+"px)"}:{rotate:"rotate(-225deg)",translate:"translateX("+-i+"px)"}}return e},e.prototype.openMaterialTooltip=function(){var t=this;if(this.isMaterialTooltip){this.refreshTooltip(this.firstHandle);var e=this.tooltipElement.firstElementChild;e.classList.remove(hD),e.classList.add(lD),this.firstHandle.style.cursor="default",this.tooltipElement.style.transition=this.scaleTransform,this.tooltipElement.classList.add(Hw),this.materialHandle.style.transform="scale(0)",e.innerText.length>4?this.tooltipElement.style.transform="scale(1)":this.tooltipElement.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate,"Default"===this.type?setTimeout(function(){t.tooltipElement&&(t.tooltipElement.style.transition=t.transition.handle)},2500):setTimeout(function(){t.tooltipElement&&(t.tooltipElement.style.transition="none")},2500)}},e.prototype.closeMaterialTooltip=function(){var t=this;if(this.isMaterialTooltip){var e=this.tooltipElement.firstElementChild;this.tooltipElement.style.transition=this.scaleTransform,e.classList.remove(lD),e.classList.add(hD),this.firstHandle.style.cursor="-webkit-grab",this.firstHandle.style.cursor="grab",this.materialHandle&&(this.materialHandle.style.transform="scale(1)"),this.tooltipElement.classList.remove(Hw),this.setTooltipTransform(),this.tooltipTarget=void 0,setTimeout(function(){t.tooltipElement&&(t.tooltipElement.style.transition="none")},2500)}},e.prototype.checkTooltipPosition=function(t){var e=this.tooltipPositionCalculation(t.collidedPosition);void 0!==this.tooltipCollidedPosition&&this.tooltipCollidedPosition===t.collidedPosition&&t.element.classList.contains(e)||(this.isMaterialTooltip&&(void 0!==e&&(t.element.classList.remove(this.previousTooltipClass),t.element.classList.add(e),this.previousTooltipClass=e),t.element.style.transform&&t.element.classList.contains(Hw)&&t.element.firstElementChild.innerText.length<=4&&(t.element.style.transform=this.getTooltipTransformProperties(this.previousTooltipClass).rotate)),this.tooltipCollidedPosition=t.collidedPosition),this.isMaterialTooltip&&this.tooltipElement&&-1!==this.tooltipElement.style.transform.indexOf("translate")&&this.setTooltipTransform()},e.prototype.setTooltipTransform=function(){var t=this.getTooltipTransformProperties(this.previousTooltipClass);y(this.tooltipElement)||(this.tooltipElement.firstElementChild.innerText.length>4?this.tooltipElement.style.transform=t.translate+" scale(0.01)":this.tooltipElement.style.transform=t.translate+" "+t.rotate+" scale(0.01)")},e.prototype.renderTooltip=function(){this.tooltipObj=new Zh({showTipPointer:this.isBootstrap||this.isMaterial||this.isMaterial3||this.isBootstrap4||this.isTailwind||this.isTailwind3||this.isBootstrap5||this.isFluent||this.isFluent2||this.isBootstrap5Dot3,cssClass:Tw,height:this.isMaterial||this.isMaterial3?30:"auto",animation:{open:{effect:"None"},close:{effect:"FadeOut",duration:500}},opensOn:"Custom",beforeOpen:this.tooltipBeforeOpen.bind(this),beforeCollision:this.checkTooltipPosition.bind(this),beforeClose:this.tooltipBeforeClose.bind(this),enableHtmlSanitizer:this.enableHtmlSanitizer}),this.tooltipObj.appendTo(this.firstHandle),this.initializeTooltipProps()},e.prototype.initializeTooltipProps=function(){var t="Auto"===this.tooltip.showOn?"Hover":this.tooltip.showOn;this.setProperties({tooltip:{showOn:t}},!0),this.tooltipObj.position=this.tooltipPlacement(),this.tooltipCollision(this.tooltipObj.position),[this.firstHandle,this.rangeBar,this.secondHandle].forEach(function(t){y(t)||(t.style.transition="none")}),this.isMaterialTooltip&&(this.sliderContainer.classList.add(Vw),this.tooltipValue(),this.tooltipObj.animation.close.effect="None",this.tooltipObj.open(this.firstHandle))},e.prototype.tooltipBeforeClose=function(){this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0},e.prototype.setButtons=function(){this.firstBtn=this.createElement("div",{className:Iw+" "+Mw}),this.firstBtn.appendChild(this.createElement("span",{className:Gw})),(this.isTailwind||this.isTailwind3)&&this.firstBtn.querySelector("span").classList.add("e-icons"),this.firstBtn.tabIndex=-1,this.secondBtn=this.createElement("div",{className:Iw+" "+Sw}),this.secondBtn.appendChild(this.createElement("span",{className:Gw})),(this.isTailwind||this.isTailwind3)&&this.secondBtn.querySelector("span").classList.add("e-icons"),this.secondBtn.tabIndex=-1,this.sliderContainer.classList.add(eD),this.sliderContainer.appendChild(this.firstBtn),this.sliderContainer.appendChild(this.secondBtn),this.sliderContainer.appendChild(this.element),this.buttonTitle()},e.prototype.buttonTitle=function(){var t=this.enableRtl&&"Vertical"!==this.orientation;this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("decrementTitle"),i=this.l10n.getConstant("incrementTitle");ht(t?this.secondBtn:this.firstBtn,{"aria-label":e,title:e}),ht(t?this.firstBtn:this.secondBtn,{"aria-label":i,title:i})},e.prototype.buttonFocusOut=function(){(this.isMaterial||this.isMaterial3)&&this.getHandle().classList.remove("e-large-thumb-size")},e.prototype.repeatButton=function(t){var e,i=this.handleValueUpdate(),n=this.enableRtl&&"Vertical"!==this.orientation;t.target.parentElement.classList.contains(Mw)||t.target.classList.contains(Mw)?e=n?this.add(i,parseFloat(this.step.toString()),!0):this.add(i,parseFloat(this.step.toString()),!1):(t.target.parentElement.classList.contains(Sw)||t.target.classList.contains(Sw))&&(e=n?this.add(i,parseFloat(this.step.toString()),!1):this.add(i,parseFloat(this.step.toString()),!0)),this.limits.enabled&&(e=this.getLimitCorrectedValues(e)),e>=this.min&&e<=this.max&&(this.changeHandleValue(e),this.tooltipToggle(this.getHandle()))},e.prototype.repeatHandlerMouse=function(t){t.preventDefault(),"mousedown"!==t.type&&"touchstart"!==t.type||(this.buttonClick(t),this.repeatInterval=setInterval(this.repeatButton.bind(this),180,t))},e.prototype.materialChange=function(){this.getHandle().classList.contains("e-large-thumb-size")||this.getHandle().classList.add("e-large-thumb-size")},e.prototype.focusHandle=function(){this.getHandle().classList.contains(Xw)||this.getHandle().classList.add(Xw)},e.prototype.repeatHandlerUp=function(t){this.changeEvent("changed",t),this.closeTooltip(),clearInterval(this.repeatInterval),this.getHandle().focus()},e.prototype.customTickCounter=function(t){var e=4;return!y(this.customValues)&&this.customValues.length>0&&(t>4&&(e=3),t>7&&(e=2),t>14&&(e=1),t>28&&(e=0)),e},e.prototype.renderScale=function(){var t="Vertical"===this.orientation?"v":"h";this.ul=this.createElement("ul",{className:xw+" e-"+t+"-scale "+ww+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation","aria-hidden":"true"}}),this.ul.style.zIndex="-1",G.isAndroid&&"h"===t&&this.ul.classList.add(Jw);var e=this.ticks.smallStep;this.ticks.showSmallTicks?e<=0&&(e=parseFloat(S(this.step))):e=this.ticks.largeStep>0?this.ticks.largeStep:parseFloat(S(this.max))-parseFloat(S(this.min));var i,n=parseFloat(S(this.min)),s=parseFloat(S(this.max)),r=parseFloat(S(e)),o=!y(this.customValues)&&this.customValues.length>0&&this.customValues.length-1,a=this.customTickCounter(o),l=!y(this.customValues)&&this.customValues.length>0?o*a+o:Math.abs((s-n)/r);this.element.appendChild(this.ul);var h=parseFloat(this.min.toString());"v"===t&&(h=parseFloat(this.max.toString()));var c,d=0,p=100/l;p===1/0&&(p=5);for(var u=0,g=!y(this.customValues)&&this.customValues.length>0?this.customValues.length-1:0,m=0;u<=l;u++){if(i=this.createElement("li",{attrs:{class:ww,role:"presentation","aria-hidden":"true"}}),!y(this.customValues)&&this.customValues.length>0)(c=u%(a+1)===0)&&("h"===t?(h=this.customValues[m],m++):(h=this.customValues[g],g--),i.setAttribute("title",h.toString()));else if(i.setAttribute("title",h.toString()),0===this.numberOfDecimals(this.max)&&0===this.numberOfDecimals(this.min)&&0===this.numberOfDecimals(this.step))if("h"===t){var f=(h-parseFloat(this.min.toString()))%this.ticks.largeStep;c=Math.abs(f)<gw||Math.abs(this.ticks.largeStep-f)<gw}else{f=Math.abs(h-parseFloat(this.max.toString()))%this.ticks.largeStep;c=Math.abs(f)<gw||Math.abs(this.ticks.largeStep-f)<gw}else{var v=this.ticks.largeStep,b=h;if("h"===t){f=(b-n)%v;c=Math.abs(f)<gw||Math.abs(v-f)<gw}else{f=Math.abs(b-parseFloat(s.toString()))%v;c=Math.abs(f)<gw||Math.abs(v-f)<gw}}c&&i.classList.add(Dw),"h"===t?i.style.width=p+"%":i.style.height=p+"%";var C=c?"Both"===this.ticks.placement?2:1:0;if(c)for(var I=0;I<C;I++)this.createTick(i,h);else y(this.customValues)&&this.formatTicksValue(i,h);this.ul.appendChild(i),this.tickElementCollection.push(i);var M=void 0;y(this.customValues)&&(M=this.numberOfDecimals(e)>this.numberOfDecimals(h)?this.numberOfDecimals(e):this.numberOfDecimals(h),h="h"===t||this.min>this.max?this.makeRoundNumber(h+e,M):this.makeRoundNumber(h-e,M),d=this.makeRoundNumber(d+e,M))}this.ticksAlignment(t,p)},e.prototype.ticksAlignment=function(t,e,i){void 0===i&&(i=!0),this.firstChild=this.ul.firstElementChild,this.lastChild=this.ul.lastElementChild,this.firstChild.classList.add($w),this.lastChild.classList.add(tD),this.sliderContainer.classList.add(xw+"-"+this.ticks.placement.toLowerCase()),"h"===t?(this.firstChild.style.width=e/2+"%",this.lastChild.style.width=e/2+"%"):(this.firstChild.style.height=e/2+"%",this.lastChild.style.height=e/2+"%");var n={ticksWrapper:this.ul,tickElements:this.tickElementCollection};i&&this.trigger("renderedTicks",n),this.scaleAlignment()},e.prototype.createTick=function(t,e){var i=this.createElement("span",{className:Ew+" "+ww+"-"+this.ticks.placement.toLowerCase(),attrs:{role:"presentation","aria-hidden":"true"}});t.appendChild(i),y(this.customValues)?this.formatTicksValue(t,e,i):this.enableHtmlSanitizer?i.innerHTML=Yi.sanitize(e.toString()):i.innerHTML=e.toString()},e.prototype.formatTicksValue=function(t,e,i){var n=this,s=this.formatNumber(e),r={value:e,text:y(this.ticks)||y(this.ticks.format)?s:this.formatString(e,this.ticksFormatInfo).formatString,tickElement:t};this.trigger("renderingTicks",r,function(e){t.setAttribute("title",e.text.toString()),i&&(n.enableHtmlSanitizer?i.innerHTML=Yi.sanitize(e.text.toString()):i.innerHTML=e.text.toString())})},e.prototype.scaleAlignment=function(){this.tickValuePosition(),"Vertical"===this.orientation?this.element.getBoundingClientRect().width<=15?this.sliderContainer.classList.add(Kw):this.sliderContainer.classList.remove(Kw):this.element.getBoundingClientRect().height<=15?this.sliderContainer.classList.add(Kw):this.sliderContainer.classList.remove(Kw)},e.prototype.tickValuePosition=function(){this.firstChild=this.element.querySelector("ul").children[0];var t,e,i=this.firstChild.getBoundingClientRect(),n=this.ticks.smallStep,s=Math.abs(parseFloat(S(this.max))-parseFloat(S(this.min)))/n;this.firstChild.children.length>0&&(t=this.firstChild.children[0].getBoundingClientRect());var r,o=[this.sliderContainer.querySelectorAll("."+ww+"."+Dw+" ."+Ew)];r="Both"===this.ticks.placement?[].slice.call(o[0],2):[].slice.call(o[0],1);for(var a="Vertical"===this.orientation?2*i.height:2*i.width,l=0;l<this.firstChild.children.length;l++)"Vertical"===this.orientation?this.firstChild.children[l].style.top=-t.height/2+"px":this.enableRtl?this.firstChild.children[l].style.left=(a-this.firstChild.children[l].getBoundingClientRect().width)/2+"px":this.firstChild.children[l].style.left=-t.width/2+"px";for(l=0;l<r.length;l++)e=r[l].getBoundingClientRect(),"Vertical"===this.orientation?gt(r[l],{top:(a-e.height)/2+"px"}):gt(r[l],{left:(a-e.width)/2+"px"});this.enableRtl&&this.lastChild.children.length&&0!==s&&(this.lastChild.children[0].style.left=-this.lastChild.getBoundingClientRect().width/2+"px","Both"===this.ticks.placement&&(this.lastChild.children[1].style.left=-this.lastChild.getBoundingClientRect().width/2+"px")),0===s&&("Horizontal"===this.orientation&&(this.enableRtl?(this.firstChild.classList.remove(tD),this.firstChild.style.right=this.firstHandle.style.right,this.firstChild.children[0].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px","Both"===this.ticks.placement&&(this.firstChild.children[1].style.left=this.firstChild.getBoundingClientRect().width/2+2+"px")):(this.firstChild.classList.remove(tD),this.firstChild.style.left=this.firstHandle.style.left)),"Vertical"===this.orientation&&this.firstChild.classList.remove(tD))},e.prototype.setAriaAttrValue=function(t){var e,i=!y(this.ticks)&&!y(this.ticks.format),n=i?this.formatContent(this.tooltipFormatInfo,!1):this.formatContent(this.ticksFormatInfo,!1),s=i?this.formatContent(this.ticksFormatInfo,!0):this.formatContent(this.tooltipFormatInfo,!0);e=2===(n=this.customAriaText?this.customAriaText:n).split(" - ").length?n.split(" - "):[n,n],this.setAriaAttributes(t),"Range"!==this.type?ht(t,{"aria-valuenow":s,"aria-valuetext":n}):this.enableRtl?t===this.firstHandle?ht(t,{"aria-valuenow":s.split(" - ")[1],"aria-valuetext":e[1]}):ht(t,{"aria-valuenow":s.split(" - ")[0],"aria-valuetext":e[0]}):t===this.firstHandle?ht(t,{"aria-valuenow":s.split(" - ")[0],"aria-valuetext":e[0]}):ht(t,{"aria-valuenow":s.split(" - ")[1],"aria-valuetext":e[1]})},e.prototype.handleValueUpdate=function(){return"Range"===this.type?1===this.activeHandle?this.handleVal1:this.handleVal2:this.handleVal1},e.prototype.getLimitCorrectedValues=function(t){return t="MinRange"===this.type||"Default"===this.type||1===this.activeHandle?this.getLimitValueAndPosition(t,this.limits.minStart,this.limits.minEnd)[0]:this.getLimitValueAndPosition(t,this.limits.maxStart,this.limits.maxEnd)[0]},e.prototype.focusSliderElement=function(){this.isElementFocused||(this.element.focus(),this.isElementFocused=!0)},e.prototype.buttonClick=function(t){var e;this.focusSliderElement();var i=this.enableRtl&&"Vertical"!==this.orientation,n=this.handleValueUpdate();40===t.keyCode||37===t.keyCode||t.currentTarget.classList.contains(Mw)?e=i?this.add(n,parseFloat(this.step.toString()),!0):this.add(n,parseFloat(this.step.toString()),!1):38===t.keyCode||39===t.keyCode||t.currentTarget.classList.contains(Sw)?e=i?this.add(n,parseFloat(this.step.toString()),!1):this.add(n,parseFloat(this.step.toString()),!0):33===t.keyCode||t.currentTarget.classList.contains(Mw)?e=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):34===t.keyCode||t.currentTarget.classList.contains(Sw)?e=i?this.add(n,parseFloat(this.ticks.largeStep.toString()),!0):this.add(n,parseFloat(this.ticks.largeStep.toString()),!1):36===t.keyCode?e=parseFloat(this.min<this.max?this.min.toString():this.max.toString()):35===t.keyCode&&(e=parseFloat(this.min<this.max?this.max.toString():this.min.toString())),this.limits.enabled&&(e=this.getLimitCorrectedValues(e)),this.changeHandleValue(e),!this.isMaterial&&!this.isMaterial3||this.tooltip.isVisible||this.getHandle().classList.contains(Xw)||this.materialChange(),this.tooltipToggle(this.getHandle()),this.getHandle().focus(),this.focusHandle(),t.currentTarget.classList.contains(Mw)&&K.add(this.firstBtn,"mouseup touchend",this.buttonUp,this),t.currentTarget.classList.contains(Sw)&&K.add(this.secondBtn,"mouseup touchend",this.buttonUp,this)},e.prototype.tooltipToggle=function(t){this.isMaterialTooltip?this.tooltipElement.classList.contains(Hw)?this.refreshTooltip(this.firstHandle):this.openMaterialTooltip():this.tooltipElement?this.refreshTooltip(t):this.openTooltip(t)},e.prototype.buttonUp=function(t){t.currentTarget.classList.contains(Mw)&&K.remove(this.firstBtn,"mouseup touchend",this.buttonUp),t.currentTarget.classList.contains(Sw)&&K.remove(this.secondBtn,"mouseup touchend",this.buttonUp)},e.prototype.setRangeBar=function(){"Horizontal"!==this.orientation||y(this.rangeBar)?y(this.rangeBar)||("MinRange"===this.type?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",gt(this.rangeBar,{height:y(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):(this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",gt(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))):"MinRange"===this.type?(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",gt(this.rangeBar,{width:y(this.handlePos1)?0:this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right=this.handlePos1+"px":this.rangeBar.style.left=this.handlePos1+"px",gt(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"}))},e.prototype.checkValidValueAndPos=function(t){return t=this.checkHandleValue(t),t=this.checkHandlePosition(t)},e.prototype.setLimitBarPositions=function(t,e,i,n){"Horizontal"===this.orientation?this.enableRtl?(this.limitBarFirst.style.right=t+"px",this.limitBarFirst.style.width=e-t+"px"):(this.limitBarFirst.style.left=t+"px",this.limitBarFirst.style.width=e-t+"px"):(this.limitBarFirst.style.bottom=(this.min<this.max?t:e)+"px",this.limitBarFirst.style.height=(this.min<this.max?e-t:t-e)+"px"),"Range"===this.type&&("Horizontal"===this.orientation?this.enableRtl?(this.limitBarSecond.style.right=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.left=i+"px",this.limitBarSecond.style.width=n-i+"px"):(this.limitBarSecond.style.bottom=(this.min<this.max?i:n)+"px",this.limitBarSecond.style.height=(this.min<this.max?n-i:i-n)+"px"))},e.prototype.setLimitBar=function(){if("Default"===this.type||"MinRange"===this.type){var t=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];t=this.checkValidValueAndPos(t);var e=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];e=this.checkValidValueAndPos(e),this.setLimitBarPositions(t,e)}else if("Range"===this.type){var i=this.getLimitValueAndPosition(this.limits.minStart,this.limits.minStart,this.limits.minEnd,!0)[0];i=this.checkValidValueAndPos(i);var n=this.getLimitValueAndPosition(this.limits.minEnd,this.limits.minStart,this.limits.minEnd,!0)[0];n=this.checkValidValueAndPos(n);var s=this.getLimitValueAndPosition(this.limits.maxStart,this.limits.maxStart,this.limits.maxEnd,!0)[0];s=this.checkValidValueAndPos(s);var r=this.getLimitValueAndPosition(this.limits.maxEnd,this.limits.maxStart,this.limits.maxEnd,!0)[0];r=this.checkValidValueAndPos(r),this.setLimitBarPositions(i,n,s,r)}},e.prototype.getLimitValueAndPosition=function(t,e,i,n){return y(e)&&(e=this.min<this.max?this.min:this.max,y(t)&&n&&(t=e)),y(i)&&(i=this.min<this.max?this.max:this.min,y(t)&&n&&(t=i)),t<e&&(t=e),t>i&&(t=i),[t,this.checkHandlePosition(t)]},e.prototype.setValue=function(){if(!y(this.customValues)&&this.customValues.length>0&&(this.min=0,this.max=this.customValues.length-1,this.setBarColor()),this.setAriaAttributes(this.firstHandle),this.handleVal1=y(this.value)?this.checkHandleValue(parseFloat(this.min.toString())):this.checkHandleValue(parseFloat(this.value.toString())),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.preHandlePos1=this.handlePos1,y(this.activeHandle)&&(this.activeHandle="Range"===this.type?2:1),"Default"===this.type||"MinRange"===this.type){if(this.limits.enabled){var t=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=t[0],this.handlePos1=t[1],this.preHandlePos1=this.handlePos1}this.setHandlePosition(null),this.handleStart(),this.value=this.handleVal1,this.setAriaAttrValue(this.firstHandle),this.changeEvent("changed",null)}else this.validateRangeValue();"Default"!==this.type&&this.setRangeBar(),this.limits.enabled&&this.setLimitBar()},e.prototype.rangeValueUpdate=function(){null!==this.value&&"object"==typeof this.value||(this.value=[parseFloat(S(this.min)),parseFloat(S(this.max))])},e.prototype.validateRangeValue=function(){this.rangeValueUpdate(),this.setRangeValue()},e.prototype.modifyZindex=function(){"Range"!==this.type||y(this.firstHandle)||y(this.secondHandle)?this.isMaterialTooltip&&this.tooltipElement&&(this.tooltipElement.style.zIndex=to(this.element)+""):1===this.activeHandle?(this.firstHandle.style.zIndex=this.zIndex+4+"",this.secondHandle.style.zIndex=this.zIndex+3+""):(this.firstHandle.style.zIndex=this.zIndex+3+"",this.secondHandle.style.zIndex=this.zIndex+4+"")},e.prototype.setHandlePosition=function(t){var e,i=this,n=1===this.activeHandle?this.handlePos1:this.handlePos2;e=this.isMaterialTooltip?[this.firstHandle,this.materialHandle]:[this.getHandle()],this.handleStart(),e.forEach(function(t){y(t)||("Horizontal"===i.orientation?i.enableRtl?t.style.right=n+"px":t.style.left=n+"px":t.style.bottom=n+"px")}),this.changeEvent("change",t)},e.prototype.getHandle=function(){return 1===this.activeHandle?this.firstHandle:this.secondHandle},e.prototype.setRangeValue=function(){this.updateRangeValue(),this.activeHandle=1,this.setHandlePosition(null),this.activeHandle=2,this.setHandlePosition(null),this.activeHandle=1},e.prototype.changeEvent=function(t,e){var i="change"===t?this.previousVal:this.previousChanged;if("Range"!==this.type)this.setProperties({value:this.handleVal1},!0),i===this.value||this.isMaterialTooltip&&this.initialTooltip||(this.trigger(t,this.changeEventArgs(t,e)),this.initialTooltip=!0,this.setPreviousVal(t,this.value)),this.setAriaAttrValue(this.firstHandle);else{var n=this.value=[this.handleVal1,this.handleVal2];this.setProperties({value:n},!0),(i.length===this.value.length&&this.value[0]!==i[0]||this.value[1]!==i[1])&&(this.initialTooltip=!1,this.trigger(t,this.changeEventArgs(t,e)),this.initialTooltip=!0,this.setPreviousVal(t,this.value)),this.setAriaAttrValue(this.getHandle())}this.hiddenInput.value=this.value.toString()},e.prototype.changeEventArgs=function(t,e){var i;return this.tooltip.isVisible&&this.tooltipObj&&this.initialTooltip?(this.tooltipValue(),i={value:this.value,previousValue:"change"===t?this.previousVal:this.previousChanged,action:t,text:"function"==typeof this.tooltipObj.content?this.tooltipObj.content():this.tooltipObj.content,isInteracted:!y(e)}):i={value:this.value,previousValue:"change"===t?this.previousVal:this.previousChanged,action:t,text:y(this.ticksFormatInfo.format)?this.value.toString():"Range"!==this.type?this.formatString(this.value,this.ticksFormatInfo).formatString:this.formatString(this.value[0],this.ticksFormatInfo).formatString+" - "+this.formatString(this.value[1],this.ticksFormatInfo).formatString,isInteracted:!y(e)},i},e.prototype.setPreviousVal=function(t,e){"change"===t?this.previousVal=e:this.previousChanged=e},e.prototype.updateRangeValue=function(){var t=this.value.toString().split(",").map(Number);if(this.enableRtl&&"Vertical"!==this.orientation||this.rtl?this.value=[t[1],t[0]]:this.value=[t[0],t[1]],this.enableRtl&&"Vertical"!==this.orientation?(this.handleVal1=this.checkHandleValue(this.value[1]),this.handleVal2=this.checkHandleValue(this.value[0])):(this.handleVal1=this.checkHandleValue(this.value[0]),this.handleVal2=this.checkHandleValue(this.value[1])),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2),this.min<this.max&&this.handlePos1>this.handlePos2&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.min>this.max&&this.handlePos1<this.handlePos2&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.preHandlePos1=this.handlePos1,this.preHandlePos2=this.handlePos2,this.limits.enabled){this.activeHandle=1;var e=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=e[0],this.handlePos1=e[1],this.preHandlePos1=this.handlePos1,this.activeHandle=2,e=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=e[0],this.handlePos2=e[1],this.preHandlePos2=this.handlePos2}},e.prototype.checkHandlePosition=function(t){var e;return t=100*(t-parseFloat(S(this.min)))/(parseFloat(S(this.max))-parseFloat(S(this.min))),e="Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(t/100):this.element.getBoundingClientRect().height*(t/100),parseFloat(S(this.max))===parseFloat(S(this.min))&&(e="Horizontal"===this.orientation?this.element.getBoundingClientRect().width:this.element.getBoundingClientRect().height),e},e.prototype.checkHandleValue=function(t){if(this.min===this.max)return parseFloat(S(this.max));var e=this.tempStartEnd();return t<e.start?t=e.start:t>e.end&&(t=e.end),t},e.prototype.reposition=function(){var t=this;y(this.firstHandle)||(this.firstHandle.style.transition="none"),"Default"===this.type||y(this.rangeBar)||(this.rangeBar.style.transition="none"),"Range"!==this.type||y(this.secondHandle)||(this.secondHandle.style.transition="none"),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handleVal2&&(this.handlePos2=this.checkHandlePosition(this.handleVal2)),"Horizontal"===this.orientation?(this.enableRtl?this.firstHandle.style.right=this.handlePos1+"px":this.firstHandle.style.left=this.handlePos1+"px",this.isMaterialTooltip&&!y(this.materialHandle)&&(this.enableRtl?this.materialHandle.style.right=this.handlePos1+"px":this.materialHandle.style.left=this.handlePos1+"px"),"MinRange"!==this.type||y(this.rangeBar)?"Range"!==this.type||y(this.secondHandle)||y(this.rangeBar)||(this.enableRtl?(this.secondHandle.style.right=this.handlePos2+"px",this.rangeBar.style.right=this.handlePos1+"px"):(this.secondHandle.style.left=this.handlePos2+"px",this.rangeBar.style.left=this.handlePos1+"px"),gt(this.rangeBar,{width:this.handlePos2-this.handlePos1+"px"})):(this.enableRtl?this.rangeBar.style.right="0px":this.rangeBar.style.left="0px",gt(this.rangeBar,{width:y(this.handlePos1)?0:this.handlePos1+"px"}))):(this.firstHandle.style.bottom=this.handlePos1+"px",this.isMaterialTooltip&&(this.materialHandle.style.bottom=this.handlePos1+"px"),"MinRange"===this.type?(this.rangeBar.style.bottom=this.min>this.max?this.handlePos1+"px":"0px",gt(this.rangeBar,{height:y(this.handlePos1)?0:this.min>this.max?this.element.clientHeight-this.handlePos1+"px":this.handlePos1+"px"})):"Range"===this.type&&(this.secondHandle.style.bottom=this.handlePos2+"px",this.rangeBar.style.bottom=this.min>this.max?this.handlePos2+"px":this.handlePos1+"px",gt(this.rangeBar,{height:this.min>this.max?this.handlePos1-this.handlePos2+"px":this.handlePos2-this.handlePos1+"px"}))),this.limits.enabled&&this.setLimitBar(),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.handleStart(),this.tooltip.isVisible||setTimeout(function(){y(t.firstHandle)||(t.firstHandle.style.transition=t.scaleTransform),"Range"!==t.type||y(t.secondHandle)||(t.secondHandle.style.transition=t.scaleTransform)}),this.refreshTooltip(this.tooltipTarget),this.setBarColor()},e.prototype.changeHandleValue=function(t){var e=null;1===this.activeHandle?(this.limits.enabled&&this.limits.startHandleFixed||(this.handleVal1=this.checkHandleValue(t),this.handlePos1=this.checkHandlePosition(this.handleVal1),"Range"===this.type&&(this.handlePos1>this.handlePos2&&this.min<this.max||this.handlePos1<this.handlePos2&&this.min>this.max)&&(this.handlePos1=this.handlePos2,this.handleVal1=this.handleVal2),this.handlePos1!==this.preHandlePos1&&(e=this.preHandlePos1=this.handlePos1)),this.modifyZindex()):(this.limits.enabled&&this.limits.endHandleFixed||(this.handleVal2=this.checkHandleValue(t),this.handlePos2=this.checkHandlePosition(this.handleVal2),"Range"===this.type&&(this.handlePos2<this.handlePos1&&this.min<this.max||this.handlePos2>this.handlePos1&&this.min>this.max)&&(this.handlePos2=this.handlePos1,this.handleVal2=this.handleVal1),this.handlePos2!==this.preHandlePos2&&(e=this.preHandlePos2=this.handlePos2)),this.modifyZindex()),null!==e&&("Default"!==this.type&&this.setRangeBar(),this.setHandlePosition(null))},e.prototype.tempStartEnd=function(){return this.min>this.max?{start:this.max,end:this.min}:{start:this.min,end:this.max}},e.prototype.xyToPosition=function(t){if(this.min===this.max)return 100;if("Horizontal"===this.orientation){var e=t.x-this.element.getBoundingClientRect().left,i=this.element.offsetWidth/100;this.val=e/i}else{var n=t.y-this.element.getBoundingClientRect().top;i=this.element.offsetHeight/100;this.val=100-n/i}var s=this.stepValueCalculation(this.val);return s<0?s=0:s>100&&(s=100),this.enableRtl&&"Vertical"!==this.orientation&&(s=100-s),"Horizontal"===this.orientation?this.element.getBoundingClientRect().width*(s/100):this.element.getBoundingClientRect().height*(s/100)},e.prototype.stepValueCalculation=function(t){0===this.step&&(this.step=1);var e=parseFloat(S(this.step))/((parseFloat(S(this.max))-parseFloat(S(this.min)))/100),i=t%Math.abs(e);return 0!==i&&(e/2>i?t-=i:t+=Math.abs(e)-i),t},e.prototype.add=function(t,e,i){var n=Math.pow(10,3);return i?(Math.round(t*n)+Math.round(e*n))/n:(Math.round(t*n)-Math.round(e*n))/n},e.prototype.positionToValue=function(t){var e,i=parseFloat(S(this.max))-parseFloat(S(this.min));return e="Horizontal"===this.orientation?t/this.element.getBoundingClientRect().width*i:t/this.element.getBoundingClientRect().height*i,this.add(e,parseFloat(this.min.toString()),!0)},e.prototype.sliderBarClick=function(t){var e;t.preventDefault(),"mousedown"===t.type||"mouseup"===t.type||"click"===t.type?e={x:t.clientX,y:t.clientY}:"touchend"!==t.type&&"touchstart"!==t.type||(e={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY});var i=this.xyToPosition(e),n=this.positionToValue(i);if("Range"===this.type&&(this.min<this.max&&this.handlePos2-i<i-this.handlePos1||this.min>this.max&&this.handlePos1-i>i-this.handlePos2)){if(this.activeHandle=2,!this.limits.enabled||!this.limits.endHandleFixed){if(this.limits.enabled)n=(s=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=s[1];this.secondHandle.classList.add(sD),this.handlePos2=this.preHandlePos2=i,this.handleVal2=n}this.modifyZindex(),this.secondHandle.focus()}else{if(this.activeHandle=1,!this.limits.enabled||!this.limits.startHandleFixed){var s;if(this.limits.enabled)n=(s=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=s[1];this.firstHandle.classList.add(sD),this.handlePos1=this.preHandlePos1=i,this.handleVal1=n}this.modifyZindex(),this.firstHandle.focus()}this.isMaterialTooltip&&this.tooltipElement.classList.add(Rw);var r=this.element.querySelector("."+Xw);r&&this.getHandle()!==r&&r.classList.remove(Xw);var o=1===this.activeHandle?this.firstHandle:this.secondHandle;if(("click"===t.type||"mousedown"===t.type)&&t.target===o){var a=t.clientX,l=t.clientY;document.elementFromPoint(a,l)}if(this.checkRepeatedValue(n)){var h=(this.isMaterial||this.isMaterial3)&&this.tooltip.isVisible?this.transitionOnMaterialTooltip:this.transition;this.getHandle().style.transition=h.handle,"Default"!==this.type&&(this.rangeBar.style.transition=h.rangeBar),this.setHandlePosition(t),this.isMaterialTooltip&&(this.initialTooltip=!1),t.target!==o&&this.changeEvent("changed",t),"Default"!==this.type&&this.setRangeBar()}},e.prototype.handleValueAdjust=function(t,e,i){1===i?(this.handleVal1=e,this.handleVal2=this.handleVal1+this.minDiff):2===i&&(this.handleVal2=e,this.handleVal1=this.handleVal2-this.minDiff),this.handlePos1=this.checkHandlePosition(this.handleVal1),this.handlePos2=this.checkHandlePosition(this.handleVal2)},e.prototype.dragRangeBarMove=function(t){var e,i,n,s,r;if("touchmove"!==t.type&&t.preventDefault(),this.rangeBarDragged=!0,this.rangeBar.style.transition="none",this.firstHandle.style.transition="none",this.secondHandle.style.transition="none","mousemove"===t.type?(s=(e=[t.clientX,t.clientY])[0],r=e[1]):(s=(i=[t.changedTouches[0].clientX,t.changedTouches[0].clientY])[0],r=i[1]),!(this.limits.enabled&&this.limits.startHandleFixed||this.limits.enabled&&this.limits.endHandleFixed)){if(n=this.enableRtl?{x:s+this.secondPartRemain,y:r+this.secondPartRemain}:{x:s-this.firstPartRemain,y:r+this.secondPartRemain},this.min>this.max?(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)):(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)),n=this.enableRtl?{x:s-this.firstPartRemain,y:r-this.firstPartRemain}:{x:s+this.secondPartRemain,y:r-this.firstPartRemain},this.min>this.max?(this.handlePos1=this.xyToPosition(n),this.handleVal1=this.positionToValue(this.handlePos1)):(this.handlePos2=this.xyToPosition(n),this.handleVal2=this.positionToValue(this.handlePos2)),this.limits.enabled){var o=this.getLimitValueAndPosition(this.handleVal1,this.limits.minStart,this.limits.minEnd);this.handleVal1=o[0],this.handlePos1=o[1],this.handleVal1===this.limits.minEnd&&this.handleValueAdjust(this.handleVal1,this.limits.minEnd,1),this.handleVal1===this.limits.minStart&&this.handleValueAdjust(this.handleVal1,this.limits.minStart,1),o=this.getLimitValueAndPosition(this.handleVal2,this.limits.maxStart,this.limits.maxEnd),this.handleVal2=o[0],this.handlePos2=o[1],this.handleVal2===this.limits.maxStart&&this.handleValueAdjust(this.handleVal2,this.limits.maxStart,2),this.handleVal2===this.limits.maxEnd&&this.handleValueAdjust(this.handleVal2,this.limits.maxEnd,2)}this.handleVal2===(this.min>this.max?this.min:this.max)&&this.handleValueAdjust(this.handleVal2,this.min>this.max?this.min:this.max,2),this.handleVal1===(this.min>this.max?this.max:this.min)&&this.handleValueAdjust(this.handleVal1,this.min>this.max?this.max:this.min,1)}this.activeHandle=1,this.setHandlePosition(t),this.activeHandle=2,this.setHandlePosition(t),this.tooltipToggle(this.rangeBar),this.setRangeBar()},e.prototype.sliderBarUp=function(t){this.changeEvent("changed",t),this.handleFocusOut(),this.firstHandle.classList.remove(sD),"Range"===this.type&&(this.initialTooltip=!1,this.secondHandle.classList.remove(sD)),this.closeTooltip(),(this.isMaterial||this.isMaterial3)&&(this.getHandle().classList.remove("e-large-thumb-size"),this.isMaterialTooltip&&this.tooltipElement.classList.remove(Rw)),K.remove(document,"mousemove touchmove",this.sliderBarMove),K.remove(document,"mouseup touchend",this.sliderBarUp)},e.prototype.sliderBarMove=function(t){var e;"touchmove"!==t.type&&t.preventDefault(),e="mousemove"===t.type?{x:t.clientX,y:t.clientY}:{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY};var i=this.xyToPosition(e),n=this.positionToValue(i);if(i=Math.round(i),"Range"!==this.type&&1===this.activeHandle){if(!this.limits.enabled||!this.limits.startHandleFixed){if(this.limits.enabled){var s=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd);i=s[1],n=s[0]}this.handlePos1=i,this.handleVal1=n}this.firstHandle.classList.add(sD)}if("Range"===this.type)if(1===this.activeHandle){if(this.firstHandle.classList.add(sD),!(this.limits.enabled&&this.limits.startHandleFixed||((this.min<this.max&&i>this.handlePos2||this.min>this.max&&i<this.handlePos2)&&(i=this.handlePos2,n=this.handleVal2),i===this.preHandlePos1))){if(this.limits.enabled)n=(r=this.getLimitValueAndPosition(n,this.limits.minStart,this.limits.minEnd))[0],i=r[1];this.handlePos1=this.preHandlePos1=i,this.handleVal1=n,this.activeHandle=1}}else if(2===this.activeHandle&&(this.secondHandle.classList.add(sD),!(this.limits.enabled&&this.limits.endHandleFixed||((this.min<this.max&&i<this.handlePos1||this.min>this.max&&i>this.handlePos1)&&(i=this.handlePos1,n=this.handleVal1),i===this.preHandlePos2)))){var r;if(this.limits.enabled)n=(r=this.getLimitValueAndPosition(n,this.limits.maxStart,this.limits.maxEnd))[0],i=r[1];this.handlePos2=this.preHandlePos2=i,this.handleVal2=n,this.activeHandle=2}this.checkRepeatedValue(n)&&(this.getHandle().style.transition=this.scaleTransform,"Default"!==this.type&&(this.rangeBar.style.transition="none"),this.setHandlePosition(t),!this.isMaterial&&!this.isMaterial3||this.tooltip.isVisible||this.getHandle().classList.contains(Xw)||this.materialChange(),this.tooltipToggle(this.getHandle()),"Default"!==this.type&&this.setRangeBar())},e.prototype.dragRangeBarUp=function(t){this.rangeBarDragged?this.isDragComplete=!0:(this.focusSliderElement(),this.sliderBarClick(t)),this.changeEvent("changed",t),this.closeTooltip(),K.remove(document,"mousemove touchmove",this.dragRangeBarMove),K.remove(document,"mouseup touchend",this.dragRangeBarUp),this.rangeBarDragged=!1},e.prototype.checkRepeatedValue=function(t){if("Range"===this.type){if(t===(this.enableRtl&&"Vertical"!==this.orientation?1===this.activeHandle?this.previousVal[1]:this.previousVal[0]:1===this.activeHandle?this.previousVal[0]:this.previousVal[1]))return 0}else if(t===this.previousVal)return 0;return 1},e.prototype.refreshTooltip=function(t){this.tooltip.isVisible&&this.tooltipObj&&(this.tooltipValue(),t&&(this.tooltipObj.refresh(t),this.tooltipTarget=t))},e.prototype.openTooltip=function(t){this.tooltip.isVisible&&this.tooltipObj&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.open(t),this.tooltipTarget=t)},e.prototype.closeTooltip=function(){this.tooltip.isVisible&&this.tooltipObj&&"Always"!==this.tooltip.showOn&&!this.isMaterialTooltip&&(this.tooltipValue(),this.tooltipObj.close(),this.tooltipTarget=void 0)},e.prototype.keyDown=function(t){switch(t.keyCode){case 37:case 38:case 39:case 40:case 33:case 34:case 36:case 35:t.preventDefault(),this.buttonClick(t)}},e.prototype.wireButtonEvt=function(t){t?(K.remove(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut),K.remove(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut),K.remove(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse),K.remove(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),K.remove(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse),K.remove(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp),K.remove(this.firstBtn,"focusout",this.sliderFocusOut),K.remove(this.secondBtn,"focusout",this.sliderFocusOut)):(K.add(this.firstBtn,"mouseleave touchleave",this.buttonFocusOut,this),K.add(this.secondBtn,"mouseleave touchleave",this.buttonFocusOut,this),K.add(this.firstBtn,"mousedown touchstart",this.repeatHandlerMouse,this),K.add(this.firstBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),K.add(this.secondBtn,"mousedown touchstart",this.repeatHandlerMouse,this),K.add(this.secondBtn,"mouseup mouseleave touchup touchend",this.repeatHandlerUp,this),K.add(this.firstBtn,"focusout",this.sliderFocusOut,this),K.add(this.secondBtn,"focusout",this.sliderFocusOut,this))},e.prototype.rangeBarMousedown=function(t){var e,i;if(t.preventDefault(),this.focusSliderElement(),"Range"===this.type&&this.drag&&t.target===this.rangeBar){var n=void 0,s=void 0;"mousedown"===t.type?(n=(e=[t.clientX,t.clientY])[0],s=e[1]):"touchstart"===t.type&&(n=(i=[t.changedTouches[0].clientX,t.changedTouches[0].clientY])[0],s=i[1]),"Horizontal"===this.orientation?(this.firstPartRemain=n-this.rangeBar.getBoundingClientRect().left,this.secondPartRemain=this.rangeBar.getBoundingClientRect().right-n):(this.firstPartRemain=s-this.rangeBar.getBoundingClientRect().top,this.secondPartRemain=this.rangeBar.getBoundingClientRect().bottom-s),this.minDiff=this.handleVal2-this.handleVal1,this.tooltipToggle(this.rangeBar);var r=this.element.querySelector("."+Xw);r&&r.classList.remove(Xw),K.add(document,"mousemove touchmove",this.dragRangeBarMove,this),K.add(document,"mouseup touchend",this.dragRangeBarUp,this)}},e.prototype.elementClick=function(t){this.isDragComplete?this.isDragComplete=!1:(t.preventDefault(),this.focusSliderElement(),this.sliderBarClick(t),this.focusHandle())},e.prototype.wireEvents=function(){this.onresize=this.reposition.bind(this),window.addEventListener("resize",this.onresize),this.enabled&&!this.readonly&&(K.add(this.element,"click",this.elementClick,this),"Range"===this.type&&this.drag&&K.add(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown,this),K.add(this.sliderContainer,"keydown",this.keyDown,this),K.add(this.sliderContainer,"keyup",this.keyUp,this),K.add(this.element,"focusout",this.sliderFocusOut,this),K.add(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover,this),this.wireFirstHandleEvt(!1),"Range"===this.type&&this.wireSecondHandleEvt(!1),this.showButtons&&this.wireButtonEvt(!1),this.wireMaterialTooltipEvent(!1),this.isForm&&K.add(this.formElement,"reset",this.formResetHandler,this))},e.prototype.unwireEvents=function(){K.remove(this.element,"click",this.elementClick),"Range"===this.type&&this.drag&&K.remove(this.rangeBar,"mousedown touchstart",this.rangeBarMousedown),K.remove(this.sliderContainer,"keydown",this.keyDown),K.remove(this.sliderContainer,"keyup",this.keyUp),K.remove(this.element,"focusout",this.sliderFocusOut),K.remove(this.sliderContainer,"mouseover mouseout touchstart touchend",this.hover),this.wireFirstHandleEvt(!0),"Range"===this.type&&this.wireSecondHandleEvt(!0),this.showButtons&&this.wireButtonEvt(!0),this.wireMaterialTooltipEvent(!0),K.remove(this.element,"reset",this.formResetHandler)},e.prototype.formResetHandler=function(){this.setProperties({value:this.formResetValue},!0),this.setValue()},e.prototype.keyUp=function(t){if(9===t.keyCode&&t.target.classList.contains(bw)&&(this.focusSliderElement(),!t.target.classList.contains(Xw))){this.element.querySelector("."+Xw)&&this.element.querySelector("."+Xw).classList.remove(Xw),t.target.classList.add(Xw);var e=t.target.parentElement;if(e===this.element&&(e.querySelector("."+Uw).classList.add(iD),"Range"!==this.type&&"MinRange"!==this.type||e.querySelector("."+Cw).classList.add(nD)),"Range"===this.type){var i=t.target.previousSibling;i&&i.classList.contains(bw)?this.activeHandle=2:this.activeHandle=1}this.getHandle().focus(),this.tooltipToggle(this.getHandle())}this.closeTooltip(),this.changeEvent("changed",t)},e.prototype.hover=function(t){if(!y(t))if("mouseover"===t.type||"touchmove"===t.type||"mousemove"===t.type||"pointermove"===t.type||"touchstart"===t.type)this.sliderContainer.classList.add(Aw);else{this.sliderContainer.classList.remove(Aw);var e=t.currentTarget;this.tooltip.isVisible&&"Always"!==this.tooltip.showOn&&this.tooltipObj&&this.isMaterialTooltip&&!e.classList.contains(Yw)&&!e.classList.contains(Xw)&&this.closeMaterialTooltip()}},e.prototype.sliderFocusOut=function(t){t.relatedTarget!==this.secondHandle&&t.relatedTarget!==this.firstHandle&&t.relatedTarget!==this.element&&t.relatedTarget!==this.firstBtn&&t.relatedTarget!==this.secondBtn&&(this.closeMaterialTooltip(),this.closeTooltip(),this.element.querySelector("."+Xw)&&this.element.querySelector("."+Xw).classList.remove(Xw),this.element.querySelector("."+iD)&&(this.element.querySelector("."+iD).classList.remove(iD),"Range"!==this.type&&"MinRange"!==this.type||!this.element.querySelector("."+nD)||this.element.querySelector("."+nD).classList.remove(nD)),this.hiddenInput.focus(),this.hiddenInput.blur(),this.isElementFocused=!1)},e.prototype.removeElement=function(t){t.parentNode&&t.parentNode.removeChild(t)},e.prototype.changeSliderType=function(t,e){this.isMaterialTooltip&&this.materialHandle&&(this.sliderContainer.classList.remove(Vw),this.removeElement(this.materialHandle),this.materialHandle=void 0),this.removeElement(this.firstHandle),this.firstHandle=void 0,"Default"!==t&&("Range"===t&&(this.removeElement(this.secondHandle),this.secondHandle=void 0),this.removeElement(this.rangeBar),this.rangeBar=void 0),this.tooltip.isVisible&&!y(this.tooltipObj)&&(this.tooltipObj.destroy(),this.tooltipElement=void 0,this.tooltipCollidedPosition=void 0),this.limits.enabled&&("MinRange"===t||"Default"===t?y(this.limitBarFirst)||(this.removeElement(this.limitBarFirst),this.limitBarFirst=void 0):y(this.limitBarSecond)||(this.removeElement(this.limitBarSecond),this.limitBarSecond=void 0)),this.activeHandle=1,this.getThemeInitialization(),"Range"===this.type&&this.rangeValueUpdate(),this.createRangeBar(),this.limits.enabled&&this.createLimitBar(),this.setHandler(),this.setOrientClass(),this.wireFirstHandleEvt(!this.enabled),"Range"===this.type&&this.wireSecondHandleEvt(!this.enabled),this.setValue(),this.tooltip.isVisible&&(this.renderTooltip(),this.wireMaterialTooltipEvent(!1)),this.setBarColor(),"tooltip"!==e&&this.updateConfig(),this.readonly&&(this.sliderContainer.classList.remove(cD),this.setReadOnly())},e.prototype.changeRtl=function(){if(this.enableRtl||"Range"!==this.type||(this.value=[this.handleVal2,this.handleVal1]),this.updateConfig(),this.tooltip.isVisible&&this.tooltipObj.refresh(this.firstHandle),this.showButtons){var t=this.enableRtl&&"Vertical"!==this.orientation;ht(t?this.secondBtn:this.firstBtn,{"aria-label":"Decrease",title:"Decrease"}),ht(t?this.firstBtn:this.secondBtn,{"aria-label":"Increase",title:"Increase"})}},e.prototype.changeOrientation=function(){this.changeSliderType(this.type,"null")},e.prototype.updateConfig=function(){this.setEnableRTL(),this.setValue(),this.tooltip.isVisible&&this.refreshTooltip(this.tooltipTarget),"None"!==this.ticks.placement&&this.ul&&(this.removeElement(this.ul),this.ul=void 0,this.renderScale()),this.limitsPropertyChange()},e.prototype.limitsPropertyChange=function(){this.limits.enabled?(y(this.limitBarFirst)&&"Range"!==this.type&&this.createLimitBar(),y(this.limitBarFirst)&&y(this.limitBarSecond)&&"Range"===this.type&&this.createLimitBar(),this.setLimitBar(),this.setValue()):(y(this.limitBarFirst)||at(this.limitBarFirst),y(this.limitBarSecond)||at(this.limitBarSecond))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unwireEvents(),window.removeEventListener("resize",this.onresize),et([this.sliderContainer],[Ow]),this.firstHandle.removeAttribute("aria-orientation"),"Range"===this.type&&this.secondHandle.removeAttribute("aria-orientation"),this.sliderContainer.parentNode&&this.sliderContainer.parentNode.insertBefore(this.element,this.sliderContainer),at(this.sliderContainer),this.tooltip.isVisible&&this.tooltipObj.destroy(),this.element.innerHTML="",this.hiddenInput=null,this.sliderContainer=null,this.sliderTrack=null,this.rangeBar=null,this.firstHandle=null,this.secondHandle=null,this.tickElementCollection=null,this.ul=null,this.firstBtn=null,this.secondBtn=null,this.materialHandle=null,this.tooltipObj=null,this.tooltipTarget=null,this.limitBarFirst=null,this.limitBarSecond=null,this.firstChild=null,this.lastChild=null,this.tooltipElement=null},e.prototype.onPropertyChanged=function(t,e){for(var i=this,n=0,s=Object.keys(t);n<s.length;n++){var r=s[n];switch(r){case"cssClass":this.setCSSClass(e.cssClass);break;case"value":if(t&&e){var o=y(t.value)?"Range"===this.type?[this.min,this.max]:this.min:t.value;this.setProperties({value:o},!0),y(e.value)||e.value.toString()===o.toString()||(this.setValue(),this.refreshTooltip(this.tooltipTarget),"Range"===this.type&&(y(t.value)||e.value[1]===o[1]?this.activeHandle=1:this.activeHandle=2))}break;case"min":case"step":case"max":this.setMinMaxValue();break;case"tooltip":y(t.tooltip)||y(e.tooltip)||(this.initialTooltip=!0,this.setTooltip(r),this.showButtons||this.wireEvents());break;case"type":y(e)||!Object.keys(e).length||y(e.type)||(this.changeSliderType(e.type,r),this.setZindex());break;case"enableRtl":e.enableRtl!==t.enableRtl&&"Vertical"!==this.orientation&&(this.rtl=e.enableRtl,this.changeRtl());break;case"limits":this.limitsPropertyChange();break;case"orientation":this.changeOrientation();break;case"ticks":y(this.sliderContainer.querySelector("."+xw))||(at(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(t){t.match(/e-scale-/)&&i.sliderContainer.classList.remove(t)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex());break;case"locale":this.showButtons&&this.buttonTitle();break;case"showButtons":t.showButtons?(this.setButtons(),this.reposition(),this.enabled&&!this.readonly&&this.wireButtonEvt(!1)):this.firstBtn&&this.secondBtn&&(this.sliderContainer.removeChild(this.firstBtn),this.sliderContainer.removeChild(this.secondBtn),this.sliderContainer.classList.remove(eD),this.firstBtn=void 0,this.secondBtn=void 0,this.reposition());break;case"enabled":this.setEnabled();break;case"readonly":this.setReadOnly();break;case"customValues":this.setValue(),this.reposition();break;case"colorRange":this.reposition();break;case"width":this.setElementWidth(t.width),this.setMinMaxValue(),this.limits&&this.limitsPropertyChange()}}},e.prototype.setReadOnly=function(){this.readonly?(this.unwireEvents(),this.sliderContainer.classList.add(cD)):(this.wireEvents(),this.sliderContainer.classList.remove(cD))},e.prototype.setMinMaxValue=function(){var t=this;this.setValue(),this.refreshTooltip(this.tooltipTarget),y(this.sliderContainer.querySelector("."+xw))||this.ul&&(at(this.ul),Array.prototype.forEach.call(this.sliderContainer.classList,function(e){e.match(/e-scale-/)&&t.sliderContainer.classList.remove(e)})),"None"!==this.ticks.placement&&(this.renderScale(),this.setZindex())},e.prototype.setZindex=function(){this.zIndex=6,y(this.ticks)||"None"===this.ticks.placement||y(this.ul)||y(this.element)||(this.ul.style.zIndex=this.zIndex+-7+"",this.element.style.zIndex=this.zIndex+2+""),this.isMaterial||this.isMaterial3||y(this.ticks)||"Both"!==this.ticks.placement||(this.element.style.zIndex=this.zIndex+2+""),y(this.firstHandle)||(this.firstHandle.style.zIndex=this.zIndex+3+""),"Range"!==this.type||y(this.secondHandle)||(this.secondHandle.style.zIndex=this.zIndex+4+"")},e.prototype.setTooltip=function(t){this.changeSliderType(this.type,t)},e.prototype.setBarColor=function(){for(var t,e,i=this.sliderTrack.lastElementChild;i;)this.sliderTrack.removeChild(i),i=this.sliderTrack.lastElementChild;for(var n=0;n<this.colorRange.length;n++)if(!y(this.colorRange[n].start)&&!y(this.colorRange[n].end)&&this.colorRange[n].end>this.colorRange[n].start){this.colorRange[n].start<this.min&&(this.colorRange[n].start=this.min),this.colorRange[n].end>this.max&&(this.colorRange[n].end=this.max);var s=this.checkHandlePosition(this.colorRange[n].start),r=this.checkHandlePosition(this.colorRange[n].end),o=this.createElement("div");o.style.backgroundColor=this.colorRange[n].color,o.style.border="1px solid "+this.colorRange[n].color,"Horizontal"===this.orientation?(e=Fw,t=this.enableRtl?y(this.customValues)?this.checkHandlePosition(this.max)-this.checkHandlePosition(this.colorRange[n].end):this.checkHandlePosition(this.customValues.length-this.colorRange[n].end-1):this.checkHandlePosition(this.colorRange[n].start),o.style.width=r-s+"px",o.style.left=t+"px"):(e=Ww,t=this.checkHandlePosition(this.colorRange[n].start),o.style.height=r-s+"px",o.style.bottom=t+"px"),o.classList.add(e),this.sliderTrack.appendChild(o)}},e.prototype.getModuleName=function(){return"slider"},hw([jt(null)],e.prototype,"value",void 0),hw([jt(null)],e.prototype,"customValues",void 0),hw([jt(1)],e.prototype,"step",void 0),hw([jt(null)],e.prototype,"width",void 0),hw([jt(0)],e.prototype,"min",void 0),hw([jt(100)],e.prototype,"max",void 0),hw([jt(!1)],e.prototype,"readonly",void 0),hw([jt("Default")],e.prototype,"type",void 0),hw([Rt([{}],dw)],e.prototype,"colorRange",void 0),hw([Bt({},cw)],e.prototype,"ticks",void 0),hw([Bt({},pw)],e.prototype,"limits",void 0),hw([jt(!0)],e.prototype,"enabled",void 0),hw([Bt({},uw)],e.prototype,"tooltip",void 0),hw([jt(!1)],e.prototype,"showButtons",void 0),hw([jt(!0)],e.prototype,"enableAnimation",void 0),hw([jt("Horizontal")],e.prototype,"orientation",void 0),hw([jt("")],e.prototype,"cssClass",void 0),hw([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),hw([Ut()],e.prototype,"created",void 0),hw([Ut()],e.prototype,"change",void 0),hw([Ut()],e.prototype,"changed",void 0),hw([Ut()],e.prototype,"renderingTicks",void 0),hw([Ut()],e.prototype,"renderedTicks",void 0),hw([Ut()],e.prototype,"tooltipChange",void 0),e=hw([Ft],e)}(_e),vD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bD=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},CD={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")};!function(t){t[t.Message=0]="Message",t[t.Label=1]="Label"}(iw||(iw={}));!function(t){function e(e,i){var n=t.call(this,i,e)||this;if(n.validated=[],n.errorRules=[],n.allowSubmit=!1,n.required="required",n.infoElement=null,n.inputElement=null,n.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",n.localyMessage={},n.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},void 0===n.rules&&(n.rules={}),n.l10n=new ri("formValidator",n.defaultMessages,n.locale),n.locale&&n.localeFunc(),Se.on("notifyExternalChange",n.afterLocalization,n),e="string"==typeof e?ct(e,document):e,null!=n.element)return n.element.setAttribute("novalidate",""),n.inputElements=dt(n.selectQuery,n.element),n.createHTML5Rules(),n.wireEvents(),n}var i;vD(e,t),i=e,e.prototype.addRules=function(t,e){t&&(this.rules.hasOwnProperty(t)?f(this.rules[""+t],e,{}):this.rules[""+t]=e)},e.prototype.removeRules=function(t,e){if(t||e)if(this.rules[""+t]&&!e)delete this.rules[""+t];else{if(y(this.rules[""+t]&&e))return;for(var i=0;i<e.length;i++)delete this.rules[""+t][e[parseInt(i.toString(),10)]]}else this.rules={}},e.prototype.validate=function(t){var e=Object.keys(this.rules);if(t&&e.length)return this.validateRules(t),-1!==e.indexOf(t)&&0===this.errorRules.filter(function(e){return e.name===t}).length;this.errorRules=[];for(var i=0,n=e;i<n.length;i++){var s=n[i];this.validateRules(s)}return 0===this.errorRules.length},e.prototype.reset=function(){this.element.reset(),this.clearForm()},e.prototype.getInputElement=function(t){return this.inputElement=ct('[name="'+t+'"]',this.element),this.inputElement},e.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var e=0,i=dt("."+this.errorClass+", ."+this.validClass,this.element);e<i.length;e++){at(i[e])}t.prototype.destroy.call(this),this.infoElement=null,Se.off("notifyExternalChange",this.afterLocalization)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){if("locale"===n[i])this.localeFunc()}},e.prototype.localeFunc=function(){for(var t=0,e=Object.keys(this.defaultMessages);t<e.length;t++){var i=e[t];this.l10n.setLocale(this.locale);var n=this.l10n.getConstant(i);this.localyMessage[""+i]=n}},e.prototype.getModuleName=function(){return"formvalidator"},e.prototype.afterLocalization=function(t){this.locale=t.locale,this.localeFunc()},e.prototype.refresh=function(){this.unwireEvents(),this.inputElements=dt(this.selectQuery,this.element),this.wireEvents()},e.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var t=0,e=dt(this.selectQuery,this.element);t<e.length;t++){var i=e[t];i.removeAttribute("aria-invalid");var n=i.parentElement,s=n.parentElement;n.classList.contains("e-control-wrapper")||n.classList.contains("e-wrapper")||i.classList.contains("e-input")&&n.classList.contains("e-input-group")?n.classList.remove(this.errorClass):null!=s&&(s.classList.contains("e-control-wrapper")||s.classList.contains("e-wrapper"))?s.classList.remove(this.errorClass):i.classList.remove(this.errorClass),i.name.length>0&&(this.getInputElement(i.name),this.getErrorElement(i.name),this.hideMessage(i.name)),n.classList.contains("e-control-wrapper")||n.classList.contains("e-wrapper")||i.classList.contains("e-input")&&n.classList.contains("e-input-group")?n.classList.remove(this.validClass):null!=s&&(s.classList.contains("e-control-wrapper")||s.classList.contains("e-wrapper"))?s.classList.remove(this.validClass):i.classList.remove(this.validClass)}},e.prototype.createHTML5Rules=function(){for(var t=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],e=["hidden","email","url","date","number","tel"],i=0,n=this.inputElements;i<n.length;i++){for(var s=n[i],r={},o=0,a=t;o<a.length;o++){var l=a[o];if(null!==s.getAttribute(l))switch(l){case"required":this.defRule(s,r,l,s.required);break;case"data-validation":l=s.getAttribute(l),this.defRule(s,r,l,!0);break;case"type":-1!==e.indexOf(s.type)&&this.defRule(s,r,s.type,!0);break;case"rangeLength":case"range":this.defRule(s,r,l,JSON.parse(s.getAttribute(l)));break;case"equalTo":var h=s.getAttribute(l);this.defRule(s,r,l,h);break;default:"true"===s.getAttribute("data-val")?this.annotationRule(s,r,l,s.getAttribute(l)):this.defRule(s,r,l,s.getAttribute(l))}}0!==Object.keys(r).length&&this.addRules(s.name,r)}},e.prototype.annotationRule=function(t,e,i,n){var s=i.split("-"),r=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],o=s[s.length-1],a=s[s.length-2];if(-1!==r.indexOf(o))switch(o){case"required":this.defRule(t,e,"required",n);break;case"creditcard":this.defRule(t,e,"creditcard",n);break;case"phone":this.defRule(t,e,"tel",n)}else if(-1!==r.indexOf(a))switch(a){case"maxlength":this.defRule(t,e,"maxLength",n);break;case"minlength":this.defRule(t,e,"minLength",n);break;case"range":var l=t.getAttribute("data-val-range-min"),h=t.getAttribute("data-val-range-max");this.defRule(t,e,"range",[l,h]);break;case"equalto":var c=t.getAttribute(i).split(".");this.defRule(t,e,"equalTo",c[c.length-1]);break;case"regex":this.defRule(t,e,"regex",n)}},e.prototype.defRule=function(t,e,i,n){var s,r=t.getAttribute("data-"+i+"-message"),o=t.getAttribute("data-val-"+i);this.rules[t.name]&&"validateHidden"!==i&&"hidden"!==i&&(this.getInputElement(t.name),s=this.getErrorMessage(this.rules[t.name][""+i],i)),r?n=[n,r]:o?n=[n,o]:s&&(n=[n,s]),e[""+i]=n},e.prototype.wireEvents=function(){for(var t=0,e=this.inputElements;t<e.length;t++){var n=e[t];i.isCheckable(n)?K.add(n,"click",this.clickHandler,this):"SELECT"===n.tagName?K.add(n,"change",this.changeHandler,this):(K.add(n,"focusout",this.focusOutHandler,this),K.add(n,"keyup",this.keyUpHandler,this))}K.add(this.element,"submit",this.submitHandler,this),K.add(this.element,"reset",this.resetHandler,this)},e.prototype.unwireEvents=function(){for(var t=0,e=this.inputElements;t<e.length;t++){var i=e[t];K.clearEvents(i)}K.remove(this.element,"submit",this.submitHandler),K.remove(this.element,"reset",this.resetHandler)},e.prototype.focusOutHandler=function(t){this.trigger("focusout",t);var e=t.target;this.rules[e.name]&&(this.rules[e.name][this.required]||e.value.length>0?this.validate(e.name):-1===this.validated.indexOf(e.name)&&this.validated.push(e.name))},e.prototype.keyUpHandler=function(t){this.trigger("keyup",t);var e=t.target;(9!==t.which||this.rules[e.name]&&(!this.rules[e.name]||this.rules[e.name][this.required]))&&-1!==this.validated.indexOf(e.name)&&this.rules[e.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(t.which)&&this.validate(e.name)},e.prototype.clickHandler=function(t){this.trigger("click",t);var e=t.target;"submit"!==e.type?this.validate(e.name):null!==e.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},e.prototype.changeHandler=function(t){this.trigger("change",t);var e=t.target;this.validate(e.name)},e.prototype.submitHandler=function(t){this.trigger("submit",t),this.allowSubmit||this.validate()?this.allowSubmit=!1:t.preventDefault()},e.prototype.resetHandler=function(){this.clearForm()},e.prototype.validateRules=function(t){if(this.rules[""+t]){var e=Object.keys(this.rules[""+t]),i=!1,n=!1,s=e.indexOf("validateHidden"),r=e.indexOf("hidden");if(this.getInputElement(t),-1!==r&&(i=!0),-1!==s&&(n=!0),!i||i&&n){-1!==s&&e.splice(s,1),-1!==r&&e.splice(r-1,1),this.getErrorElement(t);for(var o=0,a=e;o<a.length;o++){var l=a[o],h=this.getErrorMessage(this.rules[""+t][""+l],l),c={name:t,message:h},d={inputName:t,element:this.inputElement,message:h};if(!this.isValid(t,l)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(t),this.errorRules.push(c),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info");var p=this.inputElement.parentElement,u=p.parentElement;p.classList.contains("e-control-wrapper")||p.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&p.classList.contains("e-input-group")?(p.classList.add(this.errorClass),p.classList.remove(this.validClass)):null!=u&&(u.classList.contains("e-control-wrapper")||u.classList.contains("e-wrapper"))?(u.classList.add(this.errorClass),u.classList.remove(this.validClass)):(this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass)),this.infoElement?this.showMessage(c):this.createErrorElement(t,c.message,this.inputElement),d.errorElement=this.infoElement,d.status="failure",p.classList.contains("e-control-wrapper")||p.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&p.classList.contains("e-input-group")?(p.classList.add(this.errorClass),p.classList.remove(this.validClass)):null!=u&&(u.classList.contains("e-control-wrapper")||u.classList.contains("e-wrapper"))?(u.classList.add(this.errorClass),u.classList.remove(this.validClass)):(this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass)),this.optionalValidationStatus(t,d),this.trigger("validationComplete",d),"required"===l&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(t),d.status="success",this.trigger("validationComplete",d)}}}},e.prototype.optionalValidationStatus=function(t,e){this.rules[""+t][this.required]||this.inputElement.value.length||y(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),e.status="",this.hideMessage(t))},e.prototype.isValid=function(t,e){var n=this.rules[""+t][""+e],s=n instanceof Array&&"string"==typeof n[1]?n[0]:n,r=this.rules[""+t][""+e],o="min"!==e&&"max"!==e||!this.rules[""+t].date||"string"!=typeof this.rules[""+t].date?null:this.rules[""+t].date,a={value:this.inputElement.value,param:s,element:this.inputElement,formElement:this.element,format:o,culture:this.locale};return this.trigger("validationBegin",a),!a.param&&"required"===e||(r&&"function"==typeof r[0]?r[0].call(this,{element:this.inputElement,value:this.inputElement.value}):i.isCheckable(this.inputElement)?"required"!==e||dt('input[name="'+t+'"]:checked',this.element).length>0:i.checkValidator[""+e](a))},e.prototype.getErrorMessage=function(t,e){var i=this.inputElement.getAttribute("data-"+e+"-message")?this.inputElement.getAttribute("data-"+e+"-message"):t instanceof Array&&"string"==typeof t[1]?t[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[""+e]:this.defaultMessages[""+e],n=i.match(/{(\d)}/g);if(!y(n))for(var s=0;s<n.length;s++){var r=t instanceof Array?t[parseInt(s.toString(),10)]:t;i=i.replace(n[parseInt(s.toString(),10)],r)}return i},e.prototype.createErrorElement=function(t,e,i){var n=$(this.errorElement,{className:this.errorClass,innerHTML:e,attrs:{for:t}});if(this.errorOption===iw.Message&&(n.classList.remove(this.errorClass),n.classList.add("e-message"),n=$(this.errorContainer,{className:this.errorClass,innerHTML:n.outerHTML})),n.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+i.id+'"]'))this.element.querySelector('[data-valmsg-for="'+i.id+'"]').appendChild(n);else if(!0===i.hasAttribute("data-msg-containerid")){ct("#"+i.getAttribute("data-msg-containerid"),this.element).appendChild(n)}else if(null!=this.customPlacement)this.customPlacement.call(this,this.inputElement,n);else{var s=this.inputElement.parentElement,r=s.parentElement;s.classList.contains("e-control-wrapper")||s.classList.contains("e-wrapper")?r.insertBefore(n,s.nextSibling):r.classList.contains("e-control-wrapper")||r.classList.contains("e-wrapper")?r.parentElement.insertBefore(n,r.nextSibling):s.insertBefore(n,this.inputElement.nextSibling)}n.style.display="block",this.getErrorElement(t),this.validated.push(t),this.checkRequired(t)},e.prototype.getErrorElement=function(t){return this.infoElement=ct(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=ct(this.errorElement+"."+this.errorClass+'[for="'+t+'"]',this.element)),this.infoElement},e.prototype.removeErrorRules=function(t){for(var e=0;e<this.errorRules.length;e++){this.errorRules[parseInt(e.toString(),10)].name===t&&this.errorRules.splice(e,1)}},e.prototype.showMessage=function(t){this.infoElement.style.display="block",this.infoElement.innerHTML=t.message,this.checkRequired(t.name)},e.prototype.hideMessage=function(t){if(this.infoElement){this.infoElement.style.display="none",this.removeErrorRules(t);var e=this.inputElement.parentElement,i=e.parentElement;e.classList.contains("e-control-wrapper")||e.classList.contains("e-wrapper")||this.inputElement.classList.contains("e-input")&&e.classList.contains("e-input-group")?(e.classList.add(this.validClass),e.classList.remove(this.errorClass)):null!=i&&(i.classList.contains("e-control-wrapper")||i.classList.contains("e-wrapper"))?(i.classList.add(this.validClass),i.classList.remove(this.errorClass)):(this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass)),this.inputElement.setAttribute("aria-invalid","false")}},e.prototype.checkRequired=function(t){this.rules[""+t][this.required]||this.inputElement.value.length||y(this.infoElement)||(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(t))},e.isCheckable=function(t){var e=t.getAttribute("type");return e&&("checkbox"===e||"radio"===e||"submit"===e)},e.checkValidator={required:function(t){return isNaN(Date.parse(t.value))?t.value.toString().length>0:!isNaN(new Date(t.value).getTime())},email:function(t){return CD.EMAIL.test(t.value)},url:function(t){return CD.URL.test(t.value)},dateIso:function(t){return CD.DATE_ISO.test(t.value)},tel:function(t){return CD.PHONE.test(t.value)},creditcard:function(t){return CD.CREDITCARD.test(t.value)},number:function(t){return!isNaN(Number(t.value))&&-1===String(t.value).indexOf(" ")},digits:function(t){return CD.DIGITS.test(t.value)},maxLength:function(t){return t.value.length<=Number(t.param)},minLength:function(t){return t.value.length>=Number(t.param)},rangeLength:function(t){var e=t.param;return t.value.length>=e[0]&&t.value.length<=e[1]},range:function(t){var e=t.param;return!isNaN(Number(t.value))&&Number(t.value)>=e[0]&&Number(t.value)<=e[1]},date:function(t){if(y(t.param)||"string"!=typeof t.param||""===t.param)return!isNaN(new Date(t.value).getTime());var e=t.culture&&""!==t.culture?new Te(t.culture):new Te,i={format:t.param.toString(),type:"dateTime",skeleton:"yMd"},n=e.parseDate(t.value,i);return!y(n)&&n instanceof Date&&!isNaN(+n)},max:function(t){if(!isNaN(Number(t.value)))return+t.value<=+t.param;if(t.format&&""!==t.format){var e=t.culture&&""!==t.culture?new Te(t.culture):new Te,i={format:t.format.toString(),type:"dateTime",skeleton:"yMd"},n=e.parseDate(t.value,i),s="string"==typeof t.param?e.parseDate(JSON.parse(JSON.stringify(t.param)),i):t.param;return new Date(n).getTime()<=new Date(s).getTime()}return new Date(t.value).getTime()<=new Date(JSON.parse(JSON.stringify(t.param))).getTime()},min:function(t){if(isNaN(Number(t.value))){if(-1!==t.value.indexOf(",")){var e=t.value.replace(/,/g,"");return parseFloat(e)>=Number(t.param)}if(t.format&&""!==t.format){var i=t.culture&&""!==t.culture?new Te(t.culture):new Te,n={format:t.format.toString(),type:"dateTime",skeleton:"yMd"},s=i.parseDate(t.value,n),r="string"==typeof t.param?i.parseDate(JSON.parse(JSON.stringify(t.param)),n):t.param;return new Date(s).getTime()>=new Date(r).getTime()}return new Date(t.value).getTime()>=new Date(JSON.parse(JSON.stringify(t.param))).getTime()}return+t.value>=+t.param},regex:function(t){return new RegExp(t.param).test(t.value)},equalTo:function(t){var e=t.formElement.querySelector("#"+t.param);return t.param=e.value,t.param===t.value}},bD([jt("")],e.prototype,"locale",void 0),bD([jt("e-hidden")],e.prototype,"ignore",void 0),bD([jt()],e.prototype,"rules",void 0),bD([jt("e-error")],e.prototype,"errorClass",void 0),bD([jt("e-valid")],e.prototype,"validClass",void 0),bD([jt("label")],e.prototype,"errorElement",void 0),bD([jt("div")],e.prototype,"errorContainer",void 0),bD([jt(iw.Label)],e.prototype,"errorOption",void 0),bD([Ut()],e.prototype,"focusout",void 0),bD([Ut()],e.prototype,"keyup",void 0),bD([Ut()],e.prototype,"click",void 0),bD([Ut()],e.prototype,"change",void 0),bD([Ut()],e.prototype,"submit",void 0),bD([Ut()],e.prototype,"validationBegin",void 0),bD([Ut()],e.prototype,"validationComplete",void 0),bD([Ut()],e.prototype,"customPlacement",void 0),e=i=bD([Ft],e)}(Ct);var ID=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),MD=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},SD="e-file-select",xD="e-file-drop",wD="e-upload-files",DD="e-upload-file-list",ED="e-file-status",TD="e-file-name",AD="e-file-type",ND="e-file-size",LD="e-file-remove-btn",OD="e-file-delete-btn",kD="e-spinner-pane",zD="e-file-abort-btn",PD="e-file-reload-btn",jD="e-upload-drag-hover",BD="e-upload-progress-wrap",HD="e-upload-progress-bar",RD="e-progress-bar-text",VD="e-upload-progress",UD="e-upload-success",FD="e-upload-fails",WD="e-file-container",YD="e-validation-fails",_D="e-rtl",QD="e-disabled",ZD="e-rtl-container",qD="e-clear-icon-focus",XD="e-file-pause-btn",GD="e-file-play-btn",KD="e-restrict-retry",JD=["title","style","class"],$D="e-form-upload",tE="e-file-invalid",eE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ID(e,t),MD([jt("")],e.prototype,"name",void 0),MD([jt(null)],e.prototype,"size",void 0),MD([jt("")],e.prototype,"type",void 0),e}(re),iE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ID(e,t),MD([jt("Browse...")],e.prototype,"browse",void 0),MD([jt("Upload")],e.prototype,"upload",void 0),MD([jt("Clear")],e.prototype,"clear",void 0),e}(re),nE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ID(e,t),MD([jt("")],e.prototype,"saveUrl",void 0),MD([jt("")],e.prototype,"removeUrl",void 0),MD([jt(0)],e.prototype,"chunkSize",void 0),MD([jt(3)],e.prototype,"retryCount",void 0),MD([jt(500)],e.prototype,"retryAfterDelay",void 0),e}(re),sE=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.initialAttr={accept:null,multiple:!1,disabled:!1},n.uploadedFilesData=[],n.base64String=[],n.isForm=!1,n.allTypes=!1,n.pausedData=[],n.uploadMetaData=[],n.tabIndex="0",n.btnTabIndex="0",n.disableKeyboardNavigation=!1,n.count=-1,n.actionCompleteCount=0,n.flag=!0,n.selectedFiles=[],n.uploaderName="UploadFiles",n.fileStreams=[],n.newFileRef=0,n.isFirstFileOnSelection=!1,n.dragCounter=0,n.fileList=[],n.filesData=[],n.uploaderOptions=e,n}return ID(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"allowedExtensions":this.setExtensions(this.allowedExtensions),this.clearAll();break;case"enabled":this.setControlStatus();break;case"multiple":this.setMultipleSelection();break;case"enableRtl":this.setRTL(),this.reRenderFileList();break;case"buttons":this.buttons.browse=y(this.buttons.browse)?"":this.buttons.browse,this.buttons.clear=y(this.buttons.clear)?"":this.buttons.clear,this.buttons.upload=y(this.buttons.upload)?"":this.buttons.upload,this.renderButtonTemplates();break;case"dropArea":this.unBindDropEvents(),this.updateDropArea();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkHTMLAttributes(!0);break;case"files":this.renderPreLoadFiles();break;case"directoryUpload":this.updateDirectoryAttributes();break;case"template":this.isReact?this.reRenderFileList():this.clearAll();break;case"minFileSize":case"maxFileSize":case"autoUpload":case"sequentialUpload":this.clearAll();break;case"locale":this.l10n.setLocale(this.locale),this.setLocalizedTexts(),this.preLocaleObj=c("currentLocale",this.l10n);break;case"cssClass":this.setCSSClass(e.cssClass)}}},e.prototype.setLocalizedTexts=function(){y(this.template)&&("string"==typeof this.buttons.browse&&(this.browseButton.innerText="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText),this.uploadWrapper&&!y(this.uploadWrapper.querySelector("."+xD))&&(this.uploadWrapper.querySelector("."+xD).innerHTML=this.localizedTexts("dropFilesHint"))),this.updateFileList())},e.prototype.getKeyValue=function(t){for(var e,i=0,n=Object.keys(this.preLocaleObj);i<n.length;i++){var s=n[i];this.preLocaleObj[""+s]===t&&(e=s)}return e},e.prototype.updateFileList=function(){if(this.fileList.length>0&&!y(this.uploadWrapper.querySelector("."+wD)))for(var t=0;t<this.fileList.length;t++)this.fileList[t].querySelector(".e-file-status").innerHTML=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.filesData[t].status=this.localizedTexts(this.getKeyValue(this.filesData[t].status)),this.fileList[t].classList.contains(UD)&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("delete")),this.fileList[t].querySelector(".e-file-play-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("resume")),this.fileList[t].querySelector(".e-file-remove-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("remove")),this.fileList[t].querySelector(".e-file-reload-btn")&&this.fileList[t].querySelector(".e-icons").setAttribute("title",this.localizedTexts("retry")),this.autoUpload||(this.uploadButton.innerText="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.localizedTexts("Upload")),this.clearButton.innerText="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.localizedTexts("Clear")))},e.prototype.reRenderFileList=function(){this.listParent&&(at(this.listParent),this.listParent=null,this.fileList=[],this.internalCreateFileList(this.filesData),this.actionButtons&&(this.removeActionButtons(),this.renderActionButtons(),this.checkActionButtonStatus()))},e.prototype.preRender=function(){this.localeText={Browse:"Browse...",Clear:"Clear",Upload:"Upload",invalidFileName:"File Name is not allowed",dropFilesHint:"Or drop files here",invalidMaxFileSize:"File size is too large",invalidMinFileSize:"File size is too small",invalidFileType:"File type is not allowed",uploadFailedMessage:"File failed to upload",uploadSuccessMessage:"File uploaded successfully",removedSuccessMessage:"File removed successfully",removedFailedMessage:"Unable to remove file",inProgress:"Uploading",readyToUploadMessage:"Ready to upload",abort:"Abort",remove:"Remove",cancel:"Cancel",delete:"Delete file",pauseUpload:"File upload paused",pause:"Pause",resume:"Resume",retry:"Retry",fileUploadCancel:"File upload canceled",invalidFileSelection:"Invalid files selected",totalFiles:"Total files",size:"Size"},this.l10n=new ri("uploader",this.localeText,this.locale),this.preLocaleObj=c("currentLocale",this.l10n),this.formRendered(),this.updateHTMLAttrToElement(),this.checkHTMLAttributes(!1);var t=c("ej2_instances",this.element);if("EJS-UPLOADER"===this.element.tagName){for(var e=this.createElement("input",{attrs:{type:"file"}}),i=0;i<this.element.attributes.length;i++)"id"!==this.element.attributes[i].nodeName?e.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue):"id"===this.element.attributes[i].nodeName&&e.setAttribute(this.element.attributes[i].nodeName,b("uploader")),e.innerHTML=this.element.innerHTML;e.hasAttribute("name")||e.setAttribute("name","UploadFiles"),this.element.appendChild(e),this.element=e,d("ej2_instances",t,this.element)}t[0].isPureReactComponent&&(y(t[0].props.name)?!y(t[0].props.id)&&y(t[0].props.name)?this.element.setAttribute("name",t[0].props.id):this.element.setAttribute("name","UploadFiles"):this.element.setAttribute("name",t[0].props.name)),y(this.element.getAttribute("name"))&&this.element.setAttribute("name",this.element.getAttribute("id")),this.element.hasAttribute("type")||this.element.setAttribute("type","file"),this.updateDirectoryAttributes(),this.keyConfigs={enter:"enter"},this.element.hasAttribute("tabindex")&&(this.tabIndex=this.element.getAttribute("tabindex")),this.browserName=G.info.name,this.uploaderName=this.element.getAttribute("name")},e.prototype.formRendered=function(){var t=ut(this.element,"form");if(!y(t))for(;t&&t!==document.documentElement;t=t.parentElement)"FORM"===t.tagName&&(this.isForm=!0,this.formElement=t,t.setAttribute("enctype","multipart/form-data"),t.setAttribute("encoding","multipart/form-data"))},e.prototype.getPersistData=function(){return this.addOnPersist(["filesData"])},e.prototype.getModuleName=function(){return"uploader"},e.prototype.updateDirectoryAttributes=function(){this.directoryUpload?(this.element.setAttribute("directory","true"),this.element.setAttribute("webkitdirectory","true")):(this.element.removeAttribute("directory"),this.element.removeAttribute("webkitdirectory"))},e.prototype.render=function(){this.renderBrowseButton(),this.initializeUpload(),this.updateHTMLAttrToWrapper(),this.wireEvents(),this.setMultipleSelection(),this.setExtensions(this.allowedExtensions),this.setRTL(),this.renderPreLoadFiles(),this.setControlStatus(),this.setCSSClass()},e.prototype.renderBrowseButton=function(){this.browseButton=this.createElement("button",{className:"e-css e-btn",attrs:{type:"button"}}),this.browseButton.setAttribute("tabindex",this.tabIndex),"string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.innerText)):this.browseButton.appendChild(this.buttons.browse),this.element.setAttribute("aria-label","Uploader")},e.prototype.renderActionButtons=function(){this.element.setAttribute("tabindex","-1"),this.actionButtons=this.createElement("div",{className:"e-upload-actions"}),this.uploadButton=this.createElement("button",{className:"e-file-upload-btn e-css e-btn e-flat e-primary",attrs:{type:"button",tabindex:this.btnTabIndex,"aria-label":this.localizedTexts("Upload")}}),this.clearButton=this.createElement("button",{className:"e-file-clear-btn e-css e-btn e-flat",attrs:{type:"button",tabindex:this.btnTabIndex,"aria-label":this.localizedTexts("Clear")}}),this.actionButtons.appendChild(this.clearButton),this.actionButtons.appendChild(this.uploadButton),this.renderButtonTemplates(),this.uploadWrapper.appendChild(this.actionButtons),this.browseButton.blur(),this.isPreloadFiles||this.uploadButton.focus(),this.wireActionButtonEvents()},e.prototype.serverActionButtonsEventBind=function(t){t&&!this.isForm&&(this.browseButton.blur(),this.actionButtons=t,this.uploadButton=this.actionButtons.querySelector(".e-file-upload-btn"),this.clearButton=this.actionButtons.querySelector(".e-file-clear-btn"),this.uploadButton.focus(),this.unwireActionButtonEvents(),this.wireActionButtonEvents(),this.checkActionButtonStatus())},e.prototype.wireActionButtonEvents=function(){K.add(this.uploadButton,"click",this.uploadButtonClick,this),K.add(this.clearButton,"click",this.clearButtonClick,this)},e.prototype.unwireActionButtonEvents=function(){K.remove(this.uploadButton,"click",this.uploadButtonClick),K.remove(this.clearButton,"click",this.clearButtonClick)},e.prototype.removeActionButtons=function(){this.actionButtons&&(this.unwireActionButtonEvents(),at(this.actionButtons),this.actionButtons=null)},e.prototype.renderButtonTemplates=function(){if("string"==typeof this.buttons.browse?(this.browseButton.textContent="Browse..."===this.buttons.browse?this.localizedTexts("Browse"):this.buttons.browse,this.browseButton.setAttribute("title",this.browseButton.textContent)):(this.browseButton.innerHTML="",this.browseButton.appendChild(this.buttons.browse)),this.uploadButton){var t=y(this.buttons.upload)?"Upload":this.buttons.upload;this.buttons.upload=t,"string"==typeof this.buttons.upload?(this.uploadButton.textContent="Upload"===this.buttons.upload?this.localizedTexts("Upload"):this.buttons.upload,this.uploadButton.setAttribute("title",this.uploadButton.textContent)):(this.uploadButton.innerHTML="",this.uploadButton.appendChild(this.buttons.upload))}if(this.clearButton){var e=y(this.buttons.clear)?"Clear":this.buttons.clear;this.buttons.clear=e,"string"==typeof this.buttons.clear?(this.clearButton.textContent="Clear"===this.buttons.clear?this.localizedTexts("Clear"):this.buttons.clear,this.clearButton.setAttribute("title",this.clearButton.textContent)):(this.clearButton.innerHTML="",this.clearButton.appendChild(this.buttons.clear))}},e.prototype.initializeUpload=function(){this.element.setAttribute("tabindex","-1");var t=this.createElement("span",{className:SD});this.element.parentElement.insertBefore(t,this.element),this.dropAreaWrapper=this.createElement("div",{className:"e-file-select-wrap"}),this.element.parentElement.insertBefore(this.dropAreaWrapper,this.element),t.appendChild(this.element),this.dropAreaWrapper.appendChild(this.browseButton),this.dropAreaWrapper.appendChild(t),this.uploadWrapper=this.createElement("div",{className:"e-upload e-control-wrapper"}),this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper,this.dropAreaWrapper),this.uploadWrapper.appendChild(this.dropAreaWrapper),this.setDropArea()},e.prototype.renderPreLoadFiles=function(){if(this.files.length){if(this.enablePersistence&&this.filesData.length)return void this.internalCreateFileList(this.filesData);if(y(this.files[0].size))return;this.isPreloadFiles=!0;var t=[].slice.call(this.files),e=[];this.multiple||(this.clearData(),t=[t[0]]);for(var i=0,n=t;i<n.length;i++){var s=n[i],r={name:s.name+"."+s.type.split(".")[s.type.split(".").length-1],rawFile:"",size:s.size,status:this.localizedTexts("uploadSuccessMessage"),type:s.type,validationMessages:{minSize:"",maxSize:""},statusCode:"2"};e.push(r),this.filesData.push(r)}this.internalCreateFileList(e),this.autoUpload||!this.listParent||this.actionButtons||this.isForm&&!this.allowUpload()||!this.showFileList||this.renderActionButtons(),this.checkActionButtonStatus(),this.sequentialUpload&&(this.count=this.filesData.length-1),this.isPreloadFiles=!1}},e.prototype.checkActionButtonStatus=function(){if(this.actionButtons){var t=this.uploadWrapper.querySelectorAll("."+YD).length+this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length+this.uploadWrapper.querySelectorAll("span."+UD).length+this.uploadWrapper.querySelectorAll("span."+VD).length;t>0&&t===this.uploadWrapper.querySelectorAll("li").length?this.uploadButton.setAttribute("disabled","disabled"):this.uploadButton.removeAttribute("disabled")}},e.prototype.setDropArea=function(){var t=this.dropAreaWrapper.querySelector(".e-file-drop");if(this.dropArea){this.dropZoneElement="string"!=typeof this.dropArea?this.dropArea:ct(this.dropArea,document);for(var e=this.element,i=!1;e.parentNode;)(e=e.parentNode)===this.dropZoneElement&&(i=!0,t?t.innerHTML=this.localizedTexts("dropFilesHint"):this.createDropTextHint());!i&&t&&lt(t)}else y(this.uploaderOptions)||void 0!==this.uploaderOptions.dropArea||(this.createDropTextHint(),this.dropZoneElement=this.uploadWrapper,this.setProperties({dropArea:this.uploadWrapper},!0));this.bindDropEvents()},e.prototype.updateDropArea=function(){if(this.dropArea)this.setDropArea();else{this.dropZoneElement=null;var t=this.dropAreaWrapper.querySelector(".e-file-drop");t&&lt(t)}},e.prototype.createDropTextHint=function(){var t=this.createElement("span",{className:xD});t.innerHTML=this.localizedTexts("dropFilesHint"),this.dropAreaWrapper.appendChild(t)},e.prototype.updateHTMLAttrToElement=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];JD.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.updateHTMLAttrToWrapper=function(){if(!y(this.htmlAttributes))for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if(JD.indexOf(i)>-1)if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&tt([this.uploadWrapper],n.split(" "))}else if("style"===i){var s=this.uploadWrapper.getAttribute(i);s=y(s)?this.htmlAttributes[""+i]:s+this.htmlAttributes[""+i],this.uploadWrapper.setAttribute(i,s)}else this.uploadWrapper.setAttribute(i,this.htmlAttributes[""+i])}},e.prototype.setMultipleSelection=function(){if(this.multiple&&!this.element.hasAttribute("multiple")){var t=document.createAttribute("multiple");t.value="multiple",this.element.setAttributeNode(t)}else this.multiple||this.element.removeAttribute("multiple")},e.prototype.checkAutoUpload=function(t){this.autoUpload?(this.sequentialUpload?this.sequenceUpload(t):this.upload(t),this.removeActionButtons()):this.actionButtons||this.renderActionButtons(),this.checkActionButtonStatus()},e.prototype.sequenceUpload=function(t){if(this.filesData.length-t.length===0||"1"!==this.filesData[this.filesData.length-t.length-1].statusCode){(this.multiple||this.count<0)&&++this.count;var e=!this.showFileList;"object"==typeof this.filesData[this.count]?(this.isFirstFileOnSelection=!1,this.upload(this.filesData[this.count],e),"0"===this.filesData[this.count].statusCode&&this.sequenceUpload(t)):--this.count}},e.prototype.setCSSClass=function(t){var e=t;y(t)||(e=t.replace(/\s+/g," ").trim()),y(t)||""===e||et([this.uploadWrapper],e.split(" "));var i=this.cssClass;y(this.cssClass)||""===this.cssClass||(i=this.cssClass.replace(/\s+/g," ").trim()),y(this.cssClass)||""===i||tt([this.uploadWrapper],i.split(i.indexOf(",")>-1?",":" "))},e.prototype.wireEvents=function(){K.add(this.browseButton,"click",this.browseButtonClick,this),K.add(this.element,"change",this.onSelectFiles,this),K.add(document,"click",this.removeFocus,this),this.keyboardModule=new si(this.uploadWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),this.isForm&&K.add(this.formElement,"reset",this.resetForm,this)},e.prototype.unWireEvents=function(){K.remove(this.browseButton,"click",this.browseButtonClick),K.remove(this.element,"change",this.onSelectFiles),K.remove(document,"click",this.removeFocus),this.isForm&&K.remove(this.formElement,"reset",this.resetForm),this.keyboardModule&&this.keyboardModule.destroy()},e.prototype.resetForm=function(){this.clearAll()},e.prototype.keyActionHandler=function(t){var e=t.target;if("enter"===t.action){if(t.target===this.clearButton)this.clearButtonClick();else if(t.target===this.uploadButton)this.uploadButtonClick();else if(t.target===this.browseButton)this.browseButtonClick();else if(e.classList.contains(XD)){(i=this.getCurrentMetaData(null,t)).file.statusCode="4",i.file.status=this.localizedTexts("pauseUpload"),this.abortUpload(i,!1)}else if(e.classList.contains(GD))this.resumeUpload(this.getCurrentMetaData(null,t),t);else if(e.classList.contains(PD)){var i;if(y(i=this.getCurrentMetaData(null,t))){var n=t.target.parentElement,s=this.filesData[this.fileList.indexOf(n)];this.retry(s)}else i.file.statusCode="1",i.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(i.file)}else this.removeFiles(t),e.classList.contains(zD)||this.browseButton.focus();t.preventDefault(),t.stopPropagation()}},e.prototype.getCurrentMetaData=function(t,e){var i,n;if(y(t)){var s=e.target.parentElement;i=this.filesData[this.fileList.indexOf(s)]}else i=t;for(var r=0;r<this.uploadMetaData.length;r++)this.uploadMetaData[r].file.name===i.name&&(n=this.uploadMetaData[r]);return n},e.prototype.removeFocus=function(){this.uploadWrapper&&this.listParent&&this.listParent.querySelector("."+qD)&&(document.activeElement.blur(),this.listParent.querySelector("."+qD).classList.remove(qD))},e.prototype.browseButtonClick=function(){this.element.click()},e.prototype.uploadButtonClick=function(){this.sequentialUpload?this.sequenceUpload(this.filesData):this.upload(this.filesData)},e.prototype.clearButtonClick=function(){this.clearAll(),this.sequentialUpload&&(this.count=-1),this.actionCompleteCount=0},e.prototype.bindDropEvents=function(){this.dropZoneElement&&(K.add(this.dropZoneElement,"drop",this.dropElement,this),K.add(this.dropZoneElement,"dragover",this.dragHover,this),K.add(this.dropZoneElement,"dragleave",this.onDragLeave,this),K.add(this.dropZoneElement,"paste",this.onPasteFile,this),K.add(this.dropZoneElement,"dragenter",this.onDragEnter,this))},e.prototype.unBindDropEvents=function(){this.dropZoneElement&&(K.remove(this.dropZoneElement,"drop",this.dropElement),K.remove(this.dropZoneElement,"dragover",this.dragHover),K.remove(this.dropZoneElement,"dragleave",this.onDragLeave),K.remove(this.dropZoneElement,"dragenter",this.onDragEnter))},e.prototype.onDragEnter=function(t){this.enabled&&(this.dropZoneElement.classList.add(jD),this.dragCounter=this.dragCounter+1,t.preventDefault(),t.stopPropagation())},e.prototype.onDragLeave=function(){this.enabled&&(this.dragCounter=this.dragCounter-1,this.dragCounter||this.dropZoneElement.classList.remove(jD))},e.prototype.dragHover=function(t){this.enabled&&("Default"!==this.dropEffect&&(t.dataTransfer.dropEffect=this.dropEffect.toLowerCase()),t.preventDefault(),t.stopPropagation())},e.prototype.dropElement=function(t){this.dragCounter=0,this.dropZoneElement.classList.remove(jD),this.onSelectFiles(t),t.preventDefault(),t.stopPropagation()},e.prototype.onPasteFile=function(t){var e=t.clipboardData.items;if("paste"===t.type&&"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=t.clipboardData.files),1===e.length||this.multiple)for(var i=0;i<e.length;i++){var n=[].slice.call(e)[i];y(n.getAsFile())||"file"!==n.kind&&!n.type.match("^image/")||this.renderSelectedFiles(t,[n.getAsFile()],!1,!0)}},e.prototype.getSelectedFiles=function(t){for(var e=[],i=this.fileList[t],n=this.getFilesData(),s=+i.getAttribute("data-files-count"),r=0,o=0;o<t;o++)r+=+this.fileList[o].getAttribute("data-files-count");for(var a=r;a<r+s;a++)e.push(n[a]);return e},e.prototype.removeFiles=function(t){if(this.enabled){var e=t.target.parentElement,i=this.fileList.indexOf(e),n=this.fileList[i],s=this.isFormUpload(),r=s?this.getSelectedFiles(i):this.getFilesInArray(this.filesData[i]);if(!y(r)){if(t.target.classList.contains(zD)&&!s){if(r[0].statusCode="5",!y(n)){var o=n.querySelector("."+zD);mc({target:o,width:"20px"}),Ac(o)}this.sequentialUpload&&this.uploadSequential(),n.classList.contains(KD)||this.checkActionComplete(!0)}else ut(t.target,"."+kD)||this.remove(r,!1,!1,!0,t);if(this.isForm&&n&&n.classList.contains(tE)&&(this.element.value=""),this.checkActionButtonStatus(),this.actionButtons&&this.clearButton&&this.uploadWrapper){var a=this.uploadWrapper.querySelectorAll(".e-upload-progress-bar.e-upload-progress:not(.e-upload-success):not(.e-upload-fails)");1===a.length&&e.contains(a[0])&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled")}}}},e.prototype.removeFilesData=function(t,e){var i;if(e)this.showFileList||(i=this.filesData.indexOf(t),this.filesData.splice(i,1));else{var n=this.getLiElement(t);y(n)||(this.element.value="",at(n),i=this.fileList.indexOf(n),this.fileList.splice(i,1),this.filesData.splice(i,1),0!==this.fileList.length||y(this.listParent)||(at(this.listParent),this.listParent=null,this.removeActionButtons()),this.sequentialUpload&&i<=this.count&&--this.count)}},e.prototype.removeUploadedFile=function(t,e,i,n){var s=this,r=t,o=new R(this.asyncSettings.removeUrl,"POST",!0,null);o.emitError=!1;var a=new FormData;o.beforeSend=function(n){e.currentRequest=o.httpRequest,i?s.removingEventCallback(e,a,r,t):s.trigger("removing",e,function(e){e.cancel?n.cancel=!0:s.removingEventCallback(e,a,r,t)})},o.onLoad=function(t){return s.removeCompleted(t,r,n),{}},o.onError=function(t){return s.removeFailed(t,r,n),{}},o.send(a)},e.prototype.removingEventCallback=function(t,e,i,n){var s=this.element.getAttribute("name"),r=this.getLiElement(n);if(!(y(r)||y(r.querySelector("."+OD))&&y(r.querySelector("."+LD)))){var o=r.querySelector("."+OD)?r.querySelector("."+OD):r.querySelector("."+LD);mc({target:o,width:"20px"}),Ac(o)}t.postRawFile&&!y(i.rawFile)&&""!==i.rawFile?e.append(s,i.rawFile,i.name):e.append(s,i.name),this.updateFormData(e,t.customFormData)},e.prototype.updateFormData=function(t,e){if(e.length>0&&e[0])for(var i=function(i){var n=e[i],s=Object.keys(n).map(function(t){return n[""+t]});t.append(Object.keys(n)[0],s)},n=0;n<e.length;n++)i(n)},e.prototype.updateCustomheader=function(t,e){if(e.length>0&&e[0])for(var i=function(i){var n=e[i],s=Object.keys(n).map(function(t){return n[""+t]});t.setRequestHeader(Object.keys(n)[0],s)},n=0;n<e.length;n++)i(n)},e.prototype.removeCompleted=function(t,e,i){var n=t&&t.currentTarget?this.getResponse(t):null,s=t.target;if(4===s.readyState&&s.status>=200&&s.status<=299){var r={e:t,response:n,operation:"remove",file:this.updateStatus(e,this.localizedTexts("removedSuccessMessage"),"2")};this.trigger("success",r),this.removeFilesData(e,i);var o=this.uploadedFilesData.indexOf(e);this.uploadedFilesData.splice(o,1),this.trigger("change",{files:this.uploadedFilesData})}else this.removeFailed(t,e,i)},e.prototype.removeFailed=function(t,e,i){var n={e:t,response:t&&t.currentTarget?this.getResponse(t):null,operation:"remove",file:this.updateStatus(e,this.localizedTexts("removedFailedMessage"),"0")};if(!i){var s=this.filesData.indexOf(e),r=this.fileList[s];if(r){r.classList.remove(UD),r.classList.add(FD);var o=r.querySelector("."+ED);o&&(o.classList.remove(UD),o.classList.add(FD))}this.checkActionButtonStatus()}this.trigger("failure",n);var a=this.getLiElement(e);y(a)||y(a.querySelector("."+OD))||(Lc(a.querySelector("."+OD)),at(a.querySelector(".e-spinner-pane")))},e.prototype.getFilesFromFolder=function(t){this.filesEntries=[];var e=this.multiple?t.dataTransfer.items:[t.dataTransfer.items[0]];if(this.checkDirectoryUpload(e))for(var i=function(i){var s=e[i].webkitGetAsEntry();if(s.isFile){var r=[];s.file(function(t){var e=s.fullPath;r.push({path:e,file:t})}),n.renderSelectedFiles(t,r,!0)}else s.isDirectory&&n.traverseFileTree(s,t)},n=this,s=0;s<e.length;s++)i(s)},e.prototype.checkDirectoryUpload=function(t){for(var e=0;t&&e<t.length;e++){if(t[e].webkitGetAsEntry().isDirectory)return!0}return!1},e.prototype.traverseFileTree=function(t,e){if(t.isFile)this.filesEntries.push(t);else if(t.isDirectory){var i=t.createReader();this.readFileFromDirectory(i,e)}},e.prototype.readFileFromDirectory=function(t,e){var i=this;t.readEntries(function(n){for(var s=0;s<n.length;s++)i.traverseFileTree(n[s],e);i.pushFilesEntries(e),n.length&&i.readFileFromDirectory(t)})},e.prototype.pushFilesEntries=function(t){for(var e=this,i=[],n=function(n){s.filesEntries[n].file(function(s){if(e.filesEntries.length){var r=e.filesEntries[n].fullPath;i.push({path:r,file:s}),n===e.filesEntries.length-1&&(e.filesEntries=[],e.renderSelectedFiles(t,i,!0))}})},s=this,r=0;r<this.filesEntries.length;r++)n(r)},e.prototype.onSelectFiles=function(t){if(this.enabled){var e;if("drop"===t.type)if(this.directoryUpload)this.getFilesFromFolder(t);else{var i=this.sortFilesList=t.dataTransfer.files;"msie"!==this.browserName&&"edge"!==this.browserName&&"safari"!==this.browserName&&(this.element.files=i),i.length>0&&(e=this.multiple?this.sortFileList(i):[i[0]],this.renderSelectedFiles(t,e))}else e=[].slice.call(t.target.files),this.renderSelectedFiles(t,e);(this.isAngular||this.isReact)&&t.stopPropagation()}},e.prototype.getBase64=function(t){return new Promise(function(e,i){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=function(t){return i(t)}})},e.prototype.renderSelectedFiles=function(t,e,i,n){var s=this;this.base64String=[];var r={event:t,cancel:!1,filesData:[],isModified:!1,modifiedFilesData:[],progressInterval:"",isCanceled:!1,currentRequest:null,customFormData:null};if(e.length<1)return r.isCanceled=!0,void this.trigger("selected",r);this.flag=!0;var o=[];this.multiple||(this.clearData(!0),this.actionCompleteCount=0,e=[e[0]]);for(var a=0;a<e.length;a++){var l=i?e[a].file:e[a];this.updateInitialFileDetails(t,e,l,a,o,i,n)}if(r.filesData=o,!y(this.allowedExtensions)&&this.allowedExtensions.indexOf("*")>-1&&(this.allTypes=!0),this.enableHtmlSanitizer)for(a=0;a<o.length;a++){for(var h=Yi.beforeSanitize(),c=Yi.serializeValue(h,o[parseInt(a.toString(),10)].name),d=o[parseInt(a.toString(),10)].name,p=!1,u=0;u<d.length;u++)if(d.charCodeAt(u)>127){p=!0;break}var g=/<([a-z][a-z0-9]*)\b[^>]*>(.*?)<\/\1>/i.test(d);if(c!==o[parseInt(a.toString(),10)].name&&(!p||g)){var m=e[parseInt(a.toString(),10)].name.replace(/[\u00A0-\u9999<>\\&]/g,function(t){return"&#"+t.charCodeAt(0)+";"});o[parseInt(a.toString(),10)].name=m,o[parseInt(a.toString(),10)].status=this.localizedTexts("invalidFileName"),o[parseInt(a.toString(),10)].statusCode="0"}}this.allTypes||(o=this.checkExtension(o)),this.trigger("selected",r,function(t){s._internalRenderSelect(t,o)})},e.prototype.updateInitialFileDetails=function(t,e,i,n,s,r,o){var a={name:r?e[n].path.substring(1,e[n].path.length):o?b(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name):this.directoryUpload?e[n].webkitRelativePath:i.name,rawFile:i,size:i.size,status:this.localizedTexts("readyToUploadMessage"),type:this.getFileType(i.name),validationMessages:this.validatedFileSize(i.size),statusCode:"1",id:b(i.name.substring(0,i.name.lastIndexOf(".")))+"."+this.getFileType(i.name)};o&&(a.fileSource="paste"),a.status=""!==a.validationMessages.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.validationMessages.maxSize?this.localizedTexts("invalidMaxFileSize"):a.status,""===a.validationMessages.minSize&&""===a.validationMessages.maxSize||(a.statusCode="0",this.checkActionComplete(!0)),s.push(a)},e.prototype._internalRenderSelect=function(t,e){if(!t.cancel){if(this.selectedFiles=this.selectedFiles.concat(e),this.btnTabIndex=this.disableKeyboardNavigation?"-1":"0",this.showFileList){if(t.isModified&&t.modifiedFilesData.length>0){for(var i=0;i<t.modifiedFilesData.length;i++)for(var n=0;n<e.length;n++)t.modifiedFilesData[i].id===e[n].id&&(t.modifiedFilesData[i].rawFile=e[n].rawFile);var s=this.allTypes?t.modifiedFilesData:this.checkExtension(t.modifiedFilesData);this.updateSortedFileList(s),this.filesData=this.filesData.concat(s),this.isForm&&!this.allowUpload()||this.checkAutoUpload(s)}else{if(this.internalCreateFileList(e),this.autoUpload&&this.sequenceUpload&&this.sequentialUpload&&this.filesData.length>0&&"2"!==this.filesData[this.filesData.length-1].statusCode&&"0"!==this.filesData[this.filesData.length-1].statusCode)return void(this.filesData=this.filesData.concat(e));this.filesData=this.filesData.concat(e),this.isForm&&!this.allowUpload()||this.checkAutoUpload(e)}y(t.progressInterval)||""===t.progressInterval||(this.progressInterval=t.progressInterval)}else this.filesData=this.filesData.concat(e),this.autoUpload&&this.upload(this.filesData,!0);this.raiseActionComplete(),this.isFirstFileOnSelection=!0}},e.prototype.allowUpload=function(){var t=!1;return this.isForm&&!y(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl&&(t=!0),t},e.prototype.isFormUpload=function(){var t=!1;return!this.isForm||!y(this.asyncSettings.saveUrl)&&""!==this.asyncSettings.saveUrl||!y(this.asyncSettings.removeUrl)&&""!==this.asyncSettings.removeUrl||(t=!0),t},e.prototype.clearData=function(t){y(this.listParent)||(at(this.listParent),this.listParent=null),"msie"===this.browserName||t||(this.element.value=""),this.fileList=[],this.filesData=[],this.removeActionButtons()},e.prototype.updateSortedFileList=function(t){var e=this.createElement("div",{id:"clonewrapper"}),i=-1;if(this.listParent){for(var n=0;n<this.listParent.querySelectorAll("li").length;n++){var s=this.listParent.querySelectorAll("li")[n];e.appendChild(s.cloneNode(!0))}this.removeActionButtons();var r=[].slice.call(e.childNodes);this.createParentUL();for(var o=0;o<t.length;o++){for(var a=0;a<this.filesData.length;a++)this.filesData[a].name===t[o].name&&(this.listParent.appendChild(r[a]),K.add(r[a].querySelector(".e-icons"),"click",this.removeFiles,this),this.fileList.push(r[a]),i=o);i!==o&&this.internalCreateFileList([t[o]])}}else this.internalCreateFileList(t)},e.prototype.isBlank=function(t){return!t||/^\s*$/.test(t)},e.prototype.checkGenericExtension=function(t,e){var i=[];switch(t.toLowerCase()){case"image/*":i.push("jpg","jpeg","png","gif","bmp","tiff","svg","webp","heic");break;case"audio/*":i.push("mp3","wav","aac","flac","ogg","m4a");break;case"video/*":i.push("mp4","mov","avi","mkv","flv","wmv","webm","mpeg");break;case"application/*":i.push("doc","docx","xls","xlsx","ppt","pptx","zip","rar","7z","tar","pdf");break;case"text/*":i.push("txt","csv","html","css","js","json","xml","md")}return i.includes(e.toLowerCase())},e.prototype.checkExtension=function(t){var e=t;if(!this.isBlank(this.allowedExtensions)){for(var i=[],n=0,s=y(i)?[""]:this.allowedExtensions.split(",");n<s.length;n++){var r=s[n];i.push(r.trim().toLocaleLowerCase())}for(var o=0;o<t.length;o++){var a=-1!==t[o].type.indexOf(".")?t[o].type.replace(".",""):t[o].type;if(-1!==i[0].indexOf("/*"))this.checkGenericExtension(i[0],a)||(t[o].status=this.localizedTexts("invalidFileType"),t[o].statusCode="0");else-1===i.indexOf(("."+a).toLocaleLowerCase())&&(t[o].status=this.localizedTexts("invalidFileType"),t[o].statusCode="0")}}return e},e.prototype.validatedFileSize=function(t){var e="",i="";return t<this.minFileSize?e=this.localizedTexts("invalidMinFileSize"):t>this.maxFileSize?i=this.localizedTexts("invalidMaxFileSize"):(e="",i=""),{minSize:e,maxSize:i}},e.prototype.isPreLoadFile=function(t){for(var e=!1,i=0;i<this.files.length;i++)this.files[i].name===t.name.slice(0,t.name.lastIndexOf("."))&&this.files[i].type===t.type&&(e=!0);return e},e.prototype.createCustomfileList=function(t){this.createParentUL();for(var e=0,i=t;e<i.length;e++){var n=i[e],s=this.createElement("li",{className:DD,attrs:{"data-file-name":n.name}});this.uploadTemplateFn=this.templateComplier(this.template);var r=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,s);if(r)rt([].slice.call(r),s);var o=t.indexOf(n),a={element:s,fileInfo:n,index:o,isPreload:this.isPreLoadFile(n)},l={element:s,fileInfo:n,index:o,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",a),this.trigger("fileListRendering",l),this.listParent.appendChild(s),this.fileList.push(s)}this.renderReactTemplates()},e.prototype.createParentUL=function(){y(this.listParent)&&(this.listParent=this.createElement("ul",{className:wD}),this.uploadWrapper.appendChild(this.listParent))},e.prototype.formFileList=function(t,e){var i=this.createElement("li",{className:DD});i.setAttribute("data-files-count",t.length+"");for(var n,s=this.createElement("span",{className:WD}),r=0,o=t;r<o.length;r++){var a=o[r],l=this.createElement("span",{className:TD});l.innerHTML=this.getFileNameOnly(a.name);var h=this.createElement("span",{className:AD}),c=this.getFileType(a.name);if(h.innerHTML="."+c,c||h.classList.add("e-hidden"),this.enableRtl){var d=this.createElement("span",{className:ZD});d.appendChild(h),d.appendChild(l),s.appendChild(d)}else s.appendChild(l),s.appendChild(h);this.truncateName(l),n=this.formValidateFileInfo(a,i)}i.appendChild(s),this.setListToFileInfo(t,i);var p=this.listParent.querySelectorAll("li").length,u=this.createElement("span");if(i.classList.contains(tE)?(u.classList.add(ED),u.classList.add(tE),u.innerText=t.length>1?this.localizedTexts("invalidFileSelection"):n):(u.classList.add(t.length>1?"e-file-information":ND),u.innerText=t.length>1?this.localizedTexts("totalFiles")+": "+t.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(t)):this.bytesToSize(t[0].size),this.createFormInput(t)),s.appendChild(u),y(i.querySelector(".e-icons"))){var g=this.createElement("span",{className:"e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&g.classList.add("e-msie"),g.setAttribute("title",this.localizedTexts("remove")),i.appendChild(s),i.appendChild(g),K.add(g,"click",this.removeFiles,this),g.classList.add(LD)}var m={element:i,fileInfo:this.mergeFileInfo(t,i),index:p,isPreload:this.isPreLoadFile(this.mergeFileInfo(t,i))},f={element:i,fileInfo:this.mergeFileInfo(t,i),index:p,isPreload:this.isPreLoadFile(this.mergeFileInfo(t,i))};this.trigger("rendering",m),this.trigger("fileListRendering",f),this.listParent.appendChild(i),this.fileList.push(i)},e.prototype.formValidateFileInfo=function(t,e){var i=t.status,n=this.validatedFileSize(t.size);""===n.minSize&&""===n.maxSize||(this.addInvalidClass(e),i=""!==n.minSize?this.localizedTexts("invalidMinFileSize"):""!==n.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var s=this.checkExtension(this.getFilesInArray(t))[0].status;return s===this.localizedTexts("invalidFileType")&&(this.addInvalidClass(e),i=s),i},e.prototype.addInvalidClass=function(t){t.classList.add(tE)},e.prototype.createFormInput=function(t){if("safari"!==this.browserName){var e=this.element.cloneNode(!0);e.classList.add("e-hidden-file-input");for(var i=0,n=t;i<n.length;i++){n[i].input=e}e.setAttribute("id",b("hiddenUploader")),e.setAttribute("name",this.uploaderName),this.uploadWrapper.querySelector("."+SD).appendChild(e),"msie"!==this.browserName&&"edge"!==this.browserName&&(this.element.value="")}},e.prototype.getFileSize=function(t){for(var e=0,i=0,n=t;i<n.length;i++){e+=n[i].size}return e},e.prototype.mergeFileInfo=function(t,e){for(var i={name:"",rawFile:"",size:0,status:"",type:"",validationMessages:{minSize:"",maxSize:""},statusCode:"1",list:e},n=[],s="",r=0,o=t;r<o.length;r++){var a=o[r];n.push(a.name),s=a.type}return i.name=n.join(", "),i.size=this.getFileSize(t),i.type=s,i.status=this.statusForFormUpload(t,e),i},e.prototype.statusForFormUpload=function(t,e){for(var i,n=!0,s=0,r=t;s<r.length;s++){var o=r[s];i=o.status;var a=this.validatedFileSize(o.size);""===a.minSize&&""===a.maxSize||(n=!1,i=""!==a.minSize?this.localizedTexts("invalidMinFileSize"):""!==a.maxSize?this.localizedTexts("invalidMaxFileSize"):i);var l=this.checkExtension(this.getFilesInArray(o))[0].status;l===this.localizedTexts("invalidFileType")&&(n=!1,i=l)}return n?i=this.localizedTexts("totalFiles")+": "+t.length+" , "+this.localizedTexts("size")+": "+this.bytesToSize(this.getFileSize(t)):(e.classList.add(tE),i=t.length>1?this.localizedTexts("invalidFileSelection"):i),i},e.prototype.formCustomFileList=function(t,e){this.createParentUL();var i=this.createElement("li",{className:DD});i.setAttribute("data-files-count",t.length+""),this.setListToFileInfo(t,i);var n=this.mergeFileInfo(t,i);i.setAttribute("data-file-name",n.name),this.uploadTemplateFn=this.templateComplier(this.template);var s=this.uploadTemplateFn(n,this,"template",this.element.id+"Template",this.isStringTemplate,null,i);s&&rt([].slice.call(s),i);var r=this.listParent.querySelectorAll("li").length;i.classList.contains(tE)||this.createFormInput(t);var o={element:i,fileInfo:n,index:r,isPreload:this.isPreLoadFile(n)},a={element:i,fileInfo:n,index:r,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",o),this.trigger("fileListRendering",a),this.listParent.appendChild(i),this.fileList.push(i),this.renderReactTemplates()},e.prototype.createFileList=function(t){this.filesData=this.filesData&&this.filesData.length>0?this.filesData.concat(t):t,this.internalCreateFileList(t)},e.prototype.internalCreateFileList=function(t){if(this.createParentUL(),""===this.template||y(this.template))if(this.isFormUpload())this.uploadWrapper.classList.add($D),this.formFileList(t,this.element.files);else for(var e=0,i=t;e<i.length;e++){var n=i[e],s=this.createElement("li",{className:DD,attrs:{"data-file-name":n.name,"data-files-count":"1"}}),r=this.createElement("span",{className:WD}),o=this.createElement("span",{className:TD,attrs:{title:n.name}});o.innerHTML=this.getFileNameOnly(n.name);var a=this.createElement("span",{className:AD}),l=this.getFileType(n.name);if(a.innerHTML="."+l,l||a.classList.add("e-hidden"),this.enableRtl){var h=this.createElement("span",{className:ZD});h.appendChild(a),h.appendChild(o),r.appendChild(h)}else r.appendChild(o),r.appendChild(a);var c=this.createElement("span",{className:ND});c.innerHTML=this.bytesToSize(n.size),r.appendChild(c);var d=this.createElement("span",{className:ED});r.appendChild(d),d.innerHTML=n.status,s.appendChild(r);var p=this.createElement("span",{className:" e-icons",attrs:{tabindex:this.btnTabIndex}});"msie"===this.browserName&&p.classList.add("e-msie"),p.setAttribute("title",this.localizedTexts("remove")),s.appendChild(p),K.add(p,"click",this.removeFiles,this),"2"===n.statusCode?(d.classList.add(UD),p.classList.add(OD),p.setAttribute("title",this.localizedTexts("delete")),p.setAttribute("aria-label",this.localizedTexts("delete"))):"1"!==n.statusCode&&(d.classList.remove(UD),d.classList.add(YD)),this.autoUpload&&"1"===n.statusCode&&""!==this.asyncSettings.saveUrl&&(d.innerHTML=""),p.classList.contains(OD)||(p.classList.add(LD),p.setAttribute("aria-label",this.localizedTexts("remove")));var u=t.indexOf(n),g={element:s,fileInfo:n,index:u,isPreload:this.isPreLoadFile(n)},m={element:s,fileInfo:n,index:u,isPreload:this.isPreLoadFile(n)};this.trigger("rendering",g),this.trigger("fileListRendering",m),this.listParent.appendChild(s),this.fileList.push(s),this.truncateName(o);var f=this.flag;this.isPreLoadFile(n)&&(this.flag=!1,this.checkActionComplete(!0),this.flag=f)}else this.isFormUpload()?(this.uploadWrapper.classList.add($D),this.formCustomFileList(t,this.element.files)):this.createCustomfileList(t)},e.prototype.getSlicedName=function(t){var e=t.textContent;t.dataset.tail=e.slice(e.length-10)},e.prototype.setListToFileInfo=function(t,e){for(var i=0,n=t;i<n.length;i++){n[i].list=e}},e.prototype.truncateName=function(t){var e=t;("edge"!==this.browserName&&e.offsetWidth<e.scrollWidth||e.offsetWidth+1<e.scrollWidth)&&this.getSlicedName(e)},e.prototype.getFileType=function(t){var e,i=t.lastIndexOf(".");return i>=0&&(e=t.substring(i+1)),e||""},e.prototype.getFileNameOnly=function(t){var e=this.getFileType(t);return t.split("."+e)[0]},e.prototype.setInitialAttributes=function(){if(this.initialAttr.accept&&this.element.setAttribute("accept",this.initialAttr.accept),this.initialAttr.disabled&&this.element.setAttribute("disabled","disabled"),this.initialAttr.multiple){var t=document.createAttribute("multiple");this.element.setAttributeNode(t)}},e.prototype.filterfileList=function(t){for(var e,i=[],n=0;n<t.length;n++)(y(e=this.getLiElement(t[n]))||e.classList.contains(UD))&&(this.showFileList||"File uploaded successfully"===t[n].status)||i.push(t[n]);return i},e.prototype.updateStatus=function(t,e,i,n){if(void 0===n&&(n=!0),""===e||y(e)||""===i||y(i)||(t.status=e,t.statusCode=i),n){var s=this.getLiElement(t);y(s)||y(s.querySelector("."+ED))||""===e||y(e)||(s.querySelector("."+ED).textContent=e)}return t},e.prototype.getLiElement=function(t){for(var e,i=0;i<this.filesData.length;i++)y(t)||(y(this.filesData[i].id)||y(t.id)?this.filesData[i].name!==t.name:this.filesData[i].name!==t.name||this.filesData[i].id!==t.id)||(e=i);return this.fileList[e]},e.prototype.createProgressBar=function(t){var e=this.createElement("span",{className:BD}),i=this.createElement("progressbar",{className:HD,attrs:{value:"0",max:"100"}}),n=this.createElement("span",{className:"e-progress-inner-wrap"});i.setAttribute("style","width: 0%");var s=this.createElement("span",{className:RD});s.textContent="0%",n.appendChild(i),e.appendChild(n),e.appendChild(s),t.querySelector("."+WD).appendChild(e)},e.prototype.updateProgressbar=function(t,e){if(!isNaN(Math.round(t.loaded/t.total*100))&&!y(e.querySelector("."+HD)))if(y(this.progressInterval)||""===this.progressInterval)this.changeProgressValue(e,Math.round(t.loaded/t.total*100).toString()+"%");else{var i=Math.round(t.loaded/t.total*100)%parseInt(this.progressInterval,10);0!==i&&100!==i||this.changeProgressValue(e,Math.round(t.loaded/t.total*100).toString()+"%")}},e.prototype.changeProgressValue=function(t,e){t.querySelector("."+HD).setAttribute("style","width:"+e),t.querySelector("."+RD).textContent=e},e.prototype.uploadInProgress=function(t,e,i,n){var s=this.getLiElement(e);if(!y(s)||i){if(y(s))this.cancelUploadingFile(e,t,n);else{"5"===e.statusCode&&this.cancelUploadingFile(e,t,n,s),s.querySelectorAll("."+BD).length>0||!s.querySelector("."+ED)||(s.querySelector("."+ED).classList.add(VD),this.createProgressBar(s),this.updateProgressBarClasses(s,VD),s.querySelector("."+ED).classList.remove(FD)),this.updateProgressbar(t,s);var r=s.querySelector("."+LD);y(r)||(r.classList.add(zD,VD),r.setAttribute("title",this.localizedTexts("abort")),r.classList.remove(LD))}var o={e:t,operation:"upload",file:this.updateStatus(e,this.localizedTexts("inProgress"),"3")};this.trigger("progress",o)}},e.prototype.cancelUploadingFile=function(t,e,i,n){var s=this;if("5"===t.statusCode){var r={event:e,fileData:t,cancel:!1,customFormData:[],currentRequest:null};this.trigger("canceling",r,function(e){if(e.cancel){if(t.statusCode="3",!y(n)){var r=n.querySelector("."+zD);y(r)||(Lc(r),at(n.querySelector(".e-spinner-pane")))}}else{i.emitError=!1,i.httpRequest.abort();var o=new FormData;if("5"===t.statusCode){var a=s.element.getAttribute("name");o.append(a,t.name),o.append("cancel-uploading",t.name),s.updateFormData(o,e.customFormData);var l=new R(s.asyncSettings.removeUrl,"POST",!0,null);l.emitError=!1,l.beforeSend=function(t){e.currentRequest&&s.updateCustomheader(l.httpRequest,e.currentRequest)},l.onLoad=function(e){return s.removecanceledFile(e,t),{}},l.send(o)}}})}},e.prototype.removecanceledFile=function(t,e){var i=this.getLiElement(e);if(!(y(i)||i.querySelector("."+PD)||y(i.querySelector("."+zD)))){this.updateStatus(e,this.localizedTexts("fileUploadCancel"),"5"),this.renderFailureState(t,e,i);var n=i.querySelector("."+LD);y(i)||(Lc(n),y(i.querySelector(".e-spinner-pane"))||at(i.querySelector(".e-spinner-pane")));var s={event:t,response:t&&t.currentTarget?this.getResponse(t):null,operation:"cancel",file:e};this.trigger("success",s)}},e.prototype.renderFailureState=function(t,e,i){var n=this;this.updateProgressBarClasses(i,FD),this.removeProgressbar(i,"failure"),y(i.querySelector(".e-file-status"))||i.querySelector(".e-file-status").classList.add(FD);var s=i.querySelector("."+zD);y(s)||(s.classList.remove(zD,VD),s.classList.add(LD),s.setAttribute("title",this.localizedTexts("remove")),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}}),s.parentElement.insertBefore(this.pauseButton,s),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.setAttribute("aria-label",this.localizedTexts("retry")),i.querySelector("."+PD).addEventListener("click",function(t){n.reloadcanceledFile(t,e,i,!1)},!1))},e.prototype.reloadcanceledFile=function(t,e,i,n){e.statusCode="1",e.status=this.localizedTexts("readyToUploadMessage"),n||(y(i.querySelector("."+ED))||i.querySelector("."+ED).classList.remove(FD),y(i.querySelector("."+PD))||at(i.querySelector("."+PD)),this.pauseButton=null),y(i)||i.classList.add(KD),this.upload([e])},e.prototype.uploadComplete=function(t,e,i){var n=t.target;if(4===n.readyState&&n.status>=200&&n.status<=299){var s=this.getLiElement(e);if(y(s)&&(!i||y(i))&&this.showFileList)return;if(!y(s)){this.updateProgressBarClasses(s,UD),this.removeProgressbar(s,"success");var r=s.querySelector("."+zD);y(r)||(r.classList.add(OD),r.setAttribute("title",this.localizedTexts("delete")),r.setAttribute("aria-label",this.localizedTexts("delete")),r.classList.remove(zD),r.classList.remove(VD))}this.raiseSuccessEvent(t,e)}else this.uploadFailed(t,e)},e.prototype.getResponse=function(t){var e=t.currentTarget;return{readyState:e.readyState,statusCode:e.status,statusText:e.statusText,headers:e.getAllResponseHeaders(),withCredentials:e.withCredentials}},e.prototype.raiseSuccessEvent=function(t,e){var i=this,n=t&&t.currentTarget?this.getResponse(t):null,s=this.localizedTexts("uploadSuccessMessage"),r={e:t,response:n,operation:"upload",file:this.updateStatus(e,s,"2",!1),statusText:s},o=this.getLiElement(e);if(!y(o)){var a=o.querySelector("."+kD);y(a)||(Lc(o),at(a))}this.trigger("success",r,function(t){i.updateStatus(e,t.statusText,"2"),i.multiple?i.uploadedFilesData.push(e):i.uploadedFilesData=[e],i.trigger("change",{file:i.uploadedFilesData}),i.checkActionButtonStatus(),i.fileList.length>0?i.getLiElement(e).classList.contains(KD)?i.getLiElement(e).classList.remove(KD):(i.uploadSequential(),i.checkActionComplete(!0)):i.showFileList||i.checkActionComplete(!0)})},e.prototype.uploadFailed=function(t,e){var i=this,n=this.getLiElement(e),s=t&&t.currentTarget?this.getResponse(t):null,r=this.localizedTexts("uploadFailedMessage"),o={e:t,response:s,operation:"upload",file:this.updateStatus(e,r,"0",!1),statusText:r};y(n)||this.renderFailureState(t,e,n),this.trigger("failure",o,function(t){i.updateStatus(e,t.statusText,"0"),i.checkActionButtonStatus(),i.uploadSequential(),i.checkActionComplete(!0)})},e.prototype.uploadSequential=function(){this.sequentialUpload&&(this.autoUpload?this.checkAutoUpload(this.filesData):this.uploadButtonClick())},e.prototype.checkActionComplete=function(t){t?++this.actionCompleteCount:--this.actionCompleteCount,this.raiseActionComplete()},e.prototype.raiseActionComplete=function(){if(this.filesData.length===this.actionCompleteCount&&this.flag){this.flag=!1;var t={fileData:[]};t.fileData=this.getSelectedFileStatus(this.selectedFiles),this.trigger("actionComplete",t)}},e.prototype.getSelectedFileStatus=function(t){for(var e=[],i=0,n=0;n<t.length;n++)for(var s=t[n],r=0;r<this.filesData.length;r++)if(this.filesData[r].name===s.name&&this.filesData[r].status===s.status){e[i]=this.filesData[r],++i;break}return e},e.prototype.updateProgressBarClasses=function(t,e){var i=t.querySelector("."+HD);y(i)||(i.classList.add(e),this.actionButtons&&this.clearButton&&this.uploadWrapper&&("e-upload-progress"!==e||this.clearButton.hasAttribute("disabled")?"e-upload-success"!==e&&"e-upload-fails"!==e||0!==this.uploadWrapper.querySelectorAll(".e-upload-progress-bar.e-upload-progress:not(.e-upload-success):not(.e-upload-fails)").length||!this.clearButton.hasAttribute("disabled")||this.clearButton.removeAttribute("disabled"):this.clearButton.setAttribute("disabled","disabled")))},e.prototype.removeProgressbar=function(t,e){var i=this;y(t.querySelector("."+BD))||(this.progressAnimation=new qt({duration:1250}),this.progressAnimation.animate(t.querySelector("."+BD),{name:"FadeOut"}),this.progressAnimation.animate(t.querySelector("."+RD),{name:"FadeOut"}),setTimeout(function(){i.animateProgressBar(t,e)},750))},e.prototype.animateProgressBar=function(t,e){"success"===e?(t.classList.add(UD),y(t.querySelector("."+ED))||(t.querySelector("."+ED).classList.remove(VD),this.progressAnimation.animate(t.querySelector("."+ED),{name:"FadeIn"}),t.querySelector("."+ED).classList.add(UD))):y(t.querySelector("."+ED))||(t.querySelector("."+ED).classList.remove(VD),this.progressAnimation.animate(t.querySelector("."+ED),{name:"FadeIn"}),t.querySelector("."+ED).classList.add(FD)),t.querySelector("."+BD)&&at(t.querySelector("."+BD))},e.prototype.setExtensions=function(t){""===t||y(t)?this.element.removeAttribute("accept"):this.element.setAttribute("accept",t)},e.prototype.templateComplier=function(t){if(t)try{return"function"!=typeof t&&dt(t,document).length?Hi(ct(t,document).innerHTML.trim()):Hi(t)}catch(e){return Hi(t)}},e.prototype.setRTL=function(){this.enableRtl?tt([this.uploadWrapper],_D):et([this.uploadWrapper],_D)},e.prototype.localizedTexts=function(t){return this.l10n.setLocale(this.locale),this.l10n.getConstant(t)},e.prototype.setControlStatus=function(){this.enabled?(this.uploadWrapper.classList.contains(QD)&&this.uploadWrapper.classList.remove(QD),!y(this.browseButton)&&this.element.hasAttribute("disabled")&&(this.element.removeAttribute("disabled"),this.browseButton.removeAttribute("disabled")),!y(this.clearButton)&&this.clearButton.hasAttribute("disabled")&&this.clearButton.removeAttribute("disabled"),!y(this.uploadButton)&&this.uploadButton.hasAttribute("disabled")&&this.uploadButton.hasAttribute("disabled")):(this.uploadWrapper.classList.add(QD),this.element.setAttribute("disabled","disabled"),this.browseButton.setAttribute("disabled","disabled"),y(this.clearButton)||this.clearButton.setAttribute("disabled","disabled"),y(this.uploadButton)||this.uploadButton.setAttribute("disabled","disabled"))},e.prototype.checkHTMLAttributes=function(t){for(var e=0,i=t?y(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["accept","multiple","disabled"];e<i.length;e++){var n=i[e];if(!y(this.element.getAttribute(n)))switch(n){case"accept":(y(this.uploaderOptions)||void 0===this.uploaderOptions.allowedExtensions||t)&&(this.setProperties({allowedExtensions:this.element.getAttribute("accept")},!t),this.initialAttr.accept=this.allowedExtensions);break;case"multiple":if(y(this.uploaderOptions)||void 0===this.uploaderOptions.multiple||t){var s="multiple"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({multiple:s},!t),this.initialAttr.multiple=!0}break;case"disabled":if(y(this.uploaderOptions)||void 0===this.uploaderOptions.enabled||t){var r="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:r},!t),this.initialAttr.disabled=!0}}}},e.prototype.chunkUpload=function(t,e,i){var n=Math.min(this.asyncSettings.chunkSize,t.size),s={chunkIndex:0,blob:t.rawFile.slice(0,n),file:t,start:0,end:n,retryCount:0,request:null};this.sendRequest(t,s,e,i)},e.prototype.sendRequest=function(t,e,i,n){var s=this,r=new FormData,o=t.rawFile.slice(e.start,e.end);r.append(this.uploaderName,o,t.name),r.append("chunk-index",e.chunkIndex.toString()),r.append("chunkIndex",e.chunkIndex.toString());var a=Math.max(Math.ceil(t.size/this.asyncSettings.chunkSize),1);r.append("total-chunk",a.toString()),r.append("totalChunk",a.toString());var l=new R({url:this.asyncSettings.saveUrl,type:"POST",async:!0,contentType:null});l.emitError=!1,l.onLoad=function(t){return s.chunkUploadComplete(t,e,i),{}},l.onUploadProgress=function(t){return s.chunkUploadInProgress(t,e,i),{}};var h={fileData:t,customFormData:[],cancel:!1,chunkSize:0===this.asyncSettings.chunkSize?null:this.asyncSettings.chunkSize};l.beforeSend=function(i){h.currentRequest=l.httpRequest,h.currentChunkIndex=e.chunkIndex,0===h.currentChunkIndex?s.trigger("uploading",h,function(e){s.uploadingEventCallback(r,e,i,t)}):s.trigger("chunkUploading",h,function(e){s.uploadingEventCallback(r,e,i,t)})},l.onError=function(t){return s.chunkUploadFailed(t,e,i),{}},l.send(r),e.request=l},e.prototype.uploadingEventCallback=function(t,e,i,n){e.cancel?this.eventCancelByArgs(i,e,n):this.updateFormData(t,e.customFormData)},e.prototype.eventCancelByArgs=function(t,e,i){var n=this;if(t.cancel=!0,"5"!==e.fileData.statusCode){e.fileData.statusCode="5",e.fileData.status=this.localizedTexts("fileUploadCancel");var s=this.getLiElement(e.fileData);if(s){y(s.querySelector("."+ED))||(s.querySelector("."+ED).innerHTML=this.localizedTexts("fileUploadCancel"),s.querySelector("."+ED).classList.add(FD)),this.pauseButton=this.createElement("span",{className:"e-icons e-file-reload-btn",attrs:{tabindex:this.btnTabIndex}});var r=s.querySelector("."+LD);r&&r.parentElement.insertBefore(this.pauseButton,r),this.pauseButton.setAttribute("title",this.localizedTexts("retry")),this.pauseButton.addEventListener("click",function(t){n.reloadcanceledFile(t,i,s)},!1),this.checkActionButtonStatus()}}},e.prototype.checkChunkUpload=function(){return!(this.asyncSettings.chunkSize<=0||y(this.asyncSettings.chunkSize))},e.prototype.chunkUploadComplete=function(t,e,i){var n,s=this,r=t.target;if(4===r.readyState&&r.status>=200&&r.status<300){var o=t&&t.currentTarget?this.getResponse(t):null,a=Math.max(Math.ceil(e.file.size/this.asyncSettings.chunkSize),1),l={event:t,file:e.file,chunkIndex:e.chunkIndex,totalChunk:a,chunkSize:this.asyncSettings.chunkSize,response:o};if(this.trigger("chunkSuccess",l),!y(i)&&i||(n=this.getLiElement(e.file)),this.updateMetaData(e),e.end===e.file.size&&(e.file.statusCode="3"),"5"===e.file.statusCode){var h={event:t,fileData:e.file,cancel:!1,customFormData:[]};this.trigger("canceling",h,function(t){if(t.cancel){e.file.statusCode="3";var o=n.querySelector("."+zD);y(n)||y(o)||(Lc(o),at(n.querySelector(".e-spinner-pane"))),s.sendNextRequest(e)}else{e.request.emitError=!1,r.abort();var a=new FormData,l=s.element.getAttribute("name");a.append(l,e.file.name),a.append("cancel-uploading",e.file.name),a.append("cancelUploading",e.file.name),s.updateFormData(a,t.customFormData);var h=new R(s.asyncSettings.removeUrl,"POST",!0,null);h.emitError=!1,h.onLoad=function(t){return s.removeChunkFile(t,e,i),{}},h.send(a)}})}else{if(a-1===e.chunkIndex&&a>e.chunkIndex){var c=this.pausedData.indexOf(e);return c>=0&&this.pausedData.splice(c,1),y(this.template)&&(y(i)||!i)&&n&&(n&&!y(n.querySelector("."+XD))&&at(n.querySelector("."+XD)),this.removeChunkProgressBar(e)),void this.raiseSuccessEvent(t,e.file)}"4"!==e.file.statusCode&&this.sendNextRequest(e)}}else this.chunkUploadFailed(t,e)},e.prototype.sendNextRequest=function(t){t.start=t.end,t.end+=this.asyncSettings.chunkSize,t.end=Math.min(t.end,t.file.size),t.chunkIndex+=1,this.sendRequest(t.file,t)},e.prototype.removeChunkFile=function(t,e,i){if(y(this.template)&&y(i)&&!i){var n=this.getLiElement(e.file),s=n.querySelector("."+zD),r=s;this.updateStatus(e.file,this.localizedTexts("fileUploadCancel"),"5"),this.updateProgressBarClasses(n,FD),this.removeProgressbar(n,"failure"),s&&(s.classList.remove(zD),s.classList.add(LD),s.setAttribute("title",this.localizedTexts("remove")));var o=n.querySelector("."+XD);o&&(o.classList.add(PD),o.classList.remove(XD),o.setAttribute("title",this.localizedTexts("retry"))),y(n)||y(s)||y(n.querySelector(".e-spinner-pane"))||(Lc(r),at(n.querySelector(".e-spinner-pane")))}},e.prototype.pauseUpload=function(t,e,i){t.file.statusCode="4",t.file.status=this.localizedTexts("pause"),this.updateMetaData(t);var n={event:e||null,file:t.file,chunkIndex:t.chunkIndex,chunkCount:Math.round(t.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.abortUpload(t,i,n),this.sequentialUpload&&this.uploadSequential()},e.prototype.abortUpload=function(t,e,i){"4"!==t.file.statusCode&&(t.request.emitError=!1,t.request.httpRequest.abort());var n=this.getLiElement(t.file);if(y(this.template)&&(y(e)||!e)&&n){var s=n.querySelector("."+XD);s.classList.remove(XD),s.classList.add(GD),s.setAttribute("title",this.localizedTexts("resume")),s.nextElementSibling.classList.add(LD),s.nextElementSibling.classList.remove(zD),s.nextElementSibling.setAttribute("title",this.localizedTexts("remove"))}for(var r=0;r<this.pausedData.length;r++)this.pausedData[r].file.name===t.file.name&&this.pausedData.splice(r,1);this.pausedData.push(t),this.trigger("pausing",i)},e.prototype.resumeUpload=function(t,e,i){var n,s=this.getLiElement(t.file);y(s)||(n=s.querySelector("."+GD)),y(n)||!y(i)&&i||(n.classList.remove(GD),n.classList.add(XD),n.setAttribute("title",this.localizedTexts("pause")),n.nextElementSibling.classList.remove(LD),n.nextElementSibling.classList.add(zD),n.nextElementSibling.setAttribute("title",this.localizedTexts("abort"))),t.file.status=this.localizedTexts("inProgress"),t.file.statusCode="3",this.updateMetaData(t);var r={event:e||null,file:t.file,chunkIndex:t.chunkIndex,chunkCount:Math.round(t.file.size/this.asyncSettings.chunkSize),chunkSize:this.asyncSettings.chunkSize};this.trigger("resuming",r);for(var o=0;o<this.pausedData.length;o++)this.pausedData[o].end===this.pausedData[o].file.size?this.chunkUploadComplete(e,t,i):this.pausedData[o].file.name===t.file.name&&(this.pausedData[o].start=this.pausedData[o].end,this.pausedData[o].end=this.pausedData[o].end+this.asyncSettings.chunkSize,this.pausedData[o].end=Math.min(this.pausedData[o].end,this.pausedData[o].file.size),this.pausedData[o].chunkIndex=this.pausedData[o].chunkIndex+1,this.sendRequest(this.pausedData[o].file,this.pausedData[o],i))},e.prototype.updateMetaData=function(t){-1===this.uploadMetaData.indexOf(t)||this.uploadMetaData.splice(this.uploadMetaData.indexOf(t),1),this.uploadMetaData.push(t)},e.prototype.removeChunkProgressBar=function(t){var e=this.getLiElement(t.file);if(!y(e)){this.updateProgressBarClasses(e,UD),this.removeProgressbar(e,"success");var i=e.querySelector("."+zD);y(i)||(i.classList.add(OD),i.setAttribute("title",this.localizedTexts("delete")),i.classList.remove(zD,VD))}},e.prototype.chunkUploadFailed=function(t,e,i){var n,s=this,r=Math.max(Math.ceil(e.file.size/this.asyncSettings.chunkSize),1);!y(this.template)||!y(i)&&i||(n=this.getLiElement(e.file));var o=t&&t.currentTarget?this.getResponse(t):null,a={event:t,file:e.file,chunkIndex:e.chunkIndex,totalChunk:r,chunkSize:this.asyncSettings.chunkSize,cancel:!1,response:o};this.trigger("chunkFailure",a,function(r){if(!r.cancel)if(e.retryCount<s.asyncSettings.retryCount)setTimeout(function(){s.retryRequest(n,e,i)},s.asyncSettings.retryAfterDelay);else{if(!y(n)){var a=n.querySelector("."+XD)?n.querySelector("."+XD):n.querySelector("."+GD);y(a)||(a.classList.add(PD),a.classList.remove(XD,GD)),s.updateProgressBarClasses(n,FD),s.removeProgressbar(n,"failure"),n.querySelector(".e-icons").classList.remove(VD);var l=n.querySelector("."+zD)?n.querySelector("."+zD):n.querySelector("."+LD);l.classList.remove(zD),y(n.querySelector("."+XD))||at(n.querySelector("."+XD)),e.start>0?(l.classList.add(OD),l.setAttribute("title",s.localizedTexts("delete"))):(l.classList.add(LD),l.setAttribute("title",s.localizedTexts("remove")))}e.retryCount=0;var h=e.file,c=s.localizedTexts("uploadFailedMessage"),d={e:t,response:o,operation:"upload",file:s.updateStatus(h,c,"0",!1),statusText:c};s.trigger("failure",d,function(t){s.updateStatus(h,t.statusText,"0"),s.uploadSequential(),s.checkActionComplete(!0)})}})},e.prototype.retryRequest=function(t,e,i){y(this.template)&&(y(i)||!i)&&t&&this.updateProgressBarClasses(t,FD),e&&(e.retryCount+=1,this.sendRequest(e.file,e))},e.prototype.checkPausePlayAction=function(t){var e=t.target,i=t.target.parentElement,n=this.fileList.indexOf(i),s=this.filesData[n],r=this.getCurrentMetaData(s);e.classList.contains(XD)?this.pauseUpload(r,t):e.classList.contains(GD)?this.resumeUpload(r,t):e.classList.contains(PD)&&(r.file.status===this.localizedTexts("fileUploadCancel")?this.retryUpload(r,!1):this.retryUpload(r,!0))},e.prototype.retryUpload=function(t,e){e?(t.end=t.end+this.asyncSettings.chunkSize,t.start=t.start+this.asyncSettings.chunkSize,this.sendRequest(t.file,t)):(t.file.statusCode="1",t.file.status=this.localizedTexts("readyToUploadMessage"),this.chunkUpload(t.file)),this.getLiElement(t.file).classList.add(KD)},e.prototype.chunkUploadInProgress=function(t,e,i){var n=this;if("4"!==e.file.statusCode){"4"!==e.file.statusCode&&"5"!==e.file.statusCode&&(e.file.statusCode="3",e.file.status=this.localizedTexts("inProgress")),this.updateMetaData(e);var s=this.getLiElement(e.file);if(!y(s)){var r=s.querySelector("."+PD);if(y(r)||(r.classList.add(XD),r.setAttribute("title",this.localizedTexts("pause")),r.classList.remove(PD)),!y(s)){if(!(s.querySelectorAll("."+BD).length>0)){var o=s.querySelector("."+ED);y(this.template)&&(o.classList.add(VD),o.classList.remove(FD),this.createProgressBar(s),this.updateProgressBarClasses(s,VD));var a=s.querySelector("."+LD)?s.querySelector("."+LD):s.querySelector("."+OD);y(a)||(a.classList.add(zD),a.setAttribute("title",this.localizedTexts("abort")),a.classList.remove(LD))}if(!isNaN(Math.round(t.loaded/t.total*100))&&y(this.template)&&"4"!==e.file.statusCode){var l=void 0,h=Math.ceil(e.file.size/this.asyncSettings.chunkSize)-1;this.asyncSettings.chunkSize&&h&&(l=Math.round(e.chunkIndex/h*100),this.changeProgressValue(s,l.toString()+"%"))}0===e.chunkIndex&&this.checkActionButtonStatus()}if(y(s.querySelector("."+XD))&&y(this.template)&&y(s.querySelector("."+OD))){this.pauseButton=this.createElement("span",{className:"e-icons e-file-pause-btn",attrs:{tabindex:this.btnTabIndex}}),"msie"===this.browserName&&this.pauseButton.classList.add("e-msie");var c=s.querySelector("."+zD);c.parentElement.insertBefore(this.pauseButton,c),this.pauseButton.setAttribute("title",this.localizedTexts("pause")),this.pauseButton.addEventListener("click",function(t){n.checkPausePlayAction(t)},!1)}}}},e.prototype.bytesToSize=function(t){var e=-1;if(!t)return"0.0 KB";do{t/=1024,e++}while(t>99);return e>=2&&(t*=1024,e=1),Math.max(t,0).toFixed(1)+" "+["KB","MB"][e]},e.prototype.sortFileList=function(t){for(var e=t=t||this.sortFilesList,i=[],n=0;n<e.length;n++)i.push(e[n].name);for(var s=[],r=0,o=i.sort();r<o.length;r++){var a=o[r];for(n=0;n<e.length;n++)a===e[n].name&&s.push(e[n])}return s},e.prototype.destroy=function(){this.element.value=null,this.clearTemplate(),this.clearAll(),this.unWireEvents(),this.unBindDropEvents(),this.multiple&&this.element.removeAttribute("multiple"),this.enabled||this.element.removeAttribute("disabled"),this.element.removeAttribute("accept"),this.setInitialAttributes();for(var e=0,i=["aria-label","directory","webkitdirectory","tabindex"];e<i.length;e++){var n=i[e];this.element.removeAttribute(n)}y(this.uploadWrapper)||(this.uploadWrapper.parentElement.appendChild(this.element),at(this.uploadWrapper)),this.uploadWrapper=null,this.uploadWrapper=null,this.browseButton=null,this.dropAreaWrapper=null,this.dropZoneElement=null,this.dropArea=null,this.keyboardModule=null,this.clearButton=null,this.uploadButton=null,t.prototype.destroy.call(this)},e.prototype.upload=function(t,e){var i=this;if(t=t||this.filesData,this.sequentialUpload&&(this.isFirstFileOnSelection||e))this.sequenceUpload(t);else{var n=this.getFilesInArray(t);this.trigger("beforeUpload",{customFormData:[],currentRequest:null,cancel:!1},function(t){t.cancel||(i.customFormDatas=t.customFormData&&t.customFormData.length>0?t.customFormData:i.customFormDatas,i.uploadFiles(n,e))})}},e.prototype.getFilesInArray=function(t){var e=[];return t&&(t instanceof Array?e=t:e.push(t)),e},e.prototype.serverReadFileBase64=function(t,e,i){var n=this;return new Promise(function(s,r){var o,a=n.fileStreams[t].rawFile;try{var l=new FileReader;l.onload=(o=l,function(){try{var t=o.result,e=t?t.split(";base64,")[1]:null;s(e)}catch(t){r(t)}}),l.readAsDataURL(a.slice(e,e+i))}catch(t){r(t)}})},e.prototype.uploadFileCount=function(t){var e=this.filesData;return e&&0!==e.length?e.length:-1},e.prototype.getFileRead=function(t,e){var i=this.filesData;if(!i||0===i.length)return-1;var n=i[t],s=this.newFileRef++;return this.fileStreams[s]=n,s},e.prototype.uploadFiles=function(t,e){var i=[];if(""!==this.asyncSettings.saveUrl&&!y(this.asyncSettings.saveUrl)){if(!e||y(e))if(this.multiple)i=this.filterfileList(t);else{var n=[];n.push(t[0]),i=this.filterfileList(n)}else i=t;for(var s=0;s<i.length;s++)this.uploadFilesRequest(i,s,e)}},e.prototype.uploadFilesRequest=function(t,e,i){var n=this,s=this.checkChunkUpload(),r=new R(this.asyncSettings.saveUrl,"POST",!0,null);r.emitError=!1;var o={fileData:t[e],customFormData:[],cancel:!1},a=new FormData;if(r.beforeSend=function(i){o.currentRequest=r.httpRequest,n.trigger("uploading",o,function(s){s.cancel&&n.eventCancelByArgs(i,s,t[e]),n.customFormDatas&&n.customFormDatas.length>0&&n.updateFormData(a,n.customFormDatas),n.updateFormData(a,s.customFormData)})},"1"===t[e].statusCode){var l=this.element.getAttribute("name");a.append(l,t[e].rawFile,t[e].name),s&&t[e].size>this.asyncSettings.chunkSize?this.chunkUpload(t[e],i,e):(r.onLoad=function(s){return o.cancel||n.uploadComplete(s,t[e],i),{}},r.onUploadProgress=function(s){return o.cancel||n.uploadInProgress(s,t[e],i,r),{}},r.onError=function(i){return n.uploadFailed(i,t[e]),{}},r.send(a))}},e.prototype.spliceFiles=function(t){for(var e=this.fileList[t],i=this.getFilesData(),n=+e.getAttribute("data-files-count"),s=0,r=0;r<t;r++)s+=+this.fileList[r].getAttribute("data-files-count");for(var o=s+n-1;o>=s;o--)i.splice(o,1)},e.prototype.remove=function(t,e,i,n,s){var r=this;y(n)&&(n=!0);var o={event:s,cancel:!1,filesData:[],customFormData:[],postRawFile:n,currentRequest:null};this.trigger("beforeRemove",{cancel:!1,customFormData:[],currentRequest:null},function(n){if(!n.cancel)if(r.isFormUpload())o.filesData=t,r.trigger("removing",o,function(e){if(!e.cancel)for(var i=!1,n=void 0,s=0,o=r.getFilesInArray(t);s<o.length;s++){var a=o[s];if(i||(n=r.fileList.indexOf(a.list)),n>-1){var l=y(a.input)?null:a.input;l&&at(l),r.spliceFiles(n),at(r.fileList[n]),r.fileList.splice(n,1),i=!0,n=-1}}});else if(r.isForm&&(y(r.asyncSettings.removeUrl)||""===r.asyncSettings.removeUrl))o.filesData=r.getFilesData(),r.trigger("removing",o,function(t){t.cancel||r.clearAll()});else{var a=[];(t=y(t)?r.filesData:t)instanceof Array?a=t:a.push(t),o.filesData=a;for(var l=r.asyncSettings.removeUrl,h=""!==l&&!y(l),c=function(t){var n=r.uploadedFilesData.indexOf(t);("2"===t.statusCode||"4"===t.statusCode||"0"===t.statusCode&&-1!==n)&&h?r.removeUploadedFile(t,o,i,e):i?r.removeFilesData(t,e):r.trigger("removing",o,function(i){i.cancel||r.removeFilesData(t,e)}),s&&!s.target.classList.contains(LD)&&r.checkActionComplete(!1)},d=0,p=a;d<p.length;d++){c(p[d])}}})},e.prototype.clearAll=function(){var t=this;if(y(this.listParent))return"msie"!==this.browserName&&(this.element.value=""),void(this.filesData=[]);var e={cancel:!1,filesData:this.filesData};this.trigger("clearing",e,function(e){e.cancel||(t.clearData(),t.actionCompleteCount=0,t.count=-1)})},e.prototype.getFilesData=function(t){return y(t)?this.filesData:this.getSelectedFiles(t)},e.prototype.pause=function(t,e){t=t||this.filesData;var i=this.getFilesInArray(t);this.pauseUploading(i,e)},e.prototype.pauseUploading=function(t,e){for(var i=this.getFiles(t),n=0;n<i.length;n++)"3"===i[n].statusCode&&this.pauseUpload(this.getCurrentMetaData(i[n],null),null,e)},e.prototype.getFiles=function(t){var e=[];return y(t)||t instanceof Array?e=t:e.push(t),e},e.prototype.resume=function(t,e){t=t||this.filesData;var i=this.getFilesInArray(t);this.resumeFiles(i,e)},e.prototype.resumeFiles=function(t,e){for(var i=this.getFiles(t),n=0;n<i.length;n++)"4"===i[n].statusCode&&this.resumeUpload(this.getCurrentMetaData(i[n],null),null,e)},e.prototype.retry=function(t,e,i){t=t||this.filesData;var n=this.getFilesInArray(t);this.sequentialUpload&&this.isFirstFileOnSelection&&(this.isFirstFileOnSelection=!1),this.retryFailedFiles(n,e,i)},e.prototype.retryFailedFiles=function(t,e,i){for(var n=this.getFiles(t),s=0;s<n.length;s++)if("5"===n[s].statusCode||"0"===n[s].statusCode)if(this.asyncSettings.chunkSize>0&&this.getCurrentMetaData(n[s],null))this.retryUpload(this.getCurrentMetaData(n[s],null),e);else{var r=void 0;i||(r=this.fileList[this.filesData.indexOf(n[s])]),this.reloadcanceledFile(null,n[s],r,i)}},e.prototype.cancel=function(t){t=t||this.filesData;var e=this.getFilesInArray(t);this.cancelUpload(e)},e.prototype.cancelUpload=function(t){var e=this.getFiles(t);if(this.asyncSettings.chunkSize>0){for(var i=0;i<e.length;i++)if("3"===e[i].statusCode){var n=this.getCurrentMetaData(e[i],null);n.file.statusCode="5",n.file.status=this.localizedTexts("fileUploadCancel"),this.updateMetaData(n),this.showHideUploadSpinner(e[i])}}else for(i=0;i<e.length;i++)"3"===e[i].statusCode&&(e[i].statusCode="5",e[i].status=this.localizedTexts("fileUploadCancel"),this.showHideUploadSpinner(e[i]))},e.prototype.showHideUploadSpinner=function(t){var e=this.getLiElement(t);if(!y(e)&&y(this.template)){var i=e.querySelector("."+zD);mc({target:i,width:"20px"}),Ac(i)}},MD([Bt({saveUrl:"",removeUrl:""},nE)],e.prototype,"asyncSettings",void 0),MD([jt(!1)],e.prototype,"sequentialUpload",void 0),MD([jt({})],e.prototype,"htmlAttributes",void 0),MD([jt("")],e.prototype,"cssClass",void 0),MD([jt(!0)],e.prototype,"enabled",void 0),MD([jt(null)],e.prototype,"template",void 0),MD([jt(!0)],e.prototype,"multiple",void 0),MD([jt(!0)],e.prototype,"autoUpload",void 0),MD([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),MD([Bt({},iE)],e.prototype,"buttons",void 0),MD([jt("")],e.prototype,"allowedExtensions",void 0),MD([jt(0)],e.prototype,"minFileSize",void 0),MD([jt(3e7)],e.prototype,"maxFileSize",void 0),MD([jt(null)],e.prototype,"dropArea",void 0),MD([Rt([{}],eE)],e.prototype,"files",void 0),MD([jt(!0)],e.prototype,"showFileList",void 0),MD([jt(!1)],e.prototype,"directoryUpload",void 0),MD([jt("Default")],e.prototype,"dropEffect",void 0),MD([Ut()],e.prototype,"created",void 0),MD([Ut()],e.prototype,"actionComplete",void 0),MD([Ut()],e.prototype,"rendering",void 0),MD([Ut()],e.prototype,"beforeUpload",void 0),MD([Ut()],e.prototype,"fileListRendering",void 0),MD([Ut()],e.prototype,"selected",void 0),MD([Ut()],e.prototype,"uploading",void 0),MD([Ut()],e.prototype,"success",void 0),MD([Ut()],e.prototype,"failure",void 0),MD([Ut()],e.prototype,"removing",void 0),MD([Ut()],e.prototype,"beforeRemove",void 0),MD([Ut()],e.prototype,"clearing",void 0),MD([Ut()],e.prototype,"progress",void 0),MD([Ut()],e.prototype,"change",void 0),MD([Ut()],e.prototype,"chunkSuccess",void 0),MD([Ut()],e.prototype,"chunkFailure",void 0),MD([Ut()],e.prototype,"chunkUploading",void 0),MD([Ut()],e.prototype,"canceling",void 0),MD([Ut()],e.prototype,"pausing",void 0),MD([Ut()],e.prototype,"resuming",void 0),e=MD([Ft],e)}(_e),rE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),oE=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};function aE(t,e){for(var i=f({},t),n=0,s=Object.keys(i);n<s.length;n++){var r=s[n];e.indexOf(r)<0&&p(i,r)}return i}function lE(t,e){var i=40===e?0:t.childElementCount-1,n=i,s=t.querySelector(".e-selected");s&&s.classList.remove("e-selected");for(var r=0,o=t.children.length;r<o;r++)t.children[r].classList.contains("e-focused")&&(n=r,t.children[r].classList.remove("e-focused"),40===e?n++:n--,n===(40===e?t.childElementCount:-1)&&(n=i));-1!==(n=hE(t,t.children[n],n,e))&&(tt([t.children[n]],"e-focused"),t.children[n].focus())}function hE(t,e,i,n,s){if(void 0===s&&(s=0),(e.classList.contains("e-separator")||e.classList.contains("e-disabled"))&&(i===(40===n?t.childElementCount-1:0)?i=40===n?0:t.childElementCount-1:40===n?i++:i--),(e=t.children[i]).classList.contains("e-separator")||e.classList.contains("e-disabled")){if(++s===t.childElementCount)return-1;i=hE(t,e,i,n,s)}return i}var cE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rE(e,t),oE([jt("")],e.prototype,"iconCss",void 0),oE([jt("")],e.prototype,"id",void 0),oE([jt(!1)],e.prototype,"separator",void 0),oE([jt("")],e.prototype,"text",void 0),oE([jt("")],e.prototype,"url",void 0),oE([jt(!1)],e.prototype,"disabled",void 0),e}(re),dE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pE=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},uE="e-menu-icon",gE="e-item",mE="e-dropdown-popup",fE="e-separator",yE="e-vertical",vE="e-dropdown-popup-width",bE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dE(e,t),pE([jt("SlideDown")],e.prototype,"effect",void 0),pE([jt(400)],e.prototype,"duration",void 0),pE([jt("ease")],e.prototype,"easing",void 0),e}(re),CE=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isPopupCreated=!0,n}return dE(e,t),e.prototype.preRender=function(){},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.toggle=function(){this.canOpen()?this.openPopUp():this.createPopupOnClick&&!this.isPopupCreated?(this.createPopup(),this.openPopUp()):this.closePopup()},e.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},e.prototype.addItems=function(t,e){for(var i,n=this.items.length,s=0,r=this.items.length;s<r;s++)if(e===this.items[s].text){n=s;break}for(var o=t.length-1;o>=0;o--)i=new cE(this,"items",t[o],!0),this.items.splice(n,0,i);this.canOpen()||this.createItems()},e.prototype.removeItems=function(t,e){for(var i=!1,n=0,s=t.length;n<s;n++)for(var r=0,o=this.items.length;r<o;r++)if(t[n]===(e?this.items[r].id:this.items[r].text)){this.items.splice(r,1),i=!0;break}i&&this.getULElement()&&this.createItems()},e.prototype.createPopup=function(){var t,e=this.createElement("div",{className:"auto"!==this.popupWidth?mE+" "+vE:mE,id:this.element.id+"-popup"});if(document.body.appendChild(e),this.dropDown=new Jr(e,{width:this.popupWidth,relateTo:this.element,collision:{X:"fit",Y:"flip"},position:{X:"left",Y:"bottom"},targetType:"relative",content:this.target?this.getTargetElement():"",enableRtl:this.enableRtl}),this.dropDown.element.setAttribute("role","dialog"),this.dropDown.element.setAttribute("aria-label","dropdown menu"),y(this.popupContent)||(this.popupContent.style.display=""),"fixed"===this.dropDown.element.style.position&&this.dropDown.refreshPosition(this.element),this.dropDown.hide(),ht(this.element,((t={})["aria-haspopup"]=this.items.length||this.target?"true":"false",t["aria-expanded"]="false",t.type="button",t)),this.cssClass&&tt([e],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPopupCreated=!0,this.createPopupOnClick){var i=It(this.activeElem[0],"split-btn");i&&(i.isPopupCreated=!0)}},e.prototype.getTargetElement=function(){return!this.createPopupOnClick||this.isColorPicker()||y(this.popupContent)?"string"==typeof this.target?ct(this.target):this.target:this.popupContent},e.prototype.createItems=function(t){var e,i,n,s,r=this,o=this.items,a=this.hasIcon(this.items,"iconCss"),l=this.getULElement();if(l?l.innerHTML="":l=this.createElement("ul",{attrs:{role:"menu",tabindex:"0"}}),this.itemTemplate){var h=this.compiletemplate(this.itemTemplate);o.forEach(function(t){var e=r.createElement("li",{className:t.separator?gE+" "+fE:gE,attrs:t.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":t.text},id:t.id?t.id:b("e-"+r.getModuleName()+"-item")}),i=h(t,r,"template",null,!1,null,e);i&&rt(i,e),t.disabled&&e.classList.add("e-disabled");var n={item:t,element:e};r.trigger("beforeItemRender",n),n.item.disabled!==t.disabled&&e.classList[n.item.disabled?"add":"remove"]("e-disabled"),l.appendChild(e)}),this.isReact&&this.renderReactTemplates()}else for(var c=0;c<o.length;c++){i=o[c],this.enableHtmlSanitizer&&(i.text=Yi.sanitize(i.text));var d=i.text;n=this.createElement("li",{innerHTML:i.url?"":d,className:i.separator?gE+" "+fE:gE,attrs:i.separator?{role:"separator",tabindex:"-1","aria-label":"separator","aria-hidden":"true"}:{role:"menuitem",tabindex:"-1","aria-label":d},id:i.id?i.id:b("e-"+this.getModuleName()+"-item")}),this.enableHtmlSanitizer?n.textContent=i.url?"":d:n.innerHTML=i.url?"":d,i.url&&(n.appendChild(this.createAnchor(i)),n.classList.add("e-url")),i.iconCss?(e=this.createElement("span",{className:uE+" "+i.iconCss}),i.url?n.childNodes[0].appendChild(e):n.insertBefore(e,n.childNodes[0])):a&&!i.separator&&n.classList.add("e-blank-icon");var p=i.disabled;i.disabled&&n.classList.add("e-disabled"),s={item:i,element:n},this.trigger("beforeItemRender",s),p!==s.item.disabled&&(s.item.disabled?n.classList.add("e-disabled"):n.classList.remove("e-disabled")),l.appendChild(n)}t&&this.getPopUpElement().appendChild(l),a&&function(t,e){var i=[].slice.call(t.getElementsByClassName("e-blank-icon"));if(e&&[].slice.call(t.getElementsByClassName("e-item")).forEach(function(t){(t.style.paddingLeft||t.style.paddingRight)&&t.removeAttribute("style")}),i.length){var n=t.querySelector(".e-item:not(.e-blank-icon):not(.e-separator)");if(!y(n)){n.classList.contains("e-url")&&(n=n.querySelector(".e-menu-url"));var s,r=n.querySelector(".e-menu-icon"),o=t.classList.contains("e-rtl");s=o?{padding:"paddingRight",margin:"marginLeft"}:{padding:"paddingLeft",margin:"marginRight"};var a=parseInt(getComputedStyle(r).fontSize,10)+parseInt(getComputedStyle(r)[s.margin],10)+parseInt(getComputedStyle(n).paddingLeft,10)+"px";i.forEach(function(t){t.classList.contains("e-url")&&t.querySelector(".e-menu-url")?t.querySelector(".e-menu-url").style[s.padding]=a:t.style[s.padding]=a})}}}(this.getPopUpElement())},e.prototype.compiletemplate=function(t){if(this.itemTemplate)try{if("function"!=typeof this.itemTemplate){var e=document.querySelector(this.itemTemplate);if(e)return Hi(e.innerHTML.trim())}return Hi(t)}catch(e){return Hi(t)}},e.prototype.hasIcon=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][""+e])return!0;return!1},e.prototype.createAnchor=function(t){var e=t.text,i=this.createElement("a",{className:"e-menu-text e-menu-url",attrs:{href:t.url}});return this.enableHtmlSanitizer?i.textContent=e:i.innerHTML=e,i},e.prototype.initialize=function(){this.button=new mo({iconCss:this.iconCss,iconPosition:this.iconPosition,cssClass:this.cssClass,content:this.content,disabled:this.disabled,enableRtl:this.enableRtl,enablePersistence:this.enablePersistence}),this.button.createElement=this.createElement,this.button.appendTo(this.element),this.element.id||(this.element.id=b("e-"+this.getModuleName())),this.appendArrowSpan(),this.setActiveElem([this.element]),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-label",this.element.textContent?this.element.textContent:"dropdownbutton"),this.target&&!this.isColorPicker()&&!this.createPopupOnClick||!this.createPopupOnClick?this.createPopup():(this.isPopupCreated=!1,this.target&&!this.isColorPicker()&&this.createPopupOnClick&&(this.popupContent=this.getTargetElement(),this.popupContent.style.display="none"))},e.prototype.isColorPicker=function(){if(!this.element)return!1;var t=this.element.previousSibling;return!!(t&&t.classList&&t.classList.contains("e-split-colorpicker"))},e.prototype.appendArrowSpan=function(){this.cssClass=y(this.cssClass)?"":this.cssClass,this.element.appendChild(this.createElement("span",{className:"e-btn-icon e-icons e-icon-"+(this.cssClass.indexOf(yE)>-1?"bottom":"right")+" e-caret"}))},e.prototype.setActiveElem=function(t){this.activeElem=t},e.prototype.getModuleName=function(){return"dropdown-btn"},e.prototype.canOpen=function(){var t=!1;return this.isPopupCreated&&(t=this.getPopUpElement().classList.contains("e-popup-close")),t},e.prototype.destroy=function(){var e,i=this;(t.prototype.destroy.call(this),"dropdown-btn"===this.getModuleName())&&(this.element.querySelector("span.e-caret")&&at(this.element.querySelector("span.e-caret")),this.cssClass&&(e=this.cssClass.split(" ")),this.button.destroy(),e&&et([this.element],e),et(this.activeElem,["e-active"]),(this.element.getAttribute("class")?["aria-haspopup","aria-expanded","aria-owns","type"]:["aria-haspopup","aria-expanded","aria-owns","type","class"]).forEach(function(t){i.element.removeAttribute(t)}),this.popupUnWireEvents(),this.destroyPopup(),this.isPopupCreated=!1,this.disabled||this.unWireEvents())},e.prototype.destroyPopup=function(){if(this.isPopupCreated){if(this.dropDown.destroy(),this.getPopUpElement()){var t=document.getElementById(this.getPopUpElement().id);t&&(et([t],["e-popup-open","e-popup-close"]),at(t))}K.remove(this.getPopUpElement(),"click",this.clickHandler),K.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler),this.isPopupCreated&&this.dropDown&&(this.dropDown.element=null,this.dropDown=void 0)}this.isPopupCreated=!1;var e=It(this.activeElem[0],"split-btn");if(this.createPopupOnClick&&e){var i=It(this.activeElem[1],"dropdown-btn");i&&(i.isPopupCreated=!1)}},e.prototype.getPopUpElement=function(){var t=null;if(!this.dropDown&&this.activeElem[0].classList.contains("e-split-btn")){var e=It(this.activeElem[1],"dropdown-btn");e&&(this.dropDown=e.dropDown)}return this.dropDown&&(t=this.dropDown.element),t},e.prototype.getULElement=function(){var t=null;return this.getPopUpElement()&&(t=this.getPopUpElement().children[0]),t},e.prototype.wireEvents=function(){this.delegateMousedownHandler=this.mousedownHandler.bind(this),this.createPopupOnClick||K.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),K.add(this.element,"click",this.clickHandler,this),K.add(this.element,"keydown",this.keyBoardHandler,this),K.add(window,"resize",this.windowResize,this)},e.prototype.windowResize=function(){!this.canOpen()&&this.dropDown&&this.dropDown.refreshPosition(this.element)},e.prototype.popupWireEvents=function(){this.delegateMousedownHandler||(this.delegateMousedownHandler=this.mousedownHandler.bind(this));var t=this.getPopUpElement();this.createPopupOnClick&&K.add(document,"mousedown touchstart",this.delegateMousedownHandler,this),t&&(K.add(t,"click",this.clickHandler,this),K.add(t,"keydown",this.keyBoardHandler,this),this.closeActionEvents&&K.add(t,this.closeActionEvents,this.focusoutHandler,this)),this.rippleFn=Xt(t,{selector:"."+gE})},e.prototype.popupUnWireEvents=function(){var t=this.getPopUpElement();this.createPopupOnClick&&K.remove(document,"mousedown touchstart",this.delegateMousedownHandler),t&&t.parentElement&&(K.remove(t,"click",this.clickHandler),K.remove(t,"keydown",this.keyBoardHandler),this.closeActionEvents&&K.remove(t,this.closeActionEvents,this.focusoutHandler)),ie&&this.rippleFn&&this.rippleFn()},e.prototype.keyBoardHandler=function(t){if(t.target!==this.element||9!==t.keyCode&&(t.altKey||40!==t.keyCode)&&38!==t.keyCode)switch(t.target&&(t.target.classList.contains("e-item")||t.target.parentElement&&t.target.parentElement.classList.contains("e-split-btn-wrapper"))&&13===t.keyCode&&t.preventDefault(),t.keyCode){case 38:case 40:!t.altKey||38!==t.keyCode&&40!==t.keyCode?this.upDownKeyHandler(t):this.keyEventHandler(t);break;case 9:case 13:case 27:case 32:this.keyEventHandler(t)}},e.prototype.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},e.prototype.upDownKeyHandler=function(t){(!this.target||38!==t.keyCode&&40!==t.keyCode)&&(t.preventDefault(),lE(this.getULElement(),t.keyCode))},e.prototype.keyEventHandler=function(t){if(!this.target||13!==t.keyCode&&9!==t.keyCode)return 13===t.keyCode&&this.activeElem[0].classList.contains("e-split-btn")?(this.triggerSelect(t),void this.activeElem[0].focus()):void(t.target&&t.target.className.indexOf("e-edit-template")>-1&&32===t.keyCode||(9!==t.keyCode&&t.preventDefault(),27===t.keyCode||38===t.keyCode||9===t.keyCode?this.canOpen()||this.closePopup(t,this.element):this.clickHandler(t)))},e.prototype.getLI=function(t){return"LI"===t.tagName?t:ut(t,"li")},e.prototype.mousedownHandler=function(t){var e=t.target;!this.dropDown||this.canOpen()||!this.getPopUpElement()||ut(e,'[id="'+this.getPopUpElement().id+'"]')||ut(e,'[id="'+this.element.id+'"]')||this.closePopup(t)},e.prototype.focusoutHandler=function(t){if(this.isPopupCreated&&!this.canOpen()){var e=t.relatedTarget||t.target;if(e&&e.className.indexOf("e-item")>-1){var i=this.getLI(e);if(i){var n=Array.prototype.indexOf.call(this.getULElement().children,i),s=this.items[n];if(s){var r={element:i,item:s,event:t};this.trigger("select",r)}}}this.closePopup(t)}},e.prototype.clickHandler=function(t){var e=t.target;ut(e,'[id="'+this.element.id+'"]')?!this.createPopupOnClick||this.target&&""!==this.target&&!this.isColorPicker()&&!this.createPopupOnClick?this.getPopUpElement().classList.contains("e-popup-close")?this.openPopUp(t):this.closePopup(t):this.isPopupCreated?this.closePopup(t,this.activeElem[0]):(this.createPopup(),this.openPopUp(t)):ut(e,'[id="'+this.getPopUpElement().id+'"]')&&this.getLI(t.target)&&(this.triggerSelect(t),this.closePopup(t,this.activeElem[0]))},e.prototype.triggerSelect=function(t){var e,i,n,s=this.getLI(t.target);s&&(i=Array.prototype.indexOf.call(this.getULElement().children,s),(n=this.items[i])&&(e={element:s,item:n,event:t},this.trigger("select",e)))},e.prototype.openPopUp=function(t){var e=this;void 0===t&&(t=null);var i=this.getPopUpElement();if(this.activeElem[0]&&this.activeElem[0].classList.contains("e-dropdown-btn")&&i.style.width&&"auto"!==i.style.width&&this.setWidth(i),this.target)if(this.activeElem.length>1){var n=It(this.activeElem[0],"split-btn");n.isReact&&i.childNodes.length<1&&(n.appendReactElement&&n.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates())}else this.isReact&&i.childNodes.length<1&&(this.appendReactElement&&this.appendReactElement(this.getTargetElement(),this.getPopUpElement()),this.renderReactTemplates());else this.createItems(!0);var s=this.getULElement();this.popupWireEvents();var r={element:s,items:this.items,event:t,cancel:!1};this.trigger("beforeOpen",r,function(t){if(!t.cancel){var i=e.getULElement(),n="None"!==e.animationSettings.effect?{name:e.animationSettings.effect,duration:e.animationSettings.duration,timingFunction:e.animationSettings.easing}:null;if(n&&e.animatePopup(n,i),e.dropDown.show(null,e.element),tt([e.element],"e-active"),e.element.setAttribute("aria-expanded","true"),e.element.setAttribute("aria-owns",e.getPopUpElement().id),i&&!e.isSafari()&&i.focus(),e.enableRtl&&"0px"!==i.parentElement.style.left){var s=void 0;s=e.element.parentElement&&e.element.parentElement.classList.contains("e-split-btn-wrapper")?e.element.parentElement.offsetWidth:e.element.offsetWidth;var r=i.parentElement.offsetWidth-s,o=parseFloat(i.parentElement.style.left)-r;o<0&&(o=0),i.parentElement.style.left=o+"px"}var a={element:i,items:e.items};e.trigger("open",a),i&&e.isSafari()&&i.focus()}})},e.prototype.animatePopup=function(t,e){new qt(t).animate(e,{begin:function(t){t.element.parentElement.style.height=t.element.parentElement.offsetHeight+"px"}})},e.prototype.setWidth=function(t){var e=S(t.style.width);if(e.indexOf("%")>-1){var i=this.element.offsetWidth*parseFloat(e)/100;t.style.width=i+"px"}},e.prototype.closePopup=function(t,e){var i=this;void 0===t&&(t=null);var n=this.getULElement(),s={element:n,items:this.items,event:t,cancel:!1};this.trigger("beforeClose",s,function(s){if(s.cancel)n&&n.focus();else{var r=i.getPopUpElement();r&&K.remove(r,"keydown",i.keyBoardHandler),i.popupUnWireEvents();var o=i.getULElement(),a=void 0;o&&(a=o.querySelector(".e-selected")),a&&a.classList.remove("e-selected"),i.dropDown&&i.dropDown.hide(),et(i.activeElem,"e-active"),i.element.setAttribute("aria-expanded","false"),i.element.removeAttribute("aria-owns"),e&&(i.isSafari()?e.focus({preventScroll:!0}):i.isColorPicker()&&27===t.keyCode||e.focus());var l={element:o,items:i.items};i.trigger("close",l),!i.target&&o&&at(o),(!i.target||i.isColorPicker()||i.target&&!i.isColorPicker())&&i.createPopupOnClick&&i.destroyPopup()}})},e.prototype.unWireEvents=function(){this.createPopupOnClick||K.remove(document,"mousedown touchstart",this.delegateMousedownHandler),K.remove(this.element,"click",this.clickHandler),K.remove(this.element,"keydown",this.keyBoardHandler),this.isPopupCreated&&(K.remove(this.getPopUpElement(),"click",this.clickHandler),K.remove(this.getPopUpElement(),"keydown",this.keyBoardHandler)),K.remove(window,"resize",this.windowResize)},e.prototype.onPropertyChanged=function(t,e){var i;this.button.setProperties(aE(t,["content","cssClass","iconCss","iconPosition","disabled","enableRtl"])),this.isPopupCreated&&(i=this.getPopUpElement(),this.dropDown.setProperties(aE(t,["enableRtl"])));for(var n=0,s=Object.keys(t);n<s.length;n++){switch(s[n]){case"content":this.element.querySelector("span.e-caret")||this.appendArrowSpan();break;case"disabled":t.disabled?(this.unWireEvents(),this.isPopupCreated&&!this.canOpen()&&this.closePopup()):this.wireEvents();break;case"cssClass":if(e.cssClass=y(e.cssClass)?"":e.cssClass,t.cssClass.indexOf(yE)>-1||e.cssClass.indexOf(yE)>-1){this.element.querySelector("span.e-caret")||this.appendArrowSpan();var r=this.element.querySelector("span.e-caret");t.cssClass.indexOf(yE)>-1?mt(r,["e-icon-bottom"],["e-icon-right"]):mt(r,["e-icon-right"],["e-icon-bottom"])}this.isPopupCreated&&(e.cssClass&&et([i],e.cssClass.split(" ")),t.cssClass&&tt([i],t.cssClass.replace(/\s+/g," ").trim().split(" ")));break;case"target":this.dropDown.content=this.getTargetElement(),this.dropDown.dataBind();break;case"items":this.isPopupCreated&&this.getULElement()&&this.createItems();break;case"createPopupOnClick":t.createPopupOnClick?this.destroyPopup():this.createPopup()}}},e.prototype.focusIn=function(){this.element.focus()},pE([jt("")],e.prototype,"content",void 0),pE([jt("")],e.prototype,"cssClass",void 0),pE([jt(!1)],e.prototype,"disabled",void 0),pE([jt("")],e.prototype,"iconCss",void 0),pE([jt("Left")],e.prototype,"iconPosition",void 0),pE([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),pE([Rt([],cE)],e.prototype,"items",void 0),pE([jt(!1)],e.prototype,"createPopupOnClick",void 0),pE([jt("")],e.prototype,"target",void 0),pE([jt("")],e.prototype,"closeActionEvents",void 0),pE([jt(null)],e.prototype,"itemTemplate",void 0),pE([jt("auto")],e.prototype,"popupWidth",void 0),pE([Bt({effect:"None"},bE)],e.prototype,"animationSettings",void 0),pE([Ut()],e.prototype,"beforeItemRender",void 0),pE([Ut()],e.prototype,"beforeOpen",void 0),pE([Ut()],e.prototype,"beforeClose",void 0),pE([Ut()],e.prototype,"close",void 0),pE([Ut()],e.prototype,"open",void 0),pE([Ut()],e.prototype,"select",void 0),pE([Ut()],e.prototype,"created",void 0),e=pE([Ft],e)}(_e),IE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ME=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},SE="e-rtl",xE="EJS-SPLITBUTTON",wE=function(t){function e(e,i){return t.call(this,e,i)||this}return IE(e,t),e.prototype.preRender=function(){var t=this.element;if(t.tagName===xE){for(var e=c("ej2_instances",t),i=this.createElement("button",{attrs:{type:"button"}}),n=this.createElement(xE,{className:"e-"+this.getModuleName()+"-wrapper"}),s=0,r=t.attributes.length;s<r;s++)i.setAttribute(t.attributes[s].nodeName,t.attributes[s].nodeValue);t.parentNode.insertBefore(n,t),at(t),t=i,n.appendChild(t),d("ej2_instances",e,t),this.wrapper=n,this.element=t}this.element.id||(this.element.id=b("e-"+this.getModuleName()))},e.prototype.render=function(){this.initWrapper(),this.createPrimaryButton(),this.renderControl()},e.prototype.renderControl=function(){this.createSecondaryButton(),this.setActiveElem([this.element,this.secondaryBtnObj.element]),this.setAria(),this.wireEvents(),this.renderComplete()},e.prototype.addItems=function(e,i){t.prototype.addItems.call(this,e,i),this.secondaryBtnObj.items=this.items},e.prototype.removeItems=function(e,i){t.prototype.removeItems.call(this,e,i),this.secondaryBtnObj.items=this.items},e.prototype.initWrapper=function(){this.wrapper||(this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"}),this.element.parentNode.insertBefore(this.wrapper,this.element)),this.element.classList.remove("e-"+this.getModuleName()),this.enableRtl&&this.wrapper.classList.add(SE),this.cssClass&&tt([this.wrapper],this.cssClass.replace(/\s+/g," ").trim().split(" "))},e.prototype.createPrimaryButton=function(){var t={cssClass:this.cssClass,enableRtl:this.enableRtl,iconCss:this.iconCss,iconPosition:this.iconPosition,content:this.content,disabled:this.disabled};this.primaryBtnObj=new mo(t),this.primaryBtnObj.createElement=this.createElement,this.primaryBtnObj.appendTo(this.element),this.element.classList.add("e-"+this.getModuleName()),this.element.type="button",this.wrapper.appendChild(this.element)},e.prototype.createSecondaryButton=function(){var t=this,e=this.createElement("button",{className:"e-icon-btn",attrs:{tabindex:"-1"},id:this.element.id+"_dropdownbtn"});this.wrapper.appendChild(e);var i={cssClass:this.cssClass,disabled:this.disabled,enableRtl:this.enableRtl,items:this.items,target:this.target,createPopupOnClick:this.createPopupOnClick,beforeItemRender:function(e){t.createPopupOnClick&&(t.secondaryBtnObj.dropDown.relateTo=t.wrapper,t.dropDown=t.secondaryBtnObj.dropDown),t.trigger("beforeItemRender",e)},open:function(e){t.trigger("open",e)},close:function(e){t.trigger("close",e)},select:function(e){t.trigger("select",e)},beforeOpen:function(e){t.createPopupOnClick&&0===t.items.length&&(t.secondaryBtnObj.dropDown.relateTo=t.wrapper,t.dropDown=t.secondaryBtnObj.dropDown);var i=new DE;return t.trigger("beforeOpen",e,function(t){i.resolve(t)}),i},beforeClose:function(e){var i=new DE;return t.trigger("beforeClose",e,function(t){i.resolve(t)}),i}};this.secondaryBtnObj=new CE(i),this.secondaryBtnObj.createElement=this.createElement,this.secondaryBtnObj.appendTo(e),this.createPopupOnClick||(this.secondaryBtnObj.dropDown.relateTo=this.wrapper,this.dropDown=this.secondaryBtnObj.dropDown),this.isPopupCreated=this.secondaryBtnObj.isPopupCreated,this.secondaryBtnObj.activeElem=[this.element,this.secondaryBtnObj.element],this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right"),this.disabled&&this.wrapper.classList.add("e-splitbtn-disabled")},e.prototype.setAria=function(){ht(this.element,{"aria-expanded":"false","aria-haspopup":"true","aria-label":this.element.textContent?this.element.textContent+" splitbutton":"splitbutton","aria-owns":this.element.id+"_dropdownbtn-popup"})},e.prototype.getModuleName=function(){return"split-btn"},e.prototype.toggle=function(){this.secondaryBtnObj.toggle()},e.prototype.destroy=function(){var e=this,i=[SE];if(this.cssClass&&(i=i.concat(this.cssClass.split(" "))),this.element){var n=document.getElementById(this.element.id);n&&n.parentElement===this.wrapper&&(this.wrapper.tagName===xE?(this.wrapper.innerHTML="",et([this.wrapper],["e-rtl","e-"+this.getModuleName()+"-wrapper"]),et([this.wrapper],this.cssClass.split(" "))):(et([this.element],i),["aria-label","aria-haspopup","aria-expanded","aria-owns","type"].forEach(function(t){e.element.removeAttribute(t)}),this.wrapper.parentNode.insertBefore(this.element,this.wrapper),lt(this.wrapper)),this.unWireEvents())}this.primaryBtnObj.destroy(),this.secondaryBtnObj.destroy(),t.prototype.destroy.call(this),this.element&&!this.element.getAttribute("class")&&this.element.removeAttribute("class"),this.refreshing&&this.isAngular&&(this.element=this.wrapper,["e-control","e-split-btn","e-lib"].forEach(function(t){e.element.classList.add(t)}),d("ej2_instances",[this],this.element)),this.wrapper=null},e.prototype.wireEvents=function(){K.add(this.element,"click",this.primaryBtnClickHandler,this),new si(this.element,{keyAction:this.btnKeyBoardHandler.bind(this),keyConfigs:{altdownarrow:"alt+downarrow",enter:"enter"}})},e.prototype.unWireEvents=function(){K.remove(this.element,"click",this.primaryBtnClickHandler),D(this.element,si).destroy()},e.prototype.primaryBtnClickHandler=function(){this.trigger("click",{element:this.element})},e.prototype.btnKeyBoardHandler=function(t){switch(t.action){case"altdownarrow":this.clickHandler(t);break;case"enter":this.clickHandler(t),this.getPopUpElement()&&!this.getPopUpElement().classList.contains("e-popup-close")?(this.element.classList.remove("e-active"),this.secondaryBtnObj.element.classList.add("e-active")):this.secondaryBtnObj.element.classList.remove("e-active")}},e.prototype.onPropertyChanged=function(t,e){var i=["content","iconCss","iconPosition","cssClass","disabled","enableRtl"];this.primaryBtnObj.setProperties(aE(t,i)),i=["beforeOpen","beforeItemRender","select","open","close","cssClass","disabled","enableRtl","createPopupOnClick"],Object.keys(t).indexOf("items")>-1&&(this.secondaryBtnObj.items=t.items,this.secondaryBtnObj.dataBind()),this.secondaryBtnObj.setProperties(aE(t,i));for(var n=0,s=Object.keys(t);n<s.length;n++){switch(s[n]){case"cssClass":e.cssClass&&et([this.wrapper],e.cssClass.split(" ")),tt([this.wrapper],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?tt([this.wrapper],SE):et([this.wrapper],SE);break;case"disabled":t.disabled?tt([this.wrapper],"e-splitbtn-disabled"):et([this.wrapper],"e-splitbtn-disabled")}}},e.prototype.focusIn=function(){this.element.focus()},ME([jt("")],e.prototype,"content",void 0),ME([jt("")],e.prototype,"cssClass",void 0),ME([jt(!1)],e.prototype,"disabled",void 0),ME([jt("")],e.prototype,"iconCss",void 0),ME([jt("Left")],e.prototype,"iconPosition",void 0),ME([jt(!1)],e.prototype,"createPopupOnClick",void 0),ME([Rt([],cE)],e.prototype,"items",void 0),ME([jt("")],e.prototype,"target",void 0),ME([Ut()],e.prototype,"beforeItemRender",void 0),ME([Ut()],e.prototype,"beforeOpen",void 0),ME([Ut()],e.prototype,"beforeClose",void 0),ME([Ut()],e.prototype,"click",void 0),ME([Ut()],e.prototype,"close",void 0),ME([Ut()],e.prototype,"open",void 0),ME([Ut()],e.prototype,"select",void 0),ME([Ut()],e.prototype,"created",void 0),e=ME([Ft],e)}(CE),DE=function(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.catch=this.promise.catch.bind(this.promise),this.then=this.promise.then.bind(this.promise)};var EE,TE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),AE=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},NE="e-hide-spinner",LE="e-progress",OE="e-progress-active",kE="e-btn-content",zE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return TE(e,t),AE([jt(null)],e.prototype,"template",void 0),AE([jt(16)],e.prototype,"width",void 0),AE([jt("Left")],e.prototype,"position",void 0),e}(re),PE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return TE(e,t),AE([jt(400)],e.prototype,"duration",void 0),AE([jt("None")],e.prototype,"effect",void 0),AE([jt("ease")],e.prototype,"easing",void 0),e}(re),jE=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.step=1,n}return TE(e,t),e.prototype.preRender=function(){t.prototype.preRender.call(this)},e.prototype.render=function(){t.prototype.render.call(this),this.init(),this.wireEvents(),this.setAria(),this.renderComplete()},e.prototype.start=function(t){this.isPaused=!1,this.startProgress(t||this.percent,this.progressTime)},e.prototype.stop=function(){this.isPaused=!0,cancelAnimationFrame(this.timerId)},e.prototype.progressComplete=function(){this.isPaused=!1,this.finishProgress()},e.prototype.getModuleName=function(){return"progress-btn"},e.prototype.destroy=function(){var e=this,i=[NE,OE,"e-round-corner","e-"+t.prototype.getModuleName.call(this)];this.spinSettings.position&&i.push("e-spin-"+this.spinSettings.position.toLowerCase()),t.prototype.destroy.call(this),this.unWireEvents(),this.element.innerHTML="",this.cssClass&&(i=i.concat(this.cssClass.split(" "))),et([this.element],i),(this.element.getAttribute("class")?["aria-label","aria-valuemin","aria-valuemax","aria-valuenow"]:["aria-label","aria-valuemin","aria-valuemax","aria-valuenow","class"]).forEach(function(t){e.element.removeAttribute(t)}),this.disabled&&this.element.removeAttribute("disabled")},e.prototype.init=function(){this.element.classList.add("e-"+t.prototype.getModuleName.call(this)),this.setContent(),this.createSpinner(),this.enableProgress&&this.createProgress()},e.prototype.createSpinner=function(){var t=this.createElement("span",{className:"e-spinner"});this.setSpinPosition(t),mc({target:t,width:this.spinSettings.width||16,template:this.spinSettings.template},this.createElement)},e.prototype.getSpinner=function(){return this.element.getElementsByClassName("e-spinner")[0]},e.prototype.getProgress=function(){return this.element.getElementsByClassName(LE)[0]},e.prototype.setSpinPosition=function(t){var e=this.spinSettings.position||"Left";"Left"===e||"Top"===e?this.element.insertBefore(t,this.element.getElementsByClassName(kE)[0]):this.element.appendChild(t),this.element.classList.add("e-spin-"+e.toLowerCase())},e.prototype.createProgress=function(){this.element.appendChild(this.createElement("span",{className:LE}))},e.prototype.setContent=function(){var t;t=this.element.innerHTML,this.enableHtmlSanitizer&&(t=Yi.sanitize(this.element.innerHTML)),this.element.innerHTML="",this.element.appendChild(this.createElement("span",{className:kE,innerHTML:t}))},e.prototype.clickHandler=function(){this.element.classList.contains(OE)||this.startProgress()},e.prototype.startProgress=function(t,e){var i=this.element.classList,n=i.contains("e-vertical");i.add(OE),i.contains(NE)||Ac(this.element.querySelector(".e-spinner")),this.startAnimate(Date.now(),e||0,e?Date.now()-1*this.duration/100:Date.now(),t||0,0,this.step,0,n),this.startContAnimate()},e.prototype.startAnimate=function(t,e,i,n,s,r,o,a){var l=this;try{var h=t-i,c=this.duration*r/100,d=h?h<c?h-c:h%c:0;this.progressTime=e=e+h-d,i=t-d,n+=(h-d)/this.duration*100;var p={percent:s=(e-o)%c===0||100===n?n:s,currentDuration:e,step:r};this.eIsVertical=a,0===n?this.trigger("begin",p,function(t){l.successCallback(t,n,s,e,o,d,i)}):100===n||e===this.duration?this.trigger("end",p,function(t){l.successCallback(t,n,s,e,o,d,i)}):this.trigger("progress",p,function(t){l.successCallback(t,n,s,e,o,d,i)})}catch(t){cancelAnimationFrame(this.timerId),this.trigger("fail",t)}},e.prototype.successCallback=function(t,e,i,n,s,r,o){var a=this,l=e,h=i,c=r,d=n,p=s,u=o,g=this.eIsVertical;l!==t.percent&&t.percent!==h&&(l=t.percent),this.percent=l,this.step=t.step,(d-p)%(this.duration*t.step/100)!=0&&100!==l||(this.timerId=requestAnimationFrame(function(){a.enableProgress&&a.getProgress()&&(a.getProgress().style[g?"height":"width"]=l+"%"),a.element.setAttribute("aria-valuenow",l.toString())}),h=l,p=d),this.isPaused||(d<this.duration&&l<100?this.interval=window.setTimeout(function(){a.startAnimate(Date.now(),d,u,l,h,t.step,p,g)},this.duration/100-c):this.interval=window.setTimeout(function(){a.progressTime=a.percent=0,a.enableProgress&&a.getProgress()&&(a.getProgress().style[g?"height":"width"]="0%"),a.element.setAttribute("aria-valuenow","0"),a.hideSpin()},100))},e.prototype.startContAnimate=function(){var t=this,e=this.element.getElementsByClassName(kE)[0];"None"!==this.animationSettings.effect?new qt({}).animate(e,{duration:0===this.animationSettings.duration&&"Enable"===te?400:this.animationSettings.duration,name:"Progress"+this.animationSettings.effect,timingFunction:this.animationSettings.easing,begin:function(){"Center"===t.spinSettings.position&&t.setSpinnerSize()},end:function(){e.classList.add("e-animate-end")}}):"Center"===this.spinSettings.position&&this.setSpinnerSize()},e.prototype.finishProgress=function(){var t=this.element.classList,e=t.contains("e-vertical");t.add(OE);for(var i=this.percent;i<100;i++)(i+=10)>100&&(i=100),this.enableProgress&&this.getProgress()&&(this.getProgress().style[e?"height":"width"]=this.percent<100?i+"%":"100%");this.element.setAttribute("aria-valuenow","0"),this.hideSpin();var n={step:this.step,currentDuration:this.progressTime,percent:100};clearTimeout(this.interval),this.trigger("end",n),this.progressTime=this.percent=0},e.prototype.setSpinnerSize=function(){var t=this.element.getElementsByClassName(kE)[0],e=this.getSpinner();e.style.width=Math.max(e.offsetWidth,t.offsetWidth)+"px",e.style.height=Math.max(e.offsetHeight,t.offsetHeight)+"px",t.classList.add("e-cont-animate")},e.prototype.hideSpin=function(){var t=this.element.getElementsByClassName(kE)[0];if(this.element.classList.contains(NE)||Lc(this.element.querySelector(".e-spinner")),this.element.classList.remove(OE),"None"!==this.animationSettings.effect&&t.classList.remove("e-animate-end"),"Center"===this.spinSettings.position){var e=this.getSpinner();t.classList.remove("e-cont-animate"),e.style.width="auto",e.style.height="auto"}},e.prototype.setIconSpan=function(){var t=this.element.getElementsByClassName(kE)[0],e=this.element.getElementsByClassName("e-btn-icon")[0];!t.childNodes[0]||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?t.appendChild(e):t.insertBefore(e,t.childNodes[0])},e.prototype.setAria=function(){ht(this.element,{"aria-label":this.element.textContent+" progress"})},e.prototype.wireEvents=function(){K.add(this.element,"click",this.clickHandler,this)},e.prototype.unWireEvents=function(){K.remove(this.element,"click",this.clickHandler)},e.prototype.onPropertyChanged=function(e,i){var n=this.element,s=!1;this.element.querySelector(".e-spinner-pane").classList.contains("e-spin-show")&&(s=!0),t.prototype.onPropertyChanged.call(this,e,i);for(var r=0,o=Object.keys(e);r<o.length;r++){switch(o[r]){case"content":this.setContent(),this.createSpinner(),s&&(Ac(this.element.querySelector(".e-spinner")),s=!1),this.enableProgress&&this.createProgress(),n.setAttribute("aria-label",n.textContent+" progress");break;case"iconCss":i.iconCss||this.setIconSpan();break;case"iconPosition":this.setIconSpan();break;case"enableProgress":e.enableProgress?this.createProgress():lt(this.getProgress());break;case"spinSettings":e.spinSettings.position&&(n.classList.remove("e-spin-"+i.spinSettings.position.toLowerCase()),this.setSpinPosition(this.getSpinner())),(e.spinSettings.template||e.spinSettings.width)&&(n.removeChild(this.getSpinner()),this.createSpinner())}}},e.prototype.focusIn=function(){this.element.focus()},AE([jt(!1)],e.prototype,"enableProgress",void 0),AE([jt(2e3)],e.prototype,"duration",void 0),AE([jt("Left")],e.prototype,"iconPosition",void 0),AE([jt("")],e.prototype,"iconCss",void 0),AE([jt(!1)],e.prototype,"disabled",void 0),AE([jt(!1)],e.prototype,"isPrimary",void 0),AE([jt("")],e.prototype,"cssClass",void 0),AE([jt("")],e.prototype,"content",void 0),AE([jt(!1)],e.prototype,"isToggle",void 0),AE([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),AE([Bt({},zE)],e.prototype,"spinSettings",void 0),AE([Bt({},PE)],e.prototype,"animationSettings",void 0),AE([Ut()],e.prototype,"created",void 0),AE([Ut()],e.prototype,"begin",void 0),AE([Ut()],e.prototype,"progress",void 0),AE([Ut()],e.prototype,"end",void 0),AE([Ut()],e.prototype,"fail",void 0),e=AE([Ft],e)}(mo),BE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),HE=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},RE="e-apply",VE="e-cancel",UE="e-current",FE="e-ctrl-btn",WE="e-switch-ctrl-btn",YE="e-disabled",_E="e-value-switch-btn",QE="e-handler",ZE="e-hex",qE="e-hide-hex-value",XE="e-hide-opacity",GE="e-hide-switchable-value",KE="e-hide-value",JE="e-hide-valueswitcher",$E="e-hsv-color",tT="e-hsv-container",eT="e-selected-value",iT="e-mode-switch-btn",nT="e-nocolor-item",sT="e-opacity-value",rT="e-palette",oT="e-color-palette",aT="e-color-picker",lT="e-preview-container",hT="e-previous",cT="e-show-value",dT="e-selected",pT="e-split-preview",uT="e-tile",gT=["#000000","#f44336","#e91e63","#9c27b0","#673ab7","#2196f3","#03a9f4","#00bcd4","#009688","#ffeb3b","#ffffff","#ffebee","#fce4ec","#f3e5f5","#ede7f6","#e3f2fd","#e1f5fe","#e0f7fa","#e0f2f1","#fffde7","#f2f2f2","#ffcdd2","#f8bbd0","#e1bee7","#d1c4e9","#bbdefb","#b3e5fc","#b2ebf2","#b2dfdb","#fff9c4","#e6e6e6","#ef9a9a","#f48fb1","#ce93d8","#b39ddb","#90caf9","#81d4fa","#80deea","#80cbc4","#fff59d","#cccccc","#e57373","#f06292","#ba68c8","#9575cd","#64b5f6","#4fc3f7","#4dd0e1","#4db6ac","#fff176","#b3b3b3","#ef5350","#ec407a","#ab47bc","#7e57c2","#42a5f5","#29b6f6","#26c6da","#26a69a","#ffee58","#999999","#e53935","#d81b60","#8e24aa","#5e35b1","#1e88e5","#039be5","#00acc1","#00897b","#fdd835","#808080","#d32f2f","#c2185b","#7b1fa2","#512da8","#1976d2","#0288d1","#0097a7","#00796b","#fbc02d","#666666","#c62828","#ad1457","#6a1b9a","#4527a0","#1565c0","#0277bd","#00838f","#00695c","#f9a825","#4d4d4d","#b71c1c","#880e4f","#4a148c","#311b92","#0d47a1","#01579b","#006064","#004d40","#f57f17"],mT=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.recentColors=[],n}return BE(e,t),e.prototype.preRender=function(){var t=this.element;this.formElement=ut(this.element,"form"),this.formElement&&K.add(this.formElement,"reset",this.formResetHandler,this);this.l10n=new ri("colorpicker",{Apply:"Apply",Cancel:"Cancel",ModeSwitcher:"Switch Mode",RecentColors:"Recent colors"},this.locale),t.getAttribute("ejs-for")&&!t.getAttribute("name")&&t.setAttribute("name",t.id)},e.prototype.render=function(){this.initWrapper(),this.inline?this.createWidget():this.createSplitBtn(),this.enableOpacity||tt([this.container.parentElement],XE),this.renderComplete()},e.prototype.initWrapper=function(){var t=this.createElement("div",{className:"e-"+this.getModuleName()+"-wrapper"});this.element.parentNode.insertBefore(t,this.element),t.appendChild(this.element),ht(this.element,{tabindex:"-1",spellcheck:"false","aria-label":"colorpicker"}),this.container=this.createElement("div",{className:"e-container"}),this.getWrapper().appendChild(this.container);var e=this.value?this.roundValue(this.value).toLowerCase():"#008000ff";this.noColor&&"Palette"===this.mode&&""===this.value&&(e="");var i=e.slice(0,7);y(this.initialInputValue)&&(this.initialInputValue=i),this.element.value=i,this.enableOpacity?this.setProperties({value:e},!0):this.setProperties({value:i},!0),this.enableRtl&&t.classList.add("e-rtl"),this.cssClass&&tt([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.tileRipple=Xt(this.container,{selector:"."+uT}),this.ctrlBtnRipple=Xt(this.container,{selector:".e-btn"})},e.prototype.getWrapper=function(){return this.element.parentElement},e.prototype.createWidget=function(){"Palette"===this.mode?(this.createPalette(),this.inline||this.firstPaletteFocus()):(this.createPicker(),this.inline||this.getDragHandler().focus()),this.isRgb=!0,this.createInput(),this.createCtrlBtn(),this.disabled||this.wireEvents(),this.inline&&this.disabled&&this.toggleDisabled(!0),G.isDevice&&this.refreshPopupPos()},e.prototype.createSplitBtn=function(){var t=this,e=this.createElement("button",{className:"e-split-colorpicker"});this.getWrapper().appendChild(e),this.splitBtn=new wE({iconCss:"e-selected-color",target:this.container,disabled:this.disabled,enableRtl:this.enableRtl,createPopupOnClick:this.createPopupOnClick,open:this.onOpen.bind(this),click:function(){var e=new MouseEvent("click",{bubbles:!0,cancelable:!1});t.trigger("change",{currentValue:{hex:t.value.slice(0,7),rgba:t.convertToRgbString(t.hexToRgb(t.value))},previousValue:{hex:null,rgba:null},value:t.value,event:e})}}),this.splitBtn.createElement=this.createElement,this.splitBtn.appendTo(e),this.splitBtn.element.setAttribute("aria-label","colorpicker");var i=this.createElement("span",{className:pT});ct(".e-selected-color",e).appendChild(i),i.style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value));var n=this.getPopupEle();if(tt([n],"e-colorpicker-popup"),this.cssClass){var s=this.cssClass.replace(/\s+/g," ").trim().split(" ");n&&tt([n],s),this.splitBtn&&this.splitBtn.activeElem&&this.splitBtn.activeElem[0]&&tt([this.splitBtn.activeElem[0]],s),this.splitBtn&&this.splitBtn.activeElem&&this.splitBtn.activeElem[1]&&tt([this.splitBtn.activeElem[1]],s),this.splitBtn&&this.splitBtn.element&&this.splitBtn.element.parentElement&&tt([this.splitBtn.element.parentElement],s)}if(G.isDevice&&!this.createPopupOnClick){var r=this.getPopupInst();r.relateTo=document.body,r.position={X:"center",Y:"center"},r.targetType="container",r.collision={X:"fit",Y:"fit"},r.offsetY=4,n.style.zIndex=to(this.splitBtn.element).toString()}this.bindCallBackEvent()},e.prototype.onOpen=function(){if(this.trigger("open",{element:this.container}),!G.isDevice){var t=this.getPopupInst();Sr(t.element).length>0&&(t.collision={X:"flip",Y:"fit"},t.position={X:"right",Y:"bottom"},t.targetType="container")}},e.prototype.getPopupInst=function(){return D(this.getPopupEle(),Jr)},e.prototype.bindCallBackEvent=function(){var t=this;this.splitBtn.beforeOpen=function(e){var i=new DE;return t.trigger("beforeOpen",e,function(n){if(!n.cancel){var s=t.getPopupEle();if(s.style.top=S(0+pageYOffset),s.style.left=S(0+pageXOffset),s.style.display="block",t.createWidget(),s.style.display="",G.isDevice){if(t.createPopupOnClick){var r=t.getPopupInst();r.relateTo=document.body,r.position={X:"center",Y:"center"},r.targetType="container",r.collision={X:"fit",Y:"fit"},r.offsetY=4,s.style.zIndex=to(t.splitBtn.element).toString()}t.modal=t.createElement("div"),t.modal.className="e-"+t.getModuleName()+" e-modal",t.modal.style.display="none",document.body.insertBefore(t.modal,s),document.body.className+=" e-colorpicker-overflow",t.modal.style.display="block",t.modal.style.zIndex=(Number(s.style.zIndex)-1).toString()}}e.cancel=n.cancel,i.resolve(n)}),i},this.splitBtn.beforeClose=function(e){var i=new DE;if(y(e.event))i.resolve(e);else{var n={element:t.container,event:e.event,cancel:!1};t.trigger("beforeClose",n,function(n){G.isDevice&&e.event.target===t.modal&&(n.cancel=!0),n.cancel||(t.onPopupClose(),"keydown"===e.event.type&&27===e.event.keyCode&&t.splitBtn.element.focus()),e.cancel=n.cancel,i.resolve(n)})}return i}},e.prototype.onPopupClose=function(){this.unWireEvents(),this.destroyOtherComp(),this.container.style.width="",ct("."+pT,this.splitBtn.element).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value)),this.container.innerHTML="",et([this.container],[aT,oT]),G.isDevice&&this.modal&&(et([document.body],"e-colorpicker-overflow"),this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},e.prototype.createPalette=function(){if(mt(this.container,[oT],[aT]),this.presetColors){var t=this.createElement("div",{className:"e-custom-palette"});this.appendElement(t);var e=Object.keys(this.presetColors);if(1===e.length)this.appendPalette(this.presetColors[e[0]],e[0],t);else for(var i=0,n=e.length;i<n;i++)this.appendPalette(this.presetColors[e[i]],e[i],t);dt(".e-row",t).length>10&&tt([t],"e-palette-group")}else this.appendPalette(gT,"default");"Palette"===this.mode&&!this.modeSwitcher&&this.noColor&&this.setNoColor(),this.showRecentColors&&this.recentColors&&this.recentColors.length>0&&this.renderRecentColor();var s=parseInt(getComputedStyle(this.container).borderBottomWidth,10);this.container.style.width=S(this.container.children[0].offsetWidth+s+s),this.rgb=this.hexToRgb(this.roundValue(this.value)),this.hsv=this.rgbToHsv.apply(this,this.rgb)},e.prototype.renderRecentColor=function(){var t=this,e=this.container.querySelector(".e-clr-pal-rec-wpr");e&&at(e);var i=this.createElement("div",{className:"e-clr-pal-rec-wpr"}),n=this.container.querySelector(".e-switch-ctrl-btn");n?this.container.insertBefore(i,n):this.container.appendChild(i);var s=this.createElement("label",{className:"e-recent-clr-span"});if(s.textContent=this.l10n.getConstant("RecentColors"),i.appendChild(s),this.recentColors.length>0){for(this.recentColors=this.recentColors.filter(function(e,i){return t.recentColors.indexOf(e)===i});this.recentColors.length>10;)this.recentColors.pop();this.appendPalette(this.recentColors,"recent-color",i)}},e.prototype.firstPaletteFocus=function(){ct("."+dT,this.container.children[0])||dt("."+rT,this.container)[0].focus()},e.prototype.appendPalette=function(t,e,i){var n,s,r,o=this.createElement("div",{className:rT,attrs:{tabindex:"0",role:"grid"}});"recent-color"===e&&o.classList.add("e-recent-palette"),i?i.appendChild(o):this.appendElement(o);for(var a=0,l=t.length;a<l;a++)0!==a&&a%this.columns!==0||(n=this.createElement("div",{className:"e-row",attrs:{role:"row"}}),o.appendChild(n)),r=this.roundValue(t[a]).toLowerCase(),s=this.createElement("span",{className:uT,attrs:{role:"gridcell","aria-label":r,"aria-selected":"false"}}),this.trigger("beforeTileRender",{element:s,presetName:e,value:t[a]}),n.appendChild(s),this.value===r&&"recent-color"!==e&&(this.addTileSelection(s),o.focus()),s.style.backgroundColor=this.convertToRgbString(this.hexToRgb(r))},e.prototype.setNoColor=function(){var t=this.container.querySelector(".e-row").children[0];t.classList.add(nT),this.value||(t.classList.add(dT),ut(t,"."+rT).focus()),["aria-selected","aria-label"].forEach(function(e){t.removeAttribute(e)}),t.style.backgroundColor=""},e.prototype.appendElement=function(t,e){void 0===e&&(e=0);var i=this.container.children[e];i?this.container.insertBefore(t,i):this.container.appendChild(t)},e.prototype.addTileSelection=function(t){t&&(t.classList.add(dT),t.setAttribute("aria-selected","true"))},e.prototype.createPicker=function(){mt(this.container,[aT],[oT]);var t=this.createElement("div",{className:tT});this.appendElement(t),t.appendChild(this.createElement("div",{className:$E}));var e=this.createElement("span",{className:QE,attrs:{tabindex:"0"}});t.appendChild(e),null!==this.value&&""!==this.value||(this.value="#008000ff"),this.rgb=this.hexToRgb(this.value),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHsvContainerBg(),this.setHandlerPosition(),this.createSlider(),this.createDragTooltip()},e.prototype.setHsvContainerBg=function(t){void 0===t&&(t=this.hsv[0]),this.getHsvContainer().style.backgroundColor=this.convertToRgbString(this.hsvToRgb(t,100,100,1))},e.prototype.getHsvContainer=function(){return ct("."+tT,this.container)},e.prototype.setHandlerPosition=function(){var t=this.getDragHandler(),e=ct("."+$E,this.container);this.enableRtl?t.style.left=S((e.offsetWidth-t.offsetWidth/2.5)*Math.abs(100-this.hsv[1])/100):t.style.left=S((e.offsetWidth-t.offsetWidth/2.5)*this.hsv[1]/100),t.style.top=S((e.offsetHeight-t.offsetHeight/2.5)*(100-this.hsv[2])/100)},e.prototype.createSlider=function(){var t=this.createElement("div",{className:"e-slider-preview"});this.appendElement(t,1),this.createPreview(t);var e=this.createElement("div",{className:"e-colorpicker-slider"});t.insertBefore(e,t.children[0]);var i=this.createElement("div",{className:"e-hue-slider"});e.appendChild(i),this.hueSlider=new yD({value:this.hsv[0],min:0,max:359,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.hueChange.bind(this)}),this.hueSlider.createElement=this.createElement,this.hueSlider.appendTo(i),this.enableOpacity&&(i=this.createElement("div",{className:"e-opacity-slider"}),e.appendChild(i),this.createOpacitySlider(i))},e.prototype.createOpacitySlider=function(t){this.opacitySlider=new yD({value:100*this.rgb[3],min:0,max:100,enableRtl:this.enableRtl,enabled:!this.disabled,change:this.opacityChange.bind(this)}),this.opacitySlider.createElement=this.createElement,this.opacitySlider.appendTo(t);var e=this.createElement("div",{className:"e-opacity-empty-track"});t.appendChild(e),this.updateOpacitySliderBg()},e.prototype.updateOpacitySliderBg=function(){var t=this.enableRtl?"to left":"to right",e=ct(".e-opacity-empty-track",this.opacitySlider.element);e&&(e.style.background="linear-gradient("+t+", rgba("+this.rgb.slice(0,3)+", 0) 0%, "+this.convertToRgbString(this.rgb.slice(0,3))+" 100%)")},e.prototype.hueChange=function(t){this.hsv[0]=t.value,this.setHsvContainerBg(),this.convertToOtherFormat()},e.prototype.opacityChange=function(t){var e=t.value,i=this.rgbToHex(this.rgb);this.hsv[3]=e/100,this.rgb[3]=e/100;var n=this.rgbToHex(this.rgb);this.updateOpacityInput(e);var s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.triggerEvent(n,i,s)},e.prototype.updateOpacityInput=function(t){if(this.enableOpacity&&!this.getWrapper().classList.contains(KE)){var e=D(ct("."+sT,this.container),mx);e.value=t,e.dataBind()}},e.prototype.createPreview=function(t){var e=this.createElement("div",{className:lT});t.appendChild(e);var i=this.createElement("span",{className:"e-preview "+UE});e.appendChild(i);var n=this.convertToRgbString(this.rgb);i.style.backgroundColor=n,i=this.createElement("span",{className:"e-preview "+hT}),e.appendChild(i),i.style.backgroundColor=n},e.prototype.isPicker=function(){return!this.container.classList.contains(oT)},e.prototype.getPopupEle=function(){return this.container.parentElement},e.prototype.createNumericInput=function(t,e,i,n){var s=this,r=new mx({value:e,placeholder:i,min:0,max:n,format:"###.##",showSpinButton:!1,floatLabelType:"Always",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker(),change:function(t){t.event&&s.inputHandler(t.event)}});r.createElement=this.createElement,r.appendTo(t)},e.prototype.createInput=function(){var t=this.isPicker(),e=this.getWrapper();if(t&&!e.classList.contains(KE)||!t&&e.classList.contains(cT)){var i=this.createElement("div",{className:eT});t?this.appendElement(i,2):this.appendElement(i,1);var n=this.createElement("div",{className:"e-input-container"});if(i.appendChild(n),e.classList.contains(JE)||this.appendValueSwitchBtn(i),!e.classList.contains(qE)){var s=this.createElement("input",{className:ZE,attrs:{maxlength:"7",spellcheck:"false","aria-label":"HEX"}});n.appendChild(s),hI.createInput({element:s,floatLabelType:"Always",properties:{placeholder:"HEX",enableRtl:this.enableRtl,enabled:!this.disabled,readonly:!this.isPicker()}},this.createElement),hI.setValue(this.value.slice(0,7),s),s.addEventListener("input",this.inputHandler.bind(this))}if(!e.classList.contains(GE)){var r=void 0,o=void 0;this.isRgb?(r="RGB",o=this.rgb):(r="HSV",o=this.hsv);for(var a=["rh","gs","bv"],l=0;l<3;l++)this.createNumericInput(n.appendChild(this.createElement("input",{className:"e-"+a[l]+"-value"})),o[l],r[l],255);this.enableOpacity&&this.appendOpacityValue(n)}}},e.prototype.appendOpacityValue=function(t){this.createNumericInput(t.appendChild(this.createElement("input",{className:sT})),100*this.rgb[3],"A",100)},e.prototype.appendValueSwitchBtn=function(t){var e=this.createElement("button",{className:"e-icons e-css e-btn e-flat e-icon-btn "+_E,attrs:{title:"Toggle format"}});t.appendChild(e),this.isPicker()&&!this.getWrapper().classList.contains(GE)&&e.addEventListener("click",this.formatSwitchHandler.bind(this))},e.prototype.createCtrlBtn=function(){if(this.modeSwitcher||this.showButtons){this.l10n.setLocale(this.locale);var t=this.createElement("div",{className:WE});if(this.container.appendChild(t),this.showButtons){var e=this.createElement("div",{className:FE});t.appendChild(e);var i=this.l10n.getConstant("Apply");e.appendChild(this.createElement("button",{innerHTML:i,className:"e-btn e-css e-flat e-primary e-small "+RE,attrs:{title:i}}));var n=this.l10n.getConstant("Cancel");e.appendChild(this.createElement("button",{innerHTML:n,className:"e-btn e-css e-flat e-small "+VE,attrs:{title:n}}))}this.modeSwitcher&&this.appendModeSwitchBtn()}},e.prototype.appendModeSwitchBtn=function(){var t=this.createElement("button",{className:"e-icons e-btn e-flat e-icon-btn "+iT,attrs:{title:this.l10n.getConstant("ModeSwitcher")}});ct("."+WE,this.container).insertBefore(t,ct("."+FE,this.container))},e.prototype.createDragTooltip=function(){var t=this,e=new Zh({opensOn:"Custom",showTipPointer:!1,cssClass:"e-color-picker-tooltip",htmlAttributes:{title:"tooltip"},beforeOpen:function(e){t.tooltipEle=e.element},animation:{open:{effect:"None"},close:{effect:"None"}}});e.createElement=this.createElement,e.appendTo(this.container),e.open(this.container),this.tooltipEle.style.zIndex=to(this.tooltipEle).toString(),this.tooltipEle.setAttribute("aria-label","colorpicker-tooltip"),ct(".e-tip-content",this.tooltipEle).appendChild(this.createElement("div",{className:"e-tip-transparent"}))},e.prototype.getTooltipInst=function(){return D(this.container,Zh)},e.prototype.setTooltipOffset=function(t){this.getTooltipInst().offsetY=t},e.prototype.toggleDisabled=function(t){t?this.getWrapper().classList.add(YE):this.getWrapper().classList.remove(YE),this.showButtons&&[].slice.call(dt(".e-btn",this.container)).forEach(function(e){t?ht(e,{disabled:""}):e.removeAttribute("disabled")})},e.prototype.convertToRgbString=function(t){return t.length?4===t.length?"rgba("+t.join()+")":"rgb("+t.join()+")":""},e.prototype.convertToHsvString=function(t){return 4===t.length?"hsva("+t.join()+")":"hsv("+t.join()+")"},e.prototype.updateHsv=function(){this.hsv[1]=this.hsv[1]>100?100:this.hsv[1],this.hsv[2]=this.hsv[2]>100?100:this.hsv[2],this.setHandlerPosition()},e.prototype.convertToOtherFormat=function(t,e){void 0===t&&(t=!1);var i=this.rgbToHex(this.rgb);this.rgb=this.hsvToRgb.apply(this,this.hsv);var n=this.rgbToHex(this.rgb),s=this.convertToRgbString(this.rgb);this.updatePreview(s),this.updateInput(n),this.triggerEvent(n,i,s,t,e)},e.prototype.updateInput=function(t){var e=this.getWrapper();e.classList.contains(KE)||(e.classList.contains(qE)||hI.setValue(t.substr(0,7),ct("."+ZE,this.container)),e.classList.contains(GE)||(this.isRgb?this.updateValue(this.rgb,!1):this.updateValue(this.hsv,!1)))},e.prototype.updatePreview=function(t){this.enableOpacity&&this.updateOpacitySliderBg(),ct(".e-tip-transparent",this.tooltipEle).style.backgroundColor=t,ct("."+lT+" ."+UE,this.container).style.backgroundColor=t,ct("."+lT+" ."+hT,this.container).style.backgroundColor=this.convertToRgbString(this.hexToRgb(this.value))},e.prototype.getDragHandler=function(){return ct("."+QE,this.container)},e.prototype.removeTileSelection=function(){[].slice.call(dt("."+dT,this.container)).forEach(function(t){t.classList.remove(dT),t.setAttribute("aria-selected","false")})},e.prototype.convertRgbToNumberArray=function(t){return t.slice(t.indexOf("(")+1,t.indexOf(")")).split(",").map(function(t,e){return 3!==e?parseInt(t,10):parseFloat(t)})},e.prototype.getValue=function(t,e){if(t||(t=this.value),e=e?e.toLowerCase():"hex","r"===t[0]){var i=this.convertRgbToNumberArray(t);if("hex"===e||"hexa"===e){var n=this.rgbToHex(i);return"hex"===e?n.slice(0,7):n}return"hsv"===e?this.convertToHsvString(this.rgbToHsv.apply(this,i.slice(0,3))):"hsva"===e?this.convertToHsvString(this.rgbToHsv.apply(this,i)):"null"}if("h"===t[0]){i=this.hsvToRgb.apply(this,this.convertRgbToNumberArray(t));if("rgba"===e)return this.convertToRgbString(i);if("hex"===e||"hexa"===e){n=this.rgbToHex(i);return"hex"===e?n.slice(0,7):n}return"rgb"===e?this.convertToRgbString(i.slice(0,3)):"null"}t=this.roundValue(t);var s=this.hexToRgb(t);return"rgb"!==e&&"hsv"!==e||(s=s.slice(0,3)),"rgba"===e||"rgb"===e?this.convertToRgbString(s):"hsva"===e||"hsv"===e?this.convertToHsvString(this.rgbToHsv.apply(this,s)):"hex"===e?t.slice(0,7):"a"===e?s[3].toString():"null"},e.prototype.toggle=function(){this.container.parentElement.classList.contains("e-popup-close")?this.splitBtn.toggle():this.closePopup(null)},e.prototype.getModuleName=function(){return"colorpicker"},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.wireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();K.add(t,"keydown",this.pickerKeyDown,this);var e=ct("."+FE,this.container);e&&K.add(e,"keydown",this.ctrlBtnKeyDown,this),K.add(this.getHsvContainer(),"mousedown touchstart",this.handlerDown,this),(this.modeSwitcher||this.showButtons)&&this.addCtrlSwitchEvent(),K.add(ct("."+hT,this.container),"click",this.previewHandler,this)}else K.add(this.container,"click",this.paletteClickHandler,this),K.add(this.container,"keydown",this.paletteKeyDown,this)},e.prototype.formResetHandler=function(){this.value=this.initialInputValue,ht(this.element,{value:this.initialInputValue})},e.prototype.addCtrlSwitchEvent=function(){var t=ct("."+WE,this.container);t&&K.add(t,"click",this.btnClickHandler,this)},e.prototype.ctrlBtnKeyDown=function(t){if(13===t.keyCode){if(ct("."+RE,this.container)){var e=this.rgbToHex(this.rgb);this.triggerChangeEvent(e)}this.splitBtn.element.focus()}},e.prototype.pickerKeyDown=function(t){switch(t.keyCode){case 39:this.handlerDragPosition(1,this.enableRtl?-1:1,t);break;case 37:this.handlerDragPosition(1,this.enableRtl?1:-1,t);break;case 38:this.handlerDragPosition(2,1,t);break;case 40:this.handlerDragPosition(2,-1,t);break;case 13:t.preventDefault();var e=this.rgbToHex(this.rgb);this.enterKeyHandler(e)}},e.prototype.enterKeyHandler=function(t){this.triggerChangeEvent(t),this.inline||this.splitBtn.element.focus()},e.prototype.closePopup=function(t){var e=this,i={element:this.container,event:t,cancel:!1};this.trigger("beforeClose",i,function(t){t.cancel||(e.splitBtn.toggle(),e.onPopupClose())})},e.prototype.triggerChangeEvent=function(t,e){var i=t.slice(0,7);this.trigger("change",{currentValue:{hex:i,rgba:this.convertToRgbString(this.rgb)},event:e,previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:this.enableOpacity?t:i}),this.showRecentColors&&(this.recentColors.unshift(i),this.inline&&this.renderRecentColor()),this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:i},!0),this.element.value=i||"#000000"},e.prototype.handlerDragPosition=function(t,e,i){i.preventDefault(),this.hsv[t]+=e*(i.ctrlKey?1:3),this.hsv[t]<0&&(this.hsv[t]=0),this.updateHsv(),this.convertToOtherFormat(!0,i)},e.prototype.handlerDown=function(t){t.preventDefault(),"mousedown"===t.type?(this.clientX=Math.abs(t.pageX-pageXOffset),this.clientY=Math.abs(t.pageY-pageYOffset),this.setTooltipOffset(8)):(this.clientX=Math.abs(t.changedTouches[0].pageX-pageXOffset),this.clientY=Math.abs(t.changedTouches[0].pageY-pageYOffset),this.setTooltipOffset(-8)),this.setHsv(this.clientX,this.clientY),this.getDragHandler().style.transition="left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)",this.updateHsv(),this.convertToOtherFormat(!1,t),this.getDragHandler().focus(),K.add(document,"mousemove touchmove",this.handlerMove,this),K.add(document,"mouseup touchend",this.handlerEnd,this)},e.prototype.handlerMove=function(t){var e,i;"touchmove"!==t.type&&t.preventDefault(),"mousemove"===t.type?(e=Math.abs(t.pageX-pageXOffset),i=Math.abs(t.pageY-pageYOffset)):(e=Math.abs(t.changedTouches[0].pageX-pageXOffset),i=Math.abs(t.changedTouches[0].pageY-pageYOffset)),this.setHsv(e,i);var n=this.getDragHandler();this.updateHsv(),this.convertToOtherFormat(!1,t),this.getTooltipInst().refresh(n),this.tooltipEle.style.transform||(Math.abs(this.clientX-e)>8||Math.abs(this.clientY-i)>8)&&(ct("."+$E,this.container).style.cursor="pointer",n.style.transition="none",this.inline||(this.tooltipEle.style.zIndex=(parseInt(this.getPopupEle().style.zIndex,10)+1).toString()),this.tooltipEle.style.transform="rotate(45deg)",n.classList.add("e-hide-handler"))},e.prototype.setHsv=function(t,e){var i=ct("."+$E,this.container),n=i.getBoundingClientRect();t=this.enableRtl?t>n.right?0:Math.abs(t-n.right):t>n.left?Math.abs(t-n.left):0,e=e>n.top?Math.abs(e-n.top):0,this.hsv[2]=Math.round(10*Number(100*(i.offsetHeight-Math.max(0,Math.min(i.offsetHeight,e-i.offsetTop)))/i.offsetHeight))/10,this.hsv[1]=Math.round(10*Number(100*Math.max(0,Math.min(i.offsetWidth,t-i.offsetLeft))/i.offsetWidth))/10},e.prototype.handlerEnd=function(t){"touchend"!==t.type&&t.preventDefault(),K.remove(document,"mousemove touchmove",this.handlerMove),K.remove(document,"mouseup touchend",this.handlerEnd);var e=this.getDragHandler();ct("."+$E,this.container).style.cursor="",this.tooltipEle.style.transform&&(this.tooltipEle.style.transform="",e.classList.remove("e-hide-handler")),this.inline||this.showButtons||this.closePopup(t)},e.prototype.btnClickHandler=function(t){var e=t.target;ut(e,"."+iT)?(t.stopPropagation(),this.switchToPalette()):(e.classList.contains(RE)||e.classList.contains(VE))&&this.ctrlBtnClick(e,t)},e.prototype.switchToPalette=function(){this.trigger("beforeModeSwitch",{element:this.container,mode:"Palette"}),this.unWireEvents(),this.destroyOtherComp(),at(ct(".e-slider-preview",this.container)),this.getWrapper().classList.contains(KE)||lt(ct("."+eT,this.container)),at(this.getHsvContainer()),this.createPalette(),this.firstPaletteFocus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Palette"})},e.prototype.refreshImageEditorPopupPos=function(){if(G.isDevice){var t=this.getPopupEle();t.style.left=S(0+pageXOffset),t.style.top=S(0+pageYOffset);var e=document.querySelector("#"+this.element.parentElement.parentElement.id.split("-popup")[0]);e&&t.parentElement.ej2_instances[0].refreshPosition(e)}},e.prototype.refreshPopupPos=function(){if(!this.inline){var t=this.getPopupEle();t.style.left=S(0+pageXOffset),t.style.top=S(0+pageYOffset),this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement)}},e.prototype.formatSwitchHandler=function(){this.isRgb?(this.updateValue(this.hsv,!0,3,[360,100,100]),this.isRgb=!1):(this.updateValue(this.rgb,!0,2),this.isRgb=!0)},e.prototype.updateValue=function(t,e,i,n){for(var s,r=["e-rh-value","e-gs-value","e-bv-value"],o=0,a=r.length;o<a;o++)(s=D(ct("."+r[o],this.container),mx)).value=Math.round(t[o]),e&&(s.placeholder=r[o].substr(i,1).toUpperCase(),s.max=n?n[o]:255),s.dataBind()},e.prototype.previewHandler=function(t){var e=t.target,i=this.rgbToHex(this.rgb);this.rgb=this.convertRgbToNumberArray(e.style.backgroundColor),this.rgb[3]||(this.rgb[3]=1);var n=this.rgbToHex(this.rgb),s=this.rgbToHsv.apply(this,this.rgb);s[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:s[0]},!0),this.hueSlider.refresh()),this.setHsvContainerBg(s[0]),this.enableOpacity&&s[3]!==this.hsv[3]&&(this.opacitySlider.setProperties({value:100*s[3]},!0),this.opacitySlider.refresh(),this.updateOpacitySliderBg()),this.hsv=s,this.setHandlerPosition(),this.updateInput(n),ct("."+lT+" ."+UE,this.container).style.backgroundColor=this.convertToRgbString(this.rgb),this.triggerEvent(n,i,this.convertToRgbString(this.rgb),!1,t)},e.prototype.paletteClickHandler=function(t){t.preventDefault();var e=t.target;if(e.classList.contains(uT)){if(this.removeTileSelection(),this.addTileSelection(e),e.classList.contains(nT))this.noColorTile();else{var i=e.getAttribute("aria-label"),n=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(this.roundValue(i)),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(cT)&&this.updateInput(i),this.triggerEvent(i,n,this.convertToRgbString(this.rgb),!1,t)}this.inline||this.showButtons||this.closePopup(t)}else ut(e,"."+iT)?this.switchToPicker():e.classList.contains(RE)||e.classList.contains(VE)?this.ctrlBtnClick(e,t):this.getWrapper().classList.contains(cT)&&ut(e,"."+_E)&&this.formatSwitchHandler()},e.prototype.noColorTile=function(t){void 0===t&&(t=!1);var e=this.rgbToHex(this.rgb);this.rgb=[],this.hsv=[],this.triggerEvent("",e,"",t)},e.prototype.switchToPicker=function(){var t=this.getWrapper();this.trigger("beforeModeSwitch",{element:this.container,mode:"Picker"}),this.unWireEvents(),[].slice.call(dt("."+rT,this.container)).forEach(function(t){at(t)}),this.container.querySelector(".e-clr-pal-rec-wpr")&&at(this.container.querySelector(".e-clr-pal-rec-wpr")),t.classList.contains(cT)&&at(ct("."+eT,this.container)),this.container.style.width="";var e=ct(".e-custom-palette",this.container);this.presetColors&&lt(e),this.createPicker(),this.getDragHandler().focus(),this.createInput(),this.refreshPopupPos(),this.element.parentElement&&this.element.parentElement.parentElement&&this.element.parentElement.parentElement.classList.contains("e-ie-ddb-popup")&&this.refreshImageEditorPopupPos(),this.wireEvents(),this.trigger("onModeSwitch",{element:this.container,mode:"Picker"})},e.prototype.ctrlBtnClick=function(t,e){if(t.classList.contains(RE)){var i=this.rgbToHex(this.rgb);this.triggerChangeEvent(i,e)}if(this.inline){if(t.classList.contains(VE)){var n={element:this.container,event:e,cancel:!1};this.trigger("beforeClose",n)}}else this.closePopup(e),this.splitBtn.element.focus()},e.prototype.paletteKeyDown=function(t){var e=t.target;if(e.classList.contains(rT)){var i,n,s=[].slice.call(dt("."+uT,e)),r=s.filter(function(t){return t.classList.contains("e-selected")}).pop();switch(!t.altKey&&t.keyCode){case 39:t.preventDefault(),i=r?s[this.tilePosition(s,r,this.enableRtl?-1:1)]:s[this.enableRtl?s.length-1:0],this.keySelectionChanges(i);break;case 37:t.preventDefault(),i=r?s[this.tilePosition(s,r,this.enableRtl?1:-1)]:s[this.enableRtl?0:s.length-1],this.keySelectionChanges(i);break;case 38:t.preventDefault(),i=s[n=r?this.tilePosition(s,r,-this.columns):0]?s[n]:s[n-this.columns],this.keySelectionChanges(i);break;case 40:t.preventDefault(),s[n=r?this.tilePosition(s,r,this.columns):s.length-1]?i=s[n]:(n%=s.length,i=s[n+=s[s.length-1].parentElement.childElementCount]),this.keySelectionChanges(i);break;case 13:if(t.preventDefault(),r){var o=r.getAttribute("aria-label");this.enterKeyHandler(o||"")}}}},e.prototype.keySelectionChanges=function(t){if(this.removeTileSelection(),this.addTileSelection(t),t.classList.contains(nT))this.noColorTile(!0);else{var e=t.getAttribute("aria-label"),i=this.rgbToHex(this.rgb);this.rgb=this.hexToRgb(e),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.getWrapper().classList.contains(cT)&&this.updateInput(e),this.triggerEvent(e,i,this.convertToRgbString(this.rgb),!0)}},e.prototype.tilePosition=function(t,e,i){var n=(t=Array.prototype.slice.call(t)).length,s=this.columns-t[n-1].parentElement.childElementCount,r=t.indexOf(e);return(r+=i)<0?r+=n+s:r%=n+s,r},e.prototype.inputHandler=function(t){var e,i,n=t.target;if(n.value.length)switch(ct(".e-float-text",n.parentElement).textContent){case"HEX":var s="";if(("#"===n.value[0]&&5!==n.value.length||"#"!==n.value[0]&&4!==n.value.length)&&(s=this.roundValue(n.value)),9!==s.length)return;i=this.rgbToHex(this.rgb),this.rgb=this.hexToRgb(s+s.substr(-2)),this.inputValueChange(this.rgbToHsv.apply(this,this.rgb),i,n.value,t);break;case"R":this.rgb[0]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[0]=Number(n.value),e=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(e,i,null,t));break;case"G":this.rgb[1]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[1]=Number(n.value),e=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(e,i,null,t));break;case"B":this.rgb[2]!==Number(n.value)&&(i=this.rgbToHex(this.rgb),this.rgb[2]=Number(n.value),e=this.rgbToHsv.apply(this,this.rgb),this.inputValueChange(e,i,null,t));break;case"H":this.hueSlider.value=Number(n.value);break;case"S":this.hsv[1]!==Number(n.value)&&(this.hsv[1]=Number(n.value),this.updateHsv(),this.convertToOtherFormat(!1,t));break;case"V":this.hsv[2]!==Number(n.value)&&(this.hsv[2]=Number(n.value),this.updateHsv(),this.convertToOtherFormat(!1,t));break;case"A":this.opacitySlider.value=Number(n.value)}},e.prototype.inputValueChange=function(t,e,i,n){t[0]!==this.hsv[0]&&(this.hueSlider.setProperties({value:t[0]},!0),this.hueSlider.refresh(),this.setHsvContainerBg(t[0])),this.hsv=t;var s=this.rgbToHex(this.rgb);this.setHandlerPosition(),this.updateInput(i||s);var r=this.convertToRgbString(this.rgb);this.updatePreview(r),this.triggerEvent(s,e,r,!1,n)},e.prototype.triggerEvent=function(t,e,i,n,s){void 0===n&&(n=!1);var r=t.slice(0,7);y(s)&&(s=new MouseEvent("click",{bubbles:!0,cancelable:!1})),this.showButtons||n?this.trigger("select",{currentValue:{hex:r,rgba:i},event:s,previousValue:{hex:e.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(e))}}):(this.trigger("change",{currentValue:{hex:r,rgba:i},event:s,previousValue:{hex:this.value.slice(0,7),rgba:this.convertToRgbString(this.hexToRgb(this.value))},value:t}),this.showRecentColors&&(this.recentColors.unshift(r),this.inline&&this.renderRecentColor()),this.enableOpacity?this.setProperties({value:t},!0):this.setProperties({value:r},!0),this.element.value=r||"#000000")},e.prototype.destroy=function(){var e=this,i=this.getWrapper();t.prototype.destroy.call(this),["tabindex","spellcheck"].forEach(function(t){e.element.removeAttribute(t)}),this.inline?(this.unWireEvents(),this.destroyOtherComp()):(this.isPopupOpen()&&(this.unWireEvents(),this.destroyOtherComp()),this.splitBtn.destroy(),this.splitBtn=null),this.tileRipple(),this.tileRipple=null,this.ctrlBtnRipple(),this.ctrlBtnRipple=null,this.element.nextElementSibling&&at(this.element.nextElementSibling),i&&(i.parentElement.insertBefore(this.element,i),at(i)),this.container=null,this.formElement&&K.remove(this.formElement,"reset",this.formResetHandler)},e.prototype.destroyOtherComp=function(){if(this.isPicker()){for(var t=ut(this.hueSlider.element,".e-color-picker").querySelectorAll(".e-numerictextbox"),e=0;e<t.length;e++)D(t[e],mx).destroy();this.hueSlider.destroy(),this.enableOpacity&&(this.opacitySlider.destroy(),this.opacitySlider=null),this.hueSlider=null;var i=this.getTooltipInst();i.close(),i.destroy(),this.tooltipEle=null}},e.prototype.isPopupOpen=function(){return this.getPopupEle().classList.contains("e-popup-open")},e.prototype.unWireEvents=function(){if(this.isPicker()){var t=this.getDragHandler();K.remove(t,"keydown",this.pickerKeyDown);var e=ct("."+FE,this.container);e&&K.remove(e,"keydown",this.ctrlBtnKeyDown),K.remove(this.getHsvContainer(),"mousedown touchstart",this.handlerDown),(this.modeSwitcher||this.showButtons)&&K.remove(ct("."+WE,this.container),"click",this.btnClickHandler),K.remove(ct("."+hT,this.container),"click",this.previewHandler)}else K.remove(this.container,"click",this.paletteClickHandler),K.remove(this.container,"keydown",this.paletteKeyDown)},e.prototype.roundValue=function(t){if(!t)return"";"#"!==t[0]&&(t="#"+t);var e=t.length;if(4===e&&(t+="f",e=5),5===e){for(var i="",n=1,s=t.length;n<s;n++)i+=t.charAt(n)+t.charAt(n);t="#"+i,e=9}return 7===e&&(t+="ff"),t},e.prototype.hexToRgb=function(t){if(!t)return[];9!==(t=t.trim()).length&&(t=this.roundValue(t));var e=Number((parseInt(t.slice(-2),16)/255).toFixed(2));t=t.slice(1,7);var i=parseInt(t,16),n=[];return n.push(i>>16&255),n.push(i>>8&255),n.push(255&i),n.push(e),n},e.prototype.rgbToHsv=function(t,e,i,n){if(this.rgb&&!this.rgb.length)return[];t/=255,e/=255,i/=255;var s,r=Math.max(t,e,i),o=Math.min(t,e,i),a=r,l=r-o,h=0===r?0:l/r;if(r===o)s=0;else{switch(r){case t:s=(e-i)/l+(e<i?6:0);break;case e:s=(i-t)/l+2;break;case i:s=(t-e)/l+4}s/=6}var c=[Math.round(360*s),Math.round(1e3*h)/10,Math.round(1e3*a)/10];return y(n)||c.push(n),c},e.prototype.hsvToRgb=function(t,e,i,n){var s,r,o;if(i/=100,0===(e/=100))return s=r=o=i,[Math.round(255*s),Math.round(255*r),Math.round(255*o),n];t/=60;var a=Math.floor(t),l=t-a,h=i*(1-e),c=i*(1-e*l),d=i*(1-e*(1-l));switch(a){case 0:s=i,r=d,o=h;break;case 1:s=c,r=i,o=h;break;case 2:s=h,r=i,o=d;break;case 3:s=h,r=c,o=i;break;case 4:s=d,r=h,o=i;break;default:s=i,r=h,o=c}var p=[Math.round(255*s),Math.round(255*r),Math.round(255*o)];return y(n)||p.push(n),p},e.prototype.rgbToHex=function(t){return t.length?"#"+this.hex(t[0])+this.hex(t[1])+this.hex(t[2])+(y(t[3])?"":0!==t[3]?(Math.round(255*t[3])+65536).toString(16).substr(-2):"00"):""},e.prototype.hex=function(t){return("0"+t.toString(16)).slice(-2)},e.prototype.changeModeSwitcherProp=function(t){var e=ct("."+WE,this.container);t?e?this.appendModeSwitchBtn():(this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):e&&(this.showButtons?at(ct("."+iT,e)):lt(e))},e.prototype.changeShowBtnProps=function(t){var e=ct("."+WE,this.container);t?(e&&lt(e),this.createCtrlBtn(),this.isPicker()&&!this.disabled&&this.addCtrlSwitchEvent()):this.modeSwitcher?at(ct("."+FE,e)):lt(e)},e.prototype.changeValueProp=function(t){if(this.isPicker())this.rgb=this.hexToRgb(t),this.hsv=this.rgbToHsv.apply(this,this.rgb),this.setHandlerPosition(),at(ut(this.hueSlider.element,".e-slider-preview")),this.createSlider(),this.setHsvContainerBg(),this.updateInput(t),4===this.rgb.length&&this.updateOpacityInput(100*this.rgb[3]);else{this.removeTileSelection();var e=this.container.querySelector('span[aria-label="'+this.roundValue(t)+'"]');e&&this.addTileSelection(e)}},e.prototype.setInputEleProps=function(){lt(ct("."+eT,this.container)),this.createInput()},e.prototype.changeDisabledProp=function(t){this.isPicker()&&(this.hueSlider.enabled=!t,this.opacitySlider.enabled=!t,this.setInputEleProps()),t?(this.toggleDisabled(!0),this.unWireEvents()):(this.toggleDisabled(!1),this.wireEvents())},e.prototype.changeCssClassProps=function(t,e){var i=this.getWrapper(),n=this.getPopupEle();e&&(et([i,n],e.split(" ")),this.splitBtn&&this.splitBtn.activeElem&&this.splitBtn.activeElem[0]&&this.splitBtn.activeElem[1]&&et([this.splitBtn.activeElem[0],this.splitBtn.activeElem[1]],e.split(" ")),this.splitBtn&&this.splitBtn.element&&this.splitBtn.element.parentElement&&et([this.splitBtn.element.parentElement],e.split(" "))),t&&(tt([i,n],t.replace(/\s+/g," ").trim().split(" ")),this.splitBtn&&this.splitBtn.activeElem&&this.splitBtn.activeElem[0]&&this.splitBtn.activeElem[1]&&tt([this.splitBtn.activeElem[0],this.splitBtn.activeElem[1]],t.replace(/\s+/g," ").trim().split(" ")),this.splitBtn&&this.splitBtn.element&&this.splitBtn.element.parentElement&&tt([this.splitBtn.element.parentElement],t.replace(/\s+/g," ").trim().split(" ")))},e.prototype.changeRtlProps=function(t){t?tt([this.getWrapper()],"e-rtl"):et([this.getWrapper()],"e-rtl")},e.prototype.changePaletteProps=function(){at(this.container.children[0]),this.container.style.width="",this.createPalette()},e.prototype.changeOpacityProps=function(t){var e=this.getWrapper();t?(et([this.container.parentElement],XE),this.createOpacitySlider(ct(".e-colorpicker-slider",this.container).appendChild(this.createElement("div",{className:"e-opacity-slider"}))),e.classList.contains(KE)||e.classList.contains(GE)||this.appendOpacityValue(ct(".e-input-container",this.container))):(tt([this.container.parentElement],XE),this.opacitySlider.destroy(),lt(this.opacitySlider.element),this.opacitySlider=null,e.classList.contains(KE)||e.classList.contains(GE)||lt(ct("."+sT,this.container).parentElement))},e.prototype.onPropertyChanged=function(t,e){var i=this;if(!y(t.value)){var n=this.roundValue(t.value);if(9===n.length)this.element.value=this.roundValue(n).slice(0,7),(s=this.splitBtn&&ct("."+pT,this.splitBtn.element))&&(s.style.backgroundColor=this.convertToRgbString(this.hexToRgb(t.value)));else if(this.noColor&&"Palette"===this.mode&&""===this.value){var s;(s=this.splitBtn&&ct("."+pT,this.splitBtn.element)).style.backgroundColor=""}else this.value=e.value}if(!this.inline&&y(t.inline)){if(this.splitBtn.setProperties(aE(t,["disabled","enableRtl"])),!this.isPopupOpen())return this.changeCssClassProps(t.cssClass,e.cssClass),void this.changeRtlProps(t.enableRtl)}for(var r=function(n){switch(n){case"inline":t.inline?(o.getWrapper().appendChild(o.container),o.splitBtn.destroy(),at(o.element.nextElementSibling),o.container.children.length||o.createWidget()):(o.destroyOtherComp(),o.unWireEvents(),o.container.innerHTML="",o.createSplitBtn());break;case"cssClass":o.changeCssClassProps(t.cssClass,e.cssClass);var s=t.cssClass.split(" ").concat(e.cssClass.split(" "));s=s.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[]);var r=0;s.forEach(function(t){0!==r||t!==KE&&t!==JE&&t!==cT&&t!==qE&&t!==GE||(ct("."+eT,i.container)&&lt(ct("."+eT,i.container)),i.createInput(),r++)});break;case"enableRtl":o.isPicker()&&(o.hueSlider.enableRtl=t.enableRtl,o.enableOpacity&&(o.opacitySlider.enableRtl=t.enableRtl),o.setInputEleProps()),o.changeRtlProps(t.enableRtl);break;case"disabled":o.changeDisabledProp(t.disabled);break;case"value":o.value!==e.value&&o.changeValueProp(t.value);break;case"showButtons":o.changeShowBtnProps(t.showButtons);break;case"mode":"Picker"===t.mode?o.switchToPicker():o.switchToPalette();break;case"modeSwitcher":o.changeModeSwitcherProp(t.modeSwitcher);break;case"columns":case"presetColors":o.isPicker()||o.changePaletteProps();break;case"noColor":t.noColor?"Palette"!==o.mode||o.modeSwitcher||o.setNoColor():o.changePaletteProps();break;case"enableOpacity":o.changeOpacityProps(t.enableOpacity);break;case"showRecentColors":if(!t.showRecentColors){var a=o.container.querySelector(".e-clr-pal-rec-wpr");a&&at(a)}o.recentColors=[]}},o=this,a=0,l=Object.keys(t);a<l.length;a++){r(l[a])}},e.prototype.focusIn=function(){this.element.parentElement.focus()},HE([jt("#008000ff")],e.prototype,"value",void 0),HE([jt("")],e.prototype,"cssClass",void 0),HE([jt(!1)],e.prototype,"disabled",void 0),HE([jt("Picker")],e.prototype,"mode",void 0),HE([jt(!0)],e.prototype,"modeSwitcher",void 0),HE([jt(null)],e.prototype,"presetColors",void 0),HE([jt(!0)],e.prototype,"showButtons",void 0),HE([jt(10)],e.prototype,"columns",void 0),HE([jt(!1)],e.prototype,"inline",void 0),HE([jt(!1)],e.prototype,"noColor",void 0),HE([jt(!1)],e.prototype,"enablePersistence",void 0),HE([jt(!0)],e.prototype,"enableOpacity",void 0),HE([jt(!1)],e.prototype,"createPopupOnClick",void 0),HE([jt(!1)],e.prototype,"showRecentColors",void 0),HE([Ut()],e.prototype,"select",void 0),HE([Ut()],e.prototype,"change",void 0),HE([Ut()],e.prototype,"beforeTileRender",void 0),HE([Ut()],e.prototype,"beforeOpen",void 0),HE([Ut()],e.prototype,"open",void 0),HE([Ut()],e.prototype,"beforeClose",void 0),HE([Ut()],e.prototype,"beforeModeSwitch",void 0),HE([Ut()],e.prototype,"onModeSwitch",void 0),HE([Ut()],e.prototype,"created",void 0),e=HE([Ft],e)}(_e),fT=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yT=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},vT=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.previousValue=null,n.isHiddenInput=!1,n.isForm=!1,n.inputPreviousValue=null,n.textboxOptions=e,n}return fT(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"floatLabelType":hI.removeFloating(this.textboxWrapper),hI.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":hI.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":hI.setWidth(t.width,this.textboxWrapper.container);break;case"value":var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,hI.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=s,hI.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(y(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&y(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttributesToElement(),this.updateHTMLAttributesToWrapper(),this.checkAttributes(!0),this.multiline&&!y(this.textarea)?hI.validateInputType(this.textboxWrapper.container,this.textarea):hI.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":hI.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),hI.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":hI.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent();break;case"enableRtl":hI.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":hI.setPlaceholder(this.placeholder,this.respectiveElement),hI.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":hI.updateCssClass(t.cssClass,e.cssClass,this.textboxWrapper.container);break;case"locale":this.globalize=new Te(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),hI.setPlaceholder(this.placeholder,this.respectiveElement)}}},e.prototype.getModuleName=function(){return"textbox"},e.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=ut(this.element,"form"),y(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var t=c("ej2_instances",this.element),e=this.multiline?this.createElement("textarea"):this.createElement("input"),i=0;i<this.element.attributes.length;i++){"id"!==(r=this.element.attributes[i].nodeName)&&"class"!==r?(e.setAttribute(r,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML,"name"===r&&this.element.removeAttribute("name")):"class"===r&&e.setAttribute(r,this.element.className.split(" ").filter(function(t){return 0!==t.indexOf("ng-")}).join(" "))}this.element.appendChild(e),this.element=e,d("ej2_instances",t,this.element)}this.updateHTMLAttributesToElement(),this.checkAttributes(!1),!y(this.textboxOptions)&&void 0!==this.textboxOptions.value||""===this.element.value||this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),("text"===this.type||"INPUT"===this.element.tagName&&this.multiline&&this.isReact)&&this.element.setAttribute("role","textbox"),this.globalize=new Te(this.locale);var n={placeholder:this.placeholder};if(this.l10n=new ri("textbox",n,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",b("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",b("textarea"));var s=["placeholder","disabled","value","readonly","type","autocomplete"];for(i=0;i<this.element.attributes.length;i++){var r=this.element.attributes[i].nodeName;this.element.hasAttribute(r)&&ix.indexOf(r)<0&&"id"!==r&&"type"!==r&&"e-mappinguid"!==r&&(this.textarea.setAttribute(r,this.element.attributes[i].nodeValue),s.indexOf(r)<0&&(this.element.removeAttribute(r),i--))}}},e.prototype.checkAttributes=function(t){for(var e=0,i=t?y(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];e<i.length;e++){var n=i[e];if(!y(this.element.getAttribute(n)))switch(n){case"disabled":if(y(this.textboxOptions)||void 0===this.textboxOptions.enabled||t){var s="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:s},!t)}break;case"readonly":if(y(this.textboxOptions)||void 0===this.textboxOptions.readonly||t){var r="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:r},!t)}break;case"placeholder":(y(this.textboxOptions)||void 0===this.textboxOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"autocomplete":if(y(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||t){var o="off"===this.element.autocomplete?"off":"on";this.setProperties({autocomplete:o},!t)}break;case"value":(y(this.textboxOptions)||void 0===this.textboxOptions.value||t)&&""!==this.element.value&&this.setProperties({value:this.element.value},!t);break;case"type":(y(this.textboxOptions)||void 0===this.textboxOptions.type||t)&&this.setProperties({type:this.element.type},!t)}}},e.prototype.render=function(){var t=this.cssClass;y(this.cssClass)||""===this.cssClass||(t=hI.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=hI.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:t,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttributesToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),y(this.value)||(hI.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),y(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:y(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,hI.setWidth(this.width,this.textboxWrapper.container),!y(ut(this.element,"fieldset"))&&ut(this.element,"fieldset").disabled&&(this.enabled=!1),this.element.hasAttribute("aria-labelledby")||this.element.hasAttribute("placeholder")||this.element.hasAttribute("aria-label")||this.element.setAttribute("aria-label","textbox"),this.renderComplete()},e.prototype.updateHTMLAttributesToWrapper=function(){hI.updateHTMLAttributesToWrapper(this.htmlAttributes,this.textboxWrapper.container)},e.prototype.updateHTMLAttributesToElement=function(){hI.updateHTMLAttributesToElement(this.htmlAttributes,this.respectiveElement?this.respectiveElement:this.multiline&&!y(this.textarea)?this.textarea:this.element)},e.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},e.prototype.wireEvents=function(){K.add(this.respectiveElement,"focus",this.focusHandler,this),K.add(this.respectiveElement,"blur",this.focusOutHandler,this),K.add(this.respectiveElement,"keydown",this.keydownHandler,this),K.add(this.respectiveElement,"input",this.inputHandler,this),K.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&K.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!y(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&K.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},e.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var t=this.textboxWrapper.container.querySelector(".e-float-text");y(t)||(t.classList.add("e-label-top"),t.classList.contains("e-label-bottom")&&t.classList.remove("e-label-bottom"))},e.prototype.resetValue=function(t){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=t,null!=t||!this.textboxWrapper.container.classList.contains("e-valid-input")||"Always"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.remove("e-valid-input"),this.isProtectedOnChange=e},e.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!y(this.textboxWrapper)){var t=this.textboxWrapper.container.querySelector(".e-float-text");y(t)||"Always"===this.floatLabelType||(y(this.initialValue)||""===this.initialValue?(t.classList.add("e-label-bottom"),t.classList.remove("e-label-top")):""!==this.initialValue&&(t.classList.add("e-label-top"),t.classList.remove("e-label-bottom")))}},e.prototype.focusHandler=function(t){var e={container:this.textboxWrapper.container,event:t,value:this.value};this.trigger("focus",e)},e.prototype.focusOutHandler=function(t){null===this.previousValue&&null===this.value&&""===this.respectiveElement.value||this.previousValue===this.value||this.raiseChangeEvent(t,!0);var e={container:this.textboxWrapper.container,event:t,value:this.value};this.trigger("blur",e)},e.prototype.keydownHandler=function(t){13!==t.keyCode&&9!==t.keyCode||!(null!==this.previousValue&&""!==this.previousValue||null!==this.value&&""!==this.value||""!==this.respectiveElement.value)||this.setProperties({value:this.respectiveElement.value},!0)},e.prototype.inputHandler=function(t){var e=this,i={event:t,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(e.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",i),t.stopPropagation()},e.prototype.changeHandler=function(t){this.setProperties({value:this.respectiveElement.value},!0),this.previousValue!==this.value&&this.raiseChangeEvent(t,!0),t.stopPropagation()},e.prototype.raiseChangeEvent=function(t,e){var i={event:t,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:e||!1,isInteracted:e||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===G.info.name&&(this.element.value=this.respectiveElement.value)},e.prototype.bindClearEvent=function(){this.showClearButton&&(this.enabled?K.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):K.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},e.prototype.resetInputHandler=function(t){if(t.preventDefault(),!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear")){hI.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var e={event:t,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};if(this.trigger("input",e),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(t,!0),ut(this.element,"form")){var i=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),i.dispatchEvent(n)}}},e.prototype.unWireEvents=function(){K.remove(this.respectiveElement,"focus",this.focusHandler),K.remove(this.respectiveElement,"blur",this.focusOutHandler),K.remove(this.respectiveElement,"keydown",this.keydownHandler),K.remove(this.respectiveElement,"input",this.inputHandler),K.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&K.remove(this.formElement,"reset",this.resetForm),!y(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&K.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},e.prototype.destroy=function(){this.unWireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),"INPUT"===this.element.tagName&&this.multiline&&(at(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),y(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),at(this.textboxWrapper.container)),this.textboxWrapper=null,hI.destroy({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),t.prototype.destroy.call(this)},e.prototype.addIcon=function(t,e){hI.addIcon(t,e,this.textboxWrapper.container,this.respectiveElement,this.createElement)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.addAttributes=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];"disabled"===n?(this.setProperties({enabled:!1},!0),hI.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!0},!0),hI.setReadonly(this.readonly,this.respectiveElement)):"class"===n?this.respectiveElement.classList.add(t[""+n]):"placeholder"===n?(this.setProperties({placeholder:t[""+n]},!0),hI.setPlaceholder(this.placeholder,this.respectiveElement)):("rows"===n&&this.respectiveElement.tagName,this.respectiveElement.setAttribute(n,t[""+n]))}},e.prototype.removeAttributes=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];"disabled"===n?(this.setProperties({enabled:!0},!0),hI.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===n?(this.setProperties({readonly:!1},!0),hI.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===n?(this.setProperties({placeholder:null},!0),hI.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(n)}},e.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&tt([this.textboxWrapper.container],[nx]))},e.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&et([this.textboxWrapper.container],[nx]))},yT([jt("text")],e.prototype,"type",void 0),yT([jt(!1)],e.prototype,"readonly",void 0),yT([jt(null)],e.prototype,"value",void 0),yT([jt("Never")],e.prototype,"floatLabelType",void 0),yT([jt("")],e.prototype,"cssClass",void 0),yT([jt(null)],e.prototype,"placeholder",void 0),yT([jt("on")],e.prototype,"autocomplete",void 0),yT([jt({})],e.prototype,"htmlAttributes",void 0),yT([jt(!1)],e.prototype,"multiline",void 0),yT([jt(!0)],e.prototype,"enabled",void 0),yT([jt(!1)],e.prototype,"showClearButton",void 0),yT([jt(!1)],e.prototype,"enablePersistence",void 0),yT([jt(null)],e.prototype,"width",void 0),yT([Ut()],e.prototype,"created",void 0),yT([Ut()],e.prototype,"destroyed",void 0),yT([Ut()],e.prototype,"change",void 0),yT([Ut()],e.prototype,"blur",void 0),yT([Ut()],e.prototype,"focus",void 0),yT([Ut()],e.prototype,"input",void 0),e=yT([Ft],e)}(_e),bT=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),CT=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},IT="e-auto-width",MT="e-resize-x",ST="e-resize-y",xT="e-resize-xy",wT="e-resize-none",DT=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.previousValue=null,n.isForm=!1,n.inputPreviousValue=null,n.textareaOptions=e,n}return bT(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"floatLabelType":hI.removeFloating(this.textareaWrapper),hI.addFloating(this.element,this.floatLabelType,this.placeholder),"Never"===this.floatLabelType&&this.element.removeAttribute("aria-labelledby");break;case"enabled":hI.setEnabled(this.enabled,this.element,this.floatLabelType,this.textareaWrapper.container),this.bindClearEvent(),this.enabled||"None"===this.resizeMode?this.element.classList.add(this.getCurrentResizeClass(this.resizeMode)):(this.element.classList.remove(this.getCurrentResizeClass(this.resizeMode)),this.element.classList.add(wT));break;case"width":"None"!==this.resizeMode&&"Vertical"!==this.resizeMode?(this.setElementWidth(t.width),this.textareaWrapper.container.classList.add(IT)):(this.textareaWrapper.container.classList.contains(IT)&&this.textareaWrapper.container.classList.remove(IT),hI.setWidth(t.width,this.textareaWrapper.container));break;case"value":var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,hI.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=s,hI.setValue(this.value,this.element,this.floatLabelType,this.showClearButton),this.inputPreviousValue=this.element.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(y(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&y(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttributesToElement(),this.updateHTMLAttributesToWrapper(),this.checkAttributes(!0),hI.validateInputType(this.textareaWrapper.container,this.element);break;case"readonly":hI.setReadonly(this.readonly,this.element),this.readonly?this.element.setAttribute("aria-readonly","true"):this.element.removeAttribute("aria-readonly");break;case"showClearButton":hI.setClearButton(this.showClearButton,this.element,this.textareaWrapper),this.bindClearEvent();break;case"enableRtl":hI.setEnableRtl(this.enableRtl,[this.textareaWrapper.container]);break;case"placeholder":hI.setPlaceholder(this.placeholder,this.element),hI.calculateWidth(this.element,this.textareaWrapper.container);break;case"cssClass":hI.updateCssClass(t.cssClass,e.cssClass,this.textareaWrapper.container);break;case"locale":this.globalize=new Te(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),hI.setPlaceholder(this.placeholder,this.element);break;case"rows":this.rows&&this.element.setAttribute("rows",this.rows.toString());break;case"cols":this.cols&&(this.element.setAttribute("cols",this.cols.toString()),null==this.width&&this.textareaWrapper.container.classList.add(IT));break;case"maxLength":this.maxLength&&this.element.setAttribute("maxlength",this.maxLength.toString());break;case"resizeMode":if(this.enabled){if(this.element.classList.contains(this.getCurrentResizeClass(e.resizeMode))&&this.element.classList.remove(this.getCurrentResizeClass(e.resizeMode)),this.element.classList.add(this.getCurrentResizeClass(this.resizeMode)),!this.element.style.width||"None"!==this.resizeMode&&"Vertical"!==this.resizeMode){var r=this.element.offsetWidth;this.element.style.width=r+"px",this.textareaWrapper.container.style.width&&(this.textareaWrapper.container.style.width="")}else hI.setWidth(this.element.style.width,this.textareaWrapper.container);this.setWrapperWidth()}}}},e.prototype.preRender=function(){if(this.formElement=ut(this.element,"form"),y(this.formElement)||(this.isForm=!0),"EJS-TEXTAREA"===this.element.tagName||"EJS-SMARTTEXTAREA"===this.element.tagName){for(var t=c("ej2_instances",this.element),e=this.createElement("textarea"),i=0;i<this.element.attributes.length;i++){var n=this.element.attributes[i].nodeName;"id"!==n&&"class"!==n?(e.setAttribute(n,this.element.attributes[i].nodeValue),e.innerHTML=this.element.innerHTML,"name"===n&&this.element.removeAttribute("name")):"class"===n&&e.setAttribute(n,this.element.className.split(" ").filter(function(t){return 0!==t.indexOf("ng-")}).join(" "))}this.element.appendChild(e),this.element=e,d("ej2_instances",t,this.element)}this.updateHTMLAttributesToElement(),this.checkAttributes(!1),!y(this.textareaOptions)&&void 0!==this.textareaOptions.value||""===this.element.value||this.setProperties({value:this.element.value},!0),this.globalize=new Te(this.locale);var s={placeholder:this.placeholder};this.l10n=new ri("textarea",s,this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",b("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),this.rows&&this.element.setAttribute("rows",this.rows.toString()),this.cols&&this.element.setAttribute("cols",this.cols.toString()),this.maxLength&&this.element.setAttribute("maxlength",this.maxLength.toString()),!this.element.style.resize&&this.enabled&&this.element.classList.add(this.getCurrentResizeClass(this.resizeMode)),this.enabled&&this.element.setAttribute("aria-multiline","true")},e.prototype.render=function(){var t=this.cssClass;y(this.cssClass)||""===this.cssClass||(t=hI.getInputValidClassList(this.cssClass)),this.textareaWrapper=hI.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:t,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttributesToWrapper(),this.wireEvents(),y(this.value)||hI.setValue(this.value,this.element,this.floatLabelType,this.showClearButton),y(this.value)||(this.initialValue=this.value,this.isAngular||this.element.setAttribute("value",this.initialValue)),this.previousValue=this.value,this.inputPreviousValue=this.value,this.element.defaultValue=this.element.value,hI.setWidth(this.width,this.textareaWrapper.container),this.setWrapperWidth(),this.renderComplete()},e.prototype.getModuleName=function(){return"textarea"},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.checkAttributes=function(t){for(var e=0,i=t?y(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly"];e<i.length;e++){var n=i[e];if(!y(this.element.getAttribute(n)))switch(n){case"disabled":if(y(this.textareaOptions)||void 0===this.textareaOptions.enabled||t){var s="disabled"!==this.element.getAttribute(n)&&""!==this.element.getAttribute(n)&&"true"!==this.element.getAttribute(n);this.setProperties({enabled:s},!t)}break;case"readonly":if(y(this.textareaOptions)||void 0===this.textareaOptions.readonly||t){var r="readonly"===this.element.getAttribute(n)||""===this.element.getAttribute(n)||"true"===this.element.getAttribute(n);this.setProperties({readonly:r},!t)}break;case"placeholder":(y(this.textareaOptions)||void 0===this.textareaOptions.placeholder||t)&&this.setProperties({placeholder:this.element.placeholder},!t);break;case"value":(y(this.textareaOptions)||void 0===this.textareaOptions.value||t)&&""!==this.element.value&&this.setProperties({value:this.element.value},!t)}}},e.prototype.wireEvents=function(){K.add(this.element,"focus",this.focusHandler,this),K.add(this.element,"blur",this.focusOutHandler,this),K.add(this.element,"keydown",this.keydownHandler,this),K.add(this.element,"input",this.inputHandler,this),K.add(this.element,"change",this.changeHandler,this),this.isForm&&K.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent()},e.prototype.unWireEvents=function(){K.remove(this.element,"focus",this.focusHandler),K.remove(this.element,"blur",this.focusOutHandler),K.remove(this.element,"keydown",this.keydownHandler),K.remove(this.element,"input",this.inputHandler),K.remove(this.element,"change",this.changeHandler),this.isForm&&K.remove(this.formElement,"reset",this.resetForm)},e.prototype.destroy=function(){this.unWireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),this.element.value=this.element.defaultValue,this.element.classList.remove("e-input",MT,ST,xT,wT),this.textareaWrapper.container.style.width.includes("%")&&K.remove(this.element,"mousemove",this.onMouseMove),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby","aria-multiline"]),y(this.textareaWrapper)||(this.textareaWrapper.container.insertAdjacentElement("afterend",this.element),at(this.textareaWrapper.container)),this.textareaWrapper=null,hI.destroy({element:this.element,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),this.formElement=null,t.prototype.destroy.call(this)},e.prototype.focusHandler=function(t){var e={container:this.textareaWrapper.container,event:t,value:this.value};this.trigger("focus",e)},e.prototype.focusOutHandler=function(t){null===this.previousValue&&null===this.value||this.previousValue===this.value||this.raiseChangeEvent(t,!0);var e={container:this.textareaWrapper.container,event:t,value:this.value};this.trigger("blur",e)},e.prototype.keydownHandler=function(t){13!==t.keyCode&&9!==t.keyCode||!(null!==this.previousValue&&""!==this.previousValue||null!==this.value&&""!==this.value||""!==this.element.value)||this.setProperties({value:this.element.value},!0)},e.prototype.inputHandler=function(t){var e=this,i={event:t,value:this.element.value,previousValue:this.inputPreviousValue,container:this.textareaWrapper.container};this.inputPreviousValue=this.element.value,this.isAngular&&(e.localChange({value:this.element.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",i),t.stopPropagation()},e.prototype.changeHandler=function(t){this.setProperties({value:this.element.value},!0),this.previousValue!==this.value&&this.raiseChangeEvent(t,!0),t.stopPropagation()},e.prototype.raiseChangeEvent=function(t,e){var i={event:t,value:this.value,previousValue:this.previousValue,container:this.textareaWrapper.container,isInteraction:e||!1,isInteracted:e||!1};this.preventChange=!1,this.trigger("change",i),this.previousValue=this.value},e.prototype.updateHTMLAttributesToWrapper=function(){hI.updateHTMLAttributesToWrapper(this.htmlAttributes,this.textareaWrapper.container)},e.prototype.updateHTMLAttributesToElement=function(){hI.updateHTMLAttributesToElement(this.htmlAttributes,this.element)},e.prototype.bindClearEvent=function(){this.showClearButton&&(this.enabled?K.add(this.textareaWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):K.remove(this.textareaWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},e.prototype.resetInputHandler=function(t){t.preventDefault(),this.textareaWrapper.clearButton.classList.contains("e-clear-icon-hide")&&!this.textareaWrapper.container.classList.contains("e-static-clear")||(hI.setValue("",this.element,this.floatLabelType,this.showClearButton),this.setProperties({value:this.element.value},!0));var e={event:t,value:this.element.value,previousValue:this.inputPreviousValue,container:this.textareaWrapper.container};if(this.trigger("input",e),this.inputPreviousValue=this.element.value,this.raiseChangeEvent(t,!0),ut(this.element,"form")){var i=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),i.dispatchEvent(n)}},e.prototype.addAttributes=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];"disabled"===n?(this.setProperties({enabled:!1},!0),hI.setEnabled(this.enabled,this.element,this.floatLabelType,this.textareaWrapper.container)):"readonly"===n?(this.setProperties({readonly:!0},!0),hI.setReadonly(this.readonly,this.element)):"class"===n?this.element.classList.add(t[""+n]):"placeholder"===n?(this.setProperties({placeholder:t[""+n]},!0),hI.setPlaceholder(this.placeholder,this.element)):this.element.setAttribute(n,t[""+n])}},e.prototype.removeAttributes=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];"disabled"===n?(this.setProperties({enabled:!0},!0),hI.setEnabled(this.enabled,this.element,this.floatLabelType,this.textareaWrapper.container)):"readonly"===n?(this.setProperties({readonly:!1},!0),hI.setReadonly(this.readonly,this.element)):"placeholder"===n?(this.setProperties({placeholder:null},!0),hI.setPlaceholder(this.placeholder,this.element)):this.element.removeAttribute(n)}},e.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),(this.textareaWrapper.container.classList.contains("e-input-group")||this.textareaWrapper.container.classList.contains("e-outline")||this.textareaWrapper.container.classList.contains("e-filled"))&&tt([this.textareaWrapper.container],[nx]))},e.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),(this.textareaWrapper.container.classList.contains("e-input-group")||this.textareaWrapper.container.classList.contains("e-outline")||this.textareaWrapper.container.classList.contains("e-filled"))&&et([this.textareaWrapper.container],[nx]))},e.prototype.setWrapperWidth=function(){this.enabled&&("None"!==this.resizeMode&&"Vertical"!==this.resizeMode||this.cols||this.element.getAttribute("cols"))?("None"===this.resizeMode||"Vertical"===this.resizeMode||this.textareaWrapper.container.style.width.includes("%")||this.setElementWidth(this.textareaWrapper.container.style.width),this.textareaWrapper.container.style.width.includes("%")||(this.textareaWrapper.container.classList.add(IT),this.textareaWrapper.container.style.width=""),this.textareaWrapper.container.style.width.includes("%")&&K.add(this.element,"mousemove",this.onMouseMove,this)):this.textareaWrapper.container.classList.contains(IT)&&this.textareaWrapper.container.classList.remove(IT)},e.prototype.onMouseMove=function(){var t=this;if("auto"!==this.textareaWrapper.container.style.width){var e=this.element.style.width;setTimeout(function(){var i=t.element.style.width;e!==i&&(t.textareaWrapper.container.style.width="auto")},5)}},e.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!y(this.textareaWrapper)){var t=this.textareaWrapper.container.querySelector(".e-float-text");y(t)||"Always"===this.floatLabelType||(y(this.initialValue)||""===this.initialValue?(t.classList.add("e-label-bottom"),t.classList.remove("e-label-top")):""!==this.initialValue&&(t.classList.add("e-label-top"),t.classList.remove("e-label-bottom")))}},e.prototype.resetValue=function(t){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=t,null!=t||!this.textareaWrapper.container.classList.contains("e-valid-input")||"Always"===this.floatLabelType&&this.textareaWrapper.container.classList.contains("e-outline")||this.textareaWrapper.container.classList.remove("e-valid-input"),this.isProtectedOnChange=e},e.prototype.setElementWidth=function(t){"number"==typeof t?this.element.style.width=S(t):"string"==typeof t&&(this.element.style.width=t.match(/px|%|em/)?t:S(t))},e.prototype.getCurrentResizeClass=function(t){return"None"===t?wT:"Both"===t?xT:"Horizontal"===t?MT:ST},CT([jt(!1)],e.prototype,"readonly",void 0),CT([jt(null)],e.prototype,"value",void 0),CT([jt("Never")],e.prototype,"floatLabelType",void 0),CT([jt("")],e.prototype,"cssClass",void 0),CT([jt(null)],e.prototype,"placeholder",void 0),CT([jt({})],e.prototype,"htmlAttributes",void 0),CT([jt(!0)],e.prototype,"enabled",void 0),CT([jt(!1)],e.prototype,"showClearButton",void 0),CT([jt(!1)],e.prototype,"enablePersistence",void 0),CT([jt(null)],e.prototype,"width",void 0),CT([jt("Both")],e.prototype,"resizeMode",void 0),CT([jt(null)],e.prototype,"maxLength",void 0),CT([jt(null)],e.prototype,"cols",void 0),CT([jt(null)],e.prototype,"rows",void 0),CT([Ut()],e.prototype,"created",void 0),CT([Ut()],e.prototype,"destroyed",void 0),CT([Ut()],e.prototype,"change",void 0),CT([Ut()],e.prototype,"blur",void 0),CT([Ut()],e.prototype,"focus",void 0),CT([Ut()],e.prototype,"input",void 0),e=CT([Ft],e)}(_e),ET=function(){function t(){}return t.createStyledDiv=function(t,e){var i=document.createElement("div"),n={position:"absolute",left:-9999,top:0,zIndex:-2e3};this.properties.forEach(function(e){n[""+e]=getComputedStyle(t)[e]}),Object.keys(n).forEach(function(t){i.style[""+t]=n[""+t]});var s=t.offsetWidth-t.clientWidth;return i.style.width=t.clientWidth+s+"px",i.innerHTML=e,t&&t.parentNode&&t.parentNode.insertBefore(i,t.nextSibling),i},t.createCaretMarker=function(t,e){var i=this.createStyledDiv(t,e),n=i.ownerDocument.getElementById("caret-position-marker"),s={left:n.offsetLeft,top:n.offsetTop,height:n.offsetHeight};return i&&i.parentNode&&i.parentNode.removeChild(i),s},t.escapeHtml=function(t){return t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>")},t.getCaretPosition=function(t){var e=t.selectionStart||0,i=t.value.slice(0,e),n=t.value.slice(e),s='<span style="position: relative; display: inline;">'+this.escapeHtml(i)+"</span>";s+='<span id="caret-position-marker" style="position: relative; display: inline;">|</span>',s+='<span style="position: relative; display: inline;">'+this.escapeHtml(n)+"</span>";var r=this.createCaretMarker(t,s);return r.pos=e,r},t.adjustScrollToCaretPosition=function(t){var e=this.getCaretPosition(t),i=parseFloat(window.getComputedStyle(t).lineHeight);e.top>t.clientHeight+t.scrollTop-i&&(t.scrollTop=e.top-t.clientHeight+i)},t.getTextAreaPosition=function(t){var e=window.getComputedStyle(t),i=this.getCaretPosition(t);return{top:i.top+parseFloat(e.borderTopWidth)+t.offsetTop-t.scrollTop,left:i.left+parseFloat(e.borderLeftWidth)+t.offsetLeft-t.scrollLeft-.25,height:i.height,elemStyle:e}},t.insertCharacter=function(t,e){var i=t.selectionStart,n=t.selectionEnd;t.value=t.value.substring(0,i)+e+t.value.substring(n),i+=e.length,t.setSelectionRange(i,i)},t.properties=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap","width"],t}(),TT=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),AT=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},NT=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}l((n=n.apply(t,e||[])).next())})},LT=function(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};!function(t){t.System="system",t.User="user",t.Assistant="assistant"}(EE||(EE={}));var OT,kT,zT=function(t){function e(e,i){return t.call(this,e,i)||this}return TT(e,t),e.prototype.render=function(){if(t.prototype.render.call(this),this.element instanceof HTMLTextAreaElement){this.textArea=this.element;var e=$("smart-textarea");if(e.classList.add("e-smart-textarea"),this.textArea.after(e),"None"!==this.showSuggestionOnPopup){var i="Enable"===this.showSuggestionOnPopup?"false":"true";this.textArea.setAttribute("data-inline-suggestions",i)}this.suggestionDisplay=this.shouldShowInlineSuggestions(this.textArea)?new PT(e,this.textArea):new jT(e,this.textArea)}},e.prototype.wireEvents=function(){var e=this;t.prototype.wireEvents.call(this),K.add(this.element,"keyup",this.handleKeyUp,this),K.add(this.element,"keydown",this.handleKeyDown,this),K.add(this.element,"mousedown",this.removeExistingOrPendingSuggestion,this),K.add(this.element,"focusout",this.removeExistingOrPendingSuggestion,this),this.element.addEventListener("scroll",function(){return e.suggestionDisplay.reject()},{passive:!0})},e.prototype.unWireEvents=function(){var e=this;t.prototype.unWireEvents.call(this),K.remove(this.element,"keyup",this.handleKeyUp),K.remove(this.element,"keydown",this.handleKeyDown),K.remove(this.element,"mousedown",this.removeExistingOrPendingSuggestion),K.remove(this.element,"focusout",this.removeExistingOrPendingSuggestion),this.element.removeEventListener("scroll",function(){return e.suggestionDisplay.reject()})},e.prototype.keydownHandler=function(){},e.prototype.shouldShowInlineSuggestions=function(t){var e=t.getAttribute("data-inline-suggestions");return e?"true"===e.toLowerCase():!("ontouchstart"in window)},e.prototype.handleKeyDown=function(t){switch(t.key){case"Tab":this.suggestionDisplay.isShowing()&&(this.suggestionDisplay.accept(),t.preventDefault());break;case"Alt":case"Control":case"Shift":case"Command":break;default:this.suggestionDisplay.isShowing()&&this.suggestionDisplay.currentSuggestion.startsWith(t.key)?(ET.insertCharacter(this.textArea,t.key),t.preventDefault(),this.suggestionDisplay.show(this.suggestionDisplay.currentSuggestion.substring(t.key.length)),ET.adjustScrollToCaretPosition(this.textArea)):this.removeExistingOrPendingSuggestion()}},e.prototype.handleKeyUp=function(){var t=this;this.suggestionDisplay.isShowing()||(clearTimeout(this.typingDebounceTimeout),this.typingDebounceTimeout=setTimeout(function(){return t.handleTypingPaused()},350))},e.prototype.handleTypingPaused=function(){return NT(this,void 0,void 0,function(){return LT(this,function(t){switch(t.label){case 0:return document.activeElement!==this.textArea?[2]:this.textArea.selectionStart!==this.textArea.selectionEnd||this.textArea.selectionStart!==this.textArea.value.length&&"\n"!==this.textArea.value[this.textArea.selectionStart]?[3,2]:[4,this.requestSuggestionAsync()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.removeExistingOrPendingSuggestion=function(){clearTimeout(this.typingDebounceTimeout),this.pendingSuggestionAbort&&(this.pendingSuggestionAbort.abort(),this.pendingSuggestionAbort=null),this.suggestionDisplay.reject()},e.prototype.createSuggestionPrompt=function(t,e){var i="Predict what text the user in the given ROLE would insert at the cursor position indicated by ^^^.\nOnly give predictions for which you have an EXTREMELY high confidence that the user would insert that EXACT text.\nDo not make up new information. If you are not sure, just reply with NO_PREDICTION.\n\nRULES:\n1. Reply with OK:, then in square brackets the predicted text, then END_INSERTION, and no other output.\n2. When a specific value or quantity cannot be inferred and would need to be provided, use the word NEED_INFO.\n3. If there is not enough information to predict any words that the user would type next, just reply with the word NO_PREDICTION.\n4. NEVER invent new information. If you can not be sure what the user is about to type, ALWAYS stop the prediction with END_INSERTION.",n=this.UserPhrases;if(n&&n.length>0){i+="\nAlways try to use variations on the following phrases as part of the predictions:\n";for(var s=0,r=n;s<r.length;s++){i+="- "+r[s]+"\n"}}return{messages:[{role:EE.System,content:i},{role:EE.User,content:"ROLE: Family member sending a text\nUSER_TEXT: Hey, it is a nice day - the weather is ^^^"},{role:EE.Assistant,content:"OK:[great!]END_INSERTION"},{role:EE.User,content:"ROLE: Customer service assistant\nUSER_TEXT: You can find more information on^^^\n\nAlternatively, phone us."},{role:EE.Assistant,content:"OK:[ our website at NEED_INFO]END_INSERTION"},{role:EE.User,content:"ROLE: Casual\nUSER_TEXT: Oh I see!\n\nWell sure thing, we can"},{role:EE.Assistant,content:"OK:[ help you out with that!]END_INSERTION"},{role:EE.User,content:"ROLE: Storyteller\nUSER_TEXT: Sir Digby Chicken Caesar, also know^^^"},{role:EE.Assistant,content:"OK:[n as NEED_INFO]END_INSERTION"},{role:EE.User,content:"ROLE: Customer support agent\nUSER_TEXT: Goodbye for now.^^^"},{role:EE.Assistant,content:"NO_PREDICTION END_INSERTION"},{role:EE.User,content:"ROLE: Pirate\nUSER_TEXT: Have you found^^^"},{role:EE.Assistant,content:"OK:[ the treasure, me hearties?]END_INSERTION"},{role:EE.User,content:"ROLE: "+this.userRole+"\nUSER_TEXT: "+t+"^^^"+e}],temperature:0,maxTokens:400,stopSequences:["END_INSERTION","NEED_INFO"],frequencyPenalty:0,presencePenalty:0}},e.prototype.requestSuggestionAsync=function(){return NT(this,void 0,void 0,function(){var t,e,i,n,s;return LT(this,function(r){switch(r.label){case 0:return this.pendingSuggestionAbort?(this.pendingSuggestionAbort.abort(),[2]):(this.pendingSuggestionAbort=new AbortController,t={textAreaValue:this.textArea.value,cursorPosition:this.textArea.selectionStart},e={textBefore:t.textAreaValue.substring(0,t.cursorPosition),textAfter:t.textAreaValue.substring(t.cursorPosition)},i=this.createSuggestionPrompt(e.textBefore,e.textAfter),"function"!=typeof this.aiSuggestionHandler?[3,2]:[4,this.aiSuggestionHandler(i)]);case 1:s=r.sent(),n=this.validateSuggestion(s,e.textBefore),r.label=2;case 2:return n&&t.textAreaValue===this.textArea.value&&t.cursorPosition===this.textArea.selectionStart&&(n.endsWith(" ")||(n+=" "),this.suggestionDisplay.show(n)),[2]}})})},e.prototype.validateSuggestion=function(t,e){var i;if("string"!=typeof t||t.length<=5||0!==t.indexOf("OK:["))return"";var n=this.indexOfAny(t,[".","?","!"]);return n>0&&t.length>n+1&&" "===t[n+1]&&(t=t.substring(0,n+1)),i=t.substring(4).replace(/[\]\s]+$/,""),e.length>0&&" "===e[e.length-1]&&(i=i.replace(/^\s+/,"")),i},e.prototype.indexOfAny=function(t,e){for(var i=0;i<t.length;i++)if(-1!==e.indexOf(t[""+i]))return i;return-1},e.prototype.getModuleName=function(){return"smarttextarea"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.textArea=null,this.suggestionDisplay=null,this.typingDebounceTimeout=null},AT([jt("")],e.prototype,"userRole",void 0),AT([jt([])],e.prototype,"UserPhrases",void 0),AT([jt()],e.prototype,"aiSuggestionHandler",void 0),AT([jt("None")],e.prototype,"showSuggestionOnPopup",void 0),e}(DT),PT=function(){function t(t,e){this.owner=t,this.textArea=e,this.latestSuggestionText="",this.suggestionStartPos=null,this.suggestionEndPos=null,this.virtualCaret=null,this.originalValueProperty=this.getOriginalValueProperty(e,"value")}return Object.defineProperty(t.prototype,"value",{get:function(){var t=this.originalValueProperty.get.call(this.textArea);return this.isShowing()?t.substring(0,this.suggestionStartPos)+t.substring(this.suggestionEndPos):t},set:function(t){this.originalValueProperty.set.call(this.textArea,t)},enumerable:!0,configurable:!0}),t.prototype.getOriginalValueProperty=function(t,e){for(;t;){var i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Object.getPrototypeOf(t)}throw new Error("Property "+e+" not found on object or its prototype chain")},Object.defineProperty(t.prototype,"valueIncludingSuggestion",{get:function(){return this.originalValueProperty.get.call(this.textArea)},set:function(t){this.originalValueProperty.set.call(this.textArea,t)},enumerable:!0,configurable:!0}),t.prototype.isShowing=function(){return null!==this.suggestionStartPos},t.prototype.show=function(t){this.latestSuggestionText=t,this.suggestionStartPos=this.textArea.selectionStart,this.suggestionEndPos=this.suggestionStartPos+t.length,this.textArea.setAttribute("data-suggestion-visible",""),this.valueIncludingSuggestion=this.valueIncludingSuggestion.substring(0,this.suggestionStartPos)+t+this.valueIncludingSuggestion.substring(this.suggestionStartPos),this.textArea.setSelectionRange(this.suggestionStartPos,this.suggestionEndPos),this.virtualCaret||(this.virtualCaret=new BT(this.owner,this.textArea)),this.virtualCaret.show()},Object.defineProperty(t.prototype,"currentSuggestion",{get:function(){return this.latestSuggestionText},enumerable:!0,configurable:!0}),t.prototype.accept=function(){this.textArea.setSelectionRange(this.suggestionEndPos,this.suggestionEndPos),this.suggestionStartPos=null,this.suggestionEndPos=null,this.virtualCaret&&this.virtualCaret.hide(),this.textArea.removeAttribute("data-suggestion-visible"),ET.adjustScrollToCaretPosition(this.textArea)},t.prototype.reject=function(){if(this.isShowing()){var t=this.textArea.selectionStart,e=this.textArea.selectionEnd;this.valueIncludingSuggestion=this.valueIncludingSuggestion.substring(0,this.suggestionStartPos)+this.valueIncludingSuggestion.substring(this.suggestionEndPos),this.suggestionStartPos===t&&this.suggestionEndPos===e&&this.textArea.setSelectionRange(t,t),this.suggestionStartPos=null,this.suggestionEndPos=null,this.textArea.removeAttribute("data-suggestion-visible"),this.virtualCaret&&this.virtualCaret.hide()}},t}(),jT=function(){function t(t,e){var i=this;this.latestSuggestionText="",this.showing=!1,this.textArea=e,this.suggestionElement=document.createElement("div"),this.suggestionElement.classList.add("smart-textarea-suggestion-overlay"),this.suggestionElement.addEventListener("mousedown",function(t){return i.handleSuggestionClicked(t)}),this.suggestionElement.addEventListener("touchend",function(t){return i.handleSuggestionClicked(t)}),this.suggestionPrefixElement=document.createElement("span"),this.suggestionTextElement=document.createElement("span"),this.suggestionElement.appendChild(this.suggestionPrefixElement),this.suggestionElement.appendChild(this.suggestionTextElement),this.suggestionPrefixElement.style.opacity="0.3";var n=window.getComputedStyle(this.textArea);this.suggestionElement.style.font=n.font,this.suggestionElement.style.marginTop=1.4*parseFloat(n.fontSize)+"px",t.appendChild(this.suggestionElement)}return Object.defineProperty(t.prototype,"currentSuggestion",{get:function(){return this.latestSuggestionText},enumerable:!0,configurable:!0}),t.prototype.show=function(t){this.latestSuggestionText=t,this.suggestionPrefixElement.textContent=" "!==t[0]?this.getPrefixText(this.textArea,20):"",this.suggestionTextElement.textContent=t;var e=ET.getTextAreaPosition(this.textArea),i=this.suggestionElement.style;i.minWidth=null,this.suggestionElement.classList.add("smart-textarea-suggestion-overlay-visible"),i.zIndex=this.textArea.style.zIndex+1,i.top=e.top+"px";var n=e.left-this.suggestionPrefixElement.offsetWidth;(!i.left||Math.abs(parseFloat(i.left)-n)>10)&&(i.left=n+"px"),this.showing=!0;var s=window.getComputedStyle(this.suggestionElement),r=parseFloat(s.lineHeight),o=parseFloat(s.paddingTop),a=parseFloat(s.paddingBottom),l=Math.round((this.suggestionElement.offsetHeight-o-a)/r);if(l>2){var h=this.suggestionElement.offsetWidth;i.minWidth="calc(min(70vw, "+l*h/2+"px))"}var c=this.suggestionElement.getBoundingClientRect();c.right>document.body.clientWidth-20&&(i.left="calc("+(parseFloat(i.left)-(c.right-document.body.clientWidth))+"px - 2rem)")},t.prototype.accept=function(){this.showing&&(ET.insertCharacter(this.textArea,this.currentSuggestion),ET.adjustScrollToCaretPosition(this.textArea),this.hide())},t.prototype.reject=function(){this.hide()},t.prototype.hide=function(){this.showing&&(this.showing=!1,this.suggestionElement.classList.remove("smart-textarea-suggestion-overlay-visible"))},t.prototype.isShowing=function(){return this.showing},t.prototype.handleSuggestionClicked=function(t){t.preventDefault(),t.stopImmediatePropagation(),this.accept()},t.prototype.getPrefixText=function(t,e){for(var i=t.value,n=t.selectionStart,s=n-1;s>n-e;s--)if(s<0||/\s/.test(i[""+s]))return i.substring(s+1,n);return""},t}(),BT=function(){function t(t,e){this.textArea=e,this.caretDiv=document.createElement("div"),this.caretDiv.classList.add("smart-textarea-caret"),t.appendChild(this.caretDiv)}return t.prototype.show=function(){var t=ET.getTextAreaPosition(this.textArea),e=this.caretDiv.style;e.display="block",e.top=t.top+"px",e.left=t.left+"px",e.height=t.height+"px",e.zIndex=this.textArea.style.zIndex,e.backgroundColor=t.elemStyle.caretColor},t.prototype.hide=function(){this.caretDiv.style.display="none"},t}(),HT=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),RT=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minDistance=5,e.previous=0,e.interval=30,e.timeout=null,e.isSignatureEmpty=!0,e.backgroundLoaded=null,e.isBlazor=!1,e.isResponsive=!1,e.signPointsColl=[],e.signRatioPointsColl=[],e.canRedraw=!0,e}return HT(e,t),e.prototype.initialize=function(t,e){this.clearArray=[],this.element=t,this.canvasContext=this.element.getContext("2d"),this.canvasContext.canvas.tabIndex=-1,e&&(this.dotnetRef=e,this.isBlazor=!0,this.signatureValue&&this.loadPersistedSignature()),this.setHTMLProperties(),y(this.signatureValue)&&this.updateSnapCollection(!0),this.wireEvents(),this.isBlazor||this.trigger("created",null)},e.prototype.wireEvents=function(){!y(this.pointColl)||this.isReadOnly||this.disabled?this.pointColl&&(K.add(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler,this),K.add(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler,this),K.add(document,"mouseup",this.mouseUpHandler,this)):(K.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this),K.add(this.canvasContext.canvas,"keydown",this.keyboardHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this)))},e.prototype.unwireEvents=function(t){"mouseup"===t||"touchend"===t?(this.canvasContext&&(K.remove(this.canvasContext.canvas,"mousemove touchmove",this.mouseMoveHandler),K.remove(this.canvasContext.canvas,"mouseup touchend",this.mouseUpHandler)),K.remove(document,"mouseup",this.mouseUpHandler)):(this.canvasContext&&(K.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler),K.remove(this.canvasContext.canvas,"keydown",this.keyboardHandler)),window.removeEventListener("resize",this.resizeHandler))},e.prototype.setHTMLProperties=function(){150===this.element.height&&300===this.element.width&&0!==this.element.offsetHeight&&0!==this.element.offsetWidth?(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth,this.isResponsive=!0):this.element.height===this.element.offsetHeight-1&&this.element.width===this.element.offsetWidth-1||0===this.element.offsetHeight||0===this.element.offsetWidth||(this.element.height=this.element.offsetHeight,this.element.width=this.element.offsetWidth),this.canvasContext.fillStyle=this.strokeColor,this.tempCanvas=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-temp"}),this.tempContext=this.tempCanvas.getContext("2d"),this.tempCanvas.width=this.element.width,this.tempCanvas.height=this.element.height,this.backgroundImage?(this.canvasContext.canvas.style.backgroundImage="url("+this.backgroundImage+")",this.canvasContext.canvas.style.backgroundRepeat="no-repeat",this.saveWithBackground&&this.setBackgroundImage(this.backgroundImage,"temp")):this.backgroundColor&&(this.canvasContext.canvas.style.backgroundColor=this.backgroundColor)},e.prototype.mouseDownHandler=function(t){1!==t.buttons&&2!==t.buttons&&"touchstart"!==t.type||("touchstart"===t.type&&(t.preventDefault(),t.stopPropagation()),this.beginStroke(t),this.wireEvents())},e.prototype.mouseMoveHandler=function(t){1!==t.buttons&&2!==t.buttons&&"touchmove"!==t.type||("touchmove"===t.type&&(t.preventDefault(),t.stopPropagation()),this.interval?this.updateStrokeWithThrottle(t):this.updateStroke(t))},e.prototype.mouseUpHandler=function(t){"touchstart"===t.type&&(t.preventDefault(),t.stopPropagation()),this.endDraw(),this.updateSnapCollection(),this.unwireEvents(t.type),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","mouseUp"):this.trigger("change",{actionName:"strokeUpdate"}),this.signatureValue=this.snapColl[this.incStep];for(var e=0;e<this.signPointsColl.length;e++)this.signRatioPointsColl.push({x:this.signPointsColl[e].x/this.canvasContext.canvas.width,y:this.signPointsColl[e].y/this.canvasContext.canvas.height});this.signPointsColl=[]},e.prototype.keyboardHandler=function(t){var e=this,i={fileName:"Signature",type:"Png",cancel:!1};switch(t.key){case"Delete":this.clear();break;case t.ctrlKey&&"s":this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","beforeSave"):this.trigger("beforeSave",i,function(t){i.cancel||e.save(t.type,t.fileName)}),t.preventDefault(),t.stopImmediatePropagation();break;case t.ctrlKey&&"z":this.undo();break;case t.ctrlKey&&"y":this.redo()}},e.prototype.resizeHandler=function(){var t=this;if(this.isResponsive&&this.canRedraw&&this.canvasContext&&this.element){this.canvasContext.canvas.width=this.element.offsetWidth,this.canvasContext.canvas.height=this.element.offsetHeight,this.canvasContext.scale(1,1),this.canvasContext.fillStyle=this.strokeColor;for(var e=(this.minStrokeWidth+this.maxStrokeWidth)/2,i=0;i<this.signRatioPointsColl.length;i++)this.arcDraw(this.signRatioPointsColl[i].x*this.canvasContext.canvas.width,this.signRatioPointsColl[i].y*this.canvasContext.canvas.height,e);this.signPointsColl=[],this.canvasContext.closePath(),this.canvasContext.fill()}else if(this.canvasContext&&this.element){var n=new Image;n.src=this.snapColl[this.incStep],n.onload=function(){t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(n,0,0,t.element.width,t.element.height)}}},e.prototype.beginStroke=function(t){this.internalRefresh(),this.updateStroke(t)},e.prototype.updateStroke=function(t){var e=this.createPoint(t);this.addPoint(e)},e.prototype.updateStrokeWithThrottle=function(t){var e=Date.now(),i=this.interval-(e-this.previous);this.storedArgs=t,i<=0||i>this.interval?(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.previous=e,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)):this.timeout||(this.timeout=window.setTimeout(this.delay.bind(this),i))},e.prototype.delay=function(){this.previous=Date.now(),this.timeout=null,this.updateStroke(this.storedArgs),this.timeout||(this.storedArgs=null)},e.prototype.createPoint=function(t){var e=this.canvasContext.canvas.getBoundingClientRect();return"mousedown"===t.type||"mousemove"===t.type?this.point(t.clientX-e.left,t.clientY-e.top,(new Date).getTime()):this.point(t.touches[0].clientX-e.left,t.touches[0].clientY-e.top,(new Date).getTime())},e.prototype.point=function(t,e,i){return this.pointX=t,this.pointY=e,this.time=i||(new Date).getTime(),{x:this.pointX,y:this.pointY,time:this.time}},e.prototype.addPoint=function(t){var e,i,n=this.pointColl,s=n.length>0&&n[n.length-1],r=!!s&&this.distanceTo(s)<=this.minDistance;s&&s&&r||(n.push(t),n.length>2&&(3===n.length&&n.unshift(n[0]),e=this.calculateCurveControlPoints(n[0],n[1],n[2]).controlPoint2,i=this.calculateCurveControlPoints(n[1],n[2],n[3]).controlPoint1,this.startPoint=n[1],this.controlPoint1=e,this.controlPoint2=i,this.endPoint=n[2],this.startDraw(),n.shift()))},e.prototype.startDraw=function(){var t;t=this.pointVelocityCalc(this.startPoint),t=this.velocity*t+(1-this.velocity)*this.lastVelocity;var e=Math.max(this.maxStrokeWidth/(t+1),this.minStrokeWidth);this.curveDraw(this.lastWidth,e),this.lastVelocity=t,this.lastWidth=e},e.prototype.endDraw=function(){if(!y(this.pointColl)){var t=this.pointColl.length>2,e=this.pointColl[0];!t&&e&&this.strokeDraw(e)}},e.prototype.curveDraw=function(t,e){var i,n,s,r,o,a,l,h,c,d,p=this.canvasContext,u=e-t,g=this.bezierLengthCalc(),m=2*Math.ceil(g);for(p.beginPath(),n=0;n<m;n++)o=(r=(s=n/m)*s)*s,c=(h=(l=(a=1-s)*a)*a)*this.startPoint.x,c+=3*l*s*this.controlPoint1.x,c+=3*a*r*this.controlPoint2.x,c+=o*this.endPoint.x,d=h*this.startPoint.y,d+=3*l*s*this.controlPoint1.y,d+=3*a*r*this.controlPoint2.y,d+=o*this.endPoint.y,i=Math.min(t+o*u,this.maxStrokeWidth),this.arcDraw(c,d,i);p.closePath(),p.fill(),this.isSignatureEmpty=!1},e.prototype.strokeDraw=function(t){var e=this.canvasContext,i=(this.minStrokeWidth+this.maxStrokeWidth)/2;e.beginPath(),this.arcDraw(t.x,t.y,i),e.closePath(),e.fill(),this.isSignatureEmpty=!1},e.prototype.arcDraw=function(t,e,i){this.signPointsColl.push({x:t,y:e});var n=this.canvasContext;n.moveTo(t,e),n.arc(t,e,i,0,2*Math.PI,!1)},e.prototype.calculateCurveControlPoints=function(t,e,i){var n=t.x-e.x,s=t.y-e.y,r=e.x-i.x,o=e.y-i.y,a=(t.x+e.x)/2,l=(t.y+e.y)/2,h=(e.x+i.x)/2,c=(e.y+i.y)/2,d=Math.sqrt(n*n+s*s),p=Math.sqrt(r*r+o*o),u=p/(d+p),g=h+(a-h)*u,m=c+(l-c)*u,f=e.x-g,y=e.y-m;return{controlPoint1:this.point(a+f,l+y,0),controlPoint2:this.point(h+f,c+y,0)}},e.prototype.bezierLengthCalc=function(){var t,e,i,n,s,r,o,a,l=0;for(t=0;t<=10;t++)e=t/10,i=this.bezierPointCalc(e,this.startPoint.x,this.controlPoint1.x,this.controlPoint2.x,this.endPoint.x),n=this.bezierPointCalc(e,this.startPoint.y,this.controlPoint1.y,this.controlPoint2.y,this.endPoint.y),t>0&&(o=i-s,a=n-r,l+=Math.sqrt(o*o+a*a)),s=i,r=n;return l},e.prototype.bezierPointCalc=function(t,e,i,n,s){return e*(1-t)*(1-t)*(1-t)+3*i*(1-t)*(1-t)*t+3*n*(1-t)*t*t+s*t*t*t},e.prototype.pointVelocityCalc=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0},e.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.pointX-t.x,2)+Math.pow(this.pointY-t.y,2))},e.prototype.isRead=function(t){t?K.remove(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler):this.disabled||K.add(this.canvasContext.canvas,"mousedown touchstart",this.mouseDownHandler,this)},e.prototype.enableOrDisable=function(t){this.disabled=t,t?(this.canvasContext.canvas.style.filter="opacity(0.5)",this.isRead(!0)):(this.canvasContext.canvas.style.filter="",this.isRead(!1))},e.prototype.updateSnapCollection=function(t){if(y(this.incStep)?(this.incStep=-1,this.incStep++,this.snapColl=[],this.clearArray=[]):this.incStep++,this.incStep<this.snapColl.length&&(this.snapColl.length=this.incStep),this.incStep>0){var e=this.createElement("canvas",{className:"e-"+this.getModuleName()+"-wrapper"}),i=e.getContext("2d");this.canvasContext&&(e.width=this.canvasContext.canvas.width,e.height=this.canvasContext.canvas.height,i.drawImage(this.canvasContext.canvas,0,0,e.width,e.height),this.snapColl.push(e.toDataURL()))}else this.snapColl.push(this.canvasContext.canvas.toDataURL());t&&this.clearArray.push(this.incStep)},e.prototype.setBackgroundImage=function(t,e){var i=this,n=new Image;n.crossOrigin="anonymous",n.src=t,"temp"===e?n.onload=function(){i.tempContext.globalCompositeOperation="source-over",i.tempContext.drawImage(n,0,0,i.element.width,i.element.height)}:(n.onload=function(){i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(n,0,0,i.element.width,i.element.height),i.updateSnapCollection(),i.saveBackground(!0)},this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height))},e.prototype.setBackgroundColor=function(t){var e,i,n=this.canvasContext;for(n.strokeStyle=t,e=1;e<=n.canvas.width;e++)for(i=1;i<=n.canvas.height;i++)n.strokeRect(0,0,e,i);this.updateSnapCollection()},e.prototype.loadPersistedSignature=function(){if(!y(this.signatureValue)){var t=this,e=new Image;e.src=this.signatureValue,e.onload=function(){t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(e,0,0),t.updateSnapCollection()},this.isSignatureEmpty=!1}},e.prototype.getBlob=function(t){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],n=atob(e[1]),s=n.length,r=new Uint8Array(s);s--;)r[s]=n.charCodeAt(s);return new Blob([r],{type:i})},e.prototype.download=function(t,e){var i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.target="_parent",n.download=e,(document.body||document.documentElement).appendChild(n),n.click(),n.parentNode.removeChild(n)},e.prototype.internalRefresh=function(){this.pointColl=[],this.lastVelocity=0,this.lastWidth=(this.minStrokeWidth+this.maxStrokeWidth)/2},e.prototype.refresh=function(){this.isResponsive=!1,this.setHTMLProperties(),this.resizeHandler(),this.internalRefresh()},e.prototype.clear=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.tempContext.clearRect(0,0,this.tempContext.canvas.width,this.tempContext.canvas.height),this.saveWithBackground&&this.backgroundImage&&this.setBackgroundImage(this.backgroundImage,"temp"),this.internalRefresh(),this.signRatioPointsColl=[],this.updateSnapCollection(!0),this.isSignatureEmpty=this.canRedraw=!0,this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Clear"):this.trigger("change",{actionName:"clear"})},e.prototype.undo=function(){var t=this;if(this.incStep>0){this.incStep--;var e=new Image;e.src=this.snapColl[this.incStep],e.onload=function(){t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(e,0,0,t.element.width,t.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Undo"):this.trigger("change",{actionName:"undo"})},e.prototype.redo=function(){var t=this;if(this.incStep<this.snapColl.length-1){this.incStep++;var e=new Image;e.src=this.snapColl[this.incStep],e.onload=function(){t.canvasContext.clearRect(0,0,t.element.width,t.element.height),t.canvasContext.drawImage(e,0,0,t.element.width,t.element.height)}}this.isClear(),this.isBlazor?this.dotnetRef.invokeMethodAsync("TriggerEventAsync","Redo"):this.trigger("change",{actionName:"redo"})},e.prototype.isClear=function(){if(this.clearArray){for(var t=!1,e=0;e<this.clearArray.length;e++)this.clearArray[e]===this.incStep&&(this.isSignatureEmpty=!0,t=!0);t||(this.isSignatureEmpty=!1)}},e.prototype.isEmpty=function(){return this.isSignatureEmpty},e.prototype.canUndo=function(){return this.incStep>0},e.prototype.canRedo=function(){return this.incStep<this.snapColl.length-1},e.prototype.draw=function(t,e,i,n,s){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),e=e||"Arial",i=i||30,this.canvasContext.font=i+"px "+e;var r=this.element.width/2,o=this.element.height/2;y(n)&&y(s)?(this.canvasContext.textAlign="center",this.canvasContext.textBaseline="middle"):(r=y(n)?r:n,o=y(s)?o+i/2:s+i/2),this.canvasContext.fillText(t,r,o),this.updateSnapCollection(),this.isSignatureEmpty=!1,this.trigger("change",{actionName:"draw-text"})},e.prototype.load=function(t,e,i){i=i||this.element.height,e=e||this.element.width,this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var n=this,s=new Image;s.src=t,"data"!==t.slice(0,4)&&(s.crossOrigin="anonymous"),s.onload=function(){Promise.all([createImageBitmap(s,0,0,e,i)]).then(function(s){var r=document.createElement("canvas");r.width=e,r.height=i,r.getContext("2d").drawImage(s[0],0,0),"data"!==t.slice(0,4)&&(n.canvasContext.globalCompositeOperation="source-over"),n.canvasContext.drawImage(r,0,0,e,i,0,0,n.element.width,n.element.height),n.updateSnapCollection()})},this.isSignatureEmpty=this.canRedraw=!1},e.prototype.saveBackground=function(t){var e;if(e=t&&this.backgroundImage?this.snapColl[this.incStep-1]:this.snapColl[this.incStep],t||(this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height),this.backgroundImage?this.setBackgroundImage(this.backgroundImage):this.backgroundColor&&(this.setBackgroundColor(this.backgroundColor),t=!0)),t){var i=this,n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=function(){i.backgroundLoaded=!0,i.canvasContext.globalCompositeOperation="source-over",i.canvasContext.drawImage(n,0,0,i.element.width,i.element.height),i.save(i.fileType,i.fileName)}}},e.prototype.save=function(t,e){if(this.saveWithBackground&&null==this.backgroundLoaded&&(this.backgroundImage||this.backgroundColor))this.backgroundLoaded=!1,this.fileType=t,this.fileName=e,this.saveBackground(!1);else if("Svg"===t)e=e||"Signature",this.toSVG(e);else if("Jpeg"===t)if(e=e||"Signature",!this.saveWithBackground||this.saveWithBackground&&!this.backgroundImage&&!this.backgroundColor)this.toJPEG(e);else{var i=this.canvasContext.canvas.toDataURL("image/jpeg");this.download(this.getBlob(i),e+".jpeg")}else{e=e||"Signature";i=this.canvasContext.canvas.toDataURL("image/png");this.download(this.getBlob(i),e+".png")}this.saveWithBackground&&this.backgroundLoaded&&this.resetSnap()},e.prototype.resetSnap=function(){this.canvasContext.clearRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height);var t=this,e=new Image;e.src=this.snapColl[this.incStep-1],e.onload=function(){t.canvasContext.drawImage(e,0,0,t.element.width,t.element.height),t.updateSnapCollection()},this.backgroundLoaded=null,this.snapColl.pop(),this.incStep--,this.snapColl.pop(),this.incStep--},e.prototype.toJPEG=function(t){var e=this,i=this.snapColl[this.incStep];this.setBackgroundColor("#ffffff");var n=this,s=new Image;s.crossOrigin="anonymous",s.src=i,s.onload=function(){n.canvasContext.globalCompositeOperation="source-over",n.canvasContext.drawImage(s,0,0,n.element.width,n.element.height);var i=n.canvasContext.canvas.toDataURL("image/jpeg");n.download(n.getBlob(i),t+".jpeg"),n.canvasContext.clearRect(0,0,n.canvasContext.canvas.width,n.canvasContext.canvas.height),e.resizeHandler()},this.snapColl.pop(),this.incStep--},e.prototype.toSVG=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttribute("width",this.canvasContext.canvas.width.toString()),i.setAttribute("height",this.canvasContext.canvas.height.toString());var n=document.createElementNS("http://www.w3.org/2000/svg","image");n.setAttributeNS(null,"height",this.canvasContext.canvas.height.toString()),n.setAttributeNS(null,"width",this.canvasContext.canvas.width.toString()),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e),i.appendChild(n);var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.canvasContext.canvas.width+'" height="'+this.canvasContext.canvas.height+'">',r=i.innerHTML,o="data:image/svg+xml;base64,"+btoa(s+r+"</svg>");return null==t?o:(this.download(this.getBlob(o),t+".svg"),null)},e.prototype.saveAsBlob=function(){return this.getBlob(this.canvasContext.canvas.toDataURL("image/png"))},e.prototype.getSignature=function(t){return this.saveWithBackground&&this.backgroundColor&&!this.backgroundImage?(this.tempContext.fillStyle=this.backgroundColor,this.tempContext.fillRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)):this.backgroundColor||this.backgroundImage||"Jpeg"!==t||(this.tempContext.fillStyle="#fff",this.tempContext.fillRect(0,0,this.canvasContext.canvas.width,this.canvasContext.canvas.height)),this.tempContext.drawImage(this.element,0,0),"Jpeg"===t?this.tempCanvas.toDataURL("image/jpeg"):"Svg"===t?this.toSVG(null,this.tempCanvas.toDataURL("image/png")):this.tempCanvas.toDataURL("image/png")},e.prototype.getModuleName=function(){return"signature"},e.prototype.getPersistData=function(){return this.signatureValue=this.snapColl[this.incStep],this.addOnPersist(["signatureValue"])},e.prototype.destroy=function(){"image-editor"!==this.getModuleName()&&(this.unwireEvents(null),et([this.element],"e-"+this.getModuleName()),this.element.removeAttribute("tabindex"),this.pointColl=null,this.tempContext=null,this.tempCanvas=null,this.canvasContext=null),t.prototype.destroy.call(this),this.element=null},e.prototype.propertyChanged=function(t,e){var i=this.canvasContext;switch(t){case"backgroundColor":i.canvas.style.backgroundColor=e,this.backgroundColor=e;break;case"backgroundImage":i.canvas.style.backgroundImage="url("+e+")",this.backgroundImage=e,this.saveWithBackground&&this.setBackgroundImage(this.backgroundImage,"temp");break;case"strokeColor":i.fillStyle=e,this.strokeColor=e;break;case"saveWithBackground":this.saveWithBackground=e;break;case"maxStrokeWidth":this.maxStrokeWidth=e;break;case"minStrokeWidth":this.minStrokeWidth=e;break;case"velocity":this.velocity=e;break;case"isReadOnly":this.isRead(e);break;case"disabled":this.enableOrDisable(e)}},e}(_e),VT=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),UT=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},FT=function(t){function e(e,i){return t.call(this,e,i)||this}return VT(e,t),e.prototype.preRender=function(){},e.prototype.render=function(){this.initialize()},e.prototype.initialize=function(){this.element.setAttribute("role","img"),this.element.setAttribute("aria-label","signature"),tt([this.element],"e-"+this.getModuleName()),t.prototype.initialize.call(this,this.element),this.enablePersistence&&this.loadPersistedSignature()},e.prototype.getModuleName=function(){return t.prototype.getModuleName.call(this)},e.prototype.getPersistData=function(){return t.prototype.getPersistData.call(this)},e.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){var r=s[n];switch(r){case"backgroundColor":t.prototype.propertyChanged.call(this,r,e.backgroundColor);break;case"backgroundImage":t.prototype.propertyChanged.call(this,r,e.backgroundImage);break;case"strokeColor":e.strokeColor!==i.strokeColor&&t.prototype.propertyChanged.call(this,r,e.strokeColor);break;case"maxStrokeWidth":e.maxStrokeWidth!==i.maxStrokeWidth&&t.prototype.propertyChanged.call(this,r,e.maxStrokeWidth);break;case"minStrokeWidth":e.minStrokeWidth!==i.minStrokeWidth&&t.prototype.propertyChanged.call(this,r,e.minStrokeWidth);break;case"velocity":e.velocity!==i.velocity&&t.prototype.propertyChanged.call(this,r,e.velocity);break;case"saveWithBackground":t.prototype.propertyChanged.call(this,r,e.saveWithBackground);break;case"isReadOnly":t.prototype.propertyChanged.call(this,r,e.isReadOnly);break;case"disabled":t.prototype.propertyChanged.call(this,r,e.disabled)}}},UT([jt("")],e.prototype,"backgroundColor",void 0),UT([jt("")],e.prototype,"backgroundImage",void 0),UT([jt(!1)],e.prototype,"disabled",void 0),UT([jt(!1)],e.prototype,"isReadOnly",void 0),UT([jt(!0)],e.prototype,"saveWithBackground",void 0),UT([jt("#000000")],e.prototype,"strokeColor",void 0),UT([jt(.5)],e.prototype,"minStrokeWidth",void 0),UT([jt(2)],e.prototype,"maxStrokeWidth",void 0),UT([jt(.7)],e.prototype,"velocity",void 0),UT([jt("en-US")],e.prototype,"locale",void 0),UT([jt(!1)],e.prototype,"enableRtl",void 0),UT([jt(!1)],e.prototype,"enablePersistence",void 0),UT([Ut()],e.prototype,"beforeSave",void 0),UT([Ut()],e.prototype,"change",void 0),UT([Ut()],e.prototype,"created",void 0),e=UT([Ft],e)}(RT),WT=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),YT=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},_T="e-rating-icon e-icons e-star-filled",QT="e-rating-item-list",ZT="e-rating-item-container",qT="e-rating-selected",XT="e-rating-intermediate",GT="e-rating-hidden",KT="e-disabled",JT="e-rating-readonly",$T="e-rtl",tA="e-rating-animation",eA="e-rating-full",iA="e-rating-empty",nA="e-selected-value";!function(t){t.Top="Top",t.Bottom="Bottom",t.Left="Left",t.Right="Right"}(OT||(OT={})),function(t){t.Full="Full",t.Half="Half",t.Quarter="Quarter",t.Exact="Exact"}(kT||(kT={}));var sA,rA,oA,aA=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.itemElements=[],n}return WT(e,t),e.prototype.preRender=function(){this.element.id||(this.element.id=b("e-"+this.getModuleName())),this.keyConfigs={downarrow:"downarrow",leftarrow:"leftarrow",rightarrow:"rightarrow",uparrow:"uparrow",space:"space"},this.tooltipOpen=!1,this.isTouchSelected=!1,ut(this.element,"form")&&this.element.getAttribute("value")&&this.setProperties({value:this.element.getAttribute("value")},!0)},e.prototype.render=function(){this.initialize(),this.updateMinValue(),this.updateTemplateFunction(),this.triggerChange(null,this.value,!1,!0),this.renderItems(),this.displayLabel()},e.prototype.initialize=function(){this.wrapper=this.createElement("div",{className:"e-"+this.getModuleName()+"-container "}),this.element.parentNode.insertBefore(this.wrapper,this.element),this.wrapper.appendChild(this.element),null==this.element.getAttribute("name")&&this.element.setAttribute("name",this.element.id),ht(this.element,{"aria-label":"rating"}),this.renderItemList(),this.updateReset(),this.readOnly&&this.wrapper.classList.add(JT),this.visible||this.wrapper.classList.add(GT),this.enableRtl&&this.wrapper.classList.add($T),this.enableAnimation&&this.wrapper.classList.add(tA),this.cssClass&&tt([this.wrapper],this.cssClass.split(" ")),this.updateTooltip(),this.wireKeyboardEvent(),this.updateDisabled()},e.prototype.updateDisabled=function(){this.wrapper.classList[this.disabled?"add":"remove"](KT),ht(this.ratingItemList,{tabindex:this.disabled?"-1":"0"}),this.updateResetButton()},e.prototype.updateResetButton=function(){if(this.allowReset){this.resetElement&&this.resetElement.blur();var t=this.value<=this.min||this.disabled;this.resetElement.classList[t?"add":"remove"](KT),ht(this.resetElement,{tabindex:t?"-1":"0","aria-hidden":t.toString()})}},e.prototype.renderItemList=function(){var t=this;this.ratingItemList=this.createElement("div",{className:QT,id:this.element.id+"_item-list"}),ht(this.ratingItemList,{"aria-label":"rating",role:"slider"}),this.wrapper.appendChild(this.ratingItemList),K.add(this.ratingItemList,"touchmove",function(e){return t.touchMoveHandler(e)},this),K.add(this.ratingItemList,G.touchEndEvent,this.touchEndHandler,this)},e.prototype.touchMoveHandler=function(t){this.isTouchSelected||(this.wrapper.classList.add("e-rating-touch"),this.isTouchSelected=!0),this.wrapper.classList.add("e-touch-select");var e=this.ratingItemList.getBoundingClientRect(),i=(t.touches[0].clientX-e.x)/e.width*this.itemsCount;i=(i=this.enableRtl?this.itemsCount-i:i)<this.min?this.min:i>this.itemsCount?this.itemsCount:i;var n=0===(i=this.validateValue(i))?null:this.itemElements[parseInt((Math.ceil(i)-1).toString(),10)];if(i!==this.currentValue){var s=this.currentValue;this.triggerChange(t,i),this.updateCurrentValue(i),this.showTooltip&&(n?(Math.ceil(i)!==Math.ceil(s)&&this.closeRatingTooltip(),this.openRatingTooltip(n,!0)):this.closeRatingTooltip())}else this.showTooltip&&n&&this.openRatingTooltip(n,!1)},e.prototype.touchEndHandler=function(){this.closeRatingTooltip(),this.wrapper.classList.remove("e-touch-select")},e.prototype.updateTemplateFunction=function(){this.emptyTemplateFunction=this.emptyTemplate?this.getTemplateString(this.emptyTemplate):null,this.fullTemplateFunction=this.fullTemplate?this.getTemplateString(this.fullTemplate):null},e.prototype.renderItems=function(){for(var t=this,e=0;e<this.itemsCount;e++){var i=this.createElement("span",{className:ZT}),n=this.createElement("span",{className:"e-rating-item"}),s=this.getRatingValue(this.value,e);this.renderItemContent(n,s,e,!1),i.appendChild(n),this.wireItemsEvents(i,e+1),this.itemElements.push(i);var r={element:i,value:e+1};this.trigger("beforeItemRender",r,function(e){t.ratingItemList.appendChild(e.element)})}ht(this.ratingItemList,{"aria-valuemax":this.itemsCount.toString()}),this.updateItemValue(!1)},e.prototype.renderItemContent=function(t,e,i,n){n&&this.removeItemContent(t),this.fullTemplate&&1===e?(t.classList.add(eA),rt(this.fullTemplateFunction({index:i,ratingValue:e},this,"ratingFullTemplate",this.element.id+"fullTemplate",this.isStringTemplate),t)):this.emptyTemplate?(t.classList.add(iA),rt(this.emptyTemplateFunction({index:i,ratingValue:e},this,"ratingEmptyTemplate",this.element.id+"emptyTemplate",this.isStringTemplate),t)):tt([t],_T.split(" "))},e.prototype.removeItemContent=function(t){t.classList.remove(eA,iA),et([t],_T.split(" ")),t.firstChild&&(t.innerHTML="")},e.prototype.updateTooltip=function(){this.showTooltip?(this.tooltipObj=new Zh({target:".e-rating-item-container",windowCollision:!0,opensOn:"Custom",cssClass:this.cssClass?"e-rating-tooltip "+this.cssClass:"e-rating-tooltip"}),this.tooltipObj.appendTo(this.ratingItemList)):y(this.tooltipObj)||(this.tooltipObj.destroy(),this.tooltipObj=null)},e.prototype.updateMinValue=function(){this.setProperties({min:this.validateValue(this.min)},!0),this.min>0&&this.value<this.min&&this.triggerChange(null,this.min,!1),ht(this.ratingItemList,{"aria-valuemin":this.min.toString()})},e.prototype.validateValue=function(t){return t=t>this.itemsCount?this.itemsCount:t<0?0:this.precision===kT.Full||this.enableSingleSelection?Math.round(t):this.precision===kT.Half?Math.round(2*t)/2:this.precision===kT.Quarter?Math.round(4*t)/4:Math.round(10*t)/10},e.prototype.getRatingValue=function(t,e){return this.enableSingleSelection?t>e&&t<=e+1?1:0:t>=e+1?1:t<e?0:t-e},e.prototype.updateItemValue=function(t){void 0===t&&(t=!0),t&&this.isReact&&this.clearTemplate(["ratingEmptyTemplate","ratingFullTemplate"]);for(var e=0;e<this.itemsCount;e++){var i=this.itemElements[parseInt(e.toString(),10)];i.classList.remove(qT,XT,nA);var n=this.getRatingValue(this.currentValue,e);1===n?i.classList.add(qT):n>0?i.classList.add(XT):this.precision===kT.Full&&e+1<=this.value&&!this.enableSingleSelection&&i.classList.add(nA),t&&this.updateItemContent(n,e),i.style.setProperty("--rating-value",100*n+"%"),i.classList[0===this.value&&0===e||this.value===e+1||n>0&&n<1?"add":"remove"]("e-rating-focus")}t&&this.renderReactTemplates(),this.updateResetButton(),ht(this.ratingItemList,{"aria-valuenow":this.currentValue.toString()}),ht(this.element,{value:this.value.toString()})},e.prototype.updateItemContent=function(t,e){if(this.fullTemplate||this.emptyTemplate){var i=this.itemElements[parseInt(e.toString(),10)].querySelector(".e-rating-item");if(this.fullTemplate&&1===t){if(!this.isReact&&i.classList.contains(eA))return;this.removeItemContent(i),i.classList.add(eA),rt(this.fullTemplateFunction({ratingValue:t,index:e},this,"ratingFullTemplate",this.element.id+"fullTemplate"+e,this.isStringTemplate),i)}else if(this.emptyTemplate){if(!this.isReact&&i.classList.contains(iA))return;this.removeItemContent(i),i.classList.add(iA),rt(this.emptyTemplateFunction({ratingValue:t,index:e},this,"ratingEmptyTemplate",this.element.id+"emptyTemplate"+e,this.isStringTemplate),i)}else this.removeItemContent(i),tt([i],_T.split(" "))}},e.prototype.updateTooltipContent=function(t){var e=this;if(this.showTooltip){var i;if(this.isReact&&this.clearTemplate(["ratingTooltipTemplate"]),this.tooltipTemplate)i=this.createElement("span",{className:"e-rating-tooltip-content"}),rt(this.getTemplateString(this.tooltipTemplate)({value:this.currentValue},this,"ratingTooltipTemplate",this.element.id+"tooltipTemplate",this.isStringTemplate),i),this.tooltipObj.setProperties({content:i},t),this.isAngular&&setTimeout(function(){var t=e.ratingItemList.querySelectorAll("."+ZT+"."+qT);e.tooltipObj.refresh(t[t.length-1])});else i=this.currentValue.toString(),this.tooltipObj.setProperties({content:Ri(function(){return i})},t);this.renderReactTemplates()}},e.prototype.getTemplateString=function(t){var e="";try{if("function"!=typeof t){var i=ct(t);e=i?"SCRIPT"===i.tagName?i.innerHTML:i.outerHTML:t}else e=t}catch(i){e=t}return Hi(e)},e.prototype.displayLabel=function(){this.showLabel?(this.spanLabel=this.createElement("span",{className:"e-rating-label"}),this.updateLabel(),this.updateLabelPosition()):this.wrapper.contains(this.spanLabel)&&(lt(this.spanLabel),this.spanLabel=null)},e.prototype.updateLabel=function(){this.showLabel&&(this.labelTemplate?(this.isReact&&this.clearTemplate(["ratingLabelTemplate"]),this.spanLabel.firstChild&&(this.spanLabel.innerHTML=""),rt(this.getTemplateString(this.labelTemplate)({value:this.currentValue},this,"ratingLabelTemplate",this.element.id+"labelTemplate",this.isStringTemplate),this.spanLabel),this.renderReactTemplates()):this.spanLabel.textContent=this.currentValue+" / "+this.itemsCount)},e.prototype.updateReset=function(){this.allowReset?(this.resetElement=this.createElement("span",{className:"e-icons e-reset",attrs:{"aria-label":"resetbutton",role:"button"}}),this.updateResetButton(),K.add(this.resetElement,"click",this.resetClicked,this),this.wrapper.insertBefore(this.resetElement,this.ratingItemList)):this.wrapper.contains(this.resetElement)&&(lt(this.resetElement),this.resetElement=null)},e.prototype.updateLabelPosition=function(){this.clearLabelPosition(),this.spanLabel.classList.add("e-label-"+this.labelPosition.toLowerCase()),"Left"===this.labelPosition||"Top"===this.labelPosition?this.wrapper.firstChild.after(this.spanLabel):this.wrapper.appendChild(this.spanLabel)},e.prototype.clearLabelPosition=function(){var t=this.spanLabel.classList.value.match(/(e-label-[top|bottom|right|left]+)/g);t&&et([this.spanLabel],t)},e.prototype.wireItemsEvents=function(t,e){var i=this;K.add(t,"click",function(t){return i.clickHandler(t)},this),K.add(t,"mousemove",function(t){return i.mouseMoveHandler(e,t)},this),K.add(t,"mouseleave",this.mouseLeaveHandler,this)},e.prototype.clickHandler=function(t){this.currentValue=this.min>0&&this.currentValue<this.min?this.min:this.currentValue,this.triggerChange(t,this.currentValue),this.updateItemValue(),this.updateLabel(),this.updateResetButton()},e.prototype.updateValueChange=function(t,e,i){void 0===i&&(i=!0),this.triggerChange(t,e,i),this.updateItemValue(),this.updateLabel()},e.prototype.triggerChange=function(t,e,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var s=this;if(e=this.validateValue(e),this.currentValue=e,this.currentValue!==this.value){var r={event:t,isInteracted:i,value:e,previousValue:this.value};this.setProperties({value:e},!0),this.isAngular&&!n&&s.localChange({value:e}),n||this.trigger("valueChanged",r)}},e.prototype.mouseMoveHandler=function(t,e){this.isTouchSelected&&(this.wrapper.classList.remove("e-rating-touch"),this.isTouchSelected=!1);var i=this.calculateCurrentValue(t,e);i=this.validateValue(i);var n=this.itemElements[parseInt((t-1).toString(),10)];if(i!==this.currentValue){this.updateCurrentValue(i),this.openRatingTooltip(n,!0);var s={element:n,event:e,value:i};this.trigger("onItemHover",s)}else this.openRatingTooltip(n,!1)},e.prototype.openRatingTooltip=function(t,e){this.showTooltip&&(this.tooltipOpen?e&&(this.updateTooltipContent(!0),this.tooltipObj.refresh(t)):(this.updateTooltipContent(!1),this.tooltipObj.open(t),this.tooltipOpen=!0))},e.prototype.closeRatingTooltip=function(){this.tooltipOpen&&(this.tooltipObj.close(),this.tooltipOpen=!1)},e.prototype.updateCurrentValue=function(t){this.currentValue=t,this.updateItemValue(),this.updateLabel()},e.prototype.mouseLeaveHandler=function(){this.closeRatingTooltip(),this.updateCurrentValue(this.value)},e.prototype.calculateCurrentValue=function(t,e){var i=t;return this.enableSingleSelection||this.precision===kT.Full||(i=e.offsetX/this.itemElements[t-1].clientWidth,i=this.enableRtl?1-i:i,this.precision===kT.Quarter?i=i<=.25?.25:i<=.5?.5:i<.75?.75:1:this.precision===kT.Half&&(i=i<=.5?.5:1),i=i+t-1),i},e.prototype.reset=function(){this.resetClicked(null,!1)},e.prototype.resetClicked=function(t,e){void 0===e&&(e=!0),this.updateValueChange(t,this.min,e),this.updateResetButton()},e.prototype.wireKeyboardEvent=function(){this.keyboardModuleRating=new si(this.wrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.keyActionHandler=function(t){if(t.preventDefault(),!this.disabled&&!this.readOnly){if(t.target.classList.contains(QT))switch(t.action){case"uparrow":this.handleNavigation(t,!0);break;case"downarrow":this.handleNavigation(t,!1);break;case"leftarrow":this.handleNavigation(t,this.enableRtl);break;case"rightarrow":this.handleNavigation(t,!this.enableRtl)}if(this.allowReset&&t.target.classList.contains("e-reset")&&"space"===t.action)this.resetClicked(t)}},e.prototype.handleNavigation=function(t,e){if(!e&&this.value>this.min||e&&this.value<this.itemsCount){var i=this.precision===kT.Full||this.enableSingleSelection?1:this.precision===kT.Half?.5:this.precision===kT.Quarter?.25:Math.round(1)/10;i=e?this.value+i:this.value-i,this.updateValueChange(t,i),this.updateResetButton()}},e.prototype.updateContent=function(){this.isReact&&this.clearTemplate(["ratingEmptyTemplate","ratingFullTemplate"]);for(var t=0;t<this.itemsCount;t++){var e=this.itemElements[parseInt(t.toString(),10)].firstElementChild;this.renderItemContent(e,this.getRatingValue(this.value,t),t,!0)}},e.prototype.getModuleName=function(){return"rating"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.removeItemElements=function(){for(var t=0;t<this.itemElements.length;t++)lt(this.itemElements[parseInt(t.toString(),10)]);this.itemElements=[]},e.prototype.destroy=function(){var e=this;t.prototype.destroy.call(this),this.removeItemElements(),this.clearTemplate(),this.spanLabel&&(lt(this.spanLabel),this.spanLabel=null),this.resetElement&&(lt(this.resetElement),this.resetElement=null),this.showTooltip&&(this.tooltipObj.destroy(),this.tooltipObj=null),lt(this.ratingItemList),this.ratingItemList=null,this.wrapper.parentNode.insertBefore(this.element,this.wrapper),lt(this.wrapper),this.wrapper=null,this.keyboardModuleRating.destroy(),this.keyboardModuleRating=null,["value","aria-label","name"].forEach(function(t){e.element.removeAttribute(t)})},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"value":this.updateValueChange(null,this.value>this.min?this.value:this.min,!1);break;case"min":this.updateMinValue(),this.updateItemValue(),this.updateLabel();break;case"showLabel":this.displayLabel();break;case"visible":this.wrapper.classList[this.visible?"remove":"add"](GT);break;case"disabled":this.updateDisabled();break;case"readOnly":this.wrapper.classList[this.readOnly?"add":"remove"](JT);break;case"allowReset":this.updateReset();break;case"enableRtl":this.wrapper.classList[this.enableRtl?"add":"remove"]($T);break;case"cssClass":e.cssClass&&et([this.wrapper],e.cssClass.split(" ")),t.cssClass&&tt([this.wrapper],t.cssClass.split(" ")),this.tooltipObj&&this.tooltipObj.setProperties({cssClass:this.cssClass?"e-rating-tooltip "+this.cssClass:"e-rating-tooltip"});break;case"labelPosition":this.updateLabelPosition();break;case"showTooltip":this.updateTooltip();break;case"precision":this.updateMinValue(),this.triggerChange(null,this.value,!1),this.updateItemValue(),this.updateLabel();break;case"enableSingleSelection":this.updateValueChange(null,this.currentValue,!1);break;case"enableAnimation":this.wrapper.classList[this.enableAnimation?"add":"remove"](tA);break;case"emptyTemplate":case"fullTemplate":this.updateTemplateFunction(),this.updateContent();break;case"labelTemplate":this.updateLabel();break;case"itemsCount":this.removeItemElements(),this.renderItems(),this.updateLabel()}}},YT([jt(!1)],e.prototype,"allowReset",void 0),YT([jt("")],e.prototype,"cssClass",void 0),YT([jt(!1)],e.prototype,"disabled",void 0),YT([jt("")],e.prototype,"emptyTemplate",void 0),YT([jt(!0)],e.prototype,"enableAnimation",void 0),YT([jt(!1)],e.prototype,"enableSingleSelection",void 0),YT([jt("")],e.prototype,"fullTemplate",void 0),YT([jt(5)],e.prototype,"itemsCount",void 0),YT([jt(OT.Right)],e.prototype,"labelPosition",void 0),YT([jt("")],e.prototype,"labelTemplate",void 0),YT([jt(0)],e.prototype,"min",void 0),YT([jt(kT.Full)],e.prototype,"precision",void 0),YT([jt(!1)],e.prototype,"readOnly",void 0),YT([jt(!1)],e.prototype,"showLabel",void 0),YT([jt(!0)],e.prototype,"showTooltip",void 0),YT([jt("")],e.prototype,"tooltipTemplate",void 0),YT([jt(0)],e.prototype,"value",void 0),YT([jt(!0)],e.prototype,"visible",void 0),YT([Ut()],e.prototype,"beforeItemRender",void 0),YT([Ut()],e.prototype,"created",void 0),YT([Ut()],e.prototype,"onItemHover",void 0),YT([Ut()],e.prototype,"valueChanged",void 0),e=YT([Ft],e)}(_e),lA=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),hA=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},cA="e-rtl";!function(t){t.Number="number",t.Text="text",t.Password="password"}(sA||(sA={})),function(t){t.Outlined="outlined",t.Underlined="underlined",t.Filled="filled"}(rA||(rA={})),function(t){t.None="none",t.Uppercase="uppercase",t.Lowercase="lowercase"}(oA||(oA={}));var dA,pA=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.inputs=[],n.previousValue="",n.separatorElements=[],n.shouldFireFocus=!0,n.shouldFireBlur=!0,n.isFocusInCalled=!1,n.isFocusOutCalled=!1,n.handleWheelEvent=function(t){t.preventDefault()},n}return lA(e,t),e.prototype.preRender=function(){this.element.id||(this.element.id=b("e-"+this.getModuleName()))},e.prototype.render=function(){this.initialize()},e.prototype.initialize=function(){ht(this.element,{role:"group"}),this.renderInputs(),this.renderSeparator(1,this.inputs.length),this.addPlaceHolder(),this.updateCssClass(this.cssClass),this.updateVariantClass(),this.updateAriaLabel(this.ariaLabels),this.setElementAttributes(this.htmlAttributes,this.element),this.enableRtl&&this.element.classList.add(cA),this.previousValue=this.value.toString(),this.autoFocus&&this.focusIn()},e.prototype.renderInputs=function(){this.hiddenInputEle=this.createElement("input",{id:"otpInput_hidden",attrs:{name:this.element.id,type:"hidden",value:"number"===this.type?this.value.toString().replace(/\D/g,""):this.value.toString(),autoComplete:"off"}}),this.element.appendChild(this.hiddenInputEle);for(var t=0;t<this.length;t++)this.createOtpInput(t)},e.prototype.createOtpInput=function(t){var e=this.getDefaultValue(),i="";if(e){var n=e[parseInt(t.toString(),10)];"number"===this.type?isNaN(Number(n))||(i=n):i=n||""}var s=this.createElement("input",{id:this.element.id+"-"+(t+1),className:"e-otp-input-field e-input",attrs:{maxlength:"1",type:this.type,inputmode:this.htmlAttributes.inputmode||("number"===this.type?"numeric":"text")}});this.disabled&&s.setAttribute("disabled","disabled"),this.element.appendChild(s),this.inputs.push(s),i&&(s.value=i),this.wireEvents(s,t)},e.prototype.renderSeparator=function(t,e){if(this.separator.length>0)for(var i=t;i<e;i++){var n=this.createElement("span",{className:"e-otp-separator"});n.textContent=this.separator,this.separatorElements.push(n),this.element.insertBefore(n,this.inputs[parseInt(i.toString(),10)])}},e.prototype.updateSeparatorValue=function(){var t=this;""===this.separator?(this.separatorElements.forEach(function(t){return lt(t)}),this.separatorElements=[]):this.separatorElements.forEach(function(e){e.textContent=t.separator})},e.prototype.addPlaceHolder=function(){for(var t=0;t<this.inputs.length;t++){var e=this.placeholder.length<=1?this.placeholder:this.placeholder.charAt(t);this.setElementAttributes({placeholder:e},this.inputs[parseInt(t.toString(),10)])}},e.prototype.updateInputType=function(t){var e=this.htmlAttributes.inputmode||("number"===t?"numeric":"text");this.inputs.forEach(function(i){i.type=t,i.setAttribute("inputmode",e)})},e.prototype.getDefaultValue=function(){var t="number"==typeof this.value?this.value.toString():this.value;this.textTransform&&(t=this.getTransformedText(t));var e=t.replace(/\s/g,"");return e.length>0?e.split(""):void 0},e.prototype.getTransformedText=function(t){return this.textTransform.toLowerCase()===oA.Lowercase?t.toLowerCase():this.textTransform.toLowerCase()===oA.Uppercase?t.toUpperCase():t},e.prototype.handleInputChange=function(t,e){var i=this.inputs[parseInt(t.toString(),10)];if(i&&t<this.length-1&&i.value.length>0){var n=this.inputs[parseInt(t.toString(),10)+1];this.shouldFireFocus=this.shouldFireBlur=!1,n.focus(),n&&n.value.length>0&&n.select()}var s=e.target;s.value.length>1&&(s.value=s.value.slice(0,1)),this.textTransform&&(s.value=this.getTransformedText(s.value)),this.triggerInputEvent(t,e),this.triggerValuechanged(e,!0)},e.prototype.handleKeyAction=function(t,e){e.key.length>1&&!(0===t&&"Backspace"===e.key||t===this.length-1&&"Delete"===e.key)&&(this.shouldFireFocus=this.shouldFireBlur=!1);var i=this.inputs[parseInt(t.toString(),10)],n=this.inputs[parseInt(t.toString(),10)-1],s=this.inputs[parseInt(t.toString(),10)+1];if("Delete"===e.key){var r="";i.value.length>0?(r=i.value,i.value=""):t!==this.inputs.length-1&&(r=s.value,s.value="",s.focus()),r.length>0&&this.triggerInputEvent(t,e)}else if("Backspace"===e.key){if(0!==t&&0===i.value.length){var o=n.value;n.value="",n.focus(),o.length>0&&this.triggerInputEvent(t,e)}}else"ArrowLeft"===e.key||"ArrowRight"===e.key?("ArrowLeft"===e.key&&t>0?(n.focus(),n.select()):"ArrowRight"===e.key&&t<this.inputs.length-1&&(s.focus(),s.select()),e.preventDefault()):"ArrowUp"===e.key||"ArrowDown"===e.key?e.preventDefault():"Tab"===e.key||e.shiftKey||e.ctrlKey||"number"===this.type&&/\D/.test(e.key.toLocaleLowerCase())&&e.preventDefault()},e.prototype.handleSelection=function(t){var e=this.inputs[parseInt(t.toString(),10)];e.value&&e.select()},e.prototype.handleFocus=function(t,e){if(tt([this.inputs[parseInt(t.toString(),10)]],"e-otp-input-focus"),this.shouldFireFocus){var i={element:this.element,event:e,index:t,isInteracted:!this.isFocusInCalled,value:this.value};this.trigger("focus",i)}this.shouldFireFocus=!0},e.prototype.handleBlur=function(t,e){if(et([this.inputs[parseInt(t.toString(),10)]],"e-otp-input-focus"),this.shouldFireBlur){var i={element:this.element,event:e,value:this.value,index:t,isInteracted:!this.isFocusOutCalled};this.trigger("blur",i)}this.shouldFireBlur=!0},e.prototype.handlePaste=function(t,e){var i=e.clipboardData;if(i){for(var n=i.getData("text").split(""),s=0,r=t;r<this.inputs.length;r++)n.length>0&&n[parseInt(s.toString(),10)]&&(this.inputs[parseInt(r.toString(),10)].value=n[parseInt(s.toString(),10)],s++,this.updateValueProperty());this.focusIn(),this.triggerValuechanged(e,!0)}},e.prototype.triggerInputEvent=function(t,e){var i=this.value.toString();this.updateValueProperty();var n={element:this.element,event:e,previousValue:i,value:this.value.toString(),index:t};this.trigger("input",n)},e.prototype.triggerValuechanged=function(t,e){if(this.length===this.value.toString().length&&this.previousValue!==this.value){var i={element:this.element,event:t,isInteracted:e||!1,previousValue:this.previousValue,value:this.value};this.trigger("valueChanged",i),this.previousValue=this.value.toString()}},e.prototype.wireEvents=function(t,e){K.add(t,"focus",this.handleFocus.bind(this,e),this),K.add(t,"blur",this.handleBlur.bind(this,e),this),K.add(t,"input",this.handleInputChange.bind(this,e),this),K.add(t,"keydown",this.handleKeyAction.bind(this,e),this),K.add(t,"click",this.handleSelection.bind(this,e),this),K.add(t,"paste",this.handlePaste.bind(this,e),this),K.add(t,"wheel",this.handleWheelEvent,this)},e.prototype.unWireEvents=function(){for(var t=0;t<this.inputs.length;t++){var e=this.inputs[parseInt(t.toString(),10)];K.remove(e,"focus",this.handleFocus.bind(this,t)),K.remove(e,"blur",this.handleBlur.bind(this,t)),K.remove(e,"input",this.handleInputChange.bind(this,t)),K.remove(e,"keydown",this.handleKeyAction.bind(this,t)),K.remove(e,"click",this.handleSelection.bind(this,t)),K.remove(e,"paste",this.handlePaste.bind(this,t)),K.remove(e,"wheel",this.handleWheelEvent)}},e.prototype.updateValueProperty=function(){var t="";this.inputs.forEach(function(e){t+=e.value});var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value="number"==typeof this.value?parseInt(t,10):t,this.isProtectedOnChange=e,this.hiddenInputEle.value=this.value.toString()},e.prototype.updateInputValue=function(t){var e=this.value.toString();this.textTransform&&(e=this.getTransformedText(e));for(var i=t.toString(),n=0;n<this.inputs.length;n++)i.charAt(n)!==e.charAt(n)&&(this.inputs[parseInt(n.toString(),10)].value=e.charAt(n),this.hiddenInputEle.value=e);this.focusIn()},e.prototype.updateCssClass=function(t,e){var i,n,s;void 0===e&&(e=""),e&&(s=e.trim().split(" "),(i=this.element.classList).remove.apply(i,s)),t&&(s=t.trim().split(" "),(n=this.element.classList).add.apply(n,s))},e.prototype.updateVariantClass=function(){var t="outlined"===this.stylingMode.toLocaleLowerCase()?"outline":this.stylingMode.toLocaleLowerCase(),e=["underlined","filled","outline"];-1!==e.indexOf(t)&&(et([this.element],e.map(function(t){return"e-"+t})),tt([this.element],"e-"+t))},e.prototype.updateAriaLabel=function(t){this.inputs.forEach(function(e,i){var n="Enter Otp Character "+(i+1),s=t&&t.length>0&&t[parseInt(i.toString(),10)]||n;e.setAttribute("aria-label",s)})},e.prototype.updateDisabledState=function(){var t=this;this.inputs.forEach(function(e){t.disabled?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")})},e.prototype.setElementAttributes=function(t,e){if(!y(t))for(var i in t)if("class"===i){var n=t.class.replace(/\s+/g," ").trim();n&&tt([e],n.split(" "))}else"inputmode"===i?this.setInputMode(t[""+i]):"name"===i&&this.element.id===e.id?this.hiddenInputEle.setAttribute(i,t[""+i]):e.setAttribute(i,t[""+i])},e.prototype.setInputMode=function(t){for(var e=0;e<this.inputs.length;e++)this.inputs[parseInt(e.toString(),10)].setAttribute("inputmode",t)},e.prototype.handleLengthChange=function(t,e){if(t-e>0){for(var i=e;i<t;i++)this.createOtpInput(i);this.renderSeparator(e,t),this.addPlaceHolder(),this.updateAriaLabel(this.ariaLabels)}else if(t>=0&&this.inputs.length>0){for(i=t;i<this.inputs.length;i++)lt(this.inputs[parseInt(i.toString(),10)]);if(this.inputs.splice(t),this.separatorElements.length>0){var n=0===t?0:t-1;for(i=n;i<this.separatorElements.length;i++)lt(this.separatorElements[parseInt(i.toString(),10)]);this.separatorElements.splice(n)}}},e.prototype.getModuleName=function(){return"otpinput"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unWireEvents(),this.inputs.forEach(function(t){lt(t)}),this.separatorElements.forEach(function(t){lt(t)}),lt(this.hiddenInputEle),et([this.element],["e-underlined","e-filled","e-outline","e-rtl"]),this.cssClass&&et([this.element],this.cssClass.trim().split(" ")),this.element.removeAttribute("role"),this.inputs=[],this.separatorElements=[],this.hiddenInputEle=null},e.prototype.focusIn=function(){this.isFocusInCalled=!0;for(var t=this.inputs.length-1,e=0;e<this.inputs.length;e++)if(!(this.inputs[parseInt(e.toString(),10)].value.length>0)){t=e;break}this.inputs[parseInt(t.toString(),10)].focus(),this.isFocusInCalled=!1},e.prototype.focusOut=function(){this.isFocusOutCalled=!0,this.inputs.forEach(function(t){t.blur()}),this.isFocusOutCalled=!1},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"textTransform":this.updateInputValue(this.value);break;case"value":this.updateInputValue(e.value),this.triggerValuechanged();break;case"placeholder":this.addPlaceHolder();break;case"disabled":this.updateDisabledState();break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass);break;case"separator":""===e.separator?this.renderSeparator(1,this.inputs.length):this.updateSeparatorValue();break;case"htmlAttributes":this.setElementAttributes(t.htmlAttributes,this.element);break;case"type":this.updateInputType(t.type);break;case"stylingMode":this.updateVariantClass();break;case"ariaLabels":this.updateAriaLabel(t.ariaLabels);break;case"length":this.handleLengthChange(t.length,e.length);break;case"enableRtl":this.element.classList[this.enableRtl?"add":"remove"](cA);break;case"autoFocus":this.autoFocus&&this.focusIn()}}},hA([jt(4)],e.prototype,"length",void 0),hA([jt("")],e.prototype,"value",void 0),hA([jt(sA.Number)],e.prototype,"type",void 0),hA([jt("")],e.prototype,"separator",void 0),hA([jt("")],e.prototype,"placeholder",void 0),hA([jt(rA.Outlined)],e.prototype,"stylingMode",void 0),hA([jt(!1)],e.prototype,"disabled",void 0),hA([jt("")],e.prototype,"cssClass",void 0),hA([jt(!1)],e.prototype,"autoFocus",void 0),hA([jt(oA.None)],e.prototype,"textTransform",void 0),hA([jt({})],e.prototype,"htmlAttributes",void 0),hA([jt([])],e.prototype,"ariaLabels",void 0),hA([Ut()],e.prototype,"created",void 0),hA([Ut()],e.prototype,"valueChanged",void 0),hA([Ut()],e.prototype,"focus",void 0),hA([Ut()],e.prototype,"blur",void 0),hA([Ut()],e.prototype,"input",void 0),e=hA([Ft],e)}(_e),uA=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gA=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},mA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return uA(e,t),gA([jt("")],e.prototype,"content",void 0),gA([jt("")],e.prototype,"stopContent",void 0),gA([jt("")],e.prototype,"iconCss",void 0),gA([jt("")],e.prototype,"stopIconCss",void 0),gA([jt("Left")],e.prototype,"iconPosition",void 0),gA([jt(!1)],e.prototype,"isPrimary",void 0),e}(re),fA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return uA(e,t),gA([jt("Start listening")],e.prototype,"content",void 0),gA([jt("Stop listening")],e.prototype,"stopContent",void 0),gA([jt("TopCenter")],e.prototype,"position",void 0),e}(re);!function(t){t.Inactive="Inactive",t.Listening="Listening",t.Stopped="Stopped"}(dA||(dA={}));var yA,vA=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.fullTranscript="",n.isClicked=!1,n.isUserInteracted=!1,n.hasStarted=!1,n}return uA(e,t),e.prototype.preRender=function(){this.element.id||(this.element.id=b("e-"+this.getModuleName()))},e.prototype.getDirective=function(){return"EJS-SPEECHTOTEXT"},e.prototype.getModuleName=function(){return"speech-to-text"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.render=function(){this.renderSpeechToText(),this.initializeSpeechRecognition(),y(this.listeningState)||this.handleStateChange(),this.wireEvents()},e.prototype.initializeLocale=function(){this.l10n=new ri(this.getModuleName(),{abortedError:"Speech recognition was aborted.",audioCaptureError:"No microphone detected. Ensure your microphone is connected.",defaultError:"An unknown error occurred.",networkError:"Network error occurred. Check your internet connection.",noSpeechError:"No speech detected. Please speak into the microphone.",notAllowedError:"Microphone access denied. Allow microphone permissions.",serviceNotAllowedError:"Speech recognition service is not allowed in this context.",unsupportedBrowserError:"The browser does not support the SpeechRecognition API.",startAriaLabel:"Press to start speaking and transcribe your words",stopAriaLabel:"Press to stop speaking and end transcription",startTooltipText:"Start listening",stopTooltipText:"Stop listening"},this.locale)},e.prototype.renderSpeechToText=function(){this.initializeLocale();var t=y(this.buttonSettings.iconCss)||""===this.buttonSettings.iconCss?"e-icons e-listen-icon":this.buttonSettings.iconCss;this.buttonInst=new mo({iconCss:t,isPrimary:this.buttonSettings.isPrimary,cssClass:this.updateButtonCssClass(),disabled:this.disabled,content:this.buttonSettings.content,iconPosition:this.buttonSettings.iconPosition,enableRtl:this.enableRtl}),this.buttonInst.appendTo(this.element),this.updateTooltip(),this.updateCssClass(this.cssClass,""),this.updateAriaLabel(),y(this.htmlAttributes)||this.addHtmlAttributes(this.htmlAttributes)},e.prototype.updateAriaLabel=function(){var t;t=this.htmlAttributes&&this.htmlAttributes["aria-label"]?this.htmlAttributes["aria-label"]:this.micOn?this.l10n.getConstant("stopAriaLabel"):this.l10n.getConstant("startAriaLabel"),this.element.setAttribute("aria-label",t)},e.prototype.updateCssClass=function(t,e){e&&et([this.element],e.trim().split(" ")),t&&tt([this.element],t.trim().split(" "))},e.prototype.updateButtonCssClass=function(){var t;return""===(this.isClicked?this.buttonSettings.stopContent:this.buttonSettings.content)&&(t="e-round"),this.micOn&&(t+=" e-listening-state"),t},e.prototype.updateTooltip=function(){this.showTooltip?(this.tooltipSettings&&("Start listening"===this.tooltipSettings.content&&(this.tooltipSettings.content=this.l10n.getConstant("startTooltipText")),"Stop listening"===this.tooltipSettings.stopContent&&(this.tooltipSettings.stopContent=this.l10n.getConstant("stopTooltipText"))),this.tooltipInst=new Zh({content:this.hasStarted?this.tooltipSettings.stopContent:this.tooltipSettings.content,position:this.tooltipSettings.position,windowCollision:!0,cssClass:this.cssClass?"e-speech-to-text-tooltip "+this.cssClass:"e-speech-to-text-tooltip",opensOn:"Hover",enableRtl:this.enableRtl}),this.tooltipInst.appendTo(this.element)):y(this.tooltipInst)||(this.tooltipInst.destroy(),this.tooltipInst=null)},e.prototype.handleStateChange=function(){if(!this.disabled)if(this.listeningState===dA.Listening)this.micOn=!0,this.startSpeechRecognition();else if(this.listeningState===dA.Inactive||this.listeningState===dA.Stopped)if(this.micOn)this.micOn=!1,this.stopSpeechRecognition();else{var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.listeningState=dA.Inactive,this.isProtectedOnChange=t}},e.prototype.addHtmlAttributes=function(t){if(t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.element.setAttribute(e,t[e])},e.prototype.removeHtmlAttributes=function(t){if(t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&this.element.removeAttribute(e)},e.prototype.wireEvents=function(){K.add(this.element,"click",this.handleButtonClick,this)},e.prototype.unWireEvents=function(){K.remove(this.element,"click",this.handleButtonClick)},e.prototype.handleButtonClick=function(t){this.isUserInteracted=!0,this.micOn=!this.micOn,this.micOn?this.startSpeechRecognition(t):this.stopSpeechRecognition(t)},e.prototype.triggerUnSupportedError=function(){var t={error:"unsupported-browser",errorMessage:this.l10n.getConstant("unsupportedBrowserError")};this.trigger("onError",t)},e.prototype.initializeSpeechRecognition=function(){var t=this,e=window,i=e.SpeechRecognition||e.webkitSpeechRecognition;i?(this.recognition=new i,this.recognition.continuous=!0,this.recognition.lang=this.lang,this.recognition.interimResults=this.allowInterimResults,this.recognition.onstart=function(e){var i=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.transcript=t.fullTranscript="",t.isProtectedOnChange=i;var n={cancel:!1,listeningState:dA.Listening,event:e,isInteracted:t.isUserInteracted};t.trigger("onStart",n,function(){n.cancel?(t.recognition.abort(),t.micOn=!1):t.handleStartRecognition()})},this.recognition.onend=function(e){t.hasStarted&&(t.micOn=!1,t.handleStopRecognition(e))},this.recognition.onerror=function(e){var i="";switch(e.error){case"not-allowed":i=t.l10n.getConstant("notAllowedError");break;case"audio-capture":i=t.l10n.getConstant("audioCaptureError");break;case"network":i=t.l10n.getConstant("networkError");break;case"no-speech":i=t.l10n.getConstant("noSpeechError");break;case"aborted":i=t.l10n.getConstant("abortedError");break;case"service-not-allowed":i=t.l10n.getConstant("serviceNotAllowedError");break;default:i=t.l10n.getConstant("defaultError")}var n={event:e,error:e.error,errorMessage:i};t.trigger("onError",n),t.isUserInteracted=!1},this.recognition.onresult=function(e){var i=e.results[e.resultIndex],n="",s=t.isProtectedOnChange;t.isProtectedOnChange=!0,i.isFinal?(t.fullTranscript+=i[0].transcript,t.transcript=t.fullTranscript):(n+=i[0].transcript,t.transcript=t.fullTranscript+n);var r={event:e,transcript:t.transcript,isInterimResult:!i.isFinal};t.trigger("transcriptChanged",r,function(){if(r.transcript!==t.transcript){var e=t.isProtectedOnChange;t.isProtectedOnChange=!0,t.transcript=t.fullTranscript=r.transcript,t.isProtectedOnChange=e}}),t.isProtectedOnChange=s}):this.triggerUnSupportedError()},e.prototype.handleStartRecognition=function(){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.hasStarted=!0,this.listeningState=dA.Listening,y(this.tooltipInst)||(this.tooltipInst.content=this.tooltipSettings.stopContent),this.updateAriaLabel(),this.isClicked=!0,this.buttonInst.cssClass=this.updateButtonCssClass(),this.buttonInst.content=this.buttonSettings.stopContent;var e=y(this.buttonSettings.stopIconCss)||""===this.buttonSettings.stopIconCss?"e-icons e-listen-stop":this.buttonSettings.stopIconCss;this.buttonInst.iconCss=e,this.isProtectedOnChange=t},e.prototype.triggerUnSupportedStart=function(t){var e=this,i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.transcript="",this.isProtectedOnChange=i;var n={cancel:!1,listeningState:dA.Listening,event:t,isInteracted:this.isUserInteracted};this.trigger("onStart",n,function(){n.cancel||e.handleStartRecognition()})},e.prototype.startSpeechRecognition=function(t){this.hasStarted||(this.recognition?this.recognition.start():this.triggerUnSupportedStart(t))},e.prototype.stopSpeechRecognition=function(t){this.recognition?this.recognition.stop():this.handleStopRecognition(t)},e.prototype.handleStopRecognition=function(t){if(this.hasStarted){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.listeningState=dA.Stopped,y(this.tooltipInst)||(this.tooltipInst.content=this.tooltipSettings.content),this.updateAriaLabel(),this.isClicked=!1,this.buttonInst.cssClass=this.updateButtonCssClass(),this.buttonInst.content=this.buttonSettings.content;var i={listeningState:dA.Stopped,event:t,isInteracted:this.isUserInteracted};this.trigger("onStop",i),this.listeningState=dA.Inactive;var n=y(this.buttonSettings.iconCss)||""===this.buttonSettings.iconCss?"e-icons e-listen-icon":this.buttonSettings.iconCss;this.buttonInst.iconCss=n,this.hasStarted=!1,this.isProtectedOnChange=e}},e.prototype.buttonSettingsChanges=function(t,e){if(t.content===e.content&&t.stopContent===e.stopContent||(this.buttonInst.content=this.hasStarted?this.buttonSettings.stopContent:this.buttonSettings.content,this.buttonInst.cssClass=this.updateButtonCssClass()),t.iconCss!==e.iconCss||t.stopIconCss!==e.stopIconCss){var i=y(this.buttonSettings.iconCss)||""===this.buttonSettings.iconCss?"e-icons e-listen-icon":this.buttonSettings.iconCss,n=y(this.buttonSettings.stopIconCss)||""===this.buttonSettings.stopIconCss?"e-icons e-listen-stop":this.buttonSettings.stopIconCss;this.buttonInst.iconCss=this.hasStarted?n:i}t.iconPosition!==e.iconPosition&&(this.buttonInst.iconPosition=this.buttonSettings.iconPosition),t.isPrimary!==e.isPrimary&&(this.buttonInst.isPrimary=this.buttonSettings.isPrimary)},e.prototype.destroyAndNullify=function(t){t&&(t.destroy(),t=null)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unWireEvents(),this.destroyAndNullify(this.buttonInst),this.destroyAndNullify(this.tooltipInst),this.recognition=null,this.micOn=null,this.htmlAttributes=this.tooltipSettings=this.buttonSettings=null,this.element.classList.remove("e-rtl")},e.prototype.startListening=function(){this.disabled||this.isClicked||(this.isUserInteracted=!1,this.micOn=!0,this.startSpeechRecognition())},e.prototype.stopListening=function(){!this.disabled&&this.isClicked&&(this.isUserInteracted=!1,this.micOn=!1,this.stopSpeechRecognition())},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"lang":this.recognition&&(this.recognition.lang=this.lang);break;case"allowInterimResults":this.recognition&&(this.recognition.interimResults=this.allowInterimResults);break;case"buttonSettings":this.buttonSettingsChanges(e.buttonSettings,t.buttonSettings);break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass);break;case"disabled":this.buttonInst.disabled=this.disabled,this.handleStateChange();break;case"htmlAttributes":this.removeHtmlAttributes(e.htmlAttributes),this.addHtmlAttributes(t.htmlAttributes);break;case"listeningState":this.handleStateChange();break;case"tooltipSettings":case"showTooltip":this.updateTooltip();break;case"transcript":this.transcript=this.fullTranscript=t.transcript;break;case"enableRtl":this.buttonInst.enableRtl=this.tooltipInst.enableRtl=this.enableRtl;break;case"locale":this.l10n.setLocale(this.locale),this.updateAriaLabel(),this.updateTooltip()}}},gA([jt("")],e.prototype,"transcript",void 0),gA([jt("")],e.prototype,"lang",void 0),gA([jt(!0)],e.prototype,"allowInterimResults",void 0),gA([jt(!0)],e.prototype,"showTooltip",void 0),gA([jt("Inactive")],e.prototype,"listeningState",void 0),gA([Bt({},mA)],e.prototype,"buttonSettings",void 0),gA([Bt({},fA)],e.prototype,"tooltipSettings",void 0),gA([jt(!1)],e.prototype,"disabled",void 0),gA([jt("")],e.prototype,"cssClass",void 0),gA([jt({})],e.prototype,"htmlAttributes",void 0),gA([Ut()],e.prototype,"created",void 0),gA([Ut()],e.prototype,"onStart",void 0),gA([Ut()],e.prototype,"onStop",void 0),gA([Ut()],e.prototype,"onError",void 0),gA([Ut()],e.prototype,"transcriptChanged",void 0),e=gA([Ft],e)}(_e),bA=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),CA=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},IA="e-treeview",MA="e-control",SA="e-icon-collapsible",xA="e-icon-expandable",wA="e-list-item",DA="e-list-text",EA="e-list-parent",TA="e-hover",AA="e-active",NA="e-icons-spinner",LA="e-process",OA="e-icons",kA="e-text-content",zA="e-input",PA="e-input-group",jA="e-tree-input",BA="e-editing",HA="e-rtl",RA="e-interaction",VA="e-droppable",UA="e-dragging",FA="e-sibling",WA="e-drop-in",YA="e-drop-next",_A="e-drop-out",QA="e-no-drop",ZA="e-fullrow",qA="e-selected",XA="e-expanded",GA="e-node-collapsed",KA="e-disable",JA="e-check",$A="e-stop",tN="e-treeview-checkbox",eN="e-frame",iN="e-ripple",nN="e-node-focus",sN="e-list-img",rN="e-animation-active",oN="e-disabled",aN="e-prevent",lN={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},hN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bA(e,t),CA([jt("child")],e.prototype,"child",void 0),CA([jt([])],e.prototype,"dataSource",void 0),CA([jt("expanded")],e.prototype,"expanded",void 0),CA([jt("hasChildren")],e.prototype,"hasChildren",void 0),CA([jt("htmlAttributes")],e.prototype,"htmlAttributes",void 0),CA([jt("iconCss")],e.prototype,"iconCss",void 0),CA([jt("id")],e.prototype,"id",void 0),CA([jt("imageUrl")],e.prototype,"imageUrl",void 0),CA([jt("isChecked")],e.prototype,"isChecked",void 0),CA([jt("parentID")],e.prototype,"parentID",void 0),CA([jt(null)],e.prototype,"query",void 0),CA([jt("selectable")],e.prototype,"selectable",void 0),CA([jt("selected")],e.prototype,"selected",void 0),CA([jt(null)],e.prototype,"tableName",void 0),CA([jt("text")],e.prototype,"text",void 0),CA([jt("tooltip")],e.prototype,"tooltip",void 0),CA([jt("navigateUrl")],e.prototype,"navigateUrl",void 0),e}(re),cN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bA(e,t),CA([jt("SlideDown")],e.prototype,"effect",void 0),CA([jt(400)],e.prototype,"duration",void 0),CA([jt("linear")],e.prototype,"easing",void 0),e}(re),dN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bA(e,t),CA([Bt({effect:"SlideUp",duration:400,easing:"linear"},cN)],e.prototype,"collapse",void 0),CA([Bt({effect:"SlideDown",duration:400,easing:"linear"},cN)],e.prototype,"expand",void 0),e}(re),pN=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isRefreshed=!1,n.preventExpand=!1,n.checkedElement=[],n.disableNode=[],n.validArr=[],n.validNodes=[],n.expandChildren=[],n.isFieldChange=!1,n.changeDataSource=!1,n.hasTemplate=!1,n.isFirstRender=!1,n.isNodeDropped=!1,n.isInteracted=!1,n.isRightClick=!1,n.mouseDownStatus=!1,n.isDropIn=!1,n.OldCheckedData=[],n.isHiddenItem=!1,n}var i;return bA(e,t),i=e,e.prototype.getModuleName=function(){return"treeview"},e.prototype.preRender=function(){var t=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:xA,ariaAttributes:lN,expandIconPosition:"Left",itemCreated:function(e){t.beforeNodeCreate(e)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new qt({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),this.DDTTreeData=JSON.parse(JSON.stringify(this.fields.dataSource)),y(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),y(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),y(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},e.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},e.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},e.prototype.initialize=function(){this.element.setAttribute("role","tree"),!y(this.fields.dataSource)&&Array.isArray(this.fields.dataSource)&&0!==this.fields.dataSource.length&&this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},e.prototype.setDisabledMode=function(){this.disabled?(this.element.classList.add(oN),this.element.setAttribute("aria-disabled","true")):(this.element.classList.remove(oN),this.element.setAttribute("aria-disabled","false"))},e.prototype.setEnableRtl=function(){(this.enableRtl?tt:et)([this.element],HA)},e.prototype.setRipple=function(){var t={selector:"."+ZA+",."+kA,ignore:"."+kA+" > ."+OA+",."+PA+",."+zA+", ."+tN};this.rippleFn=Xt(this.element,t);var e={selector:"."+kA+" > ."+OA,isCenterRipple:!0};this.rippleIconFn=Xt(this.element,e)},e.prototype.setFullRow=function(t){(t?tt:et)([this.element],"e-fullrow-wrap")},e.prototype.setMultiSelect=function(t){t?this.element.setAttribute("aria-multiselectable","true"):this.element.setAttribute("aria-multiselectable","false")},e.prototype.templateComplier=function(t){if(t){this.hasTemplate=!0,this.element.classList.add(RA);try{return"function"!=typeof t&&document.querySelectorAll(t).length?Hi(document.querySelector(t).innerHTML.trim()):Hi(t)}catch(e){return Hi(t)}}this.element.classList.remove(RA)},e.prototype.setDataBinding=function(t){var e=this;this.treeList.push("false"),this.fields.dataSource instanceof dC?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(t){e.isOffline=e.fields.dataSource.dataSource.offline,e.fields.dataSource instanceof dC&&e.isOffline&&(e.treeList.pop(),e.treeData=t.result,e.isNumberTypeId=e.getType(),e.setRootData(),e.renderItems(!0),0!==e.treeList.length||e.isLoaded||e.finalize())}).catch(function(t){e.trigger("actionFailure",{error:t})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(i){e.treeList.pop(),e.treeData=i.result,e.isNumberTypeId=e.getType(),e.setRootData(),t&&(e.changeDataSource=!0),e.renderItems(!0),e.changeDataSource=!1,0!==e.treeList.length||e.isLoaded||e.finalize()}).catch(function(t){e.trigger("actionFailure",{error:t})})):(this.treeList.pop(),y(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0!==this.treeList.length||this.isLoaded||this.finalize()},e.prototype.getQuery=function(t,e){void 0===e&&(e=null);var i,n=[];if(t.query)i=t.query.clone();else{i=new Gb;for(var s=this.getActualProperties(t),r=0,o=Object.keys(s);r<o.length;r++){var a=o[r];"dataSource"!==a&&"tableName"!==a&&"child"!==a&&t[""+a]&&"url"!==a&&-1===n.indexOf(t[""+a])&&n.push(t[""+a])}i.select(n),Object.prototype.hasOwnProperty.call(s,"tableName")&&i.from(t.tableName)}return ZC.addSorting(this.sortOrder,t.text,i),y(e)||y(t.parentID)||i.where(t.parentID,"equal",this.isNumberTypeId?parseFloat(e):e),i},e.prototype.getType=function(){return!!this.treeData[0]&&"number"==typeof c(this.fields.id,this.treeData[0])},e.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var t=this.getChildNodes(this.treeData,void 0,!0);y(t)?this.rootData=[]:this.rootData=t}else this.rootData=this.treeData},e.prototype.isChildObject=function(){return"object"==typeof this.fields.child},e.prototype.renderItems=function(t){this.listBaseOption.ariaAttributes.level=1;var e=this.getSortedData(this.rootData);this.ulElement=ZC.createList(this.createElement,t?this.rootData:e,this.listBaseOption),this.element.appendChild(this.ulElement);var i=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var n=0;n<i.length;)this.renderChildNodes(i[parseInt(n.toString(),10)],!0,null,!0),n++;(1===dt("."+EA,this.element).length&&i&&0!==i.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},e.prototype.updateCheckedStateFromDS=function(){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){for(var t=this.fields,e=new dC(this.treeData).executeLocal((new Gb).where(t.isChecked,"equal",!0,!1)),i=0;i<e.length;i++){var n=e[parseInt(i.toString(),10)][this.fields.id]?e[parseInt(i.toString(),10)][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(n)||this.isLoaded||this.checkDisabledState(n,e[i]),e[parseInt(i.toString(),10)][this.fields.hasChildren])for(var s=e[parseInt(i.toString(),10)][this.fields.id],r=new dC(this.treeData).executeLocal((new Gb).where(t.parentID,"equal",s,!1)),o=0;o<r.length;o++){var a=r[parseInt(o.toString(),10)][this.fields.id]?r[parseInt(o.toString(),10)][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(a)&&this.autoCheck&&this.checkDisabledState(a,r[o])}}for(i=0;i<this.checkedNodes.length;i++){var l=this.fields,h=new dC(this.treeData).executeLocal((new Gb).where(l.id,"equal",this.checkedNodes[parseInt(i.toString(),10)],!0));if(h[0]&&this.autoCheck&&(this.getCheckedNodeDetails(l,h),this.checkIndeterminateState(h[0])),h.length>0){var d=h[0][this.fields.id]?h[0][this.fields.id].toString():null;this.checkedNodes.indexOf(d)>-1&&-1===this.validNodes.indexOf(d)&&this.validNodes.push(d)}for(var p=new dC(this.treeData).executeLocal((new Gb).where(l.parentID,"equal",this.checkedNodes[parseInt(i.toString(),10)],!0)),u=0;u<p.length;u++){d=p[parseInt(u.toString(),10)][this.fields.id]?p[parseInt(u.toString(),10)][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(d)&&this.autoCheck&&this.checkDisabledState(d,p[u]),this.checkedNodes.indexOf(d)>-1&&-1===this.validNodes.indexOf(d)&&this.validNodes.push(d)}}}else if(2===this.dataType||this.fields.dataSource instanceof dC&&this.isOffline){for(u=0;u<this.treeData.length;u++){var g=this.treeData[parseInt(u.toString(),10)][this.fields.id]?this.treeData[parseInt(u.toString(),10)][this.fields.id].toString():"";this.treeData[parseInt(u.toString(),10)][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(g)&&this.checkDisabledState(g,this.treeData[u]),this.checkedNodes.indexOf(g)>-1&&-1===this.validNodes.indexOf(g)&&this.validNodes.push(g);var m=c(this.fields.child.toString(),this.treeData[parseInt(u.toString(),10)]);m&&this.updateChildCheckState(m,this.treeData[parseInt(u.toString(),10)])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},e.prototype.getCheckedNodeDetails=function(t,e){var i=e[0][this.fields.parentID]?e[0][this.fields.parentID].toString():null,n=0,s=this.element.querySelector('[data-uid="'+e[0][this.fields.id]+'"]'),r=this.element.querySelector('[data-uid="'+e[0][this.fields.parentID]+'"]');if(s||r){if(r){ct("."+JA,r)||this.changeState(r,"indeterminate",null,!0,!0)}}else{-1===this.parentNodeCheck.indexOf(i)&&this.parentNodeCheck.push(i);for(var o=this.getChildNodes(this.treeData,i),a=0;a<o.length;a++){var l=o[parseInt(a.toString(),10)][this.fields.id]?o[parseInt(a.toString(),10)][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(l)&&n++,n===o.length&&-1===this.checkedNodes.indexOf(i)&&this.checkDisabledState(i)}var h=new dC(this.treeData).executeLocal((new Gb).where(t.id,"equal",i,!0));this.getCheckedNodeDetails(t,h)}},e.prototype.updateParentCheckState=function(){var t,e=dt("."+$A,this.element),i=this.treeData;this.element.classList.contains("e-filtering")&&(i=this.DDTTreeData);for(var n=0;n<e.length;n++){var s=ut(e[parseInt(n.toString(),10)],"."+wA),r=s.getAttribute("data-uid").toString(),o=void 0;this.element.classList.contains("e-filtering")&&(o=new dC(this.OldCheckedData).executeLocal((new Gb).where("parentID","equal",r,!0))),t=1===this.dataType?new dC(i).executeLocal((new Gb).where(this.fields.parentID,"equal",r,!0)):this.getChildNodes(i,r);var a=0;if(t){for(var l=function(e){var i=t[parseInt(e.toString(),10)][h.fields.id].toString();(-1!==h.checkedNodes.indexOf(i)||h.element.classList.contains("e-filtering")&&-1!==o.findIndex(function(t){return t.id===i}))&&a++},h=this,c=0;c<t.length;c++)l(c);if(a===t.length){var d=s.getAttribute("data-uid");-1===this.checkedNodes.indexOf(d)&&this.checkDisabledState(d),this.changeState(s,"check",null,!0,!0)}else 0===a&&0===this.checkedNodes.length&&this.changeState(s,"uncheck",null,!0,!0)}}},e.prototype.checkIndeterminateState=function(t){var e;(e=1===this.dataType?this.element.querySelector('[data-uid="'+t[this.fields.parentID]+'"]'):this.element.querySelector('[data-uid="'+t[this.fields.id]+'"]'))?"true"!==e.getAttribute("aria-checked")&&this.changeState(e,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(t[this.fields.id].toString())&&this.parentNodeCheck.push(t[this.fields.id].toString())},e.prototype.updateChildCheckState=function(t,e){for(var i=0,n=e[this.fields.id]?e[this.fields.id].toString():"",s=0;s<t.length;s++){var r=t[parseInt(s.toString(),10)][this.fields.id]?t[parseInt(s.toString(),10)][this.fields.id].toString():"";t[parseInt(s.toString(),10)][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(r)&&this.checkDisabledState(r,t[s]),-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(r)&&this.autoCheck&&this.checkDisabledState(r,t[s]),-1!==this.checkedNodes.indexOf(r)&&this.autoCheck&&i++,this.checkedNodes.indexOf(r)>-1&&-1===this.validNodes.indexOf(r)&&this.validNodes.push(r);var o=c(this.fields.child.toString(),t[parseInt(s.toString(),10)]);o&&o.length&&(-1===this.parentCheckData.indexOf(e)&&this.parentCheckData.push(e),this.updateChildCheckState(o,t[parseInt(s.toString(),10)])),i===t.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(n)&&this.checkDisabledState(n,e)}if(0!==i&&this.autoCheck){this.checkIndeterminateState(e);for(var a=0;a<this.parentCheckData.length;a++)e!==this.parentCheckData[parseInt(a.toString(),10)]&&this.parentCheckData[parseInt(a.toString(),10)]&&this.checkIndeterminateState(this.parentCheckData[parseInt(a.toString(),10)])}this.parentCheckData=[]},e.prototype.beforeNodeCreate=function(t){if(this.showCheckBox){var e=no(this.createElement,!0,{cssClass:this.touchClass});e.classList.add(tN);var i=ct("div."+xA+", div."+SA,t.item),n=t.item.getAttribute("data-uid");t.item.childNodes[0].insertBefore(e,t.item.childNodes[0].childNodes[y(i)?0:1]);var s=c(t.fields.isChecked,t.curData);this.checkedNodes.indexOf(n)>-1?(ct("."+eN,e).classList.add(JA),t.item.setAttribute("aria-checked","true"),this.addCheck(t.item)):y(s)||"true"!==s.toString()?t.item.setAttribute("aria-checked","false"):(ct("."+eN,e).classList.add(JA),t.item.setAttribute("aria-checked","true"),this.addCheck(t.item));var r=ct("."+eN,e);K.add(r,"mousedown",this.frameMouseHandler,this),K.add(r,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(t.item),this.allowMultiSelection&&!t.item.classList.contains(qA)&&t.item.setAttribute("aria-selected","false");var o=t.fields;if(this.addActionClass(t,o.selected,qA),this.addActionClass(t,o.expanded,XA),t.item.setAttribute("tabindex","-1"),K.add(t.item,"focus",this.focusIn,this),!y(this.nodeTemplateFn)){var a=t.item.querySelector("."+DA),l=t.item.getAttribute("data-uid");a.innerHTML="",this.renderNodeTemplate(t.curData,a,l)}var h={node:t.item,nodeData:t.curData,text:t.text};this.isRefreshed||(this.trigger("drawNode",h),!1!==t.curData[this.fields.selectable]||this.showCheckBox||(t.item.classList.add(aN),t.item.firstElementChild.style.cursor="not-allowed"))},e.prototype.frameMouseHandler=function(t){so(t,ct(".e-ripple-container",t.target.parentElement))},e.prototype.addActionClass=function(t,e,i){var n=c(e,t.curData);y(n)||"false"===n.toString()||t.item.classList.add(i)},e.prototype.getDataType=function(t,e){if(this.fields.dataSource instanceof dC){for(var i=0;i<t.length;i++)if(this.isOffline){if("string"==typeof e.child&&y(c(e.child,t[parseInt(i.toString(),10)]))&&!y(c(e.parentID,t[parseInt(i.toString(),10)])))return 1}else if("string"==typeof e.child&&y(c(e.child,t[parseInt(i.toString(),10)])))return 1;return 2}i=0;for(var n=t.length;i<n;i++){if("string"==typeof e.child&&(!y(c(e.child,t[parseInt(i.toString(),10)]))||Object.prototype.hasOwnProperty.call(t[parseInt(i.toString(),10)],e.child)))return 2;if(this.isChildObject())return 2;if(!y(c(e.parentID,t[parseInt(i.toString(),10)]))||!y(c(e.hasChildren,t[parseInt(i.toString(),10)])))return 1}return 1},e.prototype.getGroupedData=function(t,e){for(var i=(new Gb).group(e),n=ZC.getDataSource(t,i),s=[],r=0;r<n.length;r++){var o=n[parseInt(r.toString(),10)].items;s.push(o)}return s},e.prototype.getSortedData=function(t){return t&&"None"!==this.sortOrder&&(t=ZC.getDataSource(t,ZC.addSorting(this.sortOrder,this.fields.text))),t},e.prototype.finalizeNode=function(t,e,i){var n=this;if(e||this.updateAttributes(t),!i){var s=dt("."+XA,t);if(!this.loadOnDemand&&this.fields.dataSource instanceof dC&&(this.isInitalExpand=this.treeData.filter(function(t){return!0===t[n.fields.expanded]}).length>0||this.isInitalExpand),!this.isInitalExpand)for(var r=0;r<s.length;r++)this.renderChildNodes(s[parseInt(r.toString(),10)]);et(s,XA)}e||this.updateList(),this.isLoaded&&this.updateCheckedProp()},e.prototype.updateAttributes=function(t){for(var e=dt("."+sN,t),i=0;i<e.length;i++)e[parseInt(i.toString(),10)].setAttribute("alt",sN);if(this.isLoaded){for(var n=dt("."+qA,t),s=0;s<n.length;s++){this.selectNode(n[parseInt(s.toString(),10)],null);break}et(n,qA)}for(var r=dt("."+wA+":not(."+XA+")",t),o=0;o<r.length;o++){var a=ct("div."+OA,r[parseInt(o.toString(),10)]);a&&a.classList.contains(xA)&&this.disableExpandAttr(r[parseInt(o.toString(),10)])}},e.prototype.updateCheckedProp=function(){if(this.showCheckBox){var t=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:t},!0)}},e.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var t=dt("li",this.element),e=0;e<t.length;e++)t[parseInt(e.toString(),10)].classList.contains(wA)&&(ct("."+EA,t[parseInt(e.toString(),10)])?this.ensureParentCheckState(t[parseInt(e.toString(),10)]):this.ensureChildCheckState(t[parseInt(e.toString(),10)]));else{var i=dt("."+$A,this.element);for(e=0;e<i.length;e++)i[parseInt(e.toString(),10)].classList.remove($A)}},e.prototype.ensureParentCheckState=function(t){if(!y(t)){if(t.classList.contains(IA))return;var e=t;t.classList.contains(wA)&&(e=ct("."+EA,t));var i=dt("."+tN+" ."+JA,e),n=dt("."+$A,e),s=dt(this.checkDisabledChildren?"."+wA:"."+wA+":not(."+KA+")",e),r=t.getElementsByClassName(tN)[0],o=s.length,a=i.length,l=[],h=[],c=t.getAttribute("data-uid"),d=!0,p=!1;s.forEach(function(t){t instanceof HTMLElement&&("true"===t.getAttribute("aria-checked")?p=!0:d=!1)});var u=!1;if(this.element.classList.contains("e-filtering")){a=new dC(this.OldCheckedData).executeLocal((new Gb).where("parentID","equal",c,!0)).length;var g=new dC(this.OldCheckedData).executeLocal((new Gb).where("hasChildren","equal",!0,!0));g.length>0&&p&&(this.OldCheckedData.some(function(t){return t.id===c})||-1!==this.parentNodeCheck.indexOf(c))&&(a=g.length,u=!0);o=(1===this.dataType?new dC(this.DDTTreeData).executeLocal((new Gb).where(this.fields.parentID,"equal",c,!0)):this.getChildNodes(this.DDTTreeData,c)).length}if(this.autoCheck&&this.showCheckBox&&!(this.fields.dataSource instanceof dC))l=this.getSelectedChildNodeDetails(c),h=new dC(this.checkActionNodes).executeLocal((new Gb).where("parentID","equal",c,!0));if(0===o&&0===a)return;o===a||u&&o>0&&(h.length===l.length||h.length!==l.length)&&0!==h.length&&0!==l.length&&d&&this.autoCheck&&this.showCheckBox?this.changeState(r,"check",null,!0,!0):a>0&&!u&&this.autoCheck&&this.showCheckBox||a>0||n.length>0?this.changeState(r,"indeterminate",null,!0,!0):0===a&&this.changeState(r,"uncheck",null,!0,!0);var m=ut(t,"."+EA);if(!y(m)){var f=ut(m,"."+wA);this.ensureParentCheckState(f)}}},e.prototype.getSelectedChildNodeDetails=function(t){var e=this,i="string"==typeof this.fields.child?this.fields.child:null,n=this.fields.id,s=this.fields.parentID,r=function(e){if(!y(i)&&i in e&&Array.isArray(e[i])){var r=e[n];if(!y(r))return r.toString()===t}else{var o=e[s];if(!y(o))return o.toString()===t}return!1};return this.checkedNodes.map(function(t){return e.getNodeObject(t)}).filter(function(t){return(t&&"object"==typeof t&&i in t||2!==e.dataType&&"object"==typeof t&&(s in t||i in t))&&r(t)})},e.prototype.ensureChildCheckState=function(t,e,i){var n=this;if(!y(t)){var s=ct("."+EA,t),r=void 0;if(!y(s)){var o=Array.from(s.querySelectorAll("li"));r=dt("."+tN,s),this.isFilter&&(r=Array.from(r).filter(function(t){var e=t.closest("li").getAttribute("data-uid");return null!==e&&-1!==n.checkedNodes.indexOf(e)}),o=Array.from(o).filter(function(t){var e=t.getAttribute("data-uid");return null!==e&&-1!==n.checkedNodes.indexOf(e)}),0===r.length&&(r=dt("."+tN,s),o=Array.from(s.querySelectorAll("li"))));for(var a=t.getElementsByClassName(eN)[0].classList.contains(JA),l=t.getElementsByClassName(eN)[0].classList.contains($A),h=void 0,d=0;d<r.length;d++){var p=o[parseInt(d.toString(),10)].getAttribute("data-uid");if(y(this.currentLoadData)||y(c(this.fields.isChecked,this.currentLoadData[parseInt(d.toString(),10)]))){var u=r[parseInt(d.toString(),10)].getElementsByClassName(eN)[0].classList.contains(JA);a||u&&!this.isLoaded||-1!==this.checkedNodes.indexOf(p)&&this.isLoaded&&(l||a)?h="check":o[parseInt(d.toString(),10)].classList.contains("e-has-child")&&!v(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&-1!==this.parentNodeCheck.indexOf(p)||1===this.dataType&&!v(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&-1!==this.parentNodeCheck.indexOf(p)?(h="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)):h="uncheck"}else h=c(this.fields.isChecked,this.currentLoadData[parseInt(d.toString(),10)])?"check":"uncheck",-1!==this.ele&&(h=a?"check":"uncheck"),"uncheck"===h&&!v(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(p)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1),h="indeterminate");this.changeState(r[parseInt(d.toString(),10)],h,e,!0,!0)}}this.autoCheck&&this.isLoaded&&!i&&this.updateParentCheckState()}},e.prototype.doCheckBoxAction=function(t,e){if(y(t)){var i=dt("."+tN,this.element);if(this.loadOnDemand)for(var n=0;n<i.length;n++){r=ut(i[parseInt(n.toString(),10)],"."+wA);this.updateFieldChecked(i[parseInt(n.toString(),10)],e),this.changeState(i[parseInt(n.toString(),10)],e?"check":"uncheck",null,null,null,e),this.updateOldCheckedData([this.getNodeData(r)])}else for(n=0;n<i.length;n++){r=ut(i[parseInt(n.toString(),10)],"."+wA);this.updateFieldChecked(i[parseInt(n.toString(),10)],e),this.changeState(i[parseInt(n.toString(),10)],e?"check":"uncheck"),this.updateOldCheckedData([this.getNodeData(r)])}}else{t.reverse();for(var s=t.length-1;s>=0;s--){var r;if(y(r=this.getElement(t[parseInt(s.toString(),10)]))){if(""!==(p=t[s-t.length]?t[s-t.length].toString():t[parseInt(s.toString(),10)]?t[parseInt(s.toString(),10)].toString():null)&&e&&p)this.setValidCheckedNode(p,t),this.dynamicCheckState(p,e);else if(-1!==this.checkedNodes.indexOf(p)&&""!==p&&!e){this.checkedNodes.splice(this.checkedNodes.indexOf(p),1);var o=this.getChildNodes(this.treeData,p);if(o){for(var a=0;a<o.length;a++){var l=o[parseInt(a.toString(),10)][this.fields.id]?o[parseInt(a.toString(),10)][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(l)){this.checkedNodes.splice(this.checkedNodes.indexOf(l),1);var h=this.element.querySelector('[data-uid="'+l+'"]');h&&this.changeState(h,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(p)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(p),1)}p&&this.dynamicCheckState(p,e),this.updateField(this.treeData,this.fields,p,"isChecked",null)}}else{var c=ct("."+EA+" ."+tN,r);this.validateCheckNode(c,!e,r,null)}}}if(t)for(var d=0;d<t.length-1;d++){var p=t[parseInt(d.toString(),10)]?t[parseInt(d.toString(),10)].toString():"";e||this.updateField(this.treeData,this.fields,p,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},e.prototype.updateFieldChecked=function(t,e){var i=ut(t,"."+wA),n=i.getAttribute("data-uid");"true"!==this.getNodeData(i).isChecked||e||this.updateField(this.treeData,this.fields,n,"isChecked",null)},e.prototype.dynamicCheckState=function(t,e){if(1===this.dataType){var i=0,n=new dC(this.treeData).executeLocal((new Gb).where(this.fields.id,"equal",t,!0));if(n[0]){var s=n[0][this.fields.id]?n[0][this.fields.id].toString():null,r=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,o=this.element.querySelector('[data-uid="'+r+'"]'),a=this.element.querySelector('[data-uid="'+s+'"]'),l=this.getChildNodes(this.treeData,r);if(l)for(var h=0;h<l.length;h++){var d=l[parseInt(h.toString(),10)][this.fields.id]?l[parseInt(h.toString(),10)][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(d)&&i++}-1!==this.checkedNodes.indexOf(t)&&o&&s===t&&this.autoCheck?this.changeState(o,"indeterminate",null):-1===this.checkedNodes.indexOf(t)&&a&&s===t&&!e?this.changeState(a,"uncheck",null):-1!==this.checkedNodes.indexOf(t)&&a&&s===t&&e?this.changeState(a,"check",null):-1===this.checkedNodes.indexOf(t)&&!a&&o&&s===t&&this.autoCheck&&0!==i?this.changeState(o,"indeterminate",null):-1===this.checkedNodes.indexOf(t)&&!a&&o&&s===t&&this.autoCheck&&0===i?this.changeState(o,"uncheck",null):a||o||s!==t||!this.autoCheck||this.updateIndeterminate(t,e)}}else if(2===this.dataType||this.fields.dataSource instanceof dC&&this.isOffline){s=void 0,o=void 0;var p=void 0;for(h=0;h<this.treeData.length;h++){s=this.treeData[parseInt(h.toString(),10)][this.fields.id]?this.treeData[parseInt(h.toString(),10)][this.fields.id].toString():"",p=(o=this.element.querySelector('[data-uid="'+s+'"]'))?ct("."+JA,o):null,-1===this.checkedNodes.indexOf(s)&&o&&p&&!e&&this.changeState(o,"uncheck",null);var u=c(this.fields.child.toString(),this.treeData[parseInt(h.toString(),10)]);u&&this.updateChildIndeterminate(u,s,t,e,s)}}},e.prototype.updateIndeterminate=function(t,e){var i,n=this.getTreeData(t),s=0;1===this.dataType&&(i=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null);var r=this.getChildNodes(this.treeData,i);if(r)for(var o=0;o<r.length;o++){var a=r[parseInt(o.toString(),10)][this.fields.id]?r[parseInt(o.toString(),10)][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(a)&&s++}var l=this.element.querySelector('[data-uid="'+i+'"]');l&&e||!e&&l&&-1===this.parentNodeCheck.indexOf(i)&&0!==s?this.changeState(l,"indeterminate",null):!e&&l&&-1===this.parentNodeCheck.indexOf(i)&&0===s?this.changeState(l,"uncheck",null):l||(e||-1!==this.checkedNodes.indexOf(i)||-1===this.parentNodeCheck.indexOf(i)?e&&-1===this.checkedNodes.indexOf(i)&&-1===this.parentNodeCheck.indexOf(i)?this.parentNodeCheck.push(i):e||-1===this.checkedNodes.indexOf(i)||-1!==this.parentNodeCheck.indexOf(i)||0===s||this.parentNodeCheck.push(i):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i),1),this.updateIndeterminate(i,e),-1===this.checkedNodes.indexOf(i)||e||this.checkedNodes.splice(this.checkedNodes.indexOf(i),1))},e.prototype.updateChildIndeterminate=function(t,e,i,n,s){for(var r=0,o=0;o<t.length;o++){var a=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(a)&&r++;var l=this.element.querySelector('[data-uid="'+e+'"]'),h=l?ct("."+$A,l):null,d=l?ct("."+JA,l):null,p=this.element.querySelector('[data-uid="'+a+'"]'),u=p?ct("."+JA,p):null;if(-1!==this.checkedNodes.indexOf(i)&&l&&a===i&&this.autoCheck)this.changeState(l,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(i)||!l||p||a!==i||n){if(-1===this.checkedNodes.indexOf(i)&&p&&a===i&&!n)this.changeState(p,"uncheck",null);else if(-1===this.checkedNodes.indexOf(i)&&h&&a===i&&this.autoCheck&&0===r&&!n)h.classList.remove($A);else if(-1===this.checkedNodes.indexOf(i)&&!p&&d&&a===i&&0===r)this.changeState(l,"uncheck",null);else if(-1===this.checkedNodes.indexOf(a)&&p&&u&&0===r)this.changeState(p,"uncheck",null);else if(!p&&!l&&a===i||-1!==this.parentNodeCheck.indexOf(e)&&this.autoCheck){var g=this.element.querySelector('[data-uid="'+s+'"]');n&&0!==r?this.changeState(g,"indeterminate",null):n&&r===t.length&&-1===this.checkedNodes.indexOf(e)?this.checkDisabledState(e):n||0!==r||-1===this.parentNodeCheck.indexOf(e)||this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(e)),-1===this.parentNodeCheck.indexOf(e)&&this.parentNodeCheck.push(e)}}else this.autoCheck?this.changeState(l,"uncheck",null):0!==r?this.changeState(l,"indeterminate",null):this.changeState(l,"uncheck",null);var m=c(this.fields.child.toString(),t[parseInt(o.toString(),10)]);m&&this.updateChildIndeterminate(m,a,i,n,s)}},e.prototype.changeState=function(t,e,i,n,s,r){var o,a=this,l=ut(t,"."+wA);!this.checkDisabledChildren&&l&&(l.classList.contains(KA)||this.disableNode&&-1!==this.disableNode.indexOf(l.getAttribute("data-uid")))||(t===l&&(t=ct("."+tN,l)),n?this.nodeCheckAction(t,e,l,o,i,n,s,r):(this.checkActionNodes=[],o=this.getCheckEvent(l,e,i),this.trigger("nodeChecking",o,function(o){o.cancel||a.nodeCheckAction(t,e,l,o,i,n,s,r)})))},e.prototype.nodeCheckAction=function(t,e,i,n,s,r,o,a){var l,h=t.getElementsByClassName(eN)[0];if("check"!==e||h.classList.contains(JA)?"uncheck"===e&&(h.classList.contains(JA)||h.classList.contains($A))?(et([h],[JA,$A]),this.removeCheck(i),l="false"):"indeterminate"===e&&this.autoCheck&&(h.classList.remove(JA),h.classList.add($A),this.removeCheck(i),l="mixed"):(h.classList.remove($A),h.classList.add(JA),this.addCheck(i),l="true"),y(l="check"===e?"true":"uncheck"===e?"false":l)||i.setAttribute("aria-checked",l),o){var c=[].concat([],this.checkActionNodes);n=this.getCheckEvent(i,e,s),v(r)&&(n.data=c)}void 0!==a&&this.ensureStateChange(i,a),r||y(l)||(i.setAttribute("aria-checked",l),n.data[0].checked=l,this.trigger("nodeChecked",n),this.checkActionNodes=[])},e.prototype.addCheck=function(t){var e=t.getAttribute("data-uid");y(e)||-1!==this.checkedNodes.indexOf(e)||this.checkDisabledState(e)},e.prototype.removeCheck=function(t){var e=this.checkedNodes.indexOf(t.getAttribute("data-uid"));e>-1&&this.checkedNodes.splice(e,1)},e.prototype.getCheckEvent=function(t,e,i){this.checkActionNodes.push(this.getNodeData(t));var n=this.checkActionNodes;return{action:e,cancel:!1,isInteracted:!y(i),node:t,data:n}},e.prototype.finalize=function(){var t=ct("."+EA,this.element);y(t)||(t.setAttribute("role",lN.treeRole),this.setMultiSelect(this.allowMultiSelection),this.setNodeFocusable(),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&Object.prototype.hasOwnProperty.call(this.rootData[0],this.fields.parentID),this.doExpandAction())},e.prototype.setTextWrap=function(){(this.allowTextWrap?tt:et)([this.element],"e-text-wrap"),G.isIE&&(this.allowTextWrap?tt:et)([this.element],"e-ie-wrap")},e.prototype.updateWrap=function(t){if(this.fullRowSelect)for(var e=t?dt("."+wA,t):this.liList,i=e.length,n=0;n<i;n++)this.calculateWrap(e[parseInt(n.toString(),10)])},e.prototype.calculateWrap=function(t){var e=ct("."+ZA,t);e&&e.nextElementSibling&&(e.style.height=this.allowTextWrap?e.nextElementSibling.offsetHeight+"px":"")},e.prototype.doExpandAction=function(){var t=this,e=this.expandedNodes;if(!this.loadOnDemand&&this.fields.dataSource instanceof dC&&(this.isInitalExpand=this.treeData.filter(function(e){return!0===e[t.fields.expanded]}).length>0||this.isInitalExpand),this.isInitalExpand&&e.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof dC)this.expandGivenNodes(e);else{for(var i=0;i<e.length;i++){var n=ct('[data-uid="'+e[parseInt(i.toString(),10)]+'"]',this.element);if(y(n))e[parseInt(i.toString(),10)]&&-1===this.expandChildren.indexOf(e[parseInt(i.toString(),10)])&&this.expandChildren.push(e[parseInt(i.toString(),10)].toString());else{var s=ct("."+xA,ct("."+kA,n));y(s)||this.expandAction(n,s,null)}}this.afterFinalized()}else this.afterFinalized()},e.prototype.expandGivenNodes=function(t){var e=this;this.expandCallback(t[this.index],function(){e.index++,e.index<t.length?e.expandGivenNodes(t):e.afterFinalized()}),this.index>0&&(this.index=0)},e.prototype.expandCallback=function(t,e){var i=ct('[data-uid="'+t+'"]',this.element);if(y(i))e();else{var n=ct("."+xA,ct("."+kA,i));y(n)||this.expandAction(i,n,null,!1,e),e()}},e.prototype.afterFinalized=function(){if(this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&!this.isNodeDropped){var t={data:this.treeData};this.trigger("dataBound",t)}this.isLoaded=!0,this.isNodeDropped=!1},e.prototype.doSelectionAction=function(){var t=dt("."+qA,this.element),e=this.selectedNodes;if(e.length>0){this.setProperties({selectedNodes:[]},!0);for(var i=0;i<e.length;i++){var n=ct('[data-uid="'+e[parseInt(i.toString(),10)]+'"]',this.element);if(n&&!n.classList.contains("e-active")?this.selectNode(n,null,!0):this.selectedNodes.push(e[parseInt(i.toString(),10)]),!this.allowMultiSelection)break}}else this.selectGivenNodes(t);et(t,qA)},e.prototype.selectGivenNodes=function(t){for(var e=0;e<t.length&&(t[parseInt(e.toString(),10)].classList.contains("e-disable")||this.selectNode(t[parseInt(e.toString(),10)],null,!0),this.allowMultiSelection);e++);},e.prototype.clickHandler=function(t){var e=G.isDevice&&t.originalEvent.changedTouches&&!G.isIos?document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY):t.originalEvent.target;if(K.remove(this.element,"contextmenu",this.preventContextMenu),e&&!this.dragStartAction){var i=e.classList,n=ut(e,"."+wA);if(n&&(!n.classList.contains(aN)||i.contains(xA)||i.contains(SA))){if(3!==t.originalEvent.which){var s=ct(".e-ripple-element",n),r=ct("."+OA,n);this.removeHover(),this.setFocusElement(n);var o=i.contains(xA)||i.contains(SA);if(this.showCheckBox&&!n.classList.contains("e-disable")&&!o){var a=this.checkOnClick?ct("."+tN,n):ut(e,"."+tN);if(!y(a)){var l=ct("."+eN,a);return this.validateCheckNode(a,l.classList.contains(JA),n,t.originalEvent),void this.triggerClickEvent(t.originalEvent,n)}}i.contains(xA)?this.expandAction(n,e,t):i.contains(SA)?this.collapseNode(n,e,t):s&&r?r.classList.contains(iN)&&r.classList.contains(xA)?this.expandAction(n,r,t):r.classList.contains(iN)&&r.classList.contains(SA)?this.collapseNode(n,r,t):i.contains(EA)||i.contains(wA)||this.toggleSelect(n,t.originalEvent,!1):i.contains(EA)||i.contains(wA)||this.toggleSelect(n,t.originalEvent,!1)}3===t.originalEvent.which&&(this.isRightClick=!0),this.triggerClickEvent(t.originalEvent,n)}}},e.prototype.nodeCheckedEvent=function(t,e,i){var n=this.getCheckEvent(t,e?"uncheck":"check",i);n.data=n.data.splice(0,n.data.length-1),this.trigger("nodeChecked",n)},e.prototype.updateOldCheckedData=function(t){var e,i=this,n=new dC(t),s=n.executeLocal((new Gb).where("isChecked","equal","true",!0)),r=n.executeLocal((new Gb).where("isChecked","equal","false",!0));if(r.length>0&&-1!==(e=this.OldCheckedData.findIndex(function(t){return t.id===r[0].id}))){this.OldCheckedData.splice(e,1);var o=this.OldCheckedData.filter(function(t){return t.parentID===r[0].id});return void(o.length>0&&o.forEach(function(t){var e=i.OldCheckedData.findIndex(function(e){return e.id===t.id});-1!==e&&i.OldCheckedData.splice(e,1)}))}if(s.length>0&&-1===(e=this.OldCheckedData.findIndex(function(t){return t.id===s[0].id})))return void this.OldCheckedData.push(s[0])},e.prototype.triggerClickEvent=function(t,e){var i={event:t,node:e};this.trigger("nodeClicked",i)},e.prototype.expandNode=function(t,e,i){var n=this;if(this.renderReactTemplates(),e.classList.contains(NA)&&this.hideSpinner(e),this.initialRender||e.classList.add("interaction"),!0!==i||!0===i&&t.classList.contains("e-expanded")){if(!0!==this.preventExpand){et([e],xA),tt([e],SA);var s=0,r=0,o=ct("."+EA,t),a=t;if(this.isAnimate&&!this.isRefreshed){this.setHeight(a,o);var l=ct("."+wA+"."+AA,t);this.aniObj.animate(o,{name:this.animation.expand.effect,duration:0===this.animation.expand.duration&&"Enable"===te?400:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(){a.style.overflow="hidden",!y(l)&&l instanceof HTMLElement&&l.classList.add(rN),s=a.offsetHeight;var e=window.getComputedStyle(a),i=parseFloat(e.paddingTop),n=parseFloat(e.paddingBottom);r=ct("."+kA,t).offsetHeight+n+i},progress:function(t){t.element.style.display="block",n.animateHeight(t,s,r)},end:function(t){t.element.style.display="block",!y(l)&&l instanceof HTMLElement&&l.classList.remove(rN),n.expandedNode(a,o,e)}})}else this.expandedNode(a,o,e)}}else ct("."+EA,t).style.display="none",this.fields.dataSource instanceof dC==!0&&(this.preventExpand=!1);this.initialRender&&e.classList.add("interaction")},e.prototype.expandedNode=function(t,e,i){e.style.display="block",t.style.display="block",t.style.overflow="",t.style.height="",et([i],LA),this.addExpand(t),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(t),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(t,null),this.expandArgs.isInteracted=this.isInteracted,this.trigger("nodeExpanded",this.expandArgs)),this.isHiddenItem&&this.collapseAll([this.getNodeData(t).id])},e.prototype.addExpand=function(t){t.setAttribute("aria-expanded","true"),et([t],GA);var e=t.getAttribute("data-uid");y(e)||-1!==this.expandedNodes.indexOf(e)||this.expandedNodes.push(e)},e.prototype.collapseNode=function(t,e,i){var n,s=this;e.classList.contains(LA)||(tt([e],LA),this.isLoaded?(n=this.getExpandEvent(t,i),this.isInteracted=n.isInteracted,this.trigger("nodeCollapsing",n,function(i){i.cancel?et([e],LA):s.nodeCollapseAction(t,e,i)})):this.nodeCollapseAction(t,e,n))},e.prototype.nodeCollapseAction=function(t,e,i){var n=this;et([e],SA),tt([e],xA);var s=0,r=0,o=ct("."+EA,t),a=t,l=ct("."+wA+"."+AA,t);this.isAnimate?this.aniObj.animate(o,{name:this.animation.collapse.effect,duration:0===this.animation.collapse.duration&&"Enable"===te?400:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(){a.style.overflow="hidden",!y(l)&&l instanceof HTMLElement&&l.classList.add(rN),s=ct("."+kA,t).offsetHeight,r=a.offsetHeight},progress:function(t){n.animateHeight(t,s,r)},end:function(t){t.element.style.display="none",!y(l)&&l instanceof HTMLElement&&l.classList.remove(rN),n.collapsedNode(a,o,e,i)}}):this.collapsedNode(a,o,e,i)},e.prototype.collapsedNode=function(t,e,i,n){e.style.display="none",t.style.overflow="",t.style.height="",et([i],LA),this.removeExpand(t),this.isLoaded&&((n=this.getExpandEvent(t,null)).isInteracted=this.isInteracted,this.trigger("nodeCollapsed",n))},e.prototype.removeExpand=function(t,e){e?t.removeAttribute("aria-expanded"):this.disableExpandAttr(t);var i=this.expandedNodes.indexOf(t.getAttribute("data-uid"));i>-1&&this.expandedNodes.splice(i,1)},e.prototype.disableExpandAttr=function(t){t.setAttribute("aria-expanded","false"),tt([t],GA)},e.prototype.setHeight=function(t,e){e.style.display="block",e.style.visibility="hidden",t.style.height=t.offsetHeight+"px",e.style.display="none",e.style.visibility=""},e.prototype.animateHeight=function(t,e,i){if(!y(t.element.parentElement)){var n=(i-e)*((t.duration-t.timeStamp)/t.duration)+e;t.element.parentElement.style.height=n+"px"}},e.prototype.renderChildNodes=function(t,e,i,n,s){var r,o=this,a=ct("div."+OA,t);if(!y(a))if(this.showSpinner(a),this.fields.dataSource instanceof dC){var l=this.parents(t,"."+EA).length,h=this.getChildFields(this.fields,l,1);if(y(h)||y(h.dataSource))return at(a),void this.removeExpand(t,!0);this.treeList.push("false"),this.fields.dataSource instanceof dC&&this.isOffline?(this.treeList.pop(),r=this.getChildNodes(this.treeData,t.getAttribute("data-uid")),this.loadChild(r,h,a,t,e,i,n)):h.dataSource.executeQuery(this.getQuery(h,t.getAttribute("data-uid"))).then(function(s){o.treeList.pop(),r=s.result,1===o.dataType&&(o.dataType=2),o.loadChild(r,h,a,t,e,i,n)}).catch(function(t){o.trigger("actionFailure",{error:t})})}else{if(r=this.getChildNodes(this.treeData,t.getAttribute("data-uid"),!1,parseFloat(t.getAttribute("aria-level"))+1),this.currentLoadData=this.getSortedData(r),y(r)||0===r.length)return at(a),a.classList.contains(NA)&&this.hideSpinner(a),void this.removeExpand(t,!0);this.listBaseOption.ariaAttributes.level=parseFloat(t.getAttribute("aria-level"))+1,t.appendChild(ZC.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(t,a,n),this.setSelectionForChildNodes(r),this.ensureCheckNode(t,s),this.finalizeNode(t,s,e),this.disableTreeNodes(r),this.renderSubChild(t,e,n,s)}},e.prototype.loadChild=function(t,e,i,n,s,r,o){if(this.currentLoadData=t,y(t)||0===t.length)at(i),this.removeExpand(n,!0);else{if(this.updateListProp(e),this.fields.dataSource instanceof dC&&!this.isOffline){var a=n.getAttribute("data-uid");d("child",t,this.getNodeObject(a))}this.listBaseOption.ariaAttributes.level=parseFloat(n.getAttribute("aria-level"))+1,n.appendChild(ZC.createList(this.createElement,t,this.listBaseOption)),this.expandNode(n,i,o),this.setSelectionForChildNodes(t),this.ensureCheckNode(n),this.finalizeNode(n),this.disableTreeNodes(t),this.renderSubChild(n,s,o)}r&&r(),s&&this.expandedNodes.push(n.getAttribute("data-uid")),0!==this.treeList.length||this.isLoaded||this.finalize()},e.prototype.disableTreeNodes=function(t){if(!y(this.disableNode)&&0!==this.disableNode.length)for(var e=0;e<t.length;){var i=t[parseInt(e.toString(),10)][this.fields.id]?t[parseInt(e.toString(),10)][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(i)&&this.doDisableAction([i]),e++}},e.prototype.setSelectionForChildNodes=function(t){var e;if(!y(this.selectedNodes)&&0!==this.selectedNodes.length)for(e=0;e<t.length;e++){var i=t[parseInt(e.toString(),10)][this.fields.id]?t[parseInt(e.toString(),10)][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(i)&&this.doSelectionAction()}},e.prototype.ensureCheckNode=function(t,e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(t.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(t,null,e),(!e||(ct("."+JA,this.element)||ct("."+$A,this.element)))&&this.ensureParentCheckState(t))),this.currentLoadData=null},e.prototype.getFields=function(t,e,i){return e===i?t:this.getFields(this.getChildMapper(t),e,i+1)},e.prototype.getChildFields=function(t,e,i){return e===i?this.getChildMapper(t):this.getChildFields(this.getChildMapper(t),e,i+1)},e.prototype.getChildMapper=function(t){return"string"==typeof t.child||y(t.child)?t:t.child},e.prototype.getChildNodes=function(t,e,i,n){var s,r=this;if(void 0===i&&(i=!1),y(t))return s;if(1===this.dataType)return this.getChildGroup(this.groupedData,e,i);if("string"==typeof this.fields.child)return this.findChildNodes(t,this.fields.id,e)||this.findNestedChildNodes(t,e,n)||[];if(this.isChildObject()){for(var o=y(n)?this.fields.child:this.fields,a=1;a<n&&!y(o.child);)o=o.child,a++;this.updateListProp(o);var l=t.findIndex(function(t){return c(r.fields.id,t)&&c(r.fields.id,t).toString()===e});if(-1!==l)return c("child",t[parseInt(l.toString(),10)]);if(-1===l)for(var h=0,d=t.length;h<d;h++){var p=c("child",t[parseInt(h.toString(),10)]),u=y(p)?-1:p.findIndex(function(t){return c(r.fields.child.id,t)&&c(r.fields.child.id,t).toString()===e});if(-1!==u)return c("child",p[parseInt(u.toString(),10)]);if(!y(p)&&void 0!==(s=this.getChildNodes(p,e,!1,n)))break}}return s},e.prototype.findChildNodes=function(t,e,i){var n=t.findIndex(function(t){var n=c(e,t);return n&&n.toString()===i});return-1!==n?c(this.fields.child,t[n]):null},e.prototype.findNestedChildNodes=function(t,e,i){for(var n=0,s=t;n<s.length;n++){var r=s[n],o=c(this.fields.child,r);if(!y(o)){var a=this.findChildNodes(o,this.fields.id,e);if(a)return a;var l=this.getChildNodes(o,e,!1,i);if(l&&l.length>0)return l}}},e.prototype.getChildGroup=function(t,e,i){var n=[];if(y(t))return n;for(var s=0,r=t.length;s<r;s++)if(y(t[parseInt(s.toString(),10)][0])||y(c(this.fields.parentID,t[parseInt(s.toString(),10)][0]))){if(i)return t[parseInt(s.toString(),10)]}else if(c(this.fields.parentID,t[parseInt(s.toString(),10)][0]).toString()===e)return t[parseInt(s.toString(),10)];return n},e.prototype.renderSubChild=function(t,e,i,n){if(e)for(var s=dt("."+xA,t),r=0,o=s.length;r<o;r++){var a=s[parseInt(r.toString(),10)];if(t.querySelector(".e-icons")!==s[parseInt(r.toString(),10)]){var l=ut(a,"."+wA);this.expandArgs=this.getExpandEvent(l,null),!0!==i&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(l,e,null,i,n)}}},e.prototype.toggleSelect=function(t,e,i){t.classList.contains("e-disable")||(this.allowMultiSelection&&(e&&e.ctrlKey||i)&&this.isActive(t)?this.unselectNode(t,e):this.selectNode(t,e,i))},e.prototype.isActive=function(t){return!!t.classList.contains(AA)},e.prototype.selectNode=function(t,e,i){var n=this;if(y(t)||!this.allowMultiSelection&&this.isActive(t)&&!y(e)){if(this.checkOnClick){var s=ct(" ."+eN,t);!y(s)&&s.classList.contains(JA)?tt([t],AA):et([t],AA)}this.setFocusElement(t)}else{var r;this.isLoaded?(r=this.getSelectEvent(t,"select",e),this.trigger("nodeSelecting",r,function(s){s.cancel||s.node.classList.contains(aN)||n.nodeSelectAction(t,e,s,i)})):this.nodeSelectAction(t,e,r,i)}},e.prototype.nodeSelectAction=function(t,e,i,n){if(this.allowMultiSelection&&(n||e&&(!e||e.ctrlKey||e.metaKey))||this.removeSelectAll(),this.allowMultiSelection&&e&&e.shiftKey){this.startNode||(this.startNode=t);var s=this.liList.indexOf(this.startNode),r=this.liList.indexOf(t);if(s>r){var o=s;s=r,r=o}for(var a=s;a<=r;a++){var l=this.liList[parseInt(a.toString(),10)];nt(l)&&!l.classList.contains("e-disable")&&this.addSelect(l)}}else this.startNode=t,this.addSelect(t);this.isLoaded&&(i.nodeData=this.getNodeData(t),this.trigger("nodeSelected",i),this.isRightClick=!1),this.isRightClick=!1},e.prototype.unselectNode=function(t,e){var i,n=this;this.isLoaded?(i=this.getSelectEvent(t,"un-select",e),this.trigger("nodeSelecting",i,function(e){e.cancel||n.nodeUnselectAction(t,e)})):this.nodeUnselectAction(t,i)},e.prototype.nodeUnselectAction=function(t,e){this.removeSelect(t),this.setFocusElement(t),this.isLoaded&&(e.nodeData=this.getNodeData(t),this.trigger("nodeSelected",e))},e.prototype.setFocusElement=function(t){if(!y(t)){var e=this.getFocusedNode();e&&(et([e],nN),e.setAttribute("tabindex","-1")),tt([t],nN),t.setAttribute("tabindex","0"),K.add(t,"blur",this.focusOut,this),this.updateIdAttr(e,t)}},e.prototype.addSelect=function(t){t.setAttribute("aria-selected","true"),tt([t],AA);var e=t.getAttribute("data-uid");y(e)||-1!==this.selectedNodes.indexOf(e)||this.selectedNodes.push(e)},e.prototype.removeSelect=function(t){this.allowMultiSelection?t.setAttribute("aria-selected","false"):t.removeAttribute("aria-selected"),et([t],AA);var e=this.selectedNodes.indexOf(t.getAttribute("data-uid"));e>-1&&this.selectedNodes.splice(e,1)},e.prototype.removeSelectAll=function(){for(var t=this.element.querySelectorAll("."+AA),e=0,i=t;e<i.length;e++){var n=i[e];this.allowMultiSelection?n.setAttribute("aria-selected","false"):n.removeAttribute("aria-selected")}et(t,AA),this.setProperties({selectedNodes:[]},!0)},e.prototype.getSelectEvent=function(t,e,i){var n=this.getNodeData(t);return{action:e,cancel:!1,isInteracted:!y(i),node:t,nodeData:n}},e.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?G.isDevice?"Click":"DblClick":this.expandOn},e.prototype.expandHandler=function(t){var e=G.isDevice&&t.originalEvent.changedTouches&&!G.isIos?document.elementFromPoint(t.originalEvent.changedTouches[0].clientX,t.originalEvent.changedTouches[0].clientY):t.originalEvent.target;!e||e.classList.contains(zA)||e.classList.contains(IA)||e.classList.contains(EA)||e.classList.contains(wA)||e.classList.contains(OA)||this.showCheckBox&&ut(e,"."+tN)||this.expandCollapseAction(ut(e,"."+wA),t)},e.prototype.expandCollapseAction=function(t,e){var i=ct("div."+OA,t);if(i&&!i.classList.contains(LA)){var n=i.classList;n.contains(xA)?this.expandAction(t,i,e):n.contains(SA)&&this.collapseNode(t,i,e)}},e.prototype.expandAction=function(t,e,i,n,s,r){var o=this;e.classList.contains(LA)||(tt([e],LA),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(t,i),this.isInteracted=this.expandArgs.isInteracted,this.trigger("nodeExpanding",this.expandArgs,function(i){i.cancel?et([e],LA):o.nodeExpandAction(t,e,n,s,r)})):this.nodeExpandAction(t,e,n,s,r))},e.prototype.nodeExpandAction=function(t,e,i,n,s){var r=ct("."+EA,t);if(r&&"UL"===r.nodeName)this.expandNode(t,e);else{if(this.isFirstRender=!0,this.renderChildNodes(t,i,n,null,s),y(this.expandChildren)||0===this.expandChildren.length)return;for(var o=dt("."+wA,t),a=0;a<o.length;a++){var l=this.getId(o[parseInt(a.toString(),10)]);if(-1!==this.expandChildren.indexOf(l)&&void 0!==this.expandChildren){var h=ct("."+xA,ct("."+kA,o[parseInt(a.toString(),10)]));y(h)||this.expandAction(o[parseInt(a.toString(),10)],h,null),this.expandChildren.splice(this.expandChildren.indexOf(l),1)}}}},e.prototype.keyActionHandler=function(t){var e=this,i=t.target,n=this.getFocusedNode();if(i&&i.classList.contains(zA)){var s=i;"enter"===t.action?s.blur():"escape"===t.action&&(s.value=this.oldText,s.blur())}else{t.preventDefault();var r={cancel:!1,event:t,node:n};this.trigger("keyPress",r,function(i){if(!i.cancel)switch(t.action){case"space":e.showCheckBox?e.checkNode(t):e.toggleSelect(n,t);break;case"moveRight":e.openNode(!e.enableRtl,t);break;case"moveLeft":e.openNode(!!e.enableRtl,t);break;case"shiftDown":e.shiftKeySelect(!0,t);break;case"moveDown":case"ctrlDown":case"csDown":e.navigateNode(!0);break;case"shiftUp":e.shiftKeySelect(!1,t);break;case"moveUp":case"ctrlUp":case"csUp":e.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":e.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":e.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":e.toggleSelect(n,t);break;case"f2":e.allowEditing&&!n.classList.contains("e-disable")&&e.createTextbox(n);break;case"ctrlA":if(e.allowMultiSelection){var s=dt("."+wA+":not(."+AA+")",e.element);e.selectGivenNodes(s)}}})}},e.prototype.navigateToFocus=function(t){var e=this.getFocusedNode().querySelector("."+kA),i=e.getBoundingClientRect(),n=this.getScrollParent(this.element);if(!y(n)){var s=n.getBoundingClientRect();i.bottom>s.bottom?n.scrollTop+=i.bottom-s.bottom:i.top<s.top&&(n.scrollTop-=s.top-i.top)}this.isVisibleInViewport(e)||e.scrollIntoView(t)},e.prototype.isVisibleInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},e.prototype.getScrollParent=function(t){return y(t)?null:t.scrollHeight>t.clientHeight?t:this.getScrollParent(t.parentElement)},e.prototype.shiftKeySelect=function(t,e){if(this.allowMultiSelection){var i=this.getFocusedNode(),n=t?this.getNextNode(i):this.getPrevNode(i);this.removeHover(),this.setFocusElement(n),this.toggleSelect(n,e,!1),this.navigateToFocus(!t)}else this.navigateNode(t)},e.prototype.checkNode=function(t){var e=this.getFocusedNode(),i=ct("."+tN,e),n=ct(" ."+eN,i).classList.contains(JA);e.classList.contains("e-disable")||0===e.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(i,n,e,t)},e.prototype.validateCheckNode=function(t,e,i,n){var s=this,r=ut(t,"."+wA);this.checkActionNodes=[];var o=e?"false":"true";y(o)||r.setAttribute("aria-checked",o);var a=this.getCheckEvent(r,e?"uncheck":"check",n);this.trigger("nodeChecking",a,function(r){r.cancel||s.nodeCheckingAction(t,e,i,r,n)})},e.prototype.nodeCheckingAction=function(t,e,i,n,s){if(-1===this.checkedElement.indexOf(i.getAttribute("data-uid"))&&(this.checkedElement.push(i.getAttribute("data-uid")),this.autoCheck)){var r=this.getChildNodes(this.treeData,i.getAttribute("data-uid"));null!==r?this.allCheckNode(r,this.checkedElement,null,null,!1):r=null}if(this.changeState(t,e?"uncheck":"check",s,!0),this.updateActiveClass(i,e),this.autoCheck){this.ensureChildCheckState(i),this.updateOldCheckedData([this.getNodeData(i)]),this.ensureParentCheckState(ut(ut(i,"."+EA),"."+wA));var o=void 0;"check"===n.action?o=!0:"uncheck"===n.action&&(o=!1),this.ensureStateChange(i,o)}this.nodeCheckedEvent(t,e,s)},e.prototype.updateActiveClass=function(t,e){this.showCheckBox&&this.checkOnClick&&("check"===e||!1===e?(this.removeSelectAll(),tt([t],AA)):"uncheck"!==e&&"indeterminate"!==e&&!0!==e||et([t],AA))},e.prototype.ensureStateChange=function(t,e){var i=this,n=ct("."+EA,t),s=t.getAttribute("data-uid"),r=this.fields;if(1===this.dataType&&this.autoCheck){var o=new dC(this.treeData).executeLocal((new Gb).where(r.parentID,"equal",s,!0)),a=o.filter(function(t){return-1!==i.checkedNodes.indexOf(t[r.id].toString())},this);-1!==this.checkedNodes.indexOf(s)&&a.length!==o.length&&this.isFilter&&a.length>0&&(o=a);for(var l=0;l<o.length;l++){var h=o[parseInt(l.toString(),10)][this.fields.id]?o[parseInt(l.toString(),10)][this.fields.id].toString():null,c=o[parseInt(l.toString(),10)][this.fields.isChecked]?o[parseInt(l.toString(),10)][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(h)){this.checkDisabledState(h,o[l]);var d=this.getChildNodes(this.treeData,h);this.getChildItems(d,e),-1!==this.parentNodeCheck.indexOf(h)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(h),1)}else if(-1===this.checkedNodes.indexOf(s)&&null===n&&-1!==this.checkedNodes.indexOf(h)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(h),1),"true"===c&&this.updateField(this.treeData,this.fields,h,"isChecked",null),-1===this.checkedNodes.indexOf(s)&&null===n||-1!==this.parentNodeCheck.indexOf(h)){var p=this.getChildNodes(this.treeData,h);this.getChildItems(p,e),-1!==this.parentNodeCheck.indexOf(h)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(h),1)}}else{d=this.getChildNodes(this.treeData,h);this.getChildItems(d,e)}}}else if(1!==this.dataType||this.autoCheck){if(d=this.getChildNodes(this.treeData,s)){var u=d.filter(function(t){var e=String(t[Object.keys(t)[0]]);return-1!==i.checkedNodes.indexOf(e)});u.length>0&&d.length&&this.isFilter&&(d=u),this.childStateChange(d,s,n,e)}}else if(e)for(l=0;l<this.treeData.length;l++){var g=this.treeData[parseInt(l.toString(),10)][this.fields.id]?this.treeData[parseInt(l.toString(),10)][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(g)&&this.checkDisabledState(g,this.treeData[l])}else{for(var m=new dC(this.treeData).executeLocal((new Gb).where(r.isChecked,"equal",!0,!1)),l=0;l<m.length;l++){var f=m[parseInt(l.toString(),10)][this.fields.id]?m[parseInt(l.toString(),10)][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(f)&&this.checkedNodes.splice(this.checkedNodes.indexOf(f),1),this.updateField(this.treeData,this.fields,f,"isChecked",null)}this.checkedNodes=[]}},e.prototype.checkDisabledState=function(t,e){var i=this.checkDisabledChildren;if(!i){var n=!0;if(this.loadOnDemand&&this.fields.htmlAttributes&&(e=y(e)?e:this.getNodeObject(t),!y(e))){var s=e[this.fields.htmlAttributes];s&&!y(s.class)&&-1!==s.class.indexOf(KA)&&(n=!1)}var r=ct('[data-uid="'+t+'"]',this.element);i=r?!r.classList.contains(KA):-1===this.disableNode.indexOf(t)&&n}i&&this.checkedNodes.push(t)},e.prototype.getChildItems=function(t,e){for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)][this.fields.id]?t[parseInt(i.toString(),10)][this.fields.id].toString():null,s=t[parseInt(i.toString(),10)][this.fields.isChecked]?t[parseInt(i.toString(),10)][this.fields.isChecked].toString():null;-1===this.checkedNodes.indexOf(n)||e||this.checkedNodes.splice(this.checkedNodes.indexOf(n),1),-1===this.checkedNodes.indexOf(n)&&e&&this.checkDisabledState(n,t[i]),"true"!==s||e||this.updateField(this.treeData,this.fields,n,"isChecked",null);var r=this.getChildNodes(this.treeData,n);r.length>0&&this.getChildItems(r,e)}},e.prototype.childStateChange=function(t,e,i,n){for(var s=0;s<t.length;s++){var r=t[parseInt(s.toString(),10)][this.fields.id]?t[parseInt(s.toString(),10)][this.fields.id].toString():"",o=t[parseInt(s.toString(),10)][this.fields.isChecked]?t[parseInt(s.toString(),10)][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(e)&&-1===this.checkedNodes.indexOf(r)?(this.checkDisabledState(r,t[s]),-1!==this.parentNodeCheck.indexOf(r)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r),1)):-1!==this.checkedNodes.indexOf(e)||-1===this.checkedNodes.indexOf(r)||n||(this.checkedNodes.splice(this.checkedNodes.indexOf(r),1),"true"===o&&this.updateField(this.treeData,this.fields,r,"isChecked",null)):this.autoCheck||(n?-1===this.checkedNodes.indexOf(r)&&this.checkDisabledState(r,t[s]):(-1!==this.checkedNodes.indexOf(r)&&this.checkedNodes.splice(this.checkedNodes.indexOf(r),1),this.updateField(this.treeData,this.fields,r,"isChecked",null),this.checkedNodes=[]));var a=this.getChildNodes([t[parseInt(s.toString(),10)]],r);a&&this.childStateChange(a,e,i,n)}},e.prototype.allCheckNode=function(t,e,i,n,s){if(t)for(var r=0;r<t.length;r++){var o=c(this.fields.id,t[parseInt(r.toString(),10)]),a=this.element.querySelector('[data-uid="'+o+'"]');!1!==s&&-1===this.checkedElement.indexOf(o.toString())&&(null===a&&!y(t[parseInt(r.toString(),10)][this.fields.isChecked])&&-1===e.indexOf(o.toString())||0===n||2===i)&&(!1!==t[parseInt(r.toString(),10)][this.fields.isChecked]||2===i?e.push(o.toString()):n=null,n=!1!==t[parseInt(r.toString(),10)][this.fields.isChecked]||2===i?0:null),-1===e.indexOf(o.toString())&&y(i)&&e.push(o.toString());var l=c(this.fields.child.toString(),t[parseInt(r.toString(),10)]);if(!0===c(this.fields.hasChildren,t[parseInt(r.toString(),10)])||l){var h=c(this.fields.id,t[parseInt(r.toString(),10)]),d=void 0;(d=1===this.dataType?this.getChildNodes(this.treeData,h.toString()):l)&&(y(s)?this.allCheckNode(d,e,i,n):this.allCheckNode(d,e,i,n,s),n=null)}n=null}},e.prototype.openNode=function(t,e){var i=this.getFocusedNode(),n=ct("div."+OA,i);if(t){if(!n)return;n.classList.contains(xA)?this.expandAction(i,n,e):this.focusNextNode(i,!0)}else if(n&&n.classList.contains(SA))this.collapseNode(i,n,e);else{var s=ut(ut(i,"."+EA),"."+wA);if(!s)return;s.classList.contains("e-disable")||(this.setFocus(i,s),this.navigateToFocus(!0))}},e.prototype.navigateNode=function(t){var e=this.getFocusedNode();this.focusNextNode(e,t)},e.prototype.navigateRootNode=function(t){var e=this.getFocusedNode(),i=t?this.getRootNode():this.getEndNode();i.classList.contains("e-disable")||(this.setFocus(e,i),this.navigateToFocus(t))},e.prototype.getFocusedNode=function(){var t,e=ct("."+wA+'[tabindex="0"]',this.element);if(!y(e)){var i=e.getAttribute("aria-checked");"mixed"!==i&&"false"!==i||(this.isFilter=!1)}return y(e)&&(t=ct("."+wA,this.element)),y(e)?y(t)?this.element.firstElementChild:t:e},e.prototype.focusNextNode=function(t,e){var i=e?this.getNextNode(t):this.getPrevNode(t);if(this.setFocus(t,i),this.navigateToFocus(!e),i.classList.contains("e-disable")){var n=i.lastChild;null==i.previousSibling&&i.classList.contains("e-level-1")?this.focusNextNode(i,!0):null==i.nextSibling&&i.classList.contains("e-node-collapsed")||null==i.nextSibling&&n.classList.contains(kA)?this.focusNextNode(i,!1):this.focusNextNode(i,e)}},e.prototype.getNextNode=function(t){var e,i=this.liList.indexOf(t);do{if(i++,y(e=this.liList[parseInt(i.toString(),10)]))return t}while(!nt(e));return e},e.prototype.getPrevNode=function(t){var e,i=this.liList.indexOf(t);do{if(i--,y(e=this.liList[parseInt(i.toString(),10)]))return t}while(!nt(e));return e},e.prototype.getRootNode=function(){var t,e=0;do{t=this.liList[parseInt(e.toString(),10)],e++}while(!nt(t));return t},e.prototype.getEndNode=function(){var t,e=this.liList.length-1;do{t=this.liList[parseInt(e.toString(),10)],e--}while(!nt(t));return t},e.prototype.setFocus=function(t,e){et([t],nN),t.setAttribute("tabindex","-1"),e.classList.contains("e-disable")||(tt([e],nN),e.setAttribute("tabindex","0"),e.focus(),K.add(e,"blur",this.focusOut,this),this.updateIdAttr(t,e))},e.prototype.updateIdAttr=function(t,e){this.element.removeAttribute("aria-activedescendant"),t&&t.removeAttribute("id"),e.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},e.prototype.focusIn=function(){if(!this.mouseDownStatus){var t=this.getFocusedNode();t.classList.contains("e-disable")?(t.setAttribute("tabindex","-1"),this.navigateNode(!0)):(t.setAttribute("tabindex","0"),tt([t],nN),K.add(t,"blur",this.focusOut,this)),this.mouseDownStatus=!1}},e.prototype.focusOut=function(t){var e=this.getFocusedNode();t.target===e&&(et([e],nN),K.remove(e,"blur",this.focusOut))},e.prototype.onMouseOver=function(t){if(!G.isDevice){var e=t.target,i=e.classList,n=ut(e,"."+wA);!n||i.contains(EA)||i.contains(wA)?this.removeHover():n&&!n.classList.contains("e-disable")&&this.setHover(n)}},e.prototype.setHover=function(t){t.classList.contains(TA)||t.classList.contains(aN)||(this.removeHover(),tt([t],TA))},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.removeHover=function(){var t=dt("."+TA,this.element);t&&t.length&&et(t,TA)},e.prototype.getNodeData=function(t,e,i){if(!y(t)&&t.classList.contains(wA)&&!y(ut(t,"."+MA))&&ut(t,"."+MA).classList.contains(IA)){var n=t.getAttribute("data-uid"),s=this.getText(t,e,i),r=ut(t.parentNode,"."+wA),o=r?r.getAttribute("data-uid"):null,a=t.classList.contains(AA),l=!t.classList.contains(aN),h="true"===t.getAttribute("aria-expanded"),c=null!==t.getAttribute("aria-expanded")||null!=(ct("."+xA,t)||ct("."+SA,t)),d=null,p=ct("."+tN,t);return this.showCheckBox&&p&&(d=t.getAttribute("aria-checked")),{id:n,text:s,parentID:o,selected:a,selectable:l,expanded:h,isChecked:d,hasChildren:c}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},e.prototype.getText=function(t,e,i){if(e){var n=y(i)?this.getNodeObject(t.getAttribute("data-uid")):i,s=parseFloat(t.getAttribute("aria-level")),r=this.getFields(this.fields,s,1);return y(i)?c(r.text,n):i.text}return ct("."+DA,t).textContent},e.prototype.getExpandEvent=function(t,e){var i=this.getNodeData(t);return{cancel:!1,isInteracted:!y(e),node:t,nodeData:i,event:e}},e.prototype.renderNodeTemplate=function(t,e,i){var n=this.nodeTemplateFn(t,this,"nodeTemplate"+i,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,e,this.root);n&&rt(n=Array.prototype.slice.call(n),e)},e.prototype.destroyTemplate=function(t){this.clearTemplate(["nodeTemplate"+t.getAttribute("data-uid")])},e.prototype.reRenderNodes=function(){this.updateListProp(this.fields),G.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",y(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},e.prototype.setCssClass=function(t,e){y(t)||""===t||et([this.element],t.split(" ")),y(e)||""===e||tt([this.element],e.split(" "))},e.prototype.editingHandler=function(t){var e=t.target;if(!(!e||e.classList.contains(IA)||e.classList.contains(EA)||e.classList.contains(wA)||e.classList.contains(OA)||e.classList.contains(zA)||e.classList.contains(PA))){var i=ut(e,"."+wA);this.createTextbox(i)}},e.prototype.createTextbox=function(t){var e=this,i=ct("."+jA,this.element);i&&i.blur();var n=ct("."+DA,t);this.updateOldText(t);var s=this.createElement("input",{className:jA,attrs:{value:this.oldText}}),r=this.getEditEvent(t,null,s.outerHTML);this.trigger("nodeEditing",r,function(i){if(!i.cancel){var s=n.offsetWidth+5+"px";tt([t],BA),y(e.nodeTemplateFn)||e.destroyTemplate(t),e.isReact?setTimeout(function(){e.renderTextBox(r,n,s)},5):e.renderTextBox(r,n,s)}})},e.prototype.renderTextBox=function(t,e,i){e.innerHTML=t.innerHtml;var n=ct("."+jA,e);this.inputObj=hI.createInput({element:n,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.style.width=i,n.focus();var s=n;s.setSelectionRange(0,s.value.length),this.wireInputEvents(n)},e.prototype.updateOldText=function(t){var e=t.getAttribute("data-uid");this.editData=this.getNodeObject(e);var i=parseFloat(t.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,i,1),this.oldText=c(this.editFields.text,this.editData)},e.prototype.inputFocusOut=function(t){if(ct("."+jA,this.element)){var e=t.target,i=e.value,n=ut(e,"."+DA),s=ut(e,"."+wA);at(this.inputObj.container),hI.destroy({element:e,properties:this.properties}),this.fields.dataSource instanceof dC&&!this.isOffline?this.crudOperation("update",null,s,i,null,null,!0):this.appendNewText(s,n,i,!0),K.remove(e,"blur",this.inputFocusOut),this.inputObj=null,at(e),e=null}},e.prototype.appendNewText=function(t,e,i,n){var s=this,r=this.getEditEvent(t,i,null);this.trigger("nodeEdited",r,function(r){i=r.cancel?r.oldText:r.newText,s.updateText(t,e,i,n),r.oldText!==i&&s.triggerEvent("nodeEdited",[s.getNode(t)])})},e.prototype.updateText=function(t,e,i,n){var s=d(this.editFields.text,i,this.editData);if(y(this.nodeTemplateFn))this.enableHtmlSanitizer?e.innerText=Yi.sanitize(i):e.innerHTML=i;else{e.innerText="";var r=t.getAttribute("data-uid");this.renderNodeTemplate(s,e,r),this.renderReactTemplates()}n&&(et([t],BA),t.focus(),K.add(t,"blur",this.focusOut,this),tt([t],nN)),this.allowTextWrap&&this.calculateWrap(t)},e.prototype.getElement=function(t){return y(t)?null:"string"==typeof t?this.element.querySelector('[data-uid="'+t+'"]'):"object"==typeof t?w(t):null},e.prototype.getId=function(t){return y(t)?null:"string"==typeof t?t:"object"==typeof t?w(t).getAttribute("data-uid"):null},e.prototype.getEditEvent=function(t,e,i){return{cancel:!1,newText:e,node:t,nodeData:this.getNodeData(t),oldText:this.oldText,innerHtml:i}},e.prototype.getNodeObject=function(t){var e;if(y(t))return e;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,t);for(var i=0,n=this.treeData.length;i<n;i++){var s=c(this.fields.id,this.treeData[parseInt(i.toString(),10)]);if(!y(this.treeData[parseInt(i.toString(),10)])&&!y(s)&&s.toString()===t)return this.treeData[parseInt(i.toString(),10)]}return e},e.prototype.getChildNodeObject=function(t,e,i){var n;if(y(t))return n;for(var s=0,r=t.length;s<r;s++){var o=c(e.id,t[parseInt(s.toString(),10)]);if(t[parseInt(s.toString(),10)]&&o&&o.toString()===i)return t[parseInt(s.toString(),10)];if("string"!=typeof e.child||y(c(e.child,t[parseInt(s.toString(),10)]))){if(this.fields.dataSource instanceof dC&&!y(c("child",t[parseInt(s.toString(),10)]))){if(void 0!==(n=this.getChildNodeObject(c("child",t[parseInt(s.toString(),10)]),this.getChildMapper(e),i)))break}else if(this.isChildObject()){a=c("child",t[parseInt(s.toString(),10)]);if(void 0!==(n=this.getChildNodeObject(a,this.getChildMapper(e),i)))break}}else{var a=c(e.child,t[parseInt(s.toString(),10)]);if(void 0!==(n=this.getChildNodeObject(a,this.getChildMapper(e),i)))break}}return n},e.prototype.setDragAndDrop=function(t){t&&!this.disabled?this.initializeDrag():this.destroyDrag()},e.prototype.initializeDrag=function(){var t,e=this;this.dragObj=new Ke(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+kA,enableTapHold:!0,tapHoldThreshold:100,helper:function(i){e.dragTarget=i.sender.target;var n=ut(e.dragTarget,"."+IA),s=ut(e.dragTarget,"."+kA);if(e.dragLi=ut(e.dragTarget,"."+wA),e.fullRowSelect&&!s&&e.dragTarget.classList.contains(ZA)&&(s=e.dragTarget.nextElementSibling),!e.dragTarget||!i.element.isSameNode(n)||!s||e.dragTarget.classList.contains(IA)||e.dragTarget.classList.contains(EA)||e.dragTarget.classList.contains(wA)||e.dragLi.classList.contains("e-disable"))return!1;var r=s.cloneNode(!0);if(y(ct("div."+OA,r))){var o=e.createElement("div",{className:OA+" "+xA});r.insertBefore(o,r.children[0])}var a="e-drag-item "+IA+" "+e.cssClass+" "+(e.enableRtl?HA:"");(t=e.createElement("div",{className:a})).appendChild(r);var l=e.selectedNodes.length;if(l>1&&e.allowMultiSelection&&e.dragLi.classList.contains(AA)){var h=e.createElement("span",{className:"e-drop-count",innerHTML:""+l});t.appendChild(h)}return document.body.appendChild(t),document.body.style.cursor="",e.dragData=e.getNodeData(e.dragLi),t},dragStart:function(i){tt([e.element],UA);var n,s=ut(i.target,".e-list-item");s&&(n=parseInt(s.getAttribute("aria-level"),10));var r=e.getDragEvent(i.event,e,null,i.target,null,t,n);r.draggedNode.classList.contains(BA)?(e.dragObj.intDestroy(i.event),e.dragCancelAction(t)):e.trigger("nodeDragStart",r,function(n){n.cancel?(e.dragObj.intDestroy(i.event),e.dragCancelAction(t)):e.dragStartAction=!0})},drag:function(i){e.dragObj.setProperties({cursorAt:{top:!y(i.event.targetTouches)||G.isDevice?60:-20}}),e.dragAction(i,t)},dragStop:function(t){if(!t.target)return t.helper&&t.helper.parentNode&&at(t.helper),document.body.style.cursor="",et([e.element],UA),void(e.dragStartAction=!1);et([e.element],UA),t.target.classList.contains("e-sibling")||e.removeVirtualEle();var i=t.target,n=ut(i,"."+VA);i&&n||(at(t.helper),document.body.style.cursor="");var s,r=ut(i,".e-list-item");r&&(s=parseInt(r.getAttribute("aria-level"),10));var o=e.getDragEvent(t.event,e,i,i,null,t.helper,s);o.preventTargetExpand=!1,e.trigger("nodeDragStop",o,function(n){e.dragParent=n.draggedParentNode,e.preventExpand=n.preventTargetExpand,n.cancel&&(t.helper.parentNode&&at(t.helper),document.body.style.cursor="",i.classList.contains("e-sibling")&&e.removeVirtualEle()),e.dragStartAction=!1})}}),this.dropObj=new ti(this.element,{out:function(t){t.target&&!y(t)&&!t.target.classList.contains(FA)&&e.dropObj.dragData.default&&e.dropObj.dragData.default.helper.classList.contains(IA)&&(document.body.style.cursor="not-allowed")},over:function(){document.body.style.cursor=""},drop:function(t){e.dropAction(t),e.removeVirtualEle()}})},e.prototype.dragCancelAction=function(t){at(t),et([this.element],UA),this.dragStartAction=!1},e.prototype.getOffsetX=function(t,e){var i=t.changedTouches;return i&&i.length>0?i[0].clientX-e.getBoundingClientRect().left:t.offsetX},e.prototype.getOffsetY=function(t,e){var i=t.changedTouches;return i&&i.length>0?i[0].clientY-e.getBoundingClientRect().top:t.offsetY},e.prototype.dragAction=function(t,e){if(t.target){var i=ut(t.target,"."+VA),n=ut(t.target,"."+kA),s=ct("div."+OA,e);et([s],[WA,YA,_A,QA]),this.isDropIn=!1,this.removeVirtualEle(),document.body.style.cursor="";var r=t.target.classList,o=t.event,a=this.getOffsetY(o,t.target),l=this.getOffsetX(o,t.target);if(this.fullRowSelect&&!n&&!y(r)&&r.contains(ZA)&&(n=t.target.nextElementSibling),i){var h=ut(t.target,"."+wA),c=ut(t.target,"."+tN),d=ut(t.target,"."+SA),p=ut(t.target,"."+xA);if(!i.classList.contains(IA)||n&&!h.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,h))if(this.hasTemplate&&h){var u=ct(this.fullRowSelect?"."+ZA:"."+kA,h);if(t&&!p&&!d&&a<7&&!c||p&&a<5||d&&l<3){var g=this.fullRowSelect?1:0;this.appendIndicator(h,s,g)}else if(t&&!p&&!d&&!c&&u&&a>u.offsetHeight-10||p&&a>19||d&&l>19){g=this.fullRowSelect?2:1;this.appendIndicator(h,s,g)}else tt([s],WA),this.isDropIn=!0}else if(h&&t&&!p&&!d&&a<7&&!c||p&&a<5||d&&l<3){g=this.fullRowSelect?1:0;this.appendIndicator(h,s,g)}else if(h&&t&&!p&&!d&&t.target.offsetHeight>0&&a>t.target.offsetHeight-10&&!c||p&&a>19||d&&l>19){g=this.fullRowSelect?2:1;this.appendIndicator(h,s,g)}else tt([s],WA),this.isDropIn=!0;else"LI"!==t.target.nodeName||h.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,h)?t.target.classList.contains(FA)?tt([s],YA):tt([s],_A):(tt([s],YA),this.renderVirtualEle(t))}else tt([s],QA),document.body.style.cursor="not-allowed";var m,f=ut(t.target,".e-list-item");f&&(m=parseInt(f.getAttribute("aria-level"),10));var v=this.getDragEvent(t.event,this,t.target,t.target,null,e,m);v.dropIndicator&&et([s],v.dropIndicator),this.trigger("nodeDragging",v),v.dropIndicator&&tt([s],v.dropIndicator)}},e.prototype.appendIndicator=function(t,e,i){tt([e],YA);var n=this.createElement("div",{className:FA});t.insertBefore(n,t.children[parseInt(i.toString(),10)])},e.prototype.dropAction=function(t){for(var e,n,s=t.event,r=this.getOffsetY(s,t.target),o=t.target,a=!1,l=[],h=[],c=t.dragData.draggable,d=0;d<c.ej2_instances.length;d++)if(c.ej2_instances[parseInt(d.toString(),10)]instanceof i){e=c.ej2_instances[parseInt(d.toString(),10)];break}if(e&&e.dragTarget){var p=ut(e.dragTarget,"."+wA),u=ut(o,"."+wA);if(h.push(p),null==u&&o.classList.contains(IA)&&(u=o.firstElementChild),at(t.droppedElement),document.body.style.cursor="",!u||u.isSameNode(p)||this.isDescendant(p,u))return void(this.fields.dataSource instanceof dC==!1&&(this.preventExpand=!1));if(e.allowMultiSelection&&p.classList.contains(AA)){var g=dt("."+AA,e.element);if(h=g,t.target.offsetHeight<=33&&r>t.target.offsetHeight-10&&r>6)for(d=g.length-1;d>=0;d--)u.isSameNode(g[parseInt(d.toString(),10)])||this.isDescendant(g[parseInt(d.toString(),10)],u)||this.appendNode(o,g[parseInt(d.toString(),10)],u,t,e,r);else for(d=0;d<g.length;d++)u.isSameNode(g[parseInt(d.toString(),10)])||this.isDescendant(g[parseInt(d.toString(),10)],u)||this.appendNode(o,g[parseInt(d.toString(),10)],u,t,e,r)}else this.appendNode(o,p,u,t,e,r);n=parseInt(p.getAttribute("aria-level"),10),a=!0}this.fields.dataSource instanceof dC==!1&&(this.preventExpand=!1);var m=y(e)?null:e.dragData;for(d=0;d<h.length;d++)l.push(this.getNodeData(this.getElement(h[parseInt(d.toString(),10)]),!0,m));this.trigger("nodeDropped",this.getDragEvent(t.event,e,o,t.target,t.dragData.draggedElement,null,n,a)),e.element.id!==this.element.id&&(e.triggerEvent("nodeDropped",l),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent("nodeDropped",l)},e.prototype.appendNode=function(t,e,i,n,s,r){var o=ut(t,"."+tN),a=ut(n.target,"."+SA),l=ut(n.target,"."+xA);e.classList.contains("e-disable")||o||!(l&&n.event.offsetY<5||a&&n.event.offsetX<3||l&&n.event.offsetY>19||a&&n.event.offsetX>19||!l&&!a)?this.dropAsChildNode(e,i,s,null,n,r,!0,t):"LI"===t.nodeName?this.dropAsSiblingNode(e,i,n,s):t.firstElementChild&&t.classList.contains(IA)?"UL"===t.firstElementChild.nodeName&&this.dropAsSiblingNode(e,i,n,s):t.classList.contains("e-icon-collapsible")||t.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(e,i,n,s):this.dropAsChildNode(e,i,s,null,n,r,null,t),this.showCheckBox&&this.ensureIndeterminate()},e.prototype.dropAsSiblingNode=function(t,e,i,n){var s,r=ut(e,"."+EA),o=ut(t,"."+EA),a=ut(o,"."+wA);if(i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-2?s=!1:i.event.offsetY<2?s=!0:(i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible"))&&(i.event.offsetY<5||i.event.offsetX<3?s=!0:(i.event.offsetY>15||i.event.offsetX>17)&&(s=!1)),i.target.classList.contains("e-icon-expandable")||i.target.classList.contains("e-icon-collapsible")){var l=i.target.closest("li");r.insertBefore(t,s?l:l.nextElementSibling)}else r.insertBefore(t,s?i.target:i.target.nextElementSibling);this.moveData(t,e,r,s,n),this.updateElement(o,a),this.updateAriaLevel(t),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())},e.prototype.dropAsChildNode=function(t,e,i,n,s,r,o,a){var l,h=ut(t,"."+EA),c=ut(h,"."+wA),d=ut(e,"."+EA);if(s&&s.target&&(l=ct(this.fullRowSelect?"."+ZA:"."+kA,e)),s&&(r<7&&!a.classList.contains("e-sibling")||a.classList.contains("e-sibling")&&!e.lastChild.classList.contains("e-sibling"))&&!o)d.insertBefore(t,e),this.moveData(t,e,d,!0,i);else if(s&&s.target.offsetHeight>0&&r>s.target.offsetHeight-10&&!o&&!this.hasTemplate)d.insertBefore(t,e.nextElementSibling),this.moveData(t,e,d,!1,i);else if(this.hasTemplate&&l&&r>l.offsetHeight-10&&!o)d.insertBefore(t,e.nextElementSibling),this.moveData(t,e,d,!1,i);else{var p=this.expandParent(e),u=y(n)?null:p.childNodes[parseInt(n.toString(),10)];p.insertBefore(t,u),this.moveData(t,u,p,!0,i)}this.updateElement(h,c),this.updateAriaLevel(t),i.element.id===this.element.id?this.updateList():(i.updateInstance(),this.updateInstance())},e.prototype.moveData=function(t,e,i,n,s){var r=ut(i,"."+wA),o=this.getId(t),a=s.updateChildField(s.treeData,s.fields,o,null,null,!0),l=this.getId(e),h=l?this.getDataPos(this.treeData,this.fields,l):null,c=this.getId(r);if(1===this.dataType){this.updateField(this.treeData,this.fields,c,"hasChildren",!0);var p=y(h)?this.treeData.length:n?h:h+1;if(y(c)&&!this.hasPid)delete a[0][this.fields.parentID];else{var u=this.isNumberTypeId?parseFloat(c):c;d(this.fields.parentID,u,a[0])}if(this.treeData.splice(p,0,a[0]),s.element.id!==this.element.id){var g=s.removeChildNodes(o);p++;for(var m=0,f=g.length;m<f;m++)this.treeData.splice(p,0,g[parseInt(m.toString(),10)]),p++;s.groupedData=s.getGroupedData(s.treeData,s.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,c,a,n?h:h+1)},e.prototype.expandParent=function(t){var e=ct("div."+xA+", div."+SA,t);e&&e.classList.contains(xA)&&!0!==this.preventExpand&&this.expandAction(t,e,null);var i=ct("."+EA,t);(!0===this.preventExpand&&!i&&e&&this.renderChildNodes(t),!y(i=ct("."+EA,t))&&this.preventExpand&&"true"!==t.getAttribute("aria-expanded")&&(i.style.display="none"),y(i)||!1!==this.preventExpand||(i.style.display="block"),y(i)&&!0===this.preventExpand)&&(y(e)&&ZC.generateIcon(this.createElement,t,xA,this.listBaseOption),(n=ct("div."+xA+", div."+SA,t))&&n.classList.add("e-icon-expandable"),i=ZC.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(i),n?et([n],SA):ZC.generateIcon(this.createElement,t,xA,this.listBaseOption),t.setAttribute("aria-expanded","false"),i.style.display="none");if(y(i)){var n,s=this.expandArgs;(y(s)||s&&"nodeExpanding"!==s.name)&&this.trigger("nodeExpanding",this.getExpandEvent(t,null)),y(e)&&ZC.generateIcon(this.createElement,t,SA,this.listBaseOption),(n=ct("div."+xA+", div."+SA,t))?et([n],xA):(ZC.generateIcon(this.createElement,t,SA,this.listBaseOption),et([n=ct("div."+OA,t)],xA)),i=ZC.generateUL(this.createElement,[],null,this.listBaseOption),t.appendChild(i),this.addExpand(t),this.trigger("nodeExpanded",this.getExpandEvent(t,null))}var r=ct("div."+SA,t);return!y(i)&&r&&this.preventExpand&&"true"!==t.getAttribute("aria-expanded")&&(et([r],SA),t.setAttribute("aria-expanded","false"),tt([r],xA)),i},e.prototype.updateElement=function(t,e){if(e&&0===t.childElementCount){var i=ct("div."+OA,e);at(t),at(i);var n=this.getId(e);this.updateField(this.treeData,this.fields,n,"hasChildren",!1),this.removeExpand(e,!0)}},e.prototype.updateAriaLevel=function(t){var e=this.parents(t,"."+EA).length;t.setAttribute("aria-level",""+e),this.updateChildAriaLevel(ct("."+EA,t),e+1)},e.prototype.updateChildAriaLevel=function(t,e){if(!y(t))for(var i=t.childNodes,n=0,s=i.length;n<s;n++){var r=i[parseInt(n.toString(),10)];r.setAttribute("aria-level",""+e),this.updateChildAriaLevel(ct("."+EA,r),e+1)}},e.prototype.renderVirtualEle=function(t){var e,i=t.event,n=this.getOffsetY(i,t.target);n>t.target.offsetHeight-2?e=!1:n<2&&(e=!0);var s=this.createElement("div",{className:FA}),r=this.fullRowSelect?e?1:2:e?0:1;t.target.insertBefore(s,t.target.children[parseInt(r.toString(),10)])},e.prototype.removeVirtualEle=function(){var t=ct("."+FA);t&&at(t)},e.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},e.prototype.getDragEvent=function(t,e,i,n,s,r,o,a){var l=i?ut(i,"."+wA):null,h=l?this.getNodeData(l):null,c=e?e.dragLi:s,d=e?e.dragData:null,p=i?this.parents(i,"."+wA):null,u=e.dragLi.parentElement,g=e.dragLi?ut(u,"."+wA):null,m=null,f=null,y=[YA,WA,_A,QA],v=null,b=!0===a?c:l,C=b?ut(b,".e-list-parent"):null,I=0,M=null;if(g=e.dragLi&&null===g?ut(u,"."+IA):g,g=!0===a?this.dragParent:g,r)for(;I<4;){if(ct("."+OA,r).classList.contains(y[parseInt(I.toString(),10)])){v=y[parseInt(I.toString(),10)];break}I++}if(C){var S=0;for(I=0;I<C.childElementCount;I++){if(S=!0!==a&&C.children[parseInt(I.toString(),10)]===c&&l!==c?++S:S,!0!==a&&C.children[parseInt(I.toString(),10)].classList.contains("e-hover")){f=t.offsetY>=23?I+1:I;break}if(C.children[parseInt(I.toString(),10)]===b){t.offsetY,f=I;break}}f=0!==S?--f:f,M=this.isDropIn?"Inside":t.offsetY<7?"Before":"After"}if(i&&(m=0===p.length?null:i.classList.contains(wA)?p[0]:p[1]),l===c&&(m=l),i&&n.offsetHeight<=33&&t.offsetY<n.offsetHeight-10&&t.offsetY>6&&(m=l,!0!==a)){o=++o;var x=m?ct(".e-list-parent",m):null;if(f=x?x.children.length:0,!(this.fields.dataSource instanceof dC)&&null===x&&m){var w=m.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,m.getAttribute("data-uid").toString()):null;f=w?w.length:0}}return{cancel:!1,clonedNode:r,event:t,draggedNode:c,draggedNodeData:d,droppedNode:l,droppedNodeData:h,dropIndex:f,dropLevel:o,draggedParentNode:g,dropTarget:m,dropIndicator:v,target:n,position:M}},e.prototype.addFullRow=function(t){var e=this.liList.length;if(t)for(var i=0;i<e;i++)this.createFullRow(this.liList[parseInt(i.toString(),10)]);else for(i=0;i<e;i++){at(ct("."+ZA,this.liList[parseInt(i.toString(),10)]))}},e.prototype.createFullRow=function(t){var e=this.createElement("div",{className:ZA});t.insertBefore(e,t.childNodes[0])},e.prototype.addMultiSelect=function(t){if(t)for(var e=0,i=dt("."+wA+':not([aria-selected="true"])',this.element);e<i.length;e++){i[e].setAttribute("aria-selected","false")}else for(var n=0,s=dt("."+wA+'[aria-selected="false"]',this.element);n<s.length;n++){s[n].removeAttribute("aria-selected")}},e.prototype.collapseByLevel=function(t,e,i,n){if(n=y(n)?1:n,e>0&&!y(t))for(var s=this.getVisibleNodes(i,t.childNodes),r=0,o=s.length;r<o;r++){var a=s[parseInt(r.toString(),10)],l=ct("."+SA,ct("."+kA,a));n>=e&&!y(l)&&this.collapseNode(a,l,null),this.collapseByLevel(ct("."+EA,a),e,i,n+1)}},e.prototype.collapseAllNodes=function(t){for(var e=this.getVisibleNodes(t,dt("."+SA,this.element)),i=0,n=e.length;i<n;i++){var s=e[parseInt(i.toString(),10)],r=ut(s,"."+wA);this.collapseNode(r,s,null)}},e.prototype.expandByLevel=function(t,e,i){if(e>0&&!y(t))for(var n=this.getVisibleNodes(i,t.childNodes),s=0,r=n.length;s<r;s++){var o=n[parseInt(s.toString(),10)],a=ct("."+xA,ct("."+kA,o));y(a)||this.expandAction(o,a,null),this.expandByLevel(ct("."+EA,o),e-1,i)}},e.prototype.expandAllNodes=function(t){for(var e=0,i=this.getVisibleNodes(t,dt("."+xA,this.element));e<i.length;e++){var n=i[e],s=ut(n,"."+wA);this.expandAction(s,n,null,!0,null,!0)}},e.prototype.getVisibleNodes=function(t,e){var i=Array.prototype.slice.call(e);if(t)for(var n=0;n<i.length;n++)nt(i[parseInt(n.toString(),10)])||(i.splice(n,1),n--);return i},e.prototype.removeNode=function(t){var e=ut(t,"."+EA),i=ut(e,"."+wA);y(this.nodeTemplateFn)||this.destroyTemplate(t),at(t),this.updateElement(e,i),this.removeData(t)},e.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},e.prototype.updateList=function(){this.liList=Array.prototype.slice.call(dt("."+wA,this.element))},e.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var t=dt("."+AA,this.element);this.selectGivenNodes(t)},e.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var t=dt('[aria-expanded="true"]',this.element),e=0,i=t.length;e<i;e++)this.addExpand(t[parseInt(e.toString(),10)])},e.prototype.removeData=function(t){if(1===this.dataType){var e=new dC(this.treeData),i=this.getId(t),n={},s=this.isNumberTypeId?parseFloat(i):i;n[this.fields.id]=s,e.remove(this.fields.id,n),this.removeChildNodes(i)}else{i=this.getId(t);this.updateChildField(this.treeData,this.fields,i,null,null,!0)}},e.prototype.removeChildNodes=function(t){for(var e=this.getChildGroup(this.groupedData,t,!1),i=[],n=0,s=e.length;n<s;n++){var r=new dC(this.treeData),o=c(this.fields.id,e[parseInt(n.toString(),10)]).toString(),a={},l=this.isNumberTypeId?parseFloat(o):o;a[this.fields.id]=l;var h=r.remove(this.fields.id,a);i.push(h[0]),this.removeChildNodes(o)}return i},e.prototype.doGivenAction=function(t,e,i){for(var n=0,s=t.length;n<s;n++){var r=this.getElement(t[parseInt(n.toString(),10)]);if(!y(r)){var o=ct("."+e,ct("."+kA,r));y(o)||(i?this.expandAction(r,o,null):this.collapseNode(r,o,null))}}},e.prototype.addGivenNodes=function(t,e,i,n,s){if(0!==t.length){var r=this.getSortedData(t),o=e?parseFloat(e.getAttribute("aria-level"))+1:1;n&&this.updateMapper(o);var a,l,h=ZC.createListItemFromJson(this.createElement,r,this.listBaseOption,o),c=this.getId(e);y(e)||(a=ct("div."+OA,e)),1===this.dataType&&a&&a.classList.contains(xA)&&this.preventExpand&&!y(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),1!==this.dataType&&(this.addChildData(this.treeData,this.fields,c,t,i),this.isFirstRender=!1),l=s||(e?this.expandParent(e):ct("."+EA,this.element));var p=y(i)?null:l.childNodes[parseInt(i.toString(),10)];if(!this.isFirstRender||1===this.dataType){var u=this.expandArgs;if(p||"None"===this.sortOrder){for(var g=0;g<h.length;g++)l.insertBefore(h[parseInt(g.toString(),10)],p);if(!(1!==this.dataType||y(e)||this.preventExpand||y(this.element.offsetParent)||this.element.offsetParent.parentElement.classList.contains("e-filemanager")))this.preventExpand=!1,(m=ct("div."+OA,e))&&m.classList.contains(xA)&&(y(u)||"nodeExpanding"!==u.name)&&this.expandAction(e,m,null)}if(!p&&("Ascending"===this.sortOrder||"Descending"===this.sortOrder))if(0===l.childNodes.length){for(g=0;g<h.length;g++)l.insertBefore(h[parseInt(g.toString(),10)],p);var m;if(!(1!==this.dataType||y(e)||this.preventExpand||y(this.element.offsetParent)||this.element.offsetParent.parentElement.classList.contains("e-filemanager")))this.preventExpand=!1,(m=ct("div."+OA,e))&&m.classList.contains(xA)&&(y(u)||"nodeExpanding"!==u.name)&&this.expandAction(e,m,null)}else{var f=l.childNodes;for(g=0;g<h.length;g++)for(var v=0;v<f.length;v++){if("Ascending"===this.sortOrder?f[parseInt(v.toString(),10)].textContent.toUpperCase()>h[parseInt(g.toString(),10)].innerText.toUpperCase():f[parseInt(v.toString(),10)].textContent.toUpperCase()<h[parseInt(g.toString(),10)].innerText.toUpperCase()){l.insertBefore(h[parseInt(g.toString(),10)],f[parseInt(v.toString(),10)]);break}l.insertBefore(h[parseInt(g.toString(),10)],f[f.length])}}}if(1===this.dataType){this.updateField(this.treeData,this.fields,c,"hasChildren",!0);var b=this.getId(p),C=y(b)?this.treeData.length:this.getDataPos(this.treeData,this.fields,b);for(v=0;v<t.length;v++){if(!y(c)){var I=this.isNumberTypeId?parseFloat(c):c;d(this.fields.parentID,I,t[parseInt(v.toString(),10)])}this.treeData.splice(C,0,t[parseInt(v.toString(),10)]),C++}}this.finalizeNode(l)}},e.prototype.updateMapper=function(t){var e=1===t?this.fields:this.getChildFields(this.fields,t-1,1);this.updateListProp(e)},e.prototype.updateListProp=function(t){var e=this.getActualProperties(t);this.listBaseOption.fields=e,this.listBaseOption.fields.url=Object.prototype.hasOwnProperty.call(e,"navigateUrl")?e.navigateUrl:"navigateUrl"},e.prototype.getDataPos=function(t,e,i){for(var n=null,s=0,r=t.length;s<r;s++){var o=c(e.id,t[parseInt(s.toString(),10)]);if(t[parseInt(s.toString(),10)]&&o&&o.toString()===i)return s;if("string"!=typeof e.child||y(c(e.child,t[parseInt(s.toString(),10)]))){if(this.fields.dataSource instanceof dC&&!y(c("child",t[parseInt(s.toString(),10)]))){var a=c("child",t[parseInt(s.toString(),10)]);if(null!==(n=this.getDataPos(a,this.getChildMapper(e),i)))break}}else{var l=c(e.child,t[parseInt(s.toString(),10)]);if(null!==(n=this.getDataPos(l,this.getChildMapper(e),i)))break}}return n},e.prototype.addChildData=function(t,e,i,n,s){var r;if(y(i)){s=y(s)?t.length:s;for(var o=0,a=n.length;o<a;o++)t.splice(s,0,n[parseInt(o.toString(),10)]),s++;return r}for(var l=0,h=t.length;l<h;l++){var d=c(e.id,t[parseInt(l.toString(),10)]);if(t[parseInt(l.toString(),10)]&&d&&d.toString()===i){if("string"==typeof e.child&&Object.prototype.hasOwnProperty.call(t[parseInt(l.toString(),10)],e.child)&&null!==t[parseInt(l.toString(),10)][e.child]||this.fields.dataSource instanceof dC&&Object.prototype.hasOwnProperty.call(t[parseInt(l.toString(),10)],"child")){y(u=c(p="string"==typeof e.child?e.child:"child",t[parseInt(l.toString(),10)]))&&(u=[]),s=y(s)?u.length:s;for(o=0,a=n.length;o<a;o++)u.splice(s,0,n[parseInt(o.toString(),10)]),s++}else{var p="string"==typeof e.child?e.child:"child";t[parseInt(l.toString(),10)][""+p]=n}return!0}if("string"!=typeof e.child||y(c(e.child,t[parseInt(l.toString(),10)]))){if(this.fields.dataSource instanceof dC&&!y(c("child",t[parseInt(l.toString(),10)]))){var u=c("child",t[parseInt(l.toString(),10)]);if(void 0!==(r=this.addChildData(u,this.getChildMapper(e),i,n,s)))break}}else{var g=c(e.child,t[parseInt(l.toString(),10)]);if(void 0!==(r=this.addChildData(g,this.getChildMapper(e),i,n,s)))break}}return r},e.prototype.doDisableAction=function(t){var e=this.nodeType(t),i=this.checkValidId(e);this.validArr=[];for(var n=0,s=i.length;n<s;n++){var r=i[parseInt(n.toString(),10)][this.fields.id].toString();r&&-1===this.disableNode.indexOf(r)&&this.disableNode.push(r);var o=this.getElement(r);o&&(o.setAttribute("aria-disabled","true"),tt([o],KA))}},e.prototype.doEnableAction=function(t){for(var e=this.nodeType(t),i=0,n=e.length;i<n;i++){var s=this.getElement(e[parseInt(i.toString(),10)]),r=e[parseInt(i.toString(),10)];r&&-1!==this.disableNode.indexOf(r)&&this.disableNode.splice(this.disableNode.indexOf(r),1),s&&(s.removeAttribute("aria-disabled"),et([s],KA))}},e.prototype.nodeType=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var s=void 0;"string"==typeof t[parseInt(i.toString(),10)]?s=t[parseInt(i.toString(),10)]?t[parseInt(i.toString(),10)].toString():null:"object"==typeof t[parseInt(i.toString(),10)]&&(s=t[parseInt(i.toString(),10)]?t[parseInt(i.toString(),10)].getAttribute("data-uid").toString():null),-1===e.indexOf(s)&&e.push(s)}return e},e.prototype.checkValidId=function(t){var e=this;if(1===this.dataType)this.validArr=this.treeData.filter(function(i){return-1!==t.indexOf(i[e.fields.id]?i[e.fields.id].toString():null)});else if(2===this.dataType)for(var i=0;i<this.treeData.length;i++){var n=this.treeData[parseInt(i.toString(),10)][this.fields.id]?this.treeData[parseInt(i.toString(),10)][this.fields.id].toString():null;-1!==t.indexOf(n)&&this.validArr.push(this.treeData[parseInt(i.toString(),10)]);var s=c(this.fields.child.toString(),this.treeData[parseInt(i.toString(),10)]);s&&this.filterNestedChild(s,t)}return this.validArr},e.prototype.filterNestedChild=function(t,e){for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)][this.fields.id]?t[parseInt(i.toString(),10)][this.fields.id].toString():null;-1!==e.indexOf(n)&&this.validArr.push(t[parseInt(i.toString(),10)]);var s=c(this.fields.child.toString(),t[parseInt(i.toString(),10)]);s&&this.filterNestedChild(s,e)}},e.prototype.setTouchClass=function(){var t=ut(this.element,".e-bigger");this.touchClass=y(t)?"":"e-small"},e.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var t=this.selectedNodes,e=0,i=t.length;e<i;e++)this.updateField(this.treeData,this.fields,t[parseInt(e.toString(),10)],"selected",!0);for(var n=this.expandedNodes,s=0,r=n.length;s<r;s++)this.updateField(this.treeData,this.fields,n[parseInt(s.toString(),10)],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var o=this.checkedNodes,a=0;for(r=o.length;a<r;a++)this.updateField(this.treeData,this.fields,o[parseInt(a.toString(),10)],"isChecked",!0)}},e.prototype.removeField=function(t,e,i){if(!y(t)&&!y(e))for(var n=0,s=t.length;n<s;n++){for(var r=0;r<i.length;r++){var o=this.getMapperProp(e,i[parseInt(r.toString(),10)]);y(t[parseInt(n.toString(),10)][""+o])||delete t[parseInt(n.toString(),10)][""+o]}"string"!=typeof e.child||y(c(e.child,t[parseInt(n.toString(),10)]))?this.fields.dataSource instanceof dC&&!y(c("child",t[parseInt(n.toString(),10)]))&&this.removeField(c("child",t[parseInt(n.toString(),10)]),this.getChildMapper(e),i):this.removeField(c(e.child,t[parseInt(n.toString(),10)]),this.getChildMapper(e),i)}},e.prototype.getMapperProp=function(t,e){switch(e){case"selected":return y(t.selected)?"selected":t.selected;case"expanded":return y(t.expanded)?"expanded":t.expanded;case"isChecked":return y(t.isChecked)?"isChecked":t.isChecked;case"hasChildren":return y(t.hasChildren)?"hasChildren":t.hasChildren;default:return e}},e.prototype.updateField=function(t,e,i,n,s){if(!y(i))if(1===this.dataType){var r=this.isNumberTypeId?parseFloat(i):i,o=new dC(this.treeData).executeLocal((new Gb).where(e.id,"equal",r,!1));d(this.getMapperProp(e,n),s,o[0])}else this.updateChildField(t,e,i,n,s)},e.prototype.updateChildField=function(t,e,i,n,s,r){var o;if(y(t))return o;for(var a=0,l=t.length;a<l;a++){var h=c(e.id,t[parseInt(a.toString(),10)]);if(t[parseInt(a.toString(),10)]&&!y(h)&&h.toString()===i)return r?o=t.splice(a,1):(d(this.getMapperProp(e,n),s,t[parseInt(a.toString(),10)]),o=[]),o;if("string"!=typeof e.child||y(c(e.child,t[parseInt(a.toString(),10)]))){if(this.fields.dataSource instanceof dC&&!y(c("child",t[parseInt(a.toString(),10)]))){var p=c("child",t[parseInt(a.toString(),10)]);if(void 0!==(o=this.updateChildField(p,this.getChildMapper(e),i,n,s,r)))break}}else{var u=c(e.child,t[parseInt(a.toString(),10)]);if(void 0!==(o=this.updateChildField(u,this.getChildMapper(e),i,n,s,r)))break}}return o},e.prototype.triggerEvent=function(t,e){if(this.renderReactTemplates(),"addNodes"===t){for(var i=[],n=0;n<e.length;n++)i.push(this.getNode(this.getElement(y(e[parseInt(n.toString(),10)][this.fields.id])?c(this.fields.id,e[parseInt(n.toString(),10)]).toString():null)));e=i}var s={data:this.treeData,action:t,nodeData:e};this.trigger("dataSourceChanged",s)},e.prototype.wireInputEvents=function(t){K.add(t,"blur",this.inputFocusOut,this)},e.prototype.wireEditingEvents=function(t){var e=this;t&&!this.disabled?this.touchEditObj=new ci(this.element,{tap:function(t){e.isDoubleTapped(t)&&2===t.tapCount&&(t.originalEvent.preventDefault(),e.editingHandler(t.originalEvent))}}):this.touchEditObj&&this.touchEditObj.destroy()},e.prototype.wireClickEvent=function(t){var e=this;t?this.touchClickObj=new ci(this.element,{tap:function(t){e.clickHandler(t)}}):this.touchClickObj&&this.touchClickObj.destroy()},e.prototype.wireExpandOnEvent=function(t){var e=this;t?this.touchExpandObj=new ci(this.element,{tap:function(t){("Click"===e.expandOnType||"DblClick"===e.expandOnType&&e.isDoubleTapped(t)&&2===t.tapCount)&&3!==t.originalEvent.which&&e.expandHandler(t)}}):this.touchExpandObj&&this.touchExpandObj.destroy()},e.prototype.mouseDownHandler=function(t){this.mouseDownStatus=!0,(t.shiftKey||t.ctrlKey)&&t.preventDefault(),t.ctrlKey&&this.allowMultiSelection&&K.add(this.element,"contextmenu",this.preventContextMenu,this)},e.prototype.preventContextMenu=function(t){t.preventDefault()},e.prototype.wireEvents=function(){K.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),K.add(this.element,"mouseover",this.onMouseOver,this),K.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new si(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.unWireEvents=function(){K.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),K.remove(this.element,"mouseover",this.onMouseOver),K.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},e.prototype.parents=function(t,e){for(var i=[],n=t.parentNode;!y(n);)ft(n,e)&&i.push(n),n=n.parentNode;return i},e.prototype.isDoubleTapped=function(t){var e,i=t.originalEvent.target;return i&&t.tapCount&&(1===t.tapCount?this.firstTap=ut(i,"."+wA):2===t.tapCount&&(e=ut(i,"."+wA))),this.firstTap===e},e.prototype.isDescendant=function(t,e){for(var i=e.parentNode;!y(i);){if(i===t)return!0;i=i.parentNode}return!1},e.prototype.showSpinner=function(t){tt([t],NA),mc({target:t,width:G.isDevice?16:14},this.createElement),Ac(t)},e.prototype.hideSpinner=function(t){Lc(t),t.innerHTML="",et([t],NA)},e.prototype.setCheckedNodes=function(t){(t=JSON.parse(JSON.stringify(t))).length>1&&"function"==typeof this.nodeChecked&&this.nodeChecked.length>0&&(this.isFilter=!0),this.uncheckAll(this.checkedNodes),this.setIndeterminate(t),t.length>0&&this.checkAll(t)},e.prototype.setValidCheckedNode=function(t,e){if(void 0===e&&(e=[]),1===this.dataType){var i=this.fields,n=new dC(this.treeData).executeLocal((new Gb).where(i.id,"equal",t,!0));if(n[0]&&(this.setChildCheckState(n,t,n[0],e),this.autoCheck)){for(var s=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,r=this.getChildNodes(this.treeData,s),o=0,a=0;a<r.length;a++){var l=r[parseInt(a.toString(),10)][this.fields.id].toString();-1!==this.checkedNodes.indexOf(l)&&o++}o===r.length&&-1===this.checkedNodes.indexOf(s)&&s&&this.checkDisabledState(s)}}else if(2===this.dataType)for(var h=0;h<this.treeData.length;h++){if((this.treeData[parseInt(h.toString(),10)][this.fields.id]?this.treeData[parseInt(h.toString(),10)][this.fields.id].toString():"")===t&&-1===this.checkedNodes.indexOf(t)){this.checkDisabledState(t);break}var d=c(this.fields.child.toString(),this.treeData[parseInt(h.toString(),10)]);d&&this.setChildCheckState(d,t,this.treeData[parseInt(h.toString(),10)],e)}},e.prototype.setChildCheckState=function(t,e,i,n){var s;void 0===n&&(n=[]);var r=0;if(1===this.dataType){i&&(s=i[this.fields.id]?i[this.fields.id].toString():null);for(var o=0;o<t.length;o++){var a=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():null;i&&s&&this.autoCheck&&-1!==this.checkedNodes.indexOf(s)&&-1===this.checkedNodes.indexOf(a)&&this.checkDisabledState(a,t[o]),a===e&&-1===this.checkedNodes.indexOf(e)&&this.checkDisabledState(e);var l=this.getChildNodes(this.treeData,a),h=1===n.length&&n[0]===a;(l.length===e.length||h)&&this.setChildCheckState(l,e,i)}}else{i&&(s=i[this.fields.id]?i[this.fields.id].toString():"");for(o=0;o<t.length;o++){var d=t[parseInt(o.toString(),10)][this.fields.id]?t[parseInt(o.toString(),10)][this.fields.id].toString():"";h=0===n.length;i&&s&&this.autoCheck&&(-1===this.checkedNodes.indexOf(s)||-1!==this.checkedNodes.indexOf(d)||d!==e&&!h||this.checkDisabledState(d,t[o])),d===e&&-1===this.checkedNodes.indexOf(e)&&this.checkDisabledState(e),(l=c(this.fields.child.toString(),t[parseInt(o.toString(),10)]))&&this.setChildCheckState(l,e,t[parseInt(o.toString(),10)]),-1!==this.checkedNodes.indexOf(d)&&this.autoCheck&&r++,r===t.length&&-1===this.checkedNodes.indexOf(s)&&this.autoCheck&&this.checkDisabledState(s,i)}}},e.prototype.setIndeterminate=function(t){for(var e=0;e<t.length;e++)this.setValidCheckedNode(t[parseInt(e.toString(),10)],t)},e.prototype.updatePosition=function(t,e,i,n){if(1===this.dataType){var s=this.getDataPos(this.treeData,this.fields,t);if(this.treeData.splice(s,1,e),i){this.removeChildNodes(t);for(var r=0;r<n.length;r++)this.treeData.splice(s,0,n[parseInt(r.toString(),10)]),s++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,t,[e],void 0)},e.prototype.updateChildPosition=function(t,e,i,n,s){for(var r,o=0,a=t.length;o<a;o++){var l=c(e.id,t[parseInt(o.toString(),10)]);if(t[parseInt(o.toString(),10)]&&l&&l.toString()===i)return t[parseInt(o.toString(),10)]=n[0],!0;if("string"!=typeof e.child||y(c(e.child,t[parseInt(o.toString(),10)]))){if(this.fields.dataSource instanceof dC&&!y(c("child",t[parseInt(o.toString(),10)]))){var h=c("child",t[parseInt(o.toString(),10)]);if(void 0!==(r=this.updateChildPosition(h,this.getChildMapper(e),i,n,s)))break}}else{var d=c(e.child,t[parseInt(o.toString(),10)]);if(void 0!==(r=this.updateChildPosition(d,this.getChildMapper(e),i,n,s)))break}}return r},e.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},e.prototype.crudOperation=function(t,e,i,n,s,r,o){var a,l=this,h=this.fields.dataSource,c=[],d=this.getQuery(this.fields),p=this.fields.id,u={addedRecords:[],deletedRecords:[],changedRecords:[]},g=[];e?g=this.nodeType(e):i&&("string"==typeof i?g[0]=i.toString():"object"==typeof i&&(g[0]=i.getAttribute("data-uid").toString()));for(var m=0,f=g.length;m<f;m++){if(!y(this.getElement(g[parseInt(m.toString(),10)]))){var v=this.getNodeObject(g[parseInt(m.toString(),10)]);c.push(v)}}switch(t){case"delete":1===e.length?a=h.remove(p,c[0],d.fromTable,d):(u.deletedRecords=c,a=h.saveChanges(u,p,d.fromTable,d)),a.then(function(){return l.deleteSuccess(g)}).catch(function(t){return l.dmFailure(t)});break;case"update":c[0][this.fields.text]=n,(a=h.update(p,c[0],d.fromTable,d)).then(function(){return l.editSucess(i,n,o)}).catch(function(t){return l.dmFailure(t,i,o)});break;case"insert":if(1===s.length)a=h.insert(s[0],d.fromTable,d);else{var b=[];for(m=0,f=s.length;m<f;m++)b.push(s[parseInt(m.toString(),10)]);u.addedRecords=b,a=h.saveChanges(u,p,d.fromTable,d)}a.then(function(){var t=l.getElement(i);l.addSuccess(s,t,r),l.preventExpand=!1}).catch(function(t){return l.dmFailure(t)})}},e.prototype.deleteSuccess=function(t){for(var e=[],i=0,n=t.length;i<n;i++){var s=this.getElement(t[parseInt(i.toString(),10)]);e.push(this.getNode(s)),y(s)||this.removeNode(s)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent("removeNode",e)},e.prototype.editSucess=function(t,e,i){var n=this.getElement(t),s=ct("."+DA,n);this.appendNewText(n,s,e,i)},e.prototype.addSuccess=function(t,e,i){var n,s=this,r=e?e.querySelector("."+OA):null;e&&r&&r.classList.contains(xA)&&null===e.querySelector("."+EA)?this.renderChildNodes(e,null,function(){n=e.querySelector("."+EA),s.addGivenNodes(t,e,i,!0,n),s.triggerEvent("addNodes",t)}):(this.addGivenNodes(t,e,i,!0),this.triggerEvent("addNodes",t))},e.prototype.dmFailure=function(t,e,i){e&&this.updatePreviousText(e,i),this.trigger("actionFailure",{error:t})},e.prototype.updatePreviousText=function(t,e){var i=this.getElement(t),n=ct("."+DA,i);this.updateText(i,n,this.oldText,e)},e.prototype.getHierarchicalParentId=function(t,e,i){var n=this,s=e.findIndex(function(e){return e[n.fields.id]&&e[n.fields.id].toString()===t});if(-1===s)for(var r=0;r<e.length;r++){var o=c(this.fields.child.toString(),e[parseInt(r.toString(),10)]);if(!y(o)){if(s=o.findIndex(function(e){return e[n.fields.id]&&e[n.fields.id].toString()===t}),-1!==s){i.push(e[parseInt(r.toString(),10)][this.fields.id].toString()),this.getHierarchicalParentId(e[parseInt(r.toString(),10)][this.fields.id].toString(),this.treeData,i);break}this.getHierarchicalParentId(t,o,i)}}return i},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var s=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(s,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":JSON.stringify(e.checkedNodes)!==JSON.stringify(t.checkedNodes)&&this.showCheckBox&&(this.checkedNodes=e.checkedNodes,this.setCheckedNodes(t.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=t.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:y(t.expandedNodes)?[]:t.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"===this.expandOnType||this.disabled||this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.isReact&&(!this.isReact||this.fields.dataSource instanceof dC)||(this.element.classList.contains("e-filtering")||(this.DDTTreeData=JSON.parse(JSON.stringify(this.fields.dataSource))),this.reRenderNodes()),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var r=this.element.querySelectorAll("li"),o=0;o<r.length;)"true"!==r[parseInt(o.toString(),10)].getAttribute("aria-expanded")&&this.renderChildNodes(r[parseInt(o.toString(),10)],!0,null,!0),o++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:t.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"checkDisabledChildren":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:t.fullRowNavigable},!0),this.listBaseOption.itemNavigable=t.fullRowNavigable,this.reRenderNodes()}}},e.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),this.ulElement=null,this.liList=null,this.startNode=null,this.firstTap=null,this.expandArgs=null,this.dragLi=null,this.dragTarget=null,this.dragParent=null,this.dragObj=null,this.dropObj=null,this.inputObj=null,this.touchEditObj=null,this.touchExpandObj=null,this.touchClickObj=null,t.prototype.destroy.call(this)},e.prototype.addNodes=function(t,e,i,n){if(!y(t)){t=JSON.parse(JSON.stringify(t));var s=this.getElement(e);if(this.preventExpand=n,this.fields.dataSource instanceof dC)this.isOffline?this.addSuccess(t,s,i):this.crudOperation("insert",null,e,null,t,i,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(t,s,i);else{if(s)this.addGivenNodes(t,s,i);else{t=this.getSortedData(t);for(var r=0;r<t.length;r++){var o=c(this.fields.parentID,t[parseInt(r.toString(),10)]);s=o?this.getElement(o.toString()):o,!y(o)&&y(s)&&(this.isHiddenItem=!0,this.preventExpand=!1,this.ensureVisible(o),this.preventExpand=n,this.isHiddenItem=!1,s=this.getElement(o.toString())),this.addGivenNodes([t[parseInt(r.toString(),10)]],s,i)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}y(ct("."+wA+'[tabindex="0"]',this.element))&&this.setNodeFocusable(),this.updateCheckedStateFromDS(),this.showCheckBox&&s&&this.ensureParentCheckState(s),this.fields.dataSource instanceof dC==!1&&(this.preventExpand=!1,this.triggerEvent("addNodes",t))}},e.prototype.beginEdit=function(t){var e=this.getElement(t);y(e)||this.disabled||this.createTextbox(e)},e.prototype.checkAll=function(t){this.showCheckBox&&this.doCheckBoxAction(t,!0)},e.prototype.collapseAll=function(t,e,i){y(t)?e>0?this.collapseByLevel(ct("."+EA,this.element),e,i):this.collapseAllNodes(i):this.doGivenAction(t,SA,!1)},e.prototype.disableNodes=function(t){y(t)||this.doDisableAction(t)},e.prototype.enableNodes=function(t){y(t)||this.doEnableAction(t)},e.prototype.ensureVisible=function(t){var e=[];if(1===this.dataType)for(var i=this.getTreeData(t);0!==i.length&&!y(i[0][this.fields.parentID]);)e.push(i[0][this.fields.parentID].toString()),i=this.getTreeData(i[0][this.fields.parentID].toString());else 2===this.dataType&&(e=this.getHierarchicalParentId(t,this.treeData,e));this.expandAll(e.reverse(),null,null,this.isHiddenItem);var n=this.getElement(t);if(!y(n)){if("object"==typeof t){var s=this.parents(n,"."+wA);this.expandAll(s)}setTimeout(function(){n.scrollIntoView({behavior:"smooth"})},450)}},e.prototype.expandAll=function(t,e,i,n){this.isAnimate=!n,y(t)?e>0?this.expandByLevel(ct("."+EA,this.element),e,i):(this.expandAllNodes(i),this.loadOnDemand&&!this.element.classList.contains("e-filtering")||(this.updateAttributes(this.element),this.updateList())):this.doGivenAction(t,xA,!0),this.isAnimate=!0},e.prototype.getAllCheckedNodes=function(){return this.checkedNodes},e.prototype.getDisabledNodes=function(){return this.disableNode},e.prototype.getNode=function(t){var e=this.getElement(t);return this.getNodeData(e,!0)},e.prototype.getTreeData=function(t){var e=this.getId(t);if(this.updatePersistProp(),y(e))return this.treeData;var i=this.getNodeObject(e);return y(i)?[]:[i]},e.prototype.moveNodes=function(t,e,i,n){if(!y(t)&&0!==t.length){var s=this.getElement(e),r=[];y(s)&&(this.isHiddenItem=!0,this.ensureVisible(e),this.isHiddenItem=!1,s=this.getElement(e));for(var o=0;o<t.length;o++){var a=this.getElement(t[parseInt(o.toString(),10)]);r.push(this.getNode(a)),y(a)||s.isSameNode(a)||this.isDescendant(a,s)||(this.preventExpand=n,this.dropAsChildNode(a,s,this,i,null,null,null,s))}this.fields.dataSource instanceof dC==!1&&(this.preventExpand=!1),this.triggerEvent("moveNodes",r)}},e.prototype.refreshNode=function(t,e){if(!y(t)&&!y(e)){var i=!1;if(1===this.dataType&&e.length>1)i=!0;else if(2===this.dataType&&1===e.length){y(c(this.fields.child.toString(),e[0]))||(i=!0)}var n,s,r=this.getElement(t),o=r?r.getAttribute("data-uid"):t?t.toString():null;if(this.refreshData=this.getNodeObject(o),e=JSON.parse(JSON.stringify(e)),1===this.dataType&&i){for(var a=0;a<e.length;a++)if(y(e[parseInt(a.toString(),10)][this.fields.parentID])){s=e[parseInt(a.toString(),10)],e.splice(a,1);break}n=f({},this.refreshData,s)}else n=f({},this.refreshData,e[0]);if(y(r))this.updatePosition(o,n,i,e);else{this.isRefreshed=!0;var l=parseFloat(r.getAttribute("aria-level")),h=ZC.createListItemFromJson(this.createElement,[n],this.listBaseOption,l),d=ct("."+EA,r),p=c(this.fields.child.toString(),n);if(i&&d||i&&!y(p)){var u=r.parentElement,g=Array.prototype.indexOf.call(u.childNodes,r);lt(r),u.insertBefore(h[0],u.childNodes[parseInt(g.toString(),10)]),this.updatePosition(o,n,i,e),i&&d&&this.expandAll([o])}else{var v=ct("."+kA,r),b=ct("."+kA,h[0]),C=ct("div."+OA,v),I=ct("div."+OA,b);C&&I&&(I.classList.contains(xA)&&C.classList.contains(SA)?(et([I],xA),tt([I],SA)):I.classList.contains(SA)&&C.classList.contains(xA)?(et([I],SA),tt([I],xA)):C.classList.contains("interaction")&&tt([I],"interaction")),lt(v);var M=ct("."+ZA,r);M.parentNode.insertBefore(b,M.nextSibling),this.updatePosition(o,n,i,e)}if(r=this.getElement(t),n[this.fields.tooltip]&&r.setAttribute("title",n[this.fields.tooltip]),Object.prototype.hasOwnProperty.call(n,this.fields.htmlAttributes)&&n[this.fields.htmlAttributes]){var S={};m(S,n[this.fields.htmlAttributes]),S.class?(tt([r],S.class.split(" ")),delete S.class):ht(r,S)}-1!==this.selectedNodes.indexOf(o)&&(r.setAttribute("aria-selected","true"),tt([r],AA)),this.isRefreshed=!1,this.triggerEvent("refreshNode",[this.getNode(r)])}}},e.prototype.removeNodes=function(t){y(t)||(this.fields.dataSource instanceof dC&&!this.isOffline?this.crudOperation("delete",t):this.deleteSuccess(t))},e.prototype.updateNode=function(t,e){var i=this;if(!y(t)&&!y(e)&&this.allowEditing){var n=this.getElement(t);if(!y(n)){var s=ct("."+DA,n);this.updateOldText(n);var r=this.getEditEvent(n,null,null);this.trigger("nodeEditing",r,function(r){r.cancel||(i.fields.dataSource instanceof dC&&!i.isOffline?i.crudOperation("update",null,t,e,null,null,!1):i.appendNewText(n,s,e,!1))})}}},e.prototype.uncheckAll=function(t){this.showCheckBox&&this.checkedNodes.length>0&&this.doCheckBoxAction(t,!1)},e.prototype.setNodeFocusable=function(){var t=ct("."+wA,this.element);t&&(t.setAttribute("tabindex","0"),this.updateIdAttr(null,t))},CA([jt(!1)],e.prototype,"allowDragAndDrop",void 0),CA([jt(!1)],e.prototype,"allowEditing",void 0),CA([jt(!1)],e.prototype,"allowMultiSelection",void 0),CA([jt(!1)],e.prototype,"allowTextWrap",void 0),CA([Bt({},dN)],e.prototype,"animation",void 0),CA([jt()],e.prototype,"checkedNodes",void 0),CA([jt(!0)],e.prototype,"checkDisabledChildren",void 0),CA([jt("")],e.prototype,"cssClass",void 0),CA([jt(!1)],e.prototype,"disabled",void 0),CA([jt(null)],e.prototype,"dragArea",void 0),CA([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),CA([jt(!1)],e.prototype,"enablePersistence",void 0),CA([jt()],e.prototype,"expandedNodes",void 0),CA([jt("Auto")],e.prototype,"expandOn",void 0),CA([Bt({},hN)],e.prototype,"fields",void 0),CA([jt(!0)],e.prototype,"fullRowSelect",void 0),CA([jt(!0)],e.prototype,"loadOnDemand",void 0),CA([jt()],e.prototype,"locale",void 0),CA([jt()],e.prototype,"nodeTemplate",void 0),CA([jt()],e.prototype,"selectedNodes",void 0),CA([jt("None")],e.prototype,"sortOrder",void 0),CA([jt(!1)],e.prototype,"showCheckBox",void 0),CA([jt(!1)],e.prototype,"checkOnClick",void 0),CA([jt(!0)],e.prototype,"autoCheck",void 0),CA([jt(!1)],e.prototype,"fullRowNavigable",void 0),CA([Ut()],e.prototype,"actionFailure",void 0),CA([Ut()],e.prototype,"created",void 0),CA([Ut()],e.prototype,"dataBound",void 0),CA([Ut()],e.prototype,"dataSourceChanged",void 0),CA([Ut()],e.prototype,"drawNode",void 0),CA([Ut()],e.prototype,"destroyed",void 0),CA([Ut()],e.prototype,"keyPress",void 0),CA([Ut()],e.prototype,"nodeChecked",void 0),CA([Ut()],e.prototype,"nodeChecking",void 0),CA([Ut()],e.prototype,"nodeClicked",void 0),CA([Ut()],e.prototype,"nodeCollapsed",void 0),CA([Ut()],e.prototype,"nodeCollapsing",void 0),CA([Ut()],e.prototype,"nodeDragging",void 0),CA([Ut()],e.prototype,"nodeDragStart",void 0),CA([Ut()],e.prototype,"nodeDragStop",void 0),CA([Ut()],e.prototype,"nodeDropped",void 0),CA([Ut()],e.prototype,"nodeEdited",void 0),CA([Ut()],e.prototype,"nodeEditing",void 0),CA([Ut()],e.prototype,"nodeExpanded",void 0),CA([Ut()],e.prototype,"nodeExpanding",void 0),CA([Ut()],e.prototype,"nodeSelected",void 0),CA([Ut()],e.prototype,"nodeSelecting",void 0),e=i=CA([Ft],e)}(_e),uN=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),gN=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},mN="e-sidebar",fN="e-close",yN="e-open",vN="e-transition",bN="e-sidebar-overlay",CN="e-right",IN="e-left",MN="e-over",SN="e-push",xN="e-slide",wN="e-visibility",DN="e-disable-animation",EN="e-sidebar-context",TN="e-sidebar-absolute",AN=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.documentClickContext=n.documentclickHandler.bind(n),n}return uN(e,t),e.prototype.preRender=function(){this.setWidth()},e.prototype.render=function(){this.initialize(),this.wireEvents(),this.renderComplete()},e.prototype.initialize=function(){this.setTarget(),this.addClass(),this.setZindex(),this.enableDock&&this.setDock(),this.isOpen?(this.show(),this.firstRender=!0):this.setMediaQuery(),this.checkType(!0),this.setType(this.type),this.setCloseOnDocumentClick(),this.setEnableRTL(),G.isDevice&&(this.windowWidth=window.innerWidth)},e.prototype.setEnableRTL=function(){(this.enableRtl?tt:et)([this.element],"e-rtl")},e.prototype.setTarget=function(){this.targetEle=this.element.nextElementSibling,this.sidebarEleCopy=this.element.cloneNode(!0),"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),this.target&&(this.target.insertBefore(this.element,this.target.children[0]),tt([this.element],TN),tt([this.target],EN),this.targetEle=this.getTargetElement())},e.prototype.getTargetElement=function(){for(var t=this.element.nextElementSibling;!y(t)&&t.classList.contains(mN);)t=t.nextElementSibling;return t},e.prototype.setCloseOnDocumentClick=function(){this.closeOnDocumentClick?(document.addEventListener("mousedown",this.documentClickContext),document.addEventListener("touchstart",this.documentClickContext)):(document.removeEventListener("mousedown",this.documentClickContext),document.removeEventListener("touchstart",this.documentClickContext))},e.prototype.setWidth=function(){this.enableDock&&"Left"===this.position||this.enableDock&&"Right"===this.position?gt(this.element,{width:this.setDimension(this.dockSize)}):this.enableDock||gt(this.element,{width:this.setDimension(this.width)})},e.prototype.setDimension=function(t){return t="number"==typeof t?S(t):"string"==typeof t?t.match(/px|%|em/)?t:S(t):"100%"},e.prototype.setZindex=function(){gt(this.element,{"z-index":""+this.zIndex})},e.prototype.addClass=function(){"EJS-SIDEBAR"===this.element.tagName&&tt([this.element],"e-sidebar-display");var t=document.querySelector(".e-main-content");y(t||this.targetEle)||tt([t||this.targetEle],["e-content-animation"]),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):null,this.enableDock||"Auto"===this.type||tt([this.element],[wN]),et([this.element],[yN,fN,CN,IN,xN,SN,MN]),this.element.classList.add(mN),tt([this.element],"Right"===this.position?CN:IN),this.enableDock&&tt([this.element],"e-dock"),y(this.tabIndex)||this.element.setAttribute("tabindex",this.tabIndex),"Auto"===this.type&&!G.isDevice&&this.checkMediaQuery()?this.show():this.isOpen||tt([this.element],[fN,DN])},e.prototype.checkType=function(t){"Push"!==this.type&&"Over"!==this.type&&"Slide"!==this.type?this.type="Auto":this.element.classList.contains(fN)||t||this.hide()},e.prototype.transitionEnd=function(t){this.setDock(),y(t)||this.firstRender||this.triggerChange(),this.firstRender=!1,K.remove(this.element,"transitionend",this.transitionEnd)},e.prototype.destroyBackDrop=function(){var t=document.querySelector(".e-main-content")||this.targetEle;this.target&&this.showBackdrop&&t&&!y(this.defaultBackdropDiv)?(et([this.defaultBackdropDiv],bN),this.defaultBackdropDiv.remove(),this.defaultBackdropDiv=null):this.showBackdrop&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null)},e.prototype.hide=function(t){var e=this,i={model:this,element:this.element,cancel:!1,isInteracted:!y(t),event:t||null};this.trigger("close",i,function(t){if(!t.cancel){if(e.element.classList.contains(fN))return;e.element.classList.contains(yN)&&!e.animate&&e.triggerChange(),tt([e.element],fN),et([e.element],yN),gt(e.element,{width:S(e.enableDock?e.dockSize:e.width)}),e.setType(e.type);var i=document.querySelector(".e-main-content")||e.targetEle;!e.enableDock&&i&&(i.style.transform="translateX(0px)",i.style["Left"===e.position?"marginLeft":"marginRight"]="0px"),e.destroyBackDrop(),e.setAnimation(),"Slide"===e.type&&document.body.classList.remove("e-sidebar-overflow"),e.setProperties({isOpen:!1},!0),e.enableDock&&setTimeout(function(){return e.setTimeOut()},50),K.add(e.element,"transitionend",e.transitionEnd,e)}})},e.prototype.setTimeOut=function(){var t=document.querySelector(".e-main-content")||this.targetEle,e=this.element.getBoundingClientRect().width;!this.element.classList.contains(yN)||!t||"Over"===this.type&&this.enableDock?this.element.classList.contains(fN)&&t&&("Left"===this.position?t.style.marginLeft=this.setDimension("auto"===this.dockSize?e:this.dockSize):t.style.marginRight=this.setDimension("auto"===this.dockSize?e:this.dockSize)):"Left"===this.position?t.style.marginLeft=this.setDimension("auto"===this.width?e:this.width):t.style.marginRight=this.setDimension("auto"===this.width?e:this.width)},e.prototype.show=function(t){var e=this,i={model:this,element:this.element,cancel:!1,isInteracted:!y(t),event:t||null};this.trigger("open",i,function(t){if(!t.cancel){if(et([e.element],[wN,DN]),e.element.classList.contains(yN))return;e.element.classList.contains(fN)&&!e.animate&&e.triggerChange(),tt([e.element],[yN,vN]),gt(e.element,{transform:""}),et([e.element],fN),gt(e.element,{width:S(e.width)}),e.setType(e.type),e.targetEle&&!e.targetEle.querySelector(".e-sidebar-overlay")&&e.createBackDrop(),e.setAnimation(),"Slide"===e.type&&document.body.classList.add("e-sidebar-overflow"),e.setProperties({isOpen:!0},!0),K.add(e.element,"transitionend",e.transitionEnd,e)}})},e.prototype.setAnimation=function(){this.animate?et([this.element],DN):tt([this.element],DN)},e.prototype.triggerChange=function(){var t={name:"change",element:this.element};this.trigger("change",t)},e.prototype.setDock=function(){this.enableDock&&"Left"===this.position&&!this.getState()?gt(this.element,{transform:"translateX(-100%) translateX("+this.setDimension(this.dockSize)+")"}):this.enableDock&&"Right"===this.position&&!this.getState()&&gt(this.element,{transform:"translateX(100%) translateX(-"+this.setDimension(this.dockSize)+")"}),this.element.classList.contains(fN)&&this.enableDock&&gt(this.element,{width:this.setDimension(this.dockSize)})},e.prototype.createBackDrop=function(){if(this.target&&this.showBackdrop&&this.getState()){var t=this.target,e=document.querySelector(".e-main-content")||this.targetEle;this.defaultBackdropDiv=this.createElement("div"),tt([this.defaultBackdropDiv],bN),gt(this.defaultBackdropDiv,{height:t.style.height}),e.appendChild(this.defaultBackdropDiv)}else this.showBackdrop&&!this.modal&&this.getState()&&(this.modal=this.createElement("div"),this.modal.className=bN,this.modal.style.display="block",document.body.appendChild(this.modal))},e.prototype.getPersistData=function(){return this.addOnPersist(["type","position","isOpen"])},e.prototype.getModuleName=function(){return"sidebar"},e.prototype.toggle=function(){this.element.classList.contains(yN)?this.hide():this.show()},e.prototype.getState=function(){return!!this.element.classList.contains(yN)},e.prototype.setMediaQuery=function(){if(this.mediaQuery){("string"==typeof this.mediaQuery?window.matchMedia(this.mediaQuery).matches:this.mediaQuery.matches)&&this.windowWidth!==window.innerWidth?this.show():this.getState()&&this.windowWidth!==window.innerWidth&&this.hide()}},e.prototype.checkMediaQuery=function(){return!!y(this.mediaQuery)||("string"==typeof this.mediaQuery?window.matchMedia(this.mediaQuery).matches:this.mediaQuery.matches)},e.prototype.resize=function(){y(this.width)||"auto"===this.width||"string"!=typeof this.width||this.width.includes("px")||this.setType(this.type),"Auto"===this.type&&(G.isDevice?tt([this.element],MN):tt([this.element],SN)),this.setMediaQuery(),G.isDevice&&(this.windowWidth=window.innerWidth)},e.prototype.documentclickHandler=function(t){ut(t.target,".e-control."+mN)||this.hide(t)},e.prototype.enableGestureHandler=function(t){!this.isOpen&&"Left"===this.position&&"Right"===t.swipeDirection&&t.startX<=20&&t.distanceX>=50&&t.velocity>=.5?this.show():this.isOpen&&"Left"===this.position&&"Left"===t.swipeDirection||this.isOpen&&"Right"===this.position&&"Right"===t.swipeDirection?this.hide(t.originalEvent):!this.isOpen&&"Right"===this.position&&"Left"===t.swipeDirection&&window.innerWidth-t.startX<=20&&t.distanceX>=50&&t.velocity>=.5&&this.show()},e.prototype.setEnableGestures=function(){this.enableGestures?(this.mainContentEle=new ci(document.body,{swipe:this.enableGestureHandler.bind(this)}),this.sidebarEle=new ci(this.element,{swipe:this.enableGestureHandler.bind(this)})):this.mainContentEle&&this.sidebarEle&&(this.mainContentEle.destroy(),this.sidebarEle.destroy())},e.prototype.wireEvents=function(){this.setEnableGestures(),K.add(window,"resize",this.resize,this)},e.prototype.unWireEvents=function(){K.remove(window,"resize",this.resize),K.remove(document,"mousedown touchstart",this.documentclickHandler),this.mainContentEle&&this.mainContentEle.destroy(),this.sidebarEle&&this.sidebarEle.destroy()},e.prototype.onPropertyChanged=function(e,i){for(var n=document.querySelector(".e-main-content")||this.targetEle,s=this.isServerRendered,r=0,o=Object.keys(e);r<o.length;r++){switch(o[r]){case"isOpen":this.isOpen?this.show():this.hide();break;case"width":this.setWidth(),this.getState()||this.setDock();break;case"animate":this.setAnimation();break;case"type":this.checkType(!1),et([this.element],[wN]),this.addClass(),tt([this.element],"Auto"===this.type?G.isDevice?["e-over"]:["e-push"]:["e-"+this.type.toLowerCase()]);break;case"position":this.element.style.transform="",this.setDock(),n&&(n.style["Left"===this.position?"marginRight":"marginLeft"]="0px"),"Right"===this.position?(et([this.element],IN),tt([this.element],CN)):(et([this.element],CN),tt([this.element],IN)),this.setType(this.type);break;case"showBackdrop":this.showBackdrop?this.createBackDrop():this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null);break;case"target":"string"==typeof this.target&&this.setProperties({target:document.querySelector(this.target)},!0),y(this.target)&&(et([this.element],TN),et([i.target],EN),gt(n,{"margin-left":0,"margin-right":0}),document.body.insertAdjacentElement("afterbegin",this.element)),this.isServerRendered=!1,t.prototype.refresh.call(this),this.isServerRendered=s;break;case"closeOnDocumentClick":this.setCloseOnDocumentClick();break;case"enableDock":this.getState()||this.setDock();break;case"zIndex":this.setZindex();break;case"mediaQuery":this.setMediaQuery();break;case"enableGestures":this.setEnableGestures();break;case"enableRtl":this.setEnableRTL()}}},e.prototype.setType=function(t){var e=this.element.getBoundingClientRect().width;this.setZindex();var i=document.querySelector(".e-main-content")||this.targetEle;i&&(i.style.transform="translateX(0px)",G.isDevice||"Auto"===this.type||"Over"===this.type&&this.enableDock||(i.style["Left"===this.position?"marginLeft":"marginRight"]="0px"));var n=(this.position,e+"px"),s="Left"===this.position?e:-e;switch(et([this.element],[SN,MN,xN]),t){case"Push":tt([this.element],[SN]),i&&(this.enableDock||this.element.classList.contains(yN))&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=n);break;case"Slide":tt([this.element],[xN]),i&&(this.enableDock||this.element.classList.contains(yN))&&(i.style.transform="translateX("+s+"px)");break;case"Over":tt([this.element],[MN]),this.enableDock&&(this.element.classList.contains(fN)||this.isOpen)&&i&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=this.setDimension(this.dockSize));break;case"Auto":tt([this.element],[vN]),G.isDevice?i&&this.enableDock&&!this.getState()?(i.style["Left"===this.position?"marginLeft":"marginRight"]=n,tt([this.element],SN)):tt([this.element],MN):(tt([this.element],SN),i&&(this.enableDock||this.element.classList.contains(yN))&&(i.style["Left"===this.position?"marginLeft":"marginRight"]=n)),this.createBackDrop()}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.target&&et([this.target],EN),this.destroyBackDrop(),this.element&&(et([this.element],[yN,fN,SN,xN,MN,IN,CN,vN,DN]),et([this.element],TN),this.element.style.width="",this.element.style.zIndex="",this.element.style.transform="",y(this.sidebarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.windowWidth=null;var e=document.querySelector(".e-main-content")||this.targetEle;y(e)||(e.style.margin="",e.style.transform=""),this.unWireEvents()},gN([jt("auto")],e.prototype,"dockSize",void 0),gN([jt(null)],e.prototype,"mediaQuery",void 0),gN([jt(!1)],e.prototype,"enableDock",void 0),gN([jt("en-US")],e.prototype,"locale",void 0),gN([jt(!1)],e.prototype,"enablePersistence",void 0),gN([jt(!0)],e.prototype,"enableGestures",void 0),gN([jt(!1)],e.prototype,"isOpen",void 0),gN([jt(!1)],e.prototype,"enableRtl",void 0),gN([jt(!0)],e.prototype,"animate",void 0),gN([jt("auto")],e.prototype,"height",void 0),gN([jt(!1)],e.prototype,"closeOnDocumentClick",void 0),gN([jt("Left")],e.prototype,"position",void 0),gN([jt(null)],e.prototype,"target",void 0),gN([jt(!1)],e.prototype,"showBackdrop",void 0),gN([jt("Auto")],e.prototype,"type",void 0),gN([jt("auto")],e.prototype,"width",void 0),gN([jt(1e3)],e.prototype,"zIndex",void 0),gN([Ut()],e.prototype,"created",void 0),gN([Ut()],e.prototype,"close",void 0),gN([Ut()],e.prototype,"open",void 0),gN([Ut()],e.prototype,"change",void 0),gN([Ut()],e.prototype,"destroyed",void 0),e=gN([Ft],e)}(_e),NN=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),LN=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ON="e-icon-right",kN="e-breadcrumb-text",zN="e-breadcrumb-icon",PN="e-breadcrumb-menu",jN="e-breadcrumb-item",BN="e-breadcrumb-popup",HN="e-breadcrumb-wrap-mode",RN="e-breadcrumb-scroll-mode",VN="tabindex",UN="e-disabled",FN="aria-disabled",WN=".";!function(t){t.Hidden="Hidden",t.Collapsed="Collapsed",t.Menu="Menu",t.Wrap="Wrap",t.Scroll="Scroll",t.None="None"}(yA||(yA={}));var YN,_N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return NN(e,t),LN([jt("")],e.prototype,"text",void 0),LN([jt("")],e.prototype,"id",void 0),LN([jt("")],e.prototype,"url",void 0),LN([jt(null)],e.prototype,"iconCss",void 0),LN([jt(!1)],e.prototype,"disabled",void 0),e}(re),QN=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isPopupCreated=!1,n}return NN(e,t),e.prototype.preRender=function(){},e.prototype.render=function(){this.initialize(),this.renderItems(this.items),this.wireEvents()},e.prototype.initialize=function(){this._maxItems=this.maxItems,y(this.element.getAttribute("aria-label"))&&this.element.setAttribute("aria-label","breadcrumb"),this.cssClass&&tt([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&this.element.classList.add("e-rtl"),this.disabled&&(this.element.classList.add(UN),this.element.setAttribute(FN,"true")),"Wrap"===this.overflowMode?this.element.classList.add(HN):"Scroll"===this.overflowMode&&this.element.classList.add(RN),this.initItems(),this.initPvtProps()},e.prototype.initPvtProps=function(){"Hidden"===this.overflowMode&&this._maxItems>0&&(this.endIndex=this.getEndIndex(),this.startIndex=this.endIndex+1-(this._maxItems-1)),"Menu"===this.overflowMode&&(this._maxItems>=0?(this.startIndex=this._maxItems>1?1:0,this.endIndex=this.getEndIndex(),this.popupUl=this.createElement("ul",{attrs:{TABINDEX:"0",role:"menu"}})):this.startIndex=this.endIndex=null)},e.prototype.getEndIndex=function(){var t,e=this;return this.activeItem?this.items.forEach(function(i,n){i.url!==e.activeItem&&i.text!==e.activeItem||(t=n)}):t=this.items.length-1,t},e.prototype.initItems=function(){if(!this.items.length){var t=void 0,e=void 0,i=[];if(this.url){var n=new URL(this.url,window.location.origin);t=n.origin+"/",e=n.href.split(t)[1].split("/")}else t=window.location.origin+"/",e=window.location.href.split(t)[1].split("/");i.push({iconCss:"e-icons e-home",url:t});for(var s=0;s<e.length;s++)e[s]&&(i.push({text:e[s],url:t+e[s]}),t+=e[s]+"/");this.setProperties({items:i},!0)}},e.prototype.renderItems=function(t){var e,i,n=this,s=this.element.classList.contains(ON),r=t.length;if(r){var o,a=void 0,l=void 0,h=0,c=void 0,d=2*r-1,p=!1,u=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-wrapped-ol":""}),g=this.createElement("ol",{className:"Wrap"===this.overflowMode?"e-breadcrumb-first-ol":""}),m=this.hasField(t,"iconCss"),v="Collapsed"===this.overflowMode&&this._maxItems>0&&r>this._maxItems&&!this.isExpanded,b="Hidden"===this.overflowMode&&this._maxItems>0;"Menu"===this.overflowMode&&this.popupUl&&(this.popupUl.innerHTML="");for(var C={moduleName:this.getModuleName(),showIcon:m,itemNavigable:!0,itemCreated:function(t){var e=t.curData.isLastItem;e&&t.item.children.length&&!n.itemTemplate&&(delete t.curData.isLastItem,o||n.enableActiveItemNavigation||(t.item.innerHTML=n.createElement("span",{className:kN,innerHTML:t.item.children[0].innerHTML}).outerHTML)),!t.curData.iconCss||t.curData.text||n.itemTemplate||t.item.classList.add("e-icon-item"),b&&t.item.setAttribute("item-index",h.toString());var i={item:f({},t.curData.properties?t.curData.properties:t.curData),element:t.item,cancel:!1};n.trigger("beforeItemRender",i),p=i.cancel;var r=s||i.element.classList.contains(ON);r&&t.curData.iconCss&&!n.itemTemplate&&t.item.querySelector(".e-anchor-wrap").appendChild(t.item.querySelector(WN+zN)),i.item.disabled&&(t.item.setAttribute(FN,"true"),t.item.classList.add(UN)),i.item.id&&t.item.setAttribute("id",i.item.id),(i.item.disabled||n.disabled)&&t.item.children.length&&!n.itemTemplate&&t.item.children[0].setAttribute(VN,"-1"),t.curData.isEmptyUrl&&(t.item.children[0].removeAttribute("href"),!(!e||e&&n.enableActiveItemNavigation)||i.item.disabled||n.disabled||(t.item.children[0].setAttribute(VN,"0"),K.add(t.item.children[0],"keydown",n.keyDownHandler,n))),t.item.removeAttribute("role"),e&&t.item.setAttribute("data-active-item",""),n.itemTemplate||n.beforeItemRenderChanges(t.curData,i.item,t.item,r)}},I=0;I<d;I%2&&h++,I++)if(a=this.activeItem&&(this.activeItem===t[h].url||this.activeItem===t[h].text),!(v&&I>1&&I<d-2)&&(!b||!(h<this.startIndex||h>this.endIndex)||I%2&&h===this.startIndex-1||0===h)){I%2?(c=this.createElement("div",{className:"e-breadcrumb-item-wrapper"}),this.separatorTemplate&&"/"===this.separatorTemplate||y(this.separatorTemplate)?C.template=Ri(function(){return"/"}):C.template=this.separatorTemplate,C.itemClass="e-breadcrumb-separator",i=!1,e=[{previousItem:t[h],nextItem:t[h+1]}]):(C.itemClass="",this.itemTemplate?(C.template=this.itemTemplate,i=!1):i=!0,(e=[f({},t[h].properties?t[h].properties:t[h])])[0].url||this.itemTemplate||(e=[f({},e[0],{isEmptyUrl:!0,url:"#"})]),l=(b||"Menu"===this.overflowMode)&&h===this.endIndex,((I===d-1||l)&&!this.itemTemplate||a)&&(e[0].isLastItem=!0));var M=u,S=this.startIndex+this.endIndex-this._maxItems;if("Menu"===this.overflowMode&&(h>=this.startIndex&&h<=S&&(!(I%2)||h!==S)&&this.endIndex>=this._maxItems&&this._maxItems>0||0===this._maxItems)){if(I%2)continue;M=this.popupUl,l&&(o=!0)}else"Wrap"===this.overflowMode&&(M=0===I?g:c);var x=ZC.createList(this.createElement,e,C,i,this).childNodes;if(p){if(b||v||"Menu"===this.overflowMode||"Wrap"===this.overflowMode)return t.splice(h,1),this.initPvtProps(),this.reRenderItems();(I===d-1||l)&&lt(M.lastElementChild)}else rt(x,M);if("Wrap"===this.overflowMode&&0!==I&&I%2==0&&u.appendChild(c),v&&1===I){var w=this.createElement("li",{className:"e-icons e-breadcrumb-collapsed",attrs:{TABINDEX:"0"}});K.add(w,"keyup",this.expandHandler,this),u.appendChild(w)}if("Menu"===this.overflowMode&&this.startIndex===I&&this.endIndex>=this._maxItems&&this._maxItems>=0){var D=this.getMenuElement();K.add(D,"keyup",this.keyDownHandler,this),u.appendChild(D)}if(a||l)break;p&&I++}this.isReact&&(this.renderReactTemplates(),setTimeout(function(){n.calculateMaxItems()},5)),"Wrap"===this.overflowMode&&this.element.appendChild(g),this.element.appendChild(u),this.isReact||this.calculateMaxItems()}},e.prototype.calculateMaxItems=function(){if("Hidden"===this.overflowMode||"Collapsed"===this.overflowMode||"Menu"===this.overflowMode){var t=void 0,e=this.element.offsetWidth,i=[].slice.call(this.element.children[0].children).reverse(),n="Menu"===this.overflowMode?0:i[i.length-1].offsetWidth+(i[i.length-2]?i[i.length-2].offsetWidth:0);if("Menu"===this.overflowMode){var s=this.getMenuElement();this.element.appendChild(s),n+=s.offsetWidth,lt(s)}for(var r=0;r<i.length-2;r++){if(n>e){if(t=Math.ceil((r-1)/2)+("Menu"===this.overflowMode&&r<=2?0:1),(this.maxItems>t&&!(this.maxItems>-1&&-1===t)||-1===this.maxItems)&&this._maxItems!==t)return this._maxItems=t,this.initPvtProps(),this.reRenderItems();break}if("Menu"===this.overflowMode&&2===r&&(n+=i[i.length-1].offsetWidth+i[i.length-2].offsetWidth)>e)return this._maxItems=1,this.initPvtProps(),this.reRenderItems();"Menu"===this.overflowMode&&i[r].classList.contains(PN)||(n+=i[r].offsetWidth)}}else if(("Wrap"===this.overflowMode||"Scroll"===this.overflowMode)&&this._maxItems>0){e=0;if((i=this.element.querySelectorAll(WN+jN)).length>this._maxItems+this._maxItems-1){for(r="Wrap"===this.overflowMode?1:0;r<this._maxItems+this._maxItems-1;r++)e+=i[r].offsetWidth;e=e+5+2*parseInt(getComputedStyle(this.element.children[0]).paddingLeft,10),"Wrap"===this.overflowMode?this.element.querySelector(".e-breadcrumb-wrapped-ol").style.width=e+"px":this.element.style.width=e+"px"}}},e.prototype.hasField=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i][""+e])return!0;return!1},e.prototype.getMenuElement=function(){return this.createElement("li",{className:"e-icons e-breadcrumb-menu",attrs:{TABINDEX:"0"}})},e.prototype.beforeItemRenderChanges=function(t,e,i,n){var s=i.querySelector(".e-anchor-wrap");if(s&&s.parentElement.setAttribute("aria-label","home"),e.text!==t.text&&s&&s.childNodes.forEach(function(t){t.nodeType===Node.TEXT_NODE&&(t.textContent=e.text)}),e.iconCss!==t.iconCss&&s){var r=i.querySelector(WN+zN);if(r)e.iconCss?(et([r],t.iconCss.split(" ")),tt([r],e.iconCss.split(" "))):lt(r);else if(e.iconCss){var o=this.createElement("span",{className:zN+" "+e.iconCss});n?rt([o],s):s.insertBefore(o,s.childNodes[0])}}if(e.url!==t.url&&this.enableNavigation){var a=i.querySelector("a."+kN);a&&(e.url?a.setAttribute("href",e.url):a.removeAttribute("href"))}},e.prototype.reRenderItems=function(){"Menu"===this.overflowMode&&this.popupObj&&this.popupObj.element.classList.contains("e-popup-open")&&this.popupObj.element.querySelector(".e-edit-template")&&(this.popupObj.hide(),this.popupObj.destroy(),this.isPopupCreated=!1,at(this.popupObj.element)),this.element.innerHTML="",this.renderItems(this.items)},e.prototype.clickHandler=function(t){var e=ut(t.target,WN+jN+":not(.e-breadcrumb-separator)");if(this.enableNavigation||t.preventDefault(),e&&(ut(t.target,WN+kN)||this.itemTemplate)){var i=void 0;i="Wrap"===this.overflowMode?[].slice.call(this.element.querySelectorAll(WN+jN)).indexOf(e):[].slice.call(e.parentElement.children).indexOf(e),"Menu"===this.overflowMode?ut(t.target,WN+BN)?(i+=this.startIndex,this.endIndex=i,"keydown"===t.type&&this.documentClickHandler(t)):this.element.querySelector(WN+PN)?i>[].slice.call(this.element.children[0].children).indexOf(this.element.querySelector(WN+PN))?(i+=2*this.popupUl.childElementCount-2,i=Math.floor(i/2),this.endIndex=i):this.startIndex=this.endIndex=i:(i=Math.floor(i/2),this.startIndex=this.endIndex=i):i=Math.floor(i/2),"Hidden"===this.overflowMode&&this._maxItems>0&&0!==this.endIndex&&(i=parseInt(e.getAttribute("item-index"),10),this.startIndex>1&&(this.startIndex-=this.endIndex-i),this.endIndex=i);var n={element:e,item:this.items[i],event:t,cancel:!1};if(this.trigger("itemClick",n),n.cancel)return;this.items[i]&&(this.activeItem=this.items[i].url||this.items[i].text),this.dataBind()}t.target.classList.contains("e-breadcrumb-collapsed")&&(this.isExpanded=!0,this.reRenderItems()),t.target.classList.contains(PN)&&!this.isPopupCreated&&this.renderPopup()},e.prototype.renderPopup=function(){var t=this,e=this.createElement("div",{className:BN+" "+this.cssClass+(this.enableRtl?" e-rtl":"")});document.body.appendChild(e),this.isPopupCreated=!0,this.popupObj=new Jr(e,{content:this.popupUl,relateTo:this.element.querySelector(WN+PN),enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},collision:{X:"fit",Y:"flip"},open:function(){t.popupUl&&t.popupUl.focus()}}),this.popupWireEvents(),this.popupObj.show()},e.prototype.documentClickHandler=function(t){"Menu"===this.overflowMode&&this.popupObj&&this.popupObj.element.classList.contains("e-popup-open")&&!ut(t.target,WN+PN)&&!ut(t.target,".e-edit-template")&&(this.popupObj.hide(),this.popupObj.destroy(),this.isPopupCreated=!1,at(this.popupObj.element))},e.prototype.resize=function(){this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems()},e.prototype.expandHandler=function(t){"Enter"===t.key&&(this.isExpanded=!0,this.reRenderItems())},e.prototype.keyDownHandler=function(t){"Enter"===t.key&&this.clickHandler(t)},e.prototype.popupKeyDownHandler=function(t){"Escape"===t.key&&this.documentClickHandler(t)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"items":case"enableActiveItemNavigation":this.reRenderItems();break;case"activeItem":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems();break;case"overflowMode":case"maxItems":this._maxItems=this.maxItems,this.initPvtProps(),this.reRenderItems(),"Wrap"===e.overflowMode?this.element.classList.remove(HN):"Wrap"===t.overflowMode&&this.element.classList.add(HN),"Scroll"===e.overflowMode?this.element.classList.remove(RN):"Scroll"===t.overflowMode&&this.element.classList.add(RN);break;case"url":this.initItems(),this.reRenderItems();break;case"cssClass":e.cssClass&&et([this.element],e.cssClass.split(" ")),t.cssClass&&tt([this.element],t.cssClass.replace(/\s+/g," ").trim().split(" ")),(e.cssClass&&e.cssClass.indexOf(ON)>-1&&!(t.cssClass&&t.cssClass.indexOf(ON)>-1)||!(e.cssClass&&e.cssClass.indexOf(ON)>-1)&&t.cssClass&&t.cssClass.indexOf(ON)>-1)&&this.reRenderItems();break;case"enableRtl":this.element.classList.toggle("e-rtl");break;case"disabled":this.element.classList.toggle(UN),this.element.setAttribute(FN,t.disabled+"")}}},e.prototype.wireEvents=function(){this.delegateClickHanlder=this.documentClickHandler.bind(this),K.add(document,"click",this.delegateClickHanlder,this),K.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resize.bind(this))},e.prototype.popupWireEvents=function(){K.add(this.popupObj.element,"click",this.clickHandler,this),K.add(this.popupObj.element,"keydown",this.popupKeyDownHandler,this)},e.prototype.unWireEvents=function(){K.remove(document,"click",this.delegateClickHanlder),K.remove(this.element,"click",this.clickHandler),window.removeEventListener("resize",this.resize.bind(this)),this.popupObj&&(K.remove(this.popupObj.element,"click",this.clickHandler),K.remove(this.popupObj.element,"keydown",this.popupKeyDownHandler))},e.prototype.getPersistData=function(){return this.addOnPersist(["activeItem"])},e.prototype.getModuleName=function(){return"breadcrumb"},e.prototype.destroy=function(){var e=this;this.popupObj&&this.popupObj.element.classList.contains("e-popup-open")&&(this.popupObj.destroy(),this.isPopupCreated=!1,at(this.popupObj.element));var i=[],n=["aria-label"];this.cssClass&&i.concat(this.cssClass.split(" ")),this.enableRtl&&i.push("e-rtl"),this.disabled&&(i.push(UN),n.push(FN)),"Wrap"===this.overflowMode?i.push(HN):"Scroll"===this.overflowMode&&i.push(RN),this.unWireEvents(),this.element.innerHTML="",et([this.element],i),n.forEach(function(t){e.element.removeAttribute(t)}),t.prototype.destroy.call(this)},LN([jt("")],e.prototype,"url",void 0),LN([Rt([],_N)],e.prototype,"items",void 0),LN([jt("")],e.prototype,"activeItem",void 0),LN([jt(-1)],e.prototype,"maxItems",void 0),LN([jt("Menu")],e.prototype,"overflowMode",void 0),LN([jt("")],e.prototype,"cssClass",void 0),LN([jt(null)],e.prototype,"itemTemplate",void 0),LN([jt("/")],e.prototype,"separatorTemplate",void 0),LN([jt(!0)],e.prototype,"enableNavigation",void 0),LN([jt(!1)],e.prototype,"enableActiveItemNavigation",void 0),LN([jt(!1)],e.prototype,"disabled",void 0),LN([jt("")],e.prototype,"locale",void 0),LN([Ut()],e.prototype,"beforeItemRender",void 0),LN([Ut()],e.prototype,"itemClick",void 0),LN([Ut()],e.prototype,"created",void 0),e=LN([Ft],e)}(_e),ZN=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qN=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},XN="e-carousel",GN="e-active",KN="e-rtl",JN="e-partial",$N="e-swipe",tL="e-carousel-slide-container",eL="e-carousel-items",iL="e-carousel-item",nL="e-previous",sL="e-next",rL="e-carousel-navigators",oL="e-carousel-indicators",aL="e-indicator-bars",lL="e-indicator-bar",hL="e-indicator",cL="e-icons",dL="e-play-pause",pL="e-play-icon",uL="e-pause-icon",gL="e-previous-button",mL="e-next-button",fL="e-play-button",yL="e-flat",vL="e-round",bL="e-hover-arrows",CL="e-carousel-hover",IL="e-template",ML="e-carousel-slide-animation",SL="e-carousel-fade-animation",xL="e-carousel-custom-animation",wL="e-carousel-animation-none",DL="e-prev",EL="e-next",TL="e-transition-start",AL="e-transition-end";!function(t){t[t.Touch=1]="Touch",t[t.Mouse=2]="Mouse"}(YN||(YN={}));var NL,LL=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ZN(e,t),qN([jt()],e.prototype,"cssClass",void 0),qN([jt()],e.prototype,"interval",void 0),qN([jt()],e.prototype,"template",void 0),qN([jt()],e.prototype,"htmlAttributes",void 0),e}(re),OL=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isSwipe=!1,n}return ZN(e,t),e.prototype.getModuleName=function(){return XN.replace("e-","")},e.prototype.getPersistData=function(){return this.addOnPersist(["selectedIndex"])},e.prototype.preRender=function(){this.keyConfigs={home:"home",end:"end",space:"space",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow"};this.localeObj=new ri(this.getModuleName(),{nextSlide:"Next slide",of:"of",pauseSlideTransition:"Pause slide transition",playSlideTransition:"Play slide transition",previousSlide:"Previous slide",slide:"Slide",slideShow:"Slide show"},this.locale)},e.prototype.render=function(){this.initialize(),this.renderSlides(),this.renderNavigators(),this.renderPlayButton(),this.renderIndicators(),this.applyAnimation(),this.wireEvents()},e.prototype.onPropertyChanged=function(t,e){for(var i,n,s=0,r=Object.keys(t);s<r.length;s++){var o=r[s];switch(o){case"animationEffect":this.applyAnimation();break;case"cssClass":mt(this.element,[t.cssClass],[e.cssClass]);break;case"selectedIndex":this.setActiveSlide(this.selectedIndex,e.selectedIndex>this.selectedIndex?"Previous":"Next"),this.autoSlide();break;case"htmlAttributes":y(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element);break;case"enableTouchSwipe":this.element.querySelector("."+eL)&&this.renderTouchActions();break;case"loop":this.loop&&y(this.autoSlideInterval)&&this.applySlideInterval(),this.handleNavigatorsActions(this.selectedIndex),(this.partialVisible||this.swipeMode!==(~YN.Touch&~YN.Mouse))&&this.reRenderSlides();break;case"allowKeyboardInteraction":this.keyModule&&(this.keyModule.destroy(),this.keyModule=null),t.allowKeyboardInteraction&&this.renderKeyboardActions();break;case"enableRtl":if((n=[].slice.call(this.element.querySelectorAll("."+gL+",\n                ."+mL+", ."+fL))).push(this.element),this.enableRtl?tt(n,KN):et(n,KN),this.partialVisible||this.swipeMode!==(~YN.Touch&~YN.Mouse)){var a=this.loop?this.getNumOfItems():0,l=this.itemsContainer.firstElementChild.clientWidth;this.itemsContainer.style.transform=this.getTranslateX(l,this.selectedIndex+a)}break;case"buttonsVisibility":if(i=this.element.querySelector("."+rL))switch(this.buttonsVisibility){case"Hidden":this.resetTemplates(["previousButtonTemplate","nextButtonTemplate"]),lt(i);break;case"VisibleOnHover":tt([].slice.call(i.childNodes),bL);break;case"Visible":et([].slice.call(i.childNodes),bL)}else this.renderNavigators(),this.renderPlayButton();break;case"width":gt(this.element,{width:S(this.width)});break;case"height":gt(this.element,{height:S(this.height)});break;case"autoPlay":this.showPlayButton&&y(this.playButtonTemplate)&&this.playButtonClickHandler(null,!0),this.autoSlide();break;case"interval":this.autoSlide();break;case"showIndicators":case"indicatorsType":(i=this.element.querySelector("."+oL))&&(this.resetTemplates(["indicatorsTemplate"]),lt(i)),this.renderIndicators();break;case"showPlayButton":i=this.element.querySelector("."+dL),!this.showPlayButton&&i&&(lt(i),this.resetTemplates(["playButtonTemplate"])),this.renderPlayButton();break;case"items":case"dataSource":var h="dataSource"===o?this.dataSource:this.items;!y(h)&&h.length>0&&this.selectedIndex>=h.length&&(this.setActiveSlide(h.length-1,"Previous"),this.autoSlide()),this.reRenderSlides(),this.reRenderIndicators();break;case"partialVisible":this.partialVisible?tt([this.element],JN):et([this.element],JN),this.reRenderSlides();break;case"swipeMode":K.remove(this.element,"mousedown touchstart",this.swipeStart),K.remove(this.element,"mousemove touchmove",this.swiping),K.remove(this.element,"mouseup touchend",this.swipStop),this.swipeModehandlers(),this.reRenderSlides()}}},e.prototype.reRenderSlides=function(){var t=this.element.querySelector("."+eL);t&&(this.resetTemplates(["itemTemplate"]),lt(t)),this.renderSlides()},e.prototype.reRenderIndicators=function(){var t=this.element.querySelector("."+oL);t&&(this.resetTemplates(["indicatorsTemplate"]),lt(t)),this.renderIndicators()},e.prototype.initialize=function(){var t=[];t.push(XN),this.cssClass&&t.push(this.cssClass),this.enableRtl&&t.push(KN),this.partialVisible&&t.push(JN),this.swipeMode!==(~YN.Touch&~YN.Mouse)&&t.push($N),tt([this.element],t),gt(this.element,{width:S(this.width),height:S(this.height)}),ht(this.element,{role:"group","aria-roledescription":"carousel","aria-label":this.localeObj.getConstant("slideShow")}),y(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element)},e.prototype.renderSlides=function(){var t=this,e=this.element.querySelector("."+tL);e||(e=this.createElement("div",{className:tL,attrs:{tabindex:"0",role:"tabpanel"}}),this.element.appendChild(e)),this.itemsContainer=this.createElement("div",{className:eL,attrs:{"aria-live":this.autoPlay?"off":"polite"}}),e.appendChild(this.itemsContainer);var i=this.getNumOfItems();i>0&&this.loop&&(this.items.length>0?this.items.slice(-i).forEach(function(e,i){t.renderSlide(e,e.template,i,t.itemsContainer,!0)}):!y(this.dataSource)&&this.dataSource.length>0&&this.dataSource.slice(-i).forEach(function(e,i){t.renderSlide(e,t.itemTemplate,i,t.itemsContainer,!0)})),this.items.length>0?(this.slideItems=this.items,this.items.forEach(function(e,i){t.renderSlide(e,e.template,i,t.itemsContainer)})):!y(this.dataSource)&&this.dataSource.length>0&&(this.slideItems=this.dataSource,this.dataSource.forEach(function(e,i){t.renderSlide(e,t.itemTemplate,i,t.itemsContainer)})),i>0&&this.loop&&(this.items.length>0?this.items.slice(0,i).forEach(function(e,i){t.renderSlide(e,e.template,i,t.itemsContainer,!0)}):!y(this.dataSource)&&this.dataSource.length>0&&this.dataSource.slice(0,i).forEach(function(e,i){t.renderSlide(e,t.itemTemplate,i,t.itemsContainer,!0)})),this.renderTemplates(),this.itemsContainer.style.setProperty("--carousel-items-count",""+this.itemsContainer.children.length);var n=y(this.itemsContainer.firstElementChild)?0:this.itemsContainer.firstElementChild.clientWidth;this.itemsContainer.style.transitionProperty="none";var s=this.loop?i:0;this.itemsContainer.style.transform=this.getTranslateX(n,this.selectedIndex+s),this.autoSlide(),this.renderTouchActions(),this.renderKeyboardActions()},e.prototype.getTranslateX=function(t,e){return void 0===e&&(e=1),this.enableRtl?"translateX("+t*e+"px)":"translateX("+-t*e+"px)"},e.prototype.renderSlide=function(t,e,i,n,s){void 0===s&&(s=!1);var r=this.createElement("div",{id:b("carousel_item"),className:iL+" "+(t.cssClass?t.cssClass:"")+" "+(this.selectedIndex!==i||s?"":GN),attrs:{"aria-hidden":this.selectedIndex!==i||s?"true":"false","data-index":i.toString(),role:"group","aria-roledescription":"slide"}});s&&r.classList.add("e-cloned"),(this.selectedIndex!==i||s)&&r.setAttribute("inert","true"),y(t.htmlAttributes)||this.setHtmlAttributes(t.htmlAttributes,r);var o=this.element.id+"_template";rt(this.templateParser(e)(t,this,"itemTemplate",o,!1),r),n.appendChild(r)},e.prototype.renderNavigators=function(){if("Hidden"!==this.buttonsVisibility){var t=this.createElement("div",{className:rL});this.element.querySelector("."+tL).insertAdjacentElement("afterend",t),!y(this.slideItems)&&this.slideItems.length>1&&(this.renderNavigatorButton("Previous"),this.renderNavigatorButton("Next")),this.renderTemplates()}},e.prototype.renderNavigatorButton=function(t){var e=this.createElement("div",{className:("Previous"===t?nL:sL)+" "+("VisibleOnHover"===this.buttonsVisibility?bL:"")});if("Previous"===t&&this.previousButtonTemplate){tt([e],IL);var i=this.element.id+"_previousButtonTemplate";rt(this.templateParser(this.previousButtonTemplate)({type:"Previous"},this,"previousButtonTemplate",i,!1),e)}else if("Next"===t&&this.nextButtonTemplate){tt([e],IL);i=this.element.id+"_nextButtonTemplate";rt(this.templateParser(this.nextButtonTemplate)({type:"Next"},this,"nextButtonTemplate",i,!1),e)}else{var n=this.createElement("button",{attrs:{"aria-label":this.localeObj.getConstant("Previous"===t?"previousSlide":"nextSlide"),type:"button"}});new mo({cssClass:yL+" "+vL+" "+("Previous"===t?gL:mL),iconCss:cL+" "+("Previous"===t?"e-previous-icon":"e-next-icon"),enableRtl:this.enableRtl,disabled:!this.loop&&this.selectedIndex===("Previous"===t?0:this.slideItems.length-1)}).appendTo(n),e.appendChild(n)}this.element.querySelector("."+rL).appendChild(e),K.add(e,"click",this.navigatorClickHandler,this)},e.prototype.renderPlayButton=function(){if(!(y(this.slideItems)||"Hidden"===this.buttonsVisibility||!this.showPlayButton||this.slideItems.length<=1)){var t=this.createElement("div",{className:dL+" "+("VisibleOnHover"===this.buttonsVisibility?bL:"")});if(this.playButtonTemplate){tt([t],IL);var e=this.element.id+"_playButtonTemplate";rt(this.templateParser(this.playButtonTemplate)({},this,"playButtonTemplate",e,!1),t)}else{var i=this.createElement("button",{attrs:{"aria-label":this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition"),type:"button"}}),n=this.selectedIndex===this.slideItems.length-1&&!this.loop,s=new mo({cssClass:yL+" "+vL+" "+fL,iconCss:cL+" "+(this.autoPlay&&!n?uL:pL),isToggle:!0,enableRtl:this.enableRtl});n&&(this.setProperties({autoPlay:!1},!0),i.setAttribute("aria-label",this.localeObj.getConstant("playSlideTransition")),this.itemsContainer.setAttribute("aria-live","polite")),s.appendTo(i),t.appendChild(i)}var r=this.element.querySelector("."+rL);r.insertBefore(t,r.lastElementChild),this.renderTemplates(),K.add(t,"click",this.playButtonClickHandler,this)}},e.prototype.renderIndicators=function(){var t=this;if(this.showIndicators&&!y(this.indicatorsType)){var e="e-default";this.indicatorsTemplate||(e="e-"+this.indicatorsType.toLowerCase());var i,n=this.createElement("div",{className:oL+" "+e}),s=this.createElement("div",{className:aL});if(n.appendChild(s),this.slideItems)switch(this.indicatorsType){case"Fraction":this.indicatorsTemplate?this.renderIndicatorTemplate(s,this.selectedIndex+1):s.innerText=this.selectedIndex+1+" / "+this.slideItems.length;break;case"Progress":this.indicatorsTemplate?this.renderIndicatorTemplate(s,this.selectedIndex+1):((i=this.createElement("div",{className:lL})).style.setProperty("--carousel-items-current",""+(this.selectedIndex+1)),i.style.setProperty("--carousel-items-count",""+this.slideItems.length),s.appendChild(i));break;case"Default":case"Dynamic":this.slideItems.forEach(function(e,i){var n=t.createElement("div",{className:lL+" "+(t.selectedIndex===i?GN:t.selectedIndex-1===i?DL:t.selectedIndex+1===i?EL:""),attrs:{"data-index":i.toString(),"aria-current":t.selectedIndex===i?"true":"false"}});if(n.style.setProperty("--carousel-items-current",""+t.selectedIndex),t.indicatorsTemplate)t.renderIndicatorTemplate(n,i);else if("Default"===t.indicatorsType){var r=t.createElement("button",{className:hL,attrs:{type:"button","aria-label":t.localeObj.getConstant("slide")+" "+(i+1)+" "+t.localeObj.getConstant("of")+" "+t.slideItems.length}});n.appendChild(r),r.appendChild(t.createElement("div",{})),new mo({cssClass:"e-flat e-small"}).appendTo(r)}s.appendChild(n),"Default"===t.indicatorsType&&K.add(n,"click",t.indicatorClickHandler,t)})}this.element.appendChild(n)}},e.prototype.renderIndicatorTemplate=function(t,e){void 0===e&&(e=0),tt([t],IL);var i=this.element.id+"_indicatorsTemplate";rt(this.templateParser(this.indicatorsTemplate)({index:e,selectedIndex:this.selectedIndex},this,"indicatorsTemplate",i,!1),t)},e.prototype.renderKeyboardActions=function(){this.allowKeyboardInteraction&&(this.keyModule=new si(this.element,{keyAction:this.keyHandler.bind(this),keyConfigs:this.keyConfigs}))},e.prototype.renderTouchActions=function(){this.touchModule=new ci(this.element,{swipe:this.swipeHandler.bind(this)})},e.prototype.applyAnimation=function(){switch(et([this.element],[xL,SL,ML,wL]),this.animationEffect){case"Slide":tt([this.element],ML);break;case"Fade":tt([this.element],SL);break;case"None":tt([this.element],wL);break;case"Custom":tt([this.element],xL)}},e.prototype.autoSlide=function(){y(this.slideItems)||this.slideItems.length<=1||(this.resetSlideInterval(),this.applySlideInterval())},e.prototype.autoSlideChange=function(){var t=this.element.querySelector("."+iL+"."+GN)||this.element.querySelector("."+oL+" ."+GN);if(!y(t)){var e=parseInt(t.dataset.index,10);if(this.loop||e!==this.slideItems.length-1){var i=(e+1)%this.slideItems.length;this.element.classList.contains(CL)||this.setActiveSlide(i,"Next"),this.autoSlide()}else this.resetSlideInterval()}},e.prototype.applySlideInterval=function(){var t=this;if(this.autoPlay&&!this.element.classList.contains(CL)){var e=this.interval;this.items.length>0&&!y(this.items[this.selectedIndex||0].interval)&&(e=this.items[this.selectedIndex||0].interval),this.autoSlideInterval=setInterval(function(){return t.autoSlideChange()},e)}},e.prototype.resetSlideInterval=function(){clearInterval(this.autoSlideInterval),this.autoSlideInterval=null},e.prototype.getSlideIndex=function(t){var e=this.selectedIndex||0;return"Previous"===t?--e<0&&(e=this.slideItems.length-1):++e===this.slideItems.length&&(e=0),e},e.prototype.setActiveSlide=function(t,e,i){var n=this;if(void 0===i&&(i=!1),!(this.element.querySelectorAll("."+iL+"."+DL+",."+iL+"."+EL).length>0)){t=y(t)?0:t;var s=[].slice.call(this.element.querySelectorAll("."+iL+":not(.e-cloned)")),r=this.element.querySelector("."+iL+"."+GN);if(y(r)&&this.showIndicators){var o=this.element.querySelector("."+lL+"."+GN),a=parseInt(o.dataset.index,10);tt([s[parseInt(a.toString(),10)]],GN)}else if(y(r))tt([s[parseInt(t.toString(),10)]],GN);else{var l=parseInt(r.dataset.index,10),h=s[parseInt(t.toString(),10)],c={currentIndex:l,nextIndex:t,currentSlide:r,nextSlide:h,slideDirection:e,isSwiped:i,cancel:!1};this.trigger("slideChanging",c,function(r){if(!r.cancel){n.setProperties({selectedIndex:t},!0),ht(r.currentSlide,{"aria-hidden":"true"}),r.currentSlide.setAttribute("inert","true"),ht(r.nextSlide,{"aria-hidden":"false"}),r.nextSlide.removeAttribute("inert"),n.refreshIndicators(l,t),n.slideChangedEventArgs={currentIndex:r.nextIndex,previousIndex:r.currentIndex,currentSlide:r.nextSlide,previousSlide:r.currentSlide,slideDirection:e,isSwiped:i};var o=s[parseInt(t.toString(),10)].clientWidth,a=n.getNumOfItems();n.isSwipe||(n.itemsContainer.style.transitionDuration="0.6s"),n.isSwipe=!1,"Fade"===n.animationEffect?n.itemsContainer.classList.add("e-fade-in-out"):n.itemsContainer.style.transitionProperty="transform",n.loop?0===n.slideChangedEventArgs.currentIndex&&"Next"===n.slideChangedEventArgs.slideDirection?n.itemsContainer.style.transform=n.getTranslateX(o,s.length+a):n.slideChangedEventArgs.currentIndex===n.slideItems.length-1&&"Previous"===n.slideChangedEventArgs.slideDirection?n.itemsContainer.style.transform=n.partialVisible?n.getTranslateX(o):"translateX(0px)":n.itemsContainer.style.transform=n.getTranslateX(o,t+a):n.itemsContainer.style.transform=n.getTranslateX(o,t),"Slide"===n.animationEffect?"Previous"===e?(tt([r.nextSlide],DL),r.nextSlide.setAttribute("data-slide-height",r.nextSlide.offsetHeight.toString()),tt([r.currentSlide,r.nextSlide],AL)):(tt([r.nextSlide],EL),r.nextSlide.setAttribute("data-slide-height",r.nextSlide.offsetHeight.toString()),tt([r.currentSlide,r.nextSlide],TL)):"Fade"===n.animationEffect?(et([r.currentSlide],GN),tt([r.nextSlide],GN)):"Custom"===n.animationEffect?"Previous"===e?(tt([r.nextSlide],EL),tt([r.currentSlide],DL)):(tt([r.currentSlide],DL),tt([r.nextSlide],EL)):n.onTransitionEnd(),n.handleNavigatorsActions(t)}})}}},e.prototype.onTransitionEnd=function(){var t=this;et(this.element.querySelectorAll("."+eL),"e-fade-in-out");var e=this.getNumOfItems();if(this.slideChangedEventArgs){if(this.itemsContainer.style.transitionProperty="none",this.loop&&(0===this.slideChangedEventArgs.currentIndex&&"Next"===this.slideChangedEventArgs.slideDirection||this.slideChangedEventArgs.currentIndex===this.slideItems.length-1&&"Previous"===this.slideChangedEventArgs.slideDirection)){var i=this.slideChangedEventArgs.currentSlide.clientWidth;this.itemsContainer.style.transform=this.getTranslateX(i,this.slideChangedEventArgs.currentIndex+e)}tt([this.slideChangedEventArgs.currentSlide],GN),et([this.slideChangedEventArgs.previousSlide],GN),this.trigger("slideChanged",this.slideChangedEventArgs,function(){et(t.element.querySelectorAll("."+iL),[DL,EL,TL,AL]),t.slideChangedEventArgs=null})}},e.prototype.refreshIndicators=function(t,e){var i=this,n=this.element.querySelector("."+aL);if(!y(n)){var s=[].slice.call(n.childNodes);switch(this.indicatorsType){case"Default":case"Dynamic":ht(s[parseInt(t.toString(),10)],{"aria-current":"false"}),ht(s[parseInt(e.toString(),10)],{"aria-current":"true"}),et(s,[GN,DL,EL]),tt([s[parseInt(e.toString(),10)]],GN),s[e-1]&&tt([s[e-1]],DL),s[e+1]&&tt([s[e+1]],EL),s.forEach(function(t){return t.style.setProperty("--carousel-items-current",""+i.selectedIndex)});break;case"Fraction":this.indicatorsTemplate?(n.children.length>0&&n.removeChild(n.firstElementChild),this.renderIndicatorTemplate(n,e+1)):n.innerText=this.selectedIndex+1+" / "+this.slideItems.length;break;case"Progress":this.indicatorsTemplate?(n.children.length>0&&n.removeChild(n.firstElementChild),this.renderIndicatorTemplate(n,e+1)):n.firstElementChild.style.setProperty("--carousel-items-current",""+(this.selectedIndex+1))}}},e.prototype.setHtmlAttributes=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var s=n[i];"class"===s?tt([e],t[""+s]):e.setAttribute(s,t[""+s])}},e.prototype.templateParser=function(t){if(t)try{return"function"!=typeof t&&document.querySelectorAll(t).length?Hi(document.querySelector(t).innerHTML.trim()):Hi(t)}catch(e){return Hi(t)}},e.prototype.getNavigatorState=function(t,e){var i=t.querySelector("."+(e?gL:mL));return!!i&&D(i,mo).disabled},e.prototype.navigatorClickHandler=function(t){var e=t.currentTarget;if(!this.getNavigatorState(e,e.classList.contains(nL))){var i=e.classList.contains(nL)?"Previous":"Next";this.setActiveSlide(this.getSlideIndex(i),i),this.autoSlide()}},e.prototype.indicatorClickHandler=function(t){var e=ut(t.target,"."+lL),i=parseInt(e.dataset.index,10);this.selectedIndex!==i&&(this.setActiveSlide(i,this.selectedIndex>i?"Previous":"Next"),this.autoSlide())},e.prototype.playButtonClickHandler=function(t,e){void 0===e&&(e=!1);var i=this.element.querySelector("."+fL);if(i){var n=D(i,mo);e||this.setProperties({autoPlay:!this.autoPlay},!0),i.setAttribute("aria-label",this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition")),n.iconCss=cL+" "+(this.autoPlay?uL:pL),n.dataBind(),this.itemsContainer.setAttribute("aria-live",this.autoPlay?"off":"polite"),this.autoPlay&&!this.loop&&this.selectedIndex===this.slideItems.length-1&&this.setActiveSlide(0,"Next"),this.autoSlide()}},e.prototype.keyHandler=function(t){if(this.allowKeyboardInteraction){var e,i,n=!1,s=t.target;switch(t.preventDefault(),t.action){case"space":this.showIndicators&&s.classList.contains(hL)?s.click():s.classList.contains(XN)||s.classList.contains(fL)?this.playButtonClickHandler(t):s.classList.contains(mL)?this.next():s.classList.contains(gL)&&this.prev();break;case"end":i=this.slideItems.length-1,e="Next",n=!0;break;case"home":i=0,e="Previous",n=!0;break;case"moveUp":case"moveLeft":case"moveDown":case"moveRight":this.showIndicators&&y(this.indicatorsTemplate)&&this.element.focus(),e="moveUp"===t.action||"moveLeft"===t.action?"Previous":"Next",i=this.getSlideIndex(e),n=!this.isSuspendSlideTransition(i,e)}n&&(this.setActiveSlide(i,e),this.autoSlide(),n=!1)}},e.prototype.swipeHandler=function(t){if(!(this.element.classList.contains(CL)||y(this.slideItems)||this.slideItems.length<=1)&&this.swipeMode!==(~YN.Touch&~YN.Mouse)){var e=t.startEvents?t.startEvents.toString():null;if(!e||!(this.swipeMode===YN.Mouse&&e.includes("Touch")||this.swipeMode===YN.Touch&&e.includes("Mouse"))){var i="Right"===t.swipeDirection?"Previous":"Next",n=this.getSlideIndex(i);this.isSuspendSlideTransition(n,i)||(this.setActiveSlide(n,i,!0),this.autoSlide())}}},e.prototype.isSuspendSlideTransition=function(t,e){return!this.loop&&("Next"===e&&0===t||"Previous"===e&&t===this.slideItems.length-1)},e.prototype.handleNavigatorsActions=function(t){if("Hidden"!==this.buttonsVisibility){if(this.showPlayButton){var e=this.element.querySelector("."+fL),i=this.selectedIndex===this.slideItems.length-1&&!this.loop,n=y(this.playButtonTemplate)&&e&&i;if(y(this.playButtonTemplate)&&e&&!i&&(n=!e.classList.contains(GN)),n)this.setProperties({autoPlay:!i},!0),e.setAttribute("aria-label",this.localeObj.getConstant(this.autoPlay?"pauseSlideTransition":"playSlideTransition")),this.itemsContainer.setAttribute("aria-live",this.autoPlay?"off":"polite"),(r=D(e,mo)).iconCss=cL+" "+(this.autoPlay?uL:pL),r.dataBind()}var s=this.element.querySelector("."+gL);if(s&&y(this.previousButtonTemplate))(r=D(s,mo)).disabled=!this.loop&&0===t,r.dataBind();var r,o=this.element.querySelector("."+mL);if(o&&y(this.nextButtonTemplate))(r=D(o,mo)).disabled=!this.loop&&t===this.slideItems.length-1,r.dataBind()}},e.prototype.onHoverActions=function(t){var e=this.element.querySelector("."+rL);switch(t.type){case"mouseenter":"VisibleOnHover"===this.buttonsVisibility&&e&&et([].slice.call(e.childNodes),bL),this.pauseOnHover&&tt([this.element],CL);break;case"mouseleave":"VisibleOnHover"===this.buttonsVisibility&&e&&tt([].slice.call(e.childNodes),bL),et([this.element],CL),this.isSwipe&&this.swipStop()}this.autoSlide()},e.prototype.onFocusActions=function(t){switch(t.type){case"focusin":tt([this.element],CL);break;case"focusout":et([this.element],CL)}this.autoSlide()},e.prototype.destroyButtons=function(){for(var t=0,e=[].slice.call(this.element.querySelectorAll(".e-control.e-btn"));t<e.length;t++){var i=D(e[t],mo);i&&i.destroy()}},e.prototype.getNumOfItems=function(){return this.partialVisible?2:1},e.prototype.getTranslateValue=function(t){var e=getComputedStyle(t);return window.WebKitCSSMatrix?new WebKitCSSMatrix(e.webkitTransform).m41:0},e.prototype.swipeStart=function(t){this.timeStampStart||(this.timeStampStart=Date.now()),t.preventDefault(),this.isSwipe=!1,this.itemsContainer.classList.add("e-swipe-start"),this.prevPageX=t.touches?t.touches[0].pageX:t.pageX,this.initialTranslate=this.getTranslateValue(this.itemsContainer)},e.prototype.swiping=function(t){if(this.itemsContainer.classList.contains("e-swipe-start")){this.isSwipe=!0,t.preventDefault();var e=t.touches?t.touches[0].pageX:t.pageX,i=this.prevPageX-e;!this.loop&&(this.enableRtl&&(0===this.selectedIndex&&i>0||this.selectedIndex===this.itemsContainer.childElementCount-1&&i<0)||!this.enableRtl&&(0===this.selectedIndex&&i<0||this.selectedIndex===this.itemsContainer.childElementCount-1&&i>0))||(this.itemsContainer.style.transform="translateX("+(this.initialTranslate+(this.enableRtl?i:-i))+"px)")}},e.prototype.swipStop=function(){var t=Date.now()-this.timeStampStart,e=this.getTranslateValue(this.itemsContainer)-this.initialTranslate;if(e=e<0?-1*e:e,this.isSwipe){var i=e*(G.isDevice?6:1.66);this.itemsContainer.style.transitionDuration=(G.isDevice?e:i)/t/10+"s"}var n=this.itemsContainer.firstElementChild.clientWidth/2;this.itemsContainer.classList.remove("e-swipe-start");var s=this.getTranslateValue(this.itemsContainer);s-this.initialTranslate<-n?this.swipeNavigation(!this.enableRtl):s-this.initialTranslate>n?this.swipeNavigation(this.enableRtl):(this.itemsContainer.style.transform="translateX("+this.initialTranslate+"px)","Fade"===this.animationEffect&&this.itemsContainer.classList.add("e-fade-in-out"))},e.prototype.swipeNavigation=function(t){t?this.next():this.prev()},e.prototype.swipeModehandlers=function(){(this.swipeMode&YN.Touch)===YN.Touch&&(K.add(this.itemsContainer,"touchstart",this.swipeStart,this),K.add(this.itemsContainer,"touchmove",this.swiping,this),K.add(this.itemsContainer,"touchend",this.swipStop,this)),(this.swipeMode&YN.Mouse)===YN.Mouse&&(K.add(this.itemsContainer,"mousedown",this.swipeStart,this),K.add(this.itemsContainer,"mousemove",this.swiping,this),K.add(this.itemsContainer,"mouseup",this.swipStop,this)),0===this.swipeMode&&(this.swipeMode&YN.Mouse&YN.Touch)===(YN.Mouse&YN.Touch)&&(K.add(this.itemsContainer,"mousedown touchstart",this.swipeStart,this),K.add(this.itemsContainer,"mousemove touchmove",this.swiping,this),K.add(this.itemsContainer,"mouseup touchend",this.swipStop,this))},e.prototype.resizeHandler=function(){if(this.itemsContainer&&this.itemsContainer.firstElementChild){var t=this.getNumOfItems(),e=this.itemsContainer.firstElementChild.clientWidth;this.loop?this.itemsContainer.style.transform=this.getTranslateX(e,this.selectedIndex+t):this.itemsContainer.style.transform=this.getTranslateX(e,this.selectedIndex)}},e.prototype.wireEvents=function(){"Custom"!==this.animationEffect&&this.swipeModehandlers(),K.add(this.element,"focusin focusout",this.onFocusActions,this),K.add(this.element,"mouseenter mouseleave",this.onHoverActions,this),K.add(this.element.firstElementChild,"animationend",this.onTransitionEnd,this),K.add(this.element.firstElementChild,"transitionend",this.onTransitionEnd,this),K.add(window,"resize",this.resizeHandler,this)},e.prototype.unWireEvents=function(){var t=this;[].slice.call(this.element.querySelectorAll("."+lL)).forEach(function(e){K.remove(e,"click",t.indicatorClickHandler)}),[].slice.call(this.element.querySelectorAll("."+nL+",."+sL)).forEach(function(e){K.remove(e,"click",t.navigatorClickHandler)});var e=this.element.querySelector("."+dL);e&&K.remove(e,"click",this.playButtonClickHandler),K.remove(this.element.firstElementChild,"animationend",this.onTransitionEnd),K.remove(this.element.firstElementChild,"transitionend",this.onTransitionEnd),K.clearEvents(this.element),K.clearEvents(this.itemsContainer),K.remove(window,"resize",this.resizeHandler)},e.prototype.prev=function(){if(this.loop||0!==this.selectedIndex){var t=0===this.selectedIndex?this.slideItems.length-1:this.selectedIndex-1;this.setActiveSlide(t,"Previous"),this.autoSlide()}},e.prototype.next=function(){if(this.loop||this.selectedIndex!==this.slideItems.length-1){var t=this.selectedIndex===this.slideItems.length-1?0:this.selectedIndex+1;this.setActiveSlide(t,"Next"),this.autoSlide()}},e.prototype.play=function(){var t=this.element.querySelector("."+pL);this.showPlayButton&&t&&(mt(t,[uL],[pL]),this.element.querySelector("."+fL).setAttribute("aria-label",this.localeObj.getConstant("pauseSlideTransition")));this.setProperties({autoPlay:!0},!0),this.itemsContainer.setAttribute("aria-live","off"),this.applySlideInterval()},e.prototype.pause=function(){var t=this.element.querySelector("."+uL);this.showPlayButton&&t&&(this.element.querySelector("."+fL).setAttribute("aria-label",this.localeObj.getConstant("playSlideTransition")),mt(t,[pL],[uL]));this.setProperties({autoPlay:!1},!0),this.itemsContainer.setAttribute("aria-live","off"),this.resetSlideInterval()},e.prototype.renderTemplates=function(){(this.isAngular||this.isReact)&&this.renderReactTemplates()},e.prototype.resetTemplates=function(t){(this.isAngular||this.isReact)&&this.clearTemplate(t)},e.prototype.destroy=function(){var e=this;this.resetTemplates(),this.touchModule&&(this.touchModule.destroy(),this.touchModule=null),this.keyModule&&(this.keyModule.destroy(),this.keyModule=null),this.resetSlideInterval(),this.destroyButtons(),this.unWireEvents(),[].slice.call(this.element.children).forEach(function(t){e.element.removeChild(t)}),et([this.element],[XN,this.cssClass,KN,$N]),["role","style"].forEach(function(t){e.element.removeAttribute(t)}),this.itemsContainer=null,t.prototype.destroy.call(this)},qN([Rt([],LL)],e.prototype,"items",void 0),qN([jt("Slide")],e.prototype,"animationEffect",void 0),qN([jt()],e.prototype,"previousButtonTemplate",void 0),qN([jt()],e.prototype,"nextButtonTemplate",void 0),qN([jt()],e.prototype,"indicatorsTemplate",void 0),qN([jt()],e.prototype,"playButtonTemplate",void 0),qN([jt()],e.prototype,"cssClass",void 0),qN([jt([])],e.prototype,"dataSource",void 0),qN([jt()],e.prototype,"itemTemplate",void 0),qN([jt(0)],e.prototype,"selectedIndex",void 0),qN([jt("100%")],e.prototype,"width",void 0),qN([jt("100%")],e.prototype,"height",void 0),qN([jt(5e3)],e.prototype,"interval",void 0),qN([jt(!0)],e.prototype,"autoPlay",void 0),qN([jt(!0)],e.prototype,"pauseOnHover",void 0),qN([jt(!0)],e.prototype,"loop",void 0),qN([jt(!1)],e.prototype,"showPlayButton",void 0),qN([jt(!0)],e.prototype,"enableTouchSwipe",void 0),qN([jt(!0)],e.prototype,"allowKeyboardInteraction",void 0),qN([jt(!0)],e.prototype,"showIndicators",void 0),qN([jt("Default")],e.prototype,"indicatorsType",void 0),qN([jt("Visible")],e.prototype,"buttonsVisibility",void 0),qN([jt(!1)],e.prototype,"partialVisible",void 0),qN([jt(YN.Touch)],e.prototype,"swipeMode",void 0),qN([jt()],e.prototype,"htmlAttributes",void 0),qN([Ut()],e.prototype,"slideChanging",void 0),qN([Ut()],e.prototype,"slideChanged",void 0),e=qN([Ft],e)}(_e),kL=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),zL=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},PL="e-appbar",jL="e-horizontal-bottom",BL="e-sticky",HL="e-prominent",RL="e-dense",VL="e-rtl",UL="e-light",FL="e-dark",WL="e-primary",YL="e-inherit",_L=function(t){function e(e,i){return t.call(this,e,i)||this}return kL(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.element.classList.remove(PL),this.element.removeAttribute("style"),this.element.removeAttribute("role")},e.prototype.getModuleName=function(){return"appbar"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.preRender=function(){},e.prototype.render=function(){this.element.classList.add(PL),"HEADER"!==this.element.tagName&&this.element.setAttribute("role","banner"),this.cssClass&&tt([this.element],this.cssClass.split(" ")),"Bottom"===this.position&&this.element.classList.add(jL),this.isSticky&&this.element.classList.add(BL),this.enableRtl&&this.element.classList.add(VL),this.setHeightMode(),this.setColorMode(),y(this.htmlAttributes)||this.setHtmlAttributes(this.htmlAttributes,this.element)},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"mode":et([this.element],[RL,HL]),this.setHeightMode();break;case"position":"Bottom"===this.position?tt([this.element],jL):et([this.element],jL);break;case"cssClass":e.cssClass&&et([this.element],e.cssClass.split(" ")),t.cssClass&&tt([this.element],t.cssClass.split(" "));break;case"isSticky":this.isSticky?tt([this.element],BL):et([this.element],BL);break;case"htmlAttributes":if(!y(this.htmlAttributes)){if(!y(e.htmlAttributes))for(var s=0,r=Object.keys(e.htmlAttributes);s<r.length;s++){var o=r[s];"class"===o?et([this.element],e.htmlAttributes[""+o]):this.element.removeAttribute(o)}this.setHtmlAttributes(t.htmlAttributes,this.element)}break;case"colorMode":et([this.element],[FL,WL,YL,UL]),this.setColorMode();break;case"enableRtl":this.enableRtl?tt([this.element],VL):et([this.element],VL)}}},e.prototype.setHtmlAttributes=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){var s=n[i];"class"===s?tt([e],t[""+s]):e.setAttribute(s,t[""+s])}},e.prototype.setHeightMode=function(){"Prominent"===this.mode?this.element.classList.add(HL):"Dense"===this.mode&&this.element.classList.add(RL)},e.prototype.setColorMode=function(){switch(this.colorMode){case"Light":this.element.classList.add(UL);break;case"Dark":this.element.classList.add(FL);break;case"Primary":this.element.classList.add(WL);break;case"Inherit":this.element.classList.add(YL)}},zL([jt("Regular")],e.prototype,"mode",void 0),zL([jt("Top")],e.prototype,"position",void 0),zL([jt()],e.prototype,"cssClass",void 0),zL([jt(!1)],e.prototype,"isSticky",void 0),zL([jt()],e.prototype,"htmlAttributes",void 0),zL([jt("Light")],e.prototype,"colorMode",void 0),zL([Ut()],e.prototype,"created",void 0),zL([Ut()],e.prototype,"destroyed",void 0),e=zL([Ft],e)}(_e),QL=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ZL=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},qL="--progress-position",XL="e-vertical",GL="e-horizontal",KL="e-stepper-steps";!function(t){t.NotStarted="NotStarted",t.InProgress="InProgress",t.Completed="Completed"}(NL||(NL={}));var JL,$L=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return QL(e,t),ZL([jt("")],e.prototype,"cssClass",void 0),ZL([jt(!1)],e.prototype,"disabled",void 0),ZL([jt("")],e.prototype,"iconCss",void 0),ZL([jt(null)],e.prototype,"isValid",void 0),ZL([jt("")],e.prototype,"label",void 0),ZL([jt(!1)],e.prototype,"optional",void 0),ZL([jt(NL.NotStarted)],e.prototype,"status",void 0),ZL([jt("")],e.prototype,"text",void 0),e}(re);!function(t){t.Horizontal="Horizontal",t.Vertical="Vertical"}(JL||(JL={}));var tO,eO,iO=function(t){function e(e,i){return t.call(this,e,i)||this}return QL(e,t),e.prototype.preRender=function(){},e.prototype.getModuleName=function(){return"stepperBase"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.render=function(){},e.prototype.updateOrientaion=function(t){(t.classList.contains(GL)||t.classList.contains(XL))&&t.classList.remove(GL,XL),y(this.orientation)||t.classList.add("e-"+this.orientation.toLocaleLowerCase())},e.prototype.renderProgressBar=function(t){this.progressStep=this.createElement("div",{className:"e-stepper-progressbar"}),this.progressbar=this.createElement("div",{className:"e-progressbar-value"});var e=t.querySelector("li").querySelector(".e-step-label-container");if(this.progressStep.appendChild(this.progressbar),t.prepend(this.progressStep),this.progressbar.style.setProperty("--progress-value","0%"),t.classList.contains(XL))if(t.classList.contains("e-label-bottom")||t.classList.contains("e-label-top")){var i=t.querySelector("."+KL);this.progressStep.style.setProperty(qL,i.offsetWidth/2+"px")}else this.progressStep.style.setProperty(qL,this.progressBarPosition/2-1+"px");e&&e.classList.contains("e-label-before")&&this.progressStep.style.setProperty(qL,this.progressBarPosition-1+5+"px"),t.classList.contains(GL)&&this.setProgressPosition(t)},e.prototype.setProgressPosition=function(t,e){var i=t.querySelector(".e-step-container"),n=i.firstElementChild;if(!0!==e){var s=0;s=t.classList.contains("e-label-before")?i.offsetParent.offsetHeight-n.offsetHeight/2-1:n.offsetHeight/2,this.progressStep.style.setProperty("--progress-top-position",s+"px")}var r=t.querySelector("."+KL).lastChild.firstChild;if(t.classList.contains("e-rtl")){var o=n.offsetLeft+n.offsetWidth-t.querySelector("."+KL).offsetWidth;this.progressStep.style.setProperty("--progress-left-position",Math.abs(o)+"px"),this.progressStep.style.setProperty("--progress-bar-width",Math.abs(r.offsetLeft-n.offsetLeft)+"px")}else this.progressStep.style.setProperty("--progress-left-position",n.offsetLeft+1+"px"),this.progressStep.style.setProperty("--progress-bar-width",r.offsetWidth+r.offsetLeft-2-(n.offsetLeft+2)+"px")},e.prototype.onPropertyChanged=function(t,e){},ZL([Rt([],$L)],e.prototype,"steps",void 0),ZL([jt("")],e.prototype,"cssClass",void 0),ZL([jt(!1)],e.prototype,"readOnly",void 0),ZL([jt(JL.Horizontal)],e.prototype,"orientation",void 0),ZL([Ut()],e.prototype,"created",void 0),e=ZL([Ft],e)}(_e),nO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sO=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},rO="e-indicator",oO="e-step-text-container",aO="e-step-selected",lO="e-step-inprogress",hO="e-step-notstarted",cO="e-step-focus",dO="e-step-completed",pO="e-step-disabled",uO="e-stepper-readonly",gO="--progress-value",mO="e-rtl",fO="e-step-template",yO="e-label-after",vO="e-label-before",bO="e-vertical",CO="e-horizontal",IO="e-step-item",MO="e-step-text",SO="e-text",xO="e-step-label",wO="e-label",DO="e-step-type-indicator",EO="e-step-type-label",TO="e-step-indicator",AO="e-stepper-tooltip",NO="e-linear",LO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nO(e,t),sO([jt(!0)],e.prototype,"enable",void 0),sO([jt(2e3)],e.prototype,"duration",void 0),sO([jt(0)],e.prototype,"delay",void 0),e}(re);!function(t){t.Top="Top",t.Bottom="Bottom",t.Start="Start",t.End="End"}(tO||(tO={})),function(t){t.Default="Default",t.Label="Label",t.Indicator="Indicator"}(eO||(eO={}));var OO=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.stepperItemElements=[],n}return nO(e,t),e.prototype.preRender=function(){this.element.id||(this.element.id=b("e-"+this.getModuleName()));this.l10n=new ri("stepper",{optional:"Optional"},this.locale),this.keyConfigs={downarrow:"downarrow",leftarrow:"leftarrow",rightarrow:"rightarrow",uparrow:"uparrow",space:"space",enter:"enter",home:"home",end:"end",tab:"tab",shiftTab:"shift+tab",escape:"escape"},this.tooltipOpen=!1},e.prototype.getModuleName=function(){return"stepper"},e.prototype.render=function(){this.initialize(),this.navigationHandler(this.activeStep,null,!1),this.updateStepperStatus(!0)},e.prototype.initialize=function(){this.element.setAttribute("aria-label",this.element.id),this.updatePosition(),this.stepperItemList=this.createElement("ol",{className:"e-stepper-steps"}),this.updateOrientaion(this.element),this.updateStepType(),this.element.appendChild(this.stepperItemList),this.cssClass&&tt([this.element],this.cssClass.trim().split(" ")),this.readOnly&&this.element.classList.add(uO),this.enableRtl&&this.element.classList.add(mO),this.wireEvents(),this.updateTemplateFunction(),this.renderItems(),this.steps.length>0&&(this.initiateProgressBar(),this.checkValidStep(),this.updateAnimation(),this.updateTooltip(),this.wireKeyboardEvent())},e.prototype.initiateProgressBar=function(){var t=this;this.steps.length>1&&(this.isAngular&&this.template?setTimeout(function(){t.renderProgressBar(t.element)}):this.renderProgressBar(this.element))},e.prototype.updatePosition=function(){this.progressBarPosition=this.beforeLabelWidth=this.textEleWidth=0},e.prototype.renderDefault=function(t){var e=this.steps[parseInt(t.toString(),10)];return!e.iconCss&&!e.text&&!e.label},e.prototype.updateAnimation=function(){var t=this.element.querySelector(".e-progressbar-value");this.animation.enable?this.animation.delay>=0&&t&&t.style.setProperty("--delay",this.animation.delay+"ms"):t&&(t.style.setProperty("--delay","0ms"),t.style.setProperty("--duration","0ms"))},e.prototype.updateStepType=function(){if(!y(this.stepType)){var t=this.stepType.toLowerCase();-1!==["indicator","label","default"].indexOf(t)&&("default"!==t&&this.element.classList.add("e-step-type-"+t),"indicator"!==t&&"label"!==t||!this.labelContainer||this.clearLabelPosition())}},e.prototype.wireEvents=function(){K.add(window,"resize",this.updateResize,this),K.add(window,"click",this.updateStepFocus,this)},e.prototype.unWireEvents=function(){K.remove(window,"resize",this.updateResize),K.remove(window,"click",this.updateStepFocus)},e.prototype.updateResize=function(){this.stepperItemList&&this.progressbar&&this.element.classList.contains(CO)&&this.setProgressPosition(this.element,!0),this.navigateToStep(this.activeStep,null,null,!1,!1)},e.prototype.updateStepFocus=function(){if(this.isKeyNavFocus){this.isKeyNavFocus=!1;var t=this.element.querySelector("."+cO);t&&(t.classList.remove(cO),this.element.classList.remove("e-steps-focus"))}},e.prototype.updateStepperStatus=function(t){for(var e=0;e<this.steps.length;e++){var i=this.steps[parseInt(e.toString(),10)],n=i.status.toLowerCase();if(t&&0===this.activeStep&&0===e){var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,i.status=NL.InProgress,this.isProtectedOnChange=s}if(i&&"notstarted"!==n&&e===this.activeStep)for(var r=0;r<this.steps.length;r++){var o=this.stepperItemElements[parseInt(r.toString(),10)];o.classList.remove(aO,lO,dO,hO);s=this.isProtectedOnChange;this.isProtectedOnChange=!0,"completed"===n?this.updateStatusClass(r,e,o):this.updateStatusClass(r,e,o,!0),this.isProtectedOnChange=s}else i&&"notstarted"!==n&&e!==this.activeStep&&this.navigationHandler(this.activeStep,null,!0)}},e.prototype.updateStatusClass=function(t,e,i,n){var s=this.steps[parseInt(t.toString(),10)];t<e?(i.classList.add(dO),s.status=NL.Completed):t===e?i.classList.add(n?lO:dO,aO):i.classList.add(hO)},e.prototype.renderItems=function(){for(var t,e=this,i=this.element.classList.contains(CO),n=this.element.classList.contains(bO),s=y(this.labelPosition)?"":this.labelPosition.toLowerCase(),r=0;r<this.steps.length;r++){this.stepperItemContainer=this.createElement("li",{className:"e-step-container"});var o=this.createElement("span",{className:"e-step"}),a=this.steps[parseInt(r.toString(),10)],l=!!a.label,h=!!a.text,c=this.element.classList.contains(DO);if(this.stepperItemContainer.classList[0===r?"add":"remove"](aO,lO),this.stepperItemContainer.classList[0!==r?"add":"remove"](hO),i&&this.stepperItemContainer.style.setProperty("--max-width",100/this.steps.length+"%"),this.renderDefault(r)&&(y(this.template)||""===this.template)){var d=!this.element.classList.contains("e-step-type-default")&&"indicator"===this.stepType.toLowerCase();d&&o.classList.add("e-icons",TO),d||null!=a.isValid||(o.classList.add("e-step-content"),o.innerHTML=(r+1).toString()),this.stepperItemContainer.appendChild(o)}else if(y(this.template)||""===this.template){var p=!0;if((a.iconCss||!a.iconCss&&h&&l)&&(!h&&!l||!this.element.classList.contains(EO))){if(a.iconCss){var u=a.iconCss.trim().split(" ");(t=o.classList).add.apply(t,[rO].concat(u)),this.stepperItemContainer.classList.add(IO)}else!a.iconCss&&h&&l&&(o.classList.add(rO),o.innerHTML=a.text,this.stepperItemContainer.classList.add(IO));this.stepperItemContainer.appendChild(o),(i&&("start"===s||"end"===s)&&l||n&&("top"===s||"bottom"===s)&&l)&&!c&&(this.element.classList.add("e-label-"+s),this.createTextLabelElement(a.label),p=!1)}if(h&&(!a.iconCss||!c)&&p&&(!a.iconCss||!l))if(!a.iconCss&&c||(!a.iconCss||this.element.classList.contains(EO))&&!l)a.iconCss||l||this.element.classList.add("e-step-type-indicator"),this.checkValidState(a,o),l=!1;else{if(l||this.createTextLabelElement(a.text),l&&this.element.classList.contains(EO))this.createElement("span",{className:SO}).innerText=a.label;h=!l}if(l&&l&&(!a.iconCss||!c)&&p)if(a.iconCss||h||!c){if((!this.element.classList.contains(EO)||!h||this.element.classList.contains(EO)&&l)&&(this.createTextLabelElement(a.label,!0),this.updateLabelPosition(),(!a.iconCss&&!h&&!this.stepperItemContainer.classList.contains(IO)||this.element.classList.contains(EO))&&(this.stepperItemContainer.classList.add("e-step-label-only"),null!==a.isValid))){var g=this.createElement("span",{className:"e-step-validation-icon e-icons"});this.labelContainer.appendChild(g)}}else this.checkValidState(a,o,!0)}if(a.optional){var m=this.createElement("span",{className:"e-step-label-optional"});this.l10n.setLocale(this.locale);var f=this.l10n.getConstant("optional");m.innerText=f,l&&this.labelContainer&&(this.element.classList.contains(yO)&&!this.stepperItemContainer.classList.contains("e-step-label-only")||i&&this.element.classList.contains(vO)&&!this.stepperItemContainer.classList.contains("e-step-label-only"))||n&&this.element.classList.contains(vO)?this.labelContainer.appendChild(m):this.stepperItemContainer.appendChild(m),null!==a.isValid&&this.stepperItemContainer.classList.add(a.isValid?"e-step-valid":"e-step-error")}a.cssClass&&tt([this.stepperItemContainer],a.cssClass.trim().split(" ")),a.disabled&&(this.stepperItemContainer.classList[a.disabled?"add":"remove"](pO),ht(this.stepperItemContainer,{tabindex:"-1","aria-disabled":"true"})),null!==a.isValid&&(a.isValid?this.stepperItemContainer.classList.add("e-step-valid"):this.stepperItemContainer.classList.add("e-step-error")),this.renderItemContent(r,!1),this.stepperItemContainer.classList.contains(lO)?ht(this.stepperItemContainer,{tabindex:"0","aria-current":"true"}):ht(this.stepperItemContainer,{tabindex:"-1"}),this.wireItemsEvents(this.stepperItemContainer,r),this.stepperItemElements.push(this.stepperItemContainer);var v={element:this.stepperItemContainer,index:r};this.trigger("beforeStepRender",v,function(t){e.stepperItemList.appendChild(t.element)}),n&&(this.isAngular&&this.template?setTimeout(function(){e.calculateProgressBarPosition()}):this.calculateProgressBarPosition())}if(n&&this.element.classList.contains(vO))for(var b=this.stepperItemList.querySelectorAll("."+wO),C=0;C<b.length;C++){b[parseInt(C.toString(),10)].style.setProperty("--label-width",this.beforeLabelWidth+5+"px")}},e.prototype.createTextLabelElement=function(t,e){void 0===e&&(e=!1);var i=this.createElement("span",{className:e?wO:oO+" "+SO});i.innerText=t,e?(this.labelContainer=this.createElement("span",{className:"e-step-label-container"}),this.labelContainer.appendChild(i)):this.stepperItemContainer.appendChild(i),this.stepperItemContainer.classList.add(e?xO:MO)},e.prototype.calculateProgressBarPosition=function(){var t=!!this.element.classList.contains(vO),e=this.stepperItemContainer.classList.contains(IO)&&!this.stepperItemContainer.classList.contains(MO)&&!this.stepperItemContainer.classList.contains(xO),i=this.stepperItemContainer.querySelector("."+oO);if(i&&(this.textEleWidth=this.textEleWidth<i.offsetWidth?i.offsetWidth:this.textEleWidth),t){var n=this.stepperItemContainer.querySelector("."+wO).offsetWidth+15;this.beforeLabelWidth=Math.max(this.beforeLabelWidth,n);var s=this.element.querySelector("ol").lastChild.querySelector("."+rO),r=this.stepperItemContainer.querySelector("."+oO);if(s||r){var o=this.beforeLabelWidth+(this.stepperItemContainer.querySelector("."+rO)||r).offsetWidth/2;this.progressBarPosition=Math.max(this.progressBarPosition,o)}else this.progressBarPosition=Math.max(this.progressBarPosition,this.beforeLabelWidth/2)}else{var a=this.element.querySelector("ol").lastChild,l=e?this.stepperItemContainer.offsetWidth:a.firstChild.offsetWidth;this.progressBarPosition=Math.max(this.progressBarPosition,l)}},e.prototype.checkValidState=function(t,e,i){null==t.isValid?(e.classList.add("e-step-content"),e.innerHTML=i||t.label?t.label:t.text,this.stepperItemContainer.appendChild(e)):(e.classList.add(rO),this.stepperItemContainer.appendChild(e),this.stepperItemContainer.classList.add(IO))},e.prototype.updateCurrentLabel=function(){var t=this.labelPosition.toLowerCase();return this.element.classList.contains(CO)?"top"===t?"before":"bottom"===t?"after":t:"start"===t?"before":"end"===t?"after":t},e.prototype.updateLabelPosition=function(){this.clearLabelPosition(),this.labelContainer.classList.add("e-label-"+this.updateCurrentLabel()),"start"===this.labelPosition.toLowerCase()&&"vertical"===this.orientation.toLowerCase()&&this.stepperItemContainer.firstChild?this.stepperItemContainer.firstChild.before(this.labelContainer):this.stepperItemContainer.appendChild(this.labelContainer),this.element.classList.add("e-label-"+this.updateCurrentLabel())},e.prototype.clearLabelPosition=function(){var t=this.labelContainer.classList.value.match(/(e-label-[after|before]+)/g);t&&(et([this.labelContainer],t),et([this.element],t))},e.prototype.checkValidStep=function(){for(var t=this.element.classList.contains(DO),e=function(e){var n=i.steps[parseInt(e.toString(),10)],s=i.stepperItemElements[parseInt(e.toString(),10)];if(null!==n.isValid){var r,o=void 0;t&&!n.iconCss?o=s.querySelector("."+rO):r=s.querySelector("."+rO),!o&&t&&i.renderDefault(e)&&(o=s.querySelector("."+TO));var a=s.querySelector(".e-step-validation-icon"),l=n.iconCss.trim().split(" "),h=s.classList.contains("e-step-valid"),c=h?"e-check":"e-circle-info";if(o&&(o.classList.remove(TO),""!==o.innerHTML&&(o.innerHTML=""),o.classList.add("e-icons",c,rO)),i.renderDefault(e)&&!t)s.querySelector(".e-step").classList.add("e-icons",c,rO);if(r&&(""!==r.innerHTML?r.innerHTML="":l.length>0&&l.forEach(function(t){r.classList.remove(t)}),r.classList.add("e-icons",c)),a&&(a.classList.add(h?"e-circle-check":"e-circle-info"),i.element.classList.contains(bO))){var d=s.querySelector("."+wO),p=s.querySelector("."+SO),u=p?p.offsetWidth+p.getBoundingClientRect().left:d.offsetWidth+d.getBoundingClientRect().left;s.querySelector(".e-step-validation-icon").style.setProperty("--icon-position",u+20+"px")}}},i=this,n=0;n<this.steps.length;n++)e(n)},e.prototype.updateTooltip=function(){this.showTooltip?(this.tooltipObj=new Zh({target:".e-step-container",windowCollision:!0,opensOn:"Custom",cssClass:this.cssClass?AO+" "+this.cssClass:AO,position:"TopCenter"}),this.tooltipObj.appendTo(this.stepperItemList)):y(this.tooltipObj)||(this.tooltipObj.destroy(),this.tooltipObj=null)},e.prototype.wireItemsEvents=function(t,e){K.add(t,"click",this.linearModeHandler.bind(this,t,e),this),K.add(t,"mouseover",this.openStepperTooltip.bind(this,e),this),K.add(t,"mouseleave",this.closeStepperTooltip,this)},e.prototype.unWireItemsEvents=function(){for(var t=0;t<this.steps.length;t++){var e=this.stepperItemElements[parseInt(t.toString(),10)];K.remove(e,"click",this.linearModeHandler.bind(this,e,t)),K.remove(e,"mouseover",this.openStepperTooltip.bind(this,t)),K.remove(e,"mouseleave",this.closeStepperTooltip)}},e.prototype.linearModeHandler=function(t,e,i){if(this.linear){var n=e-this.activeStep;1===Math.abs(n)&&this.stepClickHandler(e,i,t)}else this.stepClickHandler(e,i,t)},e.prototype.openStepperTooltip=function(t){var e=this.steps[parseInt(t.toString(),10)];if(this.showTooltip&&(e.label||e.text)&&!this.tooltipOpen){if(this.updateTooltipContent(t),this.tooltipObj.open(this.stepperItemElements[parseInt(t.toString(),10)]),"label"!==this.stepType.toLocaleLowerCase()&&("indicator"===this.stepType.toLocaleLowerCase()||""!==e.label&&""!==e.iconCss||null===e.label&&""===e.iconCss&&""!==e.text)){var i="inprogress"===e.status.toLowerCase()?AO+" e-step-inprogress-tip "+(this.cssClass?this.cssClass:""):AO+" "+(this.cssClass?this.cssClass:"");this.tooltipObj.setProperties({cssClass:i.trim()})}this.tooltipOpen=!0}},e.prototype.closeStepperTooltip=function(){this.tooltipOpen&&(this.tooltipObj.close(),this.tooltipOpen=!1)},e.prototype.updateTooltipContent=function(t){if(this.showTooltip){this.isReact&&this.clearTemplate(["stepperTooltipTemplate"]);var e=void 0,i=this.steps[parseInt(t.toString(),10)];if(this.tooltipTemplate){e=this.createElement("span",{className:"e-stepper-tooltip-content"}),rt(this.getTemplateFunction(this.tooltipTemplate)({value:i},this,"stepperTooltipTemplate",this.element.id+"tooltipTemplate",this.isStringTemplate),e),this.tooltipObj.setProperties({content:e},!0)}else{var n=i.label?i.label:i.text;this.tooltipObj.setProperties({content:Ri(function(){return n})},!0)}this.renderReactTemplates()}},e.prototype.stepClickHandler=function(t,e,i){var n={element:i,event:e,previousStep:this.activeStep,activeStep:t};this.trigger("stepClick",n),this.navigateToStep(t,e,i,!0)},e.prototype.updateTemplateFunction=function(){this.templateFunction=this.template?this.getTemplateFunction(this.template):null},e.prototype.renderItemContent=function(t,e){var i=this.stepperItemList.querySelectorAll("li");if(e&&this.removeItemContent(i[parseInt(t.toString(),10)]),this.template){e?i[parseInt(t.toString(),10)].classList.add(fO):this.stepperItemContainer.classList.add(fO);var n=this.steps[parseInt(t.toString(),10)];rt(this.templateFunction({step:n,currentStep:t},this,"stepperTemplate",this.element.id+"_stepperTemplate",this.isStringTemplate),e?i[parseInt(t.toString(),10)]:this.stepperItemContainer)}this.renderReactTemplates()},e.prototype.removeItemContent=function(t){t.classList.remove(fO);for(var e=t.firstElementChild,i=0;i<t.childElementCount;i++)e.remove()},e.prototype.updateContent=function(){this.isReact&&this.clearTemplate(["stepperTemplate"]);for(var t=0;t<this.steps.length;t++)this.renderItemContent(t,!0)},e.prototype.getTemplateFunction=function(t){if("string"==typeof t){var e="";try{var i=ct(t);e=i?"SCRIPT"===i.tagName?i.innerHTML:i.outerHTML:t}catch(i){e=t}return Hi(e)}return Hi(t)},e.prototype.navigateToStep=function(t,e,i,n,s){var r=this,o={element:i,event:e,isInteracted:n,previousStep:this.activeStep,activeStep:t,cancel:!1};if(!1!==s){var a=this.activeStep;this.trigger("stepChanging",o,function(s){if(!s.cancel){r.navigationHandler(t);var o={element:i,event:e,isInteracted:n,previousStep:a,activeStep:r.activeStep};r.trigger("stepChanged",o)}})}else this.navigationHandler(t)},e.prototype.navigationHandler=function(t,e,i){t!==this.activeStep&&this.progressbar&&(this.progressbar.style.transitionDuration=this.animation.duration+"ms"),t=Math.min(t,this.steps.length-1);var n=this.stepperItemElements.length;t>=0&&t<n-1&&(t=this.stepperItemElements[parseInt(t.toString(),10)].classList.contains(pO)?this.activeStep:t);var s=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.activeStep=parseInt(t.toString(),10),this.isProtectedOnChange=s;for(var r=0;r<this.steps.length;r++){var o=this.stepperItemElements[parseInt(r.toString(),10)],a=this.steps[parseInt(r.toString(),10)];o.classList.remove(aO,lO,dO,hO),r===this.activeStep&&o.classList.add(aO),this.activeStep>=0&&this.progressbar?this.element.classList.contains(CO)?this.calculateProgressbarPos():this.progressbar.style.setProperty(gO,100/(this.steps.length-1)*t+"%"):this.activeStep<0&&this.progressbar&&this.progressbar.style.setProperty(gO,"0%"),r===this.activeStep?o.classList.add(lO):this.activeStep>0&&r<this.activeStep?o.classList.add(dO):o.classList.add(hO),o.classList.contains(lO)?ht(o,{tabindex:"0","aria-current":"true"}):ht(o,{tabindex:"-1","aria-current":"false"});var l=this.isProtectedOnChange;this.isProtectedOnChange=!0,!1!==i&&(r<this.activeStep||this.steps.length-1===this.activeStep&&"completed"===a.status.toLowerCase()?a.status=NL.Completed:r===this.activeStep?a.status=NL.InProgress:r>this.activeStep&&(a.status=NL.NotStarted),e&&this.activeStep===r&&(a.status=e),"completed"===a.status.toLowerCase()&&(o.classList.remove(aO,lO,hO),o.classList.add(dO)),"notstarted"===a.status.toLowerCase()&&(o.classList.remove(aO,lO,dO),o.classList.add(hO))),this.isProtectedOnChange=l,this.updateIndicatorStatus(r,o)}this.updateStepInteractions(),this.progressbar&&(this.progressbar.style.transitionDuration="0ms")},e.prototype.calculateProgressbarPos=function(){var t=this;if((this.element.classList.contains(vO)||this.element.classList.contains(yO))&&!this.element.classList.contains(DO)&&this.stepperItemElements[parseInt(this.activeStep.toString(),10)].classList.contains(IO)){var e=this.element.querySelector(".e-stepper-progressbar"),i=this.stepperItemElements[parseInt(this.activeStep.toString(),10)].firstChild,n=0===this.activeStep?0:(i.offsetLeft-e.offsetLeft+i.offsetWidth/2)/e.offsetWidth*100;this.element.classList.contains(mO)?(n=(e.getBoundingClientRect().right-i.getBoundingClientRect().right+i.offsetWidth/2)/e.offsetWidth*100,this.progressbar.style.setProperty(gO,n+"%")):this.progressbar.style.setProperty(gO,n+"%")}else{var s=0,r=0;this.stepperItemElements.forEach(function(e,i){var n=e.offsetWidth;s+=n,i<=t.activeStep&&(r+=i===t.activeStep&&0!==i?n/2:n)});var o=(this.stepperItemList.offsetWidth-s)/(this.stepperItemElements.length-1),a=(r+o*this.activeStep)/this.stepperItemList.offsetWidth*100;this.progressbar.style.setProperty(gO,a+"%")}},e.prototype.updateIndicatorStatus=function(t,e){this.renderDefault(t)&&this.element.classList.contains(DO)&&!e.classList.contains("e-step-valid")&&!e.classList.contains("e-step-error")&&(e.classList.contains(dO)?(e.firstChild.classList.remove("e-icons","e-step-indicator"),e.firstChild.classList.add(rO,"e-icons","e-check")):(e.classList.contains(lO)||e.classList.contains(hO))&&(e.firstChild.classList.remove(rO,"e-icons","e-check"),e.firstChild.classList.add("e-icons","e-step-indicator")))},e.prototype.updateStepInteractions=function(){var t=this;this.element.classList.toggle(NO,this.linear),this.stepperItemElements.forEach(function(e,i){e.classList.toggle("e-previous",i===t.activeStep-1),e.classList.toggle("e-next",i===t.activeStep+1)})},e.prototype.removeItemElements=function(){for(var t=0;t<this.stepperItemElements.length;t++)lt(this.stepperItemElements[parseInt(t.toString(),10)]);this.stepperItemElements=[]},e.prototype.nextStep=function(){this.activeStep!==this.steps.length-1&&this.navigateToStep(this.activeStep+1,null,null,!1)},e.prototype.previousStep=function(){this.activeStep>0&&this.navigateToStep(this.activeStep-1,null,null,!1)},e.prototype.reset=function(){if(0===this.activeStep)this.updateStepInteractions();else{var t=!!this.stepperItemElements[0].classList.contains(pO);this.navigateToStep(t?-1:0,null,null,!1)}},e.prototype.refreshProgressbar=function(){this.stepperItemList&&this.progressbar&&this.setProgressPosition(this.element),this.navigateToStep(this.activeStep,null,null,!1,!1)},e.prototype.updateElementClassArray=function(){var t=[mO,uO,"e-steps-focus",yO,vO,"e-label-top","e-label-bottom","e-label-start","e-label-end",DO,EO,bO,CO,NO];et([this.element],t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.unWireEvents(),this.unWireItemsEvents(),this.removeItemElements(),this.clearTemplate(),this.stepperItemList&&lt(this.stepperItemList),this.stepperItemList=null,this.progressStep&&lt(this.progressStep),this.progressStep=null,this.progressbar=null,this.progressBarPosition=null,this.stepperItemContainer=null,this.textContainer=null,this.labelContainer=null,this.updateElementClassArray(),this.element.removeAttribute("aria-label"),this.showTooltip&&(this.tooltipObj.destroy(),this.tooltipObj=null),this.keyboardModuleStepper&&this.keyboardModuleStepper.destroy(),this.keyboardModuleStepper=null},e.prototype.wireKeyboardEvent=function(){this.keyboardModuleStepper=new si(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.keyActionHandler=function(t){if(!this.readOnly)switch(t.action){case"uparrow":case"downarrow":case"leftarrow":case"rightarrow":case"tab":case"shiftTab":this.handleNavigation(this.enableRtl&&this.element.classList.contains(CO)?"leftarrow"===t.action||"tab"===t.action||"uparrow"===t.action:"rightarrow"===t.action||"tab"===t.action||"downarrow"===t.action,t);break;case"space":case"enter":case"escape":this.handleNavigation(null,t);break;case"home":case"end":this.handleNavigation(null,t,this.enableRtl)}},e.prototype.handleNavigation=function(t,e,i){this.isKeyNavFocus=!0,this.element.classList.add("e-steps-focus");var n=this.element.querySelector("."+cO);n||(n=this.element.querySelector("."+aO));var s=Array.prototype.slice.call(this.stepperItemList.children),r=s.indexOf(n);if("tab"===e.action||"shiftTab"===e.action||"downarrow"===e.action||"uparrow"===e.action||"space"===e.action||"home"===e.action||"end"===e.action)if("tab"===e.action&&r===s.length-1||"shiftTab"===e.action&&0===r){if(n.classList.contains(cO))return void this.updateStepFocus()}else e.preventDefault();if("escape"===e.action&&(s[parseInt(r.toString(),10)].classList.remove(cO),this.element.classList.remove("e-steps-focus")),"space"!==e.action&&"enter"!==e.action){var o=r;for(r=t?r+1:r-1;r>=0&&r<s.length&&s[parseInt(r.toString(),10)].classList.contains(pO);)r=t?r+1:r-1;r=r<0?0:r>s.length-1?s.length-1:r,s[parseInt(o.toString(),10)].classList.contains(cO)&&s[parseInt(o.toString(),10)].classList.remove(cO),"home"!==e.action&&"end"!==e.action||(r="home"===e.action?i?s.length-1:0:i?0:s.length-1),r>=0&&r<s.length&&s[parseInt(r.toString(),10)].classList.add(cO)}else if("space"===e.action||"enter"===e.action){var a=!1;if(this.linear){var l=this.activeStep-r;1===Math.abs(l)&&(this.navigateToStep(r,null,null,!0),a=!0)}else this.navigateToStep(r,null,null,!0),a=!0;a&&(this.updateStepFocus(),this.stepperItemElements[r].focus())}},e.prototype.renderStepperItems=function(t,e){this.updateElementClassArray(),this.removeItemElements(),this.element.querySelector(".e-stepper-progressbar").remove(),t&&this.updatePosition(),e&&this.updateStepType(),this.readOnly&&!this.element.classList.contains(uO)&&this.element.classList.add(uO),this.enableRtl&&!this.element.classList.contains(mO)&&this.element.classList.add(mO),this.updateOrientaion(this.element),this.renderItems(),this.renderProgressBar(this.element),this.checkValidStep(),this.updateAnimation(),this.navigateToStep(this.activeStep,null,this.stepperItemElements[this.activeStep],!0)},e.prototype.updateDynamicSteps=function(t,e){if(t instanceof Array&&e instanceof Array)this.renderStepperItems(!0,!0);else for(var i=Object.keys(t),n=0;n<i.length;n++)for(var s=parseInt(Object.keys(t)[n],10),r=Object.keys(t[s]).length,o=0;o<r;o++){var a=Object.keys(t[s])[o];"status"===a?this.activeStep===s?this.navigationHandler(s,t[s].status):this.steps[s].status=e[s].status:(this.removeItemElements(),this.renderItems(),this.updateStepperStatus()),"label"===a&&(this.steps[s].iconCss||this.steps[s].text)&&"default"===this.stepType.toLowerCase()&&this.refreshProgressbar(),this.updateStepInteractions(),this.checkValidStep()}},e.prototype.updateDynamicActiveStep=function(t,e){if(this.activeStep=t>this.steps.length-1||t<-1?e:this.activeStep,this.activeStep>=0&&this.stepperItemElements[parseInt(this.activeStep.toString(),10)].classList.contains(pO)&&(this.activeStep=e),this.linear){var i=e-this.activeStep;1===Math.abs(i)&&this.navigateToStep(this.activeStep,null,null,!0)}else this.navigateToStep(this.activeStep,null,this.stepperItemElements[this.activeStep],!0)},e.prototype.updateDynamicCssClass=function(t,e){e&&et([this.element],e.trim().split(" ")),t&&tt([this.element],t.trim().split(" ")),this.tooltipObj&&this.tooltipObj.setProperties({cssClass:this.cssClass?AO+" "+this.cssClass:AO})},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"steps":this.updateDynamicSteps(t.steps,e.steps);break;case"orientation":this.updateOrientaion(this.element),this.renderStepperItems(!0);break;case"activeStep":this.updateDynamicActiveStep(t.activeStep,e.activeStep);break;case"enableRtl":this.element.classList[this.enableRtl?"add":"remove"](mO);break;case"readOnly":this.element.classList[this.readOnly?"add":"remove"](uO);break;case"cssClass":this.updateDynamicCssClass(t.cssClass,e.cssClass);break;case"labelPosition":this.renderStepperItems(!0);break;case"showTooltip":this.updateTooltip();break;case"stepType":this.renderStepperItems(!0,!0);break;case"template":this.updateTemplateFunction(),this.updateContent();break;case"animation":this.updateAnimation();break;case"linear":this.updateStepInteractions()}}},sO([jt(0)],e.prototype,"activeStep",void 0),sO([Bt({},LO)],e.prototype,"animation",void 0),sO([jt(!1)],e.prototype,"linear",void 0),sO([jt(!1)],e.prototype,"showTooltip",void 0),sO([jt("")],e.prototype,"template",void 0),sO([jt("")],e.prototype,"tooltipTemplate",void 0),sO([jt(tO.Bottom)],e.prototype,"labelPosition",void 0),sO([jt(eO.Default)],e.prototype,"stepType",void 0),sO([Ut()],e.prototype,"stepChanged",void 0),sO([Ut()],e.prototype,"stepChanging",void 0),sO([Ut()],e.prototype,"stepClick",void 0),sO([Ut()],e.prototype,"beforeStepRender",void 0),e=sO([Ft],e)}(iO),kO=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}l((n=n.apply(t,e||[])).next())})},zO=function(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},PO=".e-diagramcontent",jO="e-copy",BO="e-paste",HO="e-undo",RO="e-redo",VO="e-cut",UO="e-group",FO="e-ungroup",WO="e-bringfront",YO="e-sendback",_O="e-bringforward",QO="e-sendbackward",ZO="e-order",qO=function(){function t(t,e){this.defaultItems={},this.disableItems=[],this.hiddenItems=[],this.localeText=this.setLocaleKey(),this.parent=t,this.serviceLocator=e,this.addEventListener()}return t.prototype.addEventListener=function(){this.parent.isDestroyed||this.parent.on("initial-load",this.render,this)},t.prototype.removeEventListener=function(){this.parent.isDestroyed||this.parent.off("initial-load",this.render)},t.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.element=iv("ul",{id:this.parent.element.id+"_contextMenu"}),this.parent.element.appendChild(this.element);var t="#"+this.parent.element.id;this.contextMenu=new QM({items:this.getMenuItems(),enableRtl:this.parent.enableRtl,enablePersistence:this.parent.enablePersistence,locale:this.parent.locale,target:t,select:this.contextMenuItemClick.bind(this),beforeOpen:this.contextMenuBeforeOpen.bind(this),onOpen:this.contextMenuOpen.bind(this),beforeItemRender:this.BeforeItemRender.bind(this),onClose:this.contextMenuOnClose.bind(this),cssClass:"e-diagram-menu",animationSettings:{effect:"None"}}),this.contextMenu.appendTo(this.element)},t.prototype.getMenuItems=function(){var t=[],e=[],i=[];if(!this.parent.contextMenuSettings.showCustomMenuOnly){for(var n=0,s=this.getDefaultItems();n<s.length;n++){var r=s[n];-1!==r.toLocaleLowerCase().indexOf("group")?"grouping"!==r.toLocaleLowerCase()&&i.push(this.buildDefaultItems(r)):-1!==r.toLocaleLowerCase().indexOf("order")?"order"!==r.toLocaleLowerCase()&&e.push(this.buildDefaultItems(r)):t.push(this.buildDefaultItems(r))}var o=this.buildDefaultItems("grouping");o.items=i,t.push(o);var a=this.buildDefaultItems("order");a.items=e,t.push(a)}if(this.parent.contextMenuSettings.items)for(var l=0,h=this.parent.contextMenuSettings.items;l<h.length;l++){var c=h[l];t.push(c)}return t},t.prototype.contextMenuOpen=function(){this.isOpen=!0},t.prototype.BeforeItemRender=function(t){this.parent.trigger("contextMenuBeforeItemRender",t)},t.prototype.contextMenuItemClick=function(t){document.getElementById(this.parent.element.id+"content").focus(),this.parent.trigger("contextMenuClick",t);var e=this.getKeyFromId(t.item.id);if(!t.cancel)switch(e){case"cut":this.parent.cut();break;case"copy":this.parent.copy();break;case"undo":this.parent.undo();break;case"redo":this.parent.redo();break;case"paste":this.parent.paste();break;case"selectAll":this.parent.selectAll();break;case"group":this.parent.group();break;case"unGroup":this.parent.unGroup();break;case"bringToFrontOrder":this.parent.bringToFront();break;case"moveForwardOrder":this.parent.moveForward();break;case"sendToBackOrder":this.parent.sendToBack();break;case"sendBackwardOrder":this.parent.sendBackward()}},t.prototype.contextMenuOnClose=function(t){t.items.length>0&&t.items[0].parentObj instanceof QM&&this.updateItemStatus()},t.prototype.getLocaleText=function(t){return this.l10n.getConstant(this.localeText[""+t])},t.prototype.updateItemStatus=function(){this.contextMenu.showItems(this.hiddenItems,!0),this.contextMenu.enableItems(this.disableItems,!1,!0),this.hiddenItems=[],this.disableItems=[],this.isOpen=!1},t.prototype.ensureItems=function(t,e){var i=this.getKeyFromId(t.id);this.defaultItems[""+i];-1!==this.getDefaultItems().indexOf(i)&&t.target&&(e||this.parent.checkMenu)&&!this.ensureTarget(t)&&this.hiddenItems.push(t.id)},t.prototype.refreshItems=function(){this.updateItems(),this.contextMenu.refresh()},t.prototype.updateItems=function(){for(var t=!0,e=0;e<this.parent.contextMenuSettings.items.length;e++){for(var i=this.parent.contextMenuSettings.items[parseInt(e.toString(),10)],n=0;n<this.contextMenu.items.length;n++)this.contextMenu.items[parseInt(n.toString(),10)].text===this.parent.contextMenuSettings.items[parseInt(e.toString(),10)].text&&(t=!1);t&&this.contextMenu.insertAfter([i],this.contextMenu.items[this.contextMenu.items.length-1].text)}},t.prototype.contextMenuBeforeOpen=function(t){return kO(this,void 0,void 0,function(){var e,i,n,s,r,o,a,l,h,c;return zO(this,function(d){for(this.parent.checkMenu||-1===window.navigator.userAgent.indexOf("Linux")&&-1===window.navigator.userAgent.indexOf("X11")||(this.parent.checkMenu=t.cancel=!0),this.parent.checkMenu&&(this.hiddenItems=[]),(e=t).hiddenItems=[],i=0,n=t.items;i<n.length;i++)if(c=n[i],this.ensureItems(c,t.event),c.items.length)for(s=0,r=c.items;s<r.length;s++)o=r[s],this.ensureItems(o,t.event);for(this.eventArgs=t.event,this.parent.trigger("contextMenuOpen",e),a=!0,this.hiddenItems=this.hiddenItems.concat(e.hiddenItems),this.contextMenu.enableItems(this.disableItems,!1,!0),l=this,h=0;h<t.items.length;h++)c=t.items[parseInt(h.toString(),10)],l.hiddenItems.indexOf(c.id)>-1&&l.contextMenu.hideItems([c.id],!0);for(h=0;h<l.contextMenu.items.length;h++)c=l.contextMenu.items[parseInt(h.toString(),10)],-1===l.hiddenItems.indexOf(c.id)&&(a=!1,l.contextMenu.showItems([c.id],!0));return a&&(e.cancel=a,this.hiddenItems=[]),this.parent.selectedItems.nodes.length&&this.parent.selectedItems.nodes[0].isPhase&&!this.parent.contextMenuSettings.showCustomMenuOnly&&(t.cancel=!0),[2]})})},t.prototype.ensureTarget=function(t){var e=this.parent.selectedItems.nodes.length+this.parent.selectedItems.connectors.length,i=!1;switch(this.getKeyFromId(t.id)){case"undo":i=!(!this.parent.historyManager||!this.parent.historyManager.canUndo);break;case"redo":i=!(!this.parent.historyManager||!this.parent.historyManager.canRedo);break;case"paste":i=!!this.parent.commandHandler.clipboardData.clipObject;break;case"selectAll":i=!!(this.parent.nodes.length+this.parent.connectors.length);break;case"grouping":i=!!(e>1||this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"group":i=e>1;break;case"unGroup":i=!!(1===this.parent.selectedItems.nodes.length&&0===this.parent.selectedItems.connectors.length&&this.parent.selectedItems.nodes[0]&&this.parent.selectedItems.nodes[0].children&&this.parent.selectedItems.nodes[0].children.length>1);break;case"cut":case"copy":case"order":case"bringToFrontOrder":case"moveForwardOrder":case"sendToBackOrder":case"sendBackwardOrder":i=!!e}return i},t.prototype.destroy=function(){this.contextMenu.destroy(),lt(this.element),this.removeEventListener()},t.prototype.getModuleName=function(){return"contextMenu"},t.prototype.generateID=function(t){return this.parent.element.id+"_contextMenu_"+t},t.prototype.getKeyFromId=function(t){return t.replace(this.parent.element.id+"_contextMenu_","")},t.prototype.buildDefaultItems=function(t){var e;switch(t){case"copy":e={target:PO,iconCss:jO};break;case"cut":e={target:PO,iconCss:VO};break;case"paste":e={target:PO,iconCss:BO};break;case"undo":e={target:PO,iconCss:HO};break;case"redo":e={target:PO,iconCss:RO};break;case"grouping":case"selectAll":e={target:PO};break;case"group":e={target:PO,iconCss:UO};break;case"unGroup":e={target:PO,iconCss:FO};break;case"order":e={target:PO,iconCss:ZO};break;case"bringToFrontOrder":e={target:PO,iconCss:WO};break;case"moveForwardOrder":e={target:PO,iconCss:_O};break;case"sendToBackOrder":e={target:PO,iconCss:YO};break;case"sendBackwardOrder":e={target:PO,iconCss:QO}}return this.defaultItems[""+t]={text:this.getLocaleText(t),id:this.generateID(t),target:e.target,iconCss:e.iconCss?"e-icons "+e.iconCss:""},this.defaultItems[""+t]},t.prototype.getDefaultItems=function(){return["copy","cut","paste","undo","redo","selectAll","grouping","group","unGroup","order","bringToFrontOrder","moveForwardOrder","sendToBackOrder","sendBackwardOrder"]},t.prototype.setLocaleKey=function(){return{copy:"Copy",cut:"Cut",paste:"Paste",undo:"Undo",redo:"Redo",selectAll:"SelectAll",grouping:"Grouping",group:"Group",unGroup:"UnGroup",order:"Order",bringToFrontOrder:"BringToFront",moveForwardOrder:"MoveForward",sendToBackOrder:"SendToBack",sendBackwardOrder:"SendBackward"}},t}(),XO=function(){function t(){this.bpmnTextAnnotationConnector=[]}return t.prototype.getSize=function(t,e){var i=new un(t.width,t.height);return e instanceof Xs||(i.width=i.width||50,i.height=i.height||50),e.actualSize.width&&e.actualSize.height?e.actualSize:(e.measure(new un),i.width=i.width||e.desiredSize.width,i.height=i.height||e.desiredSize.height,void 0!==t.maxWidth&&(i.width=Math.min(i.width,t.maxWidth)),void 0!==t.maxHeight&&(i.height=Math.min(i.height,t.maxHeight)),void 0!==t.minWidth&&(i.width=Math.max(i.width,t.minWidth)),void 0!==t.minHeight&&(i.height=Math.max(i.height,t.minHeight)),i)},t.prototype.initBPMNContent=function(t,e,i){var n=e.shape,s=e.shape.shape;return"Event"===s&&(t=this.getBPMNEventShape(e,n.event)),"Gateway"===s&&(t=this.getBPMNGatewayShape(e)),"DataObject"===s&&(t=this.getBPMNDataObjectShape(e)),"Message"!==s&&"DataSource"!==s||(t=this.getBPMNShapes(e)),"Group"===s&&((t=this.getBPMNGroup(e,i)).style.strokeDashArray=""!==e.style.strokeDashArray?e.style.strokeDashArray:"2 2 6 2",t.cornerRadius=10),"Activity"===s&&(t=this.getBPMNActivityShape(e)),"TextAnnotation"===s&&(t=e.parentObj instanceof qb||e.parentObj instanceof Oy?this.getBpmnTextAnnotationShape(e,e.shape,i):this.getBpmnTextAnnotationSymbol(e,e.shape,i)),t},t.prototype.getBpmnTextAnnotationShape=function(t,e,i){var n=new $s;n.measureChildren=!1,n.offsetX=t.offsetX,n.offsetY=t.offsetY,n.float=!0,n.id=t.id+"_textannotation",n.style.strokeColor="transparent",n.style.fill="transparent",n.relativeMode="Object",n.rotateAngle=0;var s=t.width,r=t.height,o=new Tn(0,0,0,0);0!==s&&0!==r&&(o=new Tn(t.offsetX-s/2,t.offsetY-r/2,s,r));var a=i.isProtectedOnChange;return i.isProtectedOnChange=!1,this.setAnnotationPath(o,n,t,e,e.textAnnotation.textAnnotationDirection,i),i.isProtectedOnChange=a,n},t.prototype.getBpmnTextAnnotationSymbol=function(t,e,i){var n="M33.33,15 L0,43 M39.33,0 L33.33,0 L33.33,30 L39.33,30 M60,0";"Top"===e.textAnnotation.textAnnotationDirection?n="M15,33.33 L43,0 M0,39.33 L0,33.33 L30,33.33 L30,39.33 M0,60":"Right"===e.textAnnotation.textAnnotationDirection?n="M6,15 L39.33,43 M0,0 L6,0 L6,30 L0,30 M-20,0":"Bottom"===e.textAnnotation.textAnnotationDirection&&(n="M15,6 L43,39.33 M0,0 L0,6 L30,6 L30,0 M0,-20");var s=new Xs;return s.data=n,s.style.fill="white"===t.style.fill?"transparent":t.style.fill,s.style.strokeDashArray=t.style.strokeDashArray?t.style.strokeDashArray:"",s.style.strokeWidth=t.style.strokeWidth,s.style.strokeColor="transparent"===t.style.strokeColor?"black":t.style.strokeColor,s.style.opacity=t.style.opacity,s},t.prototype.getBPMNShapes=function(t){var e=new Xs;this.setStyle(e,t),0!==(t.constraints&ps.Shadow)&&t.visible&&(e.shadow=t.shadow);var i=GO(t.shape.shape);return e.data=i,e.id=t.id+"_"+t.shape.shape,void 0!==t.width&&void 0!==t.height&&(e.width=t.width,e.height=t.height),e},t.prototype.getBPMNGroup=function(t,e){var i=new $s;this.setStyle(i,t),i.id=t.id+"_group",i.children||(i.children=[]);var n=t.shape.group;if(t.shape.group)for(var s=0;s<n.children.length;s++){var r=e.nameTable[n.children[parseInt(s.toString(),10)]];i.children.push(r.wrapper)}return i.width=t.width,i.height=t.height,i},t.prototype.getBPMNGatewayShape=function(t){var e=new $s,i=new Xs;i.id=t.id+"_0_gateway",i.offsetX=t.offsetX,i.offsetY=t.offsetY,i.data="M 40 20 L 20 40 L 0 20 L 20 0 L 40 20 Z",this.setStyle(i,t);var n=new Xs;n.id=t.id+"_1_gatewayType",n.style.opacity=t.style.opacity,n.style.strokeColor=t.style.strokeColor,n.horizontalAlignment="Center",n.verticalAlignment="Center",n.relativeMode="Object";var s=t.shape.gateway,r=KO(s.type);"EventBased"===s.type||"ExclusiveEventBased"===s.type||"ParallelEventBased"===s.type?n.style.fill="white":n.style.fill="black",n.data=r,e.style.fill="transparent",e.style.strokeColor="transparent",e.style.strokeWidth=0,e.children=[i,n];var o=this.getSize(t,i);return this.setSizeForBPMNGateway(t.shape.gateway,e,o.width,o.height),e},t.prototype.getBPMNDataObjectShape=function(t){var e=new $s,i=t.shape.dataObject,n=new Xs;n.id=t.id+"_0_dataobj",n.data="M29.904,5 L7.853,5 L7.853,45 L42.147,45 L42.147,17.242,L29.932,5,L29.932,17.242,L42.147,17.242";var s=this.getSize(t,n);n.width=s.width,n.height=s.height,this.setStyle(n,t);var r=new Xs;r.id=t.id+"_1_type",r.width=25,r.height=20,r.margin.left=5,r.margin.top=5,r.data="M 3 9.4 l 6 0 v 2.4 l 3.6 -4 L 9 4 v 2.5 H 3 V 9.4 Z",r.style.opacity=t.style.opacity;var o=new Xs;switch(o.id=t.id+"_2_collection",o.width=7.5,o.height=15,o.style.fill="black",o.visible=!0,o.horizontalAlignment="Center",o.verticalAlignment="Bottom",o.relativeMode="Object",o.style.opacity=t.style.opacity,o.data="M 0 0 L 0.1 0 L 0.1 2 L 0 2 Z M 0.4 0 L 0.6 0 L 0.6 2 L0.4 2 Z M 0.9 0 L 1 0 L 1 2 L 0.9 2 Z",i.type){case"None":r.visible=!1;break;case"Input":r.style.fill="white";break;case"Output":r.style.fill="black"}return!1===i.collection&&(o.visible=!1),e.style.fill="transparent",e.style.strokeColor="transparent",e.style.strokeWidth=0,e.children=[n,r,o],e},t.prototype.getBPMNTaskShape=function(t){var e=t.shape.activity.task,i=new $s,n=new Ws;n.cornerRadius=10;var s=this.getSize(t,n);n.id=t.id+"_0_task",n.width=s.width,n.height=s.height,this.setStyle(n,t),void 0!==e.call&&!0===e.call&&(n.style.strokeWidth=4),i.width=s.width,i.height=s.height;var r,o=this.getTaskChildCount(t),a=12*o,l=s.width/2-a;r=1===o?l+8:l+8*(o-1);var h=new Xs;"Receive"===e.type||"Send"===e.type?(h.width=18,h.height=16):"Manual"===e.type?(h.width=16,h.height=11):(h.width=20,h.height=20),h.id=t.id+"_1_tasktType",h.margin.left=5,h.margin.top=5,e.type=e.type||"None";var c=JO(e.type);if(h.data=c,h.style.fill="transparent",h.style.opacity=t.style.opacity,"Send"===e.type&&(h.style.fill="black"),i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i.children=[n,h],"Service"===e.type){var d=new Xs;d.id=t.id+"_1_taskTypeService",d.data=c,d.margin.left=h.margin.left+9,d.margin.top=h.margin.top+9,d.style.fill="white",d.style.opacity=t.style.opacity,i.children.push(d)}var p=e.loop,u=new Xs,g=$O(p);u.data=g,u.style.fill="black",u.visible="None"!==p,1===o&&(r=l+9),u.margin.left=r-3,!0===u.visible&&(r+=20),u.width=12,u.height=12,u.margin.bottom=5,u.id=t.id+"_2_loop",u.horizontalAlignment="Left",u.verticalAlignment="Bottom",u.setOffsetWithRespectToBounds(0,1,"Fraction"),u.relativeMode="Point",u.style.fill="transparent",h.style.opacity=t.style.opacity,i.children.push(u);var m=new Xs;return m=this.getBPMNCompensationShape(t,m),!0===e.compensation?m.visible=!0:m.visible=!1,1===o&&(r=l+9),m.margin.left=r-3,r+=18,i.children.push(m),i},t.prototype.getBPMNEventShape=function(t,e,i,n){var s,r,o,a,l=new $s;n=n||t.id;var h="M164.1884,84.6909000000001C156.2414,84.6909000000001,149.7764,78.2259000000001,149.7764,70.2769000000001C149.7764,62.3279000000001,156.2414,55.8629000000001,164.1884,55.8629000000001C172.1354,55.8629000000001,178.6024,62.3279000000001,178.6024,70.2769000000001C178.6024,78.2259000000001,172.1354,84.6909000000001,164.1884,84.6909000000001",c=t.shape.event;if(x()||"Event"!==t.shape.shape||(s=c.event,r=c.trigger),o=e.width,a=e.height,i)o=o||20,a=a||20;else if(void 0===e.width||void 0===e.height){var d=new Xs;d.data=h;var p=this.getSize(t,d);o=p.width,a=p.height}var u=t.shape.activity;if(!x()&&"Activity"===t.shape.shape){u.subProcess;s=e.event,r=e.trigger}var g=new Xs;g.data=h,g.id=n+"_0_event",g.width=o,g.height=a,g.horizontalAlignment="Center",g.verticalAlignment="Center",g.relativeMode="Object",this.setStyle(g,t);var m=new Xs;m.data=h,m.id=n+"_1_event",m.style.gradient=t.style.gradient,m.horizontalAlignment="Center",m.verticalAlignment="Center",m.relativeMode="Object",m.style.strokeColor=t.style.strokeColor,m.style.opacity=t.style.opacity;var f=new Xs,y=ek[r.toString()];switch(f.data=y,f.id=n+"_2_trigger",f.horizontalAlignment="Center",f.verticalAlignment="Center",f.relativeMode="Object",f.style.strokeColor=t.style.strokeColor,f.style.opacity=t.style.opacity,s){case"Start":m.visible=!1;break;case"NonInterruptingStart":g.style.strokeDashArray="2 3",m.visible=!1;break;case"Intermediate":g.style.fill=t.style.fill,g.style.gradient=null;break;case"NonInterruptingIntermediate":g.style.fill=t.style.fill,g.style.gradient=null,g.style.strokeDashArray="2 3",m.style.strokeDashArray="2 3";break;case"ThrowingIntermediate":case"End":g.style.fill="End"!==s||"white"!==t.style.fill?t.style.fill:"black",g.style.gradient=null,f.style.fill="black",f.style.strokeColor="white"}return l.style.fill="transparent",l.style.strokeColor="transparent",l.style.strokeWidth=0,l.children=[g,m,f],this.setSizeForBPMNEvents(c,l,o,a),l},t.prototype.setEventVisibility=function(t,e){var i=t.shape.event.event,n=e[0],s=e[1];e[2];switch(i){case"Start":s.visible=!1;break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",s.visible=!1}},t.prototype.setSubProcessVisibility=function(t){var e=t.shape.activity.subProcess,i=e.events.length,n="Transaction"===t.shape.activity.subProcess.type?2:0,s=t.wrapper.children[0].children[0];if(!1===e.adhoc&&(s.children[3+n+i].visible=!1),!1===e.compensation&&(s.children[4+n+i].visible=!1),i>0)for(var r=0;r<i;r++)this.setEventVisibility(t,s.children[2+r].children)},t.prototype.getBPMNSubProcessShape=function(t){var e,i,n,s=new $s,r=new Xs,o=(new $s,new Xs),a=t.shape.activity,l=a.subProcess,h=this.getSubprocessChildCount(t),c=new Ws;c.id=t.id+"_0_Subprocess",c.style.fill="transparent",c.cornerRadius=10;var d=this.getSize(t,c);c.width=d.width,c.height=d.height,s.children=[c],"Transaction"===a.subProcess.type&&this.getBPMNSubProcessTransaction(t,t.shape,s);var p=12,u=h*p,g=d.width/2;n=1===h?g-6:g-u/2-4*(h-1)/2,this.setStyle(c,t),0!==(t.constraints&ps.Shadow)&&t.visible&&(s.shadow=t.shadow);var m=new Xs;if(m.id=t.id+"_0_collapsed",m.width=12,m.height=12,m.style.fill="black",m.style.strokeColor=t.style.strokeColor,m.margin.bottom=5,m.style.opacity=t.style.opacity,m.horizontalAlignment="Left",m.verticalAlignment="Bottom",m.setOffsetWithRespectToBounds(0,1,"Fraction"),m.relativeMode="Point",m.data=GO("collapsedShape"),m.margin.left=n,!0!==l.collapsed||l.processes?m.visible=!1:m.visible=!0,!0===m.visible&&(n+=16),s.children.push(m),"Event"===l.type){c.style.strokeWidth=1,c.style.strokeDashArray="2 2",e=l.events;for(var f=0;f<e.length;f++)i=e[parseInt(f.toString(),10)],this.getBPMNSubEvent(i,t,s)}1===h&&(n=g-6),(o=this.getBPMNSubProcessLoopShape(t)).margin.left=n,!0===o.visible&&(n+=16),o.style.opacity=t.style.opacity,s.children.push(o),c.id=t.id+"_boundary","Default"===l.boundary&&(c.style.strokeWidth=t.style.strokeWidth?t.style.strokeWidth:1,c.style.strokeDashArray="1 0"),"Call"===l.boundary&&(c.style.strokeWidth=4,c.style.strokeDashArray="1 0"),"Event"===l.boundary&&(c.style.strokeWidth=t.style.strokeWidth?t.style.strokeWidth:1,c.style.strokeDashArray="2 2"),1===h&&(n=g-6),(r=this.getBPMNAdhocShape(t,r,l)).margin.left=n,!0===r.visible&&(n+=16),r.style.opacity=t.style.opacity,s.children.push(r);var y=new Xs;return!0===l.compensation?y.visible=!0:y.visible=!1,1===h&&(n=g-6),(y=this.getBPMNCompensationShape(t,y)).margin.left=n,!0===y.visible&&(n+=16),y.style.opacity=t.style.opacity,s.children.push(y),s.style.strokeColor="transparent",s.style.strokeWidth=0,s.style.fill="transparent",s},t.prototype.getBPMNSubEvent=function(t,e,i,n){i.children=i.children||[];var s=this.getBPMNEventShape(e,t,!0,n);this.getBPMNSubprocessEvent(e,s,t),s.id=n||e.id+"_subprocessEvents",s.width=t.width||20,s.height=t.height||20,s.setOffsetWithRespectToBounds(t.offset.x,t.offset.y,"Fraction"),s.relativeMode="Point",s.margin=t.margin,s.horizontalAlignment=t.horizontalAlignment,s.verticalAlignment=t.verticalAlignment,s.style.fill="transparent",s.style.strokeColor="transparent",s.style.strokeWidth=0,i.children.push(s)},t.prototype.getBPMNSubProcessTransaction=function(t,e,i){var n=i.children[0].width,s=i.children[0].height,r=new Ws;r.margin={left:3,right:0,top:3,bottom:0},r.id=t.id+"_0_Subprocess_innnerRect",r.cornerRadius=10,r.width=n-6,r.style.fill="transparent",r.height=s-6,i.children.push(r);var o=new $s;o.id=t.id+"_transaction_events",o.style.gradient=t.style.gradient;var a=e.activity.subProcess.transaction;this.getBPMNSubEvent(a.success,t,o,t.id+"_success"),this.getBPMNSubEvent(a.cancel,t,o,t.id+"_cancel"),this.getBPMNSubEvent(a.failure,t,o,t.id+"_failure"),this.updateDiagramContainerVisibility(o.children[0],a.success.visible),this.updateDiagramContainerVisibility(o.children[1],a.cancel.visible),this.updateDiagramContainerVisibility(o.children[2],a.failure.visible),o.float=!0,o.width=n,o.height=s,o.style.fill=o.style.strokeColor="transparent",i.children.push(o)},t.prototype.getBPMNSubProcessLoopShape=function(t){var e,i,n=t.shape.activity,s=new Xs;return i=$O(e=n.subProcess.loop),s.visible="None"!==e,s.id=t.id+"_loop",s.data=i,s.style.fill="black",s.width=12,s.height=12,s.horizontalAlignment="Left",s.verticalAlignment="Bottom",s.setOffsetWithRespectToBounds(0,1,"Fraction"),s.relativeMode="Point",s.margin.bottom=5,s.style.fill="transparent",s.style.strokeColor=t.style.strokeColor,s},t.prototype.drag=function(t,e,i,n){var s=n.nameTable[t.processId],r=t.margin.left,o=t.margin.top,a={top:t.margin.top+i>=0?t.margin.top+i:t.margin.top,left:t.margin.left+e>=0?t.margin.left+e:t.margin.left};if(a.top===t.margin.top&&a.left===t.margin.left||n.nodePropertyChange(t,{},{margin:a}),!("Drag"===n.eventHandler.currentAction||n.eventHandler.isNudgeKey||t.hasTextAnnotation||o===t.margin.top&&r===t.margin.left)){var l={offsetX:t.offsetX+e>=0?t.offsetX+e:t.offsetX,offsetY:t.offsetY+i>=0?t.offsetY+i:t.offsetY};n.nodePropertyChange(t,{},{offsetX:l.offsetX,offsetY:l.offsetY})}var h=this.getChildrenBound(s,t.id,n);this.updateSubProcessess(h,t,n);var c=t.margin.left-r,d=t.margin.top-o;if(0!==t.outEdges.length)for(var p=0;p<t.outEdges.length;p++){var u=n.nameTable[t.outEdges[parseInt(p.toString(),10)]];if(u&&"Bpmn"===u.shape.type&&u.isBpmnAnnotationConnector){var g=n.nameTable[u.targetID],m={offsetX:g.offsetX,offsetY:g.offsetY};g.offsetX+=c,g.offsetY+=d;var f={offsetX:g.offsetX,offsetY:g.offsetY};n.nodePropertyChange(g,m,f)}}s.wrapper.measure(new un(void 0,void 0)),s.wrapper.arrange(s.wrapper.desiredSize),n.refreshCanvasLayers(),n.updateSelector(),n.updateDiagramObject(s),n.updateConnectorEdges(t),this.updateDocks(t,n)},t.prototype.dropBPMNchild=function(t,e,i){if(e&&"Bpmn"===e.shape.type&&"Bpmn"===t.shape.type&&!x()){var n=i.nameTable[t.id].shape.activity.subProcess;if(i.currentSymbol&&"Bpmn"===t.shape.type&&!n.collapsed)return void(e.processId=t.id);if(n.processes=n.processes||[],n.processes&&-1===n.processes.indexOf(e.id)&&!n.collapsed){n.processes.push(e.id),n.processes.length>1&&this.sortProcessOrder(n.processes,i);var s=Fn(e),r=i.nameTable[e.id].wrapper,o=i.nameTable[t.id].wrapper;r.margin.top=r.offsetY-r.actualSize.height/2-(t.offsetY-t.actualSize.height/2),r.margin.left=r.offsetX-r.actualSize.width/2-(t.offsetX-t.actualSize.width/2),r.margin.top=r.margin.top<0?0:r.margin.top,r.margin.left=r.margin.left<0?0:r.margin.left,i.nameTable[e.id].processId=t.id,o.children.push(i.nameTable[e.id].wrapper);var a=this.getChildrenBound(t,e.id,i);this.updateSubProcessess(a,e,i),o.measure(new un(void 0,void 0)),o.arrange(o.desiredSize),i.refreshCanvasLayers(),i.updateSelector();var l={type:"PositionChanged",undoObject:{nodes:[s]},redoObject:{nodes:[Fn(e)]},category:"Internal"};if(i.addHistoryEntry(l),"SVG"===i.mode)e.zIndex<t.zIndex&&(i.updateProcesses(e),this.updateSubprocessNodeIndex(e,i,t)),Yy(t.id+"_groupElement").appendChild(Yy(e.id+"_groupElement"));this.updateDocks(e,i)}}},t.prototype.sortProcessOrder=function(t,e){t.sort(function(t,i){return e.nameTable[""+t].zIndex-e.nameTable[""+i].zIndex})},t.prototype.updateIndex=function(t,e){var i=e,n=t.getIndex(i,i.id);t.nodes.splice(Number(n),1),i.zIndex=++t.activeLayer.objectZIndex,t.nodes.push(i)},t.prototype.updateSubprocessNodeIndex=function(t,e,i){if(t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=0;n<t.shape.activity.subProcess.processes.length;n++){this.updateIndex(e,t);var s=t.shape.activity.subProcess.processes[parseInt(n.toString(),10)];if(e.nameTable[""+s].shape.activity.subProcess.processes.length>0)this.updateSubprocessNodeIndex(e.nameTable[""+s],e,i);else{var r=e.nameTable[t.shape.activity.subProcess.processes[parseInt(n.toString(),10)]];this.updateIndex(e,r)}}else this.updateIndex(e,t)},t.prototype.updateDocks=function(t,e){if("Bpmn"===t.shape.type&&t.shape.activity.subProcess.processes&&!t.shape.activity.subProcess.collapsed)for(var i=0,n=t.shape.activity.subProcess.processes;i<n.length;i++){var s=n[i],r=e.nameTable[""+s];r&&(e.updateConnectorEdges(r),r.wrapper.measure(new un(r.wrapper.width,r.wrapper.height)),r.wrapper.arrange(r.wrapper.desiredSize),r.shape.activity.subProcess.processes&&r.shape.activity.subProcess.processes.length&&this.updateDocks(r,e))}},t.prototype.removeBpmnProcesses=function(t,e){var i=e.nameTable[t.processId];if("Bpmn"===t.shape.type&&t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=(s=t.shape.activity.subProcess.processes).length-1;n>=0;n--)e.remove(e.nameTable[s[parseInt(n.toString(),10)]]);if(i){e.removeDependentConnector(t);var s=i.shape.activity.subProcess.processes;this.removeChildFromBPMN(i.wrapper,t.id,e,!0);var r=s.indexOf(t.id);s.splice(r,1)}},t.prototype.removeChildFromBPMN=function(t,e,i,n){for(var s=0,r=t.children;s<r.length;s++){var o=r[s];o.id===e?(t.children.splice(t.children.indexOf(o),1),n||this.removeGElement(o.id,i)):o.children&&this.removeChildFromBPMN(o,e,i,n)}},t.prototype.removeGElement=function(t,e){var i=document.getElementById(t+"_groupElement"),n=document.getElementById(e.element.id+"_diagramLayer");i.parentElement.removeChild(i),n.appendChild(i);var s=e.nameTable[""+t],r=e.nameTable[""+s.processId],o=s.zIndex+1,a=this.getNode(o,e);if(a.length>0){var l=document.getElementById(a[0].id+"_groupElement"),h=Array.from(n.children).findIndex(function(t){return t===l}),c=-1!==h?h:1;s.zIndex<r.zIndex&&n.children[parseInt(c.toString(),10)].insertAdjacentElement("beforebegin",i)}},t.prototype.getNode=function(t,e){var i=e.nodes.filter(function(e){return e.zIndex===t});return 0===i.length&&t>0?this.getNode(t-1,e):i},t.prototype.removeProcess=function(t,e){var i=e.nameTable[""+t];if(i){var n=e.nameTable[i.processId],s=Fn(i);if(n&&"Bpmn"===n.shape.type){var r=n.shape.activity.subProcess.processes;this.removeChildFromBPMN(n.wrapper,t,e,!0);var o=r.indexOf(t);if(r.splice(o,1),i.processId="",!(e.diagramActions&Is.UndoRedo)){var a={type:"PositionChanged",undoObject:{nodes:[s]},redoObject:{nodes:[Fn(i)]},category:"Internal"};e.addHistoryEntry(a)}e.refreshDiagramLayer(),e.updateSelector()}}},t.prototype.addProcess=function(t,e,i){t.id=t.id||Hn();var n=t.id,s=i.nameTable[""+n],r=Fn(s);s||i.add(t),t.processId=e;var o=i.nameTable[""+e],a=o.shape.activity.subProcess,l=i.diagramActions&Is.UndoRedo;if(l||i.protectPropertyChange(!0),a.processes||(a.processes=[]),l||i.protectPropertyChange(!1),s&&o&&"Bpmn"===o.shape.type&&"Bpmn"===s.shape.type){if(s.processId=e,!l){i.protectPropertyChange(!0),s.zIndex<o.zIndex&&this.updateIndex(i,s);var h=o.offsetX-o.width*o.pivot.x+(s.margin.left+s.width*s.pivot.x),c=o.offsetY-o.height*o.pivot.y+(s.margin.top+s.height*s.pivot.y);s.offsetX===h&&s.offsetY===c||(s.offsetX=h,s.offsetY=c),i.protectPropertyChange(!1)}var d=o.shape.activity.subProcess.processes;if(d.indexOf(n)<0&&d.push(n),o.wrapper.children.push(s.wrapper),o.wrapper.measure(new un),o.wrapper.arrange(o.wrapper.desiredSize),i.bpmnModule.updateDocks(o,i),i.refreshDiagramLayer(),i.updateSelector(),!(i.diagramActions&Is.UndoRedo)){var p={type:"PositionChanged",undoObject:{nodes:[r]},redoObject:{nodes:[Fn(s)]},category:"Internal"};i.addHistoryEntry(p)}if("SVG"===i.mode&&s.shape&&s.shape.activity&&!s.shape.activity.subProcess.processes)Yy(e+"_groupElement").appendChild(Yy(t.id+"_groupElement"))}},t.prototype.getChildrenBound=function(t,e,i){var n,s=t.shape.activity.subProcess.processes;if(s&&s.length)for(var r=0,o=s;r<o.length;r++){var a=o[r];e!==a&&(n=n?i.nameTable[""+a].wrapper.bounds.uniteRect(n):i.nameTable[""+a].wrapper.bounds)}return n||i.nameTable[""+e].wrapper.bounds},t.prototype.updateSubProcessess=function(t,e,i){var n,s,r,o,a=i.nameTable[e.processId],l={x:.5,y:.5},h=e.width||e.minWidth,c=e.height||e.minHeight;a.wrapper.bounds.left+e.margin.left+h>a.wrapper.bounds.right&&(r=!0),a.wrapper.bounds.top+e.margin.top+c>a.wrapper.bounds.bottom&&(o=!0),r&&(l.x=0),o&&(l.y=0);var d=a.wrapper.actualSize;r&&(n=(e.wrapper.margin.left+e.wrapper.bounds.width)/d.width),o&&(s=(e.wrapper.margin.top+e.wrapper.bounds.height)/d.height),(n>0||s>0)&&a.constraints&ps.Resize&&i.commandHandler.scale(i.nameTable[e.processId],n||1,s||1,l)},t.prototype.getBPMNCompensationShape=function(t,e){return e.id=t.id+"_0_compensation",e.width=12,e.height=12,e.margin.bottom=5,e.style.fill="transparent",e.style.strokeColor=t.style.strokeColor,e.horizontalAlignment="Left",e.verticalAlignment="Bottom",e.relativeMode="Object",e.data="M 22.462 18.754 l -6.79 3.92 l 6.79 3.92 V 22.89 l 6.415 3.705 v -7.841 l -6.415 3.705 V 18.754 Z M 28.331 19.701 v 5.947 l -5.149 -2.973 L 28.331 19.701 Z M 21.916 25.647 l -5.15 -2.973 l 5.15 -2.973 V 25.647 Z M 22.275 12.674 c -5.513 0 -9.999 4.486 -9.999 9.999 c 0 5.514 4.486 10.001 9.999 10.001 c 5.514 0 9.999 -4.486 9.999 -10.001 C 32.274 17.16 27.789 12.674 22.275 12.674 Z M 22.275 32.127  c -5.212 0 -9.453 -4.241 -9.453 -9.454 c 0 -5.212 4.241 -9.453 9.453 -9.453 c 5.212 0 9.453 4.241 9.453 9.453 C 31.728 27.887 27.487 32.127 22.275 32.127 Z",e},t.prototype.getBPMNActivityShape=function(t){var e,i=new $s,n=t.shape.activity,s=n.activity,r=n.subProcess;n.activity;return"Task"===s&&(e=this.getBPMNTaskShape(t)),"SubProcess"===s&&r&&(e=this.getBPMNSubProcessShape(t)),e.id=s+t.id,i.children=[e],i.style.fill="transparent",i.style.strokeColor="transparent",i.style.strokeWidth=0,i},t.prototype.getBPMNSubprocessEvent=function(t,e,i){var n,s;if(0!==i.annotations.length)for(var r=0;r<i.annotations.length;r++){var o=i.annotations[parseInt(r.toString(),10)];(n=t.initAnnotationWrapper(o)).width=i.width,n.height=i.height,e.children.push(n)}if(0!==i.ports.length)for(r=0;r<i.ports.length;r++){var a=i.ports[parseInt(r.toString(),10)];s=t.initPortWrapper(a),e.children.push(s)}},t.prototype.getBPMNAdhocShape=function(t,e,i){return e.id=t.id+"_0_adhoc",e.width=12,e.height=8,e.style.fill="black",e.style.strokeColor=t.style.strokeColor,e.margin.bottom=5,e.horizontalAlignment="Left",e.verticalAlignment="Bottom",e.relativeMode="Object",e.data="M 49.832 76.811 v -2.906 c 0 0 0.466 -1.469 1.931 -1.5 c 1.465 -0.031 2.331 1.219 2.897 1.688 s 1.06 0.75 1.526 0.75 c 0.466 0 1.548 -0.521 1.682 -1.208 s 0.083 3.083 0.083 3.083 s -0.76 0.969 -1.859 0.969 c -1.066 0 -1.865 -0.625 -2.464 -1.438 s -1.359 -0.998 -2.064 -0.906 C 50.598 75.467 49.832 76.811 49.832 76.811 Z",i&&!0===i.adhoc?e.visible=!0:e.visible=!1,e},t.prototype.setAnnotationPath=function(t,e,i,n,s,r){var o=new Xs;o.id=e.id+"_path",o.width=i.width,o.height=i.height,o.style.fill="white"===i.style.fill?"transparent":i.style.fill,o.style.strokeDashArray=i.style.strokeDashArray?i.style.strokeDashArray:"",o.style.gradient=i.style.gradient?i.style.gradient:null,o.style.strokeWidth=i.style.strokeWidth,o.style.strokeColor="transparent"===i.style.strokeColor?"black":i.style.strokeColor,o.style.opacity=i.style.opacity,o.relativeMode="Object",o.horizontalAlignment="Stretch",o.verticalAlignment="Stretch";var a=i.ports.length>0?i.ports[0]:new Wc(i,"ports","",!0);switch(r.protectPropertyChange(!0),i.ports=[a],r.protectPropertyChange(!1),s){case"Left":o.data="M10,20 L0,20 L0,0 L10,0",o.width=10,o.horizontalAlignment="Left",a.offset={x:0,y:.5};break;case"Right":o.data="M0,0 L10,0 L10,20 L0,20",o.width=10,o.horizontalAlignment="Right",a.offset={x:1,y:.5};break;case"Top":o.data="M20,10 L20,0 L0,0 L0,10",o.height=10,o.verticalAlignment="Top",a.offset={x:.5,y:0};break;case"Bottom":o.data="M0,0 L0,10 L20,10 L20,0",o.height=10,o.verticalAlignment="Bottom",a.offset={x:.5,y:1};break;default:if(""!==n.textAnnotation.textAnnotationTarget){if(r.nameTable[n.textAnnotation.textAnnotationTarget]){var l=r.nameTable[n.textAnnotation.textAnnotationTarget];if(l.hasTextAnnotation=!0,null!==l.wrapper){var h=l.width,c=l.height,d=new Tn(0,0,0,0);0!==h&&0!==c&&(d=new Tn(l.offsetX-h/2,l.offsetY-c/2,h,c)),this.setAnnotationPosition(d,i,t,o)}}}else""===n.textAnnotation.textAnnotationTarget&&(o.data="M10,20 L0,20 L0,0 L10,0",o.width=10,o.horizontalAlignment="Left",a.offset={x:0,y:.5})}e.children=[],e.children.push(o)},t.prototype.setAnnotationPosition=function(t,e,i,n){var s=e.ports[0],r={x:i.x,y:i.y},o=this.getAnnotationPathAngle(r,t);90===o?(n.data="M20,10 L20,0 L0,0 L0,10",n.height=10,n.verticalAlignment="Top",s.offset={x:.5,y:0}):180===o?(n.data="M0,0 L10,0 L10,20 L0,20",n.width=10,n.horizontalAlignment="Right",s.offset={x:1,y:.5}):0===o?(n.data="M10,20 L0,20 L0,0 L10,0",n.width=10,n.horizontalAlignment="Left",s.offset={x:0,y:.5}):(n.data="M0,0 L0,10 L20,10 L20,0",n.height=10,n.verticalAlignment="Bottom",s.offset={x:.5,y:1})},t.prototype.getSubprocessChildCount=function(t){var e=0,i=t.shape.activity.subProcess,n=i.loop;return void 0!==n&&"None"!==n&&e++,void 0!==i.compensation&&!0===i.compensation&&e++,void 0!==i.collapsed&&!0===i.collapsed&&e++,void 0!==i.adhoc&&!0===i.adhoc&&e++,e},t.prototype.getTaskChildCount=function(t){var e=0,i=t.shape.activity.task;return void 0!==i.compensation&&!0===i.compensation&&e++,void 0!==i.loop&&"None"!==i.loop&&e++,e},t.prototype.setStyle=function(t,e){t.style.fill=e.style.fill,t.style.strokeColor=e.style.strokeColor,t.style.strokeWidth=e.style.strokeWidth,t.style.strokeDashArray=e.style.strokeDashArray,t.style.opacity=e.style.opacity,t.style.gradient=e.style.gradient,0!==(e.constraints&ps.Shadow)&&e.visible&&(t.shadow=e.shadow)},t.prototype.updateBPMN=function(t,e,i,n){var s=t.shape||{},r=i.wrapper.children[0],o=i.shape.shape||i.shape.bpmnShape;if(s.textAnnotation&&"TextAnnotation"===o){if(void 0!==s.textAnnotation.textAnnotationDirection){this.setAnnotationPath(i.wrapper.bounds,i.wrapper.children[0],i,i.shape,i.shape.textAnnotation.textAnnotationDirection,n),i.wrapper.children[0].children[0].id=i.id+"_textannotation_path";var a={ports:{0:{offset:i.ports[0].offset}}};n.nodePropertyChange(i,{},a)}if(void 0!==s.textAnnotation.textAnnotationTarget){var l=n.nameTable[s.textAnnotation.textAnnotationTarget];if(l&&"Bpmn"===l.shape.type)(h=n.nameTable[i.inEdges[0]])&&(h.sourceID=l.id,n.connectorPropertyChange(h,{},{sourceID:l.id}));else if(""===s.textAnnotation.textAnnotationTarget){var h;if(h=n.nameTable[i.inEdges[0]]){var c=n.nameTable[e.shape.textAnnotation.textAnnotationTarget],d=c.outEdges.indexOf(h.id);c.outEdges.splice(d,1),h.sourceID="",n.connectorPropertyChange(h,{},{sourceID:""})}}}}var p=void 0!==t.width||void 0!==t.height||void 0!==t.maxWidth||void 0!==t.minWidth||void 0!==t.maxHeight||void 0!==t.minHeight;if("Gateway"===s.shape&&s.gateway)this.removeBPMNElementFromDOM(i,n),i.wrapper.children[0]=this.getBPMNGatewayShape(i);else if("DataObject"===s.shape&&s.dataObject)this.removeBPMNElementFromDOM(i,n),i.wrapper.children[0]=this.getBPMNDataObjectShape(i);else if("Activity"===s.shape&&s.activity)this.removeBPMNElementFromDOM(i,n),i.wrapper.children[0]=this.getBPMNActivityShape(i);else if("Event"!==i.shape.bpmnShape&&"Event"!==i.shape.shape&&"Event"!==s.shape||!s.event)"Message"===s.shape||"DataSource"===s.shape?(this.removeBPMNElementFromDOM(i,n),i.wrapper.children[0]=this.getBPMNShapes(i)):void 0!==s.gateway||"Gateway"===o&&p?this.updateBPMNGateway(i,t):void 0!==s.dataObject||"DataObject"===o&&p?this.updateBPMNDataObject(i,t,e):void 0!==s.activity||"Activity"===o&&p?this.updateBPMNActivity(i,t,e,n):(void 0!==s.event||"Event"===o&&p)&&this.updateBPMNEvent(i,t,e);else{this.removeBPMNElementFromDOM(i,n);var u=s.event;i.wrapper.children[0]=this.getBPMNEventShape(i,u)}if(i.wrapper.children[0].id=i.wrapper.children[0].id||r.id,t.style){var g=r;if(r instanceof _s&&(x()||"Activity"!==i.shape.shape?g=x()||"Group"!==i.shape.shape?r.children[0]:r:(g=r.children[0].children[0],"Call"===i.shape.activity.subProcess.boundary&&t.style.strokeWidth&&(t.style.strokeWidth=4))),Hm(t.style,g),r&&void 0!==r.children&&r.children.length>0&&!x()&&"Activity"===i.shape.shape&&"SubProcess"===i.shape.activity.activity&&"Transaction"===i.shape.activity.subProcess.type){for(var m=r.children[0].children[2],f=0;f<m.children.length;f++){var y=m.children[parseInt(f.toString(),10)].children[0];Hm(t.style,y)}if(t.style.strokeColor)for(f=0;f<m.children.length;f++){y=m.children[parseInt(f.toString(),10)];this.updateBPMNStyle(y,t.style.strokeColor)}}if(t.style&&t.style.strokeColor&&r&&void 0!==r.children&&r.children.length>0)if(x()||"Activity"!==i.shape.shape||"SubProcess"!==i.shape.activity.activity||"Transaction"===i.shape.activity.subProcess.type)if(x()||"Activity"!==i.shape.shape||"SubProcess"!==i.shape.activity.activity||"Transaction"!==i.shape.activity.subProcess.type)(!x()&&"Gateway"===i.shape.shape||!x()&&"Event"===i.shape.shape)&&this.updateBPMNStyle(r,t.style.strokeColor);else{m=r.children[0].children[2];this.updateBPMNStyle(m,t.style.strokeColor);for(f=3;f<=6;f++){var v=r.children[0].children[parseInt(f.toString(),10)];Hm({strokeColor:t.style.strokeColor},v)}}else{y=r.children[0];this.updateBPMNStyle(y,t.style.strokeColor)}t.style&&void 0!==t.style.opacity&&this.updateBpmnChildOpacity(i.wrapper,t.style.opacity)}},t.prototype.updateBpmnChildOpacity=function(t,e){if(t.children&&t.children.length>0)for(var i=0;i<t.children.length;i++){var n=t.children[parseInt(i.toString(),10)];n.children&&this.updateBpmnChildOpacity(n,e),n instanceof Zs||(n.style.opacity=e)}},t.prototype.removeBPMNElementFromDOM=function(t,e){for(var i=0,n=e.views;i<n.length;i++){var s=n[i];av(t.id+"_groupElement",s)}},t.prototype.updateBPMNStyle=function(t,e){for(var i=0;i<t.children.length;i++){Hm({strokeColor:e},t.children[parseInt(i.toString(),10)])}},t.prototype.updateBPMNGateway=function(t,e){var i=t.shape,n=t.wrapper.children[0];if(i){Hm(t.style,n.children[0]);var s=KO(i.gateway.type),r=this.updateGatewaySubType(n,t,s),o=i.gateway.type;r.style.fill="None"===o||"EventBased"===o||"ExclusiveEventBased"===o||"ParallelEventBased"===o?"white":"black",av(n.children[1].id),n.children.splice(1,1),n.children.push(r)}if(void 0!==e.width||void 0!==e.height||void 0!==e.maxWidth||void 0!==e.minWidth||void 0!==e.maxHeight||void 0!==e.minHeight){var a=e.width||t.width,l=e.height||t.height;if(e.maxWidth||e.minWidth||e.maxHeight||e.minHeight){var h=new Xs,c=this.getSize(t,h);a=c.width,l=c.height}this.setSizeForBPMNGateway(t.shape.gateway,n,a,l)}},t.prototype.updateGatewaySubType=function(t,e,i){var n=new Xs;return n.id=e.id+"_1_gatewayType",n.width=t.children[1].width,n.height=t.children[1].height,n.margin.left=t.children[1].margin.left,n.margin.top=t.children[1].margin.top,n.data=i,n.offsetX=t.children[1].offsetX,n.offsetY=t.children[1].offsetY,n.style=t.children[1].style,n.horizontalAlignment=t.children[1].horizontalAlignment,n.verticalAlignment=t.children[1].verticalAlignment,n.relativeMode=t.children[1].relativeMode,n.transform=t.children[1].transform,n},t.prototype.updateBPMNDataObject=function(t,e,i){var n=e.shape,s=t.wrapper.children[0];if(n){var r=s.children[1],o=s.children[2];if(void 0!==e.style&&(Hm(e.style,s.children[0]),r.style.opacity=t.style.opacity,o.style.opacity=t.style.opacity),n.dataObject){switch(n.dataObject.type){case"None":r.visible=!1;break;case"Input":r.style.fill="white";break;case"Output":r.style.fill="black"}"None"===i.shape.dataObject.type&&(r.visible=!0),void 0!==e.shape.dataObject.collection&&(o.visible=n.dataObject.collection)}}if(void 0!==e.width||void 0!==e.height||void 0!==e.maxWidth||void 0!==e.minWidth||void 0!==e.maxHeight||void 0!==e.minHeight){var a=e.width||t.width,l=e.height||t.height;if(e.maxWidth||e.minWidth||e.maxHeight||e.minHeight){var h=new Xs,c=this.getSize(t,h);a=c.width,l=c.height}this.setSizeForBPMNDataObjects(t.shape.dataObject,s,a,l)}},t.prototype.getEvent=function(t,e,i,n,s,r){switch(i){case"Start":s.visible=!1,n.style.strokeDashArray="",r.style.fill="white",r.style.strokeColor="black",n.style.fill="white";break;case"NonInterruptingStart":n.style.strokeDashArray="2 3",r.style.fill="white",n.style.fill="white",r.style.strokeColor="black",s.visible=!1;break;case"Intermediate":n.style.strokeDashArray="",n.style.fill="white",s.style.strokeDashArray="",n.style.gradient=null,r.style.fill="white",r.style.strokeColor="black",this.updateEventVisibility(e,s);break;case"NonInterruptingIntermediate":n.style.fill="white",n.style.gradient=null,r.style.fill="white",r.style.strokeColor="black",n.style.strokeDashArray="2 3",s.style.strokeDashArray="2 3",this.updateEventVisibility(e,s);break;case"ThrowingIntermediate":case"End":n.style.fill="End"!==i?"white":"black",n.style.strokeDashArray="",s.style.strokeDashArray="",n.style.gradient=null,r.style.fill="black",this.updateEventVisibility(e,s)}},t.prototype.updateEventVisibility=function(t,e){if(t.shape.activity&&t.shape.activity.subProcess&&t.shape.activity.subProcess.events&&void 0!==t.shape.activity.subProcess.events[0]&&void 0!==t.shape.activity.subProcess.events[0].event)"NonInterruptingStart"!==t.shape.activity.subProcess.events[0].event&&"Start"!==t.shape.activity.subProcess.events[0].event||(e.visible=!0);else if(t.shape.activity&&t.shape.activity.subProcess&&t.shape.activity.subProcess.transaction){var i=t.shape.activity.subProcess.transaction,n=["success","failure","cancel"].some(function(t){var e=i[""+t];return!!e&&function(t){return"Start"===t||"NonInterruptingStart"===t}(e.event)});e.visible=n||e.visible}else void 0!==t.shape.event&&("NonInterruptingStart"!==t.shape.event.event&&"Start"!==t.shape.event.event||(e.visible=!0))},t.prototype.updateBPMNEvent=function(t,e,i){e.shape;var n=t.wrapper.children[0];if(void 0!==e.width||void 0!==e.height||void 0!==e.maxWidth||void 0!==e.minWidth||void 0!==e.maxHeight||void 0!==e.minHeight){var s=e.width||t.width,r=e.height||t.height;if(e.maxWidth||e.minWidth||e.maxHeight||e.minHeight){var o=new Xs,a=this.getSize(t,o);s=a.width,r=a.height}this.setSizeForBPMNEvents(t.shape.event,n,s,r)}},t.prototype.updateBPMNActivity=function(t,e,i,n){var s=e.shape,r=t.wrapper.children[0];if(r&&r.children&&r.children.length>0&&r.children[0]){var o=this.getSize(t,r.children[0].children[0]);if(s){var a=i.shape.activity.activity,l=t.shape.activity.activity;if("SubProcess"!==a&&"Task"!==a||"SubProcess"!==l&&"Task"!==l){if("Task"===l&&void 0!==s.activity.task){this.updateBPMNActivityTask(t,e);var h=this.getTaskChildCount(t),c=void 0,d=12*h,p=o.width/2-d;c=1===h?p+8:p+8*(h-1),void 0!==s.activity.task.loop&&this.updateBPMNActivityTaskLoop(t,e,c,h,p,2)}"SubProcess"===l&&void 0!==s.activity.subProcess&&this.updateBPMNActivitySubProcess(t,e,i,n)}else n.removeElements(t),t.wrapper.children[0]=this.getBPMNActivityShape(t);this.setSizeForBPMNActivity(t.shape.activity,r,e.width||o.width,e.height||o.height,t)}if(void 0!==e.width||void 0!==e.height||void 0!==e.maxWidth||void 0!==e.minWidth||void 0!==e.maxHeight||void 0!==e.minHeight){var u=e.width||t.width,g=e.height||t.height;if(e.maxWidth||e.minWidth||e.maxHeight||e.minHeight){var m=new Ws,f=this.getSize(t,m);u=f.width,g=f.height}this.setSizeForBPMNActivity(t.shape.activity,r,u,g,t)}}},t.prototype.updateBPMNActivityTask=function(t,e){for(var i=e.shape,n=t.wrapper.children[0].children[0],s=i.activity.task,r=0;r<n.children.length;r++){if(n.children[parseInt(r.toString(),10)].id===t.id+"_2_loop")(a=document.getElementById(t.id+"_2_loop")).parentNode.removeChild(a)}if(void 0!==s.type){s.type=s.type||"None";var o=JO(s.type);n.children[1].data=o;for(r=0;r<n.children.length;r++){var a;if(n.children[parseInt(r.toString(),10)].id===t.id+"_1_tasktType")n.children.splice(r,1),(a=document.getElementById(t.id+"_1_tasktType")).parentNode.removeChild(a);if(n.children[parseInt(r.toString(),10)].id===t.id+"_1_taskTypeService")n.children.splice(r,1),(a=document.getElementById(t.id+"_1_taskTypeService")).parentNode.removeChild(a)}var l=new Xs;if(l.id=t.id+"_1_tasktType",l.margin.left=5,l.margin.top=5,l.data=o,l.style.fill="transparent",l.style.opacity=t.style.opacity,"Receive"===s.type||"Send"===s.type)l.width=18,l.height=16,"Send"===s.type&&(l.style.fill="black"),n.children.splice(1,0,l);else if("Manual"===s.type)l.width=16,l.height=11,n.children.splice(1,0,l);else if("Service"!==s.type)l.width=20,l.height=20,n.children.splice(1,0,l);else{l.width=20,l.height=20,n.children.splice(1,0,l);var h=new Xs;h.id=t.id+"_1_taskTypeService",h.data=o,h.margin.left=n.children[1].margin.left+9,h.margin.top=n.children[1].margin.top+9,h.style.fill="white",h.style.opacity=t.style.opacity,n.children.splice(2,0,h)}}if(void 0!==i.activity.task.call&&(!1!==i.activity.task.call?n.children[0].style.strokeWidth=4:n.children[0].style.strokeWidth=1),void 0!==i.activity.task.compensation)if(!0===i.activity.task.compensation){var c="Service"===t.shape.activity.task.type;n.children[c?4:3].visible=!0}else n.children[3].visible=!1},t.prototype.updateBPMNActivityTaskLoop=function(t,e,i,n,s,r){var o,a,l=e.shape,h=t.wrapper.children[0].children[0],c=l.activity,d=t.shape.activity.task.type,p=0;if(void 0!==c.subProcess){var u=c.subProcess;p="Transaction"===c.subProcess.type?2:c.subProcess.events.length>0?1:0,a=$O(o=u.loop),h.children[2+p].data=a,h.children[2+p].visible="None"!==o}else void 0!==c.task&&void 0!==c.task.loop&&"Service"!==d?(a=$O(c.task.loop),h.children[2].data=a,h.children[2].visible="None"!==c.task.loop):void 0!==c.task&&void 0!==c.task.loop&&"Service"===d&&(a=$O(c.task.loop),h.children[3].data=a,h.children[3].visible="None"!==c.task.loop);this.updateChildMargin(h,n,s,i,r+p)},t.prototype.updateChildMargin=function(t,e,i,n,s){if(1===e)for(var r=s;r<t.children.length;r++)2!==r&&!0===t.children[parseInt(r.toString(),10)].visible&&(t.children[parseInt(r.toString(),10)].margin.left=n,n=i+8);else{n=i+8*(e-1);for(r=s;r<t.children.length;r++)2!==r&&!0===t.children[parseInt(r.toString(),10)].visible&&(t.children[parseInt(r.toString(),10)].margin.left=n,n+=20)}},t.prototype.updateBPMNActivitySubProcess=function(t,e,i,n){var s,r=e.shape,o=t.wrapper.children[0],a=this.getSize(t,o.children[0].children[0]),l=r.activity.subProcess,h=this.getSubprocessChildCount(t),c=12*h,d=a.width/2-c;s=1===h?d+8:d+8*(h-1),Hm(t.style,o.children[0].children[0]),void 0!==l.events&&this.updateBPMNSubProcessEvent(t,e,i,n),void 0!==l.adhoc&&this.updateBPMNSubProcessAdhoc(t,i,l,s,h,d),void 0!==l.boundary&&this.updateBPMNSubProcessBoundary(t,l),void 0!==l.collapsed&&this.updateBPMNSubProcessCollapsed(t,i,l,s,h,d,n),void 0!==l.compensation&&this.updateBPMNSubProcessCompensation(t,i,l,s,h,d),void 0!==l.loop&&this.updateBPMNSubProcessLoop(t,i,l,s,h,d),void 0!==l.transaction&&this.updateBPMNSubProcessTransaction(t,e,i,n)},t.prototype.updateBPMNSubProcessEvent=function(t,e,i,n){for(var s=e.shape,r=t.wrapper.children[0],o=r.children[0],a=(r.children[0].children.length,s.activity.subProcess),l=0,h=Object.keys(a.events);l<h.length;l++){var c=h[l],d=Number(c),p=o.children[d+2],u=t.shape.activity.subProcess.events[parseInt(d.toString(),10)];this.updateBPMNSubEvent(t,a.events[parseInt(d.toString(),10)],u,p,e,i,n)}},t.prototype.updateBPMNSubEvent=function(t,e,i,n,s,r,o){var a=t.wrapper.children[0],l=s.shape;if(void 0!==n.children){var h=n.children[0],c=n.children[1],d=n.children[2],p=void 0,u=void 0;if(s.style&&(void 0===s.style.strokeColor&&void 0===s.style.opacity||(a.children[0].children[1].style.strokeColor=s.style.strokeColor,a.children[0].children[1].style.opacity=s.style.opacity)),void 0!==l.activity.subProcess&&(p=e.event,u=e.trigger),void 0!==p&&this.getEvent(s,r,p,h,c,d),void 0!==u&&(s.style&&Hm(s.style,a.children[0]),this.removeBPMNElementFromDOM(t,o),t.wrapper.children[0]=this.getBPMNActivityShape(t)),void 0===e.height&&void 0===e.width||this.getEventSize(e,n),void 0!==e.id&&(n.id=e.id),void 0!==e.margin&&(n.margin=e.margin),void 0!==e.horizontalAlignment&&(n.horizontalAlignment=e.horizontalAlignment),void 0!==e.verticalAlignment&&(n.verticalAlignment=e.verticalAlignment),void 0!==e.offset&&(n.setOffsetWithRespectToBounds(i.offset.x,i.offset.y,"Fraction"),n.relativeMode="Point"),void 0!==e.annotations){var g=void 0,m=a.children[0].children[2];n.children[3]&&n.children.length>3&&(g=n.children[3],o.updateAnnotation(e.annotations[0],g,m))}if(void 0!==e.ports){var f=void 0,y=a.children[0].children[2];n.children[4]&&n.children.length>4&&(f=n.children[4],o.updatePort(e.ports[0],f,y))}void 0!==e.visible&&"Event"!==t.shape.activity.subProcess.type&&this.updateDiagramContainerVisibility(n,e.visible)}},t.prototype.updateBPMNSubProcessTransaction=function(t,e,i,n){var s,r=e.shape.activity.subProcess.transaction,o=t.wrapper.children[0].children[0].children[2];void 0!==r.success&&(s=t.shape.activity.subProcess.transaction.success,this.updateBPMNSubEvent(t,r.success,s,o.children[0],e,i,n)),void 0!==r.cancel&&(s=t.shape.activity.subProcess.transaction.cancel,this.updateBPMNSubEvent(t,r.cancel,s,o.children[1],e,i,n)),void 0!==r.failure&&(s=t.shape.activity.subProcess.transaction.failure,this.updateBPMNSubEvent(t,r.failure,s,o.children[2],e,i,n));for(var a=0,l=t.outEdges;a<l.length;a++){var h=l[a],c=n.nameTable[""+h];switch(c.sourcePortID){case"success":r.success&&void 0!==r.success.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"success"});break;case"cancel":r.cancel&&void 0!==r.cancel.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"cancel"});break;case"failure":r.failure&&void 0!==r.failure.visible&&n.connectorPropertyChange(c,{},{sourcePortID:"failure"})}}},t.prototype.getEventSize=function(t,e){void 0!==t.height&&(e.height=t.height,e.children[0].height=t.height,e.children[1].height=.85*t.height,e.children[2].height=.54*t.height),void 0!==t.width&&(e.width=t.width,e.children[0].width=t.width,e.children[1].width=.85*t.width,e.children[2].width=.54*t.width)},t.prototype.updateBPMNSubProcessAdhoc=function(t,e,i,n,s,r){t.shape;var o,a=t.wrapper.children[0].children[0];o="Transaction"===t.shape.activity.subProcess.type?2:t.shape.activity.subProcess.events.length>0?1:0,!1===i.adhoc?a.children[3+o].visible=!1:a.children[3+o].visible=!0,this.updateChildMargin(a,s,r,n,3+o)},t.prototype.updateBPMNSubProcessBoundary=function(t,e){t.shape;var i=t.wrapper.children[0].children[0].children[0];"Default"===e.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="1 0"),"Call"===e.boundary&&(i.style.strokeWidth=4,i.style.strokeDashArray="1 0"),"Event"===e.boundary&&(i.style.strokeWidth=1,i.style.strokeDashArray="2 2")},t.prototype.updateElementVisibility=function(t,e,i){if(t.shape.activity.subProcess.processes&&t.shape.activity.subProcess.processes.length>0)for(var n=t.shape.activity.subProcess.processes,s=n.length-1;s>=0;s--){var r=i.nameTable[n[parseInt(s.toString(),10)]];r.visible=e,i.updateElementVisibility(r.wrapper,r,e),e&&(x()||"Event"!==r.shape.shape||this.setEventVisibility(r,r.wrapper.children[0].children),"SubProcess"===r.shape.activity.activity&&this.setSubProcessVisibility(r));for(var o=r.inEdges.concat(r.outEdges),a=o.length-1;a>=0;a--){var l=i.nameTable[o[parseInt(a.toString(),10)]];l.visible=e,i.updateElementVisibility(l.wrapper,l,e)}}if(e&&(x()||"Event"!==t.shape.shape||this.setEventVisibility(t,t.wrapper.children[0].children),"SubProcess"===t.shape.activity.activity&&this.setSubProcessVisibility(t),"Task"!==t.shape.activity.activity||x()||"Activity"!==t.shape.shape||"None"!==t.shape.activity.subProcess.loop||(t.wrapper.children[0].children[0].children[3].visible=!1),"DataObject"===t.shape.shape))if(!1===t.shape.dataObject.collection&&"None"===t.shape.dataObject.type)for(a=t.wrapper.children[0].children.length-1;a>0;a--)t.wrapper.children[0].children[parseInt(a.toString(),10)].visible=!1;else!0===t.shape.dataObject.collection&&"None"===t.shape.dataObject.type?t.wrapper.children[0].children[1].visible=!1:!1!==t.shape.dataObject.collection||"Input"!==t.shape.dataObject.type&&"Output"!==t.shape.dataObject.type||(t.wrapper.children[0].children[2].visible=!1)},t.prototype.updateBPMNSubProcessCollapsed=function(t,e,i,n,s,r,o){var a,l=t.shape.activity.subProcess.events.length,h=t.wrapper.children[0].children[0];a="Transaction"===t.shape.activity.subProcess.type?3:t.shape.activity.subProcess.events.length>0?0:1,!1===i.collapsed?(this.updateElementVisibility(t,!0,o),h.children[a+l].visible=!1):(this.updateElementVisibility(t,!1,o),h.children[a+l].visible=!0),this.updateChildMargin(h,s,r,n,3+l)},t.prototype.updateBPMNSubProcessCompensation=function(t,e,i,n,s,r){var o,a=t.wrapper.children[0].children[0];o="Transaction"===t.shape.activity.subProcess.type?2:t.shape.activity.subProcess.events.length>0?1:0,!1===i.compensation?a.children[4+o].visible=!1:a.children[4+o].visible=!0,this.updateChildMargin(a,s,r,n,4+o)},t.prototype.updateBPMNSubProcessLoop=function(t,e,i,n,s,r){this.updateBPMNActivityTaskLoop(t,t,n,s,r,1)},t.prototype.updateBPMNConnector=function(t,e,i,n){var s=i.shape,r=t.shape.flow;return"Sequence"!==s.flow&&!s.sequence||"Sequence"!==r||(t=this.getSequence(t,e,i,n)),"Association"!==s.flow&&!s.association||"Association"!==r||(t=this.getAssociation(t,e,i,n)),"Message"!==s.flow&&!s.message||"Message"!==r||(t=this.getMessage(t,e,i,n)),t},t.prototype.getSequence=function(t,e,i,n){if("Normal"!==i.shape.sequence&&"Normal"!==t.shape.sequence||(t.targetDecorator.shape="Arrow",t.sourceDecorator.shape="None",t.style.strokeDashArray="None",t.targetDecorator.style.fill="black",t.targetDecorator.width=10,t.targetDecorator.height=10,n.connectorPropertyChange(t,e,{targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"None"},style:{strokeDashArray:"None"}}),t.wrapper.children[3].visible=!1),"Default"===i.shape.sequence||"Default"===t.shape.sequence){t.targetDecorator.shape="Arrow",t.sourceDecorator.shape="None",t.style.strokeDashArray="None",t.targetDecorator.style.fill="black",t.targetDecorator.width=10,t.targetDecorator.height=10,n.connectorPropertyChange(t,e,{style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"None"}});var s=new Xs,r=(new Xs,void 0);s=t.getSegmentElement(t,s);for(var o=t.intermediatePoints,a=0;a<o.length-1;a++)length+=t.distance(o[parseInt(a.toString(),10)],o[a+1]),r=t.findPath(o[parseInt(a.toString(),10)],o[a+1]);var l=new Xs;l.data=r[0],l.id=t.id+"_"+i.shape.sequence||t.shape.sequence,l.offsetX=r[1].x,l.offsetY=r[1].y,l.rotateAngle=45,l.transform=ys.Self,this.removeDomElement(t,n,l)}return"Conditional"!==i.shape.sequence&&"Conditional"!==t.shape.sequence||(t.sourceDecorator.shape="Diamond",t.sourceDecorator.width=20,t.sourceDecorator.height=10,t.sourceDecorator.style.fill="white",t.targetDecorator.style.fill="black",t.style.strokeDashArray="None",t.targetDecorator.shape="Arrow",n.connectorPropertyChange(t,e,{style:{strokeDashArray:"None"},targetDecorator:{shape:"Arrow",style:{fill:"black"},height:10,width:10},sourceDecorator:{shape:"Diamond",width:20,height:10,style:{fill:"white"}}}),t.wrapper.children[3].visible=!1),t},t.prototype.getAssociation=function(t,e,i,n){return"Default"!==i.shape.association&&"Default"!==t.shape.association||(t.sourceDecorator.shape="None",t.targetDecorator.shape="None",t.style.strokeDashArray="2 2",n.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"None"},sourceDecorator:{shape:"None"}}),t.wrapper.children[3].visible=!1),"Directional"!==i.shape.association&&"Directional"!==t.shape.association||(t.sourceDecorator.shape="None",t.style.strokeDashArray="2 2",t.targetDecorator.shape="OpenArrow",t.targetDecorator.width=10,t.targetDecorator.height=10,n.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"OpenArrow",width:10,height:10},sourceDecorator:{shape:"None"}}),t.wrapper.children[3].visible=!1),"BiDirectional"!==i.shape.association&&"BiDirectional"!==t.shape.association||(t.sourceDecorator.shape="OpenArrow",t.targetDecorator.shape="OpenArrow",t.sourceDecorator.width=10,t.sourceDecorator.height=10,t.sourceDecorator.style.fill="black",n.connectorPropertyChange(t,e,{style:{strokeDashArray:"2 2"},targetDecorator:{shape:"OpenArrow",width:10,height:10},sourceDecorator:{shape:"OpenArrow",width:10,height:10,style:{fill:"black"}}}),t.wrapper.children[3].visible=!1),t},t.prototype.getMessage=function(t,e,i,n){var s,r;t.sourceDecorator.shape="Circle",t.sourceDecorator.width=10,t.targetDecorator.shape="Arrow",t.sourceDecorator.height=10,t.sourceDecorator.style.fill="White",t.targetDecorator.style.fill="White",n.connectorPropertyChange(t,e,{sourceDecorator:{shape:"Circle",style:{fill:"White"},width:10,height:10},targetDecorator:{shape:"Arrow",style:{fill:"white"}}});for(var o=t.intermediatePoints,a=0,l=0;l<o.length-1;l++){var h=.5*(a+=t.distance(o[l],o[l+1]));a>=h&&(s=Ad(o[parseInt(l.toString(),10)],o[l+1]),r=fn.transform(o[parseInt(l.toString(),10)],s,h))}var c=new Xs;return t.wrapper.children[0].style.strokeDashArray=" 4 4",t.style.strokeDashArray="4 4",c.id=t.id+"_"+i.shape.message||t.shape.message,c.width=25,c.height=15,c.data="M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",c.horizontalAlignment="Center",c.verticalAlignment="Center",c.transform=ys.Self,c.style.fill="NonInitiatingMessage"===i.shape.message?"lightgrey":"white",c.offsetX=r.x,c.offsetY=r.y,"Default"!==i.shape.message&&void 0!==i.shape.message||"Default"!==t.shape.message?c.style.fill="NonInitiatingMessage"===(i.shape.message||t.shape.message)?"lightgrey":"white":c.visible=!1,this.removeDomElement(t,n,c),t},t.prototype.removeDomElement=function(t,e,i){for(var n=0,s=e.views;n<s.length;n++){var r=s[n];av(t.id+"_groupElement",r),av(t.id+"_content_groupElement",r),av(t.id+"_html_element",r)}t.wrapper.children.splice(3,1),t.wrapper.children.splice(3,0,i)},t.prototype.setSizeForBPMNEvents=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n;var s=e.children[1];s.width=.85*i,s.height=.85*n;var r=e.children[2];"Message"===t.trigger?(r.width=.54*i,r.height=.4*n):(r.width=.5*i,r.height=.5*n)},t.prototype.updateAnnotationDrag=function(t,e,i,n){return!!t.processId&&(this.drag(t,i,n,e),!0)},t.prototype.getAnnotationPathAngle=function(t,e){var i=0;switch(Zd(t,e,e)){case"Right":i=0;break;case"Left":i=180;break;case"Bottom":i=90;break;case"Top":i=270}return i},t.prototype.setSizeForBPMNGateway=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n,e.children[1].width=.45*i,e.children[1].height=.45*n},t.prototype.setSizeForBPMNDataObjects=function(t,e,i,n){e.children[0].width=i,e.children[0].height=n},t.prototype.setSizeForBPMNActivity=function(t,e,i,n,s){e.children[0].width=i,e.children[0].height=n,e.children[0].children[0].width=i,e.children[0].children[0].height=n,"Transaction"===t.subProcess.type&&(e.children[0].children[1].width=Math.max(i-6,1),e.children[0].children[1].height=Math.max(n-6,1),e.children[0].children[2].width=i,e.children[0].children[2].height=n);var r,o,a=new Ws,l=this.getSize(s,a),h=12*(o="Task"===t.activity?this.getTaskChildCount(s):this.getSubprocessChildCount(s)),c=(i||l.width)/2;r=1===o?c-6:c-h/2-4*(o-1)/2;for(var d=0;d<e.children[0].children.length;d++)e.children[0].children[parseInt(d.toString(),10)].visible&&(e.children[0].children[parseInt(d.toString(),10)].id.indexOf("_loop")>-1||e.children[0].children[parseInt(d.toString(),10)].id.indexOf("_0_compensation")>-1||e.children[0].children[parseInt(d.toString(),10)].id.indexOf("_0_adhoc")>-1||e.children[0].children[parseInt(d.toString(),10)].id.indexOf("_0_collapsed")>-1)&&(e.children[0].children[parseInt(d.toString(),10)].margin.left=r,r+=e.children[0].children[parseInt(d.toString(),10)].actualSize.width+4)},t.prototype.updateDiagramContainerVisibility=function(t,e){if(t instanceof _s)for(var i=0;i<t.children.length;i++)this.updateDiagramContainerVisibility(t.children[parseInt(i.toString(),10)],e);t.visible&&t.visible!==e&&(t.visible=e)},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Bpmn"},t}();function GO(t){return tk[t.toString()]}function KO(t){return ik[t.toString()]}function JO(t){return nk[t.toString()]}function $O(t){return sk[t.toString()]}var tk={Event:"M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z",Message:"M0,0L19.8,12.8L40,0L0,0L0,25.5L40,25.5L40,0z",DataSource:"M 0 10.6 c 0 5.9 16.8 10.6 37.5 10.6 S 75 16.4 75 10.6 v 0 v 68.9 v -0.1 C 75 85.3 58.2 90 37.5 90 S 0 85.3 0 79.4 l 0 0.1 V 56 V 40.6 L 0 10.6 C 0 4.7 16.8 0 37.5 0 S 75 4.7 75 10.6 S 58.2 21.2 37.5 21.2S 0 16.5 0 10.6 l 0 6.7 v -0.2 c 0 5.9 16.8 10.6 37.5 10.6 S 75 22.9 75 17.1 v 6.8 v -0.1 c 0 5.9 -16.8 10.6 -37.5 10.6 S 0 29.6 0 23.8",SubProcess:"M100,100 h200 a20,20 0 0 1 20,20 v200 a20,20 0 0 1 -20,20 h-200 a20,20 0 0 1 -20,-20 v-200 a20,20 0 0 1 20,-20 z",collapsedShape:"M 8.13789 15 H 0 V 0 H 8.13789 V 15 Z M 0.625991 13.75 H 7.51189 V 1.25 H 0.625991 V 13.75 Z M 2.18095 7.03125 L 5.95631 7.03125 L 5.95631 7.46875 L 2.18095 7.46875 Z M 3.8342 3.73 L 4.30369 3.73 L 4.30369 11.2687 L 3.8342 11.2687 Z"},ek={Message:"M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0",Timer:"M40,20c0,8.654-5.496,16.024-13.189,18.81C24.685,39.58,22.392,40,20,40C8.954,40,0,31.046,0,20S8.954,0,20,0S40,8.954,40,20z M20,0 L20,2.583 L20,5.283 M10.027,2.681L11.659,5.507 L12.669,7.257 M2.731,9.989 L6.014,11.885 L7.307,12.631 M0.067,19.967 L2.667,19.967 L5.35,19.967M2.748,29.939 L5.731,28.217 L7.323,27.298 M10.056,37.236 L11.292,35.095 L12.698,32.66 M20.033,39.9 L20.033,36.417 L20.033,34.617M30.006,37.219 L28.893,35.292 L27.364,32.643 M37.302,29.911 L34.608,28.355 L32.727,27.269M39.967,19.933 L37.417,19.933 L34.683,19.933 M37.286,9.961 L34.583,11.521 L32.71,12.602 M29.977,2.664 L28.653,4.957 L27.336,7.24 M22.104,8.5 L19.688,20 L24.75,20 L31.604,20 L24.75,20 L19.688,20z",Error:"M 23.77 18.527 l -7.107 27.396 l 8.507 -17.247 L 36.94 40.073 l 6.394 -25.997 l -8.497 15.754 L 23.77 18.527 Z",Escalation:"M 30.001 8.098 L 11.842 43.543 l 18.159 -18.882 l 18.162 18.882 L 30.001 8.098 Z ",Cancel:"M 3.5 16 L 0 12.6 L 4.6 8 L 0 3.5 L 3.4 0 L 8 4.6 l 4.5 -4.5 L 16 3.5 L 11.5 8 l 4.5 4.5 l -3.4 3.5 L 8 11.4 L 3.5 16 Z",Compensation:"M 25.7086 0 L 0 25 L 25.7086 50 V 26.3752 L 50 50 V 0 L 25.7086 23.6248 V 0 Z ",Conditional:"M 0 0 H 16 V 16 H 0 z M 1.14 3.2 H 14.85 M 1.14 6.4 H 14.85 M 1.14 9.6 H 14.85 M 1.14 12.8 H 14.85",Link:"M 32.014 19.258 v 5.992 H 9.373 v 9.504 h 22.641 v 5.988 L 50.622 30 L 32.014 19.258 Z",Signal:"M 50 50 H 0 L 25.0025 0 L 50 50 Z",Terminate:"M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50",Multiple:"M 17.784 48.889 H 42.21 l 7.548 -23.23 L 29.997 11.303 L 10.236 25.658 L 17.784 48.889 Z",Parallel:"M 27.276 49.986 h 5.58 v -17.15 h 17.146 V 27.17 h -17.15 l 0.004 -17.15 h -5.58 l -0.004 17.15 H 9.994 v 5.666 h 17.278 L 27.276 49.986 Z"},ik={None:"",Exclusive:"M 11.196 29.009 l 6.36 -9.712 l -5.764 -8.899 h 4.393 l 3.732 5.979 l 3.656 -5.979 h 4.354 l -5.789 9.039l 6.36 9.572 h -4.532 l -4.126 -6.437 l -4.139 6.437 H 11.196 Z",Inclusive:"M 20.323 31.333 c -6.625 0 -12.015 -5.39 -12.015 -12.015 s 5.39 -12.015 12.015 -12.015 s 12.016 5.39 12.016 12.015 S 26.948 31.333 20.323 31.333 Z M 20.323 9.303 c -5.522 0 -10.015 4.493 -10.015 10.015 s 4.492 10.015 10.015 10.015 s 10.016 -4.493 10.016 -10.015 S 25.846 9.303 20.323 9.303 Z",Parallel:"M 18.394 29.542 v -8.833 H 9.626 v -3.691 h 8.768 V 8.251 h 3.734 v 8.767 h 8.768 v 3.691 h -8.768 v 8.833 H 18.394 Z",Complex:"M29.198,19.063L23.089,19.063L27.794,14.358L26.38,12.944L21.223,18.101L21.223,10.443L19.223,10.443L19.223,17.976L14.022,12.776L12.608,14.19L17.48,19.063L10.365,19.063L10.365,21.063L18.261,21.063L12.392,26.932L13.806,28.346L19.223,22.929L19.223,30.225L21.223,30.225L21.223,22.805L25.925,27.507L27.339,26.093L22.309,21.063L29.198,21.063z",EventBased:"M 20.322 29.874 c -5.444 0 -9.873 -4.43 -9.873 -9.874 s 4.429 -9.874 9.873 -9.874 s 9.874 4.429 9.874 9.874 S 25.767 29.874 20.322 29.874 Z M 20.322 32.891 c -7.107 0 -12.89 -5.783 -12.89 -12.891 c 0 -7.107 5.782 -12.89 12.89 -12.89 c 7.108 0 12.891 5.783 12.891 12.89 C 33.213 27.108 27.431 32.891 20.322 32.891 Z M 24.191 25.386 h -7.984 l -2.469 -7.595 l 6.461 -4.693 l 6.461 4.693 L 24.191 25.386 Z",ExclusiveEventBased:"M 30 15 C 30 23.28 23.28 30 15 30 S 0 23.28 0 15 S 6.72 0 15 0 S 30 6.72 30 15 z M 15 5 L 5 12.5 L 8 22.5 H 22 L 25 12.5 z",ParallelEventBased:"M 35 17.5 C 35 27.16 27.16 35 17.5 35 S 0 27.16 0 17.5 S 7.84 0 17.5 0 S 35 7.84 35 17.5 z M 14.58 5.83 V 14.58 H 5.83 V 20.42 H 14.58 V 29.17 H 20.42 V 20.42 H 29.17 V 14.58 H 20.42 V 5.83 z"},nk={None:"",Service:"M 32.699 20.187 v -4.005 h -3.32 c -0.125 -0.43 -0.292 -0.83 -0.488 -1.21 l 2.373 -2.375 l -2.833 -2.83 l -2.333 2.333 c -0.44 -0.253 -0.9 -0.448 -1.387 -0.595 v -3.32 h -4.003 v 3.32 c -0.46 0.137 -0.890.322 -1.3 0.537 l -2.285 -2.275 l -2.833 2.83 l 2.285 2.278 c -0.235 0.42 -0.41 0.847 -0.547 1.307 h -3.33 v 4.005 h 3.33 c 0.148 0.488 0.343 0.955 0.588 1.395 l -2.325 2.325 l 2.822 2.832 l 2.373 -2.382 c 0.392 0.205 0.792 0.37 1.212 0.497 v 3.33 h 4.003 v -3.33 c 0.46 -0.138 0.89 -0.323 1.3 -0.547 l 2.43 2.432 l 2.822 -2.832 l -2.42 -2.422 c 0.222 -0.41 0.4 -0.85 0.535-1.297 H 32.699 Z M 22.699 21.987 c -2.1 0 -3.803 -1.703 -3.803 -3.803 c 0 -2.1 1.703 -3.803 3.803 -3.803 c 2.1 0 3.803 1.703 3.803 3.803 C 26.502 20.285 24.8 21.987 22.699 21.987 Z",Receive:"M 12.217 12.134 v 13.334 h 20 V 12.134 H 12.217 Z M 30.44 13.007 l -8.223 5.35 l -8.223 -5.35 H 30.44 Z M 13.09 24.594 V 13.459 l 9.127 5.94 l 9.127 -5.94 v 11.135 H 13.09 Z",Send:"M0,1.2260086 L8.0000002,8.3380068 16,1.2260086 16,12.000007 0,12.000007 z M1.6300015,0 L14.371001,0 8.0000055,5.662 z",InstantiatingReceive:"M 16.306 17.39 v 8.79 h 13.198 v -8.79 H 16.306 Z M 28.375 17.946 l -5.47 3.558 l -5.47 -3.558 H 28.375 Z M 28.948 25.625 H 16.861 v -7.389 l 6.043 3.931 l 6.043 -3.931 V 25.625 Z M 22.905 11.785c -5.514 0 -9.999 4.486 -9.999 10 c 0 5.514 4.485 10 9.999 10 s 9.999 -4.486 9.999 -10 C 32.904 16.272 28.419 11.785 22.905 11.785 Z M 22.905 31.239 c -5.212 0 -9.453 -4.241 -9.453 -9.454c 0 -5.212 4.241 -9.453 9.453 -9.453 s 9.452 4.241 9.452 9.453 C 32.357 26.998 28.117 31.239 22.905 31.239 Z",Manual:"M9.21 612 L5.82 612 L1.07 612 a1.07317 1 -180 0 1 -1.07317 -1 L0 604.75 A3.42007 1.59344 -180 0 0 1.61 604 L2.6 604 L5.99 604 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L2.6 605.34 a0.48818 0.183302 -90 0 0 0.0837073 0.342385 L5.63 605.69 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L10.28 605.66 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 607.01 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 607.35 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L10.01 607.33 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 608.67 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 609.01 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L9.47 608.99 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672 L5.82 610.34 a0.721171 0.672 0 0 1 -0.184585 -0.0223847 L5.63 610.68 a0.721171 0.672 0 0 1 0.184585 -0.0223847 L9.21 610.66 a0.721171 0.672 0 0 1 0.721171 0.672 a0.721171 0.672 0 0 1 -0.721171 0.672",BusinessRule:"M 32.844 13.245 h -0.089 v 0 H 13.764 v -0.015 h -1.009 v 16.989 h 0.095 v 0.011 h 19.716 v -0.011 h 0.278 V 13.245 Z M 31.844 14.229 v 4.185 h -18.08 v -4.185 H 31.844 Z M 18.168 25.306 v 3.938 h -4.404 v -3.938 H 18.168 Z M 13.764 24.322 v -4.923 h 4.404 v 4.923 H 13.764 Z M 19.177 25.306 h 12.667 v 3.938 H 19.177 V 25.306 Z M 19.177 24.322v -4.923 h 12.667 v 4.923 H 19.177 Z",User:"M8.6751149,13.75 L10.79009,18.703003 11.664047,18.696991 13.792084,13.75 13.824066,13.75 C18.177001,13.75 21.709022,17.259003 21.748998,21.60199 21.748998,21.649994 21.743993,21.700012 21.735021,21.747009 21.137981,24.774994 18.775997,27.144989 15.74904,27.75 L6.7491024,27.75 C3.7231224,27.144989 1.3601628,24.774994 0.76312089,21.747009 0.75414884,21.700012 0.74914402,21.649994 0.75012076,21.60199 0.78912175,17.259003 4.3221171,13.75 8.6751149,13.75 z M11.249014,0.75 C14.287014,0.75 16.749015,3.2119999 16.749015,6.25 16.749015,9.2880001 14.287014,11.75 11.249014,11.75 8.211015,11.75 5.7490147,9.2880001 5.7490147,6.25 5.7490147,3.2119999 8.211015,0.75 11.249014,0.75 z",Script:"M22.3,80.4 A82.9529,77.0159,-180,0,0,10.3,46.7 A69.8467,64.8477,0,0,1,0,19.7 A27.6207,25.6439,0,0,1,12.1,0 L84.7,0 A37.4124,34.7347,-180,0,0,77.7,19.6 A82.8871,76.9547,-180,0,0,89.7,53.3 A69.8146,64.81790000000001,0,0,1,100,80.3 A27.603399999999997,25.6278,0,0,1,87.9,100 L15.3,100 A37.4265,34.7479,-180,0,0,22.3,80.4 M12.5,28.6 L67.3,28.6 M18.3,42.9 L72.1,42.9 M80.8,57.1 L26,57.1 M85.6,71.4 L32.6,71.4"},sk={None:"",Standard:"M 52.002 73.379 c -2.494 -2.536 -6.55 -2.534 -9.043 0 c -1.208 1.228 -1.874 2.861 -1.874 4.598 c 0 1.225 0.337 2.395 0.957 3.411 l -1.167 1.186 l 2.071 0.458 l 2.071 0.458 l -0.45 -2.106 l -0.45 -2.106 l -1.292 1.314c -1.119 -2.065 -0.842 -4.709 0.877 -6.458 c 2.084 -2.119 5.475 -2.117 7.557 0 c 2.083 2.119 2.083 5.565 0 7.685c -0.976 0.992 -2.272 1.557 -3.65 1.59 l 0.025 1.068 c 1.65 -0.041 3.2 -0.716 4.368 -1.903 c 1.208 -1.228 1.874 -2.861 1.874 -4.597 C 53.875 76.24 53.209 74.607 52.002 73.379 Z",ParallelMultiInstance:"M 51.5,69.5 L52.5,69.5 L52.5,84.5 L51.5 84.5 Z M 46.5,69.5 L47.5,69.5 L47.5,84.5 L46.5 84.5 Z M 41.5,69.5 L42.5,69.5 L42.5,84.5 L41.5 84.5 Z  ",SequenceMultiInstance:"M 40.375,71.5 L 55.375,71.5 L 55.375,72.5 L 40.375,72.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,76.5 L 55.375,76.5 L 55.375,77.5 L 40.375,77.5 Z M 40.375,81.5 L 55.375,81.5L 55.375,82.5 L 40.375,82.5 Z"},rk=function(){function t(){}return t.prototype.updateBridging=function(t,e){var i,n=[];if(t.bridges=[],function(t,e){return t.constraints&cs.Bridging?t.constraints&cs.Bridging:t.constraints&cs.InheritBridging?e.constraints&ms.Bridging:0}(t,e)){var s=this.getPoints(t);i=Tn.toBounds(s);for(var r=t.bridgeSpace,o=e.bridgeDirection||"Top",a=-1,l=e.connectors,h=0;h<l.length;h++){var c=l[parseInt(h.toString(),10)];if(t&&c&&t.id!==c.id&&c.visible){var d=this.getPoints(c),p=Tn.toBounds(d);if(this.intersectsRect(i,p)){var u=this.intersect(s,d,!1,o,!0);if(u.length>0)for(var g=0;g<u.length;g++){var m=0,f=0,y=0,v=0,b=this.getLengthAtFractionPoint(t,u[parseInt(g.toString(),10)]);if(-1!==b.pointIndex){f=b.lengthFractionIndex,m=b.fullLength,y=b.segmentIndex,v=b.pointIndex;var C=this.getPointAtLength(f-r/2,s),I=this.getPointAtLength(f+r/2,s);this.isEmptyPoint(I)&&(I=C);var M=void 0,S=t.sourcePoint;M="Straight"===t.type?t.targetPoint:t.intermediatePoints[parseInt(v.toString(),10)];var x=this.angleCalculation(S,M);if(n.length){var w,D=t.sourcePoint,E=Math.abs(this.lengthCalculation(D,I)),T=-1;a=-1;for(var A=0;A<n[parseInt(y.toString(),10)].bridges.length;A++){a++;var N=n[parseInt(y.toString(),10)].bridges[parseInt(A.toString(),10)];if(E<Math.abs(this.lengthCalculation(D,N.endPoint))){T=a;break}}if(T>=0)(w=this.createSegment(C,I,x,o,v,t,e)).target=c.id,n[parseInt(y.toString(),10)].bridges.splice(T,0,w),n[parseInt(y.toString(),10)].bridges.join(),n[parseInt(y.toString(),10)].bridgeStartPoint.splice(T,0,C),n[parseInt(y.toString(),10)].bridgeStartPoint.join(),n[parseInt(y.toString(),10)].segmentIndex=y;else(w=this.createSegment(C,I,x,o,v,t,e)).target=c.id,n[parseInt(y.toString(),10)].bridges.push(w),n[parseInt(y.toString(),10)].bridgeStartPoint.push(C),n[parseInt(y.toString(),10)].segmentIndex=y}else if(!isNaN(C.x)&&!isNaN(C.y)&&!this.isEmptyPoint(I)){var L=this.createSegment(C,I,x,o,v,t,e),O={bridges:[],bridgeStartPoint:[],segmentIndex:y};L.target=c.id;var k=[];k.push(C),[].push(I),n[parseInt(y.toString(),10)]=O,n[parseInt(y.toString(),10)].bridges.push(L),n[parseInt(y.toString(),10)].bridgeStartPoint=k,n[parseInt(y.toString(),10)].segmentIndex=y}}}}}}0!==n.length&&this.firstBridge(n,t,r)}},t.prototype.firstBridge=function(t,e,i){for(var n=0;n<t.length;n++){for(var s=t[parseInt(n.toString(),10)],r=1;r<s.bridges.length;r++)if(fn.findLength(s.bridges[parseInt(r.toString(),10)].endPoint,s.bridges[r-1].endPoint)<i){s.bridges[r-1].endPoint=s.bridges[parseInt(r.toString(),10)].endPoint;var o=s.bridges[r-1],a=this.createBridgeSegment(o.startPoint,o.endPoint,o.angle,i,o.sweep);s.bridges[r-1].path=a,s.bridges.splice(r,1),s.bridgeStartPoint.splice(r,1),r--}e.sourcePoint;for(var l=0;l<s.bridges.length;l++){(o=s.bridges[parseInt(l.toString(),10)]).endPoint,e.bridges.push(o)}}},t.prototype.createSegment=function(t,e,i,n,s,r,o){var a={angle:0,endPoint:{x:0,y:0},target:"",path:"",segmentPointIndex:-1,startPoint:{x:0,y:0},sweep:1,rendered:!1},l=this.sweepDirection(i,n,r,o),h=this.createBridgeSegment(t,e,i,r.bridgeSpace,l);return a.path=h,a.startPoint=t,a.endPoint=e,a.angle=i,a.segmentPointIndex=s,a.sweep=l,a},t.prototype.createBridgeSegment=function(t,e,i,n,s){return"A "+n/2+" "+n/2+" "+i+" , 1 "+s+" "+e.x+","+e.y},t.prototype.sweepDirection=function(t,e,i,n){var s,r=Math.abs(t);switch(e){case"Top":case"Bottom":s=1,r>=0&&r<=90&&(s=0);break;case"Left":case"Right":s=1,t<0&&t>=-180&&(s=0)}return"Right"!==e&&"Bottom"!==e||(s=0===s?1:0),s},t.prototype.getPointAtLength=function(t,e){for(var i,n=0,s={x:0,y:0},r=0;r<e.length;r++){var o=e[parseInt(r.toString(),10)];if(i){var a=this.lengthCalculation(i,o);if(n+a>t){var l=t-n,h=fn.findAngle(i,o),c=l*Math.cos(h*Math.PI/180),d=l*Math.sin(h*Math.PI/180);s={x:i.x+c,y:i.y+d};break}n+=a,i=o}else i=o}return s},t.prototype.getPoints=function(t){var e=[];if(t.intermediatePoints&&("Straight"===t.type||"Orthogonal"===t.type))for(var i=0;i<t.intermediatePoints.length;i++)e.push(t.intermediatePoints[parseInt(i.toString(),10)]);return e},t.prototype.intersectsRect=function(t,e){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height},t.prototype.intersect=function(t,e,i,n,s){i&&e.length>=2&&(e.splice(0,1),e.splice(0,1));for(var r=[],o=0;o<t.length-1;o++){var a=this.inter1(t[parseInt(o.toString(),10)],t[o+1],e,s,n);if(a.length>0)for(var l=0;l<a.length;l++)r.push(a[parseInt(l.toString(),10)]);i&&e.length>=1&&e.splice(0,1)}return r},t.prototype.inter1=function(t,e,i,n,s){for(var r=[],o=0;o<i.length-1;o++){var a=Mm(t,e,i[parseInt(o.toString(),10)],i[o+1]);if(!this.isEmptyPoint(a)){var l=this.angleCalculation(t,e),h=this.angleCalculation(i[parseInt(o.toString(),10)],i[o+1]);switch(l=this.checkForHorizontalLine(l),h=this.checkForHorizontalLine(h),s){case"Left":case"Right":l>h&&r.push(a);break;case"Top":case"Bottom":l<h&&r.push(a)}l===h&&n&&r.push(a)}}return r},t.prototype.checkForHorizontalLine=function(t){var e=Math.abs(t);return e>90?180-e:e},t.prototype.isEmptyPoint=function(t){return 0===t.x&&0===t.y},t.prototype.getLengthAtFractionPoint=function(t,e){for(var i=100,n=-1,s=0,r=-1,o=0,a=0,l=t.sourcePoint,h=l,c=[],d=0;d<t.intermediatePoints.length;d++){var p=t.intermediatePoints[parseInt(d.toString(),10)];c.push(p)}for(var u=0;u<c.length;u++){var g=c[parseInt(u.toString(),10)],m=this.getSlope(g,l,e,t);m<i&&(i=m,a=s+this.lengthCalculation(e,h),r=o,n=u),s+=fn.findLength(g,l),l=g,h=g}return o++,{lengthFractionIndex:a,fullLength:s,segmentIndex:r,pointIndex:n}},t.prototype.getSlope=function(t,e,i,n){var s=Math.abs(t.x-e.x),r=Math.abs(t.y-e.y),o=(i.y-t.y)/(e.y-t.y),a=(i.x-t.x)/(e.x-t.x);if(!isFinite(o)||!isFinite(a)||isNaN(o)||isNaN(a)){if(t.x===e.x){if(t.y===e.y)return 1e4;if(t.y>i.y&&i.y>e.y||t.y<i.y&&i.y<e.y)return Math.abs(t.x-i.x)}else if(t.y===e.y&&(t.x>i.x&&i.x>e.x||t.x<i.x&&i.x<e.x))return Math.abs(t.y-i.y)}else if((t.x>=i.x&&i.x>=e.x||t.x<=i.x&&i.x<=e.x||s<3)&&(t.y>=i.y&&i.y>=e.y||t.y<=i.y&&i.y<=e.y||r<3))return Math.abs(o-a);return 1e4},t.prototype.angleCalculation=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.atan2(n,i)*(180/Math.PI)},t.prototype.lengthCalculation=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Bridging"},t}(),ok=function(){function t(t){this.line=[],this.diagram=t}return t.prototype.canSnap=function(){return 0!==(this.diagram.snapSettings.constraints&(os.SnapToObject|os.SnapToLines))},t.prototype.getWrapperObject=function(t,e){if(t.nodes&&t.nodes.length>0&&(this.diagram.snapSettings.constraints&os.SnapToLines||this.diagram.snapSettings.constraints&os.SnapToObject))for(var i=0;i<t.nodes.length;i++)return("SwimLane"===t.nodes[parseInt(i.toString(),10)].shape.type||t.nodes[parseInt(i.toString(),10)].isLane||""!==t.nodes[parseInt(i.toString(),10)].parentId&&e[t.nodes[parseInt(i.toString(),10)].parentId]&&e[t.nodes[parseInt(i.toString(),10)].parentId].isLane)&&e.helper?e.helper.wrapper:t.wrapper;return t.wrapper},t.prototype.setSnapLineColor=function(){return this.diagram.snapSettings.snapLineColor},t.prototype.snapPoint=function(t,e,i,n,s,r,o){var a=this.diagram.snapSettings,l=this.diagram.scroller.currentZoom,h={x:0,y:0},c=Un(this.getWrapperObject(e,t.nameTable)),d={snapped:!1,offset:0},p={snapped:!1,offset:0};if(this.diagram.snapSettings.constraints&os.SnapToObject){var u=document.createElementNS("http://www.w3.org/2000/svg","g");u.setAttribute("id","_SnappingLines"),u.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(u),this.snapObject(t,e,u,d,p,s,r===o)}var g=c.x+s.x,m=c.y+s.y,f=c.x+c.width+s.x,y=c.y+c.height+s.y,v=a.verticalGridlines.scaledIntervals,b=this.round(f,v,l),C=this.round(g,v,l);v=a.horizontalGridlines.scaledIntervals;var I=this.round(m,v,l),M=this.round(y,v,l),S=c.x+c.width,x=c.y+c.height;return d.snapped?this.diagram.snapSettings.constraints&os.SnapToObject?h.x=d.offset:h.x=o.x-r.x:this.diagram.snapSettings.constraints&os.SnapToVerticalLines?Math.abs(s.x)>=1&&(i?Math.abs(b-S)>Math.abs(C-c.x)?h.x+=C-c.x:h.x+=b-S:Math.abs(b-S)<Math.abs(C-c.x)?h.x+=b-S:h.x+=C-c.x):h.x=o.x-r.x,p.snapped?h.y=p.offset:this.diagram.snapSettings.constraints&os.SnapToHorizontalLines?Math.abs(s.y)>=1&&(n?Math.abs(M-x)>Math.abs(I-c.y)?h.y+=I-c.y:h.y+=M-x:Math.abs(M-x)<Math.abs(I-c.y)?h.y+=M-x:h.y+=I-c.y):h.y=o.y-r.y,h},t.prototype.round=function(t,e,i){1===i&&(i=Math.pow(2,Math.floor(Math.log(i)/Math.log(2))));var n=0,s=0;for(s=0;s<e.length;s++)n+=e[parseInt(s.toString(),10)];var r=t%(n/=i),o=Math.floor(Math.abs(t)/n)*n;if(o!==t)if(t>=0)for(s=0;s<e.length;s++){if(r<=e[parseInt(s.toString(),10)]/i)return o+(r<e[parseInt(s.toString(),10)]/(2*i)?0:e[parseInt(s.toString(),10)]/i);o+=e[parseInt(s.toString(),10)]/i,r-=e[parseInt(s.toString(),10)]/i}else for(o*=-1,s=e.length-1;s>=0;s--){if(Math.abs(r)<=e[parseInt(s.toString(),10)]/i)return o-(Math.abs(r)<e[parseInt(s.toString(),10)]/(2*i)?0:e[parseInt(s.toString(),10)]/i);o-=e[parseInt(s.toString(),10)]/i,r+=e[parseInt(s.toString(),10)]/i}return t},t.prototype.snapObject=function(t,e,i,n,s,r,o){var a,l,h,c=null,d=this.diagram.scroller,p=this.diagram.snapSettings,u=[],g=[],m=[],f=[],y=Un(this.getWrapperObject(e,t.nameTable)),v=t.scroller.currentZoom,b=-d.horizontalOffset,C=-d.verticalOffset,I=p.snapObjectDistance/v,M=new Tn(0,0,d.viewPortWidth,d.viewPortHeight),S=new Tn(b/v,y.y-I-5,M.width/v,y.height+2*I+10),x=new Tn(y.x-I-5,C/v,y.width+2*I+10,M.height/v);M=new Tn(b/v,C/v,M.width/v,M.height/v);var w,D,E,T=this.findNodes(t.spatialSearch,e,x,M),A=t.nameTable;for(w=0;w<T.length;w++)D=T[parseInt(w.toString(),10)],this.canBeTarget(t,D)&&(this.diagram.nameTable[D.id]instanceof Rg||!this.canConsider(A,e,D)||((E=D.bounds).height+E.y<r.y+y.y?m.push({obj:D,distance:Math.abs(y.y+r.y-E.y-E.height)}):E.y>y.y+r.y+y.height&&f.push({obj:D,distance:Math.abs(y.y+r.y+y.height-E.y)}),(null==c||c>Math.abs(E.y-y.y-r.y))&&(Math.abs(E.x+E.width/2-(y.x+y.width/2+r.x))<=I?(l=this.createSnapObject(E,y,"centerX"),c=Math.abs(E.y-y.y)):Math.abs(E.x+E.width-(y.x+y.width+r.x))<=I?(l=this.createSnapObject(E,y,"right"),c=Math.abs(E.y-y.y)):Math.abs(E.x-(y.x+r.x))<=I?(l=this.createSnapObject(E,y,"left"),c=Math.abs(E.y-y.y)):Math.abs(E.x-(y.x+y.width+r.x))<=I?(l=this.createSnapObject(E,y,"rightLeft"),c=Math.abs(E.y-y.y)):Math.abs(E.x+E.width-(y.x+r.x))<=I&&(l=this.createSnapObject(E,y,"leftRight"),c=Math.abs(E.y-y.y)))));T=this.findNodes(t.spatialSearch,e,S,M);for(var N=0;N<T.length;N++)D=T[parseInt(N.toString(),10)],this.canBeTarget(t,D)&&(this.diagram.nameTable[D.id]instanceof Rg||!this.canConsider(A,e,D)||((E=D.bounds).x+E.width<y.x+r.x&&(u[u.length]={obj:D,distance:Math.abs(y.x+r.x-E.x-E.width)}),E.x>y.x+r.x+y.width&&(g[g.length]={obj:D,distance:Math.abs(y.x+r.x+y.width-E.x)}),(null==a||a>Math.abs(E.x-y.x-r.x))&&(Math.abs(E.y+E.height/2-(y.y+y.height/2+r.y))<=I?(h=this.createSnapObject(E,y,"centerY"),a=Math.abs(E.x-y.x)):Math.abs(E.y-y.y-r.y)<=I?(h=this.createSnapObject(E,y,"top"),a=Math.abs(E.x-y.x)):Math.abs(E.y+E.height-(y.y+y.height+r.y))<=I?(h=this.createSnapObject(E,y,"bottom"),a=Math.abs(E.x-y.x)):Math.abs(E.y+E.height-y.y-r.y)<=I?(h=this.createSnapObject(E,y,"topBottom"),a=Math.abs(E.x-y.x)):Math.abs(E.y-(y.y+y.height+r.y))<=I&&(h=this.createSnapObject(E,y,"bottomTop"),a=Math.abs(E.x-y.x)))));this.createGuidelines(t,l,h,i,n,s,o),n.snapped||this.createHSpacingLines(t,i,e,u,g,n,s,o,r,I),s.snapped||this.createVSpacingLines(t,i,e,m,f,n,s,o,r,I)},t.prototype.snapConnectorEnd=function(t){var e=this.diagram.snapSettings,i=this.diagram.scroller.currentZoom;return e.constraints&os.SnapToLines&&(t.x=this.round(t.x,e.verticalGridlines.scaledIntervals,i),t.y=this.round(t.y,e.horizontalGridlines.scaledIntervals,i)),t},t.prototype.canBeTarget=function(t,e){return e=this.diagram.nameTable[e.id],!Zu(this.diagram,e,!1)},t.prototype.snapSize=function(t,e,i,n,s,r,o,a){var l,h,c,d,p=this.diagram.snapSettings,u=this.diagram.scroller,g=Un(o.wrapper),m=t.nameTable,f=[],y=[],v=t.scroller.currentZoom,b=-u.horizontalOffset,C=-u.verticalOffset,I=p.snapObjectDistance/v,M=new Tn(0,0,u.viewPortWidth,u.viewPortHeight),S=new Tn(b/v,(g.y-5)/v,M.width/v,(g.height+10)/v),x=new Tn((g.x-5)/v,C/v,(g.width+10)/v,M.height/v);M=new Tn(b/v,C/v,M.width/v,M.height/v);var w,D,E,T=[],A=this.findNodes(t.spatialSearch,o,x,M,T);for(w=0;w<A.length;w++)D=A[parseInt(w.toString(),10)],!this.canConsider(m,o,D)||this.diagram.nameTable[D.id]instanceof Rg||(E=D.bounds,(null==l||l>Math.abs(E.y-g.y))&&(e.left?Math.abs(g.x+s-E.x)<=I?(c=this.createSnapObject(E,g,"left"),l=Math.abs(E.y-g.y)):Math.abs(g.x+s-E.x-E.width)<=I&&(c=this.createSnapObject(E,g,"leftRight"),l=Math.abs(E.y-g.y)):e.right&&(Math.abs(g.x+s+g.width-E.x-E.width)<=I?(c=this.createSnapObject(E,g,"right"),l=Math.abs(E.y-g.y)):Math.abs(g.x+s+g.width-E.x)<=I&&(c=this.createSnapObject(E,g,"rightLeft"),l=Math.abs(E.y-g.y)))));A=this.findNodes(t.spatialSearch,o,S,M);for(var N=0;N<A.length;N++){var L=A[parseInt(N.toString(),10)];if(this.canConsider(m,o,L)&&!(this.diagram.nameTable[L.id]instanceof Rg)){var O=L.bounds;(null==h||h>Math.abs(O.x-g.x))&&(i.top?Math.abs(g.y+r-O.y)<=I?(d=this.createSnapObject(O,g,"top"),h=Math.abs(O.x-g.x)):Math.abs(g.y+r-O.y-O.height)<=I&&(d=this.createSnapObject(O,g,"topBottom"),h=Math.abs(O.x-g.x)):i.bottom&&(Math.abs(g.y+g.height+r-O.y-O.height)<=I?(d=this.createSnapObject(O,g,"bottom"),h=Math.abs(O.x-g.x)):Math.abs(g.y+g.height+r-O.y)<=I&&(d=this.createSnapObject(O,g,"bottomTop"),h=Math.abs(O.x-g.x))))}}for(w=0;w<T.length;w++)if(D=T[parseInt(w.toString(),10)],this.canConsider(m,o,D)){var k=D.bounds,z=e.left?-s:s,P=Math.abs(g.width+z-k.width),j=void 0;P<=I&&(j=e.left?-k.width+g.width:k.width-g.width,f[f.length]={source:D,difference:P,offset:j}),z=i.top?-r:r;var B=Math.abs(g.height+z-k.height);B<=I&&(j=i.top?-k.height+g.height:k.height-g.height,y[y.length]={source:D,difference:B,offset:j})}if(!t.getTool)this.createGuidelines(t,c,d,n,e,i,a);!e.snapped&&f.length>0&&(e.left||e.right)&&this.addSameWidthLines(t,n,f,e,a,o),!i.snapped&&y.length>0&&(i.top||i.bottom)&&this.addSameHeightLines(t,n,y,i,a,o)},t.prototype.snapTop=function(t,e,i,n,s,r,o,a){var l,h=s;e.top=!0,t.left=t.right=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&os.SnapToObject&&!r.rotateAngle&&(l=a.y-a.height*r.pivot.y+s-(r.offsetY-r.height*r.pivot.y),this.snapSize(this.diagram,t,e,i,n,l,this.diagram.selectedItems,o)),e.snapped)h=s-l+e.offset;else if(this.diagram.snapSettings.constraints&os.SnapToHorizontalLines){var d=a.y-a.height*r.pivot.y,p=d+s;h=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-d}return h},t.prototype.snapRight=function(t,e,i,n,s,r,o,a){var l,h=n;t.right=!0,e.top=e.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&os.SnapToObject&&!r.rotateAngle&&(l=a.x+a.width*(1-r.pivot.x)+n-(r.offsetX+r.width*(1-r.pivot.x)),this.snapSize(this.diagram,t,e,i,l,s,this.diagram.selectedItems,o)),t.snapped)h=n-l+t.offset;else if(this.diagram.snapSettings.constraints&os.SnapToVerticalLines){var d=a.x+a.width*(1-r.pivot.x),p=d+n;h=this.round(p,this.diagram.snapSettings.verticalGridlines.scaledIntervals,c)-d}return h},t.prototype.snapLeft=function(t,e,i,n,s,r,o,a){var l=n,h=0;t.left=!0,e.top=e.bottom=!1;var c=this.diagram.scroller.currentZoom;if(this.diagram.snapSettings.constraints&os.SnapToObject&&!r.rotateAngle&&(h=a.x-a.width*r.pivot.x+n-(r.offsetX-r.width*r.pivot.x),this.snapSize(this.diagram,t,e,i,h,s,this.diagram.selectedItems,o)),t.snapped)l=n-h+t.offset;else if(this.diagram.snapSettings.constraints&os.SnapToVerticalLines){var d=a.x-a.width*r.pivot.x,p=d+n;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,c)-d}return l},t.prototype.snapBottom=function(t,e,i,n,s,r,o,a){var l=s;e.bottom=!0,t.left=t.right=!1;var h=this.diagram.scroller.currentZoom,c=0;this.diagram.snapSettings.constraints&os.SnapToObject&&!r.rotateAngle&&(c=a.y+a.height*(1-r.pivot.y)+s-(r.offsetY+r.height*(1-r.pivot.y)),this.snapSize(this.diagram,t,e,i,n,c,this.diagram.selectedItems,o));Un(r instanceof Zs||r instanceof sp?r:r.wrapper);if(e.snapped)l=s-c+e.offset;else if(this.diagram.snapSettings.constraints&os.SnapToHorizontalLines){var d=a.y+a.height*(1-r.pivot.y),p=d+s;l=this.round(p,this.diagram.snapSettings.horizontalGridlines.scaledIntervals,h)-d}return l},t.prototype.createGuidelines=function(t,e,i,n,s,r,o){return e&&(s.offset=e.offsetX,s.snapped=!0,o||(e.type,this.renderAlignmentLines(e.start,e.end,n,t.scroller.transform))),i&&(r.offset=i.offsetY,r.snapped=!0,o||(i.type,this.renderAlignmentLines(i.start,i.end,n,t.scroller.transform))),n},t.prototype.renderAlignmentLines=function(t,e,i,n){t={x:(t.x+n.tx)*n.scale,y:(t.y+n.ty)*n.scale},e={x:(e.x+n.tx)*n.scale,y:(e.y+n.ty)*n.scale};var s={stroke:this.setSnapLineColor(),strokeWidth:1,startPoint:{x:t.x,y:t.y},endPoint:{x:e.x,y:e.y},fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Hn()},r=0;for(this.line.push(s),r=0;r<this.line.length;r++)this.diagram.diagramRenderer.drawLine(i,this.line.pop())},t.prototype.createHSpacingLines=function(t,e,i,n,s,r,o,a,l,h){var c=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(s,"distance",!0);var d,p,u,g,m,f=[];if(d=t.selectedObject.helperObject?Un(t.selectedObject.helperObject.wrapper):Un(i.wrapper),n.length>0&&(f[f.length]=n[0],c=(p=n[0].obj.bounds).y,n.length>1?(g=n[1].obj.bounds,m=p.x-g.x-g.width,Math.abs(m-n[0].distance)<=h?c=this.findEquallySpacedNodesAtLeft(n,m,c,f):m=n[0].distance):m=n[0].distance),this.sortByDistance(f,"distance"),f[f.length]={obj:i,distance:0},c=d.y<c||!c?d.y:c,s.length>0){var y=void 0;if(c=(u=s[0].obj.bounds).y<c?u.y:c,s.length>1&&(y=(g=s[1].obj.bounds).x-u.x-u.width),n.length>0)if(Math.abs(s[0].distance-n[0].distance)<=h){var v=Math.abs(s[0].distance-n[0].distance)/2;s[0].distance<n[0].distance?m-=v:m+=v,f[f.length]=s[0]}else 1===n.length&&(p=void 0,f.splice(0,1),f[f.length]=s[0],m=y);else m=y,f[f.length]=s[0];s.length>1&&u.x+u.width<g.x&&(c=this.findEquallySpacedNodesAtRight(s,y,c,f,h))}if(f.length>2){this.addHSpacingLines(t,e,f,a,c);var b=0;a&&(b=l.x),p?r.offset=m-Math.abs(d.x+b-p.x-p.width)+b:u&&(r.offset=Math.abs(d.x+d.width+b-u.x)-m+b),r.snapped=!0}},t.prototype.createVSpacingLines=function(t,e,i,n,s,r,o,a,l,h){var c=0;this.sortByDistance(n,"distance",!0),this.sortByDistance(s,"distance",!0);var d,p,u,g,m,f=[],y=Un(this.getWrapperObject(i,t.nameTable));if(n.length>0&&(f[f.length]=n[0],c=(d=n[0].obj.bounds).x+d.width,n.length>1?(u=n[1].obj.bounds,g=d.y-u.y-u.height,Math.abs(g-n[0].distance)<=h?c=this.findEquallySpacedNodesAtTop(n,g,c,f):g=n[0].distance):g=n[0].distance),this.sortByDistance(f,"distance"),f[f.length]={obj:i,distance:0},c=y.x+y.width>c||!c?y.x+y.width:c,s.length>0){if(c=(p=s[0].obj.bounds).x+p.width>c?p.x+p.width:c,s.length>1&&(m=(u=s[1].obj.bounds).y-p.y-p.height),n.length>0)if(Math.abs(s[0].distance-n[0].distance)<=h){var v=Math.abs(s[0].distance-n[0].distance)/2;s[0].distance<n[0].distance?g-=v:g+=v,f[f.length]=s[0]}else 1===n.length&&(d=void 0,f.splice(0,1),f[f.length]=s[0],g=m);else g=m,f[f.length]=s[0];s.length>1&&u.y>p.y+p.height&&(c=this.findEquallySpacedNodesAtBottom(s,m,c,f,h))}if(f.length>2){this.addVSpacingLines(t,e,f,a,c);var b=0;a&&(b=l.y),d?o.offset=g-Math.abs(y.y+b-d.y-d.height)+b:p&&(o.offset=Math.abs(y.y+y.height+b-p.y)-g+b),o.snapped=!0}},t.prototype.addHSpacingLines=function(t,e,i,n,s){var r,o,a;if(!n)for(r=0;r<i.length-1;r++){var l=i[parseInt(r.toString(),10)].obj instanceof By?Un(i[parseInt(r.toString(),10)].obj.wrapper):i[parseInt(r.toString(),10)].obj.bounds,h=i[r+1].obj instanceof By?Un(i[r+1].obj.wrapper):i[r+1].obj.bounds;o={x:l.x+l.width,y:s-15},a={x:h.x,y:s-15},this.renderSpacingLines(o,a,e,this.getAdornerLayerSvg(),t.scroller.transform)}},t.prototype.addVSpacingLines=function(t,e,i,n,s){var r,o;if(!n)for(var a=0;a<i.length-1;a++){var l=i[parseInt(a.toString(),10)].obj instanceof By?Un(i[parseInt(a.toString(),10)].obj.wrapper):i[parseInt(a.toString(),10)].obj.bounds,h=i[a+1].obj instanceof By?Un(i[a+1].obj.wrapper):i[a+1].obj.bounds;r={x:s+15,y:l.y+l.height},o={x:s+15,y:h.y},this.renderSpacingLines(r,o,e,this.getAdornerLayerSvg(),t.scroller.transform)}},t.prototype.addSameWidthLines=function(t,e,i,n,s,r){this.sortByDistance(i,"offset");var o,a,l,h=Un(r.wrapper),c=i[0],d=c.source.bounds,p=[];for(p.push(i[0]),l=1;l<i.length;l++)i[parseInt(l.toString(),10)].source.bounds.width===d.width&&p.push(i[parseInt(l.toString(),10)]);if(!s)for(o={x:h.x+c.offset,y:h.y-15},a={x:h.x+h.width+c.offset,y:h.y-15},this.renderSpacingLines(o,a,e,this.getAdornerLayerSvg(),t.scroller.transform),l=0;l<p.length;l++)o={x:(h=p[parseInt(l.toString(),10)].source.bounds).x,y:h.y-15},a={x:h.x+h.width,y:h.y-15},this.renderSpacingLines(o,a,e,this.getAdornerLayerSvg(),t.scroller.transform);n.offset=c.offset,n.snapped=!0},t.prototype.addSameHeightLines=function(t,e,i,n,s,r){this.sortByDistance(i,"offset");var o,a,l,h=Un(r.wrapper),c=i[0],d=c.source.bounds,p=[];for(p.push(i[0]),l=0;l<i.length;l++)i[parseInt(l.toString(),10)].source.bounds.height===d.height&&p.push(i[parseInt(l.toString(),10)]);if(!s)for(o={x:h.x+h.width+15,y:h.y+c.offset},a={x:h.x+h.width+15,y:h.y+c.offset+h.height},this.renderSpacingLines(o,a,e,this.getAdornerLayerSvg(),t.scroller.transform),l=0;l<p.length;l++)o={x:(h=p[parseInt(l.toString(),10)].source.bounds).x+h.width+15,y:h.y},a={x:h.x+h.width+15,y:h.y+h.height},this.renderSpacingLines(o,a,e,this.getAdornerLayerSvg(),t.scroller.transform);n.offset=c.offset,n.snapped=!0},t.prototype.renderSpacingLines=function(t,e,i,n,s){var r,o,a=new Xs,l={};t={x:(t.x+s.tx)*s.scale,y:(t.y+s.ty)*s.scale},e={x:(e.x+s.tx)*s.scale,y:(e.y+s.ty)*s.scale},t.x===e.x?(r="M"+(t.x-5)+" "+(t.y+5)+"L"+t.x+" "+t.y+"L"+(t.x+5)+" "+(t.y+5)+"zM"+(e.x-5)+" "+(e.y-5)+" L"+e.x+" "+e.y+" L"+(e.x+5)+" "+(e.y-5)+"z",o={startPoint:{x:t.x-8,y:t.y-1},endPoint:{x:t.x+8,y:t.y-1},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Hn()},a.data=r,l.data=a.data,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=Hn(),this.diagram.diagramRenderer.drawPath(i,l),this.line.push(o),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),o={startPoint:{x:e.x-8,y:e.y+1},endPoint:{x:e.x+8,y:e.y+1},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:this.getAdornerLayerSvg().id+"spacing"},this.line.push(o),this.diagram.diagramRenderer.drawLine(i,this.line.pop())):(r="M"+(t.x+5)+" "+(t.y+5)+" L"+t.x+" "+t.y+" L"+(t.x+5)+" "+(t.y-5)+"zM"+(e.x-5)+" "+(e.y-5)+" L"+e.x+" "+e.y+" L"+(e.x-5)+" "+(e.y+5)+"z",a.data=r,l.data=r,l.angle=0,l.pivotX=0,l.pivotY=0,l.x=0,l.y=0,l.height=0,l.width=1,l.id=Hn(),this.diagram.diagramRenderer.drawPath(i,l),o={visible:!0,opacity:1,id:Hn(),startPoint:{x:t.x-1,y:t.y-8},endPoint:{x:t.x-1,y:t.y+8},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0},this.line.push(o),this.diagram.diagramRenderer.drawLine(i,this.line.pop()),o={width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Hn(),startPoint:{x:e.x+1,y:e.y-8},endPoint:{x:e.x+1,y:e.y+8},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0"},this.line.push(o),this.diagram.diagramRenderer.drawLine(i,this.line.pop())),o={startPoint:{x:t.x,y:t.y},endPoint:{x:e.x,y:e.y},stroke:this.setSnapLineColor(),strokeWidth:1,fill:this.setSnapLineColor(),dashArray:"0",width:1,x:0,y:0,height:0,angle:0,pivotX:0,pivotY:0,visible:!0,opacity:1,id:Hn()},this.line.push(o),this.diagram.diagramRenderer.drawLine(i,this.line.pop())},t.prototype.createSnapObject=function(t,e,i){var n;switch(i){case"left":n={start:{x:t.x,y:Math.min(t.y,e.y)},end:{x:t.x,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x-e.x,offsetY:0,type:"sideAlign"};break;case"right":n={type:"sideAlign",start:{x:t.x+t.width,y:Math.min(t.y,e.y)},offsetX:t.x+t.width-e.x-e.width,offsetY:0,end:{x:t.x+t.width,y:Math.max(t.y+t.height,e.y+e.height)}};break;case"top":n={offsetY:t.y-e.y,offsetX:0,type:"sideAlign",start:{x:Math.min(t.x,e.x),y:t.y},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y}};break;case"bottom":n={type:"sideAlign",offsetY:t.y+t.height-e.y-e.height,offsetX:0,end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height},start:{x:Math.min(t.x,e.x),y:t.y+t.height}};break;case"topBottom":n={start:{x:Math.min(t.x,e.x),y:t.y+t.height},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height},offsetY:t.y+t.height-e.y,offsetX:0,type:"sideAlign"};break;case"bottomTop":n={start:{x:Math.min(t.x,e.x),y:t.y},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y},offsetY:t.y-e.y-e.height,offsetX:0,type:"sideAlign"};break;case"leftRight":n={start:{x:t.x+t.width,y:Math.min(t.y,e.y)},end:{x:t.x+t.width,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x+t.width-e.x,offsetY:0,type:"sideAlign"};break;case"rightLeft":n={start:{x:t.x,y:Math.min(t.y,e.y)},end:{x:t.x,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x-e.x-e.width,offsetY:0,type:"sideAlign"};break;case"centerX":n={start:{x:t.x+t.width/2,y:Math.min(t.y,e.y)},end:{x:t.x+t.width/2,y:Math.max(t.y+t.height,e.y+e.height)},offsetX:t.x+t.width/2-(e.x+e.width/2),offsetY:0,type:"centerAlign"};break;case"centerY":n={start:{x:Math.min(t.x,e.x),y:t.y+t.height/2},end:{x:Math.max(t.x+t.width,e.x+e.width),y:t.y+t.height/2},offsetY:t.y+t.height/2-(e.y+e.height/2),offsetX:0,type:"centerAlign"}}return n},t.prototype.snapAngle=function(t,e){var i=this.diagram.snapSettings.snapAngle,n=e%(i||0);return n>=i/2?e+i-n:e-n},t.prototype.canConsider=function(t,e,i){return!this.diagram.selectedItems.nodes.length||this.diagram.selectedItems.nodes[0].id!==i.id},t.prototype.findNodes=function(t,e,i,n,s){for(var r,o,a=[],l=t.findQuads(s?n:i),h=0;h<l.length;h++){var c=l[parseInt(h.toString(),10)];if(c.objects.length>0)for(var d=0;d<c.objects.length;d++)r=c.objects[parseInt(d.toString(),10)],this.diagram.nameTable[r.id]instanceof Rg||!r.visible||"SwimLane"===this.diagram.nameTable[r.id].shape.type||this.diagram.nameTable[r.id].isLane||this.diagram.nameTable[r.id].isPhase||this.diagram.nameTable[r.id].isHeader||"helper"===r.id||(o=Un(r),-1===a.indexOf(r)&&this.intersectsRect(i,o)&&a.push(r),s&&s.indexOf(r)&&this.intersectsRect(n,o)&&s.push(r))}return a},t.prototype.intersectsRect=function(t,e){return e.x<t.x+t.width&&t.x<e.x+e.width&&e.y<t.y+t.height&&t.y<e.y+e.height},t.prototype.getAdornerLayerSvg=function(){return this.diagram.diagramRenderer.adornerSvgLayer},t.prototype.removeGuidelines=function(t){var e=this.getAdornerLayerSvg().getElementById("_SnappingLines"),i=this.getAdornerLayerSvg().getElementById("pivotLine");e&&e.parentNode.removeChild(e),i&&i.parentNode.removeChild(i)},t.prototype.sortByDistance=function(t,e,i){var n,s,r;if(i)for(n=0;n<t.length;n++)for(s=n+1;s<t.length;s++)t[parseInt(n.toString(),10)][""+e]>t[parseInt(s.toString(),10)][""+e]&&(r=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(s.toString(),10)],t[parseInt(s.toString(),10)]=r);else for(n=0;n<t.length;n++)for(s=n+1;s<t.length;s++)t[parseInt(n.toString(),10)][""+e]<t[parseInt(s.toString(),10)][""+e]&&(r=t[parseInt(n.toString(),10)],t[parseInt(n.toString(),10)]=t[parseInt(s.toString(),10)],t[parseInt(s.toString(),10)]=r)},t.prototype.findEquallySpacedNodesAtLeft=function(t,e,i,n){var s,r,o,a;for(a=1;a<t.length&&(s=t[a-1].obj.bounds,r=t[parseInt(a.toString(),10)].obj.bounds,o=s.x-r.x-r.width,Math.abs(o-e)<=1);a++)n[n.length]=t[parseInt(a.toString(),10)],r.y<i&&(i=r.y);return i},t.prototype.findEquallySpacedNodesAtRight=function(t,e,i,n,s){var r,o,a,l,h=t[0].distance;if(Math.abs(e-h)<=s)for(var c=0;c<t.length-1&&(r=t[parseInt(c.toString(),10)].obj,o=t[c+1].obj.bounds,a=r.bounds,l=o.x-a.x-a.width,Math.abs(l-e)<=1);c++)n[n.length]=t[c+1],a.y<i&&(i=a.y);return i},t.prototype.findEquallySpacedNodesAtTop=function(t,e,i,n){for(var s,r,o,a=1;a<t.length&&(s=t[a-1].obj.bounds,r=t[parseInt(a.toString(),10)].obj.bounds,o=s.y-r.y-r.height,Math.abs(o-e)<=1);a++)n[n.length]=t[parseInt(a.toString(),10)],r.x+r.width>i&&(i=r.x+r.width);return i},t.prototype.findEquallySpacedNodesAtBottom=function(t,e,i,n,s){var r,o,a,l,h=t[0].distance;if(Math.abs(e-h)<=s)for(var c=0;c<t.length-1&&(r=t[parseInt(c.toString(),10)].obj,o=t[c+1].obj.bounds,a=r.bounds,l=o.y-a.y-a.height,Math.abs(l-e)<=1);c++)n[n.length]=t[c+1],a.x+a.width>i&&(i=a.x+a.width);return i},t.prototype.getLayer=function(){var t;return this.diagram.snapSettings.constraints&os.SnapToObject&&((t=document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("id","_SnappingLines"),t.setAttribute("shapeRendering","crispEdges"),this.getAdornerLayerSvg().appendChild(t)),t},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Snapping"},t}(),ak=function(){function t(){this.groupUndo=!1,this.childTable=[],this.historyCount=0,this.hasGroup=!1,this.groupCount=0,this.undoOffsets=[],this.checkRedo=!1}return t.prototype.initHistory=function(t){t.historyManager={canRedo:!1,canUndo:!1,currentEntry:null,push:t.addHistoryEntry.bind(t),undo:Function,redo:Function,startGroupAction:t.startGroupAction.bind(t),endGroupAction:t.endGroupAction.bind(t),canLog:null,undoStack:[],redoStack:[],stackLimit:t.historyManager?t.historyManager.stackLimit:void 0}},t.prototype.addHistoryEntry=function(t,e){if("EndGroup"===t.type&&"StartGroup"===e.historyManager.currentEntry.type)return e.historyManager.currentEntry.previous&&(e.historyManager.currentEntry.previous.next=void 0),e.historyManager.currentEntry=e.historyManager.currentEntry.previous,e.historyManager.currentEntry||(e.historyManager.canUndo=!1),!1;var i=null;if(e.historyManager.canLog&&!0===e.historyManager.canLog(t).cancel)return!1;if(e.historyManager&&e.historyManager.canUndo&&e.historyManager.currentEntry&&((i=e.historyManager.currentEntry).next?i.previous&&(i.next.previous=null,i.next=t,t.previous=i):(i.next=t,t.previous=i)),e.historyManager.currentEntry=t,e.historyManager.stackLimit){if("StartGroup"===t.type||"EndGroup"===t.type){var n="EndGroup"===t.type;this.setEntryLimit(n)}this.hasGroup||0!==this.groupCount||(this.historyCount<e.historyManager.stackLimit?this.historyCount++:this.applyLimit(e.historyManager.currentEntry,e.historyManager.stackLimit,e))}return this.getHistoryList(e),e.historyManager.canUndo=!0,e.historyManager.canRedo=!1,!0},t.prototype.applyLimit=function(t,e,i,n){if(t&&t.previous){if("StartGroup"===t.type||"EndGroup"===t.type){var s="StartGroup"===t.type;this.setEntryLimit(s)}this.hasGroup||0!==this.groupCount||e--,0===e?(n&&this.limitHistoryStack(t.previous,i),i.historyManager.stackLimit<this.historyCount&&(this.historyCount=i.historyManager.stackLimit),delete t.previous):t.previous&&this.applyLimit(t.previous,e,i,n)}this.groupCount=0},t.prototype.clearHistory=function(t){var e=t.historyManager;e.currentEntry=void 0,e.canUndo=!1,e.canRedo=!1,this.historyCount=0,this.groupCount=0,t.historyManager.undoStack=[],t.historyManager.redoStack=[]},t.prototype.setEntryLimit=function(t){t?this.groupCount--:this.groupCount++,this.hasGroup=t?!t:t},t.prototype.limitHistoryStack=function(t,e){"StartGroup"!==t.type&&"EndGroup"!==t.type&&(this.removeFromStack(e.historyManager.undoStack,t),this.removeFromStack(e.historyManager.redoStack,t)),t.previous&&this.limitHistoryStack(t.previous,e)},t.prototype.removeFromStack=function(t,e){if(t.length)for(var i=0;i<=t.length;i++)if(t[parseInt(i.toString(),10)].undoObject===e.undoObject&&t[parseInt(i.toString(),10)].redoObject===e.redoObject){t.splice(i,1);break}},t.prototype.undo=function(t){t.checkUndoRedo=!0;var e=this.getUndoEntry(t),i=0;if(e)if("Internal"===e.category)"EndGroup"===e.type?(i++,this.groupUndo=!0):this.undoEntry(e,t),this.groupUndo&&(this.undoGroupAction(e,t,i),this.groupUndo=!1);else{x()||t.historyManager.undo(e);var n={entryType:"undo",oldValue:e.undoObject,newValue:e.redoObject};t.triggerEvent(Ds.historyStateChange,n)}t.checkUndoRedo=!1},t.prototype.getHistoryList=function(t){var e,i,n=[],s=[],r=t.historyManager.currentEntry;for(r=t.historyManager.currentEntry,t.historyManager.canUndo||0===t.historyManager.undoStack.length?this.getHistroyObject(n,r):this.getHistroyObject(s,r);r&&r.previous;)e=r.previous,this.getHistroyObject(n,e),r=r.previous;for(r=t.historyManager.currentEntry;r&&r.next;)i=r.next,this.getHistroyObject(s,i),r=r.next;t.historyManager.undoStack=n,t.historyManager.redoStack=s},t.prototype.getHistroyObject=function(t,e){e&&"StartGroup"!==e.type&&"EndGroup"!==e.type&&t.push({redoObject:e.redoObject?e.redoObject:null,undoObject:e.undoObject?e.undoObject:null,type:e.type?e.type:null,category:e.category?e.category:null})},t.prototype.undoGroupAction=function(t,e,i){for(;0!==i;)this.undoEntry(t,e),"StartGroup"===(t=this.getUndoEntry(e)).type?i--:"EndGroup"===t.type&&i++;i=0},t.prototype.undoEntry=function(t,e){var i,n;if("PropertyChanged"!==t.type&&"CollectionChanged"!==t.type&&"LabelCollectionChanged"!==t.type&&(n=i=t.undoObject?t.undoObject:t.previous.undoObject),"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.historyManager.undoStack.length>0){var s=e.historyManager.undoStack.splice(0,1);e.historyManager.redoStack.splice(0,0,s[0]),n=t.undoObject}switch(e.protectPropertyChange(!0),e.diagramActions|=Is.UndoRedo,t.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,e);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,e,t);break;case"RotationChanged":this.recordRotationChanged(i,e,t,"undo");break;case"ConnectionChanged":this.recordConnectionChanged(i,e);break;case"PropertyChanged":this.recordPropertyChanged(t,e,!1);break;case"CollectionChanged":if(t&&t.next&&"AddChildToGroupNode"===t.next.type&&"Insert"===t.next.changeType){var r=e.getObject(t.next.undoObject.id);e.insertValue(Fn(r),!0)}if(t.isUndo=!0,this.recordCollectionChanged(t,e),t.isUndo=!1,t&&t.next&&"AddChildToGroupNode"===t.next.type&&"Insert"===t.next.changeType)(r=e.getObject(t.next.undoObject.id)).wrapper.measure(new un),r.wrapper.arrange(r.wrapper.desiredSize),e.updateDiagramObject(r);break;case"LabelCollectionChanged":t.isUndo=!0,this.recordLabelCollectionChanged(t,e),t.isUndo=!1;break;case"PortCollectionChanged":t.isUndo=!0,this.recordPortCollectionChanged(t,e),t.isUndo=!1;break;case"Group":this.unGroup(t,e);break;case"UnGroup":this.group(t,e);break;case"SegmentChanged":this.recordSegmentChanged(i,e);break;case"PortPositionChanged":this.recordPortChanged(t,e,!1);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(t,e,!1);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(t,e,!1);break;case"StackChildPositionChanged":this.recordStackPositionChanged(t,e,!1);break;case"RowHeightChanged":this.recordGridSizeChanged(t,e,!1,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(t,e,!1,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(t,e,!1);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":t.isUndo=!0,this.recordLaneOrPhaseCollectionChanged(t,e,!1),t.isUndo=!1;break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(t,e,!1);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(t,e,!1);break;case"RemoveChildFromGroupNode":this.recordRemoveChildFromGroupNode(t,e,!1);break;case"ExternalEntry":e.historyManager.undo(t)}if(e.diagramActions&=~Is.UndoRedo,e.protectPropertyChange(!1),e.historyChangeTrigger(t,"Undo"),n){var o=this.checkNodeObject(n,e);if(o){var a=is(e.updateSelection);a&&a(o,e)}}},t.prototype.checkNodeObject=function(t,e){var i;if(t.id)i=e.nameTable[t.id];else if(t.nodes&&t.nodes.length>0||t.connectors&&t.connectors.length>0)for(var n=0,s=t.nodes.length>0?t.nodes:t.connectors;n<s.length;n++)i=s[n],i=e.nameTable[i.id];else{var r=t.nodes?t.nodes:t.connectors;if(r)for(var o=0,a=Object.keys(r);o<a.length;o++){var l=a[o],h=Number(l);i=t.nodes?e.nodes[parseInt(h.toString(),10)]:e.connectors[parseInt(h.toString(),10)]}}return i},t.prototype.group=function(t,e){e.add(t.undoObject)},t.prototype.unGroup=function(t,e){t.redoObject=Fn(t.undoObject);var i=t.undoObject;e.commandHandler.unGroup(i)},t.prototype.ignoreProperty=function(t){return"zIndex"===t||"wrapper"===t||"parentObj"===t||"controlParent"===t},t.prototype.getProperty=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];t&&(this.ignoreProperty(s)||(e[""+s]instanceof Object?this.getProperty(t[""+s],e[""+s]):t[""+s]=e[""+s]))}},t.prototype.recordLaneOrPhaseCollectionChanged=function(t,e,i){var n=t.redoObject,s=t.undoObject;if("Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType))e.remove(n);else if(n.isPhase){var r=e.nameTable[n.parentId];e.addPhases(r,[s])}else{var o=hu(r=e.nameTable[n.parentId],n);e.addLanes(r,[s],o)}e.clearSelection()},t.prototype.recordAnnotationChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(e.canEnableBlazorObject){var s=Fn(e.nameTable[n.id]);e.insertValue(s,s instanceof Ny)}var r=Km(n,t.objectId),o=e.commandHandler.getAnnotationChanges(e.nameTable[n.id],r),a=e.nameTable[n.id],l=Km(a,t.objectId);l.offset=r.offset,l.margin=r.margin,l.width=r.width,l.height=r.height,l.rotateAngle=r.rotateAngle,l.margin=r.margin,a instanceof Ny?e.nodePropertyChange(a,{},o):e.connectorPropertyChange(a,{},o)},t.prototype.recordChildCollectionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject,s=e.nameTable[n.parentId],r=e.nameTable[n.id];s?Hu(e,s,r,!i,"AddNodeToLane"===t.historyAction,i):(r.parentId&&(s=e.nameTable[r.parentId])&&(this.removeChildFromLane(e,s,r),s.children.splice(s.children.indexOf(r.id),1),s.wrapper.children.splice(s.wrapper.children.indexOf(r.wrapper),1)),n.parentId&&""!==n.parentId&&((s=e.nameTable[n.parentId]).children.push(n.id),s.wrapper.children.push(r.wrapper)),r.parentId=n.parentId,e.removeElements(r),e.updateDiagramObject(r))},t.prototype.removeChildFromLane=function(t,e,i){var n=t.nameTable[e.parentId];if(n&&n.shape&&n.shape.lanes.length>0){var s="Horizontal"===n.shape.orientation,r=0;n.shape.phases.length>0&&n.shape.phaseSize>0||(r=1);var o=s?n.shape.hasHeader?e.rowIndex-(2-r):e.rowIndex-(1-r):e.columnIndex-(1-r),a=n.shape.lanes[parseInt(o.toString(),10)];if(a&&a.children&&a.children.length>0)for(var l=a.children.length-1;l>=0;l--)a.children[parseInt(l.toString(),10)].id===i.id&&a.children.splice(l,1)}},t.prototype.recordStackPositionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(n.source){var s=e.nameTable[n.source.parentId];s&&(n.target?(s.wrapper.children.splice(n.targetIndex,1),s.wrapper.children.splice(n.sourceIndex,0,n.source.wrapper)):void 0!==n.sourceIndex?(e.nameTable[n.source.id]||e.add(n.source),s.wrapper.children.splice(n.sourceIndex,0,e.nameTable[n.source.id].wrapper),e.nameTable[n.source.id].parentId=s.id):(s.wrapper.children.splice(s.wrapper.children.indexOf(e.nameTable[n.source.id].wrapper),1),e.nameTable[n.source.id].parentId=""),i&&"UmlClassifier"===s.shape.type&&e.remove(n.source),s.wrapper.measure(new un),s.wrapper.arrange(s.wrapper.desiredSize),e.updateDiagramObject(s),e.updateSelector())}},t.prototype.recordGridSizeChanged=function(t,e,i,n){var s=i?t.redoObject:t.undoObject,r=i?t.undoObject:t.redoObject;if(s.parentId){var o=e.nameTable[s.parentId],a=e.nameTable[s.id],l=o.wrapper.bounds.x,h=o.wrapper.bounds.y;if("SwimLane"===o.shape.type){var c=o.wrapper.children[0],d=o.shape.padding,p=!1;e.diagramActions&Is.UndoRedo&&(p=!0);var u=0,g=0;s.wrapper&&s.wrapper.actualSize&&r.wrapper&&r.wrapper.actualSize&&(u=s.wrapper.actualSize.width-r.wrapper.actualSize.width,g=s.wrapper.actualSize.height-r.wrapper.actualSize.height),lu(e,r,o,s,u,g),n?(c.updateRowHeight(s.rowIndex,s.wrapper.actualSize.height,!0,d,p),o.height=o.wrapper.height=c.height):(c.updateColumnWidth(s.columnIndex,s.wrapper.actualSize.width,!0,d,p),o.width=o.wrapper.width=c.width,s.isPhase&&(a.maxWidth=a.wrapper.maxWidth=s.wrapper.actualSize.width)),$p(o);var m=l-o.wrapper.bounds.x,f=h-o.wrapper.bounds.y;e.drag(o,m,f),e.clearSelection(),e.updateDiagramObject(o)}}},t.prototype.recordLanePositionChanged=function(t,e,i){var n=i?t.redoObject:t.undoObject;if(n.source){var s=e.nameTable[n.source.parentId];s&&"SwimLane"===s.shape.type&&(ou(e,n.target,n.source),e.clearSelection())}},t.prototype.recordPortChanged=function(t,e,i){var n=i?t.redoObject.nodes[0]:t.undoObject.nodes[0];if(e.canEnableBlazorObject){var s=Fn(e.nameTable[n.id]);e.insertValue(s,!0)}var r=Jm(n,t.objectId),o=e.commandHandler.getPortChanges(e.nameTable[n.id],r),a=e.nameTable[n.id];Jm(a,t.objectId).offset=r.offset,e.nodePropertyChange(a,{},o),a.parentId&&e.updateConnectorEdges(e.nameTable[a.parentId])},t.prototype.recordPropertyChanged=function(t,e,i){var n=t.redoObject,s=t.undoObject;this.getProperty(e,i?n:s),i?e.onPropertyChanged(n,s):e.onPropertyChanged(s,n),e.diagramActions=e.diagramActions|Is.UndoRedo},t.prototype.recordOrderCommandChanged=function(t,e,i){var n=t.redoObject,s=t.undoObject;e.commandHandler.orderCommands(i,i?n:s,t.type),e.diagramActions=e.diagramActions|Is.UndoRedo},t.prototype.recordAddChildToGroupNode=function(t,e,i){var n=e.nameTable[t.undoObject.id],s=e.nameTable[t.objectId];i&&"Insert"===t.changeType?e.addChildToGroup(n,s.id):e.removeChildFromGroup(n,s.id)},t.prototype.recordRemoveChildFromGroupNode=function(t,e,i){var n=e.nameTable[t.undoObject.id],s=e.nameTable[t.objectId];i&&"Remove"===t.changeType?e.removeChildFromGroup(n,s.id):e.addChildToGroup(n,s.id)},t.prototype.recordSegmentChanged=function(t,e){var i,n=0;if(t.connectors&&t.connectors.length>0)for(n=0;n<t.connectors.length;n++)i=t.connectors[parseInt(n.toString(),10)],this.segmentChanged(i,e)},t.prototype.segmentChanged=function(t,e){var i=e.nameTable[t.id];i&&(i.segments=t.segments,e.commandHandler.updateEndPoint(i))},t.prototype.recordPositionChanged=function(t,e){var i,n,s=0;if(t.nodes&&t.nodes.length>0){for(s=0;s<t.nodes.length;s++)e.bpmnModule&&(e.isPositionUndo=!0),i=t.nodes[parseInt(s.toString(),10)],this.positionChanged(i,e);e.isPositionUndo=!1}if(t.connectors&&t.connectors.length>0)for(s=0;s<t.connectors.length;s++)n=t.connectors[parseInt(s.toString(),10)],this.segmentChanged(n,e),this.connectionChanged(n,e)},t.prototype.positionChanged=function(t,e){var i=e.nameTable[t.id];if(t.processId&&!i.processId&&e.addProcess(t,t.processId),!t.processId&&i.processId&&e.removeProcess(t.id),t.parentId&&"Container"===e.nameTable[t.parentId].shape.type&&!i.parentId&&Kf(t,t.parentId,e),!t.parentId&&i.parentId&&"Container"===e.nameTable[i.parentId].shape.type&&Jf(i,e),i.processId||i.parentId&&e.nameTable[i.parentId]&&"Container"===e.nameTable[i.parentId].shape.type){var n=t.margin.left-i.margin.left,s=t.margin.top-i.margin.top;e.drag(i,n,s)}else{if(i.parentId){var r=e.nameTable[i.parentId];r.isLane&&(t.wrapper.offsetX=t.width/2+(r.wrapper.bounds.x+t.margin.left),t.wrapper.offsetY=t.height/2+(r.wrapper.bounds.y+t.margin.top))}n=t.wrapper.offsetX-i.offsetX,s=t.wrapper.offsetY-i.offsetY;e.drag(i,n,s)}e.bpmnModule&&e.bpmnModule.updateDocks(i,e)},t.prototype.recordSizeChanged=function(t,e,i){var n,s,r=0;if(t&&t.nodes&&t.nodes.length>0)for(r=0;r<t.nodes.length;r++)if((s=t.nodes[parseInt(r.toString(),10)]).children&&!s.container)for(var o=e.commandHandler.getAllDescendants(s,[]),a=0;a<o.length;a++){var l=i.childTable[o[parseInt(a.toString(),10)].id];df(l)===Ny?(this.sizeChanged(l,e,i),this.positionChanged(l,e)):this.connectionChanged(l,e,i)}else e.bpmnModule&&(e.sizeUndo=!0),this.sizeChanged(s,e),this.positionChanged(s,e),e.bpmnModule&&(e.sizeUndo=!1);if(t&&t.connectors&&t.connectors.length>0){var h=t.connectors;for(r=0;r<h.length;r++)n=h[parseInt(r.toString(),10)],this.connectionChanged(n,e)}e.updateSelector()},t.prototype.sizeChanged=function(t,e,i){var n=e.nameTable[t.id],s=t.wrapper.actualSize.width/n.wrapper.actualSize.width,r=t.wrapper.actualSize.height/n.wrapper.actualSize.height;i&&i.childTable&&(i.childTable[t.id]=Fn(n)),e.scale(n,s,r,{x:t.wrapper.offsetX/n.wrapper.offsetX,y:t.wrapper.offsetY/n.wrapper.offsetY})},t.prototype.recordRotationChanged=function(t,e,i,n){var s,r,o=0,a=e.selectedItems;if(a.rotateAngle=t.rotateAngle,a&&a.wrapper&&(a.wrapper.rotateAngle=t.rotateAngle),e.fromUndo=!0,t&&t.nodes&&t.nodes.length>0)for(o=0;o<t.nodes.length;o++){var l=!1;if((s=t.nodes[parseInt(o.toString(),10)]).children&&s.children.length>0){for(var h=0;h<s.children.length;h++){var c=e.nameTable[s.children[parseInt(h.toString(),10)]];if(df(c)!==Ny&&(""===c.sourceID||""===c.targetID)){l=!0;break}}if(l&&Object.keys(i.childTable).length>0){for(var d=e.commandHandler.getAllDescendants(s,[]),p=0;p<d.length;p++){var u=i.childTable[d[parseInt(p.toString(),10)].id];if(df(u)===Ny){var g={id:"",rotateAngle:0,wrapper:{offsetX:0,offsetY:0}};if("redo"===n?(g.id=u.id,g.rotateAngle=s.rotateAngle):g=u,this.rotationChanged(g,e),"undo"===n){var m=e.nameTable[g.id];this.undoOffsets.push({id:m.id,offsetX:m.offsetX,offsetY:m.offsetY})}else{for(var f=-1,y=this.undoOffsets.length-1;y>=0;y--)if(this.undoOffsets[parseInt(y.toString(),10)].id===g.id){g.wrapper=this.undoOffsets[parseInt(y.toString(),10)],f=y;break}-1!==f&&this.undoOffsets.splice(f,1)}this.positionChanged(g,e)}else this.connectionChanged(u,e,i)}e.nameTable[s.id].rotateAngle=t.rotateAngle,e.updateSelector(),this.rotationChanged(s,e)}else this.rotationChanged(s,e),this.positionChanged(s,e)}else this.rotationChanged(s,e),this.positionChanged(s,e)}if(e.fromUndo=!1,t&&t.connectors&&t.connectors.length>0)for(o=0;o<t.connectors.length;o++)r=t.connectors[parseInt(o.toString(),10)],this.connectionChanged(r,e)},t.prototype.rotationChanged=function(t,e){var i=e.nameTable[t.id];e.rotate(i,t.rotateAngle-i.rotateAngle)},t.prototype.recordConnectionChanged=function(t,e){var i;(i=t&&t.connectors?t.connectors[0]:t).sourceID&&e.nameTable[i.sourceID]&&e.insertValue(e.nameTable[i.sourceID],!0),i.targetID&&e.nameTable[i.targetID]&&e.insertValue(e.nameTable[i.targetID],!0),(i instanceof Rg||"None"===i.shape.type||"Bpmn"===i.shape.type)&&this.connectionChanged(i,e)},t.prototype.connectionChanged=function(t,e,i){var n=e.nameTable[t.id];if(n){var s;if(t.sourcePortID!==n.sourcePortID&&(e.removePortEdges(e.nameTable[n.sourceID],n.sourcePortID,n.id,!1),n.sourcePortID=t.sourcePortID,e.connectorPropertyChange(n,{},{sourcePortID:t.sourcePortID})),t.targetPortID!==n.targetPortID&&(e.removePortEdges(e.nameTable[n.targetID],n.targetPortID,n.id,!0),n.targetPortID=t.targetPortID,e.connectorPropertyChange(n,{},{targetPortID:t.targetPortID})),t.sourceID!==n.sourceID){if(""===t.sourceID?Ym((s=e.nameTable[n.sourceID]).outEdges,t.id):((s=e.nameTable[t.sourceID]).outEdges.push(t.id),e.updatePortEdges(s,t,!1)),n.sourceID=t.sourceID,n.isBpmnAnnotationConnector)e.nameTable[n.targetID].shape.textAnnotation.textAnnotationTarget=n.sourceID;e.connectorPropertyChange(n,{},{sourceID:t.sourceID})}t.targetID!==n.targetID&&(""===t.targetID?Ym((s=e.nameTable[n.targetID]).inEdges,t.id):((s=e.nameTable[t.targetID]).inEdges.push(t.id),e.updatePortEdges(s,t,!0)),n.targetID=t.targetID,e.connectorPropertyChange(n,{},{targetID:t.targetID})),i&&i.childTable&&(i.childTable[t.id]=Fn(n));var r=t.sourcePoint.x-n.sourcePoint.x,o=t.sourcePoint.y-n.sourcePoint.y;0===r&&0===o||e.dragSourceEnd(n,r,o);var a=t.targetPoint.x-n.targetPoint.x,l=t.targetPoint.y-n.targetPoint.y;0===a&&0===l||e.dragTargetEnd(n,a,l),e.updateSelector(),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.recordCollectionChanged=function(t,e){var i=t.undoObject;if(t&&t.changeType){if("Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType))if(i.nodeId)e.remove(e.nameTable[i.nodeId+"_textannotation_"+i.id]);else{if(e.remove(i),i.parentId)(n=e.nameTable[i.parentId])&&this.removeChildFromLane(e,n,i);e.clearSelectorLayer()}else{var n;if(e.clearSelectorLayer(),i.parentId&&e.nameTable[i.parentId]&&"Container"!==e.nameTable[i.parentId].shape.type)(n=e.nameTable[i.parentId])?e.addChild(n,i):e.add(i);else i.nodeId?e.addTextAnnotation(i,e.nameTable[i.nodeId]):e.nameTable[i.id]||(i&&i.shape&&"SwimLane"===i.shape.type&&t.isUndo&&vu(i,void 0,void 0,void 0,void 0,!0),this.updateConnectorZindex(i,e),e.add(i));i.processId&&e.nameTable[i.processId]&&e.addProcess(i,i.processId),i.parentId&&e.nameTable[i.parentId]&&"Container"===e.nameTable[i.parentId].shape.type&&Kf(i,i.parentId,e)}"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.updateConnectorZindex=function(t,e){if(t.sourceID||t.targetID){var i=e.nameTable[t.sourceID],n=e.nameTable[t.targetID];if(i&&i.parentId){var s=e.nameTable[i.parentId];if(s&&s.isLane)Bu(t,e.nameTable[s.parentId],e)}else if(n&&n.parentId){var r=e.nameTable[n.parentId];if(r&&r.isLane)Bu(t,e.nameTable[r.parentId],e)}}},t.prototype.recordLabelCollectionChanged=function(t,e){var i=t.undoObject,n=t.redoObject,s=e.nameTable[n.id];if(t&&t.changeType){"Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType)?(e.removeLabels(s,[i]),e.clearSelectorLayer()):(e.clearSelectorLayer(),e.addLabels(s,[i])),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.recordPortCollectionChanged=function(t,e){var i=t.undoObject,n=t.redoObject,s=e.nameTable[n.id];if(t&&t.changeType){"Remove"===(t.isUndo?"Insert"===t.changeType?"Remove":"Insert":t.changeType)?(e.removePorts(s,[i]),e.clearSelectorLayer()):(e.clearSelectorLayer(),e.addPorts(s,[i])),"SVG"!==e.mode&&e.refreshDiagramLayer()}},t.prototype.redo=function(t){t.checkUndoRedo=!0,this.checkRedo=!0;var e=this.getRedoEntry(t),i=0;if(e)if("Internal"===e.category)"StartGroup"===e.type?(i++,this.groupUndo=!0):this.redoEntry(e,t),this.groupUndo&&(this.redoGroupAction(e,t,i),this.groupUndo=!1);else{x()||t.historyManager.redo(e);var n={entryType:"redo",oldValue:e.redoObject,newValue:e.undoObject};t.triggerEvent(Ds.historyStateChange,n)}this.checkRedo=!1,t.checkUndoRedo=!1},t.prototype.redoGroupAction=function(t,e,i){for(;0!==i;)this.redoEntry(t,e),"EndGroup"===(t=this.getRedoEntry(e)).type?i--:"StartGroup"===t.type&&i++;i=0},t.prototype.redoEntry=function(t,e){var i,n;if("PropertyChanged"!==t.type&&"CollectionChanged"!==t.type&&(i=t.redoObject,n=t.redoObject),e.diagramActions|=Is.UndoRedo,"StartGroup"!==t.type&&"EndGroup"!==t.type&&e.historyManager.redoStack.length>0){var s=e.historyManager.redoStack.splice(0,1);e.historyManager.undoStack.splice(0,0,s[0]),n=t.redoObject}switch(e.protectPropertyChange(!0),t.type){case"PositionChanged":case"Align":case"Distribute":this.recordPositionChanged(i,e);break;case"SizeChanged":case"Sizing":this.recordSizeChanged(i,e,t);break;case"RotationChanged":this.recordRotationChanged(i,e,t,"redo");break;case"ConnectionChanged":this.recordConnectionChanged(i,e);break;case"PropertyChanged":this.recordPropertyChanged(t,e,!0);break;case"CollectionChanged":this.recordCollectionChanged(t,e);break;case"LabelCollectionChanged":this.recordLabelCollectionChanged(t,e);break;case"PortCollectionChanged":this.recordPortCollectionChanged(t,e);break;case"Group":this.group(t,e);break;case"UnGroup":this.unGroup(t,e);break;case"SegmentChanged":this.recordSegmentChanged(i,e);break;case"PortPositionChanged":this.recordPortChanged(t,e,!0);break;case"AnnotationPropertyChanged":this.recordAnnotationChanged(t,e,!0);break;case"ChildCollectionChanged":this.recordChildCollectionChanged(t,e,!0);break;case"StackChildPositionChanged":this.recordStackPositionChanged(t,e,!0);break;case"RowHeightChanged":this.recordGridSizeChanged(t,e,!0,!0);break;case"ColumnWidthChanged":this.recordGridSizeChanged(t,e,!0,!1);break;case"LanePositionChanged":this.recordLanePositionChanged(t,e,!0);break;case"LaneCollectionChanged":case"PhaseCollectionChanged":this.recordLaneOrPhaseCollectionChanged(t,e,!0);break;case"SendToBack":case"SendForward":case"SendBackward":case"BringToFront":this.recordOrderCommandChanged(t,e,!0);break;case"AddChildToGroupNode":this.recordAddChildToGroupNode(t,e,!0);break;case"RemoveChildFromGroupNode":this.recordRemoveChildFromGroupNode(t,e,!0);break;case"ExternalEntry":e.historyManager.redo(t)}if(e.protectPropertyChange(!1),e.diagramActions&=~Is.UndoRedo,e.historyChangeTrigger(t,"Redo"),n){var r=this.checkNodeObject(n,e);if(r){var o=is(e.updateSelection);o&&o(r,e)}}},t.prototype.getUndoEntry=function(t){var e,i=null,n=t.historyManager;return n.canUndo&&(i=n.currentEntry,(e=n.currentEntry.previous)?(n.currentEntry=e,n.canRedo||(n.canRedo=!0)):(n.canRedo=!0,n.canUndo=!1)),i},t.prototype.getRedoEntry=function(t){var e,i=null,n=t.historyManager;return n.canRedo&&((e=n.currentEntry.previous||n.canUndo?n.currentEntry.next:n.currentEntry)&&(n.currentEntry=e,n.canUndo||(n.canUndo=!0),e.next||(n.canRedo=!1,n.canUndo=!0)),i=n.currentEntry),i},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"UndoRedo"},t}(),lk=function(){function t(){this.protectChange=!1,this.setIntervalObject=[]}return t.prototype.expand=function(t,e,i,n){var s=this,r=0;if(n.realActions=n.realActions|Ss.AnimationClick,this.setIntervalObject[parseInt((0).toString(),10)]=setInterval(function(){return r++,s.layoutAnimation(e,s.setIntervalObject,6===r,n,i)},20),i.isExpanded){var o=.2;n.protectPropertyChange(!1);var a={};if(t){this.updateOpacity(i,o,n);a[parseInt((0).toString(),10)]=setInterval(function(){n.allowServerDataBinding=!1,o<=1?s.updateOpacity(i,o,n):clearInterval(a[0]),o+=.2,n.allowServerDataBinding=!0},20)}}},t.prototype.stopCurrentAnimation=function(t,e,i){clearInterval(this.setIntervalObject[0]),this.setIntervalObject=[];for(var n=0;n<t.objects.length;n++){var s=e.nameTable[t.objects[parseInt(n.toString(),10)].id];s.offsetX+=t.objects[parseInt(n.toString(),10)].differenceX-t.objects[parseInt(n.toString(),10)].differenceX/5,s.offsetY+=t.objects[parseInt(n.toString(),10)].differenceY-t.objects[parseInt(n.toString(),10)].differenceY/5}e.realActions=e.realActions&Ss.AnimationClick,e.refreshCanvasLayers(),e.protectPropertyChange(!0),e.triggerEvent(Ds.animationComplete,void 0),e.layout.fixedNode="",e.protectPropertyChange(this.protectChange);var r={element:Fn(i),state:!!i.isExpanded};e.triggerEvent(Ds.expandStateChange,r),e.lineRoutingModule&&e.constraints&ms.LineRouting&&e.resetSegments()},t.prototype.layoutAnimation=function(t,e,i,n,s){if(!i)for(var r=0;r<t.objects.length;r++){var o=n.nameTable[t.objects[parseInt(r.toString(),10)].id];o.offsetX+=t.objects[parseInt(r.toString(),10)].differenceX/5,o.offsetY+=t.objects[parseInt(r.toString(),10)].differenceY/5}if(i){clearInterval(e[0]),this.setIntervalObject=[],n.realActions=n.realActions&~Ss.AnimationClick,n.refreshCanvasLayers(),n.protectPropertyChange(!0),n.triggerEvent(Ds.animationComplete,void 0),n.organizationalChartModule.isAnimation=!1,n.layout.fixedNode="",n.protectPropertyChange(this.protectChange);var a={element:Fn(s),state:!!s.isExpanded};n.triggerEvent(Ds.expandStateChange,a),n.lineRoutingModule&&n.constraints&ms.LineRouting&&n.resetSegments()}},t.prototype.updateOpacity=function(t,e,i){for(var n=0;n<t.outEdges.length;n++){var s=i.nameTable[t.outEdges[parseInt(n.toString(),10)]],r=i.nameTable[s.targetID];s.style.opacity=e;for(var o=0;o<s.wrapper.children.length;o++)s.wrapper.children[parseInt(o.toString(),10)].style.opacity=e,r.style.opacity=e,r.wrapper instanceof _s&&i.updateNodeProperty(r.wrapper,void 0,e);this.updateOpacity(r,e,i)}},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LayoutAnimate"},t}(),hk=function(){function t(t,e,i){this.startPoint=t,this.endPoint=e,this.previous=i,i&&(i.next=this);var n=t.x===e.x;this.coordinate=n?t.x:t.y,this.sortedStart=n?Math.min(t.y,e.y):Math.min(t.x,e.x),this.sortedEnd=n?Math.max(t.y,e.y):Math.max(t.x,e.x),this.direction=n?t.y<e.y?"Bottom":"Top":t.x<e.x?"Right":"Left",this.startEvent=new ck(this,!0),this.endEvent=new ck(this,!1)}return t.prototype.updateCoordinate=function(t){this.coordinate+=t;var e="Left"===this.direction||"Right"===this.direction,i=e?{x:this.startPoint.x,y:this.coordinate}:{x:this.coordinate,y:this.startPoint.y},n=e?{x:this.endPoint.x,y:this.coordinate}:{x:this.coordinate,y:this.endPoint.y};this.startPoint=i,this.previous&&this.previous.adjustEnd(i),this.endPoint=n,this.next&&this.next.adjustStart(n)},t.prototype.adjustStart=function(t){this.startPoint=t,this.updateSortedValues()},t.prototype.adjustEnd=function(t){this.endPoint=t,this.updateSortedValues()},t.prototype.updateSortedValues=function(){var t="Top"===this.direction||"Bottom"===this.direction;this.sortedStart=t?Math.min(this.startPoint.y,this.endPoint.y):Math.min(this.startPoint.x,this.endPoint.x),this.sortedEnd=t?Math.max(this.startPoint.y,this.endPoint.y):Math.max(this.startPoint.x,this.endPoint.x),this.startEvent.refresh(),this.endEvent.refresh()},t}(),ck=function(){function t(t,e){this.segment=t,this.isStart=e,this.value=e?t.sortedStart:t.sortedEnd}return t.prototype.refresh=function(){this.value=this.isStart?this.segment.sortedStart:this.segment.sortedEnd},t.prototype.compareTo=function(t){return this.value!==t.value?this.value<t.value?-1:1:this.isStart?-1:t.isStart?1:0},t}(),dk=function(){function t(){this.horizontalBranches=new Map,this.verticalBranches=new Map}return t.prototype.addSegment=function(t){var e=this.getBranches(t.direction);this.addSegmentToBranch(e,t)},t.prototype.addSegmentToBranch=function(t,e){t.has(e.coordinate)||t.set(e.coordinate,new Set);var i=t.get(e.coordinate);i&&(i.add(e.startEvent),i.add(e.endEvent))},t.prototype.removeSegment=function(t){var e=this.getBranches(t.direction);this.removeSegmentFromBranch(e,t)},t.prototype.removeSegmentFromBranch=function(t,e){var i=t.get(e.coordinate);i&&(i.delete(e.startEvent),i.delete(e.endEvent),0===i.size&&t.delete(e.coordinate))},t.prototype.findOverlappingSegments=function(t){var e=this.getBranches(t.direction);return this.findOverlappingSegmentsInBranch(e,t)},t.prototype.findOverlappingSegmentsInBranch=function(t,e){var i=[],n=new Set,s=t.get(e.coordinate);if(s){var r=[];s.forEach(function(t){return r.push(t)});for(var o=0;o<r.length;o++){var a=r[parseInt(o.toString(),10)];if(a.segment.sortedStart<e.sortedStart&&a.segment.sortedEnd>e.sortedEnd||!(a.value<e.sortedStart||a.value>e.sortedEnd))if(a.segment!==e&&!n.has(a.segment))n.add(a.segment),Math.max(e.sortedStart,a.segment.sortedStart)<Math.min(e.sortedEnd,a.segment.sortedEnd)&&i.push(a.segment)}}return i},t.prototype.getBranches=function(t){return"Left"===t||"Right"===t?this.horizontalBranches:this.verticalBranches},t}(),pk=(function(){function t(t){this.requireReroute=!1,this.reRoutedCount=0,this.considerNonWalkable=[],this.diagram=t,this.segmentTree=new dk,this.segmentMappings=new Map,this.connectorMappings=new Map,this.modifiedConnector=new Set,this.modifiedSegments=new Map,this.currentSegments=new Map}t.prototype.getModifiedConnector=function(){return this.modifiedConnector},t.prototype.getModifiedConnectorSegments=function(t){var e=this.segmentMappings.get(t);return this.convertSegmentsToOrthogonal(e)},t.prototype.refreshModifiedConnectors=function(t){var e=this;this.modifiedConnector.forEach(function(i){var n=e.getModifiedConnectorSegments(i);n.length&&(i.segments=n,t.connectorPropertyChange(i,{},{type:"Orthogonal",segments:n}))}),this.modifiedConnector.clear()},t.prototype.removeConnectors=function(t){for(var e=0;e<t.length;e++){var i=t[parseInt(e.toString(),10)],n=void 0;"string"==typeof i?n=this.diagram.nameTable[i]:i instanceof Rg&&(n=i),n&&"Orthogonal"===n.type&&this.removeConnector(n)}},t.prototype.removeConnector=function(t){var e=this,i=this.segmentMappings.get(t);i&&i.forEach(function(t){e.segmentTree.removeSegment(t),e.connectorMappings.delete(t)}),this.segmentMappings.delete(t)},t.prototype.addConnector=function(t,e,i){var n=this;if(void 0===e&&(e=[]),void 0===i&&(i=[]),!this.diagram.lineDistributionModule){0===e.length&&(e=t.intermediatePoints),this.removeConnector(t);var s=this.createLineSegments(e);if(this.mapSegmentsToConnector(t,s),e.length>3)this.adjustConnector(t);else{for(var r=new Set,o=0,a=s;o<a.length;o++)for(var l=a[o],h=0,c=this.segmentTree.findOverlappingSegments(l);h<c.length;h++){var d=c[h],p=this.connectorMappings.get(d);r.add(p)}r.forEach(function(t){return n.adjustConnector(t)})}}},t.prototype.createLineSegments=function(t){for(var e=[],i=0;i<t.length-1;i++){var n=new hk(t[parseInt(i.toString(),10)],t[parseInt((i+1).toString(),10)],0===i?null:e[parseInt((i-1).toString(),10)]);e.push(n)}return e},t.prototype.mapSegmentsToConnector=function(t,e){var i=this;this.segmentMappings.set(t,e),e.forEach(function(e){i.segmentTree.addSegment(e),i.connectorMappings.has(e)||i.connectorMappings.set(e,t)})},t.prototype.convertSegmentsToOrthogonal=function(t){var e=[];return t&&t.forEach(function(t){var i={type:"Orthogonal",direction:t.direction,length:Math.abs(t.sortedEnd-t.sortedStart)};e.push(i)}),e},t.prototype.adjustConnector=function(e){var i=this;this.requireReroute=!1;var n=this.segmentMappings.get(e);if(n.length>2){var s=n[0],r=this.diagram.nameTable[e.sourceID];if(r&&r.outEdges.length>0){for(var o=void 0,a=0;a<r.outEdges.length;a++){var l=this.diagram.nameTable[r.outEdges[parseInt(a.toString(),10)]];if(l!==e){var h=this.segmentMappings.get(l);if(h&&h.length>2){var c=h[0];c.direction===s.direction&&c.next.direction===s.next.direction&&(o?Math.abs(s.coordinate-c.coordinate)<Math.abs(s.coordinate-o.coordinate)&&(o=c):o=c)}}}if(o){var d=o.next.coordinate-s.next.coordinate;if(d){var p=s.next.next,u=s.direction!==p.direction;if(s.direction===p.direction){var g=this.calculateMaximumSegmentShift(s,p,p.direction);u=Math.abs(d)<=g}u&&(this.modifiedSegments.clear(),this.segmentTree.removeSegment(s.next),s.next.updateCoordinate(d),this.segmentTree.addSegment(s.next),this.modifiedSegments.set(s.next,s.next.coordinate),this.modifiedConnector.add(e))}}}}for(var m=void 0,f=0;f<n.length-1;f++){var y=n[parseInt(f.toString(),10)];if(y.previous&&y.next){var v=this.segmentTree.findOverlappingSegments(y);if(v.length>0&&!this.resolveOverlappingSegments(y,v)&&this.requireReroute){m=y;break}}}if(m&&this.diagram.lineRoutingModule&&this.reRoutedCount<=t.maxReRouteLimit){for(;this.considerNonWalkable.length>0;){this.considerNonWalkable.pop().walkable=!0}this.diagram.lineRoutingModule.getGridsIntersect(m.startPoint,m.endPoint).forEach(function(t){t.walkable=!1,i.considerNonWalkable.push(t)}),this.reRoutedCount++,this.diagram.lineRoutingModule.refreshConnectorSegments(this.diagram,e,!1)}for(this.reRoutedCount=0;this.considerNonWalkable.length>0;){this.considerNonWalkable.pop().walkable=!0}},t.prototype.resolveOverlappingSegments=function(t,e){this.modifiedSegments.clear(),this.currentSegments.clear(),this.rootShiftingSegment=t;var i=this.shouldAdjustSelfFirst(t,e),n=e[0],s=i?this.calculateShiftDirection(t,e):this.calculateShiftDirection(n,this.segmentTree.findOverlappingSegments(n)),r=!1;if(i){var o=1===e.length?n:void 0;(r=this.attemptAdjustment(t,s,o))||(s=Xd(s),r=this.attemptAdjustment(t,s,o,!0))}else(r=this.attemptAdjustment(n,s,t))||(s=Xd(s),r=this.attemptAdjustment(n,s,t,!0));return this.updateSegmentTreeWithModifiedSegments(),this.rootShiftingSegment=void 0,r},t.prototype.shouldAdjustSelfFirst=function(t,e){var i=e.length>1;if(1===e.length){var n=e[0];if(n.previous&&n.next){var s=Math.max(t.sortedStart,n.sortedStart),r=Math.min(t.sortedEnd,n.sortedEnd);(r-s)/(t.sortedEnd-t.sortedStart)>=(r-s)/(n.sortedEnd-n.sortedStart)&&(i=!0)}else i=!0}return i},t.prototype.attemptAdjustment=function(t,e,i,n){void 0===n&&(n=!1);var s=this.adjustSegment(t,e,n);return this.updateModifiedSegments(s),s||i&&i.previous&&i.next&&(e=Xd(e),s=this.adjustSegment(i,e,n),this.updateModifiedSegments(s)),s},t.prototype.updateModifiedSegments=function(t){var e=this;t&&this.modifiedSegments.clear(),this.currentSegments.forEach(function(i,n){t&&e.modifiedSegments.set(n,n.coordinate),e.segmentTree.removeSegment(n),n.updateCoordinate(i-n.coordinate),e.segmentTree.addSegment(n)}),this.currentSegments.clear()},t.prototype.updateSegmentTreeWithModifiedSegments=function(){var t=this;this.modifiedSegments.size>0&&this.modifiedSegments.forEach(function(e,i){t.segmentTree.removeSegment(i),i.updateCoordinate(e-i.coordinate),t.segmentTree.addSegment(i);var n=t.connectorMappings.get(i);t.modifiedConnector.has(n)||t.modifiedConnector.add(n)})},t.prototype.resolveOverlappingAtGivenDirection=function(t,e,i,n,s){if(s){for(var r=!1,o=0,a=e;o<a.length;o++){if((c=a[o]).previous&&c.next&&!(r=this.adjustSegment(c,i,n,s)))return!1}return r}var l=t;if(1===e.length){var h=this.shouldAdjustSelfFirst(t,e),c=e[0],d=h?this.calculateShiftDirection(t,e):this.calculateShiftDirection(c,this.segmentTree.findOverlappingSegments(c));n&&(d=Xd(d)),(l=h?d===i?t:c:d===i?c:t)!==c||c.previous&&c.next||(l=t)}return this.adjustSegment(l,i,n)},t.prototype.calculateShiftDirection=function(t,e){var i=e[0],n=t,s=n.previous,r=n.next,o="Left"===n.direction||"Right"===n.direction?n.startPoint.x:n.startPoint.y,a="Left"===n.direction||"Right"===n.direction?n.endPoint.x:n.endPoint.y,l=n.direction;if(s.direction===r.direction){var h=i.previous,c=i.next,d=i.sortedStart<=o&&o<=i.sortedEnd,p=i.sortedStart<=a&&a<=i.sortedEnd;if(d&&p){var u="Left"===i.direction||"Right"===i.direction?i.startPoint.x:i.startPoint.y,g="Left"===i.direction||"Right"===i.direction?i.endPoint.x:i.endPoint.y;if(n.direction!==i.direction){var m=u;u=g,g=m}Math.abs(o-u)>=Math.abs(a-g)||r.next&&n.direction===r.next.direction&&0!==this.segmentTree.findOverlappingSegments(r).length?p=!1:d=!1}l=d?n.direction===i.direction&&c?Xd(c.direction):n.direction!==i.direction&&h?Xd(h.direction):Xd(s.direction):p?n.direction===i.direction&&h?h.direction:n.direction!==i.direction&&c?Xd(c.direction):Xd(s.direction):r.direction}else if(i.previous&&i.next&&i.previous.direction!==i.next.direction){var f=Math.max(n.sortedStart,i.sortedStart),y=Math.min(n.sortedEnd,i.sortedEnd);l=(y-f)/(n.sortedEnd-n.sortedStart)>=(y-f)/(i.sortedEnd-i.sortedStart)?r.direction:s.direction}else l=r.direction;return l},t.prototype.adjustSegment=function(e,i,n,s){void 0===s&&(s=!1);var r=e.coordinate,o=e.previous,a=e.next,l=this.calculateMaximumSegmentShift(o,a,i),h=("Right"===i||"Bottom"===i?1:-1)*t.ConnectorSpacing;if(Math.abs(h)<=l){if(this.segmentTree.removeSegment(e),e.updateCoordinate(h),this.segmentTree.addSegment(e),this.currentSegments.has(e)||this.currentSegments.set(e,r),this.diagram.lineRoutingModule){var c=e.startPoint,d=e.endPoint;if(!this.diagram.lineRoutingModule.isPathWalkable(c,d,this.diagram)){if(!s&&e===this.rootShiftingSegment){this.segmentTree.removeSegment(e),e.updateCoordinate(-1*h),this.segmentTree.addSegment(e);var p=this.segmentTree.findOverlappingSegments(e);if(0!==p.length){var u=Xd(i);return this.resolveOverlappingAtGivenDirection(e,p,u,n,!0)}}return this.requireReroute=!0,!1}}if(0!==(g=this.segmentTree.findOverlappingSegments(e)).length)return!(0!==this.modifiedSegments.size&&this.modifiedSegments.size>this.currentSegments.size+1)&&this.resolveOverlappingAtGivenDirection(e,g,i,n,s)}else if(!s&&e===this.rootShiftingSegment){var g;if(0!==(g=this.segmentTree.findOverlappingSegments(e)).length){u=Xd(i);return this.resolveOverlappingAtGivenDirection(e,g,u,n,!0)}}return e.coordinate!==r},t.prototype.calculateMaximumSegmentShift=function(t,e,i){var n=Math.abs(t.sortedEnd-t.sortedStart),s=Math.abs(e.sortedEnd-e.sortedStart),r=this.connectorMappings.get(t);if(r){if(!t.previous){var o=7;"None"!==r.sourceDecorator.shape&&(o=Math.max(r.sourceDecorator.width,r.sourceDecorator.height)),n-=o+5}if(!e.next){var a=7;"None"!==r.targetDecorator.shape&&(a=Math.max(r.targetDecorator.width,r.targetDecorator.height)),s-=a+5}}return t.direction===e.direction?i===e.direction?s:n:i===e.direction?Math.min(n,s):Number.MAX_VALUE},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"AvoidLineOverlapping"},t.ConnectorSpacing=5,t.maxReRouteLimit=5}(),function(){function t(){}t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"LineDistribution"},t.prototype.initLineDistribution=function(t,e){var i="Bottom";if("DifferentPoint"===e.layout.connectionPointOrigin||e.layout.enableRouting){var n="Top";"BottomToTop"===t.orientation?(i="Top",n="Bottom"):"RightToLeft"===t.orientation?(i="Left",n="Right"):"LeftToRight"===t.orientation&&(i="Right",n="Left");var s=e.nodes;if(s.length>0)for(var r=0;r<s.length;r++){var o=e.nameTable[s[parseInt(r.toString(),10)].id];this.addDynamicPortandDistrrbuteLine(t,o,i,n,e)}}},t.prototype.ObstacleSegment=function(t){return t.direction=Cf(t.startpt,t.endpt),t.distance=fn.findLength(t.startpt,t.endpt),t.orientation="Left"===t.direction||"Right"===t.direction?"horizontal":"vertical",t.id=t.id,"horizontal"===t.orientation?(t.coord=t.startpt.y,"Left"===t.direction?(t.start=t.endpt.x,t.end=t.startpt.x):(t.start=t.startpt.x,t.end=t.endpt.x)):(t.coord=t.startpt.x,"Top"===t.direction?(t.start=t.endpt.y,t.end=t.startpt.y):(t.start=t.startpt.y,t.end=t.endpt.y)),t},t.prototype.distributeLines=function(t,e){for(var i="LeftToRight"===t.orientation||"RightToLeft"===t.orientation,n="obstaclePointCollection",s=(i?t.horizontalSpacing:t.verticalSpacing)-8-10,r=[],o=[],a=e.connectors,l=0;l<a.length;l++){for(var h=a[parseInt(l.toString(),10)],c=[],d=0;d<h.segments.length;d++)for(var p=h.segments[parseInt(d.toString(),10)],u=0;u<p.points.length;u++){var g=p.points[parseInt(u.toString(),10)];0!==c.length&&fn.equals(g,c[c.length-1])||c.push(g)}for(var m=[],f=1;f<c.length;f++){var y=this.ObstacleSegment({startpt:c[f-1],endpt:c[parseInt(f.toString(),10)],id:h.id});m.push(y)}var v={wrapper:h,segments:m},b=[];if(i)for(d=0;d<v.segments.length;d++){"vertical"===(y=v.segments[parseInt(d.toString(),10)]).orientation&&b.push(y)}else for(var d=0;d<v.segments.length;d++){"horizontal"===(y=v.segments[parseInt(d.toString(),10)]).orientation&&b.push(y)}for(f=0;f<b.length;f++){var C=b[parseInt(f.toString(),10)];this.containsValue(r,C.coord)||r.push({key:C.coord,value:[]});var I=void 0;for(u=0;u<r.length;u++){d=r[parseInt(u.toString(),10)].key;if(Number(d)===C.coord){I=u;break}}r[parseInt(I.toString(),10)].value.push(C)}o.push(v)}this.sortConnectors(r,e);for(var M=[],S=0;S<r.length;S++){var x=r[parseInt(S.toString(),10)],w=x.value;w.sort();var D=void 0;D=[];I=0;var E=Number.MIN_VALUE;D.push([]);for(var T=0;T<w.length;T++){C=w[parseInt(T.toString(),10)];!(D[parseInt(I.toString(),10)].length>0)||E>=C.start?(D[parseInt(I.toString(),10)].push(C),E=Math.max(E,D[parseInt(I.toString(),10)][D[parseInt(I.toString(),10)].length-1].end)):(I++,D.push([]),D[parseInt(I.toString(),10)].push(C),E=D[parseInt(I.toString(),10)][D[parseInt(I.toString(),10)].length-1].end)}for(T=0;T<D.length;T++){var A=D[parseInt(T.toString(),10)],N=[];for(f=0;f<A.length;f++){(z=A[parseInt(f.toString(),10)]).start&&N.push(z)}var L=i?"Bottom":"Right",O=[];for(f=0;f<N.length;f++){(z=N[parseInt(f.toString(),10)]).direction===L&&O.push(z)}var k=[];for(f=0;f<N.length;f++){var z;(z=N[parseInt(f.toString(),10)]).direction!==L&&k.push(z)}var P=[];if(O.length>0){var j=O[0].start;for(f=0;f<k.length;)k[parseInt(f.toString(),10)].end>j?(P.push(k[parseInt(f.toString(),10)]),k.splice(f,1)):f++}var B=[];B=this.updateSegmentRow(P,B);var H=[];H=[],H=this.updateSegmentRow(k,H),O.reverse(),H=this.updateSegmentRow(O,H),B[B.length-1].length>0||B.splice(B.length-1,1),H[H.length-1].length>0||H.splice(H.length-1,1);var R=[];if(P.length>0&&(N[N.length-1].direction===P[P.length-1].direction||N[0].direction===P[0].direction)){R=H;for(var V=0;V<B.length;V++){var U=B[parseInt(V.toString(),10)];R[R.length]=U}}else{R=B;for(V=0;V<H.length;V++){U=H[parseInt(V.toString(),10)];R[R.length]=U}}if(R.length>1){var F=1;"BottomToTop"!==t.orientation&&"RightToLeft"!==t.orientation||(F=-1);var W=x.key-F*s/2,Y=s/R.length;for(l=0;l<R.length;l++){var _=W+l*Y*F;for(V=0;V<R[parseInt(l.toString(),10)].length;V++){(C=R[parseInt(l.toString(),10)][parseInt(V.toString(),10)]).coord=_,this.containsValue(M,C.coord)||M.push({key:C.coord,value:[]});var Q=void 0;for(u=0;u<M.length;u++){if(M[parseInt(u.toString(),10)].key===C.coord){Q=u;break}}M[parseInt(Q.toString(),10)].value.push(C)}}}}}for(S=0;S<o.length;S++){for(v=o[parseInt(S.toString(),10)],c=[],l=0;l<v.segments.length;l++)0===l?c.push(this.getObstacleStartPoint(v.segments[parseInt(l.toString(),10)])):i?"vertical"===v.segments[parseInt(l.toString(),10)].orientation&&(c[c.length-1]=this.getObstacleStartPoint(v.segments[parseInt(l.toString(),10)])):i||"horizontal"===v.segments[parseInt(l.toString(),10)].orientation&&(c[c.length-1]=this.getObstacleStartPoint(v.segments[parseInt(l.toString(),10)])),c.push(this.getObstacleEndPoint(v.segments[parseInt(l.toString(),10)]));v.wrapper[""+n]=[];for(f=0;f<c.length;f++){var Z=c[parseInt(f.toString(),10)];(0===f||f>0&&!fn.equals(Z,c[f-1]))&&v.wrapper[""+n].push(this.getPointvalue(Z.x,Z.y))}"Orthogonal"===v.wrapper.type&&this.resetConnectorPoints(v.wrapper,e)}},t.prototype.sortConnectors=function(t,e){for(var i=0;i<t.length;i++)for(var n=0;n<t[parseInt(i.toString(),10)].value.length;n++)t[parseInt(i.toString(),10)].value.length>1&&("LeftToRight"===e.layout.orientation||"RightToLeft"===e.layout.orientation?t[parseInt(i.toString(),10)].value.sort(function(t,i){var n=e.nameTable[""+t.id],s=e.nameTable[""+i.id];return n.targetPoint.y-s.targetPoint.y}):"TopToBottom"!==e.layout.orientation&&"BottomToTop"!==e.layout.orientation||t[parseInt(i.toString(),10)].value.sort(function(t,i){var n=e.nameTable[""+t.id],s=e.nameTable[""+i.id];return n.targetPoint.x-s.targetPoint.x}))},t.prototype.resetConnectorPoints=function(t,e){var i="obstaclePointCollection";if(t.segments[0].points&&t.segments[0].points.length>0&&t[""+i]){var n=t;n.sourcePoint=t[""+i][0],n.targetPoint=t[""+i][t[""+i].length-1];var s=void 0;s=[];for(var r=0;r<t[""+i].length-1;r++){var o=t[""+i][parseInt(r.toString(),10)],a=t[""+i][r+1],l=If(o,a),h=Cf(o,a);r===t[""+i].length-2&&("RightToLeft"===e.layout.orientation&&"Left"===h||"LeftToRight"===e.layout.orientation&&"Right"===h||"TopToBottom"===e.layout.orientation&&"Bottom"===h||"BottomToTop"===e.layout.orientation&&"Top"===h)&&(l/=2);var c=new Ng(t,"segments",{type:"Orthogonal"},!0);c.length=l,c.direction=h,s.push(c)}n.segments=s,n.type="Orthogonal",e.connectorPropertyChange(n,{},{type:"Orthogonal",segments:n.segments})}},t.prototype.getObstacleEndPoint=function(t){return"horizontal"===t.orientation?"Left"===t.direction?this.getPointvalue(t.start,t.coord):this.getPointvalue(t.end,t.coord):"Top"===t.direction?this.getPointvalue(t.coord,t.start):this.getPointvalue(t.coord,t.end)},t.prototype.getObstacleStartPoint=function(t){return"horizontal"===t.orientation?"Left"===t.direction?this.getPointvalue(t.end,t.coord):this.getPointvalue(t.start,t.coord):"Top"===t.direction?this.getPointvalue(t.coord,t.end):this.getPointvalue(t.coord,t.start)},t.prototype.updateSegmentRow=function(t,e){var i=0;e.length>0||(e[0]=[]);for(var n=0;n<t.length;n++)for(var s=t[parseInt(n.toString(),10)];i<e.length;){if(i===e.length-1&&(e[i+1]=[]),!(e[parseInt(i.toString(),10)].length>0)||e[parseInt(i.toString(),10)][e[parseInt(i.toString(),10)].length-1].end<s.start){e[parseInt(i.toString(),10)].push(s);break}i++}return e},t.prototype.portOffsetCalculation=function(t,e,i,n){"Top"===i&&(t.offset={x:(n+1)*(1/(e+1)),y:0}),"Bottom"===i&&(t.offset={x:(n+1)*(1/(e+1)),y:1}),"Left"===i&&(t.offset={x:0,y:(n+1)*(1/(e+1))}),"Right"===i&&(t.offset={x:1,y:(n+1)*(1/(e+1))})},t.prototype.addDynamicPortandDistrrbuteLine=function(t,e,i,n,s){if(e.ports&&e.ports.length>0){var r=e.ports;s.removePorts(e,r)}e.ports;var o=e.outEdges,a=e.inEdges;this.initPort(o,s,e,i,!1),this.initPort(a,s,e,n,!0)},t.prototype.initPort=function(t,e,i,n,s){var r=t;t.length>1&&s&&(t=this.sortObjects(r,s,e));for(var o=0;o<=t.length-1;o++){var a=e.nameTable[t[parseInt(o.toString(),10)]];a.obstaclePointCollection=[];var l=Jm(i,s?a.targetPortID:a.sourcePortID),h=n;void 0===l&&((l=new Wc(i,"ports","",!0)).id=Hn()+"_LineDistribution",s?a.targetPortID=l.id:a.sourcePortID=l.id),this.portOffsetCalculation(l,t.length,h,o),i.ports.push(l);var c=i.initPortWrapper(i.ports[i.ports.length-1]);i.wrapper.children.push(c),i.wrapper.measure(new un(i.width,i.height),i.id),i.wrapper.arrange(i.wrapper.desiredSize),e.connectorPropertyChange(a,s?{targetPortID:""}:{sourcePortID:""},s?{targetPortID:l.id}:{sourcePortID:l.id})}},t.prototype.sortObjects=function(t,e,i){for(var n,s=0;s<t.length;s++)for(var r=s+1;r<t.length;r++){var o=i.nameTable[t[parseInt(s.toString(),10)]],a=i.nameTable[t[parseInt(r.toString(),10)]];if(e){var l=i.nameTable[o.sourceID],h=i.nameTable[a.sourceID];"LeftToRight"===i.layout.orientation||"RightToLeft"===i.layout.orientation?l.offsetY>h.offsetY&&(n=t[parseInt(s.toString(),10)],t[parseInt(s.toString(),10)]=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=n):l.offsetX>h.offsetX&&(n=t[parseInt(s.toString(),10)],t[parseInt(s.toString(),10)]=t[parseInt(r.toString(),10)],t[parseInt(r.toString(),10)]=n)}}return t},t.prototype.resetConnectorSegments=function(t){for(var e=t.segments,i=e.length;i>0;i--)e.splice(i-1,1)},t.prototype.resetRoutingSegments=function(t,e,i){if(t.levelSkip){for(var n=void 0,s=void 0,r=e.layout.ranks.reverse(),o=0;o<r.length;o++)for(var a=0;a<r[parseInt(o.toString(),10)].length;a++)t.sourceID===r[parseInt(o.toString(),10)][parseInt(a.toString(),10)].id&&(n=o),t.targetID===r[parseInt(o.toString(),10)][parseInt(a.toString(),10)].id&&(s=o);var l=[];if(n<s)for(o=0;o<r.length;o++)o>=n&&o<=s&&l.push(r[parseInt(o.toString(),10)]);else for(o=0;o<r.length;o++)o<=n&&o>=s&&l.push(r[parseInt(o.toString(),10)]);var h=[];for(o=0;o<l.length;o++)for(a=0;a<l[parseInt(o.toString(),10)].length;a++)if(void 0===l[parseInt(o.toString(),10)][parseInt(a.toString(),10)].edges){var c=e.nameTable[l[parseInt(o.toString(),10)][parseInt(a.toString(),10)].id];h.push(c)}e.routingConnectors||(e.routingConnectors=[]);var d=this.getConnectorBounds(t);t:for(var p=0;p<h.length;p++){var u=h[parseInt(p.toString(),10)].wrapper.bounds;if(d.intersects(u))for(o=0;o<t.segments.length;o++){var g=t.segments[parseInt(o.toString(),10)].points;for(a=0;a<g.length;a++){var m=g[parseInt(a.toString(),10)],f=g[a+1];if(f){var y=this.pointsAlongLine(m,f);if(this.pointInsideBounds(y,u)){e.routingConnectors.push(t);break t}}}}}}},t.prototype.getConnectorBounds=function(t){for(var e=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,s=Number.MIN_VALUE,r=0;r<t.segments.length;r++)for(var o=t.segments[r].points,a=0;a<o.length;a++){var l=o[a];e=Math.min(e,l.x),i=Math.min(i,l.y),n=Math.max(n,l.x),s=Math.max(s,l.y)}return new Tn(e,i,n-e,s-i)},t.prototype.pointsAlongLine=function(t,e){for(var i=e.x-t.x,n=e.y-t.y,s=Math.sqrt(i*i+n*n),r=i/s,o=n/s,a=[],l=0;l<=s;l+=2)a.push({x:t.x+r*l,y:t.y+o*l});return a},t.prototype.pointInsideBounds=function(t,e){for(var i=0,n=t;i<n.length;i++){var s=n[i];if(e.right>s.x&&e.left<s.x&&e.top<s.y&&e.bottom>s.y)return!0}return!1},t.prototype.getPointvalue=function(t,e){return{x:Number(t)||0,y:Number(e)||0}},t.prototype.containsValue=function(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)]===e)return!0;return!1}}(),function(){function t(){this.isAnimation=!1}return t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"OrganizationalChart"},t.prototype.updateLayout=function(t,e,i,n,s,r){var o={type:i.type,connectionPointOrigin:i.connectionPointOrigin,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,getLayoutInfo:is(i.getLayoutInfo),layoutInfo:i.layoutInfo,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};return this.doLayout(o,t,n,s,r),o},t.prototype.doLayout=function(t,e,i,n,s){var r,o,a=[];for(t.nameTable[t.root]&&t.firstLevelNodes.push(t.nameTable[t.root]),o=0;o<e.length;o++)if(!((r=e[parseInt(o.toString(),10)]).excludeFromLayout||((t.graphNodes[r.id]=this.setUpLayoutInfo(t,r)).tree.hasSubTree=!1,t.nameTable[t.root]||r.inEdges&&r.inEdges.length))){r.parentId||r.processId||a.push(r),r.data&&String(r.data[""+n])===t.root&&t.firstLevelNodes.push(r)}for(0===t.firstLevelNodes.length&&(t.firstLevelNodes=a),o=0;o<t.firstLevelNodes.length;o++)r=t.firstLevelNodes[parseInt(o.toString(),10)],this.updateEdges(t,r,1,s,e);if(t.firstLevelNodes.length>0){t.rootNode=t.firstLevelNodes[0];var l=0,h=0,c=void 0,d=void 0,p=void 0,u=void 0,g=void 0;for(o=0;o<t.firstLevelNodes.length;o++){g=this.updateTree(t,l,h,t.firstLevelNodes[parseInt(o.toString(),10)],0,t.firstLevelNodes[o-1]);var m=t.graphNodes[t.firstLevelNodes[parseInt(o.toString(),10)].id];g.y=Math.min(g.y,m.y),g.x=Math.min(g.x,m.x),-1!==t.orientation.indexOf("Left")?h=g.right+t.horizontalSpacing:l=g.right+t.horizontalSpacing,0===o?(c=g.x,u=g.y,p=g.right,d=g.bottom):(c=Math.min(c,g.x),u=Math.min(u,g.y),p=Math.max(p,g.right),d=Math.max(d,g.bottom)),t.levels=[],t.maxLevel=void 0}for(this.updateAnchor(t,{x:c,y:u,right:p,bottom:d},i),o=0;o<t.firstLevelNodes.length;o++)this.updateNodes(t,t.firstLevelNodes[parseInt(o.toString(),10)],0);for(o=0;o<t.firstLevelNodes.length;o++)this.updateConnectors(t,t.firstLevelNodes[parseInt(o.toString(),10)],1)}},t.prototype.getBounds=function(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new Tn(e,i,t.actualSize.width,t.actualSize.height)},t.prototype.updateTree=function(t,e,i,n,s,r,o){var a,l,h={},c=this.getDimensions(t,n,e,i,s);h=t.graphNodes[n.id],t.maxLevel=Math.max(t.maxLevel,s),a=s;var d=this.hasChild(t,n);if(d||h.tree.assistants.length){var p=void 0,u=void 0,g=void 0,m=void 0,f=void 0,y=void 0;y=c.y+c.height+t.verticalSpacing,h.tree.assistants.length&&(a=(l=this.setDepthSpaceForAssitants(t,n,y,c.height,s,t.verticalSpacing)).level,y=l.bottom),h.tree.assistants.length||"Horizontal"===h.tree.orientation||(y=c.y+c.height+t.verticalSpacing/2),h.tree.children.length&&(p="Horizontal"!==h.tree.orientation||"Balanced"===h.tree.type&&1!==h.tree.children.length?"Balanced"===h.tree.type?this.updateHorizontalTreeWithMultipleRows(t,n,r,c.x,y,a):this.updateVerticalTree(t,n,c.x,y,a,o):this.updateHorizontalTree(t,n,r,c.x,y,a)),h.y&&h.y>c.y||(h.y=c.y),void 0!==h.mid&&(e=h.mid),h.tree.assistants.length&&(f=void 0!==e?e:c.x,m=this.setBreadthSpaceForAssistants(t,n,c,f,y,s),d||(e=((u=p=m).x+u.right)/2-c.width/2,p=u),g=m?m.canMoveBy:void 0),h.x=e,h.translate||(h.treeWidth=p.right-p.x);var v={layout:t,shape:n,shapeBounds:{x:e,y:c.y,right:e+c.width,bottom:c.y+c.height},treeBounds:p,dim:c,level:s};return this.translateSubTree(v,g,void 0!==r,o),h.firstChild&&"string"!=typeof h.firstChild&&(h.firstChild.x+=h.subTreeTranslation),n.treeBounds=p,p}return n.treeBounds=this.updateLeafNode(t,n,r,c,s,o),n.treeBounds},t.prototype.updateLeafNode=function(t,e,i,n,s,r){var o=t.graphNodes[e.id];o.x=n.x,o.y&&o.y>n.y||(o.y=n.y,o.maxLevel=Math.max(s,o.maxLevel||0));var a={x:n.x,y:n.y,right:n.x+n.width,bottom:n.y+n.height};o.maxLevel=Math.max(o.maxLevel||0,s);var l={layout:t,shape:e,shapeBounds:a,treeBounds:a,dim:n,level:s};return this.translateSubTree(l,void 0,void 0!==i,r),{x:o.x,y:o.y,right:o.x+n.width,bottom:o.y+n.height}},t.prototype.setUpLayoutInfo=function(t,e){var i={subTreeTranslation:0};return"OrganizationalChart"===t.type?i.tree={orientation:"Vertical",type:"Alternate",offset:20,enableRouting:!0}:i.tree={orientation:"Horizontal",type:"Center",enableRouting:!0},i.tree.children=[],i.tree.assistants=[],i.tree.level=0,i.translate=!0,i},t.prototype.translateSubTree=function(t,e,i,n){var s=t.layout,r=t.shape,o=t.shapeBounds,a=t.treeBounds,l=t.level,h=t.dim,c=s.graphNodes[r.id],d=s.nameTable[c.firstChild?c.firstChild.child:c.tree.children[0]],p=d?s.graphNodes[d.id]:null,u=this.hasChild(s,r),g=this.findIntersectingLevels(s,o,l,c.actualLevel),m=this.findIntersectingLevels(s,a,l,c.actualLevel),f=[];g.length&&c.translate?(c.intersect=g,this.spaceLeftFromPrevSubTree(s,r,o),c.canMoveBy=c.diff,void 0!==e&&(c.canMoveBy=Math.min(e,c.canMoveBy)),d&&void 0!==p.canMoveBy&&(p.canMoveBy>=c.canMoveBy&&(c.translated=!0),c.canMoveBy=Math.min(c.canMoveBy,p.canMoveBy)),i&&(c.x-=c.canMoveBy,c.subTreeTranslation-=c.canMoveBy,u&&(this.shiftSubordinates(s,m,c.canMoveBy),a.x=Math.min(a.x,c.x),a.right=Math.max(a.right,c.x+h.width),a.bottom=Math.max(a.bottom,c.y+h.height),a.x-=c.canMoveBy,a.right-=c.canMoveBy),d&&p.canMoveBy>c.canMoveBy?c.canMoveBy=p.canMoveBy-c.canMoveBy:d&&void 0!==c.canMoveBy&&(c.canMoveBy=0))):(u&&(a.x=Math.min(a.x,o.x),a.right=Math.max(a.right,o.x+h.width),a.bottom=Math.max(a.bottom,c.y+h.height)),c.translate||(c.canMoveBy=0,c.subTreeTranslation=0)),n||(o={x:c.x,y:h.y,right:c.x+h.width,bottom:h.y+h.height},f.push({rBounds:o}),this.updateRearBounds(s,r,f,l))},t.prototype.updateRearBounds=function(t,e,i,n,s){var r,o,a,l,h=!0,c={};e&&(s=(c=t.graphNodes[e.id]).intersect,h=!c.tree.children.length&&!c.tree.assistants.length);var d=i[0].rBounds,p=i[i.length-1].rBounds;if(s&&s.length){for(l=(r=t.levels[s[0]].rBounds).bottom,r.y<d.y&&(r.bottom=d.y,i.splice(0,0,{rBounds:r})),l>p.bottom?i.push({rBounds:{x:r.x,right:r.right,y:d.bottom,bottom:l}}):(r=t.levels[s[s.length-1]].rBounds,h&&r.bottom>p.bottom&&(r.y=p.bottom,i.push({rBounds:r}))),o=s[0],a=i.length-1;a>=0;a--)t.levels.splice(o,0,i[parseInt(a.toString(),10)]);o+=i.length,t.levels.splice(o,s.length)}else for(o=this.findLevel(t,i[i.length-1].rBounds,n),a=i.length-1;a>=0;a--)t.levels.splice(o,0,i[parseInt(a.toString(),10)])},t.prototype.shiftSubordinates=function(t,e,i){var n;if(0!==i)for(n=0;n<e.length;n++)t.levels[e[parseInt(n.toString(),10)]].rBounds&&(t.levels[e[parseInt(n.toString(),10)]].rBounds.x-=i,t.levels[e[parseInt(n.toString(),10)]].rBounds.right-=i)},t.prototype.setDepthSpaceForAssitants=function(t,e,i,n,s,r){var o,a,l,h,c=t.graphNodes[e.id],d={};for(h=i,a=0;a<c.tree.assistants.length;a++)(d=t.graphNodes[c.tree.assistants[parseInt(a.toString(),10)]])&&(d.tree.children=d.tree.assistants=[],d.y=i,o=(l=t.nameTable[c.tree.assistants[parseInt(a.toString(),10)]]).actualSize.height,-1!==t.orientation.indexOf("Left")&&(o=l.actualSize.width),h=i+o+r/2,t.maxLevel=s+1,a%2==1&&a!==c.tree.assistants.length-1&&(i=h,s++));return{level:t.maxLevel,bottom:i+o+r}},t.prototype.setBreadthSpaceForAssistants=function(t,e,i,n,s,r){var o,a,l,h,c,d,p,u={},g=t.graphNodes[e.id],m=r,f={x:0,y:0,right:0,bottom:0};for(h=0;h<g.tree.assistants.length;h++)(u=t.graphNodes[g.tree.assistants[parseInt(h.toString(),10)]])&&(o=(l=t.nameTable[g.tree.assistants[parseInt(h.toString(),10)]]).actualSize.width,-1!==t.orientation.indexOf("Left")&&(o=l.actualSize.height),c=h%2==0?n+i.width/2-20-o:n+i.width/2+20,a=this.updateTree(t,c,u.y,t.nameTable[g.tree.assistants[parseInt(h.toString(),10)]],m+1),this.hasChild(t,e)||(0===h?f=a:this.uniteRects(f,a)),h%2==0&&u.prevBounds&&(d=void 0===d?u.canMoveBy:Math.min(d,u.canMoveBy)),h%2!=1&&h!==g.tree.assistants.length-1||(p=this.findIntersectingLevels(t,a,m+1),this.updateRearBounds(t,null,[{rBounds:a}],m+1,p),m++));return f&&(f.canMoveBy=d),f},t.prototype.getDimensions=function(t,e,i,n,s){var r,o;if(r=e.actualSize.width,o=e.actualSize.height,t.orientation=t.orientation||"TopToBottom",-1!==t.orientation.indexOf("Left")){if(!s){var a=i;i=n,n=a}o=e.actualSize.width,r=e.actualSize.height}return{x:i,y:n,width:r,height:o}},t.prototype.hasChild=function(t,e){var i=t.graphNodes[e.id];return i?i.tree.children&&i.tree.children.length:0},t.prototype.updateHorizontalTree=function(t,e,i,n,s,r){var o=this.getDimensions(t,e,n,s,r),a={},l=(a=t.graphNodes[e.id]).tree.type,h=r,c=0;c=n;var d,p,u,g,m,f,y,v,b,C,I,M,S,x,w,D=s;t.levels.slice(0,t.levels.length);if(this.hasChild(t,e)){var E=-1!==t.orientation.indexOf("Left");for(S=0;S<a.tree.children.length;S++){d=(u=t.nameTable[a.tree.children[parseInt(S.toString(),10)]]).actualSize.width,p=u.actualSize.height,m=E?p:d,f=E?d:p;t.levels[h+1]&&t.levels[h+1].rBounds;if(g=this.updateTree(t,c,D,u,h+1,t.nameTable[a.tree.children[S-1]]),x=t.graphNodes[u.id],a.maxLevel=Math.max(a.maxLevel||0,x.maxLevel||0),v={x:x.x,y:x.y,right:x.x+m,bottom:x.y+f},0===S&&(y={x:Math.min(x.x,g.x),y:Math.min(x.y,g.y),right:g.right,bottom:g.bottom},w=x),M?(M.x=v.x,M.y=v.y,v.right>M.right&&(M.right=v.right),M.bottom=v.bottom):M=v,0===S&&(a.firstChild={x:x.x,canMoveBy:x.canMoveBy,child:u.id}),this.hasChild(t,u))if(!a.firstChild||a.firstChild.x>=x.firstChild.x){x.firstChild&&a.firstChild.canMoveBy<x.canMoveBy&&(I=a.firstChild.canMoveBy,x.canMoveBy=I,t.graphNodes[a.firstChild.child].canMoveBy=I,a.firstChild.canMoveBy=I);var T=void 0!==I?I:x.canMoveBy;a.firstChild={x:x.firstChild.x,canMoveBy:T,child:u.id}}else x.firstChild&&x.translated&&a.firstChild.canMoveBy>x.canMoveBy&&(a.firstChild.canMoveBy=t.graphNodes[a.firstChild.child].canMoveBy=x.canMoveBy);b=b?Math.max(x.maxLevel,b):x.maxLevel,this.uniteRects(y,g),c=0!==S&&!this.hasChild(t,u)&&x.subTreeTranslation<0?g.right-x.subTreeTranslation+t.horizontalSpacing:g.right+t.horizontalSpacing}isNaN(C)||(w.canMoveBy=C),a.mid=(w.x+M.right)/2-o.width/2,"Left"===l?a.mid=v.right-o.width:"Right"===l&&(a.mid=n)}return y},t.prototype.updateHorizontalTreeWithMultipleRows=function(t,e,i,n,s,r){var o,a,l,h,c,d,p,u,g,m,f,y=this.getDimensions(t,e,n,s,r),v=t.graphNodes[e.id],b=(v.tree.type,r),C=n,I=s,M=(t.levels.slice(0,t.levels.length),0);if(this.hasChild(t,e)){var S=-1!==t.orientation.indexOf("Left"),x=void 0,w=this.splitChildrenInRows(t,e),D=5===v.tree.children.length&&3===w[0].length,E=[],T=[];D?T=w:this.splitRows(w,E,T);var A={leftTree:E,rows:w,rightTree:T,dimensions:y},N=this.updateLeftTree(t,A,e,n,I,b);c=A.bounds;var L=void 0,O=(N||0)+(void 0!==N?t.horizontalSpacing/2:0);void 0!==N&&(v.mid=O-y.width/2,L=N+t.horizontalSpacing),I=s;var k=void 0;for(k=[],g=0;g<T.length;g++)for(C=w[g].length%2==1&&g===T.length-1||D?n:L||n,0!==g&&(I=k[g-1].bottom+t.verticalSpacing),u=0;u<T[g].length;u++)d=(o=t.nameTable[T[g][u]]).actualSize.width,p=o.actualSize.height,h=S?p:d,(a=t.graphNodes[o.id]).actualLevel=b+1+g,0===u&&E[g]&&E[g].length&&(a.translate=!1),D&&1===g&&(0===u&&m+h+t.horizontalSpacing<=f&&(x=!0,C=m-h/2),x&&1===u&&(C=f-h/2)),l=this.updateTree(t,C,I,o,b+1,t.nameTable[T[g][u-1]]),D&&u<=2&&0===g&&1===u&&(m=l.x-t.horizontalSpacing/2,f=l.x+h+t.horizontalSpacing/2),0===u?k[g]={x:l.x,y:l.y,right:l.right,bottom:l.bottom}:this.uniteRects(k[g],l),c||(c={x:k[g].x,y:k[g].y,right:k[g].right,bottom:k[g].bottom}),this.uniteRects(c,k[g]),C=l.right+t.horizontalSpacing,(!v.firstChild||(g===T.length-1&&w[g].length%2==1||D)&&0===u&&void 0!==a.canMoveBy&&M>a.canMoveBy)&&(M=Math.min(M,a.canMoveBy||0),v.firstChild={x:a.x,child:o.id,canMoveBy:a.canMoveBy}),A.leftCenter=m,A.rightCenter=f,A.align=x,A.level=b,A.rightBounds=k,this.alignRowsToCenter(t,g,e,A,L)}return c},t.prototype.updateLeftTree=function(t,e,i,n,s,r){for(var o,a,l,h,c,d=e.leftTree,p=t.graphNodes[i.id],u=[],g=-1!==t.orientation.indexOf("Left"),m=0;m<d.length&&d[parseInt(m.toString(),10)].length;m++){o=n,u[m-1]&&(s=u[m-1].bottom+t.verticalSpacing);for(var f=0;f<d[parseInt(m.toString(),10)].length;f++){var y=t.nameTable[d[parseInt(m.toString(),10)][parseInt(f.toString(),10)]],v=(g?y.actualSize.height:y.actualSize.width,g?y.actualSize.width:y.actualSize.height,t.graphNodes[y.id]);v.actualLevel=r+1+m,h=this.updateTree(t,o,s,y,r+1,t.nameTable[d[parseInt(m.toString(),10)][f-1]]),0===f?u[parseInt(m.toString(),10)]={x:h.x,y:h.y,right:h.right,bottom:h.bottom}:this.uniteRects(u[parseInt(m.toString(),10)],h),0===m&&0===f?(a=v.canMoveBy,p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}):0===f&&void 0!==v.canMoveBy&&a>v.canMoveBy&&(a=Math.min(a,v.canMoveBy||0),p.firstChild={x:v.x,child:y.id,canMoveBy:v.canMoveBy}),o=h.right+t.horizontalSpacing}l=0===m?u[parseInt(m.toString(),10)].right:Math.max(l,u[parseInt(m.toString(),10)].right)}for(m=0;m<d.length&&d[parseInt(m.toString(),10)].length;m++){if(l!==u[parseInt(m.toString(),10)].right){var b=l-u[parseInt(m.toString(),10)].right;for(f=0;f<d[parseInt(m.toString(),10)].length;f++){t.nameTable[d[parseInt(m.toString(),10)][parseInt(f.toString(),10)]];t.graphNodes[d[parseInt(m.toString(),10)][parseInt(f.toString(),10)]].x+=b}}0===m?c={x:u[0].x,y:u[0].y,right:u[0].right,bottom:u[0].bottom}:this.uniteRects(c,u[parseInt(m.toString(),10)])}return e.bounds=c,l},t.prototype.alignRowsToCenter=function(t,e,i,n,s){var r,o,a,l=t.graphNodes[i.id],h=n.rows,c=n.rightTree,d=n.leftCenter,p=n.rightCenter,u=n.align,g=n.rightBounds,m=n.dimensions,f=n.level,y=5===l.tree.children.length&&3===h[0].length;if(y&&1===e&&(r=g[0].right-g[0].x>=g[1].right-g[1].x?0:1),e===h.length-1&&(h[parseInt(e.toString(),10)].length%2==1||y&&1===e)){o=c[parseInt(e.toString(),10)][Math.floor(c[parseInt(e.toString(),10)].length/2)];var v=t.nameTable[""+o],b=t.graphNodes[""+o].x,C=t.graphNodes[""+o].y,I=this.getDimensions(t,v,b,C,f+1);a=void 0,!u&&y?(1===r&&(e=0),a=(g[parseInt(r.toString(),10)].x+g[parseInt(r.toString(),10)].right)/2-(g[parseInt(e.toString(),10)].x+g[parseInt(e.toString(),10)].right)/2,0===e&&(l.mid+=a)):y||void 0===s||(a=s-t.horizontalSpacing/2-(b+I.width/2)),void 0!==a&&this.updateRearBoundsOfTree(t,c[parseInt(e.toString(),10)],a,m),y&&(l.mid=(p+d)/2+(0===e?a:0)-m.width/2),void 0===l.mid&&t.graphNodes[""+o]&&(l.mid=b),u=!1,e++}},t.prototype.updateRearBoundsOfTree=function(t,e,i,n){for(var s=0;s<e.length;s++){var r=t.graphNodes[e[parseInt(s.toString(),10)]];if(r.x+=i,r.canMoveBy+=i,s===e.length-1){var o={x:r.x,y:r.y,right:r.x+n.width,bottom:r.y+n.height},a=this.findIntersectingLevels(t,o,r.actualLevel);this.updateRearBounds(t,null,[{rBounds:o}],r.actualLevel,a)}}},t.prototype.splitRows=function(t,e,i){for(var n=0;n<t.length;n++){e[parseInt(n.toString(),10)]=[],i[parseInt(n.toString(),10)]=[];var s=void 0;if(s=t[parseInt(n.toString(),10)].length,t[parseInt(n.toString(),10)].length%2!=1){s=Math.ceil(t[parseInt(n.toString(),10)].length/2);for(var r=0;r<s;r++)e[parseInt(n.toString(),10)].push(t[parseInt(n.toString(),10)][parseInt(r.toString(),10)])}for(var o=e[parseInt(n.toString(),10)].length;o<t[parseInt(n.toString(),10)].length;o++)i[parseInt(n.toString(),10)].push(t[parseInt(n.toString(),10)][parseInt(o.toString(),10)])}},t.prototype.updateVerticalTree=function(t,e,i,n,s,r){var o,a,l,h,c,d,p,u,g,m,f,y,v,b,C=t.graphNodes[e.id],I=t.nameTable[C.tree.children[0]],M=-1!==t.orientation.indexOf("Left"),S="Left"===C.tree.type?-1:0,x=i,w=n,D=s,E=[],T=[];for(f=0;f<C.tree.children.length;f++){if("Alternate"===C.tree.type&&(v=f%2==0&&C.tree.children.length>2?"Left":"Right",S=f%2==0&&C.tree.children.length>2?-1:0),x=i+this.findOffset(t,e,C,v),o=t.nameTable[C.tree.children[parseInt(f.toString(),10)]],h=M?o.actualSize.height:o.actualSize.width,c=M?o.actualSize.width:o.actualSize.height,l=this.updateTree(t,x+S*h,w,o,s+1,void 0,!0),u={x:(a=t.graphNodes[o.id]).x,y:a.y,right:a.x+h,bottom:a.y+c},0===f?(this.uniteRects(l,u),p=l):this.uniteRects(p,l),!a.prevBounds||"Alternate"===C.tree.type&&f%2==1&&C.tree.children.length>2||(b=void 0!==b?Math.min(a.canMoveBy,b):a.canMoveBy),C.maxLevel=Math.max(C.maxLevel||0,a.maxLevel||0),"Alternate"===C.tree.type&&C.tree.children.length>2&&f%2==0?(0!==f&&(w=d.bottom+t.verticalSpacing/2),T.push({rBounds:u}),a.levelBounds&&(T=T.concat(a.levelBounds))):(w="Alternate"===C.tree.type&&C.tree.children.length>2?Math.max(l.bottom,d.bottom)+t.verticalSpacing/2:l.bottom+t.verticalSpacing/2,s=C.maxLevel,E.push({rBounds:u}),m?this.uniteRects(m,u):m={x:a.x,y:a.y,right:a.x+h,bottom:a.y+c},a.levelBounds&&(E=E.concat(a.levelBounds))),0===f&&(C.firstChild={x:a.x,canMoveBy:a.canMoveBy,child:o.id}),this.hasChild(t,o))if(!C.firstChild||C.firstChild.x>=a.firstChild.x){if(a.firstChild&&C.firstChild.canMoveBy<a.canMoveBy){var A=C.firstChild.canMoveBy;a.canMoveBy=A,t.graphNodes[C.firstChild.child].canMoveBy=A,C.firstChild.canMoveBy=A}C.firstChild={x:a.firstChild.x,canMoveBy:void 0!==b?b:a.canMoveBy,child:o.id}}else a.firstChild&&a.translated&&C.firstChild.canMoveBy>a.canMoveBy&&(C.firstChild.canMoveBy=t.graphNodes[C.firstChild.child].canMoveBy=a.canMoveBy);d=u}return r?C.levelBounds=E:("Alternate"===C.tree.type&&C.tree.children.length>2&&(g={x:T[0].rBounds.x,y:T[0].rBounds.y,right:T[T.length-1].rBounds.right,bottom:T[T.length-1].rBounds.bottom},y=this.findIntersectingLevels(t,g,D+1),this.updateRearBounds(t,null,T,D+1,y)),y=this.findIntersectingLevels(t,m||p,D+1),this.updateRearBounds(t,null,m?E:[{rBounds:p}],D+1,y)),isNaN(b)||(t.graphNodes[I.id].canMoveBy=b),C.childBounds=p,C.mid=i,p},t.prototype.splitChildrenInRows=function(t,e){var i,n=t.graphNodes[e.id];i=4;var s,r=[];s=n.tree.children.length;var o=this.extend(n.tree.children);if(n.tree.rows){n.tree.children.length;var a=n.tree.rows;i=a%2==0?a:a-1}else 3===n.tree.children.length||4===n.tree.children.length?i=2:5===n.tree.children.length&&(i=3);for(;s>0;)r[r.length]=o.splice(0,i),(s-=i)<i&&(s%2==0?i=s:1!==s&&(i=s-1),s<i&&(i=s));return r},t.prototype.extend=function(t){var e,i=[];for(e=0;e<t.length;e++)i[parseInt(e.toString(),10)]=t[parseInt(e.toString(),10)];return i},t.prototype.findOffset=function(t,e,i,n){var s=0,r=-1!==t.orientation.indexOf("Left")?e.actualSize.height:e.actualSize.width,o=n||i.tree.type;switch(s=i.tree.offset||20,"Alternate"===i.tree.type&&s>=t.horizontalSpacing&&(s=t.horizontalSpacing/2),o){case"Left":s=r/2-s;break;case"Right":s+=r/2}return s},t.prototype.uniteRects=function(t,e){t.x=Math.min(t.x,e.x),t.right=Math.max(t.right,e.right),t.bottom=Math.max(t.bottom,e.bottom)},t.prototype.spaceLeftFromPrevSubTree=function(t,e,i){for(var n,s,r=t.graphNodes[e.id],o=t.horizontalSpacing,a=0;a<r.intersect.length;a++)s=t.levels[r.intersect[parseInt(a.toString(),10)]].rBounds,n=i.x-(s.right+o),(void 0===r.diff||n<r.diff)&&(r.diff=n,r.prevBounds=t.levels[r.intersect[parseInt(a.toString(),10)]].rBounds)},t.prototype.findIntersectingLevels=function(t,e,i,n){var s={x:e.x,y:e.y,right:e.right,bottom:e.bottom};s.y-=t.verticalSpacing/2,s.bottom+=t.verticalSpacing/2;var r,o,a=[];o=void 0!==n?n:i,r=t.levels[parseInt(o.toString(),10)]?t.levels[parseInt(o.toString(),10)].rBounds:null;do{if(r&&(s.y<r.y&&s.bottom>r.y||s.y<r.bottom&&r.bottom<s.bottom||s.y>=r.y&&s.bottom<=r.bottom||s.y<r.y&&s.bottom>r.bottom)){a.splice(0,0,o)}else if(r&&r.bottom<s.y)break;o--,r=t.levels[parseInt(o.toString(),10)]?t.levels[parseInt(o.toString(),10)].rBounds:null}while(o>=0);o=(void 0!==n?n:i)+1,r=t.levels[parseInt(o.toString(),10)]?t.levels[parseInt(o.toString(),10)].rBounds:null;do{if(r&&(s.y<r.y&&s.bottom>r.y||s.y<r.bottom&&r.bottom<s.bottom||s.y>=r.y&&s.bottom<=r.bottom||s.y<r.y&&s.bottom>r.bottom))a.push(o);else if(r&&r.y>s.bottom)break;o++,r=t.levels[parseInt(o.toString(),10)]?t.levels[parseInt(o.toString(),10)].rBounds:null}while(o<=t.levels.length);return a},t.prototype.findLevel=function(t,e,i){var n,s,r=e;for(n=0,s=t.levels[parseInt(n.toString(),10)]?t.levels[parseInt(n.toString(),10)].rBounds:null;n<t.levels.length;){if(s&&r.bottom<s.y)return n;n++,s=t.levels[parseInt(n.toString(),10)]?t.levels[parseInt(n.toString(),10)].rBounds:null}return n},t.prototype.getParentNode=function(t,e){return t.nameTable[t.nameTable[e.inEdges[0]].sourceID]},t.prototype.updateEdges=function(t,e,i,n,s){var r,o=t.graphNodes[e.id];if(e.outEdges&&e.outEdges.length&&(e.isExpanded||n===Is.Render))for(r=0;r<e.outEdges.length;r++){var a=t.nameTable[t.nameTable[e.outEdges[parseInt(r.toString(),10)]].targetID];a&&!a.excludeFromLayout&&(-1===o.tree.children.indexOf(a.id)&&o.tree.children.push(a.id),a.outEdges&&a.outEdges.length&&a.isExpanded&&(o.tree.hasSubTree=!0),this.updateEdges(t,a,i+1,n,s))}o.tree.level=i,o.tree.hasSubTree&&(o.tree.orientation="Horizontal",o.tree.type="Center"),(t.getLayoutInfo||t.layoutInfo)&&"OrganizationalChart"===t.type&&(t.getLayoutInfo?t.getLayoutInfo(e,o.tree):function(t,e,i,n){var s,r="Role";if(e)for(var o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];if(s=e[""+l],"getAssistantDetails"===l){if(n.data[""+r]===e[""+l].root)for(var h=e[""+l].assistants,c=0;c<h.length;c++)for(var d=0;d<i.length;d++)i[parseInt(d.toString(),10)].data[""+r]===h[parseInt(c.toString(),10)]&&(t.assistants.push(i[parseInt(d.toString(),10)].id),t.children.splice(0,1))}else s&&(t[""+l]=e[""+l])}!t.hasSubTree&&e.canEnableSubTree&&(t.orientation=n.layoutInfo.orientation,t.type=n.layoutInfo.type,n.layoutInfo.offset!==t.offset&&void 0!==n.layoutInfo.offset&&(t.offset=n.layoutInfo.offset)),n.layoutInfo.hasSubTree=t.hasSubTree}(o.tree,t.layoutInfo,s,e),"Balanced"===o.tree.type&&o.tree.hasSubTree&&(o.tree.type="Center",o.tree.orientation="Horizontal")),t.level&&"Alternate"!==o.tree.type&&i>=t.level&&(o.tree.hasSubTree=!1)},t.prototype.updateAnchor=function(t,e,i){var n,s,r=0,o=0,a=0,l=0,h=new Tn(0,0,i.x,i.y),c=t.bounds?t.bounds:h,d=t.orientation;if(t.fixedNode){r=(s=t.nameTable[t.fixedNode]).actualSize.width,o=s.actualSize.height,t.anchorX=s.offsetX,t.anchorY=s.offsetY;var p=s.pivot;for(t.anchorX+="RightToLeft"===t.orientation?r*p.x:-r*p.x,t.anchorY+="BottomToTop"===t.orientation?o*p.y:-o*p.y,n=s,a=0;n.inEdges.length;)n=this.getParentNode(t,n),a+=t.graphNodes[n.id].subTreeTranslation||0;-1!==t.orientation.indexOf("Left")?(l=t.graphNodes[s.id].y,"LeftToRight"===d?t.anchorX-=l:t.anchorX+=l,t.anchorY-=t.graphNodes[s.id].x+a):(l=t.graphNodes[s.id].y,t.anchorX-=t.graphNodes[s.id].x+a,"TopToBottom"===d?t.anchorY-=l:t.anchorY+=l)}else if("TopToBottom"===d||"BottomToTop"===d){switch(t.horizontalAlignment){case"Left":t.anchorX=c.x-e.x+t.margin.left;break;case"Right":t.anchorX=c.x+c.width-t.margin.right-e.right;break;case"Auto":case"Center":t.anchorX=c.x+c.width/2-(e.x+e.right)/2}switch(t.verticalAlignment){case"Auto":case"Top":var u;u=c.y+t.margin.top,t.anchorY="TopToBottom"===d?u:e.bottom+u;break;case"Bottom":var g;g=c.y+c.height-t.margin.bottom,t.anchorY="TopToBottom"===d?g-e.bottom:g;break;case"Center":var m=void 0;m=c.y+c.height/2,t.anchorY="TopToBottom"===t.orientation?m-(e.y+e.bottom)/2:m+(e.y+e.bottom)/2}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var f;f=c.x+t.margin.left,t.anchorX="LeftToRight"===d?f:e.bottom+f;break;case"Right":var y;y=c.x+c.width-t.margin.right,t.anchorX="LeftToRight"===d?y-e.bottom:y;break;case"Center":m=void 0;m=c.width/2+c.x,t.anchorX="LeftToRight"===t.orientation?m-(e.y+e.bottom)/2:m+(e.y+e.bottom)/2}switch(t.verticalAlignment){case"Top":t.anchorY=c.y+t.margin.top-e.x;break;case"Auto":case"Center":t.anchorY=c.y+c.height/2-(e.right+e.x)/2;break;case"Bottom":t.anchorY=c.y+c.height-t.margin.bottom-e.right}}},t.prototype.updateConnectors=function(t,e,i){var n,s,r,o=t.graphNodes[e.id];if(e.outEdges.length)for(n=0;n<e.outEdges.length;n++)if((r=t.nameTable[e.outEdges[parseInt(n.toString(),10)]]).points=[],s=t.nameTable[r.targetID],r.visible){if(r.visited=!0,t.getConnectorSegments)t.getConnectorSegments(r);else o&&-1!==o.tree.children.indexOf(r.targetID)&&(r.segments=[],"Bezier"===r.type&&"SamePoint"===t.connectionPointOrigin&&r.segments.push(new Ag(r,"segments",{type:"Bezier"},!0)),"OrganizationalChart"===t.type&&"Orthogonal"===r.type&&this.updateSegments(t,r,e,s,n));s&&(s.isExpanded||this.hasChild(t,s))&&this.updateConnectors(t,s,i+1)}if(o&&o.tree.assistants.length)for(n=0;n<o.tree.assistants.length;n++)s=t.nameTable[o.tree.assistants[parseInt(n.toString(),10)]],r=t.nameTable[s.inEdges[0]],this.get3Points(t,e,s,r),(s.isExpanded||this.hasChild(t,s))&&this.updateConnectors(t,s,i+1)},t.prototype.updateSegments=function(t,e,i,n,s){var r=t.graphNodes[i.id];r.tree.assistants.length?this.updateSegmentsForHorizontalOrientation(t,i,n,e):"Horizontal"===r.tree.orientation&&"Balanced"===r.tree.type?this.updateSegmentsForBalancedTree(t,e,i,n,s):"Horizontal"===r.tree.orientation?this.updateSegmentsForHorizontalOrientation(t,i,n,e):r.tree.offset<5?this.get5Points(t,i,n,e):this.get3Points(t,i,n,e)},t.prototype.updateSegmentsForBalancedTree=function(t,e,i,n,s){var r,o=t.graphNodes[i.id];if(5===o.tree.children.length&&s>2){r=o.tree.children[1],isNaN(t.graphNodes[""+r].treeWidth)&&(t.graphNodes[""+r].treeWidth=t.nameTable[""+r].actualSize.width);var a=3!==s?1:-1;if(-1!==t.orientation.indexOf("Left"))t.nameTable[""+r].offsetY-t.graphNodes[""+r].treeWidth/2-t.verticalSpacing*a/2;else t.nameTable[""+r].offsetX,t.graphNodes[""+r].treeWidth,t.horizontalSpacing;this.getSegmentsForMultipleRows(t,i,n,e)}else o.tree.children.length>5?s<4||s<o.tree.rows?this.getSegmentsForMultipleRows(t,i,n,e):this.updateSegmentsForHorizontalOrientation(t,i,n,e):4===o.tree.children.length?s<2||s<o.tree.rows?this.getSegmentsForMultipleRows(t,i,n,e):this.updateSegmentsForHorizontalOrientation(t,i,n,e):this.getSegmentsForMultipleRows(t,i,n,e)},t.prototype.get3Points=function(t,e,i,n){var s=[],r=this.getBounds(e),o=this.getBounds(i);if(-1!==t.orientation.indexOf("Top")){var a=0===t.orientation.indexOf("Top")?r.bottomCenter:r.topCenter,l=e.offsetX>i.offsetX?o.middleRight:o.middleLeft;s.push(a,{x:r.bottomCenter.x,y:l.y},l)}else{a=0===t.orientation.indexOf("Left")?r.middleRight:r.middleLeft,l=e.offsetY>i.offsetY?o.bottomCenter:o.topCenter;s.push(a,{x:o.bottomCenter.x,y:r.middleRight.y},l)}this.getSegmentsFromPoints(s,n)},t.prototype.get5Points=function(t,e,i,n){var s,r,o,a,l=[],h=this.getBounds(e),c=this.getBounds(i);-1!==t.orientation.indexOf("Top")?(s=e.offsetY<i.offsetY?h.bottomCenter:h.topCenter,a=t.verticalSpacing/4*(e.offsetY<i.offsetY?1:-1),o=t.horizontalSpacing/2*(e.offsetX>i.offsetX?1:-1),r=e.offsetX>i.offsetX?c.middleRight:c.middleLeft,l.push(s,{x:s.x,y:s.y+a},{x:r.x+o,y:s.y+a},{x:r.x+o,y:r.y},r)):(s=e.offsetX>i.offsetX?h.middleLeft:h.middleRight,r=e.offsetY>i.offsetY?c.bottomCenter:c.topCenter,o=t.horizontalSpacing/4*(e.offsetX<i.offsetX?1:-1),a=t.verticalSpacing/2*(e.offsetY>i.offsetY?1:-1),l.push(s,{x:s.x+o,y:s.y},{x:s.x+o,y:s.y+a},{x:r.x,y:s.y+a},r)),this.getSegmentsFromPoints(l,n)},t.prototype.getSegmentsFromPoints=function(t,e){for(var i,n=[],s=0;s<t.length-2;s++)(i=new Ng(e,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(t[parseInt(s.toString(),10)],t[s+1]),i.length=fn.distancePoints(t[parseInt(s.toString(),10)],t[s+1]),n.push(i);e.segments=n},t.prototype.getSegmentsForMultipleRows=function(t,e,i,n){var s,r,o=[],a=this.getBounds(i),l=this.getBounds(e);switch(t.orientation){case"TopToBottom":s={x:l.bottomCenter.x,y:l.bottomCenter.y+t.verticalSpacing/4},(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(l.bottomCenter,s),r.length=fn.distancePoints(l.bottomCenter,s),o.push(r);break;case"BottomToTop":s={x:l.bottomCenter.x,y:l.topCenter.y-t.verticalSpacing/4},(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(l.topCenter,s),r.length=fn.distancePoints(l.topCenter,s),o.push(r);break;case"LeftToRight":if(s={x:l.middleRight.x+t.verticalSpacing/4,y:l.middleRight.y},(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(l.middleRight,s),r.length=fn.distancePoints(l.middleRight,s),o.push(r),a.center.y!==l.center.y){var h={x:l.middleRight.x+t.verticalSpacing/4,y:a.middleLeft.y};(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(s,h),r.length=fn.distancePoints(s,h),o.push(r)}break;case"RightToLeft":if(s={x:l.middleLeft.x-t.verticalSpacing/4,y:l.middleRight.y},(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(l.middleLeft,s),r.length=fn.distancePoints(l.middleLeft,s),o.push(r),a.center.y!==l.center.y){var c={x:l.middleLeft.x-t.verticalSpacing/4,y:a.middleLeft.y};(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(c,c),r.length=fn.distancePoints(c,c),o.push(r)}}n.segments=o},t.prototype.updateSegmentsForHorizontalOrientation=function(t,e,i,n){var s,r,o=[],a=this.getBounds(e),l=this.getBounds(i);switch(t.orientation){case"TopToBottom":s={x:a.bottomCenter.x,y:l.topCenter.y-t.verticalSpacing/2},(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(a.bottomCenter,s),r.length=fn.distancePoints(a.bottomCenter,s),o.push(r);break;case"BottomToTop":s={x:a.topCenter.x,y:l.bottomCenter.y+t.verticalSpacing/2},(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(a.topCenter,s),r.length=fn.distancePoints(a.topCenter,s),o.push(r);break;case"LeftToRight":if(s={x:l.middleLeft.x-t.verticalSpacing/2,y:a.middleRight.y},(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(a.middleRight,s),r.length=fn.distancePoints(a.middleRight,s),o.push(r),l.center.y!==a.center.y){var h={x:l.middleLeft.x-t.verticalSpacing/2,y:l.middleLeft.y};(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(s,h),r.length=fn.distancePoints(s,h),o.push(r)}break;case"RightToLeft":if(s={x:l.middleRight.x+t.verticalSpacing/2,y:a.middleRight.y},(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(a.middleLeft,s),r.length=fn.distancePoints(a.middleLeft,s),o.push(r),l.center.y!==a.center.y){var c={x:l.middleRight.x+t.verticalSpacing/2,y:l.middleLeft.y};(r=new Ng(n,"segments",{type:"Orthogonal"},!0)).direction=fn.direction(s,c),r.length=fn.distancePoints(s,c),o.push(r)}}return n.segments=o,[]},t.prototype.updateNodes=function(t,e,i,n,s,r){var o,a,l,h,c,d;if(e&&!e.excludeFromLayout){l=e.actualSize.width,h=e.actualSize.height,c=t.anchorX,d=t.anchorY,"LeftToRight"===t.orientation?(c+=t.graphNodes[e.id].y+l/2,d+=t.graphNodes[e.id].x+i+h/2):"RightToLeft"===t.orientation?(c-=t.graphNodes[e.id].y+l/2,d+=t.graphNodes[e.id].x+i+h/2):"TopToBottom"===t.orientation?(c+=t.graphNodes[e.id].x+i+l/2,d+=t.graphNodes[e.id].y+h/2):(c+=t.graphNodes[e.id].x+i+l/2,d-=t.graphNodes[e.id].y+h/2),t.graphNodes&&(c+=s=s||0,d+=r=r||0,this.isAnimation||(e.offsetX=c,e.offsetY=d));var p={id:e.id,differenceX:c-e.offsetX,differenceY:d-e.offsetY};t.objects.push(p);var u=[];if(this.hasChild(t,e))for(o=0;o<t.graphNodes[e.id].tree.children.length;o++)a=t.nameTable[t.graphNodes[e.id].tree.children[parseInt(o.toString(),10)]],this.updateNodes(t,a,i+(t.graphNodes[e.id].subTreeTranslation||0),n,s,r),u.push(a);if(t.graphNodes[e.id].tree.assistants.length)for(o=0;o<t.graphNodes[e.id].tree.assistants.length;o++)a=t.nameTable[t.graphNodes[e.id].tree.assistants[parseInt(o.toString(),10)]],this.updateNodes(t,a,i+(t.graphNodes[e.id].subTreeTranslation||0),null,s,r)}},t}()),uk=(function(){function t(){this.isAnimation=!1}t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"MindMapChart"},t.prototype.updateLayout=function(t,e,i,n,s,r){var o=this.checkRoot(t,i,s,r,e);if(o)i.fixedNode=o;else for(var a=0,l=t;a<l.length;a++){if(!((f=l[a]).excludeFromLayout||f.inEdges&&f.inEdges.length)){i.fixedNode=f.id;break}}var h=e[i.fixedNode],c=this.findFirstLevelNodes(h,i,e),d=[],p=[],u=is(i.getBranch);u=u||is(this.getBranch);for(var g=0,m=c;g<m.length;g++){var f,y=u(f=m[g],c);"Left"===(y=f&&f.branch?f.branch:y)?d.push(f):p.push(f)}var v=new Tn(0,0,n.x,n.y);e[i.fixedNode].offsetX=v.x+v.width/2,e[i.fixedNode].offsetY=v.y+v.height/2,d.length&&this.updateMindMapBranch(t,p,e,i,n,s,"Left"),p.length&&this.updateMindMapBranch(t,d,e,i,n,s,"Right")},t.prototype.checkRoot=function(t,e,i,n,s){for(var r=0,o=t;r<o.length;r++){var a=o[r];if(!a.excludeFromLayout){if(a.data&&(a.data[""+i].toString()===n||a.data[""+i].toString()===e.root))return a.id;if(!a.data&&a.id===e.root)return a.id}}return""},t.prototype.updateMindMapBranch=function(t,e,i,n,s,r,o){var a={type:"HierarchicalTree",horizontalSpacing:n.verticalSpacing,verticalSpacing:n.horizontalSpacing,verticalAlignment:n.verticalAlignment,horizontalAlignment:n.horizontalAlignment,fixedNode:n.fixedNode,getLayoutInfo:is(n.getLayoutInfo),layoutInfo:n.layoutInfo,margin:n.margin,orientation:n.orientation,root:n.fixedNode};"Vertical"===a.orientation?a.orientation="Left"===o?"TopToBottom":"BottomToTop":a.orientation="Left"===o?"LeftToRight":"RightToLeft",this.excludeFromLayout(e,i,!0),(new pk).updateLayout(t,i,a,s,r),this.excludeFromLayout(e,i,!1)},t.prototype.getBranch=function(t,e){return e.indexOf(t)%2==0?"Left":"Right"},t.prototype.excludeFromLayout=function(t,e,i){for(var n=0,s=t;n<s.length;n++){e[s[n].id].excludeFromLayout=i}},t.prototype.findFirstLevelNodes=function(t,e,i){var n=[];if(t&&t.outEdges.length)for(var s=0,r=t.outEdges;s<r.length;s++){var o=r[s];n.push(i[i[""+o].targetID])}return n}}(),function(){function t(){}t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"RadialTree"},t.prototype.updateLayout=function(t,e,i,n){var s={type:i.type,nameTable:e,anchorX:0,anchorY:0,firstLevelNodes:[],centerNode:null,levels:[],maxLevel:0,graphNodes:{},layoutNodes:[],orientation:i.orientation,horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,verticalAlignment:i.verticalAlignment,horizontalAlignment:i.horizontalAlignment,fixedNode:i.fixedNode,margin:i.margin,bounds:i.bounds,objects:[],root:i.root};this.doLayout(s,t,e,n)},t.prototype.doLayout=function(t,e,i,n){for(var s,r=0;r<e.length;r++)(s=e[parseInt(r.toString(),10)]).excludeFromLayout||(t.graphNodes[s.id]=this.setUpLayoutInfo(t,s),s.inEdges&&s.inEdges.length||t.firstLevelNodes.push(s));t.root&&i[t.root]?t.centerNode=i[t.root]:t.firstLevelNodes.length&&(t.centerNode=t.firstLevelNodes[0],t.root=t.centerNode.id),t.centerNode&&(this.updateEdges(t,t.centerNode,0,i),this.depthFirstAllignment(t,t.centerNode,0,0),this.populateLevels(t),this.transformToCircleLayout(t),this.updateAnchor(t,n),this.updateNodes(t,t.centerNode,i))},t.prototype.updateEdges=function(t,e,i,n){var s=t.graphNodes[e.id];t.layoutNodes.push(s),s.level=i,s.visited=!0,t.maxLevel=Math.max(t.maxLevel,i);for(var r=0;r<e.outEdges.length;r++){var o=n[n[e.outEdges[parseInt(r.toString(),10)]].targetID];o.excludeFromLayout||o.visited||(s.children.push(o),this.updateEdges(t,o,i+1,n))}},t.prototype.depthFirstAllignment=function(t,e,i,n){var s,r=t.graphNodes[e.id];if(r.children.length){n+=300;for(var o=0;o<r.children.length;o++)i=(s=this.depthFirstAllignment(t,r.children[parseInt(o.toString(),10)],i,n)).x,n=s.y;r.children=r.children.sort(function(e,i){return t.graphNodes[e.id].x-t.graphNodes[i.id].x});var a=t.graphNodes[r.children[0].id].min,l=t.graphNodes[r.children[r.children.length-1].id].max;if(r.x=a+(l-a)/2,i=l+t.horizontalSpacing,r.segmentOffset=l+t.horizontalSpacing,r.x-=r.width/2,r.y-=r.height/2,r.min=a,r.max=l,r.x<a&&r.visited){r.x=a,i=r.x+r.width/2-(l-a)/2,r.visited=!1;for(o=0;o<r.children.length;o++)s=this.depthFirstAllignment(t,r.children[parseInt(o.toString(),10)],i,n);r.visited=!0,i=r.x+r.width+t.horizontalSpacing}i=i<(l=t.graphNodes[r.children[r.children.length-1].id].segmentOffset)?l:i,n-=300,r.y=n}else r.x=i,r.y=n,r.min=i,r.max=i+r.width,i+=r.width+t.horizontalSpacing;return{x:i,y:n}},t.prototype.populateLevels=function(t){var e=[],i=Math.min.apply(Math,t.layoutNodes.map(function(t){return t.x})),n=Math.max.apply(Math,t.layoutNodes.map(function(e){return e.x+e.width+t.horizontalSpacing}))-i;t.levels=[];for(var s=function(s){var r={};e=(e=t.layoutNodes.filter(function(t){return t.level===s?t:null})).sort(function(t,e){return t.x-e.x}),r.min=e[0].x,r.max=e[e.length-1].x+e[e.length-1].width+t.horizontalSpacing,r.actualCircumference=0,r.height=0;for(var o=0;o<e.length;o++)e[parseInt(o.toString(),10)].height>r.height&&(r.height=e[parseInt(o.toString(),10)].height),r.actualCircumference+=Math.max(e[parseInt(o.toString(),10)].width,e[parseInt(o.toString(),10)].height),o!==e.length-1&&(r.actualCircumference+=t.horizontalSpacing);r.circumference=r.max-r.min,r.actualCircumference<r.circumference&&(r.circumference=(r.circumference+r.actualCircumference)/2),r.radius=r.circumference/(2*Math.PI)+r.height,r.nodes=[],s>1&&t.levels[s-1].radius+t.levels[s-1].height>=r.radius&&(r.radius=t.levels[s-1].radius+t.levels[s-1].height);for(var a=0;a<e.length;a++)e[parseInt(a.toString(),10)].ratio=Math.abs(e[parseInt(a.toString(),10)].x+e[parseInt(a.toString(),10)].width/2-i)/n,r.nodes.push(e[parseInt(a.toString(),10)]);t.levels.push(r)},r=0;r<=t.maxLevel;r++)s(r)},t.prototype.transformToCircleLayout=function(t){var e=t.graphNodes[t.centerNode.id];e.x=0,e.y=0;for(var i=1;i<t.levels.length;i++)for(var n=0;n<t.levels[parseInt(i.toString(),10)].nodes.length;n++){var s=t.levels[parseInt(i.toString(),10)].nodes[parseInt(n.toString(),10)];s.x=Math.cos(360*s.ratio*Math.PI/180)*(t.levels[parseInt(i.toString(),10)].radius+t.verticalSpacing*i),s.y=Math.sin(360*s.ratio*Math.PI/180)*(t.levels[parseInt(i.toString(),10)].radius+t.verticalSpacing*i),t.anchorX=Math.min(t.anchorX,s.x),t.anchorY=Math.min(t.anchorY,s.y)}},t.prototype.updateAnchor=function(t,e){t.anchorX=t.centerNode.offsetX||e.x/2,t.anchorY=t.centerNode.offsetY||e.y/2},t.prototype.updateNodes=function(t,e,i){var n=t.graphNodes[e.id],s=n.x+t.anchorX,r=n.y+t.anchorY;e.offsetX=s,e.offsetY=r;for(var o=0;o<n.children.length;o++){var a=n.children[parseInt(o.toString(),10)];this.updateNodes(t,i[a.id],i)}},t.prototype.setUpLayoutInfo=function(t,e){var i={};return i.name=e.id,i.x=0,i.y=0,i.min=0,i.max=0,i.width=e.actualSize.width,i.height=e.actualSize.height,i.children=[],i.level=0,i.ratio=0,i.visited=!1,i}}(),function(){function t(t){this.velocityX=0,this.velocityY=0,this.nodes=[],this.graphNode=t;var e=mk(this.graphNode);this.location=e.center,this.nodes=[],t.treeInfo.parents||(t.treeInfo.parents=[]),t.treeInfo.children||(t.treeInfo.children=[]),this.nodes=t.treeInfo.parents.concat(t.treeInfo.children)}return t.prototype.applyChanges=function(){this.graphNode.treeInfo.center=this.location},t}()),gk=(function(){function t(){this.cdCOEF=.442,this.cfMAXVELOCITY=50,this.cnMAXITERACTION=1e3,this.cnSPRINGLENGTH=100,this.mszMaxForceVelocity={width:this.cfMAXVELOCITY,height:this.cfMAXVELOCITY},this.springLength=0,this.springFactor=this.cdCOEF,this.maxIteration=this.cnMAXITERACTION,this.springLength=this.cnSPRINGLENGTH}t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"SymmetricalLayout"},t.prototype.doGraphLayout=function(t){var e=this.selectedNode;e.treeInfo.Bounds=t.getModelBounds(t.nodes);var i=e.treeInfo.GraphNodes,n=this.convertGraphNodes(i),s=n.length;s=Math.min(this.maxIteration,s*s*s),this.preLayoutNodes(n,e.treeInfo.Bounds);for(var r=0,o=s;r<o;r++)this.makeSymmetricLayout(n),this.appendForces(n);this.resetGraphPosition(n,e)},t.prototype.preLayoutNodes=function(t,e){for(var i=Math.max(e.width,e.height),n=i/2,s=i/2,r=2*Math.PI/t.length,o=r,a=0;a<t.length;a++){var l=t[parseInt(a.toString(),10)];this.getForceNode(l).location={x:n+i*Number(Math.cos(o).toFixed(2)),y:s+i*Number(Math.sin(o).toFixed(2))},o-=r}},t.prototype.doLayout=function(t){this.selectedNode=t.selectedNode,this.doGraphLayout(t)},t.prototype.makeSymmetricLayout=function(t){for(var e,i,n=0;n<t.length;n++){for(var s=t[parseInt(n.toString(),10)],r=(e=this.getForceNode(s)).nodes,o=0;o<r.length;o++){var a=r[parseInt(o.toString(),10)];this.calcNodesForce(e,this.getForceNode(a))}for(var l=0,h=r.length;l<h&&!(h<2);l++){var c=this.getForceNode(r[parseInt(l.toString(),10)]),d=l+1>=h?this.getForceNode(r[0]):this.getForceNode(r[l+1]),p=360/r.length/2*Math.PI/180,u=2*this.springLength*Math.sin(p);this.calcRelatesForce(c,d,u)}for(var g=0;g<t.length;g++){fk((a=t[parseInt(g.toString(),10)]).id,r)||a.id===s.id||(i=this.getForceNode(a),this.updateNeigbour(e,i))}}},t.prototype.appendForces=function(t){for(var e=null,i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)],s=(e=this.getForceNode(n)).location;s.x+=Math.min(e.velocityX,this.mszMaxForceVelocity.width),s.y+=Math.min(e.velocityY,this.mszMaxForceVelocity.height),e.velocityX=0,e.velocityY=0,e.location=s}},t.prototype.resetGraphPosition=function(t,e){for(var i,n={width:Number.MAX_VALUE,height:Number.MAX_VALUE},s=null,r=0;r<t.length;r++){i=t[parseInt(r.toString(),10)];var o={x:(s=this.getForceNode(i)).location.x-i.actualSize.width/2,y:s.location.y-i.actualSize.height/2};n.width=Math.min(n.width,o.x),n.height=Math.min(n.height,o.y)}for(r=0;r<t.length;r++){i=t[parseInt(r.toString(),10)],(o=(s=this.getForceNode(i)).location).x-=n.width-(e.treeInfo.location?e.treeInfo.location.x:0),o.y-=n.height-(e.treeInfo.location?e.treeInfo.location.y:0),s.location=o,s.applyChanges()}},t.prototype.convertGraphNodes=function(t){for(var e=[],i=0,n=Object.keys(t);i<n.length;i++){var s=t[""+n[i]],r=new uk(s);s.treeInfo.tag=r,e.push(s)}return e},t.prototype.getForceNode=function(t){return t.treeInfo.tag},t.prototype.updateNeigbour=function(t,e){if(null!=e&&null!=t){var i=this.pointDistance(t.location,e.location),n=this.lineAngle(t.location,e.location),s=.9*this.springLength;i<s&&this.calcForce(i,s,n,e)}},t.prototype.lineAngle=function(t,e){var i=0,n=e.x-t.x,s=e.y-t.y;return 0===n?i=s<=0?3*Math.PI/2:Math.PI/2:0===s?i=n<0?Math.PI:0:(i=Math.atan(s/n),n<0&&s>0||n<0&&s<0?i=Math.PI+i:n>0&&s<0&&(i=2*Math.PI+i)),i},t.prototype.pointDistance=function(t,e){var i=e.x-t.x,n=e.y-t.y,s=i*i+n*n;return Math.sqrt(s)},t.prototype.calcRelatesForce=function(t,e,i){var n=this.pointDistance(t.location,e.location),s=this.lineAngle(t.location,e.location);n<i&&this.calcForce(n,i,s,e)},t.prototype.updateLayout=function(t,e,i,n,s,r){(new gk).updateLayout(t,e,i,n,s,r)},t.prototype.calcNodesForce=function(t,e){var i=this.pointDistance(t.location,e.location),n=this.lineAngle(t.location,e.location);(i>this.springLength||i<this.springLength)&&this.calcForce(i,this.springLength,n,e)},t.prototype.calcForce=function(t,e,i,n){var s=n.nodes.length,r=(t-e)*(this.springFactor/(s*s)*Math.sqrt(s)),o=Math.cos(i)*r,a=Math.sin(i)*r;n.velocityX-=o,n.velocityY-=a}}(),function(){function t(){this.visitedStack=[],this.cycleEdgesCollection=[],this.graphObjects=[],this.passedNodes=[]}return t.prototype.updateLayout=function(t,e,i,n,s,r){this.nameTable=n,this.nodes=t,this.connectors=e;var o=t;o.length>0&&(this.mhelperSelectedNode=Fn(o[0]));for(var a=0,l=t;a<l.length;a++){var h=m=l[a];h.treeInfo={},h.treeInfo.graphType="Node",this.graphObjects.push(h)}for(var c=0,d=e;c<d.length;c++){var p=d[c];p.treeInfo={},p.treeInfo.graphType="Connector",this.graphObjects.push(p)}this.updateLayout1(this.graphObjects,i);for(var u=this.getModelBounds(o),g=0;g<o.length;g++){var m=o[parseInt(g.toString(),10)],f=(r.x-u.width)/2,y=s.margin,v=m.treeInfo.tag.location.x-(m.offsetX-m.actualSize.width/2)-u.x+f+y.left,b=m.treeInfo.tag.location.y-(m.offsetY-m.actualSize.height/2)-u.y+y.top;m.offsetX+=v,m.offsetY+=b,delete m.treeInfo}return!0},t.prototype.getModelBounds=function(t){t=t.slice();for(var e,i=null,n=null,s=0;s<t.length;s++){var r=mk(e=t[parseInt(s.toString(),10)]);i=new Tn(e.treeInfo.tag?e.treeInfo.tag.location.x:r.x,e.treeInfo.tag?e.treeInfo.tag.location.y:r.y,e.actualSize.width,e.actualSize.height),n=n?n.uniteRect(i):i}return n},t.prototype.updateLayout1=function(t,e){this.detectCyclesInGraph(t);var i=t.length;if(i>0){for(var n=[],s=[],r=[],o=0;o<t.length;o++){var a=t[parseInt(o.toString(),10)];void 0===a.treeInfo.isCycleEdge&&(a.treeInfo.isCycleEdge=!1),"Connector"!==a.treeInfo.graphType||a.treeInfo.isCycleEdge?"Connector"===a.treeInfo.graphType?n.push(a):r.push(a):s.push(a)}for(s=s.concat(r),s=n.concat(s);i>this.dictionaryLength(this.passedNodes);)this.getNodesToPosition(s),null!=this.selectedNode&&(e.doLayout(this),this.selectedNode=null,this.visitedStack=[]);this.passedNodes=null,this.selectedNode=null}return!1},t.prototype.getNodesToPosition=function(t){for(var e=0;e<t.length;e++){var i=t[parseInt(e.toString(),10)];this.selectNodes(i);break}},t.prototype.selectNodes=function(t){var e=t;"Connector"===t.treeInfo.graphType?this.exploreGraphEdge(t):null!=e&&this.addNode(t,"passed")&&(this.addNode(t,"selected"),this.isConnectedToAnotherNode(e)&&(this.selectedNode={treeInfo:{}},this.selectedNode.treeInfo.LeftMargin=10,this.selectedNode.treeInfo.TopMargin=10,this.selectConnectedNodes(e)))},t.prototype.selectConnectedNodes=function(t){var e=this.selectedNode;e.treeInfo.GraphNodes||(e.treeInfo.GraphNodes={});var i=t;this.addNode(i,"passed");var n=i.id;if(this.dictionaryContains(e.treeInfo.GraphNodes,i)){var s=e.treeInfo.GraphNodes[""+n];s.treeInfo.Added&&(s.treeInfo.Added=!1,this.getConnectedRelatives(s),this.exploreRelatives(t))}else{var r=this.addGraphNode(i);this.getConnectedRelatives(r),this.exploreRelatives(t)}},t.prototype.exploreRelatives=function(t){this.exploreRelatives1(t,"Parents"),this.exploreRelatives1(t,"Children")},t.prototype.exploreRelatives1=function(t,e){var i=[];i="Parents"===e?t.inEdges:t.outEdges;for(var n=0;n<i.length;n++){var s=this.nameTable[i[parseInt(n.toString(),10)]];if(this.addNode(s,"passed")){var r=this.nameTable[s.sourceID],o=this.nameTable[s.targetID];"Parents"===e&&null!=r&&fk(r.id,this.nodes)?this.selectConnectedNodes(this.nameTable[s.sourceID]):"Children"===e&&null!=o&&fk(o.id,this.nodes)&&this.selectConnectedNodes(this.nameTable[s.targetID])}}},t.prototype.getConnectedRelatives=function(t){this.getConnectedParents(t),this.getConnectedChildren(t)},t.prototype.dictionaryContains=function(t,e){for(var i=Object.keys(t),n=0;n<i.length;n++)if(i[parseInt(n.toString(),10)]===e.id)return!0;return!1},t.prototype.dictionaryLength=function(t){return Object.keys(t).length},t.prototype.getConnectedChildren=function(t){for(var e=this.selectedNode,i=t,n=0;n<i.outEdges.length;n++){var s=this.nameTable[i.outEdges[parseInt(n.toString(),10)]];if(!s.treeInfo.isCycleEdge){var r=this.nameTable[s.targetID];if(fk(r.id,this.nodes)&&null!=r&&r.visible){var o=void 0;this.dictionaryContains(e.treeInfo.GraphNodes,r)?o=e.treeInfo.GraphNodes[r.id]:(o=this.addGraphNode(r)).treeInfo.Added=!0,t.treeInfo.children||(t.treeInfo.children=[]),o.treeInfo.parents||(o.treeInfo.parents=[]),this.setNode(o.treeInfo.parents,t),this.findNode(t.treeInfo.children,o.id)<0&&t.treeInfo.children.push(o)}}}},t.prototype.getConnectedParents=function(t){for(var e=this.selectedNode,i=t,n=0;n<i.inEdges.length;n++){var s=this.nameTable[i.inEdges[parseInt(n.toString(),10)]];if(!s.treeInfo.isCycleEdge){var r=this.nameTable[s.sourceID];if(fk(r.id,this.nodes)&&null!=r&&r.visible){var o=void 0;this.dictionaryContains(e.treeInfo.GraphNodes,r)?o=e.treeInfo.GraphNodes[r.id]:(o=this.addGraphNode(r)).treeInfo.Added=!0,t.treeInfo.parents||(t.treeInfo.parents=[]),o.treeInfo.children||(o.treeInfo.children=[]),this.setNode(o.treeInfo.children,t),this.findNode(t.treeInfo.parents,o.id)<0&&t.treeInfo.parents.push(o)}}}},t.prototype.setNode=function(t,e){var i=this.findNode(t,e.id);i>=0&&i<t.length?t[parseInt(i.toString(),10)]=e:t.push(e)},t.prototype.findNode=function(t,e){var i=-1;if(null!=t&&""!==e)for(var n=0,s=t.length;n<s;n++){var r=t[parseInt(n.toString(),10)];if(null!=r&&r.id===e){i=n;break}}return i},t.prototype.addGraphNode=function(t){var e=t;this.selectedNode.treeInfo.GraphNodes[e.id]=e;var i=this.mhelperSelectedNode;return null!=i&&t.id===i.id&&(this.mhelperSelectedNode=e),e},t.prototype.isConnectedToAnotherNode=function(t){var e=!1;return t.inEdges.concat(t.outEdges).length>0&&(null!=t.inEdges&&t.inEdges.length>0&&(e=this.searchEdgeCollection(t.inEdges,"FromNode")),!e&&null!=t.outEdges&&t.outEdges.length>0&&(e=this.searchEdgeCollection(t.outEdges,"ToNode"))),e},t.prototype.searchEdgeCollection=function(t,e){for(var i=!1,n=0;n<t.length-1;n++){var s=this.nameTable[t[parseInt(n.toString(),10)]];if(this.addNode(s,"passed")&&(!s.treeInfo.isCycleEdge&&("FromNode"===e&&null!=this.nameTable[s.sourceID]||"ToNode"===e&&null!=this.nameTable[s.targetID]))){i=!0;break}}return i},t.prototype.exploreGraphEdge=function(t){var e=t;if(null!=e&&!e.treeInfo.isCycleEdge&&this.addNode(t,"passed")){this.addNode(t,"selected");var i=this.nameTable[e.sourceID];this.nameTable[e.targetID];null!=i&&this.selectNodes(i)}},t.prototype.addNode=function(t,e){var i=t;return"passed"!==e&&i.visible||this.dictionaryContains(this.passedNodes,i)||(this.passedNodes[i.id]=i),!!i.visible},t.prototype.detectCyclesInGraph=function(t){for(var e=[],i=[],n=0;n<t.length;n++)"Connector"!==t[parseInt(n.toString(),10)].treeInfo.graphType&&e.push(t[parseInt(n.toString(),10)]);if(e.length>0)for(i.push(e[0]),this.visitedStack.push(e[0]);i.length>0;){var s=i[i.length-1],r=this.getUnVisitedChildNodes(s);if(r.length>0){var o=r[0],a=r[r.length-1];fk(o.id,this.visitedStack)?(a.treeInfo.isCycleEdge=!0,this.cycleEdgesCollection.push(a)):(i.push(o),this.visitedStack.splice(0,0,o))}else i.pop()}},t.prototype.getUnVisitedChildNodes=function(t){var e=[];if(t.outEdges.length>0){for(var i=0;i<t.outEdges.length;i++){var n=this.nameTable[t.outEdges[parseInt(i.toString(),10)]];if(!fk(n.id,this.visitedStack)){var s=this.nameTable[n.targetID];return null!=s&&e.push(s),e.push(n),this.visitedStack.splice(0,0,n),e}}return e}return e},t}());function mk(t){var e=t.offsetX-t.actualSize.width*t.pivot.x,i=t.offsetY-t.actualSize.height*t.pivot.y;return new Tn(e,i,t.actualSize.width,t.actualSize.height)}function fk(t,e){for(var i=0;i<e.length;i++)if(e[parseInt(i.toString(),10)].id===t)return!0;return!1}!function(){function t(){}t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"ComplexHierarchicalTree"},t.prototype.doLayout=function(t,e,i,n,s){(new yk).doLayout(t,e,i,n,s)},t.prototype.getLayoutNodesCollection=function(t){for(var e,i=[],n=0;n<t.length;n++)(e=t[parseInt(n.toString(),10)]).excludeFromLayout||!(e.inEdges.length+e.outEdges.length>0||0===e.offsetX&&0===e.offsetY)||e.parentId||e.processId||i.push(e);return i}}();var yk=function(){function t(){this.nameTable={},this.vertexTable={},this.verticesMap=new Map,this.crossReduction=new bk,this.previousEdgeOffset=6,this.previousEdgeDistance=5,this.jettyPositions={},this.rankBottomY=null,this.limitX=null,this.rankTopY=null,this.parallelEdgeSpacing=10,this.minEdgeJetty=12}return t.prototype.createVertex=function(t,e,i,n,s,r){return{value:e,geometry:{x:i,y:n,width:s,height:r},name:e,vertex:!0,inEdges:t.inEdges.slice(),outEdges:t.outEdges.slice(),maxRowWidth:void 0,maxRowHeight:void 0}},t.prototype.getEdges=function(t){var e=[],i=this.nameTable[t.name];if(t&&!i.excludeFromLayout){for(var n=0;t.inEdges.length>0&&n<t.inEdges.length;n++){var s=this.nameTable[t.inEdges[parseInt(n.toString(),10)]];this.nameTable[s.sourceID].excludeFromLayout||e.push(s)}for(n=0;t.outEdges.length>0&&n<t.outEdges.length;n++){s=this.nameTable[t.outEdges[parseInt(n.toString(),10)]];this.nameTable[s.targetID].excludeFromLayout||e.push(s)}}return e},t.prototype.findRoots=function(t,e){for(var i=[],n=null,s=-1e5,r=0,o=Object.keys(t);r<o.length;r++){for(var a=t[""+o[r]],l=this.getEdges(a),h=0,c=0,d=0;d<l.length;d++){this.getVisibleTerminal(l[parseInt(d.toString(),10)],!0).name===a.name?h++:c++}0===c&&(e||h>0)&&i.push(a);var p=h-c;p>s&&(s=p,n=a)}return 0===i.length&&null!=n&&i.push(n),i},t.prototype.getVisibleTerminal=function(t,e){var i=this.nameTable[t.targetID];return e&&(i=this.nameTable[t.sourceID]),this.verticesMap.get(i.id)||null},t.prototype.traverse=function(t,e,i,n,s,r){if(null!=t){var o=t.name;if(null==r||null!=r[""+o]){null==n[""+o]&&(n[""+o]=t),null!=r&&delete r[""+o];for(var a=this.getEdges(t),l=[],h=0;h<a.length;h++)l[parseInt(h.toString(),10)]=this.getVisibleTerminal(a[parseInt(h.toString(),10)],!0)===t;for(h=0;h<a.length;h++)if(!e||l[parseInt(h.toString(),10)]){for(var c=this.getVisibleTerminal(a[parseInt(h.toString(),10)],!l[parseInt(h.toString(),10)]),d=1,p=0;p<a.length;p++)if(p!==h){var u=l[parseInt(p.toString(),10)];this.getVisibleTerminal(a[parseInt(p.toString(),10)],!u)===c&&(u?d++:d--)}d>=0&&(n=this.traverse(c,e,a[parseInt(h.toString(),10)],n,s,r))}}else if(null==n[""+o])for(h=0;h<s.length;h++){var g=s[parseInt(h.toString(),10)];if(null!=g[""+o]){for(var m=0,f=Object.keys(g);m<f.length;m++){var y=f[m];n[""+y]=g[""+y]}return s.splice(h,1),n}}}return n},t.prototype.getModelBounds=function(t){t=t.slice();for(var e=null,i=null,n=0;n<t.length;n++)if(e=t[parseInt(n.toString(),10)].geometry,i){var s=Math.max(i.x+i.width,e.x+e.width),r=Math.max(i.y+i.height,e.y+e.height);i.x=Math.min(i.x,e.x),i.y=Math.min(i.y,e.y),i.width=s-i.x,i.height=r-i.y}else i={x:e.x,y:e.y,width:e.width,height:e.height};return i},t.prototype.doLayout=function(t,e,i,n,s){this.nameTable=e;var r,o=i.enableRouting,a={horizontalSpacing:i.horizontalSpacing,verticalSpacing:i.verticalSpacing,orientation:i.orientation,marginX:i.margin.left,marginY:i.margin.top,enableLayoutRouting:o},l=new Ck;l.edgeMapper=[],l.diagram=s;var h=[];this.vertices=[];for(var c={},d=0;d<t.length;d++){var p=this.nameTable[t[parseInt(d.toString(),10)].id];if(!p.excludeFromLayout){var u=this.createVertex(t[parseInt(d.toString(),10)],t[parseInt(d.toString(),10)].id,0,0,t[parseInt(d.toString(),10)].actualSize.width,t[parseInt(d.toString(),10)].actualSize.height);if(this.vertices.push(u),this.verticesMap.set(u.name,u),this.vertexTable[p.id]=u,(t[parseInt(d.toString(),10)].inEdges.length>0||t[parseInt(d.toString(),10)].outEdges.length>0)&&h.push(t[parseInt(d.toString(),10)]),c[u.name]=u,l)for(var g=t[parseInt(d.toString(),10)].outEdges.slice(),m=0;m<g.length;m++){var f=e[g[parseInt(m.toString(),10)]];l.setEdgeMapper({key:f,value:[]})}}}var y=[],v="Linear"===i.arrangement||o;v=v||l&&"DifferentPoint"===i.connectionPointOrigin;var b=this.findRoots(c,v);for(d=0;d<b.length;d++){var C={};y.push(C),this.traverse(b[parseInt(d.toString(),10)],!0,null,C,y,c)}var I,M={marginX:0,marginY:0},S=[],x=!1;for(d=0;d<y.length;d++){C=y[parseInt(d.toString(),10)];for(var w=0,D=Object.keys(C);w<D.length;w++){var E=D[w];S.push(C[""+E])}("Linear"===i.arrangement&&d===y.length-1||o)&&(x=!0),r=new vk(this,S,b,a),this.cycleStage(r),this.layeringStage(r);for(var T=r.ranks,A=T.length-1;A>=0;A--){for(var N=0,L=0,O=0,k=T[parseInt(A.toString(),10)];O<k.length;O++){var z=k[O];if("internalVertex"===this.getType(z.type)){var P=z.cell.geometry;N=Math.max(N,P.width),L=Math.max(L,P.height)}}for(var j=0,B=T[parseInt(A.toString(),10)];j<B.length;j++){z=B[j];if("internalVertex"===this.getType(z.type))(X=z.cell).maxRowWidth=N,X.maxRowHeight=L}}l&&"DifferentPoint"===i.connectionPointOrigin||x?(I={model:r,matrix:[],rowOffset:[],roots:[]},l.arrangeElements(I,i),i.ranks=I.model.ranks):"Nonlinear"===i.arrangement&&(this.crossingStage(r),M=this.placementStage(r,M.marginX,M.marginY),S=[])}var H=this.getModelBounds(this.vertices);this.updateMargin(i,a,H,n);for(d=0;d<this.vertices.length;d++){if($=this.vertices[parseInt(d.toString(),10)]){var R=this.nameTable[$.name];R.offsetX=0,R.offsetY=0;var V=$.geometry.x-(R.offsetX-R.actualSize.width/2)+a.marginX,U=$.geometry.y-(R.offsetY-R.actualSize.height/2)+a.marginY,F=(A=V,U);"BottomToTop"===a.orientation?(o&&($.geometry.y=H.height-U-R.actualSize.height/2),F=H.height-U):"RightToLeft"===a.orientation&&(A=H.width-V),R.offsetX+=A-R.offsetX,R.offsetY+=F-R.offsetY,"Stretch"===i.horizontalAlignment&&"Stretch"===i.verticalAlignment||l.nodePropertyChange(R)}}if(!x)for(d=0;d<this.vertices.length;d++)this.isNodeOverLap(this.nameTable[this.vertices[parseInt(d.toString(),10)].name],i);if(l.updateLayout(n,H,i,a,h,e,this.vertexTable),o){for(var W={},Y=void 0,_=0;_<I.matrix.length;_++){Y=I.matrix[parseInt(_.toString(),10)].value;for(var Q=0;Q<Y.length;Q++)for(var Z=Y[parseInt(Q.toString(),10)],q=0;q<Z.cells.length;q++){var X=Z.cells[parseInt(q.toString(),10)];if("internalVertex"===this.getType(X.type)){var G=X;W[G.id]=G}}}this.updateRankValuess(r);d=0;for(var K=Object.keys(W);d<K.length;d++){E=K[parseInt(d.toString(),10)];this.setVertexLocationValue(W[""+E],i.orientation,H)}this.localEdgeProcessing(r,W),this.assignRankOffset(r),this.updateEdgeSetXYValue(r);var J=this.getValues(r.edgeMapper);for(d=0;d<J.length;d++){if(J[parseInt(d.toString(),10)].x.length>0)for(m=0;m<J[parseInt(d.toString(),10)].x.length;m++)"RightToLeft"!==i.orientation&&"LeftToRight"!==i.orientation?J[parseInt(d.toString(),10)].x[parseInt(m.toString(),10)]=J[parseInt(d.toString(),10)].x[parseInt(m.toString(),10)]+a.marginX:(i.orientation,J[parseInt(d.toString(),10)].x[parseInt(m.toString(),10)]=J[parseInt(d.toString(),10)].x[parseInt(m.toString(),10)]+i.verticalSpacing/2);this.setEdgePosition(J[parseInt(d.toString(),10)],r,a)}for(_=0;_<this.vertices.length;_++){var $;($=this.vertices[parseInt(_.toString(),10)]).outEdges.length>1&&this.updateMultiOutEdgesPoints($)}}},t.prototype.setEdgeXY=function(t,e,i,n){if(t&&e.source.id){for(var s=void 0,r=void 0,o=0;o<t.length;o++)for(var a=0;a<t[parseInt(o.toString(),10)].length;a++)t[parseInt(o.toString(),10)][parseInt(a.toString(),10)].id!==e.target.id&&t[parseInt(o.toString(),10)][parseInt(a.toString(),10)].id!==e.source.id||(t[parseInt(o.toString(),10)][parseInt(a.toString(),10)].id===e.target.id&&void 0===s&&(s=o),t[parseInt(o.toString(),10)][parseInt(a.toString(),10)].id===e.source.id&&void 0===r&&(r=o));for(var l=void 0,h=s;h<=r;h++)void 0===l&&(l=this[h+"_RankOffset"]),void 0!==l&&l<this[h+"_RankOffset"]&&(l=this[h+"_RankOffset"]);void 0===this.edges&&(this.edges={}),this.edges[e.ids[0]]={x:e.x,y:0};var c=this.resetOffsetXValue(l,i/10);e.x[n-e.minRank-1]=c;for(a=0;a<e.edges.length;a++)e.edges[parseInt(a.toString(),10)].levelSkip=!0}},t.prototype.resetOffsetXValue=function(t,e){for(var i=0,n=Object.keys(this.edges);i<n.length;i++)for(var s=n[parseInt(i.toString(),10)],r=this.edges[""+s].x,o=0;o<r.length;o++){var a=void 0;if(this.edges[""+s].x[parseInt(o.toString(),10)]===t)return a=t+e,a=this.resetOffsetXValue(a,e)}return t},t.prototype.setEdgePosition=function(t,e,i){var n=0;if(101207!==t.temp[0]){void 0===t.maxRank&&(t.maxRank=-1),void 0===t.minRank&&(t.minRank=-1);var s=t.maxRank,r=t.minRank;s===r&&(s=t.source.maxRank,r=t.target.minRank);var o=0,a=this.jettyPositions[t.ids[0]];void 0===t.isReversed?t.isReversed=!1:t.isReversed=!0;var l=t.isReversed?t.target.cell:t.source.cell,h=!1;"TopToBottom"===e.layout.orientation||"LeftToRight"===e.layout.orientation?("TopToBottom"===e.layout.orientation&&(h=!1),"LeftToRight"===e.layout.orientation&&(h=(t.isReversed,!1))):t.isReversed||(h=!0);for(var c=0;c<t.edges.length;c++){var d=t.edges[parseInt(c.toString(),10)],p=this.getVisibleTerminal(d,!0),u=[],g=t.isReversed;if(p!==l&&(g=!g),null!=a){var m=g?2:0,f=g?h?this.rankBottomY[parseInt(r.toString(),10)]:this.rankTopY[parseInt(r.toString(),10)]:h?this.rankTopY[parseInt(s.toString(),10)]:this.rankBottomY[parseInt(s.toString(),10)],y=a[4*o+1+m];g!==h&&(y=-y),"TopToBottom"!==i.orientation&&"BottomToTop"!==i.orientation||(f+=y);var v=a[4*o+m];"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?u.push(this.getPointvalue(v,f+i.marginY)):"LeftToRight"===i.orientation?u.push(this.getPointvalue(f+y,v+i.marginY)):u.push(this.getPointvalue(f,v+i.marginY))}var b=t.x.length-1,C=-1,I=-1,M=t.maxRank-1;g&&(b=0,C=t.x.length,I=1,M=t.minRank+1);for(var S=b;t.maxRank!==t.minRank&&S!==C;S+=I){var x=t.x[parseInt(S.toString(),10)]+n,w=(this.rankTopY[parseInt(M.toString(),10)]+this.rankBottomY[M+1])/2,D=(this.rankTopY[M-1]+this.rankBottomY[parseInt(M.toString(),10)])/2;if(g){var E=w;w=D,D=E}"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?(u.push(this.getPointvalue(x,w+i.marginY)),u.push(this.getPointvalue(x,D+i.marginY))):(u.push(this.getPointvalue(w,x+i.marginY)),u.push(this.getPointvalue(D,x+i.marginY))),this.limitX=Math.max(this.limitX,x),M+=I}if(null!=a){m=g?2:0;var T=g?h?this.rankTopY[parseInt(s.toString(),10)]:this.rankBottomY[parseInt(s.toString(),10)]:h?this.rankBottomY[parseInt(r.toString(),10)]:this.rankTopY[parseInt(r.toString(),10)];y=a[4*o+3-m];g!==h&&(y=-y);f=T-y,v=a[4*o+2-m];"TopToBottom"===i.orientation||"BottomToTop"===i.orientation?u.push(this.getPointvalue(v,f+i.marginY)):u.push(this.getPointvalue(f,v+i.marginY))}this.setEdgePoints(d,u,e),n=0===n?this.parallelEdgeSpacing:n>0?-n:-n+this.parallelEdgeSpacing,o++}t.temp[0]=101207}},t.prototype.getPointvalue=function(t,e){return{x:Number(t)||0,y:Number(e)||0}},t.prototype.updateEdgeSetXYValue=function(t){if(t.layout.enableLayoutRouting){var e=!1;"LeftToRight"!==t.layout.orientation&&"RightToLeft"!==t.layout.orientation||(e=!0);for(var i=0;i<t.ranks.length;i++)for(var n=t.ranks[parseInt(i.toString(),10)],s=0;s<n.length;s++){var r=n[parseInt(s.toString(),10)];if(r.edges&&r.edges.length>0){var o=t.layout.horizontalSpacing>0?t.layout.horizontalSpacing/2:15,a=!0;r.minRank!==i-1&&r.maxRank!==i-1&&(a=!1),a&&this.setXY(r,i,void 0,!!e,t.ranks,o)}}}},t.prototype.getPreviousLayerConnectedCells=function(t,e){if(null==e.previousLayerConnectedCells){e.previousLayerConnectedCells=[],e.previousLayerConnectedCells[0]=[];for(var i=0;i<e.connectsAsSource.length;i++){var n=e.connectsAsSource[parseInt(i.toString(),10)];-1===n.minRank||n.minRank===t-1?e.previousLayerConnectedCells[0].push(n.target):e.previousLayerConnectedCells[0].push(n)}}return e.previousLayerConnectedCells[0]},t.prototype.compare=function(t,e){if(null!=t&&null!=e){if(e.weightedValue>t.weightedValue)return-1;if(e.weightedValue<t.weightedValue)return 1}return 0},t.prototype.localEdgeProcessing=function(t,e){for(var i=0;i<t.ranks.length;i++)for(var n=t.ranks[parseInt(i.toString(),10)],s=0;s<n.length;s++){var r=n[parseInt(s.toString(),10)];if(this.crossReduction.isVertex(r))for(var o=this.getPreviousLayerConnectedCells(i,r),a=i-1,l=0;l<2;l++){if(a>-1&&a<t.ranks.length&&null!=o&&o.length>0){for(var h=[],c=0;c<o.length;c++){var d=this.weightedCellSorter(o[parseInt(c.toString(),10)],this.getX(a,o[parseInt(c.toString(),10)]));h.push(d)}h.sort(this.compare),r.width=e[r.id].cell.geometry.width,r.height=e[r.id].cell.geometry.height;var p=void 0;"TopToBottom"===t.layout.orientation||"BottomToTop"===t.layout.orientation?(r.x[0]=e[r.id].cell.geometry.x+e[r.id].cell.geometry.width/2,p=r.x[0]-r.width/2+e[r.id].cell.geometry.height/2):(r.x[0]=e[r.id].cell.geometry.y,p=r.x[0]);var u=p+r.width,g=0,m=[];for(c=0;c<h.length;c++){var f=h[parseInt(c.toString(),10)].cell,y=void 0;if(this.crossReduction.isVertex(f)){y=0===l?r.connectsAsSource:r.connectsAsTarget;for(var v=0;v<y.length;v++)y[parseInt(v.toString(),10)].source!==f&&y[parseInt(v.toString(),10)].target!==f||(g+=y[parseInt(v.toString(),10)].edges.length,m.push(y[parseInt(v.toString(),10)]))}else g+=f.edges.length,m.push(f)}var b=(g+1)*this.previousEdgeDistance;r.width>b+2*this.previousEdgeDistance&&(p+=this.previousEdgeDistance,u-=this.previousEdgeDistance);var C=(u-p)/g,I=p+C/2,M=this.minEdgeJetty-this.previousEdgeOffset,S=0;for(c=0;c<m.length;c++){var x=m[parseInt(c.toString(),10)].edges.length;void 0===this.jettyPositions&&(this.jettyPositions={});var w=this.jettyPositions[m[parseInt(c.toString(),10)].ids[0]];null==w&&(w=[],this.jettyPositions[m[parseInt(c.toString(),10)].ids[0]]=w),c<g/2?M+=this.previousEdgeOffset:c>g/2&&(M-=this.previousEdgeOffset);for(var D=0;D<x;D++)w[4*D+2*l]=I,I+=C,w[4*D+2*l+1]=M;S=Math.max(S,M)}}o=this.getNextLayerConnectedCells(i,r),a=i+1}}},t.prototype.updateMultiOutEdgesPoints=function(t){for(var e=0;e<t.outEdges.length/2;e++){var i=this.nameTable[t.outEdges[parseInt(e.toString(),10)]],n=this.nameTable[t.outEdges[t.outEdges.length-(e+1)]],s="geometry";i.sourceID!==n.targetID&&i.targetID!==n.sourceID&&(n[""+s].points[0].y=i[""+s].points[0].y)}},t.prototype.getNextLayerConnectedCells=function(t,e){if(null==e.nextLayerConnectedCells){e.nextLayerConnectedCells=[],e.nextLayerConnectedCells[0]=[];for(var i=0;i<e.connectsAsTarget.length;i++){var n=e.connectsAsTarget[parseInt(i.toString(),10)];-1===n.maxRank||n.maxRank===t+1?e.nextLayerConnectedCells[0].push(n.source):e.nextLayerConnectedCells[0].push(n)}}return e.nextLayerConnectedCells[0]},t.prototype.getX=function(t,e){return this.crossReduction.isVertex(e)?e.x[0]:this.crossReduction.isVertex(e)?0:e.x[t-e.minRank-1]||e.temp[t-e.minRank-1]},t.prototype.getGeometry=function(t){return t.geometry},t.prototype.setEdgePoints=function(t,e,i){if(null!=t){var n=this.getGeometry(t);if(null!=e)for(var s=0;s<e.length;s++)e[s].x=e[s].x,e[s].y=e[s].y;n.points=e,t.geometry=n}},t.prototype.assignRankOffset=function(t){if(t)for(var e=0;e<t.ranks.length;e++)this.rankCoordinatesAssigment(e,t)},t.prototype.rankCoordinatesAssigment=function(t,e){for(var i,n=e.ranks[parseInt(t.toString(),10)],s=e.layout.horizontalSpacing,r=0;r<n.length;r++)void 0===this[t+"_RankOffset"]&&(this[t+"_RankOffset"]=0),i=n[parseInt(r.toString(),10)].x[0],this[t+"_RankOffset"]<i&&(this[t+"_RankOffset"]=i+n[parseInt(r.toString(),10)].width/2+s)},t.prototype.getType=function(t){return"internalVertex"===t?"internalVertex":"internalEdge"},t.prototype.updateRankValuess=function(t){this.rankTopY=[],this.rankBottomY=[];for(var e=0;e<t.ranks.length;e++)this.rankTopY[parseInt(e.toString(),10)]=Number.MAX_VALUE,this.rankBottomY[parseInt(e.toString(),10)]=-Number.MAX_VALUE},t.prototype.setVertexLocationValue=function(t,e,i){var n,s=t.cell.geometry;"TopToBottom"===e||"BottomToTop"===e?(s.x,n=s.y):(s.y,n=s.x),"RightToLeft"===e?(s.y,n=i.width-s.x-s.height,this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],n),this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],n+s.height)):(this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],n),this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],n+s.height))},t.prototype.calculateRectValue=function(t){var e={x:0,y:0,right:0,bottom:0,height:0,width:0};return e.x=t.offsetX-t.actualSize.width/2,e.right=t.offsetX+t.actualSize.width/2,e.y=t.offsetY-t.actualSize.height/2,e.bottom=t.offsetY+t.actualSize.height/2,e},t.prototype.isNodeOverLap=function(t,e){for(var i={x:0,y:0,right:0,bottom:0,height:0,width:0},n=0;n<this.vertices.length;n++){var s={x:0,y:0,width:0,height:0},r=this.nameTable[this.vertices[parseInt(n.toString(),10)].value];t.id!==r.id&&0!==r.offsetX&&0!==r.offsetY&&(i=this.calculateRectValue(t),s=this.calculateRectValue(r),this.isIntersect(s,i,e)&&("TopToBottom"===e.orientation||"BottomToTop"===e.orientation?t.offsetX+=e.horizontalSpacing:t.offsetY+=e.verticalSpacing,this.isNodeOverLap(t,e)))}},t.prototype.isIntersect=function(t,e,i){return!(Math.floor(t.right+i.horizontalSpacing)<=Math.floor(e.x)||Math.floor(t.x-i.horizontalSpacing)>=Math.floor(e.right)||Math.floor(t.y-i.verticalSpacing)>=Math.floor(e.bottom)||Math.floor(t.bottom+i.verticalSpacing)<=Math.floor(e.y))},t.prototype.updateMargin=function(t,e,i,n){var s={x:0,y:0,width:n.x,height:n.y},r=i.x,o=i.y,a=i.x+i.width,l=i.y+i.height,h=t.bounds?t.bounds:s;if("TopToBottom"===e.orientation||"BottomToTop"===e.orientation){switch(t.horizontalAlignment){case"Auto":case"Left":e.marginX=h.x-r+t.margin.left;break;case"Right":e.marginX=h.x+h.width-t.margin.right-a;break;case"Center":e.marginX=h.x+h.width/2-(r+a)/2}switch(t.verticalAlignment){case"Top":var c=h.y+t.margin.top;e.marginY="TopToBottom"===e.orientation?c:-c;break;case"Bottom":var d=h.y+h.height-t.margin.bottom;e.marginY="TopToBottom"===e.orientation?d-l:-(d-l);break;case"Auto":case"Center":var p=h.y+h.height/2;e.marginY="TopToBottom"===e.orientation?p-(o+l)/2:(o+l)/2-p}}else{switch(t.horizontalAlignment){case"Auto":case"Left":var u=h.x+t.margin.left;e.marginX="LeftToRight"===e.orientation?u:-u;break;case"Right":var g;g=h.x+h.width-t.margin.right,e.marginX="LeftToRight"===e.orientation?g-a:a-g;break;case"Center":p=void 0;p=h.width/2+h.x,e.marginX="LeftToRight"===e.orientation?p-(o+l)/2:(r+a)/2-p}switch(t.verticalAlignment){case"Top":e.marginY=h.y+t.margin.top-o;break;case"Auto":case"Center":e.marginY=h.y+h.height/2-(o+l)/2;break;case"Bottom":e.marginY=h.y+h.height-t.margin.bottom-l}}},t.prototype.placementStage=function(t,e,i){var n=this.coordinateAssignment(e,i,parent,t);return n.model=t,n.widestRankValue=null,this.placementStageExecute(n),{marginX:n.marginX+t.layout.horizontalSpacing,marginY:n.marginY+t.layout.verticalSpacing}},t.prototype.coordinateAssignment=function(t,e,i,n){var s={};return"TopToBottom"===n.layout.orientation||"BottomToTop"===n.layout.orientation?(s.horizontalSpacing=n.layout.horizontalSpacing,s.verticalSpacing=n.layout.verticalSpacing):(s.horizontalSpacing=n.layout.verticalSpacing,s.verticalSpacing=n.layout.horizontalSpacing),s.orientation="north",s.marginX=s.marginX=t,s.marginY=s.marginY=e,s},t.prototype.calculateWidestRank=function(t,e,i){var n=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(n=!0);var s=-t.verticalSpacing,r=0;t.rankSizes=[],t.rankOffset=[];for(var o=i.maxRank;o>=0;o--){for(var a=0,l=i.ranks[parseInt(o.toString(),10)],h=n?t.marginY:t.marginX,c=0;c<l.length;c++){var d=l[parseInt(c.toString(),10)];if(this.crossReduction.isVertex(d)){var p=d;if(p.cell&&(p.cell.inEdges||p.cell.outEdges)){var u=this.nameTable[p.cell.name];p.width=u.actualSize.width,p.height=u.actualSize.height,a=Math.max(a,n?p.width:p.height)}}else if(d){var g=d,m=1;null!=g.edges&&(m=g.edges.length),d.width=10*(m-1)}n&&(d.height||(d.height=0)),h+=(n?d.height:d.width)/2,this.setXY(d,o,h,!!n),this.setTempVariable(d,o,h),(h+=(n?d.height:d.width)/2+t.horizontalSpacing)>t.widestRankValue&&(t.widestRankValue=h,t.widestRank=o),t.rankSizes[parseInt(o.toString(),10)]=h}t.rankOffset[parseInt(o.toString(),10)]=s;var f=a/2+r/2+t.verticalSpacing;r=a,"north"===t.orientation||"west"===t.orientation?s+=f:s-=f;for(c=0;c<l.length;c++){var y=l[parseInt(c.toString(),10)];this.setXY(y,o,s,!n)}}},t.prototype.setTempVariable=function(t,e,i){this.crossReduction.isVertex(t)?t.temp[0]=i:t.temp[e-t.minRank-1]=i},t.prototype.setXY=function(t,e,i,n,s,r){t&&t.cell?t.cell.inEdges.length>0||t.cell.outEdges.length>0?n?t.y[0]=i:t.x[0]=i:n?t.y[e-t.minRank-1]=i:t.x[e-t.minRank-1]=i:this.setEdgeXY(s,t,r,e)},t.prototype.rankCoordinates=function(t,e,i,n){var s=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(s=!0);for(var r=n.ranks[parseInt(e.toString(),10)],o=0,a=(s?t.marginY:t.marginX)+(t.widestRankValue-t.rankSizes[parseInt(e.toString(),10)])/2,l=0;l<r.length;l++){var h=r[parseInt(l.toString(),10)];if(this.crossReduction.isVertex(h)){var c=this.nameTable[h.cell.name];h.width=c.actualSize.width,h.height=c.actualSize.height,o=Math.max(o,h.height)}else{var d=h,p=1;null!=d.edges&&(p=d.edges.length),s?h.height=10*(p-1):h.width=10*(p-1)}var u=(s?h.height:h.width)/2;a+=u,this.setXY(h,e,a,!!s),this.setTempVariable(h,e,a),a+=u+t.horizontalSpacing}},t.prototype.initialCoords=function(t,e,i){this.calculateWidestRank(t,e,i);for(var n=t.widestRank;n>=0;n--)n<i.maxRank&&this.rankCoordinates(t,n,e,i);for(n=t.widestRank+1;n<=i.maxRank;n++)n>0&&this.rankCoordinates(t,n,e,i)},t.prototype.isAncestor=function(t,e){if(null!=e&&null!=t.hashCode&&null!=e.hashCode&&t.hashCode.length<e.hashCode.length){if(t.hashCode===e.hashCode)return!0;if(null==t.hashCode||null==t.hashCode)return!1;for(var i=0;i<t.hashCode.length;i++)if(t.hashCode[parseInt(i.toString(),10)]!==e.hashCode[parseInt(i.toString(),10)])return!1;return!0}return!1},t.prototype.weightedCellSorter=function(t,e){var i={};return i.cell=t||null,i.weightedValue=e||0,i.visited=!1,i.rankIndex=null,i},t.prototype.minNode=function(t,e){for(var i=[],n={map:{}},s=[],r=0;r<=e.maxRank;r++){s[parseInt(r.toString(),10)]=e.ranks[parseInt(r.toString(),10)];for(var o=0;o<s[parseInt(r.toString(),10)].length;o++){var a=s[parseInt(r.toString(),10)][parseInt(o.toString(),10)],l=this.weightedCellSorter(a,r);l.rankIndex=o,l.visited=!0,i.push(l),e.setDictionaryForSorter(n,a,l,!0)}}for(var h=10*i.length,c=0;i.length>0&&c<=h;){var d=i.shift(),p=d.cell,u=d.weightedValue,g=d.rankIndex,m=this.crossReduction.getConnectedCellsOnLayer(p,u),f=this.crossReduction.getConnectedCellsOnLayer(p,u,!0),y=m?m.length:0,v=f?f.length:0,b=this.medianXValue(t,m,u+1),C=this.medianXValue(t,f,u-1),I=y+v,M=this.crossReduction.getTempVariable(p,u),S=M;I>0&&(S=(b*y+C*v)/I),1===y&&1===v?S=C*v/v:1===y&&(S=b*y/y);var x=!1,w=void 0;if(S<M-1)if(0===g)w=S,x=!0;else{var D=s[parseInt(u.toString(),10)][g-1],E=this.crossReduction.getTempVariable(D,u);(E=E+D.width/2+t.intraCellSpacing+p.width/2)<S?(w=S,x=!0):E<this.crossReduction.getTempVariable(p,u)-1&&(w=E,x=!0)}else if(S>M+1){if(g===s[parseInt(u.toString(),10)].length-1)w=S,x=!0;else{var T=s[parseInt(u.toString(),10)][g+1],A=this.crossReduction.getTempVariable(T,u);(A=A-T.width/2-t.intraCellSpacing-p.width/2)>S?(w=S,x=!0):A>this.crossReduction.getTempVariable(p,u)+1&&(w=A,x=!0)}}x&&(this.setTempVariable(p,u,w),this.updateNodeList(i,n,m,e),this.updateNodeList(i,n,f,e)),this.crossReduction.isVertex(d.cell)&&(d.visited=!1),c++}},t.prototype.updateNodeList=function(t,e,i,n){for(var s=0;s<i.length;s++){var r=i[parseInt(s.toString(),10)],o=n.getDictionaryForSorter(e,r);null!=o&&!1===o.visited&&(o.visited=!0,t.push(o))}},t.prototype.medianXValue=function(t,e,i){if(!e||0===e.length)return 0;for(var n=[],s=0;s<e.length;s++)n[parseInt(s.toString(),10)]=this.crossReduction.getTempVariable(e[parseInt(s.toString(),10)],i);if(n.sort(function(t,e){return t-e}),e.length%2==1)return n[Math.floor(e.length/2)];var r=e.length/2;return(n[r-1]+n[parseInt(r.toString(),10)])/2},t.prototype.placementStageExecute=function(t){var e=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(e=!0),t.jettyPositions={};var i=t.model;e?t.currentYDelta=0:t.currentXDelta=0,this.initialCoords(t,{model:i},i),this.minNode(t,i);var n=1e8;t.maxIterations||(t.maxIterations=8);for(var s=0;s<t.maxIterations;s++){if((e?t.currentYDelta:t.currentXDelta)<n){for(var r=0;r<i.ranks.length;r++)for(var o=i.ranks[parseInt(r.toString(),10)],a=0;a<o.length;a++){var l=o[parseInt(a.toString(),10)];this.setXY(l,r,this.crossReduction.getTempVariable(l,r),!!e)}n=e?t.currentYDelta:t.currentXDelta}e?t.currentYDelta=0:t.currentXDelta=0}this.setCellLocations(t,i)},t.prototype.setCellLocations=function(t,e){for(var i=this.getValues(e.vertexMapper),n=0;n<i.length;n++)this.setVertexLocation(t,i[parseInt(n.toString(),10)])},t.prototype.garphModelsetVertexLocation=function(t,e,i,n){var s=e.geometry,r=null;return null!=s&&(r={x:i,y:n,width:s.width,height:s.height},s.x===i&&s.y===n||(e.geometry=r)),r},t.prototype.setVertexLocation=function(t,e){var i=!1;"LeftToRight"!==t.model.layout.orientation&&"RightToLeft"!==t.model.layout.orientation||(i=!0);var n=e.cell,s=e.x[0]-e.width/2,r=e.y[0]-e.height/2;this.garphModelsetVertexLocation(t,n,s,r),i?(t.marginY||(t.marginY=0),t.marginY=Math.max(t.marginY,r+e.height)):(t.marginX||(t.marginX=0),t.marginX=Math.max(t.marginX,s+e.width))},t.prototype.getValues=function(t){var e=[];if(t.map)for(var i=0,n=Object.keys(t.map);i<n.length;i++){var s=n[i];e.push(t.map[""+s])}return e},t.prototype.crossingStage=function(t){this.crossReduction.execute(t)},t.prototype.layeringStage=function(t){this.initialRank(t),this.fixRanks(t)},t.prototype.initialRank=function(t){for(var e=t.startNodes,i=t.getDictionaryValues(t.vertexMapper),n=e.slice();e.length>0;){for(var s=(d=e[0]).connectsAsTarget,r=d.connectsAsSource,o=!0,a=1e8,l=0;l<s.length;l++){if(5270620!==(g=s[parseInt(l.toString(),10)]).temp[0]){o=!1;break}var h=g.source;a=Math.min(a,h.temp[0]-1)}if(o){if(d.temp[0]=a,t.maxRank||(t.maxRank=1e8),t.maxRank=Math.min(t.maxRank,a),null!=r)for(l=0;l<r.length;l++){(g=r[parseInt(l.toString(),10)]).temp[0]=5270620,-1===(h=g.target).temp[0]&&(e.push(h),h.temp[0]=-2)}e.shift()}else{var c=e.shift();if(e.push(d),c===d&&1===e.length)break}}for(l=0;l<i.length;l++)i[parseInt(l.toString(),10)].temp[0]-=t.maxRank;for(l=0;l<n.length;l++)for(var d,p=0,u=(s=(d=n[parseInt(l.toString(),10)]).connectsAsSource,0);u<s.length;u++){var g;h=(g=s[parseInt(u.toString(),10)]).target;d.temp[0]=Math.max(p,h.temp[0]+1),p=d.temp[0]}t.maxRank=1e8-t.maxRank},t.prototype.fixRanks=function(t){t.fixRanks()},t.prototype.cycleStage=function(t){var e={};t.startNodes=[];for(var i=t.getDictionaryValues(t.vertexMapper),n=[],s=0;s<i.length;s++)i[parseInt(s.toString(),10)].temp[0]=-1,n[i[parseInt(s.toString(),10)].id]=i[parseInt(s.toString(),10)];var r=null;if(null!=t.roots){var o=t.roots;r=[];for(s=0;s<o.length;s++)r[parseInt(s.toString(),10)]=t.getDictionary(t.vertexMapper,o[parseInt(s.toString(),10)]),null!=r[parseInt(s.toString(),10)]&&t.startNodes.push(r[parseInt(s.toString(),10)])}t.visit("removeParentConnection",r,!0,null,{seenNodes:e,unseenNodes:n});var a=t.clone(e,null,!0);t.visit("removeNodeConnection",n,!0,a,{seenNodes:e,unseenNodes:n})},t.prototype.remove=function(t,e){var i=e.indexOf(t);return-1!==i&&e.splice(i,1),t},t.prototype.invert=function(t,e){var i=t.source;t.source=t.target,t.target=i,t.isReversed=!t.isReversed},t.prototype.getEdgesBetween=function(t,e,i){for(var n=this.getEdges(t),s=[],r=0;r<n.length;r++){var o=this.getVisibleTerminal(n[parseInt(r.toString(),10)],!0),a=this.getVisibleTerminal(n[parseInt(r.toString(),10)],!1);(o===t&&a===e||!i&&o===e&&a===t)&&s.push(n[parseInt(r.toString(),10)])}return s},t}(),vk=function(){function t(t,e,i,n){this.multiObjectIdentityCounter=0,this.dfsCount=0,this.hierarchicalUtil=new yk,this.roots=i,this.vertexMapper={map:{}};var s=[];this.layout=n,this.maxRank=1e8,this.edgeMapper={map:{}},this.hierarchicalLayout=t,this.createInternalCells(t,e,s,n);for(var r=0;r<e.length;r++){for(var o=s[parseInt(r.toString(),10)].connectsAsSource,a=0;a<o.length;a++){var l=o[parseInt(a.toString(),10)],h=l.edges;if(null!=h&&h.length>0){var c=h[0],d=t.getVisibleTerminal(c,!1),p=this.getDictionary(this.vertexMapper,d);s[parseInt(r.toString(),10)]===p&&(d=t.getVisibleTerminal(c,!0),p=this.getDictionary(this.vertexMapper,d)),null!=p&&s[parseInt(r.toString(),10)]!==p&&(l.target=p,0===p.connectsAsTarget.length&&(p.connectsAsTarget=[]),p.connectsAsTarget.indexOf(l)<0&&p.connectsAsTarget.push(l))}}s[parseInt(r.toString(),10)].temp[0]=1}}return t.prototype.resetEdge=function(t){var e={x:0,y:0,width:0,height:0,relative:!0};return t.geometry=e,t},t.prototype.createInternalCells=function(t,e,i,n){for(var s=0;s<e.length;s++){i[parseInt(s.toString(),10)]={x:[],y:[],temp:[],cell:e[parseInt(s.toString(),10)],id:e[parseInt(s.toString(),10)].name,connectsAsTarget:[],connectsAsSource:[],type:"internalVertex"},this.setDictionary(this.vertexMapper,e[parseInt(s.toString(),10)],i[parseInt(s.toString(),10)]);var r=t.getEdges(e[parseInt(s.toString(),10)]);i[parseInt(s.toString(),10)].connectsAsSource=[];for(var o=0;o<r.length;o++){var a=t.getVisibleTerminal(r[parseInt(o.toString(),10)],!1);if(a!==e[parseInt(s.toString(),10)]){var l=t.getEdgesBetween(e[parseInt(s.toString(),10)],a,!1),h=t.getEdgesBetween(e[parseInt(s.toString(),10)],a,!0);if(null!=l&&l.length>0&&2*h.length>=l.length){var c={x:[],y:[],temp:[],edges:l,ids:[]};if(n.enableLayoutRouting)for(var d=0;d<l.length;d++){var p=l[parseInt(d.toString(),10)];this.setDictionary(this.edgeMapper,void 0,c,p.id),this.resetEdge(p)}c.source=i[parseInt(s.toString(),10)];for(var u=0;u<l.length;u++)c.ids.push(l[parseInt(u.toString(),10)].id);c.source=i[parseInt(s.toString(),10)],i[parseInt(s.toString(),10)].connectsAsSource||(i[parseInt(s.toString(),10)].connectsAsSource=[]),i[parseInt(s.toString(),10)].connectsAsSource.indexOf(c)<0&&i[parseInt(s.toString(),10)].connectsAsSource.push(c)}}}i[parseInt(s.toString(),10)].temp[0]=0}},t.prototype.fixRanks=function(){var t=[];this.ranks=[];for(var e=0;e<this.maxRank+1;e++)t[parseInt(e.toString(),10)]=[],this.ranks[parseInt(e.toString(),10)]=t[parseInt(e.toString(),10)];var i=null;if(null!=this.roots){var n=this.roots;i=[];for(e=0;e<n.length;e++){var s=n[parseInt(e.toString(),10)],r=this.getDictionary(this.vertexMapper,s);i[parseInt(e.toString(),10)]=r}}this.visit("updateMinMaxRank",i,!1,null,{seenNodes:null,unseenNodes:null,rankList:t})},t.prototype.updateMinMaxRank=function(t,e,i){var n=i.parent,s=i.root,r=i.edge,o=i.rankList;if((s.maxRank||0===s.maxRank||(s.maxRank=-1),s.minRank||0===s.minRank||(s.minRank=-1),0===e&&s.maxRank<0&&s.minRank<0&&(o[s.temp[0]].push(s),s.maxRank=s.temp[0],s.minRank=s.temp[0],s.temp[0]=o[s.maxRank].length-1),null!=n&&null!=r)&&n.maxRank-s.maxRank>1){r.maxRank=n.maxRank,r.minRank=s.maxRank,r.temp=[],r.x=[],r.y=[];for(var a=r.minRank+1;a<r.maxRank;a++)o[parseInt(a.toString(),10)].push(r),this.hierarchicalUtil.setTempVariable(r,a,o[parseInt(a.toString(),10)].length-1)}},t.prototype.setDictionary=function(t,e,i,n){if(n){r=t.map[""+n];return t.map[""+n]=i,r}var s=e.name,r=t.map[""+s];return t.map[""+s]=i,r},t.prototype.setDictionaryForSorter=function(t,e,i,n){var s=e.id,r=t.map[""+s];return t.map[""+s]=i,r},t.prototype.getDictionary=function(t,e){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=e.name;return i?t.map[""+i]:e.layoutObjectId?t.map[e.layoutObjectId]:(e.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,e.layoutObjectId)},t.prototype.getDictionaryForSorter=function(t,e){this.multiObjectIdentityCounter||0===this.multiObjectIdentityCounter||(this.multiObjectIdentityCounter=0);var i=e.id;return i?t.map[""+i]:e.layoutObjectId?t.map[e.layoutObjectId]:(e.layoutObjectId="graphHierarchyNode#"+this.multiObjectIdentityCounter++,e.layoutObjectId)},t.prototype.getDictionaryValues=function(t){for(var e=[],i=0,n=Object.keys(t.map);i<n.length;i++){var s=n[i];e.push(t.map[""+s])}return e},t.prototype.visit=function(t,e,i,n,s){if(null!=e){for(var r=0;r<e.length;r++){var o=e[parseInt(r.toString(),10)];null!=o&&(null==n&&(n=new Object),s.parent=null,s.root=o,s.edge=null,i?(o.hashCode=[],o.hashCode[0]=this.dfsCount,o.hashCode[1]=r,this.extendedDfs(t,n,r,0,s)):this.depthFirstSearch(t,n,0,s))}this.dfsCount++}},t.prototype.depthFirstSearch=function(t,e,i,n){var s=n.root;if(null!=s){var r=s.id;if(null==e[""+r]){e[""+r]=s,this.updateConnectionRank(t,i,0,n);for(var o=s.connectsAsSource.slice(),a=0;a<o.length;a++){var l=o[parseInt(a.toString(),10)],h=l.target;n.parent=s,n.root=h,n.edge=l,this.depthFirstSearch(t,e,i+1,n)}}else this.updateConnectionRank(t,i,1,n)}},t.prototype.updateConnectionRank=function(t,e,i,n){var s=n.parent,r=n.root,o=n.edge;if("removeParentConnection"===t||"removeNodeConnection"===t){var a="removeNodeConnection"===t;this.removeConnectionEdge(s,r,o,e,n,a)}"updateMinMaxRank"===t&&this.updateMinMaxRank(e,i,n)},t.prototype.removeConnectionEdge=function(t,e,i,n,s,r){var o=s.seenNodes,a=s.unseenNodes;this.hierarchicalUtil.isAncestor(e,t)&&(this.hierarchicalUtil.invert(i,0),this.hierarchicalUtil.remove(i,t.connectsAsSource),r?(e.connectsAsSource.push(i),t.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,e.connectsAsTarget)):(t.connectsAsTarget.push(i),this.hierarchicalUtil.remove(i,e.connectsAsTarget),e.connectsAsSource.push(i))),o[e.id]=e,delete a[e.id]},t.prototype.extendedDfs=function(t,e,i,n,s){var r=s.parent,o=s.root;s.edge;if(null!=o){if(null!=r&&(null==o.hashCode||o.hashCode[0]!==r.hashCode[0])){var a=r.hashCode.length+1;o.hashCode=r.hashCode.slice(),o.hashCode[a-1]=i}var l=o.id;if(null==e[""+l]){e[""+l]=o,this.updateConnectionRank(t,n,0,s);for(var h=o.connectsAsSource.slice(),c=0;c<h.length;c++){var d=h[parseInt(c.toString(),10)],p=d.target;s.parent=o,s.root=p,s.edge=d,this.extendedDfs(t,e,c,n+1,s)}}else this.updateConnectionRank(t,n,1,s)}},t.prototype.clone=function(t,e,i){if(null!=t&&"function"==typeof t.constructor){for(var n=t.constructor(),s=0,r=Object.keys(t);s<r.length;s++){var o=r[s];"layoutObjectId"!==o&&(null==e||e.indexOf(o)<0)&&i&&(n[""+o]=t[""+o])}return n}return null},t}(),bk=function(){function t(){}return t.prototype.calculateCrossings=function(t){for(var e=t.ranks.length,i=0,n=1;n<e;n++)i+=this.calculateRankCrossing(n,t);return i},t.prototype.getTempVariable=function(t,e){return t?this.isVertex(t)?t.temp[0]:t.temp[e-t.minRank-1]:0},t.prototype.calculateRankCrossing=function(t,e){for(var i=0,n=e.ranks[parseInt(t.toString(),10)],s=e.ranks[t-1],r=[],o=0;o<n.length;o++){for(var a=n[parseInt(o.toString(),10)],l=this.getTempVariable(a,t),h=this.getConnectedCellsOnLayer(a,t,!0),c=[],d=0;d<h.length;d++){var p=h[parseInt(d.toString(),10)],u=this.getTempVariable(p,t-1);c.push(u)}c.sort(function(t,e){return t-e}),r[parseInt(l.toString(),10)]=c}var g=[];for(o=0;o<r.length;o++)g=g.concat(r[parseInt(o.toString(),10)]);for(var m=1;m<s.length;)m<<=1;var f=2*m-1;m-=1;var y=[];for(o=0;o<f;++o)y[parseInt(o.toString(),10)]=0;for(o=0;o<g.length;o++){var v=g[parseInt(o.toString(),10)]+m;for(++y[parseInt(v.toString(),10)];v>0;)v%2&&(i+=y[v+1]),v=v-1>>1,++y[parseInt(v.toString(),10)]}return i},t.prototype.execute=function(t){this.nestedBestRanks=[];for(var e=0;e<t.ranks.length;e++)this.nestedBestRanks[parseInt(e.toString(),10)]=t.ranks[parseInt(e.toString(),10)].slice();var i=0,n=this.calculateCrossings(t);for(e=0;e<24&&i<2;e++){this.weightedMedian(e,t);var s=this.calculateCrossings(t);if(s<n){n=s,i=0;for(var r=0;r<this.nestedBestRanks.length;r++)for(var o=t.ranks[parseInt(r.toString(),10)],a=0;a<o.length;a++){var l=o[parseInt(a.toString(),10)],h=this.nestedBestRanks[parseInt(r.toString(),10)][l.temp[0]],c=!0;l.edges&&h&&!h.edges&&(c=!1),h&&c&&(this.nestedBestRanks[parseInt(r.toString(),10)][l.temp[0]]=l)}}else{i++;for(r=0;r<this.nestedBestRanks.length;r++)for(o=t.ranks[parseInt(r.toString(),10)],a=0;a<o.length;a++){l=o[parseInt(a.toString(),10)];this.setTempVariable(l,r,a)}}if(0===n)break}var d=[],p=[];for(e=0;e<t.maxRank+1;e++)p[parseInt(e.toString(),10)]=[],d[parseInt(e.toString(),10)]=p[parseInt(e.toString(),10)];for(e=0;e<this.nestedBestRanks.length;e++)for(r=0;r<this.nestedBestRanks[parseInt(e.toString(),10)].length;r++)p[parseInt(e.toString(),10)].push(this.nestedBestRanks[parseInt(e.toString(),10)][parseInt(r.toString(),10)]);t.ranks=d},t.prototype.isVertex=function(t){return!!(t&&t.cell&&(t.cell.inEdges&&t.cell.inEdges.length||t.cell.outEdges&&t.cell.outEdges.length))},t.prototype.weightedMedian=function(t,e){var i=t%2==0;if(i)for(var n=e.maxRank-1;n>=0;n--)this.medianRank(n,i);else for(n=1;n<e.maxRank;n++)this.medianRank(n,i)},t.prototype.getConnectedCellsOnLayer=function(t,e,i){void 0===i&&(i=!1);var n="nextLayerConnectedCells",s="connectsAsTarget";if(i&&(n="previousLayerConnectedCells",s="connectsAsSource"),t){if(this.isVertex(t)){if(null==t[""+n]){t[""+n]=[],t[""+n][0]=[];for(var r=0;r<t[""+s].length;r++){var o=t[""+s][parseInt(r.toString(),10)];void 0===o.maxRank&&(o.maxRank=-1),-1===o.maxRank||(i?o.minRank===e-1:o.maxRank===e+1)?t[""+n][0].push(i?o.target:o.source):t[""+n][0].push(o)}}return t[""+n][0]}if(null==t[""+n]){t[""+n]=[];for(r=0;r<t.temp.length;r++)t[""+n][parseInt(r.toString(),10)]=[],r===(i?0:t.temp.length-1)?t[""+n][parseInt(r.toString(),10)].push(i?t.target:t.source):t[""+n][parseInt(r.toString(),10)].push(t)}return t[""+n][e-t.minRank-1]}return null},t.prototype.medianValue=function(t,e){for(var i=[],n=0,s=0;s<t.length;s++){var r=t[parseInt(s.toString(),10)];i[n++]=this.getTempVariable(r,e)}if(i.sort(function(t,e){return t-e}),n%2==1)return i[Math.floor(n/2)];if(2===n)return(i[0]+i[1])/2;var o=n/2,a=i[o-1]-i[0],l=i[n-1]-i[parseInt(o.toString(),10)];return(i[o-1]*l+i[parseInt(o.toString(),10)]*a)/(a+l)},t.prototype.setTempVariable=function(t,e,i){t&&(t.temp[0]=i)},t.prototype.medianRank=function(t,e){for(var i=this.nestedBestRanks[parseInt(t.toString(),10)].length,n=[],s=[],r=0;r<i;r++){var o=this.nestedBestRanks[parseInt(t.toString(),10)][parseInt(r.toString(),10)],a={medianValue:0};a.cell=o;var l=void 0,h=void 0;h=e?t+1:t-1,null!=(l=e?this.getConnectedCellsOnLayer(o,t):this.getConnectedCellsOnLayer(o,t,!0))&&0!==l.length?(a.medianValue=this.medianValue(l,h),n.push(a)):s[this.getTempVariable(o,t)]=!0}n.sort(this.compare);for(r=0;r<i;r++)if(null==s[parseInt(r.toString(),10)]&&n.length>0){o=n.shift().cell;this.setTempVariable(o,t,r)}},t.prototype.compare=function(t,e){if(null!=t&&null!=e){if(e.medianValue>t.medianValue)return-1;if(e.medianValue<t.medianValue)return 1}return 0},t}(),Ck=function(){function t(){this.edgeMapper=[]}return t.prototype.arrangeElements=function(t,e){var i=t.model.layout,n="LeftToRight"===e.orientation||"RightToLeft"===e.orientation?i.verticalSpacing:i.horizontalSpacing;this.groupLayoutCells(t),this.createMatrixCells(t);for(var s=0;s<t.matrix.length;s++)for(var r=t.matrix[parseInt(s.toString(),10)].key,o=t.matrix[parseInt(r.toString(),10)].value,a=1;a<o.length;a++){var l=o[parseInt(a.toString(),10)],h=o[a-1];l.offset+=h.offset+h.size/2+n+l.size/2}t.roots.sort(function(e,i){return e.cells[0]&&i.cells[0]?t.model.roots.indexOf(e.cells[0].cell)-t.model.roots.indexOf(i.cells[0].cell):0});for(s=0;s<t.roots.length;s++){var c=t.roots[parseInt(s.toString(),10)];this.arrangeMatrix(c,null,t)}for(var d=0;d<t.matrix.length;d++){var p=t.matrix[parseInt(d.toString(),10)].value;for(a=0;a<p.length;a++){for(var u=(l=p[parseInt(a.toString(),10)]).visitedParents.slice(),g=0;g<l.visitedParents.length;g++){var m=l.visitedParents[parseInt(g.toString(),10)];m&&this.containsValue(m.ignoredChildren,l)&&u.splice(u.indexOf(m),1)}if(u.length>1){var f=u[0],y=u[u.length-1],v=this.findParentVertexCellGroup(f),b=this.findParentVertexCellGroup(y);f!==v&&v.offset<f.offset&&(f=v),y!==b&&b.offset>y.offset&&(y=v);var C=(y.offset+.5*y.size+f.offset-.5*f.size)/2,I=l.initialOffset,M=l.offset;M!==I&&(this.seenCells=[],C>=I&&C<=M?this.translateMatrixCells(C-l.offset,l):C<I&&this.translateMatrixCells(I-l.offset,l),this.seenCells=[])}}}this.setXYforMatrixCell(t)},t.prototype.groupLayoutCells=function(t){for(var e=t.model.ranks,i=e.length-1;i>=0;i--){for(var n=[],s=0;s<e[parseInt(i.toString(),10)].length;s++){var r=e[parseInt(i.toString(),10)][parseInt(s.toString(),10)];"internalVertex"===this.getType(r.type)&&n.push(e[parseInt(i.toString(),10)][parseInt(s.toString(),10)])}for(var o=[],a=0;a<e[parseInt(i.toString(),10)].length;a++){r=e[parseInt(i.toString(),10)][parseInt(a.toString(),10)];"internalEdge"===this.getType(r.type)&&o.push(r)}for(;n.length>1;){for(var l=n[0],h=this.selectIds(l.connectsAsTarget,!0),c=this.selectIds(l.connectsAsSource,!1);n.length>1;){var d=n[1],p=this.selectIds(d.connectsAsTarget,!0),u=this.selectIds(d.connectsAsSource,!1),g=this.compareLists(h,p),m=this.compareLists(c,u);if(!g||!m)break;this.updateMutualSharing(n[0],d.id),this.updateMutualSharing(n[1],l.id),n.splice(1,1)}n.splice(0,1)}for(;o.length>1;){var f=o[0],y=f.source,v=f.target;if(null!=y.identicalSibiling){for(var b=[],C=0;C<o.length;C++){var I=o[parseInt(C.toString(),10)];I.target===v&&b.push(I)}for(C=0;C<b.length;C++){var M=b[parseInt(C.toString(),10)];this.containsValue(y.identicalSibiling,M.source.id)&&(M.source.identicalSibiling=null)}f.source.identicalSibiling=null}o.splice(0,1)}}},t.prototype.createMatrixCells=function(t){for(var e=t.model.layout,i="LeftToRight"===e.orientation||"RightToLeft"===e.orientation,n=i?e.verticalSpacing:e.horizontalSpacing,s=i?e.horizontalSpacing:e.verticalSpacing,r=t.model.ranks,o=[],a=-s,l=r.length-1;l>=0;l--){var h=0,c=r.length-1-l,d=r[parseInt(l.toString(),10)].slice(),p=[];t.matrix.push({key:c,value:p});var u=[];for(o.push({index:c,value:u});d.length>0;){var g=d[0],m={level:c,parents:[],children:[],visitedParents:[],visitedChildren:[],ignoredChildren:[],cells:[],size:0,offset:0,initialOffset:0};p.push(m);var f=this.getType(g.type);if("internalVertex"===f){if(m.cells.push(g),null!=g.identicalSibiling)for(var y=0;y<d.length;y++){var v=d[parseInt(y.toString(),10)];if("internalVertex"===this.getType(v.type)&&this.containsValue(g.identicalSibiling,v.id)&&(m.cells.push(v),m.cells.length>g.identicalSibiling.length))break}for(y=0;y<m.cells.length;y++){v=m.cells[parseInt(y.toString(),10)];if("internalVertex"===this.getType(v.type)){var b=v.cell.geometry;if(m.size+=i?b.height:b.width,h=Math.max(h,i?b.width:b.height),u.push({key:v.id,value:m}),v.connectsAsTarget.length>0)for(var C=0;C<v.connectsAsTarget.length;C++){var I=v.connectsAsTarget[parseInt(C.toString(),10)],M=null;if(this.containsValue(o[c-1].value,I.ids)?M=I.ids:this.containsValue(o[c-1].value,I.source.id)&&(M=I.source.id),null!=M){for(var S=o[c-1].value,x=void 0,w=0;w<S.length;w++)if(S[parseInt(w.toString(),10)].key===M){x=S[parseInt(w.toString(),10)].value;break}this.containsValue(m.parents,x)||m.parents.push(x),this.containsValue(x.children,m)||x.children.push(m)}}var D=m.cells[parseInt(y.toString(),10)];-1!==d.indexOf(D)&&d.splice(d.indexOf(D),1)}}m.size+=(m.cells.length-1)*n}else if("internalEdge"===f){m.cells.push(g);for(y=0;y<m.cells.length;y++){var E=m.cells[parseInt(y.toString(),10)];if("internalEdge"===this.getType(E.type)&&null!=E.edges){var T=-5;for(C=0;C<E.edges.length;C++)T+=6;m.size+=T}u.push({key:E.ids,value:m});M=null;if(this.containsValue(o[c-1].value,E.ids)?M=E.ids:this.containsValue(o[c-1].value,E.source.id)&&(M=E.source.id),null!=M){var A=o[c-1].value;for(x=void 0,w=0;w<A.length;w++)if(A[parseInt(w.toString(),10)].key===M){x=A[parseInt(w.toString(),10)].value;break}this.containsValue(m.parents,x)||m.parents.push(x),this.containsValue(x.children,m)||x.children.push(m)}D=m.cells[parseInt(y.toString(),10)];-1!==d.indexOf(D)&&d.splice(d.indexOf(D),1)}m.size+=(m.cells.length-1)*n}if(m.cells.length){var N=m.cells.filter(function(t){return"internalVertex"===t.type});if(N.length>0)for(var L=function(e){var i=e.cell;if(t.model.roots.some(function(t){return t===i}))return t.roots.push(m),"break"},O=0,k=N;O<k.length;O++){if("break"===L(k[O]))break}}}t.rowOffset.push(a+h/2+s),a+=h+s}},t.prototype.arrangeMatrix=function(t,e,i){var n=i.model.layout,s="LeftToRight"===n.orientation||"RightToLeft"===n.orientation?n.verticalSpacing:n.horizontalSpacing,r=i.matrix,o=r[t.level].value,a=o.indexOf(t);if(t.visitedParents.length>0&&(1===t.visitedParents.length&&(t.initialOffset=t.offset),!this.containsValue(t.visitedParents,e))){var l=t.visitedParents[t.visitedParents.length-1],h=r[l.level].value,c=h.indexOf(l),d=h.indexOf(e),p=a+1<o.length?o[a+1]:void 0;if(-1!==l.ignoredChildren.indexOf(t)||d-c!==1||p&&p.visitedParents.length>0)return t.visitedParents.push(e),void e.ignoredChildren.push(t)}if(t.children.length>0){for(var u=0;u<t.children.length;u++){var g=t.children[parseInt(u.toString(),10)];this.containsValue(t.visitedChildren,g)||(this.arrangeMatrix(g,t,i),t.visitedChildren.push(g))}if(t.visitedChildren.length>0){var m=t.visitedChildren.slice();for(u=0;u<t.ignoredChildren.length;u++){var f=t.ignoredChildren[parseInt(u.toString(),10)];this.containsValue(m,f)&&m.splice(m.indexOf(f),1)}if(m.length>0){var y=m[0],v=m[m.length-1],b=(y.offset-y.size/2+(v.offset+v.size/2))/2;b<t.offset?this.shiftMatrixCells(t.offset-b,y,!0,t,i):b>t.offset&&this.shiftMatrixCells(b-t.offset,t,!1,null,i)}}}else{var C=t.offset;if(a>0){var I=o[a-1];C=I.offset+I.size/2+s+t.size/2}this.shiftMatrixCells(C-t.offset,t,!1,null,i)}this.containsValue(t.visitedParents,e)||t.visitedParents.push(e)},t.prototype.findParentVertexCellGroup=function(t){return t.cells[0]?t:t.parents.length>0?this.findParentVertexCellGroup(t.parents[0]):t},t.prototype.translateMatrixCells=function(t,e){if(0!==t){if(-1!==this.seenCells.indexOf(e))return;if(this.seenCells.push(e),e.offset+=t,e.visitedChildren.length>0)for(var i=0;i<e.visitedChildren.length;i++){var n=e.visitedChildren[parseInt(i.toString(),10)];-1===e.ignoredChildren.indexOf(n)&&this.translateMatrixCells(t,n)}}},t.prototype.setXYforMatrixCell=function(t){for(var e=t.model.layout,i="LeftToRight"===e.orientation||"RightToLeft"===e.orientation,n=i?e.verticalSpacing:e.horizontalSpacing,s=0;s<t.matrix.length;s++)for(var r=t.matrix[parseInt(s.toString(),10)].value,o=0;o<r.length;o++)for(var a=r[parseInt(o.toString(),10)],l=a.offset-a.size/2,h=0;h<a.cells.length;h++){var c=a.cells[parseInt(h.toString(),10)],d=this.getType(c.type);if("internalVertex"===d){var p=c,u=p.cell.geometry.width,g=p.cell.geometry.height;p.cell.geometry=i?new Tn(t.rowOffset[a.level]-u/2,l,u,g):new Tn(l,t.rowOffset[a.level]-g/2,u,g),l+=(i?g:u)+n}else if("internalEdge"===d){var m=c,f=a.visitedParents[0];if(f)for(var y=0;y<f.visitedChildren.length;y++){for(var v=f.visitedChildren[parseInt(y.toString(),10)],b=[],C=0;C<v.cells.length;C++){var I=v.cells[parseInt(C.toString(),10)];"internalVertex"===this.getType(I.type)&&b.push(I)}if(b.length>0){0;break}}for(C=0;C<m.edges.length;C++){var M=m.edges[parseInt(C.toString(),10)],S=this.getPointvalue(l+.5,t.rowOffset[a.level]);if(i&&(S=this.getPointvalue(t.rowOffset[a.level],l+.5)),this.containsValue(this.getEdgeMapper(),M)){var x=void 0;for(y=0;y<this.getEdgeMapper().length;y++)if(this.getEdgeMapper()[parseInt(y.toString(),10)].key===M){x=y;break}this.getEdgeMapper()[parseInt(x.toString(),10)].value.push(S)}l+=6}l+=n}}},t.prototype.getType=function(t){return"internalVertex"===t?"internalVertex":"internalEdge"},t.prototype.selectIds=function(t,e){for(var i=[],n=0;n<t.length;n++){var s=t[parseInt(n.toString(),10)];e?i.push(s.source.id):i.push(s.target.id)}return i},t.prototype.compareLists=function(t,e){var i=t.slice(),n=e.slice();if(i.length===n.length){if(0===i.length)return!0;for(var s=!0,r=0;r<n.length;r++){var o=n[parseInt(r.toString(),10)];if(-1===i.indexOf(o)){s=!1;break}}return s}return!1},t.prototype.updateMutualSharing=function(t,e){null!=t.identicalSibiling||(t.identicalSibiling=[]),t.identicalSibiling.push(e)},t.prototype.containsValue=function(t,e){for(var i=0;i<t.length;i++)if(t[parseInt(i.toString(),10)].key===e||t[parseInt(i.toString(),10)]===e)return!0;return!1},t.prototype.shiftMatrixCells=function(t,e,i,n,s){if(0!==t){for(var r=s.matrix[e.level].value,o=r.indexOf(e),a=o;a<r.length;a++)r[parseInt(a.toString(),10)].offset+=t;if(i)if(e.visitedChildren.length>0){var l=void 0;for(a=0;a<e.visitedChildren.length;a++){var h=e.visitedChildren[parseInt(a.toString(),10)];if(-1===e.ignoredChildren.indexOf(h)){l=h;break}}l&&this.shiftMatrixCells(t,l,!0,e,s)}else{a=1;for(var c=null;o+a<r.length;){var d=r[o+a];if(d.visitedChildren.length>0&&d.visitedChildren.length>d.ignoredChildren.length){c=d;break}a++}if(null!=c){l=void 0;for(var p=0;p<c.visitedChildren.length;p++){h=c.visitedChildren[parseInt(p.toString(),10)];if(-1===c.ignoredChildren.indexOf(h)){l=h;break}}l&&this.shiftMatrixCells(t,l,!0,c,s)}}}},t.prototype.getPointvalue=function(t,e){return{x:Number(t)||0,y:Number(e)||0}},t.prototype.getEdgeMapper=function(){return this.edgeMapper},t.prototype.setEdgeMapper=function(t){this.edgeMapper.push(t)},t.prototype.updateLayout=function(t,e,i,n,s,r,o){var a=(t.x-e.width)/2-e.x,l=(t.y-e.height)/2-e.y;a=Math.round(a),l=Math.round(l);for(var h=[],c=new Tn(e.x+a,e.y+l,e.width,e.height),d=(i.margin,"RightToLeft"===n.orientation||"LeftToRight"===n.orientation),p=d?n.horizontalSpacing:n.verticalSpacing,u=0;u<s.length;u++){var g=s[parseInt(u.toString(),10)];if(null!=g.outEdges&&g.outEdges.length>0)for(var m=g.outEdges.length,f=0;f<m;f++){(P=r[g.outEdges[parseInt(f.toString(),10)]]).pointCollection=[];var y=p/2,v=null;if(m>1){for(var b=-1,C=this.getEdgeMapper(),I=0;I<C.length;I++)if(C[parseInt(I.toString(),10)].key===P){b=I;break}if(-1!==b&&C[parseInt(b.toString(),10)].value.length>0&&"Orthogonal"===P.type){var M=C[parseInt(b.toString(),10)].value[0],S=M.x+n.marginX,x=M.y+n.marginY,w=S,D=x;"BottomToTop"===n.orientation?D=e.height-x:"RightToLeft"===n.orientation&&(w=e.width-S),v=this.getPointvalue(w,D),P.segments=[],this.diagram.connectorPropertyChange(P,{},{type:"Orthogonal",segments:P.segments})}}for(var E=[],T=0;T<P.segments.length;T++){var A=P.segments[parseInt(T.toString(),10)].points;for(var N in A)E.push(A[parseInt(N.toString(),10)])}var L=!1;if(4===E.length&&(m>1&&!v||!v))if((d?E[3].x-E[0].x:E[3].y-E[0].y)>p){var O=o[P.sourceID],k=d?O.maxRowWidth-O.geometry.width:O.maxRowHeight-O.geometry.height;k>0&&(y+=k/2,L=!0)}if(m>1||L){if(E=this.updateConnectorPoints(E,y,v,c,n.orientation),null!=v&&"DifferentPoint"!==this.diagram.layout.connectionPointOrigin||L)for(var z=0;z<E.length;z++){A=E[parseInt(z.toString(),10)];P.pointCollection.push(this.getPointvalue(A.x,A.y))}this.resetConnectorPoints(P)}h.push(P)}if(null!=g.inEdges&&g.inEdges.length>1)for(m=g.inEdges.length,C=this.getEdgeMapper(),f=0;f<m;f++){var P=r[g.inEdges[parseInt(f.toString(),10)]];if(this.containsValue(h,P)||(P.pointCollection=[]),m>1){for(y=p/2,v=null,b=-1,I=0;I<C.length;I++)if(C[parseInt(I.toString(),10)].key===P){b=I;break}if(-1!==b&&C[parseInt(b.toString(),10)].value.length>0&&!this.containsValue(h,P)&&"Orthogonal"===P.type){var j=C[parseInt(b.toString(),10)].value[0],B=j.x+n.marginX,H=j.y+n.marginY;w=B,D=H;"BottomToTop"===n.orientation?D=e.height-H:"RightToLeft"===n.orientation&&(w=e.width-B),v=this.getPointvalue(w,D),P.segments=[],this.diagram.connectorPropertyChange(P,{},{type:"Orthogonal",segments:P.segments})}for(E=[],z=0;z<P.segments.length;z++){A=P.segments[parseInt(z.toString(),10)].points;for(var N in A)E.push(A[parseInt(N.toString(),10)])}if(E.reverse(),(E=this.updateConnectorPoints(E,y,v,c,i.orientation)).reverse(),P.pointCollection=[],null!=v&&"DifferentPoint"!==this.diagram.layout.connectionPointOrigin)for(z=0;z<E.length;z++){A=E[parseInt(z.toString(),10)];P.pointCollection.push(this.getPointvalue(A.x,A.y))}this.resetConnectorPoints(P)}}}},t.prototype.inflate=function(t,e,i){return t.x-=e,t.y-=i,t.width+=2*e,t.height+=2*i,t},t.prototype.updateConnectorPoints=function(t,e,i,n,s){var r="LeftToRight"===s||"RightToLeft"===s,o=t,a=o[0],l=o[o.length-1];if(null!=i){var h=fn.transform(a,fn.findAngle(a,o[1]),e),c=fn.transform(l,fn.findAngle(l,o[o.length-2]),e),d=this.getPointvalue(i.x,h.y),p=this.getPointvalue(i.x,c.y);return r&&(d.x=h.x,d.y=i.y,p.x=c.x,p.y=i.y),0===Math.abs(fn.findLength(p,c))?[a,h,d,l]:[a,h,d,p,c,l]}if(4===o.length){h=fn.transform(a,fn.findAngle(a,o[1]),e),d=this.getPointvalue(o[2].x,h.y);return r&&(d.x=h.x,d.y=o[2].y),[a,h,d,l]}return o},t.prototype.resetConnectorPoints=function(t){if(t.pointCollection&&t.pointCollection.length>0){(l=t).sourcePoint=t.pointCollection[0],l.targetPoint=t.pointCollection[t.pointCollection.length-1];for(var e=[],i=0;i<t.pointCollection.length-1;i++){var n=t.pointCollection[parseInt(i.toString(),10)],s=t.pointCollection[i+1],r=If(n,s),o=Cf(n,s);i===t.pointCollection.length-2&&("RightToLeft"===this.diagram.layout.orientation&&"Left"===o||"LeftToRight"===this.diagram.layout.orientation&&"Right"===o||"TopToBottom"===this.diagram.layout.orientation&&"Bottom"===o||"BottomToTop"===this.diagram.layout.orientation&&"Top"===o)&&(r/=2),(h=new Ng(t,"segments",{type:"Orthogonal"},!0)).length=r,h.direction=o,e.push(h)}l.segments=e,l.type="Orthogonal",this.diagram.connectorPropertyChange(l,{},{type:"Orthogonal",segments:l.segments})}else if("DifferentPoint"===this.diagram.layout.connectionPointOrigin){var a="obstaclePointCollection";if(t.segments[0].points&&t.segments[0].points.length>0&&t[""+a]){var l;(l=t).sourcePoint=t[""+a][0],l.targetPoint=t[""+a][t[""+a].length-1];for(e=[],i=0;i<t[""+a].length-1;i++){n=t[""+a][parseInt(i.toString(),10)],s=t[""+a][i+1];var h,c=If(n,s);o=Cf(n,s);i===t[""+a].length-2&&("RightToLeft"===this.diagram.layout.orientation&&"Left"===o||"LeftToRight"===this.diagram.layout.orientation&&"Right"===o||"TopToBottom"===this.diagram.layout.orientation&&"Bottom"===o||"BottomToTop"===this.diagram.layout.orientation&&"Top"===o)&&(c/=2),(h=new Ng(t,"segments",{type:"Orthogonal"},!0)).length=c,h.direction=o,e.push(h)}l.segments=e,l.type="Orthogonal",this.diagram.connectorPropertyChange(l,{},{type:"Orthogonal",segments:l.segments})}}},t.prototype.nodePropertyChange=function(t){this.diagram.nodePropertyChange(t,{},{offsetX:t.offsetX,offsetY:t.offsetY})},t}(),Ik=function(){function t(t,e,i){var n=this;this.dfsCount=0,this.maxRank=1e8,this.layout=t,this.vertexMapper=new Map,this.ranks=new Map;var s=[];this.createInternalCells(i,s),s.forEach(function(t){t.internalOutEdges.forEach(function(e){var i=e.edges;if(i&&i.length>0){var s=i[0],r=n.layout.getVisibleTerminal(s,!1),o=n.vertexMapper.get(r.id);t===o&&(r=n.layout.getVisibleTerminal(s,!0),o=n.vertexMapper.get(r.id)),o&&t!==o&&(e.target=o,-1===t.internalInEdges.indexOf(e)&&o.internalInEdges.push(e))}})}),this.rootNode=this.vertexMapper.get(e.id)}return t.prototype.createInternalCells=function(t,e){for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)],s={tempRank:-1,cell:n,hashCode:[],maxRank:null,minRank:null,id:n.id,internalOutEdges:[],internalInEdges:[],identicalSibling:[]};e.push(s),this.vertexMapper.set(n.id,s);for(var r=this.layout.getEdges(n),o=0;o<r.length;){var a=r[parseInt(o.toString(),10)],l=this.layout.getVisibleTerminal(a,!1);if(l!==n){var h=this.layout.getEdgesBetween(n,l,!0);if(h.length>0){for(var c={connectorIds:[],edges:h,ids:[],isReversed:!1,source:null,target:null,tempRank:0,maxRank:null,minRank:null},d=0;d<h.length;d++){var p=h[parseInt(d.toString(),10)];c.ids.push(p.id),-1!==r.indexOf(p)&&(r.indexOf(p)<o&&o--,r.splice(r.indexOf(p),1))}c.source=s,-1===s.internalOutEdges.indexOf(c)&&s.internalOutEdges.push(c)}}else o++}}},t.prototype.layeringStage=function(){this.recycleConnectors(),this.initialRank(),this.fixRanks()},t.prototype.recycleConnectors=function(){var t=[this.rootNode];this.visit(t,!0)},t.prototype.initialRank=function(){for(var t=[this.rootNode],e=Array.from(this.vertexMapper.values());t.length>0;){for(var i=t[0],n=i.internalOutEdges,s=i.internalInEdges,r=!0,o=1e8,a=0;a<s.length;a++){if(5270620!==(g=s[parseInt(a.toString(),10)]).tempRank){r=!1;break}o=(m=g.source).tempRank?Math.min(o,m.tempRank-1):o}if(r){if(i.tempRank=o,this.maxRank=Math.min(this.maxRank,o),n.length){if(i.cell.isDecisionNode){var l=n.find(function(t){return t.target.cell.isYesChild}),h=n.find(function(t){return t.target.cell.isDecisionNode});-1===n.indexOf(h)&&0!==n.indexOf(l)&&n.reverse(),("RightInFlow"===this.layout.yesBranchDirection||"SameAsFlow"===this.layout.yesBranchDirection&&"LeftInFlow"===this.layout.noBranchDirection)&&n.reverse()}for(a=0;a<n.length;a++){(g=n[parseInt(a.toString(),10)]).tempRank=5270620,-1===(m=g.target).tempRank&&(m.tempRank=-2,t.push(m))}}t.shift()}else{var c=t.shift();if(t.push(i),c===i&&1===t.length)break}}for(a=0;a<e.length;a++)e[parseInt(a.toString(),10)].tempRank-=this.maxRank;for(var d=0,p=this.rootNode.internalOutEdges,u=0;u<p.length;u++){var g,m=(g=p[parseInt(u.toString(),10)]).target;this.rootNode.tempRank=void 0!==m.tempRank&&null!==m.tempRank?Math.max(d,m.tempRank+1):d,d=this.rootNode.tempRank}this.maxRank=1e8-this.maxRank},t.prototype.fixRanks=function(){var t=new Map;this.ranks=new Map;for(var e=0;e<=this.maxRank;e++)t.set(e,[]),this.ranks.set(e,t.get(e));var i=[this.rootNode];this.visit(i,!1,t)},t.prototype.visit=function(t,e,i){if(void 0===i&&(i=null),t){for(var n=0;n<t.length;n++){var s=t[parseInt(n.toString(),10)];if(s){var r=new Map;e?(s.hashCode=[this.dfsCount,n],this.extendedDfs(null,s,null,r,n)):this.depthFirstSearch(null,s,null,r,i)}}this.dfsCount++}},t.prototype.extendedDfs=function(t,e,i,n,s){var r=this;t&&(e.hashCode&&e.hashCode[0]===t.hashCode[0]||(e.hashCode=t.hashCode.concat([s])));var o=e.id;n.has(o)?this.removeConnectionEdge(t,e,i):(n.set(o,e),this.removeConnectionEdge(t,e,i),e.internalOutEdges.slice().forEach(function(t,i){var s=t.target;r.extendedDfs(e,s,t,n,i)}))},t.prototype.removeConnectionEdge=function(t,e,i){t&&this.isAncestor(e,t)&&(this.invert(i),this.remove(i,t.internalOutEdges),t.internalInEdges.push(i),this.remove(i,e.internalInEdges),e.internalOutEdges.push(i))},t.prototype.invert=function(t){var e=t.source;t.source=t.target,t.target=e,t.isReversed=!t.isReversed},t.prototype.remove=function(t,e){var i=e.indexOf(t);e.splice(i,1)},t.prototype.isAncestor=function(t,e){if(null!==e&&null!==t.hashCode&&null!==e.hashCode&&t.hashCode.length<e.hashCode.length){if(t.hashCode===e.hashCode)return!0;for(var i=0;i<t.hashCode.length;i++)if(t.hashCode[parseInt(i.toString(),10)]!==e.hashCode[parseInt(i.toString(),10)])return!1;return!0}return!1},t.prototype.depthFirstSearch=function(t,e,i,n,s){var r=this,o=e.id;n.has(o)?this.updateMinMaxRank(t,e,i,1,s):(n.set(o,e),this.updateMinMaxRank(t,e,i,0,s),e.internalOutEdges.slice().forEach(function(t){var i=t.target;r.depthFirstSearch(e,i,t,n,s)}))},t.prototype.updateMinMaxRank=function(t,e,i,n,s){var r=Array.from(s.values());if(null==e.maxRank&&0!==e.maxRank&&(e.maxRank=-1),null==e.minRank&&0!==e.minRank&&(e.minRank=-1),0===n&&e.maxRank<0&&e.minRank<0&&e.tempRank>=0){var o=e.tempRank;r[parseInt(o.toString(),10)].push(e),e.maxRank=o,e.minRank=o,e.tempRank=r[e.maxRank].length-1}if(null!==t&&null!==i)if(t.maxRank-e.maxRank>1){i.maxRank=t.maxRank,i.minRank=e.maxRank;for(var a=i.minRank+1;a<i.maxRank;a++)r[parseInt(a.toString(),10)].push(i)}else if(i.isReversed){i.maxRank=t.maxRank,i.minRank=e.maxRank;for(a=i.minRank;a<=i.maxRank;a++)r[parseInt(a.toString(),10)].push(i)}},t}(),Mk=function(){function t(t){this.flowchartModel=t,this.matrix=[],this.rowOffset=[],this.rowMaxDimension=[],this.siblingModel=null}return t.prototype.arrangeElements=function(){if(null!==this.flowchartModel){var t=this.flowchartModel.layout,e="LeftToRight"===t.orientation?t.verticalSpacing:t.horizontalSpacing;this.groupLayoutCells(),this.createMatrixCells();for(var i=0,n=this.matrix;i<n.length;i++)for(var s=n[i],r=1;r<s.length;r++){var o=s[parseInt(r.toString(),10)],a=s[r-1];o.offset+=a.offset+a.size/2+e+o.size/2}for(var l=0,h=this.matrix[0];l<h.length;l++){var c=h[l];this.arrangeMatrix(c,null)}for(var d=0,p=this.matrix;d<p.length;d++){var u=p[d];for(r=0;r<u.length;r++){if((o=u[parseInt(r.toString(),10)]).visitedParents.length>1){var g=o.visitedParents[0],m=o.visitedParents[o.visitedParents.length-1],f=this.findParentVertexCellGroup(g),y=this.findParentVertexCellGroup(m);g!==f&&f.offset<g.offset&&(g=f),m!==y&&y.offset>m.offset&&(m=f);var v=(g.offset+m.offset)/2,b=o.cells.find(function(t){return"internalInEdges"in t&&"internalOutEdges"in t});if("SameAsFlow"===this.flowchartModel.layout.yesBranchDirection){var C=o.visitedParents.slice();if(b&&b.cell.isYesChild)for(var I=0,M=C;I<M.length;I++){if(!(N=(A=M[I]).cells.find(function(t){return"internalInEdges"in t&&"internalOutEdges"in t}))){v=A.offset;break}}else{"LeftInFlow"===this.flowchartModel.layout.noBranchDirection&&C.reverse();for(var S=0,x=C;S<x.length;S++){if(N=(A=x[S]).cells.find(function(t){return"internalInEdges"in t&&"internalOutEdges"in t})){if(N.cell.isYesChild){v=A.offset;break}}else if(L=this.findParentVertexCellGroup(A))if((O=L.cells.find(function(t){return"internalInEdges"in t&&"internalOutEdges"in t}))&&O.cell.isYesChild){v=A.offset;break}}}}else if("SameAsFlow"===this.flowchartModel.layout.noBranchDirection){C=o.visitedParents.slice();if(b&&b.cell.isNoChild)for(var w=0,D=C;w<D.length;w++){if(!(N=(A=D[w]).cells.find(function(t){return"internalInEdges"in t&&"internalOutEdges"in t}))){v=A.offset;break}}else{"LeftInFlow"===this.flowchartModel.layout.yesBranchDirection&&C.reverse();for(var E=0,T=C;E<T.length;E++){var A,N,L,O;if(N=(A=T[E]).cells.find(function(t){return"internalInEdges"in t&&"internalOutEdges"in t})){if(N.cell.isNoChild){v=A.offset;break}}else if(L=this.findParentVertexCellGroup(A))if((O=L.cells.find(function(t){return"internalInEdges"in t&&"internalOutEdges"in t}))&&O.cell.isNoChild){v=A.offset;break}}}}var k=o.initialOffset,z=o.offset;z!==k&&(v>=k&&v<=z?this.translateMatrixCells(v-o.offset,o):v<k&&this.translateMatrixCells(k-o.offset,o))}}}this.setXYForMatrixCell()}},t.prototype.arrangeMatrix=function(t,e){var i=this.flowchartModel.layout,n="LeftToRight"===i.orientation?i.verticalSpacing:i.horizontalSpacing,s=this.matrix[t.level],r=s.indexOf(t);if(t.visitedParents.length&&(1===t.visitedParents.length&&(t.initialOffset=t.offset),r+1<s.length&&s[r+1].visitedParents.length&&-1===t.visitedParents.indexOf(e)))return void(t.level!==e.level&&(t.visitedParents.push(e),e.ignoredChildren.push(t)));if(t.children.length){for(var o=0,a=t.children;o<a.length;o++){var l=a[o];t.visitedChildren.indexOf(l)&&(this.arrangeMatrix(l,t),t.level!==l.level?t.visitedChildren.push(l):t.loopChildren.push(l))}if(t.visitedChildren.length){for(var h=t.visitedChildren.slice(),c=function(t){h=h.filter(function(e){return e!==t})},d=0,p=t.ignoredChildren;d<p.length;d++){c(p[d])}if(h.length){var u=h[0],g=h[h.length-1],m=(u.offset+g.offset)/2;if(t.cells.length){var f=t.cells.filter(function(t){return"internalInEdges"in t&&"internalOutEdges"in t})[0],y=u.cells.filter(function(t){return"internalInEdges"in t&&"internalOutEdges"in t})[0],v=g.cells.filter(function(t){return"internalInEdges"in t&&"internalOutEdges"in t})[0];f&&f.cell.isDecisionNode&&("SameAsFlow"===this.flowchartModel.layout.yesBranchDirection?y?m=y.cell.isYesChild?u.offset:g.offset:v&&(m=v.cell.isYesChild?g.offset:u.offset):"SameAsFlow"===this.flowchartModel.layout.noBranchDirection&&(y?m=y.cell.isNoChild?u.offset:g.offset:v&&(m=v.cell.isNoChild?g.offset:u.offset)))}m<t.offset?this.shiftMatrixCells(t.offset-m,u,!0,t):m>t.offset&&this.shiftMatrixCells(m-t.offset,t)}}}else{var b=t.offset;if(r>0){var C=s[r-1];b=C.offset+C.size/2+n+t.size/2}this.shiftMatrixCells(b-t.offset,t)}-1===t.visitedParents.indexOf(e)&&null!==e&&t.level!==e.level&&t.visitedParents.push(e)},t.prototype.shiftMatrixCells=function(t,e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=null),0!==t){for(var s=this.matrix[e.level],r=s.indexOf(e),o=r;o<s.length;o++)s[parseInt(o.toString(),10)].offset+=t;if(i)if(e.visitedChildren.length)this.shiftMatrixCells(t,e.visitedChildren[0],!0,e);else{o=1;for(var a=null;r+o<s.length;){var l=s[r+o];if(null!==n&&-1!==l.visitedParents.indexOf(n)){if(!l.visitedChildren.length){o++;continue}a=l}break}null!==a&&this.shiftMatrixCells(t,a.visitedChildren[0],!0,a)}}},t.prototype.findParentVertexCellGroup=function(t){return"internalInEdges"in t.cells[0]&&"internalOutEdges"in t.cells[0]?t:t.parents.length?this.findParentVertexCellGroup(t.parents[0]):t},t.prototype.translateMatrixCells=function(t,e){if(0!==t&&(e.offset+=t,e.visitedChildren.length)){for(var i=0,n=e.visitedChildren;i<n.length;i++){var s=n[i];this.translateMatrixCells(t,s)}for(var r=0,o=e.loopChildren;r<o.length;r++){var a=o[r];this.translateMatrixCells(t,a)}}},t.prototype.getObjectValues=function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(t[""+i]);return e},t.prototype.setXYForMatrixCell=function(){var t=this.flowchartModel.layout,e="LeftToRight"===t.orientation,i=e?t.verticalSpacing:t.horizontalSpacing,n=0;if(this.siblingModel){var s=this.getObjectValues(this.rowMaxDimension),r=Math.max.apply(Math,s);n=this.siblingModel.getSiblingDimension(r)}for(var o=0,a=this.getObjectValues(this.matrix);o<a.length;o++)for(var l=0,h=a[o];l<h.length;l++){var c=h[l],d=c.offset-c.size/2;0!==n&&(d+=n+i);for(var p=0,u=c.cells;p<u.length;p++){var g=u[p];if("internalInEdges"in g&&"internalOutEdges"in g){var m=g,f=m.cell.geometry.width,y=m.cell.geometry.height;m.cell.geometry=e?new Tn(this.rowOffset[c.level]-f/2,d,f,y):new Tn(d,this.rowOffset[c.level]-y/2,f,y),d+=(e?y:f)+i}else if("edges"in g){var v=g,b=v.isReversed;if(!b){var C=c.visitedParents[0];if(C)for(var I=0,M=C.visitedChildren;I<M.length;I++){if(M[I].cells.some(function(t){return"internalInEdges"in t&&"internalOutEdges"in t})){b=!0;break}}}for(var S=0,x=v.edges;S<x.length;S++){var w=x[S];if(b){var D={x:d+.5,y:this.rowOffset[c.level]};e&&(D={x:this.rowOffset[c.level],y:d+.5}),this.flowchartModel.layout.edgesMapper.has(w)&&(this.flowchartModel.layout.edgesMapper.get(w).push(D),this.flowchartModel.layout.loopedgesMapper.set(w,v.isReversed))}d+=6}d+=i}}}},t.prototype.getSiblingDimension=function(t){var e=this.flowchartModel.layout,i="LeftToRight"===e.orientation,n=i?e.horizontalSpacing:e.verticalSpacing,s=0;for(var r in this.rowMaxDimension)if(Object.prototype.hasOwnProperty.call(this.rowMaxDimension,r)){if(!(this.rowMaxDimension[""+r]<t))break;s=parseInt(r,10)}this.rowMaxDimension[parseInt(s.toString(),10)]+n<=t&&this.rowMaxDimension[s+1]&&s++;var o=[];for(var r in this.matrix)Object.prototype.hasOwnProperty.call(this.matrix,r)&&parseInt(r,10)<=s&&(o[""+r]=this.matrix[""+r]);var a=0;for(var r in o)if(Object.prototype.hasOwnProperty.call(o,r)){var l=o[""+r];if(l.length){var h=l[0].cells[0],c=0;if(h&&"cell"in h){var d=h.cell.geometry;c=i?d.y:d.x}else if(h&&"edges"in h){var p=h.edges[h.edges.length-1];(m=this.flowchartModel.layout.edgesMapper.get(p)).length&&(c=i?m[0].y:m[0].x)}var u=0,g=l[l.length-1].cells[l[l.length-1].cells.length-1];if(g&&"cell"in g){d=g.cell.geometry;u=i?d.y+d.height:d.x+d.width}else if(g&&"edges"in g){var m;p=g.edges[g.edges.length-1];(m=this.flowchartModel.layout.edgesMapper.get(p)).length&&(u=i?m[0].y:m[0].x)}a=Math.max(a,u-c)}}return a},t.prototype.createMatrixCells=function(){for(var t=this.flowchartModel.layout,e="LeftToRight"===t.orientation,i=e?t.verticalSpacing:t.horizontalSpacing,n=e?t.horizontalSpacing:t.verticalSpacing,s=this.flowchartModel.ranks,r=Array.from(s.values()),o={},a=-n,l=r.length-1;l>=0;l--){var h=0,c=r.length-1-l,d=r[parseInt(l.toString(),10)].slice(),p=[];this.matrix[parseInt(c.toString(),10)]=p;var u={};for(o[parseInt(c.toString(),10)]=u;d.length>0;){var g=d[0],m={parents:[],children:[],visitedParents:[],visitedChildren:[],ignoredChildren:[],loopChildren:[],cells:[],level:c,initialOffset:0,size:0,offset:0};if(p.push(m),"internalInEdges"in g&&"internalOutEdges"in g){if(m.cells.push(g),g.identicalSibling)for(var f=0;f<d.length;f++){if("internalInEdges"in(v=d[parseInt(f.toString(),10)])&&"internalOutEdges"in v&&-1!==g.identicalSibling.indexOf(v.id)&&(m.cells.push(v),m.cells.length>g.identicalSibling.length))break}var y=m.cells;for(f=0;f<y.length;f++){var v;if("internalInEdges"in(v=y[parseInt(f.toString(),10)])&&"internalOutEdges"in v){var b=v.cell.geometry;if(m.size+=e?b.height:b.width,h=Math.max(h,e?b.width:b.height),u[v.id]=m,v.internalInEdges.length)for(var C=v.internalInEdges,I=0;I<C.length;I++){var M=C[parseInt(I.toString(),10)];if(!M.isReversed){var S=null;if(o[c-1]&&Object.prototype.hasOwnProperty.call(o[c-1],M.ids)?S=M.ids:o[c-1]&&Object.prototype.hasOwnProperty.call(o[c-1],M.source.id)&&(S=M.source.id),null!==S){var x=o[c-1][""+S];-1===m.parents.indexOf(x)&&m.parents.push(x),-1===x.children.indexOf(m)&&(x.children.length&&x.children[0].level===x.level?x.children.unshift(m):x.children.push(m))}}}d.splice(d.indexOf(v),1)}}m.size+=(m.cells.length-1)*i}else if("edges"in g){m.cells.push(g);for(y=m.cells,f=0;f<y.length;f++){var w=y[parseInt(f.toString(),10)];if("edges"in w&&w.edges){for(var D=-5,E=0;E<w.edges.length;E++){w.edges[parseInt(E.toString(),10)];D+=6}m.size+=D}S=null;if(w.isReversed?o[parseInt(c.toString(),10)][w.ids]?S=w.ids:o[parseInt(c.toString(),10)][w.source.id]&&(S=w.source.id):o[c-1][w.ids]?S=w.ids:o[c-1][w.source.id]&&(S=w.source.id),null!==S){x=o[w.isReversed?c:c-1][""+S];-1===m.parents.indexOf(x)&&m.parents.push(x),-1===x.children.indexOf(m)&&x.children.push(m)}u[w.ids]=m,d.splice(d.indexOf(w),1)}m.size+=(m.cells.length-1)*i}}this.rowOffset[parseInt(c.toString(),10)]=a+h/2+n,this.rowMaxDimension[parseInt(c.toString(),10)]=this.rowOffset[parseInt(c.toString(),10)]+h/2,a+=h+n}},t.prototype.groupLayoutCells=function(){var t=this.flowchartModel.ranks,e=Array.from(t.values());e.reverse();for(var i=e.length-1;i>=0;i--){for(var n=e[parseInt(i.toString(),10)].filter(function(t){return"internalInEdges"in t&&"internalOutEdges"in t}),s=e[parseInt(i.toString(),10)].filter(function(t){return"edges"in t&&"edges"in t});n.length>1;){var r=n[0];if(r.cell.isYesChild||r.cell.isNoChild)n.shift();else{for(var o=r.internalInEdges.map(function(t){return t.source.id}),a=r.internalOutEdges.map(function(t){return t.target.id});n.length>1;){var l=n[1],h=l.internalInEdges.map(function(t){return t.source.id}),c=l.internalOutEdges.map(function(t){return t.target.id}),d=this.compareLists(o,h),p=this.compareLists(a,c);if(!d||!p)break;this.updateMutualSharing(n[0],l.id),this.updateMutualSharing(n[1],r.id),n.splice(1,1)}n.shift()}}for(var u=function(){var t=s[0],e=t.source,i=t.target;if(e.identicalSibling){for(var n=0,r=s.filter(function(t){return t.target===i});n<r.length;n++){var o=r[n];-1!==e.identicalSibling.indexOf(o.source.id)&&(o.source.identicalSibling=null)}t.source.identicalSibling=null}s.shift()};s.length>1;)u()}},t.prototype.updateMutualSharing=function(t,e){t.identicalSibling?t.identicalSibling.push(e):t.identicalSibling=[e]},t.prototype.compareLists=function(t,e){var i=t.slice(),n=e.slice();if(i.length===n.length){if(0===i.length)return!0;for(var s=0,r=n;s<r.length;s++){var o=r[s];if(-1===i.indexOf(o))return!1}return!0}return!1},t}(),Sk=(function(){function t(){this.rootNodes=[],this.vertexMapper=new Map,this.edgesMapper=new Map,this.loopedgesMapper=new Map,this.anchorX=0,this.anchorY=0,this.verticalSpacing=50,this.horizontalSpacing=50,this.horizontalAlignment="Center",this.verticalAlignment="Top",this.margin={top:50,right:50,bottom:50,left:50},this.orientation="TopToBottom",this.yesBranchDirection="SameAsFlow",this.noBranchDirection="RightInFlow",this.yesBranchValues=["Yes","True"],this.noBranchValues=["No","False"],this.diagram=new qb}t.prototype.updateLayout=function(t,e){this.diagram=e,this.yesBranchDirection=this.diagram.layout.flowchartLayoutSettings.yesBranchDirection,this.noBranchDirection=this.diagram.layout.flowchartLayoutSettings.noBranchDirection,this.yesBranchValues=this.diagram.layout.flowchartLayoutSettings.yesBranchValues||["Yes","True"],this.noBranchValues=this.diagram.layout.flowchartLayoutSettings.noBranchValues||["No","False"],this.orientation="TopToBottom"===this.diagram.layout.orientation||"BottomToTop"===this.diagram.layout.orientation?"TopToBottom":"LeftToRight",this.horizontalAlignment=this.diagram.layout.horizontalAlignment,this.verticalAlignment=this.diagram.layout.verticalAlignment,this.verticalSpacing=this.diagram.layout.verticalSpacing,this.horizontalSpacing=this.diagram.layout.horizontalSpacing,this.margin=this.diagram.layout.margin;var i=[],n=[];this.rootNodes=[],this.vertexMapper.clear(),this.edgesMapper.clear(),this.loopedgesMapper.clear();for(var s=0,r=t;s<r.length;s++){var o=r[s];if(!o.excludeFromLayout){var a=this.createVertex(o);this.vertexMapper.set(a.id,a),n.push(a),a.inEdges&&0!==a.inEdges.length||(i.push(a),this.rootNodes.push(o))}}for(var l=null,h=0,c=i;h<c.length;h++){var d=c[h],p=[];this.getTreeVertices(d,p,n);var u=new Ik(this,d,p);u.layeringStage();var g=new Mk(u);g.siblingModel=l,g.arrangeElements(),l=g}var m=Array.from(this.vertexMapper.values()),f=this.getModelBounds(m);this.updateAnchor(f);for(var y="LeftToRight"===this.orientation?this.horizontalSpacing:this.verticalSpacing,v=[],b=0,C=m;b<C.length;b++){if(a=C[b]){var I=a.item;I&&(I.offsetX=a.geometry.x+a.geometry.width/2+this.anchorX,I.offsetY=a.geometry.y+a.geometry.height/2+this.anchorY,(a.inEdges&&a.inEdges.length>0||a.outEdges&&a.outEdges.length>0)&&v.push(I)),e.dataBind()}}var M=new Tn(f.x+this.anchorX,f.y+this.anchorY,f.width,f.height);this.nodeWithMultiEdges=v,this.inverseSpacing=y,this.transModelBounds=M,this.diagram.layout.flowChartData=this},t.prototype.reRouteFlowChartConnectors=function(t,e){this.diagram=e;var i=t.nodeWithMultiEdges,n=t.inverseSpacing;this.orientation=t.orientation;var s="TopToBottom"===this.orientation,r=t.transModelBounds;this.vertexMapper=t.vertexMapper,this.loopedgesMapper=t.loopedgesMapper,this.edgesMapper=t.edgesMapper,this.anchorX=t.anchorX,this.anchorY=t.anchorY;for(var o=[],a=0,l=i;a<l.length;a++){var h=l[a];if(h.outEdges&&h.outEdges.length>0)for(var c=0,d=h.outEdges;c<d.length;c++){var p=d[c],u=this.diagram.nameTable[""+p];if(this.loopedgesMapper.has(u)&&this.loopedgesMapper.get(u))-1===o.indexOf(u)&&(this.updateLoopConnector(u),o.push(u));else{var g=[];if(h.outEdges.length>1){var m=n/2,f=null;if(this.edgesMapper.has(u))(x=this.edgesMapper.get(u)[0])&&(f={x:x.x+this.anchorX,y:x.y+this.anchorY});u.segments=[],u.intermediatePoints=[];var y=[u.sourcePoint,u.targetPoint];if(s){g=this.updateVerticalConnectorSegments(u,y);var v=this.diagram.nameTable[u.sourceID];y=!this.vertexMapper.get(v.id).isDecisionNode&&g.length<=2?this.updateConnectorPoints(g,m,f,r):g}else y=g=this.updateHorizontalSegments(u,y);y.length>2&&this.updatePoints(y,u),o.push(u)}else if(4===u.intermediatePoints.length){var b=u.intermediatePoints[0],C=u.intermediatePoints[3],I=[b,s?{x:b.x,y:C.y-20}:{x:C.x-20,y:b.y},C];this.updatePoints(I,u),o.push(u)}}}if(h.inEdges&&h.inEdges.length>1)for(var M=0,S=h.inEdges;M<S.length;M++){p=S[M],u=this.diagram.nameTable[""+p];if(-1===o.indexOf(u))if(u.segments[0].points=[],this.loopedgesMapper.has(u)&&this.loopedgesMapper.get(u))this.updateLoopConnector(u),o.push(u);else if(h.inEdges.length>1){var x;m=n/2,f=null;if(this.edgesMapper.has(u)&&-1===o.indexOf(u))(x=this.edgesMapper.get(u)[0])&&(f={x:x.x+this.anchorX,y:x.y+this.anchorY});u.segments=[];y=[u.targetPoint,u.sourcePoint],g=[];g=s?this.updateVerticalConnectorSegments(u,y):this.updateHorizontalSegments(u,y),(y=this.updateConnectorPoints(g,m,f,r)).reverse(),y.length>2&&this.updatePoints(y,u)}}}},t.prototype.updateAnchor=function(t){var e=this.diagram.scrollSettings.viewPortWidth,i=this.diagram.scrollSettings.viewPortHeight;if("TopToBottom"===this.orientation?(this.anchorX=e/2-t.width/2-t.x,this.anchorY=this.margin.top):(this.anchorX=this.margin.left,this.anchorY=i/2-t.height/2-t.y),1===this.rootNodes.length){var n=this.rootNodes[0],s=this.vertexMapper.get(n.id).geometry,r=s.x+s.width/2,o=s.y+s.height/2,a=r-(t.x+t.width/2),l=o-(t.y+t.height/2);"TopToBottom"===this.orientation?this.anchorX-=a:this.anchorY-=l}},t.prototype.updateConnectorPoints=function(t,e,i,n){var s,r,o,a,l="LeftToRight"===this.orientation,h=t.slice();function c(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*(180/Math.PI)}function d(t,e,i){var n=i*(Math.PI/180);return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}if(h.length>2){var p=d(h[0],e,c(h[0],h[1])),u=d(p,(s=p,r=h[1],o=r.x-s.x,a=r.y-s.y,Math.sqrt(o*o+a*a)),c(p,h[2]));if(h.splice(1,0,u),h.splice(1,0,p),h.splice(3,2),null!=i){var g=h.length,m=d(h[g-1],e,c(h[g-1],h[g-2]));for(h.splice(g-1,0,m);2<h.length-2;)h.splice(2,1);var f=i;if(this.inflate(n,n.width,n.height),l){var y=[{x:n.left,y:f.y},{x:n.right,y:f.y}],v=[{x:h[1].x,y:n.top},{x:h[1].x,y:n.bottom}],b=[{x:m.x,y:n.top},{x:m.x,y:n.bottom}],C=[],I=[];C=this.diagram.commandHandler.intersect(y,v,!1),(I=this.diagram.commandHandler.intersect(y,b,!1)).length&&h.splice(2,0,I[0]),C.length&&h.splice(2,0,C[0])}else{y=[{x:f.x,y:n.top},{x:f.x,y:n.bottom}],v=[{x:n.left,y:h[1].y},{x:n.right,y:h[1].y}],b=[{x:n.left,y:m.y},{x:n.right,y:m.y}],C=[],I=[];C=this.diagram.commandHandler.intersect(y,v,!1),(I=this.diagram.commandHandler.intersect(y,b,!1)).length&&h.splice(2,0,I[0]),C.length&&h.splice(2,0,C[0])}}}else if(2===h.length&&null!=i){var M=h[0],S=h[1],x=c(h[0],h[1]),w=(m=d(M,e,x),d(S,e,(x+180)%360));if(h.splice(1,0,w),l){var D={x:m.x,y:i.y},E={x:w.x,y:i.y};h.splice(1,0,E),h.splice(1,0,D)}else{D={x:i.x,y:m.y},E={x:i.x,y:w.y};h.splice(1,0,E),h.splice(1,0,D)}h.splice(1,0,m)}return h},t.prototype.inflate=function(t,e,i){t.x-=e,t.y-=i,t.width+=2*e,t.height+=2*i},t.isBranchConnector=function(t,e){if(t.annotations.length>0&&t.annotations[0].content){var i=t.annotations[0].content;return e.some(function(t){return 0===i.localeCompare(t,void 0,{sensitivity:"accent"})})}return!1},t.prototype.isYesBranchConnector=function(e){return t.isBranchConnector(e,this.yesBranchValues)},t.prototype.isNoBranchConnector=function(e){return t.isBranchConnector(e,this.noBranchValues)},t.prototype.updateHorizontalSegments=function(t,e){var i=[],n=this.diagram.nameTable[t.sourceID],s=this.diagram.nameTable[t.targetID],r=this.vertexMapper.get(n.id).isDecisionNode,o=this.horizontalSpacing/2,a=this.verticalSpacing/2;if(r){var l=this.isYesBranchConnector(t),h=this.isNoBranchConnector(t);if(s.wrapper.bounds.containsPoint({x:s.offsetX,y:n.offsetY})||n.offsetY!==s.offsetY&&(l&&"SameAsFlow"===this.yesBranchDirection||h&&"SameAsFlow"===this.noBranchDirection&&"SameAsFlow"!==this.yesBranchDirection)){if(l&&"LeftInFlow"===this.yesBranchDirection||h&&("SameAsFlow"===this.yesBranchDirection&&("SameAsFlow"===this.noBranchDirection||"LeftInFlow"===this.noBranchDirection)||"RightInFlow"===this.yesBranchDirection&&("LeftInFlow"===this.noBranchDirection||"RightInFlow"===this.noBranchDirection))){c=n.offsetX,d=n.wrapper.bounds.top,p=s.wrapper.bounds.left,u=s.wrapper.bounds.center.y;i.push({x:c,y:d}),i.push({x:c,y:d-a}),i.push({x:p-o,y:d-a}),i.push({x:p-o,y:u}),i.push({x:p,y:u})}else if(n.offsetY!==s.offsetY&&(l&&"SameAsFlow"===this.yesBranchDirection||h&&"SameAsFlow"===this.noBranchDirection&&"SameAsFlow"!==this.yesBranchDirection)){c=n.wrapper.bounds.right,d=n.offsetY,p=s.wrapper.bounds.left,u=s.wrapper.bounds.center.y;i.push({x:c,y:d}),i.push({x:p-o,y:d}),i.push({x:p-o,y:u}),i.push({x:p,y:u})}}else if(n.wrapper.bounds.bottom<s.wrapper.bounds.center.y){var c=n.wrapper.bounds.bottom,d=n.offsetX,p=s.wrapper.bounds.left,u=s.offsetY;i.push({x:d,y:c}),i.push({x:d,y:u}),i.push({x:p,y:u})}else if(n.wrapper.bounds.top>s.wrapper.bounds.center.y){var c=n.wrapper.bounds.top,d=n.offsetX,p=s.wrapper.bounds.left,u=s.offsetY;i.push({x:d,y:c}),i.push({x:d,y:u}),i.push({x:p,y:u})}else if(l&&"RightInFlow"===this.yesBranchDirection||h&&("SameAsFlow"===this.yesBranchDirection&&("RightInFlow"===this.noBranchDirection||"SameAsFlow"===this.noBranchDirection)||"LeftInFlow"===this.yesBranchDirection&&("LeftInFlow"===this.noBranchDirection||"RightInFlow"===this.noBranchDirection))){var c=n.offsetX,d=n.wrapper.bounds.bottom,p=s.wrapper.bounds.left,u=s.wrapper.bounds.center.y;i.push({x:c,y:d}),i.push({x:c,y:d+a}),i.push({x:p-o,y:d+a}),i.push({x:p-o,y:u}),i.push({x:p,y:u})}}else i=e;return i},t.prototype.updateVerticalConnectorSegments=function(t,e){var i=[],n=this.diagram.nameTable[t.sourceID],s=this.diagram.nameTable[t.targetID],r=this.vertexMapper.get(n.id).isDecisionNode,o=this.horizontalSpacing/2,a=this.verticalSpacing/2;if(r){var l=this.isYesBranchConnector(t),h=this.isNoBranchConnector(t);if(n.wrapper.bounds.right<s.wrapper.bounds.center.x&&(l&&"RightInFlow"===this.yesBranchDirection||h&&("SameAsFlow"===this.yesBranchDirection&&("RightInFlow"===this.noBranchDirection||"SameAsFlow"===this.noBranchDirection)||"LeftInFlow"===this.yesBranchDirection&&("LeftInFlow"===this.noBranchDirection||"RightInFlow"===this.noBranchDirection)))){var c=n.wrapper.bounds.right,d=n.offsetY,p=s.wrapper.bounds.top,u=s.offsetY;if(i.push({x:c,y:d}),0===(y=(y=this.diagram.nodes.filter(function(t){return t.wrapper.bounds.containsPoint({x:s.offsetX,y:n.offsetY})})).sort(function(t,e){return e.wrapper.bounds.left-t.wrapper.bounds.left})).length)i.push({x:s.offsetX,y:d});else{var g=y[0].wrapper.bounds;i.push({x:g.left-o,y:y[0].offsetY}),i.push({x:g.left-o,y:g.bottom+a})}i.push({x:p,y:u})}else if(n.wrapper.bounds.left>s.wrapper.bounds.center.x&&(l&&"LeftInFlow"===this.yesBranchDirection||h&&("SameAsFlow"===this.yesBranchDirection&&("SameAsFlow"===this.noBranchDirection||"LeftInFlow"===this.noBranchDirection)||"RightInFlow"===this.yesBranchDirection&&("LeftInFlow"===this.noBranchDirection||"RightInFlow"===this.noBranchDirection)))){c=n.wrapper.bounds.left,d=n.offsetY,p=s.wrapper.bounds.top,u=s.offsetY;i.push({x:c,y:d});var m=Tn.toBounds([i[0],{x:s.offsetX,y:d}]);if(0===(y=(y=this.diagram.nodes.filter(function(t){return t.wrapper.bounds.intersects(m)&&t.id!==n.id&&t.id!==s.id})).sort(function(t,e){return e.wrapper.bounds.right-t.wrapper.bounds.right})).length)i.push({x:s.offsetX,y:d});else{g=y[0].wrapper.bounds;i.push({x:g.right+o,y:y[0].offsetY}),i.push({x:g.right+o,y:g.bottom+a})}i.push({x:p,y:u})}else if(l&&"RightInFlow"===this.yesBranchDirection||h&&("SameAsFlow"===this.yesBranchDirection&&("RightInFlow"===this.noBranchDirection||"SameAsFlow"===this.noBranchDirection)||"LeftInFlow"===this.yesBranchDirection&&("LeftInFlow"===this.noBranchDirection||"RightInFlow"===this.noBranchDirection))){c=n.wrapper.bounds.right,d=n.offsetY,p=s.wrapper.bounds.topCenter.x,u=s.wrapper.bounds.topCenter.y;i.push({x:c,y:d}),i.push({x:c+o,y:d}),i.push({x:c+o,y:u-a}),i.push({x:p,y:u-a}),i.push({x:p,y:u});var f=Tn.toBounds([i[1],i[2]]);if((y=(y=this.diagram.nodes.filter(function(t){return t.wrapper.bounds.intersects(f)})).sort(function(t,e){return e.wrapper.bounds.right-t.wrapper.bounds.right})).length>0&&y[0].wrapper.bounds.intersects(f)){g=y[0].wrapper.bounds;i[1].x=g.right+o,i[2].x=g.right+o}}else if(l&&"LeftInFlow"===this.yesBranchDirection||h&&("SameAsFlow"===this.yesBranchDirection&&("SameAsFlow"===this.noBranchDirection||"LeftInFlow"===this.noBranchDirection)||"RightInFlow"===this.yesBranchDirection&&("LeftInFlow"===this.noBranchDirection||"RightInFlow"===this.noBranchDirection))){c=n.wrapper.bounds.left,d=n.offsetY,p=s.wrapper.bounds.topCenter.x,u=s.wrapper.bounds.topCenter.y;i.push({x:c,y:d}),i.push({x:c-o,y:d}),i.push({x:c-o,y:u-a}),i.push({x:p,y:u-a}),i.push({x:p,y:u});var y,v=Tn.toBounds([i[1],i[2]]);if((y=(y=this.diagram.nodes.filter(function(t){return t.wrapper.bounds.intersects(v)})).sort(function(t,e){return e.wrapper.bounds.left-t.wrapper.bounds.left})).length>0&&y[0].wrapper.bounds.intersects(v)){g=y[0].wrapper.bounds;i[1].x=g.left-o,i[2].x=g.left-o}}else if(n.offsetX!==s.offsetX&&(l&&"SameAsFlow"===this.yesBranchDirection||h&&"SameAsFlow"===this.noBranchDirection&&"SameAsFlow"!==this.yesBranchDirection)){c=n.offsetX,d=n.wrapper.bounds.bottom,p=s.wrapper.bounds.topCenter.x,u=s.wrapper.bounds.topCenter.y;i.push({x:c,y:d}),i.push({x:c,y:u-a}),i.push({x:p,y:u-a}),i.push({x:p,y:u})}else i=e}else i=e;return i},t.prototype.getModelBounds=function(t){var e=new Tn(0,0,0,0);return(t=Array.from(t)).forEach(function(t){var i=t.geometry;e.uniteRect(i)}),e},t.prototype.createVertex=function(t){var e=this,i=isNaN(t.width)?t.wrapper.bounds.width:t.width,n=isNaN(t.height)?t.wrapper.bounds.height:t.height,s=new Tn(0,0,i,n),r=[],o=[],a={isYesBranch:!1,isNoBranch:!1};if(null!=t.inEdges)for(var l=0,h=t.inEdges;l<h.length;l++){var c=h[l];(u=this.diagram.nameTable[""+c])&&r.push(u)}if(null!=t.outEdges)for(var d=0,p=t.outEdges;d<p.length;d++){var u;c=p[d];(u=this.diagram.nameTable[""+c])&&o.push(u)}var g=a.isYesBranch,m=a.isNoBranch;return null!=r&&r.forEach(function(t){a=e.checkForYesOrNoBranch(t,g,m)}),null!=o&&o.forEach(function(t){e.edgesMapper.set(t,[]),e.loopedgesMapper.set(t,!1)}),{id:t.id,geometry:s,inEdges:r,layoutObjectId:{},outEdges:o,item:t,isDecisionNode:!1,isYesChild:a.isYesBranch,isNoChild:a.isNoBranch}},t.prototype.updatePoints=function(t,e){for(var i=[],n=[],s=0;s<t.length;s++)if(t[s+2]){i.push(t[parseInt(s.toString(),10)]),i.push(t[s+1]);var r={type:"Orthogonal",points:i,length:i[0].x===i[1].x?Math.abs(i[0].y-i[1].y):Math.abs(i[0].x-i[1].x),direction:i[0].x===i[1].x?i[0].y>i[1].y?"Top":"Bottom":i[0].x>i[1].x?"Left":"Right"};i=[],n.push(r)}e.segments=n},t.prototype.contains=function(t,e){return t.x>=e.left&&t.x<=e.right&&t.y>=e.top&&t.y<=e.bottom},t.prototype.updateLoopConnector=function(t){var e=[];if(this.edgesMapper.has(t)){var i=this.edgesMapper.get(t);if(i)for(var n=0,s=i;n<s.length;n++){var r=s[n],o=r.x+this.anchorX,a=r.y+this.anchorY;e.push({x:o,y:a})}}e.reverse();var l=[],h=(e[0],e[e.length-1],this.diagram.nameTable[t.sourceID]),c=this.diagram.nameTable[t.targetID],d=h.wrapper.bounds,p=c.wrapper.bounds,u=h,g=c,m=this.vertexMapper.get(t.sourceID).isDecisionNode,f=this.isYesBranchConnector(t),y=this.isNoBranchConnector(t),v=f&&"LeftInFlow"===this.yesBranchDirection,b=y&&("RightInFlow"===this.yesBranchDirection&&("RightInFlow"===this.noBranchDirection||"SameAsFlow"===this.noBranchDirection)||"LeftInFlow"===this.noBranchDirection&&("RightInFlow"===this.yesBranchDirection||"SameAsFlow"===this.yesBranchDirection)),C=this.horizontalSpacing/2,I=this.verticalSpacing/2,M=(new Tn).uniteRect(u.wrapper.bounds).uniteRect(g.wrapper.bounds),S=this.diagram.nodes.filter(function(t){return t.id!==g.id&&t.id!==u.id&&t.wrapper.bounds.intersects(M)});if("TopToBottom"===this.orientation){var x=Array.from(this.vertexMapper.values()).filter(function(t){return t.item.wrapper.bounds.containsPoint({x:t.item.wrapper.bounds.x,y:u.offsetY})&&u.id!==t.item.id}),w=Array.from(this.vertexMapper.values()).filter(function(t){return t.item.wrapper.bounds.containsPoint({x:t.item.wrapper.bounds.x,y:g.offsetY})&&g.id!==t.item.id}),D=Math.max.apply(Math,e.map(function(t){return t.x})),E=!1;if(m?(v||b)&&(E=!0):E=x.length>0&&x[0].item.wrapper.bounds.x>d.x,0===w.length||!E&&w.length>0&&w.filter(function(t){return t.item.wrapper.bounds.right<p.left}).length>0){var T=!E&&D>d.right?d.right:d.left,A=T+(E?-C:C),N=!E&&D>p.right?p.right:p.left;l.push({x:T,y:u.offsetY}),l.push({x:A,y:u.offsetY}),l.push({x:A,y:g.offsetY}),l.push({x:N,y:g.offsetY})}else{var L=w[0].item.wrapper.bounds.bottom+I,O=E?d.left:d.right,k=O+(E?-C:C),z=!E&&D>p.right?p.right+C:p.left-C,P=!E&&D>p.right?p.right:p.left;l.push({x:O,y:u.offsetY}),l.push({x:k,y:u.offsetY}),l.push({x:k,y:L}),l.push({x:z,y:L}),l.push({x:z,y:g.offsetY}),l.push({x:P,y:g.offsetY})}if(S.length>0){var j=E?Math.min.apply(Math,S.map(function(t){return t.wrapper.bounds.left})):Math.max.apply(Math,S.map(function(t){return t.wrapper.bounds.right}));if(E&&j<l[1].x||!E&&j>l[1].x){var B=j+(E?-C:C);l[1].x=B,l[2].x=B}}}else{x=Array.from(this.vertexMapper.values()).filter(function(t){return t.item.wrapper.bounds.containsPoint({y:t.item.wrapper.bounds.y,x:u.offsetX})&&u.id!==t.item.id}),w=Array.from(this.vertexMapper.values()).filter(function(t){return t.item.wrapper.bounds.containsPoint({y:t.item.wrapper.bounds.y,x:g.offsetX})&&g.id!==t.item.id}),D=Math.max.apply(Math,e.map(function(t){return t.y}));var H=!1;if(m?(v||b)&&(H=!0):H=x.length>0&&x[0].item.wrapper.bounds.y>d.y,0===w.length||!H&&w.length>0&&w.some(function(t){return t.item.wrapper.bounds.bottom<p.top})){l.push({x:u.offsetX,y:!H&&D>d.bottom?d.bottom:d.top});var R=l[0].y+(H?-I:I);l.push({x:u.offsetX,y:R}),l.push({x:g.offsetX,y:R}),l.push({x:g.offsetX,y:!H&&D>p.bottom?p.bottom:p.top})}else{var V=w[0].item.wrapper.bounds.right+C;R=!H&&D>p.bottom?p.bottom+I:p.top-I;l.push({x:u.offsetX,y:H?d.top:d.bottom}),l.push({x:u.offsetX,y:l[0].y+(H?-I:I)}),l.push({x:V,y:l[1].y}),l.push({x:V,y:R}),l.push({x:g.offsetX,y:R}),l.push({x:g.offsetX,y:!H&&D>p.bottom?p.bottom:p.top})}if(S.length>0){j=H?Math.min.apply(Math,S.map(function(t){return t.wrapper.bounds.top})):Math.max.apply(Math,S.map(function(t){return t.wrapper.bounds.bottom}));if(H&&l[1].y>j||!H&&l[1].y<j){var U=H?-I:I;l[1].y=j+U,l[2].y=j+U}}}this.updatePoints(l,t)},t.prototype.checkForYesOrNoBranch=function(t,e,i){var n=this;return t.annotations&&t.annotations.length&&t.annotations.forEach(function(t){if("string"==typeof t.content){var s=t.content.toString();n.yesBranchValues.forEach(function(t){0!==s.localeCompare(t,void 0,{sensitivity:"accent"})||(e=!0)}),n.noBranchValues.forEach(function(t){0!==s.localeCompare(t,void 0,{sensitivity:"accent"})||(i=!0)})}}),{isYesBranch:e,isNoBranch:i}},t.prototype.getTreeVertices=function(t,e,i){var n=this;if(null!=t&&-1===e.indexOf(t)){e.push(t),i=i.filter(function(e){return e!==t});var s=t.item.outEdges;if(2===s.length){var r=this.diagram.nameTable[this.diagram.nameTable[s[0]].targetID],o=this.diagram.nameTable[this.diagram.nameTable[s[1]].targetID],a=this.vertexMapper.get(r.id),l=this.vertexMapper.get(o.id);if(a&&l){var h=a.isYesChild||l.isYesChild,c=a.isNoChild||l.isNoChild;h&&!c?(a.isYesChild?l.isNoChild=!0:a.isNoChild=!0,c=!0):!h&&c&&(a.isNoChild?l.isYesChild=!0:a.isYesChild=!0,h=!0),t.isDecisionNode=h}}t.outEdges.forEach(function(s){var r=n.diagram.nameTable[s.targetID],o=n.vertexMapper.get(r.id);null!=o&&(t.isDecisionNode||(o.isYesChild=!1,o.isNoChild=!1),n.getTreeVertices(o,e,i))})}},t.prototype.getEdges=function(t){var e=[];if(null!=t){for(var i=0,n=t.inEdges;i<n.length;i++){var s=n[i];e.push(s)}for(var r=0,o=t.outEdges;r<o.length;r++){var a=o[r];e.push(a)}}return e},t.prototype.getVisibleTerminal=function(t,e){var i=e?t.sourceID:t.targetID;return this.vertexMapper.get(i)},t.prototype.getEdgesBetween=function(t,e,i){for(var n=this.getEdges(t),s=[],r=0;r<n.length;r++){var o=this.getVisibleTerminal(n[parseInt(r.toString(),10)],!0),a=this.getVisibleTerminal(n[parseInt(r.toString(),10)],!1);o.id===t.id&&a.id===e.id&&s.push(n[parseInt(r.toString(),10)])}return s},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"FlowchartLayout"}}(),function(){function t(t){this.labelProperties=t}return t.prototype.renderConnectorsCollection=function(t,e){t.connectors=[];for(var i=[],n=0;n<e.connectors.length;n++){var s=e.connectors[parseInt(n.toString(),10)],r=this.convertToConnector(s);i.push(r)}t.connectors=i},t.prototype.convertToConnector=function(t){var e={style:{}};return t.name&&(e.id=t.name),t.addInfo&&(e.addInfo=t.addInfo),t.bridgeSpace&&(e.bridgeSpace=t.bridgeSpace),t.constraints&&(e.constraints=this.setConnectorConstraints(t.constraints)),t.cornerRadius&&(e.cornerRadius=t.cornerRadius),t.labels&&(e.annotations=this.labelProperties.setLabelProperties(t.labels,t)),t.lineColor&&(e.style.fill=t.lineColor),t.lineWidth&&(e.style.strokeWidth=t.lineWidth),t.lineDashArray&&(e.style.strokeDashArray=t.lineDashArray),t.opacity&&(e.style.opacity=t.opacity),t.lineHitPadding&&(e.hitPadding=t.lineHitPadding),t.margin&&(e.margin={left:t.margin.left,right:t.margin.right,top:t.margin.top,bottom:t.margin.bottom}),t.segments&&(e.type=t.segments[0].type.charAt(0).toUpperCase()+t.segments[0].type.slice(1),e.segments=this.setConnectorSegments(t.segments)),t.shape&&(e.shape=this.getConnectorShape(t.shape)),t.sourceDecorator&&(e.sourceDecorator={height:t.sourceDecorator.height,width:t.sourceDecorator.width,shape:this.getDecoratorShape(t.sourceDecorator.shape),pathData:t.sourceDecorator.pathData,style:{fill:t.sourceDecorator.fillColor,strokeColor:t.sourceDecorator.lineColor,strokeWidth:t.sourceDecorator.lineWidth}}),t.targetDecorator&&(e.targetDecorator={height:t.targetDecorator.height,width:t.targetDecorator.width,shape:this.getDecoratorShape(t.targetDecorator.shape),pathData:t.targetDecorator.pathData,style:{fill:t.targetDecorator.fillColor,strokeColor:t.targetDecorator.lineColor,strokeWidth:t.targetDecorator.lineWidth}}),t.sourceNode&&(e.sourceID=t.sourceNode),t.targetNode&&(e.targetID=t.targetNode),t.sourcePoint&&(e.sourcePoint={x:t.sourcePoint.x,y:t.sourcePoint.y}),t.targetPoint&&(e.targetPoint={x:t.targetPoint.x,y:t.targetPoint.y}),t.sourcePort&&(e.sourcePortID=t.sourcePort),t.targetPort&&(e.targetPortID=t.targetPort),t.tooltip&&(e.tooltip={content:t.tooltip.content,relativeMode:t.tooltip.relativeMode}),t.visible&&(e.visible=t.visible),t.zOrder&&(e.zIndex=t.zOrder),e},t.prototype.getConnectorShape=function(t){var e=null;return t&&("bpmn"===t.type&&(e={type:"Bpmn",flow:t.flow.charAt(0).toUpperCase()+t.flow.slice(1)},"sequence"===t.flow?e.sequence=t.sequence.charAt(0).toUpperCase()+t.sequence.slice(1):"association"===t.flow?e.association=t.association.charAt(0).toUpperCase()+t.association.slice(1):e.message=t.message.charAt(0).toUpperCase()+t.message.slice(1)),"umlclassifier"===t.type&&(e={type:"UmlClassifier",relationship:t.relationship.charAt(0).toUpperCase()+t.relationship.slice(1),multiplicity:{type:t.multiplicity.type.charAt(0).toUpperCase()+t.multiplicity.type.slice(1),source:{upperBounds:t.multiplicity.source.upperBounds,optional:t.multiplicity.source.optional,lowerBounds:t.multiplicity.source.lowerBounds},target:{upperBounds:t.multiplicity.target.upperBounds,optional:t.multiplicity.target.optional,lowerBounds:t.multiplicity.target.lowerBounds}}}),"umlactivity"===t.type&&(e={type:"UmlActivity",flow:t.flow.charAt(0).toUpperCase()+t.flow.slice(1)})),e},t.prototype.getDecoratorShape=function(t){return"path"===t?"Custom":t.charAt(0).toUpperCase()+t.slice(1)},t.prototype.setConnectorSegments=function(t){var e=[];if(t.length>0)for(var i=0;i<t.length;i++){var n={},s=t[parseInt(i.toString(),10)];n.direction=s.direction?s.direction.charAt(0).toUpperCase()+s.direction.slice(1):s._direction?s._direction.charAt(0).toUpperCase()+s._direction.slice(1):null,n.length=s.length?s.length:s._length?s._length:null,n.point=s.point?{x:s.point.x,y:s.point.y}:null,n.point1=s.point1?{x:s.point1.x,y:s.point1.y}:null,n.point2=s.point2?{x:s.point2.x,y:s.point2.y}:null,n.vector1=s.vector1?{angle:s.vector1.angle,distance:s.vector1.distance}:null,n.vector2=s.vector2?{angle:s.vector2.angle,distance:s.vector2.distance}:null,s.points&&(n.points=this.getSegmentPoints(s.points)),s.type&&(n.type=s.type.charAt(0).toUpperCase()+s.type.slice(1)),e.push(n)}return e},t.prototype.getSegmentPoints=function(t){var e=[];if(t.length>0)for(var i=0;i<t.length;i++){var n={},s=t[parseInt(i.toString(),10)];n.x=s.x,n.y=s.y,e.push(n)}return e},t.prototype.setConnectorConstraints=function(t){var e=cs.None;return t&cs.Select&&(e|=cs.Select),t&cs.Delete&&(e|=cs.Delete),t&cs.Drag&&(e|=cs.Drag),t&cs.DragSourceEnd&&(e|=cs.DragSourceEnd),t&cs.DragTargetEnd&&(e|=cs.DragTargetEnd),t&cs.DragSegmentThumb&&(e|=cs.DragSegmentThumb),t&cs.Bridging&&(e|=cs.Bridging),t&cs.InheritBridging&&(e|=cs.InheritBridging),t&cs.AllowDrop&&(e|=cs.AllowDrop),t&cs.InheritTooltip&&(e|=cs.InheritTooltip),t&cs.PointerEvents&&(e|=cs.PointerEvents),t&cs.BridgeObstacle&&(e|=cs.BridgeObstacle),t&cs.Interaction&&(e|=cs.Interaction),t&cs.Default&&(e|=cs.Default),e},t.prototype.getModuleName=function(){return"ConnectorProperties"},t}()),xk=function(){function t(t){this.modelProperties=t}return t.prototype.setLabelProperties=function(t,e){var i=[];if(t.length>0)for(var n=0;n<t.length;n++){var s=t[parseInt(n.toString(),10)],r={style:{}};if(s.name){var o=s.name.split("_"),a=o[o.length-1];r.id=a}if(s.addInfo&&(r.addInfo=s.addInfo),s.text&&(r.content=s.text),s.constraints&&(r.constraints=this.setLabelConstraints(s.constraints)),s.readOnly&&(r.constraints=r.constraints|ds.ReadOnly),s.dragLimit&&(r.dragLimit={left:s.dragLimit.left,right:s.dragLimit.right,top:s.dragLimit.top,bottom:s.dragLimit.bottom}),s.height&&(r.height=s.height),s.horizontalAlignment&&(r.horizontalAlignment=s.horizontalAlignment.charAt(0).toUpperCase()+s.horizontalAlignment.slice(1).toLowerCase()),s.verticalAlignment&&(r.verticalAlignment=s.verticalAlignment.charAt(0).toUpperCase()+s.verticalAlignment.slice(1).toLowerCase()),s.hyperlink&&(r.hyperlink={link:s.hyperlink,color:"blue"}),s.margin&&(r.margin={left:s.margin.left,right:s.margin.right,top:s.margin.top,bottom:s.margin.bottom}),r.rotateAngle=s.rotateAngle,s.offset&&(r.offset=e?s.offset.x:{x:s.offset.x,y:s.offset.y}),r.style.color=s.fontColor,r.style.fontFamily=s.fontFamily,r.style.fontSize=s.fontSize,r.style.italic=s.italic,r.style.bold=s.bold,s.borderColor&&(r.style.strokeColor=s.borderColor),s.borderWidth&&(r.style.strokeWidth=s.borderWidth),s.wrapping)switch(s.wrapping){case"wrap":r.style.textWrapping="Wrap";break;case"nowrap":r.style.textWrapping="NoWrap";break;case"wrapwithoverflow":r.style.textWrapping="WrapWithOverflow"}s.textOverflow&&s.overflowType&&(r.style.textOverflow=s.overflowType.charAt(0).toUpperCase()+s.overflowType.slice(1)),s.textAlign&&(r.style.textAlign=s.textAlign.charAt(0).toUpperCase()+s.textAlign.slice(1).toLowerCase()),s.textDecoration&&(r.style.textDecoration=s.textDecoration.charAt(0).toUpperCase()+s.textDecoration.slice(1).toLowerCase(),"Linethrough"===r.style.textDecoration&&(r.style.textDecoration="LineThrough"));var l=this.setLabelAppearance(r,s);r.style.fill=l.fill,r.style.opacity=l.opacity,r.visibility=l.visibility,s.width&&(r.width=s.width),i.push(r)}return i},t.prototype.setLabelAppearance=function(t,e){var i={};return e.fillColor&&(i.fill="white"===e.fillColor?"transparent":e.fillColor),e.opacity&&(i.opacity=e.opacity),e.visible&&(i.visibility=e.visible),i},t.prototype.setLabelConstraints=function(t){var e=ds.None;return t&ds.Select&&(e|=ds.Select),t&ds.Drag&&(e|=ds.Drag),t&ds.Resize&&(e|=ds.Resize),t&ds.Rotate&&(e|=ds.Rotate),e},t.prototype.getModuleName=function(){return"LabelProperties"},t}(),wk=function(){function t(t,e){this.labelProperties=t,this.portProperties=e}return t.prototype.renderNodesCollection=function(t,e){t.nodes=[];for(var i=[],n=0;n<e.nodes.length;n++){var s=e.nodes[parseInt(n.toString(),10)],r=[],o=this.convertToNode(s);if(o.shape&&o.shape.activity&&o.shape.activity.subProcess&&o.shape.activity.subProcess.processes&&o.shape.activity.subProcess.processes.length>0){for(var a=[],l=0;l<o.shape.activity.subProcess.processes.length;l++){var h=o.shape.activity.subProcess.processes[parseInt(l.toString(),10)];h.margin.right=0,h.margin.bottom=0,h.processId=o.id,a.push(h.id),r.push(h)}o.shape.activity.subProcess.processes=a}if("group"===s.type&&!s.isSwimlane){var c=[];if(o.children&&o.children.length>0){for(var d=0;d<o.children.length;d++){var p=o.children[parseInt(d.toString(),10)];i.push(p),c.push(p.id)}o.children=c}}i.push(o),r&&r.length>0&&(i=i.concat(r))}return t.nodes=i,t.nodes},t.prototype.convertToNode=function(t){var e={style:{},margin:{}};return t.name&&(e.id=t.name),t.fillColor&&(e.style.fill=t.fillColor),t.borderColor&&(e.style.strokeColor=t.borderColor),t.borderWidth&&(e.style.strokeWidth=t.borderWidth),t.borderDashArray&&(e.style.strokeDashArray=t.borderDashArray),t.opacity&&(e.style.opacity=t.opacity),t.gradient&&(e.style.gradient=this.setGradient(t.gradient)),t.isExpanded&&(e.isExpanded=t.isExpanded),t.width&&(e.width=t.width),t.height&&(e.height=t.height),t.offsetX&&(e.offsetX=t.offsetX),t.offsetY&&(e.offsetY=t.offsetY),t.visible&&(e.visible=t.visible),e.zIndex=-1===t.zOrder?-1:t.zOrder,t.excludeFromLayout&&(e.excludeFromLayout=t.excludeFromLayout),t.rotateAngle&&(e.rotateAngle=t.rotateAngle),t.pivot&&(e.pivot=t.pivot),t.addInfo&&(e.addInfo=t.addInfo),t.marginLeft&&(e.margin.left=t.marginLeft),t.marginRight&&(e.margin.right=t.marginRight),t.marginTop&&(e.margin.top=t.marginTop),t.marginBottom&&(e.margin.bottom=t.marginBottom),t.horizontalAlign&&(e.horizontalAlignment=t.horizontalAlign),t.verticalAlign&&(e.verticalAlignment=t.verticalAlign),t.constraints&&(e.constraints=this.setNodeConstraints(t.constraints)),t.labels&&(e.annotations=this.labelProperties.setLabelProperties(t.labels,void 0)),t.shadow&&(e.shadow={angle:t.shadow.angle,opacity:t.shadow.opacity,distance:t.shadow.distance}),t.tooltip&&(e.tooltip={relativeMode:t.tooltip.relativeMode}),t.expandIcon&&(e.expandIcon={shape:t.expandIcon.shape.charAt(0).toUpperCase()+t.expandIcon.shape.slice(1),width:t.expandIcon.width,height:t.expandIcon.height,margin:{left:t.expandIcon.margin.left,right:t.expandIcon.margin.right,top:t.expandIcon.margin.top,bottom:t.expandIcon.margin.bottom},offset:{x:t.expandIcon.offset.x,y:t.expandIcon.offset.y},borderColor:t.expandIcon.borderColor,borderWidth:t.expandIcon.borderWidth,cornerRadius:t.expandIcon.cornerRadius,pathData:t.expandIcon.pathData},"Arrowup"===e.expandIcon.shape?e.expandIcon.shape="ArrowUp":"Arrowdown"===e.expandIcon.shape&&(e.expandIcon.shape="ArrowDown")),t.collapseIcon&&(e.collapseIcon={shape:t.collapseIcon.shape.charAt(0).toUpperCase()+t.collapseIcon.shape.slice(1),width:t.collapseIcon.width,height:t.collapseIcon.height,margin:{left:t.collapseIcon.margin.left,right:t.collapseIcon.margin.right,top:t.collapseIcon.margin.top,bottom:t.collapseIcon.margin.bottom},offset:{x:t.collapseIcon.offset.x,y:t.collapseIcon.offset.y},borderColor:t.collapseIcon.borderColor,borderWidth:t.collapseIcon.borderWidth,cornerRadius:t.collapseIcon.cornerRadius,pathData:t.collapseIcon.pathData},"Arrowup"===e.collapseIcon.shape?e.collapseIcon.shape="ArrowUp":"Arrowdown"===e.collapseIcon.shape&&(e.collapseIcon.shape="ArrowDown")),t.ports&&(e.ports=this.portProperties.setPortProperties(t.ports)),t.children&&("bpmn"===t.type||t.isSwimlane||(e.children=this.getChildren(e,t))),t.children&&t.children.length>0||(e.maxWidth=t.maxWidth,e.maxHeight=t.maxHeight,e.minWidth=t.minWidth,e.minHeight=t.minHeight),(t.shape||t.type)&&(e=this.setShape(e,t)),e},t.prototype.getChildren=function(t,e){if(e.children&&e.children.length>0){for(var i=[],n=0;n<e.children.length;n++){var s=this.convertToNode(e.children[parseInt(n.toString(),10)]);s.children&&this.getChildren(t,s),i.push(s)}t.children=i}return t.children},t.prototype.setShape=function(t,e){switch(e.type){case"basic":var i=e.shape.charAt(0).toUpperCase()+e.shape.slice(1);"path"===e.shape?t.shape={type:"Path",data:e.pathData}:t.shape={type:"Basic",shape:i,cornerRadius:e.cornerRadius,points:e.points};break;case"flow":var n=e.shape.charAt(0).toUpperCase()+e.shape.slice(1);t.shape={type:"Flow",shape:n};break;case"umlactivity":t.shape={type:"UmlActivity",shape:e.shape.charAt(0).toUpperCase()+e.shape.slice(1)};break;case"image":t.shape={type:"Image",source:e.source,align:this.getImageContentAlignment(e.contentAlignment),scale:e.scale.charAt(0).toUpperCase()+e.scale.slice(1)};break;case"html":t.shape={type:"HTML"};break;case"native":t.shape={type:"Native"};break;case"text":t.shape={type:"Text",content:e.textBlock.text};break;case"bpmn":t.shape=this.renderBpmnShape(t,e);break;case"group":e.isSwimlane&&(t.shape=this.renderSwimlaneShape(t,e))}return t},t.prototype.getImageContentAlignment=function(t){if(t)switch(t){case"xminymin":return"XMinYMin";case"xminymid":return"XMinYMid";case"xminymax":return"XMinYMax";case"xmidymin":return"XMidYMin";case"xmidymid":return"XMidYMid";case"xmidymax":return"XMidYMax";case"xmaxymin":return"XMaxYMin";case"xmaxymid":return"XMaxYMid";case"xmaxymax":return"XMaxYMax";case"none":return"None"}return"None"},t.prototype.setNodeConstraints=function(t){var e=ps.None;return t&ps.Select&&(e|=ps.Select),t&ps.Delete&&(e|=ps.Delete),t&ps.Drag&&(e|=ps.Drag),t&ps.Rotate&&(e|=ps.Rotate),t&ps.ResizeNorthEast&&(e|=ps.ResizeNorthEast),t&ps.ResizeEast&&(e|=ps.ResizeEast),t&ps.OutConnect&&(e|=ps.ResizeSouthEast),t&ps.Expandable&&(e|=ps.ResizeSouth),t&ps.AllowDrop&&(e|=ps.ResizeSouthWest),t&ps.ResizeNorthEast&&(e|=ps.ResizeWest),t&ps.ResizeEast&&(e|=ps.ResizeNorthWest),t&ps.ResizeNorth&&(e|=ps.ResizeNorth),t&ps.Resize&&(e|=ps.Resize),t&ps.Shadow&&(e|=ps.Shadow),t&ps.AspectRatio&&(e|=ps.AspectRatio),t&ps.AllowDrop&&(e|=ps.AllowDrop),t&ps.InheritTooltip&&(e|=ps.InheritTooltip),t&ps.PointerEvents&&(e|=ps.PointerEvents),t&ps.Inherit&&(e|=ps.Inherit),t&ps.Default&&(e|=ps.Default),e},t.prototype.setGradient=function(t){var e={};return t&&("linear"===t.type?e={type:"Linear",x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2,stops:this.getGradientStops(t.stops)}:"radial"===t.type&&(e={type:"Radial",cx:t.cx,cy:t.cy,fx:t.fx,fy:t.fy,stops:this.getGradientStops(t.stops)})),e},t.prototype.getGradientStops=function(t){for(var e=[],i=0;i<t.length;i++){var n={},s=t[parseInt(i.toString(),10)];n.color=s.color,n.offset=s.offset,e.push(n)}return e},t.prototype.renderBpmnShape=function(t,e){return"event"===e.shape?t.shape={type:"Bpmn",shape:e.shape.charAt(0).toUpperCase()+e.shape.slice(1),event:{event:e.event.charAt(0).toUpperCase()+e.event.slice(1),trigger:e.trigger.charAt(0).toUpperCase()+e.trigger.slice(1)}}:"gateway"===e.shape?t.shape={type:"Bpmn",shape:e.shape.charAt(0).toUpperCase()+e.shape.slice(1),gateway:{type:e.gateway.charAt(0).toUpperCase()+e.gateway.slice(1)}}:"activity"===e.shape?(t.shape={type:"Bpmn",shape:e.shape.charAt(0).toUpperCase()+e.shape.slice(1),activity:{activity:e.activity.charAt(0).toUpperCase()+e.activity.slice(1)}},t.shape.activity.activity="Subprocess"===t.shape.activity.activity?"SubProcess":t.shape.activity.activity,"task"===e.activity&&(t.shape.activity.task={type:e.task.type.charAt(0).toUpperCase()+e.task.type.slice(1),loop:e.task.loop.charAt(0).toUpperCase()+e.task.loop.slice(1),compensation:e.task.compensation,call:e.task.call}),"subprocess"===e.activity&&("event"===e.subProcess.type?t.shape.activity.subProcess={collapsed:e.subProcess.collapsed,compensation:e.subProcess.compensation,adhoc:e.subProcess.adhoc,loop:e.subProcess.loop.charAt(0).toUpperCase()+e.subProcess.loop.slice(1),boundary:e.subProcess.boundary.charAt(0).toUpperCase()+e.subProcess.boundary.slice(1),type:e.subProcess.type.charAt(0).toUpperCase()+e.subProcess.type.slice(1),event:{event:e.subProcess.event.charAt(0).toUpperCase()+e.subProcess.event.slice(1),trigger:e.subProcess.trigger.charAt(0).toUpperCase()+e.subProcess.trigger.slice(1)}}:"transaction"===e.subProcess.type&&(t.shape.activity.subProcess={collapsed:e.subProcess.collapsed,compensation:e.subProcess.compensation,adhoc:e.subProcess.adhoc,loop:e.subProcess.loop.charAt(0).toUpperCase()+e.subProcess.loop.slice(1),boundary:e.subProcess.boundary.charAt(0).toUpperCase()+e.subProcess.boundary.slice(1),type:e.subProcess.type.charAt(0).toUpperCase()+e.subProcess.type.slice(1),events:this.renderEventsCollection(e.subProcess.events),processes:this.renderProcessesCollection(e)}))):"dataobject"===e.shape?(t.shape={type:"Bpmn",shape:e.shape.charAt(0).toUpperCase()+e.shape.slice(1)},e.annotation&&(t.shape.annotation={text:e.annotation.text,angle:e.annotation.angle,width:e.annotation.width,height:e.annotation.height,length:e.annotation.length})):t.shape={type:"Bpmn",shape:e.shape.charAt(0).toUpperCase()+e.shape.slice(1)},t.shape},t.prototype.renderSwimlaneShape=function(t,e){t.shape={type:"SwimLane",orientation:e.orientation.charAt(0).toUpperCase()+e.orientation.slice(1),header:{annotation:{content:e.header.text},height:50,style:{fontSize:e.header.fontSize,color:e.header.fontColor,fill:e.header.fillColor}}};for(var i=[],n=[],s=0;s<e.lanes.length;s++){i[parseInt(s.toString(),10)]={header:{annotation:{content:e.lanes[parseInt(s.toString(),10)].header.text,width:e.lanes[parseInt(s.toString(),10)].header.width,style:{fontSize:e.lanes[parseInt(s.toString(),10)].header.fontSize,color:e.lanes[parseInt(s.toString(),10)].header.fontColor}}},style:{fill:e.lanes[parseInt(s.toString(),10)].fillColor},children:[]};for(var r=0;r<e.lanes[parseInt(s.toString(),10)].children.length;r++){var o=this.convertToNode(e.lanes[parseInt(s.toString(),10)].children[parseInt(r.toString(),10)]);null==o.wrapper&&(o.wrapper={actualSize:{width:o.width,height:o.height},offsetX:o.offsetX,offsetY:o.offsetY}),i[parseInt(s.toString(),10)].children.push(o)}}for(s=0;s<e.phases.length;s++)n[parseInt(s.toString(),10)]={header:{annotation:{content:e.phases[parseInt(s.toString(),10)].label.text,style:{fill:e.phases[parseInt(s.toString(),10)].label.fillColor,fontSize:e.phases[parseInt(s.toString(),10)].label.fontSize,color:e.phases[parseInt(s.toString(),10)].label.fontColor}}},offset:e.phases[parseInt(s.toString(),10)].offset,style:{fill:e.phases[parseInt(s.toString(),10)].fillColor,strokeColor:e.phases[parseInt(s.toString(),10)].lineColor,strokeDashArray:e.phases[parseInt(s.toString(),10)].lineDashArray}};return t.shape.lanes=i,t.shape.phases=n,t.shape},t.prototype.renderEventsCollection=function(t){var e=[];if(t.length>0)for(var i=0;i<t.length;i++){var n={},s=t[parseInt(i.toString(),10)];n.event=s.event.charAt(0).toUpperCase()+s.event.slice(1),n.trigger=s.trigger.charAt(0).toUpperCase()+s.trigger.slice(1),n.offset={x:s.offset.x,y:s.offset.y},e.push(n)}return e},t.prototype.renderProcessesCollection=function(t){var e=[];if(t.subProcess&&t.subProcess.processes.length>0)for(var i=0;i<t.subProcess.processes.length;i++){var n=t.subProcess.processes[parseInt(i.toString(),10)],s=this.convertToNode(n);e.push(s)}return e},t.prototype.getModuleName=function(){return"NodeProperties"},t}(),Dk=function(){function t(t){this.modelProperties=t}return t.prototype.setPortProperties=function(t){var e=[];if(t.length>0)for(var i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)],s={style:{}};s.id=n.name,n.addInfo&&(s.addInfo=n.addInfo),s.height=n.size,s.width=n.size,n.horizontalAlignment&&(s.horizontalAlignment=n.horizontalAlignment.charAt(0).toUpperCase()+n.horizontalAlignment.slice(1)),n.verticalAlignment&&(s.verticalAlignment=n.verticalAlignment.charAt(0).toUpperCase()+n.verticalAlignment.slice(1)),n.margin&&(s.margin={left:n.margin.left,right:n.margin.right,top:n.margin.top,bottom:n.margin.bottom}),s.offset={x:n.offset.x,y:n.offset.y},s.style.strokeColor=n.borderColor,s.style.strokeWidth=n.borderWidth,s.style.fill=n.fillColor,s.constraints=this.setPortConstraints(n.constraints),n.pathData&&(s.pathData=n.pathData),"path"===n.shape?s.shape="Custom":n.shape?s.shape=n.shape.charAt(0).toUpperCase()+n.shape.slice(1):s.shape="Square",s.visibility=this.setPortVisibility(n.visibility),e.push(s)}return e},t.prototype.setPortConstraints=function(t){var e=Es.Default;return t&Es.Draw&&(e|=Es.Draw),t&Es.None&&(e=Es.None),e},t.prototype.setPortVisibility=function(t){var e;return t&rs.Visible&&(e|=rs.Visible),t&rs.Hidden&&(e|=rs.Hidden),t&rs.Hover&&(e|=rs.Hover),t&rs.Connect&&(e|=rs.Connect),e},t.prototype.getModuleName=function(){return"PortProperties"},t}(),Ek=(function(){function t(t){this.labelProperties=new xk(this),this.connectorProperties=new Sk(this.labelProperties),this.portProperties=new Dk(this),this.nodeProperties=new wk(this.labelProperties,this.portProperties),this.convertedData={},this.items=[],this.diagram=t}t.prototype.getSerializedData=function(t){return this.convertedData.mode="SVG",this.convertedData.basicElements=[],this.convertedData.width=t.width,this.convertedData.height=t.height,t.nodes&&t.nodes.length>0?this.nodeProperties.renderNodesCollection(this.convertedData,t):this.convertedData.nodes=t.nodes,t.connectors&&t.connectors.length>0?this.connectorProperties.renderConnectorsCollection(this.convertedData,t):this.convertedData.connectors=t.connectors,void 0!==t.defaultSettings&&(this.convertedData.getNodeDefaults=this.getNodeDefaults(t.defaultSettings.node),this.convertedData.getConnectorDefaults=this.getConnectorDefaults(t.defaultSettings.connector)),this.setLayers(this.convertedData,t),this.setDataSourceSettings(this.convertedData,t),this.setRulerSettings(this.convertedData,t),this.setSnapSettings(this.convertedData,t),t.snapSettings.enableSnapToObject?this.convertedData.snapSettings.constraints=this.convertedData.snapSettings.constraints|os.SnapToObject:this.convertedData.snapSettings.constraints=this.convertedData.snapSettings.constraints&~os.SnapToObject,void 0===t.pageSettings.backgroundImage&&(t.pageSettings.pageBackgroundColor="transparent",t.pageSettings.backgroundImage={source:"",scale:"meet",alignment:"xmidymid"},t.pageSettings.showPageBreak=!1),this.setScrollSettings(this.convertedData,t),this.setPageSettings(this.convertedData,t),this.setContextMenu(this.convertedData,t),this.setTooltip(this.convertedData,t),this.setModelLayout(this.convertedData,t),this.setSelectedItems(this.convertedData,t),this.convertedData.constraints=this.setDiagramConstraints(t.constraints),this.convertedData.tool=this.setDiagramTool(t.tool),this.convertedData.drawType=t.drawType,this.convertedData.commandManager=t.commandManager,this.convertedData},t.prototype.getNodeDefaults=function(t){return t?this.nodeProperties.convertToNode(t):null},t.prototype.getConnectorDefaults=function(t){return t?this.connectorProperties.convertToConnector(t):null},t.prototype.setLayers=function(t,e){if(t.layers=[],e.layers.length>0)for(var i=0;i<e.layers.length;i++){var n={},s=e.layers[parseInt(i.toString(),10)];n.id=s.name,n.visible=s.visible,n.lock=s.lock,n.objects=s.objects,t.layers.push(n)}},t.prototype.setDataSourceSettings=function(t,e){t.dataSourceSettings={},t.dataSourceSettings.id=e.dataSourceSettings.id,t.dataSourceSettings.dataManager=e.dataSourceSettings.dataSource,t.dataSourceSettings.root=e.dataSourceSettings.root,t.dataSourceSettings.parentId=e.dataSourceSettings.parent,t.dataSourceSettings.crudAction={read:e.dataSourceSettings.crudAction.read,create:e.dataSourceSettings.crudAction.create,update:e.dataSourceSettings.crudAction.update,destroy:e.dataSourceSettings.crudAction.destroy,customFields:e.dataSourceSettings.customFields},e.dataSourceSettings.connectionDataSource&&(t.dataSourceSettings.connectionDataSource={},t.dataSourceSettings.connectionDataSource.id=e.dataSourceSettings.connectionDataSource.id,t.dataSourceSettings.connectionDataSource.dataManager=e.dataSourceSettings.connectionDataSource.dataSource,t.dataSourceSettings.connectionDataSource.sourceID=e.dataSourceSettings.connectionDataSource.sourceNode,t.dataSourceSettings.connectionDataSource.targetID=e.dataSourceSettings.connectionDataSource.targetNode,t.dataSourceSettings.connectionDataSource.sourcePointX=e.dataSourceSettings.connectionDataSource.sourcePointX,t.dataSourceSettings.connectionDataSource.sourcePointY=e.dataSourceSettings.connectionDataSource.sourcePointY,t.dataSourceSettings.connectionDataSource.targetPointX=e.dataSourceSettings.connectionDataSource.targetPointX,t.dataSourceSettings.connectionDataSource.targetPointY=e.dataSourceSettings.connectionDataSource.targetPointY,t.dataSourceSettings.connectionDataSource.crudAction={read:e.dataSourceSettings.connectionDataSource.crudAction.read,create:e.dataSourceSettings.connectionDataSource.crudAction.create,update:e.dataSourceSettings.connectionDataSource.crudAction.update,destroy:e.dataSourceSettings.connectionDataSource.crudAction.destroy,customFields:e.dataSourceSettings.connectionDataSource.customFields})},t.prototype.setRulerSettings=function(t,e){t.rulerSettings={},t.rulerSettings.showRulers=e.rulerSettings.showRulers,t.rulerSettings.horizontalRuler=this.setRulerProperties(e.rulerSettings.horizontalRuler),t.rulerSettings.verticalRuler=this.setRulerProperties(e.rulerSettings.verticalRuler)},t.prototype.setRulerProperties=function(t){var e={};return e.interval=t.interval,e.segmentWidth=t.segmentWidth,e.markerColor=t.markerColor,e.thickness=t.thickness,e.arrangeTick=t.arrangeTick,e},t.prototype.setSnapSettings=function(t,e){t.snapSettings={},e.snapSettings&&(t.snapSettings.horizontalGridLines=this.setGridLines(e.snapSettings.horizontalGridLines),t.snapSettings.verticalGridLines=this.setGridLines(e.snapSettings.verticalGridLines),t.snapSettings.snapAngle=e.snapSettings.snapAngle,t.snapSettings.snapObjectDistance=e.snapSettings.snapObjectDistance,t.snapSettings.constraints=this.setSnapConstraints(e.snapSettings.snapConstraints))},t.prototype.setSnapConstraints=function(t){var e=os.None;return t&os.ShowHorizontalLines&&(e|=os.ShowHorizontalLines),t&os.ShowVerticalLines&&(e|=os.ShowVerticalLines),t&os.ShowLines&&(e|=os.ShowLines),t&os.SnapToHorizontalLines&&(e|=os.SnapToHorizontalLines),t&os.SnapToVerticalLines&&(e|=os.SnapToVerticalLines),t&os.SnapToLines&&(e|=os.SnapToLines),e},t.prototype.setGridLines=function(t){var e={};return e.lineColor=t.lineColor,e.lineDashArray=t.lineDashArray,e.lineIntervals=t.lineInterval,e.snapIntervals=t.snapInterval,e},t.prototype.setScrollSettings=function(t,e){t.scrollSettings={horizontalOffset:e.scrollSettings.horizontalOffset,verticalOffset:e.scrollSettings.verticalOffset,currentZoom:e.scrollSettings.currentZoom,viewPortWidth:e.scrollSettings.viewPortWidth,viewPortHeight:e.scrollSettings.viewPortHeight,minZoom:e.scrollSettings.minZoom,maxZoom:e.scrollSettings.maxZoom,scrollLimit:e.pageSettings.scrollLimit.charAt(0).toUpperCase()+e.pageSettings.scrollLimit.slice(1),scrollableArea:e.pageSettings.scrollableArea,canAutoScroll:e.enableAutoScroll,autoScrollBorder:e.pageSettings.autoScrollBorder}},t.prototype.setPageSettings=function(t,e){t.pageSettings={width:e.pageSettings.pageWidth,height:e.pageSettings.pageHeight,margin:{left:e.pageSettings.pageMargin,right:e.pageSettings.pageMargin,top:e.pageSettings.pageMargin,bottom:e.pageSettings.pageMargin},orientation:e.pageSettings.pageOrientation.charAt(0).toUpperCase()+e.pageSettings.pageOrientation.slice(1),boundaryConstraints:e.pageSettings.boundaryConstraints.charAt(0).toUpperCase()+e.pageSettings.boundaryConstraints.slice(1),background:{color:e.pageSettings.pageBackgroundColor,source:e.backgroundImage.source,scale:e.backgroundImage.scale,align:e.backgroundImage.align},multiplePage:e.pageSettings.multiplePage,showPageBreaks:e.pageSettings.showPageBreak}},t.prototype.setContextMenu=function(t,e){t.contextMenuSettings={},t.contextMenuSettings.show=e.enableContextMenu,void 0!==e.contextMenu&&(t.contextMenuSettings.showCustomMenuOnly=e.contextMenu.showCustomMenuItemsOnly,t.contextMenuSettings.items=this.getContextMenuItems(e.contextMenu.items))},t.prototype.getContextMenuItems=function(t){for(var e={},i=0;i<t.length;i++){var n=t[parseInt(i.toString(),10)];e.id=n.name,e.text=n.text,this.items.push(e),t.subItems&&t.subItems.length>0&&this.getContextMenuItems(t.subItems)}return this.items},t.prototype.setTooltip=function(t,e){t.tooltip={content:e.tooltip.templateId,relativeMode:e.tooltip.relativeMode}},t.prototype.setModelLayout=function(t,e){t.layout={fixedNode:e.layout.fixedNode,horizontalSpacing:e.layout.horizontalSpacing,verticalSpacing:e.layout.verticalSpacing,maxIteration:e.layout.maxIteration,springFactor:e.layout.springFactor,springLength:e.layout.springLength,margin:{left:e.layout.margin.left,right:e.layout.margin.right,top:e.layout.margin.top,bottom:e.layout.margin.bottom},horizontalAlignment:e.layout.horizontalAlignment.charAt(0).toUpperCase()+e.layout.horizontalAlignment.slice(1),verticalAlignment:e.layout.verticalAlignment.charAt(0).toUpperCase()+e.layout.verticalAlignment.slice(1),orientation:"toptobottom"===e.layout.orientation?"TopToBottom":"bottomtotop"===e.layout.orientation?"BottomToTop":"righttoleft"===e.layout.orientation?"RightToLeft":"LeftToRight",connectorSegments:e.layout.getConnectorSegments,type:e.layout.type.charAt(0).toUpperCase()+e.layout.type.slice(1),getLayoutInfo:e.layout.getLayoutInfo,bounds:e.layout.bounds,root:e.layout.root},t.layout&&"Hierarchicaltree"===t.layout.type?t.layout.type="HierarchicalTree":t.layout&&"Organizationalchart"===t.layout.type?t.layout.type="OrganizationalChart":t.layout&&"Radialtree"===t.layout.type&&(t.layout.type="RadialTree")},t.prototype.setSelectedItems=function(t,e){t.selectedItems={};t.selectedItems.nodes=[],t.selectedItems.connectors=[],t.selectedItems.offsetX=e.selectedItems.offsetX,t.selectedItems.offsetY=e.selectedItems.offsetY,t.selectedItems.width=e.selectedItems.width,t.selectedItems.height=e.selectedItems.height,t.selectedItems.rotateAngle=e.selectedItems.rotateAngle,t.selectedItems.constraints=this.setSelectorConstraints(e.selectedItems.constraints),t.selectedItems.userHandles=e.selectedItems.userHandles},t.prototype.setSelectorConstraints=function(t){var e=as.None;return t&as.ConnectorSourceThumb&&(e|=as.Rotate),t&as.ResizeAll&&(e|=as.ResizeAll),t&as.ResizeSouthEast&&(e|=as.UserHandle),t&as.ToolTip&&(e|=as.ToolTip),t&as.All&&(e|=as.All),e},t.prototype.setDiagramConstraints=function(t){var e=ms.None;return t&ms.UserInteraction&&(e|=ms.UserInteraction),t&ms.ApiUpdate&&(e|=ms.ApiUpdate),t&ms.PageEditable&&(e|=ms.PageEditable),t&ms.LineRouting&&(e|=ms.Bridging),t&ms.Zoom&&(e|=ms.Zoom),t&ms.PanX&&(e|=ms.PanX),t&ms.PanY&&(e|=ms.PanY),t&ms.Pan&&(e|=ms.Pan),t&ms.UndoRedo&&(e|=ms.UndoRedo),t&ms.ZoomTextEdit&&(e|=ms.ZoomTextEdit),e},t.prototype.setDiagramTool=function(t){var e=fs.None;return t&fs.MultipleSelect&&(e|=fs.SingleSelect),t&fs.ZoomPan&&(e|=fs.MultipleSelect),t&fs.DrawOnce&&(e|=fs.ZoomPan),t&fs.ContinuousDraw&&(e|=fs.DrawOnce),t&fs.ContinuousDraw&&(e|=fs.ContinuousDraw),e},t.prototype.destroy=function(){},t.prototype.getModuleName=function(){return"Ej1Serialization"}}(),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Tk=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Ak=function(t){var e=t;return e.sourcePoint||e.targetPoint||e.sourceID||e.targetID||e.sourcePortID||e.targetPortID||e.sourceDecorator||e.targetDecorator?Rg:(t.shape&&(t.shape instanceof iy||t.shape.type),Ny)},Nk=function(t){function e(e,i,n,s){return t.call(this,e,i,n,s)||this}return Ek(e,t),Tk([jt("")],e.prototype,"id",void 0),Tk([jt()],e.prototype,"height",void 0),Tk([jt(!0)],e.prototype,"expanded",void 0),Tk([jt("")],e.prototype,"iconCss",void 0),Tk([jt("")],e.prototype,"title",void 0),Tk([Vt(Ak)],e.prototype,"symbols",void 0),e}(re),Lk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ek(e,t),Tk([jt()],e.prototype,"width",void 0),Tk([jt()],e.prototype,"height",void 0),e}(re),Ok=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ek(e,t),Tk([jt()],e.prototype,"width",void 0),Tk([jt()],e.prototype,"height",void 0),Tk([Bt({},fn)],e.prototype,"offset",void 0),e}(re),kk=function(t){function e(e,i){var n,s,r=t.call(this,e,i)||this;r.symbolTable={},r.childTable={},r.info="info",r.oldObject=null,r.laneTable={},r.isExpand=!1,r.isExpandMode=!1,r.isMethod=!1,r.paletteid=88123,r.checkOnRender=!1,r.symbolTooltipObject=null,r.helper=function(t){var e,i=r.selectedSymbol&&r.selectedSymbol.id||t.sender.target.id.split("_container")[0],n=r.symbolTable[""+i];return n&&r.selectedSymbol&&(r.selectedSymbols=r.selectedSymbol.id===n.id?n:r.selectedSymbol,(e=r.getSymbolPreview(r.selectedSymbols,t.sender,r.element)).setAttribute("paletteId",r.element.id)),e};for(var o=0;r&&r.palettes&&o<r.palettes.length;o++)for(var a=0;a<r.palettes[parseInt(o.toString(),10)].symbols.length;a++)n=r.palettes[parseInt(o.toString(),10)].symbols[parseInt(a.toString(),10)],s=e.palettes[parseInt(o.toString(),10)].symbols[parseInt(a.toString(),10)],n&&"UmlActivity"===n.shape.type&&mm(s,n),(r.nodeDefaults||r.connectorDefaults)&&bm(n,s,n instanceof Ny?r.nodeDefaults:r.connectorDefaults);return r}return Ek(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=!1,n=0,s=Object.keys(t);n<s.length;n++){switch(s[n]){case"width":this.element.style.width=this.width.toString();break;case"height":this.element.style.height=this.height.toString();break;case"symbolPreview":break;case"symbolWidth":case"symbolHeight":case"getSymbolInfo":i=!this.isReact;break;case"enableSearch":if(t.enableSearch&&!x())this.createTextbox();else{var r=document.getElementById(this.element.id+"_search");r&&r.parentNode.removeChild(r)}break;case"palettes":for(var o=0,a=Object.keys(t.palettes);o<a.length;o++){var l=a[o],h=Number(l);if(x()||this.accordionElement.items[parseInt(h.toString(),10)]||(this.accordionElement.items[parseInt(h.toString(),10)]={header:t.palettes[parseInt(h.toString(),10)].title||"",expanded:t.palettes[parseInt(h.toString(),10)].expanded,iconCss:t.palettes[parseInt(h.toString(),10)].iconCss||""}),t.palettes[parseInt(h.toString(),10)].height)document.getElementById(this.palettes[parseInt(h.toString(),10)].id+"_content").style.height=t.palettes[parseInt(h.toString(),10)].height+"px";void 0!==t.palettes[parseInt(h.toString(),10)].iconCss&&(x()||(this.accordionElement.items[parseInt(h.toString(),10)].iconCss=t.palettes[parseInt(h.toString(),10)].iconCss||"",i=!0)),void 0===t.palettes[parseInt(h.toString(),10)].expanded||x()||(this.palettes[parseInt(h.toString(),10)].isInteraction?this.palettes[parseInt(h.toString(),10)].isInteraction=!1:(this.accordionElement.items[parseInt(h.toString(),10)].expanded=t.palettes[parseInt(h.toString(),10)].expanded,this.isExpand=!0),this.isExpandMode||this.isMethod||this.isExpand||(this.isExpand=!0))}break;case"enableAnimation":x()||(this.enableAnimation?this.accordionElement.animation={expand:{duration:400},collapse:{duration:400}}:this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}});break;case"expandMode":x()||(this.accordionElement.expandMode=this.expandMode,i=!0,this.isExpandMode=!0);break;case"allowDrag":this.allowDrag=t.allowDrag,this.allowDrag?(this.initDraggable(),this.draggable.helper=this.helper):this.draggable.helper=function(){return null}}}if(i&&this.refreshPalettes(),this.isExpand&&!i){this.refresh(),this.isExpand=!1;for(var c=0;c<this.palettes.length;c++){var d=this.palettes[parseInt(c.toString(),10)].id;window[""+d]&&window[""+d].length>1&&(window[""+d][1].parentNode.removeChild(window[""+d][1]),window[""+d][1]=null)}}this.isMethod=!1},e.prototype.getPersistData=function(){return this.addOnPersist(["loaded"])},e.prototype.preRender=function(){var t=this;if(this.l10n=new ri(this.getModuleName(),this.defaultLocale(),this.locale),""===this.element.id){var e=document.getElementsByClassName("e-symbolpalette").length;this.element.id="symbolpalette_"+this.paletteid+"_"+e}if(this.element.style.overflow="auto",this.element.style.height=this.height.toString(),this.element.style.width=this.width.toString(),this.enableSearch&&!x()&&this.createTextbox(),!x()){var i=iv("div",{id:this.element.id+"_container"});this.accordionElement=new WM({expandMode:this.expandMode}),this.enableAnimation||(this.accordionElement.animation={expand:{duration:0},collapse:{duration:0}}),this.accordionElement.created=function(){t.checkOnRender=!0},this.accordionElement.expanded=function(e){var i=t.accordionElement.items.indexOf(e.item),n=t.allowServerDataBinding;t.allowServerDataBinding=!1,t.palettes[parseInt(i.toString(),10)].expanded=e.isExpanded,t.palettes[parseInt(i.toString(),10)].isInteraction=!0,t.allowServerDataBinding=n},this.accordionElement.expanding=function(e){if(t.checkOnRender){var i={element:e.element,content:e.content,index:e.index,cancel:!1,isExpanded:e.isExpanded,palette:t.palettes[e.index]};t.trigger("paletteExpanding",i),e.cancel=i.cancel}},this.element.appendChild(i)}var n="measureElement";window[""+n]&&(window[""+n]=null),pv(),this.unWireEvents(),this.wireEvents()},e.prototype.defaultLocale=function(){return{SearchShapes:"Search Shapes",SearchResults:"Search Results",NoItemsToDisplay:"No Items To Display"}},e.prototype.render=function(){this.diagramRenderer=new am(this.element.id,new om,!1),this.svgRenderer=new am(this.element.id,new om,!0),this.updatePalettes(),x()||this.accordionElement.appendTo("#"+this.element.id+"_container"),this.renderComplete()},e.prototype.getModuleName=function(){return"SymbolPalette"},e.prototype.requiredModules=function(){var t=[];return t.push({member:"Bpmn",args:[]}),t},e.prototype.destroy=function(){if(this.allowDrag){this.draggable.destroy(),this.unWireEvents(),this.notify("destroy",{}),t.prototype.destroy.call(this);var e=document.getElementById(this.element.id+"_container");if(e){this.element.removeChild(e);var i="measureElement";if(window[""+i]){window[""+i].usageCount-=1;var n="measureElementCount";window[""+n]--,0===window[""+n]&&(window[""+i].parentNode.removeChild(window[""+i]),window[""+i]=null)}}(e=document.getElementById(this.element.id+"_search"))&&e.parentNode.removeChild(e)}},e.prototype.addPalettes=function(t){for(var e,i=0;i<t.length;i++){var n=this.allowServerDataBinding;this.isProtectedOnChange=!0,this.allowServerDataBinding=!1,e=new Nk(this,"palettes",t[parseInt(i.toString(),10)],!0),this.palettes.push(e),this.initSymbols(e),this.allowServerDataBinding=n,this.isProtectedOnChange=!1,this.renderPalette(e)}this.bulkChanges={},x()||this.accordionElement.refresh()},e.prototype.removePalette=function(t){for(var e=0;e<this.palettes.length;e++)if(this.palettes[parseInt(e.toString(),10)].id===t){this.palettes.splice(e,1),x()||this.accordionElement.items.splice(e,1);break}},e.prototype.removePalettes=function(t){var e=this.allowServerDataBinding;this.allowServerDataBinding=!1;for(var i=0;i<t.length;i++)this.removePalette(t[parseInt(i.toString(),10)]);x()?this.updatePalettes():this.accordionElement.refresh(),this.allowServerDataBinding=e},e.prototype.initSymbols=function(t){for(var e=[],i=0,n=0,s=0,r=t.symbols;s<r.length;s++){if("SwimLane"===(L=r[s]).shape.type){var o=L,a=L.shape,l="Horizontal"===a.orientation;if(a.isLane){i=l?this.symbolHeight-this.symbolHeight/2:this.symbolHeight-this.symbolHeight/4,n=l?this.symbolWidth-this.symbolWidth/4:this.symbolWidth-this.symbolWidth/2,this.laneTable[L.id]={height:i,width:n};var h=a.lanes[0].header,c=a.lanes[0].style,d=h.style;(m={id:"header"+Hn(),shape:{type:"Basic",shape:"Rectangle"},width:l?h.width:o.width,height:l?o.height:h.height,style:d,annotations:[{content:h.annotation.content}]}).offsetX=m.width/2,m.offsetY=m.height/2,this.addPaletteItem(t.id,m);var p={id:"lane"+Hn(),shape:{type:"Basic",shape:"Rectangle"},width:l?o.width-h.width:o.width,height:l?o.height:o.height-h.height,style:c};p.offsetX=l?m.width+p.width/2:p.width/2,p.offsetY=l?p.height/2:m.height+p.height/2,this.addPaletteItem(t.id,p),o.children=[m.id,p.id]}else a.isPhase&&(i=o.height?o.height:this.symbolHeight,n=o.width?o.width:this.symbolWidth,L.shape.type="Path",L.shape.data=l?"M0,0 L"+n+",0":"M0,0 L0,"+n)}if("Container"===L.shape.type){var u=L,g=L.shape;if(g.hasHeader){h=g.header;var m,f=u.style;d=h.style;(m={id:"header"+Hn(),shape:{type:"Basic",shape:"Rectangle"},width:u.width,height:u.height/2,style:d,annotations:[{content:h.annotation.content}]}).offsetX=m.width/2,m.offsetY=m.height/2,this.addPaletteItem(t.id,m);var y={id:"container"+Hn(),shape:{type:"Basic",shape:"Rectangle"},width:u.width,height:u.height,style:f};y.offsetX=u.width/2,y.offsetY=u.height/2,this.addPaletteItem(t.id,y),u.children=[y.id,m.id]}}if("UmlClassifier"===L.shape.type&&!L.shape.relationship){var v=L,b=void 0,C=void 0;C="white"===L.style.fill?{fill:"#26A0DA"}:{fill:L.style.fill},"Class"===L.shape.classifier?(b={id:"node"+Hn(),shape:{type:"HTML",content:'<div id="parentDiv" style="width:100%; height:50%; border:1px solid #000; background:#6BA5D7; display: flex; align-items: center; justify-content: center;"><div id="textDiv" style="font-size:0.7vw;">class</div></div>'},width:v.width?v.width:100,height:v.height?v.height:100,style:C,offsetX:v.width?v.width/2:50,offsetY:v.height?v.height/2:50},this.addPaletteItem(t.id,b)):"Enumeration"===L.shape.classifier?(b={id:"node"+Hn(),shape:{type:"HTML",content:'<div id="parentDiv2" style="width:100%; height:50%; border:1px solid #000; background:#6BA5D7; display: flex; align-items: center; justify-content: center;"><div id="textDiv2" style="font-size:0.5vw;">Enumeration</div></div>'},width:v.width?v.width:100,height:v.height?v.height:100,style:C,offsetX:v.width?v.width/2:50,offsetY:v.height?v.height/2:50},this.addPaletteItem(t.id,b)):"Interface"===L.shape.classifier&&(b={id:"node"+Hn(),shape:{type:"HTML",content:'<div id="parentDiv3" style="width:100%; height:50%; border:1px solid #000; background:#6BA5D7; display: flex; align-items: center; justify-content: center;"><div id="textDiv3" style="font-size:0.7vw;">Interface</div></div>'},width:v.width?v.width:100,height:v.height?v.height:100,style:C,offsetX:v.width?v.width/2:50,offsetY:v.height?v.height/2:50},this.addPaletteItem(t.id,b));var I={id:"member"+Hn(),shape:{type:"HTML",content:'<div style="width:100%;height:100%;border:1px solid #000;background:white"></div>'},width:v.width?v.width:100,height:v.height?v.height:100,offsetX:v.width?v.width/2:50,offsetY:v.height?v.height/2+b.height/2:50+b.height/2};this.addPaletteItem(t.id,I),v.children=[b.id,I.id]}if("UmlClassifier"===L.shape.type&&L.shape.relationship&&("Inheritance"===L.shape.relationship&&(L.style.strokeDashArray=L.style.strokeDashArray?L.style.strokeDashArray:"4 4"),"Dependency"===L.shape.relationship&&(L.style.strokeDashArray=L.style.strokeDashArray?L.style.strokeDashArray:"4 4")),L instanceof Ny){var M=is(this.getNodeDefaults);M&&M(L,this)}else if(L instanceof Rg){var S=is(this.getConnectorDefaults);S&&S(L,this)}this.symbolTable[L.id]=L,L instanceof Ny&&L.children&&e.push(L)}for(var x=0;x<e.length;x++)for(var w=void 0,D=0;D<e[parseInt(x.toString(),10)].children.length;D++)(w=this.symbolTable[e[parseInt(x.toString(),10)].children[parseInt(D.toString(),10)]])&&(this.childTable[w.id]=w,w.parentId=e[parseInt(x.toString(),10)].id);for(var E=0,T=t.symbols;E<T.length;E++){(L=T[E])instanceof Ny&&L.children||this.prepareSymbol(L)}for(var A=0,N=e;A<N.length;A++){var L=N[A];this.prepareSymbol(L)}},e.prototype.renderPalette=function(t){var e="display:none;overflow:auto;";t.height&&(e+="height:"+t.height+"px");document.getElementById(t.id);var i=iv("div",{id:t.id,style:e,class:"e-remove-palette"});if(this.element.appendChild(i),!x()){var n={header:t.title,expanded:t.expanded,content:"#"+t.id,iconCss:t.iconCss};this.accordionElement.items.push(n)}this.renderSymbols(t,i)},e.prototype.addPaletteItem=function(t,e,i){e=Fn(e);for(var n=0;n<this.palettes.length;n++){var s=this.palettes[parseInt(n.toString(),10)];if(-1!==s.id.indexOf(t)){for(var r=[void 0,s,"symbols",{},!0],o=new(Function.prototype.bind.apply(Ak(e),r)),a=0;a<Object.keys(e).length;a++){var l=this.allowServerDataBinding;this.allowServerDataBinding=!1,o[Object.keys(e)[parseInt(a.toString(),10)]]=e[Object.keys(e)[parseInt(a.toString(),10)]],this.allowServerDataBinding=l}bm(o,e,o instanceof Ny?this.nodeDefaults:this.connectorDefaults),s.symbols.push(o);var h=this.allowServerDataBinding;if(this.allowServerDataBinding=!1,this.prepareSymbol(o),this.allowServerDataBinding=h,this.symbolTable[o.id]=o,i)this.childTable[o.id]=o;else{var c=document.getElementById(s.id);c&&c.appendChild(this.getSymbolContainer(o,c))}break}}},e.prototype.removePaletteItem=function(t,e){for(var i,n=0;n<this.palettes.length;n++){var s=this.palettes[parseInt(n.toString(),10)];if(-1!==s.id.indexOf(t))for(var r=0,o=s.symbols;r<o.length;r++){var a=o[r];if(-1!==a.id.indexOf(e)){var l=s.symbols.indexOf(a);if(s.symbols.splice(l,1),a.children)for(var h=a.children,c=0;c<h.length;c++)delete this.symbolTable[h[parseInt(c.toString(),10)]];delete this.symbolTable[a.id];var d=document.getElementById(a.id+"_container");d.parentNode.removeChild(d),i=!0;break}}if(i)break}},e.prototype.prepareSymbol=function(t){var e,i,n,s,r,o=new Pf,a=t,l=new $s,h=t instanceof Ny?t.initContainer():null;h&&!h.children&&(h.children=[]);var c=is(this.getSymbolTemplate);if(c&&(r=c(t)),!r)if(a.children)r=this.getContainer(a,h);else{if(t instanceof Rg&&"UmlClassifier"===t.shape.type&&t.shape.relationship)for(var d=(r=t.init(this)).children.length-1;d>=0;d--)r.children[parseInt(d.toString(),10)]instanceof Zs&&r.children.splice(d,1);else r=t.init(this);t instanceof Ny&&t.parentId&&h.children.push(r)}if(!t.parentId){var p={width:this.symbolWidth,height:this.symbolHeight},u=is(this.getSymbolInfo);if(u&&(p=u(t)),p=p||this.symbolInfo||{},t.shape&&t.shape.isPhase&&(p.width=p.width||this.symbolWidth,p.height=p.height||this.symbolHeight),r.relativeMode="Object",r.horizontalAlignment=r.verticalAlignment="Center",l.style.strokeColor=l.style.fill="none",l.children=[r],r.measure(new un),r.arrange(r.desiredSize),e=p.width=p.width||(void 0!==a.width?r.actualSize.width:void 0)||this.symbolWidth,n=p.height=p.height||(void 0!==a.height?r.actualSize.height:void 0)||this.symbolHeight,void 0!==e&&void 0!==n){var g=e,m=n,f=!!t.shape.isPhase;void 0!==this.symbolWidth?g=this.symbolWidth-this.symbolMargin.left-this.symbolMargin.right:e+=a.style.strokeWidth,void 0!==this.symbolHeight?m=this.symbolHeight-this.symbolMargin.top-this.symbolMargin.bottom:n+=a.style.strokeWidth,t.shape&&"Bpmn"!==t.shape.type&&p.description&&""!==p.description.text&&(m-=20),i=g/(!f&&r.width||e),s=m/(!f&&r.height||n),p.fit&&(i=g/p.width,s=m/p.height),e=g,n=m,i=s=Math.min(i,s),l.width=e,l.height=n,r.width=p.width,r.height=p.height,this.scaleSymbol(t,l,i,s,e,n)}else{var y=void 0;t instanceof Rg&&(y=qd(t)),r.width=t.width||y?y.width:r.actualSize.width,r.height=t.height||y?y.height:r.actualSize.height}t.wrapper=o,o.children=[l],r.pivot=o.pivot={x:0,y:0},o.id=r.id+"_symbol",o.style.fill=o.style.strokeColor="transparent",t instanceof Ny?(o.offsetX=t.style.strokeWidth/2,o.offsetY=t.style.strokeWidth/2):(o.offsetX=.5,o.offsetY=.5),this.getSymbolDescription(p,e,o,t),o.padding={left:1,right:1,bottom:1,top:1},o.measure(new un),o.arrange(o.desiredSize),p.width=p.width||r.actualSize.width,p.height=p.height||r.actualSize.height,t[this.info]=p}t.parentId&&(h.measure(new un(a.width,a.height)),h.arrange(h.desiredSize))},e.prototype.getContainer=function(t,e){var i;e.measureChildren=!1;var n=t.children;e.children=[];for(var s=0;s<n.length;s++)this.symbolTable[n[parseInt(s.toString(),10)]]&&e.children.push(this.symbolTable[n[parseInt(s.toString(),10)]].wrapper);return e.measure(new un(t.width,t.height)),e.arrange(e.desiredSize),0===e.bounds.x&&0===e.bounds.y||(sf(t,(i=e.bounds).x,i.y,this.symbolTable,!1,this),e=this.getContainer(t,e)),e},e.prototype.getSymbolDescription=function(t,e,i,n){if(t&&t.description&&t.description.text){var s=new Zs;t.description.overflow=t.description.overflow||"Ellipsis",t.description.wrap=t.description.wrap||"WrapWithOverflow",s.id=i.id+"_text",s.content=t.description.text,s.width=e,s.height=20,s.style.strokeColor="transparent",s.style.color=t.description.color||"black",s.style.fill=t.description.fill||"transparent",s.style.fontFamily=t.description.fontFamily||"Arial",s.style.fontSize=t.description.fontSize||12,s.style.bold=t.description.bold||!1,s.style.italic=t.description.italic||!1,s.style.textDecoration=t.description.textDecoration||"None",s.style.strokeWidth=0,s.style.textWrapping=t.description.wrap,s.style.textOverflow=t.description.overflow,n.shape&&"Bpmn"===n.shape.type?s.margin={left:0,right:0,top:t.description.margin?t.description.margin.top:0,bottom:t.description.margin?t.description.margin.bottom:this.symbolMargin.bottom}:s.margin={left:0,right:0,top:t.description.margin?t.description.margin.top:0,bottom:t.description.margin?t.description.margin.bottom:5},i.children.push(s)}},e.prototype.renderSymbols=function(t,e){for(var i=0,n=t.symbols;i<n.length;i++){var s=n[i];s.parentId||this.getSymbolContainer(s,e)}},e.prototype.getSymbolPreview=function(t,e,i){var n,s,r;this.allowServerDataBinding=!1;var o=t.wrapper.children[0].desiredSize.width+t.style.strokeWidth,a=t.wrapper.children[0].desiredSize.height+t.style.strokeWidth,l=t.wrapper.children[0].children[0],h=t.previewSize;if(t&&(h.width||h.height)||void 0!==this.symbolPreview.width||void 0!==this.symbolPreview.height){o=(h.width||this.symbolPreview.width||o)-t.style.strokeWidth,a=(h.height||this.symbolPreview.height||a)-t.style.strokeWidth,t instanceof Rg&&(l.actualSize.width<=t.style.strokeWidth&&(l.actualSize.width=this.symbolWidth),l.actualSize.height<=t.style.strokeWidth&&(l.actualSize.height=this.symbolHeight)),s=o/l.actualSize.width,r=a/l.actualSize.height,s=r=Math.min(s,r);var c=l.actualSize.width*s,d=l.actualSize.height*r;t.wrapper.children[0].width=o,t.wrapper.children[0].height=a,this.measureAndArrangeSymbol(l,t instanceof Ny),this.scaleSymbol(t,t.wrapper.children[0],s,r,c,d,!0),o=c,a=d}var p={x:l.offsetX,y:l.offsetY};l.offsetX=l.offsetY=t.style.strokeWidth/2,l.pivot={x:0,y:0},this.measureAndArrangeSymbol(l,t instanceof Ny);var u,g=iv("div",{draggable:"true",class:"e-dragclone",style:"pointer-events:none"});document.body.appendChild(g);var m="margin:5px;";if("Native"===t.shape.type){n=nv("svg",{id:t.id+"_preview",width:Math.ceil(o)+1,height:Math.ceil(a)+1});var f=nv("g",{id:t.id+"_g"});n.appendChild(f),g.appendChild(n),this.svgRenderer.renderElement(l,f,void 0,void 0,n),this.prepareSymbol(t)}else if("HTML"===t.shape.type)u=this.getHtmlSymbol(t,n,g,a,o,!0),this.prepareSymbol(t);else if("UmlClassifier"!==t.shape.type||t.shape.relationship)if(t.children&&t.children.length>0&&vm(t,"HTML",this.childTable))u=this.getGroupParent(t,n,g,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!0),this.prepareSymbol(t);else{n=vv.createCanvas(t.id+"_preview",2*(Math.ceil(o)+t.style.strokeWidth+1),2*(Math.ceil(a)+t.style.strokeWidth+1)),g.appendChild(n),"Basic"===t.shape.type||"Flow"===t.shape.type?m+="transform: scale(0.5) translate(-"+n.width/2+"px, -"+n.height/2+"px);":m+="transform:scale(0.5);",n.setAttribute("transform-origin","0 0");var y=2;t instanceof Rg&&(y=1.9),n.getContext("2d").setTransform(y,0,0,y,0,0),this.diagramRenderer.renderElement(l,n,void 0),this.prepareSymbol(t)}else t.children&&t.children.length>0&&vm(t,"HTML",this.childTable)&&(u=this.getHtmlSymbol(t,n,g,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!0),this.prepareSymbol(t));return cv(u&&("HTML"===t.shape.type||t.children&&t.children.length>0)?u:n,m),l.offsetX=p.x,l.offsetY=p.y,this.allowServerDataBinding=!0,g},e.prototype.measureAndArrangeSymbol=function(t,e){t.children&&!e&&(t.children[0].transform=ys.Self),t.measure(new un),t.arrange(t.desiredSize),t.children&&t.children.length>0&&(t.children[0].transform=ys.Parent)},e.prototype.updateSymbolSize=function(t,e,i){var n=t.wrapper.children[0].children[0],s=t.style.strokeWidth;n.width=(e||n.width)-(s+1),n.height=(i||n.height)-(s+1),t.wrapper.measure(new un),t.wrapper.arrange(t.wrapper.desiredSize)},e.prototype.getSymbolContainer=function(t,e,i){var n,s,r,o=this.symbolTable[t.id][this.info],a=this.getSymbolSize(t,o),l=a.width+1,h=a.height+1,c="SearchPalette"===e.id?t.id+"SearchSymbol":t.id,d=iv("div",{id:c+"_container",style:"width:"+l+"px;height:"+h+"px;float:left;overflow:hidden"});if(e.appendChild(d),"Native"===t.shape.type)n=nv("svg",{id:c,width:Math.ceil(t.wrapper.actualSize.width)+1,height:Math.ceil(t.wrapper.actualSize.height)+1}),s=nv("g",{id:c+"_g"}),n.appendChild(s),d.appendChild(n),this.updateSymbolSize(t),this.svgRenderer.renderElement(t.wrapper,s,void 0,void 0,n);else if("HTML"===t.shape.type)r=this.getHtmlSymbol(t,n,d,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1,"SearchPalette"===e.id);else if("UmlClassifier"!==t.shape.type||t.shape.relationship)if(t.children&&t.children.length>0&&vm(t,"HTML",this.childTable))r=this.getGroupParent(t,n,d,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1);else{n=vv.createCanvas(c,Math.ceil(2*(t.wrapper.actualSize.width+t.style.strokeWidth))+1,Math.ceil(2*(t.wrapper.actualSize.height+t.style.strokeWidth))+1),d.appendChild(n);var p=2;t instanceof Rg&&(p=1.9),n.getContext("2d").setTransform(p,0,0,p,0,0),this.diagramRenderer.renderElement(t.wrapper,s||n,void 0,void 0,void 0,void 0,!0,void 0,!0)}else t.children&&t.children.length>0&&vm(t,"HTML",this.childTable)&&(r=this.getHtmlSymbol(t,n,d,t.wrapper.actualSize.height,t.wrapper.actualSize.width,!1));if(!i){var u=t.wrapper.actualSize.width+t.style.strokeWidth,g=t.wrapper.actualSize.height+t.style.strokeWidth,m="pointer-events:none;transform-origin:0 0;overflow:hidden;";return t.shape.isPhase?"Horizontal"===t.shape.orientation?m+="margin-left:"+Math.max(this.symbolMargin.left,(l-u)/2)+"px;margin-top:"+a.height/2+"px;":m+="margin-left:"+a.width/2+"px;margin-top:"+Math.max(this.symbolMargin.top,(h-g)/2)+"px;":m+="margin-left:"+Math.max(this.symbolMargin.left,(l-u)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(h-g)/2)+"px;",n instanceof HTMLCanvasElement&&(m+="transform:scale(.5,.5);"),cv(r&&("HTML"===t.shape.type||t.children&&t.children.length>0)?r:n,m),d.classList.add("e-symbol-draggable"),d}return n},e.prototype.getGroupParent=function(t,e,i,n,s,r){var o=iv("div",{id:t.id+(r?"_html_div_preview":"_html_div")}),a=iv("div",{id:t.id+(r?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(s+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),l=iv("div",{id:t.id+(r?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(s+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});return a.appendChild(l),o.appendChild(a),e=vv.createCanvas(r?t.id+"_preview":t.id,Math.ceil(s)+1,Math.ceil(n)+1),o.appendChild(e),i.appendChild(o),this.diagramRenderer.renderElement(t.wrapper.children[0].children[0],e,a),o},e.prototype.getHtmlSymbol=function(t,e,i,n,s,r,o){var a=o?t.id+"SearchSymbol":t.id,l=iv("div",{id:a+(r?"_html_div_preview":"_html_div")}),h=iv("div",{id:a+(r?"_htmlLayer_preview":"_htmlLayer"),style:"width:"+Math.ceil(s+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute",class:"e-html-layer"}),c=iv("div",{id:a+(r?"_htmlLayer_div_preview":"_htmlLayer_div"),style:"width:"+Math.ceil(s+1)+"px;height:"+Math.ceil(n+1)+"px;position:absolute"});h.appendChild(c),l.appendChild(h);var d=t.wrapper.actualSize.width+t.style.strokeWidth,p=t.wrapper.actualSize.height+t.style.strokeWidth,u="pointer-events:none;transform-origin:0 0;overflow:hidden;";return u+="margin-left:"+Math.max(this.symbolMargin.left,(s-d)/2)+"px;margin-top:"+Math.max(this.symbolMargin.top,(n-p)/2)+"px;",u+="transform:scale(.5,.5);position:absolute",e=vv.createCanvas(a,Math.ceil(2*(t.wrapper.actualSize.width+t.style.strokeWidth))+1,Math.ceil(2*(t.wrapper.actualSize.height+t.style.strokeWidth))+1),i.appendChild(e),e.getContext("2d").setTransform(2,0,0,2,0,0),cv(e,u),i.appendChild(l),r?("UmlClassifier"===t.shape.type&&("Class"===t.shape.classifier?t.wrapper.children[0].children[0].children[0].content='<div id="parentDiv" style="width:100%; height:50%; border:1px solid #000; background:#6BA5D7; display: flex; align-items: center; justify-content: center;"><div id="textDiv" style="font-size:1vw;">class</div></div>':"Enumeration"===t.shape.classifier?t.wrapper.children[0].children[0].children[0].content='<div id="parentDiv2" style="width:100%; height:50%; border:1px solid #000; background:#6BA5D7; display: flex; align-items: center; justify-content: center;"><div id="textDiv2" style="font-size:0.8vw;">Enumeration</div></div>':"Interface"===t.shape.classifier&&(t.wrapper.children[0].children[0].children[0].content='<div id="parentDiv3" style="width:100%; height:50%; border:1px solid #000; background:#6BA5D7; display: flex; align-items: center; justify-content: center;"><div id="textDiv3" style="font-size:0.9vw;">Interface</div></div>')),this.diagramRenderer.renderElement(t.wrapper.children[0].children[0],e,h)):this.diagramRenderer.renderElement(t.wrapper,e,h),l},e.prototype.getSymbolSize=function(t,e){var i=t.wrapper.actualSize.width,n=t.wrapper.actualSize.height;return this.symbolWidth||this.symbolHeight?(i=this.symbolWidth,n=Math.max(this.symbolHeight,n)):(i+=this.symbolMargin.left+this.symbolMargin.right+t.style.strokeWidth,n+=this.symbolMargin.top+this.symbolMargin.bottom+t.style.strokeWidth),new un(i,n)},e.prototype.getMousePosition=function(t){var e,i,n;if(-1!==t.type.indexOf("touch")){var s=(n=t).changedTouches[0].clientY,r=n.changedTouches[0].clientX;e=s-this.element.offsetTop,i=r-this.element.offsetLeft}else e=t.clientY-this.element.offsetTop,i=t.clientX-this.element.offsetLeft;return{x:i,y:e}},e.prototype.getContent=function(t){return this.hoverElement instanceof Ny&&this.hoverElement.constraints&ps.Tooltip||this.hoverElement instanceof Rg&&this.hoverElement.constraints&cs.Tooltip?this.hoverElement.tooltip.content:t.id},e.prototype.initTooltip=function(t){var e;if(!x()){var i=new Zh;i=this.updateTooltipContent(this.hoverElement.tooltip,i),(e=new Zh(i)).cssClass="e-symbolPalette-tooltip",e.opensOn="custom",e.appendTo("#"+t.id),e.close()}return e},e.prototype.updateTooltipContent=function(t,e){return e.content=t.content,e.position="BottomRight",e.showTipPointer=t.showTipPointer,e.width=t.width,e.height=t.height,t.animation?e.animation=t.animation:e.animation={close:{effect:"None"}},e},e.prototype.elementEnter=function(t,e,i){if(!e){this.symbolTooltipObject.windowCollision=!0,this.hoverElement.tooltip.isSticky&&(this.symbolTooltipObject.isSticky=!0),this.hoverElement instanceof Ny?this.hoverElement.constraints&(ps.Default&&ps.Tooltip)||(this.hoverElement.tooltip.content=this.hoverElement.id,this.symbolTooltipObject.content=Ri(function(){return this.hoverElement.id},this)):this.hoverElement instanceof Rg&&(this.hoverElement.constraints&(cs.Default&&cs.Tooltip)||(this.hoverElement.tooltip.content=this.hoverElement.id,this.symbolTooltipObject.content=Ri(function(){return this.hoverElement.id},this))),this.hoverElement.tooltip.content&&("Mouse"===this.hoverElement.tooltip.relativeMode?(this.hoverElement.tooltip.relativeMode="Object",this.symbolTooltipObject.offsetX=0,this.symbolTooltipObject.offsetY=0):(this.symbolTooltipObject.offsetX=0,this.symbolTooltipObject.offsetY=0));var n=i?this.hoverElement.id+"SearchSymbol":this.hoverElement.id,s=document.getElementById(n);"Auto"===this.hoverElement.tooltip.openOn&&""!==this.hoverElement.tooltip.content&&(this.symbolTooltipObject.close(),this.symbolTooltipObject.opensOn=this.hoverElement.tooltip.openOn,this.symbolTooltipObject.dataBind()),"Auto"===this.hoverElement.tooltip.openOn&&(this.symbolTooltipObject.target=this.hoverElement.id,this.symbolTooltipObject.open(s))}},e.prototype.mouseMove=function(t,e){!this.highlightedSymbol||this.selectedSymbol&&this.selectedSymbol.id+"_container"===this.highlightedSymbol.id||(this.highlightedSymbol.classList.remove("e-symbol-hover"),this.highlightedSymbol.style.backgroundColor="",this.highlightedSymbol=null);var i=t.target.id.split("_container")[0];if(this.symbolTable[""+i]||"SearchPalette"!==i&&t.target&&t.target.id.includes("SearchSymbol")){var n=document.getElementById(i+"_container");n.classList.add("e-symbol-hover"),this.highlightedSymbol=n}t.preventDefault();var s=!1;t.target&&t.target.id.includes("SearchSymbol")&&(s=!0,i=i.split("SearchSymbol")[0]);var r=this.symbolTable[""+i];if(this.symbolTable[""+i]&&r!==this.hoverElement){this.currentPosition=this.getMousePosition(t);var o=this.getContent(r);this.hoverElement&&"Auto"===this.hoverElement.tooltip.openOn&&""!==o&&this.elementLeave(),this.hoverElement=r,this.symbolTooltipObject=this.initTooltip(this.hoverElement),""===o&&(o=this.hoverElement.id),this.hoverElement.tooltip&&""!==o&&this.elementEnter(this.currentPosition,!1,s)}void 0===r&&this.hoverElement&&!this.hoverElement.tooltip.isSticky&&"Auto"===this.hoverElement.tooltip.openOn&&(this.hoverElement=null,this.elementLeave())},e.prototype.elementLeave=function(){this.symbolTooltipObject&&"Custom"!==this.symbolTooltipObject.opensOn&&this.symbolTooltipObject.close()},e.prototype.mouseLeave=function(t){this.elementLeave(),t.preventDefault()},e.prototype.mouseUp=function(t){if(this.isMethod=!0,t&&t.target)if("iconSearch"===t.srcElement.id){var e=document.getElementById("iconSearch");e.classList.contains("e-clear-searchtext")&&(e.className="e-input-group-icon e-search e-icons",document.getElementById("textEnter").value="",this.searchPalette(""))}else{var i=t.target.id.split("_container")[0];if(i&&this.selectedSymbol){var n={oldValue:this.oldObject,newValue:i};this.trigger("paletteSelectionChange",n),this.oldObject=i,t.preventDefault()}else""!==this.oldObject&&(this.oldObject="")}},e.prototype.keyUp=function(t){var e=this;if(this.enableSearch){var i=this;document.getElementById("iconSearch").className="e-input-group-icon e-clear-searchtext e-icons",!t||"Enter"!==t.key&&13!==t.keyCode?(this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.target instanceof HTMLInputElement&&(i.searchPalette(t.target.value),e.timer=null)},500)):t.target instanceof HTMLInputElement&&this.searchPalette(t.target.value)}},e.prototype.mouseDown=function(t){var e=t.target.id.split("_container")[0],i=!1;if(e.includes("SearchSymbol")&&(e=e.split("SearchSymbol")[0],i=!0),this.selectedSymbol){var n=document.getElementById(this.selectedSymbol.id+"_container"),s=document.getElementById(this.selectedSymbol.id+"SearchSymbol_container");(n||s)&&(n.classList.remove("e-symbol-selected"),s&&s.classList.remove("e-symbol-selected")),(r=document.getElementById(this.selectedSymbol.id+"_container"))&&(r.style.backgroundColor=""),this.selectedSymbol=null}if(this.symbolTable[""+e]){var r,o=e;i&&(o=e+"SearchSymbol"),(r=document.getElementById(o+"_container")).classList.add("e-symbol-selected"),this.selectedSymbol=this.symbolTable[""+e],t.preventDefault()}},e.prototype.keyDown=function(t){if(t&&"Escape"===t.key){var e=this.draggable.helperElement;e&&e.parentNode&&(e.parentNode.removeChild(e),this.draggable.intDestroy())}},e.prototype.initDraggable=function(){this.allowDrag&&(this.draggable=new Ke(this.element,{dragTarget:".e-symbol-draggable",helper:this.helper,dragStart:this.dragStart,preventDefault:!1,dragStop:this.dragStop,drag:function(t){var e=sv(t.target,"e-droppable");if(e&&e.classList.contains("e-diagram")){e.ej2_instances[0].droppable.over(t)}},cursorAt:{left:this.symbolPreview.offset.x,top:this.symbolPreview.offset.y}}))},e.prototype.dragStart=function(t){var e=this.helper[0];e&&e.setAttribute("paletteId",this.element.id)},e.prototype.dragStop=function(t){sv(t.target,"e-diagram")||lt(t.helper)},e.prototype.scaleSymbol=function(t,e,i,n,s,r,o){if(t instanceof Rg){var a=t.wrapper;t.wrapper=e.children[0];for(var l=t.scale(i,n,s,r,e.children[0]),h=s/2-e.children[0].children[0].offsetX+l.x/2,c=r/2-e.children[0].children[0].offsetY+l.y/2,d=0,p=e.children[0].children;d<p.length;d++){var u=p[d];u.offsetX+=h,u.offsetY+=c,u.staticSize=!1}t.wrapper=a}else if("Bpmn"===t.shape.type&&this.bpmnModule){a=t.wrapper;t.wrapper=e,e.children[0].width=s,e.children[0].height=r,this.bpmnModule.updateBPMN({width:s,height:r},t,t,null),t.wrapper=a}else if(t.children){var g,m,f=t.children;if(!o)for(var y=void 0,v=void 0,b=0;b<f.length;b++)(v=e.children[0].children[parseInt(b.toString(),10)])&&(v.children[0].children&&this.measureChild(v),y=this.symbolTable[v.id],v.width=y.width,v.height=y.height,v.measure(new un),v.arrange(v.children[0].desiredSize));if(g=s/e.children[0].desiredSize.width,m=r/e.children[0].desiredSize.height,e.children[0].measure(new un),e.children[0].arrange(e.children[0].desiredSize),!o){var C=void 0;for(b=0;b<f.length;b++)(C=e.children[0].children[parseInt(b.toString(),10)])&&(C.children[0].children&&this.scaleChildren(C,g,m,t),this.scaleGroup(C,g,m,t))}if(o){var I=void 0,M=void 0;for(C=void 0,b=0;b<f.length;b++)I=s/t.wrapper.children[0].desiredSize.width,M=r/t.wrapper.children[0].desiredSize.height,(C=e.children[0].children[parseInt(b.toString(),10)])&&(C.children[0].children&&this.scaleChildren(C,I,M,t,!0),this.scaleGroup(C,I,M,t,!0));t.wrapper.children[0].measure(new un),t.wrapper.children[0].arrange(t.wrapper.children[0].desiredSize)}}else nf(e.children[0],i,n,e)},e.prototype.scaleChildren=function(t,e,i,n,s){for(var r,o=0;o<t.children.length;o++)(r=t.children[parseInt(o.toString(),10)]).children[0].children?this.scaleChildren(r,e,i,n,s):this.scaleGroup(r,e,i,n,s)},e.prototype.measureChild=function(t){for(var e,i,n=0;n<t.children.length;n++)(e=t.children[parseInt(n.toString(),10)]).children[0].children?this.measureChild(e):(i=this.symbolTable[e.id],e.width=i.width,e.height=i.height,e.measure(new un),e.arrange(e.children[0].desiredSize))},e.prototype.scaleGroup=function(t,e,i,n,s){t.width=t.width*e,t.height=t.height*i,t.offsetX=s?t.offsetX*e-n.style.strokeWidth:t.offsetX*e+n.style.strokeWidth/2,t.offsetY=s?t.offsetY*i-n.style.strokeWidth:t.offsetY*i+n.style.strokeWidth/2,t.measure(new un),t.arrange(t.children[0].desiredSize)},e.prototype.refreshPalettes=function(){x()||(this.accordionElement.items=[]),function(t,e){var i;for(i=e&&document.getElementById(e).classList.contains(t)?document.getElementById(e).getElementsByClassName(t):document.getElementsByClassName(t);i.length>0;)i[0].parentNode.removeChild(i[0])}("e-remove-palette",this.element.id),this.updatePalettes(),x()||this.accordionElement.dataBind()},e.prototype.updatePalettes=function(){for(var t=0;t<this.palettes.length;t++){var e=this.palettes[parseInt(t.toString(),10)];"search_palette"===e.id?(this.palettes.splice(t,1),t--):(this.initSymbols(e),this.renderPalette(e))}},e.prototype.createTextbox=function(){var t=iv("div",{id:this.element.id+"_search"});cv(t,"height:30px"),t.className="e-input-group",this.element.appendChild(t);var e=iv("input",{});e.placeholder=this.l10n.getConstant("SearchShapes"),e.id="textEnter",cv(e,"width:100%;height:auto"),e.className="e-input",t.appendChild(e);var i=iv("span",{id:"iconSearch",className:"e-input-group-icon e-search e-icons"});t.appendChild(i)},e.prototype.getFilterSymbol=function(t){var e=this;return t.filter(function(t){return!e.ignoreSymbolsOnSearch.includes(t.id)})},e.prototype.searchPalette=function(t){var e,i=[],n=document.getElementById("SearchPalette");if(n){for(var s=n.children.length-1;s>=0;s--)n.removeChild(n.children[parseInt(s.toString(),10)]);this.palettes.splice(0,1)}for(s=0;s<this.palettes.length;s++)for(var r=this.palettes[parseInt(s.toString(),10)],o=0;o<r.symbols.length;o++){var a=r.symbols[parseInt(o.toString(),10)];""!==t&&-1!==a.id.toLowerCase().indexOf(t.toLowerCase())&&i.push(a)}var l=is(this.filterSymbols);if(l&&(i=l(i)||[]),this.ignoreSymbolsOnSearch&&this.ignoreSymbolsOnSearch.length>0&&(i=this.getFilterSymbol(i)),""!==t){var h=new Nk(this,"palettes",g={id:"search_palette",expanded:!0,symbols:i,title:"Search Shapes"},!0);this.palettes.splice(0,0,h)}if(n||x()||(n=e=this.createSearchPalette(e)),i.length>0)for(var c=0,d=i;c<d.length;c++){var p=d[c];""===p.parentId&&this.getSymbolContainer(p,n)}else if(""!==t){var u=iv("div",{id:"EmptyDiv",style:"text-align:center;font-style:italic"});u.innerHTML=this.l10n.getConstant("NoItemsToDisplay"),n.appendChild(u)}else{var g;if(document.getElementById("iconSearch").className="e-input-group-icon e-search e-icons",!x())this.accordionElement.removeItem(0),(g=document.getElementById("SearchPalette"))&&g.remove()}},e.prototype.createSearchPalette=function(t){t=iv("div",{id:"SearchPalette",style:"display:none;overflow:auto;"}),this.element.appendChild(t);var e={header:this.l10n.getConstant("SearchResults"),expanded:!0,content:"#SearchPalette"};return this.accordionElement.addItem(e,0),t},e.prototype.wireEvents=function(){var t=G.touchStartEvent,e=G.touchEndEvent,i=G.touchMoveEvent;K.add(this.element,t,this.mouseDown,this),K.add(this.element,i,this.mouseMove,this),K.add(this.element,e,this.mouseUp,this),K.add(this.element,"mouseleave",this.mouseLeave,this),K.add(this.element,"keyup",this.keyUp,this),K.add(document,"keydown",this.keyDown,this),this.initDraggable()},e.prototype.unWireEvents=function(){var t=G.touchStartEvent,e=G.touchEndEvent,i=G.touchMoveEvent,n=G.isPointer?"pointerleave":"mouseleave";K.remove(this.element,t,this.mouseDown),K.remove(this.element,i,this.mouseMove),K.remove(this.element,e,this.mouseUp),K.remove(this.element,n,this.mouseLeave),K.remove(this.element,"keyup",this.keyUp),K.remove(document,"keydown",this.keyDown)},Tk([jt("S")],e.prototype,"accessKey",void 0),Tk([jt("100%")],e.prototype,"width",void 0),Tk([jt("100%")],e.prototype,"height",void 0),Tk([Rt([],Nk)],e.prototype,"palettes",void 0),Tk([jt()],e.prototype,"getSymbolInfo",void 0),Tk([jt({fit:!0})],e.prototype,"symbolInfo",void 0),Tk([jt()],e.prototype,"filterSymbols",void 0),Tk([jt()],e.prototype,"ignoreSymbolsOnSearch",void 0),Tk([jt()],e.prototype,"getSymbolTemplate",void 0),Tk([jt()],e.prototype,"symbolWidth",void 0),Tk([jt()],e.prototype,"symbolHeight",void 0),Tk([Bt({left:10,right:10,top:10,bottom:10},Os)],e.prototype,"symbolMargin",void 0),Tk([jt(!0)],e.prototype,"allowDrag",void 0),Tk([Bt({},Ok)],e.prototype,"symbolPreview",void 0),Tk([Bt({},Lk)],e.prototype,"symbolDragSize",void 0),Tk([jt(!1)],e.prototype,"enableSearch",void 0),Tk([jt(!0)],e.prototype,"enableAnimation",void 0),Tk([jt("Multiple")],e.prototype,"expandMode",void 0),Tk([Ut()],e.prototype,"paletteSelectionChange",void 0),Tk([Ut()],e.prototype,"paletteExpanding",void 0),Tk([jt()],e.prototype,"getNodeDefaults",void 0),Tk([jt()],e.prototype,"nodeDefaults",void 0),Tk([jt()],e.prototype,"getConnectorDefaults",void 0),Tk([jt()],e.prototype,"connectorDefaults",void 0),e}(_e),zk=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Pk=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={layers:"layer",customCursors:"customCursor",connectors:{connector:{connectorFixedUserHandles:"connectorFixedUserHandle",connectorAnnotations:"connectorAnnotation"}},nodes:{node:{nodeFixedUserHandles:"nodeFixedUserHandle",nodeAnnotations:"nodeAnnotation",ports:"port"}}},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return zk(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(qb);Ki(Pk,[Gi,n.Component]);var jk=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Bk=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}jk(e,t),e.moduleName="palette"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}jk(e,t),e.propertyName="palettes",e.moduleName="palettes"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Hk=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.directivekeys={palettes:"palette"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Bk(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(kk);Ki(Hk,[Gi,n.Component]);var Rk=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Rk(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(cm),[Gi,n.Component]);var Vk=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Uk=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Vk(e,t),e.moduleName="dropDownButtonItem"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Vk(e,t),e.propertyName="items",e.moduleName="dropDownButtonItems"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Fk=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={dropDownButtonItems:"dropDownButtonItem"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Uk(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(CE);Ki(Fk,[Gi,n.Component]);var Wk=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Yk=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Wk(e,t),e.moduleName="splitButtonItem"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Wk(e,t),e.propertyName="items",e.moduleName="splitButtonItems"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={splitButtonItems:"splitButtonItem"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Yk(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(wE),[Gi,n.Component]);var _k=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return _k(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(jE),[Gi,n.Component]);class Qk{constructor(t){this.selectedItem=t,this.diagram=null,this.toolbarEditor=void 0,this.ddlTextPosition=null}selectionChange(t){const e=document.getElementById("diagram").ej2_instances[0],i=document.getElementById("toolbarEditor").ej2_instances[0];if(!this.selectedItem.preventSelectionChange&&!this.selectedItem.isLoading&&"Changed"===t.state){let t=e.selectedItems.nodes;t=t.concat(e.selectedItems.connectors),this.selectedItem.utilityMethods.enableToolbarItems(t);let o=document.getElementById("nodePropertyContainer");if(o.classList.remove("multiple"),o.classList.remove("connector"),t.length>1){this.multipleSelectionSettings(t),i.items[7].tooltipText="Group",i.items[7].prefixIcon="sf-icon-group";for(var n=7;n<=28;n++)i.items[n].visible=!0}else if(1===t.length){this.singleSelectionSettings(t[0]);for(var s=7;s<=28;s++)i.items[s].visible=!(s<=16);t[0].children&&t[0].children.length>0&&(i.items[7].tooltipText="UnGroup",i.items[7].prefixIcon="sf-icon-ungroup",i.items[7].visible=!0)}else{this.selectedItem.utilityMethods.objectTypeChange("diagram");for(var r=7;r<=28;r++)i.items[r].visible=!1}}}multipleSelectionSettings(t){this.selectedItem.utilityMethods.objectTypeChange("None");let e=!1,i=!1,n=!1,s=!1,r=document.getElementById("nodePropertyContainer");t.forEach(t=>{!(t instanceof Ny)||i&&n?!(t instanceof Rg)||e&&s||(e=!0,s=!!(t.annotations.length>0&&t.annotations[0].content)):(i=!0,n=!!(t.annotations.length>0&&t.annotations[0].content))});let o=document.getElementById("diagram").ej2_instances[0].selectedItems;i&&(r.style.display="",r.classList.add("multiple"),e&&r.classList.add("connector"),this.selectedItem.utilityMethods.bindNodeProperties(o.nodes[0],this.selectedItem)),e&&!i&&(document.getElementById("connectorPropertyContainer").style.display="",this.selectedItem.utilityMethods.bindConnectorProperties(o.connectors[0],this.selectedItem)),(n||s)&&(document.getElementById("textPropertyContainer").style.display="",document.getElementById("textPositionDiv").style.display=n&&s?"none":"",document.getElementById("textColorDiv").className=s?"col-xs-6 db-col-left":"col-xs-6 db-col-right",this.ddlTextPosition.dataSource=s?this.selectedItem.textProperties.getConnectorTextPositions():this.selectedItem.textProperties.getNodeTextPositions(),this.ddlTextPosition.dataBind())}singleSelectionSettings(t){let e;if(t instanceof Ny?(this.selectedItem.utilityMethods.objectTypeChange("node"),e=t,this.selectedItem.utilityMethods.bindNodeProperties(e,this.selectedItem)):t instanceof Rg&&(this.selectedItem.utilityMethods.objectTypeChange("connector"),e=t,this.selectedItem.utilityMethods.bindConnectorProperties(e,this.selectedItem)),e.shape&&"Text"===e.shape.type){document.getElementById("textPropertyContainer").style.display="",document.getElementById("toolbarTextAlignmentDiv").style.display="none",document.getElementById("textPositionDiv").style.display="none",document.getElementById("textColorDiv").className="col-xs-6 db-col-left";const t=document.getElementById("textOpacityProperty");t&&(t.style.visibility="hidden"),this.selectedItem.utilityMethods.bindTextProperties(e.style,this.selectedItem)}else if(e.annotations.length>0&&e.annotations[0].content){document.getElementById("textPropertyContainer").style.display="",document.getElementById("toolbarTextAlignmentDiv").style.display="",document.getElementById("textPositionDiv").style.display="",document.getElementById("textColorDiv").className="col-xs-6 db-col-right";const t=document.getElementById("textOpacityProperty");if(t&&(t.style.visibility="visible"),this.selectedItem.utilityMethods.bindTextProperties(e.annotations[0].style,this.selectedItem),this.selectedItem.utilityMethods.updateHorVertAlign(e.annotations[0].horizontalAlignment,e.annotations[0].verticalAlignment),e.annotations[0]instanceof Xc){let t=e.annotations[0];this.ddlTextPosition.dataSource=this.selectedItem.textProperties.getNodeTextPositions(),this.ddlTextPosition.value=this.selectedItem.textProperties.textPosition=this.selectedItem.utilityMethods.getPosition(t.offset),this.ddlTextPosition.dataBind()}else if(e.annotations[0]instanceof Gc){let t=e.annotations[0];this.ddlTextPosition.dataSource=this.selectedItem.textProperties.getConnectorTextPositions(),this.ddlTextPosition.value=this.selectedItem.textProperties.textPosition=t.alignment,this.ddlTextPosition.dataBind()}}}nodePositionChange(t){this.selectedItem.preventPropertyChange=!0,this.selectedItem.nodeProperties.offsetX.value=Math.round(100*t.newValue.offsetX)/100,this.selectedItem.nodeProperties.offsetY.value=Math.round(100*t.newValue.offsetY)/100,"Completed"===t.state&&(this.selectedItem.isModified=!0,this.selectedItem.preventPropertyChange=!1)}nodeSizeChange(t){this.selectedItem.preventPropertyChange=!0,this.selectedItem.nodeProperties.width.value=Math.round(100*t.newValue.width)/100,this.selectedItem.nodeProperties.height.value=Math.round(100*t.newValue.height)/100,"Completed"===t.state&&(this.selectedItem.isModified=!0,this.selectedItem.preventPropertyChange=!1)}nodeRotationChange(t){this.selectedItem.preventPropertyChange=!0,this.selectedItem.nodeProperties.rotateAngle.value=Math.round(100*t.newValue.rotateAngle)/100,this.selectedItem.preventPropertyChange=!1,"Completed"===t.state&&(this.selectedItem.isModified=!0)}collectionChange(t){"Changed"===t.state&&(this.selectedItem.isModified=!0)}dragEnter(t){-1!==t.element.id.indexOf("Doorclose")?(t.element.width=40,t.element.height=42):-1!==t.element.id.indexOf("Doubledoorclose")?(t.element.width=80,t.element.height=42):-1!==t.element.id.indexOf("CircleDiningTable")?(t.element.width=50,t.element.height=50):-1!==t.element.id.indexOf("CircleStudyTable")||-1!==t.element.id.indexOf("CircleStudyTable1")||-1!==t.element.id.indexOf("CircleStudyTable2")||-1!==t.element.id.indexOf("CircleStudyTable3")?(t.element.width=40,t.element.height=40):-1!==t.element.id.indexOf("RectangleDiningTable")?(t.element.width=50,t.element.height=50):-1!==t.element.id.indexOf("OblongDiningTable")||-1!==t.element.id.indexOf("OvalDiningTable")?(t.element.width=90,t.element.height=50):-1!==t.element.id.indexOf("RectangularTableforTwo")||-1!==t.element.id.indexOf("CircularTableforTwo")?(t.element.width=50,t.element.height=60):-1!==t.element.id.indexOf("RectangleStudyTable")||-1!==t.element.id.indexOf("RectangleStudyTable1")?(t.element.width=80,t.element.height=40):-1!==t.element.id.indexOf("Refrigerator")?(t.element.width=52,t.element.height=60):-1!==t.element.id.indexOf("Stool")?(t.element.width=23,t.element.height=23):-1!==t.element.id.indexOf("WallCorner")||-1!==t.element.id.indexOf("WallCorner1")?(t.element.width=50,t.element.height=50):-1!==t.element.id.indexOf("WaterCooler")||-1!==t.element.id.indexOf("Elevator")?(t.element.width=40,t.element.height=40):-1!==t.element.id.indexOf("Chair1")?(t.element.width=25,t.element.height=25):-1!==t.element.id.indexOf("Chair")||-1!==t.element.id.indexOf("LargePlant")?(t.element.width=28,t.element.height=32):-1!==t.element.id.indexOf("Doublebed")||-1!==t.element.id.indexOf("Doublebed1")?(t.element.width=100,t.element.height=90):-1!==t.element.id.indexOf("Singlebed")||-1!==t.element.id.indexOf("Singlebed1")?(t.element.width=50,t.element.height=90):-1!==t.element.id.indexOf("BookCase")?(t.element.width=60,t.element.height=20):-1!==t.element.id.indexOf("Warddrobe")||-1!==t.element.id.indexOf("Warddrobe1")?(t.element.width=73,t.element.height=35):-1!==t.element.id.indexOf("SmallPlant")||-1!==t.element.id.indexOf("Lamplight")?(t.element.width=25,t.element.height=25):-1!==t.element.id.indexOf("Matte")||-1!==t.element.id.indexOf("Matte1")?(t.element.width=40,t.element.height=20):-1!==t.element.id.indexOf("FlatTV")||-1!==t.element.id.indexOf("FlatTV1")?(t.element.width=68,t.element.height=10):-1!==t.element.id.indexOf("TV")?(t.element.width=40,t.element.height=25):-1!==t.element.id.indexOf("SingleSofa")||-1!==t.element.id.indexOf("Couch")?(t.element.width=45,t.element.height=40):-1!==t.element.id.indexOf("Sofa")||-1!==t.element.id.indexOf("DoubleSofa")||-1!==t.element.id.indexOf("Lounge")?(t.element.width=100,t.element.height=35):-1!==t.element.id.indexOf("WindowGarden")?(t.element.width=80,t.element.height=18):-1!==t.element.id.indexOf("SmallGasRange")?(t.element.width=80,t.element.height=32):-1!==t.element.id.indexOf("LargeGasRange")||-1!==t.element.id.indexOf("LargeGasRange1")?(t.element.width=100,t.element.height=32):-1!==t.element.id.indexOf("Window")||-1!==t.element.id.indexOf("window1")?(t.element.width=50,t.element.height=6):-1!==t.element.id.indexOf("Piano")?(t.element.width=68,t.element.height=71):-1!==t.element.id.indexOf("Staircase1")?(t.element.width=150,t.element.height=100):-1!==t.element.id.indexOf("Staircase")?(t.element.width=150,t.element.height=50):-1!==t.element.id.indexOf("Printer")||-1!==t.element.id.indexOf("Laptop")?(t.element.width=30,t.element.height=30):-1!==t.element.id.indexOf("Room")||-1!==t.element.id.indexOf("TRoom")||-1!==t.element.id.indexOf("LRoom")||-1!==t.element.id.indexOf("TWall")?(t.element.width=50,t.element.height=50):-1!==t.element.id.indexOf("DoubleSink")||-1!==t.element.id.indexOf("DoubleSink1")||-1!==t.element.id.indexOf("DoubleSink2")||-1!==t.element.id.indexOf("DoubleSink4")?(t.element.width=76,t.element.height=38):-1!==t.element.id.indexOf("Toilet1")||-1!==t.element.id.indexOf("Toilet2")?(t.element.width=23,t.element.height=36):-1!==t.element.id.indexOf("CornerShower")||-1!==t.element.id.indexOf("Shower")?(t.element.width=50,t.element.height=50):-1!==t.element.id.indexOf("WashBasin1")||-1!==t.element.id.indexOf("WashBasin2")||-1!==t.element.id.indexOf("WashBasin3")||-1!==t.element.id.indexOf("WashBasin5")||-1!==t.element.id.indexOf("WashBasin6")?(t.element.width=35,t.element.height=30):-1!==t.element.id.indexOf("BathTub")||-1!==t.element.id.indexOf("BathTub1")||-1!==t.element.id.indexOf("BathTub2")||-1!==t.element.id.indexOf("BathTub3")?(t.element.width=55,t.element.height=30):(t.element.width=50,t.element.height=50)}historyChange(t){const e=document.getElementById("diagram").ej2_instances[0],i=document.getElementsByClassName("db-toolbar-container")[0];i.classList.remove("db-undo"),i.classList.remove("db-redo"),e.historyManager.undoStack.length>0&&i.classList.add("db-undo"),e.historyManager.redoStack.length>0&&i.classList.add("db-redo")}}class Zk{constructor(t){this.selectedItem=t,this.diagram=null,this.ddlTextPosition=null}pageBreaksChange(t){const e=document.getElementById("diagram-menu").ej2_instances[0].items[4].items;t.event&&(this.selectedItem.pageSettings.pageBreaks=t.checked,this.selectedItem.selectedDiagram.pageSettings.showPageBreaks=t.checked,e[5].iconCss=!0===t.checked?"sf-icon-check-tick":"")}paperListChange(t){const e=this.selectedItem.selectedDiagram;document.getElementById("pageDimension").style.display="none",document.getElementById("pageOrientation").style.display="";const i=document.getElementById("diagram-menu").ej2_instances[0],n=t.value||t.item.value,s=this.selectedItem.utilityMethods.getPaperSize(n);let r=s.pageWidth,o=s.pageHeight;r&&o?("Portrait"===e.pageSettings.orientation?r>o&&([r,o]=[o,r]):o>r&&([o,r]=[r,o]),e.pageSettings.width=r,e.pageSettings.height=o,this.selectedItem.pageSettings.pageWidth=r,this.selectedItem.pageSettings.pageHeight=o):(document.getElementById("pageOrientation").style.display="none",document.getElementById("pageDimension").style.display="",e.pageSettings.width=1460,e.pageSettings.height=600),this.updatePaperSelection(i.items[3].items[1],n),e.dataBind()}updatePaperSelection(t,e){for(var i=0;i<t.items.length;i++)e===t.items[i].value?t.items[i].iconCss="sf-icon-check-tick":t.items[i].iconCss=""}updateSelection(t){for(var e=0;e<t.parentObj.items.length;e++)t.text===t.parentObj.items[e].text?t.parentObj.items[e].iconCss="sf-icon-check-tick":t.parentObj.items[e].iconCss=""}pageDimensionChange(t){if(t.event){let e=Number(this.selectedItem.pageSettings.pageWidth),i=Number(this.selectedItem.pageSettings.pageHeight),n=t.event.target instanceof HTMLInputElement?t.event.target:t.event.target.parentElement.children[0];const s=this.selectedItem.selectedDiagram;"pageWidth"===n.id?e=Number(n.value):i=Number(n.value),e&&i&&(e>i?(this.selectedItem.pageSettings.isPortrait=!1,this.selectedItem.pageSettings.isLandscape=!0,s.pageSettings.orientation="Landscape"):(this.selectedItem.pageSettings.isPortrait=!0,this.selectedItem.pageSettings.isLandscape=!1,s.pageSettings.orientation="Portrait"),this.selectedItem.pageSettings.pageWidth=s.pageSettings.width=e,this.selectedItem.pageSettings.pageHeight=s.pageSettings.height=i,s.dataBind())}}pageOrientationChange(t){if(t.target){const e=t.target,i=document.getElementById("diagram-menu").ej2_instances[0],n=this.selectedItem.selectedDiagram,s=i.items[3].items;switch(e.id?e.id:"sf-icon-portrait"===t.currentTarget.ej2_instances[0].iconCss?"pagePortrait":"pageLandscape"){case"pagePortrait":n.pageSettings.orientation="Portrait",s[0].items[0].iconCss="",s[0].items[1].iconCss="sf-icon-check-tick",document.getElementById("pageLandscape").classList.remove("e-active");break;case"pageLandscape":n.pageSettings.orientation="Landscape",s[0].items[0].iconCss="sf-icon-check-tick",s[0].items[1].iconCss="",document.getElementById("pagePortrait").classList.remove("e-active")}n.dataBind()}}pageBackgroundChange1(t){if(t.currentValue){const e=this.selectedItem.selectedDiagram;e.pageSettings.background={color:t.currentValue.rgba},e.dataBind()}}textPositionChange(t){null!==t.value&&this.textPropertyChange("textPosition",t.value)}toolbarTextStyleChange(t){this.textPropertyChange(t.item.tooltipText,!1)}toolbarTextSubAlignChange(t){const e=t.item.tooltipText.replace(/[" "]/g,"");this.textPropertyChange(e,e)}toolbarTextAlignChange(t){const e=t.item.tooltipText.replace("Align ","");this.textPropertyChange(e,e)}textPropertyChange(t,e){if(!this.selectedItem.preventPropertyChange){const i=this.selectedItem.selectedDiagram,n=i.selectedItems.nodes.concat(i.selectedItems.connectors);t=t.toLowerCase(),n.length>0&&(n.forEach(i=>{i.annotations.length>0?i.annotations.forEach((n,s)=>{i.annotations[s]instanceof Xc?"textposition"===t&&(this.selectedItem.textProperties.textPosition=e.toString(),n.offset=this.selectedItem.utilityMethods.getOffset(e)):i.annotations[s]instanceof Gc&&"textposition"===t&&(this.selectedItem.textProperties.textPosition=e.toString(),n.alignment=this.selectedItem.textProperties.textPosition),["left","right","center"].includes(t)?(n.horizontalAlignment=e,this.selectedItem.utilityMethods.updateHorVertAlign(n.horizontalAlignment,n.verticalAlignment)):["top","bottom"].includes(t)?(n.verticalAlignment=e,this.selectedItem.utilityMethods.updateHorVertAlign(n.horizontalAlignment,n.verticalAlignment)):"middle"===t?(n.verticalAlignment="Center",this.selectedItem.utilityMethods.updateHorVertAlign(n.horizontalAlignment,n.verticalAlignment)):this.updateTextProperties(t,e,n.style)}):i.shape&&"Text"===i.shape.type&&this.updateTextProperties(t,e,i.style)}),i.dataBind(),this.selectedItem.isModified=!0)}}updateTextProperties(t,e,i){switch(t){case"bold":i.bold=!i.bold,this.updateToolbarState("toolbarTextStyle",i.bold,0);break;case"italic":i.italic=!i.italic,this.updateToolbarState("toolbarTextStyle",i.italic,1);break;case"underline":this.selectedItem.textProperties.textDecoration=!this.selectedItem.textProperties.textDecoration,i.textDecoration="None"!==i.textDecoration&&i.textDecoration?"None":"Underline",this.updateToolbarState("toolbarTextStyle",this.selectedItem.textProperties.textDecoration,2);break;case"aligntextleft":case"aligntextright":case"aligntextcenter":i.textAlign=e.replace("AlignText",""),this.selectedItem.utilityMethods.updateTextAlign(i.textAlign)}}updateToolbarState(t,e,i){let n=document.getElementById(t);if(n&&(n=n.ej2_instances[0],n)){const t=n.items[i].cssClass;n.items[i].cssClass=e?t+" tb-item-selected":t.replace(" tb-item-selected",""),n.dataBind()}}}var qk=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Xk=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}qk(e,t),e.moduleName="dialogButton"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}qk(e,t),e.propertyName="buttons",e.moduleName="buttons"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Gk=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={buttons:"dialogButton"},i.statelessTemplateProps=["content"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return Xk(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(wh);Ki(Gk,[Gi,n.Component]);var Kk=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return Kk(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(Zh),[Gi,n.Component]);var Jk=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$k=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Jk(e,t),e.moduleName="accordionItem"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Jk(e,t),e.propertyName="items",e.moduleName="accordionItems"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={accordionItems:"accordionItem"},i.statelessTemplateProps=["itemTemplate","headerTemplate"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return $k(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(WM),[Gi,n.Component]);var tz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ez=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tz(e,t),e.moduleName="item",e}(tn),iz=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tz(e,t),e.propertyName="items",e.moduleName="items",e}(tn),nz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),sz=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={items:"item"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return nz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(yM);Ki(sz,[Gi,n.Component]);var rz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),oz=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return rz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("ul",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(QM);Ki(oz,[Gi,n.Component]);var az=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),lz=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}az(e,t),e.moduleName="breadcrumbItem"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}az(e,t),e.propertyName="items",e.moduleName="breadcrumbItems"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={breadcrumbItems:"breadcrumbItem"},i.statelessTemplateProps=["itemTemplate"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return lz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("nav",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(QN),[Gi,n.Component]);var hz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cz=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}hz(e,t),e.moduleName="carouselItem"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}hz(e,t),e.propertyName="items",e.moduleName="carouselItems"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={carouselItems:"carouselItem"},i.statelessTemplateProps=["itemTemplate"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return cz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(OL),[Gi,n.Component]);var dz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),pz=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}dz(e,t),e.moduleName="tabItem",e.complexTemplate={"header.text":"header.text"}}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}dz(e,t),e.propertyName="items",e.moduleName="tabItems"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={tabItems:"tabItem"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return pz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(RS),[Gi,n.Component]);var uz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return uz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(pN),[Gi,n.Component]);var gz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return gz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(AN),[Gi,n.Component]);var mz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),fz=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}mz(e,t),e.moduleName="menuItem"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}mz(e,t),e.propertyName="items",e.moduleName="menuItems"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),yz=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={menuItems:"menuItem"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return fz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("ul",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(KM);Ki(yz,[Gi,n.Component]);var vz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return vz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("header",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(_L),[Gi,n.Component]);var bz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Cz=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}bz(e,t),e.moduleName="step"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}bz(e,t),e.propertyName="steps",e.moduleName="steps"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={steps:"step"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return Cz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("nav",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(OO),[Gi,n.Component]);var Iz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Iz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(vT),[Gi,n.Component]);var Mz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Mz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("textarea",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(DT),[Gi,n.Component]);var Sz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),xz=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Sz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(mx);Ki(xz,[Gi,n.Component]);var wz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.controlAttributes=["name"],i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return wz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(aw),[Gi,n.Component]);var Dz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ez=function(t){function e(e){var i=t.call(this,e)||this;return i.controlAttributes=["name"],i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Dz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(yD);Ki(Ez,[Gi,n.Component]);var Tz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Az=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Tz(e,t),e.moduleName="uploadedFiles"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Tz(e,t),e.propertyName="files",e.moduleName="files"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),Nz=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={files:"uploadedFiles"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return Az(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(sE);Ki(Nz,[Gi,n.Component]);var Lz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Oz=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Lz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(mT);Ki(Oz,[Gi,n.Component]);var kz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return kz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("canvas",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(FT),[Gi,n.Component]);var zz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return zz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(aA),[Gi,n.Component]);var Pz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Pz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(pA),[Gi,n.Component]);var jz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return jz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("textarea",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(zT),[Gi,n.Component]);var Bz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Bz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(vA),[Gi,n.Component]);var Hz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Rz=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Hz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(mo);Ki(Rz,[Gi,n.Component]);var Vz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Uz=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Vz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(Ao);Ki(Uz,[Gi,n.Component]);var Fz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Fz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(Bo),[Gi,n.Component]);var Wz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Wz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(Zo),[Gi,n.Component]);var Yz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_z=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Yz(e,t),e.moduleName="chip"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Yz(e,t),e.propertyName="chips",e.moduleName="chips"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={chips:"chip"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return _z(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(Ko),[Gi,n.Component]);var Qz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Qz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(da),[Gi,n.Component]);var Zz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),qz=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Zz(e,t),e.moduleName="speedDialItem"}(tn),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Zz(e,t),e.propertyName="items",e.moduleName="speedDialItems"}(tn),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}());Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.directivekeys={speedDialItems:"speedDialItem"},i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return qz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(gl),[Gi,n.Component]);var Xz=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!0,i.isReactMock=!0,i.portals=[],i}return Xz(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(bl),[Gi,n.Component]);class Gz{constructor(){this.expandMode="Multiple",this.enableSearch=!0,this.symbolMargin={left:5,right:5,top:5,bottom:5},this.palettes=[{id:"door",expanded:!0,symbols:Kz,iconCss:"e-ddb-icons e-flow",title:"Doors and Walls"},{id:"diningRoom",expanded:!0,symbols:Jz,iconCss:"e-ddb-icons e-flow",title:"Dining Room"},{id:"kitchen",expanded:!0,symbols:eP,iconCss:"e-ddb-icons e-flow",title:"Kitchen"},{id:"bedRoom",expanded:!0,symbols:$z,iconCss:"e-ddb-icons e-flow",title:"Bed Room"},{id:"livingRoom",expanded:!0,symbols:tP,iconCss:"e-ddb-icons e-flow",title:"Living Room"},{id:"bathRoom",expanded:!0,symbols:iP,iconCss:"e-ddb-icons e-flow",title:"Bath Room"}]}getSymbolInfo(t){return{tooltip:t.addInfo}}setPaletteNodeDefaults(t){"Doorclose"===t.id||"Doubledoorclose"===t.id?(t.width=25,t.height=25):"CircleStudyTable"===t.id||"CircularTableforTwo"===t.id||"CircleStudyTable1"===t.id||"CircleStudyTable2"===t.id||"CircleStudyTable3"===t.id?(t.width=27,t.height=27):"CircleDiningTable"===t.id||"RectangleDiningTable"===t.id?(t.width=30,t.height=30):"OblongDiningTable"===t.id||"RectangleDiningTable"===t.id||"OvalDiningTable"===t.id?(t.width=50,t.height=30):"RectangularTableforTwo"===t.id?(t.width=26,t.height=30):"RectangleStudyTable"===t.id||"RectangleStudyTable1"===t.id?(t.width=35,t.height=22):"SmallGasRange"===t.id||"LargeGasRange"===t.id||"LargeGasRange1"===t.id?(t.width=50,t.height=25):"Refrigerator"===t.id||"WaterCooler"===t.id?(t.width=25,t.height=25):"Doublebed"===t.id||"Doublebed1"===t.id?(t.width=36,t.height=30):"Singlebed"===t.id||"Singlebed1"===t.id?(t.width=19,t.height=30):"BookCase"===t.id?(t.width=40,t.height=20):"Warddrobe1"===t.id?(t.width=35,t.height=30):"Warddrobe"===t.id?(t.width=35,t.height=20):"Matte"===t.id||"Matte1"===t.id?(t.width=20,t.height=10):"LargePlant"===t.id||"SmallPlant"===t.id||"Lamplight"===t.id?(t.width=20,t.height=20):"TV"===t.id?(t.width=40,t.height=12):"FlatTV"===t.id||"FlatTV1"===t.id?(t.width=65,t.height=12):"Chair"===t.id||"Chair1"===t.id?(t.width=30,t.height=25):"Sofa"===t.id||"DoubleSofa"===t.id?(t.width=50,t.height=25):"SingleSofa"===t.id||"Couch"===t.id?(t.width=25,t.height=25):"Lounge"===t.id||"Piano"===t.id?(t.width=55,t.height=25):"Stool"===t.id?(t.width=24,t.height=24):"Printer"===t.id||"Laptop"===t.id?(t.width=25,t.height=25):"Window1"===t.id||"Window2"===t.id?(t.width=50,t.height=5):"WindowGarden"===t.id?(t.width=60,t.height=10):"LRoom"===t.id||"WallCorner1"===t.id?(t.width=45,t.height=40):"TWall"===t.id?(t.width=45,t.height=30):"Room"===t.id||"TRoom"===t.id||"WallCorner"===t.id||"Elevator"===t.id?(t.width=45,t.height=38):"Staircase"===t.id||"Staircase1"===t.id||"Staircase2"===t.id?(t.width=40,t.height=30):"Toilet1"===t.id||"Toilet2"===t.id?(t.width=27,t.height=35):"CornerShower"===t.id||"Shower"===t.id?(t.width=36,t.height=35):"WashBasin1"===t.id?(t.width=25,t.height=25):"WashBasin2"===t.id||"WashBasin3"===t.id||"WashBasin5"===t.id||"WashBasin6"===t.id?(t.width=30,t.height=22):"DoubleSink4"===t.id||"DoubleSink"===t.id||"DoubleSink1"===t.id||"DoubleSink2"===t.id?(t.width=50,t.height=22):"Refrigerator"===t.id||"WaterCooler"===t.id?(t.width=30,t.height=30):"BathTub"===t.id||"BathTub1"===t.id||"BathTub2"===t.id||"BathTub3"===t.id||"BathTub4"===t.id?(t.width=40,t.height=22):(t.width=50,t.height=50)}}const Kz=[{id:"Doorclose",addInfo:"Door close",shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"Doubledoorclose",addInfo:"Double door close",shape:{type:"Path",data:"M143 71V79L1 79L1 71M143 71L1 71M143 71V1H142C103.34 1 72 32.3401 72 71M143 71H72M1 71L1 1H2C40.6599 1 72 32.3401 72 71M1 71L72 71M72 78.5V71"}},{id:"Room",addInfo:"Room",shape:{type:"Path",data:"M4 4H104V104H4V4Z"}},{id:"TRoom",addInfo:"T Room",shape:{type:"Path",data:"M4 4H273V145.749H192.981V250H71.25V110.312H4V4Z"}},{id:"LRoom",addInfo:"L Room",shape:{type:"Path",data:"M4 4H273V250H146.5V110.312H4V4Z"}},{id:"WallCorner",addInfo:"Wall Corner",shape:{type:"Path",data:"M104 4H4V104"}},{id:"WallCorner1",addInfo:"Wall Corner",shape:{type:"Path",data:"M0 100L100 100L100 0"}},{id:"Staircase",addInfo:"Staircase",dragSize:{width:64,height:25},shape:{type:"Path",data:"M36 1V35M36 1L25 1M36 1H48M36 35H25M36 35H48M25 35L25 1M25 35H13L13 1L25 1M48 1V35M48 1H59M48 35H59M59 1V35M59 1H71M59 35H71M71 1V35M71 1H82M71 35H82M82 1V35M82 1H94M82 35H94M94 1V35M94 1H105M94 35H105M105 1V35M105 1H117V35H105M129 1V35L1 35L1 1L129 1Z"}},{id:"Staircase1",addInfo:"Staircase",dragSize:{width:64,height:25},shape:{type:"Path",data:"M36 1V35M36 1L25 1M36 1H48M36 35H25M36 35H48M25 35L25 1M25 35H13L13 1L25 1M48 1V35M48 1H59M48 35H59M59 1V35M59 1H71M59 35H71M71 1V35M71 1H82M71 35H82M82 1V35M82 1H94M82 35H94M94 1V35M94 1H105M94 35H105M105 1V35M105 1H117V35H105M9 17.5H122M9 17.5C9 18.8807 7.88071 20 6.5 20C5.11929 20 4 18.8807 4 17.5C4 16.1193 5.11929 15 6.5 15C7.88071 15 9 16.1193 9 17.5ZM129 1V35L1 35L1 1L129 1ZM126 17.5L121.5 20.5311V14.4689L126 17.5Z"}},{id:"TWall",addInfo:"T Wall",shape:{type:"Path",data:"M106 4.00002L206 4.00004M106 4.00002L106 104M106 4.00002L0 4"}},{id:"Staircase2",addInfo:"Staircase",dragSize:{width:64,height:25},shape:{type:"Path",data:"M1 17.4998L133 17.4998M121.177 0.869141L132.874 17.3083M121.582 34.7252L132.756 17.7252M121.5 0.999829V34.9998M109.5 0.999829V34.9998M97.5 0.999829V34.9998M85.5 0.999829V34.9998M73.5 0.999829V34.9998M61.5 0.999829V34.9998M49.5 0.999829V34.9998M37.5 0.999829V34.9998M25.5 0.999829L25.5 34.9998M13.5 0.999829L13.5 34.9998M133 0.999829V34.9998L1 34.9998L1 0.999824L133 0.999829Z"}},{id:"WindowGarden",addInfo:"Window Garden",dragSize:{width:76,height:29},shape:{type:"Path",data:"M1.5 0H0V1.5V38.5H3V3H152V38.5H155V1.5V0H153.5H1.5ZM6.5 5H5V6.5V38.5H8V8H53V38.5H56V8H100V38.5H103V8H147V38.5H150V6.5V5H148.5H103H101.5H100H56H54.5H53H6.5Z"}},{id:"Window1",addInfo:"Window",dragSize:{width:66,height:7},shape:{type:"Path",data:"M22 5.5L124 5.50001M145 9L128 9V1L145 1V9ZM1 1L18 1L18 9L1 9L1 1ZM128 8L124 8V2L128 2V8ZM18 2L22 2L22 8L18 8L18 2Z"}},{id:"Window2",addInfo:"Window",dragSize:{width:66,height:7},shape:{type:"Path",data:"M22 3.5L124 3.50001M22 6.5L124 6.50001M145 9L128 9V1L145 1V9ZM1 1L18 1L18 9L1 9L1 1ZM128 8L124 8V2L128 2V8ZM18 2L22 2L22 8L18 8L18 2Z"}}],Jz=[{id:"CircleStudyTable",addInfo:"Circle Study Table",dragSize:{height:40,width:40},shape:{type:"Path",data:"M57 29C57 44.464 44.464 57 29 57C13.536 57 1 44.464 1 29C1 13.536 13.536 1 29 1C44.464 1 57 13.536 57 29Z"}},{id:"CircleStudyTable1",addInfo:"Circle Study Table",dragSize:{height:40,width:40},shape:{type:"Path",data:"M57 29C57 44.464 44.464 57 29 57C13.536 57 1 44.464 1 29C1 13.536 13.536 1 29 1C44.464 1 57 13.536 57 29Z M6.85355 12.1464C6.19532 11.4882 5.98924 10.6873 6.11305 9.86427C6.23921 9.02567 6.71264 8.15463 7.43393 7.43333L6.72683 6.72622C5.88603 7.56702 5.28822 8.62505 5.12418 9.71551C4.9578 10.8215 5.24259 11.9497 6.14645 12.8536L6.85355 12.1464ZM7.43393 7.43333C8.15523 6.71203 9.02609 6.23877 9.8645 6.11276C10.6874 5.98909 11.4882 6.19526 12.1464 6.85355L12.8536 6.14645C11.9498 5.24265 10.8218 4.95765 9.71588 5.12387C8.62553 5.28775 7.56763 5.88542 6.72683 6.72622L7.43393 7.43333ZM51.1464 46.0224C51.8108 46.6867 52.0089 47.4472 51.888 48.217C51.7639 49.0076 51.2956 49.8383 50.5673 50.5667L51.2744 51.2738C52.1081 50.44 52.7105 49.4261 52.8759 48.3721C53.0447 47.2971 52.7513 46.213 51.8536 45.3153L51.1464 46.0224ZM50.5673 50.5667C49.837 51.2969 49.0611 51.7213 48.3324 51.8114C47.6254 51.8987 46.902 51.68 46.2203 50.9982L45.5132 51.7053C46.3935 52.5857 47.4161 52.9322 48.4551 52.8038C49.4724 52.6781 50.4425 52.1056 51.2744 51.2738L50.5673 50.5667ZM46.1646 6.95984C46.8414 6.28307 47.5752 6.07026 48.2996 6.16688C49.0457 6.2664 49.837 6.70326 50.5667 7.43296L51.2738 6.72585C50.4414 5.89345 49.4592 5.3127 48.4318 5.17566C47.3826 5.03572 46.3429 5.3674 45.4575 6.25273L46.1646 6.95984ZM50.5667 7.43296C51.3108 8.17704 51.7686 8.92759 51.889 9.62476C52.0035 10.2884 51.8245 10.9684 51.1464 11.6464L51.8536 12.3536C52.7376 11.4695 53.0497 10.4703 52.8744 9.45465C52.7049 8.47256 52.0918 7.54386 51.2738 6.72585L50.5667 7.43296ZM12.1464 51.1464C11.4882 51.8047 10.6872 52.011 9.86418 51.8873C9.0256 51.7613 8.15459 51.2881 7.43333 50.5668L6.72622 51.2739C7.56706 52.1147 8.62512 52.7124 9.7156 52.8762C10.8216 53.0424 11.9497 52.7574 12.8536 51.8536L12.1464 51.1464ZM7.43333 50.5668C6.71206 49.8455 6.23878 48.9745 6.11276 48.1359C5.98908 47.3128 6.19528 46.5118 6.85355 45.8536L6.14645 45.1464C5.24262 46.0503 4.95766 47.1784 5.12387 48.2845C5.28774 49.375 5.88539 50.4331 6.72622 51.2739L7.43333 50.5668ZM56.5 29C56.5 44.1878 44.1878 56.5 29 56.5V57.5C44.7401 57.5 57.5 44.7401 57.5 29H56.5ZM29 56.5C13.8122 56.5 1.5 44.1878 1.5 29H0.5C0.5 44.7401 13.2599 57.5 29 57.5V56.5ZM1.5 29C1.5 13.8122 13.8122 1.5 29 1.5V0.5C13.2599 0.5 0.5 13.2599 0.5 29H1.5ZM29 1.5C44.1878 1.5 56.5 13.8122 56.5 29H57.5C57.5 13.2599 44.7401 0.5 29 0.5V1.5Z"}},{id:"CircleStudyTable2",addInfo:"Circle Study Table",dragSize:{height:40,width:40},shape:{type:"Path",data:"M57 29C57 44.464 44.464 57 29 57C13.536 57 1 44.464 1 29C1 13.536 13.536 1 29 1C44.464 1 57 13.536 57 29Z  M53 29C53 42.2548 42.2548 53 29 53C15.7452 53 5 42.2548 5 29C5 15.7452 15.7452 5 29 5C42.2548 5 53 15.7452 53 29Z"}},{id:"CircleStudyTable3",addInfo:"Circle Study Table",dragSize:{height:40,width:40},shape:{type:"Path",data:"M1.00187 29.3204C0.824922 13.8575 13.2167 1.17882 28.6796 1.00187C44.1426 0.824922 56.8213 13.2167 56.9982 28.6796C57.1752 44.1426 44.7834 56.8213 29.3204 56.9982C13.8575 57.1752 1.17882 44.7834 1.00187 29.3204Z M4.00163 29.2862C3.84364 15.48 14.9077 4.15981 28.7139 4.00182C42.5201 3.84383 53.8404 14.9079 53.9984 28.7141C54.1563 42.5203 43.0923 53.8406 29.2861 53.9985C15.4798 54.1565 4.15962 43.0925 4.00163 29.2862Z M44.5585 52.7817C44.8152 53.0656 45.1557 53.2686 45.5606 53.3791C45.9655 53.4897 46.4268 53.5056 46.9183 53.426C47.4097 53.3464 47.9216 53.1729 48.4248 52.9153C48.928 52.6577 49.4125 52.3211 49.8508 51.9248C50.2891 51.5284 50.6725 51.08 50.9792 50.6051C51.2859 50.1303 51.5099 49.6383 51.6383 49.1573C51.7667 48.6763 51.797 48.2157 51.7276 47.8018C51.6581 47.3879 51.4903 47.0287 51.2336 46.7449L44.5585 52.7817Z M13.9609 52.8751C13.6983 53.1861 13.3493 53.419 12.934 53.5604C12.5186 53.7019 12.0449 53.7492 11.5399 53.6995C11.035 53.6499 10.5086 53.5043 9.99098 53.2711C9.47332 53.0379 8.97448 52.7217 8.52293 52.3405C8.07139 51.9593 7.67598 51.5205 7.35929 51.0493C7.0426 50.5781 6.81083 50.0836 6.6772 49.5942C6.54358 49.1047 6.51072 48.6298 6.58051 48.1965C6.6503 47.7633 6.82136 47.3803 7.08394 47.0692L13.9609 52.8751Z M51.1787 11.4637C51.4719 11.1448 51.6767 10.7503 51.7812 10.3026C51.8857 9.8549 51.8879 9.36283 51.7877 8.85448C51.6876 8.34613 51.4869 7.83145 51.1973 7.33983C50.9077 6.84821 50.5348 6.38928 50.0998 5.98923C49.6649 5.58919 49.1764 5.25587 48.6623 5.00831C48.1483 4.76074 47.6186 4.60378 47.1037 4.54639C46.5888 4.48899 46.0986 4.53229 45.6612 4.6738C45.2238 4.81531 44.8477 5.05227 44.5544 5.37114L51.1787 11.4637Z M6.96563 11.1862C6.7075 10.8946 6.53905 10.5288 6.46989 10.1095C6.40073 9.69022 6.43222 9.22575 6.56256 8.7426C6.6929 8.25944 6.91954 7.76707 7.22954 7.29359C7.53953 6.8201 7.92682 6.37478 8.36927 5.98305C8.81173 5.59132 9.30069 5.26085 9.80825 5.01052C10.3158 4.76018 10.832 4.59487 11.3274 4.52404C11.8228 4.4532 12.2877 4.47822 12.6955 4.59767C13.1033 4.71713 13.446 4.92867 13.7041 5.22022L6.96563 11.1862Z"}},{id:"CircularTableforTwo",addInfo:"Dual Circle Study Table",shape:{type:"Path",data:"M12.7839 6.68319C12.3695 3.67862 14.704 1 17.737 1H33.4357C36.4079 1 38.7239 3.57736 38.4072 6.53267L37.5 14.7962C33 12.2962 30.4479 12.2502 25.5 12.0049C20.8774 12.1817 18.4551 13.0876 13.9551 15.0876L12.7839 6.68319Z M32 2C32 4.20914 30.2091 6 28 6L23 6C20.7909 6 19 4.20914 19 2V1L32 1V2Z M38.6314 67.656C38.8308 70.546 36.5401 73 33.6433 73H17.5439C14.579 73 12.2654 70.4347 12.5705 67.4855L13.4604 58.6325C17.7149 60.6639 20.3595 61.8118 25.5 61.9951C30.7634 61.8969 34.0464 60.4596 38.1993 58.8266L38.6314 67.656Z M19 72C19 69.7909 20.7909 68 23 68H28C30.2091 68 32 69.7909 32 72V73H19V72Z M51 37C51 50.8071 39.8071 62 26 62C12.1929 62 1 50.8071 1 37C1 23.1929 12.1929 12 26 12C39.8071 12 51 23.1929 51 37Z M48 37C48 49.1503 38.1503 59 26 59C13.8497 59 4 49.1503 4 37C4 24.8497 13.8497 15 26 15C38.1503 15 48 24.8497 48 37Z"}},{id:"CircleDiningTable",addInfo:"Circle Dining Table",shape:{type:"Path",data:"M36.5 12C41 12 48 14.5 48 14.5L48.8831 6.55216C49.2122 3.59033 46.8937 1 43.9137 1H28.9858C26.0418 1 23.735 3.5309 24.0072 6.46229L24.8 15C24.8 15 29.5 12 36.5 12ZM36.5 12C22.6929 12 11.5 23.1929 11.5 37C11.5 50.8071 22.6929 62 36.5 62C50.3071 62 61.5 50.8071 61.5 37C61.5 23.1929 50.3071 12 36.5 12ZM30.5 1V2C30.5 4.20914 32.2909 6 34.5 6L38.5 6C40.7091 6 42.5 4.20914 42.5 2V1L30.5 1ZM25 59.5L24.1169 67.4478C23.7878 70.4097 26.1063 73 29.0863 73H44.1301C47.0318 73 49.3242 70.5381 49.1174 67.6438L48.5 59C48.5 59 43 62 36 62C31.5 62 25 59.5 25 59.5ZM42.5 73V72C42.5 69.7909 40.7091 68 38.5 68H34.5C32.2909 68 30.5 69.7909 30.5 72V73H42.5ZM59 25.5L66.9478 24.6169C69.9097 24.2878 72.5 26.6063 72.5 29.5863V45.4357C72.5 48.4079 69.9226 50.7239 66.9673 50.4072L58.5 49.5C58.5 49.5 61.5 43.5 61.5 37.5C61.5 29 59 25.5 59 25.5ZM72.5 44H71.5C69.2909 44 67.5 42.2091 67.5 40V35C67.5 32.7909 69.2909 31 71.5 31H72.5V44ZM14 25.5L6.57312 24.6431C3.60432 24.3005 1 26.6216 1 29.6101L1 45.4137C1 48.3937 3.59033 50.7122 6.55216 50.3831L14.5 49.5C14.5 49.5 11.5 44.5 11.5 37.5C11.5 30.5 14 25.5 14 25.5ZM1 44H2C4.20914 44 6 42.2091 6 40L6 35C6 32.7909 4.20914 31 2 31H1L1 44Z"}},{id:"RectangleStudyTable",addInfo:"Rectangle Study Table",dragSize:{width:38,height:22},shape:{type:"Path",data:"M79 1H3C1.89543 1 1 1.89543 1 3V49C1 50.1046 1.89543 51 3 51H79C80.1046 51 81 50.1046 81 49V3C81 1.89543 80.1046 1 79 1Z"}},{id:"RectangleStudyTable1",addInfo:"Rectangle Study Table",dragSize:{width:38,height:22},shape:{type:"Path",data:"M4 5C4 4.44772 4.44772 4 5 4H83C83.5523 4 84 4.44772 84 5V53C84 53.5523 83.5523 54 83 54H5C4.44772 54 4 53.5523 4 53V5Z M4 6.5C4 6.77614 3.77462 7.00425 3.50231 6.95843C3.08607 6.88841 2.68736 6.73099 2.33329 6.49441C1.83994 6.16477 1.45543 5.69623 1.22836 5.14805C1.0013 4.59987 0.94189 3.99667 1.05765 3.41473C1.1734 2.83279 1.45912 2.29824 1.87868 1.87868C2.29824 1.45912 2.83279 1.1734 3.41473 1.05765C3.99667 0.94189 4.59987 1.0013 5.14805 1.22836C5.69623 1.45543 6.16477 1.83994 6.49441 2.33329C6.73099 2.68736 6.88841 3.08607 6.95843 3.50231C7.00424 3.77462 6.77614 4 6.5 4L4.5 4C4.22386 4 4 4.22386 4 4.5L4 6.5Z M81.5 4C81.2239 4 80.9958 3.77462 81.0416 3.50231C81.1116 3.08607 81.269 2.68736 81.5056 2.33329C81.8352 1.83994 82.3038 1.45543 82.852 1.22836C83.4001 1.0013 84.0033 0.94189 84.5853 1.05765C85.1672 1.1734 85.7018 1.45912 86.1213 1.87868C86.5409 2.29824 86.8266 2.83279 86.9424 3.41473C87.0581 3.99667 86.9987 4.59987 86.7716 5.14805C86.5446 5.69623 86.1601 6.16477 85.6667 6.49441C85.3126 6.73099 84.9139 6.88841 84.4977 6.95843C84.2254 7.00424 84 6.77614 84 6.5V4.5C84 4.22386 83.7761 4 83.5 4L81.5 4Z M6.5 54C6.77614 54 7.00425 54.2254 6.95843 54.4977C6.88841 54.9139 6.73099 55.3126 6.49441 55.6667C6.16477 56.1601 5.69623 56.5446 5.14805 56.7716C4.59987 56.9987 3.99667 57.0581 3.41473 56.9424C2.83279 56.8266 2.29824 56.5409 1.87868 56.1213C1.45912 55.7018 1.1734 55.1672 1.05765 54.5853C0.94189 54.0033 1.0013 53.4001 1.22836 52.852C1.45543 52.3038 1.83994 51.8352 2.33329 51.5056C2.68736 51.269 3.08607 51.1116 3.50231 51.0416C3.77462 50.9958 4 51.2239 4 51.5V53.5C4 53.7761 4.22386 54 4.5 54H6.5Z M84 51.5C84 51.2239 84.2254 50.9958 84.4977 51.0416C84.9139 51.1116 85.3126 51.269 85.6667 51.5056C86.1601 51.8352 86.5446 52.3038 86.7716 52.852C86.9987 53.4001 87.0581 54.0033 86.9424 54.5853C86.8266 55.1672 86.5409 55.7018 86.1213 56.1213C85.7018 56.5409 85.1672 56.8266 84.5853 56.9424C84.0033 57.0581 83.4001 56.9987 82.852 56.7716C82.3038 56.5446 81.8352 56.1601 81.5056 55.6667C81.269 55.3126 81.1116 54.9139 81.0416 54.4977C80.9958 54.2254 81.2239 54 81.5 54H83.5C83.7761 54 84 53.7761 84 53.5V51.5Z"}},{id:"OvalDiningTable",addInfo:"Oval Dining Table",shape:{type:"Path",data:"M22.0284 6.47992C21.7452 3.54248 24.0543 1 27.0053 1H42.9947C45.9457 1 48.2548 3.54248 47.9716 6.47992L47.5 11C47.5 11 35.2044 11.2442 32.7044 11.3676C29.5 11.5 22.85 15 22.85 15L22.0284 6.47992Z M42 2C42 4.20914 40.2091 6 38 6L33 6C30.7909 6 29 4.20914 29 2V1L42 1V2Z M55.0284 6.47992C54.7452 3.54248 57.0543 1 60.0053 1H75.9947C78.9457 1 81.2548 3.54248 80.9716 6.47992L80.2454 14.7933C76.3282 11.875 70.5 11.2431 68.6396 11.0529L55.5 11L55.0284 6.47992Z M75 2C75 4.20914 73.2091 6 71 6L66 6C63.7909 6 62 4.20914 62 2V1L75 1V2Z M81.9716 65.5201C82.2548 68.4575 79.9457 71 76.9947 71H61.0053C58.0543 71 55.7452 68.4575 56.0284 65.5201L57 61L67.5 60.9951C73.0289 60.6225 76.0202 59.7634 81.15 57L81.9716 65.5201Z M62 70C62 67.7909 63.7909 66 66 66H71C73.2091 66 75 67.7909 75 70V71H62V70Z M48.9716 65.5201C49.2548 68.4575 46.9457 71 43.9947 71H28.0053C25.0543 71 22.7452 68.4575 23.0284 65.5201L24 57.3584C24 57.3584 29 60.5 36.3178 60.9909L48.5 61L48.9716 65.5201Z M6.47992 49.4716C3.54249 49.7548 1 47.4457 1 44.4947L1 28.5053C1 25.5543 3.54249 23.2452 6.47992 23.5284L15 24C15 24 12 29.5 12.0148 36.8689C12 42 15.3446 48.5 15.3446 48.5L6.47992 49.4716Z M29 70C29 67.7909 30.7909 66 33 66H38C40.2091 66 42 67.7909 42 70V71H29V70Z M2 30C4.20914 30 6 31.7909 6 34L6 39C6 41.2091 4.20914 43 2 43H1L1 30H2Z M97.5201 23.5284C100.458 23.2452 103 25.5543 103 28.5053V44.4947C103 47.4457 100.458 49.7548 97.5201 49.4716L89 48.65C89 48.65 92 42.5 91.9951 36.5C92 30 89.1049 24.3114 89.1049 24.3114L97.5201 23.5284Z M102 43C99.7909 43 98 41.2091 98 39V34C98 31.7909 99.7909 30 102 30H103V43H102Z M67 11H37C23.1929 11 12 22.1929 12 36C12 49.8071 23.1929 61 37 61H67C80.8071 61 92 49.8071 92 36C92 22.1929 80.8071 11 67 11Z"}},{id:"RectangularTableforTwo",addInfo:"Dual Rectangle Study Table",dragSize:{width:60,height:40},shape:{type:"Path",data:"M12.5284 6.47992C12.2452 3.54248 14.5543 1 17.5053 1H33.4947C36.4457 1 38.7548 3.54248 38.4716 6.47992L37.65 15L13.35 15L12.5284 6.47992Z M38.4716 73.5201C38.7548 76.4575 36.4457 79 33.4947 79H17.5053C14.5543 79 12.2452 76.4575 12.5284 73.5201L13.35 65H37.65L38.4716 73.5201Z M47 15H5C2.79086 15 1 16.7909 1 19V61C1 63.2091 2.79086 65 5 65H47C49.2091 65 51 63.2091 51 61V19C51 16.7909 49.2091 15 47 15Z M37.65 15V15.5H38.1041L38.1477 15.048L37.65 15ZM13.35 15L12.8523 15.048L12.8959 15.5H13.35V15ZM38.4716 6.47992L37.9739 6.43192L38.4716 6.47992ZM12.5284 6.47992L13.0261 6.43192L12.5284 6.47992ZM19 1V0.5L18.5 0.5V1H19ZM32 1H32.5V0.500001L32 0.500001V1ZM23 6V5.5V6ZM19 2L19.5 2V2H19ZM28 6V6.5V6ZM32 2H32.5H32ZM13.35 65V64.5H12.8959L12.8523 64.952L13.35 65ZM37.65 65L38.1477 64.952L38.1041 64.5H37.65V65ZM17.5053 79V79.5V79ZM12.5284 73.5201L13.0261 73.5681L12.5284 73.5201ZM33.4947 79V78.5V79ZM38.4716 73.5201L37.9739 73.5681L38.4716 73.5201ZM32 79V79.5H32.5V79H32ZM19 79H18.5V79.5H19V79ZM19 78H19.5H19ZM17.5053 1.5H33.4947V0.5H17.5053V1.5ZM37.9739 6.43192L37.1523 14.952L38.1477 15.048L38.9693 6.52791L37.9739 6.43192ZM37.65 14.5L13.35 14.5V15.5L37.65 15.5V14.5ZM13.8477 14.952L13.0261 6.43192L12.0307 6.52791L12.8523 15.048L13.8477 14.952ZM33.4947 1.5C36.1506 1.5 38.2288 3.78824 37.9739 6.43192L38.9693 6.52791C39.2808 3.29673 36.7408 0.5 33.4947 0.5V1.5ZM17.5053 0.5C14.2592 0.5 11.7192 3.29673 12.0307 6.52791L13.0261 6.43192C12.7712 3.78824 14.8494 1.5 17.5053 1.5V0.5ZM28 5.5L23 5.5V6.5L28 6.5V5.5ZM19.5 2V1H18.5V2H19.5ZM19 1.5L32 1.5V0.500001L19 0.5V1.5ZM31.5 1V2H32.5V1H31.5ZM23 5.5C21.067 5.5 19.5 3.933 19.5 2L18.5 2C18.5 4.48528 20.5147 6.5 23 6.5V5.5ZM28 6.5C30.4853 6.5 32.5 4.48528 32.5 2H31.5C31.5 3.933 29.933 5.5 28 5.5V6.5ZM33.4947 78.5H17.5053V79.5H33.4947V78.5ZM13.0261 73.5681L13.8477 65.048L12.8523 64.952L12.0307 73.4721L13.0261 73.5681ZM13.35 65.5H37.65V64.5H13.35V65.5ZM37.1523 65.048L37.9739 73.5681L38.9693 73.4721L38.1477 64.952L37.1523 65.048ZM17.5053 78.5C14.8494 78.5 12.7712 76.2118 13.0261 73.5681L12.0307 73.4721C11.7192 76.7033 14.2592 79.5 17.5053 79.5V78.5ZM33.4947 79.5C36.7408 79.5 39.2808 76.7033 38.9693 73.4721L37.9739 73.5681C38.2288 76.2118 36.1506 78.5 33.4947 78.5V79.5ZM23 74.5H28V73.5H23V74.5ZM31.5 78V79H32.5V78H31.5ZM32 78.5H19V79.5H32V78.5ZM19.5 79V78H18.5V79H19.5ZM28 74.5C29.933 74.5 31.5 76.067 31.5 78H32.5C32.5 75.5147 30.4853 73.5 28 73.5V74.5ZM23 73.5C20.5147 73.5 18.5 75.5147 18.5 78H19.5C19.5 76.067 21.067 74.5 23 74.5V73.5ZM5 15.5H47V14.5H5V15.5ZM50.5 19V61H51.5V19H50.5ZM47 64.5H5V65.5H47V64.5ZM1.5 61V19H0.5V61H1.5ZM5 64.5C3.067 64.5 1.5 62.933 1.5 61H0.5C0.5 63.4853 2.51472 65.5 5 65.5V64.5ZM50.5 61C50.5 62.933 48.933 64.5 47 64.5V65.5C49.4853 65.5 51.5 63.4853 51.5 61H50.5ZM47 15.5C48.933 15.5 50.5 17.067 50.5 19H51.5C51.5 16.5147 49.4853 14.5 47 14.5V15.5ZM5 14.5C2.51472 14.5 0.5 16.5147 0.5 19H1.5C1.5 17.067 3.067 15.5 5 15.5V14.5Z"}},{id:"RectangleDiningTable",addInfo:"Rectangle Dining Table",dragSize:{width:60,height:40},shape:{type:"Path",data:"M26.5284 6.47992C26.2452 3.54248 28.5543 1 31.5053 1H47.4947C50.4457 1 52.7548 3.54248 52.4716 6.47992L51.65 15L27.35 15L26.5284 6.47992Z M46 2C46 4.20914 44.2091 6 42 6L37 6C34.7909 6 33 4.20914 33 2V1L46 1V2Z M52.4716 73.5201C52.7548 76.4575 50.4457 79 47.4947 79H31.5053C28.5543 79 26.2452 76.4575 26.5284 73.5201L27.35 65H51.65L52.4716 73.5201Z M33 78C33 75.7909 34.7909 74 37 74H42C44.2091 74 46 75.7909 46 78V79H33V78Z M73.5201 27.5284C76.4575 27.2452 79 29.5543 79 32.5053V48.4947C79 51.4457 76.4575 53.7548 73.5201 53.4716L65 52.65V28.35L73.5201 27.5284Z M78 47C75.7909 47 74 45.2091 74 43V38C74 35.7909 75.7909 34 78 34H79V47H78Z M6.47992 53.4716C3.54248 53.7548 1 51.4457 1 48.4947L1 32.5053C1 29.5543 3.54249 27.2452 6.47992 27.5284L15 28.35L15 52.65L6.47992 53.4716Z M61 15H19C16.7909 15 15 16.7909 15 19V61C15 63.2091 16.7909 65 19 65H61C63.2091 65 65 63.2091 65 61V19C65 16.7909 63.2091 15 61 15Z M2 34C4.20914 34 6 35.7909 6 38L6 43C6 45.2091 4.20914 47 2 47H1L1 34H2Z"}},{id:"OblongDiningTable",addInfo:"Oblong Dining Table",dragSize:{width:60,height:40},shape:{type:"Path",data:"M25.0284 6.47992C24.7452 3.54248 27.0543 1 30.0053 1H45.9947C48.9457 1 51.2548 3.54248 50.9716 6.47992L50.15 15L25.85 15L25.0284 6.47992ZM58.0284 6.47992C57.7452 3.54248 60.0543 1 63.0053 1H78.9947C81.9457 1 84.2548 3.54248 83.9716 6.47992L83.15 15L58.85 15L58.0284 6.47992Z M84.9716 73.5201C85.2548 76.4575 82.9457 79 79.9947 79H64.0053C61.0543 79 58.7452 76.4575 59.0284 73.5201L59.85 65H84.15L84.9716 73.5201Z M51.9716 73.5201C52.2548 76.4575 49.9457 79 46.9947 79H31.0053C28.0543 79 25.7452 76.4575 26.0284 73.5201L26.85 65H51.15L51.9716 73.5201Z M6.47992 53.4716C3.54249 53.7548 1 51.4457 1 48.4947L1 32.5053C1 29.5543 3.54249 27.2452 6.47992 27.5284L15 28.35V52.65L6.47992 53.4716Z M103.52 27.5284C106.458 27.2452 109 29.5543 109 32.5053V48.4947C109 51.4457 106.458 53.7548 103.52 53.4716L95 52.65V28.35L103.52 27.5284Z M91 15H19C16.7909 15 15 16.7909 15 19V61C15 63.2091 16.7909 65 19 65H91C93.2091 65 95 63.2091 95 61V19C95 16.7909 93.2091 15 91 15Z M50.15 15V15.5H50.6041L50.6477 15.048L50.15 15ZM25.85 15L25.3523 15.048L25.3959 15.5H25.85V15ZM50.9716 6.47992L50.4739 6.43192L50.9716 6.47992ZM25.0284 6.47992L24.5307 6.52791L25.0284 6.47992ZM32 1V0.5L31.5 0.5V1H32ZM45 1H45.5V0.500001L45 0.500001V1ZM36 6V5.5V6ZM32 2L32.5 2V2H32ZM41 6V6.5V6ZM45 2H45.5H45ZM83.15 15V15.5H83.6041L83.6477 15.048L83.15 15ZM58.85 15L58.3523 15.048L58.3959 15.5H58.85V15ZM83.9716 6.47992L83.4739 6.43192L83.9716 6.47992ZM58.0284 6.47992L58.5261 6.43192L58.0284 6.47992ZM65 1V0.5L64.5 0.5V1H65ZM78 1H78.5V0.500001L78 0.500001V1ZM69 6V5.5V6ZM65 2L65.5 2V2H65ZM74 6V6.5V6ZM78 2H78.5H78ZM59.85 65V64.5H59.3959L59.3523 64.952L59.85 65ZM84.15 65L84.6477 64.952L84.6041 64.5H84.15V65ZM59.0284 73.5201L59.5261 73.5681L59.0284 73.5201ZM84.9716 73.5201L84.4739 73.5681L84.9716 73.5201ZM78 79V79.5H78.5V79H78ZM65 79H64.5V79.5H65V79ZM74 74V73.5V74ZM78 78H77.5H78ZM69 74V74.5V74ZM65 78H64.5H65ZM26.85 65V64.5H26.3959L26.3523 64.952L26.85 65ZM51.15 65L51.6477 64.952L51.6041 64.5H51.15V65ZM26.0284 73.5201L26.5261 73.5681L26.0284 73.5201ZM51.9716 73.5201L51.4739 73.5681L51.9716 73.5201ZM15 28.35H15.5V27.8959L15.048 27.8523L15 28.35ZM15 52.65L15.048 53.1477L15.5 53.1041V52.65H15ZM1 32.5053H0.500002H1ZM6.47992 27.5284L6.43193 28.0261L6.47992 27.5284ZM1 48.4947H1.5H1ZM6.47992 53.4716L6.43192 52.9739L6.47992 53.4716ZM45 79V79.5H45.5V79H45ZM32 79H31.5V79.5H32V79ZM41 74V73.5V74ZM45 78H44.5H45ZM36 74V74.5V74ZM32 78H31.5H32ZM1 47H0.5L0.5 47.5H1V47ZM1 34V33.5H0.500002L0.500002 34H1ZM6 43H6.5H6ZM2 47L2 46.5H2V47ZM6 38H5.5H6ZM2 34V33.5V34ZM95 52.65H94.5V53.1041L94.952 53.1477L95 52.65ZM95 28.35L94.952 27.8523L94.5 27.8959V28.35H95ZM109 48.4947H109.5H109ZM103.52 53.4716L103.472 53.9693L103.52 53.4716ZM109 32.5053H108.5H109ZM103.52 27.5284L103.568 28.0261L103.52 27.5284ZM109 34H109.5V33.5H109V34ZM109 47V47.5H109.5V47H109ZM104 38H103.5H104ZM108 34V34.5V34ZM104 43H104.5H104ZM108 47V47.5V47ZM30.0053 1.5H45.9947V0.5H30.0053V1.5ZM50.4739 6.43192L49.6523 14.952L50.6477 15.048L51.4693 6.52791L50.4739 6.43192ZM50.15 14.5L25.85 14.5V15.5L50.15 15.5V14.5ZM26.3477 14.952L25.5261 6.43192L24.5307 6.52791L25.3523 15.048L26.3477 14.952ZM45.9947 1.5C48.6506 1.5 50.7288 3.78824 50.4739 6.43192L51.4693 6.52791C51.7808 3.29673 49.2408 0.5 45.9947 0.5V1.5ZM30.0053 0.5C26.7592 0.5 24.2192 3.29673 24.5307 6.52791L25.5261 6.43192C25.2712 3.78824 27.3494 1.5 30.0053 1.5V0.5ZM41 5.5L36 5.5V6.5L41 6.5V5.5ZM32.5 2V1H31.5V2H32.5ZM32 1.5L45 1.5V0.500001L32 0.5V1.5ZM44.5 1V2H45.5V1H44.5ZM36 5.5C34.067 5.5 32.5 3.933 32.5 2L31.5 2C31.5 4.48528 33.5147 6.5 36 6.5V5.5ZM41 6.5C43.4853 6.5 45.5 4.48528 45.5 2H44.5C44.5 3.933 42.933 5.5 41 5.5V6.5ZM63.0053 1.5H78.9947V0.5H63.0053V1.5ZM83.4739 6.43192L82.6523 14.952L83.6477 15.048L84.4693 6.52791L83.4739 6.43192ZM83.15 14.5L58.85 14.5V15.5L83.15 15.5V14.5ZM59.3477 14.952L58.5261 6.43192L57.5307 6.52791L58.3523 15.048L59.3477 14.952ZM78.9947 1.5C81.6506 1.5 83.7288 3.78824 83.4739 6.43192L84.4693 6.52791C84.7809 3.29673 82.2408 0.5 78.9947 0.5V1.5ZM63.0053 0.5C59.7592 0.5 57.2192 3.29673 57.5307 6.52791L58.5261 6.43192C58.2712 3.78824 60.3494 1.5 63.0053 1.5V0.5ZM74 5.5L69 5.5V6.5L74 6.5V5.5ZM65.5 2V1H64.5V2H65.5ZM65 1.5L78 1.5V0.500001L65 0.5V1.5ZM77.5 1V2H78.5V1H77.5ZM69 5.5C67.067 5.5 65.5 3.933 65.5 2L64.5 2C64.5 4.48528 66.5147 6.5 69 6.5V5.5ZM74 6.5C76.4853 6.5 78.5 4.48528 78.5 2H77.5C77.5 3.933 75.933 5.5 74 5.5V6.5ZM79.9947 78.5H64.0053V79.5H79.9947V78.5ZM59.5261 73.5681L60.3477 65.048L59.3523 64.952L58.5307 73.4721L59.5261 73.5681ZM59.85 65.5H84.15V64.5H59.85V65.5ZM83.6523 65.048L84.4739 73.5681L85.4693 73.4721L84.6477 64.952L83.6523 65.048ZM64.0053 78.5C61.3494 78.5 59.2712 76.2118 59.5261 73.5681L58.5307 73.4721C58.2192 76.7033 60.7592 79.5 64.0053 79.5V78.5ZM79.9947 79.5C83.2408 79.5 85.7809 76.7033 85.4693 73.4721L84.4739 73.5681C84.7288 76.2118 82.6506 78.5 79.9947 78.5V79.5ZM69 74.5H74V73.5H69V74.5ZM77.5 78V79H78.5V78H77.5ZM78 78.5H65V79.5H78V78.5ZM65.5 79V78H64.5V79H65.5ZM74 74.5C75.933 74.5 77.5 76.067 77.5 78H78.5C78.5 75.5147 76.4853 73.5 74 73.5V74.5ZM69 73.5C66.5147 73.5 64.5 75.5147 64.5 78H65.5C65.5 76.067 67.067 74.5 69 74.5V73.5ZM46.9947 78.5H31.0053V79.5H46.9947V78.5ZM26.5261 73.5681L27.3477 65.048L26.3523 64.952L25.5307 73.4721L26.5261 73.5681ZM26.85 65.5H51.15V64.5H26.85V65.5ZM50.6523 65.048L51.4739 73.5681L52.4693 73.4721L51.6477 64.952L50.6523 65.048ZM31.0053 78.5C28.3494 78.5 26.2712 76.2118 26.5261 73.5681L25.5307 73.4721C25.2192 76.7033 27.7592 79.5 31.0053 79.5V78.5ZM46.9947 79.5C50.2408 79.5 52.7808 76.7033 52.4693 73.4721L51.4739 73.5681C51.7288 76.2118 49.6506 78.5 46.9947 78.5V79.5ZM1.5 48.4947L1.5 32.5053H0.500002L0.500001 48.4947H1.5ZM6.43193 28.0261L14.952 28.8477L15.048 27.8523L6.52791 27.0307L6.43193 28.0261ZM14.5 28.35V52.65H15.5V28.35H14.5ZM14.952 52.1523L6.43192 52.9739L6.52791 53.9693L15.048 53.1477L14.952 52.1523ZM1.5 32.5053C1.5 29.8494 3.78824 27.7712 6.43193 28.0261L6.52791 27.0307C3.29674 26.7192 0.500002 29.2592 0.500002 32.5053H1.5ZM0.500001 48.4947C0.500001 51.7408 3.29673 54.2808 6.52791 53.9693L6.43192 52.9739C3.78824 53.2288 1.5 51.1506 1.5 48.4947H0.500001ZM36 74.5H41V73.5H36V74.5ZM44.5 78V79H45.5V78H44.5ZM45 78.5H32V79.5H45V78.5ZM32.5 79V78H31.5V79H32.5ZM41 74.5C42.933 74.5 44.5 76.067 44.5 78H45.5C45.5 75.5147 43.4853 73.5 41 73.5V74.5ZM36 73.5C33.5147 73.5 31.5 75.5147 31.5 78H32.5C32.5 76.067 34.067 74.5 36 74.5V73.5ZM5.5 38L5.5 43H6.5L6.5 38H5.5ZM2 46.5H1V47.5H2V46.5ZM1.5 47L1.5 34H0.500002L0.5 47H1.5ZM1 34.5H2V33.5H1V34.5ZM5.5 43C5.5 44.933 3.933 46.5 2 46.5L2 47.5C4.48528 47.5 6.5 45.4853 6.5 43H5.5ZM6.5 38C6.5 35.5147 4.48528 33.5 2 33.5L2 34.5C3.933 34.5 5.5 36.067 5.5 38H6.5ZM108.5 32.5053V48.4947H109.5V32.5053H108.5ZM103.568 52.9739L95.048 52.1523L94.952 53.1477L103.472 53.9693L103.568 52.9739ZM95.5 52.65V28.35H94.5V52.65H95.5ZM95.048 28.8477L103.568 28.0261L103.472 27.0307L94.952 27.8523L95.048 28.8477ZM108.5 48.4947C108.5 51.1506 106.212 53.2288 103.568 52.9739L103.472 53.9693C106.703 54.2808 109.5 51.7408 109.5 48.4947H108.5ZM109.5 32.5053C109.5 29.2592 106.703 26.7192 103.472 27.0307L103.568 28.0261C106.212 27.7712 108.5 29.8494 108.5 32.5053H109.5ZM104.5 43V38H103.5V43H104.5ZM108 34.5H109V33.5H108V34.5ZM108.5 34V47H109.5V34H108.5ZM109 46.5H108V47.5H109V46.5ZM104.5 38C104.5 36.067 106.067 34.5 108 34.5V33.5C105.515 33.5 103.5 35.5147 103.5 38H104.5ZM103.5 43C103.5 45.4853 105.515 47.5 108 47.5V46.5C106.067 46.5 104.5 44.933 104.5 43H103.5ZM19 15.5H91V14.5H19V15.5ZM94.5 19V61H95.5V19H94.5ZM91 64.5H19V65.5H91V64.5ZM15.5 61V19H14.5V61H15.5ZM19 64.5C17.067 64.5 15.5 62.933 15.5 61H14.5C14.5 63.4853 16.5147 65.5 19 65.5V64.5ZM94.5 61C94.5 62.933 92.933 64.5 91 64.5V65.5C93.4853 65.5 95.5 63.4853 95.5 61H94.5ZM91 15.5C92.933 15.5 94.5 17.067 94.5 19H95.5C95.5 16.5147 93.4853 14.5 91 14.5V15.5ZM19 14.5C16.5147 14.5 14.5 16.5147 14.5 19H15.5C15.5 17.067 17.067 15.5 19 15.5V14.5Z"}}],$z=[{id:"Doublebed",addInfo:"Double bed",shape:{type:"Path",data:"M1 54V2C1 1.44772 1.44772 1 2 1H44C44.5523 1 45 1.44771 45 2V54C45 54.5523 44.5523 55 44 55H2C1.44772 55 1 54.5523 1 54Z M7.57446 14.4176C8.01615 12.4296 7.72961 10.0298 7.34925 8.31942C7.20247 7.65937 7.68924 7 8.36541 7H19.6515C20.3227 7 20.8097 7.6496 20.6533 8.3023C20.4282 9.24153 20.1765 10.5125 20.1765 11.5C20.1765 12.4875 20.4282 13.7585 20.6533 14.6977C20.8097 15.3504 20.3227 16 19.6515 16H8.68924C7.9291 16 7.4096 15.1596 7.57446 14.4176Z M25.5745 14.4176C26.0161 12.4296 25.7296 10.0298 25.3493 8.31942C25.2025 7.65937 25.6892 7 26.3654 7H37.6515C38.3227 7 38.8097 7.6496 38.6533 8.3023C38.4282 9.24153 38.1765 10.5125 38.1765 11.5C38.1765 12.4875 38.4282 13.7585 38.6533 14.6977C38.8097 15.3504 38.3227 16 37.6515 16H26.6892C25.9291 16 25.4096 15.1596 25.5745 14.4176Z M45 53V27.695C41.8333 26.4298 34.1 24.6584 28.5 27.695C22.9 30.7316 16.5 25.5863 14 22.6341C10.1667 18.2057 2.2 13.0182 1 27.6951V53H45Z M1 54V2C1 1.44772 1.44772 1 2 1H44C44.5523 1 45 1.44771 45 2V54C45 54.5523 44.5523 55 44 55H2C1.44772 55 1 54.5523 1 54Z M7.57446 14.4176C8.01615 12.4296 7.72961 10.0298 7.34925 8.31942C7.20247 7.65937 7.68924 7 8.36541 7H19.6515C20.3227 7 20.8097 7.6496 20.6533 8.3023C20.4282 9.24153 20.1765 10.5125 20.1765 11.5C20.1765 12.4875 20.4282 13.7585 20.6533 14.6977C20.8097 15.3504 20.3227 16 19.6515 16H8.68924C7.9291 16 7.4096 15.1596 7.57446 14.4176Z M25.5745 14.4176C26.0161 12.4296 25.7296 10.0298 25.3493 8.31942C25.2025 7.65937 25.6892 7 26.3654 7H37.6515C38.3227 7 38.8097 7.6496 38.6533 8.3023C38.4282 9.24153 38.1765 10.5125 38.1765 11.5C38.1765 12.4875 38.4282 13.7585 38.6533 14.6977C38.8097 15.3504 38.3227 16 37.6515 16H26.6892C25.9291 16 25.4096 15.1596 25.5745 14.4176Z M25.5745 14.4176C26.0161 12.4296 25.7296 10.0298 25.3493 8.31942C25.2025 7.65937 25.6892 7 26.3654 7H37.6515C38.3227 7 38.8097 7.6496 38.6533 8.3023C38.4282 9.24153 38.1765 10.5125 38.1765 11.5C38.1765 12.4875 38.4282 13.7585 38.6533 14.6977C38.8097 15.3504 38.3227 16 37.6515 16H26.6892C25.9291 16 25.4096 15.1596 25.5745 14.4176Z"}},{id:"Doublebed1",addInfo:"Double bed",shape:{type:"Path",data:"M1 54V2C1 1.44772 1.44772 1 2 1H44C44.5523 1 45 1.44771 45 2V54C45 54.5523 44.5523 55 44 55H2C1.44772 55 1 54.5523 1 54Z  M8 14V8C8 7.44772 8.44772 7 9 7H19C19.5523 7 20 7.44772 20 8V14C20 14.5523 19.5523 15 19 15H9C8.44772 15 8 14.5523 8 14Z M26 14V8C26 7.44772 26.4477 7 27 7H37C37.5523 7 38 7.44772 38 8V14C38 14.5523 37.5523 15 37 15H27C26.4477 15 26 14.5523 26 14Z M0.5 2V54H1.5V2H0.5ZM2 55.5H44V54.5H2V55.5ZM45.5 54V2H44.5V54H45.5ZM2 1.5H44V0.5H2V1.5ZM45.5 2C45.5 1.17157 44.8284 0.5 44 0.5V1.5C44.2761 1.5 44.5 1.72386 44.5 2H45.5ZM44 55.5C44.8284 55.5 45.5 54.8284 45.5 54H44.5C44.5 54.2761 44.2761 54.5 44 54.5V55.5ZM0.5 54C0.5 54.8284 1.17157 55.5 2 55.5V54.5C1.72386 54.5 1.5 54.2761 1.5 54H0.5ZM1.5 2C1.5 1.72386 1.72386 1.5 2 1.5V0.5C1.17157 0.5 0.5 1.17157 0.5 2H1.5ZM1 21.5H45V20.5H1V21.5ZM7.5 8V14H8.5V8H7.5ZM9 15.5H19V14.5H9V15.5ZM20.5 14V8H19.5V14H20.5ZM19 6.5H9V7.5H19V6.5ZM20.5 8C20.5 7.17157 19.8284 6.5 19 6.5V7.5C19.2761 7.5 19.5 7.72386 19.5 8H20.5ZM19 15.5C19.8284 15.5 20.5 14.8284 20.5 14H19.5C19.5 14.2761 19.2761 14.5 19 14.5V15.5ZM7.5 14C7.5 14.8284 8.17157 15.5 9 15.5V14.5C8.72386 14.5 8.5 14.2761 8.5 14H7.5ZM8.5 8C8.5 7.72386 8.72386 7.5 9 7.5V6.5C8.17157 6.5 7.5 7.17157 7.5 8H8.5ZM25.5 8V14H26.5V8H25.5ZM27 15.5H37V14.5H27V15.5ZM38.5 14V8H37.5V14H38.5ZM37 6.5H27V7.5H37V6.5ZM38.5 8C38.5 7.17157 37.8284 6.5 37 6.5V7.5C37.2761 7.5 37.5 7.72386 37.5 8H38.5ZM37 15.5C37.8284 15.5 38.5 14.8284 38.5 14H37.5C37.5 14.2761 37.2761 14.5 37 14.5V15.5ZM25.5 14C25.5 14.8284 26.1716 15.5 27 15.5V14.5C26.7239 14.5 26.5 14.2761 26.5 14H25.5ZM26.5 8C26.5 7.72386 26.7239 7.5 27 7.5V6.5C26.1716 6.5 25.5 7.17157 25.5 8H26.5Z"}},{id:"Warddrobe",addInfo:"Warddrobe",dragSize:{width:50,height:30},shape:{type:"Path",data:"M50.6443 54.406L76 29L80.9998 28.9502H85.9996L55.594 59.3558L50.6443 54.406Z M12 29L36.9996 54.4053L32.0498 59.3551L2 29H12Z M70.7969 44.8594C70.6017 44.6642 70.6017 44.3476 70.7969 44.1523C70.9922 43.957 71.3088 43.957 71.504 44.1523L72.9182 45.5665C73.1135 45.7618 73.1135 46.0784 72.9182 46.2736C72.723 46.4689 72.4064 46.4689 72.2111 46.2736L70.7969 44.8594Z M16.1406 44.1524C16.3358 43.9571 16.6524 43.9571 16.8477 44.1524C17.043 44.3476 17.043 44.6642 16.8477 44.8595L15.4335 46.2737C15.2382 46.469 14.9216 46.469 14.7264 46.2737C14.5311 46.0784 14.5311 45.7619 14.7264 45.5666L16.1406 44.1524Z M1 1L87 1V29H1L1 1Z"}},{id:"Warddrobe1",addInfo:"Warddrobe",dragSize:{width:50,height:30},shape:{type:"Path",data:"M86 29V1H1V29M86 29H1M86 29V36H1L1 29M44.5 29V36M65.5 39C65.2239 39 65 38.7761 65 38.5V36.5C65 36.2239 65.2239 36 65.5 36C65.7761 36 66 36.2239 66 36.5V38.5C66 38.7761 65.7761 39 65.5 39ZM22.5 39C22.2239 39 22 38.7761 22 38.5V36.5C22 36.2239 22.2239 36 22.5 36C22.7761 36 23 36.2239 23 36.5V38.5C23 38.7761 22.7761 39 22.5 39Z"}},{id:"Lamplight",addInfo:"Lamp light",dragSize:{height:30,width:30},shape:{type:"Path",data:"M17 7C11.4772 7 7 11.4772 7 17C7 22.5228 11.4772 27 17 27C22.5228 27 27 22.5228 27 17C27 11.4772 22.5228 7 17 7ZM17 7V13.5M20.2363 18.5593L25.3654 21.3093M13.7544 18.4305L8.2541 21.6805M33 17C33 25.8366 25.8366 33 17 33C8.16344 33 1 25.8366 1 17C1 8.16344 8.16344 1 17 1C25.8366 1 33 8.16344 33 17ZM25.5 17C25.5 21.6944 21.6944 25.5 17 25.5C12.3056 25.5 8.5 21.6944 8.5 17C8.5 12.3056 12.3056 8.5 17 8.5C21.6944 8.5 25.5 12.3056 25.5 17ZM21 17C21 19.2091 19.2091 21 17 21C14.7909 21 13 19.2091 13 17C13 14.7909 14.7909 13 17 13C19.2091 13 21 14.7909 21 17Z"}},{id:"BookCase",addInfo:"Book Case",dragSize:{height:21,width:50},shape:{type:"Path",data:"M113 9V1H1V9M113 9H1M113 9V29H1V9M4 12H11V25H4V12ZM13 12H20V25H13V12ZM22 12H29V25H22V12ZM31 12H38V25H31V12ZM40 12H47V25H40V12ZM49 12H56V25H49V12ZM58 12H65V25H58V12ZM67 12H74V25H67V12ZM76 12H83V25H76V12ZM85 12H92V25H85V12ZM94 12H101V25H94V12ZM103 12H110V25H103V12Z"}},{id:"LargePlant",addInfo:"Large Plant",dragSize:{height:30,width:30},shape:{type:"Path",data:"M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141Z M23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234Z M25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003Z M24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567Z M20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171Z M21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193Z M22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z M40.0382 18.2498C40.7878 20.1543 41.1995 22.2289 41.1995 24.3996C41.1995 24.5507 41.1975 24.7013 41.1935 24.8515M35.2235 11.5507C33.6921 10.2594 31.9267 9.2368 30 8.55572M39 32.7159C37.5069 35.3317 35.3311 37.5074 32.7153 39.0004M24.8419 41.1939C24.6949 41.1977 24.5474 41.1996 24.3995 41.1996C21.7821 41.1996 19.3046 40.6011 17.0963 39.5334M10.7727 34.2278C9.9752 33.1239 9.30848 31.9193 8.79533 30.6367M7.70563 22.5004C7.89672 20.8019 8.34106 19.1801 9 17.6736M13.9123 11.274C16.1576 9.47777 18.8737 8.24563 21.846 7.79239M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141ZM23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234ZM25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003ZM24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567ZM20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171ZM21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193ZM22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z"}},{id:"Singlebed",addInfo:"Single bed",dragSize:{width:28,height:45},shape:{type:"Path",data:"M1 2C1 1.44771 1.44772 1 2 1H26C26.5523 1 27 1.44772 27 2V54C27 54.5523 26.5523 55 26 55H2C1.44772 55 1 54.5523 1 54V2Z M1 27.5941C1 27.5432 1.0038 27.4928 1.01218 27.4426C1.13134 26.7284 2.13402 21.153 4.41646 21.0198C4.47147 21.0165 4.52813 21.0118 4.58296 21.0063C7.51272 20.7131 9.98932 30.7524 14.8322 30.9965C14.9423 31.002 15.0553 30.9826 15.1593 30.946C18.0006 29.9475 18.036 28.9499 20 28.5008C22.6744 27.8892 25.3331 28.7977 26.4505 29.2665C26.794 29.4106 27 29.7509 27 30.1234V52.0177C27 52.5699 26.5523 53.0177 26 53.0177H2C1.44772 53.0177 1 52.5699 1 52.0177V27.5941Z M7.47077 8.3988C7.27248 7.71969 7.76957 7 8.47703 7H19.0951C19.901 7 20.4243 7.93945 20.1178 8.68485C19.7917 9.47806 19.5 10.4742 19.5 11.5C19.5 12.5349 19.7571 13.4842 20.0583 14.2413C20.363 15.007 19.824 16 19 16H8.47703C7.76957 16 7.27248 15.2803 7.47077 14.6012C7.73012 13.7129 8 12.539 8 11.5C8 10.461 7.73012 9.28707 7.47077 8.3988Z"}},{id:"Singlebed1",addInfo:"Single bed",dragSize:{width:28,height:45},shape:{type:"Path",data:"M1 20H29M1 2V54C1 54.5523 1.44772 55 2 55H28C28.5523 55 29 54.5523 29 54V2C29 1.44771 28.5523 1 28 1H2C1.44772 1 1 1.44772 1 2ZM9 8V14C9 14.5523 9.44772 15 10 15H20C20.5523 15 21 14.5523 21 14V8C21 7.44772 20.5523 7 20 7H10C9.44772 7 9 7.44772 9 8Z"}},{id:"SmallPlant",addInfo:"Small Plant",dragSize:{height:30,width:30},shape:{type:"Path",data:"M41.0021 14.6256C39.4786 15.0878 15.4174 23.8084 24.9086 22.7805C30.9102 22.1305 46.6742 12.9049 41.0021 14.6256Z M30.6226 40.7355C30.095 39.2334 20.3422 15.5718 21.7796 25.0097C22.6885 30.9776 32.587 46.328 30.6226 40.7355Z M40.8599 30.8341C39.4811 30.038 16.6684 18.4377 23.9067 24.6624C28.4837 28.5985 45.9932 33.7978 40.8599 30.8341Z M24.9451 2.15326C24.5331 3.69113 19.2324 28.7289 23.3715 20.1262C25.9889 14.6864 26.4792 -3.57215 24.9451 2.15326Z M2.19397 25.3449C3.78608 25.3449 29.3427 23.9847 19.9617 22.2131C14.0299 21.0929 -3.73342 25.3449 2.19397 25.3449Z M14.4307 41.966C15.2268 40.5872 26.8271 17.7744 20.6024 25.0127C16.6664 29.5898 11.467 47.0992 14.4307 41.966Z M9.34308 7.01354C10.1391 8.39235 24.0954 29.8449 20.9391 20.835C18.9434 15.1378 6.37938 1.88027 9.34308 7.01354Z M8.74609 23.1317C8.74609 19.0028 10.6305 15.3141 13.5861 12.8786M25.2568 10.2486C29.1467 11.2213 32.3568 13.9095 34.0367 17.4627M23.5 9.93362C23.0157 9.88011 22.5236 9.85264 22.0251 9.85264C19.3319 9.85264 16.826 10.6544 14.733 12.0323M34.6489 19.0003C35.0742 20.3006 35.3041 21.6893 35.3041 23.1317C35.3041 24.7546 35.013 26.3095 34.4801 27.747M33.7595 29.3531C32.4773 31.7665 30.4723 33.7373 28.0333 34.9769M26.5361 35.6249C25.1278 36.1335 23.6088 36.4107 22.0251 36.4107C20.4153 36.4107 18.8723 36.1242 17.4445 35.5995M15.8519 34.8916C12.0702 32.9023 9.36529 29.1424 8.83942 24.7143M41.0021 14.6256C39.4786 15.0878 15.4174 23.8084 24.9086 22.7805C30.9102 22.1305 46.6742 12.9049 41.0021 14.6256ZM30.6226 40.7355C30.095 39.2334 20.3422 15.5718 21.7796 25.0097C22.6885 30.9776 32.587 46.328 30.6226 40.7355ZM40.8599 30.8341C39.4811 30.038 16.6684 18.4377 23.9067 24.6624C28.4837 28.5985 45.9932 33.7978 40.8599 30.8341ZM24.9451 2.15326C24.5331 3.69113 19.2324 28.7289 23.3715 20.1262C25.9889 14.6864 26.4792 -3.57215 24.9451 2.15326ZM2.19397 25.3449C3.78608 25.3449 29.3427 23.9847 19.9617 22.2131C14.0299 21.0929 -3.73342 25.3449 2.19397 25.3449ZM14.4307 41.966C15.2268 40.5872 26.8271 17.7744 20.6024 25.0127C16.6664 29.5898 11.467 47.0992 14.4307 41.966ZM9.34308 7.01354C10.1391 8.39235 24.0954 29.8449 20.9391 20.835C18.9434 15.1378 6.37938 1.88027 9.34308 7.01354Z"}},{id:"Matte",addInfo:"Matte",dragSize:{width:40,height:20},shape:{type:"Path",data:"M1 3C1 1.89543 1.89543 1 3 1L68 1C69.1046 1 70 1.89543 70 3V48C70 49.1046 69.1046 50 68 50H3C1.89543 50 1 49.1046 1 48L1 3Z M1 12H70V39H1L1 12Z M1 15H70V36H1L1 15Z"}},{id:"Matte1",addInfo:"Matte",dragSize:{width:40,height:20},shape:{type:"Path",data:"M1 25.5C1 11.969 11.969 1 25.5 1H44.5C58.031 1 69 11.969 69 25.5C69 39.031 58.031 50 44.5 50H25.5C11.969 50 1 39.031 1 25.5Z M3 25.5C3 13.0736 13.0736 3 25.5 3H44.5C56.9264 3 67 13.0736 67 25.5C67 37.9264 56.9264 48 44.5 48H25.5C13.0736 48 3 37.9264 3 25.5Z M16 25.5C16 20.2533 20.2533 16 25.5 16H44.5C49.7467 16 54 20.2533 54 25.5C54 30.7467 49.7467 35 44.5 35H25.5C20.2533 35 16 30.7467 16 25.5Z M18 25.5C18 21.3579 21.3579 18 25.5 18H44.5C48.6421 18 52 21.3579 52 25.5C52 29.6421 48.6421 33 44.5 33H25.5C21.3579 33 18 29.6421 18 25.5Z"}}],tP=[{id:"TV",addInfo:"TV",dragSize:{width:48,height:20},shape:{type:"Path",data:"M55 23H4C2.34315 23 1 24.3431 1 26V40H58V26C58 24.3431 56.6569 23 55 23ZM55 23L48.1968 4.29128C47.4783 2.31534 45.6004 1 43.4979 1H16.5021C14.3996 1 12.5217 2.31533 11.8032 4.29128L5 23H55ZM16 1V23M25 1V23M34 1V23M43 1V23M1 36.5H58"}},{id:"FlatTV",addInfo:"Flat TV",dragSize:{width:66,height:13},shape:{type:"Path",data:"M1 15H92M1 15V20H92V15M1 15V10H92V15M79 7L85 1M79 20L85 26M14 7L8 1M14 20L8 26M37 2V7M39 2V7M41 2V7M43 2V7M45 2V7M47 2V7M49 2V7M51 2V7M53 2V7M55 2V7M23 2H70L76 7H17L23 2ZM5 7H88V10H5V7Z"}},{id:"FlatTV1",addInfo:"Flat TV",dragSize:{width:66,height:13},shape:{type:"Path",data:"M1 14H92M1 14V19H92V14M1 14V9H92V14M37 1V6M39 1V6M41 1V6M43 1V6M45 1V6M47 1V6M49 1V6M51 1V6M53 1V6M55 1V6M23 1H70L76 6H17L23 1ZM5 6H88V9H5V6Z"}},{id:"Sofa",addInfo:"Sofa",dragSize:{width:76,height:35},shape:{type:"Path",data:"M95 49H130C131.657 49 133 47.6569 133 46V20C133 18.3431 131.657 17 130 17H20C18.3431 17 17 18.3431 17 20V46C17 47.6569 18.3431 49 20 49H95ZM95 49V17H56V49H95ZM145 17H137C134.791 17 133 18.7909 133 21V45C133 47.2091 134.791 49 137 49H145C147.209 49 149 47.2091 149 45V21C149 18.7909 147.209 17 145 17ZM145 17H5M145 17C147.209 17 149 15.2091 149 13V5.00001C149 2.79087 147.209 1.00001 145 1.00001L5 1C2.79086 1 1 2.79086 1 5L1 13C1 15.2091 2.79086 17 5 17M5 17H13C15.2091 17 17 18.7909 17 21V45C17 47.2091 15.2091 49 13 49H5C2.79086 49 1 47.2091 1 45L1 21C1 18.7909 2.79086 17 5 17Z"}},{id:"DoubleSofa",addInfo:"Double Sofa",dragSize:{width:76,height:35},shape:{type:"Path",data:"M55 17H20C18.3431 17 17 18.3431 17 20V46C17 47.6569 18.3431 49 20 49H55M55 17V49M55 17H91C92.6569 17 94 18.3431 94 20V46C94 47.6569 92.6569 49 91 49H55M106 17H98C95.7909 17 94 18.7909 94 21V45C94 47.2091 95.7909 49 98 49H106C108.209 49 110 47.2091 110 45V21C110 18.7909 108.209 17 106 17ZM106 17H5M106 17C108.209 17 110 15.2091 110 13V5.00001C110 2.79087 108.209 1.00001 106 1.00001L5 1C2.79086 1 1 2.79086 1 5L1 13C1 15.2091 2.79086 17 5 17M5 17H13C15.2091 17 17 18.7909 17 21V45C17 47.2091 15.2091 49 13 49H5C2.79086 49 1 47.2091 1 45L1 21C1 18.7909 2.79086 17 5 17Z"}},{id:"SingleSofa",addInfo:"Single Sofa",dragSize:{width:50,height:35},shape:{type:"Path",data:"M67 17L59 17C56.7909 17 55 18.7909 55 21V45C55 47.2091 56.7909 49 59 49H67C69.2091 49 71 47.2091 71 45V21C71 18.7909 69.2091 17 67 17ZM67 17L5 17M67 17C69.2091 17 71 15.2091 71 13V5.00001C71 2.79087 69.2091 1.00001 67 1.00001L5 1C2.79086 1 1 2.79086 1 5L1 13C1 15.2091 2.79086 17 5 17M5 17L13 17C15.2091 17 17 18.7909 17 21V45C17 47.2091 15.2091 49 13 49H5C2.79086 49 1 47.2091 1 45L1 21C1 18.7909 2.79086 17 5 17ZM20 49H52C53.6569 49 55 47.6569 55 46V20C55 18.3431 53.6569 17 52 17H20C18.3431 17 17 18.3431 17 20V46C17 47.6569 18.3431 49 20 49Z"}},{id:"Couch",addInfo:"Couch",dragSize:{width:41,height:35},shape:{type:"Path",data:"M39.3572 42.5001C33.5879 44.3644 23.3389 47.3726 11.0312 42.8982M39.3572 42.5001C38.9901 32.896 39.1315 17.3601 40.2727 11.5C38.1563 12.9176 38.0909 13 33.1818 14C28.8182 14.8889 26.0909 14.5 26.0909 14.5C26.0909 14.5 22.2727 14.5 19 14C15.7273 13.5 14.0909 13 10.2727 10.9155C10.7143 16.2832 11.7887 29.6759 11.0312 42.8982M39.3572 42.5001C39.4226 44.2122 40.7919 45.5708 42.5027 45.6646L45.163 45.8105C47.0566 45.9143 48.6622 44.438 48.7092 42.5421C48.8219 38.0026 49 29.9987 49 24.7736C49 20.1829 48.725 13.4473 48.5055 8.8007C48.3595 5.71097 46.1103 3.14326 43.0526 2.67589C38.2269 1.93827 30.8617 1 24.619 1C18.1203 1 10.557 2.69472 5.86868 3.94263C3.15069 4.66609 1.30579 7.10774 1.22538 9.91921C1.12006 13.6016 1 19.0538 1 24.7736C1 31.5601 1.16901 38.7232 1.28189 42.7504C1.33277 44.5656 2.82066 46 4.63658 46H7.70901C9.46516 46 10.9308 44.6515 11.0312 42.8982M22.2195 21.2201C22.2195 22.1507 21.4652 22.9051 20.5346 22.9051C19.604 22.9051 18.8496 22.1507 18.8496 21.2201C18.8496 20.2895 19.604 19.5352 20.5346 19.5352C21.4652 19.5352 22.2195 20.2895 22.2195 21.2201ZM22.2195 27.9594C22.2195 28.89 21.4652 29.6443 20.5346 29.6443C19.604 29.6443 18.8496 28.89 18.8496 27.9594C18.8496 27.0288 19.604 26.2744 20.5346 26.2744C21.4652 26.2744 22.2195 27.0288 22.2195 27.9594ZM22.2195 34.6986C22.2195 35.6292 21.4652 36.3836 20.5346 36.3836C19.604 36.3836 18.8496 35.6292 18.8496 34.6986C18.8496 33.7681 19.604 33.0137 20.5346 33.0137C21.4652 33.0137 22.2195 33.7681 22.2195 34.6986ZM32.3294 21.2201C32.3294 22.1507 31.575 22.9051 30.6444 22.9051C29.7139 22.9051 28.9595 22.1507 28.9595 21.2201C28.9595 20.2895 29.7139 19.5352 30.6444 19.5352C31.575 19.5352 32.3294 20.2895 32.3294 21.2201ZM32.3294 27.9594C32.3294 28.89 31.575 29.6443 30.6444 29.6443C29.7139 29.6443 28.9595 28.89 28.9595 27.9594C28.9595 27.0288 29.7139 26.2744 30.6444 26.2744C31.575 26.2744 32.3294 27.0288 32.3294 27.9594ZM32.3294 34.6986C32.3294 35.6292 31.575 36.3836 30.6444 36.3836C29.7139 36.3836 28.9595 35.6292 28.9595 34.6986C28.9595 33.7681 29.7139 33.0137 30.6444 33.0137C31.575 33.0137 32.3294 33.7681 32.3294 34.6986Z"}},{id:"Lounge",addInfo:"Lounge",dragSize:{width:76,height:35},shape:{type:"Path",data:"M135.5366,76.6025C135.5366,77.4305,134.8646,78.1025,134.0366,78.1025C133.2076,78.1025,132.5366,77.4305,132.5366,76.6025C132.5366,75.7745,133.2076,75.1025,134.0366,75.1025C134.8646,75.1025,135.5366,75.7745,135.5366,76.6025z M135.5366,69.8625C135.5366,70.6905,134.8646,71.3625,134.0366,71.3625C133.2076,71.3625,132.5366,70.6905,132.5366,69.8625C132.5366,69.0335,133.2076,68.3625,134.0366,68.3625C134.8646,68.3625,135.5366,69.0335,135.5366,69.8625z M135.5366,63.1235C135.5366,63.9515,134.8646,64.6235,134.0366,64.6235C133.2076,64.6235,132.5366,63.9515,132.5366,63.1235C132.5366,62.2945,133.2076,61.6235,134.0366,61.6235C134.8646,61.6235,135.5366,62.2945,135.5366,63.1235z M125.4266,76.6025C125.4266,77.4305,124.7546,78.1025,123.9266,78.1025C123.0986,78.1025,122.4266,77.4305,122.4266,76.6025C122.4266,75.7745,123.0986,75.1025,123.9266,75.1025C124.7546,75.1025,125.4266,75.7745,125.4266,76.6025z M125.4266,69.8625C125.4266,70.6905,124.7546,71.3625,123.9266,71.3625C123.0986,71.3625,122.4266,70.6905,122.4266,69.8625C122.4266,69.0335,123.0986,68.3625,123.9266,68.3625C124.7546,68.3625,125.4266,69.0335,125.4266,69.8625z M125.4266,63.1235C125.4266,63.9515,124.7546,64.6235,123.9266,64.6235C123.0986,64.6235,122.4266,63.9515,122.4266,63.1235C122.4266,62.2945,123.0986,61.6235,123.9266,61.6235C124.7546,61.6235,125.4266,62.2945,125.4266,63.1235z M106.5366,76.6025C106.5366,77.4305,105.8646,78.1025,105.0366,78.1025C104.2076,78.1025,103.5366,77.4305,103.5366,76.6025C103.5366,75.7745,104.2076,75.1025,105.0366,75.1025C105.8646,75.1025,106.5366,75.7745,106.5366,76.6025z M106.5366,63.1235C106.5366,63.9515,105.8646,64.6235,105.0366,64.6235C104.2076,64.6235,103.5366,63.9515,103.5366,63.1235C103.5366,62.2945,104.2076,61.6235,105.0366,61.6235C105.8646,61.6235,106.5366,62.2945,106.5366,63.1235z M96.4266,76.6025C96.4266,77.4305,95.7546,78.1025,94.9266,78.1025C94.0986,78.1025,93.4266,77.4305,93.4266,76.6025C93.4266,75.7745,94.0986,75.1025,94.9266,75.1025C95.7546,75.1025,96.4266,75.7745,96.4266,76.6025z M96.4266,69.8625C96.4266,70.6905,95.7546,71.3625,94.9266,71.3625C94.0986,71.3625,93.4266,70.6905,93.4266,69.8625C93.4266,69.0335,94.0986,68.3625,94.9266,68.3625C95.7546,68.3625,96.4266,69.0335,96.4266,69.8625z M96.4266,63.1235C96.4266,63.9515,95.7546,64.6235,94.9266,64.6235C94.0986,64.6235,93.4266,63.9515,93.4266,63.1235C93.4266,62.2945,94.0986,61.6235,94.9266,61.6235C95.7546,61.6235,96.4266,62.2945,96.4266,63.1235z M106.5366,69.8625C106.5366,70.6905,105.8646,71.3625,105.0366,71.3625C104.2076,71.3625,103.5366,70.6905,103.5366,69.8625C103.5366,69.0335,104.2076,68.3625,105.0366,68.3625C105.8646,68.3625,106.5366,69.0335,106.5366,69.8625z M77.5366,77.6025C77.5366,78.4305,76.8646,79.1025,76.0366,79.1025C75.2076,79.1025,74.5366,78.4305,74.5366,77.6025C74.5366,76.7745,75.2076,76.1025,76.0366,76.1025C76.8646,76.1025,77.5366,76.7745,77.5366,77.6025z M77.5366,70.8625C77.5366,71.6905,76.8646,72.3625,76.0366,72.3625C75.2076,72.3625,74.5366,71.6905,74.5366,70.8625C74.5366,70.0335,75.2076,69.3625,76.0366,69.3625C76.8646,69.3625,77.5366,70.0335,77.5366,70.8625z M77.5366,64.1235C77.5366,64.9515,76.8646,65.6235,76.0366,65.6235C75.2076,65.6235,74.5366,64.9515,74.5366,64.1235C74.5366,63.2945,75.2076,62.6235,76.0366,62.6235C76.8646,62.6235,77.5366,63.2945,77.5366,64.1235z M67.4266,77.1235C67.4266,77.9515,66.7546,78.6235,65.9266,78.6235C65.0986,78.6235,64.4266,77.9515,64.4266,77.1235C64.4266,76.2945,65.0986,75.6235,65.9266,75.6235C66.7546,75.6235,67.4266,76.2945,67.4266,77.1235z M67.4266,71.1235C67.4266,71.9515,66.7546,72.6235,65.9266,72.6235C65.0986,72.6235,64.4266,71.9515,64.4266,71.1235C64.4266,70.2945,65.0986,69.6235,65.9266,69.6235C66.7546,69.6235,67.4266,70.2945,67.4266,71.1235z M67.4266,64.1235C67.4266,64.9515,66.7546,65.6235,65.9266,65.6235C65.0986,65.6235,64.4266,64.9515,64.4266,64.1235C64.4266,63.2945,65.0986,62.6235,65.9266,62.6235C66.7546,62.6235,67.4266,63.2945,67.4266,64.1235z M114.8946,87.8505C127.5326,92.8705,140.1686,89.9725,144.9656,87.8815 M114.8946,54.7325L114.8946,87.8505 M56.2036,87.8315C55.6066,88.7135,54.5856,89.2745,53.4546,89.2745L51.3896,89.2745C49.6286,89.2745,48.1676,87.9235,48.0576,86.1665C47.8076,82.1925,47.4266,75.0125,47.4266,68.2125C47.4266,62.8665,47.6626,57.7565,47.8846,54.1275C48.0746,51.0195,50.4276,48.5215,53.5156,48.1235C62.8286,46.9225,82.8546,44.6235,99.6606,44.6235C116.4456,44.6235,136.9006,45.9995,146.4696,46.7205C149.6416,46.9595,152.1766,49.4065,152.5076,52.5705C152.9896,57.1725,153.5796,63.7255,153.5796,68.2125C153.5796,73.5045,153.1686,81.6695,152.9206,86.1185C152.8216,87.8955,151.3506,89.2745,149.5706,89.2745L147.6896,89.2745C146.5756,89.2745,145.5736,88.7315,144.9656,87.8815 M56.2036,87.8315C56.4686,87.4405,56.6496,86.9875,56.7206,86.4915C58.6086,73.2765,57.2566,59.8275,56.2726,54.4615C68.3486,57.2745,80.9626,55.6335,85.7596,54.4615C95.5886,57.8375,109.2786,55.8685,114.8956,54.4615C127.5326,57.8375,140.0526,55.8685,144.7336,54.4615C142.2026,60.2915,143.2826,76.6465,144.3766,86.3435C144.4416,86.9165,144.6516,87.4405,144.9656,87.8815 M86.1106,87.8505C99.5896,92.5915,110.9166,89.8265,114.8946,87.8505 M86.1106,87.8505C80.8446,89.7095,67.4376,92.2935,56.2036,87.8315 M86.1106,54.7325L86.1106,87.8505"}},{id:"Chair",addInfo:"Chair",shape:{type:"Path",data:"M22 9V14M28 9.08984V14M13 54H37C41.4183 54 45 50.4183 45 46V22C45 17.5817 41.4183 14 37 14H13C8.58172 14 5 17.5817 5 22V46C5 50.4183 8.58172 54 13 54ZM3 45C1.89543 45 1 44.1046 1 43V25C1 23.8954 1.89543 23 3 23C4.10457 23 5 23.8954 5 25V43C5 44.1046 4.10457 45 3 45ZM11 5.79143C11 3.97975 12.2614 2.40196 14.0423 2.06981C22.0186 0.582241 27.6274 0.696364 35.7954 2.09976C37.6588 2.41991 39 4.05364 39 5.94429C39 8.4118 36.7616 10.2627 34.325 9.87346C27.5467 8.79067 22.4382 8.5351 15.7921 9.68406C13.3336 10.1091 11 8.28636 11 5.79143ZM47 45C45.8954 45 45 44.1046 45 43V25C45 23.8954 45.8954 23 47 23C48.1046 23 49 23.8954 49 25V43C49 44.1046 48.1046 45 47 45Z"}},{id:"Chair1",addInfo:"Chair",shape:{type:"Path",data:"M7 27.5V56C7 56.5523 6.55228 57 6 57H2C1.44772 57 1 56.5523 1 56V26.5C1 12.4167 12.4167 1 26.5 1C40.5833 1 52 12.4167 52 26.5V56C52 56.5523 51.5523 57 51 57H47C46.4477 57 46 56.5523 46 56V27.5M7 27.5C7 16.7304 15.7304 8 26.5 8C37.2696 8 46 16.7304 46 27.5M7 27.5V58C7 58.5523 7.44772 59 8 59H45C45.5523 59 46 58.5523 46 58V27.5"}},{id:"Stool",addInfo:"Stool",dragSize:{height:40,width:40},shape:{type:"Path",data:"M58 31C58 46.464 45.6878 59 30.5 59C15.3122 59 3 46.464 3 31C3 15.536 15.3122 3 30.5 3C45.6878 3 58 15.536 58 31Z  M29 59V61H25V59H29Z M29 1V3H25V1L29 1Z M36 59V61H32V59H36Z M36 1V3H32V1L36 1Z M3 29H1L1 25H3L3 29Z M60 29H58V25H60V29Z M3 36H1L1 32H3L3 36Z M60 36H58V32H60V36Z"}},{id:"Piano",addInfo:"Piano",shape:{type:"Path",data:"M151 148H1M151 148C151 148 155.5 95 139.359 83.7708C123.218 72.5416 109.47 76.8178 95.0076 59.2704C80.5449 41.7231 79.0225 37.2535 74.4554 28.8109C69.8882 20.3683 64.5598 0.999963 35.2538 1C5.94777 1.00004 1 33.4457 1 33.4457V148M151 148V173M151 148H145M1 148V173M1 148H7M151 173H1M151 173H145M1 173H7M7 148V173M7 148H13M7 173H13M13 148V173M13 148H19M13 173H19M19 148V173M19 148H25M19 173H25M25 148V173M25 148H31M25 173H31M31 148V173M31 148H37M31 173H37M37 148V173M37 148H43M37 173H43M43 148V173M43 148H49M43 173H49M49 148V173M49 148H55M49 173H55M55 148V173M55 148H61M55 173H61M61 148V173M61 148H67M61 173H67M67 148V173M67 148H73M67 173H73M73 148V173M73 148H79M73 173H79M79 148V173M79 148H85M79 173H85M85 148V173M85 148H91M85 173H91M91 148V173M91 148H97M91 173H97M97 148V173M97 148H103M97 173H103M103 148V173M103 148H109M103 173H109M109 148V173M109 148H115M109 173H115M115 148H121M115 148V173M121 148V173M121 148H127M121 173H115M121 173H127M127 148V173M127 148H133M127 173H133M133 148V173M133 148H139M133 173H139M139 148V173M139 148H145M139 173H145M145 148V173M6 156H8V173H6V156ZM12 156H14V173H12V156ZM18 156H20V173H18V156ZM24 156H26V173H24V156ZM30 156H32V173H30V156ZM36 156H38V173H36V156ZM42 156H44V173H42V156ZM48 156H50V173H48V156ZM54 156H56V173H54V156ZM60 156H62V173H60V156ZM66 156H68V173H66V156ZM72 156H74V173H72V156ZM78 156H80V173H78V156ZM84 156H86V173H84V156ZM90 156H92V173H90V156ZM96 156H98V173H96V156ZM102 156H104V173H102V156ZM108 156H110V173H108V156ZM114 156H116V173H114V156ZM120 156H122V173H120V156ZM126 156H128V173H126V156ZM132 156H134V173H132V156ZM138 156H140V173H138V156ZM144 156H146V173H144V156Z"}},{id:"Printer",addInfo:"Printer",dragSize:{width:35,height:27},shape:{type:"Path",data:"M1 12.1687C1 8.76181 3.76181 6 7.16867 6H58.8313C62.2382 6 65 8.76181 65 12.1687V39.8313C65 43.2382 62.2382 46 58.8313 46H7.16867C3.76181 46 1 43.2382 1 39.8313V12.1687Z M5 13.8554C5 11.7261 6.72613 10 8.85542 10H48.1446C50.2739 10 52 11.7261 52 13.8554V38.1446C52 40.2739 50.2739 42 48.1446 42H8.85542C6.72613 42 5 40.2739 5 38.1446V13.8554Z M10 4.08434C10 2.3809 11.3809 1 13.0843 1H51.9157C53.6191 1 55 2.3809 55 4.08434V6H10V4.08434Z M56 55.9157C56 57.6191 54.6191 59 52.9157 59L14.0843 59C12.3809 59 11 57.6191 11 55.9157V46L56 46V55.9157Z M54 29.7711C54 29.3452 54.3452 29 54.7711 29H57.2289C57.6548 29 58 29.3452 58 29.7711V30.2289C58 30.6548 57.6548 31 57.2289 31H54.7711C54.3452 31 54 30.6548 54 30.2289V29.7711Z M54 25.7711C54 25.3452 54.3452 25 54.7711 25H57.2289C57.6548 25 58 25.3452 58 25.7711V26.2289C58 26.6548 57.6548 27 57.2289 27H54.7711C54.3452 27 54 26.6548 54 26.2289V25.7711Z M59 29.7711C59 29.3452 59.3452 29 59.7711 29H62.2289C62.6548 29 63 29.3452 63 29.7711V30.2289C63 30.6548 62.6548 31 62.2289 31H59.7711C59.3452 31 59 30.6548 59 30.2289V29.7711Z M59 25.7711C59 25.3452 59.3452 25 59.7711 25H62.2289C62.6548 25 63 25.3452 63 25.7711V26.2289C63 26.6548 62.6548 27 62.2289 27H59.7711C59.3452 27 59 26.6548 59 26.2289V25.7711Z M54 18.7711C54 18.3452 54.3452 18 54.7711 18H62.2289C62.6548 18 63 18.3452 63 18.7711V22.2289C63 22.6548 62.6548 23 62.2289 23H54.7711C54.3452 23 54 22.6548 54 22.2289V18.7711Z"}},{id:"Laptop",addInfo:"Laptop",dragSize:{width:35,height:27},shape:{type:"Path",data:"M1.06567 5.71554C0.619244 3.26018 2.50554 1 5.00115 1H61.0006C63.4675 1 65.3464 3.21135 64.9481 5.64595L61.7571 25.146C61.4407 27.08 59.7695 28.5 57.8096 28.5H8.54661C6.61347 28.5 4.95694 27.1175 4.61113 25.2155L1.06567 5.71554Z M3.7083 33C3.7083 30.7909 5.49916 29 7.7083 29H58.7083C60.9174 29 62.7083 30.7909 62.7083 33V55C62.7083 57.2091 60.9174 59 58.7083 59H7.7083C5.49916 59 3.7083 57.2091 3.7083 55V33Z M26.7083 50C26.7083 49.4477 27.156 49 27.7083 49H38.7083C39.2606 49 39.7083 49.4477 39.7083 50V54C39.7083 54.5523 39.2606 55 38.7083 55H27.7083C27.156 55 26.7083 54.5523 26.7083 54V50Z M8.7083 35.5C8.7083 35.2239 8.93216 35 9.2083 35H12.2083C12.4844 35 12.7083 35.2239 12.7083 35.5V36.5C12.7083 36.7761 12.4844 37 12.2083 37H9.2083C8.93216 37 8.7083 36.7761 8.7083 36.5V35.5Z M8.7083 38.5C8.7083 38.2239 8.93216 38 9.2083 38H12.2083C12.4844 38 12.7083 38.2239 12.7083 38.5V39.5C12.7083 39.7761 12.4844 40 12.2083 40H9.2083C8.93216 40 8.7083 39.7761 8.7083 39.5V38.5Z M8.7083 41.5C8.7083 41.2239 8.93216 41 9.2083 41H12.2083C12.4844 41 12.7083 41.2239 12.7083 41.5V42.5C12.7083 42.7761 12.4844 43 12.2083 43H9.2083C8.93216 43 8.7083 42.7761 8.7083 42.5V41.5Z M8.7083 44.5C8.7083 44.2239 8.93216 44 9.2083 44H12.2083C12.4844 44 12.7083 44.2239 12.7083 44.5V45.5C12.7083 45.7761 12.4844 46 12.2083 46H9.2083C8.93216 46 8.7083 45.7761 8.7083 45.5V44.5Z M13.7083 35.5C13.7083 35.2239 13.9322 35 14.2083 35H17.2083C17.4844 35 17.7083 35.2239 17.7083 35.5V36.5C17.7083 36.7761 17.4844 37 17.2083 37H14.2083C13.9322 37 13.7083 36.7761 13.7083 36.5V35.5Z M13.7083 38.5C13.7083 38.2239 13.9322 38 14.2083 38H17.2083C17.4844 38 17.7083 38.2239 17.7083 38.5V39.5C17.7083 39.7761 17.4844 40 17.2083 40H14.2083C13.9322 40 13.7083 39.7761 13.7083 39.5V38.5Z M13.7083 41.5C13.7083 41.2239 13.9322 41 14.2083 41H17.2083C17.4844 41 17.7083 41.2239 17.7083 41.5V42.5C17.7083 42.7761 17.4844 43 17.2083 43H14.2083C13.9322 43 13.7083 42.7761 13.7083 42.5V41.5Z M13.7083 44.5C13.7083 44.2239 13.9322 44 14.2083 44H17.2083C17.4844 44 17.7083 44.2239 17.7083 44.5V45.5C17.7083 45.7761 17.4844 46 17.2083 46H14.2083C13.9322 46 13.7083 45.7761 13.7083 45.5V44.5Z M18.7083 35.5C18.7083 35.2239 18.9322 35 19.2083 35H22.2083C22.4844 35 22.7083 35.2239 22.7083 35.5V36.5C22.7083 36.7761 22.4844 37 22.2083 37H19.2083C18.9322 37 18.7083 36.7761 18.7083 36.5V35.5Z M18.7083 38.5C18.7083 38.2239 18.9322 38 19.2083 38H22.2083C22.4844 38 22.7083 38.2239 22.7083 38.5V39.5C22.7083 39.7761 22.4844 40 22.2083 40H19.2083C18.9322 40 18.7083 39.7761 18.7083 39.5V38.5Z M18.7083 41.5C18.7083 41.2239 18.9322 41 19.2083 41H22.2083C22.4844 41 22.7083 41.2239 22.7083 41.5V42.5C22.7083 42.7761 22.4844 43 22.2083 43H19.2083C18.9322 43 18.7083 42.7761 18.7083 42.5V41.5Z M18.7083 44.5C18.7083 44.2239 18.9322 44 19.2083 44H22.2083C22.4844 44 22.7083 44.2239 22.7083 44.5V45.5C22.7083 45.7761 22.4844 46 22.2083 46H19.2083C18.9322 46 18.7083 45.7761 18.7083 45.5V44.5Z M23.7083 35.5C23.7083 35.2239 23.9322 35 24.2083 35H27.2083C27.4844 35 27.7083 35.2239 27.7083 35.5V36.5C27.7083 36.7761 27.4844 37 27.2083 37H24.2083C23.9322 37 23.7083 36.7761 23.7083 36.5V35.5Z M23.7083 38.5C23.7083 38.2239 23.9322 38 24.2083 38H27.2083C27.4844 38 27.7083 38.2239 27.7083 38.5V39.5C27.7083 39.7761 27.4844 40 27.2083 40H24.2083C23.9322 40 23.7083 39.7761 23.7083 39.5V38.5Z M23.7083 41.5C23.7083 41.2239 23.9322 41 24.2083 41H27.2083C27.4844 41 27.7083 41.2239 27.7083 41.5V42.5C27.7083 42.7761 27.4844 43 27.2083 43H24.2083C23.9322 43 23.7083 42.7761 23.7083 42.5V41.5Z M23.7083 44.5C23.7083 44.2239 23.9322 44 24.2083 44H42.2083C42.4844 44 42.7083 44.2239 42.7083 44.5V45.5C42.7083 45.7761 42.4844 46 42.2083 46H24.2083C23.9322 46 23.7083 45.7761 23.7083 45.5V44.5Z M28.7083 35.5C28.7083 35.2239 28.9322 35 29.2083 35H32.2083C32.4844 35 32.7083 35.2239 32.7083 35.5V36.5C32.7083 36.7761 32.4844 37 32.2083 37H29.2083C28.9322 37 28.7083 36.7761 28.7083 36.5V35.5Z M28.7083 38.5C28.7083 38.2239 28.9322 38 29.2083 38H32.2083C32.4844 38 32.7083 38.2239 32.7083 38.5V39.5C32.7083 39.7761 32.4844 40 32.2083 40H29.2083C28.9322 40 28.7083 39.7761 28.7083 39.5V38.5Z M28.7083 41.5C28.7083 41.2239 28.9322 41 29.2083 41H32.2083C32.4844 41 32.7083 41.2239 32.7083 41.5V42.5C32.7083 42.7761 32.4844 43 32.2083 43H29.2083C28.9322 43 28.7083 42.7761 28.7083 42.5V41.5Z M33.7083 35.5C33.7083 35.2239 33.9322 35 34.2083 35H37.2083C37.4844 35 37.7083 35.2239 37.7083 35.5V36.5C37.7083 36.7761 37.4844 37 37.2083 37H34.2083C33.9322 37 33.7083 36.7761 33.7083 36.5V35.5Z M33.7083 38.5C33.7083 38.2239 33.9322 38 34.2083 38H37.2083C37.4844 38 37.7083 38.2239 37.7083 38.5V39.5C37.7083 39.7761 37.4844 40 37.2083 40H34.2083C33.9322 40 33.7083 39.7761 33.7083 39.5V38.5Z M33.7083 41.5C33.7083 41.2239 33.9322 41 34.2083 41H37.2083C37.4844 41 37.7083 41.2239 37.7083 41.5V42.5C37.7083 42.7761 37.4844 43 37.2083 43H34.2083C33.9322 43 33.7083 42.7761 33.7083 42.5V41.5Z M38.7083 35.5C38.7083 35.2239 38.9322 35 39.2083 35H42.2083C42.4844 35 42.7083 35.2239 42.7083 35.5V36.5C42.7083 36.7761 42.4844 37 42.2083 37H39.2083C38.9322 37 38.7083 36.7761 38.7083 36.5V35.5Z M38.7083 38.5C38.7083 38.2239 38.9322 38 39.2083 38H42.2083C42.4844 38 42.7083 38.2239 42.7083 38.5V39.5C42.7083 39.7761 42.4844 40 42.2083 40H39.2083C38.9322 40 38.7083 39.7761 38.7083 39.5V38.5Z M38.7083 41.5C38.7083 41.2239 38.9322 41 39.2083 41H42.2083C42.4844 41 42.7083 41.2239 42.7083 41.5V42.5C42.7083 42.7761 42.4844 43 42.2083 43H39.2083C38.9322 43 38.7083 42.7761 38.7083 42.5V41.5Z M43.7083 35.5C43.7083 35.2239 43.9322 35 44.2083 35H47.2083C47.4844 35 47.7083 35.2239 47.7083 35.5V36.5C47.7083 36.7761 47.4844 37 47.2083 37H44.2083C43.9322 37 43.7083 36.7761 43.7083 36.5V35.5Z M43.7083 38.5C43.7083 38.2239 43.9322 38 44.2083 38H47.2083C47.4844 38 47.7083 38.2239 47.7083 38.5V39.5C47.7083 39.7761 47.4844 40 47.2083 40H44.2083C43.9322 40 43.7083 39.7761 43.7083 39.5V38.5Z M43.7083 41.5C43.7083 41.2239 43.9322 41 44.2083 41H47.2083C47.4844 41 47.7083 41.2239 47.7083 41.5V42.5C47.7083 42.7761 47.4844 43 47.2083 43H44.2083C43.9322 43 43.7083 42.7761 43.7083 42.5V41.5Z M43.7083 44.5C43.7083 44.2239 43.9322 44 44.2083 44H47.2083C47.4844 44 47.7083 44.2239 47.7083 44.5V45.5C47.7083 45.7761 47.4844 46 47.2083 46H44.2083C43.9322 46 43.7083 45.7761 43.7083 45.5V44.5Z M48.7083 35.5C48.7083 35.2239 48.9322 35 49.2083 35H52.2083C52.4844 35 52.7083 35.2239 52.7083 35.5V36.5C52.7083 36.7761 52.4844 37 52.2083 37H49.2083C48.9322 37 48.7083 36.7761 48.7083 36.5V35.5Z M48.7083 38.5C48.7083 38.2239 48.9322 38 49.2083 38H52.2083C52.4844 38 52.7083 38.2239 52.7083 38.5V39.5C52.7083 39.7761 52.4844 40 52.2083 40H49.2083C48.9322 40 48.7083 39.7761 48.7083 39.5V38.5Z M48.7083 41.5C48.7083 41.2239 48.9322 41 49.2083 41H52.2083C52.4844 41 52.7083 41.2239 52.7083 41.5V42.5C52.7083 42.7761 52.4844 43 52.2083 43H49.2083C48.9322 43 48.7083 42.7761 48.7083 42.5V41.5Z M48.7083 44.5C48.7083 44.2239 48.9322 44 49.2083 44H52.2083C52.4844 44 52.7083 44.2239 52.7083 44.5V45.5C52.7083 45.7761 52.4844 46 52.2083 46H49.2083C48.9322 46 48.7083 45.7761 48.7083 45.5V44.5Z M53.7083 35.5C53.7083 35.2239 53.9322 35 54.2083 35H57.2083C57.4844 35 57.7083 35.2239 57.7083 35.5V36.5C57.7083 36.7761 57.4844 37 57.2083 37H54.2083C53.9322 37 53.7083 36.7761 53.7083 36.5V35.5Z M53.7083 38.5C53.7083 38.2239 53.9322 38 54.2083 38H57.2083C57.4844 38 57.7083 38.2239 57.7083 38.5V39.5C57.7083 39.7761 57.4844 40 57.2083 40H54.2083C53.9322 40 53.7083 39.7761 53.7083 39.5V38.5Z M53.7083 41.5C53.7083 41.2239 53.9322 41 54.2083 41H57.2083C57.4844 41 57.7083 41.2239 57.7083 41.5V42.5C57.7083 42.7761 57.4844 43 57.2083 43H54.2083C53.9322 43 53.7083 42.7761 53.7083 42.5V41.5Z M53.7083 44.5C53.7083 44.2239 53.9322 44 54.2083 44H57.2083C57.4844 44 57.7083 44.2239 57.7083 44.5V45.5C57.7083 45.7761 57.4844 46 57.2083 46H54.2083C53.9322 46 53.7083 45.7761 53.7083 45.5V44.5Z"}},{id:"Elevator",addInfo:"Elevator",dragSize:{width:37,height:37},shape:{type:"Path",data:"M14.3536 14.6464L77.3536 77.6464M77.3536 14.3536L14.3536 77.3536M14 14H78V78H14V14ZM11 11H81V81H11V11ZM9 89H1V1H91V89H83V9H9V89Z"}}],eP=[{id:"SmallGasRange",addInfo:"Small Gas Range",dragSize:{width:70,height:25},shape:{type:"Path",data:"M67.5828 1.96454C67.5828 1.43184 67.151 1 66.6183 1L1.96405 1.00001C1.43135 1.00001 0.999512 1.43184 0.999512 1.96454L0.999515 34.0355C0.999515 34.5682 1.43135 35 1.96405 35L66.6183 35C67.151 35 67.5828 34.5682 67.5828 34.0355V1.96454Z M33.5828 4.79852C33.5828 4.26582 33.151 3.83398 32.6183 3.83398L4.79737 3.83399C4.26467 3.83399 3.83283 4.26583 3.83283 4.79853L3.83284 31.2028C3.83284 31.7355 4.26468 32.1673 4.79738 32.1673L32.6183 32.1673C33.151 32.1673 33.5828 31.7355 33.5828 31.2028L33.5828 4.79852Z M64.7488 4.79852C64.7488 4.26582 64.317 3.83398 63.7843 3.83398L35.9634 3.83399C35.4307 3.83399 34.9988 4.26583 34.9988 4.79853L34.9989 31.2028C34.9989 31.7355 35.4307 32.1673 35.9634 32.1673L63.7843 32.1673C64.317 32.1673 64.7489 31.7355 64.7489 31.2028L64.7488 4.79852Z M26.4988 18C26.4988 22.6944 22.6933 26.5 17.9988 26.5C13.3044 26.5 9.49885 22.6944 9.49885 18C9.49885 13.3056 13.3044 9.5 17.9988 9.5C22.6933 9.5 26.4988 13.3056 26.4988 18Z M25.4363 18C25.4363 22.1076 22.1065 25.4375 17.9988 25.4375C13.8912 25.4375 10.5613 22.1076 10.5613 18C10.5613 13.8924 13.8912 10.5625 17.9988 10.5625C22.1065 10.5625 25.4363 13.8924 25.4363 18Z M25.0574 24.6826L24.6818 25.0583L22.0015 22.378L22.3772 22.0024L25.0574 24.6826Z M13.9442 13.5703L13.5685 13.946L10.888 11.2655L11.2637 10.8898L13.9442 13.5703Z M24.786 11.0938L25.1616 11.4694L22.4813 14.1497L22.1057 13.774L24.786 11.0938Z M13.7733 21.9844L14.1489 22.36L11.4686 25.0403L11.093 24.6646L13.7733 21.9844Z M21.452 18C21.452 19.9071 19.906 21.4531 17.9988 21.4531C16.0917 21.4531 14.5457 19.9071 14.5457 18C14.5457 16.0929 16.0917 14.5469 17.9988 14.5469C19.906 14.5469 21.452 16.0929 21.452 18Z M57.6658 18C57.6658 22.6944 53.8603 26.5 49.1658 26.5C44.4714 26.5 40.6658 22.6944 40.6658 18C40.6658 13.3056 44.4714 9.5 49.1658 9.5C53.8603 9.5 57.6658 13.3056 57.6658 18Z M56.6033 18C56.6033 22.1076 53.2735 25.4375 49.1658 25.4375C45.0582 25.4375 41.7283 22.1076 41.7283 18C41.7283 13.8924 45.0582 10.5625 49.1658 10.5625C53.2735 10.5625 56.6033 13.8924 56.6033 18Z M56.2235 24.6826L55.8478 25.0583L53.1675 22.378L53.5432 22.0024L56.2235 24.6826Z M45.1121 13.5703L44.7365 13.946L42.056 11.2655L42.4317 10.8898L45.1121 13.5703Z M55.952 11.0938L56.3276 11.4694L53.6474 14.1497L53.2717 13.774L55.952 11.0938Z M44.9403 21.9844L45.3159 22.36L42.6356 25.0403L42.26 24.6646L44.9403 21.9844Z M52.619 18C52.619 19.9071 51.0729 21.4531 49.1658 21.4531C47.2587 21.4531 45.7127 19.9071 45.7127 18C45.7127 16.0929 47.2587 14.5469 49.1658 14.5469C51.0729 14.5469 52.619 16.0929 52.619 18Z"}},{id:"LargeGasRange",addInfo:"Large Gas Range",dragSize:{width:100,height:30},shape:{type:"Path",data:"M101.999 1.96454C101.999 1.43184 101.567 1 101.034 1L1.96356 1.00001C1.43086 1.00001 0.999023 1.43185 0.999023 1.96455L0.999026 34.0355C0.999026 34.5682 1.43087 35 1.96357 35L101.034 35C101.567 35 101.999 34.5682 101.999 34.0355V1.96454Z M33.583 4.79803C33.583 4.26533 33.1512 3.8335 32.6185 3.8335L4.79755 3.8335C4.26485 3.8335 3.83301 4.26534 3.83301 4.79804L3.83301 31.2023C3.83301 31.735 4.26485 32.1668 4.79755 32.1668L32.6185 32.1668C33.1512 32.1668 33.583 31.735 33.583 31.2023L33.583 4.79803Z M98.749 4.96454C98.749 4.43184 98.3172 4 97.7845 4L69.9636 4C69.4309 4 68.999 4.43184 68.999 4.96454L68.999 31.3688C68.999 31.9015 69.4309 32.3333 69.9636 32.3333L97.7845 32.3333C98.3172 32.3333 98.749 31.9015 98.749 31.3688V4.96454Z M60.999 9.61601C60.999 9.2758 60.7232 9 60.383 9L42.615 9C42.2748 9 41.999 9.2758 41.999 9.61601L41.999 26.4792C41.999 26.8195 42.2748 27.0953 42.615 27.0953L60.383 27.0953C60.7232 27.0953 60.999 26.8195 60.999 26.4792V9.61601Z M26.499 18C26.499 22.6944 22.6934 26.5 17.999 26.5C13.3046 26.5 9.49902 22.6944 9.49902 18C9.49902 13.3056 13.3046 9.5 17.999 9.5C22.6934 9.5 26.499 13.3056 26.499 18Z M25.4365 18C25.4365 22.1076 22.1066 25.4375 17.999 25.4375C13.8914 25.4375 10.5615 22.1076 10.5615 18C10.5615 13.8924 13.8914 10.5625 17.999 10.5625C22.1066 10.5625 25.4365 13.8924 25.4365 18Z M25.0576 24.6826L24.682 25.0583L22.0017 22.378L22.3774 22.0024L25.0576 24.6826Z M13.9443 13.5698L13.5687 13.9455L10.8882 11.265L11.2639 10.8894L13.9443 13.5698Z M24.7861 11.0938L25.1618 11.4694L22.4815 14.1497L22.1059 13.774L24.7861 11.0938Z M13.7734 21.9844L14.1491 22.36L11.4688 25.0403L11.0932 24.6646L13.7734 21.9844Z M21.4521 18C21.4521 19.9071 19.9061 21.4531 17.999 21.4531C16.0919 21.4531 14.5459 19.9071 14.5459 18C14.5459 16.0929 16.0919 14.5469 17.999 14.5469C19.9061 14.5469 21.4521 16.0929 21.4521 18Z M91.665 18.1665C91.665 22.8609 87.8595 26.6665 83.165 26.6665C78.4706 26.6665 74.665 22.8609 74.665 18.1665C74.665 13.4721 78.4706 9.6665 83.165 9.6665C87.8595 9.6665 91.665 13.4721 91.665 18.1665Z M90.6025 18.1665C90.6025 22.2741 87.2727 25.604 83.165 25.604C79.0574 25.604 75.7275 22.2741 75.7275 18.1665C75.7275 14.0589 79.0574 10.729 83.165 10.729C87.2727 10.729 90.6025 14.0589 90.6025 18.1665Z M90.2236 24.8491L89.848 25.2248L87.1677 22.5445L87.5434 22.1689L90.2236 24.8491Z M79.1104 13.7363L78.7347 14.112L76.0542 11.4315L76.4299 11.0559L79.1104 13.7363Z M89.9521 11.2603L90.3278 11.6359L87.6475 14.3162L87.2719 13.9405L89.9521 11.2603Z M78.9404 22.1509L79.3161 22.5265L76.6358 25.2068L76.2602 24.8311L78.9404 22.1509Z M86.6182 18.1665C86.6182 20.0736 85.0721 21.6196 83.165 21.6196C81.2579 21.6196 79.7119 20.0736 79.7119 18.1665C79.7119 16.2594 81.2579 14.7134 83.165 14.7134C85.0721 14.7134 86.6182 16.2594 86.6182 18.1665Z M56.4753 18.0477C56.4753 21.0458 54.0449 23.4763 51.0467 23.4763C48.0486 23.4763 45.6182 21.0458 45.6182 18.0477C45.6182 15.0496 48.0486 12.6191 51.0467 12.6191C54.0449 12.6191 56.4753 15.0496 56.4753 18.0477Z M55.7979 18.0479C55.7979 20.6712 53.6712 22.7979 51.0479 22.7979C48.4245 22.7979 46.2979 20.6712 46.2979 18.0479C46.2979 15.4245 48.4245 13.2979 51.0479 13.2979C53.6712 13.2979 55.7979 15.4245 55.7979 18.0479Z M55.5557 22.3154L55.3158 22.5553L53.604 20.8436L53.8439 20.6037L55.5557 22.3154Z M48.458 15.2183L48.2181 15.4582L46.5062 13.7463L46.7461 13.5064L48.458 15.2183Z M55.3818 13.6367L55.6217 13.8766L53.91 15.5884L53.6701 15.3485L55.3818 13.6367Z M48.3486 20.5923L48.5885 20.8322L46.8768 22.544L46.6369 22.3041L48.3486 20.5923Z M53.2525 18.0476C53.2525 19.2656 52.2651 20.253 51.0472 20.253C49.8292 20.253 48.8418 19.2656 48.8418 18.0476C48.8418 16.8297 49.8292 15.8423 51.0472 15.8423C52.2651 15.8423 53.2525 16.8297 53.2525 18.0476Z"}},{id:"LargeGasRange1",addInfo:"Large Gas Range",dragSize:{width:100,height:30},shape:{type:"Path",data:"M101.999 1.96454C101.999 1.43184 101.567 1 101.034 1L1.96356 1.00001C1.43086 1.00001 0.999023 1.43185 0.999023 1.96455L0.999026 34.0355C0.999026 34.5682 1.43087 35 1.96357 35L101.034 35C101.567 35 101.999 34.5682 101.999 34.0355V1.96454Z M33.583 4.79803C33.583 4.26533 33.1512 3.8335 32.6185 3.8335L4.79755 3.8335C4.26485 3.8335 3.83301 4.26534 3.83301 4.79804L3.83301 31.2023C3.83301 31.735 4.26485 32.1668 4.79755 32.1668L32.6185 32.1668C33.1512 32.1668 33.583 31.735 33.583 31.2023L33.583 4.79803Z M98.749 4.96454C98.749 4.43184 98.3172 4 97.7845 4L69.9636 4C69.4309 4 68.999 4.43184 68.999 4.96454L68.999 31.3688C68.999 31.9015 69.4309 32.3333 69.9636 32.3333L97.7845 32.3333C98.3172 32.3333 98.749 31.9015 98.749 31.3688V4.96454Z M65.749 4.96454C65.749 4.43184 65.3172 4 64.7845 4L36.9636 4C36.4309 4 35.999 4.43184 35.999 4.96454L35.999 31.3688C35.999 31.9015 36.4309 32.3333 36.9636 32.3333L64.7845 32.3333C65.3172 32.3333 65.749 31.9015 65.749 31.3688V4.96454Z M26.499 18C26.499 22.6944 22.6934 26.5 17.999 26.5C13.3046 26.5 9.49902 22.6944 9.49902 18C9.49902 13.3056 13.3046 9.5 17.999 9.5C22.6934 9.5 26.499 13.3056 26.499 18Z M25.4365 18C25.4365 22.1076 22.1066 25.4375 17.999 25.4375C13.8914 25.4375 10.5615 22.1076 10.5615 18C10.5615 13.8924 13.8914 10.5625 17.999 10.5625C22.1066 10.5625 25.4365 13.8924 25.4365 18Z M25.0576 24.6826L24.682 25.0583L22.0017 22.378L22.3774 22.0024L25.0576 24.6826Z M13.9443 13.5698L13.5687 13.9455L10.8882 11.265L11.2639 10.8894L13.9443 13.5698Z M24.7861 11.0938L25.1618 11.4694L22.4815 14.1497L22.1059 13.774L24.7861 11.0938Z M13.7734 21.9844L14.1491 22.36L11.4688 25.0403L11.0932 24.6646L13.7734 21.9844Z M21.4521 18C21.4521 19.9071 19.9061 21.4531 17.999 21.4531C16.0919 21.4531 14.5459 19.9071 14.5459 18C14.5459 16.0929 16.0919 14.5469 17.999 14.5469C19.9061 14.5469 21.4521 16.0929 21.4521 18Z M91.665 18.1665C91.665 22.8609 87.8595 26.6665 83.165 26.6665C78.4706 26.6665 74.665 22.8609 74.665 18.1665C74.665 13.4721 78.4706 9.6665 83.165 9.6665C87.8595 9.6665 91.665 13.4721 91.665 18.1665Z M90.6025 18.1665C90.6025 22.2741 87.2727 25.604 83.165 25.604C79.0574 25.604 75.7275 22.2741 75.7275 18.1665C75.7275 14.0589 79.0574 10.729 83.165 10.729C87.2727 10.729 90.6025 14.0589 90.6025 18.1665Z M90.2236 24.8491L89.848 25.2248L87.1677 22.5445L87.5434 22.1689L90.2236 24.8491Z M79.1104 13.7363L78.7347 14.112L76.0542 11.4315L76.4299 11.0559L79.1104 13.7363Z M89.9521 11.2603L90.3278 11.6359L87.6475 14.3162L87.2719 13.9405L89.9521 11.2603Z M78.9404 22.1509L79.3161 22.5265L76.6358 25.2068L76.2602 24.8311L78.9404 22.1509Z M86.6182 18.1665C86.6182 20.0736 85.0721 21.6196 83.165 21.6196C81.2579 21.6196 79.7119 20.0736 79.7119 18.1665C79.7119 16.2594 81.2579 14.7134 83.165 14.7134C85.0721 14.7134 86.6182 16.2594 86.6182 18.1665Z M58.665 18.1665C58.665 22.8609 54.8595 26.6665 50.165 26.6665C45.4706 26.6665 41.665 22.8609 41.665 18.1665C41.665 13.4721 45.4706 9.6665 50.165 9.6665C54.8595 9.6665 58.665 13.4721 58.665 18.1665Z M57.6025 18.1665C57.6025 22.2741 54.2727 25.604 50.165 25.604C46.0574 25.604 42.7275 22.2741 42.7275 18.1665C42.7275 14.0589 46.0574 10.729 50.165 10.729C54.2727 10.729 57.6025 14.0589 57.6025 18.1665Z M57.2236 24.8491L56.848 25.2248L54.1677 22.5445L54.5434 22.1689L57.2236 24.8491Z M46.1104 13.7363L45.7347 14.112L43.0542 11.4315L43.4299 11.0559L46.1104 13.7363Z M56.9521 11.2603L57.3278 11.6359L54.6475 14.3162L54.2719 13.9405L56.9521 11.2603Z M45.9404 22.1509L46.3161 22.5265L43.6358 25.2068L43.2602 24.8311L45.9404 22.1509Z M53.6182 18.1665C53.6182 20.0736 52.0721 21.6196 50.165 21.6196C48.2579 21.6196 46.7119 20.0736 46.7119 18.1665C46.7119 16.2594 48.2579 14.7134 50.165 14.7134C52.0721 14.7134 53.6182 16.2594 53.6182 18.1665Z"}},{id:"Refrigerator",addInfo:"Refrigerator",dragSize:{width:30,height:30},shape:{type:"Path",data:"M1 8.58323H61V58.0356H1V8.58323Z M1 58.8332H61V63.6189C61 65.381 59.5716 66.8094 57.8095 66.8094H4.19048C2.42843 66.8094 1 65.381 1 63.6189V58.8332Z M57.0527 8.17857L4.158 8.17857L4.158 4.19047C4.158 2.42842 5.58642 1 7.34847 1L53.8623 1C55.6243 1 57.0527 2.42843 57.0527 4.19048V8.17857Z M1 8.58323V8.08323H0.5V8.58323H1ZM61 8.58323H61.5V8.08323H61V8.58323ZM61 58.0356V58.5356H61.5V58.0356H61ZM1 58.0356H0.5V58.5356H1V58.0356ZM1 58.8332V58.3332H0.5V58.8332H1ZM61 58.8332H61.5V58.3332H61V58.8332ZM6.52686 66.8094V66.3094H6.02686V66.8094H6.52686ZM16.79 66.8094H17.29V66.3094H16.79V66.8094ZM57.0527 8.17857V8.67857H57.5527V8.17857H57.0527ZM4.158 8.17857H3.658V8.67857H4.158V8.17857ZM53.8623 1V0.500004V1ZM57.0527 4.19048H56.5527H57.0527ZM4.158 4.19047H3.658H4.158ZM7.34847 1V1.5V1ZM1 9.08323H61V8.08323H1V9.08323ZM60.5 8.58323V58.0356H61.5V8.58323H60.5ZM61 57.5356H1V58.5356H61V57.5356ZM1.5 58.0356V8.58323H0.5V58.0356H1.5ZM1 59.3332H61V58.3332H1V59.3332ZM60.5 58.8332V63.6189H61.5V58.8332H60.5ZM57.8095 66.3094H4.19048V67.3094H57.8095V66.3094ZM1.5 63.6189V58.8332H0.5V63.6189H1.5ZM4.19048 66.3094C2.70457 66.3094 1.5 65.1049 1.5 63.6189H0.5C0.5 65.6571 2.15228 67.3094 4.19048 67.3094V66.3094ZM60.5 63.6189C60.5 65.1049 59.2954 66.3094 57.8095 66.3094V67.3094C59.8477 67.3094 61.5 65.6571 61.5 63.6189H60.5ZM6.52686 67.3094H16.79V66.3094H6.52686V67.3094ZM13.5995 69.4999H9.71733V70.4999H13.5995V69.4999ZM9.71733 69.4999C8.23142 69.4999 7.02686 68.2953 7.02686 66.8094H6.02686C6.02686 68.8476 7.67914 70.4999 9.71733 70.4999V69.4999ZM16.29 66.8094C16.29 68.2953 15.0854 69.4999 13.5995 69.4999V70.4999C15.6377 70.4999 17.29 68.8476 17.29 66.8094H16.29ZM57.0527 7.67857L4.158 7.67857V8.67857L57.0527 8.67857V7.67857ZM4.658 8.17857L4.658 4.19047H3.658L3.658 8.17857H4.658ZM7.34847 1.5L53.8623 1.5V0.500004L7.34847 0.5V1.5ZM56.5527 4.19048V8.17857H57.5527V4.19048H56.5527ZM53.8623 1.5C55.3482 1.5 56.5527 2.70457 56.5527 4.19048H57.5527C57.5527 2.15229 55.9005 0.500004 53.8623 0.500004V1.5ZM4.658 4.19047C4.658 2.70456 5.86256 1.5 7.34847 1.5V0.5C5.31028 0.5 3.658 2.15228 3.658 4.19047H4.658Z"}},{id:"WaterCooler",addInfo:"Water Cooler",dragSize:{width:30,height:30},shape:{type:"Path",data:"M49 1H3C1.89543 1 1 1.89543 1 3V49C1 50.1046 1.89543 51 3 51H49C50.1046 51 51 50.1046 51 49V3C51 1.89543 50.1046 1 49 1Z M47 26C47 37.598 37.598 47 26 47C14.402 47 5 37.598 5 26C5 14.402 14.402 5 26 5C37.598 5 47 14.402 47 26Z M30 26C30 28.2091 28.2091 30 26 30C23.7909 30 22 28.2091 22 26C22 23.7909 23.7909 22 26 22C28.2091 22 30 23.7909 30 26Z M49 1H3C1.89543 1 1 1.89543 1 3V49C1 50.1046 1.89543 51 3 51H49C50.1046 51 51 50.1046 51 49V3C51 1.89543 50.1046 1 49 1Z M47 26C47 37.598 37.598 47 26 47C14.402 47 5 37.598 5 26C5 14.402 14.402 5 26 5C37.598 5 47 14.402 47 26Z M30 26C30 28.2091 28.2091 30 26 30C23.7909 30 22 28.2091 22 26C22 23.7909 23.7909 22 26 22C28.2091 22 30 23.7909 30 26Z"}},{id:"DoubleSink",addInfo:"Double Sink",dragSize:{width:30,height:30},shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H115C119.418 1 123 4.58172 123 9V41C123 45.4183 119.418 49 115 49H9C4.58172 49 1 45.4183 1 41V9Z M7 13C7 10.7909 8.79086 9 11 9H55C57.2091 9 59 10.7909 59 13V37C59 39.2091 57.2091 41 55 41H11C8.79086 41 7 39.2091 7 37V13Z M65 13C65 10.7909 66.7909 9 69 9H113C115.209 9 117 10.7909 117 13V37C117 39.2091 115.209 41 113 41H69C66.7909 41 65 39.2091 65 37V13Z M35 25.5C35 26.8807 33.8807 28 32.5 28C31.1193 28 30 26.8807 30 25.5C30 24.1193 31.1193 23 32.5 23C33.8807 23 35 24.1193 35 25.5Z M93 25.5C93 26.8807 91.8807 28 90.5 28C89.1193 28 88 26.8807 88 25.5C88 24.1193 89.1193 23 90.5 23C91.8807 23 93 24.1193 93 25.5Z M64.3638 10.4863C64.3638 10.4863 65.071 10.4863 65.7781 9.77915C66.4852 9.07204 66.4852 8.36493 66.4852 8.36493L74.4865 15.2232C75.5104 16.1009 75.5705 17.6644 74.6169 18.618C73.6633 19.5716 72.0998 19.5115 71.2221 18.4876L64.3638 10.4863Z M65.4246 4.47532C66.7915 5.84216 66.7915 8.05823 65.4246 9.42507C64.0578 10.7919 61.8417 10.7919 60.4749 9.42507C59.108 8.05823 59.108 5.84216 60.4749 4.47532C61.8417 3.10849 64.0578 3.10849 65.4246 4.47532Z"}}],iP=[{id:"Toilet1",addInfo:"Toilet",dragSize:{width:30,height:30},shape:{type:"Path",data:"M46.4065 37.9425C46.4065 55.0951 36.823 69.0002 25.0011 69.0002C13.1792 69.0002 3.5957 55.0951 3.5957 37.9425C3.5957 30.1141 5.2059 23.4623 8.5 18C8.61402 18 25 18 25 18H41.2425C44.5366 23.4623 46.4065 30.1141 46.4065 37.9425Z M41.2161 43.5006C41.2161 53.9728 33.9559 62.4621 24.9999 62.4621C16.0439 62.4621 8.78369 53.9728 8.78369 43.5006C8.78369 33.0284 16.0439 24.5391 24.9999 24.5391C33.9559 24.5391 41.2161 33.0284 41.2161 43.5006Z M1 3.61538C1 2.17095 2.17095 1 3.61538 1H46.3846C47.8291 1 49 2.17095 49 3.61538V15.3846C49 16.8291 47.8291 18 46.3846 18H3.61538C2.17095 18 1 16.8291 1 15.3846V3.61538Z M26.9995 9C26.9995 10.1046 26.1041 11 24.9995 11C23.8949 11 22.9995 10.1046 22.9995 9C22.9995 7.89543 23.8949 7 24.9995 7C26.1041 7 26.9995 7.89543 26.9995 9Z M31 33C31 37.4183 28.3137 41 25 41C21.6863 41 19 37.4183 19 33C19 28.5817 21.6863 25 25 25C28.3137 25 31 28.5817 31 33Z "}},{id:"Toilet2",addInfo:"Toilet",dragSize:{width:30,height:30},shape:{type:"Path",data:"M46.989 33.0731C46.989 53.4671 37.3818 69.9996 25.5307 69.9996C13.6795 69.9996 4.07227 53.4671 4.07227 33.0731C4.07227 19.1497 4 18 4 18C4.17549 18.0144 15.9306 18.2553 26.5002 17.9993C36.1582 17.7654 46.989 17.9999 46.989 17.9999C46.989 17.9999 46.989 21.6119 46.989 33.0731Z M41 44.5C41 54.7173 34.0604 63 25.5 63C16.9396 63 10 54.7173 10 44.5C10 34.2827 16.9396 26 25.5 26C34.0604 26 41 34.2827 41 44.5Z M1 3.61538C1 2.17095 2.17095 1 3.61538 1H46.3846C47.8291 1 49 2.17095 49 3.61538V15.3846C49 16.8291 47.8291 18 46.3846 18H3.61538C2.17095 18 1 16.8291 1 15.3846V3.61538Z M26.9995 9C26.9995 10.1046 26.1041 11 24.9995 11C23.8949 11 22.9995 10.1046 22.9995 9C22.9995 7.89543 23.8949 7 24.9995 7C26.1041 7 26.9995 7.89543 26.9995 9Z M31 34C31 38.4183 28.3137 42 25 42C21.6863 42 19 38.4183 19 34C19 29.5817 21.6863 26 25 26C28.3137 26 31 29.5817 31 34Z"}},{id:"Shower",addInfo:"Shower",dragSize:{width:30,height:30},shape:{type:"Path",data:"M6.70817 7.37289L45.3371 42.6307M44.3387 7.36777L6.33874 42.3678M23.3536 22.8447L28.3536 27.8447M28.3641 22.5409L23.3641 27.8532M1 1L45 1.19812V7.19812H6.17647V42.1981H45V49H1V1ZM32 25.1982C32 28.512 29.3137 31.1982 26 31.1982C22.6863 31.1982 20 28.512 20 25.1982C20 21.8845 22.6863 19.1982 26 19.1982C29.3137 19.1982 32 21.8845 32 25.1982ZM29.75 25.1982C29.75 27.2693 28.0711 28.9482 26 28.9482C23.9289 28.9482 22.25 27.2693 22.25 25.1982C22.25 23.1272 23.9289 21.4482 26 21.4482C28.0711 21.4482 29.75 23.1272 29.75 25.1982ZM27.5 25.1982C27.5 26.0267 26.8284 26.6982 26 26.6982C25.1716 26.6982 24.5 26.0267 24.5 25.1982C24.5 24.3698 25.1716 23.6982 26 23.6982C26.8284 23.6982 27.5 24.3698 27.5 25.1982Z"}},{id:"CornerShower",addInfo:"Corner Shower",dragSize:{width:30,height:30},shape:{type:"Path",data:"M7.46424 6.8143L15.4642 26.8143M23.1506 36.5232L42.1506 42.5232M14.3536 35.3536L7.35355 42.3536M31.4327 7.25052L20.4327 26.2505M42.1411 26.4797L25.1411 31.4797M16.5984 29.3311L21.749 34.1759M21.3641 29.3427L16.3641 34.6549M1 1H32.0332V7H7.03382V43L42.0338 42.9219V26H48.0338V49.1981H1.03382L1 1ZM25 32C25 35.3137 22.3137 38 19 38C15.6863 38 13 35.3137 13 32C13 28.6863 15.6863 26 19 26C22.3137 26 25 28.6863 25 32ZM22.75 32C22.75 34.0711 21.0711 35.75 19 35.75C16.9289 35.75 15.25 34.0711 15.25 32C15.25 29.9289 16.9289 28.25 19 28.25C21.0711 28.25 22.75 29.9289 22.75 32ZM20 32C20 32.5523 19.5523 33 19 33C18.4477 33 18 32.5523 18 32C18 31.4477 18.4477 31 19 31C19.5523 31 20 31.4477 20 32Z"}},{id:"WashBasin3",addInfo:"Wash Basin",dragSize:{width:30,height:30},shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H57C61.4183 1 65 4.58172 65 9V41C65 45.4183 61.4183 49 57 49H9C4.58172 49 1 45.4183 1 41V9Z M7 13C7 10.7909 8.79086 9 11 9H55C57.2091 9 59 10.7909 59 13V37C59 39.2091 57.2091 41 55 41H11C8.79086 41 7 39.2091 7 37V13Z M35 25.5C35 26.8807 33.8807 28 32.5 28C31.1193 28 30 26.8807 30 25.5C30 24.1193 31.1193 23 32.5 23C33.8807 23 35 24.1193 35 25.5Z M31.7433 9.05588C31.7433 9.05588 32.3556 9.40943 33.3216 9.15061C34.2875 8.89179 34.641 8.27942 34.641 8.27942L38.1413 18.2196C38.5892 19.4916 37.8594 20.8757 36.5568 21.2247C35.2542 21.5737 33.9302 20.7399 33.6821 19.4144L31.7433 9.05588Z M35.6673 4.38071C36.1676 6.24784 35.0596 8.16702 33.1925 8.66732C31.3253 9.16762 29.4062 8.05958 28.9059 6.19245C28.4056 4.32532 29.5136 2.40614 31.3807 1.90584C33.2479 1.40554 35.1671 2.51358 35.6673 4.38071Z"}},{id:"WashBasin2",addInfo:"Wash Basin",dragSize:{width:30,height:30},shape:{type:"Path",data:"M1 4C1 2.34315 2.34315 1 4 1H62C63.6569 1 65 2.34315 65 4V25C65 38.2548 54.2548 49 41 49H25C11.7452 49 1 38.2548 1 25V4Z M57 25C57 33.2843 46.2548 40 33 40C19.7452 40 9 33.2843 9 25C9 16.7157 19.7452 10 33 10C46.2548 10 57 16.7157 57 25Z M31 10C31 10 31.5 10.5 32.5 10.5C33.5 10.5 34 10 34 10L34.8083 20.5074C34.9117 21.8519 33.8486 23 32.5 23C31.1514 23 30.0883 21.8519 30.1917 20.5074L31 10Z M36 6.5C36 8.433 34.433 10 32.5 10C30.567 10 29 8.433 29 6.5C29 4.567 30.567 3 32.5 3C34.433 3 36 4.567 36 6.5Z M35 28.5C35 29.8807 33.8807 31 32.5 31C31.1193 31 30 29.8807 30 28.5C30 27.1193 31.1193 26 32.5 26C33.8807 26 35 27.1193 35 28.5Z"}},{id:"WashBasin5",addInfo:"Wash Basin",dragSize:{width:30,height:30},shape:{type:"Path",data:"M35 30.5C35 31.8807 33.8807 33 32.5 33C31.1193 33 30 31.8807 30 30.5C30 29.1193 31.1193 28 32.5 28C33.8807 28 35 29.1193 35 30.5Z M1 16C1 7.71573 7.71573 1 16 1H50C58.2843 1 65 7.71573 65 16V25C65 38.2548 54.2548 49 41 49H25C11.7452 49 1 38.2548 1 25V16Z M8 19C8 14.5817 11.5817 11 16 11H50C54.4183 11 58 14.5817 58 19V29C58 37.8366 50.8366 45 42 45H24C15.1634 45 8 37.8366 8 29V19Z M32.7433 11.0559C32.7433 11.0559 33.3556 11.4094 34.3216 11.1506C35.2875 10.8918 35.641 10.2794 35.641 10.2794L39.1413 20.2196C39.5892 21.4916 38.8594 22.8757 37.5568 23.2247C36.2542 23.5737 34.9302 22.7399 34.6821 21.4144L32.7433 11.0559Z M36.6673 6.38077C37.1676 8.24791 36.0596 10.1671 34.1925 10.6674C32.3253 11.1677 30.4062 10.0596 29.9059 8.19251C29.4056 6.32538 30.5136 4.4062 32.3807 3.9059C34.2479 3.4056 36.1671 4.51364 36.6673 6.38077Z"}},{id:"WashBasin6",addInfo:"Wash Basin",dragSize:{width:30,height:30},shape:{type:"Path",data:"M35.0001 28.5C35.0001 29.8807 33.8808 31 32.5001 31C31.1194 31 30.0001 29.8807 30.0001 28.5C30.0001 27.1193 31.1194 26 32.5001 26C33.8808 26 35.0001 27.1193 35.0001 28.5Z M1.28589 13.2859C1.09596 12.4312 0.977151 11.5551 1.06632 10.6841C1.66875 4.79991 6.32194 1 12.5001 1H52.5001C58.5423 1 63.5414 4.63437 64.3773 10.2983C64.5425 11.4183 64.3399 12.5518 64.0243 13.639L62.3952 19.2503C60.8466 24.5844 62.0419 30.3056 61.6763 35.8479C61.1084 44.4589 52.314 49 42.0001 49H21.0001C10.0687 49 2.8847 41.5184 2.94574 31.8839C2.97267 27.6322 3.51411 23.3129 2.59178 19.1624L1.28589 13.2859Z M8.00013 19C8.00013 14.5817 11.5819 11 16.0001 11H49.0001C53.4184 11 57.0001 14.5817 57.0001 19V29C57.0001 37.8366 49.8367 45 41.0001 45H24.0001C15.1636 45 8.00013 37.8366 8.00013 29V19Z M31.7434 11.0559C31.7434 11.0559 32.3558 11.4094 33.3217 11.1506C34.2876 10.8918 34.6412 10.2794 34.6412 10.2794L38.1414 20.2196C38.5893 21.4916 37.8595 22.8757 36.5569 23.2247C35.2543 23.5737 33.9303 22.7399 33.6822 21.4144L31.7434 11.0559Z M35.6675 6.38077C36.1678 8.24791 35.0597 10.1671 33.1926 10.6674C31.3255 11.1677 29.4063 10.0596 28.906 8.19251C28.4057 6.32538 29.5137 4.4062 31.3809 3.9059C33.248 3.4056 35.1672 4.51364 35.6675 6.38077Z"}},{id:"WashBasin1",addInfo:"Wash Basin",dragSize:{width:30,height:30},shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H57C61.4183 1 65 4.58172 65 9V41C65 45.4183 61.4183 49 57 49H9C4.58172 49 1 45.4183 1 41V9Z M7 13C7 10.7909 8.79086 9 11 9H55C57.2091 9 59 10.7909 59 13V37C59 39.2091 57.2091 41 55 41H11C8.79086 41 7 39.2091 7 37V13Z M35 25.5C35 26.8807 33.8807 28 32.5 28C31.1193 28 30 26.8807 30 25.5C30 24.1193 31.1193 23 32.5 23C33.8807 23 35 24.1193 35 25.5Z M31 9C31 9 31.5 9.5 32.5 9.5C33.5 9.5 34 9 34 9L34.8083 19.5074C34.9117 20.8519 33.8486 22 32.5 22C31.1514 22 30.0883 20.8519 30.1917 19.5074L31 9Z M36 5.5C36 7.433 34.433 9 32.5 9C30.567 9 29 7.433 29 5.5C29 3.567 30.567 2 32.5 2C34.433 2 36 3.567 36 5.5Z"}},{id:"DoubleSink4",addInfo:"Sink",dragSize:{width:30,height:30},shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H115C119.418 1 123 4.58172 123 9V41C123 45.4183 119.418 49 115 49H9C4.58172 49 1 45.4183 1 41V9Z M7 13C7 10.7909 8.79086 9 11 9H55C57.2091 9 59 10.7909 59 13V37C59 39.2091 57.2091 41 55 41H11C8.79086 41 7 39.2091 7 37V13Z M65 13C65 10.7909 66.7909 9 69 9H113C115.209 9 117 10.7909 117 13V37C117 39.2091 115.209 41 113 41H69C66.7909 41 65 39.2091 65 37V13Z M35 25.5C35 26.8807 33.8807 28 32.5 28C31.1193 28 30 26.8807 30 25.5C30 24.1193 31.1193 23 32.5 23C33.8807 23 35 24.1193 35 25.5Z M93 25.5C93 26.8807 91.8807 28 90.5 28C89.1193 28 88 26.8807 88 25.5C88 24.1193 89.1193 23 90.5 23C91.8807 23 93 24.1193 93 25.5Z M64.3638 10.4863C64.3638 10.4863 65.071 10.4863 65.7781 9.77915C66.4852 9.07204 66.4852 8.36493 66.4852 8.36493L74.4865 15.2232C75.5104 16.1009 75.5705 17.6644 74.6169 18.618C73.6633 19.5716 72.0998 19.5115 71.2221 18.4876L64.3638 10.4863Z M65.4246 4.47532C66.7915 5.84216 66.7915 8.05823 65.4246 9.42507C64.0578 10.7919 61.8417 10.7919 60.4749 9.42507C59.108 8.05823 59.108 5.84216 60.4749 4.47532C61.8417 3.10849 64.0578 3.10849 65.4246 4.47532Z"}},{id:"DoubleSink1",addInfo:"Sink",dragSize:{width:30,height:30},shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H115C119.418 1 123 4.58172 123 9V41C123 45.4183 119.418 49 115 49H9C4.58172 49 1 45.4183 1 41V9Z M7 13C7 10.7909 8.79086 9 11 9H55C57.2091 9 59 10.7909 59 13V37C59 39.2091 57.2091 41 55 41H11C8.79086 41 7 39.2091 7 37V13Z M65 13C65 10.7909 66.7909 9 69 9H113C115.209 9 117 10.7909 117 13V37C117 39.2091 115.209 41 113 41H69C66.7909 41 65 39.2091 65 37V13Z M35 27.5C35 28.8807 33.8807 30 32.5 30C31.1193 30 30 28.8807 30 27.5C30 26.1193 31.1193 25 32.5 25C33.8807 25 35 26.1193 35 27.5Z M93 27.5C93 28.8807 91.8807 30 90.5 30C89.1193 30 88 28.8807 88 27.5C88 26.1193 89.1193 25 90.5 25C91.8807 25 93 26.1193 93 27.5Z M30.9995 9C30.9995 9 31.4995 9.5 32.4995 9.5C33.4995 9.5 33.9995 9 33.9995 9L34.8078 19.5074C34.9112 20.8519 33.8481 22 32.4995 22C31.151 22 30.0878 20.8519 30.1913 19.5074L30.9995 9Z M88.9995 9C88.9995 9 89.4995 9.5 90.4995 9.5C91.4995 9.5 91.9995 9 91.9995 9L92.8078 19.5074C92.9112 20.8519 91.8481 22 90.4995 22C89.151 22 88.0878 20.8519 88.1913 19.5074L88.9995 9Z M36 5.5C36 7.433 34.433 9 32.5 9C30.567 9 29 7.433 29 5.5C29 3.567 30.567 2 32.5 2C34.433 2 36 3.567 36 5.5Z M94 5.5C94 7.433 92.433 9 90.5 9C88.567 9 87 7.433 87 5.5C87 3.567 88.567 2 90.5 2C92.433 2 94 3.567 94 5.5Z"}},{id:"DoubleSink2",addInfo:"Sink",dragSize:{width:30,height:30},shape:{type:"Path",data:"M31 10C31 10 31.5 10.5 32.5 10.5C33.5 10.5 34 10 34 10L34.8083 20.5074C34.9117 21.8519 33.8486 23 32.5 23C31.1514 23 30.0883 21.8519 30.1917 20.5074L31 10Z M36 6.5C36 8.433 34.433 10 32.5 10C30.567 10 29 8.433 29 6.5C29 4.567 30.567 3 32.5 3C34.433 3 36 4.567 36 6.5Z M92 10C92 10 92.5 10.5 93.5 10.5C94.5 10.5 95 10 95 10L95.8083 20.5074C95.9117 21.8519 94.8486 23 93.5 23C92.1514 23 91.0883 21.8519 91.1917 20.5074L92 10Z M97 6.5C97 8.433 95.433 10 93.5 10C91.567 10 90 8.433 90 6.5C90 4.567 91.567 3 93.5 3C95.433 3 97 4.567 97 6.5Z M1 9C1 4.58172 4.58172 1 9 1H115C119.418 1 123 4.58172 123 9V42C123 46.4183 119.418 50 115 50H9C4.58172 50 1 46.4183 1 42V9Z M6 26C6 17.1634 13.1634 10 22 10H42C50.8366 10 58 17.1634 58 26C58 34.8366 50.8366 42 42 42H22C13.1634 42 6 34.8366 6 26Z M67 26C67 17.1634 74.1634 10 83 10H103C111.837 10 119 17.1634 119 26C119 34.8366 111.837 42 103 42H83C74.1634 42 67 34.8366 67 26Z M35 27.5C35 28.8807 33.8807 30 32.5 30C31.1193 30 30 28.8807 30 27.5C30 26.1193 31.1193 25 32.5 25C33.8807 25 35 26.1193 35 27.5Z M96 27.5C96 28.8807 94.8807 30 93.5 30C92.1193 30 91 28.8807 91 27.5C91 26.1193 92.1193 25 93.5 25C94.8807 25 96 26.1193 96 27.5Z"}},{id:"BathTub",addInfo:"Bath Tub",dragSize:{width:50,height:30},shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H84C88.4183 1 92 4.58172 92 9V40C92 44.4183 88.4183 48 84 48H9C4.58172 48 1 44.4183 1 40V9Z M12 24.5C12 14.2827 20.2827 6 30.5 6H61.5C71.7173 6 80 14.2827 80 24.5C80 34.7173 71.7173 43 61.5 43H30.5C20.2827 43 12 34.7173 12 24.5Z M11.5 26.5C11.5 26.5 12 26 12 25C12 24 11.5 23.5 11.5 23.5L22.0074 22.6917C23.3519 22.5883 24.5 23.6514 24.5 25C24.5 26.3486 23.3519 27.4117 22.0074 27.3083L11.5 26.5Z M8 21.5C9.933 21.5 11.5 23.067 11.5 25C11.5 26.933 9.933 28.5 8 28.5C6.067 28.5 4.5 26.933 4.5 25C4.5 23.067 6.067 21.5 8 21.5Z"}},{id:"BathTub1",addInfo:"Bath Tub",dragSize:{width:50,height:30},shape:{type:"Path",data:"M1 24.5C1 11.5213 11.5213 1 24.5 1H68.5C81.4787 1 92 11.5213 92 24.5C92 37.4787 81.4787 48 68.5 48H24.5C11.5213 48 1 37.4787 1 24.5Z M9 24.5C9 14.7042 17.6278 7.15038 27.3377 8.44503L43.262 10.5683C45.4112 10.8548 47.5888 10.8548 49.738 10.5683L65.6623 8.44503C75.3722 7.15038 84 14.7042 84 24.5C84 34.2958 75.3722 41.8496 65.6623 40.555L49.738 38.4317C47.5888 38.1452 45.4112 38.1452 43.262 38.4317L27.3377 40.555C17.6278 41.8496 9 34.2958 9 24.5Z M18 24.5C18 18.701 22.701 14 28.5 14H62.5C68.299 14 73 18.701 73 24.5C73 30.299 68.299 35 62.5 35H28.5C22.701 35 18 30.299 18 24.5Z"}},{id:"BathTub2",addInfo:"Bath Tub",dragSize:{width:50,height:30},shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H84C88.4183 1 92 4.58172 92 9V40C92 44.4183 88.4183 48 84 48H9C4.58172 48 1 44.4183 1 40V9Z M12 11C12 8.23858 14.2386 6 17 6H75C77.7614 6 80 8.23858 80 11V38C80 40.7614 77.7614 43 75 43H17C14.2386 43 12 40.7614 12 38V11Z M11.5 26.5C11.5 26.5 12 26 12 25C12 24 11.5 23.5 11.5 23.5L22.0074 22.6917C23.3519 22.5883 24.5 23.6514 24.5 25C24.5 26.3486 23.3519 27.4117 22.0074 27.3083L11.5 26.5Z M8 21.5C9.933 21.5 11.5 23.067 11.5 25C11.5 26.933 9.933 28.5 8 28.5C6.067 28.5 4.5 26.933 4.5 25C4.5 23.067 6.067 21.5 8 21.5Z"}},{id:"BathTub3",addInfo:"Bath Tub",dragSize:{width:50,height:30},shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H84C88.4183 1 92 4.58172 92 9V40C92 44.4183 88.4183 48 84 48H9C4.58172 48 1 44.4183 1 40V9Z M12 8C12 6.89543 12.8954 6 14 6H61.5C71.7173 6 80 14.2827 80 24.5C80 34.7173 71.7173 43 61.5 43H14C12.8954 43 12 42.1046 12 41V8Z M11.5 26.5C11.5 26.5 12 26 12 25C12 24 11.5 23.5 11.5 23.5L22.0074 22.6917C23.3519 22.5883 24.5 23.6514 24.5 25C24.5 26.3486 23.3519 27.4117 22.0074 27.3083L11.5 26.5Z M8 21.5C9.933 21.5 11.5 23.067 11.5 25C11.5 26.933 9.933 28.5 8 28.5C6.067 28.5 4.5 26.933 4.5 25C4.5 23.067 6.067 21.5 8 21.5Z"}}];class nP{constructor(){this.fileFormats=[{text:"JPG",value:"JPG"},{text:"PNG",value:"PNG"},{text:"SVG",value:"SVG"}],this.diagramRegions=[{text:"Content",value:"Content"}],this.borderStyles=[{text:"None",value:"None",className:"ddl-svg-style ddl_linestyle_none"},{text:"1,2",value:"1,2",className:"ddl-svg-style ddl_linestyle_one_two"},{text:"3,3",value:"3,3",className:"ddl-svg-style ddl_linestyle_three_three"},{text:"5,3",value:"5,3",className:"ddl-svg-style ddl_linestyle_five_three"},{text:"4,4,1",value:"4,4,1",className:"ddl-svg-style ddl_linestyle_four_four_one"}],this.fontFamilyList=[{text:"Arial",value:"Arial"},{text:"Aharoni",value:"Aharoni"},{text:"Bell MT",value:"Bell MT"},{text:"Fantasy",value:"Fantasy"},{text:"Times New Roman",value:"Times New Roman"},{text:"Segoe UI",value:"Segoe UI"},{text:"Verdana",value:"Verdana"}],this.zoomMenuItems=[{text:"Zoom In"},{text:"Zoom Out"},{text:"Zoom to Fit"},{text:"Zoom to 50%"},{text:"Zoom to 100%"},{text:"Zoom to 200%"}],this.paperList=[{text:"Letter (8.5 in x 11 in)",value:"Letter"},{text:"Legal (8.5 in x 14 in)",value:"Legal"},{text:"Tabloid (279 mm x 432 mm)",value:"Tabloid"},{text:"A3 (297 mm x 420 mm)",value:"A3"},{text:"A4 (210 mm x 297 mm)",value:"A4"},{text:"A5 (148 mm x 210 mm)",value:"A5"},{text:"A6 (105 mm x 148 mm)",value:"A6"},{text:"Custom",value:"Custom"}]}}class sP{constructor(){this.pageWidth=0,this.pageHeight=0}}class rP{constructor(){this.fillColorCode=["#C4F2E8","#F7E0B3","#E5FEE4","#E9D4F1","#D4EFED","#DEE2FF"],this.borderColorCode=["#8BC1B7","#E2C180","#ACCBAA","#D1AFDF","#90C8C2","#BBBFD6"],this.tempDialog=void 0,this.toolbarEditor=void 0}bindNodeProperties(t,e){e.preventPropertyChange=!0,e.nodeProperties.offsetX.value=Math.round(100*t.offsetX)/100,e.nodeProperties.offsetY.value=Math.round(100*t.offsetY)/100,e.nodeProperties.width.value=t.width?Math.round(100*t.width)/100:Math.round(100*t.minWidth)/100,e.nodeProperties.height.value=t.height?Math.round(100*t.height)/100:Math.round(100*t.minHeight)/100,e.nodeProperties.rotateAngle.value=t.rotateAngle,e.nodeProperties.strokeColor.value=this.getHexColor(t.style.strokeColor),e.nodeProperties.strokeStyle.value=t.style.strokeDashArray?t.style.strokeDashArray:"None",e.nodeProperties.strokeWidth.value=t.style.strokeWidth,e.nodeProperties.fillColor.value=this.getHexColor(t.style.fill),e.nodeProperties.opacity.value=100*t.style.opacity,e.nodeProperties.opacityText=e.nodeProperties.opacity.value+"%";let i=document.getElementById("aspectRatioBtn").ej2_instances[0];t.constraints&ps.AspectRatio?document.getElementById("aspectRatioBtn").classList.add("e-active"):document.getElementById("aspectRatioBtn").classList.remove("e-active"),t.constraints&ps.AspectRatio?i.iconCss="sf-icon-lock":i.iconCss="sf-icon-unlock",e.nodeProperties.gradient="None"!==t.style.gradient.type,e.preventPropertyChange=!1}bindTextProperties(t,e){e.preventPropertyChange=!0,e.textProperties.fontColor.value=this.getHexColor(t.color),e.textProperties.fontFamily.value=t.fontFamily,e.textProperties.fontSize.value=t.fontSize,e.textProperties.opacity.value=100*t.opacity,e.textProperties.opacityText=e.textProperties.opacity+"%";let i=document.getElementById("toolbarTextStyle");i&&(i=i.ej2_instances[0]),i&&(i.items[0].cssClass=t.bold?"tb-item-start tb-item-selected":"tb-item-start",i.items[1].cssClass=t.italic?"tb-item-middle tb-item-selected":"tb-item-middle",i.items[2].cssClass="Underline"===t.textDecoration?"tb-item-end tb-item-selected":"tb-item-end"),this.updateTextAlign(t.textAlign),e.preventPropertyChange=!1}updateTextAlign(t){let e=document.getElementById("toolbarTextSubAlignment");if(e&&(e=e.ej2_instances[0]),e){for(let t=0;t<e.items.length;t++)e.items[t].cssClass=e.items[t].cssClass.replace(" tb-item-selected","");let i="Left"===t?0:"Center"===t?1:2;e.items[i].cssClass+=" tb-item-selected"}}updateHorVertAlign(t,e){let i=document.getElementById("toolbarTextAlignment");if(i&&(i=i.ej2_instances[0]),i){for(let t=0;t<i.items.length;t++)i.items[t].cssClass=i.items[t].cssClass.replace(" tb-item-selected","");let n="Right"===t?0:"Center"===t?1:2;i.items[n].cssClass+=" tb-item-selected",n="Top"===e?3:"Center"===e?4:5,i.items[n].cssClass+=" tb-item-selected"}}bindConnectorProperties(t,e){e.preventPropertyChange=!0,e.connectorProperties.lineColor.value=this.getHexColor(t.style.strokeColor),e.connectorProperties.lineWidth.value=t.style.strokeWidth,e.connectorProperties.opacity.value=100*t.style.opacity,e.connectorProperties.opacityText=e.connectorProperties.opacity+"%",e.preventPropertyChange=!1}getHexColor(t){let e=document.createElement("div");e.style.color=t;let i=window.getComputedStyle(document.body.appendChild(e)).color.match(/\d+/g).map(t=>parseInt(t,10));return document.body.removeChild(e),i.length>=3?"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).substr(1):""}getOffset(t){switch(t.toLowerCase()){case"topleft":return{x:0,y:0};case"topcenter":return{x:.5,y:0};case"topright":return{x:1,y:0};case"middleleft":return{x:0,y:.5};default:return{x:.5,y:.5};case"middleright":return{x:1,y:.5};case"bottomleft":return{x:0,y:1};case"bottomcenter":return{x:.5,y:1};case"bottomright":return{x:1,y:1}}}getPosition(t){return 0===t.x&&0===t.y?"TopLeft":.5===t.x&&0===t.y?"TopCenter":1===t.x&&0===t.y?"TopRight":0===t.x&&.5===t.y?"MiddleLeft":1===t.x&&.5===t.y?"MiddleRight":0===t.x&&1===t.y?"BottomLeft":.5===t.x&&1===t.y?"BottomCenter":1===t.x&&1===t.y?"BottomRight":"Center"}hideElements(t,e){const i=document.getElementsByClassName("diagrambuilder-container")[0];i.classList.contains(t)?(i.classList.remove(t),document.getElementById("hideProperty").style.backgroundColor="",document.getElementById("hideProperty").style.color="#fff",document.getElementById("hideProperty").ej2_instances[0].isPrimary=!0):(i.classList.add(t),document.getElementById("hideProperty").style.backgroundColor="#e3e3e3",document.getElementById("hideProperty").style.color="black",document.getElementById("hideProperty").ej2_instances[0].isPrimary=!1),e&&e.updateViewPort()}objectTypeChange(t){switch(document.getElementById("diagramPropertyContainer").style.display="none",document.getElementById("nodePropertyContainer").style.display="none",document.getElementById("textPropertyContainer").style.display="none",document.getElementById("connectorPropertyContainer").style.display="none",t){case"diagram":document.getElementById("diagramPropertyContainer").style.display="";break;case"node":document.getElementById("nodePropertyContainer").style.display="";break;case"connector":document.getElementById("connectorPropertyContainer").style.display=""}}enableToolbarItems(t){let e=document.getElementsByClassName("db-toolbar-container")[0],i="db-toolbar-container";if(e.classList.contains("db-undo")&&(i+=" db-undo"),e.classList.contains("db-redo")&&(i+=" db-redo"),e.className=i,1===t.length?(e.className=e.className+" db-select",t[0]instanceof Ny&&(t[0].children?t[0].children.length>2?e.className="".concat(e.className," db-select db-double db-multiple db-node db-group"):e.className="".concat(e.className," db-select db-double db-node db-group"):e.className="".concat(e.className," db-select db-node"))):2===t.length?e.className="".concat(e.className," db-select db-double"):t.length>2&&(e.className="".concat(e.className," db-select db-double db-multiple")),t.length>1)for(let i=0;i<t.length;i++)if(t[i]instanceof Ny){e.className="".concat(e.className," db-select db-node");break}}enableArrangeMenuItems(t){let e=document.getElementById("arrangeContextMenu").ej2_instances[0];for(let t=0;t<e.items.length;t++)e.enableItems([e.items[t].text],!1)}enableMenuItems(t,e){if(e&&e.selectedDiagram){var i=e.selectedDiagram;let s=e.selectedDiagram.selectedItems.nodes;if(s=s.concat(e.selectedDiagram.selectedItems.connectors),t){var n=t.replace(/[' ']/g,"");if(0===s.length)switch(n.toLowerCase()){case"cut":case"copy":case"delete":return!0}if((void 0===i.commandHandler.clipboardData.pasteIndex||void 0===i.commandHandler.clipboardData.clipObject)&&"Paste"===t)return!0;if("Undo"===t&&0===e.selectedDiagram.historyManager.undoStack.length)return!0;if("Redo"===t&&0===e.selectedDiagram.historyManager.redoStack.length)return!0}}return!1}getPaperSize(t){let e=new sP;switch(t){case"Letter":e.pageWidth=816,e.pageHeight=1056;break;case"Legal":e.pageWidth=816,e.pageHeight=1344;break;case"Tabloid":e.pageWidth=1056,e.pageHeight=1632;break;case"A3":e.pageWidth=1122,e.pageHeight=1587;break;case"A4":e.pageWidth=793,e.pageHeight=1122;break;case"A5":e.pageWidth=559,e.pageHeight=793;break;case"A6":e.pageWidth=396,e.pageHeight=559}return e}removeSelectedToolbarItem(){let t=document.getElementById("toolbarEditor").ej2_instances[0];for(var e=0;e<t.items.length;e++){var i=t.items[e];-1!==i.cssClass.indexOf("tb-item-selected")&&(i.cssClass=i.cssClass.replace(" tb-item-selected",""))}t.dataBind()}showColorPicker(t,e){const i=document.getElementById(t).parentElement.querySelector(".e-dropdown-btn");if(i){i.click();const t=document.getElementById("".concat(i.id,"-popup")),n=document.querySelector(".".concat(e)).getBoundingClientRect();t.style.left="".concat(n.left,"px"),t.style.top="".concat(n.top+40,"px")}}}class oP{constructor(){this.opacityText="100%",this.tooltip="",this.mOffsetX=0,this.mOffsetY=0,this.mWidth=0,this.mHeight=0,this.mRotateAngle=0,this.mFillColor="#ffffff",this.mStrokeColor="#000000",this.mStrokeStyle="None",this.mStrokeWidth=0,this.mOpacity=0,this.mAspectRatio=!1,this.mGradient=!1,this.mGradientDirection="BottomToTop",this.mGradientColor="#ffffff"}get offsetX(){return this.mOffsetX}set offsetX(t){this.mOffsetX!==t&&(this.mOffsetX=t,this.triggerPropertyChange("offsetX",t))}get offsetY(){return this.mOffsetY}set offsetY(t){this.mOffsetY!==t&&(this.mOffsetY=t,this.triggerPropertyChange("offsetY",t))}get width(){return this.mWidth}set width(t){this.mWidth!==t&&(this.mWidth=t||3,this.triggerPropertyChange("width",t))}get height(){return this.mHeight}set height(t){this.mHeight!==t&&(this.mHeight=t||3,this.triggerPropertyChange("height",t))}get rotateAngle(){return this.mRotateAngle}set rotateAngle(t){this.mRotateAngle!==t&&(this.mRotateAngle=t,this.triggerPropertyChange("rotateAngle",t))}get fillColor(){return this.mFillColor}set fillColor(t){this.mFillColor!==t&&(this.mFillColor=t,this.triggerPropertyChange("fillColor",t))}get strokeColor(){return this.mStrokeColor}set strokeColor(t){this.mStrokeColor!==t&&(this.mStrokeColor=t,this.triggerPropertyChange("strokeColor",t))}get strokeStyle(){return this.mStrokeStyle}set strokeStyle(t){this.mStrokeStyle!==t&&(this.mStrokeStyle=t,this.triggerPropertyChange("strokeStyle",t))}get strokeWidth(){return this.mStrokeWidth}set strokeWidth(t){this.mStrokeWidth!==t&&(this.mStrokeWidth=t,this.triggerPropertyChange("strokeWidth",t))}get opacity(){return this.mOpacity}set opacity(t){this.mOpacity!==t&&(this.mOpacity=t,this.triggerPropertyChange("opacity",t))}get aspectRatio(){return this.mAspectRatio}set aspectRatio(t){this.mAspectRatio!==t&&(this.mAspectRatio=t,this.triggerPropertyChange("aspectRatio",t))}get gradient(){return this.mGradient}set gradient(t){if(this.mGradient!==t){this.mGradient=t;const e=document.getElementById("gradientStyle");e.className=t?"row db-prop-row db-gradient-style-show":"row db-prop-row db-gradient-style-hide",this.triggerPropertyChange("gradient",t)}}get gradientDirection(){return this.mGradientDirection}set gradientDirection(t){this.mGradientDirection!==t&&(this.mGradientDirection=t,this.triggerPropertyChange("gradient",!0))}get gradientColor(){return this.mGradientColor}set gradientColor(t){this.mGradientColor!==t&&(this.mGradientColor=t,this.triggerPropertyChange("gradient",!0))}triggerPropertyChange(t,e){y(this.propertyChange)||this.propertyChange.call(this,{propertyName:t,propertyValue:e})}getGradient(t){const e=this.getGradientDirectionValue(this.gradientDirection.value);t.style.gradient={type:"Linear",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,stops:[{color:t.style.fill,offset:0},{color:this.getColor(this.mGradientColor),offset:1}]}}getGradientDirectionValue(t){let e={},i=0,n=0,s=0,r=0;return"Left To Right"===t?i=100:"Bottom To Top"===t?r=100:"Right To Left"===t?n=100:s=100,e={x1:i,y1:s,x2:n,y2:r},e}getColor(t){return window.navigator&&9===t.length?t.substring(0,7):t}}class aP{constructor(){this.opacityText="100%",this.mLineColor="#ffffff",this.opacityText=void 0,this.propertyChange=void 0}get lineColor(){return this.mLineColor}set lineColor(t){this.mLineColor!==t&&(this.mLineColor=t,this.triggerPropertyChange("lineColor",t))}get lineWidth(){return this.mLineWidth}set lineWidth(t){this.mLineWidth!==t&&(this.mLineWidth=t,this.triggerPropertyChange("lineWidth",t))}get lineStyle(){return this.mLineStyle}set lineStyle(t){this.mLineStyle!==t&&(this.mLineStyle=t,this.triggerPropertyChange("lineStyle",t))}get lineType(){return this.mLineType}set lineType(t){this.mLineType!==t&&(this.mLineType=t,this.triggerPropertyChange("lineType",t))}get lineJump(){return this.mLineJump}set lineJump(t){this.mLineJump!==t&&(this.mLineJump=t,document.getElementById("lineJumpSizeDiv").style.display=t?"":"none",this.triggerPropertyChange("lineJump",t))}get lineJumpSize(){return this.mLineJumpSize}set lineJumpSize(t){this.mLineJumpSize!==t&&(this.mLineJumpSize=t,this.triggerPropertyChange("lineJumpSize",t))}get sourceType(){return this.mSourceType}set sourceType(t){this.mSourceType!==t&&(this.mSourceType=t,this.triggerPropertyChange("sourceType",t))}get targetType(){return this.mTargetType}set targetType(t){this.mTargetType!==t&&(this.mTargetType=t,this.triggerPropertyChange("targetType",t))}get sourceSize(){return this.mSourceSize}set sourceSize(t){this.mSourceSize!==t&&(this.mSourceSize=t,this.triggerPropertyChange("sourceSize",t))}get targetSize(){return this.mTargetSize}set targetSize(t){this.mTargetSize!==t&&(this.mTargetSize=t,this.triggerPropertyChange("targetSize",t))}get opacity(){return this.mOpacity}set opacity(t){this.mOpacity!==t&&(this.mOpacity=t,this.triggerPropertyChange("opacity",t))}triggerPropertyChange(t,e){y(this.propertyChange)||this.propertyChange.call(this,{propertyName:t,propertyValue:e})}}class lP{constructor(){this.opacityText=void 0,this.textDecoration=void 0,this.bold=void 0,this.italic=void 0,this.textAlign=void 0,this.horizontalAlign=void 0,this.verticalAlign=void 0,this.propertyChange=void 0,this.textPositionDataSource=this.getNodeTextPositions(),this.mTextPosition="",this.mFontFamily="Arial",this.mFontColor="#000000"}get textPosition(){return this.mTextPosition}set textPosition(t){this.mTextPosition!==t&&(this.mTextPosition=t,this.triggerPropertyChange("textPosition",t))}get fontFamily(){return this.mFontFamily}set fontFamily(t){this.mFontFamily!==t&&(this.mFontFamily=t,this.triggerPropertyChange("fontFamily",t))}get fontSize(){return this.mFontSize}set fontSize(t){this.mFontSize!==t&&(this.mFontSize=t,this.triggerPropertyChange("fontSize",t))}get fontColor(){return this.mFontColor}set fontColor(t){this.mFontColor!==t&&(this.mFontColor=t,this.triggerPropertyChange("fontColor",t))}get opacity(){return this.mOpacity}set opacity(t){this.mOpacity!==t&&(this.mOpacity=t,this.triggerPropertyChange("opacity",t))}getNodeTextPositions(){return[{text:"TopLeft",value:"TopLeft"},{text:"TopCenter",value:"TopCenter"},{text:"TopRight",value:"TopRight"},{text:"MiddleLeft",value:"MiddleLeft"},{text:"Center",value:"Center"},{text:"MiddleRight",value:"MiddleRight"},{text:"BottomLeft",value:"BottomLeft"},{text:"BottomCenter",value:"BottomCenter"},{text:"BottomRight",value:"BottomRight"}]}getConnectorTextPositions(){return[{text:"Before",value:"Before"},{text:"Center",value:"Center"},{text:"After",value:"After"}]}triggerPropertyChange(t,e){y(this.propertyChange)||this.propertyChange.call(this,{propertyName:t,propertyValue:e})}}class hP{constructor(){this.mFileName="Diagram",this.mFormat="JPG",this.mRegion="Content"}get fileName(){return this.mFileName}set fileName(t){this.mFileName=t}get format(){return this.mFormat}set format(t){this.mFormat=t}get region(){return this.mRegion}set region(t){this.mRegion=t}}class cP{constructor(){this.mRegion="PageSettings",this.mPageWidth=0,this.mPageHeight=0,this.mIsPortrait=!0,this.mIsLandscape=!1,this.mMultiplePage=!0,this.mPaperSize="Letter"}get region(){return this.mRegion}set region(t){this.mRegion=t}get pageWidth(){return this.mPageWidth}set pageWidth(t){this.mPageWidth=t}get pageHeight(){return this.mPageHeight}set pageHeight(t){this.mPageHeight=t}get isPortrait(){return this.mIsPortrait}set isPortrait(t){this.mIsPortrait=t}get isLandscape(){return this.mIsLandscape}set isLandscape(t){this.mIsLandscape=t}get multiplePage(){return this.mMultiplePage}set multiplePage(t){this.mMultiplePage=t}get paperSize(){return this.mPaperSize}set paperSize(t){this.mPaperSize=t,document.getElementById("printCustomSize").style.display="none",document.getElementById("printOrientation").style.display="none","Custom"===t?document.getElementById("printCustomSize").style.display="":document.getElementById("printOrientation").style.display=""}}class dP{constructor(){this.pageWidth=1056,this.pageHeight=816,this.backgroundColor="#ffffff",this.isPortrait=!1,this.isLandscape=!0,this.paperSize="Letter",this.pageBreaks=!1,this.showPageBreaks=void 0}}class pP{constructor(){this.currentZoom="82%%"}}class uP{constructor(){this.isCopyLayoutElement=!1,this.currentDiagramName="",this.preventPropertyChange=!1,this.isModified=!1,this.preventSelectionChange=!1,this.pasteData=[],this.isLoading=!1,this.isTemplateLoad=!1,this.nodeProperties=new oP,this.textProperties=new lP,this.connectorProperties=new aP,this.exportSettings=new hP,this.printSettings=new cP,this.pageSettings=new dP,this.utilityMethods=new rP,this.scrollSettings=new pP,this.nodeProperties.propertyChange=this.nodePropertyChange.bind(this),this.connectorProperties.propertyChange=this.connectorPropertyChange.bind(this),this.textProperties.propertyChange=this.textPropertyChange.bind(this)}randomIdGenerator(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}getAbsolutePath(){return window.location.pathname}nodePropertyChange(t){if(!this.preventPropertyChange){const e=this.selectedDiagram;if(e){if(e.selectedItems.nodes.length>0){const i=this.selectedDiagram.selectedItems.nodes;for(const n of i){const i=n,s=t.propertyName.toString().toLowerCase();switch(s){case"offsetx":i.offsetX=this.nodeProperties.offsetX.value;break;case"offsety":i.offsetY=this.nodeProperties.offsetY.value;break;case"width":i.width=this.nodeProperties.width.value;break;case"height":i.height=this.nodeProperties.height.value;break;case"rotateangle":i.rotateAngle=this.nodeProperties.rotateAngle.value;break;case"aspectratio":i.constraints=i.constraints^ps.AspectRatio}if(i.children)for(const n of i.children)this.applyNodeStyle(s,e.getObject(n),t.propertyValue);else this.applyNodeStyle(s,i,t.propertyValue)}this.isModified=!0}if(e.connectors.length>0){let i=e.selectedItems.connectors;for(let e=0;e<i.length;e++)switch(t.propertyName.toString().toLowerCase()){case"strokecolor":this.connectorProperties.lineColor=this.getColor(this.nodeProperties.strokeColor);break;case"strokewidth":this.connectorProperties.lineWidth=this.nodeProperties.strokeWidth;break;case"strokestyle":this.connectorProperties.lineStyle=this.nodeProperties.strokeStyle;break;case"opacity":this.connectorProperties.opacity=this.nodeProperties.opacity}this.isModified=!0}e.dataBind()}}}connectorPropertyChange(t){if(!this.preventPropertyChange){const e=this.selectedDiagram;if(e&&e.selectedItems.connectors.length>0){const i=e.selectedItems.connectors;for(const e of i){const i=e;switch(t.propertyName.toString().toLowerCase()){case"linecolor":i.style.strokeColor=this.getColor(this.connectorProperties.lineColor.value),i.sourceDecorator.style={fill:i.style.strokeColor,strokeColor:i.style.strokeColor},i.targetDecorator.style={fill:i.style.strokeColor,strokeColor:i.style.strokeColor};break;case"linewidth":i.style.strokeWidth=this.connectorProperties.lineWidth.value,i.sourceDecorator.style?i.sourceDecorator.style.strokeWidth=i.style.strokeWidth:i.sourceDecorator.style={strokeWidth:i.style.strokeWidth},i.targetDecorator.style?i.targetDecorator.style.strokeWidth=i.style.strokeWidth:i.targetDecorator.style={strokeWidth:i.style.strokeWidth};break;case"linestyle":i.style.strokeDashArray=this.connectorProperties.lineStyle.value;break;case"linetype":i.type=this.connectorProperties.lineType.value;break;case"sourcetype":i.sourceDecorator.shape=this.connectorProperties.sourceType.value;break;case"targettype":i.targetDecorator.shape=this.connectorProperties.targetType.value;break;case"sourcesize":i.sourceDecorator.width=i.sourceDecorator.height=this.connectorProperties.sourceSize.value;break;case"targetsize":i.targetDecorator.width=i.targetDecorator.height=this.connectorProperties.targetSize.value;break;case"opacity":i.style.opacity=this.connectorProperties.opacity.value/100,i.targetDecorator.style.opacity=i.style.opacity,i.sourceDecorator.style.opacity=i.style.opacity,document.getElementById("connectorOpacitySliderText").value=this.connectorProperties.opacity.value+"%";break;case"linejump":this.connectorProperties.lineJump.checked?i.constraints=i.constraints|cs.Bridging:i.constraints=i.constraints&~cs.Bridging;break;case"linejumpsize":i.bridgeSpace=this.connectorProperties.lineJumpSize.value}}e.dataBind(),this.isModified=!0}}}textPropertyChange(t){if(!this.preventPropertyChange){const e=this.selectedDiagram;if(e){let i=e.selectedItems.nodes;i=i.concat(e.selectedItems.connectors);const n=t.propertyName.toString().toLowerCase();if(i.length>0){for(const t of i){const e=t;if(e instanceof Ny||e instanceof Rg)if(e.annotations.length>0)for(const t of e.annotations){const e=t.style;this.updateTextProperties(n,e)}else e.shape&&"Text"===e.shape.type&&this.updateTextProperties(n,e.style)}e.dataBind(),this.isModified=!0}}}}updateTextProperties(t,e){switch(t){case"fontfamily":e.fontFamily=this.textProperties.fontFamily.value;break;case"fontsize":e.fontSize=this.textProperties.fontSize.value;break;case"fontcolor":e.color=this.getColor(this.textProperties.fontColor.value);break;case"opacity":e.opacity=this.textProperties.opacity.value/100,document.getElementById("textOpacityText").value=this.textProperties.opacity.value+"%"}}applyNodeStyle(t,e,i){switch(t){case"fillcolor":e.style.fill=this.getColor(i),this.nodeProperties.gradient&&this.nodeProperties.getGradient(e);break;case"strokecolor":e.style.strokeColor=this.getColor(i.value);break;case"strokewidth":e.style.strokeWidth=this.nodeProperties.strokeWidth.value;break;case"strokestyle":e.style.strokeDashArray=this.nodeProperties.strokeStyle.value;break;case"opacity":e.style.opacity=this.nodeProperties.opacity.value/100,document.getElementById("nodeOpacitySliderText").value=this.nodeProperties.opacity.value+"%";break;case"gradient":i&&"Solid"===i.value?e.style.gradient.type="None":this.nodeProperties.getGradient(e)}}getColor(t){return window.navigator&&9===t.length?t.substring(0,7):t}}var gP,mP=function(){return mP=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},mP.apply(this,arguments)},fP=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function o(t){try{l(n.next(t))}catch(t){r(t)}}function a(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?s(t.value):new i(function(e){e(t.value)}).then(o,a)}l((n=n.apply(t,e||[])).next())})},yP=function(t,e){var i,n,s,r,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,n&&(s=2&r[0]?n.return:r[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,r[1])).done)return s;switch(n=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,n=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],n=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},vP=(function(){function t(t){var e=this;this.sentinelInfo={up:{check:function(t,i){var n=t.top-e.containerElementRect.top;return i.entered=n>=0,n+e.parent.listItemHeight*e.parent.virtualItemCount/2>=0},axis:"Y"},down:{check:function(t,i){var n=t.bottom;return i.entered=t.bottom<=e.containerElementRect.bottom,n-e.parent.listItemHeight*e.parent.virtualItemCount/2<=e.parent.listItemHeight*e.parent.virtualItemCount/2},axis:"Y"}},this.parent=t,this.removeEventListener(),this.addEventListener()}t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("observe",this.observe,this),this.parent.on("setGeneratedData",this.setGeneratedData,this),this.parent.on("dataProcessAsync",this.dataProcessAsync,this),this.parent.on("setCurrentViewDataAsync",this.setCurrentViewDataAsync,this),this.parent.on("bindScrollEvent",this.bindScrollEvent,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("observe",this.observe),this.parent.off("setGeneratedData",this.setGeneratedData),this.parent.off("dataProcessAsync",this.dataProcessAsync),this.parent.off("setCurrentViewDataAsync",this.setCurrentViewDataAsync),this.parent.off("bindScrollEvent",this.bindScrollEvent))},t.prototype.bindScrollEvent=function(t){var e=this;this.component=t.component,this.observe(function(t){return e.scrollListener(t)})},t.prototype.observe=function(t){this.containerElementRect=this.parent.popupContentElement.getBoundingClientRect(),K.add(this.parent.popupContentElement,"wheel mousedown",this.popupScrollHandler,this),this.touchModule=new ci(this.parent.popupContentElement,{scroll:this.popupScrollHandler.bind(this)}),K.add(this.parent.popupContentElement,"scroll",this.virtualScrollHandler(t),this)},t.prototype.getModuleName=function(){return"VirtualScroll"},t.prototype.popupScrollHandler=function(){this.parent.isMouseScrollAction=!0,this.parent.isPreventScrollAction=!1},t.prototype.getPageQuery=function(t,e,i){return 0===i||this.parent.allowFiltering||"autocomplete"===this.component||(t=t.skip(e)),t},t.prototype.setGeneratedData=function(t,e){for(var i=0,n=this.parent.listData.length+this.parent.virtualItemStartIndex,s=this.parent.virtualItemStartIndex;s<n;s++){if(!this.parent.generatedDataObject[s]&&null!==e&&this.parent.listData.slice(i,i+1).length>0){var r=this.parent.listData.slice(i,i+1);r.length>0&&(this.parent.generatedDataObject[s]=r)}i++}},t.prototype.generateAndExecuteQueryAsync=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=!1);var s=this.parent.dataSource;if(!n)if(y(this.parent.query))t=this.getPageQuery(t,e,i);else{var r=this.removeSkipAndTakeEvents(this.parent.query.clone());t=this.getPageQuery(r,e,i)}var o=this.parent.isCustomFilter;if("combobox"===this.component){var a=0;this.parent.dataSource instanceof dC?a=this.parent.dataSource.dataSource.json.length:this.parent.dataSource&&this.parent.dataSource.length>0&&(a=this.parent.dataSource.length),a>0&&(this.parent.isCustomFilter=a===this.parent.totalItemCount&&this.parent.queryString!==this.parent.typedString||this.parent.isCustomFilter)}this.parent.resetList(s,this.parent.fields,t),this.parent.isCustomFilter=o},t.prototype.removeSkipAndTakeEvents=function(t){return t.queries=t.queries.filter(function(t){return"onSkip"!==t.fn&&"onTake"!==t.fn}),t},t.prototype.setCurrentViewDataAsync=function(t){var e=[],i=!1,n=!0;y(this.component)&&(this.component=t.component);var s=this.parent.viewPortInfo.endIndex;if("multiselect"===this.component&&"CheckBox"===this.parent.mode&&this.parent.value&&Array.isArray(this.parent.value)&&this.parent.value.length>0&&this.parent.enableSelectionOrder&&""===this.parent.targetElement().trim()){if(this.parent.viewPortInfo.startIndex<this.parent.value.length){if(s=this.parent.viewPortInfo.endIndex-this.parent.value.length,0===this.parent.viewPortInfo.startIndex){if((p=this.parent.list.querySelector(".e-list-parent:not(.e-reorder)"))&&this.parent.list.querySelector(".e-virtual-ddl-content").removeChild(p),this.parent.updateVirtualReOrderList(!0),this.parent.value.length<this.parent.itemCount&&this.parent.value.length!==this.parent.totalItemCount){var r=this.parent.list.querySelector(".e-list-parent:not(.e-reorder)");r&&this.parent.list.querySelector(".e-virtual-ddl-content").removeChild(r),l=(l=this.parent.getForQuery(this.parent.value).clone()).skip(0).take(this.parent.itemCount-(this.parent.value.length-this.parent.viewPortInfo.startIndex)),this.parent.appendUncheckList=!0,this.parent.setCurrentView=!1,this.parent.resetList(this.parent.dataSource,this.parent.fields,l),n=!1,this.parent.appendUncheckList=this.parent.dataSource instanceof dC&&this.parent.appendUncheckList,n=!1}else{var o=this.parent.list.querySelector(".e-list-parent:not(.e-reorder)");o&&this.parent.list.querySelector(".e-virtual-ddl-content").removeChild(o)}n=!1}else if(0!==this.parent.viewPortInfo.startIndex){this.parent.updateVirtualReOrderList(!0),(p=this.parent.list.querySelector(".e-list-parent:not(.e-reorder)"))&&this.parent.list.querySelector(".e-virtual-ddl-content").removeChild(p),n=!1}if(0!==this.parent.viewPortInfo.startIndex&&this.parent.viewPortInfo.startIndex-this.parent.value.length!==this.parent.itemCount&&this.parent.viewPortInfo.startIndex+this.parent.itemCount>this.parent.value.length)l=(l=this.parent.getForQuery(this.parent.value).clone()).skip(0).take(this.parent.itemCount-(this.parent.value.length-this.parent.viewPortInfo.startIndex)),this.parent.appendUncheckList=!0,this.parent.setCurrentView=!1,(p=this.parent.list.querySelector(".e-list-parent:not(.e-reorder)"))&&this.parent.list.querySelector(".e-virtual-ddl-content").removeChild(p),this.parent.resetList(this.parent.dataSource,this.parent.fields,l),n=!1,this.parent.appendUncheckList=this.parent.dataSource instanceof dC&&this.parent.appendUncheckList}else{var a=this.parent.list.querySelectorAll(".e-reorder")[0];this.parent.list.querySelector(".e-virtual-ddl-content")&&a&&this.parent.list.querySelector(".e-virtual-ddl-content").removeChild(a);var l=this.parent.getForQuery(this.parent.value).clone(),h=this.parent.viewPortInfo.startIndex-this.parent.value.length>=0?this.parent.viewPortInfo.startIndex-this.parent.value.length:0;l=l.skip(h),this.parent.setCurrentView=!1,this.parent.resetList(this.parent.dataSource,this.parent.fields,l),n=!1}this.parent.totalItemsCount()}if(n)for(var d=this.parent.viewPortInfo.startIndex;d<s;d++){var p,u=d;if("multiselect"===this.component&&"CheckBox"===this.parent.mode)(p=this.parent.list.querySelector(".e-list-parent.e-reorder"))&&this.parent.list.querySelector(".e-virtual-ddl-content").removeChild(p);var g=this.parent.generatedDataObject[u];if("multiselect"===this.component&&this.parent.hideSelectedItem){if(g){var m=c(this.parent.fields.value,g[0]);if(this.parent.value&&null!==m&&Array.isArray(this.parent.value)&&this.parent.value.length>0&&this.parent.value.indexOf(m)<0){l=this.parent.getForQuery(this.parent.value).clone();l=this.parent.viewPortInfo.endIndex===this.parent.totalItemCount+this.parent.value.length&&this.parent.hideSelectedItem?l.skip(this.parent.totalItemCount-this.parent.itemCount):l.skip(this.parent.viewPortInfo.startIndex),this.parent.setCurrentView=!1,this.parent.isPreventScrollAction=!0,this.parent.resetList(this.parent.dataSource,this.parent.fields,l),i=!0;break}(null===this.parent.value||this.parent.value&&0===this.parent.value.length)&&e.push(g[0])}if(u===s-1&&e.length!==this.parent.itemCount&&this.parent.hideSelectedItem){l=this.parent.value&&this.parent.value.length>0?this.parent.getForQuery(this.parent.value).clone():new Gb;l=this.parent.value&&this.parent.viewPortInfo.endIndex===this.parent.totalItemCount+this.parent.value.length&&this.parent.hideSelectedItem?l.skip(this.parent.totalItemCount-this.parent.itemCount):l.skip(this.parent.viewPortInfo.startIndex),this.parent.setCurrentView=!1,this.parent.resetList(this.parent.dataSource,this.parent.fields,l),i=!0}}else g&&e.push(g[0]);this.parent.setCurrentView=!1}if(!i&&n){"multiselect"===this.component&&this.parent.allowCustomValue&&0===this.parent.viewPortInfo.startIndex&&this.parent.virtualCustomData&&e.splice(0,0,this.parent.virtualCustomData);var f=[];"multiselect"===this.component&&this.parent.allowCustomValue&&this.parent.viewPortInfo.endIndex===this.parent.totalItemCount&&this.parent.virtualCustomSelectData&&this.parent.virtualCustomSelectData.length>0&&(f=e.concat(this.parent.virtualCustomSelectData),e=f),this.parent.renderItems(e,this.parent.fields,"multiselect"===this.component&&"CheckBox"===this.parent.mode),this.parent.updateSelectionList()}"multiselect"===this.component&&(this.parent.updatevirtualizationList(),this.parent.checkMaxSelection()),this.parent.getSkeletonCount(),this.parent.skeletonCount=0!==this.parent.totalItemCount&&this.parent.totalItemCount<2*this.parent.itemCount&&(!(this.parent.dataSource instanceof dC)||this.parent.dataSource instanceof dC&&this.parent.totalItemCount<=this.parent.itemCount)?0:this.parent.skeletonCount;var v=this.parent.list.getElementsByClassName("e-virtual-ddl")[0],b="multiselect"!==this.component||"multiselect"===this.component&&!(this.parent.dataSource instanceof dC)||this.parent.dataSource instanceof dC&&!i;if(v&&b)v.style=this.parent.GetVirtualTrackHeight();else if(!v&&this.parent.skeletonCount>0&&this.parent.popupWrapper){var C=this.parent.createElement("div",{id:this.parent.element.id+"_popup",className:"e-virtual-ddl",styles:this.parent.GetVirtualTrackHeight()});this.parent.popupWrapper.querySelector(".e-dropdownbase").appendChild(C)}("multiselect"!==this.component||"multiselect"===this.component&&!(this.parent.dataSource instanceof dC)||this.parent.dataSource instanceof dC&&(!i||0===this.parent.viewPortInfo.startIndex))&&this.parent.UpdateSkeleton(),this.parent.liCollections=this.parent.list.querySelectorAll(".e-list-item");var I=this.parent.list.getElementsByClassName("e-virtual-ddl-content")[0];if(I&&b&&(I.style=this.parent.getTransformValues()),this.parent.fields.groupBy&&this.parent.scrollStop(),40===this.parent.keyCode&&this.parent.isScrollChanged&&this.parent.hideSelectedItem&&!y(this.parent.currentFocuedListElement)){var M=this.parent.getElementByValue(this.parent.currentFocuedListElement.getAttribute("data-value"));this.parent.addListFocus(M),this.parent.isScrollChanged=!1}},t.prototype.generateQueryAndSetQueryIndexAsync=function(t,e){var i=!1,n=0,s=0,r=this.parent.viewPortInfo.endIndex;if(!e&&0!==r)for(var o=this.parent.viewPortInfo.startIndex;o<=r;o++)o in this.parent.generatedDataObject||(i?s=o===r?o:o+1:(i=!0,n=s=o));!i||this.parent.totalItemCount===n&&this.parent.totalItemCount===s||(this.parent.virtualItemStartIndex=n,this.parent.virtualItemEndIndex=s,this.parent.setCurrentView=!0,this.generateAndExecuteQueryAsync(t,n,s),"multiselect"===this.component&&this.parent.hideSelectedItem&&this.parent.value&&Array.isArray(this.parent.value)&&this.parent.value.length>0&&this.parent.totalItemsCount(),"multiselect"===this.component&&this.parent.virtualItemStartIndex===this.parent.virtualItemEndIndex&&(this.parent.virtualItemStartIndex=this.parent.viewPortInfo.startIndex,this.parent.virtualItemEndIndex=this.parent.viewPortInfo.endIndex)),(!(this.parent.dataSource instanceof dC)||this.parent.dataSource instanceof dC&&!this.parent.isRequesting)&&this.setCurrentViewDataAsync()},t.prototype.dataProcessAsync=function(t){this.parent.selectedValueInfo=null,this.parent.virtualItemStartIndex=this.parent.viewPortInfo.startIndex,this.parent.virtualItemEndIndex=this.parent.viewPortInfo.endIndex,this.generateQueryAndSetQueryIndexAsync(new Gb,t)},t.prototype.virtualScrollRefreshAsync=function(){return fP(this,void 0,void 0,function(){return yP(this,function(t){switch(t.label){case 0:return this.parent.isCustomFilter=!(this.parent.isTyped||"combobox"===this.component&&this.parent.allowFiltering&&this.parent.queryString!==this.parent.typedString||!y(this.parent.filterInput)&&!y(this.parent.filterInput.value)&&""!==this.parent.filterInput.value&&"combobox"!==this.component)&&!("autocomplete"===this.component&&null!=this.parent.value)||this.parent.isCustomFilter,(this.parent.allowFiltering||"autocomplete"===this.component)&&(y(this.parent.typedString)||"combobox"===this.component&&!y(this.parent.typedString)&&this.parent.allowFiltering?(this.parent.getSkeletonCount(!0),"combobox"===this.component&&(this.parent.skeletonCount=0!==this.parent.totalItemCount&&this.parent.totalItemCount<2*this.parent.itemCount&&(!(this.parent.dataSource instanceof dC)||this.parent.dataSource instanceof dC&&this.parent.totalItemCount<=this.parent.itemCount)?0:this.parent.skeletonCount)):(this.parent.viewPortInfo.endIndex>=this.parent.dataCount&&(this.parent.viewPortInfo.endIndex=this.parent.dataCount),this.parent.viewPortInfo.startIndex>=this.parent.dataCount&&(this.parent.viewPortInfo.startIndex=this.parent.dataCount-this.parent.itemCount))),[4,this.dataProcessAsync()];case 1:return t.sent(),null==this.parent.keyboardEvent||this.parent.dataSource instanceof dC&&(!(this.parent.dataSource instanceof dC)||this.parent.isRequesting)||this.parent.handleVirtualKeyboardActions(this.parent.keyboardEvent,this.parent.pageCount),this.parent.customFilterQuery||(this.parent.isCustomFilter=!1),[2]}})})},t.prototype.scrollListener=function(t){var e=this;if(!this.parent.isPreventScrollAction&&!this.parent.isVirtualTrackHeight){this.parent.preventSetCurrentData=!1;var i=t.sentinel,n=this.parent.previousStartIndex;this.parent.viewPortInfo=this.getInfoFromView(t.direction,i,t.offset,!1),this.parent.isUpwardScrolling=!1,this.parent.previousStartIndex===n||this.parent.isKeyBoardAction?this.parent.isScrollActionTriggered&&(this.parent.isPreventKeyAction=!1,this.parent.isScrollActionTriggered=!1,this.parent.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.parent.getTransformValues()):(this.parent.isScrollActionTriggered=!1,this.parent.currentPageNumber=this.parent.viewPortInfo.currentPageNumber,this.parent.virtualListInfo=mP({},this.parent.viewPortInfo),this.parent.isPreventKeyAction=!0,this.parent.isVirtualScrolling=!0,setTimeout(function(){e.parent.pageCount=e.parent.getPageCount(),e.virtualScrollRefreshAsync().then(function(){e.parent.popupObj&&(e.parent.list=e.parent.popupObj.element.querySelector(".e-content")||ct(".e-content"),e.parent.updateSelectionList(),e.parent.liCollections=e.parent.getItems()),e.parent.isKeyBoardAction=!1,e.parent.isVirtualScrolling=!1,e.parent.isPreventKeyAction=!1})},5)),this.parent.previousInfo=this.parent.viewPortInfo}},t.prototype.getInfoFromView=function(t,e,i,n){var s={direction:t,sentinelInfo:e,offsets:i,startIndex:this.parent.previousStartIndex,endIndex:this.parent.previousEndIndex},r=this.parent.popupContentElement?this.parent.popupContentElement.getBoundingClientRect().height:0,o=this.parent.listItemHeight,a=i.top/o,l=r/o,h=a+l,c=this.parent.virtualItemCount/4,d=this.parent.totalItemCount;if("down"===s.direction){var p=Math.round(h)-Math.round(c);if(y(s.startIndex)||h>s.startIndex+Math.round(this.parent.virtualItemCount/2+c)&&s.endIndex!==d){s.startIndex=p>=0?Math.round(p):0,s.startIndex=s.startIndex>a?Math.floor(a):s.startIndex;var u=s.startIndex+this.parent.virtualItemCount;s.startIndex=u<h?Math.ceil(h)-this.parent.virtualItemCount:s.startIndex,s.endIndex=u<d?u:d,s.startIndex=u>=d?s.endIndex-this.parent.virtualItemCount>0?s.endIndex-this.parent.virtualItemCount:0:s.startIndex,s.currentPageNumber=Math.ceil(s.endIndex/this.parent.virtualItemCount)}}else if("up"===s.direction){if(s.startIndex&&s.endIndex||Math.ceil(a)>this.parent.previousStartIndex)if(a<Math.round((s.startIndex*o+c*o)/o)||Math.ceil(a)>this.parent.previousStartIndex){var g=c>l?c:l+l/4;u=Math.round(a+g);s.endIndex=u<d?u:d;p=s.endIndex-this.parent.virtualItemCount;s.startIndex=p>0?p:0,s.endIndex=p<0?this.parent.virtualItemCount:s.endIndex,s.currentPageNumber=Math.ceil(s.startIndex/this.parent.virtualItemCount)}}return n?this.parent.scrollPreStartIndex=s.startIndex:(this.parent.previousStartIndex=s.startIndex,this.parent.startIndex=s.startIndex,this.parent.previousEndIndex=s.endIndex),s},t.prototype.virtualScrollHandler=function(t){var e=this,i="chrome"===G.info.name?200:100,n=0,s=C(t,i),r=C(t,50);return function(t){var i=t.target.scrollTop,o=t.target.scrollLeft,a=n<i&&!e.parent.isUpwardScrolling?"down":"up";n=i;var l=e.sentinelInfo[a],h=e.parent.scrollPreStartIndex,c={top:i,left:o};e.parent.list&&e.parent.list.querySelectorAll(".e-virtual-list").length>0&&(e.getInfoFromView(a,l,c,!0),e.parent.scrollPreStartIndex===h||e.parent.isPreventScrollAction||(e.parent.isScrollActionTriggered=!0,e.parent.list.querySelector(".e-virtual-ddl-content").style.transform="translate(0px,"+i+"px)"));var d=s;"X"===l.axis&&(d=r),d({direction:a,sentinel:l,offset:{top:i,left:o},focusElement:document.activeElement})}},t.prototype.destroy=function(){this.removeEventListener()}}(),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),bP=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},CP="e-toast",IP="e-toast-container",MP="e-toast-title",SP="e-toast-full-width",xP="e-toast-content",wP="e-toast-message",DP="e-toast-progress",EP="e-toast-close-icon",TP="e-rtl",AP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vP(e,t),bP([jt("Left")],e.prototype,"X",void 0),bP([jt("Top")],e.prototype,"Y",void 0),e}(re),NP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vP(e,t),bP([jt(null)],e.prototype,"model",void 0),bP([jt(null)],e.prototype,"click",void 0),e}(re),LP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vP(e,t),bP([jt("FadeIn")],e.prototype,"effect",void 0),bP([jt(600)],e.prototype,"duration",void 0),bP([jt("ease")],e.prototype,"easing",void 0),e}(re),OP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vP(e,t),bP([Bt({effect:"FadeIn",duration:600,easing:"ease"},LP)],e.prototype,"show",void 0),bP([Bt({effect:"FadeOut",duration:600,easing:"ease"},LP)],e.prototype,"hide",void 0),e}(re),kP=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.toastCollection=[],n.needsID=!0,n}return vP(e,t),e.prototype.getModuleName=function(){return"toast"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.destroy=function(){this.hide("All"),this.element.classList.remove(IP),gt(this.element,{position:"","z-index":""}),y(this.refElement)||y(this.refElement.parentElement)||(this.refElement.parentElement.insertBefore(this.element,this.refElement),at(this.refElement),this.refElement=void 0),this.isBlazorServer()||t.prototype.destroy.call(this),this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element)},e.prototype.preRender=function(){this.isDevice=G.isDevice,"300px"===this.width&&(this.width=this.isDevice&&screen.width<768?"100%":"300px"),y(this.target)&&(this.target=document.body),this.enableRtl&&!this.isBlazorServer()&&this.element.classList.add(TP)},e.prototype.render=function(){this.progressObj=[],this.intervalId=[],this.contentTemplate=null,this.toastTemplate=null,this.renderComplete(),this.initRenderClass=this.element.className},e.prototype.show=function(t){var e;if(y(t)||(this.templateChanges(t),e=JSON.parse(JSON.stringify(t)),f(this,this,t)),y(this.toastContainer)){this.toastContainer=this.getContainer();var i="string"==typeof this.target?document.querySelector(this.target):"object"==typeof this.target?this.target:document.body;if(y(i))return;"BODY"===i.tagName?this.toastContainer.style.position="fixed":(this.toastContainer.style.position="absolute",i.style.position="relative"),this.setPositioning(this.position),i.appendChild(this.toastContainer)}this.isBlazorServer()&&this.element.classList.contains("e-control")?this.isToastModel(t):(this.toastEle=this.createElement("div",{className:CP,id:b("toast")}),this.setWidthHeight(),this.setCSSClass(this.cssClass),y(this.template)||""===this.template?this.personalizeToast():this.templateRendering(),this.setProgress(),this.setCloseButton(),this.setAria(),this.appendToTarget(t),this.isDevice&&screen.width<768&&new ci(this.toastEle,{swipe:this.swipeHandler.bind(this)}),y(e)||(f(e,{element:[this.toastEle]},!0),this.toastCollection.push(e)),this.isReact&&this.renderReactTemplates())},e.prototype.showToast=function(t,e){this.toastEle=this.element.querySelector("#"+t),this.show(e)},e.prototype.isToastModel=function(t){this.toastContainer=this.element,this.setPositioning(this.position);y(this.element.lastElementChild)||this.setProgress(),this.setAria(),this.appendToTarget(t)},e.prototype.swipeHandler=function(t){var e=ut(t.originalEvent.target,"."+CP+":not(."+IP+")"),i=this.animation.hide.effect;y(e)||("Right"===t.swipeDirection?(this.animation.hide.effect="SlideRightOut",this.hideToast("swipe",e)):"Left"===t.swipeDirection&&(this.animation.hide.effect="SlideLeftOut",this.hideToast("swipe",e)),this.animation.hide.effect=i)},e.prototype.templateChanges=function(t){v(t.content)||y(this.contentTemplate)||this.content===t.content||this.clearContentTemplate(),v(t.template)||y(this.toastTemplate)||this.template===t.template||this.clearToastTemplate()},e.prototype.setCSSClass=function(t){if(t){var e=-1!==t.indexOf(",")?",":" ";mt(this.toastEle,t.split(e),[]),this.toastContainer&&mt(this.toastContainer,t.split(e),[])}},e.prototype.setWidthHeight=function(){"300px"===this.width?this.toastEle.style.width=S(this.width):"100%"===this.width?this.toastContainer.classList.add(SP):(this.toastEle.style.width=S(this.width),this.toastContainer.classList.remove(SP)),this.toastEle.style.height=S(this.height)},e.prototype.templateRendering=function(){this.fetchEle(this.toastEle,this.template,"template")},e.prototype.sanitizeHelper=function(t){if(this.enableHtmlSanitizer){var e=Yi.beforeSanitize();f(e,e,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",e),e.cancel&&!y(e.helper)?t=e.helper(t):e.cancel||(t=Yi.serializeValue(e,t))}return t},e.prototype.hide=function(t){this.hideToast("",t)},e.prototype.hideToast=function(t,e){if(!y(this.toastContainer)&&0!==this.toastContainer.childElementCount)if("string"!=typeof e||"All"!==e)y(e)&&(e=this.newestOnTop?this.toastContainer.lastElementChild:this.toastContainer.firstElementChild),this.destroyToast(e,t);else for(var i=0;i<this.toastContainer.childElementCount;i++)this.destroyToast(this.toastContainer.children[i],t)},e.prototype.fetchEle=function(t,e,i){var n,s,r,o;if(e="string"==typeof e?this.sanitizeHelper(e):e,o=t.classList.contains(MP)?this.element.id+"title":t.classList.contains(xP)?this.element.id+"content":this.element.id+"template",!y(s="content"===i?this.contentTemplate:this.toastTemplate))return t.appendChild(s.cloneNode(!0)),t;try{if("function"!=typeof e&&document.querySelectorAll(e).length>0){var a=null;"title"!==i&&(a=document.querySelector(e),t.appendChild(a),a.style.display="");var l=y(a)?s:a.cloneNode(!0);"content"===i?this.contentTemplate=l:this.toastTemplate=l}else n=Hi(e)}catch(t){n=Hi("object"==typeof e?e:Ri(function(){return e}))}if(!y(n))if(this.isBlazorServer()){r=n({},this,i,o,!0)}else r=n({},this,i,null,!0);return y(r)||!(r.length>0)||y(r[0].tagName)&&1===r.length?"function"!=typeof e&&0===t.childElementCount&&(t.innerHTML=e):[].slice.call(r).forEach(function(e){y(e.tagName)||(e.style.display=""),t.appendChild(e)}),t},e.prototype.clearProgress=function(t){y(this.intervalId[t])||(clearInterval(this.intervalId[t]),delete this.intervalId[t]),y(this.progressObj[t])||(clearInterval(this.progressObj[t].intervalId),delete this.progressObj[t])},e.prototype.removeToastContainer=function(t){t&&this.toastContainer.classList.contains("e-toast-util")&&at(this.toastContainer)},e.prototype.clearContainerPos=function(t){var e=this;this.isBlazorServer()?this.toastContainer=null:(this.customPosition?(gt(this.toastContainer,{left:"",top:""}),this.removeToastContainer(t),this.toastContainer=null,this.customPosition=!1):([CP+"-top-left",CP+"-top-right",CP+"-bottom-left",CP+"-bottom-right",CP+"-bottom-center",CP+"-top-center",CP+"-full-width"].forEach(function(t){!y(e.toastContainer)&&e.toastContainer.classList.contains(t)&&e.toastContainer.classList.remove(t)}),this.removeToastContainer(t),this.toastContainer=null),y(this.contentTemplate)||this.clearContentTemplate(),y(this.toastTemplate)||this.clearToastTemplate())},e.prototype.clearContentTemplate=function(){this.contentTemplate.style.display="none",document.body.appendChild(this.contentTemplate),this.contentTemplate=null},e.prototype.clearToastTemplate=function(){this.toastTemplate.style.display="none",document.body.appendChild(this.toastTemplate),this.toastTemplate=null},e.prototype.isBlazorServer=function(){return x()&&this.isServerRendered},e.prototype.destroyToast=function(t,e){for(var i,n=this,s=0;s<this.toastCollection.length;s++)this.toastCollection[s].element[0]===t&&(i=this.toastCollection[s],this.toastCollection.splice(s,1));var r={options:this,cancel:!1,type:e,element:t,toastContainer:this.toastContainer},o=this.animation.hide,a={duration:o.duration,name:"None"===o.effect&&"Enable"===te?"FadeOut":o.effect,timingFunction:o.easing},l=parseInt(t.id.split("toast_")[1],10),h=this.isBlazorServer()?{options:i,toastContainer:this.toastContainer}:{options:i,toastContainer:this.toastContainer,toastObj:this};this.trigger("beforeClose",r,function(e){e.cancel||(y(n.progressObj[l])||y(t.querySelector("."+DP))||(n.progressObj[l].progressEle.style.width="0%"),a.end=function(){n.clearProgress(l),n.isBlazorServer()&&!y(i)||at(t),n.trigger("close",h),0===n.toastContainer.childElementCount&&n.clearContainerPos(!0),o=null,a=null},new qt(a).animate(t))})},e.prototype.personalizeToast=function(){this.setIcon(),this.setTitle(),this.setContent(),this.actionButtons()},e.prototype.setAria=function(){ht(this.toastEle,{role:"alert"})},e.prototype.setPositioning=function(t){this.isBlazorServer()||(isNaN(parseFloat(t.X))&&isNaN(parseFloat(t.Y))?this.toastContainer.classList.add(CP+"-"+t.Y.toString().toLowerCase()+"-"+t.X.toString().toLowerCase()):(this.customPosition=!0,gt(this.toastContainer,{left:S(t.X),top:S(t.Y)})))},e.prototype.setCloseButton=function(){if(this.showCloseButton){this.l10n=new ri("toast",{close:"Close"},this.locale),this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("close"),e=this.createElement("div",{className:EP+" e-icons ",attrs:{tabindex:"0","aria-label":t,role:"button"}});this.toastEle.classList.add("e-toast-header-close-icon"),this.toastEle.appendChild(e)}},e.prototype.setProgress=function(){if(this.timeOut>0){var t=parseInt(this.toastEle.id.split("toast_")[1],10);this.intervalId[t]=window.setTimeout(this.destroyToast.bind(this,this.toastEle),this.timeOut),this.progressObj[t]={hideEta:null,intervalId:null,maxHideTime:null,element:null,timeOutId:null,progressEle:null},this.progressObj[t].maxHideTime=parseFloat(this.timeOut+""),this.progressObj[t].hideEta=(new Date).getTime()+this.progressObj[t].maxHideTime,this.progressObj[t].element=this.toastEle,this.extendedTimeout>0&&(K.add(this.toastEle,"mouseover",this.toastHoverAction.bind(this,t)),K.add(this.toastEle,"mouseleave",this.delayedToastProgress.bind(this,t)),this.progressObj[t].timeOutId=this.intervalId[t]),this.showProgressBar&&(this.progressBarEle=this.createElement("div",{className:DP}),this.toastEle.insertBefore(this.progressBarEle,this.toastEle.children[0]),this.progressObj[t].intervalId=setInterval(this.updateProgressBar.bind(this,this.progressObj[t]),10),this.progressObj[t].progressEle=this.progressBarEle)}},e.prototype.toastHoverAction=function(t){clearTimeout(this.progressObj[t].timeOutId),clearInterval(this.progressObj[t].intervalId),this.progressObj[t].hideEta=0,y(this.progressObj[t].element.querySelector("."+DP))||(this.progressObj[t].progressEle.style.width="0%")},e.prototype.delayedToastProgress=function(t){var e=this.progressObj[t];if(!y(e)){var i=e.element;e.timeOutId=window.setTimeout(this.destroyToast.bind(this,i),this.extendedTimeout),e.maxHideTime=parseFloat(this.extendedTimeout+""),e.hideEta=(new Date).getTime()+e.maxHideTime,y(i.querySelector("."+DP))||(e.intervalId=setInterval(this.updateProgressBar.bind(this,e),10))}},e.prototype.updateProgressBar=function(t){var e=(t.hideEta-(new Date).getTime())/t.maxHideTime*100;e="Ltr"===this.progressDirection?100-e:e,t.progressEle.style.width=e+"%"},e.prototype.setIcon=function(){if(!y(this.icon)&&0!==this.icon.length){var t=this.createElement("div",{className:"e-toast-icon e-icons "+this.icon});this.toastEle.classList.add("e-toast-header-icon"),this.toastEle.appendChild(t)}},e.prototype.setTitle=function(){if(!y(this.title)){var t=this.createElement("div",{className:MP});t=this.fetchEle(t,this.title,"title");var e=this.createElement("div",{className:wP});e.appendChild(t),this.toastEle.appendChild(e)}},e.prototype.setContent=function(){var t=this.createElement("div",{className:xP}),e=this.element;if(y(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s/g,"");if((e.children.length>0||i)&&(!e.firstElementChild||!e.firstElementChild.classList.contains(CP))){this.innerEle=document.createDocumentFragment();for(var n=this.createElement("div");0!==e.childNodes.length;)this.innerEle.appendChild(this.element.childNodes[0]);t.appendChild(this.innerEle),[].slice.call(t.children).forEach(function(t){n.appendChild(t.cloneNode(!0))}),this.content=n,this.appendMessageContainer(t)}}else"object"!=typeof this.content||y(this.content.tagName)?(t=this.fetchEle(t,this.content,"content"),this.appendMessageContainer(t)):(t.appendChild(this.content),this.content=this.content.cloneNode(!0),this.appendMessageContainer(t))},e.prototype.appendMessageContainer=function(t){if(this.toastEle.querySelectorAll("."+wP).length>0)this.toastEle.querySelector("."+wP).appendChild(t);else{var e=this.createElement("div",{className:wP});e.appendChild(t),this.toastEle.appendChild(e)}},e.prototype.actionButtons=function(){var t=this,e=this.createElement("div",{className:"e-toast-actions"});[].slice.call(this.buttons).forEach(function(i){if(!y(i.model)){var n=t.createElement("button");n.setAttribute("type","button"),(y(i.model.cssClass)||0===i.model.cssClass.length)&&(i.model.cssClass="e-primary "+t.cssClass),n.classList.add("e-small"),new mo(i.model,n),y(i.click)||"function"!=typeof i.click||K.add(n,"click",i.click),e.appendChild(n)}}),e.childElementCount>0&&this.appendMessageContainer(e)},e.prototype.appendToTarget=function(t){var e=this,i=this.isBlazorServer()?{options:t,element:this.toastEle,cancel:!1}:{options:t,toastObj:this,element:this.toastEle,cancel:!1};this.trigger("beforeOpen",i,function(i){if(i.cancel){if(e.isBlazorServer()){var n=parseInt(e.toastEle.id.split("toast_")[1],10);e.clearProgress(n),at(e.toastEle),0===e.toastContainer.childElementCount&&e.clearContainerPos()}}else e.isBlazorServer()||(e.toastEle.style.display="none"),e.newestOnTop&&0!==e.toastContainer.childElementCount?e.toastContainer.insertBefore(e.toastEle,e.toastContainer.children[0]):e.isBlazorServer()||e.toastContainer.appendChild(e.toastEle),et([e.toastEle],"e-blazor-toast-hidden"),K.add(e.toastEle,"click",e.clickHandler,e),K.add(e.toastEle,"keydown",e.keyDownHandler,e),e.toastContainer.style.zIndex=to(e.toastContainer)+"",e.displayToast(e.toastEle,t)})},e.prototype.clickHandler=function(t){var e=this;this.isBlazorServer()||t.stopPropagation();var i=t.target,n=ut(i,"."+CP),s=this.isBlazorServer()?{element:n,cancel:!1,clickToClose:!1,originalEvent:t}:{element:n,cancel:!1,clickToClose:!1,originalEvent:t,toastObj:this},r=i.classList.contains(EP);this.trigger("click",s,function(t){(r&&!t.cancel||t.clickToClose)&&e.destroyToast(n,"click")})},e.prototype.keyDownHandler=function(t){if(t.target.classList.contains(EP)&&(13===t.keyCode||32===t.keyCode)){var e=ut(t.target,"."+CP);this.destroyToast(e,"key")}},e.prototype.displayToast=function(t,e){var i=this,n=this.animation.show,s={duration:n.duration,name:"None"===n.effect&&"Enable"===te?"FadeIn":n.effect,timingFunction:n.easing},r=this.isBlazorServer()?{options:e,element:this.toastEle}:{options:e,toastObj:this,element:this.toastEle};s.begin=function(){t.style.display=""},s.end=function(){i.trigger("open",r)},new qt(s).animate(t)},e.prototype.getContainer=function(){return this.element.classList.add(IP),this.element},e.prototype.onPropertyChanged=function(t,e){for(var i=this.element,n=0,s=Object.keys(t);n<s.length;n++){if("enableRtl"===s[n])t.enableRtl?i.classList.add(TP):i.classList.remove(TP)}},bP([jt("300px")],e.prototype,"width",void 0),bP([jt("auto")],e.prototype,"height",void 0),bP([jt(null)],e.prototype,"title",void 0),bP([jt(null)],e.prototype,"content",void 0),bP([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),bP([jt(null)],e.prototype,"icon",void 0),bP([jt(null)],e.prototype,"cssClass",void 0),bP([jt(null)],e.prototype,"template",void 0),bP([jt(!0)],e.prototype,"newestOnTop",void 0),bP([jt(!1)],e.prototype,"showCloseButton",void 0),bP([jt(!1)],e.prototype,"showProgressBar",void 0),bP([jt(5e3)],e.prototype,"timeOut",void 0),bP([jt("Rtl")],e.prototype,"progressDirection",void 0),bP([jt(1e3)],e.prototype,"extendedTimeout",void 0),bP([Bt({},OP)],e.prototype,"animation",void 0),bP([Bt({},AP)],e.prototype,"position",void 0),bP([Rt([{}],NP)],e.prototype,"buttons",void 0),bP([jt(null)],e.prototype,"target",void 0),bP([Ut()],e.prototype,"created",void 0),bP([Ut()],e.prototype,"beforeSanitizeHtml",void 0),bP([Ut()],e.prototype,"destroyed",void 0),bP([Ut()],e.prototype,"open",void 0),bP([Ut()],e.prototype,"beforeOpen",void 0),bP([Ut()],e.prototype,"beforeClose",void 0),bP([Ut()],e.prototype,"close",void 0),bP([Ut()],e.prototype,"click",void 0),e=bP([Ft],e)}(_e);!function(t){t.show=function(t,e,i){var n,s;if(document.querySelector("."+IP)?n=document.querySelector("."+IP):(n=$("div",{className:CP+" "+IP+" e-toast-util"}),document.body.appendChild(n)),"string"==typeof t){var r=void 0,o=void 0;if(y(e))r="",o="";else switch(e){case"Warning":r="e-toast-warning",o="e-toast-warning-icon";break;case"Success":r="e-toast-success",o="e-toast-success-icon";break;case"Error":r="e-toast-danger",o="e-toast-error-icon";break;case"Information":r="e-toast-info",o="e-toast-info-icon"}s={content:t,cssClass:r,icon:o,timeOut:y(i)?5e3:i}}else s=t;var a=new kP(s);return a.appendTo(n),a.show(),a}}(gP||(gP={}));var zP,PP,jP=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),BP=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};!function(t){t.Normal="Normal",t.Success="Success",t.Info="Info",t.Warning="Warning",t.Error="Error"}(zP||(zP={})),function(t){t.Text="Text",t.Outlined="Outlined",t.Filled="Filled"}(PP||(PP={}));var HP,RP,VP="e-msg-icon",UP="e-content-center",FP="e-rtl",WP="e-success",YP="e-warning",_P="e-info",QP="e-error",ZP="e-outlined",qP="e-filled",XP="e-hidden",GP=(function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.initialRender=!0,n}jP(e,t),e.prototype.getModuleName=function(){return"message"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.preRender=function(){this.l10n=new ri("message",{close:"Close"},this.locale)},e.prototype.render=function(){this.innerContent=this.element.innerHTML,this.element.innerHTML="",this.msgElement=this.createElement("div",{className:"e-msg-content-wrap"}),this.initialize(),this.wireEvents(),this.renderComplete(),this.renderReactTemplates(),this.initialRender=!1},e.prototype.initialize=function(){this.element.setAttribute("role","alert"),this.setCssClass(),this.setIcon(),this.setContent(),this.setCloseIcon(),this.setSeverity(),this.setVariant(),this.setVisible(),this.enableRtl&&this.element.classList.add(FP)},e.prototype.setIcon=function(){this.showIcon&&(this.iconElement=this.createElement("span",{className:VP}),this.element.classList.contains(UP)?this.msgElement.appendChild(this.iconElement):this.element.appendChild(this.iconElement))},e.prototype.setCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{attrs:{type:"button",class:"e-msg-close-icon"}}),this.element.appendChild(this.closeIcon),this.setTitle())},e.prototype.setTitle=function(){this.l10n.setLocale(this.locale);var t=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",t),this.closeIcon.setAttribute("aria-label",t)},e.prototype.setContent=function(){this.txtElement=this.createElement("div",{className:"e-msg-content"}),this.element.classList.contains(UP)?(this.msgElement.appendChild(this.txtElement),this.element.appendChild(this.msgElement)):this.element.appendChild(this.txtElement),this.setTemplate()},e.prototype.setTemplate=function(){var t;if(y(this.content)||""===this.content)this.txtElement.innerHTML=this.innerContent;else if(!y(this.content)&&""!==this.content&&("string"==typeof this.content||"string"!=typeof this.content))if(this.isVue||"string"!=typeof this.content){if(!y(t=Hi(this.content))){var e=t({},this,"content",this.element.id+"content",!0);e&&(rt(e=Array.prototype.slice.call(e),this.txtElement),this.renderReactTemplates())}}else this.txtElement.innerHTML=this.content},e.prototype.setSeverity=function(){var t=[WP,YP,_P,QP];et([this.element],t),"Success"===this.severity?tt([this.element],WP):"Warning"===this.severity?tt([this.element],YP):"Error"===this.severity?tt([this.element],QP):"Info"===this.severity&&tt([this.element],_P)},e.prototype.setVariant=function(){var t=[qP,ZP];et([this.element],t),"Outlined"===this.variant?tt([this.element],ZP):"Filled"===this.variant&&tt([this.element],qP)},e.prototype.setCssClass=function(t){t&&et([this.element],t.split(" ")),this.cssClass&&tt([this.element],this.cssClass.split(" "))},e.prototype.setVisible=function(){this.visible?et([this.element],XP):(tt([this.element],XP),this.initialRender||this.trigger("closed",{event,isInteracted:!1,element:this.element}))},e.prototype.clickHandler=function(t){this.closeMessage(t)},e.prototype.keyboardHandler=function(t){32!==t.keyCode&&13!==t.keyCode||this.closeMessage(t)},e.prototype.closeMessage=function(t){tt([this.element],XP),this.setProperties({visible:!1},!0);var e={event:t,isInteracted:!0,element:this.element};this.trigger("closed",e)},e.prototype.wireEvents=function(){this.showCloseIcon&&(K.add(this.closeIcon,"click",this.clickHandler,this),K.add(this.closeIcon,"keydown",this.keyboardHandler,this))},e.prototype.unWireEvents=function(){this.showCloseIcon&&(K.remove(this.closeIcon,"click",this.clickHandler),K.remove(this.closeIcon,"keydown",this.keyboardHandler))},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"cssClass":this.setCssClass(e.cssClass);break;case"content":this.txtElement.innerHTML="",this.setTemplate();break;case"enableRtl":this.enableRtl?this.element.classList.add(FP):this.element.classList.remove(FP);break;case"locale":this.showCloseIcon&&this.setTitle();break;case"showIcon":!this.showIcon&&this.element.getElementsByClassName(VP).length>0&&at(this.iconElement),this.showIcon&&(this.iconElement=this.createElement("span",{className:VP}),this.element.insertBefore(this.iconElement,this.txtElement));break;case"showCloseIcon":this.showCloseIcon||y(this.closeIcon)?(this.setCloseIcon(),this.wireEvents()):(this.unWireEvents(),at(this.closeIcon));break;case"severity":this.setSeverity();break;case"variant":this.setVariant();break;case"visible":this.setVisible()}}},e.prototype.destroy=function(){var e=y(this.cssClass)?[""]:this.cssClass.split(" "),i=[WP,YP,_P,QP,FP,XP,ZP,qP],n=1===e.length&&""===e[0]?i:i.concat(e);et([this.element],n),this.element.removeAttribute("role"),this.unWireEvents(),y(this.iconElement)||at(this.iconElement),at(this.txtElement),y(this.closeIcon)||at(this.closeIcon),t.prototype.destroy.call(this)},BP([jt(null)],e.prototype,"content",void 0),BP([jt("")],e.prototype,"cssClass",void 0),BP([jt(!0)],e.prototype,"showIcon",void 0),BP([jt(!1)],e.prototype,"showCloseIcon",void 0),BP([jt("Normal")],e.prototype,"severity",void 0),BP([jt("Text")],e.prototype,"variant",void 0),BP([jt(!0)],e.prototype,"visible",void 0),BP([Ut()],e.prototype,"created",void 0),BP([Ut()],e.prototype,"destroyed",void 0),BP([Ut()],e.prototype,"closed",void 0),e=BP([Ft],e)}(_e),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),KP=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},JP={TEXTSHAPE:"e-skeleton-text",CIRCLESHAPE:"e-skeleton-circle",SQUARESHAPE:"e-skeleton-square",RECTANGLESHAPE:"e-skeleton-rectangle",WAVEEFFECT:"e-shimmer-wave",PULSEEFFECT:"e-shimmer-pulse",FADEEFFECT:"e-shimmer-fade",VISIBLENONE:"e-visible-none"};!function(t){t.Text="Text",t.Circle="Circle",t.Square="Square",t.Rectangle="Rectangle"}(HP||(HP={})),function(t){t.Wave="Wave",t.Fade="Fade",t.Pulse="Pulse",t.None="None"}(RP||(RP={}));var $P=function(t){function e(e,i){return t.call(this,e,i)||this}return GP(e,t),e.prototype.getModuleName=function(){return"skeleton"},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.preRender=function(){this.element.id||(this.element.id=b("e-"+this.getModuleName())),this.updateCssClass(),ht(this.element,{role:"alert","aria-busy":"true","aria-live":"polite","aria-label":this.label})},e.prototype.render=function(){this.initialize()},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"width":case"height":this.updateDimension();break;case"shape":this.updateShape();break;case"shimmerEffect":this.updateEffect();break;case"visible":this.updateVisibility();break;case"label":this.element.setAttribute("aria-label",this.label);break;case"cssClass":e.cssClass&&et([this.element],e.cssClass.split(" ")),this.updateCssClass()}}},e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=["role","aria-live","aria-busy","aria-label"],i=[];this.cssClass&&(i=i.concat(this.cssClass.split(" ")));for(var n=0;n<e.length;n++)this.element.removeAttribute(e[parseInt(n.toString(),10)]);i=(i=i.concat(this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[])).concat(this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[]),et([this.element],i)},e.prototype.initialize=function(){this.updateShape(),this.updateEffect(),this.updateVisibility()},e.prototype.updateShape=function(){if(!y(this.shape)){var t=JP[this.shape.toUpperCase()+"SHAPE"],e=this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)||[];this.updateDimension(),e&&et([this.element],e),tt([this.element],[t])}},e.prototype.updateDimension=function(){var t=!this.width&&["Text","Rectangle"].indexOf(this.shape)>-1?"100%":S(this.width),e=["Circle","Square"].indexOf(this.shape)>-1?t:S(this.height);this.element.style.width=t,this.element.style.height=e},e.prototype.updateEffect=function(){var t=this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)||[];t&&et([this.element],t),y(this.shimmerEffect)||tt([this.element],[JP[this.shimmerEffect.toUpperCase()+"EFFECT"]])},e.prototype.updateVisibility=function(){this.element.classList[this.visible?"remove":"add"](JP.VISIBLENONE)},e.prototype.updateCssClass=function(){this.cssClass&&tt([this.element],this.cssClass.split(" "))},KP([jt("")],e.prototype,"width",void 0),KP([jt("")],e.prototype,"height",void 0),KP([jt(!0)],e.prototype,"visible",void 0),KP([jt("Text")],e.prototype,"shape",void 0),KP([jt("Wave")],e.prototype,"shimmerEffect",void 0),KP([jt("Loading...")],e.prototype,"label",void 0),KP([jt("")],e.prototype,"cssClass",void 0),e=KP([Ft],e)}(_e),tj=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ej=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},ij=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tj(e,t),ej([jt()],e.prototype,"text",void 0),ej([jt()],e.prototype,"value",void 0),ej([jt()],e.prototype,"iconCss",void 0),ej([jt()],e.prototype,"groupBy",void 0),ej([jt()],e.prototype,"htmlAttributes",void 0),ej([jt()],e.prototype,"disabled",void 0),e}(re),nj="e-dropdownbase",sj="e-rtl",rj="e-content",oj="e-active",aj="e-hover",lj="e-nodata",hj="e-fixed-head",cj="e-item-focus",dj="e-list-item",pj="e-list-group-item",uj="e-disabled",gj="e-dd-group",mj="e-list-item e-virtual-list",fj=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.preventChange=!1,n.isPreventChange=!1,n.isDynamicDataChange=!1,n.addedNewItem=!1,n.isAddNewItemTemplate=!1,n.isRequesting=!1,n.isVirtualizationEnabled=!1,n.isCustomDataUpdated=!1,n.isAllowFiltering=!1,n.virtualizedItemsCount=0,n.isCheckBoxSelection=!1,n.totalItemCount=0,n.dataCount=0,n.remoteDataCount=-1,n.isRemoteDataUpdated=!1,n.isIncrementalRequest=!1,n.itemCount=30,n.virtualListHeight=0,n.isVirtualScrolling=!1,n.isPreventScrollAction=!1,n.scrollPreStartIndex=0,n.isScrollActionTriggered=!1,n.previousStartIndex=0,n.isMouseScrollAction=!1,n.isKeyBoardAction=!1,n.isScrollChanged=!1,n.isUpwardScrolling=!1,n.startIndex=0,n.currentPageNumber=0,n.pageCount=0,n.isPreventKeyAction=!1,n.generatedDataObject={},n.skeletonCount=32,n.isVirtualTrackHeight=!1,n.virtualSelectAll=!1,n.isVirtualReorder=!1,n.incrementalQueryString="",n.incrementalEndIndex=0,n.incrementalStartIndex=0,n.incrementalPreQueryString="",n.isObjectCustomValue=!1,n.appendUncheckList=!1,n.getInitialData=!1,n.preventPopupOpen=!0,n.virtualSelectAllState=!1,n.CurrentEvent=null,n.isDynamicData=!1,n.isPrimitiveData=!1,n.isCustomFiltering=!1,n.debounceTimer=null,n.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},n.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},n.selectedValueInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},n}return tj(e,t),e.prototype.getPropObject=function(t,e,i){var n=new Object,s=new Object;n[t]=e[t],s[t]=i[t];var r=new Object;return r.newProperty=n,r.oldProperty=s,r},e.prototype.getValueByText=function(t,e,i){var n=null;return y(this.listData)||(n=e?this.checkValueCase(t,!0,i):this.checkValueCase(t,!1,i)),n},e.prototype.checkValueCase=function(t,e,i,n){var s=this,r=null;if(n&&(r=t),!y(this.listData)){var o=this.listData,a=this.fields,l=this.typeOfData(o).typeof;if("string"===l||"number"===l||"boolean"===l)for(var h=0,d=o;h<d.length;h++){var p=d[h];y(p)||(i?r=this.checkingAccent(String(p),t,e):e?this.checkIgnoreCase(String(p),t)&&(r=this.getItemValue(String(p),t,e)):this.checkNonIgnoreCase(String(p),t)&&(r=this.getItemValue(String(p),t,e,n)))}else if(e)o.filter(function(e){!y(c(a.value,e))&&s.checkIgnoreCase(c(a.text,e).toString(),t)&&(r=c(a.value,e))});else if(n){var u=null;u=r,o.filter(function(t){var e=c(a.value,t);y(e)||y(r)||e.toString()!==u.toString()||(r=c(a.text,t))})}else o.filter(function(e){s.checkNonIgnoreCase(c(a.text,e),t)&&(r=c(a.value,e))})}return r},e.prototype.checkingAccent=function(t,e,i){var n=$b.ignoreDiacritics(String(t)),s=$b.ignoreDiacritics(e.toString()),r=null;return i?this.checkIgnoreCase(n,s)&&(r=this.getItemValue(String(t),e,i)):this.checkNonIgnoreCase(String(t),e)&&(r=this.getItemValue(String(t),e,i)),r},e.prototype.checkIgnoreCase=function(t,e){return String(t).toLowerCase()===e.toString().toLowerCase()},e.prototype.checkNonIgnoreCase=function(t,e){return String(t)===e.toString()},e.prototype.getItemValue=function(t,e,i,n){var s=this.listData,r=this.typeOfData(s).typeof;return n?t.toString():i?"string"===r?String(t):this.getFormattedValue(String(t)):"string"===r?e:this.getFormattedValue(e)},e.prototype.templateCompiler=function(t){var e=!1;if("function"!=typeof t&&t)try{e=!!dt(t,document).length}catch(t){e=!1}return e},e.prototype.l10nUpdate=function(t){var e="listbox"===this.getModuleName()?this.ulElement:this.list;if(!y(this.noRecordsTemplate)&&"No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){var i=t?this.actionFailureTemplate:this.noRecordsTemplate,n=void 0,s=t?this.actionFailureTemplateId:this.noRecordsTemplateId;e.innerHTML="";var r=this.templateCompiler(i);n=Hi("function"!=typeof i&&r?ct(i,document).innerHTML.trim():i);var o=t?"actionFailureTemplate":"noRecordsTemplate",a=void 0;if((a=this.isReact&&"function"==typeof i?n({},this,o,s,this.isStringTemplate,null):n({},this,o,s,this.isStringTemplate,null,e))&&a.length>0)for(var l=0;l<a.length;l++){if("listbox"===this.getModuleName()&&"noRecordsTemplate"===o)if("#text"===a[l].nodeName)(c=this.createElement("li")).textContent=a[l].textContent,c.classList.add("e-list-nrt"),c.setAttribute("role","option"),e.appendChild(c);else a[l].classList.add("e-list-nr-template"),e.appendChild(a[l]);else(a[l]instanceof HTMLElement||a[l]instanceof Text&&""!==a[l].textContent)&&e.appendChild(a[l])}this.renderReactTemplates()}else{var h=new ri(this.getLocaleName(),{},this.locale);""!==h.getConstant("actionFailureTemplate")||""!==h.getConstant("noRecordsTemplate")?this.l10n=h:this.l10n=new ri("listbox"===this.getModuleName()?"listbox":"mention"===this.getModuleName()?"mention":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var c,d=t?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if("listbox"===this.getModuleName())(c=this.createElement("li")).textContent=d,e.appendChild(c),c.classList.add("e-list-nrt"),c.setAttribute("role","option");else y(e)||(e.innerHTML=d)}},e.prototype.checkAndResetCache=function(){this.isVirtualizationEnabled&&(this.generatedDataObject={},this.virtualItemStartIndex=this.virtualItemEndIndex=0,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.selectedValueInfo=null)},e.prototype.updateIncrementalInfo=function(t,e){this.viewPortInfo.startIndex=t,this.viewPortInfo.endIndex=e,this.updateVirtualItemIndex(),this.isIncrementalRequest=!0,this.resetList(this.dataSource,this.fields,this.query),this.isIncrementalRequest=!1},e.prototype.updateIncrementalView=function(t,e){this.viewPortInfo.startIndex=t,this.viewPortInfo.endIndex=e,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+dj),this.ulElement=this.list.querySelector("ul")},e.prototype.updateVirtualItemIndex=function(){this.virtualItemStartIndex=this.viewPortInfo.startIndex,this.virtualItemEndIndex=this.viewPortInfo.endIndex,this.virtualListInfo=this.viewPortInfo},e.prototype.getFilteringSkeletonCount=function(){var t=this.skeletonCount;this.getSkeletonCount(!0),this.skeletonCount=this.dataCount<2*this.itemCount&&(!(this.dataSource instanceof dC)||this.dataSource instanceof dC&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount;var e=!0;if("autocomplete"!==this.getModuleName()&&"multiselect"!==this.getModuleName()||!(this.totalItemCount<2*this.itemCount)||this.dataSource instanceof dC&&!(this.dataSource instanceof dC&&this.totalItemCount<=this.itemCount)||(this.skeletonCount=0,e=!1),!this.list.classList.contains(lj)){if(t!==this.skeletonCount&&e?this.UpdateSkeleton(!0,Math.abs(t-this.skeletonCount)):this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl").length>0)this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0&&this.list.querySelector(".e-dropdownbase")){var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.list.querySelector(".e-dropdownbase").appendChild(i)}this.list.getElementsByClassName("e-virtual-ddl-content").length>0&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},e.prototype.getSkeletonCount=function(t){this.virtualListHeight=null!=this.listContainerHeight?parseInt(this.listContainerHeight,10):this.virtualListHeight;var e=this.virtualListHeight>0&&this.listItemHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;this.skeletonCount=4*e<this.itemCount?this.itemCount:4*e,this.itemCount=t?this.itemCount:this.skeletonCount,this.virtualItemCount=this.itemCount,this.skeletonCount=Math.floor(this.skeletonCount/2)},e.prototype.GetVirtualTrackHeight=function(){var t=this.totalItemCount===this.viewPortInfo.endIndex?this.totalItemCount*this.listItemHeight-this.itemCount*this.listItemHeight:this.totalItemCount*this.listItemHeight,e="height: "+((t=this.isVirtualTrackHeight?0:t)-this.itemCount*this.listItemHeight)+"px;";return"autocomplete"!==this.getModuleName()&&"multiselect"!==this.getModuleName()||0!==this.skeletonCount?e:"height: 0px;"},e.prototype.getTransformValues=function(){var t=this.viewPortInfo.startIndex*this.listItemHeight;return t-=this.skeletonCount*this.listItemHeight,"transform: translate(0px, "+(t=0===this.viewPortInfo.startIndex&&this.listData&&0===this.listData.length||0===this.skeletonCount?0:t)+"px);"},e.prototype.UpdateSkeleton=function(t,e){var i=this.list.querySelector(".e-virtual-ddl-content"),n=this.list.querySelector(".e-virtual-list");if(i&&(!n||t)&&this.isVirtualizationEnabled){for(var s=t?e:this.skeletonCount,r=0;r<s;r++){var o=this.createElement("li",{className:mj,styles:"overflow: inherit"});this.isVirtualizationEnabled&&this.itemTemplate&&(o.style.height=this.listItemHeight-parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)+"px"),(a=new $P({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text"})).appendTo(this.createElement("div")),o.appendChild(a.element),i.firstChild&&i.firstChild.insertBefore(o,i.firstChild.children[0])}if("multiselect"===this.getModuleName()&&!this.isVirtualReorder&&!i.firstChild.classList.contains("e-reorder")){for(r=0;r<s&&this.totalItemCount!==this.viewPortInfo.endIndex;r++){var a;o=this.createElement("li",{className:mj+" e-virtual-list-end",styles:"overflow: inherit"});this.isVirtualizationEnabled&&this.itemTemplate&&(o.style.height=this.listItemHeight-parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)+"px"),(a=new $P({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text-end"})).appendTo(this.createElement("div")),o.appendChild(a.element),i.firstChild&&i.firstChild.appendChild(o)}this.totalItemCount===this.viewPortInfo.endIndex&&i.querySelectorAll(".e-virtual-list-end").forEach(function(t){return t.remove()})}}},e.prototype.getLocaleName=function(){return"drop-down-base"},e.prototype.getTextByValue=function(t){return this.checkValueCase(t,!1,!1,!0)},e.prototype.getFormattedValue=function(t){if(this.listData&&this.listData.length){var e=void 0;if(e=this.properties.allowCustomValue&&this.properties.value&&this.properties.value instanceof Array&&this.properties.value.length>0?this.typeOfData(this.properties.value):this.typeOfData(this.listData),"number"==typeof c(this.fields.value?this.fields.value:"value",e.item)||"number"===e.typeof)return parseFloat(t);if("boolean"==typeof c(this.fields.value?this.fields.value:"value",e.item)||"boolean"===e.typeof)return"true"===t||""+t=="true"}return t},e.prototype.setEnableRtl=function(){y(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?tt(this.enableRtlElements,sj):et(this.enableRtlElements,sj))},e.prototype.initialize=function(t){if(this.bindEvent=!0,this.preventPopupOpen=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var e=ZC.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else if("SELECT"===this.element.tagName){(this.dataSource instanceof Array?this.dataSource.length>0:!y(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query,t)},e.prototype.getPersistData=function(){return this.addOnPersist([])},e.prototype.updateDataAttribute=function(t){for(var e=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],i={},n=0;n<this.element.attributes.length;n++)-1!==e.indexOf(this.element.attributes[n].name)||"dropdownlist"===this.getModuleName()&&"readonly"===this.element.attributes[n].name||(i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));f(i,t,i),this.setProperties({htmlAttributes:i},!0)},e.prototype.renderItemsBySelect=function(){var t,e=this.element,i=e.querySelectorAll("select>optgroup"),n="multiselect"===this.getModuleName()&&this.isGroupChecking&&i.length>0;t=n?{value:"value",text:"text",groupBy:"categeory"}:t={value:"value",text:"text"};var s=[],r=e.querySelectorAll("select>option");if(this.getJSONfromOption(s,r,t),i.length){for(var o=0;o<i.length;o++){var a=i[o],l={};l[t.text]=a.label,l.isHeader=!0;var h=a.querySelectorAll("option");n?this.getJSONfromOption(s,h,t,a.label):(s.push(l),this.getJSONfromOption(s,h,t))}e.querySelectorAll("select>option")}this.updateFields(t.text,t.value,n?t.groupBy:this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss,this.fields.disabled),this.resetList(s,t)},e.prototype.updateFields=function(t,e,i,n,s,r){var o={fields:{text:t,value:e,groupBy:y(i)?this.fields&&this.fields.groupBy:i,htmlAttributes:y(n)?this.fields&&this.fields.htmlAttributes:n,iconCss:y(s)?this.fields&&this.fields.iconCss:s,disabled:y(r)?this.fields&&this.fields.disabled:r}};this.setProperties(o,!0)},e.prototype.getJSONfromOption=function(t,e,i,n){void 0===n&&(n=null);for(var s=0,r=e;s<r.length;s++){var o=r[s],a={};a[i.text]=o.innerText,a[i.value]=y(o.getAttribute(i.value))?o.innerText:o.getAttribute(i.value),y(n)||(a[i.groupBy]=n),t.push(a)}},e.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.displayTemplateId=this.element.id+"DisplayTemplate",this.spinnerTemplateId=this.element.id+"SpinnerTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},e.prototype.setListData=function(t,e,i,n){var s,r=this;e=e||this.fields,this.isActive=!0;var o={cancel:!1,data:t,query:i};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.isRequesting||this.trigger("actionBegin",o,function(i){if(!i.cancel)if(r.isRequesting=!0,r.showSpinner(),t instanceof dC){r.isRequested=!0;var o=!1;if(r.isDataFetched)return void r.emptyDataRequest(e);i.data.executeQuery(r.getQuery(i.query)).then(function(t){r.isPreventChange=!(!r.isAngular||!r.preventChange)||r.isPreventChange;var n=!0;if(!r.virtualSelectAll){for(var a=r.getQuery(i.query),l=0;l<a.queries.length;l++)"onWhere"===a.queries[l].fn&&(o=!0);if(r.isVirtualizationEnabled&&0!==t.count&&t.count<2*r.itemCount){if(a)for(l=0;l<a.queries.length;l++)"onTake"===a.queries[l].fn&&(a.queries[l].e.nos=t.count),"multiselect"!==r.getModuleName()||"or"!==a.queries[l].e.condition&&"equal"!==a.queries[l].e.operator||r.isCustomFiltering||(n=!1)}else if(r.isVirtualTrackHeight=!1,a)for(l=0;l<a.queries.length;l++)"multiselect"===r.getModuleName()&&(a.queries[l].e&&"or"===a.queries[l].e.condition||a.queries[l].e&&"equal"===a.queries[l].e.operator)&&(n=!1)}n&&(r.dataCount=r.totalItemCount=t.count),r.trigger("actionComplete",t,function(t){if(!t.cancel){r.isRequesting=!1,r.isCustomFiltering=!1;var i=t.result;if(r.isIncrementalRequest)return void(s=r.renderItems(i,e));if((!r.isVirtualizationEnabled&&0===i.length||r.isVirtualizationEnabled&&0===i.length&&!o)&&(r.isDataFetched=!0),o||(r.remoteDataCount=t.count),r.dataCount=r.virtualSelectAll?r.dataCount:t.count,r.totalItemCount=r.virtualSelectAll?r.totalItemCount:t.count,s=r.renderItems(i,e),r.appendUncheckList=!1,r.onActionComplete(s,i,t),r.groupTemplate&&r.renderGroupTemplate(s),r.isRequested=!1,r.bindChildItems(i,s,e,t),r.getInitialData)return r.getInitialData=!1,void(r.preventPopupOpen=!1);var n=!1;r.isVirtualizationEnabled&&r.setCurrentView&&(n=!0,r.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),null!=r.keyboardEvent&&r.handleVirtualKeyboardActions(r.keyboardEvent,r.pageCount);var a="multiselect"!==r.getModuleName()||"multiselect"===r.getModuleName()&&(!(r.dataSource instanceof dC)||r.dataSource instanceof dC&&!n);r.isVirtualizationEnabled&&a&&(r.getFilteringSkeletonCount(),r.updatePopupPosition()),r.virtualSelectAll&&r.virtualSelectAllData&&(r.virtualSelectionAll(r.virtualSelectAllState,r.liCollections,r.CurrentEvent),r.virtualSelectAllState=!1,r.CurrentEvent=null,r.virtualSelectAll=!1)}})}).catch(function(t){r.isRequested=!1,r.isRequesting=!1,r.onActionFailure(t),r.hideSpinner()})}else{r.isRequesting=!1;var a=!0,l=void 0;if(r.isVirtualizationEnabled&&!r.virtualGroupDataSource&&r.fields.groupBy){var h=new dC(r.dataSource).executeLocal((new Gb).group(r.fields.groupBy));r.virtualGroupDataSource=h.records}var c=r.isVirtualizationEnabled&&r.virtualGroupDataSource&&!r.isCustomDataUpdated?new dC(r.virtualGroupDataSource):new dC(i.data);if(l=r.getQuery(i.query).executeLocal(c),!r.virtualSelectAll){var d=r.getQuery(i.query);if(r.isVirtualizationEnabled&&0!==l.count&&l.count<2*r.itemCount&&!r.appendUncheckList){if(d){for(var p=0;p<d.queries.length;p++)"onTake"===d.queries[p].fn&&(d.queries[p].e.nos=l.count,l=d.executeLocal(c)),"multiselect"!==r.getModuleName()||"or"!==d.queries[p].e.condition&&"equal"!==d.queries[p].e.operator||r.isCustomFiltering||(a=!1);a&&(l=d.executeLocal(c),r.isVirtualTrackHeight=!(r.dataSource instanceof dC||r.isCustomDataUpdated))}}else if(r.isVirtualTrackHeight=!1,d)for(p=0;p<d.queries.length;p++)"multiselect"===r.getModuleName()&&(d.queries[p].e&&"or"===d.queries[p].e.condition||d.queries[p].e&&"equal"===d.queries[p].e.operator)&&(a=!1)}!a||r.dataSource instanceof dC||r.isCustomDataUpdated||r.virtualSelectAll||(r.dataCount=r.totalItemCount=r.virtualSelectAll?l.length:l.count);var u={cancel:!1,result:l=r.isVirtualizationEnabled?l.result:l};r.isPreventChange=!(!r.isAngular||!r.preventChange)||r.isPreventChange,r.trigger("actionComplete",u,function(t){if(r.isCustomFiltering=!1,r.isIncrementalRequest)s=r.renderItems(t.result,e);else if(!t.cancel){if(s=r.renderItems(t.result,e),r.onActionComplete(s,t.result,n),r.groupTemplate&&r.renderGroupTemplate(s),r.bindChildItems(t.result,s,e),r.getInitialData)return r.getInitialData=!1,void(r.preventPopupOpen=!1);setTimeout(function(){"multiselect"===r.getModuleName()&&null!=r.itemTemplate&&s.childElementCount>0&&(s.children[0].childElementCount>0||r.fields.groupBy&&s.children[1]&&s.children[1].childElementCount>0)&&r.updateDataList()})}})}})},e.prototype.handleVirtualKeyboardActions=function(t,e){},e.prototype.updatePopupState=function(){},e.prototype.updatePopupPosition=function(){},e.prototype.virtualSelectionAll=function(t,e,i){},e.prototype.updateRemoteData=function(){this.setListData(this.dataSource,this.fields,this.query)},e.prototype.bindChildItems=function(t,e,i,n){var s=this;t.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){rt(s.remainingItems(s.sortedData,i),e),s.liCollections=s.list.querySelectorAll("."+dj),s.updateListValues(),s.raiseDataBound(t,n)},0):this.raiseDataBound(t,n)},e.prototype.isObjectInArray=function(t,e){return e.some(function(e){return Object.keys(t).every(function(i){return Object.prototype.hasOwnProperty.call(e,i)&&e[i]===t[i]})})},e.prototype.updateListValues=function(){},e.prototype.findListElement=function(t,e,i,n){var s=null;if(t)for(var r=[].slice.call(t.querySelectorAll(e)),o=0;o<r.length;o++)if(r[o].getAttribute(i)===n+""){s=r[o];break}return s},e.prototype.raiseDataBound=function(t,e){this.hideSpinner();var i={items:t,e};this.trigger("dataBound",i)},e.prototype.remainingItems=function(t,e){var i=new dC(t).executeLocal((new Gb).skip(100));if(this.itemTemplate){var n=this.templateListItem(i,e);return[].slice.call(n.childNodes)}var s=this.typeOfData(i).typeof;return"string"===s||"number"===s||"boolean"===s?ZC.createListItemFromArray(this.createElement,i,!0,this.listOption(i,e),this):ZC.createListItemFromJson(this.createElement,i,this.listOption(i,e),1,!0,this)},e.prototype.emptyDataRequest=function(t){var e=[];this.onActionComplete(this.renderItems(e,t),e),this.isRequested=!1,this.isRequesting=!1,this.hideSpinner()},e.prototype.showSpinner=function(){},e.prototype.hideSpinner=function(){},e.prototype.onActionFailure=function(t){this.liCollections=[],this.trigger("actionFailure",t),this.l10nUpdate(!0),y(this.list)||tt([this.list],lj)},e.prototype.onActionComplete=function(t,e,i){var n=this;if(this.listData=e,!this.isVirtualizationEnabled||this.isCustomDataUpdated||this.virtualSelectAll||this.notify("setGeneratedData",{module:"VirtualScroll"}),"listbox"!==this.getModuleName()&&t.setAttribute("tabindex","0"),this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.isVirtualizationEnabled||(this.fixedHeaderElement=y(this.fixedHeaderElement)?this.fixedHeaderElement:null),"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(var s=0;s<t.childElementCount;s++)t.children[s].classList.contains("e-list-group-item")&&(y(t.children[s].innerHTML)||""===t.children[s].innerHTML)&&tt([t.children[s]],"e-hide-group-header"),t.children[0].classList.contains("e-hide-group-header")&&gt(t.children[1],{zIndex:11});if("multiselect"===this.getModuleName()&&this.isAngular&&this.ngEle){var r=this.list;if(r){var o=r.offsetHeight+"px";r.style.height=o}}if(y(this.list)||this.isVirtualizationEnabled||(this.list.innerHTML="",this.list.appendChild(t),this.liCollections=this.list.querySelectorAll("."+dj),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,e,this.bindEvent)),"multiselect"===this.getModuleName()&&this.isAngular&&this.ngEle){var a=this.list;a&&setTimeout(function(){a.style.height="",n.refreshPopup()},0)}},e.prototype.postRender=function(t,e,i){if(this.fields.disabled)for(var n=t.querySelectorAll("."+dj),s="None"!==this.sortOrder?y(this.fields.groupBy)?this.sortedData:this.sortedData.filter(function(t){return!("isHeader"in t)||!0!==t.isHeader}):this.listData,r=0;r<n.length;r++)if(JSON.parse(JSON.stringify(s[r]))[this.fields.disabled])if(y(this.fields.groupBy))this.disableListItem(n[r]);else{var o=s[r],a=c(this.fields.value?this.fields.value:"value",o),l=t.querySelector('li[data-value="'+a+'"]');y(l)||this.disableListItem(l)}var h=this.fields.disabled?t.querySelector("."+dj+":not(.e-disabled"):t.querySelector("."+dj),d=t.querySelector("."+oj);if(h&&!d){if(this.isVirtualizationEnabled&&0!==this.viewPortInfo.startIndex){var p=this.ulElement.querySelectorAll("li."+dj+":not(.e-virtual-list):not(.e-hide-listitem)");h=p&&p.length>0?p[2]:h}h&&h.classList.add(cj)}e.length<=0?(this.l10nUpdate(),tt([t],lj)):t.classList.remove(lj)},e.prototype.getQuery=function(t){return t||(this.query?this.query:new Gb)},e.prototype.performFiltering=function(t){},e.prototype.debouncedFiltering=function(t,e){var i=this;null!==this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(function(){i.performFiltering(t)},e)},e.prototype.updateVirtualizationProperties=function(t,e,i){this.isVirtualizationEnabled=!0,this.virtualizedItemsCount=t,this.isAllowFiltering=e,this.isCheckBoxSelection=i},e.prototype.renderGroupTemplate=function(t){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+pj)){var e=this.dataSource,i={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},n=t.querySelectorAll("."+pj),s=this.templateCompiler(this.groupTemplate);if("function"!=typeof this.groupTemplate&&s){var r=ct(this.groupTemplate,document).innerHTML.trim(),o=ZC.renderGroupTemplate(r,e,this.fields.properties,n,i,this);if(this.isGroupChecking)for(var a=0;a<o.length;a++)this.notify("addItem",{module:"CheckBoxSelection",item:o[a]})}else{o=ZC.renderGroupTemplate(this.groupTemplate,e,this.fields.properties,n,i,this);if(this.isGroupChecking)for(a=0;a<o.length;a++)this.notify("addItem",{module:"CheckBoxSelection",item:o[a]})}this.renderReactTemplates()}},e.prototype.createListItems=function(t,e){if(t){if(e.groupBy||this.element.querySelector("optgroup")){if(e.groupBy){"None"!==this.sortOrder&&(t=this.getSortedDataSource(t));var i=e.properties||e;t=ZC.groupDataSource(t,i,this.sortOrder)}tt([this.list],gj)}else("listbox"!==this.getModuleName()||"listbox"===this.getModuleName()&&!this.preventDefActionFilter)&&(t=this.getSortedDataSource(t));var n=this.listOption(t,e),s=t.length>100?new dC(t).executeLocal((new Gb).take(100)):t;return this.sortedData=t,ZC.createList(this.createElement,"autocomplete"===this.getModuleName()?s:t,n,!0,this)}return null},e.prototype.listOption=function(t,e){var i=!y(e.iconCss),n=y(e.properties)?e:e.properties;return f({},null!==e.text||null!==e.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},e,!0)},e.prototype.setFloatingHeader=function(t){y(this.list)||this.list.classList.contains(lj)||(y(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:hj}),y(this.list)||this.list.querySelector("li").classList.contains(pj)||(this.fixedHeaderElement.style.display="none"),y(this.fixedHeaderElement)||y(this.list)||st([this.fixedHeaderElement],this.list),this.setFixedHeader()),y(this.fixedHeaderElement)||"0"!==this.fixedHeaderElement.style.zIndex||this.setFixedHeader(),this.scrollStop(t))},e.prototype.scrollStop=function(t,e){for(var i=y(t)?this.list:t.target,n=getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),s=getComputedStyle(this.getValidLi(),null).getPropertyValue("margin-bottom"),r=parseInt(s,10),o="multiselect"===this.getModuleName()?parseFloat(n):parseInt(n,10),a=Math.round(i.scrollTop/(o+r)),l=this.list.querySelectorAll("li:not(.e-hide-listitem)"),h=this.list.querySelectorAll(".e-virtual-list").length,c=!1,d=a;d>-1;d--){var p=this.isVirtualizationEnabled?d+h:d;if(this.isVirtualizationEnabled){if(c&&0,this.fixedHeaderElement&&this.updateGroupHeader(p,l,i))break;e&&(!y(l[p])&&l[p].classList.contains(oj)&&"autocomplete"!==this.getModuleName()||!y(l[p])&&l[p].classList.contains(cj)&&"autocomplete"===this.getModuleName())&&(c=!0)}else if(this.updateGroupHeader(p,l,i))break}},e.prototype.getPageCount=function(t){if(this.list){var e=this.list.classList.contains(lj)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height"),i=Math.round(this.list.getBoundingClientRect().height/parseInt(e,10));return t?i:Math.round(i)}return 0},e.prototype.updateGroupHeader=function(t,e,i){return!y(e[t])&&e[t].classList.contains(pj)?(this.updateGroupFixedHeader(e[t],i),!0):(this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none",!1)},e.prototype.updateGroupFixedHeader=function(t,e){this.fixedHeaderElement&&(y(t.innerHTML)||(this.fixedHeaderElement.innerHTML=t.innerHTML),this.fixedHeaderElement.style.position="fixed",this.fixedHeaderElement.style.top=this.list.parentElement.offsetTop+this.list.offsetTop-window.scrollY+"px",this.fixedHeaderElement.style.display="block")},e.prototype.getValidLi=function(){return this.isVirtualizationEnabled&&this.liCollections[0].classList.contains("e-virtual-list")?this.liCollections[this.skeletonCount]:this.liCollections[0]},e.prototype.renderItems=function(t,e,i,n){var s;if(this.itemTemplate&&t){"multiselect"===this.getModuleName()&&this.virtualSelectAll&&(this.virtualSelectAllData=t,t=t.slice(this.virtualItemStartIndex,this.virtualItemEndIndex));var r=t;r&&e.groupBy?("None"!==this.sortOrder&&(r=this.getSortedDataSource(r)),r=ZC.groupDataSource(r,e.properties,this.sortOrder)):("listbox"!==this.getModuleName()||"listbox"===this.getModuleName()&&!this.preventDefActionFilter)&&(r=this.getSortedDataSource(r)),this.sortedData=r;var o=r.length>100?new dC(r).executeLocal((new Gb).take(100)):r;if(s=this.templateListItem("autocomplete"===this.getModuleName()?o:r,e),this.isIncrementalRequest)return this.incrementalLiCollections=s.querySelectorAll("."+dj),this.incrementalUlElement=s,this.incrementalListData=t,s;if(this.isVirtualizationEnabled){var a=this.list.querySelector(".e-list-parent"),l=this.list.querySelector(".e-virtual-ddl-content");if(t.length>=this.virtualizedItemsCount&&a&&l||a&&l&&this.isAllowFiltering||a&&l&&"autocomplete"===this.getModuleName()){"multiselect"===this.getModuleName()&&this.isCheckBoxSelection&&this.appendUncheckList&&this.list&&this.list.querySelector(".e-active")?(l.appendChild(s),i=!0):l.replaceChild(s,a);var h=this.list.querySelectorAll(".e-reorder");this.list.querySelector(".e-virtual-ddl-content")&&h&&h.length>0&&!i&&this.list.querySelector(".e-virtual-ddl-content").removeChild(h[0]),this.updateListElements(t)}else l||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(s),this.updateListElements(t))}}else{if("multiselect"===this.getModuleName()&&this.virtualSelectAll&&!n&&(this.virtualSelectAllData=t,t=t.slice(this.virtualItemStartIndex,this.virtualItemEndIndex)),s=this.createListItems(t,e),this.isIncrementalRequest)return this.incrementalLiCollections=s.querySelectorAll("."+dj),this.incrementalUlElement=s,this.incrementalListData=t,s;if(this.isVirtualizationEnabled){a=this.list.querySelector(".e-list-parent:not(.e-reorder)"),l=this.list.querySelector(".e-virtual-ddl-content");(!a&&this.list.querySelector(".e-list-parent.e-reorder")||a&&this.isVirtualReorder&&this.list.querySelector(".e-list-parent.e-reorder"))&&(a=this.list.querySelector(".e-list-parent.e-reorder")),t.length>=this.virtualizedItemsCount&&a&&l||a&&l&&this.isAllowFiltering||a&&l&&("autocomplete"===this.getModuleName()||"multiselect"===this.getModuleName())?(("multiselect"!==this.getModuleName()||"multiselect"===this.getModuleName()&&(!(this.dataSource instanceof dC)||this.dataSource instanceof dC&&!this.setCurrentView))&&(this.appendUncheckList?l.appendChild(s):l.replaceChild(s,a)),this.updateListElements(t)):l&&l.firstChild||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(s),this.updateListElements(t))}}return s},e.prototype.createVirtualContent=function(){this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content"}))},e.prototype.updateListElements=function(t){this.liCollections=this.list.querySelectorAll("."+dj),this.ulElement=this.list.querySelector("ul"),this.listData=t,this.postRender(this.list,t,this.bindEvent)},e.prototype.templateListItem=function(t,e){var i=this.listOption(t,e);i.templateID=this.itemTemplateId,i.isStringTemplate=this.isStringTemplate;var n,s=this.templateCompiler(this.itemTemplate);if("function"!=typeof this.itemTemplate&&s){var r=ct(this.itemTemplate,document).innerHTML.trim();return n=ZC.renderContentTemplate(this.createElement,r,t,e.properties,i,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),n}return n=ZC.renderContentTemplate(this.createElement,this.itemTemplate,t,e.properties,i,this),this.isVirtualizationEnabled&&this.isReact&&this.renderReactTemplates(),n},e.prototype.typeOfData=function(t){for(var e={typeof:null,item:null},i=0;!y(t)&&i<t.length;i++){if(!y(t[i]))if(!y("string"==typeof t[i]||"number"==typeof t[i]||"boolean"==typeof t[i]?t[i]:c(this.fields.value?this.fields.value:"value",t[i])))return{typeof:typeof t[i],item:t[i]}}return e},e.prototype.setFixedHeader=function(){y(this.list)||(this.list.parentElement.style.display="block");var t=0;this.list&&this.list.parentElement&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(t)&&(t=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10)));if(!y(this.liCollections)){var e=this.getValidLi().offsetWidth-t;this.fixedHeaderElement.style.width=e.toString()+"px"}gt(this.fixedHeaderElement,{zIndex:10});var i=this.ulElement.querySelector("."+pj+":not(.e-hide-listitem)");y(i)||(this.fixedHeaderElement.innerHTML=i.innerHTML)},e.prototype.getSortedDataSource=function(t){if(t&&"None"!==this.sortOrder){var e=this.fields.text?this.fields.text:"text";"string"!==this.typeOfData(t).typeof&&"number"!==this.typeOfData(t).typeof&&"boolean"!==this.typeOfData(t).typeof||(e=""),t=ZC.getDataSource(t,ZC.addSorting(this.sortOrder,e))}return t},e.prototype.getIndexByValue=function(t){var e,i=[];i=this.fields.disabled&&"multiselect"===this.getModuleName()&&this.liCollections?this.liCollections:this.getItems();for(var n=0;n<i.length;n++)if(!y(t)&&i[n].getAttribute("data-value")===t.toString()){e=n;break}return e},e.prototype.getIndexByValueFilter=function(t,e){var i;if(!e)return null;var n=e.querySelectorAll("li:not(.e-list-group-item)");if(n)for(var s=0;s<n.length;s++)if(!y(t)&&n[s].getAttribute("data-value")===t.toString()){i=s;break}return i},e.prototype.dispatchEvent=function(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!1,!0),t&&t.dispatchEvent(i)},e.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):this.fields.value||this.fields.text||(this.isPrimitiveData=!0,this.updateFields("text","text"))},e.prototype.resetList=function(t,e,i,n){if(this.list){if("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)!(t instanceof Array?t.length>0:!y(t))&&this.selectData&&this.selectData.length>0&&(t=this.selectData);t="combobox"===this.getModuleName()&&this.selectData&&t instanceof Array&&t.length<this.selectData.length&&this.addedNewItem?this.selectData:t,this.addedNewItem=!1,this.setListData(t,e,i,n)}},e.prototype.updateSelectElementData=function(t){(t||this.isVirtualizationEnabled)&&y(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},e.prototype.updateSelection=function(){},e.prototype.renderList=function(){this.render()},e.prototype.updateDataSource=function(t,e){this.resetList(this.dataSource),this.totalItemCount=this.dataSource instanceof dC?this.dataSource.dataSource.json.length:0},e.prototype.setUpdateInitial=function(t,e,i){this.isDataFetched=!1,this.isPrimitiveData=!1;for(var n={},s=0;t.length>s;s++)e[t[s]]&&"fields"===t[s]?(this.setFields(),n[t[s]]=e[t[s]]):e[t[s]]&&(n[t[s]]=e[t[s]]);Object.keys(n).length>0&&(-1===Object.keys(n).indexOf("dataSource")&&(n.dataSource=this.dataSource),"listbox"===this.getModuleName()?this.isReact&&(!this.isReact||y(e.dataSource)&&y(e.sortOrder))||this.updateDataSource(n,i):(this.isDynamicData=!0,this.updateDataSource(n,i)))},e.prototype.onPropertyChanged=function(t,e){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],t),this.setUpdateInitial(["sortOrder","itemTemplate"],t);for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var s=this.ulElement.querySelector("."+pj);this.fixedHeaderElement.innerHTML=s.innerHTML}break;case"locale":this.list&&!y(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:t.zIndex},!0),this.setZIndex()}}},e.prototype.render=function(t,e){"listbox"===this.getModuleName()?this.list=this.createElement("div",{className:rj,attrs:{tabindex:"0"}}):this.list=this.createElement("div",{className:rj}),this.list.classList.add(nj),this.setFields();var i={duration:300,selector:"."+dj};this.rippleFun=Xt(this.list,i);var n=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!y(n))&&!this.isGroupChecking){K.add(this.list,"scroll",this.setFloatingHeader,this);for(var s=this.getScrollableParent(),r=0;r<s.length;r++){var o=s[r];K.add(o,"scroll",this.updateGroupFixedHeader,this)}}if("dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),et([this.element],nj),this.element.style.display="none";var a=this.createElement("div");this.element.parentElement.insertBefore(a,this.element),a.appendChild(this.element),a.appendChild(this.list)}this.setEnableRtl(),e||this.initialize(t)},e.prototype.getScrollableParent=function(){for(var t=getComputedStyle(this.element),e=[],i=/(auto|scroll)/,n=this.element.parentElement;n&&"HTML"!==n.tagName;){var s=getComputedStyle(n);"absolute"===t.position&&"static"===s.position||!i.test(s.overflow+s.overflowY+s.overflowX)||e.push(n),n=n.parentElement}return e.push(document),e},e.prototype.removeScrollEvent=function(){this.list&&K.remove(this.list,"scroll",this.setFloatingHeader)},e.prototype.getModuleName=function(){return"dropdownbase"},e.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+dj)},e.prototype.addItem=function(t,e){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&y(e)){var i=[].slice.call(this.listData);i.push(t),i=this.getSortedDataSource(i),e=this.fields.groupBy?(i=ZC.groupDataSource(i,this.fields.properties,this.sortOrder)).indexOf(t):i.indexOf(t)}var n,s=this.getItems().length,r=0===s,o=this.list.querySelector("."+oj);t=t instanceof Array?t:[t],n=y(e)||e<0||e>s-1?s:e;var a=this.fields;t&&a.groupBy&&(t=ZC.groupDataSource(t,a.properties));for(var l=[],h=0;h<t.length;h++){var d=t[h],p=d.isHeader,u=this.createElement("li",{className:p?pj:dj,id:"option-add-"+h}),g=d instanceof Object?c(a.text,d):d;if(p&&(u.innerText=g),this.itemTemplate&&!p){var m=this.templateCompiler(this.itemTemplate),f=("function"!=typeof this.itemTemplate&&m?Hi(ct(this.itemTemplate,document).innerHTML.trim()):Hi(this.itemTemplate))(d,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,u);f&&rt(f,u)}else p||u.appendChild(document.createTextNode(g));u.setAttribute("data-value",d instanceof Object?c(a.value,d):d),u.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:u}),l.push(u),"listbox"===this.getModuleName()?(this.listData.splice(r?this.listData.length:n,0,d),this.listData.length!==this.sortedData.length&&(this.sortedData=this.listData)):this.listData.push(d),"None"===this.sortOrder&&y(e)&&0===n&&(n=null),"listbox"===this.getModuleName()?this.updateActionCompleteData(u,d,r?null:n+h):this.updateActionCompleteData(u,d,n),this.trigger("beforeItemRender",{element:u,item:d})}if(0===s&&y(this.list.querySelector("ul")))y(this.list)||(this.list.innerHTML="",this.list.classList.remove(lj),this.isAddNewItemTemplate=!0,y(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=l,y(l)||y(this.ulElement)||rt(l,this.ulElement),this.updateAddItemList(this.list,s);else{"listbox"===this.getModuleName()&&0===s&&(this.ulElement.innerHTML="");var v=[];for(h=0;h<t.length;h++){for(var b=this.ulElement.querySelectorAll(".e-list-group-item"),C=0;C<b.length;C++)v[C]=b[C].innerText;if(v.indexOf(l[h].innerText)>-1&&a.groupBy){for(C=0;C<b.length;C++)if(v[C]===l[h].innerText){"None"===this.sortOrder?this.ulElement.insertBefore(l[h+1],b[C+1]):this.ulElement.insertBefore(l[h+1],this.ulElement.childNodes[e]),h+=1;break}}else this.liCollections[n]&&this.liCollections[n].parentNode?this.liCollections[n].parentNode.insertBefore(l[h],this.liCollections[n]):e&&"listbox"===this.getModuleName()?this.ulElement.insertBefore(l[h],this.ulElement.childNodes[e+h]):this.ulElement.appendChild(l[h]);var I=[].slice.call(this.liCollections);I.splice(n,0,l[h]),this.liCollections=I,n+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}"listbox"===this.getModuleName()&&this.isReact&&this.renderReactTemplates(),(o||0===e)&&this.updateSelection(),this.addedNewItem=!0},e.prototype.isDisabledElement=function(t){return!(!t||!t.classList.contains("e-disabled"))},e.prototype.isDisabledItemByIndex=function(t){return!(!this.fields.disabled||!this.liCollections)&&this.isDisabledElement(this.liCollections[t])},e.prototype.disableListItem=function(t){t.classList.add("e-disabled"),t.setAttribute("aria-disabled","true"),t.setAttribute("aria-selected","false")},e.prototype.validationAttribute=function(t,e){var i=t.getAttribute("name")?t.getAttribute("name"):t.getAttribute("id");e.setAttribute("name",i),t.removeAttribute("name");for(var n=["required","aria-required","form"],s=0;s<n.length;s++)if(t.getAttribute(n[s])){var r=t.getAttribute(n[s]);e.setAttribute(n[s],r),t.removeAttribute(n[s])}},e.prototype.setZIndex=function(){},e.prototype.updateActionCompleteData=function(t,e,i){},e.prototype.updateAddItemList=function(t,e){},e.prototype.updateDataList=function(){},e.prototype.getDataByValue=function(t){if(!y(this.listData)){var e=this.typeOfData(this.listData).typeof;if("string"===e||"number"===e||"boolean"===e)for(var i=0,n=this.listData;i<n.length;i++){if(!y(o=n[i])&&o===t)return o}else for(var s=0,r=this.listData;s<r.length;s++){var o;if(!y(o=r[s])&&c(this.fields.value?this.fields.value:"value",o)===t)return o}}return null},e.prototype.destroy=function(){document&&(K.remove(document,"scroll",this.updateGroupFixedHeader),document.body.contains(this.list)&&(K.remove(this.list,"scroll",this.setFloatingHeader),y(this.rippleFun)||this.rippleFun(),at(this.list))),this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.rippleFun=null,t.prototype.destroy.call(this)},ej([Bt({text:null,value:null,iconCss:null,groupBy:null,disabled:null},ij)],e.prototype,"fields",void 0),ej([jt(null)],e.prototype,"itemTemplate",void 0),ej([jt(null)],e.prototype,"groupTemplate",void 0),ej([jt("No records found")],e.prototype,"noRecordsTemplate",void 0),ej([jt("Request failed")],e.prototype,"actionFailureTemplate",void 0),ej([jt("None")],e.prototype,"sortOrder",void 0),ej([jt([])],e.prototype,"dataSource",void 0),ej([jt(null)],e.prototype,"query",void 0),ej([jt("StartsWith")],e.prototype,"filterType",void 0),ej([jt(!0)],e.prototype,"ignoreCase",void 0),ej([jt(1e3)],e.prototype,"zIndex",void 0),ej([jt(!1)],e.prototype,"ignoreAccent",void 0),ej([jt()],e.prototype,"locale",void 0),ej([Ut()],e.prototype,"actionBegin",void 0),ej([Ut()],e.prototype,"actionComplete",void 0),ej([Ut()],e.prototype,"actionFailure",void 0),ej([Ut()],e.prototype,"select",void 0),ej([Ut()],e.prototype,"dataBound",void 0),ej([Ut()],e.prototype,"created",void 0),ej([Ut()],e.prototype,"destroyed",void 0),e=ej([Ft],e)}(_e),yj="",vj="",bj="",Cj=[],Ij="";function Mj(t,e,i,n,s,r,o,a,l){var h;if(r&&""!==yj?yj===vj&&(bj=String.fromCharCode(t)):""!==bj?(yj=bj+String.fromCharCode(t),bj=""):yj+=String.fromCharCode(t),a?(setTimeout(function(){bj=""},700),setTimeout(function(){yj=""},3e3)):setTimeout(function(){yj=""},1e3),yj=n?yj.toLowerCase():yj,Ij!==s||vj!==yj||l){var c=e,d=yj.length,p=void 0;m=i=i?i+1:0;Cj=[];do{m===c.length&&(m=-1),p=c[h=-1===m?0:m],(n?p.innerText.toLowerCase():p.innerText).substr(0,d)===yj&&Cj.push(c[h]),m++}while(m!==i);if(vj=yj,Ij=s,a){for(var u=!1,g=0;g<Cj.length;g++)if(o&&Cj[g].textContent.toLowerCase()===o.toLowerCase()){h=g,u=!0;break}return o&&u&&(h+=1),Cj[h]?Cj[h]:Cj[0]}return Cj[0]}for(var m=0;m<Cj.length;m++){if(Cj[m].classList.contains("e-active")){h=m;break}if(o&&Cj[m].textContent.toLowerCase()===o.toLowerCase()){h=m;break}}return h+=1,a?Cj[h]&&Cj.length-1!==h?Cj[h]:Cj[Cj.length]:Cj[h]?Cj[h]:Cj[0]}function Sj(t,e,i,n,s,r,o,a){var l=e;n=null==n||n;var h={item:null,index:null};if(t&&t.length){var c=t.length,d=n?t.toLocaleLowerCase():t;d=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(d);for(var p=function(t,l){var p,u=l[t];if(e&&s){var g=u,m=r.text.split(".");s.filter(function(t){Array.prototype.slice.call(m).forEach(function(e){("object"===o&&!t.isHeader&&-1!==g.textContent.toString().indexOf(t[e])&&null!=t[r.value]&&g.getAttribute("data-value")===t[r.value].toString()||"string"===o&&-1!==g.textContent.toString().indexOf(t))&&(p="object"===o?t[e]:t)})})}var f=s&&p?(n?p.toString().toLocaleLowerCase():p).replace(/^\s+|\s+$/g,""):(n?u.textContent.toLocaleLowerCase():u.textContent).replace(/^\s+|\s+$/g,"");if(a&&f&&d&&(f=f.normalize("NFD").replace(/[\u0300-\u036f]/g,""),d=d.normalize("NFD").replace(/[\u0300-\u036f]/g,"")),"Equal"===i&&f===d||"StartsWith"===i&&f.substr(0,c)===d||"EndsWith"===i&&f.substr(f.length-d.length)===d||"Contains"===i&&new RegExp(d,"g").test(f))return h.item=u,h.index=t,{value:{item:u,index:t}}},u=0,g=l;u<g.length;u++){var m=p(u,g);if("object"==typeof m)return m.value}return h}return h}var xj=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),wj=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Dj={root:"e-dropdownlist",hover:aj,selected:oj,rtl:sj,li:dj,disable:uj,base:nj,focus:cj,content:rj,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",resizeIcon:"e-resizer-right e-icons",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden",virtualList:"e-list-item e-virtual-list"},Ej={container:null,buttons:[]},Tj=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isListSearched=!1,n.preventChange=!1,n.isTouched=!1,n.isFocused=!1,n.autoFill=!1,n.isUpdateHeaderHeight=!1,n.isUpdateFooterHeight=!1,n.isReactTemplateUpdate=!1,n}return xj(e,t),e.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),t.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},e.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},e.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},e.prototype.requiredModules=function(){var t=[];return this.enableVirtualization&&t.push({args:[this],member:"VirtualScroll"}),t},e.prototype.renderList=function(e,i){t.prototype.render.call(this,e,i),this.dataSource instanceof dC||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.enableVirtualization&&this.isFiltering()&&"combobox"===this.getModuleName()&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+dj),this.ulElement=this.list.querySelector("ul")),this.unWireListEvents(),this.wireListEvents()},e.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var t=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?mt(t,["e-label-top"],["e-label-bottom"]):mt(t,["e-label-bottom"],["e-label-top"])}},e.prototype.resetHandler=function(t){t.preventDefault(),this.clearAll(t),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},e.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!y(this.ulElement)){var t=this.fields.disabled?this.ulElement.querySelector("."+Dj.li+":not(.e-disabled)"):this.ulElement.querySelector("."+Dj.li);this.enableVirtualization&&(t=this.liCollections[this.skeletonCount]),t&&t.classList.add(Dj.focus)}},e.prototype.clearAll=function(t,e){this.previousItemData=y(this.itemData)?null:this.itemData,!y(e)&&(y(e)||!y(e.dataSource)&&(e.dataSource instanceof dC||0!==e.dataSource.length))||(this.isActive=!0,this.resetSelection(e));var i=this.getItemData();if(!this.allowObjectBinding&&this.previousValue===i.value||this.allowObjectBinding&&this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom?this.value?this.value:i:i.value?this.getDataByValue(i.value):i]))return this.checkAndResetCache(),void(this.enableVirtualization&&this.list&&this.updateInitialData());this.onChangeEvent(t),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData()},e.prototype.resetSelection=function(t){this.list&&(y(t)||!y(t.dataSource)&&(t.dataSource instanceof dC||0!==t.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!y(this.actionCompleteData.ulElement)&&!y(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(t.dataSource))),y(this.hiddenElement)||(this.hiddenElement.innerHTML=""),y(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(at(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},e.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if("class"===i){var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&tt([this.inputWrapper.container],n.split(" "))}else if("disabled"===i&&"disabled"===this.htmlAttributes[""+i])this.enabled=!1,this.setEnable();else if("readonly"!==i||y(this.htmlAttributes[""+i]))if("style"===i)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+i]);else if("aria-label"===i)"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.readonly?"dropdownlist"===this.getModuleName()&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+i]):this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+i]);else{var s=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||s.push("tabindex"),["name","required"].indexOf(i)>-1||0===i.indexOf("data")?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):s.indexOf(i)>-1?"placeholder"===i&&this.element.getAttribute("placeholder")!==this.htmlAttributes[""+i]?hI.setPlaceholder(this.htmlAttributes[""+i],this.inputElement):"placeholder"!==i&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i]):this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}else this.readonly=!0,this.dataBind()}"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.inputWrapper.container.removeAttribute("tabindex")},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},e.prototype.setEnableRtl=function(){y(this.inputElement)||y(this.inputElement.parentElement)||hI.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},e.prototype.setEnable=function(){hI.setEnabled(this.enabled,this.inputElement),this.enabled?(et([this.inputWrapper.container],Dj.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex),this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","false"),this.inputWrapper.container.removeAttribute("disabled"))):(this.hidePopup(),tt([this.inputWrapper.container],Dj.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1,this.inputWrapper&&this.inputWrapper.container&&(this.inputWrapper.container.setAttribute("aria-disabled","true"),this.inputWrapper.container.setAttribute("disabled","")))},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"drop-down-list"},e.prototype.preventTabIndex=function(t){"dropdownlist"===this.getModuleName()&&(t.tabIndex=-1)},e.prototype.targetElement=function(){return y(this.inputWrapper)?null:this.inputWrapper.container},e.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},e.prototype.getElementByText=function(t){return this.getElementByValue(this.getValueByText(t))},e.prototype.getElementByValue=function(t){for(var e,i=0,n=this.getItems();i<n.length;i++){var s=n[i];if(this.getFormattedValue(s.getAttribute("data-value"))===t){e=s;break}}return e},e.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof dC?this.initialRemoteRender=!0:this.updateValues()},e.prototype.isDisableItemValue=function(t){if("object"==typeof t){var e=JSON.parse(JSON.stringify(t))[this.fields.value];return this.isDisabledItemByIndex(this.getIndexByValue(e))}return this.isDisabledItemByIndex(this.getIndexByValue(t))},e.prototype.updateValues=function(){if(this.fields.disabled&&(null!=this.value&&(this.value=this.isDisableItemValue(this.value)?null:this.value),null!=this.text&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),null!=this.index&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),this.selectedValueInfo=this.viewPortInfo,y(this.value))if(this.text&&y(this.value)){var t=this.getElementByText(this.text);if(y(t))return void this.setProperties({text:null});this.setSelection(t,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else{var e=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;this.setSelection(this.getElementByValue(e),null)}this.setHiddenValue(),hI.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onBlurHandler=function(t){if(this.enabled){var e=t.relatedTarget,i=t.target,n=this.isPreventBlur;this.isPreventBlur=!1,!n||this.isDocumentClick||!this.isPopupOpen||y(i)&&(this.isFilterLayout()||!y(e))?this.isDocumentClick||!y(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(Dj.mobileFilter)?this.beforePopupOpen||(this.isDocumentClick=!1):(("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&e!==this.inputElement&&(document.activeElement!==e||document.activeElement===e&&i.classList.contains(Dj.inputFocus))||y(e)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&i!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(e)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(t),this.isTabKey=!1),!this.isRequested||this.isPopupOpen||this.isPreventBlur||(this.isActive=!1,this.beforePopupOpen=!1),this.isFocused=!1):"dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus()}},e.prototype.focusOutAction=function(t){this.isInteracted=!1,this.focusOut(t),this.onFocusOut(t)},e.prototype.onFocusOut=function(t){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&tt([this.inputWrapper.clearButton],Dj.clearIconHide),this.trigger("blur"))},e.prototype.onFocus=function(t){if(!this.isInteracted){this.isInteracted=!0;var e={isInteracted:!!t,event:t};this.trigger("focus",e)}this.updateIconState(),this.isFocused=!0},e.prototype.resizingWireEvent=function(){K.add(document,"mousemove",this.resizePopup,this),K.add(document,"mouseup",this.stopResizing,this),K.add(document,"touchmove",this.resizePopup,this),K.add(document,"touchend",this.stopResizing,this)},e.prototype.resizingUnWireEvent=function(){K.remove(document,"mousemove",this.resizePopup),K.remove(document,"mouseup",this.stopResizing),K.remove(document,"touchmove",this.resizePopup),K.remove(document,"touchend",this.stopResizing)},e.prototype.resetValueHandler=function(t){var e=ut(this.inputElement,"form");if(e&&t.target===e){var i=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=i}},e.prototype.wireEvent=function(){K.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),K.add(this.inputWrapper.container,"focus",this.focusIn,this),K.add(this.inputWrapper.container,"keypress",this.onSearch,this),K.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},e.prototype.bindCommonEvent=function(){K.add(this.targetElement(),"blur",this.onBlurHandler,this);var t=ut(this.inputElement,"form");t&&K.add(t,"reset",this.resetValueHandler,this),G.isDevice?this.keyboardModule=new si(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new si(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},e.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},e.prototype.bindClearEvent=function(){this.showClearButton&&K.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},e.prototype.unBindCommonEvent=function(){!y(this.inputWrapper)&&this.targetElement()&&K.remove(this.targetElement(),"blur",this.onBlurHandler);var t=this.inputElement&&ut(this.inputElement,"form");t&&K.remove(t,"reset",this.resetValueHandler),G.isDevice||this.keyboardModule.destroy(),this.showClearButton&&K.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},e.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?tt([this.inputWrapper.clearButton],Dj.clearIconHide):et([this.inputWrapper.clearButton],Dj.clearIconHide))},e.prototype.wireListEvents=function(){y(this.list)||(K.add(this.list,"click",this.onMouseClick,this),K.add(this.list,"mouseover",this.onMouseOver,this),K.add(this.list,"mouseout",this.onMouseLeave,this))},e.prototype.onSearch=function(t){32!==t.charCode&&13!==t.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=t,this.onServerIncrementalSearch(t))},e.prototype.onServerIncrementalSearch=function(t){this.isRequested||y(this.list)||y(this.list.querySelector("li"))||!this.enabled||this.readonly||this.incrementalSearch(t)},e.prototype.startResizing=function(t){this.isResizing=!0,this.trigger("resizeStart",t);var e=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,i=t instanceof MouseEvent?t.clientY:t.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=e,this.originalMouseY=i),this.resizingWireEvent(),t&&t.preventDefault()},e.prototype.resizePopup=function(t){if(this.isResizing){this.trigger("resizing",t);var e=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,i=t instanceof MouseEvent?t.clientY:t.touches[0].clientY,n=e-this.originalMouseX,s=i-this.originalMouseY;if(this.list&&this.list.parentElement){var r=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),o=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);r=r||100,o=o||120,this.resizeWidth=Math.max(this.originalWidth+n,r),this.resizeHeight=Math.max(this.originalHeight+s,o),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}t&&t.preventDefault()}},e.prototype.stopResizing=function(t){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",t),this.resizingUnWireEvent()),t&&t.preventDefault()},e.prototype.onMouseClick=function(t){var e=t.target;this.keyboardEvent=null;var i=ut(e,"."+dj);if(this.isValidLI(i)&&!this.isDisabledElement(i))if(this.setSelection(i,t),G.isDevice&&this.isFilterLayout())history.back();else{this.closePopup(100,t)}},e.prototype.onMouseOver=function(t){var e=ut(t.target,"."+dj);this.setHover(e)},e.prototype.setHover=function(t){this.enabled&&this.isValidLI(t)&&!t.classList.contains(aj)&&(this.removeHover(),tt([t],aj))},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.removeHover=function(){if(this.list){var t=this.list.querySelectorAll("."+aj);t&&t.length&&et(t,aj)}},e.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&"option"===t.getAttribute("role")},e.prototype.updateIncrementalItemIndex=function(t,e){this.incrementalStartIndex=t,this.incrementalEndIndex=e},e.prototype.incrementalSearch=function(t){if(this.liCollections.length>0)if(this.enableVirtualization){var e=!1,i=!1,n=this.ulElement.getElementsByClassName("e-active")[0],s=n?n.textContent:null;""===this.incrementalQueryString?(this.incrementalQueryString=String.fromCharCode(t.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(t.charCode).toLocaleLowerCase()===this.incrementalPreQueryString.toLocaleLowerCase()?i=!0:this.incrementalQueryString=String.fromCharCode(t.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||0===this.incrementalEndIndex)&&(e=!0,this.incrementalStartIndex=this.incrementalEndIndex,0===this.incrementalEndIndex?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0),(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount);for(var r=Mj(t.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,i,s,!0);y(r)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0,(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount),y(r=Mj(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,i,s,!0,!0)));)if(y(r)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}y(r)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0,(0!==this.viewPortInfo.startIndex||e)&&this.updateIncrementalView(0,this.itemCount),r=Mj(t.charCode,this.incrementalLiCollections,0,!0,this.element.id,i,s,!0,!0));var o=r&&this.getIndexByValue(r.getAttribute("data-value"));if(o)o-=this.skeletonCount;else for(var a=0;a<this.incrementalLiCollections.length;a++)if(!y(r)&&!y(r.getAttribute("data-value"))&&this.incrementalLiCollections[a].getAttribute("data-value")===r.getAttribute("data-value").toString()){o=a,o=this.incrementalStartIndex+o;break}if(o&&!(this.viewPortInfo.startIndex>=o&&o>=this.viewPortInfo.endIndex)){var l=o-(this.itemCount/2-2)>0?o-(this.itemCount/2-2):0,h=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(l,h)}if(y(r))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{if(this.getIndexByValue(r.getAttribute("data-value"))-this.skeletonCount>this.itemCount/2){l=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,h=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(l,h)}if(r=this.getElementByValue(r.getAttribute("data-value")),this.setSelection(r,t),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var c=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=c-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{r=void 0;if(this.fields.disabled){var d=this.list.querySelectorAll("."+dj+":not(.e-disabled)");r=Mj(t.charCode,d,this.activeIndex,!0,this.element.id)}else r=Mj(t.charCode,this.liCollections,this.activeIndex,!0,this.element.id);y(r)||(this.setSelection(r,t),this.setScrollPosition())}},e.prototype.hideSpinner=function(){y(this.spinnerElement)||(Lc(this.spinnerElement),et([this.spinnerElement],Dj.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.showSpinner=function(){y(this.spinnerElement)&&(this.spinnerElement=G.isDevice&&!y(this.filterInputObj)&&this.filterInputObj.buttons[1]||!y(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],tt([this.spinnerElement],Dj.disableIcon),mc({target:this.spinnerElement,width:G.isDevice?"16px":"14px"},this.createElement),Ac(this.spinnerElement))},e.prototype.keyActionHandler=function(t){if(this.enabled){this.keyboardEvent=t,this.isPreventKeyAction&&this.enableVirtualization&&t.preventDefault();var e="pageUp"===t.action||"pageDown"===t.action,i="dropdownlist"!==this.getModuleName()&&("home"===t.action||"end"===t.action);this.isEscapeKey="escape"===t.action,this.isTabKey=!this.isPopupOpen&&"tab"===t.action;var n="down"===t.action||"up"===t.action||"pageUp"===t.action||"pageDown"===t.action||"home"===t.action||"end"===t.action;if((!(this.isEditTextBox()||e||i)||this.isPopupOpen)&&!this.readonly){var s="tab"===t.action||"close"===t.action;if(!y(this.list)||this.isRequested||s||"escape"===t.action||(this.searchKeyEvent=t,this.enableVirtualization&&(!this.enableVirtualization||"autocomplete"===this.getModuleName()||"mousedown"===t.type||40!==t.keyCode&&38!==t.keyCode)||(this.renderList(t),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+dj),this.ulElement=this.list.querySelector("ul"))),y(this.list)||!y(this.liCollections)&&n&&0===this.liCollections.length||this.isRequested)return;switch((s&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===t.action)&&t.preventDefault(),this.isSelected="escape"!==t.action&&this.isSelected,this.isTyped=!n&&"escape"!==t.action&&this.isTyped,t.action){case"down":case"up":this.updateUpDownAction(t);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),t),t.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),t),t.preventDefault();break;case"home":case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||(this.showPopup(),t.preventDefault()));break;case"open":this.showPopup(t);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(t),this.focusDropDown(t);break;case"enter":this.selectCurrentItem(t);break;case"tab":this.selectCurrentValueOnTab(t);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))}}}},e.prototype.updateUpDownAction=function(t,e){if(!this.fields.disabled||!this.list||0!==this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length){if(this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName())y(h=this.getItemData().value)&&(h="null"),y(p=this.getIndexByValue(h))||(this.activeIndex=p);var i,n=this.list.querySelector("."+Dj.focus);if(this.isSelectFocusItem(n)&&!e){if(this.setSelection(n,t),this.enableVirtualization){var s=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.fields.groupBy&&(s=this.virtualListInfo&&0===this.virtualListInfo.startIndex?this.selectedLI.offsetHeight-s:s-this.selectedLI.offsetHeight),this.list.scrollTop=s-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!y(this.liCollections)){var r=this.activeIndex,o="down"===t.action?this.activeIndex+1:this.activeIndex-1;o=e?r:o;var a=0;"autocomplete"===this.getModuleName()&&(a="down"===t.action&&y(this.activeIndex)?0:this.liCollections.length-1,o=o<0?this.liCollections.length-1:o===this.liCollections.length?0:o);var l=void 0;if("autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&this.isPopupOpen)if(this.enableVirtualization)if(e)if("autocomplete"===this.getModuleName()){var h=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));l=this.getElementByValue(h)}else l=this.getElementByValue(this.getItemData().value);else l=y(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[o],l=y(l)||l.classList.contains("e-virtual-list")?null:l;else l=y(this.activeIndex)?this.liCollections[a]:this.liCollections[o];if(y(l)){if(this.enableVirtualization&&!this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&(this.viewPortInfo.endIndex!==this.totalItemCount&&"down"===t.action||0!==this.viewPortInfo.startIndex&&"up"===t.action)){if("down"===t.action){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter="combobox"===this.getModuleName()||this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter="combobox"!==this.getModuleName()&&this.isCustomFilter;h="null"!==this.liCollections[0].getAttribute("data-value")?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null;(c=this.getDataByValue(h))&&(this.itemData=c)}else if("up"===t.action){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter="combobox"===this.getModuleName()||this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter="combobox"!==this.getModuleName()&&this.isCustomFilter;var c;h="null"!==this.liCollections[this.liCollections.length-1].getAttribute("data-value")?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null;(c=this.getDataByValue(h))&&(this.itemData=c)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+dj),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(t,this.pageCount)}}else{var d=this.liCollections[this.skeletonCount]&&this.liCollections[this.skeletonCount].classList.contains("e-item-focus");if(this.setSelection(l,t),d&&this.enableVirtualization&&"autocomplete"===this.getModuleName()&&!e){s=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;s=this.virtualListInfo&&0===this.virtualListInfo.startIndex&&this.fields.groupBy?this.selectedLI.offsetHeight-s:s-this.selectedLI.offsetHeight,this.list.scrollTop=s-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}}if(this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var p;h=this.getItemData().value;y(p=this.getIndexByValueFilter(h,this.actionCompleteData.ulElement))||(this.activeIndex=p)}this.allowFiltering&&"dropdownlist"===this.getModuleName()&&this.filterInput&&(y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-item-focus")[0])?y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-active")[0])||ht(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):ht(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}));for(o=0;o<this.liCollections.length;o++)if(this.liCollections[o].classList.contains(Dj.focus)||this.liCollections[o].classList.contains(Dj.selected)){i=o;break}null!=i&&this.isDisabledElement(this.liCollections[i])&&("autocomplete"!==this.getModuleName()&&(this.liCollections.length-1===i&&"down"===t.action&&(t.action="up"),0===i&&"up"===t.action&&(t.action="down")),this.updateUpDownAction(t)),t.preventDefault()}},e.prototype.updateHomeEndAction=function(t,e){if("dropdownlist"===this.getModuleName()){var i=0;if("home"===t.action?(i=0,this.enableVirtualization&&this.isPopupOpen?i=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&0!==this.viewPortInfo.startIndex&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),i=this.getItems().length-1),t.preventDefault(),this.activeIndex===i)return void(e&&this.setSelection(this.liCollections[i],t));if(!this.enableVirtualization&&this.liCollections[i]&&this.liCollections[i].classList.contains("e-disabled"))return;this.setSelection(this.liCollections[i],t)}},e.prototype.selectCurrentValueOnTab=function(t){"autocomplete"===this.getModuleName()?this.selectCurrentItem(t):this.isPopupOpen&&(this.hidePopup(t),this.focusDropDown(t))},e.prototype.mobileKeyActionHandler=function(t){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0!==this.list||this.isRequested||(this.searchKeyEvent=t,this.renderList()),y(this.list)||!y(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===t.action&&this.selectCurrentItem(t)}},e.prototype.handleVirtualKeyboardActions=function(t,e){switch(t.action){case"down":case"up":null==this.itemData&&"autocomplete"!==this.getModuleName()||this.updateUpDownAction(t,!0);break;case"pageUp":this.activeIndex="autocomplete"===this.getModuleName()?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))+this.getPageCount()-1:this.getIndexByValue(this.previousValue),this.pageUpSelection(this.activeIndex-this.getPageCount(),t,!0),t.preventDefault();break;case"pageDown":this.activeIndex="autocomplete"===this.getModuleName()?this.getIndexByValue(this.selectedLI.getAttribute("data-value"))-this.getPageCount():this.getIndexByValue(this.previousValue),this.pageDownSelection(y(this.activeIndex)?2*this.getPageCount():this.activeIndex+this.getPageCount(),t,!0),t.preventDefault();break;case"home":case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(t,!0)}this.keyboardEvent=null},e.prototype.selectCurrentItem=function(t){if(this.isPopupOpen){var e=this.list.querySelector("."+Dj.focus);if(this.isDisabledElement(e))return;e&&(this.setSelection(e,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t)),this.hidePopup(t),this.focusDropDown(t)}else this.showPopup()},e.prototype.isSelectFocusItem=function(t){return!y(t)},e.prototype.pageUpSelection=function(t,e,i){var n=t>=0?this.liCollections[t+1]:this.liCollections[0];if(!this.enableVirtualization&&n&&n.classList.contains("e-disabled"))for(var s=t>=0?t+1:0;s<this.liCollections.length&&(!(n=this.liCollections[s])||n.classList.contains("e-disabled"));)if(--s<0)return;this.enableVirtualization&&null==this.activeIndex&&(n=this.liCollections.length>=t&&t>=0?this.liCollections[t+this.skeletonCount+1]:this.liCollections[0]),!y(n)&&n.classList.contains("e-virtual-list")&&(n=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(n,e),this.allowFiltering&&"dropdownlist"===this.getModuleName()&&(y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-item-focus")[0])?y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-active")[0])||ht(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):ht(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.PageUpDownSelection=function(t,e){this.enableVirtualization&&(y(t)||("autocomplete"===this.getModuleName()||t.classList.contains("e-active"))&&("autocomplete"!==this.getModuleName()||t.classList.contains("e-item-focus")))||this.setSelection(t,e)},e.prototype.pageDownSelection=function(t,e,i){var n=this.getItems(),s=t<=n.length?this.liCollections[t-1]:this.liCollections[n.length-1];if(!this.enableVirtualization&&s&&s.classList.contains("e-disabled"))for(;t>=0&&t<this.liCollections.length&&(!(s=t<=n.length?this.liCollections[t-1]:this.liCollections[n.length-1])||s.classList.contains("e-disabled"));)t++;this.enableVirtualization&&this.skeletonCount>0&&(s=(t="dropdownlist"===this.getModuleName()&&this.allowFiltering?t+1:t)<n.length?this.liCollections[t]:this.liCollections[n.length-1]),this.enableVirtualization&&null==this.activeIndex&&(s=t<=n.length?this.liCollections[t+this.skeletonCount-1]:this.liCollections[n.length-1]),this.PageUpDownSelection(s,e),this.allowFiltering&&"dropdownlist"===this.getModuleName()&&(y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-item-focus")[0])?y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-active")[0])||ht(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):ht(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.unWireEvent=function(){y(this.inputWrapper)||(K.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),K.remove(this.inputWrapper.container,"keypress",this.onSearch),K.remove(this.inputWrapper.container,"focus",this.focusIn),K.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},e.prototype.unWireListEvents=function(){this.list&&(K.remove(this.list,"click",this.onMouseClick),K.remove(this.list,"mouseover",this.onMouseOver),K.remove(this.list,"mouseout",this.onMouseLeave))},e.prototype.checkSelector=function(t){return'[id="'+t.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},e.prototype.onDocumentClick=function(t){var e=t.target;if(!y(this.popupObj)&&ut(e,this.checkSelector(this.popupObj.element.id))||y(this.inputWrapper)||this.inputWrapper.container.contains(t.target))e===this.inputElement||this.allowFiltering&&e===this.filterInput||"combobox"===this.getModuleName()&&!this.allowFiltering&&G.isDevice&&e===this.inputWrapper.buttons[0]||(this.isPreventBlur=(G.isIE||"edge"===G.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),t.preventDefault());else if(this.inputWrapper.container.classList.contains(Dj.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var i=this.isRequested;"combobox"===this.getModuleName()&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(t),this.isInteracted=!1,i||(this.onFocusOut(t),this.inputWrapper.container.classList.remove(Dj.inputFocus))}},e.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(Dj.inputFocus))},e.prototype.focusDropDown=function(t){!this.initial&&this.isFilterLayout()&&this.focusIn(t)},e.prototype.dropDownClick=function(t){if(3!==t.which&&2!==t.button&&(this.keyboardEvent=null,!this.targetElement().classList.contains(Dj.disable)&&this.inputWrapper.clearButton!==t.target)){var e=t.target;if(e===this.inputElement||this.allowFiltering&&e===this.filterInput||"combobox"===this.getModuleName()||t.preventDefault(),this.readonly)this.focusIn(t);else{this.isPopupOpen?(this.hidePopup(t),this.isFilterLayout()&&this.focusDropDown(t)):(this.focusIn(t),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(t));var i=this,n=this.dataSource instanceof dC&&this.groupTemplate?700:this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){i.cloneElements(),i.isSecondClick=!0,i.isSecondClick=!(i.isReact&&i.isFiltering()&&i.dataSource instanceof dC&&!i.list.querySelector("ul"))},n)}}},e.prototype.cloneElements=function(){if(this.list){var t=this.list.querySelector("ul");t&&(t=t.cloneNode?t.cloneNode(!0):t,this.actionCompleteData.ulElement=t)}},e.prototype.updateSelectedItem=function(t,e,i,n){var s=this;this.removeSelection(),t.classList.add(oj),this.removeHover();var r=null!==t.getAttribute("data-value")?this.getFormattedValue(t.getAttribute("data-value")):null,o=this.getDataByValue(r);if(this.initial||i||y(e))this.selectEventCallback(t,e,i,o,r),n&&this.setSelectOptions(t,e);else{var a=this.detachChanges(o);this.isSelected=!0;var l={e,item:t,itemData:a,isInteracted:!!e,cancel:!1};this.trigger("select",l,function(a){a.cancel?t.classList.remove(oj):(s.selectEventCallback(t,e,i,o,r),n&&s.setSelectOptions(t,e))})}},e.prototype.selectEventCallback=function(t,e,i,n,s){this.previousItemData=y(this.itemData)?null:this.itemData,this.itemData!==n&&(this.previousValue=y(this.itemData)?null:"object"!=typeof this.itemData||this.allowObjectBinding?this.itemData:this.checkFieldValue(this.itemData,this.fields.value.split("."))),this.item=t,this.itemData=n;var r=this.list.querySelector("."+cj);if(r&&et([r],cj),t.setAttribute("aria-selected","true"),y(s)&&(s="null"),this.allowFiltering&&!this.enableVirtualization&&"autocomplete"!==this.getModuleName()){var o=this.getIndexByValueFilter(s,this.actionCompleteData.ulElement);y(o)?this.activeIndex=this.getIndexByValue(s):this.activeIndex=o}else this.enableVirtualization&&null==this.activeIndex&&this.dataSource instanceof dC&&(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+dj),this.ulElement=this.list.querySelector("ul")),this.activeIndex=this.getIndexByValue(s)},e.prototype.activeItem=function(t){this.isValidLI(t)&&!t.classList.contains(oj)&&(this.removeSelection(),t.classList.add(oj),this.removeHover(),t.setAttribute("aria-selected","true"))},e.prototype.setValue=function(t){var e=this.getItemData();this.isTouched=!y(t),null===e.value?hI.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):hI.setValue(e.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():y(this.valueTempElement)||this.inputElement.previousSibling!==this.valueTempElement||(at(this.valueTempElement),this.inputElement.style.display="block"),y(e.value)||this.enableVirtualization||!this.allowFiltering||(this.activeIndex=this.getIndexByValueFilter(e.value,this.actionCompleteData.ulElement));var i=Dj.clearIcon,n=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+i);return this.isFiltering()&&n&&n.style.removeProperty("visibility"),!this.allowObjectBinding&&this.previousValue===e.value||this.allowObjectBinding&&null!=this.previousValue&&this.isObjectInArray(this.previousValue,[this.allowCustom&&this.isObjectCustomValue?this.value?this.value:e:e.value?this.getDataByValue(e.value):e])?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},e.prototype.setSelection=function(t,e){if(this.isValidLI(t)&&(!t.classList.contains(oj)||this.isPopupOpen&&this.isSelected&&t.classList.contains(oj)))this.updateSelectedItem(t,e,!1,!0);else if(this.setSelectOptions(t,e),this.enableVirtualization&&this.value){var i,n=this.isPrimitiveData?"":this.fields.value,s=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof dC){if((i=new dC(this.virtualGroupDataSource).executeLocal((new Gb).where(new Kb(n,"equal",s))))&&i.length>0){this.itemData=i[0];var r=this.getItemData(),o=this.allowObjectBinding?this.getDataByValue(r.value):r.value;(this.value===r.value&&this.text!==r.text||this.value!==r.value&&this.text===r.text)&&this.setProperties({text:r.text?r.text.toString():r.text,value:o})}}else if((i=new dC(this.dataSource).executeLocal((new Gb).where(new Kb(n,"equal",s))))&&i.length>0){this.itemData=i[0];r=this.getItemData(),o=this.allowObjectBinding?this.getDataByValue(r.value):r.value;(this.value===r.value&&this.text!==r.text||this.value!==r.value&&this.text===r.text)&&(this.setProperties({text:r.text?r.text.toString():r.text,value:o}),y(t)&&(this.previousValue=this.value))}}},e.prototype.setSelectOptions=function(t,e){this.list&&this.removeHover(),this.previousSelectedLI=y(this.selectedLI)?null:this.selectedLI,this.selectedLI=t,this.setValue(e)||((!this.isPopupOpen&&!y(t)||this.isPopupOpen&&!y(e)&&("keydown"!==e.type||"keydown"===e.type&&"enter"===e.action))&&(this.isSelectCustom=!1,this.onChangeEvent(e)),!this.isPopupOpen||y(this.selectedLI)||null===this.itemData||e&&"click"===e.type||this.setScrollPosition(e),"mozilla"!==G.info.name&&this.targetElement()&&(ht(this.targetElement(),{"aria-describedby":""!==this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),!this.isPopupOpen||y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-item-focus")[0])?!this.isPopupOpen||y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-active")[0])||ht(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):ht(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},e.prototype.dropdownCompiler=function(t){var e=!1;if("function"!=typeof t&&t)try{e=!!document.querySelectorAll(t).length}catch(t){e=!1}return e},e.prototype.setValueTemplate=function(){this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(at(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:Dj.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var t=this.dropdownCompiler(this.valueTemplate),e=("function"!=typeof this.valueTemplate&&t?Hi(document.querySelector(this.valueTemplate).innerHTML.trim()):Hi(this.valueTemplate))(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);e&&e.length>0&&rt(e,this.valueTempElement),this.renderReactTemplates()},e.prototype.removeSelection=function(){if(this.list){var t=this.list.querySelectorAll("."+oj);t.length&&(et(t,oj),t[0].removeAttribute("aria-selected"))}},e.prototype.getItemData=function(){var t,e,i,n=this.fields;return y(t=this.itemData)||(e=c(n.value,t),i=c(n.text,t)),{value:y(t)||v(e)?t:e,text:y(t)||v(e)?t:i}},e.prototype.onChangeEvent=function(t,e){var i=this,n=this.getItemData(),s=this.isSelectCustom?null:this.activeIndex;if(this.enableVirtualization){var r=this.dataSource instanceof dC?this.virtualGroupDataSource:this.dataSource;if(n.value&&r&&r.length>0){var o=r.findIndex(function(t){return!y(n.value)&&c(i.fields.value,t)===n.value});-1!==o&&(s=o)}}var a=this.allowObjectBinding?e?this.value:this.getDataByValue(n.value):n.value;this.setProperties({index:s,text:n.text?n.text.toString():n.text,value:a},!0),this.detachChangeEvent(t)},e.prototype.detachChanges=function(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):t},e.prototype.detachChangeEvent=function(t){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.enableVirtualization?this.getIndexByValue(this.value):this.index,this.typedString=y(this.text)?"":this.text,!this.initial){var e=this.detachChanges(this.itemData),i=void 0;i="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var n={e:t,item:this.item,itemData:e,previousItem:this.previousSelectedLI,previousItemData:i,isInteracted:!!t,value:this.value,element:this.element,event:t};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}!y(this.value)&&""!==this.value||"Always"===this.floatLabelType||et([this.inputWrapper.container],"e-valid-input")},e.prototype.setHiddenValue=function(){if(y(this.value))this.hiddenElement.innerHTML="";else{var t=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;if(this.hiddenElement.querySelector("option"))(e=this.hiddenElement.querySelector("option")).textContent=this.text,e.setAttribute("value",t.toString());else if(!y(this.hiddenElement)){var e,i=document.createElement("option");i.text=this.text,i.setAttribute("selected",""),this.hiddenElement.appendChild(i),(e=this.hiddenElement.querySelector("option")).setAttribute("value",t.toString())}}},e.prototype.onFilterUp=function(t){if(t.ctrlKey&&86===t.keyCode||!this.isValidKey&&40!==t.keyCode&&38!==t.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,this.filterArgs=t,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,t.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(t)),this.preventAltUp=!1,"autocomplete"!==this.getModuleName()||y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-item-focus")[0])||ht(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),t.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(t)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(t),"autocomplete"===this.getModuleName()&&this.hidePopup())),t.preventDefault();break;default:this.isFiltering()&&"combobox"===this.getModuleName()&&y(this.list)&&(this.getInitialData=!0,this.renderList(),this.isSecondClick||this.isDropDownClick||this.executeCloneElements()),this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.getInitialData||this.searchLists(t),(this.enableVirtualization&&"autocomplete"!==this.getModuleName()||"autocomplete"===this.getModuleName()&&!(this.dataSource instanceof dC)||"autocomplete"===this.getModuleName()&&this.dataSource instanceof dC&&0!==this.totalItemCount)&&this.getFilteringSkeletonCount()}},e.prototype.onFilterDown=function(t){switch(t.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,t.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&t.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},e.prototype.removeFillSelection=function(){if(this.isInteracted){var t=this.getSelectionPoints();this.inputElement.setSelectionRange(t.end,t.end)}},e.prototype.getQuery=function(t){var e;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){e=t?t.clone():this.query?this.query.clone():new Gb;var i=""===this.typedString?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof dC||"string"!==n)&&"number"!==n){if("combobox"!==this.getModuleName()||this.isFiltering()&&"combobox"===this.getModuleName()&&""!==this.typedString){var s=this.fields.text?this.fields.text:"";e.where(s,i,this.typedString,this.ignoreCase,this.ignoreAccent)}}else e.where("",i,this.typedString,this.ignoreCase,this.ignoreAccent)}else e=this.enableVirtualization&&!y(this.customFilterQuery)?this.customFilterQuery.clone():t?t.clone():this.query?this.query.clone():new Gb;if(this.enableVirtualization&&0!==this.viewPortInfo.endIndex){var r=this.getTakeValue(),o=!1;if(e)for(var a=0;a<e.queries.length;a++)if("onSkip"===e.queries[a].fn){o=!0;break}var l=0,h=0;if(e&&e.queries.length>0)for(a=0;a<e.queries.length;a++)"onSkip"===e.queries[a].fn&&(h=e.queries[a].e.nos),"onTake"===e.queries[a].fn&&(l=r<=e.queries[a].e.nos?e.queries[a].e.nos:r);if(l<=0&&this.query&&this.query.queries.length>0)for(a=0;a<this.query.queries.length;a++)"onTake"===this.query.queries[a].fn&&(l=r<=this.query.queries[a].e.nos?this.query.queries[a].e.nos:r);if(e&&e.queries.length>0)for(a=0;a<e.queries.length;a++)"onSkip"!==e.queries[a].fn?"onTake"===e.queries[a].fn&&(l=e.queries[a].e.nos<=l?l:e.queries[a].e.nos,e.queries.splice(a,1),--a):(h=e.queries[a].e.nos,e.queries.splice(a,1),o=!1,--a);!this.allowFiltering&&this.isPopupOpen&&o||(h>0?e.skip(h):e.skip(this.virtualItemStartIndex)),this.isIncrementalRequest?e.take(this.incrementalEndIndex):l>0?e.take(l):e.take(r),e.requiresCount()}return e},e.prototype.getSelectionPoints=function(){var t=this.inputElement;return{start:Math.abs(t.selectionStart),end:Math.abs(t.selectionEnd)}},e.prototype.performFiltering=function(t){var e=this;this.checkAndResetCache(),this.isRequesting=!1;var i={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(t,n,s){i.cancel||(e.isCustomFilter=!0,e.customFilterQuery=n?n.clone():n,e.filteringAction(t,n,s))},baseEventArgs:t,cancel:!1};this.trigger("filtering",i,function(t){t.cancel||e.isCustomFilter||t.preventDefaultAction||e.filteringAction(e.dataSource,null,e.fields)})},e.prototype.searchLists=function(t){(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+Dj.clearIcon))&&(this.filterInput.parentElement.querySelector("."+Dj.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible");this.isDataFetched=!1,this.isFiltering()&&(""!==this.typedString&&this.debounceDelay>0?this.debouncedFiltering(t,this.debounceDelay):this.performFiltering(t))},e.prototype.filter=function(t,e,i){this.isCustomFilter=!0,this.filteringAction(t,e,i)},e.prototype.filteringAction=function(t,e,i){if(!y(this.filterInput)){this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value||this.getInitialData);var n=this.list.classList.contains(lj);if(""!==this.filterInput.value.trim()||this.itemTemplate){if(this.isNotSearchList=!1,e=""===this.filterInput.value.trim()?null:e,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(t,i,e),"dropdownlist"===this.getModuleName()&&this.list.classList.contains(lj)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),ht(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&n&&!this.list.classList.contains(lj)){if(!this.list.querySelector(".e-virtual-ddl-content"))(s=this.createElement("div",{className:"e-virtual-ddl-content"})).style.cssText=this.getTransformValues(),this.list.appendChild(s).appendChild(this.list.querySelector(".e-list-parent"));if(!this.list.querySelector(".e-virtual-ddl"))(r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"})).style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(r)}}else{if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!y(this.actionCompleteData.ulElement)&&!y(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.isFiltering()&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(t,i,e),n&&!this.list.classList.contains(lj))){var s,r;if(!this.list.querySelector(".e-virtual-ddl-content"))(s=this.createElement("div",{className:"e-virtual-ddl-content"})).style.cssText=this.getTransformValues(),this.list.appendChild(s).appendChild(this.list.querySelector(".e-list-parent"));if(!this.list.querySelector(".e-virtual-ddl"))(r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"})).style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(r)}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,y(this.itemData)||"dropdownlist"!==this.getModuleName()||(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates(),this.filterInput&&""===this.filterInput.value&&"combobox"===this.getModuleName()&&this.executeCloneElements()}},e.prototype.setSearchBox=function(t){if(this.isFiltering()){var e=t.querySelector("."+Dj.filterParent)?t.querySelector("."+Dj.filterParent):this.createElement("span",{className:Dj.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Dj.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var i=!1;return G.isDevice&&this.isDeviceFullScreen&&(i=!0),this.filterInputObj=hI.createInput({element:this.filterInput,buttons:i?[Dj.backIcon,Dj.filterBarClearIcon]:[Dj.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),y(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?tt([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&tt([this.filterInputObj.container],"e-filled")),rt([this.filterInputObj.container],e),st([e],t),ht(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+Dj.clearIcon),!G.isDevice&&this.clearIconElement&&(K.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),G.isDevice?this.searchKeyModule=new si(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new si(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),K.add(this.filterInput,"input",this.onInput,this),K.add(this.filterInput,"keyup",this.onFilterUp,this),K.add(this.filterInput,"keydown",this.onFilterDown,this),K.add(this.filterInput,"blur",this.onBlurHandler,this),K.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return Ej},e.prototype.onInput=function(t){!y(t)&&!y(t.data)&&t.data.length>1&&this.autoFill&&("combobox"===this.getModuleName()||"autocomplete"===this.getModuleName())&&(this.inputElement.value=t.data),this.isValidKey=!0,"combobox"===this.getModuleName()&&this.updateIconState(),G.isDevice&&"mozilla"===G.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(t))},e.prototype.pasteHandler=function(t){var e=this;setTimeout(function(){e.typedString=e.filterInput.value,"combobox"===e.getModuleName()&&e.isFiltering()&&y(e.list)&&e.renderList(),e.searchLists(t)})},e.prototype.onActionFailure=function(e){t.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},e.prototype.getTakeValue=function(){return this.allowFiltering&&"dropdownlist"===this.getModuleName()&&G.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},e.prototype.onActionComplete=function(e,i,n,s){var r=this;if(this.dataSource instanceof dC&&!y(n)&&!this.virtualGroupDataSource&&(this.totalItemCount=n.count),!this.isNotSearchList||this.enableVirtualization){if(this.getInitialData)return this.updateActionCompleteDataValues(e,i),this.enableVirtualization&&this.updateSelectElementData(this.allowFiltering),this.getInitialData=!1,this.isReactTemplateUpdate=!0,this.typedString=this.filterInput.value,void this.searchLists(this.filterArgs);var o=this.itemCount;if(this.isActive||!y(e)){var a=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(t.prototype.onActionComplete.call(this,e,i,n),this.skeletonCount=0!==this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(!(this.dataSource instanceof dC)||this.dataSource instanceof dC&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!y(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!y(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),y(e)||ht(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof dC){var l=y(this.fields.value)?this.fields.text:this.fields.value,h=this.allowObjectBinding&&!y(this.value)?c(l,this.value):this.value,d=this.fields.value.split("."),p=i.some(function(t){return y(t[l])&&d.length>1?r.checkFieldValue(t,d)===h:t[l]===h});this.enableVirtualization&&this.virtualGroupDataSource&&(p=this.virtualGroupDataSource.some(function(t){return y(t[l])&&d.length>1?r.checkFieldValue(t,d)===h:t[l]===h})),p?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new Kb(l,"equal",h))).then(function(t){t.result.length>0?(r.enableVirtualization||r.addItem(t.result,i.length),r.updateValues()):r.updateValues()})}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();if("autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped){if((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||y(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof dC||!y(this.dataSource)&&!y(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&("EJS-COMBOBOX"===this.element.tagName||this.isReact)&&this.allowFiltering?setTimeout(function(){r.updateActionCompleteDataValues(e,i)},0):this.updateActionCompleteDataValues(e,i)),this.isDynamicData){var u=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(u),this.selectedLI=this.getElementByValue(u),this.isDynamicData=!1}if((this.allowCustom||this.allowFiltering&&!this.isValueInList(i,this.value)&&this.dataSource instanceof dC)&&!this.enableVirtualization)this.addNewItem(i,a);else if((this.allowCustom||this.allowFiltering&&this.isValueInList(i,this.value))&&!this.enableVirtualization){var g=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;!y(this.value)&&a&&a.getAttribute("data-value")===g.toString()&&this.addNewItem(i,a)}(!y(this.itemData)||y(this.itemData)&&this.enableVirtualization)&&(this.getSkeletonCount(),this.skeletonCount=0!==this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(!(this.dataSource instanceof dC)||this.dataSource instanceof dC&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.focusIndexItem()),this.enableVirtualization&&this.updateActionCompleteDataValues(e,i)}else if(this.enableVirtualization&&"autocomplete"!==this.getModuleName()&&!this.isFiltering()){g=this.getItemData().value;this.activeIndex=this.getIndexByValue(g);var m=this.findListElement(this.list,"li","data-value",g);this.selectedLI=m}else this.enableVirtualization&&"autocomplete"===this.getModuleName()&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(n),this.enableVirtualization&&(this.list.querySelector(".e-virtual-list")||(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"))),this.enableVirtualization&&o!==this.itemCount&&this.resetList(this.dataSource,this.fields))}}else this.isNotSearchList=!1},e.prototype.isValueInList=function(t,e){if(Array.isArray(t)){for(var i=0;i<t.length;i++)if(t[i]===e)return!0}else if("object"==typeof t&&null!==t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===e)return!0;return!1},e.prototype.checkFieldValue=function(t,e){var i=t;return e.forEach(function(t){i=i[t]}),i},e.prototype.updateActionCompleteDataValues=function(t,e){this.actionCompleteData={ulElement:t.cloneNode(!0),list:e,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},e.prototype.addNewItem=function(t,e){var i=this;if(!y(this.itemData)&&!y(e)){var n=this.getItemData().value;t.some(function(t){return("string"==typeof t||"number"==typeof t||"boolean"==typeof t)&&t===n||c(i.fields.value,t)===n})||this.addItem(this.itemData)}},e.prototype.updateActionCompleteData=function(t,e,i){var n=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){n.actionCompleteDataUpdate(t,e,i)},0):this.actionCompleteDataUpdate(t,e,i))},e.prototype.actionCompleteDataUpdate=function(t,e,i){null!==i?this.actionCompleteData.ulElement.insertBefore(t.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[i]):this.actionCompleteData.ulElement.appendChild(t.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list&&this.actionCompleteData.list.indexOf(e)<0&&this.actionCompleteData.list.push(e)},e.prototype.focusIndexItem=function(){var t=this.getItemData().value;this.activeIndex=this.enableVirtualization&&!y(t)||!this.enableVirtualization?this.getIndexByValue(t):this.activeIndex;var e=this.findListElement(this.list,"li","data-value",t);this.selectedLI=e,this.activeItem(e),this.enableVirtualization&&y(e)||this.removeFocus()},e.prototype.updateSelection=function(){var t=this.list.querySelector("."+oj);t?(this.setProperties({index:this.getIndexByValue(t.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+dj).classList.add(Dj.focus))},e.prototype.updateSelectionList=function(){if(!(this.list&&this.list.querySelector(".e-active"))&&!y(this.value)&&"autocomplete"!==this.getModuleName()){var t=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value):this.value,e=this.findListElement(this.list,"li","data-value",t);e&&e.classList.add("e-active")}},e.prototype.removeFocus=function(){var t=this.list.querySelectorAll("."+Dj.focus);t&&t.length&&et(t,Dj.focus)},e.prototype.renderPopup=function(t){var e=this;if(this.popupObj&&document.body.contains(this.popupObj.element))this.refreshPopup();else{this.trigger("beforeOpen",{cancel:!1},function(i){var n;if(i.cancel)e.beforePopupOpen=!1;else{var s=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddl e-popup "+(null!==e.cssClass?e.cssClass:"")});s.setAttribute("aria-label",e.element.id),s.setAttribute("role","dialog");var r=e.setSearchBox(s);if(e.listContainerHeight=e.allowFiltering&&"dropdownlist"===e.getModuleName()&&G.isDevice?S(Math.round(window.outerHeight).toString()+"px"):S(e.popupHeight),e.headerTemplate&&(e.setHeaderTemplate(s),e.isUpdateHeaderHeight=0!==e.header.offsetHeight),rt([e.list],s),e.footerTemplate&&(e.setFooterTemplate(s),e.isUpdateFooterHeight=0!==e.footer.offsetHeight),document.body.appendChild(s),s.style.top="0px",n=s.clientHeight,e.enableVirtualization&&(e.itemTemplate||e.isAngular)){var o=s.querySelectorAll("li.e-list-item:not(.e-virtual-list)");e.listItemHeight=o.length>0?Math.ceil(o[0].getBoundingClientRect().height)+parseInt(window.getComputedStyle(o[0]).marginBottom,10):0}if(e.enableVirtualization&&!e.list.classList.contains(lj)){if(e.getSkeletonCount(),e.skeletonCount=e.totalItemCount<2*e.itemCount&&(!(e.dataSource instanceof dC)||e.dataSource instanceof dC&&e.totalItemCount<=e.itemCount)?0:e.skeletonCount,e.list.querySelector(".e-virtual-ddl-content"))e.list.getElementsByClassName("e-virtual-ddl-content")[0].style=e.getTransformValues();else{var a=e.createElement("div",{className:"e-virtual-ddl-content"});a.style.cssText=e.getTransformValues(),e.list.appendChild(a).appendChild(e.list.querySelector(".e-list-parent"))}if(e.UpdateSkeleton(),e.liCollections=e.list.querySelectorAll("."+dj),e.virtualItemCount=e.itemCount,e.list.querySelector(".e-virtual-ddl"))e.list.getElementsByClassName("e-virtual-ddl")[0].style=e.GetVirtualTrackHeight();else{var l=e.createElement("div",{id:e.element.id+"_popup",className:"e-virtual-ddl"});l.style.cssText=e.GetVirtualTrackHeight(),s.querySelector(".e-dropdownbase").appendChild(l)}}if(s.style.visibility="hidden","auto"!==e.popupHeight){if(e.searchBoxHeight=0,y(r.container)||"combobox"===e.getModuleName()||"autocomplete"===e.getModuleName()||(e.searchBoxHeight=r.container.parentElement.getBoundingClientRect().height,e.listContainerHeight=(parseInt(e.listContainerHeight,10)-e.searchBoxHeight).toString()+"px"),e.headerTemplate){e.header=e.header?e.header:s.querySelector(".e-ddl-header");var h=Math.round(e.header.getBoundingClientRect().height);e.listContainerHeight=(parseInt(e.listContainerHeight,10)-(h+e.searchBoxHeight)).toString()+"px"}if(e.footerTemplate){e.footer=e.footer?e.footer:s.querySelector(".e-ddl-footer");h=Math.round(e.footer.getBoundingClientRect().height);e.listContainerHeight=(parseInt(e.listContainerHeight,10)-(h+e.searchBoxHeight)).toString()+"px"}e.list.style.maxHeight=(parseInt(e.listContainerHeight,10)-2).toString()+"px",s.style.maxHeight=S(e.popupHeight)}else s.style.height="auto";var c=0,d=void 0;if(e.isPreventScrollAction=!0,!y(e.selectedLI)&&!y(e.activeIndex)&&e.activeIndex>=0||e.enableVirtualization?e.setScrollPosition():e.list.scrollTop=0,G.isDevice&&e.isDeviceFullScreen&&!e.allowFiltering&&("dropdownlist"===e.getModuleName()||e.isDropDownClick&&"combobox"===e.getModuleName())){c=e.getOffsetValue(s);var p=e.isEmptyList()?e.list:e.liCollections[0];y(e.inputElement)||(d=-(parseInt(getComputedStyle(p).textIndent,10)-parseInt(getComputedStyle(e.inputElement).paddingLeft,10)+parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth,10)))}e.createPopup(s,c,d),e.popupContentElement=e.popupObj.element.querySelector(".e-content"),e.getFocusElement(),e.checkCollision(s),G.isDevice&&(parseInt(e.popupWidth.toString(),10)>window.outerWidth&&("dropdownlist"!==e.getModuleName()||!e.allowFiltering)&&e.popupObj.element.classList.add("e-wide-popup"),e.popupObj.element.classList.add(Dj.device),("dropdownlist"===e.getModuleName()||"combobox"===e.getModuleName()&&!e.allowFiltering&&e.isDropDownClick)&&(e.popupObj.collision={X:"fit",Y:"fit"}),e.isFilterLayout()&&e.isDeviceFullScreen&&(e.popupObj.element.classList.add(Dj.mobileFilter),e.popupObj.position={X:0,Y:0},e.popupObj.dataBind(),ht(e.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),tt([document.body,e.popupObj.element],Dj.popupFullScreen),e.setSearchBoxPosition(),e.backIconElement=r.container.querySelector(".e-back-icon"),e.clearIconElement=r.container.querySelector("."+Dj.clearIcon),K.add(e.backIconElement,"click",e.clickOnBackIcon,e),K.add(e.clearIconElement,"click",e.clearText,e))),s.style.visibility="visible",tt([s],"e-popup-close");for(var u=0,g=e.popupObj.getScrollableParent(e.inputWrapper.container);u<g.length;u++){var m=g[u];K.add(m,"scroll",e.scrollHandler,e)}y(e.list)||(e.unWireListEvents(),e.wireListEvents()),e.selectedElementID=e.selectedLI?e.selectedLI.id:null,e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){(e.value||e.list.querySelector(".e-active"))&&(e.updateSelectionList(),e.selectedValueInfo&&e.viewPortInfo&&e.viewPortInfo.offsets.top?e.list.scrollTop=e.viewPortInfo.offsets.top:e.scrollBottom(!0,!0))},5)),ht(e.targetElement(),{"aria-expanded":"true","aria-owns":e.element.id+"_popup","aria-controls":e.element.id}),"dropdownlist"!==e.getModuleName()&&e.list.classList.contains("e-nodata")&&(ht(e.targetElement(),{"aria-activedescendant":"no-record"}),e.popupContentElement.setAttribute("role","status"),e.popupContentElement.setAttribute("id","no-record")),e.inputElement.setAttribute("aria-expanded","true"),e.inputElement.setAttribute("aria-controls",e.element.id+"_popup"),tt([e.isFiltering()?e.filterInput.parentElement:e.inputWrapper.container],[Dj.inputFocus]);e.beforePopupOpen=!0;var f={popup:e.popupObj,event:t,cancel:!1,animation:{name:"FadeIn",duration:100}};if(e.trigger("open",f,function(t){t.cancel?(e.beforePopupOpen=!1,e.destroyPopup()):(y(e.inputWrapper)||tt([e.inputWrapper.container],[Dj.iconAnimation]),e.renderReactTemplates(),e.isReact&&e.isFiltering()&&e.dataSource instanceof dC&&e.list.querySelector("ul")&&!e.isSecondClick&&e.executeCloneElements(),y(e.popupObj)||e.popupObj.show(new qt(t.animation),1e3===e.zIndex?e.element:null),e.isReact&&setTimeout(function(){if(e.popupHeight&&e.list&&"auto"!==e.popupHeight&&("dropdownlist"!==e.getModuleName()||!e.allowFiltering)){var t="string"==typeof e.popupHeight?parseInt(e.popupHeight,10):e.popupHeight;if(!e.isUpdateHeaderHeight&&e.headerTemplate&&e.header){var i=""===e.list.style.maxHeight?t:parseInt(e.list.style.maxHeight,10);e.list.style.maxHeight=(i-e.header.offsetHeight).toString()+"px",e.isUpdateHeaderHeight=!0}if(!e.isUpdateFooterHeight&&e.footerTemplate&&e.footer){i=""===e.list.style.maxHeight?t:parseInt(e.list.style.maxHeight,10);e.list.style.maxHeight=(i-e.footer.offsetHeight).toString()+"px",e.isUpdateFooterHeight=!0}}},15))}),e.allowResize&&("dropdownlist"!==e.getModuleName()||!(G.isDevice&&e.isDeviceFullScreen&&e.allowFiltering))){e.resizer=e.createElement("div",{id:e.element.id+"_resize-popup",className:Dj.resizeIcon}),e.list&&e.list.parentElement&&(e.list.parentElement.classList.add("e-resize"),"auto"!==e.popupHeight.toString().toLowerCase()&&n>=parseInt(e.popupHeight.toString(),10)-2&&(e.list.parentElement.style.height="100%"),e.list.parentElement.style.paddingBottom="dropdownlist"===e.getModuleName()&&e.allowFiltering&&e.searchBoxHeight?(e.searchBoxHeight+16).toString()+"px":16..toString()+"px",(e.header||e.footer||e.itemTemplate)&&(e.list.parentElement.style.paddingBottom=(parseInt(e.list.parentElement.style.maxHeight,10)-parseInt(e.list.style.maxHeight,10)+16).toString()+"px"),e.list.parentElement.appendChild(e.resizer),e.list.parentElement.style.width=e.resizeWidth+"px",e.list.parentElement.style.height=e.resizeHeight+"px",e.list.parentElement.style.maxHeight=e.resizeHeight+"px",e.list.style.maxHeight=e.resizeHeight+"px"),K.add(e.resizer,"mousedown",e.startResizing,e),K.add(e.resizer,"touchstart",e.startResizing,e)}}})}},e.prototype.checkCollision=function(t){(!G.isDevice||G.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(Sr(t).length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px"),this.popupObj.resolveCollision())},e.prototype.getOffsetValue=function(t){var e=getComputedStyle(t),i=parseInt(e.borderTopWidth,10),n=parseInt(e.borderBottomWidth,10);return this.setPopupPosition(i+n)},e.prototype.createPopup=function(t,e,i){var n=this;this.popupObj=new Jr(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:e,enableRtl:this.enableRtl,offsetX:i,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){n.isDocumentClick||n.focusDropDown(),n.isReact&&n.clearTemplate(["headerTemplate","footerTemplate"]),n.isNotSearchList=!1,n.isDocumentClick=!1,n.destroyPopup(),n.isFiltering()&&n.actionCompleteData.list&&n.actionCompleteData.list.length>0?(n.isActive=!0,n.isReactTemplateUpdate&&n.isReact&&n.itemTemplate&&!n.enableVirtualization&&(n.actionCompleteData.ulElement=n.renderItems(n.actionCompleteData.list,n.fields),n.isReactTemplateUpdate=!1),n.enableVirtualization?n.onActionComplete(n.ulElement,n.listData,null,!0):n.onActionComplete(n.actionCompleteData.ulElement,n.actionCompleteData.list,null,!0)):n.enableVirtualization&&n.focusIndexItem()},open:function(){K.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0;var t=n.actionCompleteData&&n.actionCompleteData.ulElement&&n.actionCompleteData.ulElement.querySelector("li"),e=n.list.querySelector("ul li");y(n.ulElement)||y(n.ulElement.getElementsByClassName("e-item-focus")[0])?y(n.ulElement)||y(n.ulElement.getElementsByClassName("e-active")[0])||ht(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-active")[0].id}):ht(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-item-focus")[0].id}),n.isFiltering()&&n.itemTemplate&&n.element.tagName===n.getNgDirective()&&t&&e&&t.textContent!==e.textContent&&"EJS-COMBOBOX"!==n.element.tagName&&n.cloneElements(),n.isFilterLayout()&&(et([n.inputWrapper.container],[Dj.inputFocus]),n.isFilterFocus=!0,n.filterInput.focus(),n.inputWrapper.clearButton&&tt([n.inputWrapper.clearButton],Dj.clearIconHide)),n.activeStateChange()},targetExitViewport:function(){G.isDevice||n.hidePopup()}})},e.prototype.isEmptyList=function(){return!y(this.liCollections)&&0===this.liCollections.length},e.prototype.getFocusElement=function(){},e.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},e.prototype.scrollHandler=function(){G.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},e.prototype.isElementInViewport=function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=window.innerHeight&&e.right<=window.innerWidth},e.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-t+"px",this.list.style.height=window.innerHeight-t+"px";var e=this.filterInput.parentElement.querySelector("."+Dj.clearIcon);at(this.filterInput),e.parentElement.insertBefore(this.filterInput,e)},e.prototype.setPopupPosition=function(t){var e,i=t,n=this.list.querySelector("."+Dj.focus)||this.selectedLI,s=this.isEmptyList()?this.list:this.liCollections[0],r=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],o=s.getBoundingClientRect().height;this.listItemHeight=o+parseInt(window.getComputedStyle(s).marginBottom,10);var a=this.list.offsetHeight/2,l=y(n)?s.offsetTop:n.offsetTop;if(r.offsetTop-a<l&&!y(this.liCollections)&&this.liCollections.length>0&&!y(n)){var h=this.list.offsetHeight/o,c=parseInt(getComputedStyle(this.list).paddingBottom,10);e=(h-(this.liCollections.length-this.activeIndex))*o-i+c,this.list.scrollTop=n.offsetTop}else l>a&&!this.enableVirtualization?(e=a-o/2,this.list.scrollTop=l-a+o/2):e=l;return-(e=e+o+i-(o-this.inputWrapper.container.offsetHeight)/2)},e.prototype.setWidth=function(){var t=S(this.popupWidth);t.indexOf("%")>-1&&(t=(this.inputWrapper.container.offsetWidth*parseFloat(t)/100).toString()+"px");if(G.isDevice&&t.indexOf("px")>-1&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var e=this.isEmptyList()?this.list:this.liCollections[0];t=parseInt(t,10)+2*(parseInt(getComputedStyle(e).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return t},e.prototype.scrollBottom=function(t,e,i){var n=this;if(void 0===e&&(e=!1),void 0===i&&(i=null),y(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+dj),!y(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!y(this.selectedLI)){var s=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0;this.isUpwardScrolling=!1;var r=this.list.querySelectorAll(".e-virtual-list").length,o=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+s):this.selectedLI.offsetTop,l=this.list.offsetHeight,h=a-r*(this.selectedLI.offsetHeight+s)+(this.selectedLI.offsetHeight+s)-this.list.scrollTop,c=this.list.scrollTop+h-l,d=!1;c=t?c+2*parseInt(getComputedStyle(this.list).paddingTop,10):c+parseInt(getComputedStyle(this.list).paddingTop,10);var p=a-r*(this.selectedLI.offsetHeight+s)+(this.selectedLI.offsetHeight+s)-this.list.scrollTop;if(p=this.fields.groupBy&&!y(this.fixedHeaderElement)?p-this.fixedHeaderElement.offsetHeight:p,0!==this.activeIndex||this.enableVirtualization){if(h>l||!(p>0&&this.list.offsetHeight>p)){var u=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,g="pageDown"===i?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||e?this.isKeyBoardAction&&this.enableVirtualization&&o&&u===o&&"end"!==i&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=c:(this.enableVirtualization&&(g="pageDown"===i?this.getPageCount()+1:g),this.list.scrollTop+=(this.selectedLI.offsetHeight+s)*g),this.isPreventKeyAction=!this.IsScrollerAtEnd()&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&"end"===i?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):("pageDown"===i&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=c):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?t&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+2*this.listItemHeight:this.virtualListInfo.startIndex*this.listItemHeight:0,d=this.isKeyBoardAction}}else this.list.scrollTop=0,d=this.isKeyBoardAction;this.isKeyBoardAction=d,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&"down"===i&&setTimeout(function(){n.scrollStop(null,!0)},100)}},e.prototype.scrollTop=function(t){if(void 0===t&&(t=null),!y(this.selectedLI)){var e=this.selectedLI&&!isNaN(parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10))?parseInt(window.getComputedStyle(this.selectedLI).marginBottom,10):0,i=this.list.querySelectorAll(".e-virtual-list").length,n=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*(this.selectedLI.offsetHeight+e):this.selectedLI.offsetTop,s=n-i*(this.selectedLI.offsetHeight+e)-this.list.scrollTop,r=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;s=this.fields.groupBy&&!y(this.fixedHeaderElement)?s-this.fixedHeaderElement.offsetHeight:s;var o=n-i*(this.selectedLI.offsetHeight+e)+(this.selectedLI.offsetHeight+e)-this.list.scrollTop,a=this.enableVirtualization&&"autocomplete"===this.getModuleName()&&s<=0;if(0!==this.activeIndex||this.enableVirtualization)if(s<0||a){var l=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,h="pageUp"===t?this.getPageCount()-2:1;this.enableVirtualization&&(h="pageUp"===t?this.getPageCount():h),this.enableVirtualization&&this.isKeyBoardAction&&r&&l===r&&"home"!==t&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=(this.selectedLI.offsetHeight+e)*h,this.isPreventKeyAction=0!==this.list.scrollTop&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&"home"===t?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):("pageUp"===t&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+s)}else o>0&&this.list.offsetHeight>o||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!y(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0));else this.list.scrollTop=0}},e.prototype.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},e.prototype.isEditTextBox=function(){return!1},e.prototype.isFiltering=function(){return this.allowFiltering},e.prototype.isPopupButton=function(){return!0},e.prototype.setScrollPosition=function(t){if(this.isPreventScrollAction=!0,y(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,t.action);break;default:this.isKeyBoardAction="up"===t.action||"pageUp"===t.action||"open"===t.action,this.scrollTop(t.action)}this.isKeyBoardAction=!1},e.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},e.prototype.setEleWidth=function(t){y(t)||("number"==typeof t?this.inputWrapper.container.style.width=S(t):"string"==typeof t&&(this.inputWrapper.container.style.width=t.match(/px|%|em/)?t:S(t)))},e.prototype.closePopup=function(t,e){var i=this,n=!y(this.filterInput)&&!y(this.filterInput.value)&&""!==this.filterInput.value;"combobox"===this.getModuleName()&&this.typedString;if(this.isTyped=!1,this.isVirtualTrackHeight=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){this.keyboardEvent=null,K.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var s=0,r=this.popupObj.getScrollableParent(this.inputWrapper.container);s<r.length;s++){var o=r[s];K.remove(o,"scroll",this.scrollHandler)}G.isDevice&&this.isFilterLayout()&&this.isDeviceFullScreen&&et([document.body,this.popupObj.element],Dj.popupFullScreen),this.isFilterLayout()&&(G.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&K.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(K.remove(this.backIconElement,"click",this.clickOnBackIcon),K.remove(this.clearIconElement,"click",this.clearText)),y(this.filterInput)||(K.remove(this.filterInput,"input",this.onInput),K.remove(this.filterInput,"keyup",this.onFilterUp),K.remove(this.filterInput,"keydown",this.onFilterDown),K.remove(this.filterInput,"blur",this.onBlurHandler),K.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&"dropdownlist"===this.getModuleName()&&(this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput.removeAttribute("aria-disabled"),this.filterInput.removeAttribute("role"),this.filterInput.removeAttribute("autocomplete"),this.filterInput.removeAttribute("autocapitalize"),this.filterInput.removeAttribute("spellcheck")),this.filterInput=null),ht(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(Dj.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(null==this.value||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,("autocomplete"===this.getModuleName()||"dropdownlist"===this.getModuleName()&&!y(this.typedString)&&""!==this.typedString||"combobox"===this.getModuleName()&&this.allowFiltering&&!y(this.typedString)&&""!==this.typedString)&&this.checkAndResetCache()):"autocomplete"===this.getModuleName()&&this.checkAndResetCache(),"dropdownlist"!==this.getModuleName()&&"combobox"!==this.getModuleName()||0===this.skeletonCount||this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var a,l={name:"FadeOut",duration:100,delay:t||0},h={popup:this.popupObj,cancel:!1,animation:l,event:e||null};this.trigger("close",h,function(t){if("dropdownlist"===i.getModuleName()&&hI.destroy({element:i.filterInput,floatLabelType:i.floatLabelType,properties:{placeholder:i.filterBarPlaceholder},buttons:i.clearIconElement},i.clearIconElement),i.filterInputObj=null,!y(i.popupObj)&&!y(i.popupObj.element.querySelector(".e-fixed-head"))){var e=i.popupObj.element.querySelector(".e-fixed-head");e.parentNode.removeChild(e),i.fixedHeaderElement=null}t.cancel||("autocomplete"===i.getModuleName()&&i.rippleFun(),i.isPopupOpen?i.popupObj.hide(new qt(t.animation)):i.destroyPopup())}),G.isDevice&&!h.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup"),a=this.dataSource instanceof dC?this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.customFilterQuery=null,this.enableVirtualization&&this.isFiltering()&&n&&this.totalItemCount!==a&&(this.updateInitialData(),this.checkAndResetCache())}},e.prototype.updateInitialData=function(){var t=this.selectData;if(!y(t)){var e=this.renderItems(t,this.fields);if(this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},"combobox"===this.getModuleName()&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof dC?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.list.parentElement){var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});i.style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(i)}"autocomplete"!==this.getModuleName()&&0!==this.totalItemCount&&this.totalItemCount>2*this.itemCount&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=t,this.updateActionCompleteDataValues(e,t),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}},e.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.inputElement.removeAttribute("aria-controls"),this.popupObj&&(this.resizer&&(K.remove(this.resizer,"mousedown",this.startResizing),K.remove(this.resizer,"touchstart",this.startResizing)),this.popupObj.destroy(),at(this.popupObj.element))},e.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},e.prototype.render=function(){this.preselectedIndex=y(this.index)?null:this.index,"INPUT"===this.element.tagName?(this.inputElement=this.element,y(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),y(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var t=this.cssClass;y(this.cssClass)||""===this.cssClass||(t=this.cssClass.replace(/\s+/g," ").trim()),!y(ut(this.element,"fieldset"))&&ut(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=hI.createInput({element:this.inputElement,buttons:this.isPopupButton()?[Dj.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:t,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:Dj.hiddenElement}}),st([this.hiddenElement],this.inputWrapper.container),this.hiddenElement.hasAttribute("aria-label")||this.hiddenElement.setAttribute("aria-label",this.getModuleName()),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=S(this.width),this.inputWrapper.container.classList.add("e-ddl"),"Never"!==this.floatLabelType&&hI.calculateWidth(this.inputElement,this.inputWrapper.container),!y(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var e=this.element.getAttribute("id")?this.element.getAttribute("id"):b("ej2_dropdownlist");if(this.element.id=e,this.hiddenElement.id=e+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),"autocomplete"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.readonly?"dropdownlist"===this.getModuleName()&&(this.targetElement().hasAttribute("aria-label")||ht(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false")):this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName()),ht(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),null!==this.index&&(this.activeIndex=this.index+this.skeletonCount)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if("SELECT"===this.element.tagName&&this.element.options[0]){var i=this.element;this.value=this.allowObjectBinding?this.getDataByValue(i.options[i.selectedIndex].value):i.options[i.selectedIndex].value,this.text=y(this.value)?null:i.options[i.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(t){t.stopImmediatePropagation()},this.inputElement.onchange=function(t){t.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),y(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var n=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];y(this.element.id)||""===this.element.id||y(n)||(n.id="label_"+this.element.id.replace(/ /g,"_"),ht(this.inputElement,{"aria-labelledby":n.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},e.prototype.getListHeight=function(){var t=this.createElement("div",{className:"e-dropdownbase"}),e=this.createElement("li",{className:"e-list-item"}),i=S(this.popupHeight);t.style.height=parseInt(i,10).toString()+"px",t.appendChild(e),document.body.appendChild(t),this.virtualListHeight=t.getBoundingClientRect().height;var n=Math.ceil(e.getBoundingClientRect().height)+parseInt(window.getComputedStyle(e).marginBottom,10);return t.remove(),n},e.prototype.setFooterTemplate=function(t){this.footer?this.isReact&&"function"==typeof this.footerTemplate?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),tt([this.footer],Dj.footer));var e=this.dropdownCompiler(this.footerTemplate),i=("function"!=typeof this.footerTemplate&&e?Hi(ct(this.footerTemplate,document).innerHTML.trim()):Hi(this.footerTemplate))({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);i&&i.length>0&&rt(i,this.footer),rt([this.footer],t)},e.prototype.setHeaderTemplate=function(t){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),tt([this.header],Dj.header));var e=this.dropdownCompiler(this.headerTemplate),i=("function"!=typeof this.headerTemplate&&e?Hi(ct(this.headerTemplate,document).innerHTML.trim()):Hi(this.headerTemplate))({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);i&&i.length&&rt(i,this.header);var n=t.querySelector("div.e-content");t.insertBefore(this.header,n)},e.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},e.prototype.setOldText=function(t){this.text=t},e.prototype.setOldValue=function(t){this.value=t},e.prototype.refreshPopup=function(){y(this.popupObj)||!document.body.contains(this.popupObj.element)||(!this.allowFiltering||G.isDevice&&this.isFilterLayout())&&"autocomplete"!==this.getModuleName()||(et([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},e.prototype.checkData=function(t){!t.dataSource||y(Object.keys(t.dataSource))||!this.itemTemplate||!this.allowFiltering||this.isListSearched&&t.dataSource instanceof dC||(this.list&&!this.isReact?this.list.innerHTML="":this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var e=-1!==Object.keys(t).indexOf("value")&&y(t.value),i=-1!==Object.keys(t).indexOf("text")&&y(t.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(e||i)&&(this.itemData=null),this.allowFiltering&&t.dataSource&&!y(Object.keys(t.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&t.query&&!y(Object.keys(t.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},e.prototype.updateDataSource=function(t,e){""===this.inputElement.value&&(y(t)||!y(t.dataSource)&&(t.dataSource instanceof dC||0!==t.dataSource.length))||this.clearAll(null,t),this.fields.groupBy&&t.fields&&!this.isGroupChecking&&this.list&&(K.remove(this.list,"scroll",this.setFloatingHeader),K.add(this.list,"scroll",this.setFloatingHeader,this)),(y(t)||!y(t.dataSource)&&(t.dataSource instanceof dC||0!==t.dataSource.length)||t.dataSource instanceof dC||!y(t)&&Array.isArray(t.dataSource)&&!y(e)&&Array.isArray(e.dataSource)&&t.dataSource.length!==e.dataSource.length)&&(this.typedString="",this.resetList(this.dataSource)),this.isCustomFilter||this.isFilterFocus||document.activeElement===this.filterInput||this.checkCustomValue()},e.prototype.checkCustomValue=function(){var t=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(t);var e=this.getItemData(),i=this.allowObjectBinding?this.itemData:e.value,n=y(i)?null:this.index;y(n)&&t===i||this.isAngular?this.setProperties({text:e.text?e.text.toString():e.text,value:i}):this.setProperties({text:e.text?e.text.toString():e.text,index:n,value:i})},e.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&hI.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.onPropertyChanged=function(e,i){var n=this;y(e.dataSource)||this.isTouched||!y(e.value)||!y(e.index)||y(this.preselectedIndex)||y(this.index)||(e.index=this.index),y(e.value)&&y(e.index)||(this.isTouched=!0),"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var s=function(s){switch(s){case"query":case"dataSource":r.getSkeletonCount(),r.checkAndResetCache();break;case"htmlAttributes":r.setHTMLAttributes();break;case"width":r.setEleWidth(e.width),hI.calculateWidth(r.inputElement,r.inputWrapper.container);break;case"placeholder":hI.setPlaceholder(e.placeholder,r.inputElement);break;case"filterBarPlaceholder":r.filterInput&&hI.setPlaceholder(e.filterBarPlaceholder,r.filterInput);break;case"readonly":"dropdownlist"!==r.getModuleName()&&hI.setReadonly(e.readonly,r.inputElement),r.setReadOnly();break;case"cssClass":r.setCssClass(e.cssClass,i.cssClass),hI.calculateWidth(r.inputElement,r.inputWrapper.container);break;case"enableRtl":r.setEnableRtl();break;case"enabled":r.setEnable();break;case"text":if(r.fields.disabled&&(e.text=e.text&&!r.isDisabledItemByIndex(r.getIndexByValue(r.getValueByText(e.text)))?e.text:null),null===e.text){r.clearAll();break}if(r.enableVirtualization){r.updateValues(),r.updateInputFields(),r.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(r.list||(r.dataSource instanceof dC&&(r.initialRemoteRender=!0),r.renderList()),!r.initialRemoteRender){var o=r.getElementByText(e.text);if(!r.checkValidLi(o))if(r.liCollections&&100===r.liCollections.length&&"autocomplete"===r.getModuleName()&&r.listData.length>100)r.setSelectionData(e.text,i.text,"text");else if(e.text&&r.dataSource instanceof dC){var a=r.getItems().length,l=y(r.fields.text)?r.fields.value:r.fields.text;r.typedString="",r.dataSource.executeQuery(r.getQuery(r.query).where(new Kb(l,"equal",e.text))).then(function(t){t.result.length>0?(n.addItem(t.result,a),n.updateValues()):n.setOldText(i.text)})}else"autocomplete"===r.getModuleName()?r.setInputValue(e,i):r.setOldText(i.text);r.updateInputFields()}break;case"value":if(r.fields.disabled&&(e.value=null==e.value||r.isDisableItemValue(e.value)?null:e.value),null===e.value){r.clearAll();break}if(r.allowObjectBinding&&!y(e.value)&&!y(i.value)&&r.isObjectInArray(e.value,[i.value]))return{value:void 0};if(r.enableVirtualization){r.updateValues(),r.updateInputFields(),r.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),r.preventChange=r.isAngular&&r.preventChange?!r.preventChange:r.preventChange;break}if(r.notify("beforeValueChange",{newProp:e}),r.list||(r.dataSource instanceof dC&&(r.initialRemoteRender=!0),r.renderList()),!r.initialRemoteRender){var h=r.allowObjectBinding&&!y(e.value)?c(r.fields.value?r.fields.value:"",e.value):e.value,d=r.getElementByValue(h);if(!r.checkValidLi(d))if(r.liCollections&&100===r.liCollections.length&&"autocomplete"===r.getModuleName()&&r.listData.length>100)r.setSelectionData(e.value,i.value,"value");else if(e.value&&r.dataSource instanceof dC){var p=r.getItems().length;l=y(r.fields.value)?r.fields.text:r.fields.value;r.typedString="";var u=r.allowObjectBinding&&!y(e.value)?c(l,e.value):e.value;r.dataSource.executeQuery(r.getQuery(r.query).where(new Kb(l,"equal",u))).then(function(t){t.result.length>0?(n.addItem(t.result,p),n.updateValues()):n.setOldValue(i.value)})}else"autocomplete"===r.getModuleName()?r.setInputValue(e,i):r.setOldValue(i.value);r.updateInputFields(),r.preventChange=r.isAngular&&r.preventChange?!r.preventChange:r.preventChange}break;case"index":if(r.fields.disabled&&(e.index=null==e.index||r.isDisabledItemByIndex(e.index)?null:e.index),null===e.index){r.clearAll();break}if(r.list||(r.dataSource instanceof dC&&(r.initialRemoteRender=!0),r.renderList()),!r.initialRemoteRender&&r.liCollections){var g=r.liCollections[e.index];r.checkValidLi(g)||(r.liCollections&&100===r.liCollections.length&&"autocomplete"===r.getModuleName()&&r.listData.length>100?r.setSelectionData(e.index,i.index,"index"):r.index=i.index),r.updateInputFields()}break;case"footerTemplate":r.popupObj&&r.setFooterTemplate(r.popupObj.element);break;case"headerTemplate":r.popupObj&&r.setHeaderTemplate(r.popupObj.element);break;case"valueTemplate":y(r.itemData)||null===r.valueTemplate||r.setValueTemplate();break;case"allowFiltering":r.allowFiltering&&(r.actionCompleteData={ulElement:r.ulElement,list:r.listData,isUpdated:!0},r.actionData=r.actionCompleteData,r.updateSelectElementData(r.allowFiltering));break;case"floatLabelType":hI.removeFloating(r.inputWrapper),hI.addFloating(r.inputElement,e.floatLabelType,r.placeholder,r.createElement),!y(r.inputWrapper.buttons[0])&&r.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==r.floatLabelType&&r.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":r.inputWrapper.clearButton||(hI.setClearButton(e.showClearButton,r.inputElement,r.inputWrapper,null,r.createElement),r.bindClearEvent());break;default:var m=r.getPropObject(s,e,i);t.prototype.onPropertyChanged.call(r,m.newProperty,m.oldProperty)}},r=this,o=0,a=Object.keys(e);o<a.length;o++){var l=s(a[o]);if("object"==typeof l)return l.value}},e.prototype.checkValidLi=function(t){return!!this.isValidLI(t)&&(this.setSelection(t,null),!0)},e.prototype.setSelectionData=function(t,e,i){var n,s=this;this.updateListValues=function(){if("text"===i)n=s.getElementByText(t),s.checkValidLi(n)||s.setOldText(e);else if("value"===i){var r=s.fields.value?s.fields.value:"";s.allowObjectBinding&&!y(t)&&c(r,t);n=s.getElementByValue(t),s.checkValidLi(n)||s.setOldValue(e)}else"index"===i&&(n=s.liCollections[t],s.checkValidLi(n)||(s.index=e))}},e.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},e.prototype.setReadOnly=function(){this.readonly?tt([this.inputWrapper.container],["e-readonly"]):et([this.inputWrapper.container],["e-readonly"])},e.prototype.setInputValue=function(t,e){},e.prototype.setCssClass=function(t,e){y(e)||(e=e.replace(/\s+/g," ").trim()),y(t)||(t=t.replace(/\s+/g," ").trim()),hI.setCssClass(t,[this.inputWrapper.container],e),this.popupObj&&hI.setCssClass(t,[this.popupObj.element],e)},e.prototype.getModuleName=function(){return"dropdownlist"},e.prototype.showPopup=function(t){this.enabled&&("dropdownlist"===this.getModuleName()&&this.beforePopupOpen&&!this.isPopupOpen&&(this.beforePopupOpen=!1),this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.isReact&&"combobox"===this.getModuleName()&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof dC&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen?this.refreshPopup():(this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(y(this.list)||!v(this.list)&&(this.list.classList.contains(lj)||this.list.querySelectorAll("."+dj).length<=0))&&(this.isReact&&this.isFiltering()&&null!=this.itemTemplate&&(this.isSecondClick=!1),this.renderList(t)),this.enableVirtualization&&this.listData&&this.listData.length&&(y(this.value)||"dropdownlist"!==this.getModuleName()&&"combobox"!==this.getModuleName()||this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(t),this.enableVirtualization&&!this.allowFiltering&&null!=this.selectedValueInfo&&this.selectedValueInfo.startIndex>0&&null!=this.value&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),this.isSecondClick||this.isDropDownClick||this.executeCloneElements()))},e.prototype.executeCloneElements=function(){var t=this,e=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isReact&&this.isFiltering()&&null!=this.itemTemplate&&setTimeout(function(){t.cloneElements(),t.isSecondClick=!(t.isReact&&t.isFiltering()&&t.dataSource instanceof dC&&!t.list.querySelector("ul"))},e)},e.prototype.invokeRenderPopup=function(t){if(G.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}y(this.list)||y(this.list.children[0])&&!this.list.classList.contains(lj)||this.renderPopup(t)},e.prototype.renderHightSearch=function(){},e.prototype.hidePopup=function(t){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(y(this.inputElement)||hI.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,y(this.index))this.resetSelection();else{var e=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value):this.value,i=this.findListElement(this.ulElement,"li","data-value",e);this.selectedLI=this.liCollections[this.index]||i,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.isVirtualTrackHeight=!1,this.customFilterQuery=null,this.closePopup(0,t);var n=this.getItemData(),s=!y(this.selectedLI);s&&this.enableVirtualization&&this.selectedLI.classList&&(s=this.selectedLI.classList.contains("e-active")),this.inputElement&&""===this.inputElement.value&&!this.isInteracted&&(this.isSelectCustom||s&&this.inputElement.value!==n.text)&&(this.isSelectCustom=!1,this.clearAll(t))},e.prototype.focusIn=function(t){if(this.enabled&&!this.targetElement().classList.contains(Dj.disable)){var e=!1;this.preventFocus&&G.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,e=!0),e||this.targetElement().focus(),tt([this.inputWrapper.container],[Dj.inputFocus]),this.onFocus(t),"Never"!==this.floatLabelType&&hI.calculateWidth(this.inputElement,this.inputWrapper.container)}},e.prototype.focusOut=function(t){this.enabled&&(this.enableVirtualization||"combobox"!==this.getModuleName()&&"autocomplete"!==this.getModuleName()||(this.isTyped=!0),this.hidePopup(t),this.targetElement()&&this.targetElement().blur(),et([this.inputWrapper.container],[Dj.inputFocus]),"Never"!==this.floatLabelType&&hI.calculateWidth(this.inputElement,this.inputWrapper.container))},e.prototype.disableItem=function(t){if(this.fields.disabled){this.list||this.renderList();var e=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if("string"==typeof t)e=this.getIndexByValue(t);else if("object"==typeof t)if(t instanceof HTMLLIElement){for(var i=0;i<this.liCollections.length;i++)if(this.liCollections[i]===t){e=this.getIndexByValue(t.getAttribute("data-value"));break}}else{var n=JSON.parse(JSON.stringify(t))[this.fields.value];for(i=0;i<this.listData.length;i++)if(JSON.parse(JSON.stringify(this.listData[i]))[this.fields.value]===n){e=this.getIndexByValue(n);break}}else e=t;if(e<this.liCollections.length&&e>-1&&!JSON.parse(JSON.stringify(this.listData[e]))[this.fields.disabled]){var s=this.liCollections[e];if(s){this.disableListItem(s);var r=JSON.parse(JSON.stringify(this.listData[e]));r[this.fields.disabled]=!0,this.listData[e]=r,this.dataSource=this.listData,s.classList.contains(Dj.focus)&&this.removeFocus(),s.classList.contains(Dj.selected)&&this.clear()}}}}},e.prototype.destroy=function(){var e;if(this.isActive=!1,this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),e=this.element.id,Ij===e&&(Ij="",vj="",yj="",Cj=[]),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&this.popupObj.hide(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var i=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],n=0;n<i.length;n++)this.inputElement.removeAttribute(i[n]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),hI.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.removeAttribute("tabindex"),this.element.style.display="block",this.inputWrapper.container&&this.inputWrapper.container.parentElement&&(this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),at(this.inputWrapper.container)),delete this.hiddenElement,this.filterInput=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.clearIconElement=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!y(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.inputElement&&!y(this.inputElement.onselect)&&(this.inputElement.onselect=null),hI.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties,buttons:this.inputWrapper.container.querySelectorAll(".e-input-group-icon")[0]},this.clearButton),this.clearButton=null,this.inputElement=null,this.inputWrapper=null,t.prototype.destroy.call(this)}},e.prototype.getItems=function(){return this.list||(this.dataSource instanceof dC&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?t.prototype.getItems.call(this):[]},e.prototype.getDataByValue=function(e){return t.prototype.getDataByValue.call(this,e)},e.prototype.clear=function(){this.value=null},wj([jt(null)],e.prototype,"cssClass",void 0),wj([jt("100%")],e.prototype,"width",void 0),wj([jt(!0)],e.prototype,"enabled",void 0),wj([jt(!1)],e.prototype,"enablePersistence",void 0),wj([jt("300px")],e.prototype,"popupHeight",void 0),wj([jt("100%")],e.prototype,"popupWidth",void 0),wj([jt(null)],e.prototype,"placeholder",void 0),wj([jt(null)],e.prototype,"filterBarPlaceholder",void 0),wj([jt({})],e.prototype,"htmlAttributes",void 0),wj([jt(null)],e.prototype,"query",void 0),wj([jt(null)],e.prototype,"valueTemplate",void 0),wj([jt(null)],e.prototype,"headerTemplate",void 0),wj([jt(null)],e.prototype,"footerTemplate",void 0),wj([jt(!1)],e.prototype,"allowFiltering",void 0),wj([jt(300)],e.prototype,"debounceDelay",void 0),wj([jt(!0)],e.prototype,"isDeviceFullScreen",void 0),wj([jt(!1)],e.prototype,"readonly",void 0),wj([jt(!1)],e.prototype,"enableVirtualization",void 0),wj([jt(!1)],e.prototype,"allowResize",void 0),wj([jt(null)],e.prototype,"text",void 0),wj([jt(null)],e.prototype,"value",void 0),wj([jt(!1)],e.prototype,"allowObjectBinding",void 0),wj([jt(null)],e.prototype,"index",void 0),wj([jt("Never")],e.prototype,"floatLabelType",void 0),wj([jt(!1)],e.prototype,"showClearButton",void 0),wj([Ut()],e.prototype,"filtering",void 0),wj([Ut()],e.prototype,"change",void 0),wj([Ut()],e.prototype,"beforeOpen",void 0),wj([Ut()],e.prototype,"open",void 0),wj([Ut()],e.prototype,"close",void 0),wj([Ut()],e.prototype,"blur",void 0),wj([Ut()],e.prototype,"focus",void 0),wj([Ut()],e.prototype,"resizeStop",void 0),wj([Ut()],e.prototype,"resizing",void 0),wj([Ut()],e.prototype,"resizeStart",void 0),e=wj([Ft],e)}(fj),Aj=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Nj=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},Lj="e-rtl",Oj="e-ddt-hidden",kj="e-input-group-icon e-ddt-icon e-icons",zj="e-show-chip",Pj="e-show-clear",jj="e-show-dd-icon",Bj="e-chip-input",Hj="e-input-focus",Rj="e-input-group",Vj="e-icon-anim",Uj="e-chips",Fj="e-chipcontent",Wj="e-chips-close",Yj="e-icon-hide",_j="e-ddt-icon-hide",Qj="e-list-parent",Zj="e-dropdown",qj="e-disabled",Xj="e-selectall-parent",Gj="e-hide-selectall",Kj="e-all-text",Jj="e-frame",$j="e-check",tB="e-checkbox-wrapper",eB="e-filter-wrap",iB="e-ddt-icon",nB="e-ddt-footer",sB="e-ddt-header",rB="e-no-data",oB="e-remain",aB="e-overflow",lB="e-show-text",hB="e-total-count",cB="e-wrap-count",dB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Aj(e,t),Nj([jt("child")],e.prototype,"child",void 0),Nj([jt([])],e.prototype,"dataSource",void 0),Nj([jt("expanded")],e.prototype,"expanded",void 0),Nj([jt("hasChildren")],e.prototype,"hasChildren",void 0),Nj([jt("htmlAttributes")],e.prototype,"htmlAttributes",void 0),Nj([jt("iconCss")],e.prototype,"iconCss",void 0),Nj([jt("imageUrl")],e.prototype,"imageUrl",void 0),Nj([jt("parentValue")],e.prototype,"parentValue",void 0),Nj([jt(null)],e.prototype,"query",void 0),Nj([jt("selectable")],e.prototype,"selectable",void 0),Nj([jt("selected")],e.prototype,"selected",void 0),Nj([jt(null)],e.prototype,"tableName",void 0),Nj([jt("text")],e.prototype,"text",void 0),Nj([jt("tooltip")],e.prototype,"tooltip",void 0),Nj([jt("value")],e.prototype,"value",void 0),e}(re),pB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Aj(e,t),Nj([jt(!1)],e.prototype,"autoCheck",void 0),Nj([jt(!0)],e.prototype,"checkDisabledChildren",void 0),Nj([jt("Auto")],e.prototype,"expandOn",void 0),Nj([jt(!1)],e.prototype,"loadOnDemand",void 0),e}(re),uB=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.filterTimer=null,n.isFilteredData=!1,n.isFilterRestore=!1,n.selectedData=[],n.filterDelayTime=300,n.isClicked=!1,n.documentClickContext=n.onDocumentClick.bind(n),n.isCheckAllCalled=!1,n.isFromFilterChange=!1,n}return Aj(e,t),e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"drop-down-tree"},e.prototype.preRender=function(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate",this.customTemplateId=this.element.id+"CustomTemplate",this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}},e.prototype.render=function(){var t=ct("#"+this.element.id+"_tree",document);if(t){var e=ct("#"+this.element.id+"_options",document);at(e||t.parentElement)}"INPUT"===this.element.tagName?(this.inputEle=this.element,y(this.inputEle.getAttribute("role"))&&(this.inputEle.setAttribute("aria-expanded","false"),this.inputEle.setAttribute("role","combobox"),this.inputEle.setAttribute("aria-haspopup","tree"),this.inputEle.setAttribute("aria-controls",this.element.id+"_options")),y(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(y(this.element.id)?this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}):this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text",id:this.element.id+"_textbox"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=hI.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[kj]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains(Rj)||this.inputWrapper.classList.add(Rj),this.showDropDownIcon&&this.inputWrapper.classList.add(jj),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content"}),this.popupDiv.classList.add(Zj),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),this.destroyPopupOnHide||document.body.appendChild(this.popupDiv),this.wireTreeEvents(),tt([this.popupDiv],_j),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof dC,(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.createChip(),this.wrapText||"Custom"===this.mode||(this.overFlowWrapper=this.createElement("span",{className:aB+" "+Yj}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),"Box"!==this.mode&&tt([this.overFlowWrapper],lB))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();var i=ct("."+Qj,this.treeObj.element);i&&i.getAttribute("aria-multiselectable")&&i.removeAttribute("aria-multiselectable"),this.setOldValue(),this.isRemoteData||(this.isInitialized=!0),this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate||this.valueTemplate,this.renderComplete()},e.prototype.hideCheckAll=function(t){var e=y(this.popupEle)?null:this.popupEle.querySelector("."+Xj);y(e)||(t&&!e.classList.contains(Gj)?tt([e],Gj):!t&&e.classList.contains(Gj)&&et([e],Gj))},e.prototype.renderFilter=function(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:eB});var t=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(t),st([this.filterContainer],this.popupEle),this.filterObj=new vT({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter"),this.keyboardModule=new si(this.filterObj.element,{keyAction:this.filterKeyAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.filterKeyAction=function(t){var e,i=this,n={cancel:!1,event:t};this.trigger("keyPress",n,function(n){if(!n.cancel)switch(t.action){case"altUp":i.isPopupOpen&&i.hidePopup();break;case"shiftTab":tt([i.inputWrapper],[Hj]);break;case"moveDown":t.preventDefault(),i.filterObj.element.blur(),(e=i.treeObj.element.querySelector("li"))&&e.focus()}})},e.prototype.filterChangeHandler=function(t){var e=this;y(t.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(function(){e.filterHandler(t.value,t.event)},this.filterDelayTime))},e.prototype.isChildObject=function(){return"object"==typeof this.treeObj.fields.child},e.prototype.filterHandler=function(t,e){var i=this;this.isFromFilterChange=!0,this.isFilteredData||(this.isRemoteData&&(this.treeObj.expandedNodes=[]),this.treeData=this.treeObj.getTreeData());var n=this.cloneFields(this.fields),s={cancel:!1,preventDefaultAction:!1,event:e,text:t.trim(),fields:n};this.trigger("filtering",s,function(t){if(!t.cancel){var e=!1,n=void 0;if(i.isFilteredData=!0,""===t.text?(i.isFilteredData=!1,i.isFilterRestore=!0,n=i.cloneFields(i.fields),i.treeObj.element.classList.remove("e-filtering")):t.preventDefaultAction?(n=t.fields,i.treeObj.element.classList.add("e-filtering")):(1===i.treeDataType?n=i.selfReferencefilter(t.text,t.fields):i.fields.dataSource instanceof dC?((n=i.remoteDataFilter(t.text,t.fields)).child=i.fields.child,i.treeObj.fields=i.getTreeFields(t.fields),i.treeObj.dataBind(),e=!0):n=i.nestedFilter(t.text,t.fields),i.treeObj.element.classList.add("e-filtering")),i.hideCheckAll(i.isFilteredData),e)return;if(i.isRemoteData&&(i.isChildObject()?n.child=i.fields.child:n=t.fields),i.treeObj.fields=i.getTreeFields(n),(i.previousFilterText&&""!==i.previousFilterText&&""!==t.text&&-1!==i.previousFilterText.indexOf(t.text)||t.text&&""!==t.text&&""!==i.previousFilterText&&-1!==t.text.indexOf(i.previousFilterText))&&(i.isFilterRestore=!0),i.previousFilterText=t.text,i.treeObj.dataBind(),i.popupObj&&i.popupObj.refreshPosition(),i.hasTemplate&&i.portals&&i.treeObj.portals){for(var s=0;s<i.treeObj.portals.length;s++)-1===i.portals.indexOf(i.treeObj.portals[s])&&i.portals.push(i.treeObj.portals[s]);i.isReact&&i.renderReactTemplates()}}})},e.prototype.remoteDataFilter=function(t,e){var i=this;return e.dataSource=this.treeData.map(function(e){return i.remoteChildFilter(t,e)}).filter(function(t){return!y(t)}),e},e.prototype.remoteChildFilter=function(t,e,i,n){var s=this.isChildObject()?e.child:e[this.fields.child];if(y(s))return this.isMatchedNode(t,e,i,n)?e:null;for(var r=[],o=0;o<s.length;o++){var a=this.remoteChildFilter(t,s[o],!0,!0);y(a)||r.push(a)}var l=Object.assign({},e);return n=!1,0!==r.length?l.child=r:(l.child=null,l=this.isMatchedNode(t,l)?l:null),l},e.prototype.nestedFilter=function(t,e){for(var i=[],n=0;n<this.treeData.length;n++){var s=this.nestedChildFilter(t,this.treeData[parseInt(n.toString(),10)]);y(s)||i.push(s)}return e.dataSource=i,e},e.prototype.nestedChildFilter=function(t,e){var i=e[this.fields.child];if(y(i))return this.isMatchedNode(t,e)?e:null;for(var n=[],s=0;s<i.length;s++){var r=this.nestedChildFilter(t,i[parseInt(s.toString(),10)]);y(r)||n.push(r)}var o=Object.assign({},e);return 0!==n.length?(o[this.fields.child]=n,o):(o[this.fields.child]=null,this.isMatchedNode(t,o)?o:null)},e.prototype.selfReferencefilter=function(t,e){for(var i=[],n=[],s=0;s<this.treeData.length;s++)this.isMatchedNode(t,this.treeData[s])&&i.push(this.treeData[s]);for(s=0;s<i.length;s++)if(-1===n.indexOf(i[s])){n.push(i[s]);for(var r=i[parseInt(s.toString(),10)][this.fields.parentValue];!y(r);){for(var o=null,a=0;a<this.treeData.length;a++){var l=this.treeData[parseInt(a.toString(),10)][this.fields.value];if(!y(l)&&l===r){o=this.treeData[a];break}}if(y(o)||-1!==n.indexOf(o))break;n.push(o),r=o[this.fields.parentValue]}}return e.dataSource=n,e},e.prototype.isMatchedNode=function(t,e,i,n){var s;if(!(s=i&&n&&this.isChildObject()?e[this.fields.child.text]:e[this.fields.text])&&!y(this.fields.child.text)){for(var r=this.fields.child;!e[r.text];)r=r.child;s=e[r.text]}return this.ignoreCase&&(s=s.toLowerCase(),t=t.toLowerCase()),this.ignoreAccent&&(s=$b.ignoreDiacritics(s),t=$b.ignoreDiacritics(t)),"StartsWith"===this.filterType?s.slice(0,t.length)===t:"EndsWith"===this.filterType?s.slice(-t.length)===t:-1!==s.indexOf(t)},e.prototype.wireEvents=function(){G.isIos&&K.add(this.inputWrapper,"touchstart",this.handleIosTouch,this),K.add(this.inputWrapper,"mouseup",this.dropDownClick,this),K.add(this.inputWrapper,"focus",this.focusIn,this),K.add(this.inputWrapper,"blur",this.focusOut,this),K.add(this.inputWrapper,"mousemove",this.mouseIn,this),K.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),K.add(this.overAllClear,"mousedown",this.clearAll,this),K.add(window,"resize",this.windowResize,this);var t=ut(this.inputWrapper,"form");t&&K.add(t,"reset",this.resetValueHandler,this),this.keyboardModule=new si(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.wireTreeEvents=function(){this.keyboardModule=new si(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.wireCheckAllWrapperEvents=function(){this.keyboardModule=new si(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},e.prototype.unWireEvents=function(){G.isIos&&K.remove(this.inputWrapper,"touchstart",this.handleIosTouch),K.remove(this.inputWrapper,"mouseup",this.dropDownClick),K.remove(this.inputWrapper,"focus",this.focusIn),K.remove(this.inputWrapper,"blur",this.focusOut),K.remove(this.inputWrapper,"mousemove",this.mouseIn),K.remove(this.inputWrapper,"mouseout",this.onMouseLeave),K.remove(this.overAllClear,"mousedown",this.clearAll),K.remove(window,"resize",this.windowResize);var t=ut(this.inputWrapper,"form");t&&K.remove(t,"reset",this.resetValueHandler),this.keyboardModule.destroy(),this.showSelectAll&&this.checkAllParent&&K.remove(this.checkAllParent,"mouseup",this.clickHandler),document.removeEventListener("mousedown",this.documentClickContext)},e.prototype.handleIosTouch=function(t){t.preventDefault(),this.dropDownClick(t)},e.prototype.dropDownClick=function(t){this.enabled&&!this.readonly&&(this.isClearButtonClick?this.isClearButtonClick=!1:(this.isPopupOpen?this.hidePopup():t instanceof TouchEvent||2===t.button||(this.focusIn(t),this.renderPopup()),this.showOverAllClear()))},e.prototype.mouseIn=function(){!this.enabled&&this.readonly||this.showOverAllClear()},e.prototype.onMouseLeave=function(){this.inputFocus||(tt([this.overAllClear],Yj),et([this.inputWrapper],Pj))},e.prototype.getDirective=function(){return"EJS-DROPDOWNTREE"},e.prototype.focusOut=function(t){if(this.enabled&&!this.readonly&&this.inputFocus&&(!G.isIE&&"edge"!==G.info.name||t.target!==this.inputWrapper)){var e=t.relatedTarget;e===this.inputEle||!y(e)||t.target===this.inputWrapper&&this.isPopupOpen||this.onFocusOut(t)}},e.prototype.onFocusOut=function(t){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=ct(".e-clear-icon",this.inputWrapper).offsetWidth,tt([this.overAllClear],Yj),et([this.inputWrapper],Pj)),et([this.inputWrapper],[Hj]),this.allowMultiSelection||this.showCheckBox){var e=!!this.value&&!!this.value.length;"Delimiter"!==this.mode&&"Custom"!==this.mode&&this.chipWrapper&&"Default"===this.mode&&(tt([this.chipWrapper],Yj),et([this.inputWrapper],zj),et([this.inputEle],Bj)),e&&"Custom"!==this.mode&&this.showOrHideValueTemplate(!0),!this.wrapText&&e&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(t),this.removeValue=!1,this.setOldValue(),this.trigger("blur")},e.prototype.updateView=function(){!this.showCheckBox&&!this.allowMultiSelection||"Custom"===this.mode||this.inputFocus||("Box"!==this.mode?tt([this.inputWrapper,this.overFlowWrapper],lB):tt([this.inputWrapper],zj),this.value&&0!==this.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&tt([this.chipWrapper],Yj),tt([this.inputEle],Bj),this.updateOverFlowView()),this.ensurePlaceHolder())},e.prototype.triggerChangeEvent=function(t){if((!this.ddtCompareValues(this.oldValue,this.value)||this.isChipDelete)&&!this.removeValue){var e={e:t,oldValue:this.oldValue,value:this.value,isInteracted:!!t,element:this.element};this.trigger("change",e),this.setOldValue()}},e.prototype.ddtCompareValues=function(t,e){if(null===t||null===e)return(null===t||0===t.length)&&e===t;if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},e.prototype.focusIn=function(t){if(this.enabled&&!this.readonly&&!this.inputFocus){this.showOverAllClear(),this.inputFocus=!0,tt([this.inputWrapper],[Hj]),(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&(et([this.chipWrapper],Yj),tt([this.inputEle],Bj),this.showOrHideValueTemplate(!1,!0)),tt([this.inputWrapper],zj),this.popupObj&&this.popupObj.refreshPosition()),this.wrapText||"Custom"===this.mode||(this.inputWrapper.contains(this.overFlowWrapper)&&tt([this.overFlowWrapper],Yj),"Delimiter"===this.mode?(et([this.inputWrapper],zj),et([this.inputEle],Bj),this.showOrHideValueTemplate(!0)):tt([this.inputWrapper],zj),et([this.inputWrapper],lB),this.ensurePlaceHolder()));var e={isInteracted:!!t,event:t};this.trigger("focus",e)}},e.prototype.treeAction=function(t){var e=this,i={cancel:!1,event:t};this.trigger("keyPress",i,function(i){if(i.cancel)t.stopImmediatePropagation();else switch(t.action){case"escape":case"altUp":e.inputWrapper.focus(),t.preventDefault(),e.isPopupOpen&&e.hidePopup();break;case"tab":e.isPopupOpen&&e.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":e.showCheckBox||(e.isValueChange=!0,e.keyEventArgs=t);break;case"space":e.isValueChange=!0,e.keyEventArgs=t;break;case"ctrlA":e.allowMultiSelection&&e.selectAll(!0)}})},e.prototype.keyActionHandler=function(t){var e=this,i={cancel:!1,event:t};this.trigger("keyPress",i,function(i){if(!i.cancel)switch(t.action){case"escape":case"altUp":e.isPopupOpen&&e.hidePopup();break;case"shiftTab":e.isPopupOpen&&e.hidePopup(),e.inputFocus&&e.onFocusOut();break;case"altDown":e.isPopupOpen||(e.showPopup(),t.preventDefault());break;case"moveDown":e.showSelectAll&&e.showCheckBox&&e.checkAllParent.focus();break;case"tab":!e.isPopupOpen&&e.inputFocus&&e.onFocusOut()}})},e.prototype.checkAllAction=function(t){var e,i=this,n={cancel:!1,event:t};this.trigger("keyPress",n,function(n){if(!n.cancel)switch(t.action){case"space":i.clickHandler(t);break;case"moveDown":t.preventDefault(),(e=i.treeObj.element.querySelector('li[tabindex="0"]')||i.treeObj.element.querySelector("li")).focus(),tt([e],["e-node-focus"])}})},e.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},e.prototype.resetValueHandler=function(t){var e=ut(this.inputWrapper,"form");e&&t.target===e&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)},e.prototype.getAriaAttributes=function(){return{}},e.prototype.updateOverFlowView=function(){if(this.overFlowWrapper.classList.remove(hB),et([this.overFlowWrapper],Yj),this.value&&this.value.length){var t="",e=void 0,i=void 0,n=void 0,s=1,r=void 0,o=void 0,a=0;this.overFlowWrapper.innerHTML="";this.l10n=new ri(this.getLocaleName(),{overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},this.locale);var l=this.l10n.getConstant("overflowCountTemplate"),h=this.l10n.getConstant("totalCountTemplate"),c=this.createElement("span",{className:oB});this.overFlowWrapper.appendChild(c),c.innerText=l.replace("${count}",this.value.length.toString());var d=c.offsetWidth;if(lt(c),this.showDropDownIcon&&(a=ct("."+iB,this.inputWrapper).offsetWidth),!y(this.value))if("Box"!==this.mode){if(this.valueTemplate)return o=this.updateChipAndValueTemplate(!1,a,d),this.checkRemainingTemplate(o,c,l,h),void this.updateDelimMode();for(var p=0;!y(this.value[p]);p++){if(t+=0===p?"":this.delimiterChar+" ",t+=i=this.getOverflowVal(p),i=this.overFlowWrapper.innerHTML,this.enableHtmlSanitizer?this.overFlowWrapper.innerText=Yi.sanitize(t):this.overFlowWrapper.innerHTML=t,r=this.overFlowWrapper.offsetWidth,e=this.inputWrapper.offsetWidth,r+a+this.clearIconWidth>e){for(void 0!==n&&""!==n&&(i=n,p=s+1),this.overFlowWrapper.innerHTML=i,o=this.value.length-p,r=this.overFlowWrapper.offsetWidth;r+d+a+this.clearIconWidth>=e&&0!==r&&""!==this.overFlowWrapper.innerHTML;){var u=this.overFlowWrapper.innerHTML.split(this.delimiterChar);u.pop(),this.overFlowWrapper.innerHTML=u.join(this.delimiterChar),o++,r=this.overFlowWrapper.offsetWidth}break}r+d+a+this.clearIconWidth<=e?(n=t,s=p):0===p&&(n="",s=-1)}}else o=this.updateChipAndValueTemplate(!0,a,d);this.checkRemainingTemplate(o,c,l,h)}else this.overFlowWrapper.innerHTML="",tt([this.overFlowWrapper],Yj);this.updateDelimMode()},e.prototype.checkRemainingTemplate=function(t,e,i,n){t>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(e,t,i,n)),"Box"!==this.mode||this.overFlowWrapper.classList.contains(hB)||tt([e],cB)},e.prototype.updateChipAndValueTemplate=function(t,e,i){void 0===e&&(e=0);var n,s,r,o,a,l="",h=1;tt([t?this.chipWrapper:this.valueTemplateContainer],Yj);for(var c=(t?this.chipWrapper:this.valueTemplateContainer).cloneNode(!0),d=t?dt("."+Uj,c):Array.prototype.slice.call(c.children),p=0;p<d.length;p++){if(s=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(d[p]),l=this.overFlowWrapper.innerHTML,o=this.overFlowWrapper.offsetWidth,n=this.inputWrapper.offsetWidth,o+e+this.clearIconWidth>n){for(void 0!==r&&""!==r&&(s=r,p=h+1),this.overFlowWrapper.innerHTML=s,a=this.value.length-p,o=this.overFlowWrapper.offsetWidth;o+i+e+this.clearIconWidth>=n&&0!==o&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),a++,o=this.overFlowWrapper.offsetWidth;break}o+i+e+this.clearIconWidth<=n?(r=l,h=p):0===p&&(r="",h=-1)}return a},e.prototype.updateRemainTemplate=function(t,e,i,n){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),t.innerHTML="",t.innerText=this.overFlowWrapper.firstChild&&(3===this.overFlowWrapper.firstChild.nodeType||"Box"===this.mode||this.valueTemplateContainer)?i.replace("${count}",e.toString()):n.replace("${count}",e.toString()),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?(tt([this.overFlowWrapper],hB),et([this.overFlowWrapper],cB)):et([this.overFlowWrapper],hB),t},e.prototype.getOverflowVal=function(t){var e=this.getSelectedData(this.value[parseInt(t.toString(),10)]);return c(this.treeSettings.loadOnDemand?this.fields.text:"text",e)},e.prototype.updateDelimMode=function(){"Box"!==this.mode?ct("."+oB,this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains(hB)?(tt([this.overFlowWrapper],cB),tt([this.overFlowWrapper],lB)):(this.overFlowWrapper.classList.remove(cB),et([this.overFlowWrapper],cB)):ct("."+oB,this.overFlowWrapper)&&this.overFlowWrapper.classList.remove(cB)},e.prototype.createHiddenElement=function(){this.allowMultiSelection||this.showCheckBox?this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:Oj,tabindex:"-1",multiple:"","aria-label":this.getModuleName()}}):this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:Oj,"aria-label":this.getModuleName()}}),st([this.hiddenElement],this.inputWrapper),this.validationAttribute()},e.prototype.createClearIcon=function(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),tt([this.overAllClear],Yj),et([this.inputWrapper],Pj),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},e.prototype.validationAttribute=function(){var t=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",t),this.inputEle.removeAttribute("name");for(var e=["required","aria-required","form"],i=0;i<e.length;i++){var n=this.inputEle.getAttribute(e[i]);n&&(this.hiddenElement.setAttribute(e[i],n),this.inputEle.removeAttribute(e[i]))}},e.prototype.createChip=function(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),tt([this.inputWrapper],zj),this.getValidMode()&&null!==this.value&&this.value&&0!==this.value.length?tt([this.inputEle],Bj):(null===this.value||this.value&&0===this.value.length||this.checkWrapper)&&tt([this.chipWrapper],Yj))},e.prototype.getValidMode=function(){return!(!this.allowMultiSelection&&!this.showCheckBox)&&("Box"===this.mode||!("Default"!==this.mode||!this.inputFocus))},e.prototype.createSelectAllWrapper=function(){this.checkAllParent=this.createElement("div",{className:Xj,attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:Kj}),this.selectAllSpan.textContent="";var t=y(ut(this.element,".e-bigger"))?"":"e-small";this.checkBoxElement=no(this.createElement,!0,{cssClass:t}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),K.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()},e.prototype.clickHandler=function(t){var e;if(e=t.currentTarget&&t.currentTarget.classList.contains(Xj)?t.currentTarget.firstElementChild.lastElementChild:t.target,this.checkWrapper=ut(e,"."+tB),!y(this.checkWrapper)){this.isClicked=!0;var i=ct("."+Jj,this.checkWrapper);this.changeState(this.checkWrapper,i.classList.contains($j)?"uncheck":"check",t),this.isClicked=!1}t.preventDefault()},e.prototype.changeState=function(t,e,i){var n,s=t.getElementsByClassName(Jj)[0];"check"!==e||s.classList.contains($j)?"uncheck"===e&&s.classList.contains($j)&&(s.classList.remove($j),n="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!1)):(s.classList.add($j),n="true",this.isReverseUpdate||(this.setOldValue(),this.isCheckAllCalled=!0,this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),y(n="check"===e?"true":"false")||t.parentElement.setAttribute("aria-checked",n)},e.prototype.setLocale=function(t){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){var e=t?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";for(var i=0,n=Hi(e)({},this,t?"unSelectAllText":"selectAllText",null,!this.isStringTemplate);i<n.length;i++){var s=n[i];this.selectAllSpan.textContent=s.textContent}}else this.selectAllSpan.textContent=t?this.unSelectAllText:this.selectAllText},e.prototype.setAttributes=function(){this.inputEle.setAttribute("tabindex","-1"),this.inputEle.setAttribute("aria-label",this.getModuleName());var t=this.element.getAttribute("id");this.hiddenElement.id=t+"_hidden",this.inputWrapper.setAttribute("tabindex",this.inputWrapper.classList.contains("e-disabled")?"-1":"0"),this.inputWrapper.setAttribute("aria-label",this.getModuleName()),ht(this.inputWrapper,this.getAriaAttributes())},e.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];if("class"===i)this.inputWrapper.classList.add(this.htmlAttributes[""+i]);else if("disabled"===i)this.setProperties({enabled:!1},!0),this.setEnable();else if("readonly"===i)this.setProperties({readonly:!0},!0),this.dataBind();else if("style"===i)this.inputWrapper.style.cssText=this.htmlAttributes[""+i];else{0===i.indexOf("data")||["name","required"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"].indexOf(i)>-1&&"placeholder"===i?hI.setPlaceholder(this.htmlAttributes[""+i],this.inputEle):this.inputEle.setAttribute(i,this.htmlAttributes[""+i])}}},e.prototype.updateDataAttribute=function(){for(var t=this.htmlAttributes,e=["class","style","id","type"],i={},n=0;n<this.element.attributes.length;n++)-1===e.indexOf(this.element.attributes[n].name)&&"readonly"!==this.element.attributes[n].name&&(i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));f(i,t,i),this.setProperties({htmlAttributes:i},!0)},e.prototype.showOverAllClear=function(){this.enabled&&!this.readonly&&(this.overAllClear&&(!!this.value&&!!this.value.length&&this.showClearButton?(et([this.overAllClear],Yj),tt([this.inputWrapper],Pj)):(tt([this.overAllClear],Yj),et([this.inputWrapper],Pj))))},e.prototype.setTreeValue=function(){if(null!==this.value&&0!==this.value.length){var t=void 0;if(this.showCheckBox||this.allowMultiSelection){for(var e=this.value.length-1;e>=0;e--)y(t=this.treeObj.getTreeData(this.value[e])[0])&&this.value.splice(e,1);0!==this.value.length&&this.setValidValue()}else y(t=this.treeObj.getTreeData(this.value[0])[0])?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:t[this.fields.text]},!0),this.setValidValue())}},e.prototype.setTreeText=function(){if((null===this.value||this.isInitialized)&&null!==this.text){var t=void 0,e=[];if(this.showCheckBox||this.allowMultiSelection){for(var i=this.text.split(this.delimiterChar),n=0;n<i.length;n++)y(t=this.getItems(i[n]))||e.push(t[this.fields.value].toString());0!==e.length?(this.setOldValue(),this.setProperties({value:e},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else y(t=this.getItems(this.text))?this.setProperties({text:this.currentText},!0):(this.setOldValue(),this.setProperties({value:[t[this.fields.value].toString()]},!0),this.setValidValue())}},e.prototype.setSelectedValue=function(){null!==this.value&&0!==this.value.length||this.isInitialized||(this.setOldValue(),this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),d("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value)},e.prototype.setValueTemplate=function(){var t=this;if(this.valueTemplate){var e=this.initializeValueTemplate();this.getValueTemplateElement(this.value[0],e),this.hasTemplate&&this.portals&&(this.treeObj.portals&&(this.portals=this.portals.concat(this.treeObj.portals.filter(function(e){return!t.portals.includes(e)}))),this.isReact&&this.renderReactTemplates(this.reactCallBack)),this.showOrHideValueTemplate(!0)}},e.prototype.getValueTemplateElement=function(t,e){var i=e(this.getNodeData(t,this.isFilteredData?this.treeData:this.treeItems),this,"valueTemplate",this.element.id+"valueTemplate",this.isStringTemplate,void 0,this.valueTemplateContainer);i&&rt(i=Array.prototype.slice.call(i),this.valueTemplateContainer)},e.prototype.setValidValue=function(){var t=this;if(this.showCheckBox||this.allowMultiSelection){if(this.showCheckBox)(this.value.length!==this.treeObj.checkedNodes.length||this.value.filter(function(e){return-1===t.treeObj.checkedNodes.indexOf(e)}).length>0||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect());else this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues();this.treeObj.dataBind()}else{hI.setValue(this.text,this.inputEle,this.floatLabelType),this.setValueTemplate();var e=this.value[0].toString();this.treeObj.selectedNodes[0]!==e&&(d("selectedNodes",[e],this.treeObj),this.fields.dataSource instanceof dC&&this.updateSelectedValues())}this.currentText=this.text,this.currentValue=this.value,!y(this.value)&&this.value.length>0&&!y(this.currentText)&&this.inputWrapper.setAttribute("aria-label",this.currentText.replace(/,/g,", ")),this.isInitialized&&this.triggerChangeEvent()},e.prototype.getItems=function(t){var e;if(1===this.treeDataType)for(var i=0;i<this.treeItems.length;i++){var n=c(this.fields.text,this.treeItems[parseInt(i.toString(),10)]);if(!y(this.treeItems[i])&&!y(n)&&n===t){e=this.treeItems[i];break}}else e=this.getNestedItems(this.treeItems,this.fields,t);return e},e.prototype.getNestedItems=function(t,e,i){for(var n,s=0,r=t.length;s<r;s++){var o=c(this.fields.text,t[parseInt(s.toString(),10)]);if(t[s]&&o&&o.toString()===i)return t[s];if("string"!=typeof e.child||y(c(e.child,t[s]))){if(this.fields.dataSource instanceof dC&&!y(c("child",t[s]))){if(void 0!==(n=this.getNestedItems(c("child",t[parseInt(s.toString(),10)]),this.getChildType(e),i)))break}}else{var a=c(e.child,t[parseInt(s.toString(),10)]);if(void 0!==(n=this.getNestedItems(a,this.getChildType(e),i)))break}}return n},e.prototype.getChildType=function(t){return"string"==typeof t.child||y(t.child)?t:t.child},e.prototype.renderTree=function(){this.treeObj=new pN({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),nodeExpanded:this.onNodeExpanded.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,enableHtmlSanitizer:this.enableHtmlSanitizer,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate,checkDisabledChildren:this.treeSettings.checkDisabledChildren,checkOnClick:!0}),this.treeObj.root=this.root?this.root:this,this.treeObj.appendTo(this.tree)},e.prototype.renderPopup=function(){var t=this;this.isFilteredData&&(this.treeObj.element.classList.remove("e-filtering"),this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));var e=!1;this.trigger("beforeOpen",{cancel:!1},function(i){if(i.cancel?e=!0:(tt([t.inputWrapper],[Vj]),t.isReact&&t.isFilterRestore&&t.treeObj.refresh(),t.isFirstRender?(t.popupEle=t.createElement("div",{id:t.element.id+"_options",className:"e-ddt e-popup "+(null!=t.cssClass?t.cssClass:"")}),t.popupEle.setAttribute("role","region"),t.popupEle.setAttribute("aria-label",t.element.id),document.body.appendChild(t.popupEle),t.createPopup(t.popupEle)):(t.popupEle=t.popupObj.element,t.isReact&&t.isFilterRestore&&(t.isFilteredData=!0,t.popupEle.removeChild(t.filterContainer)))),(t.isFirstRender&&!e||t.isFilteredData)&&(t.isFilteredData=!1,st([t.popupDiv],t.popupEle),et([t.popupDiv],_j),t.allowFiltering&&t.renderFilter(),t.showCheckBox&&t.showSelectAll&&!t.popupDiv.classList.contains(rB)&&(t.createSelectAllWrapper(),t.popupEle.insertBefore(t.checkAllParent,t.popupDiv)),t.headerTemplate&&t.setHeaderTemplate(),t.footerTemplate&&t.setFooterTemplate(),t.isFirstRender=!1,t.hasTemplate&&t.portals&&(t.treeObj.portals&&(t.portals=t.portals.concat(t.treeObj.portals.filter(function(e){return!t.portals.includes(e)}))),t.isReact&&t.renderReactTemplates(t.reactCallBack))),!e){if(ht(t.inputEle,{"aria-expanded":"true"}),t.popupObj.show(null,1e3===t.zIndex?t.inputEle:null),et([t.popupEle],_j),t.updatePopupHeight(),t.popupObj.refreshPosition(),!t.showSelectAll&&!t.allowFiltering&&!t.popupDiv.classList.contains(rB)&&t.treeItems.length>0){if(o=null!=t.value&&null!=t.text?t.treeObj.element.querySelector('[data-uid="'+t.value[t.value.length-1]+'"]'):null)t.treeObj.element.querySelector("li").setAttribute("tabindex","-1"),o.setAttribute("tabindex","0");else{var n=t.treeObj.element.querySelector(".e-node-focus");o=t.treeObj.element.querySelector('li[tabindex="0"]:not(.e-disable)')||t.treeObj.element.querySelector("li:not(.e-disable)"),t.removeFocus(o,n)}t.updateFocus(o)}if(t.treeObj.checkedNodes.length>0&&!t.isFilterRestore){var s=t.treeObj.element.querySelectorAll("li:not(.e-disable)");if(t.treeObj.element.querySelectorAll("li[aria-checked=true]").length===s.length&&t.checkBoxElement){var r=ut(t.checkBoxElement,"."+tB);t.changeState(r,"check"),t.checkSelectAll=!1}}if(t.showSelectAll&&!t.allowFiltering){n=t.treeObj.element.querySelector(".e-node-focus");var o=t.popupEle.querySelector(".e-selectall-parent");t.removeFocus(o,n),t.updateFocus(o)}if(t.allowFiltering)y(o=t.treeObj.element.querySelector("li.e-node-focus"))||et([o],"e-node-focus"),et([t.inputWrapper],[Hj]),t.filterObj.element.focus();var a={popup:t.popupObj};t.trigger("open",a)}})},e.prototype.removeFocus=function(t,e){e&&e!==t&&(e.setAttribute("tabindex","-1"),et([e],"e-node-focus"))},e.prototype.updateFocus=function(t){y(t)||(t.focus(),tt([t],["e-node-focus"]))},e.prototype.reactCallBack=function(){y(this.popupObj)||(this.updatePopupHeight(),this.popupObj.refreshPosition())},e.prototype.updatePopupHeight=function(){if(!this.isFirstRender){var t=this.getHeight();if(this.popupEle.style.maxHeight=t,this.allowFiltering){var e=Math.round(this.filterContainer.getBoundingClientRect().height);t=S(parseInt(t,10)-e+"px")}if(this.headerTemplate){e=Math.round(this.header.getBoundingClientRect().height);t=S(parseInt(t,10)-e+"px")}if(this.showCheckBox&&this.showSelectAll&&!this.popupDiv.classList.contains(rB)){e=Math.round(this.checkAllParent.getBoundingClientRect().height);t=S(parseInt(t,10)-e+"px")}if(this.footerTemplate){e=Math.round(this.footer.getBoundingClientRect().height);t=S(parseInt(t,10)-e+"px")}var i=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);i+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),t=S(parseInt(t,10)-i+"px"),this.popupDiv.style.maxHeight=t}},e.prototype.createPopup=function(t){var e=this;this.isFirstRender&&(this.popupObj=new Jr(t,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:function(){e.isPopupOpen=!1},open:function(){document.addEventListener("mousedown",e.documentClickContext),e.isPopupOpen=!0},targetExitViewport:function(){G.isDevice||e.hidePopup()}}))},e.prototype.setElementWidth=function(t){var e=this.inputWrapper;y(t)||("number"==typeof t?e.style.width=S(t):"string"==typeof t&&(e.style.width=t.match(/px|%|em/)?t:S(t)))},e.prototype.setWidth=function(){var t=S(this.popupWidth);return t.indexOf("%")>-1?t=(this.inputWrapper.offsetWidth*parseFloat(t)/100).toString()+"px":"string"==typeof this.popupWidth&&(t=this.popupWidth.match(/px|em/)?this.popupWidth:t),t},e.prototype.getHeight=function(){var t=S(this.popupHeight);return t.indexOf("%")>-1?t=(document.documentElement.clientHeight*parseFloat(t)/100).toString()+"px":"string"==typeof this.popupHeight&&(t=this.popupHeight.match(/px|em/)?this.popupHeight:t),t},e.prototype.onDocumentClick=function(t){var e=t.target,i=ut(e,"."+Qj),n=ut(e,"."+eB),s=ut(e,"."+sB),r=ut(e,"."+nB),o=!!e.classList.contains(Zj)||(ft(e,".e-ddt .e-popup")||ft(e,".e-ddt .e-treeview"));this.isPopupOpen&&(!y(this.inputWrapper)&&this.inputWrapper.contains(e)||i||o||s||r)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&e.classList.contains(Wj)||this.isPopupOpen&&(e.classList.contains(Xj)||e.classList.contains(Kj)||e.classList.contains(Jj)))?(this.isDocumentClick=!1,t.preventDefault()):y(this.inputWrapper)||this.inputWrapper.contains(e)||!this.inputFocus||n||this.focusOut(t)},e.prototype.onActionFailure=function(t){this.trigger("actionFailure",t),this.l10nUpdate(!0),tt([this.popupDiv],rB)},e.prototype.OnDataBound=function(t){this.treeItems=t.data,this.treeItems.length<=0?(this.l10nUpdate(),tt([this.popupDiv],rB),this.hideCheckAll(!0)):this.popupDiv.classList.contains(rB)&&this.treeItems.length>=1&&(et([this.popupDiv],rB),this.hideCheckAll(!1)),this.isFilteredData||(this.treeDataType=this.getTreeDataType(this.treeItems,this.fields)),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus(),this.isInitialized=!0);var e={data:t.data};this.trigger("dataBound",e),null===this.filterObj&&(this.isFilteredData=!1),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.showSelectAll||(this.isFilterRestore=!1))},e.prototype.restoreFilterSelection=function(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]},e.prototype.setCssClass=function(t,e){var i=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];y(e)||""===e||et(i,e.split(" ")),y(t)||""===t||tt(i,t.split(" "))},e.prototype.setEnableRTL=function(t){t?this.inputWrapper.classList.add(Lj):this.inputWrapper.classList.remove(Lj),this.popupObj&&(this.popupObj.enableRtl=t,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=t,this.treeObj.dataBind())},e.prototype.setEnable=function(){hI.setEnabled(this.enabled,this.inputEle),this.enabled?(et([this.inputWrapper],qj),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),tt([this.inputWrapper],qj),this.inputWrapper&&this.inputWrapper.classList.contains(Hj)&&et([this.inputWrapper],[Hj]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))},e.prototype.cloneFields=function(t){return{dataSource:t.dataSource,value:t.value,text:t.text,parentValue:t.parentValue,child:this.cloneChildField(t.child),hasChildren:t.hasChildren,expanded:t.expanded,iconCss:t.iconCss,imageUrl:t.imageUrl,htmlAttributes:t.htmlAttributes,query:t.query,selected:t.selected,selectable:t.selectable,tableName:t.tableName,tooltip:t.tooltip}},e.prototype.cloneChildField=function(t){return"string"==typeof t?t:{dataSource:t.dataSource,value:t.value,text:t.text,parentValue:t.parentValue,child:t.child?this.cloneChildField(t.child):null,hasChildren:t.hasChildren,expanded:t.expanded,iconCss:t.iconCss,imageUrl:t.imageUrl,htmlAttributes:t.htmlAttributes,query:t.query,selected:t.selected,selectable:t.selectable,tableName:t.tableName,tooltip:t.tooltip}},e.prototype.getTreeFields=function(t){return{dataSource:t.dataSource,id:t.value,text:t.text,parentID:t.parentValue,child:this.getTreeChildren(t.child),hasChildren:t.hasChildren,expanded:t.expanded,iconCss:t.iconCss,imageUrl:t.imageUrl,isChecked:t.selected,htmlAttributes:t.htmlAttributes,query:t.query,selectable:t.selectable,selected:t.selected,tableName:t.tableName,tooltip:t.tooltip}},e.prototype.getTreeChildren=function(t){if("string"==typeof t)return t;if(!y(t)){var e=t=this.getActualProperties(t);return t.value&&(e.id=t.value),t.parentValue&&(e.parentID=t.parentValue),t.child&&(e.child=this.getTreeChildren(t.child)),t.selected&&this.showCheckBox&&(e.isChecked=t.selected),e}return null},e.prototype.getTreeDataType=function(t,e){if(this.fields.dataSource instanceof dC){for(var i=0;i<t.length;i++)if("string"==typeof e.child&&y(c(e.child,t[i])))return 1;return 2}y(this.fields.dataSource)&&(this.fields.dataSource=[]);i=0;for(var n=this.fields.dataSource.length;i<n;i++){if("string"==typeof e.child&&!y(c(e.child,this.fields.dataSource[i])))return 2;if(!y(c(e.parentValue,this.fields.dataSource[i]))||!y(c(e.hasChildren,this.fields.dataSource[i])))return 1}return 1},e.prototype.setFields=function(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.setProperties({value:this.oldValue},!0),this.treeObj.dataBind(),this.updateValue(this.value)},e.prototype.getEventArgs=function(t){var e,i=t.data,n=t.nodeData;return this.showCheckBox&&("check"===t.action?e="select":"uncheck"===t.action&&(e="un-select")),{action:this.showCheckBox?e:t.action,isInteracted:!!this.isClicked||t.isInteracted,item:t.node,itemData:this.showCheckBox?i[0]:n}},e.prototype.onBeforeSelect=function(t){t.isInteracted&&(this.setOldValue(),null===this.value&&this.setProperties({value:[]},!0))},e.prototype.updateHiddenValue=function(){this.allowMultiSelection||this.showCheckBox||(this.value&&this.value.length?this.hiddenElement.innerHTML='<option selected value ="'+this.value[0]+'">'+this.text+"</option>":this.hiddenElement.innerHTML="")},e.prototype.onNodeSelected=function(t){if(!this.showCheckBox){var e,i=this.getEventArgs(t);if(this.trigger("select",i),t.isInteracted){var n=c("id",t.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[n]},!0),e=this.itemTemplate?c("text",this.treeObj.getNode(n)):c("text",t.nodeData).toString(),hI.setValue(e,this.inputEle,this.floatLabelType),this.setProperties({text:e},!0),this.currentText=this.text,this.currentValue=this.value,this.setValueTemplate(),!y(this.value)&&this.value.length>0&&this.inputWrapper.setAttribute("aria-label",t.nodeData.text.toString()),ht(this.inputWrapper,{"aria-describedby":this.element.id}),ht(this.inputWrapper,{"aria-activedescendant":n.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}},e.prototype.onNodeClicked=function(t){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(t.event),this.isNodeSelected=!1);var e=t.event.target;(e.classList.contains("e-fullrow")||e.classList.contains("e-list-text"))&&this.showCheckBox&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.changeOnBlur||!this.allowMultiSelection&&!this.showCheckBox||this.triggerChangeEvent(t.event)},e.prototype.onNodeChecked=function(t){var e=this.getEventArgs(t);if(this.trigger("select",e),this.isFilteredData&&"uncheck"===t.action){var i=c("id",t.data[0]).toString();this.removeSelectedData(i,!0)}if((!this.isChipDelete&&t.isInteracted||!this.isFilteredData&&"check"===t.action&&this.isFromFilterChange)&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){var n=this.treeObj.element.querySelectorAll("li:not(.e-disable)"),s=this.treeObj.element.querySelectorAll("li[aria-checked=true]"),r=ut(this.checkBoxElement,"."+tB);r&&"uncheck"===t.action&&(t.isInteracted||0===s.length||!y(t.data[0])&&"false"===t.data[0].isChecked)||!t.isInteracted&&this.isFilterRestore?(this.isFilterRestore=!1,this.isReverseUpdate=!0,this.changeState(r,"uncheck"),this.isReverseUpdate=!1):r&&"check"===t.action&&s.length===n.length&&(t.isInteracted||this.isCheckAllCalled||!y(t.data[0])&&"true"===t.data[0].isChecked)&&(this.isReverseUpdate=!0,this.isCheckAllCalled=!1,this.changeState(r,"check"),this.isReverseUpdate=!1)}this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)},e.prototype.beforeCheck=function(t){t.isInteracted&&this.setOldValue()},e.prototype.onNodeExpanded=function(){if(this.hasTemplate&&this.portals&&this.treeObj.portals){for(var t=0;t<this.treeObj.portals.length;t++)-1===this.portals.indexOf(this.treeObj.portals[t])&&this.portals.push(this.treeObj.portals[t]);this.renderReactTemplates()}},e.prototype.updateClearButton=function(t){if(t?this.inputWrapper.contains(this.overAllClear)?(et([this.overAllClear],Yj),tt([this.inputWrapper],Pj)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(tt([this.overAllClear],Yj),et([this.inputWrapper],Pj)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper)for(var e=dt("."+Wj,this.chipWrapper),i=0;i<e.length;i++)t?et([e[i]],Yj):tt([e[i]],Yj)},e.prototype.updateDropDownIconState=function(t){var e=ct("."+iB,this.inputWrapper);t?(e?et([e],Yj):hI.appendSpan(kj,this.inputWrapper,this.createElement),tt([this.inputWrapper],jj)):(tt([e],Yj),et([this.inputWrapper],jj))},e.prototype.updateMode=function(){if("Custom"!==this.mode)if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var t=this.getValidMode();this.chipWrapper.classList.contains(Yj)&&t?(et([this.chipWrapper],Yj),this.showOrHideValueTemplate(!1,!0),tt([this.inputWrapper],zj)):t||(tt([this.chipWrapper],Yj),et([this.inputWrapper],zj),this.showOrHideValueTemplate(!0));var e=null!==this.value&&0!==this.value.length;t&&e?tt([this.inputEle],Bj):et([this.inputEle],Bj)}else this.inputEle.classList.contains(Bj)&&(et([this.inputEle],Bj),this.chipWrapper&&(tt([this.chipWrapper],Yj),et([this.inputWrapper],zj),this.showOrHideValueTemplate(!0)))},e.prototype.ensurePlaceHolder=function(){(y(this.value)||null!==this.value&&0===this.value.length)&&(et([this.inputEle],Bj),this.chipWrapper&&(tt([this.chipWrapper],Yj),this.showOrHideValueTemplate(!0)))},e.prototype.ensureClearIconPosition=function(t){"Never"!==t&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},e.prototype.setMultiSelectValue=function(t){var e=this;if(this.isFilteredData){var i=y(this.value)?[]:this.value;i=i.filter(function(t){var i=e.treeObj.getTreeData(t);return!Array.isArray(i)||i.every(function(t){return t.selected})});for(var n=0;n<t.length;n++)(y(this.value)||-1===this.value.indexOf(t[n]))&&i.push(t[n]);this.setProperties({value:i},!0)}else this.setProperties({value:this.isFromFilterChange&&t&&0===t.length?this.value:t},!0),this.isFromFilterChange=!1,!t||0===t.length||this.showCheckBox||this.ddtCompareValues(this.treeObj.selectedNodes,this.value.slice())||(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())},e.prototype.setMultiSelect=function(){if(this.showCheckBox&&!this.isDynamicChange)this.setMultiSelectValue(this.treeObj.checkedNodes.slice());else{var t=this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null;this.setMultiSelectValue(t),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())}this.selectedText=[];var e=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!e&&(et([this.inputEle],Bj),at(this.chipWrapper)),this.getValidMode()&&null!==this.value&&(tt([this.inputEle],Bj),this.chipWrapper&&(et([this.chipWrapper],Yj),this.showOrHideValueTemplate(!1,!0)));var i=!!this.value&&!!this.value.length;this.chipWrapper&&"Box"===this.mode&&!i&&(tt([this.chipWrapper],Yj),et([this.inputEle],Bj),this.showOrHideValueTemplate(!0)),this.updateSelectedValues()},e.prototype.getSelectedData=function(t){var e=null;if(this.isFilteredData)for(var i=0;i<this.selectedData.length;i++)if(c(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[i]).toString()===t){e=this.selectedData[i];break}return y(e)&&(y(e=this.treeSettings.loadOnDemand?this.getNodeData(t,this.treeItems):this.treeObj.getNode(t))||this.selectedData.push(e)),e},e.prototype.getNodeData=function(t,e){var i;if(y(t))return i;if(1!==this.treeDataType)return this.getChildNodeData(e,this.fields,t);for(var n=0,s=e.length;n<s;n++){var r=c(this.fields.value,e[n]);if(!y(e[n])&&!y(r)&&r.toString()===t)return e[n]}return i},e.prototype.getChildNodeData=function(t,e,i){var n;if(y(t))return n;for(var s=0,r=t.length;s<r;s++){var o=c(e.value,t[s]);if(t[s]&&o&&o.toString()===i)return t[s];if("string"!=typeof e.child||y(c(e.child,t[s]))){if(this.fields.dataSource instanceof dC&&!y(c("child",t[s]))){if(void 0!==(n=this.getChildNodeData(c("child",t[s]),this.getChildMapperFields(e),i)))break}}else{var a=c(e.child,t[s]);if(void 0!==(n=this.getChildNodeData(a,this.getChildMapperFields(e),i)))break}}return n},e.prototype.getChildMapperFields=function(t){return"string"==typeof t.child||y(t.child)?t:t.child},e.prototype.removeSelectedData=function(t,e){var i=y(this.value)?[]:this.value.slice();i.splice(i.indexOf(t),1),this.setProperties({value:i},e);for(var n=0;n<this.selectedData.length;n++)if(c(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[n]).toString()===t){this.selectedData.splice(n,1);break}},e.prototype.initializeValueTemplate=function(){if(!this.valueTemplate)return null;if(this.valueTemplateContainer)for(;this.valueTemplateContainer.firstChild;)this.valueTemplateContainer.removeChild(this.valueTemplateContainer.firstChild);else this.valueTemplateContainer=this.createElement("span",{className:aB+" "+lB+" e-input-value "+Yj});return this.inputWrapper.insertBefore(this.valueTemplateContainer,this.inputEle),this.templateComplier(this.valueTemplate)},e.prototype.showOrHideValueTemplate=function(t,e){void 0===e&&(e=!1),this.valueTemplateContainer&&"Box"!==this.mode&&(t?(et([this.valueTemplateContainer],Yj),tt([this.inputWrapper],zj),tt([this.inputEle],Bj)):(tt([this.valueTemplateContainer],Yj),e||(et([this.inputWrapper],zj),et([this.inputEle],Bj))))},e.prototype.updateSelectedValues=function(){var t,e,i=this;this.dataValue="";var n,s="";this.hiddenElement.innerHTML="";var r="";if(this.isChipDelete&&!this.treeSettings.autoCheck||!this.inputWrapper.contains(this.chipWrapper)||(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!y(this.value)){for(var o=this.initializeValueTemplate(),a=0,l=this.value.length;a<l;a++)n=this.getSelectedData(this.value[a]),e=c(this.treeSettings.loadOnDemand?this.fields.text:"text",n),this.selectedText.push(e),t=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+t,s+=","+t):(this.dataValue+=t,s+=t),"Custom"===this.mode||"Delimiter"===this.mode||this.isChipDelete&&!this.treeSettings.autoCheck||!this.allowMultiSelection&&!this.showCheckBox||this.setChipValues(t,this.value[a]),r+='<option selected value ="'+this.value[a]+'">'+this.selectedText[this.selectedText.length-1]+"</option>",this.valueTemplate&&this.getValueTemplateElement(this.value[a],o);this.hasTemplate&&this.portals&&(this.treeObj.portals&&(this.portals=this.portals.concat(this.treeObj.portals.filter(function(t){return!i.portals.includes(t)}))),this.isReact&&this.renderReactTemplates(this.reactCallBack)),this.selectedText.length>=1&&this.setProperties({text:s},!0),this.hiddenElement.innerHTML=r,"Custom"===this.mode&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}var h=this.getValidMode();"Custom"===this.mode||"Box"===this.mode||!this.allowMultiSelection&&!this.showCheckBox||h||(this.chipWrapper&&(tt([this.chipWrapper],Yj),et([this.inputWrapper],zj)),this.showOrHideValueTemplate(!0)),hI.setValue(this.dataValue,this.inputEle,this.floatLabelType),""===s?this.setProperties({text:null},!0):this.setProperties({text:s},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value,!y(this.value)&&this.value.length>0&&!y(this.currentText)?this.inputWrapper.setAttribute("aria-label",this.currentText.replace(/,/g,", ")):this.inputWrapper.setAttribute("aria-label",this.getModuleName())},e.prototype.setChipValues=function(t,e){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var i=this.createElement("span",{className:Uj,attrs:{"data-value":e}}),n=this.createElement("span",{className:Fj}),s=this.createElement("span",{className:Wj+" e-icons"});this.enableHtmlSanitizer?n.innerText=Yi.sanitize(t):n.innerHTML=t,i.appendChild(n),this.chipCollection.appendChild(i),this.showClearButton&&(i.appendChild(s),K.add(s,"mouseup",this.removeChip,this))},e.prototype.setTagValues=function(){if(null!==this.value&&null!=this.text&&0!==this.value.length){this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(zj)||tt([this.inputWrapper],zj);var t=this.createElement("span",{className:Uj});this.inputEle.classList.contains(Bj)||tt([this.inputEle],Bj),this.chipWrapper.classList.contains(Yj)&&(et([this.chipWrapper],Yj),this.showOrHideValueTemplate(!1,!0));var e=this.createElement("span",{className:Fj}),i=this.customTemplate,n=this.customTemplateId,s=this.templateComplier(i)({value:this.value,text:this.text},this,"customTemplate",n,this.isStringTemplate,void 0,e);s&&rt(s=Array.prototype.slice.call(s),e),t.appendChild(e),this.chipCollection.appendChild(t),this.isReact&&this.renderReactTemplates()}else this.inputWrapper.contains(this.chipWrapper)&&tt([this.chipWrapper],Yj)},e.prototype.setSelectAllWrapper=function(t){this.isFirstRender||(t&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(at(this.checkAllParent),this.checkAllParent=null))},e.prototype.setHeaderTemplate=function(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),tt([this.header],sB));var t=this.templateComplier(this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);t&&rt(t=Array.prototype.slice.call(t),this.header),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)},e.prototype.templateComplier=function(t){if(t)try{return"function"!=typeof t&&document.querySelectorAll(t).length?Hi(document.querySelector(t).innerHTML.trim()):Hi(t)}catch(e){return Hi(t)}return Hi(t)},e.prototype.setFooterTemplate=function(){this.footer?this.isReact&&"function"==typeof this.footerTemplate?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),tt([this.footer],nB));var t=this.templateComplier(this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);t&&rt(t=Array.prototype.slice.call(t),this.footer),rt([this.footer],this.popupEle)},e.prototype.clearAll=function(t){this.enabled&&!this.readonly&&(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),t&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(t))},e.prototype.removeChip=function(t){if(this.enabled&&!this.readonly){t.target.classList.contains("e-chips-close")&&!this.isPopupOpen&&(t.stopPropagation(),t.preventDefault());var e=t.target.parentElement,i=e.getAttribute("data-value");this.chipCollection&&e&&lt(e),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(i,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([i]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(t),this.isChipDelete=!1,this.ensurePlaceHolder()}},e.prototype.resetValue=function(t){Array.isArray(this.value)&&0===this.value.length&&null==this.text||(hI.setValue(null,this.inputEle,this.floatLabelType),t||(this.setOldValue(),this.setProperties({value:[]},!0),this.showOrHideValueTemplate(!1)),(y(this.value)||0===this.value.length)&&this.inputWrapper.setAttribute("aria-label",this.getModuleName()),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],d("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.uncheckAll(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||t?t&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))},e.prototype.clearCheckAll=function(){this.showSelectAll&&this.value&&0===this.value.length&&this.setLocale(!1)},e.prototype.setOldValue=function(){this.oldValue=Array.isArray(this.value)?this.value.slice():this.value},e.prototype.selectAllItems=function(t){if(this.showCheckBox)t?(this.isCheckAllCalled=!0,this.treeObj.checkAll()):this.treeObj.uncheckAll(),this.checkSelectAll=t;else if(this.allowMultiSelection)if(t){for(var e=dt("li",this.treeObj.element),i=void 0,n=[],s=0;s<e.length;s++)i=e[s].getAttribute("data-uid").toString(),n.push(i);this.treeObj.selectedNodes=n}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect(),this.wrapText||(t?this.updateView():this.updateOverflowWrapper(!0))},e.prototype.updateTreeSettings=function(t){if("autoCheck"===t)this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===t)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else{if("expandOn"===t)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();"checkDisabledChildren"===t&&(this.treeObj.checkDisabledChildren=this.treeSettings.checkDisabledChildren)}this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)},e.prototype.updateCheckBoxState=function(t){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=t,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1},e.prototype.updateTemplate=function(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)},e.prototype.l10nUpdate=function(t){if(this.noRecord?this.noRecord.innerHTML="":this.noRecord=this.createElement("div"),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){var e=t?this.actionFailureTemplate:this.noRecordsTemplate,i=t?this.actionFailureTemplateId:this.noRecordsTemplateId,n=t?"actionFailureTemplate":"noRecordsTemplate",s=this.templateComplier(e)({},this,n,i,this.isStringTemplate,void 0,this.noRecord);s&&rt(s=Array.prototype.slice.call(s),this.noRecord)}else{this.l10n=new ri(this.getLocaleName(),{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"},this.locale),this.noRecord.innerHTML=t?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}tt([this.noRecord],"e-ddt-nodata"),st([this.noRecord],this.popupDiv),this.treeObj&&this.treeObj.element.removeAttribute("aria-activedescendant")},e.prototype.updateRecordTemplate=function(t){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(t),this.hasTemplate&&this.updateTemplate())},e.prototype.updateOverflowWrapper=function(t){t?this.inputWrapper.contains(this.overFlowWrapper)&&t&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:aB+" "+Yj}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))},e.prototype.updateMultiSelection=function(t){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=t,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()},e.prototype.updateAllowFiltering=function(t){this.isFirstRender||(t?this.renderFilter():this.destroyFilter())},e.prototype.updateFilterPlaceHolder=function(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))},e.prototype.updateValue=function(t){this.isDynamicChange=!0,y(t)||0===t.length?this.resetValue(!0):(this.setTreeValue(),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText||(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1},e.prototype.updateText=function(t){y(t)?this.resetValue():(this.setTreeText(),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText||(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()},e.prototype.updateModelMode=function(){if(!!this.allowMultiSelection||!!this.showCheckBox){if(!this.wrapText){var t=ct(".e-overflow:not(.e-input-value)",this.inputWrapper);t&&(t.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&0!==this.value.length&&(this.updateOverFlowView(),tt([this.inputEle],Bj),"Box"===this.mode?et([this.overFlowWrapper,this.inputWrapper],lB):tt([this.overFlowWrapper,this.inputWrapper],lB))}},e.prototype.updateOption=function(){this.hiddenElement.hasAttribute("multiple")||!this.allowMultiSelection&&!this.showCheckBox?!this.hiddenElement.hasAttribute("multiple")||this.allowMultiSelection||this.showCheckBox||this.hiddenElement.removeAttribute("multiple"):this.hiddenElement.setAttribute("multiple","")},e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"width":this.setElementWidth(t.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":hI.setPlaceholder(t.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(t.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":hI.setReadonly(t.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":hI.removeFloating(this.inputObj),hI.addFloating(this.inputEle,t.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(t.floatLabelType);break;case"showClearButton":this.updateClearButton(t.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(t.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":JSON.stringify(e.value)!==JSON.stringify(t.value)&&(this.oldValue=e.value,this.updateValue(t.value));break;case"text":this.updateText(t.text);break;case"allowMultiSelection":this.updateMultiSelection(t.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;"Custom"===this.mode?(this.overFlowWrapper&&at(this.overFlowWrapper),this.chipWrapper&&at(this.chipWrapper),this.setTagValues()):("Custom"===e.mode&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(t.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(t.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":for(var s=0,r=Object.keys(t.treeSettings);s<r.length;s++){var o=r[s];this.updateTreeSettings(o)}break;case"customTemplate":if("Custom"!==this.mode)return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=t.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(t.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=t.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=t.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText?(tt([this.overFlowWrapper],Yj),this.chipWrapper&&"Box"===this.mode?et([this.chipWrapper],Yj):(et([this.inputWrapper],zj),et([this.inputEle],Bj)),this.ensurePlaceHolder()):this.updateView()}}},e.prototype.clear=function(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)},e.prototype.destroy=function(){for(this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),at(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),hI.setValue(null,this.inputEle,this.floatLabelType),at(this.inputWrapper),at(this.popupDiv),at(this.hiddenElement),hI.setRipple(!1,[this.inputObj]),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection||this.value&&this.valueTemplateContainer)&&this.element.classList.remove(Bj),at(this.inputObj.container),this.inputObj.buttons.length&&at(this.inputObj.buttons[0]),this.inputObj=null;this.hiddenElement.options.length>0;)this.hiddenElement.remove(0);if(this.hiddenElement.innerHTML="",this.hiddenElement=null,this.inputWrapper.innerHTML="",this.inputWrapper=null,this.popupDiv=null,this.tree=null,this.popupObj=null,this.treeObj=null,this.overAllClear=null,this.chipCollection)for(var e=0,i=dt(".e-chips-close",this.chipCollection);e<i.length;e++){var n=i[e];K.remove(n,"mouseup",this.removeChip)}this.chipWrapper=null,this.chipCollection=null,this.checkAllParent=null,this.selectAllSpan=null,this.checkBoxElement=null,this.checkWrapper=null,this.popupEle=null,this.header=null,this.footer=null,this.overFlowWrapper=null,this.keyboardModule=null,t.prototype.destroy.call(this),this.setProperties({value:[]},!0)},e.prototype.destroyFilter=function(){this.filterObj&&(this.filterObj.destroy(),at(this.filterObj.element),at(this.filterContainer),this.filterObj=null)},e.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isReact&&this.clearTemplate(["headerTemplate","footerTemplate","itemTemplate","actionFailureTemplate","noRecordsTemplate"]),this.popupObj&&(this.popupObj.destroy(),at(this.popupObj.element))},e.prototype.ensureVisible=function(t){this.treeObj.ensureVisible(t)},e.prototype.getData=function(t){return this.treeObj.getTreeData(t)},e.prototype.hidePopup=function(){var t={popup:this.popupObj,cancel:!1};this.trigger("close",t),t.cancel||(this.inputWrapper.classList.remove(Vj),this.popupEle&&tt([this.popupEle],_j),ht(this.inputEle,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&tt([this.inputWrapper],[Hj])),this.isFilteredData&&(this.treeObj.treeData=this.treeData),this.destroyPopupOnHide&&(this.isFirstRender=!0,this.destroyPopup())))},e.prototype.selectAll=function(t){this.selectAllItems(t)},e.prototype.showPopup=function(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())},e.prototype.getModuleName=function(){return"dropdowntree"},Nj([jt("The Request Failed")],e.prototype,"actionFailureTemplate",void 0),Nj([jt(!1)],e.prototype,"allowFiltering",void 0),Nj([jt(!1)],e.prototype,"allowMultiSelection",void 0),Nj([jt(!0)],e.prototype,"changeOnBlur",void 0),Nj([jt("")],e.prototype,"cssClass",void 0),Nj([jt("${value.length} item(s) selected")],e.prototype,"customTemplate",void 0),Nj([jt(",")],e.prototype,"delimiterChar",void 0),Nj([jt(!0)],e.prototype,"enabled",void 0),Nj([Bt({},dB)],e.prototype,"fields",void 0),Nj([jt(null)],e.prototype,"filterBarPlaceholder",void 0),Nj([jt("StartsWith")],e.prototype,"filterType",void 0),Nj([jt("Never")],e.prototype,"floatLabelType",void 0),Nj([jt(null)],e.prototype,"footerTemplate",void 0),Nj([jt(!1)],e.prototype,"ignoreAccent",void 0),Nj([jt(!0)],e.prototype,"ignoreCase",void 0),Nj([jt(null)],e.prototype,"headerTemplate",void 0),Nj([jt({})],e.prototype,"htmlAttributes",void 0),Nj([jt(null)],e.prototype,"itemTemplate",void 0),Nj([jt("Default")],e.prototype,"mode",void 0),Nj([jt("No Records Found")],e.prototype,"noRecordsTemplate",void 0),Nj([jt(null)],e.prototype,"placeholder",void 0),Nj([jt("300px")],e.prototype,"popupHeight",void 0),Nj([jt("100%")],e.prototype,"popupWidth",void 0),Nj([jt(!1)],e.prototype,"readonly",void 0),Nj([jt(!1)],e.prototype,"showSelectAll",void 0),Nj([jt("Select All")],e.prototype,"selectAllText",void 0),Nj([jt(!1)],e.prototype,"showCheckBox",void 0),Nj([jt(!0)],e.prototype,"destroyPopupOnHide",void 0),Nj([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),Nj([jt(!0)],e.prototype,"showClearButton",void 0),Nj([jt(!0)],e.prototype,"showDropDownIcon",void 0),Nj([jt("None")],e.prototype,"sortOrder",void 0),Nj([jt(null)],e.prototype,"text",void 0),Nj([Bt({},pB)],e.prototype,"treeSettings",void 0),Nj([jt("Unselect All")],e.prototype,"unSelectAllText",void 0),Nj([jt(null)],e.prototype,"value",void 0),Nj([jt(null)],e.prototype,"valueTemplate",void 0),Nj([jt("100%")],e.prototype,"width",void 0),Nj([jt(1e3)],e.prototype,"zIndex",void 0),Nj([jt(!1)],e.prototype,"wrapText",void 0),Nj([Ut()],e.prototype,"actionFailure",void 0),Nj([Ut()],e.prototype,"beforeOpen",void 0),Nj([Ut()],e.prototype,"change",void 0),Nj([Ut()],e.prototype,"close",void 0),Nj([Ut()],e.prototype,"blur",void 0),Nj([Ut()],e.prototype,"created",void 0),Nj([Ut()],e.prototype,"dataBound",void 0),Nj([Ut()],e.prototype,"destroyed",void 0),Nj([Ut()],e.prototype,"filtering",void 0),Nj([Ut()],e.prototype,"focus",void 0),Nj([Ut()],e.prototype,"keyPress",void 0),Nj([Ut()],e.prototype,"open",void 0),Nj([Ut()],e.prototype,"select",void 0),e=Nj([Ft],e)}(_e),gB=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mB=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},fB="e-atc-spinner-icon";Dj.root="e-combobox";var yB={container:null,buttons:[]},vB=function(t){function e(e,i){return t.call(this,e,i)||this}return gB(e,t),e.prototype.preRender=function(){t.prototype.preRender.call(this)},e.prototype.getLocaleName=function(){return"combo-box"},e.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(K.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),K.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),y(this.inputWrapper.buttons[0])||K.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),K.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(K.add(this.inputElement,"input",this.onInput,this),K.add(this.inputElement,"keyup",this.onFilterUp,this),K.add(this.inputElement,"keydown",this.onFilterDown,this),K.add(this.inputElement,"paste",this.pasteHandler,this),K.add(window,"resize",this.windowResize,this)),this.bindCommonEvent()},e.prototype.preventBlur=function(t){(this.allowFiltering||document.activeElement===this.inputElement||document.activeElement.classList.contains(Dj.input)||!G.isDevice)&&G.isDevice||t.preventDefault()},e.prototype.onBlurHandler=function(e){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value,n=y(this.text)?this.text:this.text.replace(/\r\n|\n|\r/g,"");y(this.listData)||y(i)||i===n||this.customValue(e),t.prototype.onBlurHandler.call(this,e)},e.prototype.targetElement=function(){return this.inputElement},e.prototype.setOldText=function(t){hI.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},e.prototype.setOldValue=function(t){this.allowCustom?(this.selectedLI=this.getElementByValue(this.value),this.valueMuteChange(this.value)):this.valueMuteChange(null),this.removeSelection(),this.setHiddenValue()},e.prototype.valueMuteChange=function(t){t=this.allowObjectBinding&&!y(t)?c(this.fields.value?this.fields.value:"",t):t;var e=y(t)?null:t.toString();hI.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton);var i={};if(this.allowObjectBinding&&y(t=this.getDataByValue(t))){var n=this.fields,s=!1,r=!1;if(this.allowObjectBinding){var o=Object.keys(this.value);o.forEach(function(t){t!==n.value||(r=!0)}),o.forEach(function(t){t!==n.text||(s=!0)})}i={text:r?c(s?n.text:n.value,this.value):null,value:r?this.value:null,index:null}}this.allowObjectBinding?this.setProperties(i,!0):this.setProperties({value:t,text:t?t.toString():t,index:null},!0),this.activeIndex=this.index;var a=this.fields,l={};l[a.text]=y(t)?null:t.toString(),l[a.value]=y(t)?null:t.toString(),this.itemData=l,this.item=null,(!this.allowObjectBinding&&this.previousValue!==this.value||this.allowObjectBinding&&this.previousValue&&this.value&&!this.isObjectInArray(this.previousValue,[this.value]))&&this.detachChangeEvent(null)},e.prototype.updateValues=function(){var t=this;if(this.fields.disabled&&(null!=this.value&&(this.value=this.isDisableItemValue(this.value)?null:this.value),null!=this.text&&(this.text=this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?null:this.text),null!=this.index&&(this.index=this.isDisabledItemByIndex(this.index)?null:this.index,this.activeIndex=this.index)),y(this.value))if(this.text&&y(this.value)){(e=this.getElementByText(this.text))?this.setSelection(e,null):(hI.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else{var e,i=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value,n=!y(e=this.getElementByValue(i));if(this.enableVirtualization&&this.value){var s=this.fields.value?this.fields.value:"",r=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;if(this.dataSource instanceof dC)this.dataSource.executeQuery((new Gb).where(new Kb(s,"equal",r))).then(function(e){if(e.result.length>0){t.itemData=e.result[0];var i=t.getItemData(),n=t.allowObjectBinding?t.getDataByValue(i.value):i.value;(t.value===i.value&&t.text!==i.text||t.value!==i.value&&t.text===i.text)&&t.setProperties({text:i.text?i.text.toString():i.text,value:n})}else t.valueMuteChange(null)});else{var o=new dC(this.dataSource).executeLocal((new Gb).where(new Kb(s,"equal",r)));if(o&&o.length>0){this.itemData=o[0],n=!0;var a=this.getItemData(),l=this.allowObjectBinding?this.getDataByValue(a.value):a.value;(this.value===a.value&&this.text!==a.text||this.value!==a.value&&this.text===a.text)&&(this.setProperties({text:a.text?a.text.toString():a.text,value:l}),y(e)&&(this.previousValue=this.value))}}}e?this.setSelection(e,null):!this.enableVirtualization&&this.allowCustom||this.allowCustom&&this.enableVirtualization&&!n?this.valueMuteChange(this.value):this.enableVirtualization&&(!this.enableVirtualization||this.dataSource instanceof dC||n)||this.valueMuteChange(null)}this.setHiddenValue(),hI.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},e.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?et([this.inputWrapper.clearButton],Dj.clearIconHide):tt([this.inputWrapper.clearButton],Dj.clearIconHide))},e.prototype.getAriaAttributes=function(){return{role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-expanded":"false","aria-readonly":this.readonly?this.readonly.toString():"false",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}},e.prototype.searchLists=function(e){this.isTyped=!0,this.isFiltering()?(t.prototype.searchLists.call(this,e),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+Dj.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+Dj.li)),this.incrementalSearch(e))},e.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},e.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()||this.isReact&&"combobox"===this.getModuleName()?this.inputWrapper:yB},e.prototype.onActionComplete=function(e,i,n,s){var r=this;t.prototype.onActionComplete.call(this,e,i,n),this.isSelectCustom&&this.removeSelection(),this.preventAutoFill||"combobox"!==this.getModuleName()||!this.isTyped||this.enableVirtualization||setTimeout(function(){r.inlineSearch()})},e.prototype.getFocusElement=function(){var t=this.isSelectCustom?{text:""}:this.getItemData(),e=y(this.list)?this.list:this.list.querySelector("."+Dj.selected);if(t.text&&t.text.toString()===this.inputElement.value&&!y(e))return e;if((G.isDevice&&!this.isDropDownClick||!G.isDevice)&&!y(this.liCollections)&&this.liCollections.length>0){var i=this.inputElement.value,n=this.sortedData,s=this.typeOfData(n).typeof,r=Sj(i,this.liCollections,this.filterType,!0,n,this.fields,s,this.ignoreAccent);if(this.enableVirtualization&&""!==i&&"autocomplete"!==this.getModuleName()&&this.isTyped&&!this.allowFiltering){var o=!1,a=this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount,l=0===this.incrementalEndIndex;for((a||l)&&(o=!0,this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=l?Math.min(100,this.totalItemCount):Math.min(this.incrementalEndIndex+100,this.totalItemCount),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),o=!0),(0!==this.viewPortInfo.startIndex||o)&&this.updateIncrementalView(0,this.itemCount),r=Sj(i,this.incrementalLiCollections,this.filterType,!0,n,this.fields,s);y(r.item)&&this.incrementalEndIndex<this.totalItemCount;){if(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),o=!0,(0!==this.viewPortInfo.startIndex||o)&&this.updateIncrementalView(0,this.itemCount),!y(r=Sj(i,this.incrementalLiCollections,this.filterType,!0,n,this.fields,s))){r.index=r.index+this.incrementalStartIndex;break}if(y(r)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}}var h=r.index-(this.itemCount/2-2)>0?r.index-(this.itemCount/2-2):0,c=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;if(h!==this.viewPortInfo.startIndex&&this.updateIncrementalView(h,c),y(r.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var d=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,p=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(d,p),r.item=this.getElementByValue(r.item.getAttribute("data-value"))}r&&r.item&&(r.item=this.getElementByValue(r.item.getAttribute("data-value")))}var u=r.item,g=this.getItemData();if(!y(u)&&!this.enableVirtualization||this.enableVirtualization&&this.isTyped&&y(g)&&y(g.value)&&g.value.toString()===u.getAttribute("data-value").toString()){var m=this.getIndexByValue(u.getAttribute("data-value"))-1,f=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);if(!isNaN(f)&&"autocomplete"!==this.getModuleName()){this.removeFocus();var v=this.fields.groupBy?this.liCollections[0].offsetHeight:0;if(this.enableVirtualization){if(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var b=u.offsetTop,C=this.virtualListInfo&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex:0,I=u.offsetHeight,M=b+C*I,S=this.list.querySelectorAll(".e-virtual-list").length*I;this.list.scrollTop=M-S}}else this.list.scrollTop=m*f+v;tt([u],Dj.focus)}}else this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.enableVirtualization||(this.list.scrollTop=0));return u}return null},e.prototype.setValue=function(e){return(e&&"keydown"===e.type&&"enter"===e.action||e&&"click"===e.type)&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&e&&"keydown"===e.type&&"enter"!==e.action?(this.preventAutoFill=!1,this.inlineSearch(e),!1):t.prototype.setValue.call(this,e)},e.prototype.checkCustomValue=function(){var t=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;this.itemData=this.getDataByValue(t);var e=this.getItemData(),i=this.allowObjectBinding?this.itemData:e.value;this.allowCustom&&y(e.value)&&y(e.text)||this.setProperties({value:i},!this.allowCustom)},e.prototype.showSpinner=function(){y(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||hI.appendSpan("e-input-group-icon "+fB,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,tt([this.spinnerElement],Dj.disableIcon),mc({target:this.spinnerElement,width:G.isDevice?"16px":"14px"},this.createElement),Ac(this.spinnerElement))},e.prototype.hideSpinner=function(){y(this.spinnerElement)||(Lc(this.spinnerElement),et([this.spinnerElement],Dj.disableIcon),this.spinnerElement.classList.contains(fB)?at(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.setAutoFill=function(t,e){if(e||this.setHoverList(t),this.autofill&&!this.preventAutoFill){var i=this.getTextByValue(t.getAttribute("data-value")).toString(),n=this.getFormattedValue(t.getAttribute("data-value"));"combobox"===this.getModuleName()&&(!this.isSelected&&!this.allowObjectBinding&&this.previousValue!==n||this.allowObjectBinding&&this.previousValue&&n&&!this.isObjectInArray(this.previousValue,[this.getDataByValue(n)])?(this.updateSelectedItem(t,null),this.isSelected=!0,this.previousValue=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(t.getAttribute("data-value"))):this.getFormattedValue(t.getAttribute("data-value"))):this.updateSelectedItem(t,null,!0)),this.isAndroidAutoFill(i)||this.setAutoFillSelection(i,e)}},e.prototype.isAndroidAutoFill=function(t){if(G.isAndroid){var e=this.getSelectionPoints(),i=this.prevSelectPoints.end,n=e.end,s=this.prevSelectPoints.start,r=e.start;return 0!==i&&(i===t.length&&s===t.length||s>r&&i>n||i===n&&s===r)}return!1},e.prototype.clearAll=function(e,i){(y(i)||!y(i)&&y(i.dataSource))&&t.prototype.clearAll.call(this,e),this.isFiltering()&&!y(e)&&e.target===this.inputWrapper.clearButton&&(this.typedString=this.filterInput.value,this.searchLists(e))},e.prototype.isSelectFocusItem=function(t){return!y(t)},e.prototype.inlineSearch=function(t){var e=t&&("down"===t.action||"up"===t.action||"home"===t.action||"end"===t.action||"pageUp"===t.action||"pageDown"===t.action),i=e?this.liCollections[this.activeIndex]:this.getFocusElement();if(y(i)){if(y(this.inputElement)||""!==this.inputElement.value)this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else if(this.activeIndex=null,!y(this.list)){this.enableVirtualization||(this.list.scrollTop=0);var n=this.list.querySelector("."+Dj.li);this.setHoverList(n)}}else{if(!e){var s=this.getFormattedValue(i.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(s),this.activeIndex=y(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(i,e)}},e.prototype.incrementalSearch=function(t){this.showPopup(t),y(this.listData)||(this.inlineSearch(t),t.preventDefault())},e.prototype.setAutoFillSelection=function(t,e){void 0===e&&(e=!1);var i=this.getSelectionPoints(),n=this.inputElement.value.substr(0,i.start);if(n&&n.toLowerCase()===t.substr(0,i.start).toLowerCase()){var s=n+t.substr(n.length,t.length);hI.setValue(s,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(i.start,this.inputElement.value.length)}else e&&(hI.setValue(t,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},e.prototype.getValueByText=function(e){return t.prototype.getValueByText.call(this,e,!0,this.ignoreAccent)},e.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(K.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),K.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),y(this.inputWrapper.buttons[0])||K.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(K.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(K.remove(this.inputElement,"input",this.onInput),K.remove(this.inputElement,"keyup",this.onFilterUp),K.remove(this.inputElement,"keydown",this.onFilterDown),K.remove(this.inputElement,"paste",this.pasteHandler),K.remove(window,"resize",this.windowResize))),this.unBindCommonEvent()},e.prototype.setSelection=function(e,i){t.prototype.setSelection.call(this,e,i),y(e)||this.autofill||this.isDropDownClick||this.removeFocus()},e.prototype.selectCurrentItem=function(t){var e;if(this.isPopupOpen){if(e=this.isSelected?this.list.querySelector("."+Dj.selected):this.list.querySelector("."+Dj.focus),this.isDisabledElement(e))return;e&&(this.setSelection(e,t),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(t))}"enter"===t.action&&""===this.inputElement.value?this.clearAll(t):this.isTyped&&!this.isSelected&&y(e)&&this.customValue(t),this.hidePopup(t)},e.prototype.setHoverList=function(t){this.removeSelection(),this.isValidLI(t)&&!t.classList.contains(Dj.selected)&&(this.removeFocus(),t.classList.add(Dj.focus))},e.prototype.targetFocus=function(t){G.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(t),hI.calculateWidth(this.inputElement,this.inputWrapper.container)},e.prototype.dropDownClick=function(e){e.preventDefault(),G.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),t.prototype.dropDownClick.call(this,e)},e.prototype.customValue=function(t){var e=this,i=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value){var n=this.value;if(y(i)){var s=""===this.inputElement.value?null:this.inputElement.value,r={text:s,item:{}};this.isObjectCustomValue=!0,this.initial?this.updateCustomValueCallback(s,r,n):this.trigger("customValueSpecifier",r,function(i){e.updateCustomValueCallback(s,i,n,t)})}else this.isSelectCustom=!1,i=this.allowObjectBinding?this.getDataByValue(i):i,this.setProperties({value:i}),(!this.allowObjectBinding&&n!==this.value||this.allowObjectBinding&&n&&this.value&&!this.isObjectInArray(n,[this.value]))&&this.onChangeEvent(t)}else this.allowCustom&&this.isFocused&&(this.isSelectCustom=!0);else{var o=this.previousValue,a=this.value;i=this.allowObjectBinding?this.getDataByValue(i):i,this.setProperties({value:i}),y(this.value)&&hI.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&(!this.allowObjectBinding&&o===this.value||this.allowObjectBinding&&o&&this.isObjectInArray(o,[this.value]))&&(!this.allowObjectBinding&&a!==this.value||this.allowObjectBinding&&a&&!this.isObjectInArray(a,[this.value]))&&this.onChangeEvent(null)}},e.prototype.updateCustomValueCallback=function(t,e,i,n){var s=this,r=this.fields,o=e.item,a={};o&&c(r.text,o)&&c(r.value,o)?a=o:(d(r.text,t,a),d(r.value,t,a)),this.itemData=a;var l={};if(this.allowObjectBinding){var h=this.listData&&this.listData.length>0?Object.keys(this.listData[0]):Object.keys(this.itemData);this.listData&&this.listData.length>0||!("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName()&&this.allowFiltering)||(h=this.firstItem?Object.keys(this.firstItem):Object.keys(this.itemData)),h.forEach(function(t){l[t]=t===r.value||t===r.text?c(r.value,s.itemData):null})}var p={text:c(r.text,this.itemData),value:this.allowObjectBinding?l:c(r.value,this.itemData),index:null};this.setProperties(p,!0),this.setSelection(null,null),this.isSelectCustom=!0,this.isObjectCustomValue=!1,(!this.allowObjectBinding&&i!==this.value||this.allowObjectBinding&&(null==i&&null!==this.value||i&&!this.isObjectInArray(i,[this.value])))&&this.onChangeEvent(n,!0)},e.prototype.onPropertyChanged=function(e,i){"combobox"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e,i));for(var n=0,s=Object.keys(e);n<s.length;n++){var r=s[n];switch(r){case"readonly":hI.setReadonly(this.readonly,this.inputElement),this.readonly?(K.remove(this.inputElement,"input",this.onInput),K.remove(this.inputElement,"keyup",this.onFilterUp),K.remove(this.inputElement,"keydown",this.onFilterDown)):(K.add(this.inputElement,"input",this.onInput,this),K.add(this.inputElement,"keyup",this.onFilterUp,this),K.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&y(this.list)&&t.prototype.renderList.call(this);break;case"allowCustom":break;default:var o=this.getPropObject(r,e,i);t.prototype.onPropertyChanged.call(this,o.newProperty,o.oldProperty),this.isFiltering()&&"dataSource"===r&&y(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&t.prototype.renderList.call(this)}}},e.prototype.render=function(){t.prototype.render.call(this),this.setSearchBox(),this.renderComplete(),this.autoFill=this.autofill},e.prototype.getModuleName=function(){return"combobox"},e.prototype.addItem=function(e,i){t.prototype.addItem.call(this,e,i)},e.prototype.filter=function(e,i,n){t.prototype.filter.call(this,e,i,n)},e.prototype.showPopup=function(e){t.prototype.showPopup.call(this,e)},e.prototype.hidePopup=function(e){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!y(this.listData)){var n=this.isEscapeKey;this.isEscapeKey&&(hI.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var s=this.isSelectCustom?{text:""}:this.getItemData(),r=y(s.text)?s.text:s.text.replace(/\r\n|\n|\r/g,""),o=y(this.list)?null:this.list.querySelector("."+Dj.selected);if(this.inputElement&&r===this.inputElement.value&&!y(o))return this.isSelected&&(this.onChangeEvent(e),this.isSelectCustom=!1),void t.prototype.hidePopup.call(this,e);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var a=this.sortedData,l=this.typeOfData(a).typeof,h=Sj(this.inputElement.value,this.liCollections,"Equal",!0,a,this.fields,l);this.selectedLI=h.item,y(h.index)&&(h.index=Sj(this.inputElement.value,this.liCollections,"StartsWith",!0,a,this.fields,l).index),this.activeIndex=h.index,y(this.selectedLI)?n&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}this.isEscapeKey||!this.isTyped||this.isInteracted||this.customValue(e)}var d=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value;y(this.listData)&&this.allowCustom&&!y(i)&&i!==d&&this.customValue(),t.prototype.hidePopup.call(this,e)},e.prototype.focusIn=function(){this.enabled&&(G.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),t.prototype.focusIn.call(this))},e.prototype.clear=function(){this.value=null},e.prototype.focusOut=function(e){t.prototype.focusOut.call(this,e)},e.prototype.getItems=function(){return t.prototype.getItems.call(this)},e.prototype.getDataByValue=function(e){return t.prototype.getDataByValue.call(this,e)},e.prototype.renderHightSearch=function(){},mB([jt(!1)],e.prototype,"autofill",void 0),mB([jt(!0)],e.prototype,"allowCustom",void 0),mB([jt({})],e.prototype,"htmlAttributes",void 0),mB([jt(!1)],e.prototype,"allowFiltering",void 0),mB([jt(!0)],e.prototype,"isDeviceFullScreen",void 0),mB([jt(null)],e.prototype,"query",void 0),mB([jt(null)],e.prototype,"index",void 0),mB([jt(!0)],e.prototype,"showClearButton",void 0),mB([Ut()],e.prototype,"customValueSpecifier",void 0),mB([Ut()],e.prototype,"filtering",void 0),mB([jt(null)],e.prototype,"valueTemplate",void 0),mB([jt("Never")],e.prototype,"floatLabelType",void 0),mB([jt(null)],e.prototype,"filterBarPlaceholder",void 0),mB([jt(null)],e.prototype,"cssClass",void 0),mB([jt(null)],e.prototype,"headerTemplate",void 0),mB([jt(null)],e.prototype,"footerTemplate",void 0),mB([jt(null)],e.prototype,"placeholder",void 0),mB([jt("100%")],e.prototype,"width",void 0),mB([jt("300px")],e.prototype,"popupHeight",void 0),mB([jt("100%")],e.prototype,"popupWidth",void 0),mB([jt(!1)],e.prototype,"readonly",void 0),mB([jt(null)],e.prototype,"text",void 0),mB([jt(null)],e.prototype,"value",void 0),mB([jt(!1)],e.prototype,"allowObjectBinding",void 0),e=mB([Ft],e)}(Tj);function bB(t,e,i,n){if(/<[^>]*>/g.test(t.innerText)&&(t.innerText=t.innerText.replace(/[\u00A0-\u9999<>&]/g,function(t){return"&#"+t.charCodeAt(0)+";"})),""!==e){var s=i?"gim":"gm";e=/^[a-zA-Z0-9- ]*$/.test(e)?e:e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),CB(t,new RegExp("StartsWith"===n?"^("+e+")":"EndsWith"===n?"("+e+")$":"("+e+")",s))}}function CB(t,e){for(var i=0;t.childNodes&&i<t.childNodes.length;i++){if(3===t.childNodes[i].nodeType&&""!==t.childNodes[i].textContent.trim()){var n=t.childNodes[i].nodeValue.trim().replace(e,'<span class="e-highlight">$1</span>');t.childNodes[i].nodeValue="",t.innerHTML=t.innerHTML.trim()+n;break}CB(t.childNodes[i],e)}}function IB(t){for(var e=t.querySelectorAll(".e-highlight"),i=e.length-1;i>=0;i--){var n=e[i].parentNode,s=document.createTextNode(e[i].textContent);n.replaceChild(s,e[i])}}var MB=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),SB=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o};Dj.root="e-autocomplete",Dj.icon="e-input-group-icon e-ddl-icon e-search-icon";var xB=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isFiltered=!1,n.searchList=!1,n}return MB(e,t),e.prototype.preRender=function(){t.prototype.preRender.call(this)},e.prototype.getLocaleName=function(){return"auto-complete"},e.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},e.prototype.getQuery=function(t){var e=t?t.clone():this.query?this.query.clone():new Gb,i=this.allowObjectBinding&&!y(this.value)?c(this.fields.value?this.fields.value:"",this.value):this.value,n=""!==this.queryString||y(i)?this.filterType:"equal",s=""!==this.queryString||y(i)?this.queryString:i;if(this.isFiltered)if(this.enableVirtualization&&!y(this.customFilterQuery))e=this.customFilterQuery.clone();else if(!this.enableVirtualization)return e;if(null!==this.queryString&&""!==this.queryString){var r=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof dC||"string"!==r)&&"number"!==r){var o=y(this.fields.value)?"":this.fields.value;e.where(o,n,s,this.ignoreCase,this.ignoreAccent)}else e.where("",n,s,this.ignoreCase,this.ignoreAccent)}if(!y(this.suggestionCount)&&!this.enableVirtualization){if(20!==this.suggestionCount)for(var a=0;a<e.queries.length;a++)"onTake"===e.queries[a].fn&&e.queries.splice(a,1);e.take(this.suggestionCount)}if(this.enableVirtualization){var l=0,h=0,d=this.getTakeValue();if(e&&e.queries.length>0)for(a=0;a<e.queries.length;a++)"onSkip"===e.queries[a].fn&&(h=e.queries[a].e.nos),"onTake"===e.queries[a].fn&&(l=d<=e.queries[a].e.nos?e.queries[a].e.nos:d);if(l<=0&&this.query&&this.query.queries.length>0)for(a=0;a<this.query.queries.length;a++)if("onTake"===this.query.queries[a].fn){var p=this.query.queries[a].e.nos;l=d<=p?p:d}if(e&&e.queries.length>0)for(a=0;a<e.queries.length;a++)if("onSkip"!==e.queries[a].fn){if("onTake"===e.queries[a].fn){var u=e.queries[a].e.nos;l=u<=l?l:u,e.queries.splice(a,1),--a}}else h=e.queries[a].e.nos,e.queries.splice(a,1),--a;h>0&&this.virtualItemStartIndex<=h?e.skip(h):e.skip(this.virtualItemStartIndex),l>0&&d<=l?e.take(l):e.take(d),e.requiresCount()}return e},e.prototype.performFiltering=function(t){var e=this,i={preventDefaultAction:!1,text:this.filterInput?this.filterInput.value:null,updateData:function(t,n,s){i.cancel||(e.isFiltered=!0,e.customFilterQuery=n,e.filterAction(t,n,s))},cancel:!1};this.trigger("filtering",i,function(i){i.cancel||e.isFiltered||i.preventDefaultAction||(e.searchList=!0,e.filterAction(e.dataSource,null,e.fields,t))})},e.prototype.searchLists=function(e){if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,this.checkAndResetCache(),y(this.list)&&t.prototype.renderList.call(this,e,!0),this.queryString=this.filterInput.value,"mousedown"!==e.type&&(40===e.keyCode||38===e.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields,null,e);this.isSelected=!1,this.activeIndex=null,this.isRequesting=!1,""!==this.queryString&&this.debounceDelay>0?this.debouncedFiltering(e,this.debounceDelay):this.performFiltering(e)},e.prototype.filter=function(t,e,i){this.isFiltered=!0,this.filterAction(t,e,i)},e.prototype.filterAction=function(t,e,i,n){this.beforePopupOpen=!0;var s=this.list.classList.contains("e-nodata");if(""!==this.queryString&&this.queryString.length>=this.minLength){if(this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(t,i,e,n),s=this.list.classList.contains("e-nodata"),this.enableVirtualization&&!s){var r;if(!this.list.querySelector(".e-virtual-ddl-content")&&this.list.querySelector(".e-list-parent"))(r=this.createElement("div",{className:"e-virtual-ddl-content"})).style.cssText=this.getTransformValues(),this.list.appendChild(r).appendChild(this.list.querySelector(".e-list-parent"));if(!this.list.querySelector(".e-virtual-ddl")&&this.list.parentElement)(r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"})).style.cssText=this.GetVirtualTrackHeight(),this.list.parentElement.querySelector(".e-dropdownbase").appendChild(r)}("autocomplete"===this.getModuleName()&&!(this.dataSource instanceof dC)||"autocomplete"===this.getModuleName()&&this.dataSource instanceof dC&&0!==this.totalItemCount)&&this.getFilteringSkeletonCount()}else this.hidePopup(n),this.beforePopupOpen=!1;this.renderReactTemplates()},e.prototype.clearAll=function(e,i){(y(i)||!y(i)&&y(i.dataSource))&&(t.prototype.clearAll.call(this,e),this.checkAndResetCache()),this.beforePopupOpen&&this.hidePopup()},e.prototype.onActionComplete=function(e,i,n,s){this.enableVirtualization||(this.fixedHeaderElement=null),("autocomplete"===this.getModuleName()&&!(this.dataSource instanceof dC)||"autocomplete"===this.getModuleName()&&this.dataSource instanceof dC&&0!==this.totalItemCount)&&this.getFilteringSkeletonCount(),t.prototype.onActionComplete.call(this,e,i,n);var r=this.list.querySelector("."+Dj.li);y(r)||et([r],Dj.focus),y(this.itemData)||this.enableVirtualization||this.focusIndexItem(),this.postBackAction()},e.prototype.postBackAction=function(){if(this.autofill&&!y(this.liCollections[0])&&this.searchList){var e=[this.liCollections[0]],i=this.listData,n=this.typeOfData(i).typeof,s=Sj(this.inputElement.value,e,"StartsWith",this.ignoreCase,i,this.fields,n);this.searchList=!1,y(s.item)||t.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},e.prototype.setSelection=function(e,i){if(this.isValidLI(e))if(!y(i)&&"keydown"===i.type&&"enter"!==i.action&&"tab"!==i.action&&this.isValidLI(e)){var n=this.getFormattedValue(e.getAttribute("data-value"));if(this.activeIndex=this.getIndexByValue(n),this.setHoverList(e),this.selectedLI=e,this.setScrollPosition(i),this.autofill&&this.isPopupOpen){this.preventAutoFill=!1;var s=i&&"down"===i.action||"up"===i.action||"home"===i.action||"end"===i.action||"pageUp"===i.action||"pageDown"===i.action;t.prototype.setAutoFill.call(this,e,s)}}else t.prototype.setSelection.call(this,e,i),this.isFiltered=!1;else this.selectedLI=e},e.prototype.listOption=function(e,i){var n=this,s=t.prototype.listOption.call(this,e,i);if(y(s.itemCreated))s.itemCreated=function(t){n.highlight&&(n.element.tagName===n.getNgDirective()&&n.itemTemplate?setTimeout(function(){bB(t.item,n.queryString,n.ignoreCase,n.filterType)},0):bB(t.item,n.queryString,n.ignoreCase,n.filterType))};else{var r=s.itemCreated;s.itemCreated=function(t){n.highlight&&bB(t.item,n.queryString,n.ignoreCase,n.filterType),r.apply(n,[t])}}return s},e.prototype.isFiltering=function(){return!0},e.prototype.renderPopup=function(e){this.enableVirtualization||(this.list.scrollTop=0),t.prototype.renderPopup.call(this,e)},e.prototype.isEditTextBox=function(){return!1},e.prototype.isPopupButton=function(){return this.showPopupButton},e.prototype.isSelectFocusItem=function(t){return!1},e.prototype.setInputValue=function(t,e){var i=e&&e.text?e.text:e?e.value:e,n=t&&t.text?t.text:t&&t.value?t.value:this.value;if(this.allowObjectBinding&&(i=y(i)?i:c(this.fields.value?this.fields.value:"",i),n=y(n)?n:c(this.fields.value?this.fields.value:"",n)),!n||""!==this.typedString||this.allowCustom||this.dataSource instanceof dC)t&&(t.text?this.setOldText(i):this.setOldValue(i));else{var s="string"===this.typeOfData(this.dataSource).typeof?"":this.fields.value,r=this.getItems().length,o=new Gb,a=this;new dC(this.dataSource).executeQuery(o.where(new Kb(s,"equal",n))).then(function(e){e.result.length>0?(a.value=""!==s?a.allowObjectBinding?e.result[0]:e.result[0][a.fields.value].toString():e.result[0].toString(),a.addItem(e.result,r),a.updateValues()):t&&t.text?a.setOldText(i):t&&t.value?a.setOldValue(i):a.updateValues()})}},e.prototype.showPopup=function(t){this.enabled&&(this.beforePopupOpen?this.refreshPopup():(this.beforePopupOpen=!0,this.preventAutoFill=!0,y(this.list)?this.renderList(t):this.resetList(this.dataSource,this.fields,null,t)))},e.prototype.hidePopup=function(e){t.prototype.hidePopup.call(this,e),this.activeIndex=null,this.virtualListInfo=this.viewPortInfo,this.previousStartIndex=this.viewPortInfo.startIndex,this.startIndex=this.viewPortInfo.startIndex,this.previousEndIndex=this.viewPortInfo.endIndex},e.prototype.onPropertyChanged=function(e,i){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e);for(var n=0,s=Object.keys(e);n<s.length;n++){var r=s[n];if("showPopupButton"===r)if(this.showPopupButton){var o=hI.appendSpan(Dj.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=o,hI.calculateWidth(this.inputElement,this.inputWrapper.container),y(this.inputWrapper.buttons[0])||y(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])||"Never"===this.floatLabelType||this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&K.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else at(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;else{var a=this.getPropObject(r,e,i);t.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty)}}},e.prototype.renderHightSearch=function(){if(this.highlight)for(var t=0;t<this.liCollections.length;t++){var e=this.ulElement.querySelector(".e-active");e||(IB(this.liCollections[t]),bB(this.liCollections[t],this.queryString,this.ignoreCase,this.filterType)),e=null}},e.prototype.getModuleName=function(){return"autocomplete"},e.prototype.render=function(){t.prototype.render.call(this)},SB([Bt({value:null,iconCss:null,groupBy:null,disabled:null},ij)],e.prototype,"fields",void 0),SB([jt(!0)],e.prototype,"ignoreCase",void 0),SB([jt(!1)],e.prototype,"showPopupButton",void 0),SB([jt(!1)],e.prototype,"highlight",void 0),SB([jt(20)],e.prototype,"suggestionCount",void 0),SB([jt({})],e.prototype,"htmlAttributes",void 0),SB([jt(null)],e.prototype,"query",void 0),SB([jt(1)],e.prototype,"minLength",void 0),SB([jt("Contains")],e.prototype,"filterType",void 0),SB([Ut()],e.prototype,"filtering",void 0),SB([jt(null)],e.prototype,"index",void 0),SB([jt("Never")],e.prototype,"floatLabelType",void 0),SB([jt(null)],e.prototype,"valueTemplate",void 0),SB([jt(null)],e.prototype,"filterBarPlaceholder",void 0),SB([jt(!1)],e.prototype,"allowFiltering",void 0),SB([jt(null)],e.prototype,"text",void 0),e=SB([Ft],e)}(vB),wB="e-float-line",DB="e-float-text",EB="e-label-top",TB="e-label-bottom";function AB(t,e,i,n,s,r,o){var a=$("span",{className:wB}),l=$("label",{className:DB}),h=i.getAttribute("id")?i.getAttribute("id"):b("ej2_multiselect");i.id=h,y(i.id)||""===i.id||(l.id="label_"+i.id.replace(/ /g,"_"),l.setAttribute("for",i.id),ht(n,{"aria-labelledby":l.id})),y(n.placeholder)||""===n.placeholder||(l.innerText=LB(n.placeholder),n.removeAttribute("placeholder")),l.innerText=LB(o),e.appendChild(a),e.appendChild(l),t.classList.add("e-float-input"),function(t,e){t&&t.length>0?(tt([e],EB),et([e],TB)):(et([e],EB),tt([e],TB))}(s,l),"Always"===r&&(l.classList.contains(TB)&&et([l],TB),tt([l],EB))}function NB(t,e,i){t&&t.length?e.placeholder="":e.placeholder=i}function LB(t){var e="";if(!y(t)&&""!==t){var i=document.createElement("span");i.innerHTML='<input  placeholder="'+t+'"/>',e=i.children[0].placeholder}return e}var OB=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),kB=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},zB="e-input-focus",PB="e-disabled",jB="e-hide-listitem",BB="e-chips",HB="e-chips-close",RB="e-chip-selected",VB="e-delimiter",UB="e-zero-size",FB="e-chips-close e-close-hooker",WB="e-delim-values",YB="e-rtl",_B="e-close-icon-hide",QB="e-ddl-disable-icon",ZB="e-ms-spinner-icon",qB="e-input-group-icon e-ddl-icon",XB="e-icon-anim",GB="e-delim-total",KB="e-search-custom-width",JB="e-input-filter",$B=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.clearIconWidth=0,n.previousFilterText="",n.storedSelectAllHeight=0,n.isUpdateHeaderHeight=!1,n.isUpdateFooterHeight=!1,n.isBlurDispatching=!1,n.isFilterPrevented=!1,n.isFilteringAction=!1,n.isValidKey=!1,n.selectAllEventData=[],n.selectAllEventEle=[],n.preventSetCurrentData=!1,n.isSelectAllLoop=!1,n.scrollFocusStatus=!1,n.keyDownStatus=!1,n}return OB(e,t),e.prototype.enableRTL=function(t){t?this.overAllWrapper.classList.add(YB):this.overAllWrapper.classList.remove(YB),this.popupObj&&(this.popupObj.enableRtl=t,this.popupObj.dataBind())},e.prototype.requiredModules=function(){var t=[];if(this.enableVirtualization&&t.push({args:[this],member:"VirtualScroll"}),"CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=e}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,t.push({member:"CheckBoxSelection",args:[this]})}return t},e.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var t=0,e=Object.keys(this.htmlAttributes);t<e.length;t++){var i=e[t];switch(i){case"class":var n=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();""!==n&&(tt([this.overAllWrapper],n.split(" ")),tt([this.popupWrapper],n.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(i,this.htmlAttributes[""+i]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:["id"].indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[""+i]):0===i.indexOf("data")||["name","required","aria-required","form"].indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):["title","role","style","class"].indexOf(i)>-1?this.overAllWrapper.setAttribute(i,this.htmlAttributes[""+i]):"size"===i||y(this.inputElement)||this.inputElement.setAttribute(i,this.htmlAttributes[""+i])}}},e.prototype.updateReadonly=function(t){y(this.inputElement)||(t||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly"))},e.prototype.updateClearButton=function(t){t?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(_B)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(_B))},e.prototype.updateCssClass=function(){if(!y(this.cssClass)&&""!==this.cssClass){var t=this.cssClass;""!==(t=this.cssClass.replace(/\s+/g," ").trim())&&(tt([this.overAllWrapper],t.split(" ")),tt([this.popupWrapper],t.split(" ")))}},e.prototype.updateOldPropCssClass=function(t){y(t)||""===t||""!==(t=t.replace(/\s+/g," ").trim())&&(et([this.overAllWrapper],t.split(" ")),et([this.popupWrapper],t.split(" ")))},e.prototype.onPopupShown=function(t){var e=this;if(G.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var i=this;window.onpopstate=function(){i.hidePopup(),i.inputElement.focus()},history.pushState({},"")}var n={popup:this.popupObj,event:t,cancel:!1,animation:{name:"FadeIn",duration:100}};this.trigger("open",n,function(t){t.cancel||(e.focusAtFirstListItem(!0),e.popupObj&&document.body.appendChild(e.popupObj.element),"CheckBox"===e.mode&&e.enableGroupCheckBox&&!y(e.fields.groupBy)&&e.updateListItems(e.list.querySelectorAll("li.e-list-item"),e.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===e.mode||e.showDropDownIcon)&&tt([e.overAllWrapper],[XB]),e.refreshPopup(),e.renderReactTemplates(),e.popupObj&&e.popupObj.show(t.animation,1e3===e.zIndex?e.element:null),e.isReact&&setTimeout(function(){if(e.popupHeight&&e.list&&"auto"!==e.popupHeight){var t="string"==typeof e.popupHeight?parseInt(e.popupHeight,10):e.popupHeight;if(!e.isUpdateHeaderHeight&&e.headerTemplate&&e.header){var i=""===e.list.style.maxHeight?t:parseInt(e.list.style.maxHeight,10);e.list.style.maxHeight=(i-e.header.offsetHeight).toString()+"px",e.isUpdateHeaderHeight=!0}if(!e.isUpdateFooterHeight&&e.footerTemplate&&e.footer){i=""===e.list.style.maxHeight?t:parseInt(e.list.style.maxHeight,10);e.list.style.maxHeight=(i-e.footer.offsetHeight).toString()+"px",e.isUpdateFooterHeight=!0}}},15),ht(e.inputElement,{"aria-expanded":"true","aria-owns":e.element.id+"_popup","aria-controls":e.element.id}),e.updateAriaActiveDescendant(),e.isFirstClick&&(e.enableVirtualization||e.loadTemplate()),"CheckBox"===e.mode&&e.showSelectAll&&K.add(e.popupObj.element,"click",e.clickHandler,e))})},e.prototype.updateVirtualReOrderList=function(t){var e=this.getForQuery(this.value,!0).clone();if(this.isVirtualReorder=!0,this.enableVirtualization&&this.dataSource instanceof dC?this.resetList(this.selectedListData,this.fields,e):this.resetList(this.dataSource,this.fields,e),this.UpdateSkeleton(),this.isVirtualReorder=!1,this.liCollections=this.list.querySelectorAll("."+dj),this.virtualItemCount=this.itemCount,"CheckBox"!==this.mode&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});i.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(i)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),t&&this.loadTemplate()},e.prototype.updateListItems=function(t,e){for(var i=0;i<t.length;i++)this.findGroupStart(t[i]),this.findGroupStart(e[i]);this.deselectHeader()},e.prototype.loadTemplate=function(){if(this.refreshListItems(null),this.enableVirtualization&&this.list&&"CheckBox"===this.mode){var t=this.list.querySelectorAll(".e-reorder")[0];this.list.querySelector(".e-virtual-ddl-content")&&t&&this.list.querySelector(".e-virtual-ddl-content").removeChild(t)}"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}),this.isPreventScrollAction=!0},e.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!y(this.value)&&this.value.length>0){var t=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1],e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",t);y(e)||this.scrollBottom(e,void 0,!1,null,!0)}if(this.enableVirtualization){var i=this.list.querySelector("."+cj);this.isKeyBoardAction=!1,this.scrollBottom(i,void 0,!1,null,!0)}},e.prototype.focusAtFirstListItem=function(t){if(this.ulElement&&this.ulElement.querySelector("li."+dj)){var e,i=void 0;if("CheckBox"===this.mode)return void this.removeFocus();this.enableVirtualization?this.fields.disabled?(i=this.ulElement.querySelector("li."+dj+":not(.e-virtual-list):not(.e-hide-listitem):not(."+PB+")"),t&&this.viewPortInfo&&0!==this.viewPortInfo.startIndex&&(i=(e=this.ulElement.querySelectorAll("li."+dj+":not(.e-virtual-list):not(.e-hide-listitem)"))&&e.length>0?e[2]:i)):(i=this.ulElement.querySelector("li."+dj+":not(.e-virtual-list):not(.e-hide-listitem)"),t&&this.viewPortInfo&&0!==this.viewPortInfo.startIndex&&(i=(e=this.ulElement.querySelectorAll("li."+dj+":not(.e-virtual-list):not(.e-hide-listitem)"))&&e.length>0?e[2]:i)):i=this.fields.disabled?this.ulElement.querySelector("li."+dj+":not(."+jB+"):not(."+PB+")"):this.ulElement.querySelector("li."+dj+":not(."+jB+")"),null!==i&&(this.removeFocus(),this.addListFocus(i))}},e.prototype.focusAtLastListItem=function(t){var e;t?e=Sj(t,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?Sj(this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):e=null;e&&null!==e.item&&(this.addListFocus(e.item),((this.allowCustomValue||this.allowFiltering)&&this.isPopupOpen()&&this.closePopupOnSelect&&!this.enableVirtualization||this.closePopupOnSelect&&!this.enableVirtualization)&&this.scrollBottom(e.item,e.index))},e.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false"}},e.prototype.updateListARIA=function(){y(this.ulElement)||ht(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"list"});var t=!(y(this.inputElement)||!this.inputElement.disabled);this.isPopupOpen()||y(this.inputElement)||ht(this.inputElement,this.getAriaAttributes()),t&&ht(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(t?"true":"false")},e.prototype.ensureAriaDisabled=function(t){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var e=this.htmlAttributes;f(e,{"aria-disabled":t},e),this.setProperties({htmlAttributes:e},!0)}},e.prototype.removelastSelection=function(t){if(null===this.chipCollectionWrapper.querySelector("span."+RB)){var e=this.chipCollectionWrapper.querySelectorAll("span."+BB),i=e[e.length-1].getAttribute("data-value");y(this.value)||(this.tempValues=(this.allowObjectBinding,this.value.slice()));var n=this.allowObjectBinding?this.enableVirtualization?this.getVirtualDataByValue(this.getFormattedValue(i)):this.getDataByValue(this.getFormattedValue(i)):this.getFormattedValue(i);this.allowCustomValue&&("false"!==i&&!1===n||!y(n)&&"NaN"===n.toString())&&(n=i),this.removeValue(n,t),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,t),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()}else this.removeSelectedChip(t)},e.prototype.onActionFailure=function(e){t.prototype.onActionFailure.call(this,e),this.renderPopup(),this.onPopupShown()},e.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement?this.targetInputElement.value:null},e.prototype.getForQuery=function(t,e){var i,n=this.isPrimitiveData?"":this.fields.value;if(this.enableVirtualization&&t){if(e){for(var s=this.viewPortInfo.startIndex,r=s+this.viewPortInfo.endIndex<=t.length&&t[s+this.viewPortInfo.endIndex]?s+this.viewPortInfo.endIndex:t.length,o=s;o<r;o++){var a=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",t[o]):t[o];i=o===s?new Kb(n,"equal",a):i.or(n,"equal",a)}return(new Gb).where(i)}for(o=0;o<t.length;o++){a=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",t[o]):t[o];i=this.isaddNonPresentItems?0===o?new Kb(n,"equal",t[o]):i.or(n,"equal",t[o]):0===o?i=new Kb(n,"notequal",a):i.and(n,"notequal",a)}return(new Gb).where(i)}for(o=0;o<t.length;o++)i=0===o?new Kb(n,"equal",t[o]):i.or(n,"equal",t[o]);return this.dataSource instanceof dC&&this.dataSource.adaptor instanceof nC?(new Gb).where(i):this.getQuery(this.query).clone().where(i)},e.prototype.onActionComplete=function(e,i,n,s){var r=this;if(this.dataSource instanceof dC&&!y(n)&&!this.virtualGroupDataSource&&(this.totalItemCount=n.count),this.value&&i&&i.length>0&&this.allowFiltering&&"CheckBox"!==this.mode&&!this.enableVirtualization&&!this.isFilterPrevented&&!this.allowCustomValue&&this.isFilteringAction){var o=i.every(function(t){var e=c(r.fields.value?r.fields.value:"",t);return r.value.some(function(t){var i=r.allowObjectBinding?c(r.fields.value?r.fields.value:"",t):t;return e===i})});o&&(e.innerHTML="",i=[])}t.prototype.onActionComplete.call(this,e,i,n),this.skeletonCount=0!==this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(!(this.dataSource instanceof dC)||this.dataSource instanceof dC&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering);if(!y(this.value)&&!this.allowCustomValue&&!this.enableVirtualization&&this.listData&&this.listData.length>0)for(var a=0;a<this.value.length;a++){var l=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[a]):this.value[a];this.findListElement(this.allowFiltering&&!y(this.mainList)?this.mainList:e,"li","data-value",l)||this.dataSource instanceof dC||(this.value.splice(a,1),a-=1)}var h=[];y(this.value)||(h=this.presentItemValue(this.ulElement));var d=h.some(function(t){return null!==t});if(h.length>0&&this.dataSource instanceof dC&&!y(this.value)&&null!=this.listData&&d?(this.isaddNonPresentItems=!0,this.addNonPresentItems(h,this.ulElement,this.listData),this.isaddNonPresentItems=!1):this.updateActionList(e,i,n),this.dataSource instanceof dC&&this.allowCustomValue&&!this.isCustomRendered&&this.inputElement.value&&""!==this.inputElement.value){var p=new Gb;p=this.allowFiltering?p.where(this.fields.text,"startswith",this.inputElement.value,this.ignoreCase,this.ignoreAccent):p,this.checkForCustomValue(p,this.fields),this.isCustomRendered=!0,this.remoteCustomValue=!this.enableVirtualization&&this.remoteCustomValue}"CheckBox"!==this.mode||!this.enableGroupCheckBox||y(this.fields.groupBy)||y(this.fields.disabled)||this.disableGroupHeader(),this.dataSource instanceof dC&&"CheckBox"===this.mode&&this.allowFiltering&&this.removeFocus()},e.prototype.updateActionList=function(t,e,i,n){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?(y(this.mainData)||0===this.mainData.length)&&(this.mainData=e):(this.mainList=t.cloneNode?t.cloneNode(!0):t,this.mainData=e,this.mainListCollection=this.liCollections),(this.remoteCustomValue||e.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value&&(this.checkForCustomValue(this.tempQuery,this.fields),this.isCustomRendered)||(this.value&&this.value.length&&("CheckBox"!==this.mode&&!y(this.inputElement)&&""!==this.inputElement.value.trim()||"CheckBox"===this.mode||(8===this.keyCode||46===this.keyCode)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof dC&&""===this.inputElement.value)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),y(this.setInitialValue)||this.setInitialValue(),y(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(y(this.text)||!y(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.enableVirtualization&&(!this.enableVirtualization||this.dataSource instanceof dC)?this.isRemoveSelection||this.initialValueUpdate(this.listData,!0):this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown(i)))},e.prototype.refreshSelection=function(){var t,e,i=this.hideSelectedItem?jB:oj;if(!y(this.value))for(var n=0;!y(this.value[n]);n++)if(t=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[n]):this.value[n],e=this.findListElement(this.list,"li","data-value",t)){if(tt([e],i),this.hideSelectedItem&&e.previousSibling&&e.previousElementSibling.classList.contains(pj)&&(!e.nextElementSibling||e.nextElementSibling.classList.contains(pj))&&tt([e.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!e.previousElementSibling.classList.contains(jB)&&this.hideGroupItem(t),this.hideSelectedItem&&e.classList.contains(cj)){et([e],cj);var s=e.parentElement.querySelectorAll("."+dj+":not(."+jB+"):not(."+PB+")");s.length>0?(tt([s[0]],cj),this.updateAriaActiveDescendant()):this.list&&this.list.querySelectorAll("."+dj).length>0||(this.l10nUpdate(),tt([this.list],lj))}if(e.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&e.classList.contains("e-active"))if(0===e.getElementsByClassName("e-check").length){var r={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:null};this.notify("updatelist",r)}}this.checkSelectAll(),this.checkMaxSelection()},e.prototype.hideGroupItem=function(t){var e,i,n=this.hideSelectedItem?jB:oj;i=e=this.findListElement(this.ulElement,"li","data-value",t);var s=0,r=0,o=!0,a=!0;do{e&&e.previousElementSibling&&!e.previousElementSibling.classList.contains(jB)&&e.previousElementSibling.classList.contains(dj)&&(o=!1),!o||!e||e.previousElementSibling&&e.previousElementSibling.classList.contains(pj)?s=10:e=e.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(jB)&&i.nextElementSibling.classList.contains(dj)&&(a=!1),!a||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains(pj)?r=10:i=i.nextElementSibling}while(s<10||r<10);o&&a&&!e.previousElementSibling.classList.contains(jB)?tt([e.previousElementSibling],n):o&&a&&e.previousElementSibling.classList.contains(jB)&&et([e.previousElementSibling],n)},e.prototype.getValidLi=function(){var t=this.ulElement.querySelector("li."+dj+":not(."+jB+")");return y(t)?this.liCollections[0]:t},e.prototype.checkSelectAll=function(){var t=y(this.fields.disabled)?this.list.querySelectorAll("li.e-list-group-item.e-active").length:this.list.querySelectorAll("li.e-list-group-item.e-active:not(.e-disabled)").length,e=this.list.querySelectorAll("li.e-list-item"),i=this.enableVirtualization?this.list.querySelectorAll("li."+dj+":not(.e-virtual-list)").length:y(this.fields.disabled)?this.list.querySelectorAll("li."+dj).length:this.list.querySelectorAll("li."+dj+":not(.e-disabled)").length,n=this.list.querySelectorAll("li."+oj).length;if(this.enableGroupCheckBox&&!y(this.fields.groupBy)&&(n-=t),!this.enableVirtualization&&(i===n||n===this.maximumSelectionLength)&&"CheckBox"===this.mode&&this.showSelectAll||this.enableVirtualization&&"CheckBox"===this.mode&&this.showSelectAll&&this.value&&this.value.length===this.totalItemCount?this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}):i!==n&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var s=0;s<e.length;s++)this.findGroupStart(e[s]);this.deselectHeader()}},e.prototype.openClick=function(t){this.openOnClick||"CheckBox"===this.mode||this.isPopupOpen()?this.openOnClick||"CheckBox"!==this.mode||this.isPopupOpen()||this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup(t)},e.prototype.keyUp=function(t){"CheckBox"!==this.mode||this.openOnClick||(y(String.fromCharCode(t.keyCode).match(/\w/))||(this.isValidKey=!0));this.isValidKey=this.isPopupOpen()&&8===t.keyCode||this.isValidKey,this.isValidKey=(!t.ctrlKey||86!==t.keyCode)&&this.isValidKey,this.isValidKey&&this.inputElement&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),t.keyCode,this.search(t))},e.prototype.filter=function(t,e,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(t,e,i)},e.prototype.getQuery=function(t){var e=t?t.clone():this.query?this.query.clone():new Gb;if(this.isFiltered){if(this.enableVirtualization&&!y(this.customFilterQuery))return e=this.customFilterQuery.clone(),this.virtualFilterQuery(e);if(!this.enableVirtualization)return e}if(this.filterAction){if(null!==this.targetElement()&&!this.enableVirtualization||this.enableVirtualization&&null!==this.targetElement()&&""!==this.targetElement().trim()){var i=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof dC||"string"!==i)&&"number"!==i){if(this.enableVirtualization&&""!==this.targetElement()&&!this.isClearAllAction||!this.enableVirtualization){var n=this.fields;e.where(y(n.text)?"":n.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}}else e.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return this.enableVirtualization&&0!==this.viewPortInfo.endIndex&&!this.virtualSelectAll?this.virtualFilterQuery(e):this.virtualSelectAll?t?t.skip(0).take(this.maximumSelectionLength).requiresCount():this.query?this.query.skip(0).take(this.maximumSelectionLength).requiresCount():(new Gb).skip(0).take(this.maximumSelectionLength).requiresCount():e}return this.enableVirtualization&&0!==this.viewPortInfo.endIndex&&!this.virtualSelectAll?this.virtualFilterQuery(e):this.virtualSelectAll?t?t.skip(0).take(this.maximumSelectionLength).requiresCount():this.query?this.query.skip(0).take(this.maximumSelectionLength).requiresCount():(new Gb).skip(0).take(this.maximumSelectionLength).requiresCount():t||(this.query?this.query:new Gb)},e.prototype.virtualFilterQuery=function(t){for(var e=this.getTakeValue(),i=!0,n=!0,s=0;s<t.queries.length;s++)"multiselect"===this.getModuleName()&&(t.queries[s].e&&"or"===t.queries[s].e.condition||t.queries[s].e&&"equal"===t.queries[s].e.operator)&&(i=!1),"onSkip"===t.queries[s].fn&&(n=!1),"onTake"===t.queries[s].fn&&!1;var r=0;if(t&&t.queries.length>0)for(s=0;s<t.queries.length;s++)"onTake"===t.queries[s].fn&&(r=e<=t.queries[s].e.nos?t.queries[s].e.nos:e);if(r<=0&&this.query&&this.query.queries.length>0)for(s=0;s<this.query.queries.length;s++)"onTake"===this.query.queries[s].fn&&(r=e<=this.query.queries[s].e.nos?this.query.queries[s].e.nos:e);if(t&&t.queries.length>0)for(s=0;s<t.queries.length;s++)"onTake"===t.queries[s].fn&&(r=t.queries[s].e.nos<=r?r:t.queries[s].e.nos,t.queries.splice(s,1),--s);return(this.allowFiltering&&n||!i||!this.allowFiltering&&n)&&!this.isVirtualReorder&&(i?t.skip(this.virtualItemStartIndex):t.skip(this.viewPortInfo.startIndex)),this.isIncrementalRequest?t.take(this.incrementalEndIndex):r>0?t.take(r):t.take(e),t.requiresCount(),this.customFilterQuery=null,t},e.prototype.getTakeValue=function(){return this.allowFiltering&&G.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},e.prototype.dataUpdater=function(t,e,i){this.isDataFetched=!1;var n=this.list.classList.contains(lj);if(""===this.targetElement().trim()){var s=this.enableVirtualization?this.list.cloneNode(!0):this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.backCommand||this.enableVirtualization&&"CheckBox"===this.mode&&this.value&&this.value.length>0){this.remoteCustomValue=!1;var r=!1;if(this.allowCustomValue&&0===s.querySelectorAll("li").length&&this.mainData.length>0&&(this.mainData=[]),this.enableVirtualization)if(this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.value&&this.value.length>0&&"CheckBox"===this.mode)this.notify("setCurrentViewDataAsync",{component:this.getModuleName(),module:"VirtualScroll"}),r=!0;else if(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(t,i,e),"CheckBox"!==this.mode&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.UpdateSkeleton(),(n||this.allowCustomValue)&&!this.list.classList.contains(lj)){if(!this.list.querySelector(".e-virtual-ddl-content"))(o=this.createElement("div",{className:"e-virtual-ddl-content"})).style.cssText=this.getTransformValues(),this.list.appendChild(o).appendChild(this.list.querySelector(".e-list-parent"));if(!this.list.querySelector(".e-virtual-ddl"))(a=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"})).style.cssText=this.GetVirtualTrackHeight(),document.getElementsByClassName("e-multi-select-list-wrapper")[0].querySelector(".e-dropdownbase").appendChild(a)}this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),r||this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})}}else{if(this.enableVirtualization&&this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null,this.list.querySelector(".e-list-parent.e-reorder")&&this.list.querySelector(".e-list-parent.e-reorder").remove()),this.resetList(t,i,e),this.enableVirtualization&&(n||this.allowCustomValue)&&!this.list.classList.contains(lj)){var o,a;if(!this.list.querySelector(".e-virtual-ddl-content"))(o=this.createElement("div",{className:"e-virtual-ddl-content"})).style.cssText=this.getTransformValues(),this.list.appendChild(o).appendChild(this.list.querySelector(".e-list-parent"));if("CheckBox"!==this.mode&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),!this.list.querySelector(".e-virtual-ddl"))(a=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"})).style.cssText=this.GetVirtualTrackHeight(),document.getElementsByClassName("e-multi-select-list-wrapper")[0].querySelector(".e-dropdownbase").appendChild(a)}this.allowCustomValue&&(t instanceof dC?(this.remoteCustomValue=!0,this.tempQuery=e):this.checkForCustomValue(e,i))}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount(),this.refreshPopup(),this.allowResize&&this.setResize(),"CheckBox"===this.mode&&this.removeFocus()},e.prototype.checkForCustomValue=function(t,e){var i=!this.getValueByText(this.inputElement.value,this.ignoreCase),n=e||this.fields;if(this.allowCustomValue&&i){var s=this.inputElement.value,r=!y(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if(r&&"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r){var o={};d(n.text,s,o),"number"==typeof c(this.fields.value?this.fields.value:"value",r)&&this.fields.value!==this.fields.text?d(n.value,Math.random(),o):d(n.value,s,o);var a={};if(this.allowObjectBinding){var l=this.listData&&this.listData.length>0?Object.keys(this.listData[0]):this.firstItem?Object.keys(this.firstItem):Object.keys(o),h="number"==typeof c(this.fields.value?this.fields.value:"value",r)&&this.fields.value!==this.fields.text;l.forEach(function(t){a[t]=t===e.value||t===e.text?t===e.text&&h?c(e.text,o):c(e.value,o):null})}if(o=this.allowObjectBinding?a:o,this.enableVirtualization){this.virtualCustomData=o;var p=this.dataSource instanceof dC?JSON.parse(JSON.stringify(this.listData)):JSON.parse(JSON.stringify(this.dataSource));this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&p.concat(this.virtualCustomSelectData),p.splice(0,0,o),this.isCustomDataUpdated=!0;var u=this.totalItemCount;this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.resetList(p,n,t),this.isCustomDataUpdated=!1,this.totalItemCount=this.enableVirtualization&&this.dataSource instanceof dC?u:this.totalItemCount}else{this.dataSource instanceof dC&&this.allowCustomValue&&this.allowFiltering&&(this.remoteCustomValue=!1),(p=JSON.parse(JSON.stringify(this.listData))).splice(0,0,o),this.resetList(p,n,t)}}else if(this.listData){(p=JSON.parse(JSON.stringify(this.listData))).splice(0,0,this.inputElement.value),p[0]="number"!=typeof r||isNaN(parseFloat(p[0]))?p[0]:parseFloat(p[0]),p[0]="boolean"==typeof r?"true"===p[0]||"false"!==p[0]&&p[0]:p[0],this.resetList(p,n)}}else if(this.listData&&this.mainData&&!i&&this.allowCustomValue)if(this.allowFiltering&&this.isRemoteSelection&&this.remoteCustomValue)this.isRemoteSelection=!1,this.enableVirtualization||this.resetList(this.listData,n,t);else if(!this.allowFiltering&&this.list){var g=this.list.querySelectorAll("li."+dj+":not(.e-hide-listitem)"),m=Sj(this.targetElement(),g,"StartsWith",this.ignoreCase);m&&null!==m.item&&this.addListFocus(m.item)}this.value&&this.value.length&&this.refreshSelection()},e.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},e.prototype.wrapperClick=function(t){if(this.setDynValue=!1,this.keyboardEvent=null,this.isKeyBoardAction=!1,this.enabled)if(t.target!==this.overAllClear){if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(t.target&&-1!==t.target.classList.toString().indexOf(HB))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&t.target&&t.target.className===qB)?this.showPopup(t):(this.hidePopup(t),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(zB)||this.overAllWrapper.classList.add(zB)))}this.targetElement()&&""!==this.targetElement()||t.preventDefault(),this.checkAndScrollParent()}else t.preventDefault()},e.prototype.checkAndScrollParent=function(){for(var t=this.overAllWrapper?this.overAllWrapper.parentElement:null;t;){var e=getComputedStyle(t),i=parseFloat(e.maxHeight)||parseFloat(e.height);if(!isNaN(i)&&this.isPopupOpen()){var n=e.overflowY,s=this.overAllWrapper.getBoundingClientRect().bottom,r=t.getBoundingClientRect().bottom;if(("auto"===n||"scroll"===n)&&s>r)return void(t.scrollTop+=s-r+10)}t=t.parentElement}},e.prototype.enable=function(t){t?(this.overAllWrapper.classList.remove(PB),this.inputElement.removeAttribute("disabled"),ht(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(PB),this.inputElement.setAttribute("disabled","true"),ht(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==t&&(this.enabled=t),this.hidePopup()},e.prototype.onBlurHandler=function(t,e){var i;if(this.isBlurDispatching&&this.isAngular)this.isBlurDispatching=!1;else if(y(t)||(i=t.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&tt([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(y(this.value)||0===this.value.length)&&et([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&G.isIE&&!y(t)&&!e)return this.inputFocus=!1,void this.overAllWrapper.classList.remove(zB);if(this.scrollFocusStatus)return y(t)||t.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);if(this.inputFocus=!1,this.overAllWrapper.classList.remove(zB),this.addTagOnBlur){var n=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),s=this.findListElement(this.list,"li","data-value",n),r=this.hideSelectedItem?jB:oj;!(!s||s.classList.contains(r))&&(this.updateListSelection(s,t),"Delimiter"===this.mode&&this.updateDelimeter(this.delimiterChar))}this.updateDataList(),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(t,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(t),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,G.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function(t,e,i,n){t.classList.remove("e-input-focus");var s=e.querySelector("."+DB);i&&i.length<=0&&"Auto"===n&&!y(s)&&(s.classList.contains(EB)&&et([s],EB),tt([s],TB))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!y(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize(),hI.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),y(this.overAllWrapper)||y(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)||this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.isBlurDispatching=!0,this.isAngular&&this.dispatchEvent(this.inputElement,"blur")}},e.prototype.calculateWidth=function(){var t;if(this.overAllWrapper){if(!this.showDropDownIcon||this.overAllWrapper.querySelector(".e-label-top"))t=this.overAllWrapper.clientWidth-2*parseInt(getComputedStyle(this.inputElement).paddingRight,10);else{var e=this.dropIcon.offsetWidth+parseInt(getComputedStyle(this.dropIcon).marginRight,10);t=this.overAllWrapper.clientWidth-(e+2*parseInt(getComputedStyle(this.inputElement).paddingRight,10))}"Never"!==this.floatLabelType&&hI.calculateWidth(t,this.overAllWrapper,this.getModuleName())}},e.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var t=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(t)}else y(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},e.prototype.setPlaceholderSize=function(t){y(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(t+10)+"px":tt([this.searchWrapper],KB):y(this.value)||(this.searchWrapper.removeAttribute("style"),et([this.searchWrapper],KB))},e.prototype.refreshInputHight=function(){y(this.searchWrapper)||(this.value&&this.value.length||!y(this.text)&&""!==this.text?this.searchWrapper.classList.add(UB):this.searchWrapper.classList.remove(UB))},e.prototype.validateValues=function(t,e){return JSON.stringify(t.slice().sort())!==JSON.stringify(e.slice().sort())},e.prototype.updateValueState=function(t,e,i){var n=e||[],s=i||[];if(this.initStatus&&this.validateValues(n,s)){var r={e:t,oldValue:(this.allowObjectBinding,i),value:(this.allowObjectBinding,e),isInteracted:!!t,element:this.element,event:t};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",r),this.enableVirtualization&&this.enableSelectionOrder&&"CheckBox"===this.mode&&(this.preventSetCurrentData=!1),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}this.selectedValueInfo=this.viewPortInfo},e.prototype.updateTempValue=function(){this.value?this.tempValues=(this.allowObjectBinding,this.value.slice()):this.tempValues=this.value},e.prototype.updateAriaActiveDescendant=function(){y(this.ulElement)||y(this.ulElement.getElementsByClassName("e-item-focus")[0])||ht(this.inputElement,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})},e.prototype.pageUpSelection=function(t,e){var i=this.list.querySelectorAll("li."+dj+":not(."+jB+"):not(.e-reorder-hide)"),n=t>=0?i[t+1]:i[0];if(this.fields.disabled&&n&&!this.enableVirtualization){for(;n&&(n.classList.contains("e-disabled")||n.classList.contains(jB)||n.classList.contains(".e-reorder-hide")||n.classList.contains("e-list-group-item"));)n=n.previousElementSibling;if(!n)return}this.enableVirtualization&&e&&(n=this.liCollections.length>=t&&t>=0?this.liCollections[t]:this.liCollections[this.skeletonCount]),!y(n)&&n.classList.contains("e-virtual-list")&&(n=this.liCollections[this.skeletonCount]),this.enableVirtualization?(y(n)||n.classList.contains("e-item-focus")?0===this.viewPortInfo.startIndex&&(this.isKeyBoardAction=!0,this.scrollTop(n,this.getIndexByValue(n.getAttribute("data-value")),this.keyboardEvent.keyCode)):(this.isKeyBoardAction=!0,this.addListFocus(n),this.scrollTop(n,this.getIndexByValue(n.getAttribute("data-value")),this.keyboardEvent.keyCode)),this.previousFocusItem=n):(this.isKeyBoardAction=!0,this.addListFocus(n),this.scrollTop(n,this.getIndexByValue(n.getAttribute("data-value")),this.keyboardEvent.keyCode))},e.prototype.pageDownSelection=function(t,e){var i=this.getItems(),n=this.list.querySelectorAll("li."+dj+":not(."+jB+"):not(.e-reorder-hide):not(.e-virtual-list-end)"),s=t<=n.length?n[t-1]:n[n.length-1];if(this.fields.disabled&&s&&!this.enableVirtualization){for(;s&&(s.classList.contains("e-disabled")||s.classList.contains(jB)||s.classList.contains(".e-reorder-hide")||s.classList.contains("e-list-group-item"));)s=s.nextElementSibling;if(!s)return}this.enableVirtualization&&this.skeletonCount>0&&(s=t<i.length?this.liCollections[t]:this.liCollections[i.length-1]),this.enableVirtualization&&e&&(s=t<=i.length?this.liCollections[t]:this.liCollections[i.length-1]),this.enableVirtualization&&s&&s.classList.contains("e-virtual-list-end")&&(s=n[n.length-1]),this.isKeyBoardAction=!0,this.addListFocus(s),this.previousFocusItem=s,this.scrollBottom(s,this.getIndexByValue(s.getAttribute("data-value")),!1,this.keyboardEvent.keyCode)},e.prototype.getItems=function(){return this.list||t.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+dj).length>0?this.ulElement.querySelectorAll("."+dj+":not(."+jB+")"):[]},e.prototype.focusInHandler=function(t){var e=this;if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove(UB),this.checkPlaceholderSize(),this.focused){var i={isInteracted:!!t,event:t};this.trigger("focus",i),this.focused=!1}return this.overAllWrapper.classList.contains(zB)||this.overAllWrapper.classList.add(zB),function(t,e){t.classList.add("e-input-focus");var i=e.querySelector("."+DB);y(i)||(tt([i],EB),i.classList.contains(TB)&&et([i],TB))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),this.allowResize&&this.setResize(),setTimeout(function(){e.calculateWidth()},150),!0}return!1},e.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(VB)},e.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(VB)},e.prototype.expandTextbox=function(){var t=5;if(this.placeholder){var e=this.placeholder.charCodeAt(0),i=44032<=e&&e<=55215?1.5:19968<=e&&e<=40959?2:1;t=t>this.inputElement.placeholder.length?t:this.inputElement.placeholder.length*i}this.inputElement.value.length>t?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=t},e.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},e.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},e.prototype.checkTextLength=function(){return this.targetElement().length<1},e.prototype.popupKeyActions=function(t){switch(t.keyCode){case 38:this.hidePopup(t),"CheckBox"===this.mode&&this.inputElement.focus(),t.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(t),t.preventDefault())}},e.prototype.updatePopupPosition=function(){this.refreshPopup()},e.prototype.updateAriaAttribute=function(){var t=this.list.querySelector("."+cj);if(!y(t))if(this.inputElement.setAttribute("aria-activedescendant",t.id),this.allowFiltering){var e=this.popupWrapper.querySelector("."+JB);e&&e.setAttribute("aria-activedescendant",t.id)}else"CheckBox"===this.mode&&this.overAllWrapper.setAttribute("aria-activedescendant",t.id)},e.prototype.homeNavigation=function(t,e){if(this.removeFocus(),this.enableVirtualization)if(t)this.enableVirtualization&&0!==this.viewPortInfo.startIndex&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query));else if(this.enableVirtualization&&(!this.value&&this.viewPortInfo.endIndex!==this.totalItemCount||this.value&&this.value.length>0&&this.viewPortInfo.endIndex!==this.totalItemCount+this.value.length)){this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex();var i=(new Gb).clone();this.value&&this.value.length>0&&(i=(i=this.getForQuery(this.value).clone()).skip(this.totalItemCount-this.itemCount)),this.resetList(this.dataSource,this.fields,i)}this.UpdateSkeleton();var n=this.ulElement.querySelectorAll("li."+dj+":not(."+jB+"):not(.e-reorder-hide)");if(n.length>0){var s=n[t?0:n.length-1];this.enableVirtualization&&t&&(s=n[this.skeletonCount]),this.removeFocus(),s.classList.add(cj),this.enableVirtualization&&t?this.scrollTop(s,void 0,this.keyboardEvent.keyCode):e||this.scrollBottom(s,void 0,!1,this.keyboardEvent.keyCode),this.updateAriaActiveDescendant()}},e.prototype.updateSelectionList=function(){if(!y(this.value)&&this.value.length)for(var t=0;t<this.value.length;t++){var e=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[t]):this.value[t],i=this.getElementByValue(e);i&&!i.classList.contains(oj)&&i.classList.add("e-active")}},e.prototype.handleVirtualKeyboardActions=function(t,e){var i,n=this.list.querySelector("."+cj);switch(this.isKeyBoardAction=!0,t.keyCode){case 40:this.arrowDown(t,!0);break;case 38:this.arrowUp(t,!0);break;case 33:t.preventDefault(),n&&(i=this.getIndexByValue(this.previousFocusItem.getAttribute("data-value"))-1,this.pageUpSelection(i,!0),this.updateAriaAttribute());break;case 34:t.preventDefault(),n&&(i=this.getIndexByValue(this.previousFocusItem.getAttribute("data-value")),this.pageDownSelection(i,!0),this.updateAriaAttribute());break;case 35:case 36:this.isMouseScrollAction=!0,this.homeNavigation(36===t.keyCode,!0),this.isPreventScrollAction=!0}this.keyboardEvent=null,this.isScrollChanged=!0,this.isKeyBoardAction=!1},e.prototype.onKeyDown=function(t){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.preventSetCurrentData=!1,this.keyboardEvent=t,this.isPreventKeyAction&&this.enableVirtualization&&t.preventDefault(),this.keyCode=t.keyCode,this.keyDownStatus=!0,!(t.keyCode>111&&t.keyCode<124)))if(t.altKey)this.popupKeyActions(t);else{if(this.isPopupOpen()){var e=this.list.querySelector("."+cj),i=void 0;switch(t.keyCode){case 36:case 35:this.isMouseScrollAction=!0,this.isKeyBoardAction=!0,this.homeNavigation(36===t.keyCode);break;case 33:return t.preventDefault(),void(e&&(i=this.getIndexByValue(e.getAttribute("data-value")),this.pageUpSelection(i-this.getPageCount()-1),this.updateAriaAttribute()));case 34:return t.preventDefault(),void(e&&(i=this.getIndexByValue(e.getAttribute("data-value")),this.pageDownSelection(i+this.getPageCount()),this.updateAriaAttribute()));case 38:this.isKeyBoardAction=!0,this.arrowUp(t);break;case 40:this.isKeyBoardAction=!0,this.arrowDown(t);break;case 27:return t.preventDefault(),this.isKeyBoardAction=!0,this.hidePopup(t),"CheckBox"===this.mode&&this.inputElement.focus(),void(this.isKeyBoardAction=!1);case 13:return t.preventDefault(),this.isKeyBoardAction=!0,"CheckBox"!==this.mode&&this.selectByKey(t),this.checkPlaceholderSize(),void(this.isKeyBoardAction=!1);case 32:return this.isKeyBoardAction=!0,this.spaceKeySelection(t),void(this.isKeyBoardAction=!1);case 9:t.preventDefault(),this.isKeyBoardAction=!0,this.hidePopup(t),this.inputElement.focus(),this.overAllWrapper.classList.add(zB)}}else switch(t.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return t.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(t),"CheckBox"===this.mode&&this.enableSelectionOrder&&(this.allowFiltering&&(this.previousFilterText=this.targetElement()),this.checkBackCommand(t)),this.expandTextbox(),"CheckBox"===this.mode&&this.showSelectAll||this.refreshPopup(),this.allowResize&&this.setResize(),this.isKeyBoardAction=!1}},e.prototype.arrowDown=function(t,e){t.preventDefault(),this.moveByList(1,e),this.keyAction=!0,(document.activeElement.classList.contains(JB)||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&K.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()},e.prototype.arrowUp=function(t,e){t.preventDefault(),this.keyAction=!0;var i=this.list.querySelectorAll("li."+dj+":not(."+jB+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!y(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+dj+",li."+pj+":not(."+jB+"):not(.e-reorder-hide)"));var n=this.list.querySelector("li."+cj);if(this.focusFirstListItem=!y(this.liCollections[0])&&this.liCollections[0].classList.contains("e-item-focus"),this.list&&this.list.querySelector(".e-list-parent.e-ul.e-reorder")){var s=this.list.querySelectorAll("li."+dj+":not(."+jB+"):not(.e-reorder-hide):not(.e-virtual-list-end)");s.length>0&&(this.focusFirstListItem=!y(s[0])&&s[0].classList.contains("e-item-focus"))}Array.prototype.slice.call(i).indexOf(n)<=0&&"CheckBox"===this.mode&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})),this.moveByList(-1,e),this.updateAriaAttribute()},e.prototype.spaceKeySelection=function(t){if("CheckBox"===this.mode){var e=this.list.querySelector("li."+cj),i=document.getElementsByClassName("e-selectall-parent")[0];if((!y(e)||i&&i.classList.contains("e-item-focus"))&&(t.preventDefault(),this.keyAction=!0),this.selectByKey(t),this.keyAction){var n=this.list.querySelector("li."+cj);!y(n)&&i&&i.classList.contains("e-item-focus")&&n.classList.remove("e-item-focus")}}this.checkPlaceholderSize()},e.prototype.checkBackCommand=function(t){(8===t.keyCode&&this.allowFiltering?this.targetElement()!==this.previousFilterText:""===this.targetElement())?this.backCommand=!1:this.backCommand=!0},e.prototype.keyNavigation=function(t){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(t.keyCode){case 37:t.preventDefault(),this.moveBy(-1,t);break;case 39:t.preventDefault(),this.moveBy(1,t);break;case 8:this.removelastSelection(t);break;case 46:this.removeSelectedChip(t)}else if(8===t.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){t.preventDefault();var e=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];this.removeValue(this.value[this.value.length-1],t),this.updateDelimeter(this.delimiterChar,t),this.focusAtLastListItem(e)}},e.prototype.selectByKey=function(t){this.removeChipSelection(),this.selectListByKey(t),this.hideSelectedItem&&this.focusAtFirstListItem()},e.prototype.escapeAction=function(){var t=this.tempValues?this.tempValues.slice():[];this.allowObjectBinding&&(t=this.tempValues?this.tempValues.slice():[]),this.value&&this.validateValues(this.value,t)&&("CheckBox"!==this.mode&&(this.value=t,(this.allowFiltering||this.allowCustomValue)&&this.refreshListItems(null),this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},e.prototype.scrollBottom=function(t,e,i,n,s){void 0===i&&(i=!1),void 0===n&&(n=null),void 0===s&&(s=!1),(!y(t)&&t.classList.contains("e-virtual-list")||this.enableVirtualization&&y(t))&&(t=this.liCollections[this.skeletonCount]);var r=t&&!isNaN(parseInt(window.getComputedStyle(t).marginBottom,10))?parseInt(window.getComputedStyle(t).marginBottom,10):0;this.isUpwardScrolling=!1;var o=this.list.querySelectorAll(".e-virtual-list:not(.e-virtual-list-end)").length,a=this.list.querySelectorAll("li:not(.e-virtual-list-end)"),l=a&&a.length>0&&a[a.length-1]?a[a.length-1].getAttribute("data-value"):null,h=this.virtualListInfo&&this.virtualListInfo.startIndex?t.offsetTop+this.virtualListInfo.startIndex*(t.offsetHeight+r):t.offsetTop,c=this.list.offsetHeight,d=h-o*(t.offsetHeight+r)+(t.offsetHeight+r)-this.list.scrollTop,p=this.list.scrollTop+d-c,u=!1,g=h-o*(t.offsetHeight+r)+(t.offsetHeight+r)-this.list.scrollTop;if(g=this.fields.groupBy&&!y(this.fixedHeaderElement)?g-this.fixedHeaderElement.offsetHeight:g,0!==e||this.enableVirtualization){if(d>c||!(g>0&&this.list.offsetHeight>g)){var m=t?t.getAttribute("data-value"):null,f=34===n?this.getPageCount()-1:1;!this.enableVirtualization||this.isKeyBoardAction||i?this.isKeyBoardAction&&this.enableVirtualization&&l&&m===l&&35!==n&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.list.scrollTop+=(t.offsetHeight+r)*f,this.isPreventKeyAction=!this.isScrollerAtEnd()&&this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&35===n?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(34===n&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=p):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?s&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight+2*this.listItemHeight:this.virtualListInfo.startIndex*this.listItemHeight:0,u=this.isKeyBoardAction}}else this.list.scrollTop=0;this.isKeyBoardAction=u},e.prototype.scrollTop=function(t,e,i){void 0===i&&(i=null);var n=this.list.querySelectorAll(".e-virtual-list:not(.e-virtual-list-end)").length,s=t&&!isNaN(parseInt(window.getComputedStyle(t).marginBottom,10))?parseInt(window.getComputedStyle(t).marginBottom,10):0,r=this.virtualListInfo&&this.virtualListInfo.startIndex?t.offsetTop+this.virtualListInfo.startIndex*(t.offsetHeight+s):t.offsetTop,o=r-n*(t.offsetHeight+s)-this.list.scrollTop,a=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;o=this.fields.groupBy&&!v(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o;var l=r-n*(t.offsetHeight+s)+(t.offsetHeight+s)-this.list.scrollTop,h=this.enableVirtualization&&"autocomplete"===this.getModuleName()&&o<=0;if(0!==e||this.enableVirtualization)if(o<0||h){var c=t?t.getAttribute("data-value"):null,d=33===i?this.getPageCount()-2:1;this.enableVirtualization&&this.isKeyBoardAction&&a&&c===a&&36!==i&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTop-=(t.offsetHeight+s)*d,this.isPreventKeyAction=0!==this.list.scrollTop&&this.isPreventKeyAction,this.isPreventScrollAction=!1):this.enableVirtualization&&36===i?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(33===i&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1),this.list.scrollTop=this.list.scrollTop+o)}else l>0&&this.list.offsetHeight>l||(this.list.scrollTop=t.offsetTop-(this.fields.groupBy&&!y(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0));else this.list.scrollTop=0},e.prototype.isScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},e.prototype.selectListByKey=function(t){var e,i=this.list.querySelector("li."+cj),n=this.value&&this.value.length?this.value.length:0;if(null!==i){if(t.preventDefault(),i.classList.contains("e-active")&&(n-=1),this.isValidLI(i)&&n<this.maximumSelectionLength){this.updateListSelection(i,t),this.addListFocus(i),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,t),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!y(this.fields.groupBy)&&(e=i.firstElementChild.lastElementChild,this.findGroupStart(e),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,t);var s=""!==this.targetElement().trim();this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(i.textContent,s),this.changeOnBlur||this.updateValueState(t,this.value,this.tempValues),this.refreshPopup()}else!this.isValidLI(i)&&n<this.maximumSelectionLength&&((e=i.firstElementChild.lastElementChild).classList.contains("e-check")?this.selectAllItem(!1,t,i):this.selectAllItem(!0,t,i));this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup(t)}var r=document.getElementsByClassName("e-selectall-parent")[0];if(r&&r.classList.contains("e-item-focus")){var o=r.childNodes[0];if(o.classList.contains("e-check")){o.classList.remove("e-check");a={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",a),this.selectAllItem(!1,t,i)}else{o.classList.add("e-check");var a={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",a),this.selectAllItem(!0,t,i)}}this.refreshPlaceHolder()},e.prototype.refreshListItems=function(t,e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){var i=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.enableVirtualization)if(this.allowCustomValue&&this.virtualCustomData&&null==t&&this.virtualCustomData&&this.viewPortInfo&&0===this.viewPortInfo.startIndex&&this.viewPortInfo.endIndex===this.itemCount)this.virtualCustomData=null,this.renderItems(this.mainData,this.fields);else if(this.allowFiltering&&e){if(this.updateInitialData(),this.onActionComplete(i,this.mainData),this.isVirtualTrackHeight=!1,this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var n=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});n.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(n)}}else this.onActionComplete(this.list,this.listData);else this.onActionComplete(i,this.mainData);this.focusAtLastListItem(t),this.value&&this.value.length&&this.refreshSelection()}else!y(this.fields.groupBy)&&this.value&&this.value.length&&this.refreshSelection()},e.prototype.removeSelectedChip=function(t){var e,i=this.chipCollectionWrapper.querySelector("span."+RB);if(null!==i){y(this.value)||(this.tempValues=(this.allowObjectBinding,this.value.slice())),null!==(e=i.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(e,t));var n=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(i.getAttribute("data-value"))):i.getAttribute("data-value");this.removeValue(n,t),this.updateDelimeter(this.delimiterChar,t),this.makeTextBoxEmpty()}this.closePopupOnSelect&&this.hidePopup(t),this.checkPlaceholderSize()},e.prototype.moveByTop=function(t){var e,i=this.list.querySelectorAll("li."+dj);i.length>1&&(this.removeFocus(),e=t?0:i.length-1,this.addListFocus(i[e]),this.scrollBottom(i[e],e)),this.updateAriaAttribute()},e.prototype.clickHandler=function(t){var e=t.target.className,i=document.getElementsByClassName("e-selectall-parent")[0];"e-input-filter e-input"!==e&&"e-input-group e-control-wrapper e-input-focus"!==e||!i.classList.contains("e-item-focus")||i.classList.remove("e-item-focus")},e.prototype.moveByList=function(t,e){if(this.list){var i=this.list.querySelectorAll("li."+dj+":not(."+jB+"):not(.e-reorder-hide):not(.e-virtual-list-end)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!y(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+dj+",li."+pj+":not(."+jB+"):not(.e-reorder-hide):not(.e-virtual-list-end)"));var n=this.list.querySelector("li."+cj);this.enableVirtualization&&e&&!y(this.currentFocuedListElement)&&(n=this.getElementByValue(this.getFormattedValue(this.currentFocuedListElement.getAttribute("data-value"))));var s=-1,r=document.getElementsByClassName("e-selectall-parent")[0];if("CheckBox"===this.mode&&this.showSelectAll&&1===t&&!y(r)&&!r.classList.contains("e-item-focus")&&0===this.list.getElementsByClassName("e-item-focus").length&&this.liCollections.length>1)!this.focusFirstListItem&&r.classList.contains("e-item-focus")?r.classList.remove("e-item-focus"):r.classList.contains("e-item-focus")||r.classList.add("e-item-focus");else if(i.length){"CheckBox"===this.mode&&this.showSelectAll&&!y(r&&-1===t)&&(this.focusFirstListItem&&1!==t||!r.classList.contains("e-item-focus")?!this.focusFirstListItem||r.classList.contains("e-item-focus")||1===t&&this.list.querySelector(".e-item-focus")||r.classList.add("e-item-focus"):r.classList.remove("e-item-focus"));for(var o=0;o<i.length;o++)if(i[o]===n){s=o;break}if(t>0)s<i.length-1&&(this.removeFocus(),this.enableVirtualization&&e?this.addListFocus(i[s]):this.enableVirtualization&&i[s+1].classList.contains("e-virtual-list")?this.addListFocus(i[this.skeletonCount]):this.addListFocus(i[++s]),s>-1&&(this.updateCheck(i[s]),this.scrollBottom(i[s],s),this.currentFocuedListElement=i[s]));else if(s>0)if(this.enableVirtualization){var a=i[s-1].classList.contains("e-virtual-list"),l=e?s:s-1;!e&&a||this.removeFocus(),!e&&a||(this.addListFocus(i[l]),this.updateCheck(i[l]),this.scrollTop(i[l],s),this.currentFocuedListElement=i[l])}else this.removeFocus(),this.addListFocus(i[--s]),this.updateCheck(i[s]),this.scrollTop(i[s],s)}}var h=this.list?this.list.querySelector(".e-item-focus"):null;if(this.isDisabledElement(h)){if(0===this.list.querySelectorAll(".e-list-item:not(.e-hide-listitem):not(.e-disabled)").length||38===this.keyCode&&"CheckBox"===this.mode&&this.enableGroupCheckBox&&!y(this.fields.groupBy)&&h===this.list.querySelector("li.e-list-group-item"))return void this.removeFocus();0===(o=this.getIndexByValue(h.getAttribute("data-value")))&&(t=1),o===this.list.querySelectorAll(".e-list-item:not(.e-hide-listitem)").length-1&&(t=-1),this.moveByList(t)}},e.prototype.getElementByValue=function(t){for(var e,i=0,n=this.getItems();i<n.length;i++){var s=n[i];if(this.getFormattedValue(s.getAttribute("data-value"))===t){e=s;break}}return e},e.prototype.updateCheck=function(t){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!y(this.fields.groupBy)&&(t.firstElementChild.lastElementChild.classList.contains("e-check")?t.classList.add("e-active"):t.classList.remove("e-active"))},e.prototype.moveBy=function(t,e){var i,n=this.chipCollectionWrapper.querySelectorAll("span."+BB),s=this.chipCollectionWrapper.querySelector("span."+RB);null===s?t<0&&this.addChipSelection(n[n.length-1],e):t<0?null!==(i=s.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(i,e)):(i=s.nextElementSibling,this.removeChipSelection(),null!==i&&this.addChipSelection(i,e))},e.prototype.chipClick=function(t){if(this.enabled){var e=ut(t.target,"."+BB);this.removeChipSelection(),this.addChipSelection(e,t)}},e.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},e.prototype.addChipSelection=function(t,e){tt([t],RB),this.trigger("chipSelection",e)},e.prototype.getVirtualDataByValue=function(t){if(!y(this.selectedListData)){var e=this.typeOfData(this.selectedListData).typeof;if("string"===e||"number"===e||"boolean"===e)for(var i=0,n=this.selectedListData;i<n.length;i++){if(!y(o=n[i])&&o===t)return o}else for(var s=0,r=this.selectedListData;s<r.length;s++){var o;if(!y(o=r[s])&&c(this.fields.value?this.fields.value:"value",o)===t)return o}}return null},e.prototype.onChipRemove=function(t){if(3!==t.which&&2!==t.button&&this.enabled&&!this.readonly){var e=t.target.parentElement.getAttribute("data-value"),i=this.allowObjectBinding?this.enableVirtualization?this.getVirtualDataByValue(this.getFormattedValue(e)):this.getDataByValue(this.getFormattedValue(e)):this.getFormattedValue(e);if(this.allowCustomValue&&("false"!==e&&!1===i||!y(i)&&"NaN"===i.toString())&&(i=e),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(t),this.inputFocus||this.inputElement.focus(),this.removeValue(i,t),i=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",i):i,y(this.findListElement(this.list,"li","data-value",i))&&this.mainList&&this.listData){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.updateDelimeter(this.delimiterChar,t),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",t.preventDefault()}},e.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},e.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.value&&this.value.length||!y(this.text)&&""!==this.text?this.inputElement.placeholder="":this.inputElement.placeholder=LB(this.placeholder):this.setFloatLabelType(),this.expandTextbox()},e.prototype.removeAllItems=function(t,e,i,n,s){var r=this.allowObjectBinding?this.indexOfObjectInArray(t,this.value):this.value.indexOf(t),o=this.value.slice(0);o.splice(r,1),this.setProperties({value:[].concat([],o)},!0),n.setAttribute("aria-selected","false"),et([n],this.hideSelectedItem?jB:oj),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:n,e:this,index:r}),this.invokeCheckboxSelection(n,e,i);var a=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",t):t;this.updateMainList(!0,a,s),this.updateChipStatus()},e.prototype.invokeCheckboxSelection=function(t,e,i){this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e}),this.updateAriaActiveDescendant(),this.value&&this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&!this.isSelectAll&&!i&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})},e.prototype.removeValue=function(e,i,n,s){var r=this,o=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(this.getFormattedValue(e));-1===o&&this.allowCustomValue&&!y(e)&&(o=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e.toString()));var a=i&&i.target;s=!!(s||a&&a.classList.contains("e-close-hooker"))||null;var l=this.hideSelectedItem?jB:oj;if(-1!==o){var h=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",e):e,d=this.virtualSelectAll?null:this.findListElement(this.list,"li","data-value",h),p=this.allowObjectBinding?e:this.getDataByValue(e),u={e:i,item:d,itemData:p,isInteracted:!!i,cancel:!1};this.trigger("removing",u,function(a){if(a.cancel)r.removeIndex++;else{r.isRemoveSelection=!!r.enableVirtualization||r.isRemoveSelection,r.currentRemoveValue=r.allowObjectBinding?c(r.fields.value?r.fields.value:"",e):e,r.virtualSelectAll=!1;var h=r.value.slice(0);if(h.splice(o,1),r.enableVirtualization&&r.selectedListData&&r.selectedListData.splice(o,1),r.setProperties({value:[].concat([],h)},!0),r.enableVirtualization){var u=0===o&&r.text.split(r.delimiterChar)&&1===r.text.split(r.delimiterChar).length?r.text.replace(r.text.split(r.delimiterChar)[o],""):0===o?r.text.replace(r.text.split(r.delimiterChar)[o]+r.delimiterChar,""):r.text.replace(r.delimiterChar+r.text.split(r.delimiterChar)[o],"");r.setProperties({text:u.toString()},!0)}if(null!==d){var g=r.allowObjectBinding?c(r.fields.value?r.fields.value:"",e):e,m=r.findListElement(r.mainList,"li","data-value",g);d.setAttribute("aria-selected","false"),et([d],l),m&&(m.setAttribute("aria-selected","false"),et([d,m],l)),r.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===r.mode,li:d,e:r,index:o}),r.invokeCheckboxSelection(d,i,s)}var f=r.allowObjectBinding?c(r.fields.value?r.fields.value:"",e):e;if(r.hideSelectedItem&&r.fields.groupBy&&d&&r.hideGroupItem(f),r.hideSelectedItem&&r.fixedHeaderElement&&r.fields.groupBy&&"CheckBox"!==r.mode&&r.isPopupOpen()&&t.prototype.scrollStop.call(r),r.updateMainList(!0,f),r.removeChip(f,s),r.updateChipStatus(),(r.value&&r.value.length?r.value.length:0)<r.maximumSelectionLength)et(r.list.querySelectorAll("li."+dj+":not(.e-active)"),"e-disable");r.trigger("removed",a);var y=i&&i.currentTarget,v=!(!y||!y.classList.contains("e-selectall-parent"))||null;if(!r.changeOnBlur&&!s&&i&&n&&!v&&r.isSelectAllTarget&&r.updateValueState(i,r.value,r.tempValues),n&&(r.selectAllEventData.push(p),r.selectAllEventEle.push(d)),1===n){r.changeOnBlur||r.updateValueState(i,r.value,r.tempValues);var b={event:i,items:r.selectAllEventEle,itemData:r.selectAllEventData,isInteracted:!!i,isChecked:!1};r.trigger("selectedAll",b),r.selectAllEventData=[],r.selectAllEventEle=[]}!s||1!==n&&null!==n||r.clearAllCallback(i,s),r.isPopupOpen()&&d&&d.parentElement.classList.contains("e-reorder")&&(r.hideSelectedItem&&r.value&&Array.isArray(r.value)&&r.value.length>0&&r.totalItemsCount(),r.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}))}})}},e.prototype.updateMainList=function(t,e,i){if(this.allowFiltering||"CheckBox"===this.mode){var n=i||this.findListElement(this.mainList,"li","data-value",e);n&&(t?(n.setAttribute("aria-selected","false"),et([n],this.hideSelectedItem?jB:oj),"CheckBox"===this.mode&&et([n.firstElementChild.lastElementChild],"e-check")):(n.setAttribute("aria-selected","true"),tt([n],this.hideSelectedItem?jB:oj),"CheckBox"===this.mode&&tt([n.firstElementChild.lastElementChild],"e-check")))}},e.prototype.removeChip=function(t,e){if(this.chipCollectionWrapper&&(!this.enableVirtualization||!e)){var i=this.findListElement(this.chipCollectionWrapper,"span","data-value",t);i&&lt(i)}},e.prototype.setWidth=function(t){y(t)||("number"==typeof t?this.overAllWrapper.style.width=S(t):"string"==typeof t&&(this.overAllWrapper.style.width=t.match(/px|%|em/)?t:S(t)))},e.prototype.updateChipStatus=function(){this.value&&this.value.length?(y(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper(),this.showOverAllClear()):(y(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),y(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},e.prototype.indexOfObjectInArray=function(t,e){for(var i=function(i){var n=e[i];if(Object.keys(t).every(function(e){return n.hasOwnProperty(e)&&n[e]===t[e]}))return{value:i}},n=0;n<e.length;n++){var s=i(n);if("object"==typeof s)return s.value}return-1},e.prototype.addValue=function(t,e,i){this.value||(this.value=[]);var n=this.allowObjectBinding?this.getDataByValue(t):t;if(this.allowObjectBinding&&!this.isObjectInArray(this.getDataByValue(t),this.value)||!this.allowObjectBinding&&this.value.indexOf(n)<0){if(this.setProperties({value:[].concat([],this.value,[n])},!0),this.enableVirtualization&&!this.isSelectAllLoop){var s=this.viewWrapper.innerHTML,r=void 0;s+=1===this.value.length?"":this.delimiterChar+" ",s+=r=this.getOverflowVal(this.value.length-1),r=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,s)}if(this.enableVirtualization&&"CheckBox"===this.mode){var o=[],a=(this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1],r=e,null!=this.text&&""!==this.text?this.text+this.delimiterChar+r:r);o.push(a),this.setProperties({text:o.toString()},!0)}}var l=this.findListElement(this.list,"li","data-value",t);this.removeFocus(),l&&(this.addListFocus(l),this.addListSelection(l)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(e,t,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(t),this.updateChipStatus(),this.checkMaxSelection()},e.prototype.checkMaxSelection=function(){var t=this.value&&this.value.length?this.value.length:0;t===this.maximumSelectionLength&&(et(this.list.querySelectorAll("li."+dj+".e-active"),"e-disable"),tt(this.list.querySelectorAll("li."+dj+":not(.e-active)"),"e-disable"));t<this.maximumSelectionLength&&et(this.list.querySelectorAll("li."+dj),"e-disable")},e.prototype.dispatchSelect=function(e,i,n,s,r,o,a){var l=this,h=this.listData;if(this.initStatus&&!s){e=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",e):e;var d=o||this.getDataByValue(e),p={e:i,item:n,itemData:d,isInteracted:!!i,cancel:!1};this.trigger("select",p,function(s){if(!s.cancel){if(r&&(l.selectAllEventData.push(d),l.selectAllEventEle.push(n)),1===r){var c={event:i,items:l.selectAllEventEle,itemData:l.selectAllEventData,isInteracted:!!i,isChecked:!0};l.trigger("selectedAll",c),l.selectAllEventData=[]}l.allowCustomValue&&l.isServerRendered&&l.listData!==h&&(l.listData=h),e=l.allowObjectBinding?l.getDataByValue(e):e,l.enableVirtualization&&(y(l.selectedListData)?l.selectedListData=l.allowObjectBinding?[e]:[l.getDataByValue(e)]:o?Array.isArray(l.selectedListData)?l.selectedListData.push(o):l.selectedListData=[l.selectedListData,o]:Array.isArray(l.selectedListData)?l.selectedListData.push(l.allowObjectBinding?e:l.getDataByValue(e)):l.selectedListData=[l.selectedListData,l.allowObjectBinding?e:l.getDataByValue(e)]),(l.enableVirtualization&&e||!l.enableVirtualization)&&l.updateListSelectEventCallback(e,n,i,a),l.hideSelectedItem&&l.fixedHeaderElement&&l.fields.groupBy&&"CheckBox"!==l.mode&&t.prototype.scrollStop.call(l)}})}},e.prototype.addChip=function(t,e,i){this.chipCollectionWrapper&&this.getChip(t,e,i)},e.prototype.removeChipFocus=function(){if(et(this.chipCollectionWrapper.querySelectorAll("span."+BB+"."+RB),RB),G.isDevice)for(var t=this.chipCollectionWrapper.querySelectorAll("span."+HB.split(" ")[0]),e=0;e<t.length;e++)t[e].style.display="none"},e.prototype.onMobileChipInteraction=function(t){var e=ut(t.target,"."+BB),i=e.querySelector("span."+HB.split(" ")[0]);this.enabled&&!this.readonly&&(e.classList.contains(RB)||(this.removeChipFocus(),i.style.display="",e.classList.add(RB)),this.refreshPopup(),t.preventDefault())},e.prototype.multiCompiler=function(t){var e=!1;if("function"!=typeof t&&t)try{e=!!dt(t,document).length}catch(t){e=!1}return e},e.prototype.encodeHtmlEntities=function(t){return t.replace(/[\u00A0-\u9999<>&]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},e.prototype.getChip=function(t,e,i){var n=this,s={text:e,value:e},r=this.createElement("span",{className:BB,attrs:{"data-value":e,title:t}}),o=this.createElement("span",{className:"e-chipcontent"}),a=this.createElement("span",{className:HB});if(this.mainData&&(s=this.getDataByValue(e)),this.valueTemplate&&!y(s)){var l=this.multiCompiler(this.valueTemplate),h=("function"!=typeof this.valueTemplate&&l?Hi(ct(this.valueTemplate,document).innerHTML.trim()):Hi(this.valueTemplate))(s,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,o);h&&h.length>0&&rt(h,o),this.renderReactTemplates()}else this.enableHtmlSanitizer?o.innerText=t:o.innerHTML=this.encodeHtmlEntities(t.toString());r.appendChild(o);var c={isInteracted:!!i,itemData:s,e:i,setClass:function(t){tt([r],t)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",c,function(t){t.cancel||(G.isDevice?(r.classList.add("e-mob-chip"),rt([a],r),a.style.display="none",K.add(r,"click",n.onMobileChipInteraction,n)):(K.add(r,"mousedown",n.chipClick,n),n.showClearButton&&r.appendChild(a)),K.add(a,"mousedown",n.onChipRemove,n),n.chipCollectionWrapper.appendChild(r),!n.changeOnBlur&&i&&n.updateValueState(i,n.value,n.tempValues))})},e.prototype.calcPopupWidth=function(){var t=S(this.popupWidth);t.indexOf("%")>-1&&(t=(this.componentWrapper.offsetWidth*parseFloat(t)/100).toString()+"px");return this.allowResize&&this.resizeWidth?this.resizeWidth+"px":t},e.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},e.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},e.prototype.listOption=function(t,e){var i=!y(e.iconCss),n=y(e.properties)?e:e.properties;return this.listCurrentOptions=null!==e.text||null!==e.value?{fields:n,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},f(this.listCurrentOptions,this.listCurrentOptions,e,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:t,fieldProperty:n}),this.listCurrentOptions},e.prototype.renderPopup=function(){var e=this;if(this.list||t.prototype.render.call(this),this.popupObj&&document.body.contains(this.popupObj.element)&&this.allowFiltering)this.refreshPopup();else if(!this.popupObj&&!y(this.popupWrapper)){document.body.appendChild(this.popupWrapper);var i=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&i&&this.filterParent&&(i.remove(),this.filterParent=null);var n=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),n-=this.header.offsetHeight,this.isUpdateHeaderHeight=0!==this.header.offsetHeight),rt([this.list],this.popupWrapper),!this.list.classList.contains(lj)&&this.getItems()[1]&&(this.listItemHeight=this.getItems()[1].offsetHeight+parseInt(window.getComputedStyle(this.getItems()[1]).marginBottom,10)),this.enableVirtualization&&!this.list.classList.contains(lj)){if(!this.list.querySelector(".e-virtual-ddl-content")&&this.list.querySelector(".e-list-parent")){var s=this.createElement("div",{className:"e-virtual-ddl-content"});s.style.cssText=this.getTransformValues(),this.list.appendChild(s).appendChild(this.list.querySelector(".e-list-parent"))}else this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues());if(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+dj),this.virtualItemCount=this.itemCount,"CheckBox"!==this.mode&&this.totalItemsCount(),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});r.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(r)}}if(this.footerTemplate&&(this.setFooterTemplate(),n-=this.footer.offsetHeight,this.isUpdateFooterHeight=0!==this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"!==this.mode||this.showSelectAll||(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(n-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(n-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10)),"CheckBox"===this.mode){var o={module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",o),n-=this.searchBoxHeight),tt([this.popupWrapper],"e-checkbox")}"auto"!==this.popupHeight?(this.list.style.maxHeight=S(n),this.popupWrapper.style.maxHeight=S(this.popupHeight)):this.list.style.maxHeight=S(this.popupHeight),this.popupObj=new Jr(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){if(e.popupObj.element.parentElement){e.popupObj.unwireScrollEvents();var t=e.popupWrapper.querySelector("."+JB);"CheckBox"===e.mode&&t&&document.activeElement===t&&t.blur(),at(e.popupObj.element)}},open:function(){if(e.popupObj.resolveCollision(),!e.isFirstClick){var t=e.list.querySelector("ul");t&&("CheckBox"!==e.mode&&(e.allowFiltering||e.allowCustomValue)&&""!==e.targetElement().trim()||(e.mainList=t.cloneNode?t.cloneNode(!0):t)),e.isFirstClick=!0}e.popupObj.wireScrollEvents(),"CheckBox"!==e.mode&&(e.allowFiltering||e.allowCustomValue)&&""!==e.targetElement().trim()||e.enableVirtualization||(e.loadTemplate(),e.enableVirtualization&&"CheckBox"===e.mode&&e.UpdateSkeleton()),e.isPreventScrollAction=!0,e.setScrollPosition(),!e.list.classList.contains(lj)&&e.getItems()[1]&&0!==e.getItems()[1].offsetHeight&&(e.listItemHeight=e.getItems()[1].offsetHeight+parseInt(window.getComputedStyle(e.getItems()[1]).marginBottom,10),e.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(e.list.getElementsByClassName("e-virtual-ddl-content")[0].style=e.getTransformValues())),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"focus"}),e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){e.value?e.updateSelectionList():e.viewPortInfo&&e.viewPortInfo.offsets.top&&(e.list.scrollTop=e.viewPortInfo.offsets.top)},5))},targetExitViewport:function(){G.isDevice||e.hidePopup()}}),this.checkCollision(this.popupWrapper),this.popupContentElement=this.popupObj.element.querySelector(".e-content"),"CheckBox"===this.mode&&G.isDevice&&this.allowFiltering&&this.isDeviceFullScreen&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.allowResize&&this.setResize(),this.popupObj.close(),this.popupWrapper.style.visibility=""}},e.prototype.checkCollision=function(t){"CheckBox"===this.mode&&G.isDevice&&this.allowFiltering&&this.isDeviceFullScreen||(Sr(t).length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px"),this.popupObj.resolveCollision())},e.prototype.setHeaderTemplate=function(){this.header&&this.header.remove(),this.header=this.createElement("div"),tt([this.header],"e-ddl-header");var t=this.multiCompiler(this.headerTemplate),e=("function"!=typeof this.headerTemplate&&t?Hi(ct(this.headerTemplate,document).innerHTML.trim()):Hi(this.headerTemplate))({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);e&&e.length>0&&rt(e,this.header),"CheckBox"===this.mode&&this.showSelectAll?st([this.header],this.popupWrapper):rt([this.header],this.popupWrapper),K.add(this.header,"mousedown",this.onListMouseDown,this)},e.prototype.setFooterTemplate=function(){this.footer&&this.footer.remove(),this.footer=this.createElement("div"),tt([this.footer],"e-ddl-footer");var t=this.multiCompiler(this.footerTemplate),e=("function"!=typeof this.footerTemplate&&t?Hi(ct(this.footerTemplate,document).innerHTML.trim()):Hi(this.footerTemplate))({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);e&&e.length>0&&rt(e,this.footer),rt([this.footer],this.popupWrapper),K.add(this.footer,"mousedown",this.onListMouseDown,this)},e.prototype.updateInitialData=function(){var t=this.selectData;this.renderItems(t,this.fields,!1,this.isClearAllAction);if(this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.previousStartIndex=0,this.previousEndIndex=this.itemCount,this.dataSource instanceof dC?this.remoteDataCount>=0?this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,"CheckBox"!==this.mode&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.getSkeletonCount(),this.skeletonCount=0!==this.totalItemCount&&this.totalItemCount<2*this.itemCount&&(!(this.dataSource instanceof dC)||this.dataSource instanceof dC&&this.totalItemCount<=this.itemCount)?0:this.skeletonCount,this.UpdateSkeleton(),this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var e=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});e.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(e)}this.listData=t,this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),this.enableVirtualization&&this.notify("setGeneratedData",{module:"VirtualScroll"})},e.prototype.clearAll=function(t){if(this.enabled&&!this.readonly){var e=void 0;if(this.setDynValue=!1,this.isClearAllAction=!0,this.value&&this.value.length>0){this.allowFiltering&&(this.refreshListItems(null),"CheckBox"===this.mode&&this.targetInputElement&&(this.targetInputElement.value=""));var i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,t);else for(this.removeIndex=0,e=this.value[this.removeIndex];this.removeIndex<this.value.length;e=this.value[this.removeIndex])this.removeValue(e,t,null,!0);this.selectedElementID=null,this.inputElement.removeAttribute("aria-activedescendant")}else this.clearAllCallback(t);this.checkAndResetCache(),hI.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),y(this.overAllWrapper)||y(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)||this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.enableVirtualization&&(this.updateInitialData(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.isCustomDataUpdated||this.notify("setGeneratedData",{module:"VirtualScroll"})),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=this.itemCount),this.isClearAllAction=!1}this.isClearAllItem=!0,K.add(document,"mouseup",this.preventSelection,this)},e.prototype.preventSelection=function(t){this.isClearAllItem&&t.stopPropagation(),this.isClearAllItem=!1,K.remove(document,"mouseup",this.preventSelection)},e.prototype.clearAllCallback=function(t,e){var i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(n,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,t),"Box"===this.mode||this.inputFocus&&"CheckBox"!==this.mode||this.updateDelimView(),""!==this.inputElement.value&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.allowResize&&this.setResize(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(t,this.value,i),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&e&&(y(this.value)||0===this.value.length)&&this.updateValueState(t,this.value,this.tempValues)),this.changeOnBlur||!e||!y(this.value)&&0!==this.value.length||this.updateValueState(t,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!y(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),t.preventDefault()},e.prototype.windowResize=function(){this.refreshPopup(),this.inputFocus&&"CheckBox"!==this.mode||!this.viewWrapper||!this.viewWrapper.parentElement||this.updateDelimView()},e.prototype.resetValueHandler=function(t){if(!y(this.inputElement)){var e=ut(this.inputElement,"form");if(e&&t.target===e){var i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}}},e.prototype.wireEvent=function(){K.add(this.componentWrapper,"mousedown",this.wrapperClick,this),K.add(window,"resize",this.windowResize,this),K.add(this.inputElement,"focus",this.focusInHandler,this),K.add(this.inputElement,"keydown",this.onKeyDown,this),K.add(this.inputElement,"keyup",this.keyUp,this),"CheckBox"!==this.mode&&K.add(this.inputElement,"input",this.onInput,this),K.add(this.inputElement,"blur",this.onBlurHandler,this),K.add(this.componentWrapper,"mouseover",this.mouseIn,this);var t=ut(this.inputElement,"form");t&&K.add(t,"reset",this.resetValueHandler,this),K.add(this.componentWrapper,"mouseout",this.mouseOut,this),K.add(this.overAllClear,"mousedown",this.clearAll,this),K.add(this.inputElement,"paste",this.pasteHandler,this)},e.prototype.onInput=function(t){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,G.isDevice&&"mozilla"===G.info.name&&this.search(t)},e.prototype.pasteHandler=function(t){var e=this;setTimeout(function(){e.expandTextbox(),e.search(t)})},e.prototype.performFiltering=function(t){var e=this,i={preventDefaultAction:!1,text:this.targetElement(),updateData:function(t,n,s){i.cancel||(e.isFiltered=!0,e.customFilterQuery=n,e.remoteFilterAction=!0,e.isCustomFiltering=!0,e.dataUpdater(t,n,s))},event:t,cancel:!1};this.trigger("filtering",i,function(t){e.isFilterPrevented=t.cancel,t.cancel||e.isFiltered||t.preventDefaultAction||(e.filterAction=!0,e.isFilteringAction=!0,e.dataSource instanceof dC&&e.allowCustomValue&&(e.isCustomRendered=!1),e.dataUpdater(e.dataSource,null,e.fields),e.isFilteringAction=!1)})},e.prototype.search=function(t){if(this.preventSetCurrentData=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,y(t)||(this.keyCode=t.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(t),this.openClick(t),!this.checkTextLength()||this.allowFiltering||y(t)||8===t.keyCode){var e=this.targetElement();if(this.allowFiltering)this.allowCustomValue&&(this.isRemoteSelection=!0),this.checkAndResetCache(),this.isRequesting=!1,""!==this.targetElement()&&this.debounceDelay>0?this.debouncedFiltering(t,this.debounceDelay):this.performFiltering(t);else if(this.allowCustomValue){var i=new Gb;i=this.allowFiltering&&""!==e?i.where(this.fields.text,"startswith",e,this.ignoreCase,this.ignoreAccent):i,this.enableVirtualization?this.dataUpdater(this.dataSource,i,this.fields):this.dataUpdater(this.mainData,i,this.fields),this.UpdateSkeleton()}else{var n=this.list.querySelectorAll("li."+dj+":not(.e-hide-listitem)"),s=this.typeOfData(this.listData).typeof,r=Sj(this.targetElement(),n,"StartsWith",this.ignoreCase);if(this.enableVirtualization&&""!==this.targetElement().trim()&&!this.allowFiltering){var o=!1;for((this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||0===this.incrementalEndIndex)&&(o=!0,this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),o=!1),(0!==this.viewPortInfo.startIndex||o)&&this.updateIncrementalView(0,this.itemCount),r=Sj(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,s);y(r)&&this.incrementalEndIndex<this.totalItemCount&&(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),o=!0,(0!==this.viewPortInfo.startIndex||o)&&this.updateIncrementalView(0,this.itemCount),y(r=Sj(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,s)));)if(y(r)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}if(r.index&&!(this.viewPortInfo.startIndex>=r.index&&r.index>=this.viewPortInfo.endIndex)){var a=(l=r.index-(this.itemCount/2-2)>0?r.index-(this.itemCount/2-2):0)+this.itemCount>this.totalItemCount?this.totalItemCount:l+this.itemCount;l!==this.viewPortInfo.startIndex&&this.updateIncrementalView(l,a)}if(y(r.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{if(this.getIndexByValue(r.item.getAttribute("data-value"))-this.skeletonCount>this.itemCount/2){var l=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount;a=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(l,a)}r.item=this.getElementByValue(r.item.getAttribute("data-value"))}r&&r.item&&(r.item=this.getElementByValue(r.item.getAttribute("data-value")))}r&&r.item?(this.addListFocus(r.item),this.list.scrollTop=r.item.offsetHeight*r.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}else this.focusAtFirstListItem();this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount()},e.prototype.preRender=function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.preventSetCurrentData=!1,this.initializeData(),this.updateDataAttribute(this.htmlAttributes),t.prototype.preRender.call(this)},e.prototype.getLocaleName=function(){return"multi-select"},e.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0,this.isCustomRendered=!1,this.isRemoteSelection=!1,this.isSelectAllTarget=!0,this.isaddNonPresentItems=!1,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},e.prototype.updateData=function(t,e,i){var n,s="",r="Delimiter"===this.mode||"CheckBox"===this.mode,o=[],a=this.listData;if(this.enableVirtualization||(this.listData=this.mainData),y(this.hiddenElement)||this.enableVirtualization||(this.hiddenElement.innerHTML=""),!y(this.value)){for(var l,h=this.value.length,d="",p=function(a){var p=u.allowObjectBinding?c(u.fields.value?u.fields.value:"",u.value[a]):u.value[a],g=u.findListElement(y(u.mainList)?u.ulElement:u.mainList,"li","data-value",p);if(u.enableVirtualization&&(g=u.findListElement(y(u.list)?u.ulElement:u.list,"li","data-value",p)),y(g)&&!u.allowCustomValue&&!u.enableVirtualization&&u.listData&&u.listData.length>0)u.value.splice(a,1),a-=1,h-=1;else{if(u.listData){if(u.enableVirtualization){r&&!u.isDynamicRemoteVirtualData&&(s=u.delimiterWrapper&&""===u.delimiterWrapper.innerHTML?s:u.delimiterWrapper.innerHTML);var m=u.allowObjectBinding?c(u.fields.value?u.fields.value:"",u.value[u.value.length-1]):u.value[u.value.length-1];if(u.isRemoveSelection)s=u.text.replace(/,/g,t+" ")+t+" ",o=u.text.split(t);else{n=i&&r?u.text:u.getTextByValue(m);var f=u.isDynamicRemoteVirtualData&&null!=m&&""!==m&&!i?u.getTextByValue(m):i?u.text:u.text&&""!==u.text?u.text+u.delimiterChar+n:n;s+=n+t+" ",o.push(f),d=u.hiddenElement.innerHTML}if(e&&e.currentTarget&&e.currentTarget.classList.contains("e-chips-close")||e&&"Backspace"===e.key){var v=e.target.parentElement.getAttribute("data-value");if("Backspace"===e.key){var b=u.hiddenElement.lastChild;b&&u.hiddenElement.removeChild(b)}else u.hiddenElement.childNodes.forEach(function(t){t.value===v&&t.parentNode.removeChild(t)});d=u.hiddenElement.innerHTML}else d+="<option selected value='"+m+"'>"+a+"</option>";return l=a,"break"}n=u.getTextByValue(p)}else n=p;s+=n+t+" ",o.push(n)}d+='<option selected value="'+p+'">'+a+"</option>",l=a},u=this,g=0;g<h;g++){var m=p(g);if(g=l,"break"===m)break}y(this.hiddenElement)||(this.isRemoveSelection?(this.findListElement(this.hiddenElement,"option","value",this.currentRemoveValue)&&this.hiddenElement.removeChild(this.findListElement(this.hiddenElement,"option","value",this.currentRemoveValue)),this.isRemoveSelection=!1):this.hiddenElement.innerHTML=d)}var f=e&&e.target&&e.target.classList.contains("e-chips-close");(!this.enableVirtualization||this.enableVirtualization&&"CheckBox"!==this.mode&&!f)&&this.setProperties({text:o.toString()},!0),r&&(this.updateWrapperText(this.delimiterWrapper,s),this.delimiterWrapper.setAttribute("id",b("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var v=e&&e.target,C=!(!v||!v.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&e&&!C||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(e,this.value,this.tempValues)),this.listData=a,this.addValidInputClass()},e.prototype.initialTextUpdate=function(){if(y(this.text))this.setProperties({value:null},!0);else{for(var t=this.text.split(this.delimiterChar),e=[],i=0;t.length>i;i++){var n=this.getValueByText(t[i]);y(n)?this.allowCustomValue&&e.push(t[i]):e.push(n)}if(e&&e.length){var s=this.allowObjectBinding?this.getDataByValue(e):e;this.setProperties({value:s},!0)}}},e.prototype.renderList=function(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(e=!0),t.prototype.render.call(this,null,e),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.unwireListEvents(),this.wireListEvents()},e.prototype.initialValueUpdate=function(t,e){if(this.list){var i=void 0,n=void 0,s=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!y(this.value))for(var r=0;!y(this.value[r]);r++){s=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[r]):this.value[r],n=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",s);var o=!1;if(this.enableVirtualization){if(i=null,null!=t&&t.length>0)for(var a=0;a<t.length;a++)if(this.isPrimitiveData&&t[a]===s||!this.isPrimitiveData&&c(this.fields.value?this.fields.value:"value",t[a])===s){i=this.isPrimitiveData?t[a]:c(this.fields.text,t[a]),this.enableVirtualization&&(y(this.selectedListData)?this.selectedListData=[t[a]]:(this.allowObjectBinding&&!this.isObjectInArray(t[a],this.selectedListData)||!this.allowObjectBinding)&&(Array.isArray(this.selectedListData)?this.selectedListData.push(t[a]):this.selectedListData=[this.selectedListData,t[a]]));break}y(i)&&this.allowCustomValue&&(!(this.dataSource instanceof dC)||this.dataSource instanceof dC&&e)&&(i=this.getTextByValue(s),o=!0)}else i=this.getTextByValue(s);if(n&&"true"!==n.getAttribute("aria-selected")||n&&"true"===n.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode)||this.enableVirtualization&&null!=s&&null!=i&&!o){var l=[],h=this.isDynamicRemoteVirtualData&&null!=i&&""!==i&&0===r||null==this.text||""===this.text||this.text.includes(i)?i:this.text+this.delimiterChar+i;l.push(h),this.setProperties({text:l.toString()},!0),this.addChip(i,s),this.addListSelection(n)}else if(!this.enableVirtualization&&s&&this.allowCustomValue||this.enableVirtualization&&s&&this.allowCustomValue&&(!(this.dataSource instanceof dC)||this.dataSource instanceof dC&&e)){var p=this.listData.length,u={};d(this.fields.text,s,u),d(this.fields.value,s,u);var g=this.popupWrapper.querySelector("."+lj);this.enableVirtualization||this.addItem(u,p),this.enableVirtualization&&(this.virtualCustomSelectData&&this.virtualCustomSelectData.length>=0?this.virtualCustomSelectData.push(u):this.virtualCustomSelectData=[u]),n=n||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",s),this.popupWrapper.contains(g)&&(this.list.setAttribute("style",g.getAttribute("style")),this.popupWrapper.replaceChild(this.list,g),this.wireListEvents());l=[],h=null!=this.text&&""!==this.text?this.text+this.delimiterChar+i:i;l.push(h),this.setProperties({text:l.toString()},!0),this.addChip(i,s),this.addListSelection(n)}}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,null,e),"CheckBox"!==this.mode||!this.showSelectAll||!y(this.value)&&this.value.length||this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode||"Default"===this.mode&&this.inputFocus?this.chipCollectionWrapper.style.display="":"Delimiter"!==this.mode&&"CheckBox"!==this.mode||this.showDelimWrapper()}},e.prototype.updateActionCompleteData=function(t,e){this.value&&(!this.allowObjectBinding&&this.value.indexOf(t.getAttribute("data-value"))>-1||this.allowObjectBinding&&this.isObjectInArray(this.getDataByValue(t.getAttribute("data-value")),this.value))&&(this.mainList=this.ulElement,this.hideSelectedItem&&tt([t],jB))},e.prototype.updateAddItemList=function(t,e){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+lj)&&t?(this.list=t,this.mainList=this.ulElement=t.querySelector("ul"),lt(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=t,this.mainList=this.ulElement=t.querySelector("ul"))},e.prototype.updateDataList=function(){if(this.mainList&&this.ulElement&&!(this.isFiltered||this.filterAction||this.targetElement().trim())){var t=this.mainList.childElementCount<this.ulElement.childElementCount,e=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0]&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,i=this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(t||e||i)&&(this.mainList=this.ulElement)}},e.prototype.isValidLI=function(t){return t&&!t.classList.contains(uj)&&!t.classList.contains(pj)&&t.classList.contains(dj)},e.prototype.updateListSelection=function(t,e,i){var n=t.getAttribute("data-value"),s=this.allowObjectBinding?this.getDataByValue(this.getFormattedValue(n)):this.getFormattedValue(n);this.allowCustomValue&&("false"!==n&&!1===s||!y(s)&&"NaN"===s.toString())&&(s=n),this.removeHover(),!this.value||!this.allowObjectBinding&&-1===this.value.indexOf(s)||this.allowObjectBinding&&-1===this.indexOfObjectInArray(s,this.value)?this.dispatchSelect(s,e,t,"true"===t.getAttribute("aria-selected"),i):this.removeValue(s,e,i),this.checkAndScrollParent()},e.prototype.updateListSelectEventCallback=function(t,e,i,n){var s=this;t=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",t):t;var r=n||this.getTextByValue(t);if((this.allowCustomValue||this.allowFiltering)&&!this.findListElement(this.mainList,"li","data-value",t)&&(!this.enableVirtualization||this.enableVirtualization&&this.virtualCustomData)){var o=e?e.cloneNode(!0):e,a=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&"number"==typeof c(a,this.mainData[0])&&(t=isNaN(parseFloat(t.toString()))?t:parseFloat(t.toString()));var l=this.getDataByValue(t),h={newData:l,cancel:!1};this.trigger("customValueSelection",h,function(e){e.cancel||(s.enableVirtualization&&s.virtualCustomData?(s.virtualCustomSelectData&&s.virtualCustomSelectData.length>=0?s.virtualCustomSelectData.push(l):s.virtualCustomSelectData=[l],s.remoteCustomValue=!1,s.addValue(t,r,i)):(rt([o],s.mainList),s.mainData.push(l),s.remoteCustomValue=!1,s.addValue(t,r,i)))})}else this.remoteCustomValue=!1,this.addValue(t,r,i)},e.prototype.removeListSelection=function(){var t=this.hideSelectedItem?jB:oj,e=this.list.querySelectorAll("."+t),i=e.length;if(e&&e.length)for(et(e,t);i>0;)e[i-1].setAttribute("aria-selected","false"),i--;if(!y(this.mainList)){var n=this.mainList.querySelectorAll("."+t),s=n.length;if(n&&n.length)for(et(n,t);s>0;)n[s-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(e&&e.length>s-1&&et([e[s-1].firstElementChild.lastElementChild],"e-check"),et([n[s-1].firstElementChild.lastElementChild],"e-check")),s--}},e.prototype.removeHover=function(){var t=this.list.querySelectorAll("."+aj);t&&t.length&&et(t,aj)},e.prototype.removeFocus=function(){if(this.list&&this.mainList){var t=this.list.querySelectorAll("."+cj),e=this.mainList.querySelectorAll("."+cj);t&&t.length&&(et(t,cj),et(e,cj))}},e.prototype.addListHover=function(t){(this.enabled&&this.isValidLI(t)||null!==t&&t.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!y(this.fields.groupBy))&&(this.removeHover(),tt([t],aj))},e.prototype.addListFocus=function(t){this.enabled&&(this.isValidLI(t)||this.fields.disabled&&this.isDisabledElement(t))?(this.removeFocus(),tt([t],cj),this.updateAriaActiveDescendant()):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!y(this.fields.groupBy)&&(tt([t],cj),this.updateAriaActiveDescendant())},e.prototype.addListSelection=function(t,e){var i=this.hideSelectedItem?jB:oj;if(this.isValidLI(t)&&!t.classList.contains(aj)){if(tt([t],i),this.updateMainList(!1,t.getAttribute("data-value"),e),t.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&t.classList.contains("e-active"))0===t.getElementsByClassName("e-check").length&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:this});this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:t,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),this.selectedElementID=t.id}},e.prototype.updateDelimeter=function(t,e,i){this.updateData(t,e,i)},e.prototype.onMouseClick=function(t){var e=this;if(!this.isClearAllItem){this.keyCode=null,this.scrollFocusStatus=!1,this.keyboardEvent=null;var i=t.target,n=ut(i,"."+dj);if(this.enableVirtualization&&n&&n.classList.contains("e-virtual-list"))return;if(ut(i,"."+pj)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)(i=i.classList.contains("e-list-group-item")?i.firstElementChild.lastElementChild:t.target).classList.contains("e-check")?(this.selectAllItem(!1,t),i.classList.remove("e-check"),i.classList.remove("e-stop"),ut(i,".e-list-group-item").classList.remove("e-active"),i.setAttribute("aria-selected","false")):(this.selectAllItem(!0,t),i.classList.remove("e-stop"),i.classList.add("e-check"),ut(i,".e-list-group-item").classList.add("e-active"),i.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(n)){var s=this.value&&this.value.length?this.value.length:0;n.classList.contains("e-active")&&(s-=1),s<this.maximumSelectionLength&&(this.updateListSelection(n,t),this.checkPlaceholderSize(),this.addListFocus(n),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?"CheckBox"!==this.mode&&(this.focusAtLastListItem(n.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){e.updateDelimeter(e.delimiterChar,t)},0):this.updateDelimeter(this.delimiterChar,t),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,t),this.checkSelectAll(),this.refreshPopup(),this.allowResize&&this.setResize(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup(t):t.preventDefault();var r=""!==this.targetElement().trim();this.makeTextBoxEmpty(),this.findGroupStart(i),"CheckBox"!==this.mode&&this.refreshListItems(y(n)?null:n.textContent,r)}else t.preventDefault();if(this.enableVirtualization&&this.hideSelectedItem){var o=this.list.querySelectorAll("li."+dj+":not(."+jB+"):not(.e-reorder-hide):not(.e-virtual-list)");if(o.length){var a=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(o.length<a+2){var l=this.getForQuery(this.value).clone();if(l=l.skip(this.virtualItemStartIndex),this.resetList(this.dataSource,this.fields,l),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+dj),this.virtualItemCount=this.itemCount,"CheckBox"!==this.mode&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var h=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl"});h.style.cssText=this.GetVirtualTrackHeight(),this.popupWrapper.querySelector(".e-dropdownbase").appendChild(h)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}}}this.refreshPlaceHolder(),this.deselectHeader()}}},e.prototype.findGroupStart=function(t){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!y(this.fields.groupBy)){var e=void 0;if(this.itemTemplate&&!t.getElementsByClassName("e-frame").length)for(;!t.getElementsByClassName("e-frame").length;)t=t.parentElement;for(t.classList.contains("e-frame")&&(t=t.parentElement.parentElement),e=this.findGroupAttrtibutes(t,0,0,0,0),e=this.findGroupAttrtibutes(t,e[0],e[1],e[2],1);!t.classList.contains("e-list-group-item")&&(t.classList.contains("e-list-icon")&&(t=t.parentElement),null!=(t=t.previousElementSibling)););this.updateCheckBox(t,e[0],e[1],e[2])}},e.prototype.findGroupAttrtibutes=function(t,e,i,n,s){for(;!t.classList.contains("e-list-group-item")&&(this.fields.disabled&&this.isDisabledElement(t)||(t.classList.contains("e-list-icon")&&(t=t.parentElement),t.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&t.classList.contains("e-list-item")?e++:t.classList.contains("e-list-item")&&i++,n++),null!=(t=s?t.nextElementSibling:t.previousElementSibling)););return[e,i,n]},e.prototype.updateCheckBox=function(t,e,i,n){if(null!==t&&(y(this.fields.disabled)||0!==n)){var s=t.getElementsByClassName("e-frame")[0];n===e?(s.classList.remove("e-stop"),s.classList.add("e-check"),ut(s,".e-list-group-item").classList.add("e-active"),t.setAttribute("aria-selected","true")):n===i?(s.classList.remove("e-check"),s.classList.remove("e-stop"),ut(s,".e-list-group-item").classList.remove("e-active"),t.setAttribute("aria-selected","false")):this.maximumSelectionLength===e-1?(s.classList.remove("e-stop"),t.setAttribute("aria-selected","true"),ut(s,".e-list-group-item").classList.add("e-active"),s.classList.add("e-check")):(s.classList.remove("e-check"),s.classList.add("e-stop"),ut(s,".e-list-group-item").classList.add("e-active"),t.setAttribute("aria-selected","false"))}},e.prototype.disableGroupHeader=function(){var t=this.list.querySelectorAll("li.e-list-group-item");if(t)for(var e=0;e<t.length;e++){for(var i=!0,n=t[e].nextElementSibling;!n.classList.contains("e-list-group-item");){if(!this.isDisabledElement(n)){i=!1;break}if(null==(n=n.nextElementSibling))break}i&&this.disableListItem(t[e])}},e.prototype.deselectHeader=function(){var t=this.value&&this.value.length?this.value.length:0,e=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");t<this.maximumSelectionLength&&et(e,"e-disable"),t===this.maximumSelectionLength&&tt(e,"e-disable")},e.prototype.onMouseOver=function(t){var e=ut(t.target,"."+dj);null===e&&"CheckBox"===this.mode&&!y(this.fields.groupBy)&&this.enableGroupCheckBox&&(e=ut(t.target,"."+pj)),this.addListHover(e)},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.onListMouseDown=function(t){t.preventDefault(),this.scrollFocusStatus=!0},e.prototype.onDocumentClick=function(t){if("CheckBox"!==this.mode){var e=t.target;!y(this.popupObj)&&ut(e,'[id="'+this.popupObj.element.id+'"]')||this.overAllWrapper.contains(t.target)?this.scrollFocusStatus=(G.isIE||"edge"===G.info.name)&&document.activeElement===this.inputElement:this.scrollFocusStatus=!1}},e.prototype.wireListEvents=function(){y(this.list)||(K.add(document,"mousedown",this.onDocumentClick,this),K.add(this.list,"mousedown",this.onListMouseDown,this),K.add(this.list,"mouseup",this.onMouseClick,this),K.add(this.list,"mouseover",this.onMouseOver,this),K.add(this.list,"mouseout",this.onMouseLeave,this))},e.prototype.unwireListEvents=function(){K.remove(document,"mousedown",this.onDocumentClick),this.list&&(K.remove(this.list,"mousedown",this.onListMouseDown),K.remove(this.list,"mouseup",this.onMouseClick),K.remove(this.list,"mouseover",this.onMouseOver),K.remove(this.list,"mouseout",this.onMouseLeave))},e.prototype.hideOverAllClear=function(){this.value&&this.value.length&&""!==this.inputElement.value||(this.overAllClear.style.display="none")},e.prototype.showOverAllClear=function(){(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?this.overAllClear.style.display="":this.overAllClear.style.display="none"},e.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},e.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},e.prototype.showSpinner=function(){if(y(this.spinnerElement)){var t=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");"none"!==this.overAllClear.style.display||t?this.spinnerElement=t||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:FB+" "+ZB}),this.componentWrapper.appendChild(this.spinnerElement)),mc({target:this.spinnerElement,width:G.isDevice?"16px":"14px"},this.createElement),tt([this.spinnerElement],QB),Ac(this.spinnerElement)}},e.prototype.hideSpinner=function(){y(this.spinnerElement)||(Lc(this.spinnerElement),et([this.spinnerElement],QB),this.spinnerElement.classList.contains(ZB)?at(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},e.prototype.updateWrapperText=function(t,e){this.valueTemplate||!this.enableHtmlSanitizer?t.innerHTML=this.encodeHtmlEntities(e):t.innerText=e},e.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),y(this.viewWrapper)||(this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(GB)),this.value&&this.value.length){var t="",e=void 0,i=void 0,n=1,s=void 0,r=void 0,o=0,a=void 0;this.enableVirtualization||this.updateWrapperText(this.viewWrapper,t);var l={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},h=new ri(this.getLocaleName(),l,this.locale);""===h.getConstant("actionFailureTemplate")&&(h=new ri("dropdowns",l,this.locale)),""===h.getConstant("noRecordsTemplate")&&(h=new ri("dropdowns",l,this.locale));var c=h.getConstant("overflowCountTemplate"),d=h.getConstant("totalCountTemplate"),p=this.createElement("span",{className:"e-remain"}),u=c.replace("${count}",this.value.length.toString());p.innerText=u,this.viewWrapper.appendChild(p),this.renderReactTemplates();var g=p.offsetWidth;if(lt(p),this.showDropDownIcon&&(o=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!y(this.value)&&(this.allowCustomValue||this.listData&&this.listData.length>0))for(var m=0;!y(this.value[m]);m++){var f=this.text&&this.text.split(this.delimiterChar);if(this.enableVirtualization?f&&(t+=0===m?"":this.delimiterChar+" ",t+=e=f[m],e=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,t)):(t+=0===m?"":this.delimiterChar+" ",t+=e=this.getOverflowVal(m),e=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,t)),s=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10),a=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),s+o+this.clearIconWidth>a){for(void 0!==i&&""!==i&&(e=i,m=n+1),this.updateWrapperText(this.viewWrapper,e),r=this.value.length-m,s=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10);s+g+o+this.clearIconWidth>a&&0!==s&&""!==this.viewWrapper.innerHTML;){this.viewWrapper.innerHTML=[].join(this.delimiterChar),r=this.value.length,s=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)+parseInt(window.getComputedStyle(this.viewWrapper).paddingLeft,10)}break}s+g+o+this.clearIconWidth<=a?(i=t,n=m):0===m&&(i="",n=-1)}if(r>0){var v=a-o-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(p,this.viewWrapper,r,c,d,v)),this.updateRemainWidth(this.viewWrapper,v),this.updateRemainingText(p,o,r,c,d)}}else y(this.viewWrapper)||(this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none")},e.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=parseInt(window.getComputedStyle(this.overAllClear).width,10)||this.overAllClear.offsetWidth)},e.prototype.updateRemainWidth=function(t,e){t.classList.contains(GB)&&e<t.offsetWidth+parseInt(window.getComputedStyle(t).paddingLeft,10)+parseInt(window.getComputedStyle(t).paddingRight,10)&&(t.style.width=e+"px")},e.prototype.updateRemainTemplate=function(t,e,i,n,s,r){e.firstChild&&3===e.firstChild.nodeType&&""===e.firstChild.nodeValue&&e.removeChild(e.firstChild),t.innerHTML="";var o=n.replace("${count}",i.toString()),a=s.replace("${count}",i.toString());return t.innerText=e.firstChild&&3===e.firstChild.nodeType?o:a,e.firstChild&&3===e.firstChild.nodeType?e.classList.remove(GB):(e.classList.add(GB),this.updateRemainWidth(e,r)),t},e.prototype.updateRemainingText=function(t,e,i,n,s){var r=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(o+e>=r&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;o+e>r&&0!==o&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var a=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);a.pop(),this.viewWrapper.firstChild.nodeValue=a.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,o=this.viewWrapper.offsetWidth}var l=r-e;this.updateRemainTemplate(t,this.viewWrapper,i,n,s,l)}},e.prototype.getOverflowVal=function(t){var e;if(this.mainData&&this.mainData.length){var i=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[t]):this.value[t];if("CheckBox"===this.mode){var n=this.listData;this.listData=this.mainData,e=this.getTextByValue(i),this.listData=n}else e=this.getTextByValue(i)}else e=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[t]):this.value[t];return e},e.prototype.unWireEvent=function(){if(y(this.componentWrapper)||K.remove(this.componentWrapper,"mousedown",this.wrapperClick),K.remove(window,"resize",this.windowResize),!y(this.inputElement)){K.remove(this.inputElement,"focus",this.focusInHandler),K.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&K.remove(this.inputElement,"input",this.onInput),K.remove(this.inputElement,"keyup",this.keyUp);var t=ut(this.inputElement,"form");t&&K.remove(t,"reset",this.resetValueHandler),K.remove(this.inputElement,"blur",this.onBlurHandler)}y(this.componentWrapper)||(K.remove(this.componentWrapper,"mouseover",this.mouseIn),K.remove(this.componentWrapper,"mouseout",this.mouseOut)),y(this.overAllClear)||K.remove(this.overAllClear,"mousedown",this.clearAll),y(this.inputElement)||K.remove(this.inputElement,"paste",this.pasteHandler)},e.prototype.resizingWireEvent=function(){K.add(document,"mousemove",this.resizePopup,this),K.add(document,"mouseup",this.stopResizing,this),K.add(document,"touchmove",this.resizePopup,this),K.add(document,"touchend",this.stopResizing,this)},e.prototype.resizingUnWireEvent=function(){K.remove(document,"mousemove",this.resizePopup),K.remove(document,"mouseup",this.stopResizing),K.remove(document,"touchmove",this.resizePopup),K.remove(document,"touchend",this.stopResizing)},e.prototype.selectAllItem=function(t,e,i){var n;if(y(this.list)||(n=this.list.querySelectorAll(t?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)')),this.value&&this.value.length&&e&&e.target&&ut(e.target,".e-close-hooker")&&this.allowFiltering&&(n=this.mainList.querySelectorAll(t?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide):not(.e-disabled):not(.e-virtual-list)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!y(this.fields.groupBy)){var s=e?this.groupTemplate?ut(e.target,".e-list-group-item"):e.target:null;if((s=(s=e&&32===e.keyCode?i:s)&&s.classList.contains("e-frame")?s.parentElement.parentElement:s)&&s.classList.contains("e-list-group-item")){var r=s.nextElementSibling;if(y(r))return;for(;r.classList.contains("e-list-item");){if(!this.fields.disabled||!this.isDisabledElement(r))if(t){if(!r.firstElementChild.lastElementChild.classList.contains("e-check")){var o=this.value&&this.value.length?this.value.length:0;r.classList.contains("e-active")&&(o-=1),o<this.maximumSelectionLength&&this.updateListSelection(r,e)}}else r.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(r,e);if(null==(r=r.nextElementSibling))break}if(s.classList.contains("e-list-group-item")){var a=this.list.getElementsByClassName("e-item-focus")[0];a&&a.classList.remove("e-item-focus"),t?s.classList.add("e-active"):s.classList.remove("e-active"),s.classList.add("e-item-focus"),this.updateAriaActiveDescendant()}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&e&&this.updateValueState(e,this.value,this.tempValues)}else this.updateValue(e,n,t)}else this.updateValue(e,n,t);this.addValidInputClass()},e.prototype.virtualSelectionAll=function(t,e,i){var n=this,s=0,r=e.length,o=this.maximumSelectionLength;if(t){this.virtualSelectAll=!0,r=this.virtualSelectAllData&&0!==this.virtualSelectAllData.length?this.virtualSelectAllData.length:r,this.listData=this.virtualSelectAllData;var a=this.createListItems(this.virtualSelectAllData.slice(0,30),this.fields).querySelectorAll("li"),l=document.createDocumentFragment();a.forEach(function(t){l.appendChild(t.cloneNode(!0))}),e.forEach(function(t){l.appendChild(t.cloneNode(!0))});var h=l.childNodes;if(this.virtualSelectAllData instanceof Array){for(;s<r&&s<=50&&s<o;){if(this.isSelectAllTarget=r===s+1,h[s]){var d=this.allowObjectBinding?this.getDataByValue(h[s].getAttribute("data-value")):this.getFormattedValue(h[s].getAttribute("data-value"));if(!this.allowObjectBinding&&this.value&&this.value.indexOf(d)>=0||this.allowObjectBinding&&this.indexOfObjectInArray(d,this.value)>=0){s++;continue}this.updateListSelection(h[s],i,r-s)}else{d=c(this.fields.value?this.fields.value:"",this.virtualSelectAllData[s]);if(d=this.allowObjectBinding?this.getDataByValue(d):d,!this.allowObjectBinding&&this.value&&this.value.indexOf(d)>=0||this.allowObjectBinding&&this.indexOfObjectInArray(d,this.value)>=0){s++;continue}this.value&&null!=d&&Array.isArray(this.value)&&(!this.allowObjectBinding&&this.value.indexOf(d)<0||this.allowObjectBinding&&!this.isObjectInArray(d,this.value))&&this.dispatchSelect(d,i,null,!1,r)}s++}r>50&&setTimeout(function(){if(n.virtualSelectAllData&&n.virtualSelectAllData.length>0&&n.virtualSelectAllData.map(function(t){if(n.value&&null!=t[n.fields.value]&&Array.isArray(n.value)&&(!n.allowObjectBinding&&n.value.indexOf(t[n.fields.value])<0||n.allowObjectBinding&&!n.isObjectInArray(t[n.fields.value],n.value))){var e=t[n.fields.value],s=t[n.fields.text].toString();n.dispatchSelect(e,i,null,!1,r,t,s)}}),n.updatedataValueItems(i),n.isSelectAllLoop=!1,n.changeOnBlur||(n.updateValueState(i,n.value,n.tempValues),n.isSelectAll=n.isSelectAll?!n.isSelectAll:n.isSelectAll),n.updateHiddenElement(!0),n.popupWrapper&&e[s-1]&&e[s-1].classList.contains("e-item-focus")){var t=document.getElementsByClassName("e-selectall-parent")[0];t&&t.classList.contains("e-item-focus")&&e[s-1].classList.remove("e-item-focus")}n.checkSelectAll()},0)}}else this.virtualSelectAllData&&this.virtualSelectAllData.length>0&&this.virtualSelectAllData.map(function(t){n.virtualSelectAll=!0,n.removeValue(n.value[s],i,n.value.length-s)}),this.updatedataValueItems(i),this.changeOnBlur||(this.updateValueState(i,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement(),this.setProperties({value:[]},!0),this.selectedListData=[],this.virtualSelectAll=!1,y(this.viewPortInfo.startIndex)||y(this.viewPortInfo.endIndex)||this.notify("setCurrentViewDataAsync",{component:this.getModuleName(),module:"VirtualScroll"});this.checkSelectAll();var p=this.list.getElementsByClassName("e-virtual-ddl")[0];p&&(p.style=this.GetVirtualTrackHeight()),this.UpdateSkeleton();var u=this.list.getElementsByClassName("e-virtual-ddl-content")[0];u&&(u.style=this.getTransformValues())},e.prototype.updateValue=function(t,e,i){var n=this,s=e.length,r={event:t,items:i?e:[],itemData:i?this.listData:[],isInteracted:!!t,isChecked:i,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",r),e&&e.length||this.enableVirtualization&&!i){var o=0,a=0;if(a=this.enableGroupCheckBox?i?this.maximumSelectionLength-(this.value?this.value.length:0):e.length:i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,r.preventSelectEvent){for(var l=0;l<e.length&&l<a;l++){this.removeHover();var h=e[l].getAttribute("data-value"),c=this.getFormattedValue(h);c=this.allowObjectBinding?this.getDataByValue(c):c;var d=this.mainList?this.mainList.querySelectorAll(i?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[l]:null;i?(this.value=this.value?this.value:[],(!this.allowObjectBinding&&this.value.indexOf(c)<0||this.allowObjectBinding&&!this.isObjectInArray(c,this.value))&&this.setProperties({value:[].concat([],this.value,[c])},!0),this.removeFocus(),this.addListSelection(e[l],d),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(c,t,!1,e[l],d),this.enableGroupCheckBox&&this.findGroupStart(e[l])}if(!i)if((this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength)et(this.list.querySelectorAll("li."+dj+":not(.e-active)"),"e-disable");var p={event:t,items:i?e:[],itemData:i?this.listData:[],isInteracted:!!t,isChecked:i};this.trigger("selectedAll",p)}else if(this.enableVirtualization)this.virtualSelectAllState=i,this.virtualSelectAll=!0,this.CurrentEvent=t,this.virtualSelectAllData||this.resetList(this.dataSource,this.fields,new Gb),this.virtualSelectAllData&&this.virtualSelectionAll(i,e,t);else{for(;o<s&&o<=50&&o<a;)this.isSelectAllTarget=s===o+1,this.updateListSelection(e[o],t,s-o),this.enableGroupCheckBox&&this.findGroupStart(e[o]),o++;s>50&&setTimeout(function(){for(;o<s&&o<a;)n.isSelectAllTarget=s===o+1,n.updateListSelection(e[o],t,s-o),n.enableGroupCheckBox&&n.findGroupStart(e[o]),o++;if(n.updatedataValueItems(t),n.changeOnBlur||(n.updateValueState(t,n.value,n.tempValues),n.isSelectAll=n.isSelectAll?!n.isSelectAll:n.isSelectAll),n.updateHiddenElement(),n.popupWrapper&&e[o-1].classList.contains("e-item-focus")){var i=document.getElementsByClassName("e-selectall-parent")[0];i&&i.classList.contains("e-item-focus")&&e[o-1].classList.remove("e-item-focus")}},0)}}this.updatedataValueItems(t),this.checkPlaceholderSize(),s<=50&&!r.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(t,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),(this.enableVirtualization&&this.value&&this.value.length>0||!this.enableVirtualization)&&this.updateHiddenElement())},e.prototype.updateHiddenElement=function(t){var e=this,i="",n="",s="",r=[];"CheckBox"===this.mode&&(this.value.map(function(o,a){i+='<option selected value ="'+o+'">'+a+"</option>",t||(s=e.listData?e.getTextByValue(o):o,n+=s+e.delimiterChar+" ",r.push(s))}),this.hiddenElement.innerHTML=i,t||(this.updateWrapperText(this.delimiterWrapper,n),this.setProperties({text:r.toString()},!0)),this.delimiterWrapper.setAttribute("id",b("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.refreshInputHight(),this.refreshPlaceHolder())},e.prototype.updatedataValueItems=function(t){this.deselectHeader(),this.textboxValueUpdate(t)},e.prototype.textboxValueUpdate=function(t){var e=t&&t.target&&(ut(t.target,".e-selectall-parent")||ut(t.target,".e-close-hooker"));"Box"===this.mode||this.isPopupOpen()||"CheckBox"===this.mode&&(this.isSelectAll||e)?this.searchWrapper.classList.remove(UB):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),(!e&&!this.isSelectAll&&this.isSelectAllTarget||this.isSelectAll&&this.isSelectAllTarget)&&this.updateDelimeter(this.delimiterChar,t),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,t),this.refreshPlaceHolder()},e.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},e.prototype.updateDataSource=function(t){this.checkAndResetCache(),y(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},e.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},e.prototype.selectAllItems=function(e,i){var n=this;if(y(this.list))this.selectAllAction=function(){if("CheckBox"===n.mode&&n.showSelectAll){var t={module:"CheckBoxSelection",enable:"CheckBox"===n.mode,value:e?"check":"uncheck"};n.notify("checkSelectAll",t)}n.selectAllItem(e,i),n.selectAllAction=null},t.prototype.render.call(this);else{if(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll){var s={value:e?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"};this.notify("checkSelectAll",s)}this.selectAllItem(e,i)}this.dataSource instanceof dC&&!(this.dataSource instanceof dC&&this.virtualSelectAllData)||(this.virtualSelectAll=!1)},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.onPropertyChanged=function(e,i){(e.dataSource&&!y(Object.keys(e.dataSource))||e.query&&!y(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(var n=0,s=Object.keys(e);n<s.length;n++){var r=s[n];switch(r){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(y(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.fields.disabled&&(this.text=this.text&&!this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?this.text:null),this.updateVal(this.value,this.value,"text");break;case"value":if(this.fields.disabled&&this.removeDisabledItemsValue(this.value),this.updateVal(this.value,i.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.isPopupOpen()&&"CheckBox"===this.mode&&this.list&&this.list.querySelector(".e-active.e-disable"))et(this.list.querySelectorAll("li."+dj+".e-active.e-disable"),"e-disable");this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(i.cssClass),this.updateCssClass(),this.calculateWidth();break;case"enableRtl":this.enableRTL(e.enableRtl),t.prototype.onPropertyChanged.call(this,e,i);break;case"allowResize":if(this.allowResize=e.allowResize,!this.allowResize&&this.popupObj){var o=parseInt(this.popupHeight,10);"auto"!==this.popupHeight?(this.list.style.maxHeight=S(o),this.popupWrapper.style.height=S(this.popupHeight),this.popupWrapper.style.maxHeight=S(this.popupHeight)):this.list.style.maxHeight=S(this.popupHeight)}break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass(),hI.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),y(this.overAllWrapper)||y(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)||this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){o=parseInt(this.popupHeight,10);"auto"!==this.popupHeight?(this.list.style.maxHeight=S(o),this.popupWrapper.style.maxHeight=S(this.popupHeight)):this.list.style.maxHeight=S(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;case"fields":y(this.fields.groupBy)&&this.removeScrollEvent();break;default:var a=this.getPropObject(r,e,i);t.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty)}}},e.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},e.prototype.totalItemsCount=function(){var t;if(this.dataSource instanceof dC?this.remoteDataCount>=0?t=this.totalItemCount=this.dataCount=this.remoteDataCount:this.resetList(this.dataSource):t=this.dataSource&&this.dataSource.length?this.dataSource.length:0,"CheckBox"===this.mode)this.totalItemCount=0!==t?t:this.totalItemCount;else if(this.hideSelectedItem){if(this.totalItemCount=0!==t&&this.value?t-this.value.length:this.totalItemCount,this.allowCustomValue&&this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0)for(var e=0;e<this.virtualCustomSelectData.length;e++)for(var i=0;i<this.value.length;i++){(this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[i]):this.value[i])===c(this.fields.value?this.fields.value:"",this.virtualCustomSelectData[e])&&(this.totalItemCount+=1)}}else this.totalItemCount=0!==t?t:this.totalItemCount,this.allowCustomValue&&this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&(this.totalItemCount+=this.virtualCustomSelectData.length)},e.prototype.presentItemValue=function(t){for(var e=[],i=0;i<this.value.length;i++){var n=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[i]):this.value[i];if(!this.findListElement(this.allowFiltering&&!y(this.mainList)?this.mainList:t,"li","data-value",n)){var s=this.allowObjectBinding?this.getDataByValue(this.value[i]):this.value[i];e.push(s)}}return e},e.prototype.addNonPresentItems=function(t,e,i,n){var s=this;this.dataSource.executeQuery(this.getForQuery(t)).then(function(t){t.result.length>0&&s.addItem(t.result,i.length),s.updateActionList(e,i,n)})},e.prototype.updateVal=function(t,e,i){var n=this;if(this.list)if(!(this.dataSource instanceof dC)||this.listData&&this.mainList&&this.mainData){var s=[];y(this.value)||this.allowCustomValue||(s=this.presentItemValue(this.ulElement));var r=s.some(function(t){return null!==t});if("value"===i&&s.length>0&&this.dataSource instanceof dC&&!y(this.value)&&null!=this.listData&&r)this.mainData=null,this.setDynValue=!0,this.isaddNonPresentItems=!0,this.addNonPresentItems(s,this.ulElement,this.listData),this.isaddNonPresentItems=!1;else{if("text"===i&&(this.initialTextUpdate(),t=this.value),(y(this.value)||0===this.value.length)&&(this.tempValues=e),this.allowCustomValue&&("Default"===this.mode||"Box"===this.mode)&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){var o=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(o,this.mainData)}if(this.enableVirtualization)if(!this.enableVirtualization||this.dataSource instanceof dC){if(!this.isInitRemoteVirtualData)if(this.allowObjectBinding&&!r&&this.value&&this.value.length){for(var a=this.isPrimitiveData?"":this.fields.value,l=void 0,h=0;h<this.value.length;h++){var d=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[h]):this.value[h];l=0===h?new Kb(a,"equal",d):l.or(a,"equal",d)}this.dataSource instanceof dC&&this.dataSource.executeQuery((new Gb).where(l)).then(function(t){if(t.result.length>0){var e=t.result;n.isDynamicRemoteVirtualData=!0,setTimeout(function(){n.initialValueUpdate(e,!0),n.isDynamicRemoteVirtualData=!1,n.initialUpdate()},100)}})}else this.isDynamicRemoteVirtualData=!0,this.initialValueUpdate(this.listData,!0),this.isDynamicRemoteVirtualData=!1,this.initialUpdate()}else this.initialValueUpdate(this.dataSource,!0);else this.initialValueUpdate();"Box"===this.mode||this.inputFocus||this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,t,e),this.checkPlaceholderSize()}}else this.onLoadSelect();else this.onLoadSelect(),this.enableVirtualization&&(this.setProperties({text:""},!0),this.selectedListData=[],this.checkInitialValue());this.changeOnBlur||this.updateValueState(null,t,e)},e.prototype.addItem=function(e,i){t.prototype.addItem.call(this,e,i)},e.prototype.hidePopup=function(t){var e=this;if(this.isPopupOpen()){var i={name:"FadeOut",duration:100,delay:100};this.customFilterQuery=null;var n={popup:this.popupObj,cancel:!1,animation:i,event:t||null};this.trigger("close",n,function(t){if(!t.cancel){e.fields.groupBy&&"CheckBox"!==e.mode&&e.fixedHeaderElement&&(lt(e.fixedHeaderElement),e.fixedHeaderElement=null),e.beforePopupOpen=!1,e.overAllWrapper.classList.remove(XB);var i="CheckBox"===e.mode?e.targetElement():null;if(e.popupObj.hide(new qt(t.animation)),ht(e.inputElement,{"aria-expanded":"false"}),e.inputElement.removeAttribute("aria-owns"),e.inputElement.removeAttribute("aria-activedescendant"),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"clear"}),e.popupObj.hide(),et([document.body,e.popupObj.element],"e-popup-full-page"),K.remove(e.list,"keydown",e.onKeyDown),"CheckBox"===e.mode&&e.showSelectAll&&K.remove(e.popupObj.element,"click",e.clickHandler),e.list&&e.list.parentElement&&e.allowResize){e.resizer&&e.list.parentElement.contains(e.resizer)&&e.list.parentElement.removeChild(e.resizer),e.list.parentElement.classList.contains("e-resize")&&e.list.parentElement.classList.remove("e-resize"),e.list.parentElement.style.boxSizing="",e.list.parentElement.style.paddingBottom="";var n=parseInt(e.popupHeight,10);e.list.style.maxHeight=S(n),"auto"!==e.popupHeight.toString().toLowerCase()&&e.initialPopupHeight>=parseInt(e.popupHeight.toString(),10)-2&&(e.list.parentElement.style.height=S(e.popupHeight)),e.list.parentElement.style.maxHeight=S(e.popupHeight)}e.resizer&&(K.remove(e.resizer,"mousedown",e.startResizing),e.resizer.remove()),e.enableVirtualization&&"CheckBox"===e.mode&&e.value&&e.value.length>0&&e.enableSelectionOrder&&(e.viewPortInfo.startIndex=e.virtualItemStartIndex=0,e.viewPortInfo.endIndex=e.virtualItemEndIndex=e.viewPortInfo.startIndex>0?e.viewPortInfo.endIndex:e.itemCount,e.virtualListInfo=e.viewPortInfo,e.previousStartIndex=0,e.previousEndIndex=e.itemCount);var s=void 0;e.dataSource instanceof dC?e.remoteDataCount>=0?e.totalItemCount=e.dataCount=e.remoteDataCount:e.resetList(e.dataSource):s=e.dataSource&&e.dataSource.length?e.dataSource.length:0,e.enableVirtualization&&(e.allowFiltering||e.allowCustomValue)&&(e.targetElement()||i)&&e.totalItemCount!==s&&(e.checkAndResetCache(),e.updateInitialData()),e.virtualCustomData&&e.viewPortInfo&&0===e.viewPortInfo.startIndex&&e.viewPortInfo.endIndex===e.itemCount&&e.renderItems(e.mainData,e.fields),e.virtualCustomData=null,e.isVirtualTrackHeight=!1}})}},e.prototype.showPopup=function(e){var i=this;if(this.enabled){this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null;this.trigger("beforeOpen",{cancel:!1},function(n){if(!n.cancel){if(!i.ulElement)return i.beforePopupOpen=!0,"CheckBox"===i.mode&&G.isDevice&&i.allowFiltering&&i.isDeviceFullScreen&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode}),void t.prototype.render.call(i,e);"CheckBox"===i.mode&&G.isDevice&&i.allowFiltering&&i.isDeviceFullScreen&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode});var s=i.ulElement.querySelectorAll("li.e-list-item").length,r=i.ulElement.querySelectorAll("li."+dj+"."+jB).length;if(s>0&&s===r&&r===i.mainData.length&&(""===i.targetElement()||!i.allowCustomValue))return void(i.beforePopupOpen=!1);if(i.onPopupShown(e),i.enableVirtualization&&i.listData&&i.listData.length&&(y(i.value)||"dropdownlist"!==i.getModuleName()&&"combobox"!==i.getModuleName()||i.removeHover(),i.beforePopupOpen||(i.hideSelectedItem&&i.value&&Array.isArray(i.value)&&i.value.length>0&&i.totalItemsCount(),i.preventSetCurrentData||y(i.viewPortInfo.startIndex)||y(i.viewPortInfo.endIndex)||i.notify("setCurrentViewDataAsync",{component:i.getModuleName(),module:"VirtualScroll"}))),i.enableVirtualization&&!i.allowFiltering&&null!=i.selectedValueInfo&&i.selectedValueInfo.startIndex>0&&null!=i.value&&i.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),i.enableVirtualization)i.updatevirtualizationList();else if(i.value&&i.value.length)for(var o=void 0,a=(i.getItems(),0),l=i.value;a<l.length;a++){var h=l[a],d=i.allowObjectBinding?c(i.fields.value?i.fields.value:"",h):h;(o=i.getElementByValue(d))&&i.addListSelection(o)}i.allowResize&&i.setResize(),i.preventSetCurrentData=!0}})}},e.prototype.selectAll=function(t){this.isSelectAll=!0,this.selectAllItems(t)},e.prototype.getModuleName=function(){return"multiselect"},e.prototype.clear=function(){var t=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){t.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)},e.prototype.render=function(){!y(this.value)&&this.value.length>0&&(this.value=this.value.slice()),this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.selectAllEventEle=[],this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view "+WB}),this.viewWrapper.style.display="none",this.overAllClear=this.createElement("span",{className:FB}),this.overAllClear.style.display="none",this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&tt([this.overAllWrapper],"e-checkbox"),G.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:WB}),this.delimiterWrapper.style.display="none",this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection"}),this.chipCollectionWrapper.style.display="none","Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",b("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",b("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!G.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(_B),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0",role:"combobox"}}),"Default"!==this.mode&&"Box"!==this.mode||this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),y(this.inputElement)||(ht(this.inputElement,{"aria-expanded":"false"}),this.inputElement.hasAttribute("aria-label")||this.inputElement.setAttribute("aria-label",this.getModuleName())),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?AB(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var t=this.element.getAttribute("id")?this.element.getAttribute("id"):b("ej2_dropdownlist");this.element.id=t,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),!y(ut(this.element,"fieldset"))&&ut(this.element,"fieldset").disabled&&(this.enabled=!1),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering,"CheckBox"===this.mode),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount,this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),hI.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),y(this.overAllWrapper)||y(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)||this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.renderComplete()},e.prototype.setResize=function(){if(this.list&&this.list.parentElement&&y(this.list.parentElement.querySelector(".e-resizer-right.e-icons"))&&(this.resizer=this.createElement("div",{id:this.element.id+"_resize-popup",className:"e-resizer-right e-icons"})),"CheckBox"===this.mode&&this.showSelectAll&&this.selectAllHeight&&0!==this.selectAllHeight&&(this.storedSelectAllHeight=this.selectAllHeight),this.list&&this.list.parentElement){this.list.parentElement.classList.add("e-resize"),this.initialPopupHeight=this.list.parentElement.clientHeight,"auto"!==this.popupHeight.toString().toLowerCase()&&this.initialPopupHeight>=parseInt(this.popupHeight.toString(),10)-2&&(this.list.parentElement.style.height="100%"),this.list.parentElement.style.boxSizing="border-box";var t="CheckBox"===this.mode&&this.searchBoxHeight?this.searchBoxHeight+16+(this.showSelectAll?this.storedSelectAllHeight:0):16;if(this.list.parentElement.style.paddingBottom=t+"px",this.list.parentElement.appendChild(this.resizer),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.headerTemplate){var e=this.list.parentElement.querySelector(".e-ddl-header");e&&e.offsetHeight&&(this.headerTemplateHeight=e.offsetHeight),this.resizeHeight?this.list.style.maxHeight=this.resizeHeight-this.headerTemplateHeight-16+"px":this.list.style.maxHeight=parseInt(this.list.style.maxHeight,10)-16+"px"}}this.resizer&&(K.add(this.resizer,"mousedown",this.startResizing,this),K.add(this.resizer,"touchstart",this.startResizing,this))},e.prototype.startResizing=function(t){this.isResizing=!0,this.trigger("resizeStart",t);var e=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,i=t instanceof MouseEvent?t.clientY:t.touches[0].clientY;this.list&&this.list.parentElement&&(this.originalWidth=this.list.parentElement.offsetWidth,this.originalHeight=this.list.parentElement.offsetHeight,this.originalMouseX=e,this.originalMouseY=i),this.resizingWireEvent(),t&&t.preventDefault()},e.prototype.resizePopup=function(t){if(this.isResizing){this.trigger("resizing",t);var e=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,i=t instanceof MouseEvent?t.clientY:t.touches[0].clientY,n=e-this.originalMouseX,s=i-this.originalMouseY;if(this.resizeWidth=Math.max(this.originalWidth+n,100),this.resizeHeight=Math.max(this.originalHeight+s,130),this.list&&this.list.parentElement){var r=parseInt(window.getComputedStyle(this.list.parentElement).minWidth,10),o=parseInt(window.getComputedStyle(this.list.parentElement).minHeight,10);r=r||100,o=o||120,this.resizeWidth=Math.max(this.originalWidth+n,r),this.resizeHeight=Math.max(this.originalHeight+s,o),this.list.parentElement.style.width=this.resizeWidth+"px",this.list.parentElement.style.height=this.resizeHeight+"px",this.list.parentElement.style.maxHeight=this.resizeHeight+"px",this.list.style.maxHeight=this.resizeHeight+"px",this.headerTemplate&&(this.list.style.maxHeight=this.resizeHeight-this.headerTemplateHeight-16+"px"),this.fixedHeaderElement&&this.ulElement&&(this.fixedHeaderElement.style.width=this.ulElement.offsetWidth+"px")}t&&t.preventDefault()}},e.prototype.stopResizing=function(t){this.isResizing&&(this.isResizing=!1,this.trigger("resizeStop",t),this.resizingUnWireEvent()),t&&t.preventDefault()},e.prototype.getListHeight=function(){var t=this.createElement("div",{className:"e-dropdownbase"}),e=this.createElement("li",{className:"e-list-item"}),i=S(this.popupHeight);t.style.height=parseInt(i,10).toString()+"px",t.appendChild(e),document.body.appendChild(t),this.virtualListHeight=t.getBoundingClientRect().height;var n=Math.ceil(e.getBoundingClientRect().height)+parseInt(window.getComputedStyle(e).marginBottom,10);return t.remove(),n},e.prototype.removeDisabledItemsValue=function(t){if(t){for(var e=[],i=0,n=0;n<t.length;n++){var s=t[n];"object"==typeof s&&(s=JSON.parse(JSON.stringify(s))[this.fields.value]),null==s||this.isDisabledItemByIndex(this.getIndexByValue(s))||(e[i++]=t[n])}this.value=e.length>0?e:null}},e.prototype.checkInitialValue=function(){var e=this;this.fields.disabled&&this.removeDisabledItemsValue(this.value);var i=this.dataSource instanceof Array?this.dataSource.length>0:!y(this.dataSource);if((!this.value||!this.value.length)&&y(this.text)&&!i&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var n=this.element.options,s=[],r="",o=0,a=n.length;o<a;o++){var l=n[o];if(!y(l.getAttribute("selected")))if(l.getAttribute("value")){var h=this.allowObjectBinding?this.getDataByValue(l.getAttribute("value")):l.getAttribute("value");s.push(h)}else r+=l.text+this.delimiterChar}s.length>0?this.setProperties({value:s},!0):""!==r&&this.setProperties({text:r},!0),(s.length>0||""!==r)&&(this.refreshInputHight(),this.refreshPlaceHolder())}if((this.value&&this.value.length||!y(this.text))&&(this.list||t.prototype.render.call(this)),this.fields.disabled&&(this.text=this.text&&!this.isDisabledItemByIndex(this.getIndexByValue(this.getValueByText(this.text)))?this.text:null),y(this.text)||!y(this.value)&&0!==this.value.length||this.initialTextUpdate(),this.value&&this.value.length){var d;if(this.enableVirtualization){for(var p=this.isPrimitiveData?"":this.fields.value,u=void 0,g=0;g<this.value.length;g++){h=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",this.value[g]):this.value[g];u=0===g?new Kb(p,"equal",h):u.or(p,"equal",h)}this.dataSource instanceof dC?this.dataSource.executeQuery((new Gb).where(u)).then(function(t){t.result.length>0&&(d=t.result,e.initStatus=!1,e.isInitRemoteVirtualData=!0,setTimeout(function(){e.initialValueUpdate(d,!0),e.initialUpdate(),e.isInitRemoteVirtualData=!1},100),e.initStatus=!0)}):d=new dC(this.dataSource).executeLocal((new Gb).where(u))}this.dataSource instanceof dC?this.setInitialValue=function(){e.initStatus=!1,e.enableVirtualization&&(!e.enableVirtualization||e.dataSource instanceof dC)||e.initialValueUpdate(d),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(d,!0),this.initialUpdate()),this.updateTempValue()}else this.initialUpdate();this.initStatus=!0,this.checkAutoFocus(),y(this.text)||this.element.setAttribute("data-initial-value",this.text)},e.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},e.prototype.updatevirtualizationList=function(){if(this.value&&this.value.length){for(var t=void 0,e=0,i=this.value;e<i.length;e++){var n=i[e],s=this.allowObjectBinding?c(this.fields.value?this.fields.value:"",n):n;(t=this.getElementByValue(s))&&this.addListSelection(t)}if(this.enableVirtualization&&this.hideSelectedItem){var r=this.list.querySelectorAll("li."+dj+":not(."+jB+"):not(.e-reorder-hide):not(.e-virtual-list)");if(r.length){var o=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(r.length<o+2){var a=this.getForQuery(this.value).clone();a=a.skip(this.viewPortInfo.startIndex),this.resetList(this.dataSource,this.fields,a)}}}}},e.prototype.setFloatLabelType=function(){!function(t,e,i,n,s,r,o){var a,l=e.querySelector("."+DB),h=e.querySelector("."+wB);y(l)?NB(s,n,a=null!==o?o:""):(a=l.innerText,at(i.querySelector("."+DB)),NB(s,n,a),y(h)||at(i.querySelector("."+wB))),t.classList.remove("e-float-input")}(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,this.floatLabelType,this.placeholder),"Never"!==this.floatLabelType&&AB(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},e.prototype.addValidInputClass=function(){y(this.overAllWrapper)||(!y(this.value)&&this.value.length||"Always"===this.floatLabelType?tt([this.overAllWrapper],"e-valid-input"):et([this.overAllWrapper],"e-valid-input"))},e.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:qB}),this.componentWrapper.appendChild(this.dropIcon),tt([this.componentWrapper],["e-down-icon"])):y(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),et([this.componentWrapper],["e-down-icon"]))},e.prototype.initialUpdate=function(){"Box"===this.mode||this.setDynValue&&"Default"===this.mode&&this.inputFocus||this.updateDelimView(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},e.prototype.disableItem=function(t){if(this.fields.disabled){this.list||this.renderList();var e=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if("string"==typeof t)e=this.getIndexByValue(t);else if("object"==typeof t)if(t instanceof HTMLLIElement){for(var i=0;i<this.liCollections.length;i++)if(this.liCollections[i]===t){e=this.getIndexByValue(t.getAttribute("data-value"));break}}else{var n=JSON.parse(JSON.stringify(t))[this.fields.value];for(i=0;i<this.listData.length;i++)if(JSON.parse(JSON.stringify(this.listData[i]))[this.fields.value]===n){e=this.getIndexByValue(n);break}}else e=t;if(e<this.liCollections.length&&e>-1&&!JSON.parse(JSON.stringify(this.listData[e]))[this.fields.disabled]){var s=this.liCollections[e];if(s){this.disableListItem(s);var r=JSON.parse(JSON.stringify(this.listData[e]));if(r[this.fields.disabled]=!0,this.listData[e]=r,s.classList.contains(cj)&&this.removeFocus(),s.classList.contains(jB)||s.classList.contains(oj)){var o=this.value;this.removeDisabledItemsValue(this.value),this.updateVal(this.value,o,"value")}"CheckBox"===this.mode&&this.enableGroupCheckBox&&!y(this.fields.groupBy)&&this.disableGroupHeader()}}}}},e.prototype.destroy=function(){this.isReact&&this.clearTemplate(),y(this.popupObj)||(this.popupObj.hide(),this.popupObj.destroy()),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent();var e=["readonly","aria-disabled","placeholder","aria-label","aria-expanded"],i=e.length;if(!y(this.inputElement))for(;i>0;)this.inputElement.removeAttribute(e[i-1]),i--;for(y(this.element)||(this.element.removeAttribute("data-initial-value"),this.element.style.display="block"),this.overAllWrapper&&this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),lt(this.overAllWrapper)),this.popupWrapper&&this.popupWrapper.parentElement&&this.popupWrapper.parentElement.remove();this.searchWrapper&&this.searchWrapper.firstChild;)this.searchWrapper.removeChild(this.searchWrapper.firstChild);this.searchWrapper&&this.searchWrapper.parentElement&&this.searchWrapper.parentElement.remove(),this.viewWrapper&&this.viewWrapper.parentElement&&this.viewWrapper.parentElement.remove(),this.overAllClear&&this.overAllClear.parentElement&&this.overAllClear.parentElement.remove(),this.delimiterWrapper&&this.delimiterWrapper.parentElement&&this.delimiterWrapper.parentElement.remove();var n=this.overAllWrapper.querySelector("select.e-multi-hidden");for(n&&n.parentElement&&n.parentElement.remove();this.componentWrapper&&this.componentWrapper.firstChild;)this.componentWrapper.removeChild(this.componentWrapper.firstChild);for(this.componentWrapper&&this.componentWrapper.parentElement&&(this.componentWrapper.removeAttribute("class"),this.componentWrapper.parentElement.remove());this.popupWrapper&&this.popupWrapper.firstChild;)this.popupWrapper.removeChild(this.popupWrapper.firstChild);if(this.inputElement)for(var s=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-label","aria-hidden","tabindex","aria-controls","aria-describedby","size","role","type","class"],r=0;r<s.length;r++)this.inputElement.removeAttribute(s[r]);this.inputElement&&this.inputElement.remove(),this.list=null,this.popupObj=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.componentWrapper=null,this.overAllClear=null,this.overAllWrapper=null,this.hiddenElement=null,this.searchWrapper=null,this.viewWrapper=null,this.chipCollectionWrapper=null,this.targetInputElement=null,this.popupWrapper=null,this.inputElement=null,this.delimiterWrapper=null,this.liCollections=null,this.popupContentElement=null,this.header=null,this.mainList=null,this.mainListCollection=null,this.footer=null,this.selectAllEventEle=null,t.prototype.destroy.call(this)},kB([Bt({text:null,value:null,iconCss:null,groupBy:null,disabled:null},ij)],e.prototype,"fields",void 0),kB([jt(!1)],e.prototype,"enablePersistence",void 0),kB([jt(null)],e.prototype,"groupTemplate",void 0),kB([jt("No records found")],e.prototype,"noRecordsTemplate",void 0),kB([jt("Request failed")],e.prototype,"actionFailureTemplate",void 0),kB([jt("None")],e.prototype,"sortOrder",void 0),kB([jt(!0)],e.prototype,"enabled",void 0),kB([jt(!0)],e.prototype,"enableHtmlSanitizer",void 0),kB([jt(!1)],e.prototype,"enableVirtualization",void 0),kB([jt([])],e.prototype,"dataSource",void 0),kB([jt(null)],e.prototype,"query",void 0),kB([jt("StartsWith")],e.prototype,"filterType",void 0),kB([jt(1e3)],e.prototype,"zIndex",void 0),kB([jt(!1)],e.prototype,"ignoreAccent",void 0),kB([jt()],e.prototype,"locale",void 0),kB([jt(!1)],e.prototype,"enableGroupCheckBox",void 0),kB([jt(null)],e.prototype,"cssClass",void 0),kB([jt("100%")],e.prototype,"width",void 0),kB([jt("300px")],e.prototype,"popupHeight",void 0),kB([jt("100%")],e.prototype,"popupWidth",void 0),kB([jt(null)],e.prototype,"placeholder",void 0),kB([jt(null)],e.prototype,"filterBarPlaceholder",void 0),kB([jt({})],e.prototype,"htmlAttributes",void 0),kB([jt(null)],e.prototype,"valueTemplate",void 0),kB([jt(null)],e.prototype,"headerTemplate",void 0),kB([jt(null)],e.prototype,"footerTemplate",void 0),kB([jt(null)],e.prototype,"itemTemplate",void 0),kB([jt(null)],e.prototype,"allowFiltering",void 0),kB([jt(300)],e.prototype,"debounceDelay",void 0),kB([jt(!0)],e.prototype,"isDeviceFullScreen",void 0),kB([jt(!0)],e.prototype,"changeOnBlur",void 0),kB([jt(!1)],e.prototype,"allowCustomValue",void 0),kB([jt(!0)],e.prototype,"showClearButton",void 0),kB([jt(1e3)],e.prototype,"maximumSelectionLength",void 0),kB([jt(!1)],e.prototype,"readonly",void 0),kB([jt(!1)],e.prototype,"allowResize",void 0),kB([jt(null)],e.prototype,"text",void 0),kB([jt(null)],e.prototype,"value",void 0),kB([jt(!1)],e.prototype,"allowObjectBinding",void 0),kB([jt(!0)],e.prototype,"hideSelectedItem",void 0),kB([jt(!0)],e.prototype,"closePopupOnSelect",void 0),kB([jt("Default")],e.prototype,"mode",void 0),kB([jt(",")],e.prototype,"delimiterChar",void 0),kB([jt(!0)],e.prototype,"ignoreCase",void 0),kB([jt(!1)],e.prototype,"showDropDownIcon",void 0),kB([jt("Never")],e.prototype,"floatLabelType",void 0),kB([jt(!1)],e.prototype,"showSelectAll",void 0),kB([jt("Select All")],e.prototype,"selectAllText",void 0),kB([jt("Unselect All")],e.prototype,"unSelectAllText",void 0),kB([jt(!0)],e.prototype,"enableSelectionOrder",void 0),kB([jt(!0)],e.prototype,"openOnClick",void 0),kB([jt(!1)],e.prototype,"addTagOnBlur",void 0),kB([Ut()],e.prototype,"change",void 0),kB([Ut()],e.prototype,"removing",void 0),kB([Ut()],e.prototype,"removed",void 0),kB([Ut()],e.prototype,"beforeSelectAll",void 0),kB([Ut()],e.prototype,"selectedAll",void 0),kB([Ut()],e.prototype,"beforeOpen",void 0),kB([Ut()],e.prototype,"open",void 0),kB([Ut()],e.prototype,"close",void 0),kB([Ut()],e.prototype,"blur",void 0),kB([Ut()],e.prototype,"focus",void 0),kB([Ut()],e.prototype,"chipSelection",void 0),kB([Ut()],e.prototype,"resizeStop",void 0),kB([Ut()],e.prototype,"resizing",void 0),kB([Ut()],e.prototype,"resizeStart",void 0),kB([Ut()],e.prototype,"filtering",void 0),kB([Ut()],e.prototype,"tagging",void 0),kB([Ut()],e.prototype,"customValueSelection",void 0),e=kB([Ft],e)}(fj),tH="e-frame",eH="e-check",iH="e-checkbox-wrapper",nH="e-stop",sH="e-input-group-icon e-clear-icon e-icons",rH="e-clear-icon",oH="e-popup-full-page",aH="e-input-focus",lH=(function(){function t(t){this.activeLi=[],this.activeEle=[],this.parent=t,this.removeEventListener(),this.addEventListener()}t.prototype.getModuleName=function(){return"CheckBoxSelection"},t.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlurHandler,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),K.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this),this.parent.on("popupFullScreen",this.setPopupFullScreen,this))},t.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlurHandler),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),this.parent.off("popupFullScreen",this.setPopupFullScreen))},t.prototype.listOption=function(t){var e=this;if(y(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(t){e.checboxCreate(t)};else{var i=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(t){e.checboxCreate(t),i.apply(e,[t])}}},t.prototype.setPlaceholder=function(t){hI.setPlaceholder(t.filterBarPlaceholder,this.filterInput)},t.prototype.checboxCreate=function(t){var e;if(e=y(t.item)?t:t.item,this.parent.enableGroupCheckBox||"e-list-group-item "!==e.className&&"e-list-group-item"!==e.className){var i=no(this.parent.createElement,!0),n=ct("div.e-icons",e);return e.insertBefore(i,e.childNodes[y(n)?0:1]),ct("."+tH,i),this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),e}return e},t.prototype.setSelectAll=function(){this.parent.showSelectAll?(y(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:"e-selectall-parent"}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(y(this.parent.filterParent)?rt([this.checkAllParent],this.parent.popupWrapper):rt([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(y(this.parent.filterParent)?st([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),K.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1&&!this.parent.enableVirtualization&&!this.parent.isDynamicDataChange||this.parent.isDynamicDataChange&&this.parent.listData&&this.parent.listData.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):y(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},t.prototype.destroy=function(){this.removeEventListener(),K.remove(document,"mousedown",this.onDocumentClick),this.checkAllParent=null,this.clearIconElement=null,this.filterInput=null,this.filterInputObj=null,this.checkWrapper=null,this.selectAllSpan=null},t.prototype.listSelection=function(t){var e;if(y(t.e)){var i=t.li.querySelector(".e-checkbox-wrapper");e=i?i.childNodes[1]:t.li.lastElementChild.childNodes[1]}else{t.li.querySelector(".e-checkbox-wrapper .e-frame");e=y(t.e.target)?t.li.querySelector(".e-checkbox-wrapper").childNodes[1]:t.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(t.e.target))?t.e.target:t.li.querySelector(".e-checkbox-wrapper").childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(e=t.li.firstElementChild.childNodes[1]),y(e)||(this.checkWrapper=ut(e,"."+iH)),!y(this.checkWrapper)){var n=ct("."+tH,this.checkWrapper);this.validateCheckNode(this.checkWrapper,n.classList.contains(eH),t.li,t.e,!1)}},t.prototype.validateCheckNode=function(t,e,i,n,s){this.changeState(t,e?"uncheck":"check",n,!0,s)},t.prototype.clickHandler=function(t){var e;e=t.currentTarget.classList.contains(this.checkAllParent.className)||t.currentTarget.classList.value===this.checkAllParent.className?t.currentTarget.firstElementChild.lastElementChild:t.currentTarget,this.checkWrapper=ut(e,"."+iH);if(!y(this.checkWrapper)){var i=ct("."+tH,this.checkWrapper);this.validateCheckNode(this.checkWrapper,i.classList.contains(eH),null,t,!0)}t.preventDefault()},t.prototype.changeState=function(t,e,i,n,s){var r=t.getElementsByClassName(tH)[0];"check"!==e||r.classList.contains(eH)?"uncheck"===e&&(r.classList.contains(eH)||r.classList.contains(nH))?(et([r],[eH,nH]),s&&(this.parent.selectAllItems(!1,i),this.setLocale())):"indeterminate"!==e||r.classList.contains(nH)||(et([r],[eH]),r.classList.add(nH),s&&(this.parent.selectAllItems(!1,i),this.setLocale())):(r.classList.remove(nH),r.classList.add(eH),s&&(this.parent.selectAllItems(!0,i),this.setLocale(!0)))},t.prototype.setSearchBox=function(t){if(y(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:"e-filter-parent"}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:"e-input-filter"}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var e=!1;return G.isDevice&&this.parent.isDeviceFullScreen&&(e=!0,this.parent.mobFilter=!1),this.filterInputObj=hI.createInput({element:this.filterInput,buttons:e?["e-input-group-icon e-back-icon e-icons",sH]:[sH],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),y(this.parent.cssClass)||(-1!==this.parent.cssClass.split(" ").indexOf("e-outline")?tt([this.filterInputObj.container],"e-outline"):-1!==this.parent.cssClass.split(" ").indexOf("e-filled")&&tt([this.filterInputObj.container],"e-filled")),rt([this.filterInputObj.container],this.parent.filterParent),st([this.parent.filterParent],t.popupElement),ht(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-label":"multiselect","aria-expanded":"true","aria-controls":t.popupElement.id}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+rH),!G.isDevice&&this.clearIconElement&&(K.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),K.add(this.filterInput,"input",this.parent.onInput,this.parent),K.add(this.filterInput,"keyup",this.parent.keyUp,this.parent),K.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),K.add(this.filterInput,"blur",this.onBlurHandler,this),K.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},t.prototype.clickOnBackIcon=function(t){this.parent.hidePopup(),et([document.body,this.parent.popupObj.element],oH),this.parent.inputElement.focus()},t.prototype.clearText=function(t){this.parent.targetInputElement.value="",this.parent.allowFiltering&&""===this.parent.targetInputElement.value&&this.parent.search(null),this.parent.refreshListItems(null),this.parent.refreshPopup(),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),(!this.parent.enableVirtualization||this.parent.enableVirtualization&&(y(this.parent.value)||this.parent.value&&0===this.parent.value.length))&&this.setReorder(t),this.boundPreventListSelection=this.preventListSelection.bind(this),this.parent.popupWrapper.addEventListener("mouseup",this.boundPreventListSelection,!0),t.preventDefault()},t.prototype.preventListSelection=function(t){t.stopPropagation(),this.parent.popupWrapper.removeEventListener("mouseup",this.boundPreventListSelection,!0),this.boundPreventListSelection=null},t.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add("e-ddl-device"),this.parent.popupObj.element.classList.add("e-ddl-device-filter"),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector("."+rH),this.clearIconElement.style.visibility="hidden",K.add(this.backIconElement,"click",this.clickOnBackIcon,this),K.add(this.clearIconElement,"click",this.clearText,this)},t.prototype.setSearchBoxPosition=function(){var t=this.filterInput.parentElement.getBoundingClientRect().height,e=0,i=0,n=0;this.checkAllParent&&(e=this.checkAllParent.getBoundingClientRect().height),this.parent.header&&(n=this.parent.header.getBoundingClientRect().height),this.parent.footer&&(i=this.parent.footer.getBoundingClientRect().height),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-t-e-n-i+"px",this.parent.list.style.height=window.innerHeight-t-e-n-i+"px";var s=this.filterInput.parentElement.querySelector("."+rH);at(this.filterInput),s.parentElement.insertBefore(this.filterInput,s)},t.prototype.setPopupFullScreen=function(){this.parent&&this.parent.popupObj&&(ht(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),tt([document.body,this.parent.popupObj.element],oH),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%")},t.prototype.targetElement=function(){return y(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=""===this.parent.targetInputElement.value?"hidden":"visible"),this.parent.targetInputElement.value},t.prototype.onBlurHandler=function(t){if(!this.parent.element.classList.contains("e-listbox")){var e=void 0;if(this.parent.keyAction)return;if(G.isIE&&(e=!y(t)&&t.target),G.isIE||(e=!y(t)&&t.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(e)&&!G.isIE&&this.filterInput)return void this.filterInput.focus();if(this.parent.scrollFocusStatus&&this.filterInput)return t.preventDefault(),this.filterInput.focus(),void(this.parent.scrollFocusStatus=!1);this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(t,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove(aH),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!G.isDevice&&this.parent.hidePopup()}},t.prototype.onDocumentClick=function(t){if("listbox"!==this.parent.getLocaleName()){var e=t.target;!y(this.parent.popupObj)&&ut(e,'[id="'+this.parent.popupObj.element.id+'"]')&&(this.filterInput&&""!==this.filterInput.value||t.preventDefault()),!y(this.parent.popupObj)&&ut(e,'[id="'+this.parent.popupObj.element.id+'"]')||y(this.parent.overAllWrapper)||this.parent.overAllWrapper.contains(t.target)?this.parent.scrollFocusStatus=(G.isIE||"edge"===G.info.name)&&document.activeElement===this.filterInput:(this.parent.overAllWrapper.classList.contains(cj)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlurHandler(t,!0),this.parent.focused=!0),y(this.parent.overAllWrapper)||this.parent.overAllWrapper.contains(t.target)||!this.parent.overAllWrapper.classList.contains("e-input-focus")||this.parent.isPopupOpen()||(G.isIE?this.parent.onBlurHandler():this.parent.onBlurHandler(t)),this.filterInput===e&&this.filterInput.focus()}},t.prototype.getFocus=function(t){this.parent.overAllWrapper.classList.remove(aH),this.parent.keyAction&&"clear"!==t.value&&"focus"!==t.value?this.parent.keyAction=!1:("focus"===t.value&&(this.filterInput.focus(),this.parent.removeFocus(),K.remove(this.parent.list,"keydown",this.parent.onKeyDown)),"clear"===t.value&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden"))},t.prototype.checkSelectAll=function(t){"check"===t.value&&(this.changeState(this.checkAllParent,t.value,null,null,!1),this.setLocale(!0)),"uncheck"===t.value&&(this.changeState(this.checkAllParent,t.value,null,null,!1),this.setLocale()),"indeterminate"===t.value&&(this.changeState(this.checkAllParent,t.value,null,null,!1),this.setLocale())},t.prototype.setLocale=function(t){if("Select All"!==this.parent.selectAllText||"Unselect All"!==this.parent.unSelectAllText){var e=t?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var i=t?"unSelectAllText":"selectAllText",n=0,s=Hi(e)({},this.parent,i,null,!this.parent.isStringTemplate);n<s.length;n++){var r=s[n];this.selectAllSpan.textContent=r.textContent}}else{var o=new ri(this.parent.getLocaleName(),{},this.parent.locale);""===o.getConstant("selectAllText")&&(o=new ri("dropdowns",{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.parent.locale)),y(this.selectAllSpan)||(this.selectAllSpan.textContent=t?o.getConstant("unSelectAllText"):o.getConstant("selectAllText"))}},t.prototype.getActiveList=function(t){t.li.classList.contains("e-active")?this.activeLi.push(t.li.cloneNode(!0)):this.activeLi.splice(t.index,1)},t.prototype.setReorder=function(t){if(this.parent.enableSelectionOrder&&!y(this.parent.value)){var e=this.parent.ulElement.querySelectorAll("li.e-active").length,i=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});if(e>0)if(this.parent.ulElement.querySelectorAll("li.e-active").forEach(function(t){i.appendChild(t)}),tt(this.parent.ulElement.querySelectorAll("li.e-active"),"e-reorder-hide"),this.parent.enableVirtualization){var n=this.parent.list.querySelector(".e-virtual-ddl-content");st([i],n)}else st([i],this.parent.list);this.parent.focusAtFirstListItem()}}}(),function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()),hH=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},cH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lH(e,t),hH([jt("Multiple")],e.prototype,"mode",void 0),hH([jt(!1)],e.prototype,"showCheckbox",void 0),hH([jt(!1)],e.prototype,"showSelectAll",void 0),hH([jt("Left")],e.prototype,"checkboxPosition",void 0),e}(re),dH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lH(e,t),hH([jt([])],e.prototype,"items",void 0),hH([jt("Right")],e.prototype,"position",void 0),e}(re),pH=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.isValidKey=!1,n.isBackSpace=!1,n.isDataSourceUpdate=!1,n.keyDownStatus=!1,n}var i;return lH(e,t),i=e,e.prototype.addItem=function(e,i){t.prototype.addItem.call(this,e,i),this.allowFiltering&&""!==this.filterInput.value&&this.filteringAction(this.jsonData,new Gb,this.fields)},e.prototype.render=function(){if(this.isAngular&&this.allowFiltering){var e=this.element,i=e.cloneNode(!0);e.parentNode.replaceChild(i,e),this.element=i,d("ej2_instances",[this],this.element)}this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,this.inputFormName=this.element.getAttribute("name"),t.prototype.render.call(this),this.setEnabled(),this.renderComplete()},e.prototype.initWrapper=function(){var t=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});t.style.visibility="hidden",this.list.classList.add("e-listbox-wrapper"),this.list.querySelector(".e-list-parent").setAttribute("role","presentation");for(var e=this.list.querySelectorAll(".e-list-group-item"),i=0;i<e.length;i++)e[i].removeAttribute("tabindex"),e[i].setAttribute("role","option");this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),this.list.classList.add("e-lib"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(t,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(cj),this.itemTemplate&&this.renderReactTemplates(),et([this.list],[rj,nj]),this.validationAttribute(this.element,t),this.list.setAttribute("role","listbox"),ht(this.list,{role:"listbox","aria-label":"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()},e.prototype.updateSelectionSettings=function(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){var t=new ri(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=t.getConstant("selectAllText"),this.unSelectAllText=t.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}},e.prototype.initDraggable=function(){var t=this;this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new aI(this.ulElement,{scope:this.scope,itemClass:"e-list-item",beforeDragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:function(){return t.createElement("span",{className:"e-placeholder"})},helper:function(e){var i=t.list.cloneNode(),n=e.sender.cloneNode(!0);i.appendChild(n);var s=t.getItems()[0];return i.style.width=s.offsetWidth+"px",i.style.height=s.offsetHeight+"px",(t.value&&t.value.length)>1&&t.isSelected(n)&&n.appendChild(t.createElement("span",{className:"e-list-badge",innerHTML:t.value.length+""})),i.style.zIndex=to(t.element)+"",i}})},e.prototype.updateActionCompleteData=function(t,e,i){this.jsonData.splice(null===i?this.jsonData.length:i,0,e)},e.prototype.initToolbar=function(){var t=this.toolbarSettings.position,e=this.element.getAttribute("data-value");if(this.toolbarSettings.items=y(this.toolbarSettings.items)?[]:this.toolbarSettings.items,this.toolbarSettings.items.length){var i=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),n=this.createElement("div",{className:"e-listboxtool-wrapper e-lib e-"+t.toLowerCase()});this.list.parentElement.insertBefore(n,this.list),n.appendChild("Right"===t?this.list:i),n.appendChild("Right"===t?i:this.list),this.createButtons(i),this.element.id||(this.element.id=b("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}var s=this.element.getAttribute("data-value");e&&s&&e!==s?(this.tBListBox=It(document.getElementById(e),this.getModuleName()),this.tBListBox.updateToolBarState()):s&&(this.tBListBox=It(document.getElementById(s),this.getModuleName()),this.tBListBox.updateToolBarState())},e.prototype.createButtons=function(t){var e,i,n=this,s=new ri(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(function(r){i=s.getConstant(r),e=n.createElement("button",{attrs:{type:"button","data-value":r,title:i,"aria-label":i}}),t.appendChild(e),new mo({iconCss:"e-icons e-"+r.toLowerCase()},e).createElement=n.createElement})},e.prototype.validationAttribute=function(e,i){this.inputFormName&&e.setAttribute("name",this.inputFormName),t.prototype.validationAttribute.call(this,e,i),i.required=e.required,e.required=!1},e.prototype.setHeight=function(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=S(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?tt([this.list],"e-filter-list"):et([this.list],"e-filter-list")},e.prototype.setCssClass=function(){var t=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.cssClass&&tt([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&tt([this.list],"e-rtl")},e.prototype.setEnable=function(){var t=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?et([t],qC.disabled):tt([t],qC.disabled)},e.prototype.showSpinner=function(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=S(this.height),this.element.parentElement&&this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),mc({target:this.spinner},this.createElement),Ac(this.spinner)},e.prototype.hideSpinner=function(){this.spinner.querySelector(".e-spinner-pane")&&Lc(this.spinner),this.spinner.parentElement&&at(this.spinner)},e.prototype.onInput=function(){this.isDataSourceUpdate=!1,this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,this.refreshClearIcon()},e.prototype.clearText=function(){this.filterInput.value="",this.refreshClearIcon();var t=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(t)},e.prototype.refreshClearIcon=function(){this.filterInput.parentElement.querySelector("."+uH.clearIcon)&&(this.filterInput.parentElement.querySelector("."+uH.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")},e.prototype.onActionComplete=function(e,i,n){var s,r,o,a=this;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(s=this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),0===i.length){var l=e.childNodes[0];l&&e.removeChild(l)}if(this.allowFiltering&&(r=this.list.getElementsByClassName("e-input-filter")[0])&&(o=r.selectionStart),t.prototype.onActionComplete.call(this,e,i,n),this.allowFiltering&&!y(s)){this.list.insertBefore(s,this.list.firstElementChild),this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(s);var h=s.querySelector(".e-input-filter");h&&(h.addEventListener("focus",function(){s.childNodes[0].classList.contains("e-input-focus")||s.childNodes[0].classList.add("e-input-focus")}),h.addEventListener("blur",function(){s.childNodes[0].classList.contains("e-input-focus")&&s.childNodes[0].classList.remove("e-input-focus")}))}if(this.initWrapper(),this.setSelection(this.value,!0,!1,!this.isRendered),this.initDraggable(),this.mainList=this.ulElement,this.initLoad)this.jsonData=[],f(this.jsonData,i,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering();else if(this.isDataSourceUpdate&&(this.jsonData=[],f(this.jsonData,i,[]),this.isDataSourceUpdate=!1),this.allowFiltering){if(y(r=this.list.getElementsByClassName("e-input-filter")[0]))return;r.selectionStart=o,r.selectionEnd=o,(""!==r.value||""===r.value&&this.isBackSpace)&&(r.focus(),setTimeout(function(){a.isBackSpace=!1}))}if(this.toolbarSettings.items.length&&this.scope&&this.scope.indexOf("#")>-1&&!y(n)){var c=this.scope.replace("#","");It(document.getElementById(c),this.getModuleName()).initToolbar()}this.initLoad=!1},e.prototype.initToolbarAndStyles=function(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()},e.prototype.triggerDragStart=function(t){var e,i=this,n=f(this.getDragArgs(t),{dragSelected:!0},{cancel:!1});G.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",n,function(n){i.allowDragAll=n.dragSelected,i.allowDragAll||(e=i.ulElement.getElementsByClassName("e-list-badge")[0])&&at(e),n.cancel&&(t.cancel=!0)})},e.prototype.triggerDrag=function(t){var e,i,n=this,s=10;if(this.itemTemplate&&t.target)if(t.target&&t.target.closest(".e-list-item"))s=t.target.closest(".e-list-item").scrollHeight;else{var r=t.element.querySelector(".e-list-item");r&&(s=r.scrollHeight)}var o,a=t.event;this.stopTimer(),t.target&&(t.target.classList.contains("e-listbox-wrapper")||t.target.classList.contains("e-list-item")||t.target.classList.contains("e-filter-parent")||t.target.classList.contains("e-input-group")||t.target.closest(".e-list-item"))&&(o=t.target.classList.contains("e-list-item")||t.target.classList.contains("e-filter-parent")||t.target.classList.contains("e-input-group")||t.target.closest(".e-list-item")?t.target.closest(".e-listbox-wrapper"):t.target,(e=this.allowFiltering?o.querySelector(".e-list-parent"):o)&&((i=e.getBoundingClientRect()).y+e.offsetHeight-(a.clientY+36)<1?this.timer=window.setInterval(function(){n.setScrollDown(e,s,!0)},70):a.clientY-36-i.y<1&&(this.timer=window.setInterval(function(){n.setScrollDown(e,s,!1)},70)))),null!==t.target&&this.trigger("drag",this.getDragArgs(t))},e.prototype.setScrollDown=function(t,e,i){t.scrollTop=i?t.scrollTop+e:t.scrollTop-e},e.prototype.stopTimer=function(){window.clearInterval(this.timer)},e.prototype.beforeDragEnd=function(t){this.stopTimer();var e=[];this.dragValue=this.getFormattedValue(t.droppedElement.getAttribute("data-value")),this.value.indexOf(this.dragValue)>-1?t.items=this.getDataByValues(this.value):t.items=this.getDataByValues([this.dragValue]),f(e,t.items),this.trigger("beforeDrop",t),JSON.stringify(t.items)!==JSON.stringify(e)&&(this.customDraggedItem=t.items)},e.prototype.dragEnd=function(t){var e,i,n,s,r,o,a=this,l=this.getFormattedValue(t.droppedElement.getAttribute("data-value")),h=this.getComponent(t.droppedElement),d=this.getDragArgs({target:t.droppedElement},!0),p={previousData:this.dataSource},u={previousData:h.dataSource},g=f({},d,{target:t.target,source:{previousData:this.dataSource},previousIndex:t.previousIndex,currentIndex:t.currentIndex});if(h!==this){var m=f(p,{currentData:this.listData});g=f(g,{source:m,destination:u})}G.isIos&&(this.list.style.overflow="");var v=this.getComponent(t.target);if(v&&0===v.listData.length){var b=v.ulElement.childNodes[0];b&&v.ulElement.removeChild(b)}if(h===this){var C=this.ulElement;e=[].slice.call(this.listData),i=[].slice.call(this.liCollections),n=[].slice.call(this.jsonData),o=[].slice.call(this.sortedData);var I=t.currentIndex,M=t.currentIndex=this.getCurIdx(this,t.currentIndex),S=e.indexOf(this.getDataByValue(l)),x=n.indexOf(this.getDataByValue(l)),w=o.indexOf(this.getDataByValue(l));e.splice(M,0,e.splice(S,1)[0]),o.splice(I,0,o.splice(w,1)[0]),n.splice(M,0,n.splice(x,1)[0]),i.splice(M,0,i.splice(S,1)[0]),this.allowDragAll&&(r=this.value&&Array.prototype.indexOf.call(this.value,l)>-1?this.value:[l],y(this.customDraggedItem)||(r=[],this.customDraggedItem.forEach(function(t){r.push(c(a.fields.value,t))})),r.forEach(function(t){if(t!==l){var s=e.indexOf(a.getDataByValue(t)),r=n.indexOf(a.getDataByValue(t)),h=o.indexOf(a.getDataByValue(t));s>M&&M++,n.splice(M,0,n.splice(r,1)[0]),e.splice(M,0,e.splice(s,1)[0]),o.splice(I,0,o.splice(h,1)[0]),i.splice(M,0,i.splice(s,1)[0]),C.insertBefore(a.getItems()[a.getIndexByValue(t)],C.getElementsByClassName("e-placeholder")[0])}})),this.listData=e,this.jsonData=n,this.sortedData=o,this.liCollections=i}else{var D,E=[].slice.call(this.liCollections),T=t.currentIndex=this.getCurIdx(h,t.currentIndex),A=h.ulElement;e=[].slice.call(h.listData),i=[].slice.call(h.liCollections),n=[].slice.call(h.jsonData),o=[].slice.call(h.sortedData),r=this.value&&Array.prototype.indexOf.call(this.value,l)>-1&&this.allowDragAll?this.value:[l],y(this.customDraggedItem)||(r=[],this.customDraggedItem.forEach(function(t){r.push(c(a.fields.value,t))}));var N=[].slice.call(this.listData),L=[].slice.call(this.sortedData);if(r.forEach(function(r){s=a.getDataByValue(r);var h=a.listData.indexOf(s),c=a.jsonData.indexOf(s),d=a.sortedData.indexOf(s);N.splice(h,1),a.jsonData.splice(c,1),L.splice(d,1),a.listData=N,a.sortedData=L;var p=r===l?t.currentIndex:T;if(e.splice(p,0,s),n.splice(p,0,s),o.splice(p,0,s),i.splice(p,0,E.splice(h,1)[0]),r)D=a.getItems()[a.getIndexByValue(r)];else for(var u=a.getItems(),g=0;g<u.length;g++)if(null===u[g].getAttribute("data-value")&&u[g].classList.contains("e-list-item")){D=u[g];break}D||(D=t.helper),a.removeSelected(a,r===l?[t.droppedElement]:[D]),A.insertBefore(D,A.getElementsByClassName("e-placeholder")[0]),T++}),this.fields.groupBy){var O=this.renderItems(this.listData,this.fields);this.updateListItems(O,this.ulElement),this.setSelection()}if("None"!==h.sortOrder||this.selectionSettings.showCheckbox!==h.selectionSettings.showCheckbox||h.fields.groupBy||h.itemTemplate||this.itemTemplate){var k=It(A,"sortable");O=h.renderItems(e,h.fields);h.updateListItems(O,A),this.setSelection(),k.placeHolderElement&&A.appendChild(k.placeHolderElement),A.appendChild(t.helper),h.setSelection()}this.liCollections=E,h.liCollections=i,h.jsonData=f([],[],n,!1),h.listData=f([],[],e,!1),"None"===h.sortOrder&&(h.sortedData=f([],[],o,!1)),0===this.listData.length&&this.l10nUpdate()}if(this===h){m=f(p,{currentData:e});g=f(g,{source:m})}else{var z=f(u,{currentData:e});g=f(g,{destination:z})}y(this.customDraggedItem)||(g.items=this.customDraggedItem),this.trigger("drop",g);var P=g.elements;if(P.length)for(var j=0;j<P.length;j++)P[j].classList.remove("e-grabbed");this.toolbarSettings.items.length>0?this.updateToolBarState():this.tBListBox&&this.tBListBox.toolbarSettings.items.length>0&&this.tBListBox.updateToolBarState()},e.prototype.updateListItems=function(t,e){e.innerHTML="",e.append.apply(e,t.childNodes)},e.prototype.removeSelected=function(t,e){t.selectionSettings.showCheckbox?e.forEach(function(t){t.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):et(e,qC.selected)},e.prototype.getCurIdx=function(t,e){return t.fields.groupBy&&(e-=[].slice.call(t.ulElement.children).slice(0,e).filter(function(t){return t.classList.contains(qC.group)}).length),e},e.prototype.getComponent=function(t){var e,i="EJS-LISTBOX"===this.element.tagName?ut(t,".e-listbox"):ut(t,".e-listbox-wrapper")&&ut(t,".e-listbox-wrapper").querySelector(".e-listbox");return i&&(e=It(i,this.getModuleName())),e},e.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},e.prototype.listOption=function(e,i){return this.listCurrentOptions=t.prototype.listOption.call(this,e,i),this.listCurrentOptions=f({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions},e.prototype.triggerBeforeItemRender=function(t){t.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:t.item,item:t.curData})},e.prototype.requiredModules=function(){var t=[];return this.selectionSettings.showCheckbox&&t.push({member:"CheckBoxSelection",args:[this]}),t},e.prototype.enableItems=function(t,e,i){var n,s=this;if(void 0===e&&(e=!0),t.forEach(function(t){var r=t;(n=s.findListElement(s.list,"li","data-value",i?r:s.getValueByText(r)))&&(e?(et([n],qC.disabled),n.removeAttribute("aria-disabled")):(tt([n],qC.disabled),n.setAttribute("aria-disabled","true")))}),this.allowFiltering&&this.filterInput&&""!==this.filterInput.value&&this.toolbarSettings.items.length>0){var r=!1;if(this.ulElement.childNodes.forEach(function(t){t.classList.contains("e-disabled")||(r=!0)}),!r)this.list.parentElement.getElementsByClassName("e-listbox-tool")[0].querySelector('[data-value="moveAllTo"]').disabled=!0}},e.prototype.selectItems=function(t,e,i){void 0===e&&(e=!0),e&&!this.selectionSettings.showCheckbox&&"Single"===this.selectionSettings.mode&&this.getSelectedItems().forEach(function(t){t.classList.remove("e-active"),t.removeAttribute("aria-selected"),et([t],qC.selected)}),this.setSelection(t,e,!i),this.updateSelectedOptions();for(var n=[],s=0;s<t.length;s++)for(var r=this.list.querySelectorAll('[aria-selected="true"]'),o=0;o<r.length;o++)t[s]===this.getFormattedValue(r[o].getAttribute("data-value"))&&n.push(r[o]);this.triggerChange(n,null)},e.prototype.selectAll=function(t){void 0===t&&(t=!0),this.selectAllItems(t)},e.prototype.addItems=function(e,i){t.prototype.addItem.call(this,e,i),this.allowFiltering&&""!==this.filterInput.value&&this.filteringAction(this.jsonData,new Gb,this.fields)},e.prototype.removeItems=function(t,e){this.removeItem(t,e)},e.prototype.removeItem=function(t,e){var i=this,n=[],s=this.list.querySelectorAll("."+dj);if(t){t=t instanceof Array?t:[t];var r=this.fields,o=void 0,a={},l=[];f(l,[],this.jsonData);for(var h=[],c=[],d=0;d<l.length;d++){a[l[d]instanceof Object?l[d][r.value]:l[d].toString()]=d}for(var p=0;p<t.length;p++)if(o=t[p]instanceof Object?t[p][r.value]:t[p].toString(),Object.prototype.hasOwnProperty.call(a,o)){var u=a[o];n.push(s[u]),h.push(u),c.push(u)}h.sort(function(t,e){return e-t}).forEach(function(t){i.listData.splice(t,1),i.jsonData.splice(t,1)});for(var g=c.length-1;g>=0;g--)this.updateLiCollection(c[g])}else e=e||0,n.push(s[e]),this.listData.splice(e,1),this.jsonData.splice(e,1),this.updateLiCollection(e);for(d=0;d<n.length;d++)this.ulElement.removeChild(n[d]);0===this.listData.length&&this.l10nUpdate(),this.listData.length!==this.sortedData.length&&(this.sortedData=this.listData),this.value=[],this.updateToolBarState()},e.prototype.getDataByValues=function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.getDataByValue(t[i]));return e},e.prototype.moveUp=function(t){var e=t?this.getElemByValue(t):this.getSelectedItems();this.moveUpDown(!0,!1,e)},e.prototype.moveDown=function(t){var e=t?this.getElemByValue(t):this.getSelectedItems();this.moveUpDown(!1,!1,e)},e.prototype.moveTop=function(t){var e=t?this.getElemByValue(t):this.getSelectedItems();this.moveUpDown(null,!1,e,!0)},e.prototype.moveBottom=function(t){var e=t?this.getElemByValue(t):this.getSelectedItems();this.moveUpDown(!0,!1,e,!1,!0)},e.prototype.moveTo=function(t,e,n){var s=t?this.getElemByValue(t):this.getSelectedItems(),r=n?It(n,i):this.getScopedListBox();this.moveData(this,r,!1,s,e)},e.prototype.moveAllTo=function(t,e){if(this.toolbarAction="moveAllTo",this.listData.length>0){var n=t?It(t,i):this.getScopedListBox();this.moveAllData(this,n,!1,e)}},e.prototype.getDataList=function(){return this.jsonData},e.prototype.getSortedList=function(){var t,e;if(t=e=this.sortedData,this.fields.groupBy){t=[];for(var i=0;i<e.length;i++)e[i].isHeader||t.push(e[i])}return t},e.prototype.getElemByValue=function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.ulElement.querySelector('[data-value ="'+t[i]+'"]'));return e},e.prototype.updateLiCollection=function(t){var e=[].slice.call(this.liCollections);e.splice(t,1),this.liCollections=e},e.prototype.selectAllItems=function(t,e){var i=this;if([].slice.call(this.getItems()).forEach(function(e){if(!e.classList.contains(qC.disabled))if(i.selectionSettings.showCheckbox){var n=e.getElementsByClassName("e-check")[0];(!n&&t||n&&!t)&&(i.notify("updatelist",{li:e,module:"listbox"}),i.maximumSelectionLength>=i.list.querySelectorAll(".e-list-item span.e-check").length&&i.checkMaxSelection())}else t?e.classList.add(qC.selected):e.classList.remove(qC.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){var n=this.list.getElementsByTagName("li"),s=0;if(t){var r=function(){var t=o.getFormattedValue(n[s].getAttribute("data-value"));o.value.some(function(e){return e===t})||o.value.push(o.getFormattedValue(n[s].getAttribute("data-value")))},o=this;for(s=0;s<n.length;s++)r()}else{var a=function(){var t=l.getFormattedValue(n[s].getAttribute("data-value"));l.value=l.value.filter(function(e){return e!==t})},l=this;for(s=0;s<n.length;s++)a()}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),e)},e.prototype.updateMainList=function(){var t=this.mainList.querySelectorAll(".e-list-item"),e=this.ulElement.querySelectorAll(".e-list-item"),i=t.length,n=e.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||i!==n)for(var s=0,r=0,o=0;s<i;){if(this.value)for(;r<this.value.length;r++)t[s].getAttribute("data-value")===this.value[r]&&o++;!o&&this.selectionSettings.showCheckbox&&t[s].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&o&&i!==n?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[s]),s=0):s++,o=0,r=0}},e.prototype.wireEvents=function(){var t=ut(this.element,"form"),e="EJS-LISTBOX"===this.element.tagName?this.element:this.list;K.add(this.list,"click",this.clickHandler,this),K.add(e,"keydown",this.keyDownHandler,this),K.add(e,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&K.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&K.remove(this.list,"scroll",this.setFloatingHeader),t&&K.add(t,"reset",this.formResetHandler,this),window.addEventListener("resize",this.resizeHandler.bind(this))},e.prototype.wireToolbarEvent=function(){this.toolbarSettings.items.length&&K.add(this.getToolElem(),"click",this.toolbarClickHandler,this)},e.prototype.unwireEvents=function(){var t=ut(this.element,"form"),e="EJS-LISTBOX"===this.element.tagName?this.element:this.list;K.remove(this.list,"click",this.clickHandler),K.remove(e,"keydown",this.keyDownHandler),K.remove(e,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&K.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&K.remove(this.getToolElem(),"click",this.toolbarClickHandler),t&&K.remove(t,"reset",this.formResetHandler),window.removeEventListener("resize",this.resizeHandler.bind(this))},e.prototype.clickHandler=function(t){y(ut(t.target,".e-list-item"))||this.selectHandler(t)},e.prototype.checkSelectAll=function(){for(var t=0,e=this.list.querySelectorAll("li."+dj),i=0;i<e.length;i++)e[i].classList.contains("e-disabled")||t++;var n=this.getSelectedItems().length;this.showSelectAll&&t&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:t===n?"check":0===n?"uncheck":"indeterminate"})},e.prototype.getQuery=function(t){var e=t?t.clone():this.query?this.query.clone():new Gb;if(this.allowFiltering){var i=""===this.inputString?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;if(null===n&&(n=this.typeOfData(this.jsonData).typeof),(this.dataSource instanceof dC||"string"!==n)&&"number"!==n){var s=this.fields.text?this.fields.text:"";e.where(s,i,this.inputString,this.ignoreCase,this.ignoreAccent)}else e.where("",i,this.inputString,this.ignoreCase,this.ignoreAccent)}else e=t||(this.query?this.query:new Gb);return e},e.prototype.setFiltering=function(){var t;if(this.initLoad||y(this.filterParent))return this.filterParent=this.createElement("span",{className:uH.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:uH.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),rt([(t=hI.createInput({element:this.filterInput,buttons:[uH.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement)).container],this.filterParent),st([this.filterParent],this.list),ht(this.filterInput,{"aria-disabled":"false","aria-label":"search list item",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",role:"textbox"}),this.height.toString().indexOf("%")<0?tt([this.list],"e-filter-list"):this.height.toString().indexOf("%")>0&&(this.ulElement.style.height=this.ulElement.offsetHeight-this.filterParent.offsetHeight+"px"),this.inputString=this.filterInput.value,this.filterWireEvents(),this.ulElement.style.setProperty("height","calc(100% - "+this.filterParent.offsetHeight+"px)","important"),t},e.prototype.filterWireEvents=function(t){t&&(this.filterInput=t.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+uH.clearIcon),this.clearFilterIconElem&&(K.add(this.clearFilterIconElem,"click",this.clearText,this),t||(this.clearFilterIconElem.style.visibility="hidden")),K.add(this.filterInput,"input",this.onInput,this),K.add(this.filterInput,"keyup",this.KeyUp,this),K.add(this.filterInput,"keydown",this.onKeyDown,this)},e.prototype.selectHandler=function(t,e){var i,n=!0,s=ut(t.target,".e-list-item"),r=[s];if(s&&s.parentElement){if(i=[].slice.call(s.parentElement.children).indexOf(s),this.selectionSettings.showCheckbox?n=!s.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(t.ctrlKey||t.metaKey||G.isDevice)&&this.isSelected(s)?(s.classList.remove(qC.selected),s.removeAttribute("aria-selected"),n=!1):"Multiple"===this.selectionSettings.mode&&(t.ctrlKey||t.metaKey||G.isDevice)||(this.getSelectedItems().forEach(function(t){t.removeAttribute("aria-selected")}),et(this.getSelectedItems(),qC.selected)),t.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?r=[].slice.call(s.parentElement.children).slice(Math.min(i,this.prevSelIdx),Math.max(i,this.prevSelIdx)+1).filter(function(t){return t.classList.contains("e-list-item")}):this.prevSelIdx=[].slice.call(s.parentElement.children).indexOf(s),n?(this.selectionSettings.showCheckbox||tt(r,qC.selected),r.forEach(function(t){t.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",s.id)):r.forEach(function(t){t.setAttribute("aria-selected","false")}),e||!(this.maximumSelectionLength>(this.value&&this.value.length))&&n||!(this.maximumSelectionLength>=(this.value&&this.value.length))&&n||this.maximumSelectionLength<(this.value&&this.value.length)||this.notify("updatelist",{li:s,e:t,module:"listbox"}),this.allowFiltering&&!e){var o=this.getFormattedValue(s.getAttribute("data-value"));if(n){var a=[];f(a,this.value),a.push(o),this.value=a}else this.value=this.value.filter(function(t){return t!==o});document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),t),this.list&&this.checkMaxSelection()}},e.prototype.triggerChange=function(t,e){this.trigger("change",{elements:t,items:this.getDataByElements(t),value:this.value,event:e})},e.prototype.getDataByElems=function(t){for(var e=[],i=t.length,n=0;n<i;n++){var s=t[n].getAttribute("data-value"),r=this.getFormattedValue(s);e.push(this.getDataByValue(r))}return e},e.prototype.getDataByElements=function(t){var e,i=[],n=0;if(!y(this.listData)){var s=this.typeOfData(this.listData).typeof;if("string"===s||"number"===s||"boolean"===s)for(var r=0,o=this.listData;r<o.length;r++){for(var a=o[r],l=n,h=t.length;l<h;l++)if(e=this.getFormattedValue(t[l].getAttribute("data-value")),!y(a)&&a===e){n=l,i.push(a);break}if(t.length===i.length)break}else for(var d=0,p=this.listData;d<p.length;d++){for(a=p[d],l=n,h=t.length;l<h;l++)if(e=this.getFormattedValue(t[l].getAttribute("data-value")),!y(a)&&c(this.fields.value?this.fields.value:"value",a)===e){n=l,i.push(a);break}if(t.length===i.length)break}return i}return null},e.prototype.checkMaxSelection=function(){var t=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox)for(var e=0,i=this.list.getElementsByClassName("e-list-item");e<i.length;e++)i[e].querySelector(".e-frame.e-check")||(t===this.maximumSelectionLength?i[e].classList.add("e-disable"):i[e].classList.contains("e-disable")&&i[e].classList.remove("e-disable"))},e.prototype.toolbarClickHandler=function(t){var e=ut(t.target,"button");if(e){if(this.toolbarAction=e.getAttribute("data-value"),e.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom();break;default:this.trigger("actionBegin",{cancel:!1,items:this.getDataByElems(this.getSelectedItems()),eventName:this.toolbarAction})}}},e.prototype.moveUpDown=function(t,e,i,n,s){var r=this,o=this.getSelectedItems();if(i&&(o=i),!(t&&this.isSelected(this.ulElement.firstElementChild)||!t&&this.isSelected(this.ulElement.lastElementChild))||i){var a=this.getDataByElems(o),l={cancel:!1,items:a,eventName:this.toolbarAction};this.trigger("actionBegin",l),l.cancel||((t?o:o.reverse()).forEach(function(e){var i=Array.prototype.indexOf.call(r.ulElement.querySelectorAll(".e-list-item"),e),o=Array.prototype.indexOf.call(r.ulElement.children,e);n?(lI(r.ulElement,r.ulElement,[o],0),r.changeData(o,0,i,e)):s?(lI(r.ulElement,r.ulElement,[o],r.ulElement.querySelectorAll(".e-list-item").length),r.changeData(o,r.ulElement.querySelectorAll(".e-list-item").length,i,e)):(lI(r.ulElement,r.ulElement,[o],t?o-1:o+2),r.changeData(o,t?o-1:o+1,t?i-1:i+1,e))}),this.trigger("actionComplete",{items:a,eventName:this.toolbarAction}),o[0].focus(),!e&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(t?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}},e.prototype.moveItemTo=function(){this.moveData(this,this.getScopedListBox())},e.prototype.moveItemFrom=function(){this.moveData(this.getScopedListBox(),this)},e.prototype.moveData=function(t,e,i,n,s){var r=[],o=[],a=[],l=[],h=[].slice.call(t.listData),d=[].slice.call(e.listData),p=[].slice.call(t.sortedData),u=[].slice.call(e.sortedData),g=[].slice.call(t.liCollections),m=[],f=[].slice.call(e.liCollections),v=[],b=[],C=t.getSelectedItems();n&&(C=n);var I="None"!==e.sortOrder||e.selectionSettings.showCheckbox!==t.selectionSettings.showCheckbox||e.fields.groupBy||e.itemTemplate||t.itemTemplate;if(t.value=[],C.length){this.removeSelected(t,C);var M,S=Array.prototype.slice.call(t.ulElement.children),x=Array.prototype.slice.call(t.ulElement.querySelectorAll(".e-list-item")),w=t.listData,D=t.sortedData,E=t.jsonData,T={};if(C.length>199)for(var A=0,N=t.listData;A<N.length;A++){var L=N[A];if(!y(L)){var O=t.getFormattedValue(c(t.fields.value?t.fields.value:"value",L));T[O]=L}}C.forEach(function(e){if(C.length<200)M=t.getDataByElems([e])[0];else{var i=e.getAttribute("data-value"),n=t.getFormattedValue(i);M=T[n]}r.push(S.indexOf(e)),m.push(x.indexOf(e)),o.push(w.indexOf(M)),l.push(D.indexOf(M)),a.push(E.indexOf(M))}),"None"!==this.sortOrder?l.forEach(function(e){v.push(t.sortedData[e])}):a.forEach(function(e){v.push(t.jsonData[e])});var k={cancel:!1,items:v,eventName:this.toolbarAction};if(t.trigger("actionBegin",k),k.cancel)return;var z=[];if(m.sort(function(t,e){return t-e}).reverse().forEach(function(t){z.push(g.splice(t,1)[0])}),t.liCollections=g,s){var P=f.splice(0,s);e.liCollections=P.concat(z.reverse()).concat(f)}else e.liCollections=f.concat(z.reverse());if(0===e.listData.length){var j=e.ulElement.childNodes[0];j&&e.ulElement.removeChild(j)}if(o.sort(function(t,e){return e-t}).forEach(function(t){h.splice(t,1)[0]}),l.sort(function(t,e){return e-t}).forEach(function(t){p.splice(t,1)[0]}),a.slice().reverse().forEach(function(e){b.push(t.jsonData.splice(e,1)[0])}),I)if(t.fields.groupBy){var B=t.renderItems(h,t.fields);t.updateListItems(B,t.ulElement)}else C.forEach(function(t){at(t)});else lI(t.ulElement,e.ulElement,r,s),t.trigger("actionComplete",{items:v,eventName:this.toolbarAction});e.mainList.childElementCount!==e.jsonData.length&&(e.mainList=e.ulElement);var H=[].slice.call(e.jsonData);u=[].slice.call(e.sortedData),this.selectNextList(C,m,o,t),i&&this.list.focus(),t.listData=h,t.sortedData=p,s=s||d.length;for(var R=v.length-1;R>=0;R--)d.splice(s,0,v[R]),H.splice(s,0,v[R]),u.splice(s,0,v[R]);if(e.listData=d,e.jsonData=H,e.sortedData=u,I){B=e.renderItems(d,e.fields);e.updateListItems(B,e.ulElement),e.setSelection(),t.trigger("actionComplete",{items:v,eventName:this.toolbarAction})}t.updateSelectedOptions(),0===t.listData.length&&t.l10nUpdate()}if(1===t.value.length&&t.getSelectedItems().length&&(t.value[0]=t.getFormattedValue(t.getSelectedItems()[0].getAttribute("data-value"))),t.liCollections.length===t.ulElement.querySelectorAll(".e-disabled").length&&this.toolbarAction){var V=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0],U="moveFrom"===this.toolbarAction?"moveAllFrom":"moveAllTo";if(V)V.querySelector('[data-value="'+U+'"]').disabled=!0}},e.prototype.selectNextList=function(t,e,i,n){var s,r,o=n.ulElement.querySelectorAll(".e-list-item").length,a=-1;1===t.length&&o&&!n.selectionSettings.showCheckbox&&(r=o<=e[0]?o-1:e[0],s=n.ulElement.querySelectorAll(".e-list-item")[r],(a=n.getValidIndex(s,r,o===i[0]?38:40))>-1&&n.ulElement.querySelectorAll(".e-list-item")[a].classList.add(qC.selected))},e.prototype.moveAllItemTo=function(){this.moveAllData(this,this.getScopedListBox())},e.prototype.moveAllItemFrom=function(){this.moveAllData(this.getScopedListBox(),this)},e.prototype.moveAllData=function(t,e,i,n){var s=[].slice.call(e.listData),r=[].slice.call(e.jsonData),o="None"!==e.sortOrder||e.selectionSettings.showCheckbox!==t.selectionSettings.showCheckbox||e.fields.groupBy||e.itemTemplate||t.itemTemplate,a=[],l=[],h=[];this.removeSelected(t,t.getSelectedItems());var c=[].slice.call(t.listData),d={cancel:!1,items:c,eventName:this.toolbarAction};if(t.trigger("actionBegin",d),!d.cancel){if(0===e.listData.length){var p=e.ulElement.childNodes[0];p&&e.ulElement.removeChild(p)}t.listData.length>0&&(h=Array.apply(null,{length:t.ulElement.childElementCount}).map(Number.call,Number));for(var u=t.ulElement.childNodes,g=t.ulElement.childElementCount,m=[],f=0;f<g;f++){var y=u[f];y.classList.contains("e-disabled")?(a.push(y),null!=this.sortOrder?l.push(t.sortedData[f]):l.push(t.listData[f])):m.push(f)}h=m,lI(t.ulElement,e.ulElement,h,n),t.trigger("actionComplete",{items:c,eventName:this.toolbarAction}),i&&this.list.focus(),n=n||s.length;for(f=0;f<h.length;f++)null!=this.sortOrder?s.splice(n+f,0,t.sortedData[h[f]]):s.splice(n+f,0,t.listData[h[f]]);for(f=0;f<h.length;f++)r.splice(n+f,0,t.jsonData[h[f]]);var v=[];a.length>0?(t.liCollections=a,v=[].slice.call(t.liCollections)):(v=[].slice.call(t.liCollections),t.liCollections=[]);var b=[].slice.call(e.liCollections);if(n){var C=b.splice(0,n);e.liCollections=C.concat(v).concat(b)}else e.liCollections=b.concat(v);t.value=[];var I=(s=(s=s.filter(function(t){return void 0!==t})).filter(function(t){return!0!==t.isHeader})).filter(function(t){return-1===e.jsonData.indexOf(t)});for(f=0;f<I.length;f++)e.jsonData.splice(n+f,0,I[f]);if(e.listData=s,t.listData.length===t.jsonData.length)t.listData=t.sortedData=t.jsonData=l;else if(t.allowFiltering){var M=[];if(a.length>0){for(f=0;f<a.length;f++)M.push(t.getDataByValue(a[f].getAttribute("data-value")));t.listData=t.listData.filter(function(t){return!M.some(function(e){return t===e})})}for(f=0;f<t.listData.length;f++)for(var S=0;S<t.jsonData.length;S++)t.listData[f]===t.jsonData[S]&&t.jsonData.splice(S,1);a.length>0?(t.listData=M,t.sortedData=[]):t.listData=t.sortedData=[]}if(o){var x=e.renderItems(s,e.fields);e.updateListItems(x,e.ulElement)}else e.sortedData=s;if(t.updateSelectedOptions(),a.length>0)this.list.parentElement.getElementsByClassName("e-listbox-tool")[0].querySelector('[data-value="'+this.toolbarAction+'"]').disabled=!0;0===t.listData.length&&0===a.length&&t.l10nUpdate()}},e.prototype.changeData=function(t,e,i,n){var s=[].slice.call(this.listData),r=[].slice.call(this.jsonData),o=[].slice.call(this.sortedData),a=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([n])[0]),l=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([n])[0]),h=[].slice.call(this.liCollections);s.splice(e,0,s.splice(t,1)[0]),r.splice(i,0,r.splice(a,1)[0]),o.splice(e,0,o.splice(l,1)[0]),h.splice(e,0,h.splice(t,1)[0]),this.listData=s,this.jsonData=r,this.liCollections=h,this.sortedData=o},e.prototype.getSelectedItems=function(){var t=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(function(e){t.push(ut(e,".e-list-item"))}):t=[].slice.call(this.ulElement.getElementsByClassName(qC.selected)),t},e.prototype.getScopedListBox=function(){var t,e=this;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(function(i){It(i,e.getModuleName())&&(t=It(i,e.getModuleName()))}),t},e.prototype.getGrabbedItems=function(t){for(var e=!1,i=0;i<this.value.length;i++)if(this.value[i]===this.getFormattedValue(t.target.getAttribute("data-value"))){e=!0;break}if(e)for(i=0;i<this.value.length;i++)for(var n=this.list.querySelectorAll('[aria-selected="true"]'),s=0;s<n.length;s++)this.value[i]===this.getFormattedValue(n[s].getAttribute("data-value"))&&n[s].classList.add("e-grabbed");return this.isAngular?Array.prototype.slice.call(this.element.getElementsByClassName("e-list-parent")[0].querySelectorAll(".e-grabbed")):Array.prototype.slice.call(this.element.nextElementSibling.querySelectorAll(".e-grabbed"))},e.prototype.getDragArgs=function(t,e){var i=this.getGrabbedItems(t);return i.length?e&&i.push(t.target):i=[t.target],{elements:i,event:t.event,items:this.getDataByElems(i)}},e.prototype.onKeyDown=function(t){this.keyDownHandler(t),t.stopPropagation()},e.prototype.keyDownHandler=function(t){if([32,35,36,37,38,39,40,65].indexOf(t.keyCode)>-1&&(!this.allowFiltering||this.allowFiltering&&t.target!==this.filterInput)){if(t.target&&t.target.className.indexOf("e-edit-template")>-1)return;if(t.preventDefault(),32===t.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:t.ctrlKey,shiftKey:t.shiftKey});else if(65===t.keyCode&&t.ctrlKey&&"Multiple"===this.selectionSettings.mode)this.selectAll();else if((38===t.keyCode||40===t.keyCode)&&t.ctrlKey&&t.shiftKey)this.moveUpDown(38===t.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==t.keyCode&&37!==t.keyCode||!t.ctrlKey)37!==t.keyCode&&39!==t.keyCode&&"KeyA"!==t.code&&this.upDownKeyHandler(t);else{var e=this.tBListBox||this.getScopedListBox();39===t.keyCode?t.shiftKey?this.moveAllData(this,e,!0):this.moveData(this,e,!0):t.shiftKey?this.moveAllData(e,this,!0):this.moveData(e,this,!0)}}else this.allowFiltering&&(40!==t.keyCode&&38!==t.keyCode||this.upDownKeyHandler(t))},e.prototype.upDownKeyHandler=function(t){var e=this.ulElement,i=40===t.keyCode||36===t.keyCode?0:e.childElementCount-1,n=e.getElementsByClassName("e-focused")[0]||e.getElementsByClassName(qC.selected)[0];if(n){if(35!==t.keyCode&&36!==t.keyCode&&(i=Array.prototype.indexOf.call(e.children,n),40===t.keyCode?i++:i--,i<0||i>e.childElementCount-1))return;et([n],"e-focused")}var s=e.children[i];if(s){if(-1===(i=this.getValidIndex(s,i,t.keyCode)))return void tt([n],"e-focused");if(e.children[i].focus(),e.children[i].classList.add("e-focused"),t.ctrlKey&&(this.selectionSettings.showCheckbox||!t.shiftKey||36!==t.keyCode&&35!==t.keyCode)||this.selectHandler({target:e.children[i],ctrlKey:t.ctrlKey,shiftKey:t.shiftKey},!0),this.selectionSettings.showCheckbox&&t.ctrlKey&&t.shiftKey&&(36===t.keyCode||35===t.keyCode))for(var r=Array.prototype.indexOf.call(e.children,n),o="Home"===t.code?0:r,a="Home"===t.code?r:e.children.length-1,l=o;l<=a;l++){var h=e.children[l];this.notify("updatelist",{li:h,e:{target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:t.ctrlKey,shiftKey:t.shiftKey},module:"listbox"})}}},e.prototype.KeyUp=function(t){var e=this;if(this.allowFiltering&&t.ctrlKey&&65===t.keyCode)t.preventDefault();else{var i=String.fromCharCode(t.keyCode),n=i.match(/\w/),s=i.match(/[A-Za-z0-9\u00C0-\u024F ]/);if(y(n)&&y(s)||(this.isValidKey=!0),this.isBackSpace=8===t.keyCode,this.isValidKey=8===t.keyCode||46===t.keyCode||this.isValidKey,this.isValidKey&&(this.isValidKey=!1,t.keyCode,this.allowFiltering)){var r={preventDefaultAction:!1,text:this.targetElement(),updateData:function(t,i,n){r.cancel||(e.isFiltered=!0,e.remoteFilterAction=!0,e.preventDefActionFilter=r.preventDefaultAction,e.dataUpdater(t,i,n),e.preventDefActionFilter=!1)},event:t,cancel:!1};this.trigger("filtering",r,function(t){e.isDataFetched=!1,t.cancel||""!==e.filterInput.value&&e.isFiltered||(e.preventDefActionFilter=!1,t.cancel||e.isCustomFiltering||t.preventDefaultAction||(e.inputString=e.filterInput.value,e.filteringAction(e.jsonData,new Gb,e.fields),e.toolbarSettings.items.length>0&&e.updateToolBarState()),e.isFiltered||e.isCustomFiltering||t.preventDefaultAction||e.dataUpdater(e.jsonData,new Gb,e.fields))})}}},e.prototype.filter=function(t,e,i){this.isCustomFiltering=!0,this.filteringAction(t,e,i)},e.prototype.filteringAction=function(t,e,i){this.resetList(t,i,e)},e.prototype.targetElement=function(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],y(this.targetInputElement)?null:this.targetInputElement.value},e.prototype.dataUpdater=function(t,e,i){this.isDataFetched=!1;if(this.targetElement()&&""===this.targetElement().trim()){var n=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.isAngular&&this.itemTemplate&&(n=this.renderItems(this.listData,i)),this.onActionComplete(n,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(t,i,e)},e.prototype.focusOutHandler=function(){var t=this.list.getElementsByClassName("e-focused")[0];t&&t.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()},e.prototype.resizeHandler=function(){!this.list||this.cssClass&&this.cssClass.indexOf("e-horizontal-listbox")>-1||this.list.getElementsByClassName("e-filter-parent").length>0&&this.allowFiltering&&this.ulElement.style.setProperty("height","calc(100% - "+this.filterParent.offsetHeight+"px)","important")},e.prototype.getValidIndex=function(t,e,i){var n=this.ulElement;return(t.classList.contains("e-disabled")||t.classList.contains(qC.group))&&(40===i||36===i?e++:e--),e<0||e===n.childElementCount?-1:(((t=n.childNodes[e]).classList.contains("e-disabled")||t.classList.contains(qC.group))&&(e=this.getValidIndex(t,e,i)),e)},e.prototype.updateSelectedOptions=function(){var t=this,e=[],i=[];if(f(i,this.value),this.getSelectedItems().forEach(function(i){i.classList.contains("e-grabbed")||e.push(t.getFormattedValue(i.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(var n=0;n<e.length;n++)i.indexOf(e[n])>-1||i.push(e[n]);this.setProperties({value:i},!0)}else this.setProperties({value:e},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()},e.prototype.clearSelection=function(t){var e,i=this;(void 0===t&&(t=this.value),this.selectionSettings.showCheckbox)&&this.getSelectedItems().forEach(function(n){e=i.getFormattedValue(n.getAttribute("data-value")),t.indexOf(e)<0&&(n.getElementsByClassName("e-check")[0].classList.remove("e-check"),n.removeAttribute("aria-selected"))})},e.prototype.setSelection=function(t,e,i,n){var s,r,o=this;void 0===t&&(t=this.value),void 0===e&&(e=!0),void 0===i&&(i=!1),void 0===n&&(n=!0),t&&t.forEach(function(t){var a;if("string"==typeof(a=i?o.getValueByText(t):t))if(-1!==a.indexOf("\n")){var l=CSS.escape(a);s=o.list.querySelector('[data-value="'+l+'"]')}else a=a.split("\\").join("\\\\"),s=o.list.querySelector('[data-value="'+a.replace(/"/g,'\\"')+'"]');else s=o.list.querySelector('[data-value="'+a+'"]');s&&(r=o.selectionSettings.showCheckbox&&!s.classList.contains("e-disabled")?s.getElementsByClassName("e-frame")[0].classList.contains("e-check"):s.classList.contains("e-selected"),(!e&&r||e&&!r&&s)&&(o.selectionSettings.showCheckbox&&!s.classList.contains("e-disabled")?(o.notify("updatelist",{li:s,module:"listbox"}),n&&s.focus()):e&&!s.classList.contains("e-disabled")?(s.classList.add(qC.selected),s.setAttribute("aria-selected","true"),n&&s.focus()):(s.classList.remove(qC.selected),s.removeAttribute("aria-selected"))))}),this.updateSelectTag()},e.prototype.updateSelectTag=function(){var t=this.getSelectTag(),e="";if(!y(t)){if(t.innerHTML="",this.value){for(var i=0,n=this.value.length;i<n;i++)e+="<option selected>"+this.value[i]+"</option>";t.innerHTML+=e;for(i=0,n=t.childNodes.length;i<n;i++)t.childNodes[i].setAttribute("value",this.value[i].toString())}this.checkSelectAll()}},e.prototype.checkDisabledState=function(t){return y(t.ulElement)?!(!y(this.dataSource)&&y(this.dataSource.length)):t.ulElement.querySelectorAll(".e-disabled").length>0?t.liCollections.length===t.ulElement.querySelectorAll(".e-disabled").length:0===t.ulElement.querySelectorAll("."+qC.li).length},e.prototype.updateToolBarState=function(){var t=this;if(this.toolbarSettings.items.length){var e=this.getScopedListBox(),i=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach(function(n){var s=i.querySelector('[data-value="'+n+'"]');switch(n){case"moveAllTo":s.disabled=t.checkDisabledState(t);break;case"moveAllFrom":s.disabled=t.checkDisabledState(e);break;case"moveFrom":s.disabled=!e.value||!e.value.length;break;case"moveUp":s.disabled=!(t.value&&t.value.length&&!t.isSelected(t.ulElement.children[0]));break;case"moveDown":s.disabled=!(t.value&&t.value.length&&!t.isSelected(t.ulElement.children[t.ulElement.childElementCount-1]));break;default:s.disabled=!t.value||!t.value.length}})}},e.prototype.setCheckboxPosition=function(){var t=this.list;this.initLoad||"Left"!==this.selectionSettings.checkboxPosition||t.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&t.classList.add("e-right")},e.prototype.showCheckbox=function(t){var e=0,i=this.list.lastElementChild.querySelectorAll("li"),n=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(t){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){var s=new ri(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=s.getConstant("selectAllText"),this.unSelectAllText=s.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]);e<n;e++)i[e].classList.contains("e-list-item")&&i[e].removeChild(i[e].getElementsByClassName("e-checkbox-wrapper")[0]),i[e].hasAttribute("aria-selected")&&i[e].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]},e.prototype.isSelected=function(t){return!y(t)&&(t.classList.contains(qC.selected)||null!==t.querySelector(".e-check"))},e.prototype.getSelectTag=function(){return this.list.getElementsByClassName("e-hidden-select")[0]},e.prototype.getToolElem=function(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]},e.prototype.formResetHandler=function(){this.value=this.initialSelectedOptions},e.prototype.getModuleName=function(){return"listbox"},e.prototype.getPersistData=function(){return this.addOnPersist(["value"])},e.prototype.getLocaleName=function(){return"listbox"},e.prototype.destroy=function(){this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),at(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),t.prototype.destroy.call(this),this.enableRtlElements=[],this.liCollections=null,this.list=null,this.ulElement=null,this.mainList=null,this.spinner=null,this.rippleFun=null,this.itemTemplate&&this.clearTemplate()},e.prototype.onPropertyChanged=function(e,i){var n=this.toolbarSettings.items.length?this.list.parentElement:this.list;t.prototype.onPropertyChanged.call(this,e,i),this.setUpdateInitial(["fields","query","dataSource"],e);for(var s=0,r=Object.keys(e);s<r.length;s++){switch(r[s]){case"cssClass":i.cssClass&&et([n],i.cssClass.split(" ")),e.cssClass&&tt([n],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?this.list.classList.add("e-rtl"):this.list.classList.remove("e-rtl");break;case"value":et(this.list.querySelectorAll("."+qC.selected),qC.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":e.allowDragAndDrop?this.initDraggable():this.ulElement.classList.contains("e-sortable")&&It(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,et([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&hI.setPlaceholder(e.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(It(this.ulElement,"sortable").scope=e.scope),this.toolbarSettings.items.length&&(i.scope&&(It(document.querySelector(i.scope),this.getModuleName()).tBListBox=null),e.scope&&(It(document.querySelector(e.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":var o=void 0,a=e.toolbarSettings.position,l=this.getToolElem();a&&(et([n],["e-right","e-left"]),n.classList.add("e-"+a.toLowerCase()),"Left"===a?n.insertBefore(l,this.list):n.appendChild(l)),e.toolbarSettings.items&&(i.toolbarSettings.items=y(i.toolbarSettings.items)?[]:i.toolbarSettings.items,i.toolbarSettings&&i.toolbarSettings.items.length&&((o=this.list.parentElement).parentElement.insertBefore(this.list,o),at(o)),this.initToolbarAndStyles(),this.wireToolbarEvent());break;case"selectionSettings":var h=e.selectionSettings.showSelectAll,c=e.selectionSettings.showCheckbox;if(!y(h)){if(this.showSelectAll=h,this.showSelectAll){var d=new ri(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=d.getConstant("selectAllText"),this.unSelectAllText=d.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}y(c)||this.showCheckbox(c),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break;case"dataSource":this.isDataSourceUpdate=!0,this.jsonData=[].slice.call(this.dataSource)}}},hH([jt("")],e.prototype,"cssClass",void 0),hH([jt([])],e.prototype,"value",void 0),hH([jt("")],e.prototype,"height",void 0),hH([jt(!0)],e.prototype,"enabled",void 0),hH([jt(!1)],e.prototype,"enablePersistence",void 0),hH([jt(!1)],e.prototype,"allowDragAndDrop",void 0),hH([jt(1e3)],e.prototype,"maximumSelectionLength",void 0),hH([jt(!1)],e.prototype,"allowFiltering",void 0),hH([jt("")],e.prototype,"scope",void 0),hH([jt(!0)],e.prototype,"ignoreCase",void 0),hH([jt(null)],e.prototype,"filterBarPlaceholder",void 0),hH([jt("None")],e.prototype,"sortOrder",void 0),hH([Ut()],e.prototype,"beforeItemRender",void 0),hH([Ut()],e.prototype,"filtering",void 0),hH([Ut()],e.prototype,"select",void 0),hH([Ut()],e.prototype,"change",void 0),hH([Ut()],e.prototype,"beforeDrop",void 0),hH([Ut()],e.prototype,"dragStart",void 0),hH([Ut()],e.prototype,"drag",void 0),hH([Ut()],e.prototype,"drop",void 0),hH([Ut()],e.prototype,"dataBound",void 0),hH([jt(null)],e.prototype,"groupTemplate",void 0),hH([jt("Request failed")],e.prototype,"actionFailureTemplate",void 0),hH([jt(1e3)],e.prototype,"zIndex",void 0),hH([jt(!1)],e.prototype,"ignoreAccent",void 0),hH([Bt({},dH)],e.prototype,"toolbarSettings",void 0),hH([Bt({},cH)],e.prototype,"selectionSettings",void 0),e=i=hH([Ft],e)}(fj),uH={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"},gH=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),mH=function(t,e,i,n){var s,r=arguments.length,o=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(r<3?s(o):r>3?s(e,i,o):s(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o},fH=function(t){function e(e,i){return t.call(this,e,i)||this}return gH(e,t),e.prototype.onPropertyChanged=function(t,e){for(var i=0,n=Object.keys(t);i<n.length;i++){switch(n[i]){case"minLength":this.minLength=t.minLength;break;case"suffixText":this.suffixText=t.suffixText;break;case"allowSpaces":this.allowSpaces=t.allowSpaces;break;case"mentionChar":this.mentionChar=t.mentionChar;break;case"showMentionChar":this.showMentionChar=t.showMentionChar;break;case"requireLeadingSpace":this.requireLeadingSpace=t.requireLeadingSpace;break;case"cssClass":this.updateCssClass(t.cssClass,e.cssClass)}}},e.prototype.updateCssClass=function(t,e){y(e)||(e=e.replace(/\s+/g," ").trim()),y(t)||(t=t.replace(/\s+/g," ").trim()),this.setCssClass(t,[this.inputElement],e),this.popupObj&&this.setCssClass(t,[this.popupObj.element],e)},e.prototype.setCssClass=function(t,e,i){y(i)||""===i||et(e,i.split(" ")),y(t)||""===t||tt(e,t.split(" "))},e.prototype.initializeData=function(){this.isSelected=!1,this.isFiltered=!1,this.beforePopupOpen=!1,this.initRemoteRender=!1,this.isListResetted=!1,this.isPopupOpen=!1,this.isCollided=!1,this.lineBreak=!1,this.isRTE=!1,this.keyEventName="mousedown"},e.prototype.preRender=function(){this.initializeData(),t.prototype.preRender.call(this)},e.prototype.render=function(){var t="string"==typeof this.target;this.inputElement=y(this.target)?this.element:this.checkAndUpdateInternalComponent(t?document.querySelector(this.target):this.target),this.isContentEditable(this.inputElement)&&(this.inputElement.hasAttribute("contenteditable")||this.inputElement.setAttribute("contenteditable","true"),tt([this.inputElement],["e-mention"]),y(this.target)&&tt([this.inputElement],["e-editable-element"])),this.inputElement.setAttribute("role","textbox"),this.inputElement.setAttribute("aria-label","mention"),this.queryString=this.elementValue(),this.wireEvent()},e.prototype.wireEvent=function(){K.add(this.inputElement,"keyup",this.onKeyUp,this),this.bindCommonEvent()},e.prototype.unWireEvent=function(){K.remove(this.inputElement,"keyup",this.onKeyUp),this.unBindCommonEvent()},e.prototype.bindCommonEvent=function(){G.isDevice||this.inputElement.addEventListener("keydown",this.keyDownHandler.bind(this),!this.isRTE)},e.prototype.hideSpinner=function(){this.hideWaitingSpinner()},e.prototype.hideWaitingSpinner=function(){y(this.spinnerElement)||Lc(this.spinnerElement),y(this.spinnerTemplate)||y(this.spinnerTemplateElement)||at(this.spinnerTemplateElement)},e.prototype.checkAndUpdateInternalComponent=function(t){if(!this.isVue&&t.classList.contains("e-richtexteditor"))return t.querySelector(".e-content");if(this.isVue&&"TEXTAREA"===t.nodeName&&t.classList.contains("e-rte-hidden")){var e=t.parentElement;if(e&&e.classList.contains("e-richtexteditor"))return e.querySelector(".e-content")}return t&&t.parentElement&&t.parentElement.classList.contains("e-rte-content")&&(this.isRTE=!0,this.keyEventName="click"),t},e.prototype.showWaitingSpinner=function(){y(this.popupObj)||(y(this.spinnerTemplate)&&y(this.spinnerElement)&&(this.spinnerElement=this.popupObj.element,mc({target:this.spinnerElement,width:G.isDevice?"16px":"14px"},this.createElement),Ac(this.spinnerElement)),y(this.spinnerTemplate)||this.setSpinnerTemplate())},e.prototype.keyDownHandler=function(t){var e=!0;switch(t.keyCode){case 38:t.action=t.altKey?"hide":"up";break;case 40:t.action=t.altKey?"open":"down";break;case 33:t.action="pageUp";break;case 34:t.action="pageDown";break;case 36:t.action="home";break;case 35:t.action="end";break;case 9:t.action=t.shiftKey?"close":"tab";break;case 27:t.action="escape";break;case 32:t.action="space";break;case 13:t.action="enter";break;default:e=!1}e&&this.keyActionHandler(t)},e.prototype.keyActionHandler=function(t){var e="down"===t.action||"up"===t.action||"pageUp"===t.action||"pageDown"===t.action||"home"===t.action||"end"===t.action,i="tab"===t.action||"close"===t.action;if(void 0!==this.list||this.isRequested||i||"escape"===t.action||"space"===t.action||this.mentionChar.charCodeAt(0)!==this.getLastLetter(this.getTextRange()).charCodeAt(0)||this.renderList(),!(y(this.list)||!y(this.liCollections)&&e&&0===this.liCollections.length||this.isRequested))switch("escape"===t.action&&t.preventDefault(),this.isSelected="escape"!==t.action&&this.isSelected,t.action){case"down":case"up":this.isUpDownKey=!0,this.updateUpDownAction(t);break;case"tab":if(this.isPopupOpen){t.preventDefault();var n=this.list.querySelector("."+oj);n&&(this.isSelected=!0,this.setSelection(n,t)),this.isPopupOpen&&this.hidePopup(t)}break;case"enter":this.isPopupOpen&&(t.preventDefault(),this.popupObj&&this.popupObj.element.contains(this.selectedLI)&&this.updateSelectedItem(this.selectedLI,t,!1,!0));break;case"escape":this.isPopupOpen&&this.hidePopup(t)}},e.prototype.updateUpDownAction=function(t){if(!this.fields.disabled||!this.list||0!==this.list.querySelectorAll(".e-list-item:not(.e-disabled)").length){var e,i=this.list.querySelector("."+cj);if(this.isSelectFocusItem(i))this.setSelection(i,t);else if(!y(this.liCollections)){var n=this.list.querySelector("."+oj);if(!y(n)){var s=this.getFormattedValue(n.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(s)}var r,o="down"===t.action?this.activeIndex+1:this.activeIndex-1;r="down"===t.action&&y(this.activeIndex)?0:this.liCollections.length-1,o=o<0?this.liCollections.length-1:o===this.liCollections.length?0:o;var a=y(this.activeIndex)?this.liCollections[r]:this.liCollections[o];y(a)||this.setSelection(a,t)}for(o=0;o<this.liCollections.length;o++)if(this.liCollections[o].classList.contains(cj)||this.liCollections[o].classList.contains(oj)){e=o;break}null!=e&&this.isDisabledElement(this.liCollections[e])&&this.updateUpDownAction(t),this.isPopupOpen&&t.preventDefault()}},e.prototype.isSelectFocusItem=function(t){return!y(t)},e.prototype.unBindCommonEvent=function(){G.isDevice||this.inputElement.removeEventListener("keydown",this.keyDownHandler.bind(this),!this.isRTE)},e.prototype.onKeyUp=function(t){var e;if(this.isUpDownKey&&this.isPopupOpen&&229===t.keyCode)this.isUpDownKey=!1;else{this.isTyped="Enter"!==t.code&&"Space"!==t.code&&"ArrowDown"!==t.code&&"ArrowUp"!==t.code;var i=!(!document.activeElement.parentElement||!document.activeElement.parentElement.querySelector(".e-rte-image"));document.activeElement===this.inputElement||i||this.inputElement.focus(),this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange(),e=this.range.startContainer.textContent.split(""));var n=this.getTextRange(),s=new RegExp(this.mentionChar.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"\\s"),r=!n||!s.test(n),o=this.getLastLetter(n),a=n?n.charAt(Math.max(0,n.indexOf(this.mentionChar)-1)):"";this.allowSpaces||(r&&n&&n.includes(this.mentionChar)&&""!==n.split(this.mentionChar).pop()&&(!this.requireLeadingSpace||this.requireLeadingSpace&&(" "===a||0===n.indexOf(this.mentionChar)))&&(o=this.mentionChar+n.split(this.mentionChar).pop()),!this.requireLeadingSpace&&o&&o.includes(this.mentionChar)&&(o=this.mentionChar+o.split(this.mentionChar).pop()));var l=this.mentionChar.toString()+this.mentionChar.toString(),h=new RegExp(this.mentionChar.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),c=new RegExp("[a-zA-Z]","g");"Shift"!==t.key&&37!==t.keyCode&&39!==t.keyCode&&(this.beforePopupOpen&&this.isPopupOpen&&o===l?this.hidePopup():!n||!o||!o.includes(this.mentionChar)&&!this.requireLeadingSpace&&!this.allowSpaces||"Enter"===t.code||27===t.keyCode||o.match(h)&&o.match(h).length>1||this.isContentEditable(this.inputElement)&&this.range.startContainer&&this.range.startContainer.previousElementSibling&&"BR"!==this.range.startContainer.previousElementSibling.tagName&&this.range.startContainer.textContent.split("").length>0&&(1===e.length||-1===e[e.length-2].indexOf("")||1===this.range.startContainer.nodeType)?r&&this.isPopupOpen&&this.allowSpaces&&n&&""!==n.trim()&&c.test(n)&&-1!==n.indexOf(this.mentionChar)&&!this.isMatchedText()&&n.length>1&&" "!==n.replace(/\u00A0/g," ").charAt(n.length-2)&&this.list&&this.list.querySelectorAll("ul").length>0&&"Enter"!==t.code?(this.queryString=n.substring(n.lastIndexOf(this.mentionChar)+1).replace("\xa0"," "),this.searchLists(t)):this.requireLeadingSpace&&(!this.isPopupOpen||this.allowSpaces&&o||"ArrowDown"===t.code||"ArrowUp"===t.code)?"Backspace"!==t.key&&"Delete"!==t.key||!this.range||this.range.startOffset===this.range.endOffset||this.range.deleteContents():(this.hidePopup(),this.lineBreak=!0):(o.includes(this.mentionChar)&&(this.queryString=this.requireLeadingSpace?o.replace(this.mentionChar,""):o.substring(o.lastIndexOf(this.mentionChar)+1).trim()),this.mentionChar.charCodeAt(0)!==o.charCodeAt(0)||""===this.queryString||38===t.keyCode||40===t.keyCode||this.lineBreak?(this.requireLeadingSpace?0===o.indexOf(this.mentionChar):o.includes(this.mentionChar))&&!this.isPopupOpen&&8!==t.keyCode&&(!this.popupObj||y(this.target)&&!document.body.contains(this.popupObj.element)||!y(this.target)&&document.body.contains(this.popupObj.element))?(this.initRemoteRender&&this.list&&this.list.classList.contains("e-nodata")&&this.searchLists(t),this.resetList(this.dataSource,this.fields),y(this.list)&&this.initValue(),!this.isPopupOpen&&38!==t.keyCode&&40!==t.keyCode&&this.queryString.length>=this.minLength&&(this.didPopupOpenByTypingInitialChar=!0,this.showPopup(),this.initRemoteRender&&0===this.list.querySelectorAll("li").length&&this.showWaitingSpinner(),this.lineBreak=!1)):this.allowSpaces&&""!==this.queryString&&n&&""!==n.trim()&&n.replace("\xa0"," ").lastIndexOf(" ")<n.length-1&&38!==t.keyCode&&40!==t.keyCode&&8!==t.keyCode&&(this.mentionChar.charCodeAt(0)===o.charCodeAt(0)||this.liCollections&&this.liCollections.length>0)?(this.queryString=n.substring(n.lastIndexOf(this.mentionChar)+1).replace("\xa0"," "),this.searchLists(t)):""===this.queryString&&this.isPopupOpen&&38!==t.keyCode&&40!==t.keyCode&&this.mentionChar.charCodeAt(0)===o.charCodeAt(0)&&(this.searchLists(t),this.isListResetted||this.resetList(this.dataSource,this.fields)):(this.searchLists(t),!this.isPopupOpen&&this.queryString.length>=this.minLength&&(this.isContentEditable(this.inputElement)?this.isContentEditable(this.inputElement)&&this.range&&this.range.startContainer!==this.inputElement&&9!==t.keyCode&&this.showPopup():this.showPopup())),this.isListResetted=!1))}},e.prototype.isMatchedText=function(){for(var t=!1,e=0;e<(this.liCollections&&this.liCollections.length);e++)this.getTextRange()&&this.getTextRange().substring(this.getTextRange().lastIndexOf(this.mentionChar)+1).replace("\xa0"," ").trim()===this.liCollections[e].getAttribute("data-value").toLowerCase()&&(t=!0);return t},e.prototype.getCurrentRange=function(){return this.range=this.inputElement.ownerDocument.getSelection().getRangeAt(0),this.range},e.prototype.performFiltering=function(t){var e=this,i={preventDefaultAction:!1,text:this.queryString,updateData:function(t,n,s){i.cancel||(e.isFiltered=!0,e.filterAction(t,n,s))},cancel:!1};this.trigger("filtering",i,function(t){t.cancel||e.isFiltered||t.preventDefaultAction||e.filterAction(e.dataSource,null,e.fields)})},e.prototype.searchLists=function(e){if(this.isDataFetched=!1,y(this.list)&&(t.prototype.render.call(this),this.unWireListEvents(),this.wireListEvents()),"mousedown"!==e.type&&(40===e.keyCode||38===e.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields);this.isSelected=!1,this.activeIndex=null,""!==this.queryString&&this.debounceDelay>0?this.debouncedFiltering(e,this.debounceDelay):this.performFiltering(e)},e.prototype.filterAction=function(t,e,i){this.beforePopupOpen=!0,this.queryString.length>=this.minLength?(this.resetList(t,i,e),this.isListResetted=!0):(this.isPopupOpen&&this.hidePopup(),this.beforePopupOpen=!1),this.setDataIndex(),this.renderReactTemplates()},e.prototype.onActionComplete=function(e,i,n,s){if(t.prototype.onActionComplete.call(this,e,i,n),this.isActive){if(!y(e))ht(e,{id:this.inputElement.id+"_options",role:"listbox","aria-hidden":"false"}),this.isRTE&&this.cssClass&&this.cssClass.indexOf("e-slash-menu")>-1&&(e.id=this.inputElement.id+"_slash_menu_options");var r=this.fields.disabled?e.querySelector("."+dj+":not(.e-disabled)"):e.querySelector("."+dj);if(r){r.classList.add(oj),this.selectedLI=r;var o=this.getFormattedValue(r.getAttribute("data-value"));this.selectEventCallback(r,this.getDataByValue(o),o,!0)}this.beforePopupOpen&&this.isPopupOpen&&(y(this.popupObj.element)||this.popupObj.element.remove(),this.renderPopup())}},e.prototype.setDataIndex=function(){for(var t=0;this.liCollections&&t<this.liCollections.length;t++)this.liCollections[t].setAttribute("data-index",t.toString())},e.prototype.listOption=function(e,i){var n=this,s=t.prototype.listOption.call(this,e,i);if(y(s.itemCreated))s.itemCreated=function(t){n.highlight&&(n.inputElement.tagName===n.getNgDirective()&&n.itemTemplate?setTimeout(function(){bB(t.item,n.queryString,n.ignoreCase,n.filterType)},0):bB(t.item,n.queryString,n.ignoreCase,n.filterType))};else{var r=s.itemCreated;s.itemCreated=function(t){n.highlight&&bB(t.item,n.queryString,n.ignoreCase,n.filterType),r.apply(n,[t])}}return s},e.prototype.elementValue=function(){return this.isContentEditable(this.inputElement)?this.inputElement.textContent.replace(this.mentionChar,""):this.inputElement.value.replace(this.mentionChar,"")},e.prototype.getQuery=function(t){var e=t?t.clone():this.query?this.query.clone():new Gb,i=""!==this.queryString||y(this.elementValue())?this.filterType:"equal",n=""!==this.queryString||y(this.elementValue())?this.queryString:this.elementValue();if(this.isFiltered)return e;if(null!==this.queryString&&""!==this.queryString){var s=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof dC||"string"!==s)&&"number"!==s){var r=y(this.fields.text)?"":this.fields.text;e.where(r,i,n,this.ignoreCase,this.ignoreAccent)}else e.where("",i,n,this.ignoreCase,this.ignoreAccent)}if(!y(this.suggestionCount)){if(25!==this.suggestionCount)for(var o=0;o<e.queries.length;o++)"onTake"===e.queries[o].fn&&e.queries.splice(o,1);e.take(this.suggestionCount)}return e},e.prototype.renderHightSearch=function(){if(this.highlight)for(var t=0;t<this.liCollections.length;t++){this.ulElement.querySelector(".e-active")||(IB(this.liCollections[t]),bB(this.liCollections[t],this.queryString,this.ignoreCase,this.filterType))}},e.prototype.getTextRange=function(){var t;if(this.isContentEditable(this.inputElement)){if(this.range){var e=this.range.startContainer;if(!y(e)){var i=e.textContent,n=this.range.startOffset;i&&n>=0&&(t=i.substring(0,n))}}}else{var s=this.inputElement;if(!y(s)){var r=s.selectionStart;s.value&&r>=0&&(t=s.value.substring(0,r))}}return t},e.prototype.getLastLetter=function(t){if(y(t))return"";var e=(t.indexOf("\u200b")>-1?t.replace(/\u200B/g,"").replace(/\u00A0/g," "):t.replace(/\u00A0/g," ")).split(/\s+/);return e[e.length-1].trim()},e.prototype.isContentEditable=function(t){return t&&"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName},e.prototype.showPopup=function(){this.beforePopupOpen=!0,document.activeElement!==this.inputElement&&this.inputElement.focus(),this.queryString=this.didPopupOpenByTypingInitialChar?this.queryString:"",this.didPopupOpenByTypingInitialChar=!1,this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange()),this.isTyped||this.resetList(this.dataSource,this.fields),y(this.list)&&this.initValue(),this.renderPopup(),ht(this.inputElement,{"aria-activedescendant":this.selectedElementID}),null==this.selectedElementID&&this.inputElement.removeAttribute("aria-activedescendant")},e.prototype.hidePopup=function(t){this.removeSelection(),this.closePopup(0,t)},e.prototype.closePopup=function(t,e){var i=this;if(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){K.remove(document,"mousedown",this.onDocumentClick),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant"),this.beforePopupOpen=!1;var n={name:"FadeOut",duration:100,delay:t||0},s={popup:this.popupObj,cancel:!1,animation:n,event:e||null};this.trigger("closed",s,function(t){!t.cancel&&i.popupObj&&(i.isPopupOpen?i.popupObj.hide(new qt(t.animation)):i.destroyPopup())})}},e.prototype.renderPopup=function(){var t=this;this.trigger("beforeOpen",{cancel:!1},function(e){if(e.cancel)t.beforePopupOpen=!1;else{var i,n;if(y(t.target)?i=t.createElement("div",{id:t.inputElement.id+"_popup",className:"e-mention e-popup "+(null!=t.cssClass?t.cssClass:"")}):(i=t.element,null!=t.cssClass&&tt([i],t.cssClass.split(" "))),t.isRTE&&t.cssClass&&t.cssClass.indexOf("e-slash-menu")>-1?i.id=t.inputElement.id+"_slash_menu_popup":y(t.target)||(i.id=t.inputElement.id+"_popup"),t.listHeight=S(t.popupHeight),!y(t.list.querySelector("li"))&&!t.initRemoteRender){var s=t.list.querySelector("."+cj);if(!y(s)){t.selectedLI=s;var r=t.getFormattedValue(s.getAttribute("data-value"));t.selectEventCallback(s,t.getDataByValue(r),r,!0)}}if(rt([t.list],i),t.inputElement.parentElement){var o=t.inputElement.parentElement.closest(".e-richtexteditor");o&&i.firstElementChild&&i.firstElementChild.childElementCount>0&&(i.firstElementChild.setAttribute("aria-owns",o.id),tt([i],"e-rte-elements"))}t.popupObj&&document.body.contains(t.popupObj.element)&&(document.contains(i)||!y(t.target))||document.body.appendChild(i),i.style.visibility="hidden",t.setHeight(i);t.initializePopup(i,0,0),t.checkCollision(i),i.style.visibility="visible";var a=i.parentElement.offsetWidth-i.offsetWidth,l=i.offsetHeight;tt([i],["e-mention","e-popup","e-popup-close"]),y(t.list)||(t.unWireListEvents(),t.wireListEvents()),t.selectedElementID=t.selectedLI?t.selectedLI.id:null,ht(t.inputElement,{"aria-owns":t.inputElement.id+"_options","aria-activedescendant":t.selectedElementID}),null==t.selectedElementID&&t.inputElement.removeAttribute("aria-activedescendant");t.beforePopupOpen=!0;var h={popup:t.popupObj,cancel:!1,animation:{name:"FadeIn",duration:100}};t.trigger("opened",h,function(e){if(e.cancel)t.beforePopupOpen=!1,t.destroyPopup();else{if(t.renderReactTemplates(),t.popupObj&&t.popupObj.show(new qt(e.animation),1e3===t.zIndex?t.inputElement:null),y(t.getTriggerCharPosition()))return;n=t.getCoordinates(t.inputElement,t.getTriggerCharPosition()),t.isCollided?(t.collision.length>0&&t.collision.indexOf("right")>-1&&-1===t.collision.indexOf("bottom")?i.style.cssText="top: ".concat(n.top.toString(),"px;\n left: ").concat(a.toString(),"px;\nposition: absolute;\n display: block;"):t.collision&&t.collision.length>0&&t.collision.indexOf("bottom")>-1&&-1===t.collision.indexOf("right")?(i.style.left=S(n.left),i.style.top=S(n.top-parseInt(l.toString(),10))):t.collision&&t.collision.length>0&&t.collision.indexOf("bottom")>-1&&t.collision.indexOf("right")>-1?(i.style.left=S(a),i.style.top=S(n.top-parseInt(l.toString(),10))):(i.style.left=S(n.left),i.style.top=S(n.top-parseInt(t.popupHeight.toString(),10))),t.isCollided=!1,t.collision=[]):i.style.cssText="top: ".concat(n.top.toString(),"px;\n left: ").concat(n.left.toString(),"px;\nposition: absolute;\n display: block;"),i.style.width="100%"===t.popupWidth||y(t.popupWidth)?"auto":S(t.popupWidth),t.setHeight(i),i.style.zIndex=1e3===t.zIndex?to(i).toString():t.zIndex.toString()}})}})},e.prototype.setHeight=function(t){"auto"!==this.popupHeight&&this.list?(this.list.style.maxHeight=(parseInt(this.listHeight,10)-2).toString()+"px",t.style.maxHeight=S(this.popupHeight)):t.style.height="auto"},e.prototype.checkCollision=function(t){if(!G.isDevice||G.isDevice&&"mention"!==this.getModuleName()){var e=this.getCoordinates(this.inputElement,this.getTriggerCharPosition());this.collision=Sr(t,null,e.left,e.top),this.collision.length>0&&(t.style.marginTop=-parseInt(getComputedStyle(t).marginTop,10)+"px",this.isCollided=!0),this.popupObj.resolveCollision()}},e.prototype.getTriggerCharPosition=function(){var t,e=this.getTextRange();if(null!=e){t=0;var i=e.lastIndexOf(this.mentionChar);i>=t&&(t=i)}return t||0},e.prototype.initializePopup=function(t,e,i){var n=this;this.popupObj=new Jr(t,{width:this.setWidth(),targetType:"relative",relateTo:this.inputElement,collision:{X:"flip",Y:"flip"},offsetY:e,enableRtl:this.enableRtl,offsetX:i,position:{X:"left",Y:"bottom"},actionOnScroll:"hide",zIndex:this.zIndex,close:function(){n.destroyPopup()},open:function(){K.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0,n.setDataIndex()}})},e.prototype.setWidth=function(){var t=S(this.popupWidth);t.indexOf("%")>-1&&(t=(this.inputElement.offsetWidth*parseFloat(t)/100).toString()+"px");return t},e.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.popupObj.destroy(),y(this.target)?at(this.popupObj.element):(this.popupObj.element.innerHTML="",this.popupObj.element.removeAttribute("style"),this.popupObj.element.removeAttribute("aria-disabled")),this.list.classList.contains("e-nodata")&&(this.list=null)},e.prototype.onDocumentClick=function(t){var e=t.target;!y(this.popupObj)&&ut(e,"#"+this.popupObj.element.id)||this.hidePopup(t)},e.prototype.getCoordinates=function(t,e){var i,n,s,r,o,a,l;if(this.isContentEditable(this.inputElement)){var h=this.getTriggerCharPosition();r=this.range,s=document.createRange(),this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.mentionChar)?(s.setStart(r.startContainer,h),s.setEnd(r.startContainer,h)):(s.setStart(r.startContainer,r.startOffset),s.setEnd(r.startContainer,r.endOffset)),this.isTyped=!1,s.collapse(!1),l=0===s.getBoundingClientRect().top?s.startContainer.getClientRects()[0]:s.getBoundingClientRect()}else i=this.createElement("div",{className:"e-form-mirror-div"}),document.body.appendChild(i),a=getComputedStyle(t),i.style.position="absolute",i.style.visibility="hidden",["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"].forEach(function(t){i.style[t]=a[t]}),i.textContent=t.value.substring(0,e),"INPUT"===this.inputElement.nodeName&&(i.textContent=i.textContent.replace(/\s/g,"\xa0")),(n=this.createElement("span")).textContent=t.value.substring(e)||".",i.appendChild(n),l=t.getBoundingClientRect();var c=l.top,d=l.left,p=document.querySelectorAll("iframe");if(p.length>0)for(var u=0;u<p.length;u++){var g=p[u];if(g.contentDocument&&g.contentDocument.contains(t)){var m=g.getBoundingClientRect();c+=m.top,d+=m.left}}var f=document.documentElement,v=(window.pageXOffset||f.scrollLeft)-(f.clientLeft||0),b=(window.pageYOffset||f.scrollTop)-(f.clientTop||0),C=0;if(!y(s)&&0===s.getBoundingClientRect().top)for(u=0;u<this.range.startContainer.childNodes.length;u++)if(this.range.startContainer.childNodes[u].nodeType!==Node.TEXT_NODE&&""!==this.range.startContainer.childNodes[u].textContent.trim())C+=this.range.startContainer.childNodes[u].getClientRects()[0].width;else if(""!==this.range.startContainer.childNodes[u].textContent){var I=document.createElement("span");I.innerHTML=this.range.startContainer.childNodes[u].nodeValue,document.body.appendChild(I);var M=I.offsetWidth;document.body.removeChild(I),C+=M}return this.isContentEditable(this.inputElement)?o=this.collision&&this.collision.length>0&&this.collision.indexOf("right")>-1&&-1===this.collision.indexOf("bottom")?{top:c+b+parseInt(getComputedStyle(this.inputElement).fontSize,10),left:d+v+C}:{top:c+b+parseInt(getComputedStyle(this.inputElement).fontSize,10)-(this.isCollided?10:0),left:d+v+C}:(o={top:c+b+n.offsetTop+parseInt(a.borderTopWidth,10)+parseInt(a.fontSize,10)+3-t.scrollTop-(this.isCollided?10:0),left:d+v+n.offsetLeft+parseInt(a.borderLeftWidth,10)},document.body.removeChild(i)),o},e.prototype.initValue=function(){this.isDataFetched=!1,this.renderList(),this.dataSource instanceof dC?this.initRemoteRender=!0:this.updateValues()},e.prototype.updateValues=function(){var t=this.list.querySelector("."+cj);y(t)||this.setSelection(t,null)},e.prototype.renderList=function(){t.prototype.render.call(this),this.unWireListEvents(),this.wireListEvents()},e.prototype.wireListEvents=function(){K.add(this.list,this.keyEventName,this.onMouseClick,this),K.add(this.list,"mouseover",this.onMouseOver,this),K.add(this.list,"mouseout",this.onMouseLeave,this)},e.prototype.unWireListEvents=function(){K.remove(this.list,this.keyEventName,this.onMouseClick),K.remove(this.list,"mouseover",this.onMouseOver),K.remove(this.list,"mouseout",this.onMouseLeave)},e.prototype.onMouseClick=function(t){var e=ut(t.target,"."+dj);if(this.isValidLI(e)&&!this.isDisabledElement(e)){this.isSelected=!0,this.setSelection(e,t);this.closePopup(100,t),this.inputElement.focus(),this.isRTE||t.preventDefault()}},e.prototype.updateSelectedItem=function(t,e,i,n){var s=this;this.removeSelection(),t.classList.add(oj),this.removeHover();var r=this.getFormattedValue(t.getAttribute("data-value")),o=this.getDataByValue(r);if(i||y(e)||"down"===e.action||"up"===e.action)this.selectEventCallback(t,o,r),n&&this.setSelectOptions(t,e);else{var a=this.detachChanges(o);this.isSelected=!0;var l={e,item:t,itemData:a,isInteracted:!!e,cancel:!1};this.trigger("select",l,function(i){i.cancel?(t.classList.remove(oj),s.isSelected=!1,s.isSelectCancel=!0):(s.selectEventCallback(t,o,r),n&&s.setSelectOptions(t,e))})}},e.prototype.setSelection=function(t,e){this.isValidLI(t)&&(!t.classList.contains(oj)||this.isPopupOpen&&this.isSelected&&t.classList.contains(oj))?this.updateSelectedItem(t,e,!1,!0):this.setSelectOptions(t,e)},e.prototype.setSelectOptions=function(t,e){this.list&&this.removeHover(),this.previousSelectedLI=y(this.selectedLI)?null:this.selectedLI,this.selectedLI=t,this.isPopupOpen&&!y(this.selectedLI)&&this.setScrollPosition(e),(!e||38!==e.keyCode&&40!==e.keyCode)&&!y(e)&&this.setValue(e)},e.prototype.setScrollPosition=function(t){if(y(t))this.scrollBottom(!0);else switch(t.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},e.prototype.scrollBottom=function(t){if(!y(this.selectedLI)){var e=this.list.offsetHeight,i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,n=this.list.scrollTop+i-e;n=t?n+2*parseInt(getComputedStyle(this.list).paddingTop,10):n;var s=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:(i>e||!(s>0&&this.list.offsetHeight>s))&&(this.list.scrollTop=n)}},e.prototype.scrollTop=function(){if(!y(this.selectedLI)){var t=y(this.fields.groupBy)||y(this.fixedHeaderElement)?this.selectedLI.offsetTop-this.list.scrollTop:this.selectedLI.offsetTop-(this.list.scrollTop+this.fixedHeaderElement.offsetHeight);t=this.fields.groupBy&&t;var e=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:t<0?this.list.scrollTop=this.list.scrollTop+t:e>0&&this.list.offsetHeight>e||(this.list.scrollTop=this.selectedLI.offsetTop)}},e.prototype.selectEventCallback=function(t,e,i,n){this.previousItemData=y(this.itemData)?null:this.itemData,this.item=t,this.itemData=e;var s=this.list.querySelector("."+cj);s&&et([s],cj),n&&tt([t],oj),t.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(i)},e.prototype.detachChanges=function(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):t},e.prototype.setValue=function(t){return this.isReact?(y(this.displayTemplate)?this.updateMentionValue(t):this.setDisplayTemplate(t),!0):(y(this.displayTemplate)||this.setDisplayTemplate(),this.updateMentionValue(t),!0)},e.prototype.updateMentionValue=function(t){var e,i,n,s,r=this.getItemData(),o="string"==typeof this.suffixText?this.suffixText:"",a=this.inputElement.ownerDocument.getSelection(),l=this.getTriggerCharPosition();if(this.isSelectCancel)this.isSelectCancel=!1;else if(null!==r.text&&(e=this.mentionVal(r.text)),this.isContentEditable(this.inputElement)){i=this.getTriggerCharPosition()+this.mentionChar.length,this.range&&this.range.startContainer.textContent.trim()!==this.mentionChar&&(i=this.range.endOffset),s=this.range,n=document.createRange(),this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.mentionChar)||this.getTextRange()&&this.getTextRange().trim()===this.mentionChar?(n.setStart(s.startContainer,l),n.setEnd(s.startContainer,i)):""!==s.commonAncestorContainer.textContent.trim()&&!y(s.commonAncestorContainer.textContent.trim())&&this.getTextRange()&&-1!==this.getTextRange().lastIndexOf(this.mentionChar)?(n.setStart(s.startContainer,s.startOffset-1),n.setEnd(s.startContainer,s.endOffset-1)):(n.setStart(s.startContainer,s.startOffset),n.setEnd(s.startContainer,s.endOffset)),this.isTyped=!1,n.deleteContents(),n.startContainer.parentElement.normalize();var h=this.createElement("div");h.innerHTML=e;for(var c=document.createDocumentFragment(),d=void 0,p=void 0;d=h.firstChild;)p=c.appendChild(d);if(n.insertNode(c),p&&(n=n.cloneRange(),this.isRTE&&3===p.nodeType?n.setStart(p,p.textContent.length):n.setStartAfter(p),n.collapse(!0),a.removeAllRanges(),a.addRange(n)),this.isPopupOpen&&this.hidePopup(),!y(t.pointerType)&&"mouse"===t.pointerType){var u=new CustomEvent("content-changed",{detail:{click:!0}});this.inputElement.dispatchEvent(u)}this.onChangeEvent(t)}else{var g=this.inputElement,m=this.getTextRange().substring(l+this.mentionChar.length,this.getTextRange().length);e+=o,i=l+this.mentionChar.length,i+=m.length,g.value=g.value.substring(0,l)+e+g.value.substring(i,g.value.length),g.selectionStart=l+e.length,g.selectionEnd=l+e.length,this.isPopupOpen&&this.hidePopup(),this.onChangeEvent(t)}},e.prototype.mentionVal=function(t){var e=this.showMentionChar?this.mentionChar:"";return y(this.displayTemplate)||y(this.displayTempElement)||(t=this.displayTempElement.innerHTML),this.isContentEditable(this.inputElement)?G.isAndroid?'<span contenteditable="true" class="e-mention-chip">'+e+t+"</span>".concat("string"==typeof this.suffixText?this.suffixText:"&#8203;"):'<span contenteditable="false" class="e-mention-chip">'+e+t+"</span>".concat("string"==typeof this.suffixText?this.suffixText:"&#8203;"):e+t},e.prototype.setDisplayTemplate=function(t){var e=this;this.isReact&&(this.clearTemplate(["displayTemplate"]),this.displayTempElement&&(at(this.displayTempElement),this.displayTempElement=null)),this.displayTempElement||(this.displayTempElement=this.createElement("div")),this.isReact||(this.displayTempElement.innerHTML="");var i=Hi(this.displayTemplate)(this.itemData,this,"displayTemplate",this.displayTemplateId,this.isStringTemplate,null,this.displayTempElement);i&&i.length>0&&rt(i,this.displayTempElement),this.isReact?this.renderTemplates(function(){e.updateMentionValue(t)}):this.renderTemplates()},e.prototype.renderTemplates=function(t){this.renderReactTemplates(t)},e.prototype.setSpinnerTemplate=function(){var t=this;this.isReact&&(this.clearTemplate(["spinnerTemplate"]),this.spinnerTemplateElement&&(at(this.spinnerTemplateElement),this.spinnerTemplateElement=null)),this.spinnerTemplateElement||(this.spinnerTemplateElement=this.createElement("div")),this.isReact||(this.spinnerTemplateElement.innerHTML="");var e=Hi(this.spinnerTemplate)(null,this,"spinnerTemplate",this.spinnerTemplateId,this.isStringTemplate,null,this.spinnerTemplateElement);if(e&&e.length>0)for(var i=0;i<e.length;i++)this.spinnerTemplateElement.appendChild(e[i]);this.isReact?this.renderTemplates(function(){t.popupObj.element.appendChild(t.spinnerTemplateElement)}):(this.renderTemplates(),this.popupObj.element.appendChild(this.spinnerTemplateElement))},e.prototype.onChangeEvent=function(t){this.isSelected=!1;var e,i=this.detachMentionChanges(this.itemData);e="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData;var n={e:t,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:e,isInteracted:!!t,value:this.item.innerHTML,element:this.inputElement};this.trigger("change",n)},e.prototype.detachMentionChanges=function(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t?Object.defineProperties({},{value:{value:t,enumerable:!0},text:{value:t,enumerable:!0}}):t},e.prototype.getItemData=function(){var t,e,i,n=this.fields;return y(t=this.itemData)||(e=c(n.value,t),i=c(n.text,t)),{value:y(t)||v(e)?t:e,text:y(t)||v(e)?t:i}},e.prototype.removeSelection=function(){if(this.list){var t=this.list.querySelectorAll("."+oj);t.length&&(et(t,oj),t[0].removeAttribute("aria-selected"))}},e.prototype.onMouseOver=function(t){var e=ut(t.target,"."+dj);this.setHover(e)},e.prototype.setHover=function(t){this.isValidLI(t)&&!t.classList.contains(aj)&&(this.removeHover(),tt([t],aj))},e.prototype.removeHover=function(){if(this.list){var t=this.list.querySelectorAll("."+aj);t&&t.length&&et(t,aj)}},e.prototype.isValidLI=function(t){return t&&t.hasAttribute("role")&&"option"===t.getAttribute("role")},e.prototype.onMouseLeave=function(){this.removeHover()},e.prototype.search=function(t,e,i){this.isContentEditable(this.inputElement)&&(this.range=this.getCurrentRange());var n=this.getTextRange();this.queryString=t;var s=this.getLastLetter(n);this.ignoreCase&&(t===s||t===s.toLowerCase())||!this.ignoreCase&&t===s?(this.resetList(this.dataSource,this.fields),y(this.list)?(this.renderList(),this.renderPopup()):this.isPopupOpen||this.renderPopup(),this.popupObj.element.style.left=S(e),this.popupObj.element.style.top=S(i)):this.isPopupOpen&&this.hidePopup()},e.prototype.disableItem=function(t){if(this.fields.disabled){this.list||this.renderList();var e=-1;if(this.liCollections&&this.liCollections.length>0&&this.listData&&this.fields.disabled){if("string"==typeof t)e=this.getIndexByValue(t);else if("object"==typeof t)if(t instanceof HTMLLIElement){for(var i=0;i<this.liCollections.length;i++)if(this.liCollections[i]===t){e=this.getIndexByValue(t.getAttribute("data-value"));break}}else{var n=JSON.parse(JSON.stringify(t))[this.fields.value];for(i=0;i<this.listData.length;i++)if(JSON.parse(JSON.stringify(this.listData[i]))[this.fields.value]===n){e=this.getIndexByValue(n);break}}else e=t;if(e<this.liCollections.length&&e>-1&&!JSON.parse(JSON.stringify(this.listData[e]))[this.fields.disabled]){var s=this.liCollections[e];if(s){this.disableListItem(s);var r=JSON.parse(JSON.stringify(this.listData[e]));r[this.fields.disabled]=!0,this.listData[e]=r,this.dataSource=this.listData}}}}},e.prototype.destroy=function(){this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),this.inputElement&&!this.inputElement.classList.contains("e-"+this.getModuleName())||(this.previousSelectedLI=null,this.item=null,this.selectedLI=null,this.popupObj=null,t.prototype.destroy.call(this))},e.prototype.getLocaleName=function(){return"mention"},e.prototype.getNgDirective=function(){return"EJS-MENTION"},e.prototype.getModuleName=function(){return"mention"},mH([jt(null)],e.prototype,"cssClass",void 0),mH([jt("@")],e.prototype,"mentionChar",void 0),mH([jt(!1)],e.prototype,"showMentionChar",void 0),mH([jt(!1)],e.prototype,"allowSpaces",void 0),mH([jt(null)],e.prototype,"suffixText",void 0),mH([jt(25)],e.prototype,"suggestionCount",void 0),mH([jt(0)],e.prototype,"minLength",void 0),mH([jt("None")],e.prototype,"sortOrder",void 0),mH([jt(!0)],e.prototype,"ignoreCase",void 0),mH([jt(!0)],e.prototype,"requireLeadingSpace",void 0),mH([jt(!1)],e.prototype,"highlight",void 0),mH([jt()],e.prototype,"locale",void 0),mH([jt("auto")],e.prototype,"popupWidth",void 0),mH([jt("300px")],e.prototype,"popupHeight",void 0),mH([jt(300)],e.prototype,"debounceDelay",void 0),mH([jt(null)],e.prototype,"displayTemplate",void 0),mH([jt(null)],e.prototype,"itemTemplate",void 0),mH([jt("No records found")],e.prototype,"noRecordsTemplate",void 0),mH([jt(null)],e.prototype,"spinnerTemplate",void 0),mH([jt()],e.prototype,"target",void 0),mH([jt([])],e.prototype,"dataSource",void 0),mH([jt(null)],e.prototype,"query",void 0),mH([jt("Contains")],e.prototype,"filterType",void 0),mH([Bt({text:null,value:null,iconCss:null,groupBy:null},ij)],e.prototype,"fields",void 0),mH([Ut()],e.prototype,"actionBegin",void 0),mH([Ut()],e.prototype,"actionComplete",void 0),mH([Ut()],e.prototype,"actionFailure",void 0),mH([Ut()],e.prototype,"change",void 0),mH([Ut()],e.prototype,"beforeOpen",void 0),mH([Ut()],e.prototype,"opened",void 0),mH([Ut()],e.prototype,"closed",void 0),mH([Ut()],e.prototype,"select",void 0),mH([Ut()],e.prototype,"filtering",void 0),mH([Ut()],e.prototype,"created",void 0),mH([Ut()],e.prototype,"destroyed",void 0),e=mH([Ft],e)}(fj),yH=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),vH=function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.statelessTemplateProps=["headerTemplate","valueTemplate","itemTemplate"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return yH(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(Tj);Ki(vH,[Gi,n.Component]);var bH=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.statelessTemplateProps=["headerTemplate","itemTemplate"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return bH(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(vB),[Gi,n.Component]);var CH=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.statelessTemplateProps=["headerTemplate","itemTemplate"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return CH(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(xB),[Gi,n.Component]);var IH=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.statelessTemplateProps=["headerTemplate","valueTemplate","itemTemplate"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return IH(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}($B),[Gi,n.Component]);var MH=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!0,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return MH(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(pH),[Gi,n.Component]);var SH=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=null,i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return SH(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement(n.Fragment,null,[].concat(n.createElement("input",this.getDefaultAttributes()),this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(uB),[Gi,n.Component]);var xH=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},t(e,i)};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();let wH,DH,EH,TH,AH,NH,LH,OH,kH,zH,PH,jH,BH,HH,RH,VH,UH,FH,WH,YH,_H,QH,ZH,qH,XH,GH,KH,JH,$H,tR,eR;Ki(function(t){function e(e){var i=t.call(this,e)||this;return i.initRenderCalled=!1,i.checkInjectedModules=!1,i.statelessTemplateProps=["itemTemplate"],i.templateProps=null,i.immediateRender=!1,i.isReactMock=!0,i.portals=[],i}return xH(e,t),e.prototype.render=function(){if(this.isReactMock=!1,!(this.element&&!this.initRenderCalled||this.refreshing)||this.isReactForeceUpdate)return n.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals));t.prototype.render.call(this),this.initRenderCalled=!0},e}(fH),[Gi,n.Component]),qb.Inject(ak,qO,ok,uC),qb.Inject(Xb,XO,rk,lk),kk.Inject(XO);class iR extends n.Component{constructor(t){super(t),this.dropdownListFields={text:"text",value:"value"},this.showPageBreaks={},this.pageSettings={background:{color:"#FFFFFF"},width:1016,height:1056,multiplePage:!1,margin:{left:5,top:5},orientation:"Landscape",showPageBreaks:!1},this.nodes=[{id:"room1window",offsetX:118,offsetY:10,width:87,height:4,shape:{type:"Path",data:"M22 5.5L124 5.50001M145 9L128 9V1L145 1V9ZM1 1L18 1L18 9L1 9L1 1ZM128 8L124 8V2L128 2V8ZM18 2L22 2L22 8L18 8L18 2Z"}},{id:"room1window2",offsetX:20,offsetY:110,width:59,height:4,rotateAngle:90,shape:{type:"Path",data:"M22 5.5L124 5.50001M145 9L128 9V1L145 1V9ZM1 1L18 1L18 9L1 9L1 1ZM128 8L124 8V2L128 2V8ZM18 2L22 2L22 8L18 8L18 2Z"}},{id:"node2",offsetX:212,offsetY:181,width:51,height:38,shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"room1Bed",offsetX:71,offsetY:103,width:68,height:87,rotateAngle:-90,shape:{type:"Path",data:"M1 54V2C1 1.44772 1.44772 1 2 1H44C44.5523 1 45 1.44771 45 2V54C45 54.5523 44.5523 55 44 55H2C1.44772 55 1 54.5523 1 54Z M7.57446 14.4176C8.01615 12.4296 7.72961 10.0298 7.34925 8.31942C7.20247 7.65937 7.68924 7 8.36541 7H19.6515C20.3227 7 20.8097 7.6496 20.6533 8.3023C20.4282 9.24153 20.1765 10.5125 20.1765 11.5C20.1765 12.4875 20.4282 13.7585 20.6533 14.6977C20.8097 15.3504 20.3227 16 19.6515 16H8.68924C7.9291 16 7.4096 15.1596 7.57446 14.4176Z M25.5745 14.4176C26.0161 12.4296 25.7296 10.0298 25.3493 8.31942C25.2025 7.65937 25.6892 7 26.3654 7H37.6515C38.3227 7 38.8097 7.6496 38.6533 8.3023C38.4282 9.24153 38.1765 10.5125 38.1765 11.5C38.1765 12.4875 38.4282 13.7585 38.6533 14.6977C38.8097 15.3504 38.3227 16 37.6515 16H26.6892C25.9291 16 25.4096 15.1596 25.5745 14.4176Z M45 53V27.695C41.8333 26.4298 34.1 24.6584 28.5 27.695C22.9 30.7316 16.5 25.5863 14 22.6341C10.1667 18.2057 2.2 13.0182 1 27.6951V53H45Z M1 54V2C1 1.44772 1.44772 1 2 1H44C44.5523 1 45 1.44771 45 2V54C45 54.5523 44.5523 55 44 55H2C1.44772 55 1 54.5523 1 54Z M7.57446 14.4176C8.01615 12.4296 7.72961 10.0298 7.34925 8.31942C7.20247 7.65937 7.68924 7 8.36541 7H19.6515C20.3227 7 20.8097 7.6496 20.6533 8.3023C20.4282 9.24153 20.1765 10.5125 20.1765 11.5C20.1765 12.4875 20.4282 13.7585 20.6533 14.6977C20.8097 15.3504 20.3227 16 19.6515 16H8.68924C7.9291 16 7.4096 15.1596 7.57446 14.4176Z M25.5745 14.4176C26.0161 12.4296 25.7296 10.0298 25.3493 8.31942C25.2025 7.65937 25.6892 7 26.3654 7H37.6515C38.3227 7 38.8097 7.6496 38.6533 8.3023C38.4282 9.24153 38.1765 10.5125 38.1765 11.5C38.1765 12.4875 38.4282 13.7585 38.6533 14.6977C38.8097 15.3504 38.3227 16 37.6515 16H26.6892C25.9291 16 25.4096 15.1596 25.5745 14.4176Z M25.5745 14.4176C26.0161 12.4296 25.7296 10.0298 25.3493 8.31942C25.2025 7.65937 25.6892 7 26.3654 7H37.6515C38.3227 7 38.8097 7.6496 38.6533 8.3023C38.4282 9.24153 38.1765 10.5125 38.1765 11.5C38.1765 12.4875 38.4282 13.7585 38.6533 14.6977C38.8097 15.3504 38.3227 16 37.6515 16H26.6892C25.9291 16 25.4096 15.1596 25.5745 14.4176Z"}},{id:"room1Table",offsetX:41,offsetY:166,width:26,height:28,shape:{type:"Path",data:"M79 1H3C1.89543 1 1 1.89543 1 3V49C1 50.1046 1.89543 51 3 51H79C80.1046 51 81 50.1046 81 49V3C81 1.89543 80.1046 1 79 1Z"}},{id:"room1PotTable",offsetX:41,offsetY:40,width:30,height:30,shape:{type:"Path",data:"M57 29C57 44.464 44.464 57 29 57C13.536 57 1 44.464 1 29C1 13.536 13.536 1 29 1C44.464 1 57 13.536 57 29Z"}},{id:"room1FlowerPot",offsetX:41,offsetY:40,width:25,height:25,shape:{type:"Path",data:"M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141Z M23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234Z M25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003Z M24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567Z M20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171Z M21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193Z M22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z M40.0382 18.2498C40.7878 20.1543 41.1995 22.2289 41.1995 24.3996C41.1995 24.5507 41.1975 24.7013 41.1935 24.8515M35.2235 11.5507C33.6921 10.2594 31.9267 9.2368 30 8.55572M39 32.7159C37.5069 35.3317 35.3311 37.5074 32.7153 39.0004M24.8419 41.1939C24.6949 41.1977 24.5474 41.1996 24.3995 41.1996C21.7821 41.1996 19.3046 40.6011 17.0963 39.5334M10.7727 34.2278C9.9752 33.1239 9.30848 31.9193 8.79533 30.6367M7.70563 22.5004C7.89672 20.8019 8.34106 19.1801 9 17.6736M13.9123 11.274C16.1576 9.47777 18.8737 8.24563 21.846 7.79239M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141ZM23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234ZM25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003ZM24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567ZM20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171ZM21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193ZM22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z"}},{id:"room1Bookcase",offsetX:224,offsetY:45,width:63,height:22,rotateAngle:-90,shape:{type:"Path",data:"M113 9V1H1V9M113 9H1M113 9V29H1V9M4 12H11V25H4V12ZM13 12H20V25H13V12ZM22 12H29V25H22V12ZM31 12H38V25H31V12ZM40 12H47V25H40V12ZM49 12H56V25H49V12ZM58 12H65V25H58V12ZM67 12H74V25H67V12ZM76 12H83V25H76V12ZM85 12H92V25H85V12ZM94 12H101V25H94V12ZM103 12H110V25H103V12Z"}},{id:"room1WorkTable",offsetX:215,offsetY:118,width:43,height:37,rotateAngle:90,shape:{type:"Path",data:"M4 5C4 4.44772 4.44772 4 5 4H83C83.5523 4 84 4.44772 84 5V53C84 53.5523 83.5523 54 83 54H5C4.44772 54 4 53.5523 4 53V5Z M4 6.5C4 6.77614 3.77462 7.00425 3.50231 6.95843C3.08607 6.88841 2.68736 6.73099 2.33329 6.49441C1.83994 6.16477 1.45543 5.69623 1.22836 5.14805C1.0013 4.59987 0.94189 3.99667 1.05765 3.41473C1.1734 2.83279 1.45912 2.29824 1.87868 1.87868C2.29824 1.45912 2.83279 1.1734 3.41473 1.05765C3.99667 0.94189 4.59987 1.0013 5.14805 1.22836C5.69623 1.45543 6.16477 1.83994 6.49441 2.33329C6.73099 2.68736 6.88841 3.08607 6.95843 3.50231C7.00424 3.77462 6.77614 4 6.5 4L4.5 4C4.22386 4 4 4.22386 4 4.5L4 6.5Z M81.5 4C81.2239 4 80.9958 3.77462 81.0416 3.50231C81.1116 3.08607 81.269 2.68736 81.5056 2.33329C81.8352 1.83994 82.3038 1.45543 82.852 1.22836C83.4001 1.0013 84.0033 0.94189 84.5853 1.05765C85.1672 1.1734 85.7018 1.45912 86.1213 1.87868C86.5409 2.29824 86.8266 2.83279 86.9424 3.41473C87.0581 3.99667 86.9987 4.59987 86.7716 5.14805C86.5446 5.69623 86.1601 6.16477 85.6667 6.49441C85.3126 6.73099 84.9139 6.88841 84.4977 6.95843C84.2254 7.00424 84 6.77614 84 6.5V4.5C84 4.22386 83.7761 4 83.5 4L81.5 4Z M6.5 54C6.77614 54 7.00425 54.2254 6.95843 54.4977C6.88841 54.9139 6.73099 55.3126 6.49441 55.6667C6.16477 56.1601 5.69623 56.5446 5.14805 56.7716C4.59987 56.9987 3.99667 57.0581 3.41473 56.9424C2.83279 56.8266 2.29824 56.5409 1.87868 56.1213C1.45912 55.7018 1.1734 55.1672 1.05765 54.5853C0.94189 54.0033 1.0013 53.4001 1.22836 52.852C1.45543 52.3038 1.83994 51.8352 2.33329 51.5056C2.68736 51.269 3.08607 51.1116 3.50231 51.0416C3.77462 50.9958 4 51.2239 4 51.5V53.5C4 53.7761 4.22386 54 4.5 54H6.5Z M84 51.5C84 51.2239 84.2254 50.9958 84.4977 51.0416C84.9139 51.1116 85.3126 51.269 85.6667 51.5056C86.1601 51.8352 86.5446 52.3038 86.7716 52.852C86.9987 53.4001 87.0581 54.0033 86.9424 54.5853C86.8266 55.1672 86.5409 55.7018 86.1213 56.1213C85.7018 56.5409 85.1672 56.8266 84.5853 56.9424C84.0033 57.0581 83.4001 56.9987 82.852 56.7716C82.3038 56.5446 81.8352 56.1601 81.5056 55.6667C81.269 55.3126 81.1116 54.9139 81.0416 54.4977C80.9958 54.2254 81.2239 54 81.5 54H83.5C83.7761 54 84 53.7761 84 53.5V51.5Z"}},{id:"room1Laptop",offsetX:215,offsetY:118,width:30,height:30,rotateAngle:90,shape:{type:"Path",data:"M1.06567 5.71554C0.619244 3.26018 2.50554 1 5.00115 1H61.0006C63.4675 1 65.3464 3.21135 64.9481 5.64595L61.7571 25.146C61.4407 27.08 59.7695 28.5 57.8096 28.5H8.54661C6.61347 28.5 4.95694 27.1175 4.61113 25.2155L1.06567 5.71554Z M3.7083 33C3.7083 30.7909 5.49916 29 7.7083 29H58.7083C60.9174 29 62.7083 30.7909 62.7083 33V55C62.7083 57.2091 60.9174 59 58.7083 59H7.7083C5.49916 59 3.7083 57.2091 3.7083 55V33Z M26.7083 50C26.7083 49.4477 27.156 49 27.7083 49H38.7083C39.2606 49 39.7083 49.4477 39.7083 50V54C39.7083 54.5523 39.2606 55 38.7083 55H27.7083C27.156 55 26.7083 54.5523 26.7083 54V50Z M8.7083 35.5C8.7083 35.2239 8.93216 35 9.2083 35H12.2083C12.4844 35 12.7083 35.2239 12.7083 35.5V36.5C12.7083 36.7761 12.4844 37 12.2083 37H9.2083C8.93216 37 8.7083 36.7761 8.7083 36.5V35.5Z M8.7083 38.5C8.7083 38.2239 8.93216 38 9.2083 38H12.2083C12.4844 38 12.7083 38.2239 12.7083 38.5V39.5C12.7083 39.7761 12.4844 40 12.2083 40H9.2083C8.93216 40 8.7083 39.7761 8.7083 39.5V38.5Z M8.7083 41.5C8.7083 41.2239 8.93216 41 9.2083 41H12.2083C12.4844 41 12.7083 41.2239 12.7083 41.5V42.5C12.7083 42.7761 12.4844 43 12.2083 43H9.2083C8.93216 43 8.7083 42.7761 8.7083 42.5V41.5Z M8.7083 44.5C8.7083 44.2239 8.93216 44 9.2083 44H12.2083C12.4844 44 12.7083 44.2239 12.7083 44.5V45.5C12.7083 45.7761 12.4844 46 12.2083 46H9.2083C8.93216 46 8.7083 45.7761 8.7083 45.5V44.5Z M13.7083 35.5C13.7083 35.2239 13.9322 35 14.2083 35H17.2083C17.4844 35 17.7083 35.2239 17.7083 35.5V36.5C17.7083 36.7761 17.4844 37 17.2083 37H14.2083C13.9322 37 13.7083 36.7761 13.7083 36.5V35.5Z M13.7083 38.5C13.7083 38.2239 13.9322 38 14.2083 38H17.2083C17.4844 38 17.7083 38.2239 17.7083 38.5V39.5C17.7083 39.7761 17.4844 40 17.2083 40H14.2083C13.9322 40 13.7083 39.7761 13.7083 39.5V38.5Z M13.7083 41.5C13.7083 41.2239 13.9322 41 14.2083 41H17.2083C17.4844 41 17.7083 41.2239 17.7083 41.5V42.5C17.7083 42.7761 17.4844 43 17.2083 43H14.2083C13.9322 43 13.7083 42.7761 13.7083 42.5V41.5Z M13.7083 44.5C13.7083 44.2239 13.9322 44 14.2083 44H17.2083C17.4844 44 17.7083 44.2239 17.7083 44.5V45.5C17.7083 45.7761 17.4844 46 17.2083 46H14.2083C13.9322 46 13.7083 45.7761 13.7083 45.5V44.5Z M18.7083 35.5C18.7083 35.2239 18.9322 35 19.2083 35H22.2083C22.4844 35 22.7083 35.2239 22.7083 35.5V36.5C22.7083 36.7761 22.4844 37 22.2083 37H19.2083C18.9322 37 18.7083 36.7761 18.7083 36.5V35.5Z M18.7083 38.5C18.7083 38.2239 18.9322 38 19.2083 38H22.2083C22.4844 38 22.7083 38.2239 22.7083 38.5V39.5C22.7083 39.7761 22.4844 40 22.2083 40H19.2083C18.9322 40 18.7083 39.7761 18.7083 39.5V38.5Z M18.7083 41.5C18.7083 41.2239 18.9322 41 19.2083 41H22.2083C22.4844 41 22.7083 41.2239 22.7083 41.5V42.5C22.7083 42.7761 22.4844 43 22.2083 43H19.2083C18.9322 43 18.7083 42.7761 18.7083 42.5V41.5Z M18.7083 44.5C18.7083 44.2239 18.9322 44 19.2083 44H22.2083C22.4844 44 22.7083 44.2239 22.7083 44.5V45.5C22.7083 45.7761 22.4844 46 22.2083 46H19.2083C18.9322 46 18.7083 45.7761 18.7083 45.5V44.5Z M23.7083 35.5C23.7083 35.2239 23.9322 35 24.2083 35H27.2083C27.4844 35 27.7083 35.2239 27.7083 35.5V36.5C27.7083 36.7761 27.4844 37 27.2083 37H24.2083C23.9322 37 23.7083 36.7761 23.7083 36.5V35.5Z M23.7083 38.5C23.7083 38.2239 23.9322 38 24.2083 38H27.2083C27.4844 38 27.7083 38.2239 27.7083 38.5V39.5C27.7083 39.7761 27.4844 40 27.2083 40H24.2083C23.9322 40 23.7083 39.7761 23.7083 39.5V38.5Z M23.7083 41.5C23.7083 41.2239 23.9322 41 24.2083 41H27.2083C27.4844 41 27.7083 41.2239 27.7083 41.5V42.5C27.7083 42.7761 27.4844 43 27.2083 43H24.2083C23.9322 43 23.7083 42.7761 23.7083 42.5V41.5Z M23.7083 44.5C23.7083 44.2239 23.9322 44 24.2083 44H42.2083C42.4844 44 42.7083 44.2239 42.7083 44.5V45.5C42.7083 45.7761 42.4844 46 42.2083 46H24.2083C23.9322 46 23.7083 45.7761 23.7083 45.5V44.5Z M28.7083 35.5C28.7083 35.2239 28.9322 35 29.2083 35H32.2083C32.4844 35 32.7083 35.2239 32.7083 35.5V36.5C32.7083 36.7761 32.4844 37 32.2083 37H29.2083C28.9322 37 28.7083 36.7761 28.7083 36.5V35.5Z M28.7083 38.5C28.7083 38.2239 28.9322 38 29.2083 38H32.2083C32.4844 38 32.7083 38.2239 32.7083 38.5V39.5C32.7083 39.7761 32.4844 40 32.2083 40H29.2083C28.9322 40 28.7083 39.7761 28.7083 39.5V38.5Z M28.7083 41.5C28.7083 41.2239 28.9322 41 29.2083 41H32.2083C32.4844 41 32.7083 41.2239 32.7083 41.5V42.5C32.7083 42.7761 32.4844 43 32.2083 43H29.2083C28.9322 43 28.7083 42.7761 28.7083 42.5V41.5Z M33.7083 35.5C33.7083 35.2239 33.9322 35 34.2083 35H37.2083C37.4844 35 37.7083 35.2239 37.7083 35.5V36.5C37.7083 36.7761 37.4844 37 37.2083 37H34.2083C33.9322 37 33.7083 36.7761 33.7083 36.5V35.5Z M33.7083 38.5C33.7083 38.2239 33.9322 38 34.2083 38H37.2083C37.4844 38 37.7083 38.2239 37.7083 38.5V39.5C37.7083 39.7761 37.4844 40 37.2083 40H34.2083C33.9322 40 33.7083 39.7761 33.7083 39.5V38.5Z M33.7083 41.5C33.7083 41.2239 33.9322 41 34.2083 41H37.2083C37.4844 41 37.7083 41.2239 37.7083 41.5V42.5C37.7083 42.7761 37.4844 43 37.2083 43H34.2083C33.9322 43 33.7083 42.7761 33.7083 42.5V41.5Z M38.7083 35.5C38.7083 35.2239 38.9322 35 39.2083 35H42.2083C42.4844 35 42.7083 35.2239 42.7083 35.5V36.5C42.7083 36.7761 42.4844 37 42.2083 37H39.2083C38.9322 37 38.7083 36.7761 38.7083 36.5V35.5Z M38.7083 38.5C38.7083 38.2239 38.9322 38 39.2083 38H42.2083C42.4844 38 42.7083 38.2239 42.7083 38.5V39.5C42.7083 39.7761 42.4844 40 42.2083 40H39.2083C38.9322 40 38.7083 39.7761 38.7083 39.5V38.5Z M38.7083 41.5C38.7083 41.2239 38.9322 41 39.2083 41H42.2083C42.4844 41 42.7083 41.2239 42.7083 41.5V42.5C42.7083 42.7761 42.4844 43 42.2083 43H39.2083C38.9322 43 38.7083 42.7761 38.7083 42.5V41.5Z M43.7083 35.5C43.7083 35.2239 43.9322 35 44.2083 35H47.2083C47.4844 35 47.7083 35.2239 47.7083 35.5V36.5C47.7083 36.7761 47.4844 37 47.2083 37H44.2083C43.9322 37 43.7083 36.7761 43.7083 36.5V35.5Z M43.7083 38.5C43.7083 38.2239 43.9322 38 44.2083 38H47.2083C47.4844 38 47.7083 38.2239 47.7083 38.5V39.5C47.7083 39.7761 47.4844 40 47.2083 40H44.2083C43.9322 40 43.7083 39.7761 43.7083 39.5V38.5Z M43.7083 41.5C43.7083 41.2239 43.9322 41 44.2083 41H47.2083C47.4844 41 47.7083 41.2239 47.7083 41.5V42.5C47.7083 42.7761 47.4844 43 47.2083 43H44.2083C43.9322 43 43.7083 42.7761 43.7083 42.5V41.5Z M43.7083 44.5C43.7083 44.2239 43.9322 44 44.2083 44H47.2083C47.4844 44 47.7083 44.2239 47.7083 44.5V45.5C47.7083 45.7761 47.4844 46 47.2083 46H44.2083C43.9322 46 43.7083 45.7761 43.7083 45.5V44.5Z M48.7083 35.5C48.7083 35.2239 48.9322 35 49.2083 35H52.2083C52.4844 35 52.7083 35.2239 52.7083 35.5V36.5C52.7083 36.7761 52.4844 37 52.2083 37H49.2083C48.9322 37 48.7083 36.7761 48.7083 36.5V35.5Z M48.7083 38.5C48.7083 38.2239 48.9322 38 49.2083 38H52.2083C52.4844 38 52.7083 38.2239 52.7083 38.5V39.5C52.7083 39.7761 52.4844 40 52.2083 40H49.2083C48.9322 40 48.7083 39.7761 48.7083 39.5V38.5Z M48.7083 41.5C48.7083 41.2239 48.9322 41 49.2083 41H52.2083C52.4844 41 52.7083 41.2239 52.7083 41.5V42.5C52.7083 42.7761 52.4844 43 52.2083 43H49.2083C48.9322 43 48.7083 42.7761 48.7083 42.5V41.5Z M48.7083 44.5C48.7083 44.2239 48.9322 44 49.2083 44H52.2083C52.4844 44 52.7083 44.2239 52.7083 44.5V45.5C52.7083 45.7761 52.4844 46 52.2083 46H49.2083C48.9322 46 48.7083 45.7761 48.7083 45.5V44.5Z M53.7083 35.5C53.7083 35.2239 53.9322 35 54.2083 35H57.2083C57.4844 35 57.7083 35.2239 57.7083 35.5V36.5C57.7083 36.7761 57.4844 37 57.2083 37H54.2083C53.9322 37 53.7083 36.7761 53.7083 36.5V35.5Z M53.7083 38.5C53.7083 38.2239 53.9322 38 54.2083 38H57.2083C57.4844 38 57.7083 38.2239 57.7083 38.5V39.5C57.7083 39.7761 57.4844 40 57.2083 40H54.2083C53.9322 40 53.7083 39.7761 53.7083 39.5V38.5Z M53.7083 41.5C53.7083 41.2239 53.9322 41 54.2083 41H57.2083C57.4844 41 57.7083 41.2239 57.7083 41.5V42.5C57.7083 42.7761 57.4844 43 57.2083 43H54.2083C53.9322 43 53.7083 42.7761 53.7083 42.5V41.5Z M53.7083 44.5C53.7083 44.2239 53.9322 44 54.2083 44H57.2083C57.4844 44 57.7083 44.2239 57.7083 44.5V45.5C57.7083 45.7761 57.4844 46 57.2083 46H54.2083C53.9322 46 53.7083 45.7761 53.7083 45.5V44.5Z"}},{id:"room1Chair",offsetX:178,offsetY:116,width:28,height:32,rotateAngle:-90,shape:{type:"Path",data:"M22 9V14M28 9.08984V14M13 54H37C41.4183 54 45 50.4183 45 46V22C45 17.5817 41.4183 14 37 14H13C8.58172 14 5 17.5817 5 22V46C5 50.4183 8.58172 54 13 54ZM3 45C1.89543 45 1 44.1046 1 43V25C1 23.8954 1.89543 23 3 23C4.10457 23 5 23.8954 5 25V43C5 44.1046 4.10457 45 3 45ZM11 5.79143C11 3.97975 12.2614 2.40196 14.0423 2.06981C22.0186 0.582241 27.6274 0.696364 35.7954 2.09976C37.6588 2.41991 39 4.05364 39 5.94429C39 8.4118 36.7616 10.2627 34.325 9.87346C27.5467 8.79067 22.4382 8.5351 15.7921 9.68406C13.3336 10.1091 11 8.28636 11 5.79143ZM47 45C45.8954 45 45 44.1046 45 43V25C45 23.8954 45.8954 23 47 23C48.1046 23 49 23.8954 49 25V43C49 44.1046 48.1046 45 47 45Z"}},{id:"room1Lamp",offsetX:41,offsetY:166,width:20,height:20,shape:{type:"Path",data:"M17 7C11.4772 7 7 11.4772 7 17C7 22.5228 11.4772 27 17 27C22.5228 27 27 22.5228 27 17C27 11.4772 22.5228 7 17 7ZM17 7V13.5M20.2363 18.5593L25.3654 21.3093M13.7544 18.4305L8.2541 21.6805M33 17C33 25.8366 25.8366 33 17 33C8.16344 33 1 25.8366 1 17C1 8.16344 8.16344 1 17 1C25.8366 1 33 8.16344 33 17ZM25.5 17C25.5 21.6944 21.6944 25.5 17 25.5C12.3056 25.5 8.5 21.6944 8.5 17C8.5 12.3056 12.3056 8.5 17 8.5C21.6944 8.5 25.5 12.3056 25.5 17ZM21 17C21 19.2091 19.2091 21 17 21C14.7909 21 13 19.2091 13 17C13 14.7909 14.7909 13 17 13C19.2091 13 21 14.7909 21 17Z"}},{id:"room1ToiletDoor",offsetX:169,offsetY:214,width:28,height:30,rotateAngle:180,shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"room1Warddrobe",offsetX:119,offsetY:176,width:73,height:35,rotateAngle:180,shape:{type:"Path",data:"M50.6443 54.406L76 29L80.9998 28.9502H85.9996L55.594 59.3558L50.6443 54.406Z M12 29L36.9996 54.4053L32.0498 59.3551L2 29H12Z M70.7969 44.8594C70.6017 44.6642 70.6017 44.3476 70.7969 44.1523C70.9922 43.957 71.3088 43.957 71.504 44.1523L72.9182 45.5665C73.1135 45.7618 73.1135 46.0784 72.9182 46.2736C72.723 46.4689 72.4064 46.4689 72.2111 46.2736L70.7969 44.8594Z M16.1406 44.1524C16.3358 43.9571 16.6524 43.9571 16.8477 44.1524C17.043 44.3476 17.043 44.6642 16.8477 44.8595L15.4335 46.2737C15.2382 46.469 14.9216 46.469 14.7264 46.2737C14.5311 46.0784 14.5311 45.7619 14.7264 45.5666L16.1406 44.1524Z M1 1L87 1V29H1L1 1Z"}},{id:"toilet1BathTub",offsetX:88,offsetY:263,width:50,height:25,shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H84C88.4183 1 92 4.58172 92 9V40C92 44.4183 88.4183 48 84 48H9C4.58172 48 1 44.4183 1 40V9Z M12 24.5C12 14.2827 20.2827 6 30.5 6H61.5C71.7173 6 80 14.2827 80 24.5C80 34.7173 71.7173 43 61.5 43H30.5C20.2827 43 12 34.7173 12 24.5Z M11.5 26.5C11.5 26.5 12 26 12 25C12 24 11.5 23.5 11.5 23.5L22.0074 22.6917C23.3519 22.5883 24.5 23.6514 24.5 25C24.5 26.3486 23.3519 27.4117 22.0074 27.3083L11.5 26.5Z M8 21.5C9.933 21.5 11.5 23.067 11.5 25C11.5 26.933 9.933 28.5 8 28.5C6.067 28.5 4.5 26.933 4.5 25C4.5 23.067 6.067 21.5 8 21.5Z"}},{id:"toilet1Basin",offsetX:158,offsetY:263,width:30,height:25,rotateAngle:180,shape:{type:"Path",data:"M1 4C1 2.34315 2.34315 1 4 1H62C63.6569 1 65 2.34315 65 4V25C65 38.2548 54.2548 49 41 49H25C11.7452 49 1 38.2548 1 25V4Z M57 25C57 33.2843 46.2548 40 33 40C19.7452 40 9 33.2843 9 25C9 16.7157 19.7452 10 33 10C46.2548 10 57 16.7157 57 25Z M31 10C31 10 31.5 10.5 32.5 10.5C33.5 10.5 34 10 34 10L34.8083 20.5074C34.9117 21.8519 33.8486 23 32.5 23C31.1514 23 30.0883 21.8519 30.1917 20.5074L31 10Z M36 6.5C36 8.433 34.433 10 32.5 10C30.567 10 29 8.433 29 6.5C29 4.567 30.567 3 32.5 3C34.433 3 36 4.567 36 6.5Z M35 28.5C35 29.8807 33.8807 31 32.5 31C31.1193 31 30 29.8807 30 28.5C30 27.1193 31.1193 26 32.5 26C33.8807 26 35 27.1193 35 28.5Z"}},{id:"toilet1Faucet",offsetX:43,offsetY:222,width:23,height:36,rotateAngle:-90,shape:{type:"Path",data:"M46.4065 37.9425C46.4065 55.0951 36.823 69.0002 25.0011 69.0002C13.1792 69.0002 3.5957 55.0951 3.5957 37.9425C3.5957 30.1141 5.2059 23.4623 8.5 18C8.61402 18 25 18 25 18H41.2425C44.5366 23.4623 46.4065 30.1141 46.4065 37.9425Z M41.2161 43.5006C41.2161 53.9728 33.9559 62.4621 24.9999 62.4621C16.0439 62.4621 8.78369 53.9728 8.78369 43.5006C8.78369 33.0284 16.0439 24.5391 24.9999 24.5391C33.9559 24.5391 41.2161 33.0284 41.2161 43.5006Z M1 3.61538C1 2.17095 2.17095 1 3.61538 1H46.3846C47.8291 1 49 2.17095 49 3.61538V15.3846C49 16.8291 47.8291 18 46.3846 18H3.61538C2.17095 18 1 16.8291 1 15.3846V3.61538Z M26.9995 9C26.9995 10.1046 26.1041 11 24.9995 11C23.8949 11 22.9995 10.1046 22.9995 9C22.9995 7.89543 23.8949 7 24.9995 7C26.1041 7 26.9995 7.89543 26.9995 9Z M31 33C31 37.4183 28.3137 41 25 41C21.6863 41 19 37.4183 19 33C19 28.5817 21.6863 25 25 25C28.3137 25 31 28.5817 31 33Z "}},{id:"room2ToiletDoor",offsetX:168,offsetY:336,width:27,height:30,shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"toilet2BathTub",offsetX:85,offsetY:332,width:50,height:25,shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H84C88.4183 1 92 4.58172 92 9V40C92 44.4183 88.4183 48 84 48H9C4.58172 48 1 44.4183 1 40V9Z M12 11C12 8.23858 14.2386 6 17 6H75C77.7614 6 80 8.23858 80 11V38C80 40.7614 77.7614 43 75 43H17C14.2386 43 12 40.7614 12 38V11Z M11.5 26.5C11.5 26.5 12 26 12 25C12 24 11.5 23.5 11.5 23.5L22.0074 22.6917C23.3519 22.5883 24.5 23.6514 24.5 25C24.5 26.3486 23.3519 27.4117 22.0074 27.3083L11.5 26.5Z M8 21.5C9.933 21.5 11.5 23.067 11.5 25C11.5 26.933 9.933 28.5 8 28.5C6.067 28.5 4.5 26.933 4.5 25C4.5 23.067 6.067 21.5 8 21.5Z"}},{id:"toilet2Basin",offsetX:157,offsetY:298,width:30,height:25,shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H57C61.4183 1 65 4.58172 65 9V41C65 45.4183 61.4183 49 57 49H9C4.58172 49 1 45.4183 1 41V9Z M7 13C7 10.7909 8.79086 9 11 9H55C57.2091 9 59 10.7909 59 13V37C59 39.2091 57.2091 41 55 41H11C8.79086 41 7 39.2091 7 37V13Z M35 25.5C35 26.8807 33.8807 28 32.5 28C31.1193 28 30 26.8807 30 25.5C30 24.1193 31.1193 23 32.5 23C33.8807 23 35 24.1193 35 25.5Z M31 9C31 9 31.5 9.5 32.5 9.5C33.5 9.5 34 9 34 9L34.8083 19.5074C34.9117 20.8519 33.8486 22 32.5 22C31.1514 22 30.0883 20.8519 30.1917 19.5074L31 9Z M36 5.5C36 7.433 34.433 9 32.5 9C30.567 9 29 7.433 29 5.5C29 3.567 30.567 2 32.5 2C34.433 2 36 3.567 36 5.5Z"}},{id:"toilet2Faucet",offsetX:42,offsetY:305,width:23,height:37,rotateAngle:-90,shape:{type:"Path",data:"M46.989 33.0731C46.989 53.4671 37.3818 69.9996 25.5307 69.9996C13.6795 69.9996 4.07227 53.4671 4.07227 33.0731C4.07227 19.1497 4 18 4 18C4.17549 18.0144 15.9306 18.2553 26.5002 17.9993C36.1582 17.7654 46.989 17.9999 46.989 17.9999C46.989 17.9999 46.989 21.6119 46.989 33.0731Z M41 44.5C41 54.7173 34.0604 63 25.5 63C16.9396 63 10 54.7173 10 44.5C10 34.2827 16.9396 26 25.5 26C34.0604 26 41 34.2827 41 44.5Z M1 3.61538C1 2.17095 2.17095 1 3.61538 1H46.3846C47.8291 1 49 2.17095 49 3.61538V15.3846C49 16.8291 47.8291 18 46.3846 18H3.61538C2.17095 18 1 16.8291 1 15.3846V3.61538Z M26.9995 9C26.9995 10.1046 26.1041 11 24.9995 11C23.8949 11 22.9995 10.1046 22.9995 9C22.9995 7.89543 23.8949 7 24.9995 7C26.1041 7 26.9995 7.89543 26.9995 9Z M31 34C31 38.4183 28.3137 42 25 42C21.6863 42 19 38.4183 19 34C19 29.5817 21.6863 26 25 26C28.3137 26 31 29.5817 31 34Z"}},{id:"room2Window",offsetX:118,offsetY:481,width:80,height:4,shape:{type:"Path",data:"M22 5.5L124 5.50001M145 9L128 9V1L145 1V9ZM1 1L18 1L18 9L1 9L1 1ZM128 8L124 8V2L128 2V8ZM18 2L22 2L22 8L18 8L18 2Z"}},{id:"room2Window2",offsetX:20,offsetY:396,width:51,height:4,rotateAngle:90,shape:{type:"Path",data:"M22 5.5L124 5.50001M145 9L128 9V1L145 1V9ZM1 1L18 1L18 9L1 9L1 1ZM128 8L124 8V2L128 2V8ZM18 2L22 2L22 8L18 8L18 2Z"}},{id:"room2Door",offsetX:212,offsetY:300,width:52,height:38,rotateAngle:180,shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"room2Bed",offsetX:69,offsetY:402,width:44,height:87,rotateAngle:-90,shape:{type:"Path",data:"M1 2C1 1.44771 1.44772 1 2 1H26C26.5523 1 27 1.44772 27 2V54C27 54.5523 26.5523 55 26 55H2C1.44772 55 1 54.5523 1 54V2Z M1 27.5941C1 27.5432 1.0038 27.4928 1.01218 27.4426C1.13134 26.7284 2.13402 21.153 4.41646 21.0198C4.47147 21.0165 4.52813 21.0118 4.58296 21.0063C7.51272 20.7131 9.98932 30.7524 14.8322 30.9965C14.9423 31.002 15.0553 30.9826 15.1593 30.946C18.0006 29.9475 18.036 28.9499 20 28.5008C22.6744 27.8892 25.3331 28.7977 26.4505 29.2665C26.794 29.4106 27 29.7509 27 30.1234V52.0177C27 52.5699 26.5523 53.0177 26 53.0177H2C1.44772 53.0177 1 52.5699 1 52.0177V27.5941Z M7.47077 8.3988C7.27248 7.71969 7.76957 7 8.47703 7H19.0951C19.901 7 20.4243 7.93945 20.1178 8.68485C19.7917 9.47806 19.5 10.4742 19.5 11.5C19.5 12.5349 19.7571 13.4842 20.0583 14.2413C20.363 15.007 19.824 16 19 16H8.47703C7.76957 16 7.27248 15.2803 7.47077 14.6012C7.73012 13.7129 8 12.539 8 11.5C8 10.461 7.73012 9.28707 7.47077 8.3988Z"}},{id:"room2Table",offsetX:210,offsetY:464,width:37,height:25,shape:{type:"Path",data:"M4 5C4 4.44772 4.44772 4 5 4H83C83.5523 4 84 4.44772 84 5V53C84 53.5523 83.5523 54 83 54H5C4.44772 54 4 53.5523 4 53V5Z M4 6.5C4 6.77614 3.77462 7.00425 3.50231 6.95843C3.08607 6.88841 2.68736 6.73099 2.33329 6.49441C1.83994 6.16477 1.45543 5.69623 1.22836 5.14805C1.0013 4.59987 0.94189 3.99667 1.05765 3.41473C1.1734 2.83279 1.45912 2.29824 1.87868 1.87868C2.29824 1.45912 2.83279 1.1734 3.41473 1.05765C3.99667 0.94189 4.59987 1.0013 5.14805 1.22836C5.69623 1.45543 6.16477 1.83994 6.49441 2.33329C6.73099 2.68736 6.88841 3.08607 6.95843 3.50231C7.00424 3.77462 6.77614 4 6.5 4L4.5 4C4.22386 4 4 4.22386 4 4.5L4 6.5Z M81.5 4C81.2239 4 80.9958 3.77462 81.0416 3.50231C81.1116 3.08607 81.269 2.68736 81.5056 2.33329C81.8352 1.83994 82.3038 1.45543 82.852 1.22836C83.4001 1.0013 84.0033 0.94189 84.5853 1.05765C85.1672 1.1734 85.7018 1.45912 86.1213 1.87868C86.5409 2.29824 86.8266 2.83279 86.9424 3.41473C87.0581 3.99667 86.9987 4.59987 86.7716 5.14805C86.5446 5.69623 86.1601 6.16477 85.6667 6.49441C85.3126 6.73099 84.9139 6.88841 84.4977 6.95843C84.2254 7.00424 84 6.77614 84 6.5V4.5C84 4.22386 83.7761 4 83.5 4L81.5 4Z M6.5 54C6.77614 54 7.00425 54.2254 6.95843 54.4977C6.88841 54.9139 6.73099 55.3126 6.49441 55.6667C6.16477 56.1601 5.69623 56.5446 5.14805 56.7716C4.59987 56.9987 3.99667 57.0581 3.41473 56.9424C2.83279 56.8266 2.29824 56.5409 1.87868 56.1213C1.45912 55.7018 1.1734 55.1672 1.05765 54.5853C0.94189 54.0033 1.0013 53.4001 1.22836 52.852C1.45543 52.3038 1.83994 51.8352 2.33329 51.5056C2.68736 51.269 3.08607 51.1116 3.50231 51.0416C3.77462 50.9958 4 51.2239 4 51.5V53.5C4 53.7761 4.22386 54 4.5 54H6.5Z M84 51.5C84 51.2239 84.2254 50.9958 84.4977 51.0416C84.9139 51.1116 85.3126 51.269 85.6667 51.5056C86.1601 51.8352 86.5446 52.3038 86.7716 52.852C86.9987 53.4001 87.0581 54.0033 86.9424 54.5853C86.8266 55.1672 86.5409 55.7018 86.1213 56.1213C85.7018 56.5409 85.1672 56.8266 84.5853 56.9424C84.0033 57.0581 83.4001 56.9987 82.852 56.7716C82.3038 56.5446 81.8352 56.1601 81.5056 55.6667C81.269 55.3126 81.1116 54.9139 81.0416 54.4977C80.9958 54.2254 81.2239 54 81.5 54H83.5C83.7761 54 84 53.7761 84 53.5V51.5Z"}},{id:"room2LampTable",offsetX:38,offsetY:452,width:26,height:28,shape:{type:"Path",data:"M79 1H3C1.89543 1 1 1.89543 1 3V49C1 50.1046 1.89543 51 3 51H79C80.1046 51 81 50.1046 81 49V3C81 1.89543 80.1046 1 79 1Z"}},{id:"room2Chair",offsetX:210,offsetY:436,width:25,height:25,shape:{type:"Path",data:"M7 27.5V56C7 56.5523 6.55228 57 6 57H2C1.44772 57 1 56.5523 1 56V26.5C1 12.4167 12.4167 1 26.5 1C40.5833 1 52 12.4167 52 26.5V56C52 56.5523 51.5523 57 51 57H47C46.4477 57 46 56.5523 46 56V27.5M7 27.5C7 16.7304 15.7304 8 26.5 8C37.2696 8 46 16.7304 46 27.5M7 27.5V58C7 58.5523 7.44772 59 8 59H45C45.5523 59 46 58.5523 46 58V27.5"}},{id:"room2Lamp",offsetX:38,offsetY:452,width:20,height:20,shape:{type:"Path",data:"M17 7C11.4772 7 7 11.4772 7 17C7 22.5228 11.4772 27 17 27C22.5228 27 27 22.5228 27 17C27 11.4772 22.5228 7 17 7ZM17 7V13.5M20.2363 18.5593L25.3654 21.3093M13.7544 18.4305L8.2541 21.6805M33 17C33 25.8366 25.8366 33 17 33C8.16344 33 1 25.8366 1 17C1 8.16344 8.16344 1 17 1C25.8366 1 33 8.16344 33 17ZM25.5 17C25.5 21.6944 21.6944 25.5 17 25.5C12.3056 25.5 8.5 21.6944 8.5 17C8.5 12.3056 12.3056 8.5 17 8.5C21.6944 8.5 25.5 12.3056 25.5 17ZM21 17C21 19.2091 19.2091 21 17 21C14.7909 21 13 19.2091 13 17C13 14.7909 14.7909 13 17 13C19.2091 13 21 14.7909 21 17Z"}},{id:"room2Warddrobe",offsetX:216,offsetY:378,width:73,height:35,rotateAngle:90,shape:{type:"Path",data:"M50.6443 54.406L76 29L80.9998 28.9502H85.9996L55.594 59.3558L50.6443 54.406Z M12 29L36.9996 54.4053L32.0498 59.3551L2 29H12Z M70.7969 44.8594C70.6017 44.6642 70.6017 44.3476 70.7969 44.1523C70.9922 43.957 71.3088 43.957 71.504 44.1523L72.9182 45.5665C73.1135 45.7618 73.1135 46.0784 72.9182 46.2736C72.723 46.4689 72.4064 46.4689 72.2111 46.2736L70.7969 44.8594Z M16.1406 44.1524C16.3358 43.9571 16.6524 43.9571 16.8477 44.1524C17.043 44.3476 17.043 44.6642 16.8477 44.8595L15.4335 46.2737C15.2382 46.469 14.9216 46.469 14.7264 46.2737C14.5311 46.0784 14.5311 45.7619 14.7264 45.5666L16.1406 44.1524Z M1 1L87 1V29H1L1 1Z"}},{id:"mainDoor",offsetX:320,offsetY:371,width:76,height:63,shape:{type:"Path",data:"M143 71V79L1 79L1 71M143 71L1 71M143 71V1H142C103.34 1 72 32.3401 72 71M143 71H72M1 71L1 1H2C40.6599 1 72 32.3401 72 71M1 71L72 71M72 78.5V71"}},{id:"window",offsetX:490,offsetY:399,width:100,height:5,shape:{type:"Path",data:"M22 3.5L124 3.50001M22 6.5L124 6.50001M145 9L128 9V1L145 1V9ZM1 1L18 1L18 9L1 9L1 1ZM128 8L124 8V2L128 2V8ZM18 2L22 2L22 8L18 8L18 2Z"}},{id:"sofa",offsetX:480,offsetY:370,width:102,height:36,rotateAngle:180,shape:{type:"Path",data:"M95 49H130C131.657 49 133 47.6569 133 46V20C133 18.3431 131.657 17 130 17H20C18.3431 17 17 18.3431 17 20V46C17 47.6569 18.3431 49 20 49H95ZM95 49V17H56V49H95ZM145 17H137C134.791 17 133 18.7909 133 21V45C133 47.2091 134.791 49 137 49H145C147.209 49 149 47.2091 149 45V21C149 18.7909 147.209 17 145 17ZM145 17H5M145 17C147.209 17 149 15.2091 149 13V5.00001C149 2.79087 147.209 1.00001 145 1.00001L5 1C2.79086 1 1 2.79086 1 5L1 13C1 15.2091 2.79086 17 5 17M5 17H13C15.2091 17 17 18.7909 17 21V45C17 47.2091 15.2091 49 13 49H5C2.79086 49 1 47.2091 1 45L1 21C1 18.7909 2.79086 17 5 17Z"}},{id:"doubleSofa",offsetX:479,offsetY:298,width:100,height:35,shape:{type:"Path",data:"M55 17H20C18.3431 17 17 18.3431 17 20V46C17 47.6569 18.3431 49 20 49H55M55 17V49M55 17H91C92.6569 17 94 18.3431 94 20V46C94 47.6569 92.6569 49 91 49H55M106 17H98C95.7909 17 94 18.7909 94 21V45C94 47.2091 95.7909 49 98 49H106C108.209 49 110 47.2091 110 45V21C110 18.7909 108.209 17 106 17ZM106 17H5M106 17C108.209 17 110 15.2091 110 13V5.00001C110 2.79087 108.209 1.00001 106 1.00001L5 1C2.79086 1 1 2.79086 1 5L1 13C1 15.2091 2.79086 17 5 17M5 17H13C15.2091 17 17 18.7909 17 21V45C17 47.2091 15.2091 49 13 49H5C2.79086 49 1 47.2091 1 45L1 21C1 18.7909 2.79086 17 5 17Z"}},{id:"singleSofa",offsetX:405,offsetY:333,width:30,height:30,rotateAngle:-90,shape:{type:"Path",data:"M39.3572 42.5001C33.5879 44.3644 23.3389 47.3726 11.0312 42.8982M39.3572 42.5001C38.9901 32.896 39.1315 17.3601 40.2727 11.5C38.1563 12.9176 38.0909 13 33.1818 14C28.8182 14.8889 26.0909 14.5 26.0909 14.5C26.0909 14.5 22.2727 14.5 19 14C15.7273 13.5 14.0909 13 10.2727 10.9155C10.7143 16.2832 11.7887 29.6759 11.0312 42.8982M39.3572 42.5001C39.4226 44.2122 40.7919 45.5708 42.5027 45.6646L45.163 45.8105C47.0566 45.9143 48.6622 44.438 48.7092 42.5421C48.8219 38.0026 49 29.9987 49 24.7736C49 20.1829 48.725 13.4473 48.5055 8.8007C48.3595 5.71097 46.1103 3.14326 43.0526 2.67589C38.2269 1.93827 30.8617 1 24.619 1C18.1203 1 10.557 2.69472 5.86868 3.94263C3.15069 4.66609 1.30579 7.10774 1.22538 9.91921C1.12006 13.6016 1 19.0538 1 24.7736C1 31.5601 1.16901 38.7232 1.28189 42.7504C1.33277 44.5656 2.82066 46 4.63658 46H7.70901C9.46516 46 10.9308 44.6515 11.0312 42.8982M22.2195 21.2201C22.2195 22.1507 21.4652 22.9051 20.5346 22.9051C19.604 22.9051 18.8496 22.1507 18.8496 21.2201C18.8496 20.2895 19.604 19.5352 20.5346 19.5352C21.4652 19.5352 22.2195 20.2895 22.2195 21.2201ZM22.2195 27.9594C22.2195 28.89 21.4652 29.6443 20.5346 29.6443C19.604 29.6443 18.8496 28.89 18.8496 27.9594C18.8496 27.0288 19.604 26.2744 20.5346 26.2744C21.4652 26.2744 22.2195 27.0288 22.2195 27.9594ZM22.2195 34.6986C22.2195 35.6292 21.4652 36.3836 20.5346 36.3836C19.604 36.3836 18.8496 35.6292 18.8496 34.6986C18.8496 33.7681 19.604 33.0137 20.5346 33.0137C21.4652 33.0137 22.2195 33.7681 22.2195 34.6986ZM32.3294 21.2201C32.3294 22.1507 31.575 22.9051 30.6444 22.9051C29.7139 22.9051 28.9595 22.1507 28.9595 21.2201C28.9595 20.2895 29.7139 19.5352 30.6444 19.5352C31.575 19.5352 32.3294 20.2895 32.3294 21.2201ZM32.3294 27.9594C32.3294 28.89 31.575 29.6443 30.6444 29.6443C29.7139 29.6443 28.9595 28.89 28.9595 27.9594C28.9595 27.0288 29.7139 26.2744 30.6444 26.2744C31.575 26.2744 32.3294 27.0288 32.3294 27.9594ZM32.3294 34.6986C32.3294 35.6292 31.575 36.3836 30.6444 36.3836C29.7139 36.3836 28.9595 35.6292 28.9595 34.6986C28.9595 33.7681 29.7139 33.0137 30.6444 33.0137C31.575 33.0137 32.3294 33.7681 32.3294 34.6986Z"}},{id:"sofaTable",offsetX:480,offsetY:336,width:33,height:20,shape:{type:"Path",data:"M4 5C4 4.44772 4.44772 4 5 4H83C83.5523 4 84 4.44772 84 5V53C84 53.5523 83.5523 54 83 54H5C4.44772 54 4 53.5523 4 53V5Z M4 6.5C4 6.77614 3.77462 7.00425 3.50231 6.95843C3.08607 6.88841 2.68736 6.73099 2.33329 6.49441C1.83994 6.16477 1.45543 5.69623 1.22836 5.14805C1.0013 4.59987 0.94189 3.99667 1.05765 3.41473C1.1734 2.83279 1.45912 2.29824 1.87868 1.87868C2.29824 1.45912 2.83279 1.1734 3.41473 1.05765C3.99667 0.94189 4.59987 1.0013 5.14805 1.22836C5.69623 1.45543 6.16477 1.83994 6.49441 2.33329C6.73099 2.68736 6.88841 3.08607 6.95843 3.50231C7.00424 3.77462 6.77614 4 6.5 4L4.5 4C4.22386 4 4 4.22386 4 4.5L4 6.5Z M81.5 4C81.2239 4 80.9958 3.77462 81.0416 3.50231C81.1116 3.08607 81.269 2.68736 81.5056 2.33329C81.8352 1.83994 82.3038 1.45543 82.852 1.22836C83.4001 1.0013 84.0033 0.94189 84.5853 1.05765C85.1672 1.1734 85.7018 1.45912 86.1213 1.87868C86.5409 2.29824 86.8266 2.83279 86.9424 3.41473C87.0581 3.99667 86.9987 4.59987 86.7716 5.14805C86.5446 5.69623 86.1601 6.16477 85.6667 6.49441C85.3126 6.73099 84.9139 6.88841 84.4977 6.95843C84.2254 7.00424 84 6.77614 84 6.5V4.5C84 4.22386 83.7761 4 83.5 4L81.5 4Z M6.5 54C6.77614 54 7.00425 54.2254 6.95843 54.4977C6.88841 54.9139 6.73099 55.3126 6.49441 55.6667C6.16477 56.1601 5.69623 56.5446 5.14805 56.7716C4.59987 56.9987 3.99667 57.0581 3.41473 56.9424C2.83279 56.8266 2.29824 56.5409 1.87868 56.1213C1.45912 55.7018 1.1734 55.1672 1.05765 54.5853C0.94189 54.0033 1.0013 53.4001 1.22836 52.852C1.45543 52.3038 1.83994 51.8352 2.33329 51.5056C2.68736 51.269 3.08607 51.1116 3.50231 51.0416C3.77462 50.9958 4 51.2239 4 51.5V53.5C4 53.7761 4.22386 54 4.5 54H6.5Z M84 51.5C84 51.2239 84.2254 50.9958 84.4977 51.0416C84.9139 51.1116 85.3126 51.269 85.6667 51.5056C86.1601 51.8352 86.5446 52.3038 86.7716 52.852C86.9987 53.4001 87.0581 54.0033 86.9424 54.5853C86.8266 55.1672 86.5409 55.7018 86.1213 56.1213C85.7018 56.5409 85.1672 56.8266 84.5853 56.9424C84.0033 57.0581 83.4001 56.9987 82.852 56.7716C82.3038 56.5446 81.8352 56.1601 81.5056 55.6667C81.269 55.3126 81.1116 54.9139 81.0416 54.4977C80.9958 54.2254 81.2239 54 81.5 54H83.5C83.7761 54 84 53.7761 84 53.5V51.5Z"}},{id:"flatTV",offsetX:573,offsetY:337,width:68,height:9,rotateAngle:90,shape:{type:"Path",data:"M1 14H92M1 14V19H92V14M1 14V9H92V14M37 1V6M39 1V6M41 1V6M43 1V6M45 1V6M47 1V6M49 1V6M51 1V6M53 1V6M55 1V6M23 1H70L76 6H17L23 1ZM5 6H88V9H5V6Z"}},{id:"plantTable",offsetX:395,offsetY:376,width:33,height:27,shape:{type:"Path",data:"M57 29C57 44.464 44.464 57 29 57C13.536 57 1 44.464 1 29C1 13.536 13.536 1 29 1C44.464 1 57 13.536 57 29Z"}},{id:"plant",offsetX:395,offsetY:376,width:22,height:20,shape:{type:"Path",data:"M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141Z M23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234Z M25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003Z M24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567Z M20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171Z M21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193Z M22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z M40.0382 18.2498C40.7878 20.1543 41.1995 22.2289 41.1995 24.3996C41.1995 24.5507 41.1975 24.7013 41.1935 24.8515M35.2235 11.5507C33.6921 10.2594 31.9267 9.2368 30 8.55572M39 32.7159C37.5069 35.3317 35.3311 37.5074 32.7153 39.0004M24.8419 41.1939C24.6949 41.1977 24.5474 41.1996 24.3995 41.1996C21.7821 41.1996 19.3046 40.6011 17.0963 39.5334M10.7727 34.2278C9.9752 33.1239 9.30848 31.9193 8.79533 30.6367M7.70563 22.5004C7.89672 20.8019 8.34106 19.1801 9 17.6736M13.9123 11.274C16.1576 9.47777 18.8737 8.24563 21.846 7.79239M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141ZM23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234ZM25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003ZM24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567ZM20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171ZM21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193ZM22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z"}},{id:"diningTable",offsetX:370,offsetY:176,width:100,height:90,shape:{type:"Path",data:"M25.0284 6.47992C24.7452 3.54248 27.0543 1 30.0053 1H45.9947C48.9457 1 51.2548 3.54248 50.9716 6.47992L50.15 15L25.85 15L25.0284 6.47992ZM58.0284 6.47992C57.7452 3.54248 60.0543 1 63.0053 1H78.9947C81.9457 1 84.2548 3.54248 83.9716 6.47992L83.15 15L58.85 15L58.0284 6.47992Z M84.9716 73.5201C85.2548 76.4575 82.9457 79 79.9947 79H64.0053C61.0543 79 58.7452 76.4575 59.0284 73.5201L59.85 65H84.15L84.9716 73.5201Z M51.9716 73.5201C52.2548 76.4575 49.9457 79 46.9947 79H31.0053C28.0543 79 25.7452 76.4575 26.0284 73.5201L26.85 65H51.15L51.9716 73.5201Z M6.47992 53.4716C3.54249 53.7548 1 51.4457 1 48.4947L1 32.5053C1 29.5543 3.54249 27.2452 6.47992 27.5284L15 28.35V52.65L6.47992 53.4716Z M103.52 27.5284C106.458 27.2452 109 29.5543 109 32.5053V48.4947C109 51.4457 106.458 53.7548 103.52 53.4716L95 52.65V28.35L103.52 27.5284Z M91 15H19C16.7909 15 15 16.7909 15 19V61C15 63.2091 16.7909 65 19 65H91C93.2091 65 95 63.2091 95 61V19C95 16.7909 93.2091 15 91 15Z M50.15 15V15.5H50.6041L50.6477 15.048L50.15 15ZM25.85 15L25.3523 15.048L25.3959 15.5H25.85V15ZM50.9716 6.47992L50.4739 6.43192L50.9716 6.47992ZM25.0284 6.47992L24.5307 6.52791L25.0284 6.47992ZM32 1V0.5L31.5 0.5V1H32ZM45 1H45.5V0.500001L45 0.500001V1ZM36 6V5.5V6ZM32 2L32.5 2V2H32ZM41 6V6.5V6ZM45 2H45.5H45ZM83.15 15V15.5H83.6041L83.6477 15.048L83.15 15ZM58.85 15L58.3523 15.048L58.3959 15.5H58.85V15ZM83.9716 6.47992L83.4739 6.43192L83.9716 6.47992ZM58.0284 6.47992L58.5261 6.43192L58.0284 6.47992ZM65 1V0.5L64.5 0.5V1H65ZM78 1H78.5V0.500001L78 0.500001V1ZM69 6V5.5V6ZM65 2L65.5 2V2H65ZM74 6V6.5V6ZM78 2H78.5H78ZM59.85 65V64.5H59.3959L59.3523 64.952L59.85 65ZM84.15 65L84.6477 64.952L84.6041 64.5H84.15V65ZM59.0284 73.5201L59.5261 73.5681L59.0284 73.5201ZM84.9716 73.5201L84.4739 73.5681L84.9716 73.5201ZM78 79V79.5H78.5V79H78ZM65 79H64.5V79.5H65V79ZM74 74V73.5V74ZM78 78H77.5H78ZM69 74V74.5V74ZM65 78H64.5H65ZM26.85 65V64.5H26.3959L26.3523 64.952L26.85 65ZM51.15 65L51.6477 64.952L51.6041 64.5H51.15V65ZM26.0284 73.5201L26.5261 73.5681L26.0284 73.5201ZM51.9716 73.5201L51.4739 73.5681L51.9716 73.5201ZM15 28.35H15.5V27.8959L15.048 27.8523L15 28.35ZM15 52.65L15.048 53.1477L15.5 53.1041V52.65H15ZM1 32.5053H0.500002H1ZM6.47992 27.5284L6.43193 28.0261L6.47992 27.5284ZM1 48.4947H1.5H1ZM6.47992 53.4716L6.43192 52.9739L6.47992 53.4716ZM45 79V79.5H45.5V79H45ZM32 79H31.5V79.5H32V79ZM41 74V73.5V74ZM45 78H44.5H45ZM36 74V74.5V74ZM32 78H31.5H32ZM1 47H0.5L0.5 47.5H1V47ZM1 34V33.5H0.500002L0.500002 34H1ZM6 43H6.5H6ZM2 47L2 46.5H2V47ZM6 38H5.5H6ZM2 34V33.5V34ZM95 52.65H94.5V53.1041L94.952 53.1477L95 52.65ZM95 28.35L94.952 27.8523L94.5 27.8959V28.35H95ZM109 48.4947H109.5H109ZM103.52 53.4716L103.472 53.9693L103.52 53.4716ZM109 32.5053H108.5H109ZM103.52 27.5284L103.568 28.0261L103.52 27.5284ZM109 34H109.5V33.5H109V34ZM109 47V47.5H109.5V47H109ZM104 38H103.5H104ZM108 34V34.5V34ZM104 43H104.5H104ZM108 47V47.5V47ZM30.0053 1.5H45.9947V0.5H30.0053V1.5ZM50.4739 6.43192L49.6523 14.952L50.6477 15.048L51.4693 6.52791L50.4739 6.43192ZM50.15 14.5L25.85 14.5V15.5L50.15 15.5V14.5ZM26.3477 14.952L25.5261 6.43192L24.5307 6.52791L25.3523 15.048L26.3477 14.952ZM45.9947 1.5C48.6506 1.5 50.7288 3.78824 50.4739 6.43192L51.4693 6.52791C51.7808 3.29673 49.2408 0.5 45.9947 0.5V1.5ZM30.0053 0.5C26.7592 0.5 24.2192 3.29673 24.5307 6.52791L25.5261 6.43192C25.2712 3.78824 27.3494 1.5 30.0053 1.5V0.5ZM41 5.5L36 5.5V6.5L41 6.5V5.5ZM32.5 2V1H31.5V2H32.5ZM32 1.5L45 1.5V0.500001L32 0.5V1.5ZM44.5 1V2H45.5V1H44.5ZM36 5.5C34.067 5.5 32.5 3.933 32.5 2L31.5 2C31.5 4.48528 33.5147 6.5 36 6.5V5.5ZM41 6.5C43.4853 6.5 45.5 4.48528 45.5 2H44.5C44.5 3.933 42.933 5.5 41 5.5V6.5ZM63.0053 1.5H78.9947V0.5H63.0053V1.5ZM83.4739 6.43192L82.6523 14.952L83.6477 15.048L84.4693 6.52791L83.4739 6.43192ZM83.15 14.5L58.85 14.5V15.5L83.15 15.5V14.5ZM59.3477 14.952L58.5261 6.43192L57.5307 6.52791L58.3523 15.048L59.3477 14.952ZM78.9947 1.5C81.6506 1.5 83.7288 3.78824 83.4739 6.43192L84.4693 6.52791C84.7809 3.29673 82.2408 0.5 78.9947 0.5V1.5ZM63.0053 0.5C59.7592 0.5 57.2192 3.29673 57.5307 6.52791L58.5261 6.43192C58.2712 3.78824 60.3494 1.5 63.0053 1.5V0.5ZM74 5.5L69 5.5V6.5L74 6.5V5.5ZM65.5 2V1H64.5V2H65.5ZM65 1.5L78 1.5V0.500001L65 0.5V1.5ZM77.5 1V2H78.5V1H77.5ZM69 5.5C67.067 5.5 65.5 3.933 65.5 2L64.5 2C64.5 4.48528 66.5147 6.5 69 6.5V5.5ZM74 6.5C76.4853 6.5 78.5 4.48528 78.5 2H77.5C77.5 3.933 75.933 5.5 74 5.5V6.5ZM79.9947 78.5H64.0053V79.5H79.9947V78.5ZM59.5261 73.5681L60.3477 65.048L59.3523 64.952L58.5307 73.4721L59.5261 73.5681ZM59.85 65.5H84.15V64.5H59.85V65.5ZM83.6523 65.048L84.4739 73.5681L85.4693 73.4721L84.6477 64.952L83.6523 65.048ZM64.0053 78.5C61.3494 78.5 59.2712 76.2118 59.5261 73.5681L58.5307 73.4721C58.2192 76.7033 60.7592 79.5 64.0053 79.5V78.5ZM79.9947 79.5C83.2408 79.5 85.7809 76.7033 85.4693 73.4721L84.4739 73.5681C84.7288 76.2118 82.6506 78.5 79.9947 78.5V79.5ZM69 74.5H74V73.5H69V74.5ZM77.5 78V79H78.5V78H77.5ZM78 78.5H65V79.5H78V78.5ZM65.5 79V78H64.5V79H65.5ZM74 74.5C75.933 74.5 77.5 76.067 77.5 78H78.5C78.5 75.5147 76.4853 73.5 74 73.5V74.5ZM69 73.5C66.5147 73.5 64.5 75.5147 64.5 78H65.5C65.5 76.067 67.067 74.5 69 74.5V73.5ZM46.9947 78.5H31.0053V79.5H46.9947V78.5ZM26.5261 73.5681L27.3477 65.048L26.3523 64.952L25.5307 73.4721L26.5261 73.5681ZM26.85 65.5H51.15V64.5H26.85V65.5ZM50.6523 65.048L51.4739 73.5681L52.4693 73.4721L51.6477 64.952L50.6523 65.048ZM31.0053 78.5C28.3494 78.5 26.2712 76.2118 26.5261 73.5681L25.5307 73.4721C25.2192 76.7033 27.7592 79.5 31.0053 79.5V78.5ZM46.9947 79.5C50.2408 79.5 52.7808 76.7033 52.4693 73.4721L51.4739 73.5681C51.7288 76.2118 49.6506 78.5 46.9947 78.5V79.5ZM1.5 48.4947L1.5 32.5053H0.500002L0.500001 48.4947H1.5ZM6.43193 28.0261L14.952 28.8477L15.048 27.8523L6.52791 27.0307L6.43193 28.0261ZM14.5 28.35V52.65H15.5V28.35H14.5ZM14.952 52.1523L6.43192 52.9739L6.52791 53.9693L15.048 53.1477L14.952 52.1523ZM1.5 32.5053C1.5 29.8494 3.78824 27.7712 6.43193 28.0261L6.52791 27.0307C3.29674 26.7192 0.500002 29.2592 0.500002 32.5053H1.5ZM0.500001 48.4947C0.500001 51.7408 3.29673 54.2808 6.52791 53.9693L6.43192 52.9739C3.78824 53.2288 1.5 51.1506 1.5 48.4947H0.500001ZM36 74.5H41V73.5H36V74.5ZM44.5 78V79H45.5V78H44.5ZM45 78.5H32V79.5H45V78.5ZM32.5 79V78H31.5V79H32.5ZM41 74.5C42.933 74.5 44.5 76.067 44.5 78H45.5C45.5 75.5147 43.4853 73.5 41 73.5V74.5ZM36 73.5C33.5147 73.5 31.5 75.5147 31.5 78H32.5C32.5 76.067 34.067 74.5 36 74.5V73.5ZM5.5 38L5.5 43H6.5L6.5 38H5.5ZM2 46.5H1V47.5H2V46.5ZM1.5 47L1.5 34H0.500002L0.5 47H1.5ZM1 34.5H2V33.5H1V34.5ZM5.5 43C5.5 44.933 3.933 46.5 2 46.5L2 47.5C4.48528 47.5 6.5 45.4853 6.5 43H5.5ZM6.5 38C6.5 35.5147 4.48528 33.5 2 33.5L2 34.5C3.933 34.5 5.5 36.067 5.5 38H6.5ZM108.5 32.5053V48.4947H109.5V32.5053H108.5ZM103.568 52.9739L95.048 52.1523L94.952 53.1477L103.472 53.9693L103.568 52.9739ZM95.5 52.65V28.35H94.5V52.65H95.5ZM95.048 28.8477L103.568 28.0261L103.472 27.0307L94.952 27.8523L95.048 28.8477ZM108.5 48.4947C108.5 51.1506 106.212 53.2288 103.568 52.9739L103.472 53.9693C106.703 54.2808 109.5 51.7408 109.5 48.4947H108.5ZM109.5 32.5053C109.5 29.2592 106.703 26.7192 103.472 27.0307L103.568 28.0261C106.212 27.7712 108.5 29.8494 108.5 32.5053H109.5ZM104.5 43V38H103.5V43H104.5ZM108 34.5H109V33.5H108V34.5ZM108.5 34V47H109.5V34H108.5ZM109 46.5H108V47.5H109V46.5ZM104.5 38C104.5 36.067 106.067 34.5 108 34.5V33.5C105.515 33.5 103.5 35.5147 103.5 38H104.5ZM103.5 43C103.5 45.4853 105.515 47.5 108 47.5V46.5C106.067 46.5 104.5 44.933 104.5 43H103.5ZM19 15.5H91V14.5H19V15.5ZM94.5 19V61H95.5V19H94.5ZM91 64.5H19V65.5H91V64.5ZM15.5 61V19H14.5V61H15.5ZM19 64.5C17.067 64.5 15.5 62.933 15.5 61H14.5C14.5 63.4853 16.5147 65.5 19 65.5V64.5ZM94.5 61C94.5 62.933 92.933 64.5 91 64.5V65.5C93.4853 65.5 95.5 63.4853 95.5 61H94.5ZM91 15.5C92.933 15.5 94.5 17.067 94.5 19H95.5C95.5 16.5147 93.4853 14.5 91 14.5V15.5ZM19 14.5C16.5147 14.5 14.5 16.5147 14.5 19H15.5C15.5 17.067 17.067 15.5 19 15.5V14.5Z"}},{id:"room3Door",offsetX:607,offsetY:298,width:52,height:38,rotateAngle:180,shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"room3Window",offsetX:740,offsetY:480,width:80,height:4,shape:{type:"Path",data:"M22 5.5L124 5.50001M145 9L128 9V1L145 1V9ZM1 1L18 1L18 9L1 9L1 1ZM128 8L124 8V2L128 2V8ZM18 2L22 2L22 8L18 8L18 2Z"}},{id:"room3Bed",offsetX:812,offsetY:385,width:68,height:87,rotateAngle:90,shape:{type:"Path",data:"M1 54V2C1 1.44772 1.44772 1 2 1H44C44.5523 1 45 1.44771 45 2V54C45 54.5523 44.5523 55 44 55H2C1.44772 55 1 54.5523 1 54Z  M8 14V8C8 7.44772 8.44772 7 9 7H19C19.5523 7 20 7.44772 20 8V14C20 14.5523 19.5523 15 19 15H9C8.44772 15 8 14.5523 8 14Z M26 14V8C26 7.44772 26.4477 7 27 7H37C37.5523 7 38 7.44772 38 8V14C38 14.5523 37.5523 15 37 15H27C26.4477 15 26 14.5523 26 14Z M0.5 2V54H1.5V2H0.5ZM2 55.5H44V54.5H2V55.5ZM45.5 54V2H44.5V54H45.5ZM2 1.5H44V0.5H2V1.5ZM45.5 2C45.5 1.17157 44.8284 0.5 44 0.5V1.5C44.2761 1.5 44.5 1.72386 44.5 2H45.5ZM44 55.5C44.8284 55.5 45.5 54.8284 45.5 54H44.5C44.5 54.2761 44.2761 54.5 44 54.5V55.5ZM0.5 54C0.5 54.8284 1.17157 55.5 2 55.5V54.5C1.72386 54.5 1.5 54.2761 1.5 54H0.5ZM1.5 2C1.5 1.72386 1.72386 1.5 2 1.5V0.5C1.17157 0.5 0.5 1.17157 0.5 2H1.5ZM1 21.5H45V20.5H1V21.5ZM7.5 8V14H8.5V8H7.5ZM9 15.5H19V14.5H9V15.5ZM20.5 14V8H19.5V14H20.5ZM19 6.5H9V7.5H19V6.5ZM20.5 8C20.5 7.17157 19.8284 6.5 19 6.5V7.5C19.2761 7.5 19.5 7.72386 19.5 8H20.5ZM19 15.5C19.8284 15.5 20.5 14.8284 20.5 14H19.5C19.5 14.2761 19.2761 14.5 19 14.5V15.5ZM7.5 14C7.5 14.8284 8.17157 15.5 9 15.5V14.5C8.72386 14.5 8.5 14.2761 8.5 14H7.5ZM8.5 8C8.5 7.72386 8.72386 7.5 9 7.5V6.5C8.17157 6.5 7.5 7.17157 7.5 8H8.5ZM25.5 8V14H26.5V8H25.5ZM27 15.5H37V14.5H27V15.5ZM38.5 14V8H37.5V14H38.5ZM37 6.5H27V7.5H37V6.5ZM38.5 8C38.5 7.17157 37.8284 6.5 37 6.5V7.5C37.2761 7.5 37.5 7.72386 37.5 8H38.5ZM37 15.5C37.8284 15.5 38.5 14.8284 38.5 14H37.5C37.5 14.2761 37.2761 14.5 37 14.5V15.5ZM25.5 14C25.5 14.8284 26.1716 15.5 27 15.5V14.5C26.7239 14.5 26.5 14.2761 26.5 14H25.5ZM26.5 8C26.5 7.72386 26.7239 7.5 27 7.5V6.5C26.1716 6.5 25.5 7.17157 25.5 8H26.5Z"}},{id:"room3Table",offsetX:842,offsetY:325,width:26,height:28,shape:{type:"Path",data:"M79 1H3C1.89543 1 1 1.89543 1 3V49C1 50.1046 1.89543 51 3 51H79C80.1046 51 81 50.1046 81 49V3C81 1.89543 80.1046 1 79 1Z"}},{id:"room3PotTable",offsetX:841,offsetY:455,width:30,height:30,shape:{type:"Path",data:"M57 29C57 44.464 44.464 57 29 57C13.536 57 1 44.464 1 29C1 13.536 13.536 1 29 1C44.464 1 57 13.536 57 29Z"}},{id:"room3FlowerPot",offsetX:841,offsetY:455,width:25,height:25,shape:{type:"Path",data:"M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141Z M23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234Z M25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003Z M24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567Z M20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171Z M21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193Z M22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z M40.0382 18.2498C40.7878 20.1543 41.1995 22.2289 41.1995 24.3996C41.1995 24.5507 41.1975 24.7013 41.1935 24.8515M35.2235 11.5507C33.6921 10.2594 31.9267 9.2368 30 8.55572M39 32.7159C37.5069 35.3317 35.3311 37.5074 32.7153 39.0004M24.8419 41.1939C24.6949 41.1977 24.5474 41.1996 24.3995 41.1996C21.7821 41.1996 19.3046 40.6011 17.0963 39.5334M10.7727 34.2278C9.9752 33.1239 9.30848 31.9193 8.79533 30.6367M7.70563 22.5004C7.89672 20.8019 8.34106 19.1801 9 17.6736M13.9123 11.274C16.1576 9.47777 18.8737 8.24563 21.846 7.79239M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141ZM23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234ZM25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003ZM24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567ZM20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171ZM21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193ZM22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z"}},{id:"room3Bookcase",offsetX:592,offsetY:370,width:63,height:25,rotateAngle:-90,shape:{type:"Path",data:"M113 9V1H1V9M113 9H1M113 9V29H1V9M4 12H11V25H4V12ZM13 12H20V25H13V12ZM22 12H29V25H22V12ZM31 12H38V25H31V12ZM40 12H47V25H40V12ZM49 12H56V25H49V12ZM58 12H65V25H58V12ZM67 12H74V25H67V12ZM76 12H83V25H76V12ZM85 12H92V25H85V12ZM94 12H101V25H94V12ZM103 12H110V25H103V12Z"}},{id:"room3WorkTable",offsetX:600,offsetY:435,width:41,height:30,rotateAngle:90,shape:{type:"Path",data:"M4 5C4 4.44772 4.44772 4 5 4H83C83.5523 4 84 4.44772 84 5V53C84 53.5523 83.5523 54 83 54H5C4.44772 54 4 53.5523 4 53V5Z M4 6.5C4 6.77614 3.77462 7.00425 3.50231 6.95843C3.08607 6.88841 2.68736 6.73099 2.33329 6.49441C1.83994 6.16477 1.45543 5.69623 1.22836 5.14805C1.0013 4.59987 0.94189 3.99667 1.05765 3.41473C1.1734 2.83279 1.45912 2.29824 1.87868 1.87868C2.29824 1.45912 2.83279 1.1734 3.41473 1.05765C3.99667 0.94189 4.59987 1.0013 5.14805 1.22836C5.69623 1.45543 6.16477 1.83994 6.49441 2.33329C6.73099 2.68736 6.88841 3.08607 6.95843 3.50231C7.00424 3.77462 6.77614 4 6.5 4L4.5 4C4.22386 4 4 4.22386 4 4.5L4 6.5Z M81.5 4C81.2239 4 80.9958 3.77462 81.0416 3.50231C81.1116 3.08607 81.269 2.68736 81.5056 2.33329C81.8352 1.83994 82.3038 1.45543 82.852 1.22836C83.4001 1.0013 84.0033 0.94189 84.5853 1.05765C85.1672 1.1734 85.7018 1.45912 86.1213 1.87868C86.5409 2.29824 86.8266 2.83279 86.9424 3.41473C87.0581 3.99667 86.9987 4.59987 86.7716 5.14805C86.5446 5.69623 86.1601 6.16477 85.6667 6.49441C85.3126 6.73099 84.9139 6.88841 84.4977 6.95843C84.2254 7.00424 84 6.77614 84 6.5V4.5C84 4.22386 83.7761 4 83.5 4L81.5 4Z M6.5 54C6.77614 54 7.00425 54.2254 6.95843 54.4977C6.88841 54.9139 6.73099 55.3126 6.49441 55.6667C6.16477 56.1601 5.69623 56.5446 5.14805 56.7716C4.59987 56.9987 3.99667 57.0581 3.41473 56.9424C2.83279 56.8266 2.29824 56.5409 1.87868 56.1213C1.45912 55.7018 1.1734 55.1672 1.05765 54.5853C0.94189 54.0033 1.0013 53.4001 1.22836 52.852C1.45543 52.3038 1.83994 51.8352 2.33329 51.5056C2.68736 51.269 3.08607 51.1116 3.50231 51.0416C3.77462 50.9958 4 51.2239 4 51.5V53.5C4 53.7761 4.22386 54 4.5 54H6.5Z M84 51.5C84 51.2239 84.2254 50.9958 84.4977 51.0416C84.9139 51.1116 85.3126 51.269 85.6667 51.5056C86.1601 51.8352 86.5446 52.3038 86.7716 52.852C86.9987 53.4001 87.0581 54.0033 86.9424 54.5853C86.8266 55.1672 86.5409 55.7018 86.1213 56.1213C85.7018 56.5409 85.1672 56.8266 84.5853 56.9424C84.0033 57.0581 83.4001 56.9987 82.852 56.7716C82.3038 56.5446 81.8352 56.1601 81.5056 55.6667C81.269 55.3126 81.1116 54.9139 81.0416 54.4977C80.9958 54.2254 81.2239 54 81.5 54H83.5C83.7761 54 84 53.7761 84 53.5V51.5Z"}},{id:"room3Laptop",offsetX:600,offsetY:435,width:30,height:17,rotateAngle:270,shape:{type:"Path",data:"M1.06567 5.71554C0.619244 3.26018 2.50554 1 5.00115 1H61.0006C63.4675 1 65.3464 3.21135 64.9481 5.64595L61.7571 25.146C61.4407 27.08 59.7695 28.5 57.8096 28.5H8.54661C6.61347 28.5 4.95694 27.1175 4.61113 25.2155L1.06567 5.71554Z M3.7083 33C3.7083 30.7909 5.49916 29 7.7083 29H58.7083C60.9174 29 62.7083 30.7909 62.7083 33V55C62.7083 57.2091 60.9174 59 58.7083 59H7.7083C5.49916 59 3.7083 57.2091 3.7083 55V33Z M26.7083 50C26.7083 49.4477 27.156 49 27.7083 49H38.7083C39.2606 49 39.7083 49.4477 39.7083 50V54C39.7083 54.5523 39.2606 55 38.7083 55H27.7083C27.156 55 26.7083 54.5523 26.7083 54V50Z M8.7083 35.5C8.7083 35.2239 8.93216 35 9.2083 35H12.2083C12.4844 35 12.7083 35.2239 12.7083 35.5V36.5C12.7083 36.7761 12.4844 37 12.2083 37H9.2083C8.93216 37 8.7083 36.7761 8.7083 36.5V35.5Z M8.7083 38.5C8.7083 38.2239 8.93216 38 9.2083 38H12.2083C12.4844 38 12.7083 38.2239 12.7083 38.5V39.5C12.7083 39.7761 12.4844 40 12.2083 40H9.2083C8.93216 40 8.7083 39.7761 8.7083 39.5V38.5Z M8.7083 41.5C8.7083 41.2239 8.93216 41 9.2083 41H12.2083C12.4844 41 12.7083 41.2239 12.7083 41.5V42.5C12.7083 42.7761 12.4844 43 12.2083 43H9.2083C8.93216 43 8.7083 42.7761 8.7083 42.5V41.5Z M8.7083 44.5C8.7083 44.2239 8.93216 44 9.2083 44H12.2083C12.4844 44 12.7083 44.2239 12.7083 44.5V45.5C12.7083 45.7761 12.4844 46 12.2083 46H9.2083C8.93216 46 8.7083 45.7761 8.7083 45.5V44.5Z M13.7083 35.5C13.7083 35.2239 13.9322 35 14.2083 35H17.2083C17.4844 35 17.7083 35.2239 17.7083 35.5V36.5C17.7083 36.7761 17.4844 37 17.2083 37H14.2083C13.9322 37 13.7083 36.7761 13.7083 36.5V35.5Z M13.7083 38.5C13.7083 38.2239 13.9322 38 14.2083 38H17.2083C17.4844 38 17.7083 38.2239 17.7083 38.5V39.5C17.7083 39.7761 17.4844 40 17.2083 40H14.2083C13.9322 40 13.7083 39.7761 13.7083 39.5V38.5Z M13.7083 41.5C13.7083 41.2239 13.9322 41 14.2083 41H17.2083C17.4844 41 17.7083 41.2239 17.7083 41.5V42.5C17.7083 42.7761 17.4844 43 17.2083 43H14.2083C13.9322 43 13.7083 42.7761 13.7083 42.5V41.5Z M13.7083 44.5C13.7083 44.2239 13.9322 44 14.2083 44H17.2083C17.4844 44 17.7083 44.2239 17.7083 44.5V45.5C17.7083 45.7761 17.4844 46 17.2083 46H14.2083C13.9322 46 13.7083 45.7761 13.7083 45.5V44.5Z M18.7083 35.5C18.7083 35.2239 18.9322 35 19.2083 35H22.2083C22.4844 35 22.7083 35.2239 22.7083 35.5V36.5C22.7083 36.7761 22.4844 37 22.2083 37H19.2083C18.9322 37 18.7083 36.7761 18.7083 36.5V35.5Z M18.7083 38.5C18.7083 38.2239 18.9322 38 19.2083 38H22.2083C22.4844 38 22.7083 38.2239 22.7083 38.5V39.5C22.7083 39.7761 22.4844 40 22.2083 40H19.2083C18.9322 40 18.7083 39.7761 18.7083 39.5V38.5Z M18.7083 41.5C18.7083 41.2239 18.9322 41 19.2083 41H22.2083C22.4844 41 22.7083 41.2239 22.7083 41.5V42.5C22.7083 42.7761 22.4844 43 22.2083 43H19.2083C18.9322 43 18.7083 42.7761 18.7083 42.5V41.5Z M18.7083 44.5C18.7083 44.2239 18.9322 44 19.2083 44H22.2083C22.4844 44 22.7083 44.2239 22.7083 44.5V45.5C22.7083 45.7761 22.4844 46 22.2083 46H19.2083C18.9322 46 18.7083 45.7761 18.7083 45.5V44.5Z M23.7083 35.5C23.7083 35.2239 23.9322 35 24.2083 35H27.2083C27.4844 35 27.7083 35.2239 27.7083 35.5V36.5C27.7083 36.7761 27.4844 37 27.2083 37H24.2083C23.9322 37 23.7083 36.7761 23.7083 36.5V35.5Z M23.7083 38.5C23.7083 38.2239 23.9322 38 24.2083 38H27.2083C27.4844 38 27.7083 38.2239 27.7083 38.5V39.5C27.7083 39.7761 27.4844 40 27.2083 40H24.2083C23.9322 40 23.7083 39.7761 23.7083 39.5V38.5Z M23.7083 41.5C23.7083 41.2239 23.9322 41 24.2083 41H27.2083C27.4844 41 27.7083 41.2239 27.7083 41.5V42.5C27.7083 42.7761 27.4844 43 27.2083 43H24.2083C23.9322 43 23.7083 42.7761 23.7083 42.5V41.5Z M23.7083 44.5C23.7083 44.2239 23.9322 44 24.2083 44H42.2083C42.4844 44 42.7083 44.2239 42.7083 44.5V45.5C42.7083 45.7761 42.4844 46 42.2083 46H24.2083C23.9322 46 23.7083 45.7761 23.7083 45.5V44.5Z M28.7083 35.5C28.7083 35.2239 28.9322 35 29.2083 35H32.2083C32.4844 35 32.7083 35.2239 32.7083 35.5V36.5C32.7083 36.7761 32.4844 37 32.2083 37H29.2083C28.9322 37 28.7083 36.7761 28.7083 36.5V35.5Z M28.7083 38.5C28.7083 38.2239 28.9322 38 29.2083 38H32.2083C32.4844 38 32.7083 38.2239 32.7083 38.5V39.5C32.7083 39.7761 32.4844 40 32.2083 40H29.2083C28.9322 40 28.7083 39.7761 28.7083 39.5V38.5Z M28.7083 41.5C28.7083 41.2239 28.9322 41 29.2083 41H32.2083C32.4844 41 32.7083 41.2239 32.7083 41.5V42.5C32.7083 42.7761 32.4844 43 32.2083 43H29.2083C28.9322 43 28.7083 42.7761 28.7083 42.5V41.5Z M33.7083 35.5C33.7083 35.2239 33.9322 35 34.2083 35H37.2083C37.4844 35 37.7083 35.2239 37.7083 35.5V36.5C37.7083 36.7761 37.4844 37 37.2083 37H34.2083C33.9322 37 33.7083 36.7761 33.7083 36.5V35.5Z M33.7083 38.5C33.7083 38.2239 33.9322 38 34.2083 38H37.2083C37.4844 38 37.7083 38.2239 37.7083 38.5V39.5C37.7083 39.7761 37.4844 40 37.2083 40H34.2083C33.9322 40 33.7083 39.7761 33.7083 39.5V38.5Z M33.7083 41.5C33.7083 41.2239 33.9322 41 34.2083 41H37.2083C37.4844 41 37.7083 41.2239 37.7083 41.5V42.5C37.7083 42.7761 37.4844 43 37.2083 43H34.2083C33.9322 43 33.7083 42.7761 33.7083 42.5V41.5Z M38.7083 35.5C38.7083 35.2239 38.9322 35 39.2083 35H42.2083C42.4844 35 42.7083 35.2239 42.7083 35.5V36.5C42.7083 36.7761 42.4844 37 42.2083 37H39.2083C38.9322 37 38.7083 36.7761 38.7083 36.5V35.5Z M38.7083 38.5C38.7083 38.2239 38.9322 38 39.2083 38H42.2083C42.4844 38 42.7083 38.2239 42.7083 38.5V39.5C42.7083 39.7761 42.4844 40 42.2083 40H39.2083C38.9322 40 38.7083 39.7761 38.7083 39.5V38.5Z M38.7083 41.5C38.7083 41.2239 38.9322 41 39.2083 41H42.2083C42.4844 41 42.7083 41.2239 42.7083 41.5V42.5C42.7083 42.7761 42.4844 43 42.2083 43H39.2083C38.9322 43 38.7083 42.7761 38.7083 42.5V41.5Z M43.7083 35.5C43.7083 35.2239 43.9322 35 44.2083 35H47.2083C47.4844 35 47.7083 35.2239 47.7083 35.5V36.5C47.7083 36.7761 47.4844 37 47.2083 37H44.2083C43.9322 37 43.7083 36.7761 43.7083 36.5V35.5Z M43.7083 38.5C43.7083 38.2239 43.9322 38 44.2083 38H47.2083C47.4844 38 47.7083 38.2239 47.7083 38.5V39.5C47.7083 39.7761 47.4844 40 47.2083 40H44.2083C43.9322 40 43.7083 39.7761 43.7083 39.5V38.5Z M43.7083 41.5C43.7083 41.2239 43.9322 41 44.2083 41H47.2083C47.4844 41 47.7083 41.2239 47.7083 41.5V42.5C47.7083 42.7761 47.4844 43 47.2083 43H44.2083C43.9322 43 43.7083 42.7761 43.7083 42.5V41.5Z M43.7083 44.5C43.7083 44.2239 43.9322 44 44.2083 44H47.2083C47.4844 44 47.7083 44.2239 47.7083 44.5V45.5C47.7083 45.7761 47.4844 46 47.2083 46H44.2083C43.9322 46 43.7083 45.7761 43.7083 45.5V44.5Z M48.7083 35.5C48.7083 35.2239 48.9322 35 49.2083 35H52.2083C52.4844 35 52.7083 35.2239 52.7083 35.5V36.5C52.7083 36.7761 52.4844 37 52.2083 37H49.2083C48.9322 37 48.7083 36.7761 48.7083 36.5V35.5Z M48.7083 38.5C48.7083 38.2239 48.9322 38 49.2083 38H52.2083C52.4844 38 52.7083 38.2239 52.7083 38.5V39.5C52.7083 39.7761 52.4844 40 52.2083 40H49.2083C48.9322 40 48.7083 39.7761 48.7083 39.5V38.5Z M48.7083 41.5C48.7083 41.2239 48.9322 41 49.2083 41H52.2083C52.4844 41 52.7083 41.2239 52.7083 41.5V42.5C52.7083 42.7761 52.4844 43 52.2083 43H49.2083C48.9322 43 48.7083 42.7761 48.7083 42.5V41.5Z M48.7083 44.5C48.7083 44.2239 48.9322 44 49.2083 44H52.2083C52.4844 44 52.7083 44.2239 52.7083 44.5V45.5C52.7083 45.7761 52.4844 46 52.2083 46H49.2083C48.9322 46 48.7083 45.7761 48.7083 45.5V44.5Z M53.7083 35.5C53.7083 35.2239 53.9322 35 54.2083 35H57.2083C57.4844 35 57.7083 35.2239 57.7083 35.5V36.5C57.7083 36.7761 57.4844 37 57.2083 37H54.2083C53.9322 37 53.7083 36.7761 53.7083 36.5V35.5Z M53.7083 38.5C53.7083 38.2239 53.9322 38 54.2083 38H57.2083C57.4844 38 57.7083 38.2239 57.7083 38.5V39.5C57.7083 39.7761 57.4844 40 57.2083 40H54.2083C53.9322 40 53.7083 39.7761 53.7083 39.5V38.5Z M53.7083 41.5C53.7083 41.2239 53.9322 41 54.2083 41H57.2083C57.4844 41 57.7083 41.2239 57.7083 41.5V42.5C57.7083 42.7761 57.4844 43 57.2083 43H54.2083C53.9322 43 53.7083 42.7761 53.7083 42.5V41.5Z M53.7083 44.5C53.7083 44.2239 53.9322 44 54.2083 44H57.2083C57.4844 44 57.7083 44.2239 57.7083 44.5V45.5C57.7083 45.7761 57.4844 46 57.2083 46H54.2083C53.9322 46 53.7083 45.7761 53.7083 45.5V44.5Z"}},{id:"room3Chair",offsetX:635,offsetY:435,width:28,height:32,rotateAngle:90,shape:{type:"Path",data:"M22 9V14M28 9.08984V14M13 54H37C41.4183 54 45 50.4183 45 46V22C45 17.5817 41.4183 14 37 14H13C8.58172 14 5 17.5817 5 22V46C5 50.4183 8.58172 54 13 54ZM3 45C1.89543 45 1 44.1046 1 43V25C1 23.8954 1.89543 23 3 23C4.10457 23 5 23.8954 5 25V43C5 44.1046 4.10457 45 3 45ZM11 5.79143C11 3.97975 12.2614 2.40196 14.0423 2.06981C22.0186 0.582241 27.6274 0.696364 35.7954 2.09976C37.6588 2.41991 39 4.05364 39 5.94429C39 8.4118 36.7616 10.2627 34.325 9.87346C27.5467 8.79067 22.4382 8.5351 15.7921 9.68406C13.3336 10.1091 11 8.28636 11 5.79143ZM47 45C45.8954 45 45 44.1046 45 43V25C45 23.8954 45.8954 23 47 23C48.1046 23 49 23.8954 49 25V43C49 44.1046 48.1046 45 47 45Z"}},{id:"room3Lamp",offsetX:842,offsetY:325,width:20,height:20,shape:{type:"Path",data:"M17 7C11.4772 7 7 11.4772 7 17C7 22.5228 11.4772 27 17 27C22.5228 27 27 22.5228 27 17C27 11.4772 22.5228 7 17 7ZM17 7V13.5M20.2363 18.5593L25.3654 21.3093M13.7544 18.4305L8.2541 21.6805M33 17C33 25.8366 25.8366 33 17 33C8.16344 33 1 25.8366 1 17C1 8.16344 8.16344 1 17 1C25.8366 1 33 8.16344 33 17ZM25.5 17C25.5 21.6944 21.6944 25.5 17 25.5C12.3056 25.5 8.5 21.6944 8.5 17C8.5 12.3056 12.3056 8.5 17 8.5C21.6944 8.5 25.5 12.3056 25.5 17ZM21 17C21 19.2091 19.2091 21 17 21C14.7909 21 13 19.2091 13 17C13 14.7909 14.7909 13 17 13C19.2091 13 21 14.7909 21 17Z"}},{id:"room3Warddrobe",offsetX:740,offsetY:304,width:73,height:35,shape:{type:"Path",data:"M50.6443 54.406L76 29L80.9998 28.9502H85.9996L55.594 59.3558L50.6443 54.406Z M12 29L36.9996 54.4053L32.0498 59.3551L2 29H12Z M70.7969 44.8594C70.6017 44.6642 70.6017 44.3476 70.7969 44.1523C70.9922 43.957 71.3088 43.957 71.504 44.1523L72.9182 45.5665C73.1135 45.7618 73.1135 46.0784 72.9182 46.2736C72.723 46.4689 72.4064 46.4689 72.2111 46.2736L70.7969 44.8594Z M16.1406 44.1524C16.3358 43.9571 16.6524 43.9571 16.8477 44.1524C17.043 44.3476 17.043 44.6642 16.8477 44.8595L15.4335 46.2737C15.2382 46.469 14.9216 46.469 14.7264 46.2737C14.5311 46.0784 14.5311 45.7619 14.7264 45.5666L16.1406 44.1524Z M1 1L87 1V29H1L1 1Z"}},{id:"room3ToiletDoor",offsetX:843,offsetY:266,width:27,height:30,shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"toilet3BathTub",offsetX:780,offsetY:245,width:50,height:25,rotateAngle:90,shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H84C88.4183 1 92 4.58172 92 9V40C92 44.4183 88.4183 48 84 48H9C4.58172 48 1 44.4183 1 40V9Z M12 24.5C12 14.2827 20.2827 6 30.5 6H61.5C71.7173 6 80 14.2827 80 24.5C80 34.7173 71.7173 43 61.5 43H30.5C20.2827 43 12 34.7173 12 24.5Z M11.5 26.5C11.5 26.5 12 26 12 25C12 24 11.5 23.5 11.5 23.5L22.0074 22.6917C23.3519 22.5883 24.5 23.6514 24.5 25C24.5 26.3486 23.3519 27.4117 22.0074 27.3083L11.5 26.5Z M8 21.5C9.933 21.5 11.5 23.067 11.5 25C11.5 26.933 9.933 28.5 8 28.5C6.067 28.5 4.5 26.933 4.5 25C4.5 23.067 6.067 21.5 8 21.5Z"}},{id:"toilet3Basin",offsetX:842,offsetY:196,width:30,height:25,rotateAngle:90,shape:{type:"Path",data:"M1 4C1 2.34315 2.34315 1 4 1H62C63.6569 1 65 2.34315 65 4V25C65 38.2548 54.2548 49 41 49H25C11.7452 49 1 38.2548 1 25V4Z M57 25C57 33.2843 46.2548 40 33 40C19.7452 40 9 33.2843 9 25C9 16.7157 19.7452 10 33 10C46.2548 10 57 16.7157 57 25Z M31 10C31 10 31.5 10.5 32.5 10.5C33.5 10.5 34 10 34 10L34.8083 20.5074C34.9117 21.8519 33.8486 23 32.5 23C31.1514 23 30.0883 21.8519 30.1917 20.5074L31 10Z M36 6.5C36 8.433 34.433 10 32.5 10C30.567 10 29 8.433 29 6.5C29 4.567 30.567 3 32.5 3C34.433 3 36 4.567 36 6.5Z M35 28.5C35 29.8807 33.8807 31 32.5 31C31.1193 31 30 29.8807 30 28.5C30 27.1193 31.1193 26 32.5 26C33.8807 26 35 27.1193 35 28.5Z"}},{id:"toilet3Faucet",offsetX:790,offsetY:172,width:23,height:36,shape:{type:"Path",data:"M46.4065 37.9425C46.4065 55.0951 36.823 69.0002 25.0011 69.0002C13.1792 69.0002 3.5957 55.0951 3.5957 37.9425C3.5957 30.1141 5.2059 23.4623 8.5 18C8.61402 18 25 18 25 18H41.2425C44.5366 23.4623 46.4065 30.1141 46.4065 37.9425Z M41.2161 43.5006C41.2161 53.9728 33.9559 62.4621 24.9999 62.4621C16.0439 62.4621 8.78369 53.9728 8.78369 43.5006C8.78369 33.0284 16.0439 24.5391 24.9999 24.5391C33.9559 24.5391 41.2161 33.0284 41.2161 43.5006Z M1 3.61538C1 2.17095 2.17095 1 3.61538 1H46.3846C47.8291 1 49 2.17095 49 3.61538V15.3846C49 16.8291 47.8291 18 46.3846 18H3.61538C2.17095 18 1 16.8291 1 15.3846V3.61538Z M26.9995 9C26.9995 10.1046 26.1041 11 24.9995 11C23.8949 11 22.9995 10.1046 22.9995 9C22.9995 7.89543 23.8949 7 24.9995 7C26.1041 7 26.9995 7.89543 26.9995 9Z M31 33C31 37.4183 28.3137 41 25 41C21.6863 41 19 37.4183 19 33C19 28.5817 21.6863 25 25 25C28.3137 25 31 28.5817 31 33Z "}},{id:"gasBurner",offsetX:725,offsetY:34,width:100,height:32,shape:{type:"Path",data:"M101.999 1.96454C101.999 1.43184 101.567 1 101.034 1L1.96356 1.00001C1.43086 1.00001 0.999023 1.43185 0.999023 1.96455L0.999026 34.0355C0.999026 34.5682 1.43087 35 1.96357 35L101.034 35C101.567 35 101.999 34.5682 101.999 34.0355V1.96454Z M33.583 4.79803C33.583 4.26533 33.1512 3.8335 32.6185 3.8335L4.79755 3.8335C4.26485 3.8335 3.83301 4.26534 3.83301 4.79804L3.83301 31.2023C3.83301 31.735 4.26485 32.1668 4.79755 32.1668L32.6185 32.1668C33.1512 32.1668 33.583 31.735 33.583 31.2023L33.583 4.79803Z M98.749 4.96454C98.749 4.43184 98.3172 4 97.7845 4L69.9636 4C69.4309 4 68.999 4.43184 68.999 4.96454L68.999 31.3688C68.999 31.9015 69.4309 32.3333 69.9636 32.3333L97.7845 32.3333C98.3172 32.3333 98.749 31.9015 98.749 31.3688V4.96454Z M65.749 4.96454C65.749 4.43184 65.3172 4 64.7845 4L36.9636 4C36.4309 4 35.999 4.43184 35.999 4.96454L35.999 31.3688C35.999 31.9015 36.4309 32.3333 36.9636 32.3333L64.7845 32.3333C65.3172 32.3333 65.749 31.9015 65.749 31.3688V4.96454Z M26.499 18C26.499 22.6944 22.6934 26.5 17.999 26.5C13.3046 26.5 9.49902 22.6944 9.49902 18C9.49902 13.3056 13.3046 9.5 17.999 9.5C22.6934 9.5 26.499 13.3056 26.499 18Z M25.4365 18C25.4365 22.1076 22.1066 25.4375 17.999 25.4375C13.8914 25.4375 10.5615 22.1076 10.5615 18C10.5615 13.8924 13.8914 10.5625 17.999 10.5625C22.1066 10.5625 25.4365 13.8924 25.4365 18Z M25.0576 24.6826L24.682 25.0583L22.0017 22.378L22.3774 22.0024L25.0576 24.6826Z M13.9443 13.5698L13.5687 13.9455L10.8882 11.265L11.2639 10.8894L13.9443 13.5698Z M24.7861 11.0938L25.1618 11.4694L22.4815 14.1497L22.1059 13.774L24.7861 11.0938Z M13.7734 21.9844L14.1491 22.36L11.4688 25.0403L11.0932 24.6646L13.7734 21.9844Z M21.4521 18C21.4521 19.9071 19.9061 21.4531 17.999 21.4531C16.0919 21.4531 14.5459 19.9071 14.5459 18C14.5459 16.0929 16.0919 14.5469 17.999 14.5469C19.9061 14.5469 21.4521 16.0929 21.4521 18Z M91.665 18.1665C91.665 22.8609 87.8595 26.6665 83.165 26.6665C78.4706 26.6665 74.665 22.8609 74.665 18.1665C74.665 13.4721 78.4706 9.6665 83.165 9.6665C87.8595 9.6665 91.665 13.4721 91.665 18.1665Z M90.6025 18.1665C90.6025 22.2741 87.2727 25.604 83.165 25.604C79.0574 25.604 75.7275 22.2741 75.7275 18.1665C75.7275 14.0589 79.0574 10.729 83.165 10.729C87.2727 10.729 90.6025 14.0589 90.6025 18.1665Z M90.2236 24.8491L89.848 25.2248L87.1677 22.5445L87.5434 22.1689L90.2236 24.8491Z M79.1104 13.7363L78.7347 14.112L76.0542 11.4315L76.4299 11.0559L79.1104 13.7363Z M89.9521 11.2603L90.3278 11.6359L87.6475 14.3162L87.2719 13.9405L89.9521 11.2603Z M78.9404 22.1509L79.3161 22.5265L76.6358 25.2068L76.2602 24.8311L78.9404 22.1509Z M86.6182 18.1665C86.6182 20.0736 85.0721 21.6196 83.165 21.6196C81.2579 21.6196 79.7119 20.0736 79.7119 18.1665C79.7119 16.2594 81.2579 14.7134 83.165 14.7134C85.0721 14.7134 86.6182 16.2594 86.6182 18.1665Z M58.665 18.1665C58.665 22.8609 54.8595 26.6665 50.165 26.6665C45.4706 26.6665 41.665 22.8609 41.665 18.1665C41.665 13.4721 45.4706 9.6665 50.165 9.6665C54.8595 9.6665 58.665 13.4721 58.665 18.1665Z M57.6025 18.1665C57.6025 22.2741 54.2727 25.604 50.165 25.604C46.0574 25.604 42.7275 22.2741 42.7275 18.1665C42.7275 14.0589 46.0574 10.729 50.165 10.729C54.2727 10.729 57.6025 14.0589 57.6025 18.1665Z M57.2236 24.8491L56.848 25.2248L54.1677 22.5445L54.5434 22.1689L57.2236 24.8491Z M46.1104 13.7363L45.7347 14.112L43.0542 11.4315L43.4299 11.0559L46.1104 13.7363Z M56.9521 11.2603L57.3278 11.6359L54.6475 14.3162L54.2719 13.9405L56.9521 11.2603Z M45.9404 22.1509L46.3161 22.5265L43.6358 25.2068L43.2602 24.8311L45.9404 22.1509Z M53.6182 18.1665C53.6182 20.0736 52.0721 21.6196 50.165 21.6196C48.2579 21.6196 46.7119 20.0736 46.7119 18.1665C46.7119 16.2594 48.2579 14.7134 50.165 14.7134C52.0721 14.7134 53.6182 16.2594 53.6182 18.1665Z"}},{id:"kitchenSink",offsetX:542,offsetY:36,width:76,height:38,shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H115C119.418 1 123 4.58172 123 9V41C123 45.4183 119.418 49 115 49H9C4.58172 49 1 45.4183 1 41V9Z M7 13C7 10.7909 8.79086 9 11 9H55C57.2091 9 59 10.7909 59 13V37C59 39.2091 57.2091 41 55 41H11C8.79086 41 7 39.2091 7 37V13Z M65 13C65 10.7909 66.7909 9 69 9H113C115.209 9 117 10.7909 117 13V37C117 39.2091 115.209 41 113 41H69C66.7909 41 65 39.2091 65 37V13Z M35 25.5C35 26.8807 33.8807 28 32.5 28C31.1193 28 30 26.8807 30 25.5C30 24.1193 31.1193 23 32.5 23C33.8807 23 35 24.1193 35 25.5Z M93 25.5C93 26.8807 91.8807 28 90.5 28C89.1193 28 88 26.8807 88 25.5C88 24.1193 89.1193 23 90.5 23C91.8807 23 93 24.1193 93 25.5Z M64.3638 10.4863C64.3638 10.4863 65.071 10.4863 65.7781 9.77915C66.4852 9.07204 66.4852 8.36493 66.4852 8.36493L74.4865 15.2232C75.5104 16.1009 75.5705 17.6644 74.6169 18.618C73.6633 19.5716 72.0998 19.5115 71.2221 18.4876L64.3638 10.4863Z M65.4246 4.47532C66.7915 5.84216 66.7915 8.05823 65.4246 9.42507C64.0578 10.7919 61.8417 10.7919 60.4749 9.42507C59.108 8.05823 59.108 5.84216 60.4749 4.47532C61.8417 3.10849 64.0578 3.10849 65.4246 4.47532Z"}},{id:"refrigerator",offsetX:692,offsetY:115,width:52,height:59,shape:{type:"Path",data:"M1 8.58323H61V58.0356H1V8.58323Z M1 58.8332H61V63.6189C61 65.381 59.5716 66.8094 57.8095 66.8094H4.19048C2.42843 66.8094 1 65.381 1 63.6189V58.8332Z M57.0527 8.17857L4.158 8.17857L4.158 4.19047C4.158 2.42842 5.58642 1 7.34847 1L53.8623 1C55.6243 1 57.0527 2.42843 57.0527 4.19048V8.17857Z M1 8.58323V8.08323H0.5V8.58323H1ZM61 8.58323H61.5V8.08323H61V8.58323ZM61 58.0356V58.5356H61.5V58.0356H61ZM1 58.0356H0.5V58.5356H1V58.0356ZM1 58.8332V58.3332H0.5V58.8332H1ZM61 58.8332H61.5V58.3332H61V58.8332ZM6.52686 66.8094V66.3094H6.02686V66.8094H6.52686ZM16.79 66.8094H17.29V66.3094H16.79V66.8094ZM57.0527 8.17857V8.67857H57.5527V8.17857H57.0527ZM4.158 8.17857H3.658V8.67857H4.158V8.17857ZM53.8623 1V0.500004V1ZM57.0527 4.19048H56.5527H57.0527ZM4.158 4.19047H3.658H4.158ZM7.34847 1V1.5V1ZM1 9.08323H61V8.08323H1V9.08323ZM60.5 8.58323V58.0356H61.5V8.58323H60.5ZM61 57.5356H1V58.5356H61V57.5356ZM1.5 58.0356V8.58323H0.5V58.0356H1.5ZM1 59.3332H61V58.3332H1V59.3332ZM60.5 58.8332V63.6189H61.5V58.8332H60.5ZM57.8095 66.3094H4.19048V67.3094H57.8095V66.3094ZM1.5 63.6189V58.8332H0.5V63.6189H1.5ZM4.19048 66.3094C2.70457 66.3094 1.5 65.1049 1.5 63.6189H0.5C0.5 65.6571 2.15228 67.3094 4.19048 67.3094V66.3094ZM60.5 63.6189C60.5 65.1049 59.2954 66.3094 57.8095 66.3094V67.3094C59.8477 67.3094 61.5 65.6571 61.5 63.6189H60.5ZM6.52686 67.3094H16.79V66.3094H6.52686V67.3094ZM13.5995 69.4999H9.71733V70.4999H13.5995V69.4999ZM9.71733 69.4999C8.23142 69.4999 7.02686 68.2953 7.02686 66.8094H6.02686C6.02686 68.8476 7.67914 70.4999 9.71733 70.4999V69.4999ZM16.29 66.8094C16.29 68.2953 15.0854 69.4999 13.5995 69.4999V70.4999C15.6377 70.4999 17.29 68.8476 17.29 66.8094H16.29ZM57.0527 7.67857L4.158 7.67857V8.67857L57.0527 8.67857V7.67857ZM4.658 8.17857L4.658 4.19047H3.658L3.658 8.17857H4.658ZM7.34847 1.5L53.8623 1.5V0.500004L7.34847 0.5V1.5ZM56.5527 4.19048V8.17857H57.5527V4.19048H56.5527ZM53.8623 1.5C55.3482 1.5 56.5527 2.70457 56.5527 4.19048H57.5527C57.5527 2.15229 55.9005 0.500004 53.8623 0.500004V1.5ZM4.658 4.19047C4.658 2.70456 5.86256 1.5 7.34847 1.5V0.5C5.31028 0.5 3.658 2.15228 3.658 4.19047H4.658Z"}},{id:"waterCooler",offsetX:524,offsetY:107,width:39,height:38,shape:{type:"Path",data:"M49 1H3C1.89543 1 1 1.89543 1 3V49C1 50.1046 1.89543 51 3 51H49C50.1046 51 51 50.1046 51 49V3C51 1.89543 50.1046 1 49 1Z M47 26C47 37.598 37.598 47 26 47C14.402 47 5 37.598 5 26C5 14.402 14.402 5 26 5C37.598 5 47 14.402 47 26Z M30 26C30 28.2091 28.2091 30 26 30C23.7909 30 22 28.2091 22 26C22 23.7909 23.7909 22 26 22C28.2091 22 30 23.7909 30 26Z M49 1H3C1.89543 1 1 1.89543 1 3V49C1 50.1046 1.89543 51 3 51H49C50.1046 51 51 50.1046 51 49V3C51 1.89543 50.1046 1 49 1Z M47 26C47 37.598 37.598 47 26 47C14.402 47 5 37.598 5 26C5 14.402 14.402 5 26 5C37.598 5 47 14.402 47 26Z M30 26C30 28.2091 28.2091 30 26 30C23.7909 30 22 28.2091 22 26C22 23.7909 23.7909 22 26 22C28.2091 22 30 23.7909 30 26Z"}},{id:"washBasin",offsetX:260,offsetY:176,width:41,height:30,rotateAngle:-90,shape:{type:"Path",data:"M35 30.5C35 31.8807 33.8807 33 32.5 33C31.1193 33 30 31.8807 30 30.5C30 29.1193 31.1193 28 32.5 28C33.8807 28 35 29.1193 35 30.5Z M1 16C1 7.71573 7.71573 1 16 1H50C58.2843 1 65 7.71573 65 16V25C65 38.2548 54.2548 49 41 49H25C11.7452 49 1 38.2548 1 25V16Z M8 19C8 14.5817 11.5817 11 16 11H50C54.4183 11 58 14.5817 58 19V29C58 37.8366 50.8366 45 42 45H24C15.1634 45 8 37.8366 8 29V19Z M32.7433 11.0559C32.7433 11.0559 33.3556 11.4094 34.3216 11.1506C35.2875 10.8918 35.641 10.2794 35.641 10.2794L39.1413 20.2196C39.5892 21.4916 38.8594 22.8757 37.5568 23.2247C36.2542 23.5737 34.9302 22.7399 34.6821 21.4144L32.7433 11.0559Z M36.6673 6.38077C37.1676 8.24791 36.0596 10.1671 34.1925 10.6674C32.3253 11.1677 30.4062 10.0596 29.9059 8.19251C29.4056 6.32538 30.5136 4.4062 32.3807 3.9059C34.2479 3.4056 36.1671 4.51364 36.6673 6.38077Z"}},{id:"staircase1",offsetX:517,offsetY:427,width:87,height:25,shape:{type:"Path",data:"M1 17.4998L133 17.4998M121.177 0.869141L132.874 17.3083M121.582 34.7252L132.756 17.7252M121.5 0.999829V34.9998M109.5 0.999829V34.9998M97.5 0.999829V34.9998M85.5 0.999829V34.9998M73.5 0.999829V34.9998M61.5 0.999829V34.9998M49.5 0.999829V34.9998M37.5 0.999829V34.9998M25.5 0.999829L25.5 34.9998M13.5 0.999829L13.5 34.9998M133 0.999829V34.9998L1 34.9998L1 0.999824L133 0.999829Z"}},{id:"staircase2",offsetX:550,offsetY:470,width:61,height:22,rotateAngle:90,shape:{type:"Path",data:"M36 1V35M36 1L25 1M36 1H48M36 35H25M36 35H48M25 35L25 1M25 35H13L13 1L25 1M48 1V35M48 1H59M48 35H59M59 1V35M59 1H71M59 35H71M71 1V35M71 1H82M71 35H82M82 1V35M82 1H94M82 35H94M94 1V35M94 1H105M94 35H105M105 1V35M105 1H117V35H105M129 1V35L1 35L1 1L129 1Z"}},{id:"staircase3",offsetX:517,offsetY:514,width:87,height:25,shape:{type:"Path",data:"M1 17.4998L133 17.4998M121.177 0.869141L132.874 17.3083M121.582 34.7252L132.756 17.7252M121.5 0.999829V34.9998M109.5 0.999829V34.9998M97.5 0.999829V34.9998M85.5 0.999829V34.9998M73.5 0.999829V34.9998M61.5 0.999829V34.9998M49.5 0.999829V34.9998M37.5 0.999829V34.9998M25.5 0.999829L25.5 34.9998M13.5 0.999829L13.5 34.9998M133 0.999829V34.9998L1 34.9998L1 0.999824L133 0.999829Z"}},{id:"balconyChair1",offsetX:308,offsetY:83,width:40,height:44,rotateAngle:270,shape:{type:"Path",data:"M7 27.5V56C7 56.5523 6.55228 57 6 57H2C1.44772 57 1 56.5523 1 56V26.5C1 12.4167 12.4167 1 26.5 1C40.5833 1 52 12.4167 52 26.5V56C52 56.5523 51.5523 57 51 57H47C46.4477 57 46 56.5523 46 56V27.5M7 27.5C7 16.7304 15.7304 8 26.5 8C37.2696 8 46 16.7304 46 27.5M7 27.5V58C7 58.5523 7.44772 59 8 59H45C45.5523 59 46 58.5523 46 58V27.5"}},{id:"balconyChair2",offsetX:425,offsetY:83,width:40,height:44,rotateAngle:90,shape:{type:"Path",data:"M7 27.5V56C7 56.5523 6.55228 57 6 57H2C1.44772 57 1 56.5523 1 56V26.5C1 12.4167 12.4167 1 26.5 1C40.5833 1 52 12.4167 52 26.5V56C52 56.5523 51.5523 57 51 57H47C46.4477 57 46 56.5523 46 56V27.5M7 27.5C7 16.7304 15.7304 8 26.5 8C37.2696 8 46 16.7304 46 27.5M7 27.5V58C7 58.5523 7.44772 59 8 59H45C45.5523 59 46 58.5523 46 58V27.5"}},{id:"stool",offsetX:366,offsetY:83,width:35,height:35,shape:{type:"Path",data:"M58 31C58 46.464 45.6878 59 30.5 59C15.3122 59 3 46.464 3 31C3 15.536 15.3122 3 30.5 3C45.6878 3 58 15.536 58 31Z  M29 59V61H25V59H29Z M29 1V3H25V1L29 1Z M36 59V61H32V59H36Z M36 1V3H32V1L36 1Z M3 29H1L1 25H3L3 29Z M60 29H58V25H60V29Z M3 36H1L1 32H3L3 36Z M60 36H58V32H60V36Z"}},{id:"balconyStool1",offsetX:278,offsetY:45,width:30,height:30,shape:{type:"Path",data:"M57 29C57 44.464 44.464 57 29 57C13.536 57 1 44.464 1 29C1 13.536 13.536 1 29 1C44.464 1 57 13.536 57 29Z"}},{id:"balconyStool2",offsetX:462,offsetY:45,width:30,height:30,shape:{type:"Path",data:"M57 29C57 44.464 44.464 57 29 57C13.536 57 1 44.464 1 29C1 13.536 13.536 1 29 1C44.464 1 57 13.536 57 29Z"}},{id:"balconyPlant1",offsetX:278,offsetY:45,width:25,height:25,shape:{type:"Path",data:"M41.0021 14.6256C39.4786 15.0878 15.4174 23.8084 24.9086 22.7805C30.9102 22.1305 46.6742 12.9049 41.0021 14.6256Z M30.6226 40.7355C30.095 39.2334 20.3422 15.5718 21.7796 25.0097C22.6885 30.9776 32.587 46.328 30.6226 40.7355Z M40.8599 30.8341C39.4811 30.038 16.6684 18.4377 23.9067 24.6624C28.4837 28.5985 45.9932 33.7978 40.8599 30.8341Z M24.9451 2.15326C24.5331 3.69113 19.2324 28.7289 23.3715 20.1262C25.9889 14.6864 26.4792 -3.57215 24.9451 2.15326Z M2.19397 25.3449C3.78608 25.3449 29.3427 23.9847 19.9617 22.2131C14.0299 21.0929 -3.73342 25.3449 2.19397 25.3449Z M14.4307 41.966C15.2268 40.5872 26.8271 17.7744 20.6024 25.0127C16.6664 29.5898 11.467 47.0992 14.4307 41.966Z M9.34308 7.01354C10.1391 8.39235 24.0954 29.8449 20.9391 20.835C18.9434 15.1378 6.37938 1.88027 9.34308 7.01354Z M8.74609 23.1317C8.74609 19.0028 10.6305 15.3141 13.5861 12.8786M25.2568 10.2486C29.1467 11.2213 32.3568 13.9095 34.0367 17.4627M23.5 9.93362C23.0157 9.88011 22.5236 9.85264 22.0251 9.85264C19.3319 9.85264 16.826 10.6544 14.733 12.0323M34.6489 19.0003C35.0742 20.3006 35.3041 21.6893 35.3041 23.1317C35.3041 24.7546 35.013 26.3095 34.4801 27.747M33.7595 29.3531C32.4773 31.7665 30.4723 33.7373 28.0333 34.9769M26.5361 35.6249C25.1278 36.1335 23.6088 36.4107 22.0251 36.4107C20.4153 36.4107 18.8723 36.1242 17.4445 35.5995M15.8519 34.8916C12.0702 32.9023 9.36529 29.1424 8.83942 24.7143M41.0021 14.6256C39.4786 15.0878 15.4174 23.8084 24.9086 22.7805C30.9102 22.1305 46.6742 12.9049 41.0021 14.6256ZM30.6226 40.7355C30.095 39.2334 20.3422 15.5718 21.7796 25.0097C22.6885 30.9776 32.587 46.328 30.6226 40.7355ZM40.8599 30.8341C39.4811 30.038 16.6684 18.4377 23.9067 24.6624C28.4837 28.5985 45.9932 33.7978 40.8599 30.8341ZM24.9451 2.15326C24.5331 3.69113 19.2324 28.7289 23.3715 20.1262C25.9889 14.6864 26.4792 -3.57215 24.9451 2.15326ZM2.19397 25.3449C3.78608 25.3449 29.3427 23.9847 19.9617 22.2131C14.0299 21.0929 -3.73342 25.3449 2.19397 25.3449ZM14.4307 41.966C15.2268 40.5872 26.8271 17.7744 20.6024 25.0127C16.6664 29.5898 11.467 47.0992 14.4307 41.966ZM9.34308 7.01354C10.1391 8.39235 24.0954 29.8449 20.9391 20.835C18.9434 15.1378 6.37938 1.88027 9.34308 7.01354Z"}},{id:"balconyPlant2",offsetX:462,offsetY:45,width:25,height:25,shape:{type:"Path",data:"M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141Z M23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234Z M25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003Z M24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567Z M20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171Z M21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193Z M22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z M40.0382 18.2498C40.7878 20.1543 41.1995 22.2289 41.1995 24.3996C41.1995 24.5507 41.1975 24.7013 41.1935 24.8515M35.2235 11.5507C33.6921 10.2594 31.9267 9.2368 30 8.55572M39 32.7159C37.5069 35.3317 35.3311 37.5074 32.7153 39.0004M24.8419 41.1939C24.6949 41.1977 24.5474 41.1996 24.3995 41.1996C21.7821 41.1996 19.3046 40.6011 17.0963 39.5334M10.7727 34.2278C9.9752 33.1239 9.30848 31.9193 8.79533 30.6367M7.70563 22.5004C7.89672 20.8019 8.34106 19.1801 9 17.6736M13.9123 11.274C16.1576 9.47777 18.8737 8.24563 21.846 7.79239M25.9813 23.5141C27.2901 23.5993 48.6838 19.0468 41.4746 10.8333C36.916 5.63963 21.1089 23.1968 25.9813 23.5141ZM23.6253 25.9234C23.1736 27.1547 21.4942 48.9629 31.4103 44.3689C37.6806 41.464 25.3067 21.3392 23.6253 25.9234ZM25.5989 25.6003C26.3978 26.6405 43.9262 39.7237 45.3483 28.888C46.2474 22.0363 22.6249 21.7278 25.5989 25.6003ZM24.7197 20.7567C25.6675 19.8502 36.7808 1.01108 25.8549 0.76778C18.9461 0.613932 21.191 24.1316 24.7197 20.7567ZM20.8885 22.8171C19.6966 22.2698 -1.91128 18.8763 1.88665 29.1238C4.2882 35.6035 25.3258 24.8547 20.8885 22.8171ZM21.6607 25.6193C20.3938 25.9588 1.59406 37.1385 11.0585 42.6028C17.0432 46.0581 26.3771 24.3556 21.6607 25.6193ZM22.3667 20.2554C21.8975 19.0306 8.82513 1.49408 4.37366 11.475C1.55885 17.7863 24.1136 24.815 22.3667 20.2554Z"}},{id:"commonDoor",offsetX:673,offsetY:264,width:27,height:30,rotateAngle:90,shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"toilet4BathTub",offsetX:680,offsetY:200,width:50,height:25,rotateAngle:90,shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H84C88.4183 1 92 4.58172 92 9V40C92 44.4183 88.4183 48 84 48H9C4.58172 48 1 44.4183 1 40V9Z M12 8C12 6.89543 12.8954 6 14 6H61.5C71.7173 6 80 14.2827 80 24.5C80 34.7173 71.7173 43 61.5 43H14C12.8954 43 12 42.1046 12 41V8Z M11.5 26.5C11.5 26.5 12 26 12 25C12 24 11.5 23.5 11.5 23.5L22.0074 22.6917C23.3519 22.5883 24.5 23.6514 24.5 25C24.5 26.3486 23.3519 27.4117 22.0074 27.3083L11.5 26.5Z M8 21.5C9.933 21.5 11.5 23.067 11.5 25C11.5 26.933 9.933 28.5 8 28.5C6.067 28.5 4.5 26.933 4.5 25C4.5 23.067 6.067 21.5 8 21.5Z"}},{id:"toilet4Basin",offsetX:729,offsetY:262,width:30,height:25,rotateAngle:180,shape:{type:"Path",data:"M1 9C1 4.58172 4.58172 1 9 1H57C61.4183 1 65 4.58172 65 9V41C65 45.4183 61.4183 49 57 49H9C4.58172 49 1 45.4183 1 41V9Z M7 13C7 10.7909 8.79086 9 11 9H55C57.2091 9 59 10.7909 59 13V37C59 39.2091 57.2091 41 55 41H11C8.79086 41 7 39.2091 7 37V13Z M35 25.5C35 26.8807 33.8807 28 32.5 28C31.1193 28 30 26.8807 30 25.5C30 24.1193 31.1193 23 32.5 23C33.8807 23 35 24.1193 35 25.5Z M31 9C31 9 31.5 9.5 32.5 9.5C33.5 9.5 34 9 34 9L34.8083 19.5074C34.9117 20.8519 33.8486 22 32.5 22C31.1514 22 30.0883 20.8519 30.1917 19.5074L31 9Z M36 5.5C36 7.433 34.433 9 32.5 9C30.567 9 29 7.433 29 5.5C29 3.567 30.567 2 32.5 2C34.433 2 36 3.567 36 5.5Z"}},{id:"toilet4Faucet",offsetX:729,offsetY:172,width:23,height:37,shape:{type:"Path",data:"M46.989 33.0731C46.989 53.4671 37.3818 69.9996 25.5307 69.9996C13.6795 69.9996 4.07227 53.4671 4.07227 33.0731C4.07227 19.1497 4 18 4 18C4.17549 18.0144 15.9306 18.2553 26.5002 17.9993C36.1582 17.7654 46.989 17.9999 46.989 17.9999C46.989 17.9999 46.989 21.6119 46.989 33.0731Z M41 44.5C41 54.7173 34.0604 63 25.5 63C16.9396 63 10 54.7173 10 44.5C10 34.2827 16.9396 26 25.5 26C34.0604 26 41 34.2827 41 44.5Z M1 3.61538C1 2.17095 2.17095 1 3.61538 1H46.3846C47.8291 1 49 2.17095 49 3.61538V15.3846C49 16.8291 47.8291 18 46.3846 18H3.61538C2.17095 18 1 16.8291 1 15.3846V3.61538Z M26.9995 9C26.9995 10.1046 26.1041 11 24.9995 11C23.8949 11 22.9995 10.1046 22.9995 9C22.9995 7.89543 23.8949 7 24.9995 7C26.1041 7 26.9995 7.89543 26.9995 9Z M31 34C31 38.4183 28.3137 42 25 42C21.6863 42 19 38.4183 19 34C19 29.5817 21.6863 26 25 26C28.3137 26 31 29.5817 31 34Z"}},{id:"storeRoomDoor",offsetX:798,offsetY:122,width:51,height:38,rotateAngle:90,shape:{type:"Path",data:"M1 71L1 79L72 79V71M1 71L72 71M1 71C1 32.3401 32.3401 1 71 1H72V71"}},{id:"storeRoomWarddrobe",offsetX:820,offsetY:34,width:73,height:35,shape:{type:"Path",data:"M50.6443 54.406L76 29L80.9998 28.9502H85.9996L55.594 59.3558L50.6443 54.406Z M12 29L36.9996 54.4053L32.0498 59.3551L2 29H12Z M70.7969 44.8594C70.6017 44.6642 70.6017 44.3476 70.7969 44.1523C70.9922 43.957 71.3088 43.957 71.504 44.1523L72.9182 45.5665C73.1135 45.7618 73.1135 46.0784 72.9182 46.2736C72.723 46.4689 72.4064 46.4689 72.2111 46.2736L70.7969 44.8594Z M16.1406 44.1524C16.3358 43.9571 16.6524 43.9571 16.8477 44.1524C17.043 44.3476 17.043 44.6642 16.8477 44.8595L15.4335 46.2737C15.2382 46.469 14.9216 46.469 14.7264 46.2737C14.5311 46.0784 14.5311 45.7619 14.7264 45.5666L16.1406 44.1524Z M1 1L87 1V29H1L1 1Z"}},{id:"windowGarden",offsetX:370,offsetY:26,width:253,height:36,shape:{type:"Path",data:"M1.5 0H0V1.5V38.5H3V3H152V38.5H155V1.5V0H153.5H1.5ZM6.5 5H5V6.5V38.5H8V8H53V38.5H56V8H100V38.5H103V8H147V38.5H150V6.5V5H148.5H103H101.5H100H56H54.5H53H6.5Z"}},{id:"TextNode1",offsetX:120,offsetY:40,width:80,height:37,shape:{type:"Text",content:"Bedroom 12 x 12"},style:{fontSize:16}},{id:"TextNode2",offsetX:94,offsetY:224,width:38,height:23,shape:{type:"Text",content:" Toilet 6 x 4"},style:{fontSize:16}},{id:"TextNode3",offsetX:91,offsetY:300,width:38,height:23,shape:{type:"Text",content:" Toilet 6 x 4"},style:{fontSize:16}},{id:"TextNode4",offsetX:118,offsetY:452,width:80,height:37,shape:{type:"Text",content:" Bedroom 12 x 12"},style:{fontSize:16}},{id:"TextNode5",offsetX:331,offsetY:481,width:102,height:37,shape:{type:"Text",content:"Porch 15 x 8"},style:{fontSize:16}},{id:"TextNode6",offsetX:602,offsetY:107,width:80,height:37,shape:{type:"Text",content:"Kitchen  12 x 9"},style:{fontSize:16}},{id:"TextNode7",offsetX:820,offsetY:80,width:50,height:36,shape:{type:"Text",content:"Storeroom 6 x 9"},style:{fontSize:16}},{id:"TextNode8",offsetX:725,offsetY:214,width:38,height:23,shape:{type:"Text",content:"Toilet 7 x 9"},style:{fontSize:16}},{id:"TextNode9",offsetX:820,offsetY:232,width:38,height:23,shape:{type:"Text",content:"Toilet 7 x 9"},style:{fontSize:16}},{id:"TextNode10",offsetX:680,offsetY:370,width:80,height:37,shape:{type:"Text",content:"Bedroom 18 x 15"},style:{fontSize:16}},{id:"TextNode11",offsetX:331,offsetY:277,width:100,height:47,shape:{type:"Text",content:" Living Room    19 x 15 "},style:{fontSize:16}}],this.connectors=[{id:"connector1",style:{strokeWidth:5},sourcePoint:{x:20,y:10},targetPoint:{x:80,y:10},targetDecorator:{shape:"none"}},{id:"connector2",style:{strokeWidth:5},sourcePoint:{x:160,y:10},targetPoint:{x:240,y:10},targetDecorator:{shape:"none"}},{id:"connector3",style:{strokeWidth:5},sourcePoint:{x:20,y:10},targetPoint:{x:20,y:80},targetDecorator:{shape:"none"}},{id:"connector4",style:{strokeWidth:5},sourcePoint:{x:240,y:10},targetPoint:{x:240,y:200},targetDecorator:{shape:"none"}},{id:"connector5",style:{strokeWidth:4},sourcePoint:{x:20,y:200},targetPoint:{x:155,y:200},targetDecorator:{shape:"none"}},{id:"connector7",style:{strokeWidth:4},sourcePoint:{x:185,y:280},targetPoint:{x:185,y:350},targetDecorator:{shape:"none"}},{id:"connector34",style:{strokeWidth:4},sourcePoint:{x:20,y:350},targetPoint:{x:155,y:350},targetDecorator:{shape:"none"}},{id:"connector8",style:{strokeWidth:4},sourcePoint:{x:185,y:200},targetPoint:{x:185,y:280},targetDecorator:{shape:"none"}},{id:"connector9",style:{strokeWidth:4},sourcePoint:{x:100,y:280},targetPoint:{x:185,y:280},targetDecorator:{shape:"none"}},{id:"connector10",style:{strokeWidth:4},sourcePoint:{x:20,y:200},targetPoint:{x:20,y:280},targetDecorator:{shape:"none"}},{id:"connector11",style:{strokeWidth:4},sourcePoint:{x:20,y:280},targetPoint:{x:185,y:280},targetDecorator:{shape:"none"}},{id:"connector12",style:{strokeWidth:4},sourcePoint:{x:20,y:280},targetPoint:{x:20,y:370},targetDecorator:{shape:"none"}},{id:"connector36",style:{strokeWidth:4},sourcePoint:{x:20,y:420},targetPoint:{x:20,y:480},targetDecorator:{shape:"none"}},{id:"connector13",style:{strokeWidth:4},sourcePoint:{x:20,y:480},targetPoint:{x:80,y:480},targetDecorator:{shape:"none"}},{id:"connector14",style:{strokeWidth:4},sourcePoint:{x:160,y:480},targetPoint:{x:240,y:480},targetDecorator:{shape:"none"}},{id:"connector15",style:{strokeWidth:4},sourcePoint:{x:240,y:280},targetPoint:{x:240,y:540},targetDecorator:{shape:"none"}},{id:"connector16",style:{strokeWidth:4},sourcePoint:{x:240,y:400},targetPoint:{x:280,y:400},targetDecorator:{shape:"none"}},{id:"connector17",style:{strokeWidth:4},sourcePoint:{x:360,y:400},targetPoint:{x:440,y:400},targetDecorator:{shape:"none"}},{id:"connector18",style:{strokeWidth:4},sourcePoint:{x:540,y:400},targetPoint:{x:580,y:400},targetDecorator:{shape:"none"}},{id:"connector19",style:{strokeWidth:4},sourcePoint:{x:580,y:540},targetPoint:{x:580,y:280},targetDecorator:{shape:"none"}},{id:"connector20",style:{strokeWidth:4},sourcePoint:{x:500,y:10},targetPoint:{x:860,y:10},targetDecorator:{shape:"none"}},{id:"connector21",style:{strokeWidth:4},sourcePoint:{x:500,y:10},targetPoint:{x:500,y:140},targetDecorator:{shape:"none"}},{id:"connector24",style:{strokeWidth:4},sourcePoint:{x:580,y:480},targetPoint:{x:700,y:480},targetDecorator:{shape:"none"}},{id:"connector25",style:{strokeWidth:4},sourcePoint:{x:780,y:480},targetPoint:{x:860,y:480},targetDecorator:{shape:"none"}},{id:"connector26",style:{strokeWidth:4},sourcePoint:{x:860,y:480},targetPoint:{x:860,y:10},targetDecorator:{shape:"none"}},{id:"connector27",style:{strokeWidth:4},sourcePoint:{x:780,y:10},targetPoint:{x:780,y:100},targetDecorator:{shape:"none"}},{id:"connector28",style:{strokeWidth:4},sourcePoint:{x:630,y:280},targetPoint:{x:830,y:280},targetDecorator:{shape:"none"}},{id:"connector29",style:{strokeWidth:4},sourcePoint:{x:660,y:150},targetPoint:{x:860,y:150},targetDecorator:{shape:"none"}},{id:"connector30",style:{strokeWidth:4},sourcePoint:{x:760,y:150},targetPoint:{x:760,y:280},targetDecorator:{shape:"none"}},{id:"connector32",style:{strokeWidth:4},sourcePoint:{x:240,y:540},targetPoint:{x:580,y:540},targetDecorator:{shape:"none"}},{id:"connector35",style:{strokeWidth:4},sourcePoint:{x:20,y:140},targetPoint:{x:20,y:200},targetDecorator:{shape:"none"}},{id:"connector37",style:{strokeWidth:4},sourcePoint:{x:660,y:150},targetPoint:{x:660,y:250},targetDecorator:{shape:"none"}}],this.rulerSettings={showRulers:!0},this.scrollSettings={canAutoScroll:!1,scrollLimit:"Infinity",minZoom:.25,maxZoom:30},this.menuItems=[{text:"File",items:[{text:"New",iconCss:"sf-icon-new"},{text:"Open",iconCss:"sf-icon-open"},{text:"Save",iconCss:"sf-icon-save"},{text:"Export",iconCss:"sf-icon-export"},{text:"Print",iconCss:"sf-icon-print"}]},{text:"Edit",items:[{text:"Undo",iconCss:"sf-icon-undo"},{text:"Redo",iconCss:"sf-icon-redo"},{separator:!0},{text:"Copy",iconCss:"sf-icon-copy"},{text:"Cut",iconCss:"sf-icon-cut"},{text:"Paste",iconCss:"sf-icon-paste"},{separator:!0},{text:"Delete",iconCss:"sf-icon-delete"}]},{text:"Insert",items:[{text:"Insert Image",tooltipText:"Insert Image",iconCss:"sf-icon-insert_image"},{text:"Insert Link",tooltipText:"Insert link",iconCss:"sf-icon-insert_link"}]},{text:"Design",items:[{text:"Orientation",items:[{text:"Landscape",iconCss:"sf-icon-check-tick"},{text:"Portrait"}]},{text:"Page Size",items:[{text:"Letter (8.5 in x 11 in)",value:"Letter",iconCss:"sf-icon-check-tick"},{text:"Legal (8.5 in x 14 in)",value:"Legal"},{text:"Tabloid (279 mm x 432 mm)",value:"Tabloid"},{text:"A3 (297 mm x 420 mm)",value:"A3"},{text:"A4 (210 mm x 297 mm)",value:"A4"},{text:"A5 (148 mm x 210 mm)",value:"A5"},{text:"A6 (105 mm x 148 mm)",value:"A6"}]}]},{text:"View",items:[{text:"Show Rulers",iconCss:"sf-icon-check-tick"},{text:"Show Grid",iconCss:"sf-icon-check-tick"},{separator:!0},{text:"Snap To Grid",iconCss:"sf-icon-check-tick"},{text:"Show Guides",iconCss:"sf-icon-check-tick"},{text:"Page Break"},{separator:!0},{text:"Fit To Screen"},{separator:!0}]}],this.extensionType=".csv",this.selectedItem=new uP,this.dropDownDataSources=new nP,this.palettes=new Gz,this.diagramEvents=new Qk(this.selectedItem),this.UtilityMethods=new rP,this.palettes=new Gz,this.dlgTarget=document.body,this.dialogPosition={X:100,Y:112},this.dialogVisibility=!1,this.isModalDialog=!1,this.dialogAnimationSettings={effect:"None"},this.exportingButtons=this.getDialogButtons("export"),this.printingButtons=this.getDialogButtons("print"),this.hyperlinkButtons=this.getDialogButtons("hyperlink"),this.uploadButtons=this.getUploadButtons(),this.path={saveUrl:"https://services.syncfusion.com/vue/production/api/FileUploader/Save",removeUrl:"https://services.syncfusion.com/vue/production/api/FileUploader/Remove"},this.diagramEvents=new Qk(this.selectedItem),this.diagramPropertyBinding=new Zk(this.selectedItem),this.diagramEvents.ddlTextPosition=this.ddlTextPosition,DH=this.loadDiagram.bind(this),EH=this.setImage.bind(this),wH=this.beforeItemRender.bind(this),TH=this.arrangeMenuBeforeOpen.bind(this),NH=this.arrangeMenuBeforeClose.bind(this),AH=this.designContextMenuOpen.bind(this),LH=this.menuClick.bind(this),OH=this.menuClick1.bind(this),kH=this.toolbarEditorClick.bind(this),jH=this.propertyPanel.bind(this),zH=this.zoomTemplate.bind(this),PH=this.zoomChange.bind(this),BH=this.offsetX.bind(this),HH=this.offsetY.bind(this),RH=this.nodeWidth.bind(this),VH=this.nodeHeight.bind(this),KH=this.aspectRatioClick.bind(this),UH=this.nodeRotationChange.bind(this),eR=this.toolbarInsertClick.bind(this),FH=this.nodeFillColorChange.bind(this),JH=this.nodeBoderStyleChange.bind(this),GH=this.nodeStrokeColorChange.bind(this),$H=this.nodeStrokeWidthChange.bind(this),WH=this.nodeOpacityChange.bind(this),YH=this.connectorColorChange.bind(this),_H=this.ConnectorLineWidthChnage.bind(this),QH=this.ConnectorOpacityChange.bind(this),ZH=this.nodeFontFamilyChange.bind(this),qH=this.nodeFontSizeChange.bind(this),XH=this.nodeFontColor.bind(this),tR=this.fontOpacityChangeEvent.bind(this)}componentDidMount(){this.generateDiagram(),this.uploader(),document.onmouseover=this.menumouseover.bind(this),this.diagramEvents.ddlTextPosition=this.ddlTextPosition;const t=this;setTimeout(()=>{t.loadPage()},20)}render(){return n.createElement("div",null,n.createElement("div",null,n.createElement("div",{style:{display:"none"}},n.createElement("input",{type:"file",id:"fileupload",name:"UploadFiles"})),n.createElement(oz,{id:"designContextMenu",ref:t=>this.arrangeContextMenu=t,animationSettings:this.dialogAnimationSettings,items:this.dropDownDataSources.arrangeMenuItems,onOpen:AH,cssClass:"designMenu",beforeItemRender:wH,select:LH,beforeClose:()=>this.arrangeMenuBeforeClose}),n.createElement("div",{className:"diagrambuilder-container"},n.createElement("div",{className:"header navbar"},n.createElement("div",{className:"db-header-container"},n.createElement("div",{className:"db-diagram-name-container"},n.createElement("span",{id:"diagramName",style:{width:"250px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},className:"db-diagram-name",onClick:this.renameDiagram},"Untitled Diagram"),n.createElement("input",{id:"diagramEditable",type:"text",className:"db-diagram-name",onKeyDown:this.diagramNameKeyDown,onBlur:this.diagramNameChange}),n.createElement("span",{id:"diagramreport",className:"db-diagram-name db-save-text"})),n.createElement("div",{className:"diagram-menu-control"},n.createElement("div",{className:"menu-control"},n.createElement(yz,{id:"diagram-menu",items:this.menuItems,select:LH,beforeOpen:TH,beforeClose:NH,beforeItemRender:wH})))),n.createElement("div",{className:"db-toolbar-editor"},n.createElement("div",{className:"db-toolbar-container"},n.createElement(sz,{id:"toolbarEditor",overflowMode:"Scrollable",clicked:kH},n.createElement(iz,null,n.createElement(ez,{prefixIcon:"sf-icon-undo tb-icons",tooltipText:"Undo",cssClass:"tb-item-start tb-item-undo"}),n.createElement(ez,{prefixIcon:"sf-icon-redo tb-icons",tooltipText:"Redo",cssClass:"tb-item-end tb-item-redo"}),n.createElement(ez,{type:"Separator"}),n.createElement(ez,{prefixIcon:"sf-icon-pan",tooltipText:"Pan Tool",cssClass:"tb-item-start pan-item"}),n.createElement(ez,{prefixIcon:"sf-icon-pointer",tooltipText:"Select Tool",cssClass:"tb-item-middle tb-item-selected"}),n.createElement(ez,{prefixIcon:"sf-icon-straight_line",tooltipText:"Straight",cssClass:"tb-item-middle"}),n.createElement(ez,{prefixIcon:"sf-icon-text",tooltipText:"Text Tool",cssClass:"tb-item-end"}),n.createElement(ez,{prefixIcon:"sf-icon-group",tooltipText:"Group",visible:!1,align:"Center",cssClass:"tb-item-start tb-item-align-category"}),n.createElement(ez,{type:"Separator",visible:!1,align:"Center"}),n.createElement(ez,{prefixIcon:"sf-icon-align_left",tooltipText:"Align Left",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-align-category"}),n.createElement(ez,{prefixIcon:"sf-icon-align_center",tooltipText:"Align Center",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-align-category"}),n.createElement(ez,{prefixIcon:"sf-icon-align_right",tooltipText:"Align Right",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-align-category"}),n.createElement(ez,{prefixIcon:"sf-icon-align_top",tooltipText:"Align Top",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-align-category"}),n.createElement(ez,{prefixIcon:"sf-icon-align_middle",tooltipText:"Align Middle",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-align-category"}),n.createElement(ez,{prefixIcon:"sf-icon-align_bottom",tooltipText:"Align Bottom",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-align-category"}),n.createElement(ez,{prefixIcon:"sf-icon-distribute_horizontal",tooltipText:"Distribute Objects Horizontally",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-space-category"}),n.createElement(ez,{prefixIcon:"sf-icon-distribute_vertical",tooltipText:"Distribute Objects Vertically",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-space-category"}),n.createElement(ez,{type:"Separator",visible:!1,align:"Center"}),n.createElement(ez,{prefixIcon:"sf-icon-bring-forward",tooltipText:"Bring Forward",visible:!1,align:"Center",cssClass:"tb-item-start tb-item-lock-category"}),n.createElement(ez,{prefixIcon:"sf-icon-bring-to-front",tooltipText:"Bring To Front",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-lock-category"}),n.createElement(ez,{prefixIcon:"sf-icon-send-backward",tooltipText:"Send Backward",visible:!1,align:"Center",cssClass:"tb-item-middle tb-item-lock-category"}),n.createElement(ez,{prefixIcon:"sf-icon-send-to-back",tooltipText:"Send To Back",visible:!1,align:"Center",cssClass:"tb-item-end tb-item-lock-category"}),n.createElement(ez,{type:"Separator",visible:!1,align:"Center"}),n.createElement(ez,{prefixIcon:"sf-icon-flip-vertical",tooltipText:"Horizontal Flip",visible:!1,align:"Center",cssClass:"tb-item-end tb-item-lock-category"}),n.createElement(ez,{prefixIcon:"sf-icon-flip-horizontal",tooltipText:"Vertical Flip",visible:!1,align:"Center",cssClass:"tb-item-end tb-item-lock-category"}),n.createElement(ez,{type:"Separator",visible:!1}),n.createElement(ez,{prefixIcon:"sf-icon-lock",tooltipText:"Lock",visible:!1,align:"Center",cssClass:"tb-item-start tb-item-lock-category"}),n.createElement(ez,{prefixIcon:"sf-icon-delete",tooltipText:"Delete",visible:!1,align:"Center",cssClass:"tb-item-end tb-item-lock-category"}),n.createElement(ez,{type:"Separator"}),n.createElement(ez,{cssClass:"tb-item-end tb-zoom-dropdown-btn",align:"Right",template:zH})))),n.createElement("div",{align:"Right"},n.createElement(Rz,{id:"hideProperty",isPrimary:"true",iconCss:"sf-icon-properties",title:"Hide/Show Properties",onClick:jH})))),n.createElement("div",{className:"row content"},n.createElement("div",{className:"sidebar show-overview"},n.createElement("div",{className:"db-palette-parent"},n.createElement(Hk,{id:"symbolpalette",ref:t=>this.palette=t,width:"100%",height:"100%",palettes:this.palettes.palettes,getSymbolInfo:this.palettes.getSymbolInfo,symbolMargin:this.palettes.symbolMargin,getNodeDefaults:this.palettes.setPaletteNodeDefaults,enableSearch:this.palettes.enableSearch}))),n.createElement("div",{className:"main-content",role:"main"},n.createElement("div",{className:"db-diagram-container"},n.createElement("div",{id:"diagramContainerDiv",className:"db-current-diagram-container"},n.createElement(Pk,{id:"diagram",ref:t=>this.diagram=t,width:"100%",height:"100%",pageSettings:this.pageSettings,scrollSettings:this.scrollSettings,rulerSettings:this.rulerSettings,nodes:this.nodes,connectors:this.connectors,getNodeDefaults:this.setNodeDefaults,getConnectorDefaults:this.setConnectorDefaults,created:this.created.bind(this),selectionChange:this.diagramEvents.selectionChange.bind(this.diagramEvents),positionChange:this.diagramEvents.nodePositionChange.bind(this.diagramEvents),sizeChange:this.diagramEvents.nodeSizeChange.bind(this.diagramEvents),rotateChange:this.diagramEvents.nodeRotationChange.bind(this.diagramEvents),dragEnter:this.diagramEvents.dragEnter.bind(this.diagramEvents),historyChange:this.diagramEvents.historyChange.bind(this.diagramEvents),scrollChange:this.scrollChange.bind(this),collectionChange:this.diagramEvents.collectionChange.bind(this.diagramEvents),contextMenuSettings:{show:!0}}))),n.createElement("div",{className:"db-property-editor-container",style:{overflow:"auto"}},n.createElement("div",{id:"generalDiagramContainer",className:"db-general-diagram-prop-container"},n.createElement("div",{id:"diagramPropertyContainer",className:"db-diagram-prop-container"},n.createElement("div",{className:"row db-prop-header-text"},"Page Settings",n.createElement(Rz,{className:"close",onClick:jH},n.createElement("i",{style:{width:"20px",height:"20px",fontSize:"20px"},className:"sf-icon-close"}))),n.createElement("div",{className:"db-prop-separator",style:{backgroundColor:"#b5b5b5",marginBottom:"10px"}}),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-12 db-col-left"},n.createElement("span",{className:"db-prop-text-style"},"Format"),n.createElement(vH,{id:"pageSettingsList",dataSource:this.dropDownDataSources.paperList,change:this.diagramPropertyBinding.paperListChange.bind(this.diagramPropertyBinding),fields:this.dropdownListFields,value:this.selectedItem.pageSettings.paperSize}))),n.createElement("div",{className:"row",id:"pageOrientation",style:{marginTop:"10px"}},n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-right"},n.createElement("span",{className:"db-prop-text-style"},"Orientation"))),n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement(Rz,{id:"pagePortrait",isPrimary:!0,isToggle:!0,style:{fontSize:"10px"},cssClass:"e-flat e-primary",iconCss:"sf-icon-portrait",name:"pageSettings",onClick:this.diagramPropertyBinding.pageOrientationChange.bind(this.diagramPropertyBinding)},"Portrait")),n.createElement("div",{className:"col-xs-6 db-col-right"},n.createElement(Rz,{id:"pageLandscape",isPrimary:!0,isToggle:!0,style:{fontSize:"10px"},cssClass:"e-flat e-primary e-active",iconCss:"sf-icon-landscape",name:"pageSettings",onClick:this.diagramPropertyBinding.pageOrientationChange.bind(this.diagramPropertyBinding)},"Landscape"))),n.createElement("div",{className:"row db-prop-row",id:"pageDimension",style:{display:"none"}},n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text"},n.createElement("span",null,"W")),n.createElement("div",{className:"db-text-input"},n.createElement(xz,{id:"pageWidth",min:100,format:"n0",value:this.selectedItem.pageSettings.pageWidth,change:this.diagramPropertyBinding.pageDimensionChange.bind(this.diagramPropertyBinding)})))),n.createElement("div",{className:"col-xs-6 db-col-right"},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text"},n.createElement("span",null,"H")),n.createElement("div",{className:"db-text-input"},n.createElement(xz,{id:"pageHeight",min:100,format:"n0",value:this.selectedItem.pageSettings.pageHeight,change:this.diagramPropertyBinding.pageDimensionChange.bind(this.diagramPropertyBinding)}))))),n.createElement("div",{className:"row db-prop-row",style:{marginTop:"10px"}},n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement("span",{className:"db-prop-text-style"},"Background"))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement("div",{className:"db-color-container"},n.createElement("div",{className:"db-color-input"},n.createElement(Oz,{type:"color",mode:"Palette",showButtons:!1,width:"100%",value:this.selectedItem.pageSettings.backgroundColor,change:this.diagramPropertyBinding.pageBackgroundChange1.bind(this.diagramPropertyBinding)}))))),n.createElement("div",{className:"row db-prop-row",style:{marginTop:"10px"}},n.createElement(Uz,{id:"showPageBreaks",label:"Page Breaks",ref:t=>this.showPageBreaks=t,checked:this.selectedItem.pageSettings.pageBreaks,change:this.diagramPropertyBinding.pageBreaksChange.bind(this.diagramPropertyBinding)}))),n.createElement("div",{id:"nodePropertyContainer",className:"db-node-prop-container",style:{display:"none"}},n.createElement("div",{className:"db-node-behaviour-prop",id:"dimen"},n.createElement("div",{className:"row db-prop-header-text"},"Properties",n.createElement(Rz,{className:"close",onClick:jH},n.createElement("i",{style:{width:"20px",height:"20px",fontSize:"20px"},className:"sf-icon-close"}))),n.createElement("div",{className:"db-prop-separator",style:{backgroundColor:"#b5b5b5",marginBottom:"10px"}}),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-right"},n.createElement("span",{className:"db-prop-text-style"},"Dimensions"))),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-left",style:{width:"97px"}},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text"},n.createElement("span",null,"X")),n.createElement("div",{className:"db-text-input"},n.createElement(xz,{id:"nodeOffsetX",ref:t=>this.nodeOffsetX=t,style:{width:"72px"},format:"n0",change:BH})))),n.createElement("div",{className:"col-xs-6 db-col-right",style:{width:"97px"}},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text"},n.createElement("span",null,"Y")),n.createElement("div",{className:"db-text-input"},n.createElement(xz,{ref:t=>this.nodeOffsetY=t,style:{width:"72px"},id:"nodeOffsetY",format:"n0",change:HH}))))),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-left",style:{width:"97px"}},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text"},n.createElement("span",null,"W")),n.createElement("div",{className:"db-text-input"},n.createElement(xz,{style:{width:"72px"},id:"nodeWidth",ref:t=>this.width=t,format:"n0",change:RH})))),n.createElement("div",{className:"col-xs-6 db-col-right",style:{width:"97px"}},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text"},n.createElement("span",null,"H")),n.createElement("div",{className:"db-text-input"},n.createElement(xz,{style:{width:"72px"},id:"nodeHeight",ref:t=>this.height=t,format:"n0",change:VH})))),n.createElement("div",{className:"col-xs-2 db-col-left",style:{width:"20px",paddingLeft:"7px"}},n.createElement(Rz,{style:{height:"26px",backgroundColor:"#ffff"},id:"aspectRatioBtn",ref:t=>this.aspectRatio=t,iconCss:"sf-icon-unlock",isToggle:!0,cssClass:"e-flat",onClick:KH}))),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-left",style:{width:"97px"}},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text"},n.createElement(Rz,{style:{margin:"-5px 0px 0px 0px"},iconCss:"sf-icon-rotate",id:"rotateIconBtn"})),n.createElement("div",{className:"db-text-input"},n.createElement(xz,{style:{width:"72px"},id:"nodeRotateAngle",ref:t=>this.rotate=t,format:"n0",change:UH}))))),n.createElement("div",{className:"db-prop-separator",style:{backgroundColor:"#b5b5b5",marginBottom:"15px"}}),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement(Rz,{style:{fontSize:"10px"},id:"insertlink",ref:t=>this.nodeInsert=t,iconCss:"sf-icon-insert_link",cssClass:"e-outline",isPrimary:!0,onClick:eR},"Insert link")),n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement(Rz,{style:{fontSize:"10px",marginLeft:"5px",width:"110px",paddingLeft:"3px"},id:"insertimage",iconCss:"sf-icon-insert_image",cssClass:"e-outline",isPrimary:!0,onClick:eR},"Insert image"))),n.createElement("div",{className:"db-prop-separator",style:{backgroundColor:"#b5b5b5"}})),n.createElement("div",{id:"nodeStyleProperties",className:"db-node-style-prop"},n.createElement("div",{className:"row db-background-style"},n.createElement("div",{className:"col-xs-6 db-col-right",style:{marginBottom:"3px"}},n.createElement("span",{className:"db-prop-text-style"},"Background color")),n.createElement("div",{className:"row db-prop-row"}),n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement("div",{className:"db-color-container"},n.createElement("div",{className:"db-color-input"},n.createElement(Oz,{id:"nodeFillColor",ref:t=>this.fillColor=t,type:"color",mode:"Palette",showButtons:!1,change:FH}))))),n.createElement("div",{className:"row db-border-style"},n.createElement("div",{className:"row db-prop-header-text db-border-style-header"},"Border/Line Styles"),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-right"},n.createElement("span",{className:"db-prop-text-style"},"Border Type")),n.createElement("div",{className:"col-xs-2 db-col-left",style:{marginLeft:"-6px"}},n.createElement("span",{className:"db-prop-text-style"},"Color")),n.createElement("div",{className:"col-xs-2 db-col-center",style:{marginLeft:"6px"}},n.createElement("span",{className:"db-prop-text-style"},"Thickness"))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-6 db-col-right",style:{width:"77px",marginRight:"0px"}},n.createElement(vH,{id:"nodeBorderStyle",ref:t=>this.nodeBorder=t,dataSource:this.dropDownDataSources.borderStyles,popupWidth:"160px",fields:this.dropdownListFields,template:this.itemTemplate,itemTemplate:this.lineItemTemplate,valueTemplate:this.lineValueTemplate,change:JH})),n.createElement("div",{className:"col-xs-2 db-col-center"},n.createElement("div",{className:"db-color-container",style:{width:"60px",marginLeft:"2px"}},n.createElement("div",{className:"db-color-input"},n.createElement(Oz,{id:"nodeStrokeColor",ref:t=>this.strokeColor=t,type:"color",mode:"Palette",showButtons:!1,change:GH})))),n.createElement("div",{className:"col-xs-2 db-col-right",style:{width:"73px",marginLeft:"32px"}},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text-input"},n.createElement(xz,{style:{width:"68px"},id:"nodeStrokeWidth",ref:t=>this.strokeWidth=t,min:.5,max:20,step:.5,change:$H}))))),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-2 db-col-right db-prop-text-style",style:{marginRight:"5px",paddingTop:"6px"}},n.createElement("span",{className:"db-prop-text-style"},"Opacity")),n.createElement("div",{className:"col-xs-8 db-col-left",style:{width:"120px",paddingRight:"10px",marginLeft:"10px"}},n.createElement(Ez,{min:0,ref:t=>this.opacity=t,max:100,step:10,type:"MinRange",change:WH})),n.createElement("div",{className:"col-xs-2 db-col-right",style:{width:"50px"}},n.createElement("input",{id:"nodeOpacitySliderText",type:"text",value:"100%",readOnly:!0,className:"db-readonly-input"})))))),n.createElement("div",{id:"connectorPropertyContainer",className:"db-connector-prop-container",style:{display:"none"}},n.createElement("div",{className:"row db-prop-header-text"},"Connector Properties"),n.createElement("div",{className:"db-prop-separator",style:{backgroundColor:"#b5b5b5"}}),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-left db-prop-text-style"},n.createElement("span",{className:"db-prop-text-style"},"Line color")),n.createElement("div",{className:"col-xs-4 db-col-right db-prop-text-style",style:{marginLeft:"18px"}},n.createElement("span",{className:"db-prop-text-style"},"Thickness"))),n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement("div",{className:"db-color-container"},n.createElement("div",{className:"db-color-input"},n.createElement(Oz,{id:"lineColor",ref:t=>this.lineColor=t,type:"color",mode:"Palette",showButtons:!1,value:this.selectedItem.connectorProperties.lineColor,change:YH})))),n.createElement("div",{className:"col-xs-6 db-col-right"},n.createElement("div",{className:"db-text-container",style:{width:"77px",marginLeft:"20px"}},n.createElement("div",{className:"db-text-input"},n.createElement(xz,{style:{width:"74px"},min:.5,max:25,step:.5,id:"lineWidth",ref:t=>this.lineWidth=t,value:this.selectedItem.connectorProperties.lineWidth,change:_H}))))),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-2 db-col-right db-prop-text-style",style:{marginRight:"3px",paddingTop:"6px"}},n.createElement("span",{className:"db-prop-text-style"},"Opacity")),n.createElement("div",{className:"col-xs-8 db-col-left",style:{width:"120px",paddingRight:"10px",marginLeft:"10px"}},n.createElement(Ez,{id:"connectorOpacityText",ref:t=>this.connectorOpacity=t,value:this.selectedItem.connectorProperties.opacity,min:0,max:100,step:10,type:"MinRange",change:QH})),n.createElement("div",{className:"col-xs-2 db-col-left",style:{width:"50px"}},n.createElement("input",{type:"text",id:"connectorOpacitySliderText",value:"100%",readOnly:!0,className:"db-readonly-input"})))),n.createElement("div",{id:"textPropertyContainer",className:"db-text-prop-container",style:{display:"none"}},n.createElement("div",{className:"db-prop-separator",style:{backgroundColor:"#b5b5b5"}}),n.createElement("div",{className:"col-xs-8 db-col-left db-prop-text-style"},n.createElement("span",{className:"db-prop-text-style"},"Text")),n.createElement("div",{className:"col-xs-4 db-col-left db-prop-text-style"},n.createElement("span",{className:"db-prop-text-style"},"Size")),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-8 db-col-left"},n.createElement(vH,{ref:t=>this.fontFamily=t,dataSource:this.dropDownDataSources.fontFamilyList,value:this.selectedItem.textProperties.fontFamily,fields:this.dropdownListFields,change:ZH,index:0})),n.createElement("div",{className:"col-xs-4 db-col-right"},n.createElement("div",{className:"db-text-container"},n.createElement("div",{className:"db-text-input"},n.createElement(xz,{style:{width:"73px"},id:"fontSizeTextProperties",min:5,max:50,step:1,format:"n0",value:this.selectedItem.textProperties.fontSize,ref:t=>this.fontSize=t,change:qH}))))),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-left",id:"textPositionDiv",style:{width:"148px"}},n.createElement(vH,{id:"ddlTextPosition",ref:t=>this.ddlTextPosition=t,index:0,dataSource:this.selectedItem.textProperties.textPositionDataSource,fields:this.dropdownListFields,change:this.diagramPropertyBinding.textPositionChange.bind(this.diagramPropertyBinding)})),n.createElement("div",{className:"col-xs-6 db-col-right",id:"textColorDiv",style:{width:"70px",marginLeft:"4px"}},n.createElement("div",{className:"db-color-container"},n.createElement("div",{className:"db-color-input"},n.createElement(Oz,{id:"textColor",ref:t=>this.fontColor=t,type:"color",mode:"Palette",showButtons:!1,value:this.selectedItem.textProperties.fontColor,change:XH}))))),n.createElement("div",{className:"row db-prop-row"},n.createElement("div",{className:"col-xs-6 db-col-left"},n.createElement("div",null,n.createElement(sz,{id:"toolbarTextStyle",overflowMode:"Scrollable",clicked:this.diagramPropertyBinding.toolbarTextStyleChange.bind(this.diagramPropertyBinding)},n.createElement(iz,null,n.createElement(ez,{prefixIcon:"sf-icon-bold",tooltipText:"Bold",cssClass:"tb-item-start"}),n.createElement(ez,{prefixIcon:"sf-icon-italic",tooltipText:"Italic",cssClass:"tb-item-middle"}),n.createElement(ez,{prefixIcon:"sf-icon-underline",tooltipText:"Underline",cssClass:"tb-item-end"}))))),n.createElement("div",{className:"col-xs-6 db-col-right"},n.createElement("div",null,n.createElement(sz,{id:"toolbarTextSubAlignment",overflowMode:"Scrollable",clicked:this.diagramPropertyBinding.toolbarTextSubAlignChange.bind(this.diagramPropertyBinding)},n.createElement(iz,null,n.createElement(ez,{prefixIcon:"sf-icon-align-left",tooltipText:"Align Text Left",cssClass:"tb-item-start"}),n.createElement(ez,{prefixIcon:"sf-icon-align-center",tooltipText:"Align Text Center",cssClass:"tb-item-middle"}),n.createElement(ez,{prefixIcon:"sf-icon-align-right",tooltipText:"Align Text Right",cssClass:"tb-item-end"})))))),n.createElement("div",{className:"row db-prop-row",id:"toolbarTextAlignmentDiv"},n.createElement(sz,{id:"toolbarTextAlignment",overflowMode:"Scrollable",clicked:this.diagramPropertyBinding.toolbarTextAlignChange.bind(this.diagramPropertyBinding)},n.createElement(iz,null,n.createElement(ez,{prefixIcon:"sf-icon-align-text-left",tooltipText:"Align Right",cssClass:"tb-item-start"}),n.createElement(ez,{prefixIcon:"sf-icon-align-text-horizontal-center",tooltipText:"Align Center",cssClass:"tb-item-middle"}),n.createElement(ez,{prefixIcon:"sf-icon-align-text-right",tooltipText:"Align left",cssClass:"tb-item-middle"}),n.createElement(ez,{prefixIcon:"sf-icon-align-text-bottom",tooltipText:"Align Top",cssClass:"tb-item-middle"}),n.createElement(ez,{prefixIcon:"sf-icon-align-text-vertical-center",tooltipText:"Align Middle",cssClass:"tb-item-middle"}),n.createElement(ez,{prefixIcon:"sf-icon-align-text-top",tooltipText:"Align Bottom",cssClass:"tb-item-end"})))),n.createElement("div",{className:"row db-prop-row",id:"textOpacityProperty"},n.createElement("div",{className:"col-xs-2 db-col-right db-prop-text-style",style:{marginRight:"12px",paddingTop:"6px"}},n.createElement("span",{className:"db-prop-text-style"},"Opacity")),n.createElement("div",{className:"col-xs-8 db-col-left",style:{width:"130px",paddingRight:"10px",marginLeft:"5px"}},n.createElement(Ez,{id:"opacityTextSlider",ref:t=>this.fontOpacity=t,min:0,max:100,step:10,type:"MinRange",value:this.selectedItem.textProperties.opacity,change:tR})),n.createElement("div",{className:"col-xs-2 db-col-right"},n.createElement("input",{id:"textOpacityText",type:"text",value:"100%",className:"db-readonly-input",readOnly:!0}))))))))),n.createElement(Gk,{id:"exportDialog",ref:t=>this.exportDialog=t,width:"400px",header:"Export Diagram",target:this.dlgTarget,isModal:!0,animationSettings:this.dialogAnimationSettings,visible:this.dialogVisibility,showCloseIcon:!0,buttons:this.exportingButtons},n.createElement("div",{id:"exportDialogContent"},n.createElement("div",{className:"row"},n.createElement("div",{className:"row"},"File Name"),n.createElement("div",{className:"row db-dialog-child-prop-row"},n.createElement("input",{type:"text",id:"exportfileName",value:this.selectedItem.exportSettings.fileName,onChange:this.exportFileNameChange}))),n.createElement("div",{className:"row db-dialog-prop-row"},n.createElement("div",{className:"row"},"Format"),n.createElement("div",{className:"row db-dialog-child-prop-row"},n.createElement(vH,{id:"exportFormat",value:this.selectedItem.exportSettings.format,dataSource:this.dropDownDataSources.fileFormats,fields:this.dropdownListFields,onChange:this.exportFormatChange}))))),n.createElement(Gk,{id:"hyperlinkDialog",ref:t=>this.hyperlinkDialog=t,width:"400px",header:"Insert Link",target:this.dlgTarget,isModal:!0,animationSettings:this.dialogAnimationSettings,visible:this.dialogVisibility,buttons:this.hyperlinkButtons,showCloseIcon:!0},n.createElement("div",{id:"hyperlinkDialogContent"},n.createElement("div",{className:"row"},n.createElement("div",{className:"row"},"Enter URL"),n.createElement("div",{className:"row db-dialog-child-prop-row"},n.createElement("input",{type:"text",id:"hyperlink"}))),n.createElement("div",{className:"row db-dialog-prop-row"},n.createElement("div",{className:"row"},"Link Text (Optional)"),n.createElement("div",{className:"row db-dialog-child-prop-row"},n.createElement("input",{type:"text",id:"hyperlinkText"}))))),n.createElement(Gk,{id:"fileUploadDialog",ref:t=>this.fileUploadDialog=t,width:"500px",height:"485px",header:"Upload File",target:this.dlgTarget,isModal:!0,animationSettings:this.dialogAnimationSettings,buttons:this.uploadButtons,showCloseIcon:!0,allowDragging:!0,visible:this.dialogVisibility},n.createElement("div",{id:"uploadDialogContent",className:"db-upload-content firstPage"},n.createElement("div",{id:"uploadInformationDiv",className:"row db-dialog-prop-row",style:{marginTop:"0px"}},n.createElement("div",{className:"row"},n.createElement("div",{id:"dropArea"},n.createElement("span",{id:"dropRegion",className:"droparea"},"Drop files here or"," ",n.createElement("a",{href:"",id:"browseFile"},n.createElement("u",null,"Browse"))),n.createElement(Nz,{id:"defaultfileupload",asyncSettings:this.path,success:this.onUploadSuccess,failure:this.onUploadFailure,progress:this.onUploadFileSelected}))))))))}beforeItemRender(t){const e=this.getShortCutKey(t.item.text);if(e){const i=document.createElement("span");i.textContent=e,i.style.pointerEvents="none",t.element.appendChild(i),i.setAttribute("class","db-shortcut")}this.UtilityMethods.enableMenuItems(t.item.text,this.selectedItem)?t.element.classList.add("e-disabled"):t.element.classList.contains("e-disabled")&&t.element.classList.remove("e-disabled")}lineItemTemplate(t){return n.createElement("div",{className:"db-ddl-template-style"},n.createElement("span",{className:t.className}))}lineValueTemplate(t){return n.createElement("div",{className:"db-ddl-template-style"},n.createElement("span",{className:t.className}))}designContextMenuOpen(t){if(t.element.classList.contains("e-menu-parent")){const e=document.querySelector("#btnDesignMenu-popup");t.element.style.left=S(parseInt(t.element.style.left,10)-parseInt(e.style.left,10)),t.element.style.top=S(parseInt(t.element.style.top,10)-parseInt(e.style.top,10))}}getShortCutKey(t){let e=navigator.platform.indexOf("Mac")>-1?"Cmd":"Ctrl";switch(t){case"New":e="Shift+N";break;case"Open":e+="+O";break;case"Save":e+="+S";break;case"Undo":e+="+Z";break;case"Redo":e+="+Y";break;case"Cut":e+="+X";break;case"Copy":e+="+C";break;case"Paste":e+="+V";break;case"Delete":e="Delete";break;case"Duplicate":e+="+D";break;case"Select All":e+="+A";break;case"Zoom In":e+="++";break;case"Zoom Out":e+="+-";break;case"Group":e+="+G";break;case"Ungroup":e+="+U";break;case"Send To Back":e+="+Shift+B";break;case"Bring To Front":e+="+Shift+F";break;default:e=""}return e}zoomTemplate(){return n.createElement("div",{id:"template_toolbar"},n.createElement(Fk,{id:"btnZoomIncrement",items:this.dropDownDataSources.zoomMenuItems,content:Math.round(100*this.selectedItem.selectedDiagram.scrollSettings.currentZoom)+"%",select:PH}))}zoomChange(t){let e=document.getElementById("btnZoomIncrement").ej2_instances[0],i=this.selectedItem.selectedDiagram,n=i.scrollSettings.currentZoom,s={};switch(t.item.text){case"Zoom In":i.zoomTo({type:"ZoomIn",zoomFactor:.2}),e.content=(100*i.scrollSettings.currentZoom).toFixed()+"%";break;case"Zoom Out":i.zoomTo({type:"ZoomOut",zoomFactor:.2}),e.content=(100*i.scrollSettings.currentZoom).toFixed()+"%";break;case"Zoom to Fit":i.fitToPage({mode:"Page",region:"Content"}),e.content=i.scrollSettings.currentZoom;break;case"Zoom to 50%":s.zoomFactor=.5/n-1,i.zoomTo(s);break;case"Zoom to 100%":s.zoomFactor=1/n-1,i.zoomTo(s);break;case"Zoom to 200%":s.zoomFactor=2/n-1,i.zoomTo(s)}e.content=Math.round(100*i.scrollSettings.currentZoom)+" %"}lockObject(t){this.selectedItem.isModified=!0;for(var e=0;e<t.selectedItems.nodes.length;e++){var i=t.selectedItems.nodes[e];i.constraints&ps.Drag?i.constraints=ps.PointerEvents|ps.Select:i.constraints=ps.Default}for(var n=0;n<t.selectedItems.connectors.length;n++){var s=t.selectedItems.connectors[n];s.constraints&cs.Drag?s.constraints=cs.PointerEvents|cs.Select:s.constraints=cs.Default}t.dataBind()}offsetX(t){t.isInteracted&&(this.selectedItem.nodeProperties.offsetX.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"offsetX",propertyValue:t}))}offsetY(t){t.isInteracted&&(this.selectedItem.nodeProperties.offsetY.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"offsetY",propertyValue:t}))}nodeWidth(t){t.isInteracted&&(this.selectedItem.nodeProperties.width.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"width",propertyValue:t}))}nodeHeight(t){t.isInteracted&&(this.selectedItem.nodeProperties.height.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"height",propertyValue:t}))}aspectRatioClick(t){var e=!0;let i=document.getElementById("aspectRatioBtn").ej2_instances[0];document.getElementById("aspectRatioBtn").classList.contains("e-active")?(e=!0,i.iconCss="sf-icon-lock"):(e=!1,i.iconCss="sf-icon-unlock"),this.selectedItem.nodePropertyChange({propertyName:"aspectRatio",propertyValue:e})}nodeRotationChange(t){this.selectedItem.nodeProperties.rotateAngle.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"rotateAngle",propertyValue:t})}nodeStrokeWidthChange(t){this.selectedItem.nodeProperties.strokeWidth.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"strokeWidth",propertyValue:t})}nodeFillColorChange(t){this.selectedItem.nodeProperties.fillColor.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"fillColor",propertyValue:t.currentValue.hex})}nodeOpacityChange(t){this.selectedItem.nodeProperties.opacity.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"opacity",propertyValue:t})}nodeFontFamilyChange(t){this.selectedItem.textProperties.fontFamily.value=t.value,this.selectedItem.textPropertyChange({propertyName:"fontFamily",propertyValue:t})}nodeFontSizeChange(t){this.selectedItem.textProperties.fontSize.value=t.value,this.selectedItem.textPropertyChange({propertyName:"fontSize",propertyValue:t})}nodeFontColor(t){this.selectedItem.textProperties.fontColor.value=t.currentValue.hex,this.selectedItem.textPropertyChange({propertyName:"fontColor",propertyValue:t})}connectorColorChange(t){this.selectedItem.connectorProperties.lineColor.value=t.currentValue.hex,this.selectedItem.connectorPropertyChange({propertyName:"lineColor",propertyValue:t})}flipObjects(t,e){let i=e.selectedItems.nodes.concat(e.selectedItems.connectors);for(let e=0;e<i.length;e++)i[e].flip^="horizontalflip"===t?ss.Horizontal:ss.Vertical;e.dataBind()}ConnectorLineWidthChnage(t){this.selectedItem.connectorProperties.lineWidth.value=t.value,this.selectedItem.connectorPropertyChange({propertyName:"lineWidth",propertyValue:t})}ConnectorOpacityChange(t){this.selectedItem.connectorProperties.opacity.value=t.value,this.selectedItem.connectorPropertyChange({propertyName:"opacity",propertyValue:t})}fontOpacityChangeEvent(t){this.selectedItem.textProperties.opacity.value=t.value,this.selectedItem.textPropertyChange({propertyName:"opacity",propertyValue:t})}nodeBoderStyleChange(t){this.selectedItem.nodeProperties.strokeStyle.value=t.value,this.selectedItem.nodePropertyChange({propertyName:"strokeStyle",propertyValue:t})}nodeStrokeColorChange(t){this.selectedItem.nodeProperties.strokeColor.value=t.currentValue.hex,this.selectedItem.nodePropertyChange({propertyName:"strokeColor",propertyValue:t})}getUploadButtons(){let t=[];return t.push({click:this.btnCancelClick.bind(this),buttonModel:{content:"Cancel",cssClass:"e-flat",isPrimary:!0}}),t}arrangeMenuBeforeOpen(t){for(var e=0;e<t.element.children.length;e++)t.element.children[e].style.display="block";t.event&&null!==ut(t.event.target,".e-dropdown-btn")&&(t.cancel=!0)}arrangeMenuBeforeClose(t){t.event&&null!==ut(t.event.target,".e-dropdown-btn")&&(t.cancel=!0),t.element||(t.cancel=!0)}menuClick(t){const e=document.getElementsByClassName("e-btn-hover")[0];e&&e.classList.remove("e-btn-hover");const i=this.selectedItem.selectedDiagram;switch(t.item.text.replace(/[' ']/g,"").toLowerCase()){case"new":i.clear();break;case"save":this.download(i.saveDiagram());break;case"export":this.selectedItem.exportSettings.fileName=document.getElementById("diagramName").innerHTML,document.getElementById("exportfileName").value=document.getElementById("diagramName").innerHTML,this.exportDialog.show();break;case"open":document.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click();break;case"print":this.btnPrintClick();break;case"undo":i.undo();break;case"redo":i.redo();break;case"cut":i.cut();break;case"copy":i.copy();break;case"paste":i.paste();break;case"delete":i.remove();break;case"insertimage":this.openUploadBox(".jpg,.png,.svg");break;case"showguides":i.snapSettings.constraints=i.snapSettings.constraints^os.SnapToObject,t.item.iconCss=t.item.iconCss?"":"sf-icon-check-tick";break;case"showgrid":i.snapSettings.constraints=i.snapSettings.constraints^os.ShowLines,t.item.iconCss=t.item.iconCss?"":"sf-icon-check-tick";break;case"snaptogrid":i.snapSettings.constraints=i.snapSettings.constraints^os.SnapToLines,t.item.iconCss=t.item.iconCss?"":"sf-icon-check-tick";break;case"fittoscreen":i.fitToPage({mode:"Page",region:"Content",margin:{left:0,top:0,right:0,bottom:0}}),t.item.iconCss=t.item.iconCss?"":"sf-icon-check-tick";break;case"fittowidth":i.fitToPage({mode:"Width",region:"Content",margin:{left:0,top:0,right:0,bottom:0}});break;case"showrulers":i.rulerSettings.showRulers=!i.rulerSettings.showRulers,t.item.iconCss=t.item.iconCss?"":"sf-icon-check-tick";break;case"pagebreak":t.item.iconCss=t.item.iconCss?"":"sf-icon-check-tick",t.item.iconCss?(i.pageSettings.showPageBreaks=!0,this.selectedItem.pageSettings.pageBreaks=!0):(i.pageSettings.showPageBreaks=!1,this.selectedItem.pageSettings.pageBreaks=!1),this.showPageBreaks.checked=!this.showPageBreaks.checked;break;case"landscape":t.item.parentObj.items[1].iconCss="",t.item.iconCss="sf-icon-check-tick",i.pageSettings.orientation="Landscape",document.getElementById("pageLandscape").classList.add("e-active"),document.getElementById("pagePortrait").classList.remove("e-active");break;case"portrait":t.item.parentObj.items[0].iconCss="",t.item.iconCss="sf-icon-check-tick",i.pageSettings.orientation="Portrait",document.getElementById("pagePortrait").classList.add("e-active"),document.getElementById("pageLandscape").classList.remove("e-active");break;case"letter(8.5inx11in)":case"legal(8.5inx14in)":case"a3(297mmx420mm)":case"a4(210mmx297mm)":case"a5(148mmx210mm)":case"a6(105mmx148mm)":case"tabloid(279mmx432mm)":this.diagramPropertyBinding.paperListChange(t,i),this.diagramPropertyBinding.updateSelection(t.item),document.getElementById("pageSettingsList").ej2_instances[0].element.value=t.item.text;break;case"insertlink":this.toolbarInsertClick(t)}}menuClick1(t){let e=document.getElementsByClassName("e-btn-hover")[0];switch(e&&e.classList.remove("e-btn-hover"),t.item.text.replace(/[" "]/g,"").toLowerCase()){case"insertlink":case"insertimage":this.toolbarInsertClick(t)}}download(t){if(window.navigator.msSaveBlob){let e=new Blob([t],{type:"data:text/json;charset=utf-8,"});window.navigator.msSaveOrOpenBlob(e,"Diagram.json")}else{let e="data:text/json;charset=utf-8,"+encodeURIComponent(t),i=document.createElement("a");i.href=e,i.download=document.getElementById("diagramName").innerHTML+".json",document.body.appendChild(i),i.click(),i.remove()}}menumouseover(t){let e=t.target;if(!e||"e-control e-dropdown-btn e-lib e-btn db-dropdown-menu"!==e.className&&"e-control e-dropdown-btn e-lib e-btn db-dropdown-menu e-ddb-active"!==e.className){if(null===ut(e,".e-dropdown-popup")&&null===ut(e,".e-dropdown-btn"))if(this.buttonInstance&&this.buttonInstance.getPopUpElement().classList.contains("e-popup-open"))this.buttonInstance.toggle(),document.getElementById(this.buttonInstance.element.id).classList.remove("e-btn-hover")}else{if(this.buttonInstance&&this.buttonInstance.id!==e.id&&this.buttonInstance.getPopUpElement().classList.contains("e-popup-open")){this.buttonInstance.toggle(),document.getElementById(this.buttonInstance.element.id).classList.remove("e-btn-hover")}let t=e.ej2_instances[0];if(this.buttonInstance=t,t.getPopUpElement().classList.contains("e-popup-close"))t.toggle(),"btnArrangeMenu"===t.element.id&&this.selectedItem.utilityMethods.enableArrangeMenuItems(this.selectedItem),document.getElementById(this.buttonInstance.element.id).classList.add("e-btn-hover")}}openUploadBox(t){let e=document.getElementById("defaultfileupload");e=e.ej2_instances[0],e.clearAll(),this.extensionType=e.allowedExtensions=t,e.dataBind(),document.getElementsByClassName("e-file-select-wrap")[0].children[0].click()}toolbarInsertClick(t){let e=this.selectedItem.selectedDiagram,i=(t.item?t.item.text:t.target.id).replace(/[' ']/g,"").toLowerCase();if(e.selectedItems.nodes.length>0)switch(i.toLowerCase()){case"insertlink":if(document.getElementById("hyperlink").value="",document.getElementById("hyperlinkText").value="",e.selectedItems.nodes[0].annotations.length>0){let t=e.selectedItems.nodes[0].annotations[0];(t.hyperlink.link||t.content)&&(document.getElementById("hyperlink").value=t.hyperlink.link,document.getElementById("hyperlinkText").value=t.hyperlink.content||t.content)}this.hyperlinkDialog.show();break;case"insertimage":this.openUploadBox(".jpg,.png,.svg")}}propertyPanel(){this.selectedItem.utilityMethods.hideElements("hide-properties",this.selectedItem.selectedDiagram)}getDialogButtons(t){const e=[];switch(t){case"export":e.push({click:this.btnExportClick.bind(this),buttonModel:{content:"Export",cssClass:"e-flat e-db-primary",isPrimary:!0}});break;case"print":e.push({click:this.btnPrintClick.bind(this),buttonModel:{content:"Print",cssClass:"e-flat e-db-primary",isPrimary:!0}});break;case"hyperlink":e.push({click:this.btnHyperLink.bind(this),buttonModel:{content:"Apply",cssClass:"e-flat e-db-primary",isPrimary:!0}})}return e.push({click:this.btnCancelClick.bind(this),buttonModel:{content:"Cancel",cssClass:"e-flat",isPrimary:!0}}),e}btnExportClick(){let t=this.selectedItem.selectedDiagram,e=document.getElementById("exportFormat").ej2_instances[0];t.exportDiagram({fileName:document.getElementById("exportfileName").value,format:e.value}),this.exportDialog.hide()}btnPrintClick(){let t=this.selectedItem.printSettings.pageWidth,e=this.selectedItem.printSettings.pageHeight;this.selectedItem.selectedDiagram.print({region:"Content",pageHeight:e,pageWidth:t,multiplePage:!this.selectedItem.printSettings.multiplePage,pageOrientation:this.selectedItem.printSettings.isPortrait?"Portrait":"Landscape"})}btnHyperLink(){const t=this.selectedItem.selectedDiagram.selectedItems.nodes[0];if(t.annotations.length>0)t.annotations[0].hyperlink.link=document.getElementById("hyperlink").value,t.annotations[0].hyperlink.content=document.getElementById("hyperlinkText").value,this.selectedItem.selectedDiagram.dataBind();else{const e={hyperlink:{content:document.getElementById("hyperlinkText").value,link:document.getElementById("hyperlink").value}};this.selectedItem.selectedDiagram.addLabels(t,[e]),this.selectedItem.selectedDiagram.dataBind()}this.hyperlinkDialog.hide()}btnCancelClick(t){switch(t.target.offsetParent.id){case"exportDialog":this.exportDialog.hide();break;case"hyperlinkDialog":this.hyperlinkDialog.hide()}}toolbarEditorClick(t){let e=this.selectedItem.selectedDiagram,i=document.getElementById("btnZoomIncrement").ej2_instances[0],n=t.item.tooltipText.replace(/[' ']/g,"").toLowerCase();switch(n){case"new":e.clear();break;case"undo":e.undo();break;case"redo":e.redo();break;case"open":document.getElementsByClassName("e-file-select-wrap")[0].querySelector("button").click();break;case"zoomin(ctrl++)":e.zoomTo({type:"ZoomIn",zoomFactor:.2}),i.content=e.scrollSettings.currentZoom=(100*e.scrollSettings.currentZoom).toFixed()+"%";break;case"zoomout(ctrl+-)":e.zoomTo({type:"ZoomOut",zoomFactor:.2}),i.content=e.scrollSettings.currentZoom=(100*e.scrollSettings.currentZoom).toFixed()+"%";break;case"cut":e.cut();break;case"copy":e.copy();break;case"paste":e.paste();break;case"print":this.btnPrintClick();break;case"export":this.exportDialog.show();break;case"save":this.download(e.saveDiagram());break;case"fillcolor":var s=e.selectedItems.nodes[0]?"nodeFillColor":"lineColor";this.UtilityMethods.showColorPicker(s,"tb-item-stroke");break;case"fontcolor":e.selectedItems.nodes[0].annotations&&this.UtilityMethods.showColorPicker("textColor","tb-item-stroke");break;case"bringtofront":e.bringToFront();break;case"sendtoback":e.sendToBack();break;case"sendbackward":e.sendBackward();break;case"bringforward":e.moveForward();break;case"pantool":e.tool=fs.ZoomPan;break;case"selecttool":e.clearSelection(),e.drawingObject={},e.tool=fs.SingleSelect|fs.MultipleSelect;break;case"group":e.group(),t.item.prefixIcon="sf-icon-ungroup",t.item.tooltipText="UnGroup";break;case"ungroup":e.unGroup(),t.item.prefixIcon="sf-icon-group",t.item.tooltipText="Group";break;case"delete":e.remove();break;case"lock":case"unlock":this.lockObject(e);break;case"alignleft":case"alignright":case"aligntop":case"alignbottom":case"alignmiddle":case"aligncenter":var r=n.replace("align",""),o=r.charAt(0).toUpperCase()+r.slice(1);e.align(o);break;case"distributeobjectshorizontally":e.distribute("RightToLeft");break;case"distributeobjectsvertically":e.distribute("BottomToTop");break;case"horizontalflip":case"verticalflip":this.flipObjects(n,e);break;case"texttool":e.drawingObject={shape:{type:"Text"},style:{strokeColor:"none",fill:"none"}},e.tool=fs.ContinuousDraw;break;case"straight":e.drawingObject={type:"Straight",targetDecorator:{shape:"none"}},e.tool=fs.ContinuousDraw;break;case"orthogonal":e.drawingObject={type:"Orthogonal"},e.tool=fs.ContinuousDraw;break;case"bezier":e.drawingObject={type:"Bezier"},e.tool=fs.ContinuousDraw}"pantool"!==n&&"selecttool"!==n&&"texttool"!==n&&"straight"!==n||-1===t.item.cssClass.indexOf("tb-item-selected")&&(this.UtilityMethods.removeSelectedToolbarItem(),t.item.cssClass+=" tb-item-selected")}renameDiagram(){document.getElementsByClassName("db-diagram-name-container")[0].classList.add("db-edit-name");const t=document.getElementById("diagramEditable");t.value=document.getElementById("diagramName").innerHTML,t.focus(),t.select()}diagramNameKeyDown(t){13===t.which&&(document.getElementById("diagramName").innerHTML=document.getElementById("diagramEditable").value,document.getElementsByClassName("db-diagram-name-container")[0].classList.remove("db-edit-name"))}diagramNameChange(){document.getElementById("diagramName").innerHTML=document.getElementById("diagramEditable").value,document.getElementsByClassName("db-diagram-name-container")[0].classList.remove("db-edit-name")}exportFormatChange(t){}exportRegionChange(t){}exportFileNameChange(t){}generateDiagram(){this.selectedItem.selectedDiagram=this.diagram}uploader(){new sE({asyncSettings:{saveUrl:"https://services.syncfusion.com/react/production/api/FileUploader/Save",removeUrl:"https://services.syncfusion.com/react/production/api/FileUploader/Remove"},success:this.onUploadSuccess,showFileList:!1}).appendTo("#fileupload")}onUploadSuccess(t){if("remove"!==t.operation){let e=t.file,i=e.rawFile,n=e.type.toString(),s=new FileReader;if("jpg"===n.toLowerCase()||"png"===n.toLowerCase()||"svg"===n.toLowerCase())s.readAsDataURL(i),s.onloadend=EH.bind(this);else if(s.readAsText(i),"json"===n){s.onloadend=DH.bind(this),document.getElementById("fileupload").ej2_instances[0].clearAll()}}}loadDiagram(t){document.getElementById("diagram").ej2_instances[0].loadDiagram(t.target.result),diagram.ej2_instances[0].fitToPage({mode:"Page",region:"Content"})}loadPage(){document.getElementsByClassName("diagrambuilder-container")[0].style.display="",this.selectedItem.selectedDiagram.updateViewPort(),this.selectedItem.nodeProperties.offsetX=this.nodeOffsetX,this.selectedItem.nodeProperties.offsetY=this.nodeOffsetY,this.selectedItem.nodeProperties.width=this.width,this.selectedItem.nodeProperties.height=this.height,this.selectedItem.nodeProperties.aspectRatio=this.aspectRatio,this.selectedItem.nodeProperties.rotateAngle=this.rotate,this.selectedItem.nodeProperties.fillColor=this.fillColor,this.selectedItem.nodeProperties.gradientDirection=this.gradientDirection,this.selectedItem.nodeProperties.gradientColor=this.gradientColor,this.selectedItem.nodeProperties.strokeStyle=this.nodeBorder,this.selectedItem.nodeProperties.opacity=this.opacity,this.selectedItem.nodeProperties.strokeWidth=this.strokeWidth,this.selectedItem.nodeProperties.strokeColor=this.strokeColor,this.selectedItem.connectorProperties.lineColor=this.lineColor,this.selectedItem.connectorProperties.lineStyle=this.lineStyle,this.selectedItem.connectorProperties.lineWidth=this.lineWidth,this.selectedItem.connectorProperties.sourceType=this.sourceType,this.selectedItem.connectorProperties.targetType=this.targetType,this.selectedItem.connectorProperties.sourceSize=this.sourceSize,this.selectedItem.connectorProperties.targetSize=this.targetSize,this.selectedItem.connectorProperties.lineJump=this.bridge,this.selectedItem.connectorProperties.lineJumpSize=this.bridgeSize,this.selectedItem.connectorProperties.opacity=this.connectorOpacity,this.selectedItem.textProperties.fontFamily=this.fontFamily,this.selectedItem.textProperties.fontSize=this.fontSize,this.selectedItem.textProperties.fontColor=this.fontColor,this.selectedItem.textProperties.opacity=this.fontOpacity,this.selectedItem.exportSettings.fileName=document.getElementById("diagramName").innerHTML}setImage(t){this.selectedItem.selectedDiagram.selectedItems.nodes[0].shape={type:"Image",source:t.target.result,align:"None"}}created(){this.selectedItem.selectedDiagram.fitToPage({mode:"Page",region:"Content"})}scrollChange(t){let e=this.selectedItem.selectedDiagram;if("Start"!==t.panState){let t=document.getElementById("btnZoomIncrement");if(t){let i=t.ej2_instances[0];i&&(i.content=Math.round(100*e.scrollSettings.currentZoom)+" %")}}}getNodeDefaults(t){t.style&&("transparent"!==t.style.fill||t.children||(t.style.fill="white"));return{style:{strokeWidth:1}}}getConnectorDefaults(t){return{annotations:[{content:"",style:{fill:"transparent"}}],style:{strokeWidth:2}}}}const nR=iR;s.createRoot(document.getElementById("root")).render(n.createElement(n.StrictMode,null,n.createElement(nR,null)))})();